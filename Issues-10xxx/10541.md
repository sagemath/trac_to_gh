# Issue 10541: Conversions of vectors to matrices

archive/issues_010488.json:
```json
{
    "body": "A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.\n\nSee the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.\n\nFirst patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.\n\nSecond patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.\n\n**Dependency**: #727\n\nAssignee: jason, was\n\nCC:  @jasongrout mhampton @vbraun @mstreng\n\nResolution: fixed\n\nAuthor: Rob Beezer\n\nReviewer: Volker Braun, Marco Streng\n\nMerged: sage-4.6.2.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10541\n\n",
    "closed_at": "2011-02-07T08:15:11Z",
    "created_at": "2011-01-01T06:06:12Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Conversions of vectors to matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10541",
    "user": "https://github.com/rbeezer"
}
```
A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.

See the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.

First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.

Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.

**Dependency**: #727

Assignee: jason, was

CC:  @jasongrout mhampton @vbraun @mstreng

Resolution: fixed

Author: Rob Beezer

Reviewer: Volker Braun, Marco Streng

Merged: sage-4.6.2.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10541





---

archive/issue_comments_114470.json:
```json
{
    "body": "Attachment [trac_10541_vectors_to_matrices.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541_vectors_to_matrices.patch) by @rbeezer created at 2011-01-02 01:34:47",
    "created_at": "2011-01-02T01:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114470",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10541_vectors_to_matrices.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541_vectors_to_matrices.patch) by @rbeezer created at 2011-01-02 01:34:47



---

archive/issue_comments_114471.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-02T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114471",
    "user": "https://github.com/rbeezer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114472.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.\n \n-One patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.\n+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.\n \n-Another patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column()\n+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.\n+\n \n Issue created by migration from https://trac.sagemath.org/ticket/10541\n \n``````\n",
    "created_at": "2011-01-02T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114472",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
 A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.
 
-One patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.
+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.
 
-Another patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column()
+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.
+
 
 Issue created by migration from https://trac.sagemath.org/ticket/10541
 
``````




---

archive/issue_comments_114473.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [trac_10541_deprecate_vector_transpose.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541_deprecate_vector_transpose.patch) by @rbeezer created at 2011-01-02 01:39:18",
    "created_at": "2011-01-02T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114473",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'></a>Attachment [trac_10541_deprecate_vector_transpose.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541_deprecate_vector_transpose.patch) by @rbeezer created at 2011-01-02 01:39:18



---

archive/issue_comments_114474.json:
```json
{
    "body": "<a id='comment:2'></a>Marshall, Volker:  The deprecation patch touches `sage/geometry/polyhedra.py` at about line 4859.  I changed (what appears) to be an outer product, because I would like to deprecate `transpose` for vectors (not matrices!), so it would need to become `column` and then once I figured out what was going on, it made sense to change the matrix constructor to `row`.  11 doctests failed prior to the change and all pass now.  Would one of you like to double-check my changes?\n\nBoth patches are necessary for the documentation to be right, one fixup ended up in the wrong patch.  Otherwise they are self-contained, but need to be applied in order.\n\nPatchbot:\n\nApply trac_10541_vectors_to_matrices.patch, trac_10541_deprecate_vector_transpose.patch",
    "created_at": "2011-01-02T01:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114474",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:2'></a>Marshall, Volker:  The deprecation patch touches `sage/geometry/polyhedra.py` at about line 4859.  I changed (what appears) to be an outer product, because I would like to deprecate `transpose` for vectors (not matrices!), so it would need to become `column` and then once I figured out what was going on, it made sense to change the matrix constructor to `row`.  11 doctests failed prior to the change and all pass now.  Would one of you like to double-check my changes?

Both patches are necessary for the documentation to be right, one fixup ended up in the wrong patch.  Otherwise they are self-contained, but need to be applied in order.

Patchbot:

Apply trac_10541_vectors_to_matrices.patch, trac_10541_deprecate_vector_transpose.patch



---

archive/issue_comments_114475.json:
```json
{
    "body": "<a id='comment:3'></a>I like the syntax! It definitely makes the code easier to read. Positive review.",
    "created_at": "2011-01-02T02:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114475",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>I like the syntax! It definitely makes the code easier to read. Positive review.



---

archive/issue_comments_114476.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-02T02:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114476",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_114477.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks, Volker!  (That was fast!)  It was Jason's suggestion, so he should take the credit.",
    "created_at": "2011-01-02T02:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114477",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:4'></a>Thanks, Volker!  (That was fast!)  It was Jason's suggestion, so he should take the credit.



---

archive/issue_comments_114478.json:
```json
{
    "body": "<a id='comment:5'></a>There are various doctest failures (not surprisingly, since you deprecated an existing and used function).",
    "created_at": "2011-01-26T13:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114478",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>There are various doctest failures (not surprisingly, since you deprecated an existing and used function).



---

archive/issue_comments_114479.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-26T13:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114479",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_114480.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 jdemeyer]:\n> There are various doctest failures (not surprisingly, since you deprecated an existing and used function).\n\n\nThanks, Jeroen.\n\nI know I tested this against the whole Sage library when I built it, and I just tested it against 4.6.1.alpha3 on the Sage library code with no failures.  So maybe it is premature bitrot?\n\nI need to get my dev tree caught up to the latest alpha, and then I will test this again against *everything* and track down the problem.\n\nSorry for the trouble.\n\nRob",
    "created_at": "2011-01-26T19:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114480",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:6'></a>Replying to [comment:5 jdemeyer]:
> There are various doctest failures (not surprisingly, since you deprecated an existing and used function).


Thanks, Jeroen.

I know I tested this against the whole Sage library when I built it, and I just tested it against 4.6.1.alpha3 on the Sage library code with no failures.  So maybe it is premature bitrot?

I need to get my dev tree caught up to the latest alpha, and then I will test this again against *everything* and track down the problem.

Sorry for the trouble.

Rob



---

archive/issue_comments_114481.json:
```json
{
    "body": "Attachment [trac_10541-doctests-conics.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctests-conics.patch) by @rbeezer created at 2011-01-27 18:05:23",
    "created_at": "2011-01-27T18:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114481",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10541-doctests-conics.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctests-conics.patch) by @rbeezer created at 2011-01-27 18:05:23



---

archive/issue_comments_114482.json:
```json
{
    "body": "<a id='comment:7'></a>Failures are due to some new \"transposes\" of vectors that slipped into 4.6.2.alpha2 as part of #727.  Latest patch changes those to columns, so doctests now pass in all of `sage/schemes`.\n\nMarco - do you want to check-off on just the changes in the latest patch?  Localized to just the `diagonal_matrix()` method in `con_field.py`.  Thanks.\n\nNeeds all three patches for full testing.",
    "created_at": "2011-01-27T18:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114482",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'></a>Failures are due to some new "transposes" of vectors that slipped into 4.6.2.alpha2 as part of #727.  Latest patch changes those to columns, so doctests now pass in all of `sage/schemes`.

Marco - do you want to check-off on just the changes in the latest patch?  Localized to just the `diagonal_matrix()` method in `con_field.py`.  Thanks.

Needs all three patches for full testing.



---

archive/issue_comments_114483.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-27T18:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114483",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114484.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 rbeezer]:\n> Marco - do you want to check-off on just the changes in the latest patch?  Localized to just the `diagonal_matrix()` method in `con_field.py`.  Thanks.\n\n\nThose changes are fine.\n\nBy the way, on line 767\tof the first page, you write `sage: w = v.row()` as an example of column, so `row` should be `column`. I suppose 2 lines later it would then be a `0 by 1` matrices instead of `1 by 0`.\n\nAs the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.",
    "created_at": "2011-01-27T20:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114484",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:8'></a>Replying to [comment:7 rbeezer]:
> Marco - do you want to check-off on just the changes in the latest patch?  Localized to just the `diagonal_matrix()` method in `con_field.py`.  Thanks.


Those changes are fine.

By the way, on line 767	of the first page, you write `sage: w = v.row()` as an example of column, so `row` should be `column`. I suppose 2 lines later it would then be a `0 by 1` matrices instead of `1 by 0`.

As the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.



---

archive/issue_comments_114485.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.\n+\n+See the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.\n+\n+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.\n+\n+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.\n \n \n Issue created by migration from https://trac.sagemath.org/ticket/10541\n``````\n",
    "created_at": "2011-01-27T20:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114485",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
+A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.
+
+See the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.
+
+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.
+
+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.
 
 
 Issue created by migration from https://trac.sagemath.org/ticket/10541
``````




---

archive/issue_comments_114486.json:
```json
{
    "body": "use all 4 patches in order",
    "created_at": "2011-01-27T20:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114486",
    "user": "https://github.com/mstreng"
}
```

use all 4 patches in order



---

archive/issue_comments_114487.json:
```json
{
    "body": "<a id='comment:9'></a>Attachment [trac_10541-doctest-empty-column.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctest-empty-column.patch) by @mstreng created at 2011-01-27 21:06:31\n\n> As the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.\n\n\nSorry [patchbot](http://wiki.sagemath.org/buildbot), I meant \"depends on #727\".\n\nAll changes look good, but I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?",
    "created_at": "2011-01-27T21:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114487",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:9'></a>Attachment [trac_10541-doctest-empty-column.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctest-empty-column.patch) by @mstreng created at 2011-01-27 21:06:31

> As the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.


Sorry [patchbot](http://wiki.sagemath.org/buildbot), I meant "depends on #727".

All changes look good, but I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?



---

archive/issue_comments_114488.json:
```json
{
    "body": "<a id='comment:10'></a>> All changes look good,\n\n\nand all tests pass, so I would give it a positive review, except that I just uploaded a patch here myself and\n\n> I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?",
    "created_at": "2011-01-27T21:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114488",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:10'></a>> All changes look good,


and all tests pass, so I would give it a positive review, except that I just uploaded a patch here myself and

> I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?



---

archive/issue_comments_114489.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 mstreng]:\n> > All changes look good,\n\n> \n> and all tests pass, so I would give it a positive review, except that I just uploaded a patch here myself and\n> \n> > I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?\n\n\nHi Marco,\n\nThanks for attention to this - I was going to get back to it later tonight.\n\nIn Sage, a vector does not have an orientation, just an implicit assumption that it should be treated like a row of a matrix if you *have* to make a decision.  I am trying to make the linear algebra code much easier for beginners to use, and then integrating all that into my open-source introductory textbook.  You can see progress so far at:\nhttp://wiki.sagemath.org/devel/LatexToWorksheet\n\nSo I feel strongly that just having a \"vector transpose\" is a source of confusion, and instead having row() and a column() methods will make it much more clear what is happening - and column() is a drop-in replacement.  This came up at:\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e/\n\nYou will see from the deprecation patch that `.transpose()` was hardly ever used anywhere.\n\nI do not think the doctest in question is incorrect.  It wasn't failing was it?  Patch implements `.row()` which converts a vector to a 1 x n matrix.  So an empty vector should become a 1 x 0 matrix as a row.  Maybe you would like a similar test for `.column()`?  And maybe that would be better than the one that is there.  Maybe having both would be the best solution.\n\nRob",
    "created_at": "2011-01-27T23:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114489",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'></a>Replying to [comment:10 mstreng]:
> > All changes look good,

> 
> and all tests pass, so I would give it a positive review, except that I just uploaded a patch here myself and
> 
> > I'm not so sure about deprecating `transpose` for vectors. Did you ask on the mailing lists if people object?


Hi Marco,

Thanks for attention to this - I was going to get back to it later tonight.

In Sage, a vector does not have an orientation, just an implicit assumption that it should be treated like a row of a matrix if you *have* to make a decision.  I am trying to make the linear algebra code much easier for beginners to use, and then integrating all that into my open-source introductory textbook.  You can see progress so far at:
http://wiki.sagemath.org/devel/LatexToWorksheet

So I feel strongly that just having a "vector transpose" is a source of confusion, and instead having row() and a column() methods will make it much more clear what is happening - and column() is a drop-in replacement.  This came up at:
http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e/

You will see from the deprecation patch that `.transpose()` was hardly ever used anywhere.

I do not think the doctest in question is incorrect.  It wasn't failing was it?  Patch implements `.row()` which converts a vector to a 1 x n matrix.  So an empty vector should become a 1 x 0 matrix as a row.  Maybe you would like a similar test for `.column()`?  And maybe that would be better than the one that is there.  Maybe having both would be the best solution.

Rob



---

archive/issue_comments_114490.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 mstreng]:\n> > As the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.\n\n> \n> Sorry [patchbot](http://wiki.sagemath.org/buildbot), I meant \"depends on #727\".\n\n\nPLEASE PLEASE PLEASE list this in the ticket description for HUMANS!!!",
    "created_at": "2011-01-28T08:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114490",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:9 mstreng]:
> > As the patchbot still uses 4.6.1, let's help it by mentioning that this ticket now requires #727.

> 
> Sorry [patchbot](http://wiki.sagemath.org/buildbot), I meant "depends on #727".


PLEASE PLEASE PLEASE list this in the ticket description for HUMANS!!!



---

archive/issue_comments_114491.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.\n \n+See the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.\n+\n+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.\n+\n+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.\n+\n+**Dependency**: #727\n \n Issue created by migration from https://trac.sagemath.org/ticket/10541\n \n``````\n",
    "created_at": "2011-01-28T08:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114491",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,12 @@
+A vector is naturally a single-row matrix or a single-column matrix.  There is an implicit assumption in Sage that the former is more desirable.  These patches aim to put the two options on even footing, while also making the conversion of the type perhaps more obvious.
 
+See the [discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/623226316555c28e) on sage-devel.
+
+First patch:  implements .row() and .column() for vectors, as suggested by Jason Grout.  There is a nice symmetry with the commands .row(i) and .column(i) for matrices, see the doctests.  Also allows sparseness to be preserved.
+
+Second patch: deprecates .transpose() which presumes rows are preferable and has its functionality exactly duplicated by .column().  Called once in a number field doctest, apparently for purely cosmetic reasons.  Called once in polyhedra code, presumably in an outer product (which should also be a new method for vectors).  Details on this in a comment.
+
+**Dependency**: #727
 
 Issue created by migration from https://trac.sagemath.org/ticket/10541
 
``````




---

archive/issue_comments_114492.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:\n> PLEASE PLEASE PLEASE list this in the ticket description for HUMANS!!!\n\n\nSorry Jeroen, I thought that wasn't neccessary as you've already merged #727. I'll put stuff like that in the description from now on\n\nAnyway, I think your request should be part of the documentation for trac (see #10702), instead of just in tickets! Or do capitals make you heard outside this ticket as well?",
    "created_at": "2011-01-28T10:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114492",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:
> PLEASE PLEASE PLEASE list this in the ticket description for HUMANS!!!


Sorry Jeroen, I thought that wasn't neccessary as you've already merged #727. I'll put stuff like that in the description from now on

Anyway, I think your request should be part of the documentation for trac (see #10702), instead of just in tickets! Or do capitals make you heard outside this ticket as well?



---

archive/issue_comments_114493.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:11 rbeezer]:\n> So I feel strongly that just having a \"vector transpose\" is a source of confusion, \n\n\nHi Rob,\n\nThanks for the explanation. I know most of that already, and personally do agree with it.\n\nOn the other hand, some people may have used vector `transpose` a lot in their own code, or be strongly opposed to this change for other reasons. You did ask if there were any objections, but that was in the middle of a long thread with title 'Adjoint of a matrix'. I'm not sure if people got enough chance to object.\n\n\n> I do not think the doctest in question is incorrect.  It wasn't failing was it?\n\n\n\nIt wasn't incorrect in that sense, it just occurred twice, and tested the wrong function in the second occurrence. Both `.row()` and `.column()` have the same doctest\n\n```\nsage: v = vector(ZZ, []) \nsage: w = v.row() \nsage: w.parent() \nFull MatrixSpace of 1 by 0 dense matrices over Integer Ring \n```\nIt would make more sense to replace `v.row()` by `v.column()` in the doctest of `column` instead of repeating the doctest of `row`. I assumed that is what you meant to do in your first patch, so it is what I did in mine.\n\nMarco",
    "created_at": "2011-01-28T10:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114493",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:14'></a>Replying to [comment:11 rbeezer]:
> So I feel strongly that just having a "vector transpose" is a source of confusion, 


Hi Rob,

Thanks for the explanation. I know most of that already, and personally do agree with it.

On the other hand, some people may have used vector `transpose` a lot in their own code, or be strongly opposed to this change for other reasons. You did ask if there were any objections, but that was in the middle of a long thread with title 'Adjoint of a matrix'. I'm not sure if people got enough chance to object.


> I do not think the doctest in question is incorrect.  It wasn't failing was it?



It wasn't incorrect in that sense, it just occurred twice, and tested the wrong function in the second occurrence. Both `.row()` and `.column()` have the same doctest

```
sage: v = vector(ZZ, []) 
sage: w = v.row() 
sage: w.parent() 
Full MatrixSpace of 1 by 0 dense matrices over Integer Ring 
```
It would make more sense to replace `v.row()` by `v.column()` in the doctest of `column` instead of repeating the doctest of `row`. I assumed that is what you meant to do in your first patch, so it is what I did in mine.

Marco



---

archive/issue_comments_114494.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 mstreng]:\n> Sorry Jeroen, I thought that wasn't neccessary as you've already merged #727.\n\n\nOf course, in this particular case it's not needed, but it was more a general principle.",
    "created_at": "2011-01-28T13:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114494",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Replying to [comment:13 mstreng]:
> Sorry Jeroen, I thought that wasn't neccessary as you've already merged #727.


Of course, in this particular case it's not needed, but it was more a general principle.



---

archive/issue_comments_114495.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:14 mstreng]:\n> On the other hand, some people may have used vector `transpose` a lot in their own code, or be strongly opposed to this change for other reasons. You did ask if there were any objections, but that was in the middle of a long thread with title 'Adjoint of a matrix'. I'm not sure if people got enough chance to object.\n\n\nWell, I knew that adjoint/adjugate stuff would provoke discussion.  So I did the right thing and worked hard on that long thread.  I thought I had a consensus and did all the work on a patch.  Only when I consulted authors of affected code did I get an objection.  The patch got switched to \"needs_work\" - but with no suggestions and apparently just a suggestion.  I don't see this change as so controversial.  But once burned, twice shy.  \n\nIf you wanted to take it to the list, I would not object.  Of course, it is not your resposnsibility.  I just am not too enthusiastic about going down that road again right now.  I'm still unsure about what to do with the adjoint mess.\n\n> It wasn't incorrect in that sense, it just occurred twice, and tested the wrong function in the second occurrence. \n\n\nOK, my fault.  Sorry.  I just read your change and did not read it in context.  So I understand now, and appreciate the catch and your contribution.\n\nRob",
    "created_at": "2011-01-29T02:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114495",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:16'></a>Replying to [comment:14 mstreng]:
> On the other hand, some people may have used vector `transpose` a lot in their own code, or be strongly opposed to this change for other reasons. You did ask if there were any objections, but that was in the middle of a long thread with title 'Adjoint of a matrix'. I'm not sure if people got enough chance to object.


Well, I knew that adjoint/adjugate stuff would provoke discussion.  So I did the right thing and worked hard on that long thread.  I thought I had a consensus and did all the work on a patch.  Only when I consulted authors of affected code did I get an objection.  The patch got switched to "needs_work" - but with no suggestions and apparently just a suggestion.  I don't see this change as so controversial.  But once burned, twice shy.  

If you wanted to take it to the list, I would not object.  Of course, it is not your resposnsibility.  I just am not too enthusiastic about going down that road again right now.  I'm still unsure about what to do with the adjoint mess.

> It wasn't incorrect in that sense, it just occurred twice, and tested the wrong function in the second occurrence. 


OK, my fault.  Sorry.  I just read your change and did not read it in context.  So I understand now, and appreciate the catch and your contribution.

Rob



---

archive/issue_comments_114496.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 rbeezer]:\n> I just am not too enthusiastic about going down that road again right now.\n\n\nI can understand that. I guess people who missed out on that particular discussion can object during the deprecation period. I was already satisfied with your 3 patches, and I will interpret \n\n> appreciate the catch and your contribution.\n\n\nas a positive review for my own (trivial) patch.",
    "created_at": "2011-01-29T14:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114496",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:17'></a>Replying to [comment:16 rbeezer]:
> I just am not too enthusiastic about going down that road again right now.


I can understand that. I guess people who missed out on that particular discussion can object during the deprecation period. I was already satisfied with your 3 patches, and I will interpret 

> appreciate the catch and your contribution.


as a positive review for my own (trivial) patch.



---

archive/issue_comments_114497.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-29T14:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114497",
    "user": "https://github.com/mstreng"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_114498.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 mstreng]:\n\nHi Marco,\n\nThanks again for the catch on the doctest and understanding the dangerous waters of deprecating *anything*.  ;-)  It will, of course, be easy to rollback this deprecation and downgrade it to some sort of advisory in the documentation.  I'll be at this project for some time, so I'll keep an eye on it.\n\nRob",
    "created_at": "2011-01-30T05:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114498",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:18'></a>Replying to [comment:17 mstreng]:

Hi Marco,

Thanks again for the catch on the doctest and understanding the dangerous waters of deprecating *anything*.  ;-)  It will, of course, be easy to rollback this deprecation and downgrade it to some sort of advisory in the documentation.  I'll be at this project for some time, so I'll keep an eye on it.

Rob



---

archive/issue_comments_114499.json:
```json
{
    "body": "<a id='comment:19'></a>Doctest failure:\n\n```\nsage -t  -force_lib devel/sage/sage/geometry/triangulation/point_configuration.py\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.6.2.alpha4/devel/sage-main/sage/geometry/triangulation/point_configuration.py\", line 1510:\n    sage: pyramid.restricted_automorphism_group()\nExpected:\n    Permutation Group with generators [(3,5), (2,3)(4,5), (2,4)]\nGot:\n    doctest:1529: DeprecationWarning: (Since Sage Version 4.6.2) The transpose() method for vectors has been deprecated, use column() instead\n    (or check to see if you have a vector when you really want a matrix)\n    Permutation Group with generators [(3,5), (2,3)(4,5), (2,4)]\n**********************************************************************\n```",
    "created_at": "2011-02-01T14:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114499",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Doctest failure:

```
sage -t  -force_lib devel/sage/sage/geometry/triangulation/point_configuration.py
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.6.2.alpha4/devel/sage-main/sage/geometry/triangulation/point_configuration.py", line 1510:
    sage: pyramid.restricted_automorphism_group()
Expected:
    Permutation Group with generators [(3,5), (2,3)(4,5), (2,4)]
Got:
    doctest:1529: DeprecationWarning: (Since Sage Version 4.6.2) The transpose() method for vectors has been deprecated, use column() instead
    (or check to see if you have a vector when you really want a matrix)
    Permutation Group with generators [(3,5), (2,3)(4,5), (2,4)]
**********************************************************************
```



---

archive/issue_comments_114500.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-02-01T14:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114500",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_114501.json:
```json
{
    "body": "Apply all 5 patches, in order",
    "created_at": "2011-02-01T17:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114501",
    "user": "https://github.com/rbeezer"
}
```

Apply all 5 patches, in order



---

archive/issue_comments_114502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-01T17:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114502",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114503.json:
```json
{
    "body": "<a id='comment:20'></a>Attachment [trac_10541-doctest-triangulation.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctest-triangulation.patch) by @rbeezer created at 2011-02-01 17:58:02\n\nConflict comes from new code in #9918 as of 4.6.2.alpha3.\n\nLatest patch converts an outer product to `v.column()*v.row()`, so tests now pass in the affected file.\n\nVolker - do you want to check-off on this change to your code?  You might also like the outer-product method waiting at #10545.  ;-)\n\nRob",
    "created_at": "2011-02-01T17:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114503",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:20'></a>Attachment [trac_10541-doctest-triangulation.patch](tarball://root/attachments/some-uuid/ticket10541/trac_10541-doctest-triangulation.patch) by @rbeezer created at 2011-02-01 17:58:02

Conflict comes from new code in #9918 as of 4.6.2.alpha3.

Latest patch converts an outer product to `v.column()*v.row()`, so tests now pass in the affected file.

Volker - do you want to check-off on this change to your code?  You might also like the outer-product method waiting at #10545.  ;-)

Rob



---

archive/issue_comments_114504.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-02-01T18:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114504",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_114505.json:
```json
{
    "body": "<a id='comment:21'></a>Thanks, looks good now.",
    "created_at": "2011-02-01T18:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114505",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>Thanks, looks good now.



---

archive/issue_comments_114506.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 vbraun]:\n> Thanks, looks good now. \n\n\nThanks for the quick look.  Maybe (just maybe) this will get wrapped up on the current release!",
    "created_at": "2011-02-01T18:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114506",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:22'></a>Replying to [comment:21 vbraun]:
> Thanks, looks good now. 


Thanks for the quick look.  Maybe (just maybe) this will get wrapped up on the current release!



---

archive/issue_events_027061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:15:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10541#event-27061"
}
```



---

archive/issue_comments_114507.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-02-07T08:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10541",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10541#issuecomment-114507",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
