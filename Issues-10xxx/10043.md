# Issue 10043: Complete rewrite of LP solver interfaces

archive/issues_010042.json:
```json
{
    "assignees": [
        "https://github.com/nathanncohen"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThis (large) patch creates a `backends` directory in the `numerical/` folder.\n\nIt adds the following files :\n\n* glpk_backend.pyx/pxd\n* coin_backend.pyx/pxd\n* cplex_backend.pyx/pxd\n* generic_backend.pyx/pxd\n\nIt removes the following files from `numerical`\n\n* mip_glpk.pyx/pxd\n* mip_coin.pyx/pxd\n* mip_cplex.pyx/pxd\n* osi_interface.pyx/pxd\n\nWhat for ? There is no a real interface between Sage and all these solvers. Not just a \"solve\"function that does everything at the same time. It is now much clearer, much more efficient, and it will be faaaaaaaar easier to use solver-specific features. It can now be used directly in Cython, and we can now deal with constraint generation (see patches XXX and XXX), which is a great news.\n\nI know this patch is huge, and I swear I tried to avoid it by considering step-by-step patches, which slowly became a nightmare... The good point in all this is that all the LP-related methods are extensively tested through all the graph methods, which are very likely to detect the important mistakes. I do not doubt there are many left, and I expect this patch to be followed by several \"fixes\" as these new features are being used, but.... I hope this review will get us rid of most of them !\n\nThankssssssssss !!!\n\nNathann\n\n(With this patch, there is no need anymore to install CBC in order to use CPLEX. Just adding the cplex files to include/ and lib/, as indicated at the end of http://www.sagemath.org/doc/constructions/linear_programming.html#solvers and running ``sage -b`` is enough)\n\n\nCC:  @malb @sagetrac-mvngu @haraldschilly @nexttime\n\nComponent: **linear programming**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Martin Albrecht, Nathann Cohen**\n\nMerged: **sage-4.6.1.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10043_\n\n",
    "closed_at": "2010-11-01T10:13:32Z",
    "created_at": "2010-09-30T22:43:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Complete rewrite of LP solver interfaces",
    "type": "issue",
    "updated_at": "2010-11-01T10:13:32Z",
    "url": "https://github.com/sagemath/sage/issues/10043",
    "user": "https://github.com/nathanncohen"
}
```
<div id="comment:0"></div>

This (large) patch creates a `backends` directory in the `numerical/` folder.

It adds the following files :

* glpk_backend.pyx/pxd
* coin_backend.pyx/pxd
* cplex_backend.pyx/pxd
* generic_backend.pyx/pxd

It removes the following files from `numerical`

* mip_glpk.pyx/pxd
* mip_coin.pyx/pxd
* mip_cplex.pyx/pxd
* osi_interface.pyx/pxd

What for ? There is no a real interface between Sage and all these solvers. Not just a "solve"function that does everything at the same time. It is now much clearer, much more efficient, and it will be faaaaaaaar easier to use solver-specific features. It can now be used directly in Cython, and we can now deal with constraint generation (see patches XXX and XXX), which is a great news.

I know this patch is huge, and I swear I tried to avoid it by considering step-by-step patches, which slowly became a nightmare... The good point in all this is that all the LP-related methods are extensively tested through all the graph methods, which are very likely to detect the important mistakes. I do not doubt there are many left, and I expect this patch to be followed by several "fixes" as these new features are being used, but.... I hope this review will get us rid of most of them !

Thankssssssssss !!!

Nathann

(With this patch, there is no need anymore to install CBC in order to use CPLEX. Just adding the cplex files to include/ and lib/, as indicated at the end of http://www.sagemath.org/doc/constructions/linear_programming.html#solvers and running ``sage -b`` is enough)


CC:  @malb @sagetrac-mvngu @haraldschilly @nexttime

Component: **linear programming**

Author: **Nathann Cohen**

Reviewer: **Martin Albrecht, Nathann Cohen**

Merged: **sage-4.6.1.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/10043_





---

archive/issue_events_129789.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-30T22:43:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "milestone_number": null,
    "milestone_title": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129789"
}
```



---

archive/issue_events_129790.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-30T22:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "c: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129790"
}
```



---

archive/issue_events_129791.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-30T22:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129791"
}
```



---

archive/issue_events_129792.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-30T22:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129792"
}
```



---

archive/issue_events_129793.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-30T22:43:20Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129793"
}
```



---

archive/issue_comments_092015.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,3 +22,5 @@\n \n Nathann\n \n+(With this patch, there is no need anymore to install CBC in order to use CPLEX. Just adding the cplex files to include/ and lib/, as indicated at the end of http://www.sagemath.org/doc/constructions/linear_programming.html#solvers and running ``sage -b`` is enough)\n+\n``````\n",
    "created_at": "2010-09-30T22:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92015",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,3 +22,5 @@
 
 Nathann
 
+(With this patch, there is no need anymore to install CBC in order to use CPLEX. Just adding the cplex files to include/ and lib/, as indicated at the end of http://www.sagemath.org/doc/constructions/linear_programming.html#solvers and running ``sage -b`` is enough)
+
``````




---

archive/issue_events_129794.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-01T08:42:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129794"
}
```



---

archive/issue_comments_092016.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n(updated to be compatible with alpha2)",
    "created_at": "2010-10-01T13:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92016",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

(updated to be compatible with alpha2)



---

archive/issue_comments_092017.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nRebased on #10043\n\nNathann",
    "created_at": "2010-10-11T07:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92017",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Rebased on #10043

Nathann



---

archive/issue_comments_092018.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI applied the patch to 4.6.alpha3 without problems and doctests pass. The overall design looks good. However, the documentation is much much too sparse, especially since this is supposed to be a generic interface. All functions should get a docstring describing their expected behaviour and all instantiations should have docstrings testing them (of course, only indirectly since they are cdef'ed). I know it is a lot of work I'm asking for, but I think it is necessary.",
    "created_at": "2010-10-12T14:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92018",
    "user": "https://github.com/malb"
}
```

<div id="comment:5" align="right">comment:5</div>

I applied the patch to 4.6.alpha3 without problems and doctests pass. The overall design looks good. However, the documentation is much much too sparse, especially since this is supposed to be a generic interface. All functions should get a docstring describing their expected behaviour and all instantiations should have docstrings testing them (of course, only indirectly since they are cdef'ed). I know it is a lot of work I'm asking for, but I think it is necessary.



---

archive/issue_events_129795.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-10-12T14:29:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129795"
}
```



---

archive/issue_events_129796.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-10-12T14:29:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129796"
}
```



---

archive/issue_comments_092019.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@malb](#comment%3A5):\n\nHello !\n\n> I applied the patch to 4.6.alpha3 without problems and doctests pass. \n\nBefore anything else, thank you for that `:-)`\n\n> The overall design looks good. However, the documentation is much much too sparse, especially since this is supposed to be a generic interface. All functions should get a docstring describing their expected behaviour and all instantiations should have docstrings testing them (of course, only indirectly since they are cdef'ed). \n\nGot it. I will document the expected INPUT/OUTPUT, but do you really think doctests are necessary at this level ? As you say, it will be indirect as these methods are all cdef (sage -coverage answers 100% on these files because of that), so as there is a wealth of methods testing them all in the graph/ and numerical/ directory... That's an honest question, as I do not see how to write smarter doctests than just a short example of how LP is used in Sage, and copy/paste it in each function as the same code would test them all...\n\n> I know it is a lot of work I'm asking for, but I think it is necessary.\n\nIndeed. As long as you ask it knowing it means a lot of time, I do not mind doing it (as soon as I will have your advise onthe previous question)\n\nThanks\n\nNathann",
    "created_at": "2010-10-12T14:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92019",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@malb](#comment%3A5):

Hello !

> I applied the patch to 4.6.alpha3 without problems and doctests pass. 

Before anything else, thank you for that `:-)`

> The overall design looks good. However, the documentation is much much too sparse, especially since this is supposed to be a generic interface. All functions should get a docstring describing their expected behaviour and all instantiations should have docstrings testing them (of course, only indirectly since they are cdef'ed). 

Got it. I will document the expected INPUT/OUTPUT, but do you really think doctests are necessary at this level ? As you say, it will be indirect as these methods are all cdef (sage -coverage answers 100% on these files because of that), so as there is a wealth of methods testing them all in the graph/ and numerical/ directory... That's an honest question, as I do not see how to write smarter doctests than just a short example of how LP is used in Sage, and copy/paste it in each function as the same code would test them all...

> I know it is a lot of work I'm asking for, but I think it is necessary.

Indeed. As long as you ask it knowing it means a lot of time, I do not mind doing it (as soon as I will have your advise onthe previous question)

Thanks

Nathann



---

archive/issue_comments_092020.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nathanncohen](#comment%3A6):\n> Got it. I will document the expected INPUT/OUTPUT, but do you really think \n> doctests are necessary at this level ? As you say, it will be indirect as these \n> methods are all cdef (sage -coverage answers 100% on these files because of that), \n> so as there is a wealth of methods testing them all in the graph/ and numerical/ \n> directory... That's an honest question, as I do not see how to write smarter \n> doctests than just a short example of how LP is used in Sage, and copy/paste it in \n> each function as the same code would test them all...\n\nThere should at least be doctests in the generic backend class, which highlight how these cdef functions are used. My reason for asking for doctests for all functions in the instantiations is that e.g. the graph class will only test the default LP backend and would not check the other (optional) backends. I'm happy to have the same doctests in all instantiations except that a different solver is used each time. In fact, we could write a template file which has all the doctests in it, and one string replace of e.g. \"YOUR_SOLVER\" with e.g. \"SCIP\" would make it easy to have nice coverage of all the functions. Also, the more low level a doctest is, the easier it is to debug a failure.",
    "created_at": "2010-10-12T14:45:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92020",
    "user": "https://github.com/malb"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nathanncohen](#comment%3A6):
> Got it. I will document the expected INPUT/OUTPUT, but do you really think 
> doctests are necessary at this level ? As you say, it will be indirect as these 
> methods are all cdef (sage -coverage answers 100% on these files because of that), 
> so as there is a wealth of methods testing them all in the graph/ and numerical/ 
> directory... That's an honest question, as I do not see how to write smarter 
> doctests than just a short example of how LP is used in Sage, and copy/paste it in 
> each function as the same code would test them all...

There should at least be doctests in the generic backend class, which highlight how these cdef functions are used. My reason for asking for doctests for all functions in the instantiations is that e.g. the graph class will only test the default LP backend and would not check the other (optional) backends. I'm happy to have the same doctests in all instantiations except that a different solver is used each time. In fact, we could write a template file which has all the doctests in it, and one string replace of e.g. "YOUR_SOLVER" with e.g. "SCIP" would make it easy to have nice coverage of all the functions. Also, the more low level a doctest is, the easier it is to debug a failure.



---

archive/issue_comments_092021.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRewritten... Again. With proper documentation which appear in the reference manual and for each backend (and not only generic_backend), with tests, with.... Well, just improved I hope `:-)`\n\nNathann",
    "created_at": "2010-10-17T12:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92021",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Rewritten... Again. With proper documentation which appear in the reference manual and for each backend (and not only generic_backend), with tests, with.... Well, just improved I hope `:-)`

Nathann



---

archive/issue_events_129797.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-17T12:41:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129797"
}
```



---

archive/issue_events_129798.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-17T12:41:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129798"
}
```



---

archive/issue_comments_092022.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[trac_10043.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043.patch.gz)**\n\nHi, a few comments. They are rather nitpicky but since you're defining an interface it would be hard to change any of this at a later time.\n\n* there is one doctest failure, where you forgot to catch the `NotImplementedError`\n* `getSolver` should be `get_solver` according to Python coding conventions\n* Sage matrices use `ncols()` instead of `n_cols()`, I suggest to do the same for consistency (same for (`nrows`, `add_column` instead of `add_col`)\n* Isn't `set_sense()` the canonical vocabulary instead of `set_direction()`?\n* I think we have a bias in Sage to using `coefficient` instead of `coeff` in function names\n* One could rename `set_log_level` to `set_verbose(_level)()` to match the global function names already defined in Sage (see below for comments on getters and setters)\n* I wonder if it would make sense to rename `add_constraint` to `add_linear_constraint`. Of course, this is a linear programming backend but many of the solvers we support also support non-linear constraints.\n* Sage matrices define `row()` instead of `get_row()`. I guess if you change the name then maybe all `get_XXX()` might be replaced by `XXX()` which seems to conform to Python conventions.\n* In the same spirit one could replace `get/set_variable_min/max` by functions `variable_min/max` which return the value if no optional argument is given and set the value if it is given. Same for similar functions. It seems getter and setter functions are considered unpythonic. http://tomayko.com/writings/getters-setters-fuxors",
    "created_at": "2010-10-18T11:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92022",
    "user": "https://github.com/malb"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[trac_10043.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043.patch.gz)**

Hi, a few comments. They are rather nitpicky but since you're defining an interface it would be hard to change any of this at a later time.

* there is one doctest failure, where you forgot to catch the `NotImplementedError`
* `getSolver` should be `get_solver` according to Python coding conventions
* Sage matrices use `ncols()` instead of `n_cols()`, I suggest to do the same for consistency (same for (`nrows`, `add_column` instead of `add_col`)
* Isn't `set_sense()` the canonical vocabulary instead of `set_direction()`?
* I think we have a bias in Sage to using `coefficient` instead of `coeff` in function names
* One could rename `set_log_level` to `set_verbose(_level)()` to match the global function names already defined in Sage (see below for comments on getters and setters)
* I wonder if it would make sense to rename `add_constraint` to `add_linear_constraint`. Of course, this is a linear programming backend but many of the solvers we support also support non-linear constraints.
* Sage matrices define `row()` instead of `get_row()`. I guess if you change the name then maybe all `get_XXX()` might be replaced by `XXX()` which seems to conform to Python conventions.
* In the same spirit one could replace `get/set_variable_min/max` by functions `variable_min/max` which return the value if no optional argument is given and set the value if it is given. Same for similar functions. It seems getter and setter functions are considered unpythonic. http://tomayko.com/writings/getters-setters-fuxors



---

archive/issue_events_129799.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-10-18T11:37:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129799"
}
```



---

archive/issue_events_129800.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-10-18T11:37:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129800"
}
```



---

archive/issue_events_129801.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-18T16:46:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129801"
}
```



---

archive/issue_events_129802.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-18T16:46:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129802"
}
```



---

archive/issue_comments_092023.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAfter several more hours... All of it is addressed :-)\n\nNathann",
    "created_at": "2010-10-18T16:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92023",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

After several more hours... All of it is addressed :-)

Nathann



---

archive/issue_comments_092024.json:
```json
{
    "body": "Attachment: **[trac_10043 - review 1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/bea9ec8cfefa028bc819ae34f1045d52.gz)**",
    "created_at": "2010-10-19T17:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92024",
    "user": "https://github.com/malb"
}
```

Attachment: **[trac_10043 - review 1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/bea9ec8cfefa028bc819ae34f1045d52.gz)**



---

archive/issue_comments_092025.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac_10043_referee.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043_referee.patch.gz)**\n\nI've attached a referee patch which fixes the following issues:\n* Nathan didn't claim copyright but he should, I've also added him as AUTHOR in the docstring\n* `get_objective_coeff` -> `get_objective_coefficient`, it seems to be an oversight that it wasn't renamed\n* removed the optional modules Coin and CPLEX from the reference manual (the produce errors since they cannot be found if they are not installed)\n\nI guess it would be nice to have pickling for these backends but it is unrealistic that it can be implemented for all (or even most) of them. Thus, I'd say if my referee patch is accepted by Nathann, this is good to go.",
    "created_at": "2010-10-19T17:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92025",
    "user": "https://github.com/malb"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac_10043_referee.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043_referee.patch.gz)**

I've attached a referee patch which fixes the following issues:
* Nathan didn't claim copyright but he should, I've also added him as AUTHOR in the docstring
* `get_objective_coeff` -> `get_objective_coefficient`, it seems to be an oversight that it wasn't renamed
* removed the optional modules Coin and CPLEX from the reference manual (the produce errors since they cannot be found if they are not installed)

I guess it would be nice to have pickling for these backends but it is unrealistic that it can be implemented for all (or even most) of them. Thus, I'd say if my referee patch is accepted by Nathann, this is good to go.



---

archive/issue_comments_092026.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry for this coefficient thing.... I was convinced to have changed it but `^^;`\n\nYou're right about this cplex/cbc thing. But maybe we will also have to deal with optional doc, as we already deal with libraries conditionally built according to the spkg installed.\n\nAbout the copyright, I have a *technical* question : why do you think I should ?.. I often see people adding their names in methods they add, or at the head of files, and I really do not mind as they wrote them themselves... But I tried to \"forget it\" when I could, not willing to play a patent game I do not like.... Philosophically, I prefer to contribute without really leaving my name, but why do you think these files should be copyrighted ? Isn't it some \"sage copyright\" by default ?\n\nNathann",
    "created_at": "2010-10-19T17:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92026",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry for this coefficient thing.... I was convinced to have changed it but `^^;`

You're right about this cplex/cbc thing. But maybe we will also have to deal with optional doc, as we already deal with libraries conditionally built according to the spkg installed.

About the copyright, I have a *technical* question : why do you think I should ?.. I often see people adding their names in methods they add, or at the head of files, and I really do not mind as they wrote them themselves... But I tried to "forget it" when I could, not willing to play a patent game I do not like.... Philosophically, I prefer to contribute without really leaving my name, but why do you think these files should be copyrighted ? Isn't it some "sage copyright" by default ?

Nathann



---

archive/issue_comments_092027.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nathanncohen](#comment%3A12):\n> About the copyright, I have a *technical* question : why do you think I should ?\n\nWe license this software via GPLv2+ to everybody. To license something, it needs to have a copyright (reversed, you cannot license something that has no assigned creator). Also, internationally there is nothing like \"public domain\" like in the usa. We can rely on mercurial to do this, but if somebody only looks at the source there has this to be. You can read more about this in the history of international copyright (e.g. berne convention) and of course in the text of the GPL itself.",
    "created_at": "2010-10-19T18:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92027",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nathanncohen](#comment%3A12):
> About the copyright, I have a *technical* question : why do you think I should ?

We license this software via GPLv2+ to everybody. To license something, it needs to have a copyright (reversed, you cannot license something that has no assigned creator). Also, internationally there is nothing like "public domain" like in the usa. We can rely on mercurial to do this, but if somebody only looks at the source there has this to be. You can read more about this in the history of international copyright (e.g. berne convention) and of course in the text of the GPL itself.



---

archive/issue_comments_092028.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> We license this software via GPLv2+ to everybody. To license something, it needs to have a copyright (reversed, you cannot license something that has no assigned creator). Also, internationally there is nothing like \"public domain\" like in the usa. We can rely on mercurial to do this, but if somebody only looks at the source there has this to be. You can read more about this in the history of international copyright (e.g. berne convention) and of course in the text of the GPL itself.\n\nWell, the book I'm reading these days is actually entitled \"intellectual property\", I'll probably learn about all this pretty soon... It's french law though... I really had no idea there was nothing like \"public domain\" in the USA !\n\nThank you for this lesson. \n\nAnd thank you *very much* Mike for your help with this ticket !!! :-)\n\nAll tests pass. Nothing that worries me for the moment. Positive review to this ticket !\n\nNathann",
    "created_at": "2010-10-19T18:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92028",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

> We license this software via GPLv2+ to everybody. To license something, it needs to have a copyright (reversed, you cannot license something that has no assigned creator). Also, internationally there is nothing like "public domain" like in the usa. We can rely on mercurial to do this, but if somebody only looks at the source there has this to be. You can read more about this in the history of international copyright (e.g. berne convention) and of course in the text of the GPL itself.

Well, the book I'm reading these days is actually entitled "intellectual property", I'll probably learn about all this pretty soon... It's french law though... I really had no idea there was nothing like "public domain" in the USA !

Thank you for this lesson. 

And thank you *very much* Mike for your help with this ticket !!! :-)

All tests pass. Nothing that worries me for the moment. Positive review to this ticket !

Nathann



---

archive/issue_events_129803.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-19T18:27:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129803"
}
```



---

archive/issue_events_129804.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-19T18:27:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129804"
}
```



---

archive/issue_comments_092029.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> Well, the book I'm reading these days is actually entitled \"intellectual property\", I'll probably learn about all this pretty soon... \n\nsoon we will consult you about these matters ;)\n\n> It's french law though... I really had no idea there was nothing like \"public domain\" in the USA !\n> \n\nuhm, i meant, internationally. in the usa exists public domain, but not in other countries and afaik there is no way to apply this us copyright law automatically outside the usa ;) There is also a difference if you want to make something public domain right now or if you want to wait ~80 years.\n\n... and on top of that, things are even more complicated because law changes all the time.",
    "created_at": "2010-10-19T18:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92029",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment%3A14):
> Well, the book I'm reading these days is actually entitled "intellectual property", I'll probably learn about all this pretty soon... 

soon we will consult you about these matters ;)

> It's french law though... I really had no idea there was nothing like "public domain" in the USA !
> 

uhm, i meant, internationally. in the usa exists public domain, but not in other countries and afaik there is no way to apply this us copyright law automatically outside the usa ;) There is also a difference if you want to make something public domain right now or if you want to wait ~80 years.

... and on top of that, things are even more complicated because law changes all the time.



---

archive/issue_events_129805.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T12:03:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "milestone_number": null,
    "milestone_title": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129805"
}
```



---

archive/issue_events_129806.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T12:03:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129806"
}
```



---

archive/issue_comments_092030.json:
```json
{
    "body": "Reviewer: **Martin Albrecht, Nathann Cohen**",
    "created_at": "2010-10-23T12:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92030",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Martin Albrecht, Nathann Cohen**



---

archive/issue_comments_092031.json:
```json
{
    "body": "Same as trac_10043 - review 1.patch",
    "created_at": "2010-10-23T12:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92031",
    "user": "https://github.com/jdemeyer"
}
```

Same as trac_10043 - review 1.patch



---

archive/issue_comments_092032.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac_10043_review1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043_review1.patch.gz)**\n\nPlease don't put \"strange\" characters such as spaces in patch filenames.",
    "created_at": "2010-10-23T12:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92032",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac_10043_review1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043_review1.patch.gz)**

Please don't put "strange" characters such as spaces in patch filenames.



---

archive/issue_comments_092033.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nPlease update the commit message of trac_10043_review1.patch",
    "created_at": "2010-10-23T12:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92033",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Please update the commit message of trac_10043_review1.patch



---

archive/issue_events_129807.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T12:30:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129807"
}
```



---

archive/issue_events_129808.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T12:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129808"
}
```



---

archive/issue_comments_092034.json:
```json
{
    "body": "Attachment: **[trac_10043-review1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043-review1.patch.gz)**\n\nupdated version or review 1 patch : with commit message and no spaces",
    "created_at": "2010-10-23T15:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92034",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_10043-review1.patch.gz](https://github.com/sagemath/sage/files/ticket10043/trac_10043-review1.patch.gz)**

updated version or review 1 patch : with commit message and no spaces



---

archive/issue_comments_092035.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDone !",
    "created_at": "2010-10-23T15:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92035",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Done !



---

archive/issue_events_129809.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-23T15:47:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129809"
}
```



---

archive/issue_events_129810.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-10-23T15:47:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129810"
}
```



---

archive/issue_comments_092036.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha0**",
    "created_at": "2010-11-01T10:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10043#issuecomment-92036",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha0**



---

archive/issue_events_129811.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-01T10:13:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129811"
}
```



---

archive/issue_events_129812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-01T10:13:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10043",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10043#event-129812"
}
```
