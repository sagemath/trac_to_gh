# Issue 10493: Upgrade Cython to 0.14.1

archive/issues_010440.json:
```json
{
    "body": "Version 0.14.1 was recently released, and has some bugfixes and nice features.\n\nUse the following spkg and patch:\n1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)\n2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) \n\n**CC:**  @robertwb @kiwifb\n\n**Keywords:** cython spkg\n\n**Author:** Robert Bradshaw\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Merged:** sage-4.7.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10493\n\n",
    "closed_at": "2011-05-06T07:18:11Z",
    "created_at": "2010-12-18T20:26:50Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "title": "Upgrade Cython to 0.14.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10493",
    "user": "https://github.com/jasongrout"
}
```
Version 0.14.1 was recently released, and has some bugfixes and nice features.

Use the following spkg and patch:
1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)
2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) 

**CC:**  @robertwb @kiwifb

**Keywords:** cython spkg

**Author:** Robert Bradshaw

**Reviewer:** Fran√ßois Bissey

**Merged:** sage-4.7.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10493





---

archive/issue_comments_100684.json:
```json
{
    "body": "<a id='comment:1'></a>\nWe're in pretty good shape. There's a couple of minor patches to the library that need to go in, but other than that upgrading to 0.14 should be pretty straightforward. See, e.g. https://sage.math.washington.edu:8091/hudson/view/ExtLibs/job/sage-tests/",
    "created_at": "2010-12-19T09:43:39Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100684",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:1'></a>
We're in pretty good shape. There's a couple of minor patches to the library that need to go in, but other than that upgrading to 0.14 should be pretty straightforward. See, e.g. https://sage.math.washington.edu:8091/hudson/view/ExtLibs/job/sage-tests/



---

archive/issue_comments_100685.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"cython spkg\".",
    "created_at": "2011-01-12T01:46:59Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100685",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "cython spkg".



---

archive/issue_comments_100686.json:
```json
{
    "body": "<a id='comment:2'></a>\nIs the `__getattr__` patch (in the 0.13 Cython spkg) still needed?",
    "created_at": "2011-01-12T01:46:59Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
Is the `__getattr__` patch (in the 0.13 Cython spkg) still needed?



---

archive/issue_comments_100687.json:
```json
{
    "body": "<a id='comment:3'></a>\nNo, that is now handled via a flag. There are several bugfixes in 0.14.1 that I'd like to get in, which should be out shortly (before 4.6.2 is at release candidate for sure, and I knew we missed the window for 4.6.1) which is why I haven't done anything on this ticket yet.",
    "created_at": "2011-01-12T02:01:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100687",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:3'></a>
No, that is now handled via a flag. There are several bugfixes in 0.14.1 that I'd like to get in, which should be out shortly (before 4.6.2 is at release candidate for sure, and I knew we missed the window for 4.6.1) which is why I haven't done anything on this ticket yet.



---

archive/issue_comments_100688.json:
```json
{
    "body": "<a id='comment:4'></a>\nUpdated package with just the `__getattr__` patches removed as they are now in the upstream source:\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.14.spkg",
    "created_at": "2011-01-12T04:38:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100688",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
Updated package with just the `__getattr__` patches removed as they are now in the upstream source:

http://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.14.spkg



---

archive/issue_comments_100689.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks, but that is not sufficient, as we need to pass the appropriate flags. \n\nThe most recent spkg can be found at https://sage.math.washington.edu:8091/hudson/job/sage-build/lastSuccessfulBuild/artifact/cython-devel.spkg (though the Sage library requires a couple of patches as well).",
    "created_at": "2011-01-12T06:29:31Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100689",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>
Thanks, but that is not sufficient, as we need to pass the appropriate flags. 

The most recent spkg can be found at https://sage.math.washington.edu:8091/hudson/job/sage-build/lastSuccessfulBuild/artifact/cython-devel.spkg (though the Sage library requires a couple of patches as well).



---

archive/issue_comments_100690.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Version 0.14 was recently released, and has some bugfixes and nice features.\n+Version 0.14.1 was recently released, and has some bugfixes and nice features.\n``````\n",
    "created_at": "2011-02-08T20:36:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100690",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Version 0.14 was recently released, and has some bugfixes and nice features.
+Version 0.14.1 was recently released, and has some bugfixes and nice features.
``````




---

archive/issue_comments_100691.json:
```json
{
    "body": "<a id='comment:6'></a>\nUpdating the description to upgrade to 0.14.1, which is now the most recent release.  Has anyone worked on an 0.14.1 spkg?",
    "created_at": "2011-02-08T20:36:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100691",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
Updating the description to upgrade to 0.14.1, which is now the most recent release.  Has anyone worked on an 0.14.1 spkg?



---

archive/issue_events_080205.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-08T20:36:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "rename": {
        "from": "Upgrade Cython to 0.14",
        "to": "Upgrade Cython to 0.14.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80205"
}
```



---

archive/attachments_014186.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "10493-cython-0.14.1.patch",
    "asset_url": "tarball://root/attachments/ticket10493/10493-cython-0.14.1.patch",
    "created_at": "2011-02-09T07:41:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch",
    "user": "https://github.com/robertwb"
}
```



---

archive/issue_comments_100692.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Attachment:** [10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch)\n\nSpkg at http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg",
    "created_at": "2011-02-09T07:41:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100692",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:7'></a>
**Attachment:** [10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch)

Spkg at http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg



---

archive/issue_events_080206.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-02-09T07:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80206"
}
```



---

archive/issue_comments_100693.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [@robertwb](#comment%3A1):\n> There's a couple of minor patches to the library that need to go in\n\nIs this still the case with the 0.14.1 spkg?",
    "created_at": "2011-02-09T22:25:39Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100693",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
Replying to [@robertwb](#comment%3A1):
> There's a couple of minor patches to the library that need to go in

Is this still the case with the 0.14.1 spkg?



---

archive/issue_comments_100694.json:
```json
{
    "body": "<a id='comment:10'></a>\nI think that's what the patch is all about. I applied it to 4.6.2.alpha4 and it happily built and sage -testall did not show any problems for me. But may be the following warnings should be addressed\n\n```\nwarning: sage/combinat/combinat_cython.pyx:14:0: 'stdlib' is deprecated, use 'libc.stdlib'\nwarning: sage/ext/interpreters/wrapper_rdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'\nwarning: sage/rings/polynomial/polynomial_real_mpfr_dense.pyx:7:0: 'python_int' is deprecated, use 'cpython'\nwarning: sage/rings/polynomial/polynomial_real_mpfr_dense.pyx:8:0: 'python_float' is deprecated, use 'cpython'\nwarning: sage/ext/interpreters/wrapper_cdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'\nwarning: sage/ext/interpreters/wrapper_rdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'\nwarning: sage/ext/interpreters/wrapper_py.pxd:3:0: 'python_object' is deprecated, use 'cpython'\nwarning: sage/ext/interpreters/wrapper_rr.pxd:3:0: 'python_object' is deprecated, use 'cpython'\nwarning: sage/ext/interpreters/wrapper_el.pxd:3:0: 'python_object' is deprecated, use 'cpython'\n```\nAnd possibly\n\n```\nwarning: sage/modular/modsym/p1list.pyx:703:17: cdef variable 'i' declared after it is used\n```\nFinally I am wondering about these\n\n```\nwarning: sage/matrix/matrix0.pyx:53:22: Function signature does not match previous declaration\nwarning: sage/matrix/matrix_window.pyx:9:17: Function signature does not match previous declaration\nwarning: sage/matrix/matrix_sparse.pyx:18:33: Function signature does not match previous declaration\n```\nBut all these were present before upgrading to cython-0.14.1.\nWe could use the opportunity to fix some of them before they bite us later, especially the deprecated ones.",
    "created_at": "2011-02-09T23:13:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100694",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
I think that's what the patch is all about. I applied it to 4.6.2.alpha4 and it happily built and sage -testall did not show any problems for me. But may be the following warnings should be addressed

```
warning: sage/combinat/combinat_cython.pyx:14:0: 'stdlib' is deprecated, use 'libc.stdlib'
warning: sage/ext/interpreters/wrapper_rdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'
warning: sage/rings/polynomial/polynomial_real_mpfr_dense.pyx:7:0: 'python_int' is deprecated, use 'cpython'
warning: sage/rings/polynomial/polynomial_real_mpfr_dense.pyx:8:0: 'python_float' is deprecated, use 'cpython'
warning: sage/ext/interpreters/wrapper_cdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'
warning: sage/ext/interpreters/wrapper_rdf.pxd:3:0: 'python_object' is deprecated, use 'cpython'
warning: sage/ext/interpreters/wrapper_py.pxd:3:0: 'python_object' is deprecated, use 'cpython'
warning: sage/ext/interpreters/wrapper_rr.pxd:3:0: 'python_object' is deprecated, use 'cpython'
warning: sage/ext/interpreters/wrapper_el.pxd:3:0: 'python_object' is deprecated, use 'cpython'
```
And possibly

```
warning: sage/modular/modsym/p1list.pyx:703:17: cdef variable 'i' declared after it is used
```
Finally I am wondering about these

```
warning: sage/matrix/matrix0.pyx:53:22: Function signature does not match previous declaration
warning: sage/matrix/matrix_window.pyx:9:17: Function signature does not match previous declaration
warning: sage/matrix/matrix_sparse.pyx:18:33: Function signature does not match previous declaration
```
But all these were present before upgrading to cython-0.14.1.
We could use the opportunity to fix some of them before they bite us later, especially the deprecated ones.



---

archive/issue_comments_100695.json:
```json
{
    "body": "<a id='comment:11'></a>\nForgot these two:\n\n```\nwarning: sage/structure/parent.pyx:124:4: dict already a builtin Cython type\nwarning: sage/symbolic/pynac.pyx:589:5: Function 'py_get_parent_char' previously declared as 'extern'\n```",
    "created_at": "2011-02-09T23:16:54Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100695",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
Forgot these two:

```
warning: sage/structure/parent.pyx:124:4: dict already a builtin Cython type
warning: sage/symbolic/pynac.pyx:589:5: Function 'py_get_parent_char' previously declared as 'extern'
```



---

archive/issue_comments_100696.json:
```json
{
    "body": "<a id='comment:12'></a>\nYes, the (attached) patch is still needed. There's some significant cleanup that I want to do, including fixing these warnings, but I think that should be a separate ticket.",
    "created_at": "2011-02-09T23:20:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100696",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:12'></a>
Yes, the (attached) patch is still needed. There's some significant cleanup that I want to do, including fixing these warnings, but I think that should be a separate ticket.



---

archive/issue_events_080207.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-02-09T23:41:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80207"
}
```



---

archive/issue_events_080208.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-02-09T23:41:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80208"
}
```



---

archive/issue_comments_100697.json:
```json
{
    "body": "<a id='comment:13'></a>\nWell if you open a separate ticket for these warnings I am quite happy to give this a positive review. I have built it on linux-86, linux-amd64 and OS X 10.5. \nIt all looks good to me.",
    "created_at": "2011-02-09T23:41:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100697",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Well if you open a separate ticket for these warnings I am quite happy to give this a positive review. I have built it on linux-86, linux-amd64 and OS X 10.5. 
It all looks good to me.



---

archive/issue_comments_100698.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Version 0.14.1 was recently released, and has some bugfixes and nice features.\n+\n+Use the following spkg and patch:\n+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg)\n+2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) \n``````\n",
    "created_at": "2011-02-09T23:41:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100698",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Version 0.14.1 was recently released, and has some bugfixes and nice features.
+
+Use the following spkg and patch:
+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg)
+2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) 
``````




---

archive/issue_comments_100699.json:
```json
{
    "body": "<a id='comment:14'></a>\nTicket for warnings at #10764.",
    "created_at": "2011-02-10T03:17:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100699",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:14'></a>
Ticket for warnings at #10764.



---

archive/issue_comments_100700.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2011-02-10T08:11:21Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100700",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_events_080209.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-10T08:11:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80209"
}
```



---

archive/issue_events_080210.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-10T08:11:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80210"
}
```



---

archive/issue_comments_100701.json:
```json
{
    "body": "**Author:** Robert Bradshaw",
    "created_at": "2011-02-10T08:11:21Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100701",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Robert Bradshaw



---

archive/issue_comments_100702.json:
```json
{
    "body": "<a id='comment:16'></a>\nAfter building sage-4.6.2.rc0 and applying the spkg and patch from this ticket:\n\n```\n$ ./sage -ba-force\n[...]\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/src/sage-4.6.2.rc0/local//include -I/usr/local/src/sage-4.6.2.rc0/local//include/csage -I/usr/local/src/sage-4.6.2.rc0/devel//sage/sage/ext -I/usr/local/src/sage-4.6.2.rc0/local/include/python2.6 -c sage/combinat/combinat_cython.c -o build/temp.linux-x86_64-2.6/sage/combinat/combinat_cython.o -w\nsage/combinat/combinat_cython.c: In function '__pyx_pf_4sage_8combinat_15combinat_cython__stirling_number2':\nsage/combinat/combinat_cython.c:2431:13: error: incompatible types when assigning to type 'mpz_t' from type 'struct __mpz_struct *'\nerror: command 'gcc' failed with exit status 1\nsage: There was an error installing modified sage library code.\n```\n\nThis is using\n\n```\n$ gcc --version\ngcc-4.4.3 (Gentoo 4.4.3-r2 p1.2) 4.4.3\nCopyright (C) 2010 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```",
    "created_at": "2011-02-24T10:42:35Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100702",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
After building sage-4.6.2.rc0 and applying the spkg and patch from this ticket:

```
$ ./sage -ba-force
[...]
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/src/sage-4.6.2.rc0/local//include -I/usr/local/src/sage-4.6.2.rc0/local//include/csage -I/usr/local/src/sage-4.6.2.rc0/devel//sage/sage/ext -I/usr/local/src/sage-4.6.2.rc0/local/include/python2.6 -c sage/combinat/combinat_cython.c -o build/temp.linux-x86_64-2.6/sage/combinat/combinat_cython.o -w
sage/combinat/combinat_cython.c: In function '__pyx_pf_4sage_8combinat_15combinat_cython__stirling_number2':
sage/combinat/combinat_cython.c:2431:13: error: incompatible types when assigning to type 'mpz_t' from type 'struct __mpz_struct *'
error: command 'gcc' failed with exit status 1
sage: There was an error installing modified sage library code.
```

This is using

```
$ gcc --version
gcc-4.4.3 (Gentoo 4.4.3-r2 p1.2) 4.4.3
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```



---

archive/issue_events_080211.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-24T10:42:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80211"
}
```



---

archive/issue_events_080212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-24T10:42:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80212"
}
```



---

archive/issue_comments_100703.json:
```json
{
    "body": "<a id='comment:17'></a>\nWhy is the deprecation warning in polynomial_compiled.pyx commented out in this patch?  If it is not being used, shouldn't it just be removed?",
    "created_at": "2011-02-24T15:31:07Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100703",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:17'></a>
Why is the deprecation warning in polynomial_compiled.pyx commented out in this patch?  If it is not being used, shouldn't it just be removed?



---

archive/issue_comments_100704.json:
```json
{
    "body": "<a id='comment:18'></a>\nI'm not sure why the gcc error--I'll take a look at that. (I'm guessing that's some new code?)\n\nAs for commenting out the deprecation warning, the issue is that decorators aren't implemented for Cython special functions. They used to be silently ignored, but now an error is raised. When they're supported, we should put this back in.",
    "created_at": "2011-02-24T18:00:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100704",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:18'></a>
I'm not sure why the gcc error--I'll take a look at that. (I'm guessing that's some new code?)

As for commenting out the deprecation warning, the issue is that decorators aren't implemented for Cython special functions. They used to be silently ignored, but now an error is raised. When they're supported, we should put this back in.



---

archive/issue_comments_100705.json:
```json
{
    "body": "<a id='comment:19'></a>\nSomehow one of the fixes for http://trac.cython.org/cython_trac/ticket/654 was merged into the release at the last minute, which is incompatible with how we declare many of the *_t types. I'll post a new spkg disabling this \"fix.\"",
    "created_at": "2011-02-25T05:39:16Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100705",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:19'></a>
Somehow one of the fixes for http://trac.cython.org/cython_trac/ticket/654 was merged into the release at the last minute, which is incompatible with how we declare many of the *_t types. I'll post a new spkg disabling this "fix."



---

archive/issue_comments_100706.json:
```json
{
    "body": "<a id='comment:20'></a>\nI've created a new spkg. All tests pass.",
    "created_at": "2011-02-25T05:52:56Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100706",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:20'></a>
I've created a new spkg. All tests pass.



---

archive/issue_events_080213.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-02-25T05:52:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80213"
}
```



---

archive/issue_events_080214.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-02-25T05:52:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80214"
}
```



---

archive/issue_comments_100707.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Version 0.14.1 was recently released, and has some bugfixes and nice features.\n \n Use the following spkg and patch:\n-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg)\n+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg)\n 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) \n``````\n",
    "created_at": "2011-02-25T05:52:56Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100707",
    "user": "https://github.com/robertwb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Version 0.14.1 was recently released, and has some bugfixes and nice features.
 
 Use the following spkg and patch:
-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.spkg)
+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg)
 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) 
``````




---

archive/issue_comments_100708.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [@robertwb](#comment%3A19):\n> Somehow one of the fixes for http://trac.cython.org/cython_trac/ticket/654 was merged into the release at the last minute, which is incompatible with how we declare many of the *_t types. I'll post a new spkg disabling this \"fix.\" \n\nHow come you and I never got affected by it?",
    "created_at": "2011-02-25T08:19:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100708",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Replying to [@robertwb](#comment%3A19):
> Somehow one of the fixes for http://trac.cython.org/cython_trac/ticket/654 was merged into the release at the last minute, which is incompatible with how we declare many of the *_t types. I'll post a new spkg disabling this "fix." 

How come you and I never got affected by it?



---

archive/issue_comments_100709.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm not sure, but maybe the last spkg was the rc, and the fix for this issue was not supposed to go in this release, but we messed up and it did.",
    "created_at": "2011-02-25T08:27:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100709",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:22'></a>
I'm not sure, but maybe the last spkg was the rc, and the fix for this issue was not supposed to go in this release, but we messed up and it did.



---

archive/issue_comments_100710.json:
```json
{
    "body": "<a id='comment:23'></a>\nIt works for me now, so I'm putting back the positive review.",
    "created_at": "2011-02-25T16:44:32Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100710",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
It works for me now, so I'm putting back the positive review.



---

archive/issue_events_080215.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-25T16:44:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80215"
}
```



---

archive/issue_events_080216.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-25T16:44:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80216"
}
```



---

archive/issue_comments_100711.json:
```json
{
    "body": "<a id='comment:24'></a>\nThanks.",
    "created_at": "2011-02-25T17:20:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100711",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:24'></a>
Thanks.



---

archive/issue_comments_100712.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha1",
    "created_at": "2011-03-08T21:46:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100712",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha1



---

archive/issue_events_080217.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:46:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80217"
}
```



---

archive/issue_events_080218.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:46:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80218"
}
```



---

archive/issue_comments_100713.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Please fix**: the SPKG.txt must be updated, there is no mention of this ticket.",
    "created_at": "2011-05-04T09:01:19Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100713",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
**Please fix**: the SPKG.txt must be updated, there is no mention of this ticket.



---

archive/issue_events_080219.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-04T09:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80219"
}
```



---

archive/issue_comments_100714.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe SPKG.txt has been updated, see http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg",
    "created_at": "2011-05-05T06:59:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100714",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:27'></a>
The SPKG.txt has been updated, see http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg



---

archive/issue_comments_100715.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Version 0.14.1 was recently released, and has some bugfixes and nice features.\n \n Use the following spkg and patch:\n-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg)\n+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg)\n 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) \n``````\n",
    "created_at": "2011-05-05T06:59:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100715",
    "user": "https://github.com/robertwb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Version 0.14.1 was recently released, and has some bugfixes and nice features.
 
 Use the following spkg and patch:
-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p1.spkg)
+1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg)
 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) 
``````




---

archive/issue_events_080220.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-05-05T06:59:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80220"
}
```



---

archive/attachments_014187.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cython-SPKG.txt.diff",
    "asset_url": "tarball://root/attachments/ticket10493/cython-SPKG.txt.diff",
    "created_at": "2011-05-05T09:58:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10493/cython-SPKG.txt.diff",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_100716.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Attachment:** [cython-SPKG.txt.diff](https://github.com/sagemath/sage/files/ticket10493/cython-SPKG.txt.diff)\n\nI made some further changes to SPKG.txt: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)",
    "created_at": "2011-05-05T09:58:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100716",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
**Attachment:** [cython-SPKG.txt.diff](https://github.com/sagemath/sage/files/ticket10493/cython-SPKG.txt.diff)

I made some further changes to SPKG.txt: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)



---

archive/issue_comments_100717.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Version 0.14.1 was recently released, and has some bugfixes and nice features.\n \n Use the following spkg and patch:\n-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg)\n+1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)\n 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) \n``````\n",
    "created_at": "2011-05-05T09:58:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100717",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Version 0.14.1 was recently released, and has some bugfixes and nice features.
 
 Use the following spkg and patch:
-1. [http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg](http://sage.math.washington.edu/home/robertwb/cython/cython-0.14.1.p2.spkg)
+1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cython-0.14.1.p3.spkg)
 2. [attachment:10493-cython-0.14.1.patch](https://github.com/sagemath/sage/files/ticket10493/10493-cython-0.14.1.patch) 
``````




---

archive/issue_comments_100718.json:
```json
{
    "body": "<a id='comment:29'></a>\nI'm happy with your spkg.txt.",
    "created_at": "2011-05-06T06:17:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10493#issuecomment-100718",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:29'></a>
I'm happy with your spkg.txt.



---

archive/issue_events_080221.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-05-06T06:17:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80221"
}
```



---

archive/issue_events_080222.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-05-06T06:17:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80222"
}
```



---

archive/issue_events_080223.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-06T07:18:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80223"
}
```



---

archive/issue_events_080224.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-06T07:18:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10493",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10493#event-80224"
}
```
