# Issue 10699: Misc improvements to the code of sage/combinat/e_one_star.py

archive/issues_010643.json:
```json
{
    "body": "Assignee: slabbe, tjolivet\n\nCC:  tjolivet\n\nThe file e_one_star.py was merged recently into sage. After using it a bit for our research, we suggest the following improvements:\n\n* Add `extra_code_before` and `extra_code_after` arguments to the `plot_tikz` method.\n* Macros don't work when using sagetex. Remove the macros loza, lozb, lozc: just print the plain tikz code.\n* Allow the options `iterations=0` in the `__call__` method of `E1Star`.\n* Be able to plot patches made of unit segments (discrete lines).\n* Add the Patch method `.occurences_in` which returns the positions at which a patch appears in an other patch.\n* Change the default color map for the `.repaint` method (it's just nicer).\n* Add the `.faces_of_vector` method for `Patch`.\n* Fix a small bug: allow the type of a face and of the letters of a substitution to be `int`, and not only `Integer`.\n* Some other small fixes and documentation details.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10699\n\n",
    "closed_at": "2011-02-07T08:16:02Z",
    "created_at": "2011-01-26T18:21:42Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Misc improvements to the code of sage/combinat/e_one_star.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10699",
    "user": "https://github.com/seblabbe"
}
```
Assignee: slabbe, tjolivet

CC:  tjolivet

The file e_one_star.py was merged recently into sage. After using it a bit for our research, we suggest the following improvements:

* Add `extra_code_before` and `extra_code_after` arguments to the `plot_tikz` method.
* Macros don't work when using sagetex. Remove the macros loza, lozb, lozc: just print the plain tikz code.
* Allow the options `iterations=0` in the `__call__` method of `E1Star`.
* Be able to plot patches made of unit segments (discrete lines).
* Add the Patch method `.occurences_in` which returns the positions at which a patch appears in an other patch.
* Change the default color map for the `.repaint` method (it's just nicer).
* Add the `.faces_of_vector` method for `Patch`.
* Fix a small bug: allow the type of a face and of the letters of a substitution to be `int`, and not only `Integer`.
* Some other small fixes and documentation details.

Issue created by migration from https://trac.sagemath.org/ticket/10699





---

archive/issue_comments_111526.json:
```json
{
    "body": "Attachment [trac_10699_e_one_star_fix-sl.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_e_one_star_fix-sl.patch) by @seblabbe created at 2011-01-26 18:23:53\n\nFirst patch.",
    "created_at": "2011-01-26T18:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111526",
    "user": "https://github.com/seblabbe"
}
```

Attachment [trac_10699_e_one_star_fix-sl.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_e_one_star_fix-sl.patch) by @seblabbe created at 2011-01-26 18:23:53

First patch.



---

archive/issue_comments_111527.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-30T00:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111527",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_111528.json:
```json
{
    "body": "Applies over the precedent 2 patches",
    "created_at": "2011-01-30T01:50:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111528",
    "user": "https://github.com/seblabbe"
}
```

Applies over the precedent 2 patches



---

archive/issue_comments_111529.json:
```json
{
    "body": "Attachment [trac_10699_small_fixes-sl.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_small_fixes-sl.patch) by @seblabbe created at 2011-01-30 02:02:45\n\nI just added a patch which fixes some small issues. All test passed. Documentation builds fine. I am OK with giving this ticket a positive review if Timo agrees with my two patches.",
    "created_at": "2011-01-30T02:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111529",
    "user": "https://github.com/seblabbe"
}
```

Attachment [trac_10699_small_fixes-sl.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_small_fixes-sl.patch) by @seblabbe created at 2011-01-30 02:02:45

I just added a patch which fixes some small issues. All test passed. Documentation builds fine. I am OK with giving this ticket a positive review if Timo agrees with my two patches.



---

archive/issue_comments_111530.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-30T17:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111530",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_111531.json:
```json
{
    "body": "Tests passed and I agree with the patches.",
    "created_at": "2011-01-30T17:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111531",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

Tests passed and I agree with the patches.



---

archive/issue_comments_111532.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-31T13:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111532",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_111533.json:
```json
{
    "body": "Timo: please fix the commit message of your patch (use `hg qrefresh -e` for that).\n\nAlso, remember to fill in your names as Author/Reviewer.",
    "created_at": "2011-01-31T13:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111533",
    "user": "https://github.com/jdemeyer"
}
```

Timo: please fix the commit message of your patch (use `hg qrefresh -e` for that).

Also, remember to fill in your names as Author/Reviewer.



---

archive/issue_comments_111534.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-01-31T13:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111534",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_111535.json:
```json
{
    "body": "Replying to [comment:6 jdemeyer]:\n> Timo: please fix the commit message of your patch (use `hg qrefresh -e` for that).\n\n\nOK it's done.",
    "created_at": "2011-01-31T13:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111535",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

Replying to [comment:6 jdemeyer]:
> Timo: please fix the commit message of your patch (use `hg qrefresh -e` for that).


OK it's done.



---

archive/issue_comments_111536.json:
```json
{
    "body": "applies over the first patch",
    "created_at": "2011-01-31T17:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111536",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

applies over the first patch



---

archive/issue_comments_111537.json:
```json
{
    "body": "Attachment [trac_10699_e_one_star_fix-tj.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_e_one_star_fix-tj.patch) by tjolivet created at 2011-01-31 17:18:09\n\nI just re-uploaded the patch trac_10699_e_one_star_fix-tj.patch to correct a minor typo in a function name (occurences_of instead of occurrences_of).",
    "created_at": "2011-01-31T17:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111537",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjolivet"
}
```

Attachment [trac_10699_e_one_star_fix-tj.patch](tarball://root/attachments/some-uuid/ticket10699/trac_10699_e_one_star_fix-tj.patch) by tjolivet created at 2011-01-31 17:18:09

I just re-uploaded the patch trac_10699_e_one_star_fix-tj.patch to correct a minor typo in a function name (occurences_of instead of occurrences_of).



---

archive/issue_events_027560.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:16:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10699#event-27560"
}
```



---

archive/issue_comments_111538.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-02-07T08:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10699#issuecomment-111538",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
