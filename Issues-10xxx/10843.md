# Issue 10843: Faster listing of number field homsets

archive/issues_010777.json:
```json
{
    "body": "The patch speeds up the calculation of homomorphisms between number fields.  This is mainly achieved by avoiding unnecessary checking.  Doctests are also updated.\n\nAssignee: @loefflerd\n\nCC:  @lftabera @rharron tfeulner simonking\n\nBranch/Commit: e2ee8a3231962e830de11b1fc94598c61fe0c9c1\n\nReviewer: Jeroen Demeyer\n\nAuthor: Francis Clarke\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10843\n\n",
    "closed_at": "2014-10-29T10:38:48Z",
    "created_at": "2011-02-24T11:05:33Z",
    "labels": [
        "component: number fields",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Faster listing of number field homsets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10843",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```
The patch speeds up the calculation of homomorphisms between number fields.  This is mainly achieved by avoiding unnecessary checking.  Doctests are also updated.

Assignee: @loefflerd

CC:  @lftabera @rharron tfeulner simonking

Branch/Commit: e2ee8a3231962e830de11b1fc94598c61fe0c9c1

Reviewer: Jeroen Demeyer

Author: Francis Clarke

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/10843





---

archive/issue_comments_138078.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-02-25T09:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138078",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

Changing status from new to needs_review.



---

archive/issue_events_028051.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/fwclarke",
    "created_at": "2012-05-17T08:18:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28051"
}
```



---

archive/issue_comments_138079.json:
```json
{
    "body": "Attachment [trac_10843.patch](tarball://root/attachments/some-uuid/ticket10843/trac_10843.patch) by fwclarke created at 2013-05-04 10:41:03\n\nrebased for 5.9",
    "created_at": "2013-05-04T10:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138079",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

Attachment [trac_10843.patch](tarball://root/attachments/some-uuid/ticket10843/trac_10843.patch) by fwclarke created at 2013-05-04 10:41:03

rebased for 5.9



---

archive/issue_comments_138080.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe patch has been rebased for Sage-5.9.",
    "created_at": "2013-05-04T10:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138080",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:3'></a>
The patch has been rebased for Sage-5.9.



---

archive/issue_events_028052.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28052"
}
```



---

archive/issue_events_028053.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28053"
}
```



---

archive/issue_events_028054.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28054"
}
```



---

archive/issue_events_028055.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28055"
}
```



---

archive/issue_events_028056.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28056"
}
```



---

archive/issue_events_028057.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28057"
}
```



---

archive/issue_comments_138081.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi,\n\nLooks nice.\n\nI uploaded your patch in a git branch and added three commits above:\n- the first one to remove the trailing whitespaces\n- the second one to fits with Sage standard for the docs and make the code more compatible with Python 3\n- the third to have a better caching\n\nPlease, tell me what you think.\n\nVincent\n\n---\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[20f21a6](http://git.sagemath.org/sage.git/commit/?id=20f21a64893f256c13b9387b1163aa5e9f5b8c9f)|`#10843 faster lising of number field homsets`|\n|[4040bfd](http://git.sagemath.org/sage.git/commit/?id=4040bfdc7be3c2a8bc1c75e730df038615bbcd5f)|`trac #10843: remove trailing whitespaces`|\n|[a2abefa](http://git.sagemath.org/sage.git/commit/?id=a2abefab4d35d5caad7e14b3145a6505b9839130)|`trac #10843: documentation, indentation`|\n|[51569d9](http://git.sagemath.org/sage.git/commit/?id=51569d96fee90505298606630dc25c87f5d43edf)|`trac #10843: improved caching`|",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138081",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Hi,

Looks nice.

I uploaded your patch in a git branch and added three commits above:
- the first one to remove the trailing whitespaces
- the second one to fits with Sage standard for the docs and make the code more compatible with Python 3
- the third to have a better caching

Please, tell me what you think.

Vincent

---
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[20f21a6](http://git.sagemath.org/sage.git/commit/?id=20f21a64893f256c13b9387b1163aa5e9f5b8c9f)|`#10843 faster lising of number field homsets`|
|[4040bfd](http://git.sagemath.org/sage.git/commit/?id=4040bfdc7be3c2a8bc1c75e730df038615bbcd5f)|`trac #10843: remove trailing whitespaces`|
|[a2abefa](http://git.sagemath.org/sage.git/commit/?id=a2abefab4d35d5caad7e14b3145a6505b9839130)|`trac #10843: documentation, indentation`|
|[51569d9](http://git.sagemath.org/sage.git/commit/?id=51569d96fee90505298606630dc25c87f5d43edf)|`trac #10843: improved caching`|



---

archive/issue_comments_138082.json:
```json
{
    "body": "Changing commit from \"\" to \"51569d96fee90505298606630dc25c87f5d43edf\"",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138082",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "51569d96fee90505298606630dc25c87f5d43edf"



---

archive/issue_comments_138083.json:
```json
{
    "body": "Changing branch from \"\" to \"public/10843\"",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138083",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "public/10843"



---

archive/issue_comments_138084.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks for this. \u00a0It all seems to be working perfectly.",
    "created_at": "2014-07-09T18:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138084",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:9'></a>
Thanks for this.  It all seems to be working perfectly.



---

archive/issue_events_028058.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28058"
}
```



---

archive/issue_events_028059.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28059"
}
```



---

archive/issue_comments_138085.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhy the separate branches for `D` absolute/relative? The following works in both cases:\n\n```\nroots = D.polynomial().roots(ring=C, multiplicities=False)\n```",
    "created_at": "2014-10-16T11:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138085",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Why the separate branches for `D` absolute/relative? The following works in both cases:

```
roots = D.polynomial().roots(ring=C, multiplicities=False)
```



---

archive/issue_comments_138086.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-16T11:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138086",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_138087.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[946525b](http://git.sagemath.org/sage.git/commit/?id=946525b74a2b4044ef4e45fb54cf13c568a550b5)|`trac #10843: remove separate absolute/relative branches`|\n|[e2ee8a3](http://git.sagemath.org/sage.git/commit/?id=e2ee8a3231962e830de11b1fc94598c61fe0c9c1)|`trac #10843: add check keywords and an associated doctest`|",
    "created_at": "2014-10-25T15:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[946525b](http://git.sagemath.org/sage.git/commit/?id=946525b74a2b4044ef4e45fb54cf13c568a550b5)|`trac #10843: remove separate absolute/relative branches`|
|[e2ee8a3](http://git.sagemath.org/sage.git/commit/?id=e2ee8a3231962e830de11b1fc94598c61fe0c9c1)|`trac #10843: add check keywords and an associated doctest`|



---

archive/issue_comments_138088.json:
```json
{
    "body": "Changing commit from \"51569d96fee90505298606630dc25c87f5d43edf\" to \"e2ee8a3231962e830de11b1fc94598c61fe0c9c1\"",
    "created_at": "2014-10-25T15:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "51569d96fee90505298606630dc25c87f5d43edf" to "e2ee8a3231962e830de11b1fc94598c61fe0c9c1"



---

archive/issue_comments_138089.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-25T15:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138089",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_138090.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A11):\n\n> Why the separate branches for `D` absolute/relative?\n\n\nAssuming that you meant `C` rather than `D`, I've changed the code as suggested.  I don't know why this was done separately.  Perhaps the simpler approach didn't work when this ticket began four years ago.\n\nI've made one other change which should have been made before.  It solves a problem which arose in [http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/](http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/).",
    "created_at": "2014-10-25T15:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138090",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A11):

> Why the separate branches for `D` absolute/relative?


Assuming that you meant `C` rather than `D`, I've changed the code as suggested.  I don't know why this was done separately.  Perhaps the simpler approach didn't work when this ticket began four years ago.

I've made one other change which should have been made before.  It solves a problem which arose in [http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/](http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/).



---

archive/issue_comments_138091.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-10-28T07:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138091",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_138092.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-28T07:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138092",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_138093.json:
```json
{
    "body": "Changing branch from \"public/10843\" to \"e2ee8a3231962e830de11b1fc94598c61fe0c9c1\"",
    "created_at": "2014-10-29T10:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138093",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/10843" to "e2ee8a3231962e830de11b1fc94598c61fe0c9c1"



---

archive/issue_comments_138094.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-29T10:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10843#issuecomment-138094",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_028060.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-29T10:38:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10843",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10843#event-28060"
}
```
