# Issue 10874: Add support for keep_labels in Digraph.strongly_connected_components_digraph

archive/issues_010805.json:
```json
{
    "body": "With keep_labels=True, the method Digraph.strongly_connected_components_digraph keeps the label on edges when contracting strongly connected components, and returns a multi-digraph::\n\n```\n            sage: g = DiGraph({0:{1:\"0-12\", 2: \"0-12\", 3: \"0-3\"}, 1: {2: \"1-2\", 3: \"1-3\"}, 2:{1: \"2-1\", 3: \"2-3\"}})\n            sage: scc_digraph = g.strongly_connected_components_digraph(keep_labels = True)\n            sage: scc_digraph.edges()\n            [({0}, {3}, \"0-3\"), ({0}, {1, 2}, '0-12'),\n             ({1, 2}, {3}, '1-3'), ({1, 2}, {3}, '2-3'),\n             ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]\n```\n\nApply: trac_10874-graph-strongly_connected_componnents-nt.patch\n    \n\nAssignee: jason, ncohen, rlm\n\nCC:  @nathanncohen\n\nKeywords: strongly connected components\n\nReviewer: Nathann Cohen\n\nAuthor: Nicolas M. Thi\u00e9ry\n\nMerged: sage-4.7.alpha3\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10874\n\n",
    "closed_at": "2011-03-28T07:18:25Z",
    "created_at": "2011-03-04T14:15:12Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Add support for keep_labels in Digraph.strongly_connected_components_digraph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10874",
    "user": "https://github.com/nthiery"
}
```
With keep_labels=True, the method Digraph.strongly_connected_components_digraph keeps the label on edges when contracting strongly connected components, and returns a multi-digraph::

```
            sage: g = DiGraph({0:{1:"0-12", 2: "0-12", 3: "0-3"}, 1: {2: "1-2", 3: "1-3"}, 2:{1: "2-1", 3: "2-3"}})
            sage: scc_digraph = g.strongly_connected_components_digraph(keep_labels = True)
            sage: scc_digraph.edges()
            [({0}, {3}, "0-3"), ({0}, {1, 2}, '0-12'),
             ({1, 2}, {3}, '1-3'), ({1, 2}, {3}, '2-3'),
             ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]
```

Apply: trac_10874-graph-strongly_connected_componnents-nt.patch
    

Assignee: jason, ncohen, rlm

CC:  @nathanncohen

Keywords: strongly connected components

Reviewer: Nathann Cohen

Author: Nicolas M. Thiéry

Merged: sage-4.7.alpha3

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/10874





---

archive/issue_comments_119999.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-03-04T14:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-119999",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_120000.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -9,6 +9,12 @@\n              ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]\n ```\n \n+APPLY:\n+\n+* trac_10874-graph-strongly_connected_componnents-nt.patch\n+* trac_10874-reviewer.patch\n+    \n+\n Reviewer: Nathann Cohen\n \n Author: Nicolas M. Thi\u00e9ry\n```\n",
    "created_at": "2011-03-04T14:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120000",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
```diff
--- 
+++ 
@@ -9,6 +9,12 @@
              ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]
 ```
 
+APPLY:
+
+* trac_10874-graph-strongly_connected_componnents-nt.patch
+* trac_10874-reviewer.patch
+    
+
 Reviewer: Nathann Cohen
 
 Author: Nicolas M. Thiéry
```




---

archive/issue_comments_120001.json:
```json
{
    "body": "<a id='comment:2'></a>What about avoiding to test \"keep_labels\" twice ? `:-)`\n\nHere is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to \"positive review\" if you agree with my modifications, and also if you don't for some reason (please update the \"apply\" section in this case) `:-)`\n\nNathann",
    "created_at": "2011-03-04T14:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120001",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>What about avoiding to test "keep_labels" twice ? `:-)`

Here is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to "positive review" if you agree with my modifications, and also if you don't for some reason (please update the "apply" section in this case) `:-)`

Nathann



---

archive/issue_comments_120002.json:
```json
{
    "body": "Attachment [trac_10874-reviewer.patch](tarball://root/attachments/some-uuid/ticket10874/trac_10874-reviewer.patch) by @nathanncohen created at 2011-03-04 14:44:53",
    "created_at": "2011-03-04T14:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120002",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_10874-reviewer.patch](tarball://root/attachments/some-uuid/ticket10874/trac_10874-reviewer.patch) by @nathanncohen created at 2011-03-04 14:44:53



---

archive/issue_comments_120003.json:
```json
{
    "body": "<a id='comment:3'></a>Hi Nathann,\n\nWow, that was a quick review! This patch has been basically ready in the queue since last July; it was time for me to post in on trac :-)\n\nThanks!\n\nReplying to [comment:2 ncohen]:\n> What about avoiding to test \"keep_labels\" twice ? `:-)`\n\n\nThat was to avoid having ``g.add_vertices(scc_set)`` twice :-)\nBut it's probably more readable as you did it.\n\n> Here is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to \"positive review\" if you agree with my modifications, and also if you don't for some reason (please update the \"apply\" section in this case) `:-)`\n\n\nPositive review it is (assuming of course the patch bot confirms that everything is good; it should).",
    "created_at": "2011-03-04T15:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120003",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:3'></a>Hi Nathann,

Wow, that was a quick review! This patch has been basically ready in the queue since last July; it was time for me to post in on trac :-)

Thanks!

Replying to [comment:2 ncohen]:
> What about avoiding to test "keep_labels" twice ? `:-)`


That was to avoid having ``g.add_vertices(scc_set)`` twice :-)
But it's probably more readable as you did it.

> Here is a reviewer patch which does just that. Your patch is good to go, so you can set this ticket to "positive review" if you agree with my modifications, and also if you don't for some reason (please update the "apply" section in this case) `:-)`


Positive review it is (assuming of course the patch bot confirms that everything is good; it should).



---

archive/issue_comments_120004.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-04T15:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120004",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120005.json:
```json
{
    "body": "<a id='comment:4'></a>Please change the commit message of [attachment:trac_10874-graph-strongly_connected_componnents-nt.patch] to something human-readable (make sure to include the ticket number of the first line).",
    "created_at": "2011-03-26T15:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120005",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Please change the commit message of [attachment:trac_10874-graph-strongly_connected_componnents-nt.patch] to something human-readable (make sure to include the ticket number of the first line).



---

archive/issue_comments_120006.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,16 @@\n+With keep_labels=True, the method Digraph.strongly_connected_components_digraph keeps the label on edges when contracting strongly connected components, and returns a multi-digraph::\n \n+```\n+            sage: g = DiGraph({0:{1:\"0-12\", 2: \"0-12\", 3: \"0-3\"}, 1: {2: \"1-2\", 3: \"1-3\"}, 2:{1: \"2-1\", 3: \"2-3\"}})\n+            sage: scc_digraph = g.strongly_connected_components_digraph(keep_labels = True)\n+            sage: scc_digraph.edges()\n+            [({0}, {3}, \"0-3\"), ({0}, {1, 2}, '0-12'),\n+             ({1, 2}, {3}, '1-3'), ({1, 2}, {3}, '2-3'),\n+             ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]\n+```\n+\n+Apply: trac_10874-graph-strongly_connected_componnents-nt.patch\n+    \n \n Reviewer: Nathann Cohen\n \n```\n",
    "created_at": "2011-03-26T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120006",
    "user": "https://github.com/nthiery"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,16 @@
+With keep_labels=True, the method Digraph.strongly_connected_components_digraph keeps the label on edges when contracting strongly connected components, and returns a multi-digraph::
 
+```
+            sage: g = DiGraph({0:{1:"0-12", 2: "0-12", 3: "0-3"}, 1: {2: "1-2", 3: "1-3"}, 2:{1: "2-1", 3: "2-3"}})
+            sage: scc_digraph = g.strongly_connected_components_digraph(keep_labels = True)
+            sage: scc_digraph.edges()
+            [({0}, {3}, "0-3"), ({0}, {1, 2}, '0-12'),
+             ({1, 2}, {3}, '1-3'), ({1, 2}, {3}, '2-3'),
+             ({1, 2}, {1, 2}, '1-2'), ({1, 2}, {1, 2}, '2-1')]
+```
+
+Apply: trac_10874-graph-strongly_connected_componnents-nt.patch
+    
 
 Reviewer: Nathann Cohen
 
```




---

archive/issue_comments_120007.json:
```json
{
    "body": "<a id='comment:5'></a>Oops; I need to recheck my workflow; I forgot this way too many times lately. Sorry!\n\nWhile I was at it, I folded the two patches together. No other changes.\n\ntrac_10874-reviewer.patch can now be deleted from trac.\n\nCheers,\n                    Nicolas",
    "created_at": "2011-03-26T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120007",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:5'></a>Oops; I need to recheck my workflow; I forgot this way too many times lately. Sorry!

While I was at it, I folded the two patches together. No other changes.

trac_10874-reviewer.patch can now be deleted from trac.

Cheers,
                    Nicolas



---

archive/issue_comments_120008.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-03-26T18:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120008",
    "user": "https://github.com/nthiery"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_120009.json:
```json
{
    "body": "<a id='comment:6'></a>Ah, Nathann, sorry, while looking back to the patch, I could not resist making the setting of the multiedges option more consistent. Please have a quick check.",
    "created_at": "2011-03-26T18:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120009",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>Ah, Nathann, sorry, while looking back to the patch, I could not resist making the setting of the multiedges option more consistent. Please have a quick check.



---

archive/issue_comments_120010.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-26T18:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120010",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_120011.json:
```json
{
    "body": "Apply only this patch",
    "created_at": "2011-03-26T18:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120011",
    "user": "https://github.com/nthiery"
}
```

Apply only this patch



---

archive/issue_comments_120012.json:
```json
{
    "body": "<a id='comment:8'></a>Attachment [trac_10874-graph-strongly_connected_componnents-nt.patch](tarball://root/attachments/some-uuid/ticket10874/trac_10874-graph-strongly_connected_componnents-nt.patch) by @nathanncohen created at 2011-03-27 07:27:52\n\nGood to go !\n\nNathann",
    "created_at": "2011-03-27T07:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120012",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>Attachment [trac_10874-graph-strongly_connected_componnents-nt.patch](tarball://root/attachments/some-uuid/ticket10874/trac_10874-graph-strongly_connected_componnents-nt.patch) by @nathanncohen created at 2011-03-27 07:27:52

Good to go !

Nathann



---

archive/issue_comments_120013.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-27T07:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120013",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120014.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-28T07:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120014",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028155.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-28T07:18:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10874#event-28155"
}
```



---

archive/issue_comments_120015.json:
```json
{
    "body": "<a id='comment:10'></a>Hi, is this a typo?\n\n```\ng = DiGraph({0:{1:\"01\", 2: \"02\", 3: 03}, 1: {2: \"12\"}, 2:{1: \"21\", 3: \"23\"}})\n```\nNote the missing quotes around `03`, which is therefore interpreted as the octal number 3.",
    "created_at": "2015-02-21T17:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10874#issuecomment-120015",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Hi, is this a typo?

```
g = DiGraph({0:{1:"01", 2: "02", 3: 03}, 1: {2: "12"}, 2:{1: "21", 3: "23"}})
```
Note the missing quotes around `03`, which is therefore interpreted as the octal number 3.
