# Issue 10058: Segfault in backward and inverse FFT for 2**n elements

archive/issues_010057.json:
```json
{
    "body": "Sage crashes when asked to do a backward or inverse FFT for sizes that are powers of two:\n\n```\nsage: a = FFT(5)\nsage: a[1] = 2\nsage: a.forward_transform()\nsage: a.backward_transform()\nsage: a = FFT(4)\nsage: a[1] = 2\nsage: a.forward_transform()\nsage: a.backward_transform()\n\n\n------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component\nof Sage has a bug in it (typically accessing invalid memory)\nor is not properly wrapped with _sig_on, _sig_off.\nYou might want to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate (sorry).\n------------------------------------------------------------\n```\nThis is with 4.6.alpha2.\n\nJoal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).\n\n**Assignee:** @jasongrout, jkantor\n\n**CC:**  @wdjoyner\n\n**Keywords:** gsl, fft, segfault\n\n**Branch:** [u/mmezzarobba/10058-gsl_fft](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/10058-gsl_fft)\n\n**Commit:** [9beddc73f3003afe617d0a4dc76b741b25dd7e50](https://github.com/sagemath/sagetrac-mirror/commit/9beddc73f3003afe617d0a4dc76b741b25dd7e50)\n\n**Reviewer:** Luis Felipe Tabera Alonso, Marc Mezzarobba, Punarbasu Purkayastha\n\n**Author:** Mike Hansen, Luis Felipe Tabera Alonso, Marc Mezzarobba\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10058\n\n",
    "closed_at": "2014-02-02T16:57:23Z",
    "created_at": "2010-10-02T21:13:11Z",
    "labels": [
        "component: numerical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Segfault in backward and inverse FFT for 2**n elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10058",
    "user": "https://github.com/qed777"
}
```
Sage crashes when asked to do a backward or inverse FFT for sizes that are powers of two:

```
sage: a = FFT(5)
sage: a[1] = 2
sage: a.forward_transform()
sage: a.backward_transform()
sage: a = FFT(4)
sage: a[1] = 2
sage: a.forward_transform()
sage: a.backward_transform()


------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component
of Sage has a bug in it (typically accessing invalid memory)
or is not properly wrapped with _sig_on, _sig_off.
You might want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate (sorry).
------------------------------------------------------------
```
This is with 4.6.alpha2.

Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).

**Assignee:** @jasongrout, jkantor

**CC:**  @wdjoyner

**Keywords:** gsl, fft, segfault

**Branch:** [u/mmezzarobba/10058-gsl_fft](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/10058-gsl_fft)

**Commit:** [9beddc73f3003afe617d0a4dc76b741b25dd7e50](https://github.com/sagemath/sagetrac-mirror/commit/9beddc73f3003afe617d0a4dc76b741b25dd7e50)

**Reviewer:** Luis Felipe Tabera Alonso, Marc Mezzarobba, Punarbasu Purkayastha

**Author:** Mike Hansen, Luis Felipe Tabera Alonso, Marc Mezzarobba

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/10058





---

archive/issue_comments_127811.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis happens with `a.inverse_transform()`, too.  From near the end of `sage/gsl/fft.pyx`:\n\n```python\n    def backward_transform(self):\n        cdef gsl_fft_complex_wavetable * wt\n        cdef gsl_fft_complex_workspace * mem\n        N = Integer(self.n)\n        e = N.exact_log(2)\n        if N==2**e:\n            gsl_fft_complex_backward(self.data, self.stride, self.n, wt, mem)\n```\nShould this be\n\n```python\n            gsl_fft_complex_radix2_backward(self.data, self.stride, self.n)\n```\n(and similarly for `inverse_transform`)?\n\n```python\n        if N!=2**e:\n            mem = gsl_fft_complex_workspace_alloc(self.n)\n            wt = gsl_fft_complex_wavetable_alloc(self.n)\n            gsl_fft_complex_backward(self.data, self.stride, self.n, wt, mem)\n            gsl_fft_complex_workspace_free(mem)\n            gsl_fft_complex_wavetable_free(wt)\n```",
    "created_at": "2010-10-02T21:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127811",
    "user": "https://github.com/qed777"
}
```

<a id='comment:1'></a>
This happens with `a.inverse_transform()`, too.  From near the end of `sage/gsl/fft.pyx`:

```python
    def backward_transform(self):
        cdef gsl_fft_complex_wavetable * wt
        cdef gsl_fft_complex_workspace * mem
        N = Integer(self.n)
        e = N.exact_log(2)
        if N==2**e:
            gsl_fft_complex_backward(self.data, self.stride, self.n, wt, mem)
```
Should this be

```python
            gsl_fft_complex_radix2_backward(self.data, self.stride, self.n)
```
(and similarly for `inverse_transform`)?

```python
        if N!=2**e:
            mem = gsl_fft_complex_workspace_alloc(self.n)
            wt = gsl_fft_complex_wavetable_alloc(self.n)
            gsl_fft_complex_backward(self.data, self.stride, self.n, wt, mem)
            gsl_fft_complex_workspace_free(mem)
            gsl_fft_complex_wavetable_free(wt)
```



---

archive/issue_comments_127812.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,5 +20,6 @@\n Sage will now terminate (sorry).\n ------------------------------------------------------------\n ```\n+This is with 4.6.alpha2.\n \n Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).\n``````\n",
    "created_at": "2010-10-02T21:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127812",
    "user": "https://github.com/qed777"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,5 +20,6 @@
 Sage will now terminate (sorry).
 ------------------------------------------------------------
 ```
+This is with 4.6.alpha2.
 
 Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).
``````




---

archive/attachments_013117.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10058.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10058/trac_10058.patch",
    "created_at": "2010-10-11T03:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_127813.json:
```json
{
    "body": "",
    "created_at": "2010-10-11T03:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127813",
    "user": "https://github.com/mwhansen"
}
```





---

archive/attachments_013118.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10058.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10058/trac_10058.2.patch",
    "created_at": "2013-03-06T12:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/lftabera"
}
```



---

archive/issue_comments_127814.json:
```json
{
    "body": "rebase to sage-5.8.beta2",
    "created_at": "2013-03-06T12:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127814",
    "user": "https://github.com/lftabera"
}
```

rebase to sage-5.8.beta2



---

archive/issue_comments_127815.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,3 +23,5 @@\n This is with 4.6.alpha2.\n \n Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).\n+\n+Apply: trac_10058.2.patch, trac_10058_doc.patch\n``````\n",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127815",
    "user": "https://github.com/lftabera"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,3 +23,5 @@
 This is with 4.6.alpha2.
 
 Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).
+
+Apply: trac_10058.2.patch, trac_10058_doc.patch
``````




---

archive/issue_comments_127816.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have reviewed (and rebased) the code of M. Hansen and it is correct. I have also added another patch that fills coverage of fft.pyx and cleans the plot code. This second patch needs review.\n\nApply: trac_10058.2.patch, trac_10058_doc.patch",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127816",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:3'></a>
I have reviewed (and rebased) the code of M. Hansen and it is correct. I have also added another patch that fills coverage of fft.pyx and cleans the plot code. This second patch needs review.

Apply: trac_10058.2.patch, trac_10058_doc.patch



---

archive/issue_comments_127817.json:
```json
{
    "body": "**Reviewer:** Luis Felipe Tabera Alonso",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127817",
    "user": "https://github.com/lftabera"
}
```

**Reviewer:** Luis Felipe Tabera Alonso



---

archive/issue_comments_127818.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127818",
    "user": "https://github.com/lftabera"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_127819.json:
```json
{
    "body": "**Author:** Mike Hansen, Luis Felipe Tabera Alonso",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127819",
    "user": "https://github.com/lftabera"
}
```

**Author:** Mike Hansen, Luis Felipe Tabera Alonso



---

archive/issue_comments_127820.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"gsl, fft, segfault\".",
    "created_at": "2013-03-06T12:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127820",
    "user": "https://github.com/lftabera"
}
```

**Changing keywords** from "" to "gsl, fft, segfault".



---

archive/issue_comments_127821.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello! The patches look good. I have the following comments about the doc patch.\n\n1. Can you fix the documentation of the functions? It should be like this\n\n```\ndef function(n, p=1):\n    \"\"\"\n    Determine the ``n``-th number. Note that I didn't use `n`\n    since single backticks will format it in latex.\n   \n    INPUT:\n\n    - ``n`` -- Integer. Description of this parameter\n\n    - ``p`` -- Integer (default: 1). Description of this parameter.\n```\n\n2. The following line <code>180\t        See `self.plot` for details. </code> should use `:meth:` to refer to plot. Also, <code>`self.plot`</code> is used in some other functions.\n\n```\nSee :meth:`.plot` for details.\n```\n\n3. `pi` should also be changed to float in this line\n\n```\n191\t        pi    = sage.symbolic.constants.pi   # should append .n() at the end.\n```\n\n4. In the function `plot`, the INPUT needs a fix. It should be like this. Also, see 1. for the comment about default values and formatting.\n\n```\n- ``style`` -- Style of the plot, options are ``\"rect\"`` or ``\"polar\"``\n```\n\nYou can refer to the [developer guide](http://www.sagemath.org/doc/developer/conventions.html#documentation-strings) for more information about the formatting of docstrings.\n\n*EDIT*: Some formatting fixes.",
    "created_at": "2013-03-31T03:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127821",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:4'></a>
Hello! The patches look good. I have the following comments about the doc patch.

1. Can you fix the documentation of the functions? It should be like this

```
def function(n, p=1):
    """
    Determine the ``n``-th number. Note that I didn't use `n`
    since single backticks will format it in latex.
   
    INPUT:

    - ``n`` -- Integer. Description of this parameter

    - ``p`` -- Integer (default: 1). Description of this parameter.
```

2. The following line <code>180	        See `self.plot` for details. </code> should use `:meth:` to refer to plot. Also, <code>`self.plot`</code> is used in some other functions.

```
See :meth:`.plot` for details.
```

3. `pi` should also be changed to float in this line

```
191	        pi    = sage.symbolic.constants.pi   # should append .n() at the end.
```

4. In the function `plot`, the INPUT needs a fix. It should be like this. Also, see 1. for the comment about default values and formatting.

```
- ``style`` -- Style of the plot, options are ``"rect"`` or ``"polar"``
```

You can refer to the [developer guide](http://www.sagemath.org/doc/developer/conventions.html#documentation-strings) for more information about the formatting of docstrings.

*EDIT*: Some formatting fixes.



---

archive/attachments_013119.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10058_doc.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10058/trac_10058_doc.patch",
    "created_at": "2013-05-10T15:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/lftabera"
}
```



---

archive/issue_comments_127822.json:
```json
{
    "body": "documentation, doctest, cleanin the plot code, rebased against sage 5.10.beta2",
    "created_at": "2013-05-10T15:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127822",
    "user": "https://github.com/lftabera"
}
```

documentation, doctest, cleanin the plot code, rebased against sage 5.10.beta2



---

archive/issue_events_030851.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10058#event-30851"
}
```



---

archive/issue_events_030852.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10058#event-30852"
}
```



---

archive/issue_events_030853.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10058#event-30853"
}
```



---

archive/issue_comments_127823.json:
```json
{
    "body": "**Changing reviewer** from \"Luis Felipe Tabera Alonso\" to \"Luis Felipe Tabera Alonso, Marc Mezzarobba\".",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127823",
    "user": "https://github.com/mezzarobba"
}
```

**Changing reviewer** from "Luis Felipe Tabera Alonso" to "Luis Felipe Tabera Alonso, Marc Mezzarobba".



---

archive/issue_comments_127824.json:
```json
{
    "body": "**Commit:** [9beddc73f3003afe617d0a4dc76b741b25dd7e50](https://github.com/sagemath/sagetrac-mirror/commit/9beddc73f3003afe617d0a4dc76b741b25dd7e50)",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127824",
    "user": "https://github.com/mezzarobba"
}
```

**Commit:** [9beddc73f3003afe617d0a4dc76b741b25dd7e50](https://github.com/sagemath/sagetrac-mirror/commit/9beddc73f3003afe617d0a4dc76b741b25dd7e50)



---

archive/issue_comments_127825.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,5 +23,3 @@\n This is with 4.6.alpha2.\n \n Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).\n-\n-Apply: trac_10058.2.patch, trac_10058_doc.patch\n``````\n",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127825",
    "user": "https://github.com/mezzarobba"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,5 +23,3 @@
 This is with 4.6.alpha2.
 
 Joal Heagney reported this problem on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/7830e0c484a0f38d).
-
-Apply: trac_10058.2.patch, trac_10058_doc.patch
``````




---

archive/issue_comments_127826.json:
```json
{
    "body": "<a id='comment:7'></a>\nGitified and rebased on top of 6.1. The second patch looks good to me, except for minor points that I fixed in my two commits. Could seomeone please check:\n* that I rebased the code correctly;\n* whether you agree with my changes?\n(If both are ok, please go ahead and set the ticket's status to `positive_review`.)",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127826",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:7'></a>
Gitified and rebased on top of 6.1. The second patch looks good to me, except for minor points that I fixed in my two commits. Could seomeone please check:
* that I rebased the code correctly;
* whether you agree with my changes?
(If both are ok, please go ahead and set the ticket's status to `positive_review`.)



---

archive/issue_comments_127827.json:
```json
{
    "body": "**Changing author** from \"Mike Hansen, Luis Felipe Tabera Alonso\" to \"Mike Hansen, Luis Felipe Tabera Alonso, Marc Mezzarobba\".",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127827",
    "user": "https://github.com/mezzarobba"
}
```

**Changing author** from "Mike Hansen, Luis Felipe Tabera Alonso" to "Mike Hansen, Luis Felipe Tabera Alonso, Marc Mezzarobba".



---

archive/issue_comments_127828.json:
```json
{
    "body": "**Branch:** [u/mmezzarobba/10058-gsl_fft](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/10058-gsl_fft)",
    "created_at": "2014-02-01T11:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127828",
    "user": "https://github.com/mezzarobba"
}
```

**Branch:** [u/mmezzarobba/10058-gsl_fft](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/10058-gsl_fft)



---

archive/issue_comments_127829.json:
```json
{
    "body": "**Changing reviewer** from \"Luis Felipe Tabera Alonso, Marc Mezzarobba\" to \"Luis Felipe Tabera Alonso, Marc Mezzarobba, Punarbasu Purkayastha\".",
    "created_at": "2014-02-01T14:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127829",
    "user": "https://github.com/ppurka"
}
```

**Changing reviewer** from "Luis Felipe Tabera Alonso, Marc Mezzarobba" to "Luis Felipe Tabera Alonso, Marc Mezzarobba, Punarbasu Purkayastha".



---

archive/issue_comments_127830.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks good to me. It applies fine to sage-6.1 and `sage/gsl` passes all doctests.\n\nOn a sidenote, I don't even remember having made those comments earlier. In reply to my comments @lftabera updated a new patch but I never got any email because adding attachments do not generate emails!\n\n*In short*: add a comment after adding or updating a git branch; otherwise we don't get email notifications!",
    "created_at": "2014-02-01T14:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127830",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'></a>
Looks good to me. It applies fine to sage-6.1 and `sage/gsl` passes all doctests.

On a sidenote, I don't even remember having made those comments earlier. In reply to my comments @lftabera updated a new patch but I never got any email because adding attachments do not generate emails!

*In short*: add a comment after adding or updating a git branch; otherwise we don't get email notifications!



---

archive/issue_comments_127831.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-02-01T14:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127831",
    "user": "https://github.com/ppurka"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_030854.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-02T16:57:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10058#event-30854"
}
```



---

archive/issue_comments_127832.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-02-02T16:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127832",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_127833.json:
```json
{
    "body": "<a id='comment:10'></a>\nFollowup at #15799",
    "created_at": "2014-02-08T13:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10058#issuecomment-127833",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
Followup at #15799
