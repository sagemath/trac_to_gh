# Issue 10825: Make gap support SAGE_SPKG_INSTALL_DOCS

archive/issues_010759.json:
```json
{
    "assignees": [],
    "body": "This ticket implements #10823 for gap. New spkg at \u00a0http://sage.math.washington.edu/home/jason/spkg-docs/gap-4.4.12.p5.spkg\n\n\n**CC:**  wdjoyner@gmail.com sal@dcs.st-and.ac.uk\n\n**Upstream:** Reported upstream. Developers acknowledge bug.\n\n**Reviewer:** David Kirkby\n\n**Author:** Jason Grout\n\n**Merged:** sage-4.7.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10825\n\n",
    "closed_at": "2011-03-08T21:48:10Z",
    "created_at": "2011-02-23T01:54:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make gap support SAGE_SPKG_INSTALL_DOCS",
    "type": "issue",
    "updated_at": "2012-03-23T14:14:47Z",
    "url": "https://github.com/sagemath/sage/issues/10825",
    "user": "https://github.com/jasongrout"
}
```
This ticket implements #10823 for gap. New spkg at  http://sage.math.washington.edu/home/jason/spkg-docs/gap-4.4.12.p5.spkg


**CC:**  wdjoyner@gmail.com sal@dcs.st-and.ac.uk

**Upstream:** Reported upstream. Developers acknowledge bug.

**Reviewer:** David Kirkby

**Author:** Jason Grout

**Merged:** sage-4.7.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10825





---

archive/issue_events_120577.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-23T01:54:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120577"
}
```



---

archive/issue_events_120578.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-23T01:54:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120578"
}
```



---

archive/issue_events_120579.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-23T01:54:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120579"
}
```



---

archive/issue_events_120580.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-23T01:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120580"
}
```



---

archive/issue_comments_106750.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nSee comments on #10828",
    "created_at": "2011-03-01T15:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106750",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:2'>**Comment 2:**</a>
See comments on #10828



---

archive/issue_comments_106751.json:
```json
{
    "body": "**Reviewer:** David Kirkby",
    "created_at": "2011-03-01T15:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106751",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Reviewer:** David Kirkby



---

archive/issue_events_120581.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-01T15:29:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120581"
}
```



---

archive/issue_events_120582.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-01T15:29:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120582"
}
```



---

archive/issue_comments_106752.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-This ticket implements #10823 for gap. New spkg at \u00a0http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg\n+This ticket implements #10823 for gap. New spkg at \u00a0http://sage.math.washington.edu/home/jason/spkg-docs/gap-4.4.12.p5.spkg\n \n``````\n",
    "created_at": "2011-03-01T18:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106752",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-This ticket implements #10823 for gap. New spkg at  http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg
+This ticket implements #10823 for gap. New spkg at  http://sage.math.washington.edu/home/jason/spkg-docs/gap-4.4.12.p5.spkg
 
``````




---

archive/issue_comments_106753.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nNew spkg up which should take care of David's points.",
    "created_at": "2011-03-01T18:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106753",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'>**Comment 3:**</a>
New spkg up which should take care of David's points.



---

archive/issue_events_120583.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-03-01T18:07:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120583"
}
```



---

archive/issue_events_120584.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-03-01T18:07:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120584"
}
```



---

archive/issue_comments_106754.json:
```json
{
    "body": "**Attachment:** [10825.patch.gz](https://github.com/sagemath/sage/files/ticket10825/10825.patch.gz)\n\nFYI Only---already applied to spkg.",
    "created_at": "2011-03-01T18:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106754",
    "user": "https://github.com/jasongrout"
}
```

**Attachment:** [10825.patch.gz](https://github.com/sagemath/sage/files/ticket10825/10825.patch.gz)

FYI Only---already applied to spkg.



---

archive/issue_comments_106755.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nI'm not in a position to check this now, but it would help if you could add the patch to the ticket, as not only does it making reviewing it much easier, but it is useful for others to quickly look at what changes were made. \n\nDave",
    "created_at": "2011-03-01T18:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106755",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:4'>**Comment 4:**</a>
I'm not in a position to check this now, but it would help if you could add the patch to the ticket, as not only does it making reviewing it much easier, but it is useful for others to quickly look at what changes were made. 

Dave



---

archive/issue_comments_106756.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nYep, there's a patch attached to the ticket now (for this and the other spkg tickets, as I finish them).",
    "created_at": "2011-03-01T18:49:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106756",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'>**Comment 5:**</a>
Yep, there's a patch attached to the ticket now (for this and the other spkg tickets, as I finish them).



---

archive/issue_events_120585.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T09:45:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120585"
}
```



---

archive/issue_events_120586.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T09:45:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120586"
}
```



---

archive/issue_comments_106757.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nThe GAP change is implemented fine, so positive review. \n\nHowever, the syntax of the HTML in GAP's documentation is incorrect. I just looked in index.htm and this immediately struck me:\n\n```\n<OL>\n  <LI><A HREF=\"tut/chapters.htm\">Tutorial</A>\n  <LI><A HREF=\"ref/chapters.htm\">Reference Manual</A>\n  <LI><A HREF=\"prg/chapters.htm\">Programming Tutorial</A>\n  <LI><A HREF=\"ext/chapters.htm\">Programming Reference Manual</A>\n  <LI><A HREF=\"new/chapters.htm\">New Features for Developers</A>\n</OL>\n```\n\nThere should be a `</LI>` on the end of list items, so the first would be:\n\n```\n  <LI><A HREF=\"tut/chapters.htm\">Tutorial</A></LI>\n```\n\nbut all 5 are missing, but that's obviously an upstream problem, so I have cc'ed the two people listed as the upstream contacts for GAP",
    "created_at": "2011-03-02T09:45:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106757",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:6'>**Comment 6:**</a>
The GAP change is implemented fine, so positive review. 

However, the syntax of the HTML in GAP's documentation is incorrect. I just looked in index.htm and this immediately struck me:

```
<OL>
  <LI><A HREF="tut/chapters.htm">Tutorial</A>
  <LI><A HREF="ref/chapters.htm">Reference Manual</A>
  <LI><A HREF="prg/chapters.htm">Programming Tutorial</A>
  <LI><A HREF="ext/chapters.htm">Programming Reference Manual</A>
  <LI><A HREF="new/chapters.htm">New Features for Developers</A>
</OL>
```

There should be a `</LI>` on the end of list items, so the first would be:

```
  <LI><A HREF="tut/chapters.htm">Tutorial</A></LI>
```

but all 5 are missing, but that's obviously an upstream problem, so I have cc'ed the two people listed as the upstream contacts for GAP



---

archive/issue_comments_106758.json:
```json
{
    "body": "**Upstream:** Reported upstream. Little or no feedback.",
    "created_at": "2011-03-02T09:45:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106758",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Upstream:** Reported upstream. Little or no feedback.



---

archive/issue_comments_106759.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nI agree with you on all accounts.",
    "created_at": "2011-03-02T14:11:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106759",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'>**Comment 7:**</a>
I agree with you on all accounts.



---

archive/issue_comments_106760.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nFrom Steve Linton: \"Thanks for the info. The documentation mechanisms are changing completely in the next release, and we\nwill make sure they produce valid HTML.\n\n       Steve\"",
    "created_at": "2011-03-02T22:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106760",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'>**Comment 8:**</a>
From Steve Linton: "Thanks for the info. The documentation mechanisms are changing completely in the next release, and we
will make sure they produce valid HTML.

       Steve"



---

archive/issue_comments_106761.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2011-03-02T22:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106761",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_106762.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@williamstein](#comment%3A8):\n> From Steve Linton: \"Thanks for the info. The documentation mechanisms are changing completely in the next release, and we\n> will make sure they produce valid HTML.\n> \n>        Steve\"\n\nThank you Steve for the prompt reply, and for William for forwarding it to trac. \n\nDave",
    "created_at": "2011-03-02T22:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106762",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@williamstein](#comment%3A8):
> From Steve Linton: "Thanks for the info. The documentation mechanisms are changing completely in the next release, and we
> will make sure they produce valid HTML.
> 
>        Steve"

Thank you Steve for the prompt reply, and for William for forwarding it to trac. 

Dave



---

archive/issue_events_120587.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:48:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120587"
}
```



---

archive/issue_events_120588.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:48:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10825#event-120588"
}
```



---

archive/issue_comments_106763.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha1",
    "created_at": "2011-03-08T21:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106763",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha1



---

archive/issue_comments_106764.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nReplying to [drkirkby](#comment%3A6):\n> The GAP change is implemented fine, so positive review. \n> \n> However, the syntax of the HTML in GAP's documentation is incorrect. I just looked in index.htm and this immediately struck me:\n> \n> ```\n> <OL>\n>   <LI><A HREF=\"tut/chapters.htm\">Tutorial</A>\n>   <LI><A HREF=\"ref/chapters.htm\">Reference Manual</A>\n>   <LI><A HREF=\"prg/chapters.htm\">Programming Tutorial</A>\n>   <LI><A HREF=\"ext/chapters.htm\">Programming Reference Manual</A>\n>   <LI><A HREF=\"new/chapters.htm\">New Features for Developers</A>\n> </OL>\n> ```\n\nThis is actually **correct** HTML, the `</LI>` end tags are optional.  So it's not a bug, even if the developers acknowledge it.",
    "created_at": "2011-03-08T21:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106764",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>**Comment 11:**</a>
Replying to [drkirkby](#comment%3A6):
> The GAP change is implemented fine, so positive review. 
> 
> However, the syntax of the HTML in GAP's documentation is incorrect. I just looked in index.htm and this immediately struck me:
> 
> ```
> <OL>
>   <LI><A HREF="tut/chapters.htm">Tutorial</A>
>   <LI><A HREF="ref/chapters.htm">Reference Manual</A>
>   <LI><A HREF="prg/chapters.htm">Programming Tutorial</A>
>   <LI><A HREF="ext/chapters.htm">Programming Reference Manual</A>
>   <LI><A HREF="new/chapters.htm">New Features for Developers</A>
> </OL>
> ```

This is actually **correct** HTML, the `</LI>` end tags are optional.  So it's not a bug, even if the developers acknowledge it.



---

archive/issue_comments_106765.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nSee also [the W3C validator](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.gap-system.org%2FManuals%2Fdoc%2Fhtm%2Findex.htm&charset=%28detect+automatically%29&doctype=Inline&group=0).  There is an error for a misplaced `</P>` but it doesn't complain about the missing `</LI>`s.",
    "created_at": "2011-03-08T21:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106765",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>**Comment 12:**</a>
See also [the W3C validator](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.gap-system.org%2FManuals%2Fdoc%2Fhtm%2Findex.htm&charset=%28detect+automatically%29&doctype=Inline&group=0).  There is an error for a misplaced `</P>` but it doesn't complain about the missing `</LI>`s.



---

archive/issue_comments_106766.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nhuh.  Thanks for the info.  One more reason to like xhtml more than html, I guess!",
    "created_at": "2011-03-08T22:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106766",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'>**Comment 13:**</a>
huh.  Thanks for the info.  One more reason to like xhtml more than html, I guess!



---

archive/issue_comments_106767.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nI'm not sure what the following is supposed to do (or mean):\n\n```sh\n    # Build and install docs if requested\n    if [ \"x$SAGE_SPKG_INSTALL_DOCS\" = xyes ] ; then\n        if [ $? -ne 0 ]; then\n            echo \"Error building gap docs.\"\n            exit 1\n        fi\n        mkdir -p $SAGE_ROOT/local/share/doc/gap\n        cp -r src/doc/htm $SAGE_ROOT/local/share/doc/gap/html\n    fi\n```\nEither there's a command missing to **build** the documentation, or we don't have to build it, in which case testing `$?` there is useless, since previous errors are catched above that block.  (On the other hand, whether the creation of the directory and the copy command succeeded isn't checked at all, so maybe the `if`-block was supposed to be *below* the `cp`.)\n\nI've currently changed this to\n\n```sh\n    # Build and install docs if requested:\n    if [[ \"$SAGE_SPKG_INSTALL_DOCS\" = yes ]]; then\n        # ?????\n        if [[ $? -ne 0 ]]; then\n            echo \"Error building GAP docs.\"\n            exit 1\n        fi\n        mkdir -p \"$SAGE_LOCAL\"/share/doc/gap &&\n        cp -r src/doc/htm \"$SAGE_LOCAL\"/share/doc/gap/html\n        if [[ $? -ne 0 ]]; then\n            echo >&2 \"Error copying GAP's HTML documentation.\"\n            exit 1\n        fi\n    fi\n```\n\nBtw., the description in `SPKG.txt` (still) says the docs (as well as tests, which seem to be there again, too) have been removed from the spkg.  The `src/doc/` directory in contrast contains (subdirectories with) lots of LaTeX, HTML and probably other files.\n\n\n\n\nI'm currently working on a GAP 4.4.12.p7 spkg for #7041, so perhaps leave comments (also) there.",
    "created_at": "2012-03-22T17:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106767",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'>**Comment 14:**</a>
I'm not sure what the following is supposed to do (or mean):

```sh
    # Build and install docs if requested
    if [ "x$SAGE_SPKG_INSTALL_DOCS" = xyes ] ; then
        if [ $? -ne 0 ]; then
            echo "Error building gap docs."
            exit 1
        fi
        mkdir -p $SAGE_ROOT/local/share/doc/gap
        cp -r src/doc/htm $SAGE_ROOT/local/share/doc/gap/html
    fi
```
Either there's a command missing to **build** the documentation, or we don't have to build it, in which case testing `$?` there is useless, since previous errors are catched above that block.  (On the other hand, whether the creation of the directory and the copy command succeeded isn't checked at all, so maybe the `if`-block was supposed to be *below* the `cp`.)

I've currently changed this to

```sh
    # Build and install docs if requested:
    if [[ "$SAGE_SPKG_INSTALL_DOCS" = yes ]]; then
        # ?????
        if [[ $? -ne 0 ]]; then
            echo "Error building GAP docs."
            exit 1
        fi
        mkdir -p "$SAGE_LOCAL"/share/doc/gap &&
        cp -r src/doc/htm "$SAGE_LOCAL"/share/doc/gap/html
        if [[ $? -ne 0 ]]; then
            echo >&2 "Error copying GAP's HTML documentation."
            exit 1
        fi
    fi
```

Btw., the description in `SPKG.txt` (still) says the docs (as well as tests, which seem to be there again, too) have been removed from the spkg.  The `src/doc/` directory in contrast contains (subdirectories with) lots of LaTeX, HTML and probably other files.




I'm currently working on a GAP 4.4.12.p7 spkg for #7041, so perhaps leave comments (also) there.



---

archive/issue_comments_106768.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nWe've talked a lot about a different way to go about building and installing the spkg docs (see #11197, for example) by having a separate spkg-install-docs script, sort of like how we have a separate spkg-check script.  \n\nI agree that the current test of $? doesn't make much sense; something is clearly missing.",
    "created_at": "2012-03-22T17:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106768",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'>**Comment 15:**</a>
We've talked a lot about a different way to go about building and installing the spkg docs (see #11197, for example) by having a separate spkg-install-docs script, sort of like how we have a separate spkg-check script.  

I agree that the current test of $? doesn't make much sense; something is clearly missing.



---

archive/issue_comments_106769.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nReplying to [@jasongrout](#comment%3A15):\n> We've talked a lot about a different way to go about building and installing the spkg docs (see #11197, for example)\n\nJust wanted to cc me on that ticket, then realizing that I've already commented on it... m)\n\n(To my excuse, this was 7 month ago.)\n\n\n\n\n> I agree that the current test of $? doesn't make much sense; something is clearly missing.\n\nWell, currently the (apparently pre-built) HTML docs to get installed are there; I'm just not sure whether these are from upstream, or some Sage developer prepared them.  I'll just add a note on that to `SPKG.txt`; I think we can then remove the other files (LaTeX sources etc.) from the spkg, at least for the moment.  (Dima was recently talking about upgrading to the almost-released GAP 4.5 anyway.)",
    "created_at": "2012-03-22T18:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106769",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'>**Comment 16:**</a>
Replying to [@jasongrout](#comment%3A15):
> We've talked a lot about a different way to go about building and installing the spkg docs (see #11197, for example)

Just wanted to cc me on that ticket, then realizing that I've already commented on it... m)

(To my excuse, this was 7 month ago.)




> I agree that the current test of $? doesn't make much sense; something is clearly missing.

Well, currently the (apparently pre-built) HTML docs to get installed are there; I'm just not sure whether these are from upstream, or some Sage developer prepared them.  I'll just add a note on that to `SPKG.txt`; I think we can then remove the other files (LaTeX sources etc.) from the spkg, at least for the moment.  (Dima was recently talking about upgrading to the almost-released GAP 4.5 anyway.)



---

archive/issue_comments_106770.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nReplying to [@jasongrout](#comment%3A15):\n> having a separate spkg-install-docs script, sort of like how we have a separate spkg-check script.\n\nActually, I like that!",
    "created_at": "2012-03-23T14:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10825",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10825#issuecomment-106770",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>**Comment 17:**</a>
Replying to [@jasongrout](#comment%3A15):
> having a separate spkg-install-docs script, sort of like how we have a separate spkg-check script.

Actually, I like that!
