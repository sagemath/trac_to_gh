# Issue 10206: Various issues in find_hamiltonian

archive/issues_010205.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "1.\n\n```\nsage: from sage.graphs.generic_graph_pyx import find_hamiltonian as fh\nsage: G = graphs.CompleteGraph(1); fh(G)\nTraceback (most recent call last):\n...\nValueError: empty range for randrange() (0,0, 0)\n```\n\n2.\n\n```\nsage: from sage.graphs.generic_graph_pyx import find_hamiltonian as fh\nsage: G = graphs.CompleteGraph(2); fh(G)\n[ Sage just hangs... ]\n```\n\n3. Why is there a `G.hamiltonian_cycle()` member function but not `G.hamiltonian_path()`?\n\nSee #10205 for some ideas on fixes.\n\nCC:  @sagetrac-fidelbarrera @rlmill @boothby @nathanncohen @sagetrac-mvngu @pelegm @jm58660\n\nBranch/Commit: **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10206_\n\n",
    "closed_at": "2017-01-18T20:40:09Z",
    "created_at": "2010-11-02T20:42:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Various issues in find_hamiltonian",
    "type": "issue",
    "updated_at": "2017-01-18T20:40:09Z",
    "url": "https://github.com/sagemath/sage/issues/10206",
    "user": "https://github.com/jdemeyer"
}
```
1.

```
sage: from sage.graphs.generic_graph_pyx import find_hamiltonian as fh
sage: G = graphs.CompleteGraph(1); fh(G)
Traceback (most recent call last):
...
ValueError: empty range for randrange() (0,0, 0)
```

2.

```
sage: from sage.graphs.generic_graph_pyx import find_hamiltonian as fh
sage: G = graphs.CompleteGraph(2); fh(G)
[ Sage just hangs... ]
```

3. Why is there a `G.hamiltonian_cycle()` member function but not `G.hamiltonian_path()`?

See #10205 for some ideas on fixes.

CC:  @sagetrac-fidelbarrera @rlmill @boothby @nathanncohen @sagetrac-mvngu @pelegm @jm58660

Branch/Commit: **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**

Reviewer: **Travis Scrimshaw**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/10206_





---

archive/issue_events_132489.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132489"
}
```



---

archive/issue_events_132490.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132490"
}
```



---

archive/issue_events_132491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132491"
}
```



---

archive/issue_events_132492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132492"
}
```



---

archive/issue_events_132493.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132493"
}
```



---

archive/issue_events_132494.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132494"
}
```



---

archive/issue_events_132495.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-02T20:42:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132495"
}
```



---

archive/issue_comments_094832.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n3. is because this method is not an exact algorithm but an heuristic. It would have been misleading to have a non-exact hamiltonian path method while all the others are. But I already wrote a LP version of this one, making the heuristic available, in #9910\n\n(it also somehow fixed the slowness in the doctest, but I may not have noticed the difference between G and g `:-D`)\n\nNathann",
    "created_at": "2010-11-02T20:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94832",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

3. is because this method is not an exact algorithm but an heuristic. It would have been misleading to have a non-exact hamiltonian path method while all the others are. But I already wrote a LP version of this one, making the heuristic available, in #9910

(it also somehow fixed the slowness in the doctest, but I may not have noticed the difference between G and g `:-D`)

Nathann



---

archive/issue_comments_094833.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n(oops, it was hidden in #9923)",
    "created_at": "2010-11-02T20:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94833",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

(oops, it was hidden in #9923)



---

archive/issue_comments_094834.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,5 @@\n ```\n \n 3. Why is there a `G.hamiltonian_cycle()` member function but not `G.hamiltonian_path()`?\n+\n+See #10205 for some ideas on fixes.\n``````\n",
    "created_at": "2010-11-12T11:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94834",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,5 @@
 ```
 
 3. Why is there a `G.hamiltonian_cycle()` member function but not `G.hamiltonian_path()`?
+
+See #10205 for some ideas on fixes.
``````




---

archive/issue_events_132496.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132496"
}
```



---

archive/issue_events_132497.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132497"
}
```



---

archive/issue_events_132498.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132498"
}
```



---

archive/issue_events_132499.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132499"
}
```



---

archive/issue_events_132500.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132500"
}
```



---

archive/issue_events_132501.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132501"
}
```



---

archive/issue_events_132502.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132502"
}
```



---

archive/issue_events_132503.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132503"
}
```



---

archive/issue_comments_094835.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTo solve (1), we should probably modify the following two lines:\n\n```python\n    #  First we pick a random vertex u\n    cdef int x = randint( 0, n-1 )\n    cdef int u = vertices[x]\n```\nto a random choice of a starting *non-isolated* vertex.  I am not a cython specialist, but perhaps we can alter this loop:\n\n```python\n    for row in G.adjacency_matrix():\n        j = 0\n        for k in row:\n            if k:\n                g.add_arc(i, j)\n            j += 1\n        i += 1\n```\nso that a list of non-isolated vertices will be saved. Then we can finish with something like that:\n\n```python\n    #  First we pick a random vertex u\n    cdef int x = randint(0, len(non_isolated_vertices) - 1)\n    cdef int u = non_isolated_vertices[x]\n```\n\nIf the graph is empty, I suggest we raise an informative exception (see also #21741).\n\nIf there is not empty but has no edges, we may either raise an exception or return something like `(False, [0])` (in the case where we're looking for a cycle, or if we're looking for a path and there are at least two vertices in the graph), or `(True, [0])` (in the case where we're looking for a path and the graph contains a single vertex).",
    "created_at": "2016-11-28T21:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94835",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:9" align="right">comment:9</div>

To solve (1), we should probably modify the following two lines:

```python
    #  First we pick a random vertex u
    cdef int x = randint( 0, n-1 )
    cdef int u = vertices[x]
```
to a random choice of a starting *non-isolated* vertex.  I am not a cython specialist, but perhaps we can alter this loop:

```python
    for row in G.adjacency_matrix():
        j = 0
        for k in row:
            if k:
                g.add_arc(i, j)
            j += 1
        i += 1
```
so that a list of non-isolated vertices will be saved. Then we can finish with something like that:

```python
    #  First we pick a random vertex u
    cdef int x = randint(0, len(non_isolated_vertices) - 1)
    cdef int u = non_isolated_vertices[x]
```

If the graph is empty, I suggest we raise an informative exception (see also #21741).

If there is not empty but has no edges, we may either raise an exception or return something like `(False, [0])` (in the case where we're looking for a cycle, or if we're looking for a path and there are at least two vertices in the graph), or `(True, [0])` (in the case where we're looking for a path and the graph contains a single vertex).



---

archive/issue_comments_094836.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe easiest is to treat small cases, with 0, 1 or 2 nodes.\n\nApparently `sage: G = graphs.CompleteGraph(2); fh(G)` will not end, while `sage: G = graphs.CompleteGraph(3); fh(G)` returns an immediate answer.",
    "created_at": "2016-12-02T18:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94836",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

The easiest is to treat small cases, with 0, 1 or 2 nodes.

Apparently `sage: G = graphs.CompleteGraph(2); fh(G)` will not end, while `sage: G = graphs.CompleteGraph(3); fh(G)` returns an immediate answer.



---

archive/issue_comments_094837.json:
```json
{
    "body": "Branch: **[u/dcoudert/hamilton](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/hamilton)**",
    "created_at": "2016-12-03T13:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94837",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[u/dcoudert/hamilton](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/hamilton)**



---

archive/issue_comments_094838.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI pushed a patch fixing some of the issues of the `find_hamiltonian` method.\n\nTo do so, I have split the method in two parts: a front end testing small cases and partitioning the graph into connected components, and a method working on a connected graph with at least 3 vertices.\n\nThe problem with vertices of degree 1 remains, but I have no solution yet.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c26febf58945b10332d916e3856561d146d8f286\"><code>c26febf</code></a></td><td><code>trac #10206: split method and handle small cases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0846e23830d401a12ba373a434053c8bd9ebd0e\"><code>f0846e2</code></a></td><td><code>trac #10206: various fix and use memoryallocator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026\"><code>8fb9ccd</code></a></td><td><code>trac #10206: fix doctests</code></td></tr></table>\n",
    "created_at": "2016-12-03T13:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94838",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

I pushed a patch fixing some of the issues of the `find_hamiltonian` method.

To do so, I have split the method in two parts: a front end testing small cases and partitioning the graph into connected components, and a method working on a connected graph with at least 3 vertices.

The problem with vertices of degree 1 remains, but I have no solution yet.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c26febf58945b10332d916e3856561d146d8f286"><code>c26febf</code></a></td><td><code>trac #10206: split method and handle small cases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0846e23830d401a12ba373a434053c8bd9ebd0e"><code>f0846e2</code></a></td><td><code>trac #10206: various fix and use memoryallocator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026"><code>8fb9ccd</code></a></td><td><code>trac #10206: fix doctests</code></td></tr></table>




---

archive/issue_comments_094839.json:
```json
{
    "body": "Author: **David Coudert**",
    "created_at": "2016-12-03T13:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94839",
    "user": "https://github.com/dcoudert"
}
```

Author: **David Coudert**



---

archive/issue_events_132504.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2016-12-03T13:34:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132504"
}
```



---

archive/issue_comments_094840.json:
```json
{
    "body": "Commit: **[`8fb9ccd`](https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026)**",
    "created_at": "2016-12-03T13:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94840",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`8fb9ccd`](https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026)**



---

archive/issue_events_132505.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2016-12-03T14:45:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132505"
}
```



---

archive/issue_events_132506.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2016-12-03T14:45:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132506"
}
```



---

archive/issue_comments_094841.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI had to modify the doctests because the modifications have some impact on the order of the random choices.",
    "created_at": "2016-12-03T14:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94841",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">comment:12</div>

I had to modify the doctests because the modifications have some impact on the order of the random choices.



---

archive/issue_comments_094842.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nCC'ng myself for #21741.",
    "created_at": "2016-12-04T20:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94842",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">comment:14</div>

CC'ng myself for #21741.



---

archive/issue_comments_094843.json:
```json
{
    "body": "Changed commit from **[`8fb9ccd`](https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026)** to **[`03489e8`](https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db)**",
    "created_at": "2016-12-07T10:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8fb9ccd`](https://github.com/sagemath/sagetrac-mirror/commit/8fb9ccd4488b9391632c134f1145766f997f9026)** to **[`03489e8`](https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db)**



---

archive/issue_comments_094844.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24ce653b8fdaea4acfd93986292376fcacbe0a49\"><code>24ce653</code></a></td><td><code>trac #10206: simplify code of find_hamiltonian</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db\"><code>03489e8</code></a></td><td><code>trac #10206: add method hamiltonian_apth</code></td></tr></table>\n",
    "created_at": "2016-12-07T10:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24ce653b8fdaea4acfd93986292376fcacbe0a49"><code>24ce653</code></a></td><td><code>trac #10206: simplify code of find_hamiltonian</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db"><code>03489e8</code></a></td><td><code>trac #10206: add method hamiltonian_apth</code></td></tr></table>




---

archive/issue_comments_094845.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI did the following in last commit:\n* merge the 2 methods for `find_hamiltonian`. I think it was an error to split in 2 parts. There is no need for it and it's now easier to see the changes\n* add method `hamiltonian_path`, so answering point 3.\n\nSo the 3 issues are fixed with this patch. One issue remains with method `find_hamiltonian` that may run forever if the graph has some vertices of degree one (it was already clearly indicated in a warning). I propose to let this problem for another ticket. Already enough to review.",
    "created_at": "2016-12-07T10:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94845",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

I did the following in last commit:
* merge the 2 methods for `find_hamiltonian`. I think it was an error to split in 2 parts. There is no need for it and it's now easier to see the changes
* add method `hamiltonian_path`, so answering point 3.

So the 3 issues are fixed with this patch. One issue remains with method `find_hamiltonian` that may run forever if the graph has some vertices of degree one (it was already clearly indicated in a warning). I propose to let this problem for another ticket. Already enough to review.



---

archive/issue_comments_094846.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSome comments (not a through review):\n\n- Do not use `assert` to check for input. For bad input, raise the appropriate error (likely a `ValueError`).\n- Same thing when there is no Hamiltonian path.\n- Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).\n- Use `r\"\"\"` so you can do `\\times` instead of `\\\\times`.\n- The `algorithm` bullet points should be aligned with the rest of the text in that input point; in other words, remove 4 spaces from those lines.\n- You should tell Cython that `i` and `j` are `int`s and add back in `cdef int i,j`.",
    "created_at": "2016-12-07T15:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94846",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Some comments (not a through review):

- Do not use `assert` to check for input. For bad input, raise the appropriate error (likely a `ValueError`).
- Same thing when there is no Hamiltonian path.
- Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).
- Use `r"""` so you can do `\times` instead of `\\times`.
- The `algorithm` bullet points should be aligned with the rest of the text in that input point; in other words, remove 4 spaces from those lines.
- You should tell Cython that `i` and `j` are `int`s and add back in `cdef int i,j`.



---

archive/issue_comments_094847.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c\"><code>8729009</code></a></td><td><code>trac #10206: fix comments</code></td></tr></table>\n",
    "created_at": "2016-12-07T16:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94847",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c"><code>8729009</code></a></td><td><code>trac #10206: fix comments</code></td></tr></table>




---

archive/issue_comments_094848.json:
```json
{
    "body": "Changed commit from **[`03489e8`](https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db)** to **[`8729009`](https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c)**",
    "created_at": "2016-12-07T16:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94848",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03489e8`](https://github.com/sagemath/sagetrac-mirror/commit/03489e870abd118c8701a05685861b9be77ee1db)** to **[`8729009`](https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c)**



---

archive/issue_comments_094849.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment%3A17):\n> Some comments (not a through review):\n> \n> - Do not use `assert` to check for input. For bad input, raise the appropriate error (likely a `ValueError`).\n\nRight. I'm now using `EmptySetError` like `hamiltonian_cycle`.\n\n> - Same thing when there is no Hamiltonian path.\n\ndone\n> - Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).\n\nIf we want to change the outpus, we have to do it for both methods and it's better to do it in another ticket.\n\n> - Use `r\"\"\"` so you can do `\\times` instead of `\\\\times`.\n\nThank you. I didn't know the meaning of `r\"\"\"`. \n\n> - The `algorithm` bullet points should be aligned with the rest of the text in that input point; in other words, remove 4 spaces from those lines.\n\nok\n> - You should tell Cython that `i` and `j` are `int`s and add back in `cdef int i,j`.\n\nok\n\nThanks.",
    "created_at": "2016-12-07T16:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94849",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment%3A17):
> Some comments (not a through review):
> 
> - Do not use `assert` to check for input. For bad input, raise the appropriate error (likely a `ValueError`).

Right. I'm now using `EmptySetError` like `hamiltonian_cycle`.

> - Same thing when there is no Hamiltonian path.

done
> - Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).

If we want to change the outpus, we have to do it for both methods and it's better to do it in another ticket.

> - Use `r"""` so you can do `\times` instead of `\\times`.

Thank you. I didn't know the meaning of `r"""`. 

> - The `algorithm` bullet points should be aligned with the rest of the text in that input point; in other words, remove 4 spaces from those lines.

ok
> - You should tell Cython that `i` and `j` are `int`s and add back in `cdef int i,j`.

ok

Thanks.



---

archive/issue_comments_094850.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@dcoudert](#comment%3A19):\n> Replying to [@tscrim](#comment%3A17):\n> > - Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).\n\n> \n> If we want to change the outpus, we have to do it for both methods and it's better to do it in another ticket.\n\nYou are adding the method `hamiltonian_path`, so we are not changing its previously decided output. I agree that making the output of `hamiltonian_cycle` (internally) consistent is another ticket. Yet, I believe we should set the (IMO) correct behavior here and not kick the can down the road where it then becomes a backwards-incompatible change.",
    "created_at": "2016-12-07T16:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94850",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@dcoudert](#comment%3A19):
> Replying to [@tscrim](#comment%3A17):
> > - Fundamentally, I believe this should return `None` if there is no such path and not raise an error. I was going to say this is consistent with `hamiltonian_cycle`, but that behavior depends on which algorithm you use! At least the `backtrack` for `hamiltonian_cycle` returns `False`, but with something more for debugging than anything (i.e., it is not a certificate).

> 
> If we want to change the outpus, we have to do it for both methods and it's better to do it in another ticket.

You are adding the method `hamiltonian_path`, so we are not changing its previously decided output. I agree that making the output of `hamiltonian_cycle` (internally) consistent is another ticket. Yet, I believe we should set the (IMO) correct behavior here and not kick the can down the road where it then becomes a backwards-incompatible change.



---

archive/issue_comments_094851.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSo the method should return `None` or an empty  (di)graph ? and if `use_edge_labels==True`, should we return weight 0?",
    "created_at": "2016-12-07T19:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94851",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>

So the method should return `None` or an empty  (di)graph ? and if `use_edge_labels==True`, should we return weight 0?



---

archive/issue_comments_094852.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI would say `None`, which is distinct from the empty (di)graph as that could (in principle) be the Hamiltonian path/cycle of the empty (di)graph.",
    "created_at": "2016-12-07T21:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94852",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

I would say `None`, which is distinct from the empty (di)graph as that could (in principle) be the Hamiltonian path/cycle of the empty (di)graph.



---

archive/issue_comments_094853.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac\"><code>3070d1d</code></a></td><td><code>trac #10206: return None instead of raising an error when no HP is found</code></td></tr></table>\n",
    "created_at": "2016-12-08T16:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94853",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac"><code>3070d1d</code></a></td><td><code>trac #10206: return None instead of raising an error when no HP is found</code></td></tr></table>




---

archive/issue_comments_094854.json:
```json
{
    "body": "Changed commit from **[`8729009`](https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c)** to **[`3070d1d`](https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac)**",
    "created_at": "2016-12-08T16:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94854",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8729009`](https://github.com/sagemath/sagetrac-mirror/commit/87290092d431f3ee93698d2f25caeb48fcf44d3c)** to **[`3070d1d`](https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac)**



---

archive/issue_comments_094855.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI'm now returning `None` except for empty and one-element graphs for which the problem is not well defined.",
    "created_at": "2016-12-08T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94855",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

I'm now returning `None` except for empty and one-element graphs for which the problem is not well defined.



---

archive/issue_comments_094856.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAny help reviewing this patch is more than welcome.",
    "created_at": "2016-12-17T07:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94856",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:25" align="right">comment:25</div>

Any help reviewing this patch is more than welcome.



---

archive/issue_comments_094857.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/hamilton](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/hamilton)** to **[u/tscrim/hamiltonian-10206](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/hamiltonian-10206)**",
    "created_at": "2016-12-17T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94857",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/dcoudert/hamilton](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/hamilton)** to **[u/tscrim/hamiltonian-10206](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/hamiltonian-10206)**



---

archive/issue_comments_094858.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI made some documentation fixes and added/moved a few more `cdef` declarations to improve the speed (in principle). If my changes look good, then you can set a positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b23e72277b80a76217140f14a6435fc49b514a4\"><code>4b23e72</code></a></td><td><code>Merge branch 'u/dcoudert/hamilton' of git://trac.sagemath.org/sage into u/dcoudert/hamilton</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506\"><code>536fca5</code></a></td><td><code>Reviewer tweaks for #10206.</code></td></tr></table>\n",
    "created_at": "2016-12-17T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94858",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

I made some documentation fixes and added/moved a few more `cdef` declarations to improve the speed (in principle). If my changes look good, then you can set a positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b23e72277b80a76217140f14a6435fc49b514a4"><code>4b23e72</code></a></td><td><code>Merge branch 'u/dcoudert/hamilton' of git://trac.sagemath.org/sage into u/dcoudert/hamilton</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506"><code>536fca5</code></a></td><td><code>Reviewer tweaks for #10206.</code></td></tr></table>




---

archive/issue_comments_094859.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-12-17T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94859",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_094860.json:
```json
{
    "body": "Changed commit from **[`3070d1d`](https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac)** to **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**",
    "created_at": "2016-12-17T22:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94860",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`3070d1d`](https://github.com/sagemath/sagetrac-mirror/commit/3070d1d93ddcb4282a4ce755cb74a91cbbd851ac)** to **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**



---

archive/issue_comments_094861.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThat's perfect. Thank you.",
    "created_at": "2016-12-18T08:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94861",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:27" align="right">comment:27</div>

That's perfect. Thank you.



---

archive/issue_events_132507.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2016-12-18T08:21:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132507"
}
```



---

archive/issue_events_132508.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2016-12-18T08:21:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132508"
}
```



---

archive/issue_events_132509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:40:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132509"
}
```



---

archive/issue_events_132510.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "84709842ee93c58e15b37bc68a3310badfac26e3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-18T20:40:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10206#event-132510"
}
```



---

archive/issue_comments_094862.json:
```json
{
    "body": "Changed branch from **[u/tscrim/hamiltonian-10206](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/hamiltonian-10206)** to **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**",
    "created_at": "2017-01-18T20:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10206#issuecomment-94862",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/hamiltonian-10206](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/hamiltonian-10206)** to **[`536fca5`](https://github.com/sagemath/sagetrac-mirror/commit/536fca51aa7d960e5765565aa09dc356e7400506)**
