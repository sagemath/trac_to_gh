# Issue 10818: EclLib should allow signals to make LISP code interruptable

archive/issues_010752.json:
```json
{
    "assignees": [],
    "body": "Presently, ecllib does not enable signals when executing ecl code. This makes LISP code uninterruptable:\n\n```\nsage: from sage.libs.ecl import *\nsage: ecl_eval(\"(setf i 0)\")\n<ECL: 0>\nsage: inf_loop=ecl_eval(\"(defun infinite() (loop (incf i)))\")\nsage: inf_loop() #DON'T DO THIS! (bye bye)\n```\nThe signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it.\n\nWhen testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).\n\nApply [attachment: 10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)\n\nAssignee: **@williamstein**\n\nCC:  @kiwifb @jdemeyer @kcrisman\n\nKeywords: **lisp ecl signal interrupt**\n\nAuthor: **Nils Bruin, Jeroen Demeyer**\n\nReviewer: **Jean-Pierre Flori**\n\nMerged: **sage-4.7.1.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10818_\n\n",
    "closed_at": "2011-04-20T15:03:47Z",
    "created_at": "2011-02-21T22:30:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "EclLib should allow signals to make LISP code interruptable",
    "type": "issue",
    "updated_at": "2011-04-20T15:03:47Z",
    "url": "https://github.com/sagemath/sage/issues/10818",
    "user": "https://github.com/nbruin"
}
```
Presently, ecllib does not enable signals when executing ecl code. This makes LISP code uninterruptable:

```
sage: from sage.libs.ecl import *
sage: ecl_eval("(setf i 0)")
<ECL: 0>
sage: inf_loop=ecl_eval("(defun infinite() (loop (incf i)))")
sage: inf_loop() #DON'T DO THIS! (bye bye)
```
The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it.

When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).

Apply [attachment: 10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)

Assignee: **@williamstein**

CC:  @kiwifb @jdemeyer @kcrisman

Keywords: **lisp ecl signal interrupt**

Author: **Nils Bruin, Jeroen Demeyer**

Reviewer: **Jean-Pierre Flori**

Merged: **sage-4.7.1.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/10818_





---

archive/issue_events_126309.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-21T22:30:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126309"
}
```



---

archive/issue_events_126310.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-21T22:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126310"
}
```



---

archive/issue_events_126311.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-21T22:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126311"
}
```



---

archive/issue_events_126312.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-21T22:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126312"
}
```



---

archive/issue_comments_106538.json:
```json
{
    "body": "rudimentary approach to signal handling in Ecllib",
    "created_at": "2011-02-21T22:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106538",
    "user": "https://github.com/nbruin"
}
```

rudimentary approach to signal handling in Ecllib



---

archive/issue_events_126313.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-21T22:36:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126313"
}
```



---

archive/issue_comments_106539.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[signal-handling.patch.gz](https://github.com/sagemath/sage/files/ticket10818/signal-handling.patch.gz)**\n\nWith the patch, we can indeed interrupt ECL. We should try to do some more critical stuff and see if ECL can get in an inconsistent state due to this (I expect it can). Example session:\n\n```\nsage: from sage.libs.ecl import *\nsage: ecl_eval(\"(setf i 0)\")\n<ECL: 0>\nsage: inf_loop=ecl_eval(\"(defun infinite() (loop (incf i)))\")\nsage: inf_loop()\nKeyboardInterrupt: \nsage: ecl_eval(\"i\")\n<ECL: 5337027>\nsage: ecl_eval(\"(infinite)\")\nKeyboardInterrupt: \nsage: ecl_eval(\"i\")\n<ECL: 15518182>\n```",
    "created_at": "2011-02-21T22:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106539",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[signal-handling.patch.gz](https://github.com/sagemath/sage/files/ticket10818/signal-handling.patch.gz)**

With the patch, we can indeed interrupt ECL. We should try to do some more critical stuff and see if ECL can get in an inconsistent state due to this (I expect it can). Example session:

```
sage: from sage.libs.ecl import *
sage: ecl_eval("(setf i 0)")
<ECL: 0>
sage: inf_loop=ecl_eval("(defun infinite() (loop (incf i)))")
sage: inf_loop()
KeyboardInterrupt: 
sage: ecl_eval("i")
<ECL: 5337027>
sage: ecl_eval("(infinite)")
KeyboardInterrupt: 
sage: ecl_eval("i")
<ECL: 15518182>
```



---

archive/issue_comments_106540.json:
```json
{
    "body": "Try to swap signal handlers",
    "created_at": "2011-02-24T06:00:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106540",
    "user": "https://github.com/nbruin"
}
```

Try to swap signal handlers



---

archive/issue_comments_106541.json:
```json
{
    "body": "Attachment: **[handlerswap.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.patch.gz)**\n\nAttachment: **[siginttest.c.gz](https://github.com/sagemath/sage/files/ticket10818/siginttest.c.gz)**",
    "created_at": "2011-02-24T06:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106541",
    "user": "https://github.com/nbruin"
}
```

Attachment: **[handlerswap.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.patch.gz)**

Attachment: **[siginttest.c.gz](https://github.com/sagemath/sage/files/ticket10818/siginttest.c.gz)**



---

archive/issue_comments_106542.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nA simple approach would be to swap in ECL's signal handler for SIGINT upon entry of ECL code and swap back to the sage signal handler afterwards. The patch handlerswap.patch takes this approach. Unfortunately, it doesn't work. For some reason, the SIGINT handler we capture from ECL seems to just exit upon interrupt. This is not ECL's normal behaviour and the attached stand-alone program siginttest.c (also attached) shows that this approach works in principle.\n\nI have no idea why the same approach leads to different results in a sage and cython context.",
    "created_at": "2011-02-24T06:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106542",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:3'>Comment 3:</a>
A simple approach would be to swap in ECL's signal handler for SIGINT upon entry of ECL code and swap back to the sage signal handler afterwards. The patch handlerswap.patch takes this approach. Unfortunately, it doesn't work. For some reason, the SIGINT handler we capture from ECL seems to just exit upon interrupt. This is not ECL's normal behaviour and the attached stand-alone program siginttest.c (also attached) shows that this approach works in principle.

I have no idea why the same approach leads to different results in a sage and cython context.



---

archive/issue_events_126314.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-25T09:18:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126314"
}
```



---

archive/issue_comments_106543.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nApply handlerswap.p2.patch\n\nAnother take on swapping handlers and this one seems to work:\n\n```\nsage: from sage.interfaces.maxima_lib import maxima as max\nsage: max('sum(1/x^2, x, 1, 100000)')\n^C---------------------------------------------------------------------------\n[...]\nTypeError: ECL says: Console interrupt\nsage: #we press Ctrl-C again\nKeyboardInterrupt\n```\nFor reference, ECL prefers to use sigaction (in fact, probably sage should be using sigaction as well. Certain race conditions with signal are avoidable with sigaction). In glibc, signal is implemented via sigaction anyway. sigaction has a richer interface, so signal cannot always properly report what sigaction has done. By using sigaction to record and swap the different SIGINT handlers, it seems to work.\n\nSubtle race conditions still exist: the ECL handler is instated just before entering lisp code and setting up the \"unwind-protect stack frame\", so an interrupt that gets delivered in that window would cause unspecified behaviour. By running\n\nwhile True: os.kill(<PID>,2)\n\nit is easy to trigger such behaviour, but sage in its present state already cannot handle this.\nTherefore, I think the present patch establishes acceptable \"best effort\" behaviour.",
    "created_at": "2011-02-25T09:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106543",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'>Comment 4:</a>
Apply handlerswap.p2.patch

Another take on swapping handlers and this one seems to work:

```
sage: from sage.interfaces.maxima_lib import maxima as max
sage: max('sum(1/x^2, x, 1, 100000)')
^C---------------------------------------------------------------------------
[...]
TypeError: ECL says: Console interrupt
sage: #we press Ctrl-C again
KeyboardInterrupt
```
For reference, ECL prefers to use sigaction (in fact, probably sage should be using sigaction as well. Certain race conditions with signal are avoidable with sigaction). In glibc, signal is implemented via sigaction anyway. sigaction has a richer interface, so signal cannot always properly report what sigaction has done. By using sigaction to record and swap the different SIGINT handlers, it seems to work.

Subtle race conditions still exist: the ECL handler is instated just before entering lisp code and setting up the "unwind-protect stack frame", so an interrupt that gets delivered in that window would cause unspecified behaviour. By running

while True: os.kill(<PID>,2)

it is easy to trigger such behaviour, but sage in its present state already cannot handle this.
Therefore, I think the present patch establishes acceptable "best effort" behaviour.



---

archive/issue_events_126315.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-25T09:18:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126315"
}
```



---

archive/issue_events_126316.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2011-02-25T09:18:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126316"
}
```



---

archive/issue_comments_106544.json:
```json
{
    "body": "Changed work issues from **investigate ECL interrupt handling** to none",
    "created_at": "2011-02-25T09:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106544",
    "user": "https://github.com/nbruin"
}
```

Changed work issues from **investigate ECL interrupt handling** to none



---

archive/issue_comments_106545.json:
```json
{
    "body": "Swap signal handlers and enable signals (this one seems to work!)",
    "created_at": "2011-02-25T22:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106545",
    "user": "https://github.com/nbruin"
}
```

Swap signal handlers and enable signals (this one seems to work!)



---

archive/issue_comments_106546.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAttachment: **[handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)**\n\nSmall update:\n* Juanjo explains that unwelcome signals in ECL get queued. To mark this fact, a memory block gets mprotected to readonly. The next time a write occurs, a SIGSEGV is received and the queued signal is processed if it is now safe to do so. This means, however, that if ECL is allowed to process *any* signals then it should be allowed to handle SIGSEGV. So that handler needs to be swapped as well.\n* constants SIGINT and SIGSEGV are now actually imported.\n\nRace conditions still exist. If you run a sage process with pid PID with something along the lines of\n\n```\nfrom sage.libs.ecl import *\nlp = ecl_eval(\"(defun lp (a) (loop))\")\nwhile True:\n    try:\n        lp(1)\n    except RuntimeError as e:\n        print e\n```\nand then run in another process:\n\n```\nwhile True:\n    os.kill(PID,2)\n    sleep(0.01)\n```\nyou may eventually see strange behaviour. To avoid this we could disable signals prior to swapping the handlers and only enable them once we're inside lisp (and do the reverse on the way out). However, the signal handlers in sage are already not completely bullet proof (I don't think there are many programs where they are). Improvements welcome of course, but I think the present gives a workable compromise.",
    "created_at": "2011-02-25T22:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106546",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:5'>Comment 5:</a>
Attachment: **[handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)**

Small update:
* Juanjo explains that unwelcome signals in ECL get queued. To mark this fact, a memory block gets mprotected to readonly. The next time a write occurs, a SIGSEGV is received and the queued signal is processed if it is now safe to do so. This means, however, that if ECL is allowed to process *any* signals then it should be allowed to handle SIGSEGV. So that handler needs to be swapped as well.
* constants SIGINT and SIGSEGV are now actually imported.

Race conditions still exist. If you run a sage process with pid PID with something along the lines of

```
from sage.libs.ecl import *
lp = ecl_eval("(defun lp (a) (loop))")
while True:
    try:
        lp(1)
    except RuntimeError as e:
        print e
```
and then run in another process:

```
while True:
    os.kill(PID,2)
    sleep(0.01)
```
you may eventually see strange behaviour. To avoid this we could disable signals prior to swapping the handlers and only enable them once we're inside lisp (and do the reverse on the way out). However, the signal handlers in sage are already not completely bullet proof (I don't think there are many programs where they are). Improvements welcome of course, but I think the present gives a workable compromise.



---

archive/issue_comments_106547.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\npatchbot apply handlerswap.p2.patch",
    "created_at": "2011-02-25T22:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106547",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:6'>Comment 6:</a>
patchbot apply handlerswap.p2.patch



---

archive/issue_comments_106548.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nIf this can leave ECL in an undefined state, and so potentially Maxima generate incorrect results, would it not be better left out? Not being able to interrupt code is annoying, but potentially getting incorrect results is more dangerous. \n\nDave",
    "created_at": "2011-02-28T09:41:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106548",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:7'>Comment 7:</a>
If this can leave ECL in an undefined state, and so potentially Maxima generate incorrect results, would it not be better left out? Not being able to interrupt code is annoying, but potentially getting incorrect results is more dangerous. 

Dave



---

archive/issue_comments_106549.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [drkirkby](#comment%3A7):\n> If this can leave ECL in an undefined state, and so potentially Maxima generate incorrect results\n\nI don't know if maxima is robust in the face of interrupts, but we're already exposed to that by letting pexpect propagate SIGINT.\n\nAs far as I know, the present patch does not contribute to possible corruption of ECL. You might end up in the ECL debugger if the interrupt arrives between teardown of the Lisp version of try/expect and the swap of the interrupt handlers. This is easily distinguished from a wrong answer.\n\nSee http://sourceforge.net/mailarchive/message.php?msg_id=27127709 for JJ G-P's suggestion for dealing with this.",
    "created_at": "2011-02-28T17:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106549",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [drkirkby](#comment%3A7):
> If this can leave ECL in an undefined state, and so potentially Maxima generate incorrect results

I don't know if maxima is robust in the face of interrupts, but we're already exposed to that by letting pexpect propagate SIGINT.

As far as I know, the present patch does not contribute to possible corruption of ECL. You might end up in the ECL debugger if the interrupt arrives between teardown of the Lisp version of try/expect and the swap of the interrupt handlers. This is easily distinguished from a wrong answer.

See http://sourceforge.net/mailarchive/message.php?msg_id=27127709 for JJ G-P's suggestion for dealing with this.



---

archive/issue_comments_106550.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,4 @@\n ```\n The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.\n \n+Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)\n``````\n",
    "created_at": "2011-03-28T19:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106550",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,4 @@
 ```
 The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.
 
+Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)
``````




---

archive/issue_comments_106551.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2011-03-28T19:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106551",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_106552.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,6 @@\n ```\n The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.\n \n+When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).\n+\n Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)\n``````\n",
    "created_at": "2011-03-28T19:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106552",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,6 @@
 ```
 The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.
 
+When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).
+
 Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)
``````




---

archive/issue_comments_106553.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to none",
    "created_at": "2011-03-30T12:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106553",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Jeroen Demeyer** to none



---

archive/issue_comments_106554.json:
```json
{
    "body": "Changed author from **Nils Bruin** to **Nils Bruin, Jeroen Demeyer**",
    "created_at": "2011-03-30T12:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106554",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Nils Bruin** to **Nils Bruin, Jeroen Demeyer**



---

archive/issue_comments_106555.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n \n When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).\n \n-Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)\n+Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)\n``````\n",
    "created_at": "2011-03-30T12:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106555",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 
 When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).
 
-Apply [attachment: handlerswap.p2.patch.gz](https://github.com/sagemath/sage/files/ticket10818/handlerswap.p2.patch.gz)
+Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)
``````




---

archive/issue_comments_106556.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nWith my patch, I introduce new functions `ecl_sig_on()` and `ecl_sig_off()` which is a cleaner solution.  I also added two tests to check that interrupts actually work.",
    "created_at": "2011-03-30T12:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106556",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
With my patch, I introduce new functions `ecl_sig_on()` and `ecl_sig_off()` which is a cleaner solution.  I also added two tests to check that interrupts actually work.



---

archive/issue_comments_106557.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNice cleanup! Two questions:\n* in ecl_sig_on(), you do a sig_on() BEFORE switching to the ecl signal handler. That provides a window for an interrupt to still be handled by the SAGE handler. Is that intentional? (It might even be a good idea if that \"clears out\" the signal queue before switching to ecl handling, because ecl will not be aware of any signals queued by SAGE, which might cause them to grow stale)\n\n* Juanjo's suggestion http://sourceforge.net/mailarchive/message.php?msg_id=27127709 includes using some macros from ecl's header files. Can that be integrated in ecl_sig_on() etc? Since you are moving things to a .c file, using those macros will be much easier. I gave some thought on how to import those into cython but failed to come up with a solution.",
    "created_at": "2011-03-30T22:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106557",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:13'>Comment 13:</a>
Nice cleanup! Two questions:
* in ecl_sig_on(), you do a sig_on() BEFORE switching to the ecl signal handler. That provides a window for an interrupt to still be handled by the SAGE handler. Is that intentional? (It might even be a good idea if that "clears out" the signal queue before switching to ecl handling, because ecl will not be aware of any signals queued by SAGE, which might cause them to grow stale)

* Juanjo's suggestion http://sourceforge.net/mailarchive/message.php?msg_id=27127709 includes using some macros from ecl's header files. Can that be integrated in ecl_sig_on() etc? Since you are moving things to a .c file, using those macros will be much easier. I gave some thought on how to import those into cython but failed to come up with a solution.



---

archive/issue_comments_106558.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@nbruin](#comment%3A13):\n> in ecl_sig_on(), you do a sig_on() BEFORE switching to the ecl signal handler. That provides a window for an interrupt to still be handled by the SAGE handler. Is that intentional?\n\nYes, it is intentional.  It fixes the problem of an interrupt arriving *before* ecl_sig_on() is called, I added a test to prove that it works.",
    "created_at": "2011-04-01T10:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106558",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@nbruin](#comment%3A13):
> in ecl_sig_on(), you do a sig_on() BEFORE switching to the ecl signal handler. That provides a window for an interrupt to still be handled by the SAGE handler. Is that intentional?

Yes, it is intentional.  It fixes the problem of an interrupt arriving *before* ecl_sig_on() is called, I added a test to prove that it works.



---

archive/issue_comments_106559.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@nbruin](#comment%3A13):\n> Juanjo's suggestion http://sourceforge.net/mailarchive/message.php?msg_id=27127709 includes using some macros from ecl's header files. Can that be integrated in ecl_sig_on() etc? Since you are moving things to a .c file, using those macros will be much easier.\n\nMaybe it's a good idea, maybe not.  I do not know how ECL's interrupt handling works (and to be honest, I don't feel like studying it).  So personally, I am not going to do this now.",
    "created_at": "2011-04-01T10:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106559",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@nbruin](#comment%3A13):
> Juanjo's suggestion http://sourceforge.net/mailarchive/message.php?msg_id=27127709 includes using some macros from ecl's header files. Can that be integrated in ecl_sig_on() etc? Since you are moving things to a .c file, using those macros will be much easier.

Maybe it's a good idea, maybe not.  I do not know how ECL's interrupt handling works (and to be honest, I don't feel like studying it).  So personally, I am not going to do this now.



---

archive/issue_comments_106560.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nIt would be good to include this patch before #7377.  Nils, are you able to review this? (if no, just say so).",
    "created_at": "2011-04-04T18:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106560",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>
It would be good to include this patch before #7377.  Nils, are you able to review this? (if no, just say so).



---

archive/issue_comments_106561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,8 +7,8 @@\n sage: inf_loop=ecl_eval(\"(defun infinite() (loop (incf i)))\")\n sage: inf_loop() #DON'T DO THIS! (bye bye)\n ```\n-The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.\n+The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it.\n \n-When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).\n+When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).\n \n Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)\n``````\n",
    "created_at": "2011-04-04T20:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106561",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,8 +7,8 @@
 sage: inf_loop=ecl_eval("(defun infinite() (loop (incf i)))")
 sage: inf_loop() #DON'T DO THIS! (bye bye)
 ```
-The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it. The attached patch just inserts `sig_on()/sig_off()` around the possibly slow parts. This seems to work, but I suspect it might leave ECL in an inconsistent state.
+The signal handling in ECL should be studied a bit more to ensure that we are safely interacting with it.
 
-When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since interrupts were completely rewritten (see #9678).
+When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).
 
 Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)
``````




---

archive/issue_comments_106562.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@jdemeyer](#comment%3A16):\n> It would be good to include this patch before #7377.  Nils, are you able to review this?\n\nNo, sorry. I'm currently not set up to apply and test patches. I gave your code a quick look and it looks great\n\n* The fact that ecl_sig_on() is a macro will work great with Juanjo's refinement later\n\n* I'm a little puzzled that ecl_sig_off() is not a macro. Doesn't the same argument apply there?\n(certainly if we apply Juanjo's suggestion it will have to be, because I think there is a macro pair that involves straddling \"{\" and \"}\"). However, if the current code works that that is fine. We can always change it later.\n\n* Jeroen is almost certainly more of an expert in Posix signal handling than I am. Take that as a recommendation.",
    "created_at": "2011-04-05T00:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106562",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@jdemeyer](#comment%3A16):
> It would be good to include this patch before #7377.  Nils, are you able to review this?

No, sorry. I'm currently not set up to apply and test patches. I gave your code a quick look and it looks great

* The fact that ecl_sig_on() is a macro will work great with Juanjo's refinement later

* I'm a little puzzled that ecl_sig_off() is not a macro. Doesn't the same argument apply there?
(certainly if we apply Juanjo's suggestion it will have to be, because I think there is a macro pair that involves straddling "{" and "}"). However, if the current code works that that is fine. We can always change it later.

* Jeroen is almost certainly more of an expert in Posix signal handling than I am. Take that as a recommendation.



---

archive/issue_comments_106563.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@nbruin](#comment%3A18):\n> * I'm a little puzzled that ecl_sig_off() is not a macro. Doesn't the same argument apply there?\n> (certainly if we apply Juanjo's suggestion it will have to be, because I think there is a macro pair that involves straddling \"{\" and \"}\"). However, if the current code works that that is fine. We can always change it later.\n\nThe main reason for *not* making it a macro is that there is currently no reason why it should be a macro.  Between macros and inline functions, I much prefer inline functions.  So I only use macros when they are really needed.\n\nLet me state again that I'm not against Juanjo's suggestion, it's just that I don't really know how the ECL signal handling works.  The code which is currently on this ticket makes few assumptions on the inner workings of the ECL signal handler.  The more we start \"interfering\" with the ECL signal handler, the more important it becomes to really understand what is going on.",
    "created_at": "2011-04-05T08:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106563",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@nbruin](#comment%3A18):
> * I'm a little puzzled that ecl_sig_off() is not a macro. Doesn't the same argument apply there?
> (certainly if we apply Juanjo's suggestion it will have to be, because I think there is a macro pair that involves straddling "{" and "}"). However, if the current code works that that is fine. We can always change it later.

The main reason for *not* making it a macro is that there is currently no reason why it should be a macro.  Between macros and inline functions, I much prefer inline functions.  So I only use macros when they are really needed.

Let me state again that I'm not against Juanjo's suggestion, it's just that I don't really know how the ECL signal handling works.  The code which is currently on this ticket makes few assumptions on the inner workings of the ECL signal handler.  The more we start "interfering" with the ECL signal handler, the more important it becomes to really understand what is going on.



---

archive/issue_events_126317.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-06T14:09:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126317"
}
```



---

archive/issue_events_126318.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-06T14:09:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126318"
}
```



---

archive/issue_comments_106564.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI've looked through the code and (after understanding lots of things about signal handling in Sage) it seems great.\n\nI would be ready to give it positive review if the test_sigint_... was a little bit more explicit.\n\nRight now, letting sig_on(), sig_off() in ecl_sig_on() and ecl_sig_off() does not look really different (ok, there is one line more).\n\nFor example adding an infinite loop between ecl_sig_on and ecl_sig_off:\n\n```\n    global safe_funcall_clobj\n    cl_eval(string_to_object(\"(setf i 0)\"))\n    cl_eval(string_to_object(\"(defun infinite() (loop (incf i)))\"))\n    inf_loop=cl_eval(string_to_object(\"(symbol-function 'infinite)\"))\n    signal_raise(SIGINT)\n    ecl_sig_on() # KeyboardInterrupt should be raised because ecl_sig_on() calls sig_on() first\n    cl_funcall(1,inf_loop)\n    ecl_sig_off()\n```",
    "created_at": "2011-04-06T14:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106564",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:20'>Comment 20:</a>
I've looked through the code and (after understanding lots of things about signal handling in Sage) it seems great.

I would be ready to give it positive review if the test_sigint_... was a little bit more explicit.

Right now, letting sig_on(), sig_off() in ecl_sig_on() and ecl_sig_off() does not look really different (ok, there is one line more).

For example adding an infinite loop between ecl_sig_on and ecl_sig_off:

```
    global safe_funcall_clobj
    cl_eval(string_to_object("(setf i 0)"))
    cl_eval(string_to_object("(defun infinite() (loop (incf i)))"))
    inf_loop=cl_eval(string_to_object("(symbol-function 'infinite)"))
    signal_raise(SIGINT)
    ecl_sig_on() # KeyboardInterrupt should be raised because ecl_sig_on() calls sig_on() first
    cl_funcall(1,inf_loop)
    ecl_sig_off()
```



---

archive/issue_comments_106565.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2011-04-07T14:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106565",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_106566.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [jpflori](#comment%3A20):\n> For example adding an infinite loop between ecl_sig_on and ecl_sig_off:\n> \n> ```\n>     global safe_funcall_clobj\n>     cl_eval(string_to_object(\"(setf i 0)\"))\n>     cl_eval(string_to_object(\"(defun infinite() (loop (incf i)))\"))\n>     inf_loop=cl_eval(string_to_object(\"(symbol-function 'infinite)\"))\n>     signal_raise(SIGINT)\n>     ecl_sig_on() # KeyboardInterrupt should be raised because ecl_sig_on() calls sig_on() first\n>     cl_funcall(1,inf_loop)\n>     ecl_sig_off()\n> ```\n\nI decided not to do this, in order to keep the code simple and make it more clear what is happening.  I *did* add more explanation to the test though, I hope this helps also.",
    "created_at": "2011-04-07T14:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106566",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [jpflori](#comment%3A20):
> For example adding an infinite loop between ecl_sig_on and ecl_sig_off:
> 
> ```
>     global safe_funcall_clobj
>     cl_eval(string_to_object("(setf i 0)"))
>     cl_eval(string_to_object("(defun infinite() (loop (incf i)))"))
>     inf_loop=cl_eval(string_to_object("(symbol-function 'infinite)"))
>     signal_raise(SIGINT)
>     ecl_sig_on() # KeyboardInterrupt should be raised because ecl_sig_on() calls sig_on() first
>     cl_funcall(1,inf_loop)
>     ecl_sig_off()
> ```

I decided not to do this, in order to keep the code simple and make it more clear what is happening.  I *did* add more explanation to the test though, I hope this helps also.



---

archive/issue_events_126319.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T14:10:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126319"
}
```



---

archive/issue_events_126320.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T14:10:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126320"
}
```



---

archive/issue_comments_106567.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI'm sorry to complain a little more about the test you put, but I think putting something python-ish at that place is a bad idea.\n\nOf course because you will actually leave \"sig_on()\" in \"ecl_sig_on()\", that won't cause any problems, but if we were to leave out \"sig_on()\"  we won't see \"Failure\" printed (the SIGINT will get caught before, and that is the main reason which makes it a bad test for me) and that will completely break interrupt handling (pressing Ctrl-C afterwards will lead you into Lisp debugger, I don't even know how to get out of there without pressing Ctrl+\\). So IMHO that is not a good example to clearly understand what is going on with interrupt handling for someone who is not acquainted to it (just as me !).\n\nTherefore I put something C-ish (but too complicated I agree) in there. Without \"sig_on()\", at least it should not lead to a broken situation because the interrupt only gets caught after the C-ish part is finished (but my example is even worse than yours because the C-ish part never ends...).\n\nSo you could just add a line stating that even with sig_on(), \"Failure !\" will not be printed, or a little explanatory paragraph in a note rather than just comments inside sage code.",
    "created_at": "2011-04-07T14:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106567",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:22'>Comment 22:</a>
I'm sorry to complain a little more about the test you put, but I think putting something python-ish at that place is a bad idea.

Of course because you will actually leave "sig_on()" in "ecl_sig_on()", that won't cause any problems, but if we were to leave out "sig_on()"  we won't see "Failure" printed (the SIGINT will get caught before, and that is the main reason which makes it a bad test for me) and that will completely break interrupt handling (pressing Ctrl-C afterwards will lead you into Lisp debugger, I don't even know how to get out of there without pressing Ctrl+\). So IMHO that is not a good example to clearly understand what is going on with interrupt handling for someone who is not acquainted to it (just as me !).

Therefore I put something C-ish (but too complicated I agree) in there. Without "sig_on()", at least it should not lead to a broken situation because the interrupt only gets caught after the C-ish part is finished (but my example is even worse than yours because the C-ish part never ends...).

So you could just add a line stating that even with sig_on(), "Failure !" will not be printed, or a little explanatory paragraph in a note rather than just comments inside sage code.



---

archive/issue_events_126321.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-07T14:48:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126321"
}
```



---

archive/issue_events_126322.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-07T14:48:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126322"
}
```



---

archive/issue_events_126323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-08T08:41:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126323"
}
```



---

archive/issue_events_126324.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-08T08:41:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126324"
}
```



---

archive/issue_comments_106568.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAttachment: **[10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)**\n\nReplying to [jpflori](#comment%3A22):\n> Therefore I put something C-ish (but too complicated I agree) in there.\n\nNow I added an `abort()` which is certainly C-ish.",
    "created_at": "2011-04-08T08:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106568",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>Comment 23:</a>
Attachment: **[10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)**

Replying to [jpflori](#comment%3A22):
> Therefore I put something C-ish (but too complicated I agree) in there.

Now I added an `abort()` which is certainly C-ish.



---

archive/issue_comments_106569.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThanks, I'm happy with that.",
    "created_at": "2011-04-08T08:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106569",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:24'>Comment 24:</a>
Thanks, I'm happy with that.



---

archive/issue_events_126325.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-08T08:49:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126325"
}
```



---

archive/issue_events_126326.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-08T08:49:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126326"
}
```



---

archive/issue_comments_106570.json:
```json
{
    "body": "Merged: **sage-4.7.alpha5**",
    "created_at": "2011-04-11T19:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106570",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha5**



---

archive/issue_events_126327.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T19:16:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126327"
}
```



---

archive/issue_events_126328.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T19:16:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126328"
}
```



---

archive/issue_comments_106571.json:
```json
{
    "body": "Changed merged from **sage-4.7.alpha5** to none",
    "created_at": "2011-04-14T18:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106571",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.alpha5** to none



---

archive/issue_comments_106572.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nOn OSX 10.6-32 (bsd):\n\n```\nsage -t -long  -force_lib devel/sage/sage/libs/ecl.pyx\nThe doctested process was killed by signal 10\n```",
    "created_at": "2011-04-14T18:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'>Comment 26:</a>
On OSX 10.6-32 (bsd):

```
sage -t -long  -force_lib devel/sage/sage/libs/ecl.pyx
The doctested process was killed by signal 10
```



---

archive/issue_events_126329.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:34:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126329"
}
```



---

archive/issue_events_126330.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:35:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126330"
}
```



---

archive/issue_events_126331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:35:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126331"
}
```



---

archive/issue_comments_106573.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@jdemeyer](#comment%3A26):\n> On OSX 10.6-32 (bsd):\n> \n> ```\n> sage -t -long  -force_lib devel/sage/sage/libs/ecl.pyx\n> The doctested process was killed by signal 10\n> ```\n\nWould it be at all possible to have the output of\n\n```\nsage -t -long -verbose -force_lib devel/sage/sage/libs/ecl.pyx\n```\non that machine?",
    "created_at": "2011-04-14T21:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106573",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@jdemeyer](#comment%3A26):
> On OSX 10.6-32 (bsd):
> 
> ```
> sage -t -long  -force_lib devel/sage/sage/libs/ecl.pyx
> The doctested process was killed by signal 10
> ```

Would it be at all possible to have the output of

```
sage -t -long -verbose -force_lib devel/sage/sage/libs/ecl.pyx
```
on that machine?



---

archive/issue_comments_106574.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nI'll try to test that on different OSX versions (I guess this is an Intel processor).",
    "created_at": "2011-04-15T06:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106574",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:31'>Comment 31:</a>
I'll try to test that on different OSX versions (I guess this is an Intel processor).



---

archive/issue_comments_106575.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nWe need to handle SIGBUS in addition to SIGINT and SIGSEGV.",
    "created_at": "2011-04-16T14:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106575",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
We need to handle SIGBUS in addition to SIGINT and SIGSEGV.



---

archive/issue_events_126332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-16T14:12:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126332"
}
```



---

archive/issue_events_126333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-16T14:12:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126333"
}
```



---

archive/issue_comments_106576.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n \n When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).\n \n-Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)\n+Apply [attachment: 10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)\n``````\n",
    "created_at": "2011-04-16T14:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106576",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 
 When testing this patch, absolutely test it to **sage-4.7.alpha1 or later** since ECL was updated (#10766) and interrupts were completely rewritten (#9678).
 
-Apply [attachment: 10818_handlerswap.p3.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p3.patch.gz)
+Apply [attachment: 10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)
``````




---

archive/issue_comments_106577.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nAttachment: **[10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)**\n\nI don't have access to bsd, but on my OS X 10.6 Intel laptop and my OS X 10.4 PPC desktop I get, using the command fbissey suggests,\n\n```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 4.0 seconds\n```\nWell, it was 36.1 seconds on the older machine!  So for what it's worth, the latest patch seems to be ok.  Since this is Jeroen's patch, presumably he tested it works on bsd?",
    "created_at": "2011-04-18T15:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106577",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:34'>Comment 34:</a>
Attachment: **[10818_handlerswap.p4.patch.gz](https://github.com/sagemath/sage/files/ticket10818/10818_handlerswap.p4.patch.gz)**

I don't have access to bsd, but on my OS X 10.6 Intel laptop and my OS X 10.4 PPC desktop I get, using the command fbissey suggests,

```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 4.0 seconds
```
Well, it was 36.1 seconds on the older machine!  So for what it's worth, the latest patch seems to be ok.  Since this is Jeroen's patch, presumably he tested it works on bsd?



---

archive/issue_comments_106578.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nReplying to [@kcrisman](#comment%3A34):\n> Since this is Jeroen's patch, presumably he tested it works on bsd?\n\nNo, `bsd` is totally completely utterly unusably slow these days so I can't test it on that machine.  I have sent an email to William about this slowness.",
    "created_at": "2011-04-18T15:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106578",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'>Comment 35:</a>
Replying to [@kcrisman](#comment%3A34):
> Since this is Jeroen's patch, presumably he tested it works on bsd?

No, `bsd` is totally completely utterly unusably slow these days so I can't test it on that machine.  I have sent an email to William about this slowness.



---

archive/issue_comments_106579.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nReplying to [@kcrisman](#comment%3A34):\n> Since this is Jeroen's patch, presumably he tested it works on bsd?\n\nbsd is fixed now and yes it works on that machine.  Can anybody look at the patch and give a review?",
    "created_at": "2011-04-20T07:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106579",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'>Comment 36:</a>
Replying to [@kcrisman](#comment%3A34):
> Since this is Jeroen's patch, presumably he tested it works on bsd?

bsd is fixed now and yes it works on that machine.  Can anybody look at the patch and give a review?



---

archive/issue_comments_106580.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nCan you post a diff from previous versions if no one reviews it soon?  It looks ok but it takes me a long time to review this sort of code properly so I don't feel comfortable giving review until I have time to sit down and really parse it.",
    "created_at": "2011-04-20T12:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106580",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:37'>Comment 37:</a>
Can you post a diff from previous versions if no one reviews it soon?  It looks ok but it takes me a long time to review this sort of code properly so I don't feel comfortable giving review until I have time to sit down and really parse it.



---

archive/issue_comments_106581.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nThe only difference with the previous version is that SIGBUS is handled as SIGINT and SIGSEGV now (so basically a line added everytime they are involved).\n\nI think that the code its testcases and its doc are fine, but I don't have the time and the means to test it on any exotic architecture, so I don't really feel like giving it a positive review (last time I let the bsd problem go through).\n\nI'm not an ECL interrupt expert as well, so some other things could be wrong...",
    "created_at": "2011-04-20T12:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106581",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:38'>Comment 38:</a>
The only difference with the previous version is that SIGBUS is handled as SIGINT and SIGSEGV now (so basically a line added everytime they are involved).

I think that the code its testcases and its doc are fine, but I don't have the time and the means to test it on any exotic architecture, so I don't really feel like giving it a positive review (last time I let the bsd problem go through).

I'm not an ECL interrupt expert as well, so some other things could be wrong...



---

archive/issue_comments_106582.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nReplying to [jpflori](#comment%3A38):\n> I don't have the time and the means to test it on any exotic architecture, so I don't really feel like giving it a positive review\n\n*(speaking as release manager)*\nI don't think that testing on exotic architectures should be a requirement for a patch to get positive_review.  It is much more important to actually look at the patch and check that it makes sense rather than test it on all possible architectures.  Some minimal testing should of course be done (say `-t -long` in directories obviously affected by the patch on at least one system).",
    "created_at": "2011-04-20T13:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106582",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'>Comment 39:</a>
Replying to [jpflori](#comment%3A38):
> I don't have the time and the means to test it on any exotic architecture, so I don't really feel like giving it a positive review

*(speaking as release manager)*
I don't think that testing on exotic architectures should be a requirement for a patch to get positive_review.  It is much more important to actually look at the patch and check that it makes sense rather than test it on all possible architectures.  Some minimal testing should of course be done (say `-t -long` in directories obviously affected by the patch on at least one system).



---

archive/issue_comments_106583.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nReplying to [jpflori](#comment%3A38):\n> I'm not an ECL interrupt expert as well, so some other things could be wrong...\n\nUnfortunately, even I am not an ECL interrupt expert.  However, I tried to write the code in such a way that it doesn't really matter what ECL does.  With the current patch, there is no interaction between Sage interrupt handling and ECL interrupt handling.  We just let ECL deal with all relevant signals.",
    "created_at": "2011-04-20T13:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106583",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>Comment 40:</a>
Replying to [jpflori](#comment%3A38):
> I'm not an ECL interrupt expert as well, so some other things could be wrong...

Unfortunately, even I am not an ECL interrupt expert.  However, I tried to write the code in such a way that it doesn't really matter what ECL does.  With the current patch, there is no interaction between Sage interrupt handling and ECL interrupt handling.  We just let ECL deal with all relevant signals.



---

archive/issue_events_126334.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-20T13:24:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126334"
}
```



---

archive/issue_events_126335.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2011-04-20T13:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126335"
}
```



---

archive/issue_comments_106584.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nOk, then I'll put it back as positive review.",
    "created_at": "2011-04-20T13:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106584",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:41'>Comment 41:</a>
Ok, then I'll put it back as positive review.



---

archive/issue_comments_106585.json:
```json
{
    "body": "Merged: **sage-4.7.1.alpha0**",
    "created_at": "2011-04-20T15:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10818#issuecomment-106585",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.alpha0**



---

archive/issue_events_126336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T15:03:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126336"
}
```



---

archive/issue_events_126337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T15:03:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10818",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10818#event-126337"
}
```
