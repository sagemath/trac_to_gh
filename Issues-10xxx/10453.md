# Issue 10453: Problem with old submodule

archive/issues_010400.json:
```json
{
    "body": "Assignee: @craigcitro\n\nWeird things happen if you try to compute the old submodule of a Gamma1 modular forms space. E.g.\n\n```\nsage: CuspForms(Gamma1(11), 2).old_submodule() # crashes\n```\n\nThis turns out to be because:\n\n```\nsage: ModularForms(Gamma1(11), 2).hecke_module_of_level(1).hecke_module_of_level(11)\nModular Forms space of dimension 2 for Congruence Subgroup Gamma0(11) of weight 2 over Rational Field\n```\n\nso the degeneracy level-raising map is getting computed for the wrong space!\n\nPrerequisite for #11601. (Note that #11601 depends on a bunch of other stuff as well, but this ticket is independent of any of the other patches in the series.)\n\n---\n\nApply [attachment:trac_10453_gamma1_old_submodule.patch] to the Sage library.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10453\n\n",
    "closed_at": "2011-09-17T04:33:50Z",
    "created_at": "2010-12-09T17:03:17Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Problem with old submodule",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10453",
    "user": "https://github.com/loefflerd"
}
```
Assignee: @craigcitro

Weird things happen if you try to compute the old submodule of a Gamma1 modular forms space. E.g.

```
sage: CuspForms(Gamma1(11), 2).old_submodule() # crashes
```

This turns out to be because:

```
sage: ModularForms(Gamma1(11), 2).hecke_module_of_level(1).hecke_module_of_level(11)
Modular Forms space of dimension 2 for Congruence Subgroup Gamma0(11) of weight 2 over Rational Field
```

so the degeneracy level-raising map is getting computed for the wrong space!

Prerequisite for #11601. (Note that #11601 depends on a bunch of other stuff as well, but this ticket is independent of any of the other patches in the series.)

---

Apply [attachment:trac_10453_gamma1_old_submodule.patch] to the Sage library.


Issue created by migration from https://trac.sagemath.org/ticket/10453





---

archive/issue_comments_106861.json:
```json
{
    "body": "Attachment [trac_10453_gamma1_old_submodule.patch](tarball://root/attachments/some-uuid/ticket10453/trac_10453_gamma1_old_submodule.patch) by @loefflerd created at 2010-12-11 16:05:39\n\npatch against 4.6.1.alpha3 + #8716",
    "created_at": "2010-12-11T16:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106861",
    "user": "https://github.com/loefflerd"
}
```

Attachment [trac_10453_gamma1_old_submodule.patch](tarball://root/attachments/some-uuid/ticket10453/trac_10453_gamma1_old_submodule.patch) by @loefflerd created at 2010-12-11 16:05:39

patch against 4.6.1.alpha3 + #8716



---

archive/issue_comments_106862.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-11T16:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106862",
    "user": "https://github.com/loefflerd"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_106863.json:
```json
{
    "body": "Here's a patch. It requires #8716 (but is independent of either #10450 or #10452). The fix was to make the various degeneracy matrix commands pass around an explicit target space, rather than just a target level, as the argument.",
    "created_at": "2010-12-11T16:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106863",
    "user": "https://github.com/loefflerd"
}
```

Here's a patch. It requires #8716 (but is independent of either #10450 or #10452). The fix was to make the various degeneracy matrix commands pass around an explicit target space, rather than just a target level, as the argument.



---

archive/issue_comments_106864.json:
```json
{
    "body": "Depends on #8716",
    "created_at": "2010-12-31T14:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106864",
    "user": "https://github.com/loefflerd"
}
```

Depends on #8716



---

archive/issue_comments_106865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-18T11:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106865",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_106866.json:
```json
{
    "body": "The code looks sound and is well documented.  All long doctests pass.  I played around with it and couldn't produce any false results.  I did get the following while applying the patch:\n\n```\napplying trac_10453_gamma1_old_submodule.patch\npatching file sage/modular/hecke/ambient_module.py\nHunk #10 succeeded at 883 with fuzz 1 (offset 6 lines).\nnow at: trac_10453_gamma1_old_submodule.patch\n```\nbut according to [this discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/c5af325e984d8ab4/cb85c8767055af0e?lnk=gst&q=fuzz#cb85c8767055af0e), fuzz 1 is okay.  Hence: positive review. ;).",
    "created_at": "2011-08-18T11:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106866",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

The code looks sound and is well documented.  All long doctests pass.  I played around with it and couldn't produce any false results.  I did get the following while applying the patch:

```
applying trac_10453_gamma1_old_submodule.patch
patching file sage/modular/hecke/ambient_module.py
Hunk #10 succeeded at 883 with fuzz 1 (offset 6 lines).
now at: trac_10453_gamma1_old_submodule.patch
```
but according to [this discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/c5af325e984d8ab4/cb85c8767055af0e?lnk=gst&q=fuzz#cb85c8767055af0e), fuzz 1 is okay.  Hence: positive review. ;).



---

archive/issue_comments_106867.json:
```json
{
    "body": "Replying to [comment:6 johanbosman]:\n> I did get the following while applying the patch:\n\n{{{\napplying trac_10453_gamma1_old_submodule.patch\npatching file sage/modular/hecke/ambient_module.py\nHunk #10 succeeded at 883 with fuzz 1 (offset 6 lines).\nnow at: trac_10453_gamma1_old_submodule.patch\n}}}\n> but according to [this discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/c5af325e984d8ab4/cb85c8767055af0e?lnk=gst&q=fuzz#cb85c8767055af0e), fuzz 1 is okay.  Hence: positive review. ;).\n\n\nIn this case, you could re-export the patch and upload the rebased version.\n\nIMHO one should inspect any fuzz anyway.",
    "created_at": "2011-09-09T00:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106867",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:6 johanbosman]:
> I did get the following while applying the patch:

{{{
applying trac_10453_gamma1_old_submodule.patch
patching file sage/modular/hecke/ambient_module.py
Hunk #10 succeeded at 883 with fuzz 1 (offset 6 lines).
now at: trac_10453_gamma1_old_submodule.patch
}}}
> but according to [this discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/c5af325e984d8ab4/cb85c8767055af0e?lnk=gst&q=fuzz#cb85c8767055af0e), fuzz 1 is okay.  Hence: positive review. ;).


In this case, you could re-export the patch and upload the rebased version.

IMHO one should inspect any fuzz anyway.



---

archive/issue_comments_106868.json:
```json
{
    "body": "Replying to [comment:7 leif]:\n> IMHO one should inspect any fuzz anyway.\n\n\nI have inspected the fuzz, which is caused by patch #10664 having gone in since this was written. It is not a problem; the issue fixed by #10664 is completely orthogonal to this one.",
    "created_at": "2011-09-11T10:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106868",
    "user": "https://github.com/loefflerd"
}
```

Replying to [comment:7 leif]:
> IMHO one should inspect any fuzz anyway.


I have inspected the fuzz, which is caused by patch #10664 having gone in since this was written. It is not a problem; the issue fixed by #10664 is completely orthogonal to this one.



---

archive/issue_comments_106869.json:
```json
{
    "body": "Replying to [comment:8 davidloeffler]:\n> I have inspected the fuzz, which is caused by patch #10664 having gone in since this was written. It is not a problem; the issue fixed by #10664 is completely orthogonal to this one.\n\n\nThanks, I hadn't [yet].",
    "created_at": "2011-09-11T11:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106869",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:8 davidloeffler]:
> I have inspected the fuzz, which is caused by patch #10664 having gone in since this was written. It is not a problem; the issue fixed by #10664 is completely orthogonal to this one.


Thanks, I hadn't [yet].



---

archive/issue_comments_106870.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-17T04:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10453#issuecomment-106870",
    "user": "https://github.com/nexttime"
}
```

Resolution: fixed



---

archive/issue_events_026761.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T04:33:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10453",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10453#event-26761"
}
```
