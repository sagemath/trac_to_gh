# Issue 10596: Misc improvements to integer.pyx

archive/issues_010543.json:
```json
{
    "assignees": [
        "https://github.com/aghitza"
    ],
    "body": "Generic code clean-up such as line breaks, empty lines, use of GMP functions etc\n\n\nBefore:\n\n```\nsage: x = factorial(2**14)\nsage: timeit('y = odd_part(x)')\n625 loops, best of 3: 10.6 \u00b5s per loop\n```\n\n```\nsage: odd_part(0)\n---------------------------------------------------------------------------\n...\nTypeError: unsupported operands for >>: 0, +Infinity\n```\nAfter:\n\n```\nsage: x = factorial(2**14)\nsage: timeit('y = x.odd_part()')\n625 loops, best of 3: 4.52 \u00b5s per loop\n```\n\n```\nsage: ZZ(0).odd_part()\n0\n```\n\n**Apply** [attachment: trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz), [attachment: trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)\n\nCC:  @sagetrac-jthurber @zimmermann6\n\nComponent: **basic arithmetic**\n\nAuthor: **Sebastian Pancratz, Andr\u00e9 Apitzsch**\n\nReviewer: **Aly Deines, John Cremona**\n\nMerged: **sage-5.0.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10596_\n\n",
    "closed_at": "2012-01-15T21:56:30Z",
    "created_at": "2011-01-12T00:58:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Misc improvements to integer.pyx",
    "type": "issue",
    "updated_at": "2012-03-11T10:26:05Z",
    "url": "https://github.com/sagemath/sage/issues/10596",
    "user": "https://github.com/sagetrac-spancratz"
}
```
Generic code clean-up such as line breaks, empty lines, use of GMP functions etc


Before:

```
sage: x = factorial(2**14)
sage: timeit('y = odd_part(x)')
625 loops, best of 3: 10.6 µs per loop
```

```
sage: odd_part(0)
---------------------------------------------------------------------------
...
TypeError: unsupported operands for >>: 0, +Infinity
```
After:

```
sage: x = factorial(2**14)
sage: timeit('y = x.odd_part()')
625 loops, best of 3: 4.52 µs per loop
```

```
sage: ZZ(0).odd_part()
0
```

**Apply** [attachment: trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz), [attachment: trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)

CC:  @sagetrac-jthurber @zimmermann6

Component: **basic arithmetic**

Author: **Sebastian Pancratz, André Apitzsch**

Reviewer: **Aly Deines, John Cremona**

Merged: **sage-5.0.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/10596_





---

archive/issue_events_139628.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T00:58:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139628"
}
```



---

archive/issue_events_139629.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T00:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139629"
}
```



---

archive/issue_events_139630.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T00:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139630"
}
```



---

archive/issue_events_139631.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T00:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139631"
}
```



---

archive/issue_events_139632.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2011-01-12T00:58:09Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "subject": "https://github.com/sagetrac-spancratz",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139632"
}
```



---

archive/issue_comments_101219.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Generic code clean-up such as line breaks, empty lines etc\n+Generic code clean-up such as line breaks, empty lines, use of GMP functions etc\n \n ``n.digits()``\n \n@@ -39,3 +39,30 @@\n sage: ZZ(0).nbits()\n 1\n ```\n+\n+Before:\n+\n+```\n+sage: x = factorial(2**14)\n+sage: timeit('y = odd_part(x)')\n+625 loops, best of 3: 10.6 \u00b5s per loop\n+```\n+\n+```\n+sage: odd_part(0)\n+---------------------------------------------------------------------------\n+...\n+TypeError: unsupported operands for >>: 0, +Infinity\n+```\n+After:\n+\n+```\n+sage: x = factorial(2**14)\n+sage: timeit('y = x.odd_part()')\n+625 loops, best of 3: 4.52 \u00b5s per loop\n+```\n+\n+```\n+sage: ZZ(0).odd_part()\n+0\n+```\n``````\n",
    "created_at": "2011-01-12T03:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101219",
    "user": "https://github.com/sagetrac-spancratz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Generic code clean-up such as line breaks, empty lines etc
+Generic code clean-up such as line breaks, empty lines, use of GMP functions etc
 
 ``n.digits()``
 
@@ -39,3 +39,30 @@
 sage: ZZ(0).nbits()
 1
 ```
+
+Before:
+
+```
+sage: x = factorial(2**14)
+sage: timeit('y = odd_part(x)')
+625 loops, best of 3: 10.6 µs per loop
+```
+
+```
+sage: odd_part(0)
+---------------------------------------------------------------------------
+...
+TypeError: unsupported operands for >>: 0, +Infinity
+```
+After:
+
+```
+sage: x = factorial(2**14)
+sage: timeit('y = x.odd_part()')
+625 loops, best of 3: 4.52 µs per loop
+```
+
+```
+sage: ZZ(0).odd_part()
+0
+```
``````




---

archive/issue_comments_101220.json:
```json
{
    "body": "Attachment: **[trac-10596.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac-10596.patch.gz)**",
    "created_at": "2011-01-12T04:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101220",
    "user": "https://github.com/sagetrac-spancratz"
}
```

Attachment: **[trac-10596.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac-10596.patch.gz)**



---

archive/issue_events_139633.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T04:18:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139633"
}
```



---

archive/issue_comments_101221.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,14 +3,6 @@\n ``n.digits()``\n \n Before:\n-\n-```\n-sage: n = 10**10000000-10**9999990\n-sage: timeit('n.ndigits()')\n-625 loops, best of 3: 46.6 \u00b5s per loop\n-sage: timeit('(-n).ndigits()')\n-25 loops, best of 3: 9.04 ms per loop\n-```\n \n ```\n sage: ZZ(0).ndigits()\n@@ -22,14 +14,6 @@\n ```\n \n After:\n-\n-```\n-sage: n = 10**10000000-10**9999990\n-sage: timeit('n.ndigits()')\n-625 loops, best of 3: 1.02 \u00b5s per loop\n-sage: timeit('(-n).ndigits()')\n-125 loops, best of 3: 4.57 ms per loop\n-```\n \n ```\n sage: ZZ(0).ndigits()\n``````\n",
    "created_at": "2011-01-12T04:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101221",
    "user": "https://github.com/sagetrac-spancratz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,14 +3,6 @@
 ``n.digits()``
 
 Before:
-
-```
-sage: n = 10**10000000-10**9999990
-sage: timeit('n.ndigits()')
-625 loops, best of 3: 46.6 µs per loop
-sage: timeit('(-n).ndigits()')
-25 loops, best of 3: 9.04 ms per loop
-```
 
 ```
 sage: ZZ(0).ndigits()
@@ -22,14 +14,6 @@
 ```
 
 After:
-
-```
-sage: n = 10**10000000-10**9999990
-sage: timeit('n.ndigits()')
-625 loops, best of 3: 1.02 µs per loop
-sage: timeit('(-n).ndigits()')
-125 loops, best of 3: 4.57 ms per loop
-```
 
 ```
 sage: ZZ(0).ndigits()
``````




---

archive/issue_events_139634.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T04:19:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139634"
}
```



---

archive/issue_events_139635.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T04:19:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139635"
}
```



---

archive/issue_events_139636.json:
```json
{
    "actor": "https://github.com/sagetrac-spancratz",
    "created_at": "2011-01-12T05:26:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "title_is": "Misc improvements to integer.pyx",
    "title_was": "Misc improvements to arithmetic",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139636"
}
```



---

archive/issue_comments_101222.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI had the following failures to apply, 4.6.1.rc1 on OS X.\nThis doesn't have 5945 as a prerequisite, does it?\n\n```\n22:14:56johnthurber~/sage/sage-4.6.1.rc1/devel/sage$ hg qpush\napplying trac-10596.patch\npatching file sage/rings/integer.pyx\nHunk #10 FAILED at 1268\nHunk #37 succeeded at 3276 with fuzz 1 (offset -106 lines).\nHunk #42 FAILED at 3577\nHunk #58 succeeded at 4302 with fuzz 1 (offset -106 lines).\nHunk #62 succeeded at 4643 with fuzz 2 (offset -106 lines).\nHunk #73 FAILED at 5289\n3 out of 82 hunks FAILED -- saving rejects to file sage/rings/integer.pyx.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac-10596.patch\n```",
    "created_at": "2011-01-12T06:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101222",
    "user": "https://github.com/sagetrac-jthurber"
}
```

<div id="comment:5" align="right">comment:5</div>

I had the following failures to apply, 4.6.1.rc1 on OS X.
This doesn't have 5945 as a prerequisite, does it?

```
22:14:56johnthurber~/sage/sage-4.6.1.rc1/devel/sage$ hg qpush
applying trac-10596.patch
patching file sage/rings/integer.pyx
Hunk #10 FAILED at 1268
Hunk #37 succeeded at 3276 with fuzz 1 (offset -106 lines).
Hunk #42 FAILED at 3577
Hunk #58 succeeded at 4302 with fuzz 1 (offset -106 lines).
Hunk #62 succeeded at 4643 with fuzz 2 (offset -106 lines).
Hunk #73 FAILED at 5289
3 out of 82 hunks FAILED -- saving rejects to file sage/rings/integer.pyx.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac-10596.patch
```



---

archive/issue_events_139637.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2011-01-12T06:48:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139637"
}
```



---

archive/issue_events_139638.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2011-01-12T06:48:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139638"
}
```



---

archive/issue_comments_101223.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI had the same thing happen as well.",
    "created_at": "2011-01-12T06:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101223",
    "user": "https://github.com/adeines"
}
```

<div id="comment:6" align="right">comment:6</div>

I had the same thing happen as well.



---

archive/issue_comments_101224.json:
```json
{
    "body": "Reviewer: **Aly Deines**",
    "created_at": "2011-01-12T06:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101224",
    "user": "https://github.com/adeines"
}
```

Reviewer: **Aly Deines**



---

archive/issue_comments_101225.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm sorry, I think this is because I was working on this with 4.6.0 rather than 4.6.1.rc0.  I will fix that this morning.  Sebastian",
    "created_at": "2011-01-12T17:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101225",
    "user": "https://github.com/sagetrac-spancratz"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm sorry, I think this is because I was working on this with 4.6.0 rather than 4.6.1.rc0.  I will fix that this morning.  Sebastian



---

archive/issue_comments_101226.json:
```json
{
    "body": "Attachment: **[trac-10596-461rc0.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac-10596-461rc0.patch.gz)**\n\nVersion for 4.6.1.rc0",
    "created_at": "2011-01-12T19:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101226",
    "user": "https://github.com/sagetrac-spancratz"
}
```

Attachment: **[trac-10596-461rc0.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac-10596-461rc0.patch.gz)**

Version for 4.6.1.rc0



---

archive/issue_events_139639.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2011-01-13T23:25:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139639"
}
```



---

archive/issue_events_139640.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2011-01-13T23:25:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139640"
}
```



---

archive/issue_comments_101227.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAll tests pass for me.  \n\nThere's some of code I don't understand . . . so I'm not giving this a positive review.",
    "created_at": "2011-01-13T23:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101227",
    "user": "https://github.com/adeines"
}
```

<div id="comment:9" align="right">comment:9</div>

All tests pass for me.  

There's some of code I don't understand . . . so I'm not giving this a positive review.



---

archive/issue_comments_101228.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n*integer.pyx*: `ndigits()`: unsigned long b is never used. (rc0 patch version)",
    "created_at": "2011-01-14T16:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101228",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:10" align="right">comment:10</div>

*integer.pyx*: `ndigits()`: unsigned long b is never used. (rc0 patch version)



---

archive/issue_comments_101229.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi Sebastian, \n\nHope you're well. Trivial comment: it's the done thing to put full names, not trac usernames, in the Author and Reviewer fields because they're used for compiling the release notes.\n\nLess trivial: can you perhaps do a micro-patch that gets rid of the unused variable in ndigits? The rest of the code looks fine to me, and it would be good to get this positively reviewed soon, because any patch that changes quite so many lines of code is going to be highly vulnerable to bitrotting (it already conflicts with my patch at #10625, sigh).\n\nRegards, David",
    "created_at": "2011-01-18T08:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101229",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi Sebastian, 

Hope you're well. Trivial comment: it's the done thing to put full names, not trac usernames, in the Author and Reviewer fields because they're used for compiling the release notes.

Less trivial: can you perhaps do a micro-patch that gets rid of the unused variable in ndigits? The rest of the code looks fine to me, and it would be good to get this positively reviewed soon, because any patch that changes quite so many lines of code is going to be highly vulnerable to bitrotting (it already conflicts with my patch at #10625, sigh).

Regards, David



---

archive/issue_comments_101230.json:
```json
{
    "body": "Changed author from **spancratz** to **Sebastian Pancratz**",
    "created_at": "2011-01-18T08:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101230",
    "user": "https://github.com/loefflerd"
}
```

Changed author from **spancratz** to **Sebastian Pancratz**



---

archive/issue_events_139641.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-02-14T11:36:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139641"
}
```



---

archive/issue_events_139642.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-02-14T11:36:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139642"
}
```



---

archive/issue_comments_101231.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@loefflerd](#comment:11):\n> it would be good to get this positively reviewed soon, because any patch that changes quite so many lines of code is going to be highly vulnerable to bitrotting\n\nBitrotting happened: failed to apply trac-10596-461rc0.patch on sage-4.6.2.alpha4",
    "created_at": "2011-02-14T11:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101231",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@loefflerd](#comment:11):
> it would be good to get this positively reviewed soon, because any patch that changes quite so many lines of code is going to be highly vulnerable to bitrotting

Bitrotting happened: failed to apply trac-10596-461rc0.patch on sage-4.6.2.alpha4



---

archive/issue_comments_101232.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nRebased the patch by spancratz and added a patch that removes some trailing whitespaces.\n\nApply [trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz) after [trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz)",
    "created_at": "2011-11-13T17:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101232",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:13" align="right">comment:13</div>

Rebased the patch by spancratz and added a patch that removes some trailing whitespaces.

Apply [trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz) after [trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz)



---

archive/issue_events_139643.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-11-13T17:23:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139643"
}
```



---

archive/issue_events_139644.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-11-13T17:23:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139644"
}
```



---

archive/issue_comments_101233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -50,3 +50,5 @@\n sage: ZZ(0).odd_part()\n 0\n ```\n+\n+Apply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch\n``````\n",
    "created_at": "2011-11-15T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101233",
    "user": "https://github.com/a-andre"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -50,3 +50,5 @@
 sage: ZZ(0).odd_part()
 0
 ```
+
+Apply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch
``````




---

archive/issue_comments_101234.json:
```json
{
    "body": "Attachment: **[trac_10596.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz)**\n\nAttachment: **[trac_10596_remove_trailing_whitespaces.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)**",
    "created_at": "2011-11-26T14:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101234",
    "user": "https://github.com/a-andre"
}
```

Attachment: **[trac_10596.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz)**

Attachment: **[trac_10596_remove_trailing_whitespaces.patch.gz](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)**



---

archive/issue_comments_101235.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI removed the *ndigits()* part because problem was fixed in #11796.",
    "created_at": "2011-11-26T14:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101235",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:16" align="right">comment:16</div>

I removed the *ndigits()* part because problem was fixed in #11796.



---

archive/issue_comments_101236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,28 +1,5 @@\n Generic code clean-up such as line breaks, empty lines, use of GMP functions etc\n \n-``n.digits()``\n-\n-Before:\n-\n-```\n-sage: ZZ(0).ndigits()\n-0\n-sage: ZZ(0).ndigits(base=2)\n-0\n-sage: ZZ(0).nbits()\n-1\n-```\n-\n-After:\n-\n-```\n-sage: ZZ(0).ndigits()\n-1\n-sage: ZZ(0).ndigits(base=2)\n-1\n-sage: ZZ(0).nbits()\n-1\n-```\n \n Before:\n \n@@ -51,4 +28,4 @@\n 0\n ```\n \n-Apply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch\n+**Apply** [attachment: trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz), [attachment: trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)\n``````\n",
    "created_at": "2011-11-26T14:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101236",
    "user": "https://github.com/a-andre"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,28 +1,5 @@
 Generic code clean-up such as line breaks, empty lines, use of GMP functions etc
 
-``n.digits()``
-
-Before:
-
-```
-sage: ZZ(0).ndigits()
-0
-sage: ZZ(0).ndigits(base=2)
-0
-sage: ZZ(0).nbits()
-1
-```
-
-After:
-
-```
-sage: ZZ(0).ndigits()
-1
-sage: ZZ(0).ndigits(base=2)
-1
-sage: ZZ(0).nbits()
-1
-```
 
 Before:
 
@@ -51,4 +28,4 @@
 0
 ```
 
-Apply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch
+**Apply** [attachment: trac_10596.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596.patch.gz), [attachment: trac_10596_remove_trailing_whitespaces.patch](https://github.com/sagemath/sage/files/ticket10596/trac_10596_remove_trailing_whitespaces.patch.gz)
``````




---

archive/issue_comments_101237.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?",
    "created_at": "2011-12-16T20:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101237",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:17" align="right">comment:17</div>

The patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?



---

archive/issue_events_139645.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-12-16T20:53:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139645"
}
```



---

archive/issue_events_139646.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-12-16T20:53:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139646"
}
```



---

archive/issue_comments_101238.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@JohnCremona](#comment:17):\n> The patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?\n\nAll tests pass and docbuild is clean.  I would give a  positive review were it not for those warnings.  If someone knows that they are not serious, please tell me.",
    "created_at": "2011-12-16T21:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101238",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@JohnCremona](#comment:17):
> The patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?

All tests pass and docbuild is clean.  I would give a  positive review were it not for those warnings.  If someone knows that they are not serious, please tell me.



---

archive/issue_comments_101239.json:
```json
{
    "body": "Changed reviewer from **Aly Deines** to **Aly Deines, John Cremona**",
    "created_at": "2011-12-16T21:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101239",
    "user": "https://github.com/JohnCremona"
}
```

Changed reviewer from **Aly Deines** to **Aly Deines, John Cremona**



---

archive/issue_comments_101240.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@JohnCremona](#comment:18):\n> Replying to [@JohnCremona](#comment:17):\n> > The patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?\n\n> \n> All tests pass and docbuild is clean.  I would give a  positive review were it not for those warnings.  If someone knows that they are not serious, please tell me.\n\nThe warnings seem not to be caused by this patch at since when I popped the patch and rebuilt they came up again.  So, do they matter?",
    "created_at": "2011-12-16T21:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101240",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@JohnCremona](#comment:18):
> Replying to [@JohnCremona](#comment:17):
> > The patches apply cleanly to 4.8.alpha4: but there are quite a few warning on rebuilding, about variables being referenced before assignment.  Does this matter?

> 
> All tests pass and docbuild is clean.  I would give a  positive review were it not for those warnings.  If someone knows that they are not serious, please tell me.

The warnings seem not to be caused by this patch at since when I popped the patch and rebuilt they came up again.  So, do they matter?



---

archive/issue_comments_101241.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWarnings are caused by lines like\n\n```\ncdef mpz_t tmp\nmpz_init(tmp)\n```\nThis seems to be a Cython problem, see http://trac.cython.org/cython_trac/ticket/714 and http://mail.python.org/pipermail/cython-devel/2011-September/001437.html, so warnings shouldn't matter.",
    "created_at": "2011-12-19T16:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101241",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:20" align="right">comment:20</div>

Warnings are caused by lines like

```
cdef mpz_t tmp
mpz_init(tmp)
```
This seems to be a Cython problem, see http://trac.cython.org/cython_trac/ticket/714 and http://mail.python.org/pipermail/cython-devel/2011-September/001437.html, so warnings shouldn't matter.



---

archive/issue_events_139647.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-19T16:31:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139647"
}
```



---

archive/issue_events_139648.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-19T16:31:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139648"
}
```



---

archive/issue_comments_101242.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSee also [#11761 comment:17](https://github.com/sagemath/sage/issues/11761#comment:17).",
    "created_at": "2011-12-19T16:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101242",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:21" align="right">comment:21</div>

See also [#11761 comment:17](https://github.com/sagemath/sage/issues/11761#comment:17).



---

archive/issue_comments_101243.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@JohnCremona](#comment:18):\n> I would give a positive review were it not for those warnings.\n\nAnd #11761 shows that the warnings are ok.",
    "created_at": "2012-01-12T12:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101243",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@JohnCremona](#comment:18):
> I would give a positive review were it not for those warnings.

And #11761 shows that the warnings are ok.



---

archive/issue_events_139649.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2012-01-12T12:12:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139649"
}
```



---

archive/issue_events_139650.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2012-01-12T12:12:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139650"
}
```



---

archive/issue_comments_101244.json:
```json
{
    "body": "Changed author from **Sebastian Pancratz** to **Sebastian Pancratz, Andr\u00e9 Apitzsch**",
    "created_at": "2012-01-12T13:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101244",
    "user": "https://github.com/a-andre"
}
```

Changed author from **Sebastian Pancratz** to **Sebastian Pancratz, André Apitzsch**



---

archive/issue_events_139651.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-12T13:58:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139651"
}
```



---

archive/issue_events_139652.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-12T13:58:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139652"
}
```



---

archive/issue_events_139653.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139653"
}
```



---

archive/issue_events_139654.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10596#event-139654"
}
```



---

archive/issue_comments_101245.json:
```json
{
    "body": "Merged: **sage-5.0.beta0**",
    "created_at": "2012-01-15T21:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101245",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta0**



---

archive/issue_comments_101246.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nApply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch\n\n(for the patchbot, so it understands the prerequisites for building #12116 against Sage 4.8)",
    "created_at": "2012-03-11T10:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10596#issuecomment-101246",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:26" align="right">comment:26</div>

Apply trac_10596.patch, trac_10596_remove_trailing_whitespaces.patch

(for the patchbot, so it understands the prerequisites for building #12116 against Sage 4.8)
