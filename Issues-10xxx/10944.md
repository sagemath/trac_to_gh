# Issue 10944: Check for similar matrices

archive/issues_010865.json:
```json
{
    "body": "Method checks if two matrices are similar.  This is limited by the need to eventually compute a canonical form, in this case the Jordan form.\n\nIt will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.\n\n**Apply:**\n1. [attachment:trac_10944-similar-matrices-v2.patch]\n2. [attachment:trac_10944-similar-matrices-minor-fixes.patch]\n\n**Assignee:** @jasongrout, @williamstein\n\n**Author:** Rob Beezer\n\n**Reviewer:** Dan Drake\n\n**Merged:** sage-4.7.1.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10944\n\n",
    "closed_at": "2011-06-21T13:13:17Z",
    "created_at": "2011-03-16T04:30:51Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.1",
    "title": "Check for similar matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10944",
    "user": "https://github.com/rbeezer"
}
```
Method checks if two matrices are similar.  This is limited by the need to eventually compute a canonical form, in this case the Jordan form.

It will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.

**Apply:**
1. [attachment:trac_10944-similar-matrices-v2.patch]
2. [attachment:trac_10944-similar-matrices-minor-fixes.patch]

**Assignee:** @jasongrout, @williamstein

**Author:** Rob Beezer

**Reviewer:** Dan Drake

**Merged:** sage-4.7.1.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10944





---

archive/issue_comments_134741.json:
```json
{
    "body": "**Author:** Rob Beezer",
    "created_at": "2011-03-16T04:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134741",
    "user": "https://github.com/rbeezer"
}
```

**Author:** Rob Beezer



---

archive/attachments_014350.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10944-similar-matrices.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10944/trac_10944-similar-matrices.patch",
    "created_at": "2011-03-16T04:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_134742.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2011-03-16T04:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134742",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_134743.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-03-16T04:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134743",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_134744.json:
```json
{
    "body": "**Reviewer:** Dan Drake",
    "created_at": "2011-05-02T07:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134744",
    "user": "https://github.com/dandrake"
}
```

**Reviewer:** Dan Drake



---

archive/issue_comments_134745.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-05-02T07:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134745",
    "user": "https://github.com/dandrake"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_134746.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is very nice work. Applies and passes doctests in 4.6.2 and 4.7.rc0. Positive review.",
    "created_at": "2011-05-02T07:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134746",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:2'></a>
This is very nice work. Applies and passes doctests in 4.6.2 and 4.7.rc0. Positive review.



---

archive/issue_comments_134747.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [ddrake](#comment%3A2):\n\nThanks for your help with all this linear algebra code.",
    "created_at": "2011-05-03T00:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134747",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:3'></a>
Replying to [ddrake](#comment%3A2):

Thanks for your help with all this linear algebra code.



---

archive/issue_events_034011.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T12:38:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10944#event-34011"
}
```



---

archive/issue_comments_134748.json:
```json
{
    "body": "<a id='comment:5'></a>\nNeeds to be rebased to sage-4.7.1.alpha1:\n\n```\npatching file sage/matrix/matrix2.pyx\nHunk #1 FAILED at 6299.\n1 out of 1 hunk FAILED -- saving rejects to file sage/matrix/matrix2.pyx.rej\n```",
    "created_at": "2011-05-31T17:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Needs to be rebased to sage-4.7.1.alpha1:

```
patching file sage/matrix/matrix2.pyx
Hunk #1 FAILED at 6299.
1 out of 1 hunk FAILED -- saving rejects to file sage/matrix/matrix2.pyx.rej
```



---

archive/issue_comments_134749.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2011-05-31T17:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134749",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_134750.json:
```json
{
    "body": "rebased for 4.7.1.alpha1; apply only this",
    "created_at": "2011-06-01T05:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134750",
    "user": "https://github.com/dandrake"
}
```

rebased for 4.7.1.alpha1; apply only this



---

archive/issue_comments_134751.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2011-06-01T05:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134751",
    "user": "https://github.com/dandrake"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_134752.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Method checks if two matrices are similar.  This is limited by the need to eventually compute a canonical form, in this case the Jordan form.\n \n It will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.\n+\n+Apply only attachment:trac_10944-similar-matrices-v2.patch\n``````\n",
    "created_at": "2011-06-01T05:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134752",
    "user": "https://github.com/dandrake"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Method checks if two matrices are similar.  This is limited by the need to eventually compute a canonical form, in this case the Jordan form.
 
 It will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.
+
+Apply only attachment:trac_10944-similar-matrices-v2.patch
``````




---

archive/attachments_014351.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10944-similar-matrices-v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10944/trac_10944-similar-matrices-v2.patch",
    "created_at": "2011-06-01T05:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/dandrake"
}
```



---

archive/issue_comments_134753.json:
```json
{
    "body": "<a id='comment:6'></a>\nHah. The code that caused the conflict was another one of Rob's patches. :)\n\nRebased for 4.7.1.alpha1.",
    "created_at": "2011-06-01T05:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134753",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:6'></a>
Hah. The code that caused the conflict was another one of Rob's patches. :)

Rebased for 4.7.1.alpha1.



---

archive/issue_comments_134754.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [ddrake](#comment%3A6):\n> Hah. The code that caused the conflict was another one of Rob's patches. :)\n> \n> Rebased for 4.7.1.alpha1.\n\n\nHi Dan,\n\nI'm a couple more time zones closer to you at the moment.  ;-)\n\nThanks for the rebase, this could have fallen through the cracks for a while.\n\nAs of today, I have rational canonical form (aka Frobenius form) working, so I should be able to eventually upgrade this to provide a yes/no answer over any field.\n\nRob",
    "created_at": "2011-06-01T06:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134754",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'></a>
Replying to [ddrake](#comment%3A6):
> Hah. The code that caused the conflict was another one of Rob's patches. :)
> 
> Rebased for 4.7.1.alpha1.


Hi Dan,

I'm a couple more time zones closer to you at the moment.  ;-)

Thanks for the rebase, this could have fallen through the cracks for a while.

As of today, I have rational canonical form (aka Frobenius form) working, so I should be able to eventually upgrade this to provide a yes/no answer over any field.

Rob



---

archive/issue_events_034012.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-07T08:36:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10944#event-34012"
}
```



---

archive/issue_comments_134755.json:
```json
{
    "body": "**Merged:** sage-4.7.1.alpha2",
    "created_at": "2011-06-07T08:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134755",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.1.alpha2



---

archive/issue_comments_134756.json:
```json
{
    "body": "<a id='comment:9'></a>\nSomeone on IRC (`Alligadi`) voiced concerns about lines 7417 and 7422 of sage/matrix/matrix2.pyx as added in the patch, namely that there are call parens missing from 7417 and that the second `self` should be `other` in 7422. Typos?",
    "created_at": "2011-06-19T22:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134756",
    "user": "https://github.com/kini"
}
```

<a id='comment:9'></a>
Someone on IRC (`Alligadi`) voiced concerns about lines 7417 and 7422 of sage/matrix/matrix2.pyx as added in the patch, namely that there are call parens missing from 7417 and that the second `self` should be `other` in 7422. Typos?



---

archive/issue_comments_134757.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [kini](#comment%3A9):\n> Someone on IRC (`Alligadi`) voiced concerns about lines 7417 and 7422 of sage/matrix/matrix2.pyx as added in the patch, namely that there are call parens missing from 7417 and that the second `self` should be `other` in 7422. Typos?\n\n\nCorrect.  Both are small mistakes.  No harm done, really, since the only consequence is the failure to avoid unnecessary computation.  In other words, results will be correct as written, but intended efficiencies will not happen.  I'll put up a patch tomorrow or so.\n\nThanks for passing along the IRC intel.\n\nRob",
    "created_at": "2011-06-20T04:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134757",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:10'></a>
Replying to [kini](#comment%3A9):
> Someone on IRC (`Alligadi`) voiced concerns about lines 7417 and 7422 of sage/matrix/matrix2.pyx as added in the patch, namely that there are call parens missing from 7417 and that the second `self` should be `other` in 7422. Typos?


Correct.  Both are small mistakes.  No harm done, really, since the only consequence is the failure to avoid unnecessary computation.  In other words, results will be correct as written, but intended efficiencies will not happen.  I'll put up a patch tomorrow or so.

Thanks for passing along the IRC intel.

Rob



---

archive/issue_comments_134758.json:
```json
{
    "body": "<a id='comment:11'></a>\nShould I reopen the ticket so you can make the changes here?",
    "created_at": "2011-06-20T07:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Should I reopen the ticket so you can make the changes here?



---

archive/issue_comments_134759.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jdemeyer](#comment%3A11):\n> Should I reopen the ticket so you can make the changes here?\n\n\nProbably best to just reopen this, I should have a patch up right away.\n\nRob",
    "created_at": "2011-06-20T16:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134759",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:12'></a>
Replying to [jdemeyer](#comment%3A11):
> Should I reopen the ticket so you can make the changes here?


Probably best to just reopen this, I should have a patch up right away.

Rob



---

archive/attachments_014352.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10944-similar-matrices-minor-fixes.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10944/trac_10944-similar-matrices-minor-fixes.patch",
    "created_at": "2011-06-20T17:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_134760.json:
```json
{
    "body": "",
    "created_at": "2011-06-20T17:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134760",
    "user": "https://github.com/rbeezer"
}
```





---

archive/issue_comments_134761.json:
```json
{
    "body": "<a id='comment:13'></a>\nObserved mistakes fixed in small patch just added.  I built this on 4.7.1.alpha2, but it should apply on any version that the main patch is applied.\n\nNo point in adding anything to the doctests, since these errors only lengthen execution time and no reasonable doctest could tell.\n\nJeroen - this can move to \"needs review\" once you reopen it.  \n\nKini and Alligadi - thanks for the report!\n\nRob",
    "created_at": "2011-06-20T17:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134761",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:13'></a>
Observed mistakes fixed in small patch just added.  I built this on 4.7.1.alpha2, but it should apply on any version that the main patch is applied.

No point in adding anything to the doctests, since these errors only lengthen execution time and no reasonable doctest could tell.

Jeroen - this can move to "needs review" once you reopen it.  

Kini and Alligadi - thanks for the report!

Rob



---

archive/issue_comments_134762.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n It will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.\n \n-Apply only attachment:trac_10944-similar-matrices-v2.patch\n+**Apply:**\n+1. [attachment:trac_10944-similar-matrices-v2.patch]\n+2. [attachment:trac_10944-similar-matrices-minor-fixes.patch]\n``````\n",
    "created_at": "2011-06-20T17:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134762",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 It will always compute a result for matrices over the rationals, owing to `QQbar` and can often arrive at a result of `False` without going as far as a Jordan form.
 
-Apply only attachment:trac_10944-similar-matrices-v2.patch
+**Apply:**
+1. [attachment:trac_10944-similar-matrices-v2.patch]
+2. [attachment:trac_10944-similar-matrices-minor-fixes.patch]
``````




---

archive/issue_comments_134763.json:
```json
{
    "body": "**Changing status** from closed to new.",
    "created_at": "2011-06-20T18:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134763",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from closed to new.



---

archive/issue_comments_134764.json:
```json
{
    "body": "**Changing merged** from \"sage-4.7.1.alpha2\" to \"\".",
    "created_at": "2011-06-20T18:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134764",
    "user": "https://github.com/jdemeyer"
}
```

**Changing merged** from "sage-4.7.1.alpha2" to "".



---

archive/issue_comments_134765.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-06-20T18:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134765",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_134766.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-06-21T01:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134766",
    "user": "https://github.com/dandrake"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_134767.json:
```json
{
    "body": "<a id='comment:16'></a>\nOops, I should have caught those two little errors in my first review. But everything looks good now.",
    "created_at": "2011-06-21T01:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134767",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:16'></a>
Oops, I should have caught those two little errors in my first review. But everything looks good now.



---

archive/issue_comments_134768.json:
```json
{
    "body": "**Merged:** sage-4.7.1.alpha4",
    "created_at": "2011-06-21T13:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134768",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.1.alpha4



---

archive/issue_events_034013.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-21T13:13:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10944#event-34013"
}
```



---

archive/issue_comments_134769.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [ddrake](#comment%3A16):\n> Oops, I should have caught those two little errors in my first review.\n\n\nOops, they never should have been there in the first place.  Mea culpa.\n\nThanks, Dan and Jeroen, for seeing this one through.",
    "created_at": "2011-06-21T23:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10944#issuecomment-134769",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:18'></a>
Replying to [ddrake](#comment%3A16):
> Oops, I should have caught those two little errors in my first review.


Oops, they never should have been there in the first place.  Mea culpa.

Thanks, Dan and Jeroen, for seeing this one through.
