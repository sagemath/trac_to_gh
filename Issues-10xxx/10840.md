# Issue 10840: Integration involving abs gives wrong result

archive/issues_010840.json:
```json
{
    "body": "Assignee: @burcin\n\nRunning\n\n```\nsage: integrate(abs(sin(x)),(x,0,2*pi))\n```\ngives 0, but the correct result is 4.\n\nThis happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.\n\nApply [attachment:trac_10914.patch].\n\nIssue created by migration from https://trac.sagemath.org/ticket/10914\n\n",
    "closed_at": "2012-04-26T20:10:42Z",
    "created_at": "2011-03-11T13:11:40Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Integration involving abs gives wrong result",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10840",
    "user": "https://trac.sagemath.org/admin/accounts/users/poeschko"
}
```
Assignee: @burcin

Running

```
sage: integrate(abs(sin(x)),(x,0,2*pi))
```
gives 0, but the correct result is 4.

This happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.

Apply [attachment:trac_10914.patch].

Issue created by migration from https://trac.sagemath.org/ticket/10914





---

archive/issue_comments_114803.json:
```json
{
    "body": "Certainly the integral better be positive!  \n\nThis is wrong in Maxima (5.23.2), though it does get the one arch problem correct:\n\n```\nMaxima 5.23.2 http://maxima.sourceforge.net\nusing Lisp SBCL 1.0.24\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(sin(x)),x,0,2*%pi);\n(%o1)                                  0\n(%i2) integrate(sin(x),x,0,%pi/2);\n(%o2)                                  1\n(%i3) \n```\n\nThis is now Maxima bug 3211915.",
    "created_at": "2011-03-14T19:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114803",
    "user": "https://github.com/kcrisman"
}
```

Certainly the integral better be positive!  

This is wrong in Maxima (5.23.2), though it does get the one arch problem correct:

```
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp SBCL 1.0.24
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(sin(x)),x,0,2*%pi);
(%o1)                                  0
(%i2) integrate(sin(x),x,0,%pi/2);
(%o2)                                  1
(%i3) 
```

This is now Maxima bug 3211915.



---

archive/issue_comments_114804.json:
```json
{
    "body": "Apparently that was a dup - see [this bug report](https://sourceforge.net/tracker/?func=detail&aid=3165872&group_id=4933&atid=104933) instead.  Fixed, so when we upgrade we'll need a doctest.",
    "created_at": "2011-03-30T15:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114804",
    "user": "https://github.com/kcrisman"
}
```

Apparently that was a dup - see [this bug report](https://sourceforge.net/tracker/?func=detail&aid=3165872&group_id=4933&atid=104933) instead.  Fixed, so when we upgrade we'll need a doctest.



---

archive/issue_comments_114805.json:
```json
{
    "body": "Well, we don't get `4`, but at least the bug is fixed with our current Maxima.",
    "created_at": "2012-04-14T21:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114805",
    "user": "https://github.com/orlitzky"
}
```

Well, we don't get `4`, but at least the bug is fixed with our current Maxima.



---

archive/issue_comments_114806.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-14T21:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114806",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114807.json:
```json
{
    "body": "`shouln't`?\n\nAnyway, this is fine, but the style is a little too informal - those not having read the ticket will be mystified, and shouldn't have to go to the ticket to find out.  So I'm uploading the same patch but with slightly different wording.\n\nNotwithstanding that this file doesn't appear to be in the reference manual in any case.",
    "created_at": "2012-04-15T02:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114807",
    "user": "https://github.com/kcrisman"
}
```

`shouln't`?

Anyway, this is fine, but the style is a little too informal - those not having read the ticket will be mystified, and shouldn't have to go to the ticket to find out.  So I'm uploading the same patch but with slightly different wording.

Notwithstanding that this file doesn't appear to be in the reference manual in any case.



---

archive/issue_comments_114808.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-15T02:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114808",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_114809.json:
```json
{
    "body": "Attachment [trac_10914.patch](tarball://root/attachments/some-uuid/ticket10914/trac_10914.patch) by @kcrisman created at 2012-04-15 02:57:05\n\nApply this patch only",
    "created_at": "2012-04-15T02:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114809",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_10914.patch](tarball://root/attachments/some-uuid/ticket10914/trac_10914.patch) by @kcrisman created at 2012-04-15 02:57:05

Apply this patch only



---

archive/issue_comments_114810.json:
```json
{
    "body": "Apply [attachment:trac_10914.patch].",
    "created_at": "2012-04-15T02:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114810",
    "user": "https://github.com/kcrisman"
}
```

Apply [attachment:trac_10914.patch].



---

archive/issue_comments_114811.json:
```json
{
    "body": "Ah, sorry. I actually parse it now as, \"We won't get (an evaluated answer here, which is better than the previous (wrong) answer of zero),\" but I don't think it matters much since most of them don't make sense out-of-context, \"make sure #xyz is fixed.\"",
    "created_at": "2012-04-15T15:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114811",
    "user": "https://github.com/orlitzky"
}
```

Ah, sorry. I actually parse it now as, "We won't get (an evaluated answer here, which is better than the previous (wrong) answer of zero)," but I don't think it matters much since most of them don't make sense out-of-context, "make sure #xyz is fixed."



---

archive/issue_events_028275.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T06:57:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10840#event-28275"
}
```



---

archive/issue_comments_114812.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-04-26T20:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10840#issuecomment-114812",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-26T20:10:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10840",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10840#event-28276"
}
```
