# Issue 10030: Interrupt testing

archive/issues_010029.json:
```json
{
    "body": "This ticket aims to provide a way to test interrupts and the `sig_on()`/`sig_off()` mechanism.\n\nThis also patches `$SAGE_ROOT/local/bin/sage-doctest` to check that all doctests have a balanced `sig_on()`/`sig_off()` count.\n\nPatch chain: #9678, #10061, #10258, **#10030**, #10018, #9640\n\nAssignee: tba\n\nCC:  @nexttime @wjp\n\nKeywords: interrupt signal doctest\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: Volker Braun\n\nMerged: sage-4.7.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10030\n\n",
    "closed_at": "2011-03-08T21:45:24Z",
    "created_at": "2010-09-29T12:44:16Z",
    "labels": [
        "component: c_lib"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Interrupt testing",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10030",
    "user": "https://github.com/jdemeyer"
}
```
This ticket aims to provide a way to test interrupts and the `sig_on()`/`sig_off()` mechanism.

This also patches `$SAGE_ROOT/local/bin/sage-doctest` to check that all doctests have a balanced `sig_on()`/`sig_off()` count.

Patch chain: #9678, #10061, #10258, **#10030**, #10018, #9640

Assignee: tba

CC:  @nexttime @wjp

Keywords: interrupt signal doctest

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: Volker Braun

Merged: sage-4.7.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10030





---

archive/issue_comments_105259.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,12 @@\n+This ticket aims to provide a way to test interrupts and the \\`_sig_on\\`/\\`_sig_off\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:\n \n-Keywords: interrupt doctest\n+\\`\\`\\`\n+sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'\n+\\`\\`\\`\n+\n+Dependencies: #10018, #10031\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-09-29T12:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105259",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,12 @@
+This ticket aims to provide a way to test interrupts and the \`_sig_on\`/\`_sig_off\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:
 
-Keywords: interrupt doctest
+\`\`\`
+sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'
+\`\`\`
+
+Dependencies: #10018, #10031
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105260.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This ticket aims to provide a way to test interrupts and the \\`_sig_on\\`/\\`_sig_off\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:\n+\n+\\`\\`\\`\n+sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'\n+\\`\\`\\`\n+\n+Dependencies: #10018, #9678\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-09-30T09:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105260",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This ticket aims to provide a way to test interrupts and the \`_sig_on\`/\`_sig_off\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:
+
+\`\`\`
+sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'
+\`\`\`
+
+Dependencies: #10018, #9678
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105261.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This ticket aims to provide a way to test interrupts and the \\`_sig_on\\`/\\`_sig_off\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:\n+\n+\\`\\`\\`\n+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'\n+\\`\\`\\`\n+\n+Dependencies: #9678\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-10-01T12:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105261",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This ticket aims to provide a way to test interrupts and the \`_sig_on\`/\`_sig_off\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest and a new $SAGE_ROOT/local/bin/python-doctest:
+
+\`\`\`
+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest && wget -O- http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/python-doctest.c | gcc -O2 -pipe -x c - -o $SAGE_ROOT/local/bin/python-doctest'
+\`\`\`
+
+Dependencies: #9678
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105262.json:
```json
{
    "body": "Changing keywords from \"interrupt doctest\" to \"interrupt signal doctest\".",
    "created_at": "2010-10-02T18:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105262",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "interrupt doctest" to "interrupt signal doctest".



---

archive/issue_comments_105263.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This ticket aims to provide a way to test interrupts and the \\`_sig_on\\`/\\`_sig_off\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest:\n+\n+\\`\\`\\`\n+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest'\n+\\`\\`\\`\n+\n+Dependencies: #9678\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-10-02T18:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105263",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This ticket aims to provide a way to test interrupts and the \`_sig_on\`/\`_sig_off\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest:
+
+\`\`\`
+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest'
+\`\`\`
+
+Dependencies: #9678
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105264.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest:\n+\n+\\`\\`\\`\n+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest'\n+\\`\\`\\`\n+\n+Dependencies: #10115, #9678\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-10-13T12:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105264",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest:
+
+\`\`\`
+./sage -sh -c 'wget -O $SAGE_ROOT/local/bin/sage-doctest http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10030/sage-doctest'
+\`\`\`
+
+Dependencies: #10115, #9678
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105265.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2010-11-11T23:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105265",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_105266.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This needs a patched $SAGE_ROOT/local/bin/sage-doctest (isolating interrupts in Sage from the doctesting framework).\n+\n+Dependencies: #9678\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-11-11T23:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105266",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This needs a patched $SAGE_ROOT/local/bin/sage-doctest (isolating interrupts in Sage from the doctesting framework).
+
+Dependencies: #9678
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105267.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This needs a patched \\`$SAGE_ROOT/local/bin/sage-doctest\\` (isolating interrupts in Sage from the doctesting framework).\n+\n+Patch chain: #9893, #9678, #10061, **#10030**, #10018, #9640\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-11-13T12:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105267",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This needs a patched \`$SAGE_ROOT/local/bin/sage-doctest\` (isolating interrupts in Sage from the doctesting framework).
+
+Patch chain: #9893, #9678, #10061, **#10030**, #10018, #9640
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105268.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This needs a patched \\`$SAGE_ROOT/local/bin/sage-doctest\\` (isolating interrupts in Sage from the doctesting framework).\n+\n+Patch chain: #9893, #9345, #9678, #10061, #10258, **#10030**, #10018, #9640\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2011-01-13T23:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105268",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This needs a patched \`$SAGE_ROOT/local/bin/sage-doctest\` (isolating interrupts in Sage from the doctesting framework).
+
+Patch chain: #9893, #9345, #9678, #10061, #10258, **#10030**, #10018, #9640
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105269.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This needs a patched \\`$SAGE_ROOT/local/bin/sage-doctest\\` (isolating interrupts in Sage from the doctesting framework).\n+\n+Patch chain: #9678, #10061, #10258, **#10030**, #10018, #9640\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2011-01-14T00:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105269",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This needs a patched \`$SAGE_ROOT/local/bin/sage-doctest\` (isolating interrupts in Sage from the doctesting framework).
+
+Patch chain: #9678, #10061, #10258, **#10030**, #10018, #9640
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105270.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-14T17:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105270",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_025432.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-14T17:41:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10030#event-25432"
}
```



---

archive/issue_comments_105271.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+This ticket aims to provide a way to test interrupts and the \\`sig_on()\\`/\\`sig_off()\\` mechanism.\n \n+This also patches \\`$SAGE_ROOT/local/bin/sage-doctest\\` to check that all doctests have a balanced \\`sig_on()\\`/\\`sig_off()\\` count.\n+\n+Patch chain: #9678, #10061, #10258, **#10030**, #10018, #9640\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2011-01-14T18:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105271",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+This ticket aims to provide a way to test interrupts and the \`sig_on()\`/\`sig_off()\` mechanism.
 
+This also patches \`$SAGE_ROOT/local/bin/sage-doctest\` to check that all doctests have a balanced \`sig_on()\`/\`sig_off()\` count.
+
+Patch chain: #9678, #10061, #10258, **#10030**, #10018, #9640
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_105272.json:
```json
{
    "body": "<a id='comment:12'></a>On OS X, I get doctest \"failures\"::\n\n```\n**********************************************************************\nFile \"/Users/jdemeyer/sage-4.6.2.alpha0/devel/sage/sage/tests/interrupt.pyx\", line 502:\n    sage: print '---'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time\nExpected:\n    ---\n    ...\n    ------------------------------------------------------------------------\n    Unhandled SIGABRT: An abort() occurred in Sage.\n    This probably occurred because a *compiled* component of Sage has a bug\n    in it and is not properly wrapped with sig_on(), sig_off(). You might\n    want to run Sage under gdb with 'sage -gdb' to debug this.\n    Sage will now terminate.\n    ------------------------------------------------------------------------\n    ...\nGot:\n    ---\n    <BLANKLINE>\n    ------------------------------------------------------------------------\n    Unhandled SIGABRT: An abort() occurred in Sage.\n    This probably occurred because a *compiled* component of Sage has a bug\n    in it and is not properly wrapped with sig_on(), sig_off(). You might\n    want to run Sage under gdb with 'sage -gdb' to debug this.\n    Sage will now terminate.\n    ------------------------------------------------------------------------\n    /Users/jdemeyer/sage-4.6.2.alpha0/local/bin/sage-sage: line 783: 61015 Abort trap              sage-eval \"$@\"\n    <BLANKLINE>\n**********************************************************************\n```\n\nIt looks to me that the \"Got\" text matches the \"Expected\" text, so why is this a failure?",
    "created_at": "2011-01-15T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105272",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>On OS X, I get doctest "failures"::

```
**********************************************************************
File "/Users/jdemeyer/sage-4.6.2.alpha0/devel/sage/sage/tests/interrupt.pyx", line 502:
    sage: print '---'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time
Expected:
    ---
    ...
    ------------------------------------------------------------------------
    Unhandled SIGABRT: An abort() occurred in Sage.
    This probably occurred because a *compiled* component of Sage has a bug
    in it and is not properly wrapped with sig_on(), sig_off(). You might
    want to run Sage under gdb with 'sage -gdb' to debug this.
    Sage will now terminate.
    ------------------------------------------------------------------------
    ...
Got:
    ---
    <BLANKLINE>
    ------------------------------------------------------------------------
    Unhandled SIGABRT: An abort() occurred in Sage.
    This probably occurred because a *compiled* component of Sage has a bug
    in it and is not properly wrapped with sig_on(), sig_off(). You might
    want to run Sage under gdb with 'sage -gdb' to debug this.
    Sage will now terminate.
    ------------------------------------------------------------------------
    /Users/jdemeyer/sage-4.6.2.alpha0/local/bin/sage-sage: line 783: 61015 Abort trap              sage-eval "$@"
    <BLANKLINE>
**********************************************************************
```

It looks to me that the "Got" text matches the "Expected" text, so why is this a failure?



---

archive/issue_comments_105273.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-01-21T23:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105273",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105274.json:
```json
{
    "body": "<a id='comment:14'></a>I think the issue is that \"``...``\" expects to match something but does not match the empty line ``<BLANKLINE>``. Note the difference between \n* Linux: will print stack backtrace before \"Unhandled SIGABRT\", and\n* OSX: does not print stack backtrace.\n\nFor example, changing\n\n```\nsage: print '---'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time\n```\nto \n\n```\nsage: print '---'; print 'backtrace:'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time\n```\nfixes the doctest on OSX, as now at least ``'backtrace:'`` gets matched by the \"``...``\".",
    "created_at": "2011-01-21T23:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105274",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>I think the issue is that "``...``" expects to match something but does not match the empty line ``<BLANKLINE>``. Note the difference between 
* Linux: will print stack backtrace before "Unhandled SIGABRT", and
* OSX: does not print stack backtrace.

For example, changing

```
sage: print '---'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time
```
to 

```
sage: print '---'; print 'backtrace:'; print Popen(['sage', '-c', cmd], stdout=PIPE, stderr=PIPE).communicate()[1]  # long time
```
fixes the doctest on OSX, as now at least ``'backtrace:'`` gets matched by the "``...``".



---

archive/issue_comments_105275.json:
```json
{
    "body": "Attachment [10030_scripts_doctest.patch](tarball://root/attachments/some-uuid/ticket10030/10030_scripts_doctest.patch) by @jdemeyer created at 2011-01-22 14:58:44\n\nSCRIPTS patch, patch for sage-doctest",
    "created_at": "2011-01-22T14:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105275",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [10030_scripts_doctest.patch](tarball://root/attachments/some-uuid/ticket10030/10030_scripts_doctest.patch) by @jdemeyer created at 2011-01-22 14:58:44

SCRIPTS patch, patch for sage-doctest



---

archive/issue_comments_105276.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-22T15:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105276",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105277.json:
```json
{
    "body": "<a id='comment:15'></a>Okay, I didn't know that `...` needs to match at least one non-blank character (apparently).  I fixed it in the most simple way by replacing `---\\n...` by `-...`",
    "created_at": "2011-01-22T15:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105277",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Okay, I didn't know that `...` needs to match at least one non-blank character (apparently).  I fixed it in the most simple way by replacing `---\n...` by `-...`



---

archive/issue_comments_105278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-31T01:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105278",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105279.json:
```json
{
    "body": "<a id='comment:16'></a>Looks good! I tested it on bsd.math and all doctests pass.",
    "created_at": "2011-01-31T01:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105279",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>Looks good! I tested it on bsd.math and all doctests pass.



---

archive/issue_comments_105280.json:
```json
{
    "body": "SAGELIB patch",
    "created_at": "2011-02-07T08:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105280",
    "user": "https://github.com/jdemeyer"
}
```

SAGELIB patch



---

archive/issue_events_025433.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:22:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10030#event-25433"
}
```



---

archive/issue_events_025434.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:22:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10030#event-25434"
}
```



---

archive/issue_comments_105281.json:
```json
{
    "body": "<a id='comment:17'></a>Attachment [10030_interrupt_test.patch](tarball://root/attachments/some-uuid/ticket10030/10030_interrupt_test.patch) by @jdemeyer created at 2011-02-07 08:22:59",
    "created_at": "2011-02-07T08:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105281",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Attachment [10030_interrupt_test.patch](tarball://root/attachments/some-uuid/ticket10030/10030_interrupt_test.patch) by @jdemeyer created at 2011-02-07 08:22:59



---

archive/issue_comments_105282.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-02-08T09:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105282",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105283.json:
```json
{
    "body": "Attachment [10030_kill_after_sig_on.patch](tarball://root/attachments/some-uuid/ticket10030/10030_kill_after_sig_on.patch) by @jdemeyer created at 2011-02-08 11:14:27\n\nAdditional SAGELIB patch",
    "created_at": "2011-02-08T11:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105283",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [10030_kill_after_sig_on.patch](tarball://root/attachments/some-uuid/ticket10030/10030_kill_after_sig_on.patch) by @jdemeyer created at 2011-02-08 11:14:27

Additional SAGELIB patch



---

archive/issue_comments_105284.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-08T11:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105284",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105285.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-02-08T20:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105285",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105286.json:
```json
{
    "body": "<a id='comment:20'></a>Looks good.",
    "created_at": "2011-02-08T20:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105286",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>Looks good.



---

archive/issue_comments_105287.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-08T21:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10030#issuecomment-105287",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_025435.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:45:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10030",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10030#event-25435"
}
```
