# Issue 10538: Implementation of the class ClusterQuiver

archive/issues_010485.json:
```json
{
    "assignees": [
        "https://github.com/etn40ff"
    ],
    "body": "This class implements quivers for skew-symmetrizable matrices.\n\nThe patch contains multiple examples.\n\n```\nsage: Q = ClusterQuiver(['A',3]); Q\nQuiver on 3 vertices of type ['A', 3]\n```\n\nApply the two patches below,  in order.  The version posted here is the current version; the one on the combinat queue is slightly out of date.\n\nDepends on #10527\n\nCC:  @sagetrac-drupel\n\nKeywords: **cluster algebra, quiver**\n\nReviewer: **Dylan Rupel**\n\nAuthor: **Christian Stump, Gregg Musiker**\n\nMerged: **sage-5.6.beta3**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10538_\n\n",
    "closed_at": "2013-01-07T20:55:45Z",
    "created_at": "2010-12-31T11:49:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implementation of the class ClusterQuiver",
    "type": "issue",
    "updated_at": "2023-01-14T14:37:09Z",
    "url": "https://github.com/sagemath/sage/issues/10538",
    "user": "https://github.com/stumpc5"
}
```
This class implements quivers for skew-symmetrizable matrices.

The patch contains multiple examples.

```
sage: Q = ClusterQuiver(['A',3]); Q
Quiver on 3 vertices of type ['A', 3]
```

Apply the two patches below,  in order.  The version posted here is the current version; the one on the combinat queue is slightly out of date.

Depends on #10527

CC:  @sagetrac-drupel

Keywords: **cluster algebra, quiver**

Reviewer: **Dylan Rupel**

Author: **Christian Stump, Gregg Musiker**

Merged: **sage-5.6.beta3**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/10538_





---

archive/issue_events_139192.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2010-12-31T11:49:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139192"
}
```



---

archive/issue_events_139193.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2010-12-31T11:49:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139193"
}
```



---

archive/issue_events_139194.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2010-12-31T11:49:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139194"
}
```



---

archive/issue_events_139195.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2010-12-31T11:49:35Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "subject": "https://github.com/stumpc5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139195"
}
```



---

archive/issue_events_139196.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2011-06-08T21:40:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139196"
}
```



---

archive/issue_comments_100269.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,11 @@\n These classes implement cluster seeds and quivers for skew-symmetrizable matrices. Both are in one patch as multiple methods in both classes use the other class.\n+\n+The patch contains multiple examples.\n+\n+```\n+sage: S = ClusterSeed(['A',3]); S\n+A seed for a cluster algebra of rank 3 of type ['A', 3]\n+\n+sage: Q = Quiver(['A',3]); Q\n+Quiver on 3 vertices of type ['A', 3]\n+```\n``````\n",
    "created_at": "2011-06-08T21:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100269",
    "user": "https://github.com/stumpc5"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,11 @@
 These classes implement cluster seeds and quivers for skew-symmetrizable matrices. Both are in one patch as multiple methods in both classes use the other class.
+
+The patch contains multiple examples.
+
+```
+sage: S = ClusterSeed(['A',3]); S
+A seed for a cluster algebra of rank 3 of type ['A', 3]
+
+sage: Q = Quiver(['A',3]); Q
+Quiver on 3 vertices of type ['A', 3]
+```
``````




---

archive/issue_comments_100270.json:
```json
{
    "body": "Dependencies: **10527**",
    "created_at": "2011-06-08T21:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100270",
    "user": "https://github.com/stumpc5"
}
```

Dependencies: **10527**



---

archive/issue_comments_100271.json:
```json
{
    "body": "Changed dependencies from **10527** to **#10527**",
    "created_at": "2011-06-10T09:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100271",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **10527** to **#10527**



---

archive/issue_events_139197.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2011-06-11T11:23:42Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "subject": "https://github.com/stumpc5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139197"
}
```



---

archive/issue_events_139198.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2011-06-11T11:41:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139198"
}
```



---

archive/issue_comments_100272.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe failed doctest are related to the mulitple process doctesting. I get the same on my computer if I use multiple processes, but all tests pass with only a single process.\n\nI guess that has to do with reading the exceptional types from an external file, which cannot be accessed simultaneously from different processes. I add a sentence to the documentation...",
    "created_at": "2011-06-11T12:29:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100272",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:6" align="right">comment:6</div>

The failed doctest are related to the mulitple process doctesting. I get the same on my computer if I use multiple processes, but all tests pass with only a single process.

I guess that has to do with reading the exceptional types from an external file, which cannot be accessed simultaneously from different processes. I add a sentence to the documentation...



---

archive/issue_comments_100273.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIs this dependent on anything other than #10527?  After applying that and this patch I get the following:\n\n```\nsage: S = ClusterSeed(['A',3])\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (398, 0))\n\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/Users/Starx/sage/devel/sage-main/<ipython console> in <module>()\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/cluster_seed.pyc in __init__(self, data, frozen)\n     93         elif type( data ) in [list,tuple] and ( type( data[0] ) is str or all(type( comp ) in [list,tuple] and type( comp[0] ) is str for comp in data) ):\n     94             mutation_type = QuiverMutationType( data )\n---> 95             quiver = mutation_type.standard_quiver()\n     96             self.__init__( quiver )\n     97 \n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/misc/cachefunc.pyc in __call__(self, *args, **kwds)\n    553             return self.cache[k]\n    554         except KeyError:\n--> 555             w = self._cachedmethod._instance_call(self._instance, *args, **kwds)\n    556             self.cache[k] = w\n    557             return w\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/misc/cachefunc.pyc in _instance_call(self, inst, *args, **kwds)\n    776 \n    777         \"\"\"\n--> 778         return self._cachedfunc.f(inst, *args, **kwds)\n    779 \n    780     def _get_instance_cache(self, inst):\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.pyc in standard_quiver(self)\n   1211         \"\"\"\n   1212         from quiver import Quiver\n-> 1213         Q = Quiver( self._digraph )\n   1214         Q._mutation_type = self\n   1215         return Q\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/quiver.pyc in __init__(self, data, frozen)\n    161 \n    162             M = _edge_list_to_matrix( dg.edge_iterator(), n, m )\n--> 163             if not _principal_part(M).is_skew_symmetrizable( positive=True ):\n    164                 raise ValueError, \"The input digraph must be skew-symmetrizable\"\n    165             self._digraph = dg\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2884)()\n\n/Users/Starx/sage/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:3236)()\n\nAttributeError: 'sage.matrix.matrix_integer_sparse.Matrix_integer_sparse' object has no attribute 'is_skew_symmetrizable'\n```\n\nI think the patch was meant for 4.7.2, maybe it needs to be updated to work with the current version of sage?",
    "created_at": "2012-03-06T02:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100273",
    "user": "https://github.com/sagetrac-JStarx"
}
```

<div id="comment:7" align="right">comment:7</div>

Is this dependent on anything other than #10527?  After applying that and this patch I get the following:

```
sage: S = ClusterSeed(['A',3])
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (398, 0))

---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/Users/Starx/sage/devel/sage-main/<ipython console> in <module>()

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/cluster_seed.pyc in __init__(self, data, frozen)
     93         elif type( data ) in [list,tuple] and ( type( data[0] ) is str or all(type( comp ) in [list,tuple] and type( comp[0] ) is str for comp in data) ):
     94             mutation_type = QuiverMutationType( data )
---> 95             quiver = mutation_type.standard_quiver()
     96             self.__init__( quiver )
     97 

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/misc/cachefunc.pyc in __call__(self, *args, **kwds)
    553             return self.cache[k]
    554         except KeyError:
--> 555             w = self._cachedmethod._instance_call(self._instance, *args, **kwds)
    556             self.cache[k] = w
    557             return w

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/misc/cachefunc.pyc in _instance_call(self, inst, *args, **kwds)
    776 
    777         """
--> 778         return self._cachedfunc.f(inst, *args, **kwds)
    779 
    780     def _get_instance_cache(self, inst):

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.pyc in standard_quiver(self)
   1211         """
   1212         from quiver import Quiver
-> 1213         Q = Quiver( self._digraph )
   1214         Q._mutation_type = self
   1215         return Q

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/combinat/cluster_algebra_quiver/quiver.pyc in __init__(self, data, frozen)
    161 
    162             M = _edge_list_to_matrix( dg.edge_iterator(), n, m )
--> 163             if not _principal_part(M).is_skew_symmetrizable( positive=True ):
    164                 raise ValueError, "The input digraph must be skew-symmetrizable"
    165             self._digraph = dg

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2884)()

/Users/Starx/sage/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:3236)()

AttributeError: 'sage.matrix.matrix_integer_sparse.Matrix_integer_sparse' object has no attribute 'is_skew_symmetrizable'
```

I think the patch was meant for 4.7.2, maybe it needs to be updated to work with the current version of sage?



---

archive/issue_events_139199.json:
```json
{
    "actor": "https://github.com/sagetrac-JStarx",
    "created_at": "2012-03-06T02:06:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139199"
}
```



---

archive/issue_events_139200.json:
```json
{
    "actor": "https://github.com/sagetrac-JStarx",
    "created_at": "2012-03-06T02:06:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139200"
}
```



---

archive/issue_comments_100274.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@sagetrac-JStarx](#comment:7):\n> I think the patch was meant for 4.7.2, maybe it needs to be updated to work with the current version of sage?\n\nmaybe -- I will upload a new patch as soon as someone is willing to review it.\n\nWe have a notebook server running for all people that want to play with the combinatorial quivers and cluster algebras (which are quite a few!) -- you can log in and play with it at sage.lacim.uqam.ca.",
    "created_at": "2012-03-06T10:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100274",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@sagetrac-JStarx](#comment:7):
> I think the patch was meant for 4.7.2, maybe it needs to be updated to work with the current version of sage?

maybe -- I will upload a new patch as soon as someone is willing to review it.

We have a notebook server running for all people that want to play with the combinatorial quivers and cluster algebras (which are quite a few!) -- you can log in and play with it at sage.lacim.uqam.ca.



---

archive/issue_comments_100275.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAre the data files for the different mutation types really supposed to be part of the patch?  It seems to me that it's a fairly large quantity of data, so maybe it would be better to set things up so that an interested user can reconstruct it (which wouldn't be too hard, right?).  Or maybe I have the wrong idea about how receptive Sage is to including data like this.  Are there guidelines for this anywhere?  If not, maybe you could ask for feedback on sage-devel (or if you'd rather, I could)?",
    "created_at": "2012-05-09T01:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100275",
    "user": "https://github.com/hughrthomas"
}
```

<div id="comment:9" align="right">comment:9</div>

Are the data files for the different mutation types really supposed to be part of the patch?  It seems to me that it's a fairly large quantity of data, so maybe it would be better to set things up so that an interested user can reconstruct it (which wouldn't be too hard, right?).  Or maybe I have the wrong idea about how receptive Sage is to including data like this.  Are there guidelines for this anywhere?  If not, maybe you could ask for feedback on sage-devel (or if you'd rather, I could)?



---

archive/issue_comments_100276.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@hughrthomas](#comment:9):\n> Are the data files for the different mutation types really supposed to be part of the patch?  It seems to me that it's a fairly large quantity of data, so maybe it would be better to set things up so that an interested user can reconstruct it (which wouldn't be too hard, right?).  Or maybe I have the wrong idea about how receptive Sage is to including data like this.  Are there guidelines for this anywhere?  If not, maybe you could ask for feedback on sage-devel (or if you'd rather, I could)?  \n\nHi Hugh,\n\nI rearranged the patches, so that the functions\n\n- `_construct_mutation_classes_by_rank`\n- `_construct_exceptional_mutation_classes`\n- `_save_exceptional_data`\n\nare now in #10538. I also added a function `save_exceptional_data` that saves the data to `SAGE_ROOT/data/cluster_algebra/quiver`. This function is supposed to be imported by the user if needed. The data files are now **not** part of the patch anymore, but can only be created by the user using this function.\n\nBest, Christian",
    "created_at": "2012-05-09T15:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100276",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@hughrthomas](#comment:9):
> Are the data files for the different mutation types really supposed to be part of the patch?  It seems to me that it's a fairly large quantity of data, so maybe it would be better to set things up so that an interested user can reconstruct it (which wouldn't be too hard, right?).  Or maybe I have the wrong idea about how receptive Sage is to including data like this.  Are there guidelines for this anywhere?  If not, maybe you could ask for feedback on sage-devel (or if you'd rather, I could)?  

Hi Hugh,

I rearranged the patches, so that the functions

- `_construct_mutation_classes_by_rank`
- `_construct_exceptional_mutation_classes`
- `_save_exceptional_data`

are now in #10538. I also added a function `save_exceptional_data` that saves the data to `SAGE_ROOT/data/cluster_algebra/quiver`. This function is supposed to be imported by the user if needed. The data files are now **not** part of the patch anymore, but can only be created by the user using this function.

Best, Christian



---

archive/issue_comments_100277.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI have added a review patch, but I haven't put anything in it yet.  \n\ncheers,\n\nHugh",
    "created_at": "2012-05-23T05:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100277",
    "user": "https://github.com/hughrthomas"
}
```

<div id="comment:11" align="right">comment:11</div>

I have added a review patch, but I haven't put anything in it yet.  

cheers,

Hugh



---

archive/issue_comments_100278.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think that what I have now posted in the review patch for #10538 (on the combinat server) makes the patch compatible with the changes I have introduced in reviewing #10527.  (It also pointed out some mistakes in my \"corrections\" to #10527...)  In particular, all doctests are passing for me.  If you find anything that is not working, please let me know; I will try to get it so everything is running properly for Sage Days 40.",
    "created_at": "2012-06-29T18:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100278",
    "user": "https://github.com/hughrthomas"
}
```

<div id="comment:12" align="right">comment:12</div>

I think that what I have now posted in the review patch for #10538 (on the combinat server) makes the patch compatible with the changes I have introduced in reviewing #10527.  (It also pointed out some mistakes in my "corrections" to #10527...)  In particular, all doctests are passing for me.  If you find anything that is not working, please let me know; I will try to get it so everything is running properly for Sage Days 40.



---

archive/issue_events_139201.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2012-08-15T04:14:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "title_is": "Implementation of the class Quiver",
    "title_was": "Implementation of the classes ClusterSeed and Quiver",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139201"
}
```



---

archive/issue_comments_100279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,8 @@\n-These classes implement cluster seeds and quivers for skew-symmetrizable matrices. Both are in one patch as multiple methods in both classes use the other class.\n+This class implements quivers for skew-symmetrizable matrices.\n \n The patch contains multiple examples.\n \n ```\n-sage: S = ClusterSeed(['A',3]); S\n-A seed for a cluster algebra of rank 3 of type ['A', 3]\n-\n sage: Q = Quiver(['A',3]); Q\n Quiver on 3 vertices of type ['A', 3]\n ```\n``````\n",
    "created_at": "2012-08-15T04:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100279",
    "user": "https://github.com/stumpc5"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,8 @@
-These classes implement cluster seeds and quivers for skew-symmetrizable matrices. Both are in one patch as multiple methods in both classes use the other class.
+This class implements quivers for skew-symmetrizable matrices.
 
 The patch contains multiple examples.
 
 ```
-sage: S = ClusterSeed(['A',3]); S
-A seed for a cluster algebra of rank 3 of type ['A', 3]
-
 sage: Q = Quiver(['A',3]); Q
 Quiver on 3 vertices of type ['A', 3]
 ```
``````




---

archive/issue_events_139202.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2012-08-15T08:44:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139202"
}
```



---

archive/issue_events_139203.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2012-08-15T08:44:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139203"
}
```



---

archive/issue_comments_100280.json:
```json
{
    "body": "Reviewer: **Gregg Musiker**",
    "created_at": "2012-08-15T17:48:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100280",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Reviewer: **Gregg Musiker**



---

archive/issue_comments_100281.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWith an eye towards startup time, can all these new modules be imported on demand?",
    "created_at": "2012-08-31T10:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100281",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:16" align="right">comment:16</div>

With an eye towards startup time, can all these new modules be imported on demand?



---

archive/issue_comments_100282.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@robertwb](#comment:16):\n> With an eye towards startup time, can all these new modules be imported on demand?\n\nI am not very familiar with possible implications. Do you suggest that we should lazily import them?",
    "created_at": "2012-08-31T10:15:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100282",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@robertwb](#comment:16):
> With an eye towards startup time, can all these new modules be imported on demand?

I am not very familiar with possible implications. Do you suggest that we should lazily import them?



---

archive/issue_comments_100283.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis patch fixes a number of issues and also gives the user more flexibility.  Please see details below (especially 8c)\n\n\n1) For the .plot() and .show() commands, the default by source code and experimentation is circular = False.\n\nI corrected the documentation to reflect this.\n\n2) standard_quiver was defined twice in a row, so I deleted one of the two copies.\n\n3) The auxiliary commands\u00a0\n\n_construct_mutation_classes_by_rank,\n_construct_exceptional_mutation_classes,\n_save_exceptional_data, and\nsave_exceptional_data\n\ndo not work yet because they require the .mutation_class() command for quivers which were moved into a later patch.\n\nI therefore deleted them from this patch.\u00a0 We should make sure to remember to include these back into the \"mutation_class\" patch\nthat comes after quivers, cluster_seeds, ... in our sequence.\"\n\n4) The class 'Quiver' has been changed to 'ClusterQuiver' (Associated examples and function calls also changed so that all tests pass)  Future patches would have to be updated accordingly.\n\n5) I edited the principal_extension command so that it adds n frozen variables (corresponding to an identity matrix in the bottom of the B-matrix) *even* if the quiver already contained frozen vertices. \u00a0This is important for examples like a cluster algebra from a surface *with boundary*.\n\n6) Renamed \"principal_restriction\" to \"exchangeable_part\".\nI think this name is a little more descriptive and also .tab will allow better shortcuts for both commands \"principal_extension\" and \"exchangeable_part\" this way.\n\n7) Rewrote `__init__` command for ClusterQuiver so that it raises an error for unexpected input (e..g ClusterQuiver('whatever') or ClusterQuiver('12345') now raises an error instead of constructing an object as it did before).\n\n8a) In QuiverMutationType.py:\n\nSeparated out the cases \n\n['F', 4, [1,2] ] and ['F', 4, [2,1] ] \n['G', 4, [1,3] ] as well as  ['G', 4, [3,1] ]\n\nin the class QuiverMutationType_Irreducible.\n\nI also added the coercions ['F',4,[2,1]] -> ['F',4,[1,2]] and \n['G',2,[3,1]] -> ['G',2,[1,3]] up front in the Mutation Type Casting list to make this clearer.\n\nSimilarly, the values ['GR', [2,n]] and ['TR',1], ['TR',2] are now allowed as inputs to QuiverMuationtType_Irreducible\n\n8b) During this process, I realized that even with my slight edit to the \n_mutation_type_error command  in trac_10527-quiver_mutation_type-gm-additional.patch, it was still incorrect as I forgot to consider the syntax for elliptic G.\n\nWhile we could make this one line edit to my old patch, it might be just as easy to green-light 10527 as is and then my recent\ntrac_10538-quiver-gm.patch fixes this.\n\n8c) SIGNIFICANT CHANGE: \n\nI have changed the behavior of ClusterQuiver(['C',2]),\nClusterQuiver(['GR',[3,7]]), ClusterQuiver(['F',4,[2,1]]), etc.\n\nThese are highlighted in the new doctests I added.  The point is that this gives the savvy user an easier time to build common quivers, even though they are mutation-equivalent to the standard quiver of a quiver mutation type we already build.\n\nTry it out, I think you'll like how it now works.\n\nNote for Christian: I tried first using the method we recently discussed over IM, but in the end this seemed cleaner, and I didn't have to change the standard_quiver command in the end.\n\n\n9) Very subtle bug in mutate command fixed:\n\nIf one writes Q.mutate(0,0), Q.mutate(0,1), or Q.mutate(0,2), etc instead of\nQ.mutate([0,0]), Q.mutate([0,1]), or Q.mutate([0,2]), there could be weird behavior as Sage interprets the second argument as the parameter 'inplace'.  Warnings are now printed if the user possibly makes this mistake.",
    "created_at": "2012-09-02T02:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100283",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:18" align="right">comment:18</div>

This patch fixes a number of issues and also gives the user more flexibility.  Please see details below (especially 8c)


1) For the .plot() and .show() commands, the default by source code and experimentation is circular = False.

I corrected the documentation to reflect this.

2) standard_quiver was defined twice in a row, so I deleted one of the two copies.

3) The auxiliary commands 

_construct_mutation_classes_by_rank,
_construct_exceptional_mutation_classes,
_save_exceptional_data, and
save_exceptional_data

do not work yet because they require the .mutation_class() command for quivers which were moved into a later patch.

I therefore deleted them from this patch.  We should make sure to remember to include these back into the "mutation_class" patch
that comes after quivers, cluster_seeds, ... in our sequence."

4) The class 'Quiver' has been changed to 'ClusterQuiver' (Associated examples and function calls also changed so that all tests pass)  Future patches would have to be updated accordingly.

5) I edited the principal_extension command so that it adds n frozen variables (corresponding to an identity matrix in the bottom of the B-matrix) *even* if the quiver already contained frozen vertices.  This is important for examples like a cluster algebra from a surface *with boundary*.

6) Renamed "principal_restriction" to "exchangeable_part".
I think this name is a little more descriptive and also .tab will allow better shortcuts for both commands "principal_extension" and "exchangeable_part" this way.

7) Rewrote `__init__` command for ClusterQuiver so that it raises an error for unexpected input (e..g ClusterQuiver('whatever') or ClusterQuiver('12345') now raises an error instead of constructing an object as it did before).

8a) In QuiverMutationType.py:

Separated out the cases 

['F', 4, [1,2] ] and ['F', 4, [2,1] ] 
['G', 4, [1,3] ] as well as  ['G', 4, [3,1] ]

in the class QuiverMutationType_Irreducible.

I also added the coercions ['F',4,[2,1]] -> ['F',4,[1,2]] and 
['G',2,[3,1]] -> ['G',2,[1,3]] up front in the Mutation Type Casting list to make this clearer.

Similarly, the values ['GR', [2,n]] and ['TR',1], ['TR',2] are now allowed as inputs to QuiverMuationtType_Irreducible

8b) During this process, I realized that even with my slight edit to the 
_mutation_type_error command  in trac_10527-quiver_mutation_type-gm-additional.patch, it was still incorrect as I forgot to consider the syntax for elliptic G.

While we could make this one line edit to my old patch, it might be just as easy to green-light 10527 as is and then my recent
trac_10538-quiver-gm.patch fixes this.

8c) SIGNIFICANT CHANGE: 

I have changed the behavior of ClusterQuiver(['C',2]),
ClusterQuiver(['GR',[3,7]]), ClusterQuiver(['F',4,[2,1]]), etc.

These are highlighted in the new doctests I added.  The point is that this gives the savvy user an easier time to build common quivers, even though they are mutation-equivalent to the standard quiver of a quiver mutation type we already build.

Try it out, I think you'll like how it now works.

Note for Christian: I tried first using the method we recently discussed over IM, but in the end this seemed cleaner, and I didn't have to change the standard_quiver command in the end.


9) Very subtle bug in mutate command fixed:

If one writes Q.mutate(0,0), Q.mutate(0,1), or Q.mutate(0,2), etc instead of
Q.mutate([0,0]), Q.mutate([0,1]), or Q.mutate([0,2]), there could be weird behavior as Sage interprets the second argument as the parameter 'inplace'.  Warnings are now printed if the user possibly makes this mistake.



---

archive/issue_events_139204.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2012-09-02T02:55:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "title_is": "Implementation of the class ClusterQuiver",
    "title_was": "Implementation of the class Quiver",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139204"
}
```



---

archive/issue_comments_100284.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,8 @@\n The patch contains multiple examples.\n \n ```\n-sage: Q = Quiver(['A',3]); Q\n+sage: Q = ClusterQuiver(['A',3]); Q\n Quiver on 3 vertices of type ['A', 3]\n ```\n+\n+Apply the two patches below,  in order.  The version posted here is the current version; the one on the combinat queue is slightly out of date.\n``````\n",
    "created_at": "2012-09-02T02:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100284",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,8 @@
 The patch contains multiple examples.
 
 ```
-sage: Q = Quiver(['A',3]); Q
+sage: Q = ClusterQuiver(['A',3]); Q
 Quiver on 3 vertices of type ['A', 3]
 ```
+
+Apply the two patches below,  in order.  The version posted here is the current version; the one on the combinat queue is slightly out of date.
``````




---

archive/issue_comments_100285.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@stumpc5](#comment:17):\n> Replying to [@robertwb](#comment:16):\n> > With an eye towards startup time, can all these new modules be imported on demand?\n\n> \n> I am not very familiar with possible implications. Do you suggest that we should lazily import them?\n\nYes, exactly (whether using the lazy_import module or another mechanism).",
    "created_at": "2012-09-02T03:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100285",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@stumpc5](#comment:17):
> Replying to [@robertwb](#comment:16):
> > With an eye towards startup time, can all these new modules be imported on demand?

> 
> I am not very familiar with possible implications. Do you suggest that we should lazily import them?

Yes, exactly (whether using the lazy_import module or another mechanism).



---

archive/issue_comments_100286.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@robertwb](#comment:20):\n> Replying to [@stumpc5](#comment:17):\n> > Replying to [@robertwb](#comment:16):\n> > > With an eye towards startup time, can all these new modules be imported on demand?\n\n> > \n> > I am not very familiar with possible implications. Do you suggest that we should lazily import them?\n\n> \n> Yes, exactly (whether using the lazy_import module or another mechanism).\n\nWhich you seem to have done; thanks.",
    "created_at": "2012-09-02T03:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100286",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@robertwb](#comment:20):
> Replying to [@stumpc5](#comment:17):
> > Replying to [@robertwb](#comment:16):
> > > With an eye towards startup time, can all these new modules be imported on demand?

> > 
> > I am not very familiar with possible implications. Do you suggest that we should lazily import them?

> 
> Yes, exactly (whether using the lazy_import module or another mechanism).

Which you seem to have done; thanks.



---

archive/issue_comments_100287.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@sagetrac-gmoose05](#comment:18):\n> This patch fixes a number of issues and also gives the user more flexibility.\n\nThanks for working on that! I will look at it in a bit, a first quick remark is that you introduced trailing whitespaces: the patchbot says:\n\n+    trac_10538-quiver-gm.patch:190 +        # otherwise, an error is raised $\n\n+    trac_10538-quiver-gm.patch:676 +            # type ['TR',1] needs to be treated on itself (as there is no edge)            $",
    "created_at": "2012-09-02T09:48:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100287",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@sagetrac-gmoose05](#comment:18):
> This patch fixes a number of issues and also gives the user more flexibility.

Thanks for working on that! I will look at it in a bit, a first quick remark is that you introduced trailing whitespaces: the patchbot says:

+    trac_10538-quiver-gm.patch:190 +        # otherwise, an error is raised $

+    trac_10538-quiver-gm.patch:676 +            # type ['TR',1] needs to be treated on itself (as there is no edge)            $



---

archive/issue_comments_100288.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nComments on your patch:\n\n- In the documentation, you use\n\n```\nsage: MT = Q._mutation_type\n```\n  Please use\n\n```\nsage: MT = Q.mutation_type()\n```\n  instead since _ methods and attributes should not be used there, if possible.\n\n- \"Returns the restriction to the principal part (i.e. exchangeable part) of self. I.e., the subquiver obtained by deleting the frozen vertices of self.\" contains two times i.e. . Could you change that?\n\n- `if type(inplace) is Integer:` Instead of printing a warning, I would suggest to only allow boolean arguments here, and raise a ValueError otherwise.\n\n- `elif rank == 4 and (twist == [1,2] or twist == [2,1])` Am I seeing it right that you now introduced two QuiverMutationTypes for the two possible twists? I would certainly not like that since both are mutation equivalent. [ I just think about the same kind of behaviour in type D and affine A with an oriented circle - it doesn't seem that you actually treated this case, did you? ] I still prefer the standard quiver method to have an optional argument, but we can maybe discuss that again later today or tomorrow...\n\nBeside that, all changes seem good to me.\n\nBest, Christian",
    "created_at": "2012-09-02T10:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100288",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:23" align="right">comment:23</div>

Comments on your patch:

- In the documentation, you use

```
sage: MT = Q._mutation_type
```
  Please use

```
sage: MT = Q.mutation_type()
```
  instead since _ methods and attributes should not be used there, if possible.

- "Returns the restriction to the principal part (i.e. exchangeable part) of self. I.e., the subquiver obtained by deleting the frozen vertices of self." contains two times i.e. . Could you change that?

- `if type(inplace) is Integer:` Instead of printing a warning, I would suggest to only allow boolean arguments here, and raise a ValueError otherwise.

- `elif rank == 4 and (twist == [1,2] or twist == [2,1])` Am I seeing it right that you now introduced two QuiverMutationTypes for the two possible twists? I would certainly not like that since both are mutation equivalent. [ I just think about the same kind of behaviour in type D and affine A with an oriented circle - it doesn't seem that you actually treated this case, did you? ] I still prefer the standard quiver method to have an optional argument, but we can maybe discuss that again later today or tomorrow...

Beside that, all changes seem good to me.

Best, Christian



---

archive/issue_comments_100289.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI just re-uploaded my patch.  Christian, thanks for catching those bugs.\n\n* The trailing whitespace should be gone now.  I don't think I introduced any new space, but will double-check after the patchbot is finished re-running.\n\n* I agree with you about .mutation_type() instead of ._mutation_type but we have not defined .mutation_type() yet.\n\nOnce we add in the newer patches, we should remember to include editing these doc-tests.\n\n* The wording in exchangeable_part has been changed.\n\n* Yes, that it is better - the warnings in mutate have been turned into Value Errors\n\n* Regarding twist [1,2] and [2,1].  This is a little more subtle.  So \n\n```\nsage: QuiverMutationType(['F',4,[1,2]])\n```\nand \n\n```\nsage: QuiverMutationType(['F',4,[2,1]])\n``` \nboth give you:\n\n```\n['F', 4, [1, 2]]\n```\n\nIn fact,\n\n```\nsage: QuiverMutationType(['F',4,[2,1]]) == QuiverMutationType(['F',4,[1,2]])\nTrue\n```\n\nWe have as before:\n\n```\nsage: Q = ClusterQuiver(['F',4,[1,2]]); Q\nQuiver on 6 vertices of type ['F', 4, [1, 2]]\n\nsage: Q2 = ClusterQuiver(['F',4,[1,2]]); Q2\nQuiver on 6 vertices of type ['F', 4, [1, 2]]\n\nsage: Q3 = ClusterQuiver(['F',4,[2,1]]); Q3\nQuiver on 6 vertices of type ['F', 4, [1, 2]]\n\nsage: Q1._mutation_type == Q3._mutation_type\nTrue\n\nsage: Q1 == Q2\nTrue\n```\n\nThe difference now is:\n\n```\nsage: Q1 == Q3\nFalse\n```",
    "created_at": "2012-09-02T15:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100289",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:24" align="right">comment:24</div>

I just re-uploaded my patch.  Christian, thanks for catching those bugs.

* The trailing whitespace should be gone now.  I don't think I introduced any new space, but will double-check after the patchbot is finished re-running.

* I agree with you about .mutation_type() instead of ._mutation_type but we have not defined .mutation_type() yet.

Once we add in the newer patches, we should remember to include editing these doc-tests.

* The wording in exchangeable_part has been changed.

* Yes, that it is better - the warnings in mutate have been turned into Value Errors

* Regarding twist [1,2] and [2,1].  This is a little more subtle.  So 

```
sage: QuiverMutationType(['F',4,[1,2]])
```
and 

```
sage: QuiverMutationType(['F',4,[2,1]])
``` 
both give you:

```
['F', 4, [1, 2]]
```

In fact,

```
sage: QuiverMutationType(['F',4,[2,1]]) == QuiverMutationType(['F',4,[1,2]])
True
```

We have as before:

```
sage: Q = ClusterQuiver(['F',4,[1,2]]); Q
Quiver on 6 vertices of type ['F', 4, [1, 2]]

sage: Q2 = ClusterQuiver(['F',4,[1,2]]); Q2
Quiver on 6 vertices of type ['F', 4, [1, 2]]

sage: Q3 = ClusterQuiver(['F',4,[2,1]]); Q3
Quiver on 6 vertices of type ['F', 4, [1, 2]]

sage: Q1._mutation_type == Q3._mutation_type
True

sage: Q1 == Q2
True
```

The difference now is:

```
sage: Q1 == Q3
False
```



---

archive/issue_comments_100290.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nChristian, the changes we discussed have now been essentially made:\n\n* The ClusterQuiver constructor passes along all inputs which are of the form QuiverMutationType to .standard_quiver()\n\n* However, does case-by-case handling of (C,2), (F,4, [2,1]), (G,2, (3,1)), 'GR' type, and 'TR' type.\n\nNote that I employed a strategy slightly different than we discussed: I use QuiverMutationType_Irreducible._digraph to get \nthe desired directed graph rather than repeating these lines here.  \n\nIf you want to move some of these lines from QuiverMutationType_Irreducible to here, we can do that, but I wanted to make sure it worked first before trying to pull those lines over.  Also, I'm perfectly happy leaving the lines in QuiverMutationType_Irreducible since it is not a globally defined class, but am open to further discussion.\n\n* I also now allow an input of \n\n```\nsage: QuiverMutationType(['A',[n,0],1])\n['D', n]\n```\n\nwith special cases for small n.\n\nHowever \n\n```\nsage: ClusterQuiver(['A',[n,0],1])\n```\n\nyields the directed cycle quiver of type D_n rather than the standard Dynkin D_n.\n\n* ClusterQuiver now also has the command .mutation_type() which yields the _mutation_type, but without trying to compute it when it is not already known.\n\n* I found out where in our code we are missing doctests.  It is really only for the graphical commands: .plot(), .show() in QuiverMutationType.py and .show(), .interact(), and .save_image() in Quiver.py.\n\nI added a dummy example for .plot() in QuiverMutationType but didn't update the others.  Hopefully adding this one function changed the coverage percentage so that we increase it rather than decrease it (I think that's what made the patchbot unhappy).\n\nWe also have bad coverage in the mutation_class.py file, but state that at the top of the sheet, and I will worry about this another day.",
    "created_at": "2012-09-02T20:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100290",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:25" align="right">comment:25</div>

Christian, the changes we discussed have now been essentially made:

* The ClusterQuiver constructor passes along all inputs which are of the form QuiverMutationType to .standard_quiver()

* However, does case-by-case handling of (C,2), (F,4, [2,1]), (G,2, (3,1)), 'GR' type, and 'TR' type.

Note that I employed a strategy slightly different than we discussed: I use QuiverMutationType_Irreducible._digraph to get 
the desired directed graph rather than repeating these lines here.  

If you want to move some of these lines from QuiverMutationType_Irreducible to here, we can do that, but I wanted to make sure it worked first before trying to pull those lines over.  Also, I'm perfectly happy leaving the lines in QuiverMutationType_Irreducible since it is not a globally defined class, but am open to further discussion.

* I also now allow an input of 

```
sage: QuiverMutationType(['A',[n,0],1])
['D', n]
```

with special cases for small n.

However 

```
sage: ClusterQuiver(['A',[n,0],1])
```

yields the directed cycle quiver of type D_n rather than the standard Dynkin D_n.

* ClusterQuiver now also has the command .mutation_type() which yields the _mutation_type, but without trying to compute it when it is not already known.

* I found out where in our code we are missing doctests.  It is really only for the graphical commands: .plot(), .show() in QuiverMutationType.py and .show(), .interact(), and .save_image() in Quiver.py.

I added a dummy example for .plot() in QuiverMutationType but didn't update the others.  Hopefully adding this one function changed the coverage percentage so that we increase it rather than decrease it (I think that's what made the patchbot unhappy).

We also have bad coverage in the mutation_class.py file, but state that at the top of the sheet, and I will worry about this another day.



---

archive/issue_comments_100291.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI rebased the patches according to the new lazy import in #10527.",
    "created_at": "2012-09-07T15:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100291",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:26" align="right">comment:26</div>

I rebased the patches according to the new lazy import in #10527.



---

archive/issue_comments_100292.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nRecent changes to #10527 led to apply errors when my patch trac_10538-quiver-gm.patch is applied after the new #10527 patches.   I just uploaded a new version of my patch to eliminate these errors. \n\nChristian, please delete my old  (39.1 KB) patch and keep my (35.4 KB) patch in its place.  I no longer had permissions to replace my old patch.\n\nFor better or worse, the patchbot is down at the moment so we won't get any apply failures for the time being anyway.  \n\nBy the way, Dylan, this patch should be ready for reviewing shortly.  Once you have a trac account, I can change the reviewer field accordingly.",
    "created_at": "2012-09-11T07:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100292",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:27" align="right">comment:27</div>

Recent changes to #10527 led to apply errors when my patch trac_10538-quiver-gm.patch is applied after the new #10527 patches.   I just uploaded a new version of my patch to eliminate these errors. 

Christian, please delete my old  (39.1 KB) patch and keep my (35.4 KB) patch in its place.  I no longer had permissions to replace my old patch.

For better or worse, the patchbot is down at the moment so we won't get any apply failures for the time being anyway.  

By the way, Dylan, this patch should be ready for reviewing shortly.  Once you have a trac account, I can change the reviewer field accordingly.



---

archive/issue_comments_100293.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@sagetrac-gmoose05](#comment:27):\n> Christian, please delete my old  (39.1 KB) patch and keep my (35.4 KB) patch in its place.  I no longer had permissions to replace my old patch.\n\nDone.",
    "created_at": "2012-09-11T07:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100293",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@sagetrac-gmoose05](#comment:27):
> Christian, please delete my old  (39.1 KB) patch and keep my (35.4 KB) patch in its place.  I no longer had permissions to replace my old patch.

Done.



---

archive/issue_comments_100294.json:
```json
{
    "body": "Changed reviewer from **Gregg Musiker** to **Dylan Rupel**",
    "created_at": "2012-11-19T18:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100294",
    "user": "https://github.com/sagetrac-drupel"
}
```

Changed reviewer from **Gregg Musiker** to **Dylan Rupel**



---

archive/issue_comments_100295.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nJust added an updated version of my patch.  \n\nThis includes all of the earlier changes and added a single method to the ClusterQuiver class, qmu_save(), that allows one to save a ClusterQuiver to a .qmu file so that it can uploaded directly into Bernhard Keller's Java Applet for Quiver Mutation.",
    "created_at": "2012-11-29T04:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100295",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:30" align="right">comment:30</div>

Just added an updated version of my patch.  

This includes all of the earlier changes and added a single method to the ClusterQuiver class, qmu_save(), that allows one to save a ClusterQuiver to a .qmu file so that it can uploaded directly into Bernhard Keller's Java Applet for Quiver Mutation.



---

archive/issue_comments_100296.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI made some small changes to the init() method.  In particular there was some undesirable behavior when 'data' was a list of edges or an empty digraph.  I added examples and tests which illustrate the changes.  When 'data' is a digraph it will now warn the user if loops are present rather than referring to the loops as two-cycles.  I also added an 'inplace' option (not default) to the principal_extension() method.",
    "created_at": "2012-12-10T22:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100296",
    "user": "https://github.com/sagetrac-drupel"
}
```

<div id="comment:31" align="right">comment:31</div>

I made some small changes to the init() method.  In particular there was some undesirable behavior when 'data' was a list of edges or an empty digraph.  I added examples and tests which illustrate the changes.  When 'data' is a digraph it will now warn the user if loops are present rather than referring to the loops as two-cycles.  I also added an 'inplace' option (not default) to the principal_extension() method.



---

archive/issue_comments_100297.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI uploaded a new version of the patch with all missing doctests added. Let's see what the patchbot says...",
    "created_at": "2012-12-15T17:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100297",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:32" align="right">comment:32</div>

I uploaded a new version of the patch with all missing doctests added. Let's see what the patchbot says...



---

archive/issue_comments_100298.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOkay, I had another look and made some last minor changes in the documentation -- I think it is ready to go once we can convince the patchbot to give us a green light!",
    "created_at": "2012-12-16T10:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100298",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:33" align="right">comment:33</div>

Okay, I had another look and made some last minor changes in the documentation -- I think it is ready to go once we can convince the patchbot to give us a green light!



---

archive/issue_comments_100299.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI did some reorganizing of the examples, is the placement of my colons correct?\n\nI made a small change in the mutate() method so that it remembers the QuiverMutationType when inplace=False.",
    "created_at": "2012-12-17T19:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100299",
    "user": "https://github.com/sagetrac-drupel"
}
```

<div id="comment:34" align="right">comment:34</div>

I did some reorganizing of the examples, is the placement of my colons correct?

I made a small change in the mutate() method so that it remembers the QuiverMutationType when inplace=False.



---

archive/issue_comments_100300.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@sagetrac-drupel](#comment:34):\n> I did some reorganizing of the examples, is the placement of my colons correct?\n\nYou can figure out how the documetation looks like by using\n\n\\# sage -docbuild reference html\n\nand then look at the index.html specified at the end. I will do it myself but don't have time today to do it anymore...\n\n> I made a small change in the mutate() method so that it remembers the QuiverMutationType when inplace=False.\n\ngood call, thanks!",
    "created_at": "2012-12-18T05:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100300",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@sagetrac-drupel](#comment:34):
> I did some reorganizing of the examples, is the placement of my colons correct?

You can figure out how the documetation looks like by using

\# sage -docbuild reference html

and then look at the index.html specified at the end. I will do it myself but don't have time today to do it anymore...

> I made a small change in the mutate() method so that it remembers the QuiverMutationType when inplace=False.

good call, thanks!



---

archive/issue_comments_100301.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHi Dylan --\n\nI folded your review into my patch. I did that because patchbot doesn't run patches by people it \"doesn't know\" (I don't have a proper definition here), and it is better if we see the green light before actually setting the positive review.\n\nFrom my side, you can go forward and do so, as soon as the patchbot is done without finding anything.\n\nThanks for looking closely at the patch!\n\nChristian",
    "created_at": "2012-12-20T15:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100301",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:36" align="right">comment:36</div>

Hi Dylan --

I folded your review into my patch. I did that because patchbot doesn't run patches by people it "doesn't know" (I don't have a proper definition here), and it is better if we see the green light before actually setting the positive review.

From my side, you can go forward and do so, as soon as the patchbot is done without finding anything.

Thanks for looking closely at the patch!

Christian



---

archive/issue_comments_100302.json:
```json
{
    "body": "Changed author from **Christian Stump** to **Christian Stump, Gregg Musiker**",
    "created_at": "2012-12-25T21:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100302",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Changed author from **Christian Stump** to **Christian Stump, Gregg Musiker**



---

archive/issue_events_139205.json:
```json
{
    "actor": "https://github.com/sagetrac-drupel",
    "created_at": "2012-12-29T06:12:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139205"
}
```



---

archive/issue_events_139206.json:
```json
{
    "actor": "https://github.com/sagetrac-drupel",
    "created_at": "2012-12-29T06:12:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139206"
}
```



---

archive/issue_events_139207.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-30T08:05:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139207"
}
```



---

archive/issue_events_139208.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-30T08:05:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139208"
}
```



---

archive/issue_comments_100303.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n\n```\nsage -t  --long -force_lib devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py\n**********************************************************************\nFile \"/release/merger/sage-5.6.beta2/devel/sage-main/sage/combinat/cluster_algebra_quiver/quiver.py\", line 501:\n    sage: Q.interact() # long time\nExpected nothing\nGot:\n    'The interactive mode only runs in the Sage notebook.'\n**********************************************************************\n```",
    "created_at": "2012-12-30T08:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100303",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>


```
sage -t  --long -force_lib devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py
**********************************************************************
File "/release/merger/sage-5.6.beta2/devel/sage-main/sage/combinat/cluster_algebra_quiver/quiver.py", line 501:
    sage: Q.interact() # long time
Expected nothing
Got:
    'The interactive mode only runs in the Sage notebook.'
**********************************************************************
```



---

archive/issue_comments_100304.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAttachment: **[trac_10538-quiver-cs.patch.gz](https://github.com/sagemath/sage/files/ticket10538/trac_10538-quiver-cs.patch.gz)**\n\nReplying to [@jdemeyer](#comment:39):\n\nFixed!",
    "created_at": "2012-12-31T16:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100304",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:40" align="right">comment:40</div>

Attachment: **[trac_10538-quiver-cs.patch.gz](https://github.com/sagemath/sage/files/ticket10538/trac_10538-quiver-cs.patch.gz)**

Replying to [@jdemeyer](#comment:39):

Fixed!



---

archive/issue_events_139209.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2012-12-31T16:03:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139209"
}
```



---

archive/issue_events_139210.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2012-12-31T16:03:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139210"
}
```



---

archive/issue_comments_100305.json:
```json
{
    "body": "Merged: **sage-5.6.beta3**",
    "created_at": "2013-01-07T20:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100305",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta3**



---

archive/issue_events_139211.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:55:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139211"
}
```



---

archive/issue_events_139212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:55:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139212"
}
```



---

archive/issue_events_139213.json:
```json
{
    "actor": "https://github.com/etn40ff",
    "created_at": "2013-07-03T13:35:25Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "subject": "https://github.com/etn40ff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10538#event-139213"
}
```



---

archive/issue_comments_100306.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAttachment: **[trac_10538_qmu_save.patch.gz](https://github.com/sagemath/sage/files/ticket10538/trac_10538_qmu_save.patch.gz)**\n\nThere is a minor issue in qmu_save: it does not work whenever the quiver has 0<m!=n frozen vertices.\nPlease include the attached patch.",
    "created_at": "2013-07-03T13:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100306",
    "user": "https://github.com/etn40ff"
}
```

<div id="comment:43" align="right">comment:43</div>

Attachment: **[trac_10538_qmu_save.patch.gz](https://github.com/sagemath/sage/files/ticket10538/trac_10538_qmu_save.patch.gz)**

There is a minor issue in qmu_save: it does not work whenever the quiver has 0<m!=n frozen vertices.
Please include the attached patch.



---

archive/issue_comments_100307.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@etn40ff](#comment:43):\n> There is a minor issue in qmu_save: it does not work whenever the quiver has 0<m!=n frozen vertices.\n> Please include the attached patch.\n\nHi Salvatore,\n\nThanks for finding the bug with qmu_save with frozen vertices.  Since this ticket has already closed, I suggest opening up a new ticket which is simply the trac_10538_qmu_save.patch.\n\nSince it is small, I can review this quickly and then it should be able to be merged into the latest sage quickly.\n\nSee Ticket #14638 for a similar example. \n\nGregg",
    "created_at": "2013-07-03T15:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100307",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@etn40ff](#comment:43):
> There is a minor issue in qmu_save: it does not work whenever the quiver has 0<m!=n frozen vertices.
> Please include the attached patch.

Hi Salvatore,

Thanks for finding the bug with qmu_save with frozen vertices.  Since this ticket has already closed, I suggest opening up a new ticket which is simply the trac_10538_qmu_save.patch.

Since it is small, I can review this quickly and then it should be able to be merged into the latest sage quickly.

See Ticket #14638 for a similar example. 

Gregg



---

archive/issue_comments_100308.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHi Gregg,\nI just did as you suggested: the new ticket is #14851; you are in cc. \nBest\nS.\n\nPS: you might be interested in #14844 too",
    "created_at": "2013-07-04T08:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10538#issuecomment-100308",
    "user": "https://github.com/etn40ff"
}
```

<div id="comment:45" align="right">comment:45</div>

Hi Gregg,
I just did as you suggested: the new ticket is #14851; you are in cc. 
Best
S.

PS: you might be interested in #14844 too
