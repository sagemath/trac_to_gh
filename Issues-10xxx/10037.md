# Issue 10037: cddlib/Polyhedron bug

archive/issues_010036.json:
```json
{
    "body": "The following causes cddlib to crash; I'm not sure if this is fixable without patching the cddlib source:\n\n```\np4 = polytopes.permutahedron(5,project=True)\npn4 = p4.projection()\np3  = pn4.schlegel()\nverts = p3.transformed_coords\nedges = p3.lines\ntopes = []\nfor q in p4.facial_incidences():\n    topes.append([verts[i] for i in q[1]])\nPolyhedron(vertices=topes[3], field=RDF, verbose=True)\n```\n\noutput ends with:\n\n```\nFacet graph\n*Error: Possibly an LP cycling occurs.  Use the Criss-Cross method.\n```\n\nApply trac_10037_polyhedron_bug.patch to the sage library\n\nAssignee: mhampton\n\nCC:  @vbraun @dimpase @novoselt\n\nKeywords: cddlib, polyhedron, polyhedra\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Volker Braun\n\nMerged: sage-5.10.beta1\n\nDependencies: #14479\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10037\n\n",
    "closed_at": "2013-04-30T09:38:10Z",
    "created_at": "2010-09-30T03:05:22Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "cddlib/Polyhedron bug",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10037",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```
The following causes cddlib to crash; I'm not sure if this is fixable without patching the cddlib source:

```
p4 = polytopes.permutahedron(5,project=True)
pn4 = p4.projection()
p3  = pn4.schlegel()
verts = p3.transformed_coords
edges = p3.lines
topes = []
for q in p4.facial_incidences():
    topes.append([verts[i] for i in q[1]])
Polyhedron(vertices=topes[3], field=RDF, verbose=True)
```

output ends with:

```
Facet graph
*Error: Possibly an LP cycling occurs.  Use the Criss-Cross method.
```

Apply trac_10037_polyhedron_bug.patch to the sage library

Assignee: mhampton

CC:  @vbraun @dimpase @novoselt

Keywords: cddlib, polyhedron, polyhedra

Reviewer: Andrey Novoseltsev

Author: Volker Braun

Merged: sage-5.10.beta1

Dependencies: #14479

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/10037





---

archive/issue_comments_105381.json:
```json
{
    "body": "<a id='comment:1'></a>This one actually works for me (Fedora 13 x86_64):\n\n```\nsage: Polyhedron(vertices=topes[3], field=RDF, verbose=True)\n[... vebose cdd interaction ...]\nA 3-dimensional polyhedron in RDF^3 defined as the convex hull of 23 vertices.\n```\nJust out of curiosity, which arch is that failing on?\n\nI think the way to go is to implement vertex/facet adjacencies ourselves with a modern LP solver, either cvxopt or PPL. \n\nI've opened #10039 as a first step to switch to PPL.",
    "created_at": "2010-09-30T09:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105381",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>This one actually works for me (Fedora 13 x86_64):

```
sage: Polyhedron(vertices=topes[3], field=RDF, verbose=True)
[... vebose cdd interaction ...]
A 3-dimensional polyhedron in RDF^3 defined as the convex hull of 23 vertices.
```
Just out of curiosity, which arch is that failing on?

I think the way to go is to implement vertex/facet adjacencies ourselves with a modern LP solver, either cvxopt or PPL. 

I've opened #10039 as a first step to switch to PPL.



---

archive/issue_comments_105382.json:
```json
{
    "body": "<a id='comment:2'></a>It fails for me on an intel mac, OS X 10.6.  It does work for me on linux (64 bit Ubuntu 9.10).",
    "created_at": "2010-09-30T16:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105382",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:2'></a>It fails for me on an intel mac, OS X 10.6.  It does work for me on linux (64 bit Ubuntu 9.10).



---

archive/issue_comments_105383.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-23T18:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105383",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_105384.json:
```json
{
    "body": "<a id='comment:3'></a>#14479 adds raising a proper error, so I consider this fixed. Use rationals for exact arithmetic.\n\nPatch is for a regression in calling `schlegel()` without specifying the direction.",
    "created_at": "2013-04-23T18:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105384",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>#14479 adds raising a proper error, so I consider this fixed. Use rationals for exact arithmetic.

Patch is for a regression in calling `schlegel()` without specifying the direction.



---

archive/issue_comments_105385.json:
```json
{
    "body": "Attachment [trac_10037_polyhedron_bug.patch](tarball://root/attachments/some-uuid/ticket10037/trac_10037_polyhedron_bug.patch) by @vbraun created at 2013-04-23 18:52:20\n\nInitial patch",
    "created_at": "2013-04-23T18:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105385",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10037_polyhedron_bug.patch](tarball://root/attachments/some-uuid/ticket10037/trac_10037_polyhedron_bug.patch) by @vbraun created at 2013-04-23 18:52:20

Initial patch



---

archive/issue_comments_105386.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -19,6 +19,8 @@\n *Error: Possibly an LP cycling occurs.  Use the Criss-Cross method.\n \\`\\`\\`\n \n+Apply trac_10037_polyhedron_bug.patch to the sage library\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/10037\n```\n",
    "created_at": "2013-04-23T18:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105386",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -19,6 +19,8 @@
 *Error: Possibly an LP cycling occurs.  Use the Criss-Cross method.
 \`\`\`
 
+Apply trac_10037_polyhedron_bug.patch to the sage library
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/10037
```




---

archive/issue_comments_105387.json:
```json
{
    "body": "<a id='comment:5'></a>This trivial patch needs review...",
    "created_at": "2013-04-26T16:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105387",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>This trivial patch needs review...



---

archive/issue_comments_105388.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-26T16:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105388",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_025478.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-04-26T16:24:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "milestone": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10037#event-25478"
}
```



---

archive/issue_comments_105389.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-30T09:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10037#issuecomment-105389",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_025479.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-30T09:38:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10037",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10037#event-25479"
}
```
