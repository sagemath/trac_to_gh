# Issue 10970: Do not generate pipestatus from spkg/install

archive/issues_010891.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-GeorgSWeber"
    ],
    "body": "The `$SAGE_ROOT/spkg/install` has a here document that creates `pipestatus`. With the sage root repository, this is no longer needed as `pipestatus` is tracked by the repository. The patch removes it from `$SAGE_ROOT/spkg/install`.\n\n---\n\nPatch moved to #11073.\n\nCC:  @jdemeyer @nexttime\n\nKeywords: **sd32**\n\nComponent: **build**\n\nReviewer: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10970_\n\n",
    "closed_at": "2012-01-05T08:59:48Z",
    "created_at": "2011-03-21T18:23:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Do not generate pipestatus from spkg/install",
    "type": "issue",
    "updated_at": "2012-01-05T08:59:48Z",
    "url": "https://github.com/sagemath/sage/issues/10970",
    "user": "https://github.com/vbraun"
}
```
The `$SAGE_ROOT/spkg/install` has a here document that creates `pipestatus`. With the sage root repository, this is no longer needed as `pipestatus` is tracked by the repository. The patch removes it from `$SAGE_ROOT/spkg/install`.

---

Patch moved to #11073.

CC:  @jdemeyer @nexttime

Keywords: **sd32**

Component: **build**

Reviewer: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/10970_





---

archive/issue_events_145589.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-21T18:23:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145589"
}
```



---

archive/issue_events_145590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-21T18:23:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145590"
}
```



---

archive/issue_events_145591.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-21T18:23:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145591"
}
```



---

archive/issue_events_145592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-21T18:23:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145592"
}
```



---

archive/issue_events_145593.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2011-03-21T18:23:00Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "subject": "https://github.com/vbraun",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145593"
}
```



---

archive/issue_comments_107718.json:
```json
{
    "body": "Attachment: **[trac_10970_do_not_generate_pipestatus.patch.gz](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz)**\n\nPatch to SAGE_ROOT repo",
    "created_at": "2011-03-21T18:25:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107718",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_10970_do_not_generate_pipestatus.patch.gz](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz)**

Patch to SAGE_ROOT repo



---

archive/issue_events_145594.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-21T18:26:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145594"
}
```



---

archive/issue_events_145595.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2011-06-02T14:05:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145595"
}
```



---

archive/issue_events_145596.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2011-06-02T14:05:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145596"
}
```



---

archive/issue_comments_107719.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nPatch applied, then patched file moved to new source directory. 'make testlong' passed all tests.  Positive review.",
    "created_at": "2011-06-02T14:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107719",
    "user": "https://github.com/sagetrac-mariah"
}
```

<div id="comment:2" align="right">comment:2</div>

Patch applied, then patched file moved to new source directory. 'make testlong' passed all tests.  Positive review.



---

archive/issue_comments_107720.json:
```json
{
    "body": "Reviewer: **Mariah Lenox**",
    "created_at": "2011-06-02T14:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107720",
    "user": "https://github.com/sagetrac-mariah"
}
```

Reviewer: **Mariah Lenox**



---

archive/issue_events_145597.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-06-03T00:07:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145597"
}
```



---

archive/issue_events_145598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-06-03T00:07:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145598"
}
```



---

archive/issue_comments_107721.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI've recently played around with automatic testing upgrades and I think this might break upgrades. Its really a bigger issue, the sage_root repository is only upgraded rather late in the upgrade process. I think this needs to be fixed first. I will do some more testing when I have time.\n\nI'll set this ticket to \"needs info\" until I (or somebody else) tests upgrading.",
    "created_at": "2011-06-03T00:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107721",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

I've recently played around with automatic testing upgrades and I think this might break upgrades. Its really a bigger issue, the sage_root repository is only upgraded rather late in the upgrade process. I think this needs to be fixed first. I will do some more testing when I have time.

I'll set this ticket to "needs info" until I (or somebody else) tests upgrading.



---

archive/issue_comments_107722.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMy guess is that if this causes problems with upgrading, it should only happen when upgrading from versions of Sage which don't already include the file \"pipestatus\", which would mean some version between 4.4.4 (which doesn't have it) and 4.5.3 (which does).  I haven't actually tested anything, though.\n\nMaybe the root repository should be upgraded earlier.  In an install from scratch, it has to be installed somewhat late because it depends on mercurial, but when upgrading, mercurial should already be present.  This would require altering the upgrade process so that it doesn't just run spkg/install.  We could install the root repo by hand (in sage-upgrade) before running spkg/install.",
    "created_at": "2011-06-03T00:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107722",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

My guess is that if this causes problems with upgrading, it should only happen when upgrading from versions of Sage which don't already include the file "pipestatus", which would mean some version between 4.4.4 (which doesn't have it) and 4.5.3 (which does).  I haven't actually tested anything, though.

Maybe the root repository should be upgraded earlier.  In an install from scratch, it has to be installed somewhat late because it depends on mercurial, but when upgrading, mercurial should already be present.  This would require altering the upgrade process so that it doesn't just run spkg/install.  We could install the root repo by hand (in sage-upgrade) before running spkg/install.



---

archive/issue_comments_107723.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jhpalmieri](#comment:4):\n> Maybe the root repository should be upgraded earlier.  In an install from scratch, it has to be installed somewhat late because it depends on mercurial, but when upgrading, mercurial should already be present.\n\nThose were exactly my thoughts, too. \n\nI was mostly motivated by #11073. We can't stuff all files in the spkg/base repo into a here document :-) \n\nDo we have an official policy on how old a Sage version should still be able to upgrade?",
    "created_at": "2011-06-03T01:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107723",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jhpalmieri](#comment:4):
> Maybe the root repository should be upgraded earlier.  In an install from scratch, it has to be installed somewhat late because it depends on mercurial, but when upgrading, mercurial should already be present.

Those were exactly my thoughts, too. 

I was mostly motivated by #11073. We can't stuff all files in the spkg/base repo into a here document :-) 

Do we have an official policy on how old a Sage version should still be able to upgrade?



---

archive/issue_comments_107724.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@vbraun](#comment:5):\n> Do we have an official policy on how old a Sage version should still be able to upgrade?\n\nI declare \"1 year\" as the official policy, since that's the official policy for deprecation.  I think it is a reasonable amount of time. \n\nSince sage-4.5.3 had pipestatus, and was released 2010-09-08 and the next sage release won't be for two weeks (or so), it is fine to deprecate upgrading from pre sage-4.5.3 releases. \n\n -- William",
    "created_at": "2011-08-23T07:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107724",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@vbraun](#comment:5):
> Do we have an official policy on how old a Sage version should still be able to upgrade?

I declare "1 year" as the official policy, since that's the official policy for deprecation.  I think it is a reasonable amount of time. 

Since sage-4.5.3 had pipestatus, and was released 2010-09-08 and the next sage release won't be for two weeks (or so), it is fine to deprecate upgrading from pre sage-4.5.3 releases. 

 -- William



---

archive/issue_events_145599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-23T08:00:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "title_is": "Do not generate pipestatus from spkg/install",
    "title_was": "Remove pipestatus from spkg/install",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145599"
}
```



---

archive/issue_events_145600.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-23T08:00:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145600"
}
```



---

archive/issue_events_145601.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-23T08:00:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145601"
}
```



---

archive/issue_comments_107725.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`pipestatus` exists since sage-4.5, released 16 july 2010.",
    "created_at": "2011-08-23T08:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107725",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

`pipestatus` exists since sage-4.5, released 16 july 2010.



---

archive/issue_comments_107726.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI mentioned this to people at Sage Days and they point out that \"sage -upgrade\" rarely works anyways, so we shouldn't be be too worried about breaking \"sage -upgrade\".",
    "created_at": "2011-08-23T08:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107726",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:9" align="right">comment:9</div>

I mentioned this to people at Sage Days and they point out that "sage -upgrade" rarely works anyways, so we shouldn't be be too worried about breaking "sage -upgrade".



---

archive/issue_comments_107727.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@williamstein](#comment:9):\n> I mentioned this to people at Sage Days and they point out that \"sage -upgrade\" rarely works anyways^`[citation needed]`^, so we shouldn't be be too worried about breaking \"sage -upgrade\".\n\nWe do test upgrading on various systems from various Sage versions and we almost never have problems.\n\nAnothe question is: is upgrading really used?  I mean, do normal Sage users sometimes do `sage -upgrade`?  If not, then why do we support upgrading?",
    "created_at": "2011-08-23T08:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107727",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@williamstein](#comment:9):
> I mentioned this to people at Sage Days and they point out that "sage -upgrade" rarely works anyways^`[citation needed]`^, so we shouldn't be be too worried about breaking "sage -upgrade".

We do test upgrading on various systems from various Sage versions and we almost never have problems.

Anothe question is: is upgrading really used?  I mean, do normal Sage users sometimes do `sage -upgrade`?  If not, then why do we support upgrading?



---

archive/issue_comments_107728.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n1.  Jdemeyer -- thank you for doing testing.  I greatly appreciate it.  This would be a great topic for our \"testing sage days\". \n\nReplying to [@jdemeyer](#comment:10):\n> Anothe question is: is upgrading really used?  I mean, do normal Sage users sometimes \n> do `sage -upgrade`?  If not, then why do we support upgrading?\n\n*I* use  `sage -upgrade` a lot on my servers that have lots of optional packages installed.",
    "created_at": "2011-08-23T08:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107728",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:11" align="right">comment:11</div>

1.  Jdemeyer -- thank you for doing testing.  I greatly appreciate it.  This would be a great topic for our "testing sage days". 

Replying to [@jdemeyer](#comment:10):
> Anothe question is: is upgrading really used?  I mean, do normal Sage users sometimes 
> do `sage -upgrade`?  If not, then why do we support upgrading?

*I* use  `sage -upgrade` a lot on my servers that have lots of optional packages installed.



---

archive/issue_comments_107729.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI did some testing of this... and I say: positive review.",
    "created_at": "2011-08-24T05:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107729",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:12" align="right">comment:12</div>

I did some testing of this... and I say: positive review.



---

archive/issue_events_145602.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-24T05:20:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145602"
}
```



---

archive/issue_events_145603.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-24T05:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145603"
}
```



---

archive/issue_comments_107730.json:
```json
{
    "body": "Changed keywords from none to **sd32**",
    "created_at": "2011-08-24T23:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107730",
    "user": "https://github.com/williamstein"
}
```

Changed keywords from none to **sd32**



---

archive/issue_comments_107731.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@williamstein](#comment:9):\n> I mentioned this to people at Sage Days and they point out that \"sage -upgrade\" rarely works anyways, so we shouldn't be be too worried about breaking \"sage -upgrade\".\n\nWe should be worried that (or why they feel) upgrading doesn't work for them though. I guess they just didn't try since last year (when it started working better). ;-)\n\n---\n\nHowever, I see no real point in (or any compelling reason for) removing `pipestatus`' creation.\n\nIf we do so, despite of that it [just] breaks upgrading from older releases, `spkg/install` should give an appropriate error message in case `pipestatus` isn't already present. Unfortunately this would happen **after** dozens of spkgs to upgrade have been downloaded, which is a bit odd.\n\nIf at all, we IMHO should remove it in some *\"major\"* release, like e.g. Sage 5.0, or perhaps Sage 4.8, since people are probably less likely to upgrade to such a version (with `-upgrade`), or at least more likely to read its release notes in advance.",
    "created_at": "2011-08-25T06:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107731",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@williamstein](#comment:9):
> I mentioned this to people at Sage Days and they point out that "sage -upgrade" rarely works anyways, so we shouldn't be be too worried about breaking "sage -upgrade".

We should be worried that (or why they feel) upgrading doesn't work for them though. I guess they just didn't try since last year (when it started working better). ;-)

---

However, I see no real point in (or any compelling reason for) removing `pipestatus`' creation.

If we do so, despite of that it [just] breaks upgrading from older releases, `spkg/install` should give an appropriate error message in case `pipestatus` isn't already present. Unfortunately this would happen **after** dozens of spkgs to upgrade have been downloaded, which is a bit odd.

If at all, we IMHO should remove it in some *"major"* release, like e.g. Sage 5.0, or perhaps Sage 4.8, since people are probably less likely to upgrade to such a version (with `-upgrade`), or at least more likely to read its release notes in advance.



---

archive/issue_comments_107732.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nP.S.: The current patch does not even give an [early, intentional] error message in case `pipestatus` is missing.\n\nI also think supporting `sage -upgrade` **is** valuable; note that it still issues a scary warning message we should IMHO change.",
    "created_at": "2011-08-25T06:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107732",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

P.S.: The current patch does not even give an [early, intentional] error message in case `pipestatus` is missing.

I also think supporting `sage -upgrade` **is** valuable; note that it still issues a scary warning message we should IMHO change.



---

archive/issue_comments_107733.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nleif -- just out of curiosity, do you use gentoo?",
    "created_at": "2011-08-25T06:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107733",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:16" align="right">comment:16</div>

leif -- just out of curiosity, do you use gentoo?



---

archive/issue_comments_107734.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@williamstein](#comment:16):\n> leif -- just out of curiosity, do you use gentoo?\n\nNope...",
    "created_at": "2011-08-25T06:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107734",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@williamstein](#comment:16):
> leif -- just out of curiosity, do you use gentoo?

Nope...



---

archive/issue_comments_107735.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@nexttime](#comment:17):\n> Replying to [@williamstein](#comment:16):\n> > leif -- just out of curiosity, do you use gentoo?\n\n> \n> Nope...\n\nShould I? (And I'm not aware Volker does; I also didn't hear Fran\u00e7ois complaining about `pipestatus`' creation, but maybe I just missed it.)",
    "created_at": "2011-08-25T06:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107735",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@nexttime](#comment:17):
> Replying to [@williamstein](#comment:16):
> > leif -- just out of curiosity, do you use gentoo?

> 
> Nope...

Should I? (And I'm not aware Volker does; I also didn't hear François complaining about `pipestatus`' creation, but maybe I just missed it.)



---

archive/issue_comments_107736.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n The `$SAGE_ROOT/spkg/install` has a here document that creates `pipestatus`. With the sage root repository, this is no longer needed as `pipestatus` is tracked by the repository. The patch removes it from `$SAGE_ROOT/spkg/install`.\n \n+---\n+\n+Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).\n+\n``````\n",
    "created_at": "2011-09-08T22:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107736",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
 The `$SAGE_ROOT/spkg/install` has a here document that creates `pipestatus`. With the sage root repository, this is no longer needed as `pipestatus` is tracked by the repository. The patch removes it from `$SAGE_ROOT/spkg/install`.
 
+---
+
+Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).
+
``````




---

archive/issue_comments_107737.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI still think removing `pipestatus` for no reason at this point is simply superfluous.\n\nThe patch should IMHO *at least* test for `pipestatus`'s presence, and issue *an appropriate* error message (with instructions how to fix this) if it doesn't exist; though quite late in the upgrade process, i.e. *after* all updated packages have been downloaded, of course.\n\nP.S.: We could even attempt to download it (with e.g. `curl` or `wget`) from the script. Or install the root repository \"manually\" in advance on upgrading, of course from the updated `spkg/install`, since the other scripts are those of the old version.",
    "created_at": "2011-09-08T22:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107737",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

I still think removing `pipestatus` for no reason at this point is simply superfluous.

The patch should IMHO *at least* test for `pipestatus`'s presence, and issue *an appropriate* error message (with instructions how to fix this) if it doesn't exist; though quite late in the upgrade process, i.e. *after* all updated packages have been downloaded, of course.

P.S.: We could even attempt to download it (with e.g. `curl` or `wget`) from the script. Or install the root repository "manually" in advance on upgrading, of course from the updated `spkg/install`, since the other scripts are those of the old version.



---

archive/issue_comments_107738.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,6 @@\n \n Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).\n \n+---\n+\n+**If this ticket gets merged, the change should be prominently announced in the release notes.**\n``````\n",
    "created_at": "2011-09-08T23:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107738",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,6 @@
 
 Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).
 
+---
+
+**If this ticket gets merged, the change should be prominently announced in the release notes.**
``````




---

archive/issue_comments_107739.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIn addition to leif's comments, note that the pipestatus script says\n\n```\n# IMPORTANT: if you edit this file, be sure to also edit spkg/install\n#            where this file is created for upgrading.\n```\nThis comment should probably be deleted.",
    "created_at": "2011-09-10T01:09:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107739",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

In addition to leif's comments, note that the pipestatus script says

```
# IMPORTANT: if you edit this file, be sure to also edit spkg/install
#            where this file is created for upgrading.
```
This comment should probably be deleted.



---

archive/issue_comments_107740.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jhpalmieri](#comment:21):\n> In addition to leif's comments, note that the pipestatus script says\n\n\n```\n# IMPORTANT: if you edit this file, be sure to also edit spkg/install\n#            where this file is created for upgrading.\n```\n> This comment should probably be deleted.\n\nDo you agree that this ticket needs works, w.r.t. the comment, and -- IMHO more important -- the lack of an error check + message on how to fix this?",
    "created_at": "2011-09-12T14:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107740",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jhpalmieri](#comment:21):
> In addition to leif's comments, note that the pipestatus script says


```
# IMPORTANT: if you edit this file, be sure to also edit spkg/install
#            where this file is created for upgrading.
```
> This comment should probably be deleted.

Do you agree that this ticket needs works, w.r.t. the comment, and -- IMHO more important -- the lack of an error check + message on how to fix this?



---

archive/issue_events_145604.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T14:35:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145604"
}
```



---

archive/issue_events_145605.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-12T14:35:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145605"
}
```



---

archive/issue_comments_107741.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI think the elephant in the room is #11073: remove the spkg/base repo, add a mechanism that adds the absolutely necessary files to the tarball (or directly downloads them for upgrades) without depending on bzip2/mercurial/.... Then `pipestatus` would just one of those \"base\" scripts and everything would be taken care of automatically. So perhaps we should make this ticket just contingent upon #11073 and focus our energy there.",
    "created_at": "2011-09-12T15:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107741",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

I think the elephant in the room is #11073: remove the spkg/base repo, add a mechanism that adds the absolutely necessary files to the tarball (or directly downloads them for upgrades) without depending on bzip2/mercurial/.... Then `pipestatus` would just one of those "base" scripts and everything would be taken care of automatically. So perhaps we should make this ticket just contingent upon #11073 and focus our energy there.



---

archive/issue_comments_107742.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n ---\n \n-Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).\n+Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) and [attachment: trac_10970-error-msg.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).\n \n ---\n \n``````\n",
    "created_at": "2011-10-04T20:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107742",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 ---
 
-Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).
+Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) and [attachment: trac_10970-error-msg.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).
 
 ---
 
``````




---

archive/issue_comments_107743.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI'm attaching a referee patch printing an error message if `pipestatus` is missing.  We could also patch the scripts repo:\n\n```diff\ndiff --git a/sage-update b/sage-update\n--- a/sage-update\n+++ b/sage-update\n@@ -400,6 +400,8 @@ def do_update():\n     os.chdir(SPKG_ROOT)\n     download_file(\"install\")\n     os.system('chmod +x install')\n+    download_file(\"pipestatus\")\n+    os.system('chmod +x pipestatus')\n     os.chdir(os.path.join(SPKG_ROOT, \"standard\"))\n     download_file(\"standard/deps\")\n     download_file(\"standard/newest_version\")\n@@ -408,6 +410,7 @@ def do_update():\n     os.chdir(SAGE_ROOT)\n     if root_repo_intact:\n         for file in ['spkg/install',\n+                     'spkg/pipestatus',\n                      'spkg/standard/deps',\n                      'spkg/standard/newest_version']:\n             subprocess.call('./sage -hg commit %s -m ' % file +\n```\nbut I'm not sure it's worth it: `pipestatus` is not a script which should change a lot, so if you have an out-of-date version, it's probably good enough, and it will get replaced during the upgrade process and used the next time around.",
    "created_at": "2011-10-04T20:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107743",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

I'm attaching a referee patch printing an error message if `pipestatus` is missing.  We could also patch the scripts repo:

```diff
diff --git a/sage-update b/sage-update
--- a/sage-update
+++ b/sage-update
@@ -400,6 +400,8 @@ def do_update():
     os.chdir(SPKG_ROOT)
     download_file("install")
     os.system('chmod +x install')
+    download_file("pipestatus")
+    os.system('chmod +x pipestatus')
     os.chdir(os.path.join(SPKG_ROOT, "standard"))
     download_file("standard/deps")
     download_file("standard/newest_version")
@@ -408,6 +410,7 @@ def do_update():
     os.chdir(SAGE_ROOT)
     if root_repo_intact:
         for file in ['spkg/install',
+                     'spkg/pipestatus',
                      'spkg/standard/deps',
                      'spkg/standard/newest_version']:
             subprocess.call('./sage -hg commit %s -m ' % file +
```
but I'm not sure it's worth it: `pipestatus` is not a script which should change a lot, so if you have an out-of-date version, it's probably good enough, and it will get replaced during the upgrade process and used the next time around.



---

archive/issue_comments_107744.json:
```json
{
    "body": "Attachment: **[trac_10970-error-msg.patch.gz](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz)**\n\napply on top of other patch",
    "created_at": "2011-10-04T20:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107744",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_10970-error-msg.patch.gz](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz)**

apply on top of other patch



---

archive/issue_comments_107745.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@vbraun](#comment:3):\n> I've recently played around with automatic testing upgrades and I think this might break upgrades. Its really a bigger issue, the sage_root repository is only upgraded rather late in the upgrade process. I think this needs to be fixed first. I will do some more testing when I have time.\n\nAny results?  Which version failed to upgrade?\n\nConcerning #11073: I don't see why it should affect this ticket.  I think we should be able to merge this ticket now (if it doesn't break upgrades).",
    "created_at": "2011-11-30T12:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107745",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@vbraun](#comment:3):
> I've recently played around with automatic testing upgrades and I think this might break upgrades. Its really a bigger issue, the sage_root repository is only upgraded rather late in the upgrade process. I think this needs to be fixed first. I will do some more testing when I have time.

Any results?  Which version failed to upgrade?

Concerning #11073: I don't see why it should affect this ticket.  I think we should be able to merge this ticket now (if it doesn't break upgrades).



---

archive/issue_events_145606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-30T12:43:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145606"
}
```



---

archive/issue_events_145607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-30T12:43:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145607"
}
```



---

archive/issue_comments_107746.json:
```json
{
    "body": "Changed reviewer from **Mariah Lenox** to **Jeroen Demeyer, Mariah Lenox**",
    "created_at": "2011-11-30T20:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107746",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Mariah Lenox** to **Jeroen Demeyer, Mariah Lenox**



---

archive/issue_comments_107747.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe only annoying thing here is that `spkg/install` is executed twice: if the upgrade fails the first time, it is run again a second time.  There is no way for `spkg/install` to say \"this is really a failure, no point trying again\".  That would require a change to `local/bin/sage-upgrade` (of the old Sage version!).",
    "created_at": "2011-12-01T08:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107747",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

The only annoying thing here is that `spkg/install` is executed twice: if the upgrade fails the first time, it is run again a second time.  There is no way for `spkg/install` to say "this is really a failure, no point trying again".  That would require a change to `local/bin/sage-upgrade` (of the old Sage version!).



---

archive/issue_comments_107748.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n* Upgrading from 4.4.4 failed (with the appropriate error message)\n\n* Upgrading from 4.5 and 4.6 also failed, but while installing `boehm_gc-7.2.alpha6.p0`.  This looks unlikely to be related to this ticket:\n\n```\n/bin/bash ./libtool --tag=CC   --mode=link gcc -fexceptions -g -O2  -version-info 1:3:0 -no-undefined  -o libgc.la -rpath /mnt/usb1/scratc\nh/jdemeyer/sage-4.6/local/lib allchblk.lo alloc.lo blacklst.lo checksums.lo dbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo hea\nders.lo malloc.lo mallocx.lo mark.lo mark_rts.lo misc.lo new_hblk.lo obj_map.lo os_dep.lo pcr_interface.lo ptr_chck.lo real_malloc.lo recl\naim.lo specific.lo stubborn.lo typd_mlc.lo backgraph.lo thread_local_alloc.lo pthread_start.lo pthread_support.lo pthread_stop_world.lo\natomic_ops.lo mach_dep.lo -lpthread -ldl\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/allchblk.o .libs/alloc.o .libs/blacklst.o .libs/checksums.o .libs/dbg_mlc.o .libs/dyn_load.\no .libs/finalize.o .libs/gc_dlopen.o .libs/gcj_mlc.o .libs/headers.o .libs/malloc.o .libs/mallocx.o .libs/mark.o .libs/mark_rts.o .libs/mi\nsc.o .libs/new_hblk.o .libs/obj_map.o .libs/os_dep.o .libs/pcr_interface.o .libs/ptr_chck.o .libs/real_malloc.o .libs/reclaim.o .libs/spec\nific.o .libs/stubborn.o .libs/typd_mlc.o .libs/backgraph.o .libs/thread_local_alloc.o .libs/pthread_start.o .libs/pthread_support.o .libs/\npthread_stop_world.o .libs/atomic_ops.o .libs/mach_dep.o   -lpthread -ldl  -O2   -Wl,-soname -Wl,libgc.so.1 -o .libs/libgc.so.1.0.3\nlibtool: link: (cd \".libs\" && rm \"libgc.so.1\" && ln -s \"libgc.so.1.0.3\" \"libgc.so.1\")\nrm: cannot remove `libgc.so.1': No such file or directory\nmake[2]: *** [libgc.la] Error 1\nmake[2]: Leaving directory `/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0/src'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0/src'\nError building BoehmGC.\n\nreal    0m38.188s\nuser    0m13.470s\nsys     0m5.540s\nsage: An error occurred while installing boehm_gc-7.2.alpha6.p0\nPlease email sage-devel http://groups.google.com/group/sage-devel\nexplaining the problem and send the relevant part of\nof /mnt/usb1/scratch/jdemeyer/sage-4.6/install.log.  Describe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0 and type 'make check' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n(cd '/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0' && '/mnt/usb1/scratch/jdemeyer/sage-4.6/sage' -sh)\nWhen you are done debugging, you can type \"exit\" to leave the\nsubshell.\nmake: *** [installed/boehm_gc-7.2.alpha6.p0] Error 1\n```",
    "created_at": "2011-12-01T08:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107748",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

* Upgrading from 4.4.4 failed (with the appropriate error message)

* Upgrading from 4.5 and 4.6 also failed, but while installing `boehm_gc-7.2.alpha6.p0`.  This looks unlikely to be related to this ticket:

```
/bin/bash ./libtool --tag=CC   --mode=link gcc -fexceptions -g -O2  -version-info 1:3:0 -no-undefined  -o libgc.la -rpath /mnt/usb1/scratc
h/jdemeyer/sage-4.6/local/lib allchblk.lo alloc.lo blacklst.lo checksums.lo dbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo hea
ders.lo malloc.lo mallocx.lo mark.lo mark_rts.lo misc.lo new_hblk.lo obj_map.lo os_dep.lo pcr_interface.lo ptr_chck.lo real_malloc.lo recl
aim.lo specific.lo stubborn.lo typd_mlc.lo backgraph.lo thread_local_alloc.lo pthread_start.lo pthread_support.lo pthread_stop_world.lo
atomic_ops.lo mach_dep.lo -lpthread -ldl
libtool: link: gcc -shared  -fPIC -DPIC  .libs/allchblk.o .libs/alloc.o .libs/blacklst.o .libs/checksums.o .libs/dbg_mlc.o .libs/dyn_load.
o .libs/finalize.o .libs/gc_dlopen.o .libs/gcj_mlc.o .libs/headers.o .libs/malloc.o .libs/mallocx.o .libs/mark.o .libs/mark_rts.o .libs/mi
sc.o .libs/new_hblk.o .libs/obj_map.o .libs/os_dep.o .libs/pcr_interface.o .libs/ptr_chck.o .libs/real_malloc.o .libs/reclaim.o .libs/spec
ific.o .libs/stubborn.o .libs/typd_mlc.o .libs/backgraph.o .libs/thread_local_alloc.o .libs/pthread_start.o .libs/pthread_support.o .libs/
pthread_stop_world.o .libs/atomic_ops.o .libs/mach_dep.o   -lpthread -ldl  -O2   -Wl,-soname -Wl,libgc.so.1 -o .libs/libgc.so.1.0.3
libtool: link: (cd ".libs" && rm "libgc.so.1" && ln -s "libgc.so.1.0.3" "libgc.so.1")
rm: cannot remove `libgc.so.1': No such file or directory
make[2]: *** [libgc.la] Error 1
make[2]: Leaving directory `/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0/src'
Error building BoehmGC.

real    0m38.188s
user    0m13.470s
sys     0m5.540s
sage: An error occurred while installing boehm_gc-7.2.alpha6.p0
Please email sage-devel http://groups.google.com/group/sage-devel
explaining the problem and send the relevant part of
of /mnt/usb1/scratch/jdemeyer/sage-4.6/install.log.  Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0 and type 'make check' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
(cd '/mnt/usb1/scratch/jdemeyer/sage-4.6/spkg/build/boehm_gc-7.2.alpha6.p0' && '/mnt/usb1/scratch/jdemeyer/sage-4.6/sage' -sh)
When you are done debugging, you can type "exit" to leave the
subshell.
make: *** [installed/boehm_gc-7.2.alpha6.p0] Error 1
```



---

archive/issue_events_145608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-02T16:47:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145608"
}
```



---

archive/issue_events_145609.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-02T16:47:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145609"
}
```



---

archive/issue_events_145610.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T09:19:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145610"
}
```



---

archive/issue_events_145611.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T09:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145611"
}
```



---

archive/issue_comments_107749.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSince this ticket fits well with #11073, I will merge it in #11073.",
    "created_at": "2011-12-06T09:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107749",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Since this ticket fits well with #11073, I will merge it in #11073.



---

archive/issue_events_145612.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T09:19:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145612"
}
```



---

archive/issue_events_145613.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T09:19:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145613"
}
```



---

archive/issue_events_145614.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T09:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145614"
}
```



---

archive/issue_comments_107750.json:
```json
{
    "body": "Changed author from **Volker Braun** to none",
    "created_at": "2011-12-06T09:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107750",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Volker Braun** to none



---

archive/issue_comments_107751.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer, Mariah Lenox** to **Jeroen Demeyer**",
    "created_at": "2011-12-06T09:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107751",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Jeroen Demeyer, Mariah Lenox** to **Jeroen Demeyer**



---

archive/issue_comments_107752.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,4 @@\n \n ---\n \n-Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) and [attachment: trac_10970-error-msg.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).\n-\n----\n-\n-**If this ticket gets merged, the change should be prominently announced in the release notes.**\n+Patch moved to #11073.\n``````\n",
    "created_at": "2011-12-06T09:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10970#issuecomment-107752",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,4 @@
 
 ---
 
-Apply [attachment: trac_10970_do_not_generate_pipestatus.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970_do_not_generate_pipestatus.patch.gz) and [attachment: trac_10970-error-msg.patch](https://github.com/sagemath/sage/files/ticket10970/trac_10970-error-msg.patch.gz) to the Sage **root repository** (in `$SAGE_ROOT`).
-
----
-
-**If this ticket gets merged, the change should be prominently announced in the release notes.**
+Patch moved to #11073.
``````




---

archive/issue_events_145615.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T08:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145615"
}
```



---

archive/issue_events_145616.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T08:59:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145616"
}
```



---

archive/issue_events_145617.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T08:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10970",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10970#event-145617"
}
```
