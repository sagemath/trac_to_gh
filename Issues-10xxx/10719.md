# Issue 10719: Symmetrica does not build on OpenSUSE 11.2 x86_64 and Ubuntu 11.10

archive/issues_010656.json:
```json
{
    "assignees": [],
    "body": "The updated spkg moves the `-lm` compiler flag past `-lsymmetrica` when building the test program, adds an `spkg-check` file, honors `LDFLAGS`, and removes the obsolete Debian `dist/` directory.\n\n---\n\n**New spkg:** http://sage.math.washington.edu/home/leif/Sage/spkgs/symmetrica-2.0.p7.spkg\n\n**md5sum:** `03a4d2ec75eb3595ebba568419872e64`\n\n\nAssignee: **@sagetrac-GeorgSWeber**\n\nCC:  @mwhansen\n\nKeywords: **library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34**\n\nAuthor: **Volker Braun, Leif Leonhardy**\n\nReviewer: **Leif Leonhardy, Volker Braun**\n\nMerged: **sage-4.7.2.alpha4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10719_\n\n",
    "closed_at": "2011-10-07T19:11:52Z",
    "created_at": "2011-01-31T15:24:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Symmetrica does not build on OpenSUSE 11.2 x86_64 and Ubuntu 11.10",
    "type": "issue",
    "updated_at": "2011-10-07T19:11:52Z",
    "url": "https://github.com/sagemath/sage/issues/10719",
    "user": "https://github.com/vbraun"
}
```
The updated spkg moves the `-lm` compiler flag past `-lsymmetrica` when building the test program, adds an `spkg-check` file, honors `LDFLAGS`, and removes the obsolete Debian `dist/` directory.

---

**New spkg:** http://sage.math.washington.edu/home/leif/Sage/spkgs/symmetrica-2.0.p7.spkg

**md5sum:** `03a4d2ec75eb3595ebba568419872e64`


Assignee: **@sagetrac-GeorgSWeber**

CC:  @mwhansen

Keywords: **library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34**

Author: **Volker Braun, Leif Leonhardy**

Reviewer: **Leif Leonhardy, Volker Braun**

Merged: **sage-4.7.2.alpha4**

_Issue created by migration from https://trac.sagemath.org/ticket/10719_





---

archive/issue_events_129055.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-31T15:24:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129055"
}
```



---

archive/issue_events_129056.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-31T15:24:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129056"
}
```



---

archive/issue_events_129057.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-31T15:24:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129057"
}
```



---

archive/issue_events_129058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-31T15:24:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129058"
}
```



---

archive/issue_events_129059.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-31T15:27:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129059"
}
```



---

archive/issue_comments_104953.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nWorks on Fedora 14 and t2.math. Is rather simple change...\n\nSee also: https://groups.google.com/d/topic/sage-devel/2jyWCWUn_30/discussion",
    "created_at": "2011-01-31T15:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104953",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">Comment 1</div>

Works on Fedora 14 and t2.math. Is rather simple change...

See also: https://groups.google.com/d/topic/sage-devel/2jyWCWUn_30/discussion



---

archive/issue_comments_104954.json:
```json
{
    "body": "for review purposes only",
    "created_at": "2011-02-01T01:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104954",
    "user": "https://github.com/vbraun"
}
```

for review purposes only



---

archive/issue_comments_104955.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAttachment: **[makefile.gz](https://github.com/sagemath/sage/files/ticket10719/makefile.gz)**\n\nOk I noticed that `patches/*patch` wasn't actually applied?!?. Fixed now. Also, I rewrote the makefile and we are actually only building the static library now. Updated spkg is at the same location as above.",
    "created_at": "2011-02-01T01:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104955",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">Comment 2</div>

Attachment: **[makefile.gz](https://github.com/sagemath/sage/files/ticket10719/makefile.gz)**

Ok I noticed that `patches/*patch` wasn't actually applied?!?. Fixed now. Also, I rewrote the makefile and we are actually only building the static library now. Updated spkg is at the same location as above.



---

archive/issue_comments_104956.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThe above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.",
    "created_at": "2011-02-11T00:28:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104956",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:3" align="right">Comment 3</div>

The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.



---

archive/issue_comments_104957.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@dandrake](#comment%3A3):\n> The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.\n\nsage-devel thread: https://groups.google.com/d/topic/sage-devel/chWfpkqj6xU/discussion",
    "created_at": "2011-02-11T00:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104957",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@dandrake](#comment%3A3):
> The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.

sage-devel thread: https://groups.google.com/d/topic/sage-devel/chWfpkqj6xU/discussion



---

archive/issue_events_129060.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-03-01T01:38:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129060"
}
```



---

archive/issue_events_129061.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2011-03-01T01:38:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129061"
}
```



---

archive/issue_comments_104958.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nHere's one tiny problem: most of the files in src/ all have 400 permissions, and spkg-install copies two .h files over at the end of the build. If you rebuild symmetrica, that copying will fail because it can't overwrite the \"400\" files. I would run a `chmod 644 *` in the src/ directory of the spkg.",
    "created_at": "2011-03-01T01:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104958",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:5" align="right">Comment 5</div>

Here's one tiny problem: most of the files in src/ all have 400 permissions, and spkg-install copies two .h files over at the end of the build. If you rebuild symmetrica, that copying will fail because it can't overwrite the "400" files. I would run a `chmod 644 *` in the src/ directory of the spkg.



---

archive/issue_events_129062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-02T10:48:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129062"
}
```



---

archive/issue_events_129063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-02T10:48:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129063"
}
```



---

archive/issue_comments_104959.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI've upgraded the spgk. I set the permissions in src/ to 644 and added an extra chmod to the spkg-install so we don't trip over this issue again if somebody unpacks the source tarball.",
    "created_at": "2011-03-02T10:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104959",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">Comment 6</div>

I've upgraded the spgk. I set the permissions in src/ to 644 and added an extra chmod to the spkg-install so we don't trip over this issue again if somebody unpacks the source tarball.



---

archive/issue_comments_104960.json:
```json
{
    "body": "Attachment: **[spkg-install.gz](https://github.com/sagemath/sage/files/ticket10719/spkg-install.gz)**\n\nfor review purposes",
    "created_at": "2011-03-02T10:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104960",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[spkg-install.gz](https://github.com/sagemath/sage/files/ticket10719/spkg-install.gz)**

for review purposes



---

archive/issue_comments_104961.json:
```json
{
    "body": "Changed keywords from **** to **library order linker semantics**",
    "created_at": "2011-08-27T12:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104961",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **** to **library order linker semantics**



---

archive/issue_comments_104962.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nThis patch / new spkg will also be necessary for newer Debians like e.g. Ubuntu 11.10, which feature (the good old) stricter linker semantics; cf. [comment:ticket:11674:38] ff.\n\nOur current Singular (3-1-1-4) spkg also has issues with wrong library order, namely `-ldl` and `-lkernel`. (I haven't yet checked whether this is already fixed in a newer upstream release; hopefully Sage's Singular will be upgraded during the [Sage/Singular Days (SD34)](http://wiki.sagemath.org/days34) at the end of September, see also [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/cca0edad4b6a41aa/1f872997a159304e); cf. #10903.)",
    "created_at": "2011-08-27T12:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104962",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">Comment 7</div>

This patch / new spkg will also be necessary for newer Debians like e.g. Ubuntu 11.10, which feature (the good old) stricter linker semantics; cf. [comment:ticket:11674:38] ff.

Our current Singular (3-1-1-4) spkg also has issues with wrong library order, namely `-ldl` and `-lkernel`. (I haven't yet checked whether this is already fixed in a newer upstream release; hopefully Sage's Singular will be upgraded during the [Sage/Singular Days (SD34)](http://wiki.sagemath.org/days34) at the end of September, see also [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/cca0edad4b6a41aa/1f872997a159304e); cf. #10903.)



---

archive/issue_comments_104963.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nA couple of more or less minor issues:\n\n* Michael Abshoff should be removed from the spkg maintainer list.\n\n* [http://www.symmetrica.de/](http://www.symmetrica.de/) is perhaps a more stable upstream link (currently redirected to [http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/](http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/)).\n\n* `s/sort tp/sort to/` in `SPKG.txt`\n\n* `$CFLAG64` should be quoted in `[ -z $CFLAG64 ]`. (And exporting `CFLAGS` there is really redundant.)\n\n* Not all user-specified `CFLAGS` should be overridden by Sage's (e.g. `-O2` should precede `$CFLAGS` in the assignment).\n\n* The exit codes of `patch` (and `cp`) aren't checked. (`makefile` could also be patched rather than copied over. `SPKG.txt` mentions `patches/makefile.patch`, though  there's only `patches/makefile`.)\n\n* (GNU) `patch` should be added as a dependency.\n\n* `$MAKE -f makefile` is redundant.\n\n* `$SAGE_LOCAL` should be quoted.\n\n* `cp` for installation (library, headers) should use `-p`, otherwise the current umask could break permissions.\n\n* The new `makefile` removes the `test` target, which builds an executable functioning as a minimalistic test suite. (The removal also removes `-lm` completely, such that the changelog entry regarding that no longer applies.)\n\n\nThe \"usual\" superfluous trailing semicolon inside the sanity check is *of course*<sup>TM</sup> also there; `[ -z \"$SAGE_LOCAL\" ]` is also better than comparing to an empty string.",
    "created_at": "2011-08-27T13:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104963",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">Comment 8</div>

A couple of more or less minor issues:

* Michael Abshoff should be removed from the spkg maintainer list.

* [http://www.symmetrica.de/](http://www.symmetrica.de/) is perhaps a more stable upstream link (currently redirected to [http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/](http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/)).

* `s/sort tp/sort to/` in `SPKG.txt`

* `$CFLAG64` should be quoted in `[ -z $CFLAG64 ]`. (And exporting `CFLAGS` there is really redundant.)

* Not all user-specified `CFLAGS` should be overridden by Sage's (e.g. `-O2` should precede `$CFLAGS` in the assignment).

* The exit codes of `patch` (and `cp`) aren't checked. (`makefile` could also be patched rather than copied over. `SPKG.txt` mentions `patches/makefile.patch`, though  there's only `patches/makefile`.)

* (GNU) `patch` should be added as a dependency.

* `$MAKE -f makefile` is redundant.

* `$SAGE_LOCAL` should be quoted.

* `cp` for installation (library, headers) should use `-p`, otherwise the current umask could break permissions.

* The new `makefile` removes the `test` target, which builds an executable functioning as a minimalistic test suite. (The removal also removes `-lm` completely, such that the changelog entry regarding that no longer applies.)


The "usual" superfluous trailing semicolon inside the sanity check is *of course*<sup>TM</sup> also there; `[ -z "$SAGE_LOCAL" ]` is also better than comparing to an empty string.



---

archive/issue_events_129064.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-27T13:41:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129064"
}
```



---

archive/issue_events_129065.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-27T13:41:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129065"
}
```



---

archive/issue_comments_104964.json:
```json
{
    "body": "Reviewer: **Leif Leonhardy**",
    "created_at": "2011-08-27T13:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104964",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Leif Leonhardy**



---

archive/issue_comments_104965.json:
```json
{
    "body": "Changed keywords from **library order linker semantics** to **library order linker semantics Ubuntu 11.10 Oneiric Ocelot**",
    "created_at": "2011-09-11T05:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104965",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **library order linker semantics** to **library order linker semantics Ubuntu 11.10 Oneiric Ocelot**



---

archive/issue_events_129066.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-11T05:44:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129066"
}
```



---

archive/issue_events_129067.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-11T05:44:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129067"
}
```



---

archive/issue_comments_104966.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nMaking this a **blocker**, since IMHO this should be fixed in the **final Sage 4.7.2**, likely to be released [right] before the final Ubuntu 11.10 (Oneiric Ocelot), in contrast to a *final* Sage 4.7.3 ...\n\n(Hereby also pinging myself...)\n\nP.S.: The description isn't up-to-date, as the current spkg doesn't use `-lm` at all, since it doesn't build the test program (which it IMHO should, as a minimalistic test suite, unless it provides and runs some other test(s), at least if `SAGE_CHECK=yes`).",
    "created_at": "2011-09-24T13:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104966",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:11" align="right">Comment 11</div>

Making this a **blocker**, since IMHO this should be fixed in the **final Sage 4.7.2**, likely to be released [right] before the final Ubuntu 11.10 (Oneiric Ocelot), in contrast to a *final* Sage 4.7.3 ...

(Hereby also pinging myself...)

P.S.: The description isn't up-to-date, as the current spkg doesn't use `-lm` at all, since it doesn't build the test program (which it IMHO should, as a minimalistic test suite, unless it provides and runs some other test(s), at least if `SAGE_CHECK=yes`).



---

archive/issue_events_129068.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-24T13:36:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "title_is": "Symmetrica does not build on OpenSUSE 11.2 x86_64 and Ubuntu 11.10",
    "title_was": "Symmetrica does not build on OpenSUSE 11.2 x86_64",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129068"
}
```



---

archive/issue_events_129069.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-24T13:36:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129069"
}
```



---

archive/issue_events_129070.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-24T13:36:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129070"
}
```



---

archive/issue_comments_104967.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI implemented leif's nitpicks. Also, now has a spkg-check. Updated spkg is at the same url as before.",
    "created_at": "2011-09-27T22:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104967",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">Comment 12</div>

I implemented leif's nitpicks. Also, now has a spkg-check. Updated spkg is at the same url as before.



---

archive/issue_events_129071.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-09-27T22:57:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129071"
}
```



---

archive/issue_events_129072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-09-27T22:57:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129072"
}
```



---

archive/issue_comments_104968.json:
```json
{
    "body": "Changed keywords from **library order linker semantics Ubuntu 11.10 Oneiric Ocelot** to **library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34**",
    "created_at": "2011-09-29T15:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104968",
    "user": "https://github.com/vbraun"
}
```

Changed keywords from **library order linker semantics Ubuntu 11.10 Oneiric Ocelot** to **library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34**



---

archive/issue_comments_104969.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nInstead of adding `~*` to `.hgignore`, you should delete `spkg-check~`. ;-)\n\nAnd make `spkg-check` executable.",
    "created_at": "2011-10-04T08:21:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104969",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">Comment 14</div>

Instead of adding `~*` to `.hgignore`, you should delete `spkg-check~`. ;-)

And make `spkg-check` executable.



---

archive/issue_comments_104970.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nWhats the obsession with deleting backup files, geez :-P\n\nThe new spkg is at the same URL.",
    "created_at": "2011-10-04T09:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104970",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">Comment 15</div>

Whats the obsession with deleting backup files, geez :-P

The new spkg is at the same URL.



---

archive/issue_events_129073.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-04T09:13:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129073"
}
```



---

archive/issue_events_129074.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-04T09:13:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129074"
}
```



---

archive/issue_comments_104971.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@vbraun](#comment%3A15):\n> The new spkg is at the same URL.\n\nSorry, you were too quick (or I was too slow...):\n\n\nThe commit message looks like a copy-paste accident, but the spkg was made on 28st[sic] September anyway. :)\n\n\n\n\n`spkg-check` should also use `$MAKE`.\n\nIf you also **build** `test` in `spkg-check`, you have to setup `CFLAGS` etc. there in the same way as in `spkg-install`.\n\n`s/exitting/exiting/`.\n\nThe error message should start with \"`Error`\" (or \"`Failed`\").\n\n(The whole test could be simplified by\n\n```sh\nif ! diff spkg-check.actual spkg-check.expected; then\n    echo >&2 \"Error: The symmetrica test suite failed (see diff output above).\"\n    exit 1\n# Optionally:\n#else\n#    echo \"All tests passed.\" # or whatever\nfi\n# EOF\n```\n\n\n\n\nDo we need `LDFLAGS` when linking `test`?\n\nI.e., for example `-m64`, which we *could* take from `CFLAG64`, but using `LDFLAG64` (defaulting to `-m64`) would be cleaner.\n\n\n\n\nI don't like the `set +/-o errexit`, as it doesn't necessarily give a meaningful (and easy to search for) error message. Therefore we removed all instances of `set +/-e` previously.\n\nInstead, you could use the usual loop for applying the patches, exiting with an appropriate error message upon the first patch which doesn't apply:\n\n```sh\nfor patch in ../patches; do\n    patch < \"$patch\"\n    if [ $? -ne 0 ]; then\n        echo >&2 \"Error: Patch \\\"$patch\\\" failed to apply. Exiting...\n        exit 1\n    fi\ndone\n# Copy over makefile and check $?\n# or create also a *patch* for 'makefile' to be applied\n# in the loop above, too.\n```\n\nSimilar for the \"installation\":\n\n`spkg-install` will only exit with a non-zero status if **the last** copy command failed. You could either check each exit code, giving an appropriate error message for each individual case, or use\n\n```\nfoo &&\nbar &&\nbaz\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error: Failed to install Symmetrica.\"\n    exit 1\nfi\n```",
    "created_at": "2011-10-04T09:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104971",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@vbraun](#comment%3A15):
> The new spkg is at the same URL.

Sorry, you were too quick (or I was too slow...):


The commit message looks like a copy-paste accident, but the spkg was made on 28st[sic] September anyway. :)




`spkg-check` should also use `$MAKE`.

If you also **build** `test` in `spkg-check`, you have to setup `CFLAGS` etc. there in the same way as in `spkg-install`.

`s/exitting/exiting/`.

The error message should start with "`Error`" (or "`Failed`").

(The whole test could be simplified by

```sh
if ! diff spkg-check.actual spkg-check.expected; then
    echo >&2 "Error: The symmetrica test suite failed (see diff output above)."
    exit 1
# Optionally:
#else
#    echo "All tests passed." # or whatever
fi
# EOF
```




Do we need `LDFLAGS` when linking `test`?

I.e., for example `-m64`, which we *could* take from `CFLAG64`, but using `LDFLAG64` (defaulting to `-m64`) would be cleaner.




I don't like the `set +/-o errexit`, as it doesn't necessarily give a meaningful (and easy to search for) error message. Therefore we removed all instances of `set +/-e` previously.

Instead, you could use the usual loop for applying the patches, exiting with an appropriate error message upon the first patch which doesn't apply:

```sh
for patch in ../patches; do
    patch < "$patch"
    if [ $? -ne 0 ]; then
        echo >&2 "Error: Patch \"$patch\" failed to apply. Exiting...
        exit 1
    fi
done
# Copy over makefile and check $?
# or create also a *patch* for 'makefile' to be applied
# in the loop above, too.
```

Similar for the "installation":

`spkg-install` will only exit with a non-zero status if **the last** copy command failed. You could either check each exit code, giving an appropriate error message for each individual case, or use

```
foo &&
bar &&
baz
if [ $? -ne 0 ]; then
    echo >&2 "Error: Failed to install Symmetrica."
    exit 1
fi
```



---

archive/issue_comments_104972.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOh, should of course read `for patch in ../patches/*.patch; do ...`.",
    "created_at": "2011-10-04T09:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104972",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">Comment 17</div>

Oh, should of course read `for patch in ../patches/*.patch; do ...`.



---

archive/issue_comments_104973.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nWell you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.",
    "created_at": "2011-10-04T09:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104973",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">Comment 18</div>

Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.



---

archive/issue_comments_104974.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@vbraun](#comment%3A18):\n> Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.\n\nOk, later today.",
    "created_at": "2011-10-04T10:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104974",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@vbraun](#comment%3A18):
> Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.

Ok, later today.



---

archive/issue_comments_104975.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nNew spkg is up.\n\nIf Volker is ok with my additional changes, we have a positive review.",
    "created_at": "2011-10-06T15:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104975",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">Comment 20</div>

New spkg is up.

If Volker is ok with my additional changes, we have a positive review.



---

archive/issue_comments_104976.json:
```json
{
    "body": "Changed author from **Volker Braun** to **Volker Braun, Leif Leonhardy**",
    "created_at": "2011-10-06T15:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104976",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Volker Braun** to **Volker Braun, Leif Leonhardy**



---

archive/issue_events_129075.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-06T15:00:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129075"
}
```



---

archive/issue_events_129076.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-06T15:00:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129076"
}
```



---

archive/issue_comments_104977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-The updated spkg moves the `-lm` compiler flag to the end of the object files and removes the `dist/` directory.\n+The updated spkg moves the `-lm` compiler flag past `-lsymmetrica` when building the test program, adds an `spkg-check` file, honors `LDFLAGS`, and removes the obsolete Debian `dist/` directory.\n \n-http://www.stp.dias.ie/~vbraun/Sage/spkg/symmetrica-2.0.p6.spkg\n+---\n \n+**New spkg:** http://sage.math.washington.edu/home/leif/Sage/spkgs/symmetrica-2.0.p7.spkg\n+\n+**md5sum:** `03a4d2ec75eb3595ebba568419872e64`\n+\n``````\n",
    "created_at": "2011-10-06T15:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104977",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-The updated spkg moves the `-lm` compiler flag to the end of the object files and removes the `dist/` directory.
+The updated spkg moves the `-lm` compiler flag past `-lsymmetrica` when building the test program, adds an `spkg-check` file, honors `LDFLAGS`, and removes the obsolete Debian `dist/` directory.
 
-http://www.stp.dias.ie/~vbraun/Sage/spkg/symmetrica-2.0.p6.spkg
+---
 
+**New spkg:** http://sage.math.washington.edu/home/leif/Sage/spkgs/symmetrica-2.0.p7.spkg
+
+**md5sum:** `03a4d2ec75eb3595ebba568419872e64`
+
``````




---

archive/issue_comments_104978.json:
```json
{
    "body": "Attachment: **[symmetrica-2.0.p6-p7.diff.gz](https://github.com/sagemath/sage/files/ticket10719/symmetrica-2.0.p6-p7.diff.gz)**\n\nDiff between Volker's p6 and my p7. For reference / review only.",
    "created_at": "2011-10-06T15:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104978",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[symmetrica-2.0.p6-p7.diff.gz](https://github.com/sagemath/sage/files/ticket10719/symmetrica-2.0.p6-p7.diff.gz)**

Diff between Volker's p6 and my p7. For reference / review only.



---

archive/issue_comments_104979.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI've attached a diff with my changes (for review).",
    "created_at": "2011-10-06T15:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104979",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">Comment 21</div>

I've attached a diff with my changes (for review).



---

archive/issue_comments_104980.json:
```json
{
    "body": "Cumulative diff between the previous p5 in Sage and the p7. For reference / review only.",
    "created_at": "2011-10-06T15:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104980",
    "user": "https://github.com/nexttime"
}
```

Cumulative diff between the previous p5 in Sage and the p7. For reference / review only.



---

archive/issue_comments_104981.json:
```json
{
    "body": "Changed reviewer from **Leif Leonhardy** to **Leif Leonhardy, Volker Braun**",
    "created_at": "2011-10-06T17:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104981",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Leif Leonhardy** to **Leif Leonhardy, Volker Braun**



---

archive/issue_comments_104982.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nAttachment: **[symmetrica-2.0.p5-p7.diff.gz](https://github.com/sagemath/sage/files/ticket10719/symmetrica-2.0.p5-p7.diff.gz)**\n\nLooks good. Even builds on Solaris/Sparc. Positive review.",
    "created_at": "2011-10-06T17:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104982",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">Comment 22</div>

Attachment: **[symmetrica-2.0.p5-p7.diff.gz](https://github.com/sagemath/sage/files/ticket10719/symmetrica-2.0.p5-p7.diff.gz)**

Looks good. Even builds on Solaris/Sparc. Positive review.



---

archive/issue_events_129077.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-10-06T17:46:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129077"
}
```



---

archive/issue_events_129078.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-10-06T17:46:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129078"
}
```



---

archive/issue_events_129079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T19:11:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129079"
}
```



---

archive/issue_events_129080.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T19:11:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10719#event-129080"
}
```



---

archive/issue_comments_104983.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha4**",
    "created_at": "2011-10-07T19:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10719#issuecomment-104983",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha4**
