# Issue 10305: Add rings for the center of the symmetric group algebras

archive/issues_010304.json:
```json
{
    "body": "Here is some preliminary code to implement the center of the symmetric group algebras, various bases for this and related rings, and coercions between these and to/from the ring of symmetric functions.\n\nWork issues:\n* Re-architecting in progress\n* Fix the performance of conversion from SymmetricGroupAlgebraCenter to SymmetricGroupAlgebra\n* Add the new files (and possibly some old ones?) to the reference manual\n* Possibly add the option of saving some of the conversion tables to disk, as they can be large and expensive to compute.\n\nNote that this depends on #7980 and #10304.\n\n\n**Assignee:** @mguaypaq\n\n**CC:**  vferay\n\n**Keywords:** combinatorics, rings, symmetric functions\n\n**Branch:** [public/ticket/10305-farahat-higman](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/10305-farahat-higman)\n\n**Commit:** [fb331475d3c1865b55f3cac024039001de9f28ad](https://github.com/sagemath/sagetrac-mirror/commit/fb331475d3c1865b55f3cac024039001de9f28ad)\n\n**Reviewer:** Travis Scrimshaw, Mathieu Guay-Paquet\n\n**Author:** Mathieu Guay-Paquet, Travis Scrimshaw\n\n**Status:** needs_work\n\nIssue created by migration from https://trac.sagemath.org/ticket/10305\n\n",
    "created_at": "2010-11-21T06:35:11Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Add rings for the center of the symmetric group algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10305",
    "user": "https://github.com/mguaypaq"
}
```
Here is some preliminary code to implement the center of the symmetric group algebras, various bases for this and related rings, and coercions between these and to/from the ring of symmetric functions.

Work issues:
* Re-architecting in progress
* Fix the performance of conversion from SymmetricGroupAlgebraCenter to SymmetricGroupAlgebra
* Add the new files (and possibly some old ones?) to the reference manual
* Possibly add the option of saving some of the conversion tables to disk, as they can be large and expensive to compute.

Note that this depends on #7980 and #10304.


**Assignee:** @mguaypaq

**CC:**  vferay

**Keywords:** combinatorics, rings, symmetric functions

**Branch:** [public/ticket/10305-farahat-higman](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/10305-farahat-higman)

**Commit:** [fb331475d3c1865b55f3cac024039001de9f28ad](https://github.com/sagemath/sagetrac-mirror/commit/fb331475d3c1865b55f3cac024039001de9f28ad)

**Reviewer:** Travis Scrimshaw, Mathieu Guay-Paquet

**Author:** Mathieu Guay-Paquet, Travis Scrimshaw

**Status:** needs_work

Issue created by migration from https://trac.sagemath.org/ticket/10305





---

archive/issue_comments_133177.json:
```json
{
    "body": "Attachment [trac_10305_farahat_higman-mgp.patch](tarball://root/attachments/some-uuid/ticket10305/trac_10305_farahat_higman-mgp.patch) by @mguaypaq created at 2010-11-21 06:50:06\n\npreliminary version",
    "created_at": "2010-11-21T06:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133177",
    "user": "https://github.com/mguaypaq"
}
```

Attachment [trac_10305_farahat_higman-mgp.patch](tarball://root/attachments/some-uuid/ticket10305/trac_10305_farahat_higman-mgp.patch) by @mguaypaq created at 2010-11-21 06:50:06

preliminary version



---

archive/issue_comments_133178.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2010-11-21T06:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133178",
    "user": "https://github.com/mguaypaq"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_133179.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis code is very old and we now know much better ways of doing this. If you want to help, please contact me and I'll get you up to speed.",
    "created_at": "2012-05-07T18:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133179",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:2'></a>
This code is very old and we now know much better ways of doing this. If you want to help, please contact me and I'll get you up to speed.



---

archive/issue_comments_133180.json:
```json
{
    "body": "<a id='comment:3'></a>\nJust wondering what the status of this patch is?\n\nThanks,\n\nTravis",
    "created_at": "2013-02-19T20:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133180",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Just wondering what the status of this patch is?

Thanks,

Travis



---

archive/issue_comments_133181.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt's been a while, but my recollection is that the code works most of the time, but several doctests are missing before it's acceptable. Also the performance is not great.\n\nTo fix the problems with the code (mostly some coercions and performance issues), I think a better architecture would be needed. In particular, not using `CombinatorialFreeModule` would probably be better. We also have a better understanding of the mathematics behind the various changes of basis between symmetric functions and the Farahat-Higman algebra now, and this could be used for the code. I tried doing this a few times, but never got to the end.\n\nDo you have a need for this functionality? If so, I'd be happy to collaborate or let you take over. Otherwise, I think this ticket can be safely ignored and/or closed for now.\n\nCheers,\n\nMathieu",
    "created_at": "2013-02-20T19:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133181",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:4'></a>
It's been a while, but my recollection is that the code works most of the time, but several doctests are missing before it's acceptable. Also the performance is not great.

To fix the problems with the code (mostly some coercions and performance issues), I think a better architecture would be needed. In particular, not using `CombinatorialFreeModule` would probably be better. We also have a better understanding of the mathematics behind the various changes of basis between symmetric functions and the Farahat-Higman algebra now, and this could be used for the code. I tried doing this a few times, but never got to the end.

Do you have a need for this functionality? If so, I'd be happy to collaborate or let you take over. Otherwise, I think this ticket can be safely ignored and/or closed for now.

Cheers,

Mathieu



---

archive/issue_comments_133182.json:
```json
{
    "body": "<a id='comment:5'></a>\nHey Mathieu,\n\nReplying to [mguaypaq](#comment%3A4):\n> It's been a while, but my recollection is that the code works most of the time, but several doctests are missing before it's acceptable. Also the performance is not great.\n\n\nI'd be happy to write a review patch and add in the documentation.\n\n> To fix the problems with the code (mostly some coercions and performance issues), I think a better architecture would be needed. In particular, not using `CombinatorialFreeModule` would probably be better. We also have a better understanding of the mathematics behind the various changes of basis between symmetric functions and the Farahat-Higman algebra now, and this could be used for the code. I tried doing this a few times, but never got to the end.\n\n\nThere has also be a very substantial rewrite of the symmetric functions and we would likely be able to lift some code (or at least the implementation concepts) from there.\n\n> Do you have a need for this functionality? If so, I'd be happy to collaborate or let you take over. Otherwise, I think this ticket can be safely ignored and/or closed for now.\n\n\nIt would be nice for a colleague of mine to have a working version of this in sage. Right now he's looking into Schur rings in Z(CC[S_n]) as they come up in supercharacter theory and this patch would be useful. I'm happy to help where I can to get this working.\n\nBest,\n\nTravis",
    "created_at": "2013-02-20T20:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133182",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Hey Mathieu,

Replying to [mguaypaq](#comment%3A4):
> It's been a while, but my recollection is that the code works most of the time, but several doctests are missing before it's acceptable. Also the performance is not great.


I'd be happy to write a review patch and add in the documentation.

> To fix the problems with the code (mostly some coercions and performance issues), I think a better architecture would be needed. In particular, not using `CombinatorialFreeModule` would probably be better. We also have a better understanding of the mathematics behind the various changes of basis between symmetric functions and the Farahat-Higman algebra now, and this could be used for the code. I tried doing this a few times, but never got to the end.


There has also be a very substantial rewrite of the symmetric functions and we would likely be able to lift some code (or at least the implementation concepts) from there.

> Do you have a need for this functionality? If so, I'd be happy to collaborate or let you take over. Otherwise, I think this ticket can be safely ignored and/or closed for now.


It would be nice for a colleague of mine to have a working version of this in sage. Right now he's looking into Schur rings in Z(CC[S_n]) as they come up in supercharacter theory and this patch would be useful. I'm happy to help where I can to get this working.

Best,

Travis



---

archive/issue_comments_133183.json:
```json
{
    "body": "<a id='comment:6'></a>\nHey Mathieu,\n\nJust wondering if you've done any work on this patch?\n\nBest,\n\nTravis",
    "created_at": "2013-07-16T16:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133183",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Hey Mathieu,

Just wondering if you've done any work on this patch?

Best,

Travis



---

archive/issue_comments_133184.json:
```json
{
    "body": "<a id='comment:7'></a>\nHey Travis,\n\nNot yet, sorry. Feel free to take over the patch, or to poke me mercilessly until I get it done, since I'm now back home and getting back to work. Would it be helpful to set up a chat over IRC or something with this colleague of yours?\n\nCheers,\nMathieu",
    "created_at": "2013-07-16T16:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133184",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:7'></a>
Hey Travis,

Not yet, sorry. Feel free to take over the patch, or to poke me mercilessly until I get it done, since I'm now back home and getting back to work. Would it be helpful to set up a chat over IRC or something with this colleague of yours?

Cheers,
Mathieu



---

archive/issue_comments_133185.json:
```json
{
    "body": "<a id='comment:8'></a>\nI think the easiest thing would be for me to just take over the patch.\n\nBest,\n\nTravis",
    "created_at": "2013-07-17T10:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133185",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I think the easiest thing would be for me to just take over the patch.

Best,

Travis



---

archive/issue_comments_133186.json:
```json
{
    "body": "<a id='comment:9'></a>\nAlright, in that case you know where to find a reviewer :)",
    "created_at": "2013-07-17T11:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133186",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:9'></a>
Alright, in that case you know where to find a reviewer :)



---

archive/issue_events_031890.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31890"
}
```



---

archive/issue_comments_133187.json:
```json
{
    "body": "**Changing author** from \"Mathieu Guay-Paquet\" to \"Mathieu Guay-Paquet, Travis Scrimshaw\".",
    "created_at": "2013-09-06T17:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133187",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "Mathieu Guay-Paquet" to "Mathieu Guay-Paquet, Travis Scrimshaw".



---

archive/issue_comments_133188.json:
```json
{
    "body": "<a id='comment:11'></a>\nAttachment [trac_10305-farahat_higman-ts.patch](tarball://root/attachments/some-uuid/ticket10305/trac_10305-farahat_higman-ts.patch) by @tscrim created at 2013-09-06 17:26:12\n\nHey Matthieu,\n\nHere's everything that I could do with the patch. I've reworked it to use the same framework as the symmetric functions, allowed the SGA center for a fixed n, and added in coercions to the SGA when appropriate. However there's three more things I'll need from you:\n\n- Could you put in some references for the Farahat-Higman/partial class algebras?\n- From what I could find, it seems like the Farahat-Higman algebra is actually just the parts for a fixed `n`, not allowing `n` to vary. Thus we would need to take the terms just corresponding to partitions `n` in the larger product. Is this correct?\n- On line 426 of `farahat_higman.py`, you had originally left that sentence as incomplete and I couldn't figure out how to finish it. Could you finish writing that paragraph?\n\n(Due to the amount of changes by just reorganizing code, I felt it was better to post a new version of the patch than a review patch.)\n\nFor reviewing this patch, we'll do a cross-review where I review your changes and you review mine. Sound good?\n\nThanks,\n\nTravis\n\nFor patchbot:\n\nApply: trac_10305-farahat_higman-ts.patch\u200b",
    "created_at": "2013-09-06T17:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133188",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Attachment [trac_10305-farahat_higman-ts.patch](tarball://root/attachments/some-uuid/ticket10305/trac_10305-farahat_higman-ts.patch) by @tscrim created at 2013-09-06 17:26:12

Hey Matthieu,

Here's everything that I could do with the patch. I've reworked it to use the same framework as the symmetric functions, allowed the SGA center for a fixed n, and added in coercions to the SGA when appropriate. However there's three more things I'll need from you:

- Could you put in some references for the Farahat-Higman/partial class algebras?
- From what I could find, it seems like the Farahat-Higman algebra is actually just the parts for a fixed `n`, not allowing `n` to vary. Thus we would need to take the terms just corresponding to partitions `n` in the larger product. Is this correct?
- On line 426 of `farahat_higman.py`, you had originally left that sentence as incomplete and I couldn't figure out how to finish it. Could you finish writing that paragraph?

(Due to the amount of changes by just reorganizing code, I felt it was better to post a new version of the patch than a review patch.)

For reviewing this patch, we'll do a cross-review where I review your changes and you review mine. Sound good?

Thanks,

Travis

For patchbot:

Apply: trac_10305-farahat_higman-ts.patch​



---

archive/issue_comments_133189.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw, Mathieu Guay-Paquet",
    "created_at": "2013-09-06T17:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133189",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw, Mathieu Guay-Paquet



---

archive/issue_comments_133190.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,3 +10,6 @@\n \n Note that this depends on #7980 and #10304.\n \n+Apply:\n+\n+[attachment:trac_10305-farahat_higman-ts.patch\u200b]\n``````\n",
    "created_at": "2013-09-06T17:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133190",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,3 +10,6 @@
 
 Note that this depends on #7980 and #10304.
 
+Apply:
+
+[attachment:trac_10305-farahat_higman-ts.patch​]
``````




---

archive/issue_comments_133191.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi Travis,\n\nReplying to [tscrim](#comment%3A11):\n> Hey Matthieu,\n> \n> Here's everything that I could do with the patch. I've reworked it to use the same framework as the symmetric functions, allowed the SGA center for a fixed n, and added in coercions to the SGA when appropriate.\n\n\nGreat! I'll have a look as you suggest.\n\n> - Could you put in some references for the Farahat-Higman/partial class algebras?\n\n\nSure. In the meantime, here's the bibtex from mathscinet for the original paper by Farahat and Higman:\n\n```\n@article {MR0103935,\n    AUTHOR = {Farahat, H. K. and Higman, G.},\n     TITLE = {The centres of symmetric group rings},\n   JOURNAL = {Proc. Roy. Soc. London Ser. A},\n  FJOURNAL = {Proceedings of the Royal Society. London. Series A.\n              Mathematical, Physical and Engineering Sciences},\n    VOLUME = {250},\n      YEAR = {1959},\n     PAGES = {212--221},\n      ISSN = {0962-8444},\n   MRCLASS = {20.00},\n  MRNUMBER = {0103935 (21 \\#2697)},\nMRREVIEWER = {T. Nakayama},\n}\n```\n\nThe partial class algebra is used and described in a recent paper by F\u00e9ray, but originally defined by Ivanov and Kerov. Both articles are available in English on arXiv, and the mathscinet bibtex is:\n\n```\n@article {MR2854640,\n    AUTHOR = {F{\\'e}ray, Valentin},\n     TITLE = {Partial {J}ucys-{M}urphy elements and star factorizations},\n   JOURNAL = {European J. Combin.},\n  FJOURNAL = {European Journal of Combinatorics},\n    VOLUME = {33},\n      YEAR = {2012},\n    NUMBER = {2},\n     PAGES = {189--198},\n      ISSN = {0195-6698},\n   MRCLASS = {05A05 (05A15)},\n  MRNUMBER = {2854640 (2012k:05013)},\n       DOI = {10.1016/j.ejc.2011.09.035},\n       URL = {http://dx.doi.org/10.1016/j.ejc.2011.09.035},\n}\n\n@article {MR1708561,\n    AUTHOR = {Ivanov, V. and Kerov, S.},\n     TITLE = {The algebra of conjugacy classes in symmetric groups, and\n              partial permutations},\n   JOURNAL = {Zap. Nauchn. Sem. S.-Peterburg. Otdel. Mat. Inst. Steklov.\n              (POMI)},\n  FJOURNAL = {Rossi\\u\\i skaya Akademiya Nauk. Sankt-Peterburgskoe Otdelenie.\n              Matematicheski\\u\\i\\ Institut im. V. A. Steklova. Zapiski\n              Nauchnykh Seminarov (POMI)},\n    VOLUME = {256},\n      YEAR = {1999},\n    NUMBER = {Teor. Predst. Din. Sist. Komb. i Algoritm. Metody. 3},\n     PAGES = {95--120, 265},\n      ISSN = {0373-2703},\n   MRCLASS = {20B30 (05A05)},\n  MRNUMBER = {1708561 (2000g:20010)},\n       DOI = {10.1023/A:1012473607966},\n       URL = {http://dx.doi.org/10.1023/A:1012473607966},\n}\n```\n\n> - From what I could find, it seems like the Farahat-Higman algebra is actually just the parts for a fixed `n`, not allowing `n` to vary. Thus we would need to take the terms just corresponding to partitions `n` in the larger product. Is this correct?\n\n\nIn the current version, the ground field `R` given to the constructor `FarahatHigmanAlgebra` is first transformed into a polynomial ring of the form `R['t']`, and then the `n` is the variable `t` from this new polynomial ring. A better design would be to pass the ring `R['t']` directly to the constructor, and let the parameter be chosen arbitrarily from this ring (not just the generator `t`). This is one of the points that made me think a better design is in order, because it creates some problems down the line.\n\nRegarding the bound on partitions based on `n`: strictly speaking, in the FH algebra, the basis includes *all* partitions, not just those where `size + length <= n`. If you want to get the center of the symmetric group algebra for a fixed integer `n`, say `n = 4`, then you need to do two things:\n\n1. Start from the Farahat-Higman algebra over `R['t']` with parameter `t`, and specialize `t` to `4`.\n\n2. Map every basis element where the partition has `size + length > 4` to zero.\n\nThe second step is where the bound on partitions comes up, but at that point it's no longer the Farahat-Higman algebra itself, but rather a homomorphic image. Does that make sense?\n\n> - On line 426 of `farahat_higman.py`, you had originally left that sentence as incomplete and I couldn't figure out how to finish it. Could you finish writing that paragraph?\n\n\nHah, what I just wrote above is what I meant to write in the documentation. I think it's a very muddled and unclear explanation, though, so I should improve it. Let me know if it makes no/some/complete sense.\n\n> (Due to the amount of changes by just reorganizing code, I felt it was better to post a new version of the patch than a review patch.)\n\n\nGood call.\n\n> For reviewing this patch, we'll do a cross-review where I review your changes and you review mine. Sound good?\n\n\nThat works.\n\nCheers,\nMathieu",
    "created_at": "2013-09-09T19:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133191",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:12'></a>
Hi Travis,

Replying to [tscrim](#comment%3A11):
> Hey Matthieu,
> 
> Here's everything that I could do with the patch. I've reworked it to use the same framework as the symmetric functions, allowed the SGA center for a fixed n, and added in coercions to the SGA when appropriate.


Great! I'll have a look as you suggest.

> - Could you put in some references for the Farahat-Higman/partial class algebras?


Sure. In the meantime, here's the bibtex from mathscinet for the original paper by Farahat and Higman:

```
@article {MR0103935,
    AUTHOR = {Farahat, H. K. and Higman, G.},
     TITLE = {The centres of symmetric group rings},
   JOURNAL = {Proc. Roy. Soc. London Ser. A},
  FJOURNAL = {Proceedings of the Royal Society. London. Series A.
              Mathematical, Physical and Engineering Sciences},
    VOLUME = {250},
      YEAR = {1959},
     PAGES = {212--221},
      ISSN = {0962-8444},
   MRCLASS = {20.00},
  MRNUMBER = {0103935 (21 \#2697)},
MRREVIEWER = {T. Nakayama},
}
```

The partial class algebra is used and described in a recent paper by Féray, but originally defined by Ivanov and Kerov. Both articles are available in English on arXiv, and the mathscinet bibtex is:

```
@article {MR2854640,
    AUTHOR = {F{\'e}ray, Valentin},
     TITLE = {Partial {J}ucys-{M}urphy elements and star factorizations},
   JOURNAL = {European J. Combin.},
  FJOURNAL = {European Journal of Combinatorics},
    VOLUME = {33},
      YEAR = {2012},
    NUMBER = {2},
     PAGES = {189--198},
      ISSN = {0195-6698},
   MRCLASS = {05A05 (05A15)},
  MRNUMBER = {2854640 (2012k:05013)},
       DOI = {10.1016/j.ejc.2011.09.035},
       URL = {http://dx.doi.org/10.1016/j.ejc.2011.09.035},
}

@article {MR1708561,
    AUTHOR = {Ivanov, V. and Kerov, S.},
     TITLE = {The algebra of conjugacy classes in symmetric groups, and
              partial permutations},
   JOURNAL = {Zap. Nauchn. Sem. S.-Peterburg. Otdel. Mat. Inst. Steklov.
              (POMI)},
  FJOURNAL = {Rossi\u\i skaya Akademiya Nauk. Sankt-Peterburgskoe Otdelenie.
              Matematicheski\u\i\ Institut im. V. A. Steklova. Zapiski
              Nauchnykh Seminarov (POMI)},
    VOLUME = {256},
      YEAR = {1999},
    NUMBER = {Teor. Predst. Din. Sist. Komb. i Algoritm. Metody. 3},
     PAGES = {95--120, 265},
      ISSN = {0373-2703},
   MRCLASS = {20B30 (05A05)},
  MRNUMBER = {1708561 (2000g:20010)},
       DOI = {10.1023/A:1012473607966},
       URL = {http://dx.doi.org/10.1023/A:1012473607966},
}
```

> - From what I could find, it seems like the Farahat-Higman algebra is actually just the parts for a fixed `n`, not allowing `n` to vary. Thus we would need to take the terms just corresponding to partitions `n` in the larger product. Is this correct?


In the current version, the ground field `R` given to the constructor `FarahatHigmanAlgebra` is first transformed into a polynomial ring of the form `R['t']`, and then the `n` is the variable `t` from this new polynomial ring. A better design would be to pass the ring `R['t']` directly to the constructor, and let the parameter be chosen arbitrarily from this ring (not just the generator `t`). This is one of the points that made me think a better design is in order, because it creates some problems down the line.

Regarding the bound on partitions based on `n`: strictly speaking, in the FH algebra, the basis includes *all* partitions, not just those where `size + length <= n`. If you want to get the center of the symmetric group algebra for a fixed integer `n`, say `n = 4`, then you need to do two things:

1. Start from the Farahat-Higman algebra over `R['t']` with parameter `t`, and specialize `t` to `4`.

2. Map every basis element where the partition has `size + length > 4` to zero.

The second step is where the bound on partitions comes up, but at that point it's no longer the Farahat-Higman algebra itself, but rather a homomorphic image. Does that make sense?

> - On line 426 of `farahat_higman.py`, you had originally left that sentence as incomplete and I couldn't figure out how to finish it. Could you finish writing that paragraph?


Hah, what I just wrote above is what I meant to write in the documentation. I think it's a very muddled and unclear explanation, though, so I should improve it. Let me know if it makes no/some/complete sense.

> (Due to the amount of changes by just reorganizing code, I felt it was better to post a new version of the patch than a review patch.)


Good call.

> For reviewing this patch, we'll do a cross-review where I review your changes and you review mine. Sound good?


That works.

Cheers,
Mathieu



---

archive/issue_comments_133192.json:
```json
{
    "body": "**Branch:** [u/mguaypaq/ticket/10305](https://github.com/sagemath/sagetrac-mirror/tree/u/mguaypaq/ticket/10305)",
    "created_at": "2013-10-08T22:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133192",
    "user": "https://github.com/mguaypaq"
}
```

**Branch:** [u/mguaypaq/ticket/10305](https://github.com/sagemath/sagetrac-mirror/tree/u/mguaypaq/ticket/10305)



---

archive/issue_comments_133193.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,10 @@\n Here is some preliminary code to implement the center of the symmetric group algebras, various bases for this and related rings, and coercions between these and to/from the ring of symmetric functions.\n \n-Things that I plan to do:\n-* Fill in all of the TODO doctests with actual doctests.\n-* Figure out why some of the coercions aren't discovered by the coercion framework. (See the last few examples at the top of the file.)\n-* `SymmetricGroupAlgebraCenter` does not actually have a multiplicative identity as currently implemented, so it should probably by in a category other than `GradedAlgebrasWithBasis`.\n-* Reimplement `ConjugacyClassBasis` and `OrthogonalIdempotentBasis` for a fixed symmetric group over the integers. Then, the conversion table can be cached, the elements can be represented by lists of coefficients (possibly numpy arrays) instead of dictionaries, and faster linear algebra over the integers can be used. This results in massive (several orders of magnitude) speedups.\n+Work issues:\n+* Re-architecting in progress\n+* Fix the performance of conversion from SymmetricGroupAlgebraCenter to SymmetricGroupAlgebra\n+* Add the new files (and possibly some old ones?) to the reference manual\n * Possibly add the option of saving some of the conversion tables to disk, as they can be large and expensive to compute.\n-* Add the relevant classes to `sage/combinat/all.py`.\n \n Note that this depends on #7980 and #10304.\n \n-Apply:\n-\n-[attachment:trac_10305-farahat_higman-ts.patch\u200b]\n``````\n",
    "created_at": "2013-10-08T22:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133193",
    "user": "https://github.com/mguaypaq"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,10 @@
 Here is some preliminary code to implement the center of the symmetric group algebras, various bases for this and related rings, and coercions between these and to/from the ring of symmetric functions.
 
-Things that I plan to do:
-* Fill in all of the TODO doctests with actual doctests.
-* Figure out why some of the coercions aren't discovered by the coercion framework. (See the last few examples at the top of the file.)
-* `SymmetricGroupAlgebraCenter` does not actually have a multiplicative identity as currently implemented, so it should probably by in a category other than `GradedAlgebrasWithBasis`.
-* Reimplement `ConjugacyClassBasis` and `OrthogonalIdempotentBasis` for a fixed symmetric group over the integers. Then, the conversion table can be cached, the elements can be represented by lists of coefficients (possibly numpy arrays) instead of dictionaries, and faster linear algebra over the integers can be used. This results in massive (several orders of magnitude) speedups.
+Work issues:
+* Re-architecting in progress
+* Fix the performance of conversion from SymmetricGroupAlgebraCenter to SymmetricGroupAlgebra
+* Add the new files (and possibly some old ones?) to the reference manual
 * Possibly add the option of saving some of the conversion tables to disk, as they can be large and expensive to compute.
-* Add the relevant classes to `sage/combinat/all.py`.
 
 Note that this depends on #7980 and #10304.
 
-Apply:
-
-[attachment:trac_10305-farahat_higman-ts.patch​]
``````




---

archive/issue_comments_133194.json:
```json
{
    "body": "<a id='comment:14'></a>\nSorry for the very long delay. The code is still a work in progress, but now using the new git workflow! I've been tinkering with the code a lot, but hopefully this first commit makes some sense. It's mostly about splitting off the SymmetricGroupAlgebraCenter code into its own file, but there's a pretty long-winded commit message to explain the code changes.\n\nI now have a much clearer picture of what rings should be created, in what order, under what conditions, which coercions should be registered, and what should be cached where. I'll start chipping away at this for now, and if anyone wants to validate the design, I bet a conversation on IRC (or some other real-time communication medium) would be best.\n\nFor reviewing, my hope would be that each commit makes sense individually, and could be reviewed individually to check that it does what it claims to do in the commit message. Travis, would this be acceptable?",
    "created_at": "2013-10-08T22:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133194",
    "user": "https://github.com/mguaypaq"
}
```

<a id='comment:14'></a>
Sorry for the very long delay. The code is still a work in progress, but now using the new git workflow! I've been tinkering with the code a lot, but hopefully this first commit makes some sense. It's mostly about splitting off the SymmetricGroupAlgebraCenter code into its own file, but there's a pretty long-winded commit message to explain the code changes.

I now have a much clearer picture of what rings should be created, in what order, under what conditions, which coercions should be registered, and what should be cached where. I'll start chipping away at this for now, and if anyone wants to validate the design, I bet a conversation on IRC (or some other real-time communication medium) would be best.

For reviewing, my hope would be that each commit makes sense individually, and could be reviewed individually to check that it does what it claims to do in the commit message. Travis, would this be acceptable?



---

archive/issue_comments_133195.json:
```json
{
    "body": "**Commit:** [25ff1fd7f9ad2539fb7e95134d96b882bfd40187](https://github.com/sagemath/sagetrac-mirror/commit/25ff1fd7f9ad2539fb7e95134d96b882bfd40187)",
    "created_at": "2013-10-08T22:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133195",
    "user": "https://github.com/mguaypaq"
}
```

**Commit:** [25ff1fd7f9ad2539fb7e95134d96b882bfd40187](https://github.com/sagemath/sagetrac-mirror/commit/25ff1fd7f9ad2539fb7e95134d96b882bfd40187)



---

archive/issue_comments_133196.json:
```json
{
    "body": "<a id='comment:15'></a>\nHey Mathieu,\n\nI think it would be best to just look at the final version, but the commit messages are helpful. A few quick comments from looking over the branch:\n\n* The `SymmetricGroupAlgebraCenterBases` should be in the other file.\n* The references should be formatted like:\n\n```\n.. [Name2013] Blah. *I prefer titles in italics when there's no\n   math formatting needed*. Other stuff.\n```\n  Then you can reference them as `[Name2013]_` in any place in any file, i.e. they are global to all of the Sage documentation.\n* It should be `.. RUBRIC::` with 2 colons and `.. SEEALSO::` as one word.\n\nI'll make some changes if you don't beat me to them first as I start to work with the new workflow.\n\nBest,\n\nTravis",
    "created_at": "2013-10-10T01:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133196",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Hey Mathieu,

I think it would be best to just look at the final version, but the commit messages are helpful. A few quick comments from looking over the branch:

* The `SymmetricGroupAlgebraCenterBases` should be in the other file.
* The references should be formatted like:

```
.. [Name2013] Blah. *I prefer titles in italics when there's no
   math formatting needed*. Other stuff.
```
  Then you can reference them as `[Name2013]_` in any place in any file, i.e. they are global to all of the Sage documentation.
* It should be `.. RUBRIC::` with 2 colons and `.. SEEALSO::` as one word.

I'll make some changes if you don't beat me to them first as I start to work with the new workflow.

Best,

Travis



---

archive/issue_comments_133197.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr>405178bRemove extra chunk from farahat_higman.py and fix related formatting issues.</tr></table>\n",
    "created_at": "2013-10-18T17:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr>405178bRemove extra chunk from farahat_higman.py and fix related formatting issues.</tr></table>




---

archive/issue_comments_133198.json:
```json
{
    "body": "**Changing commit** from \"[25ff1fd7f9ad2539fb7e95134d96b882bfd40187](https://github.com/sagemath/sagetrac-mirror/commit/25ff1fd7f9ad2539fb7e95134d96b882bfd40187)\" to \"[405178b1ec1776ecc0e40ce8e328ab7e3f7141b4](https://github.com/sagemath/sagetrac-mirror/commit/405178b1ec1776ecc0e40ce8e328ab7e3f7141b4)\".",
    "created_at": "2013-10-18T17:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[25ff1fd7f9ad2539fb7e95134d96b882bfd40187](https://github.com/sagemath/sagetrac-mirror/commit/25ff1fd7f9ad2539fb7e95134d96b882bfd40187)" to "[405178b1ec1776ecc0e40ce8e328ab7e3f7141b4](https://github.com/sagemath/sagetrac-mirror/commit/405178b1ec1776ecc0e40ce8e328ab7e3f7141b4)".



---

archive/issue_comments_133199.json:
```json
{
    "body": "**Changing commit** from \"[405178b1ec1776ecc0e40ce8e328ab7e3f7141b4](https://github.com/sagemath/sagetrac-mirror/commit/405178b1ec1776ecc0e40ce8e328ab7e3f7141b4)\" to \"[fb331475d3c1865b55f3cac024039001de9f28ad](https://github.com/sagemath/sagetrac-mirror/commit/fb331475d3c1865b55f3cac024039001de9f28ad)\".",
    "created_at": "2013-11-05T18:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[405178b1ec1776ecc0e40ce8e328ab7e3f7141b4](https://github.com/sagemath/sagetrac-mirror/commit/405178b1ec1776ecc0e40ce8e328ab7e3f7141b4)" to "[fb331475d3c1865b55f3cac024039001de9f28ad](https://github.com/sagemath/sagetrac-mirror/commit/fb331475d3c1865b55f3cac024039001de9f28ad)".



---

archive/issue_comments_133200.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr>fb33147Merge branch 'master' into ticket/10305</tr></table>\n",
    "created_at": "2013-11-05T18:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr>fb33147Merge branch 'master' into ticket/10305</tr></table>




---

archive/issue_comments_133201.json:
```json
{
    "body": "**Changing branch** from \"[u/mguaypaq/ticket/10305](https://github.com/sagemath/sagetrac-mirror/tree/u/mguaypaq/ticket/10305)\" to \"[public/ticket/10305-farahat-higman](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/10305-farahat-higman)\".",
    "created_at": "2013-11-06T04:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10305#issuecomment-133201",
    "user": "https://github.com/mguaypaq"
}
```

**Changing branch** from "[u/mguaypaq/ticket/10305](https://github.com/sagemath/sagetrac-mirror/tree/u/mguaypaq/ticket/10305)" to "[public/ticket/10305-farahat-higman](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/10305-farahat-higman)".



---

archive/issue_events_031891.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31891"
}
```



---

archive/issue_events_031892.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31892"
}
```



---

archive/issue_events_031893.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31893"
}
```



---

archive/issue_events_031894.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31894"
}
```



---

archive/issue_events_031895.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31895"
}
```



---

archive/issue_events_031896.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10305",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10305#event-31896"
}
```
