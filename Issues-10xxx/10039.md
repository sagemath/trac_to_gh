# Issue 10039: Make Parma Polyhedra Library a standard library

archive/issues_010038.json:
```json
{
    "body": "The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n* ppl has already been widely tested on a multitude of platforms.\n* Native C++ with a pure C interface.\n* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n\nOfficial webpage: http://www.cs.unipr.it/ppl/\n\nMy plan is to \n1. Create a PPL spkg.\n2. Write a Cython interface. \n3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n\nCurrent status:\n1. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n2. Is split off into trac #10140.\n\nFor convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n\nTo apply this ticket:\n* download the new spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg)\n* copy the spkg to `$SAGE_ROOT/spkg/standard`\n* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library\n* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library\n* apply [attachment:10039_manifest.patch] to the Sage library\n* apply [attachment:trac_10039_root_repo.patch] the sage root repository\n* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository\n \n\nAssignee: mhampton\n\nCC:  @novoselt @jdemeyer @kiwifb\n\nKeywords: ppl spkg\n\nResolution: fixed\n\nAuthor: Volker Braun\n\nReviewer: Marshall Hampton, Jeroen Demeyer\n\nMerged: sage-4.7.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10039\n\n",
    "closed_at": "2011-04-05T12:00:02Z",
    "created_at": "2010-09-30T09:08:07Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Make Parma Polyhedra Library a standard library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10039",
    "user": "https://github.com/vbraun"
}
```
The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
* ppl has already been widely tested on a multitude of platforms.
* Native C++ with a pure C interface.
* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)

Official webpage: http://www.cs.unipr.it/ppl/

My plan is to 
1. Create a PPL spkg.
2. Write a Cython interface. 
3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.

Current status:
1. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
2. Is split off into trac #10140.

For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html

To apply this ticket:
* download the new spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg)
* copy the spkg to `$SAGE_ROOT/spkg/standard`
* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library
* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library
* apply [attachment:10039_manifest.patch] to the Sage library
* apply [attachment:trac_10039_root_repo.patch] the sage root repository
* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository
 

Assignee: mhampton

CC:  @novoselt @jdemeyer @kiwifb

Keywords: ppl spkg

Resolution: fixed

Author: Volker Braun

Reviewer: Marshall Hampton, Jeroen Demeyer

Merged: sage-4.7.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10039





---

archive/issue_comments_105416.json:
```json
{
    "body": "<a id='comment:1'></a>Rather than retire cddlib, it would be better I think to have cddlib as an optional backend, along with lrs.  If ppl is consistently better than those then it could be the default.",
    "created_at": "2010-09-30T16:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105416",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:1'></a>Rather than retire cddlib, it would be better I think to have cddlib as an optional backend, along with lrs.  If ppl is consistently better than those then it could be the default.



---

archive/issue_comments_105417.json:
```json
{
    "body": "<a id='comment:2'></a>If there will be a Cython interface to PPL, it definitely should become the default backend as it must be drastically faster on simple cases then the current situation. And for \"complicated\" cases users should be willing to spend some time to learn about advantages of different systems and pick the right one, if speed becomes an issue.",
    "created_at": "2010-10-01T05:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105417",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>If there will be a Cython interface to PPL, it definitely should become the default backend as it must be drastically faster on simple cases then the current situation. And for "complicated" cases users should be willing to spend some time to learn about advantages of different systems and pick the right one, if speed becomes an issue.



---

archive/issue_comments_105418.json:
```json
{
    "body": "<a id='comment:3'></a>This package installed fine on Kubuntu 10.04 and OS X 10.6.  It does take a while to compile - 10 minutes on the first machine and 15 on the other.",
    "created_at": "2010-10-01T20:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105418",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:3'></a>This package installed fine on Kubuntu 10.04 and OS X 10.6.  It does take a while to compile - 10 minutes on the first machine and 15 on the other.



---

archive/issue_comments_105419.json:
```json
{
    "body": "<a id='comment:4'></a>Yes, templated C++ code is really giving the compiler something to do.\n\nBut if you think thats slow then don't run the testsuite (SAGE_CHECK=yes)...",
    "created_at": "2010-10-01T23:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105419",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>Yes, templated C++ code is really giving the compiler something to do.

But if you think thats slow then don't run the testsuite (SAGE_CHECK=yes)...



---

archive/issue_comments_105420.json:
```json
{
    "body": "<a id='comment:5'></a>One reason I gave up any hope of making polymake standard was the compilation time; it was one reason I began writing polyhedra.py instead of improving the polymake interface.  \n\nAre there many things in PPL that go beyond cddlib?  I am having trouble wading through their documentation so its unclear to me.",
    "created_at": "2010-10-02T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105420",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:5'></a>One reason I gave up any hope of making polymake standard was the compilation time; it was one reason I began writing polyhedra.py instead of improving the polymake interface.  

Are there many things in PPL that go beyond cddlib?  I am having trouble wading through their documentation so its unclear to me.



---

archive/issue_comments_105421.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,13 +2,22 @@\n * ppl has already been widely tested on a multitude of platforms.\n * Native C++ with a pure C interface.\n * Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n-Eventually, I would like to retire cddlib in favour of a cython ppl interface. As a first step, I created a ppl spkg which you can find here:\n \n-http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg\n+Official webpage: http://www.cs.unipr.it/ppl/\n \n-Official webpage:\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n \n-http://www.cs.unipr.it/ppl/\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg\n+2. A initial version of my cython wrapper for PPL is attached. It covers everything necessary to construct polyhedra and their minimal H/V-representations. Still needs more documentation and better exception handling. But feel free to look at the module docstring and post your suggestions!\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2010-10-10T19:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105421",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,13 +2,22 @@
 * ppl has already been widely tested on a multitude of platforms.
 * Native C++ with a pure C interface.
 * Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
-Eventually, I would like to retire cddlib in favour of a cython ppl interface. As a first step, I created a ppl spkg which you can find here:
 
-http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg
+Official webpage: http://www.cs.unipr.it/ppl/
 
-Official webpage:
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
 
-http://www.cs.unipr.it/ppl/
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg
+2. A initial version of my cython wrapper for PPL is attached. It covers everything necessary to construct polyhedra and their minimal H/V-representations. Still needs more documentation and better exception handling. But feel free to look at the module docstring and post your suggestions!
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105422.json:
```json
{
    "body": "<a id='comment:7'></a>I read the module documentation and it looks quite nice, although the PPL interface and their documentation do not seem to be very clear to an unfamiliar user (as Marshall has already noted above). So if eventually Sage front-end is structured more like current geometric classes, it would be better - I guess that's exactly your plan in 4.\n\nCan PPL compute integral points inside a bounded polytope?",
    "created_at": "2010-10-10T23:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105422",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>I read the module documentation and it looks quite nice, although the PPL interface and their documentation do not seem to be very clear to an unfamiliar user (as Marshall has already noted above). So if eventually Sage front-end is structured more like current geometric classes, it would be better - I guess that's exactly your plan in 4.

Can PPL compute integral points inside a bounded polytope?



---

archive/issue_comments_105423.json:
```json
{
    "body": "<a id='comment:8'></a>Just to be clear, the PPL wrapper is not going to be exposed to the end user by default. She/he is supposed to use the higher-level `Polyhedron` and `Cone` classes.\n\nThe PPL sports grids (lattices defined through generators or congruences) and a MIP solver but, as far as I know, no function that directly enumerates grid points (i.e. the intersection of a grid with a polyhedron). Though it probably would not be too difficult to write one with these building blocks. In any case, I haven't cython-wrapped grids or MIPs so far.",
    "created_at": "2010-10-11T11:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105423",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>Just to be clear, the PPL wrapper is not going to be exposed to the end user by default. She/he is supposed to use the higher-level `Polyhedron` and `Cone` classes.

The PPL sports grids (lattices defined through generators or congruences) and a MIP solver but, as far as I know, no function that directly enumerates grid points (i.e. the intersection of a grid with a polyhedron). Though it probably would not be too difficult to write one with these building blocks. In any case, I haven't cython-wrapped grids or MIPs so far.



---

archive/issue_comments_105424.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2010-10-14T21:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105424",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105425.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,26 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2010-10-17T21:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105425",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,26 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.p0.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105426.json:
```json
{
    "body": "<a id='comment:11'></a>This does build successfully on Cygwin, but it does take _quite_ awhile:\n\n```\nreal    346m56.531s\nuser    22m33.908s\nsys     26m33.122s\nSuccessfully installed ppl-0.11.p0\n```",
    "created_at": "2010-10-18T07:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105426",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:11'></a>This does build successfully on Cygwin, but it does take _quite_ awhile:

```
real    346m56.531s
user    22m33.908s
sys     26m33.122s
Successfully installed ppl-0.11.p0
```



---

archive/issue_comments_105427.json:
```json
{
    "body": "<a id='comment:12'></a>I take it you are not running the test suite? That one is quite extensive...\n\nThe 22 minutes in user space could be realistic for a slow machine. The 26min is sys is a bit suspicious, are you running on swap? But the real question is, why did your computer spend 6h walltime for 40 minutes of work?\n\nI just tried the ppl spkg in an opensolaris virtual machine (single core) and it takes about 7 minutes walltime, 5m user, 1m sys.",
    "created_at": "2010-10-18T09:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105427",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>I take it you are not running the test suite? That one is quite extensive...

The 22 minutes in user space could be realistic for a slow machine. The 26min is sys is a bit suspicious, are you running on swap? But the real question is, why did your computer spend 6h walltime for 40 minutes of work?

I just tried the ppl spkg in an opensolaris virtual machine (single core) and it takes about 7 minutes walltime, 5m user, 1m sys.



---

archive/issue_comments_105428.json:
```json
{
    "body": "<a id='comment:13'></a>I've removed all language interfaces (except the native C++), this shaves off a few  minutes. Now on my Fedora 13 box normal compilation takes 1 minute and the testsuite 20 minutes:\n\n```\n[vbraun@volker-desktop spkg]$ /usr/bin/time sage -f ppl-0.11.p0.spkg \n...\n35.84user 17.68system 1:02.23elapsed 86%CPU (0avgtext+0avgdata 229008maxresident)k\n4240inputs+1152096outputs (37major+5069087minor)pagefaults 0swaps\n```\nTesting:\n\n```\n[vbraun@volker-desktop ~]$ SAGE_CHECK=yes time sage -f ppl-0.11.p0.spkg\n...\n771.04user 281.70system 20:37.31elapsed 85%CPU (0avgtext+0avgdata 453712maxresident)k\n13710920inputs+46999048outputs (91major+76885818minor)pagefaults 0swaps\n```",
    "created_at": "2010-10-18T13:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105428",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>I've removed all language interfaces (except the native C++), this shaves off a few  minutes. Now on my Fedora 13 box normal compilation takes 1 minute and the testsuite 20 minutes:

```
[vbraun@volker-desktop spkg]$ /usr/bin/time sage -f ppl-0.11.p0.spkg 
...
35.84user 17.68system 1:02.23elapsed 86%CPU (0avgtext+0avgdata 229008maxresident)k
4240inputs+1152096outputs (37major+5069087minor)pagefaults 0swaps
```
Testing:

```
[vbraun@volker-desktop ~]$ SAGE_CHECK=yes time sage -f ppl-0.11.p0.spkg
...
771.04user 281.70system 20:37.31elapsed 85%CPU (0avgtext+0avgdata 453712maxresident)k
13710920inputs+46999048outputs (91major+76885818minor)pagefaults 0swaps
```



---

archive/issue_comments_105429.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:11 mhansen]:\n> This does build successfully on Cygwin, but it does take _quite_ awhile:\n> \n> \n> ```\n> real    346m56.531s\n> user    22m33.908s\n> sys     26m33.122s\n> Successfully installed ppl-0.11.p0\n> ```\n\n\nThat sure is a long time. I think it's because autoconf scripts takes ages on Cygwin, because Windows has no fork.\n\nOn my Sun Ultra 27, it takes less than 82 seconds to install. \n\n```\nreal\t1m21.460s\nuser\t4m6.543s\nsys\t0m27.474s\nSuccessfully installed ppl-0.11.p0\nNow cleaning up tmp files.\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing ppl-0.11.p0.spkg\n```\n\nHowever, it fails the test suite. To be more precise, the tests it runs pass, but it fails to build some of the code needed for the tests. \n\nI'm not sure what the gcc option `-W` is supposed to do. According to the gcc manual `-w` (lower case) is to suppress all warnings. If `-W` does the same as `-w`, then it seems the code tries to supporess the warnings, then enable them, which seems a bit illogical. But I can't find out exactly what `-W` is supposed to do. \n\nBTW, this should be called ppl-0.11 and not ppl-0.11.p0. Only once a version has appeared in Sage, and patches have been applied, should it be called .p0. \n\nA couple more points. \n* There is no code to handle 64-bit builds on platforms where SAGE64=yes. It needs something like this:\n\n```\n    if [ \"x$CFLAG64\" = x ]; then \n        CFLAG64=-m64\n    fi\n\n    # If the environment variable SAGE64=yes, force building a 64-bit version:\n    if [ \"x$SAGE64\" = xyes ]; then\n        echo \"Building a 64-bit version of ppl\"\n        CC=\"$CC $CFLAG64\"\n        export CC\n    fi\n```\n\nThat needs to be in both spkg-install and spkg-check. \n\n* I don't think *Unpack distribution into src/ directory* needs to be in the `Special Update/Build Instructions` section, as that is the same with every single package. \n \n* I would start `spkg-check` with `#!/usr/bin/env bash` to be consistent. That said, there's nothing there which should not work with any half-reasonable shell. \n\n* It would be better to use `$MAKE` in `spkg-check` so the tests can be run in parallel too, which should speed things up a lot.",
    "created_at": "2010-10-19T21:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105429",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:14'></a>Replying to [comment:11 mhansen]:
> This does build successfully on Cygwin, but it does take _quite_ awhile:
> 
> 
> ```
> real    346m56.531s
> user    22m33.908s
> sys     26m33.122s
> Successfully installed ppl-0.11.p0
> ```


That sure is a long time. I think it's because autoconf scripts takes ages on Cygwin, because Windows has no fork.

On my Sun Ultra 27, it takes less than 82 seconds to install. 

```
real	1m21.460s
user	4m6.543s
sys	0m27.474s
Successfully installed ppl-0.11.p0
Now cleaning up tmp files.
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing ppl-0.11.p0.spkg
```

However, it fails the test suite. To be more precise, the tests it runs pass, but it fails to build some of the code needed for the tests. 

I'm not sure what the gcc option `-W` is supposed to do. According to the gcc manual `-w` (lower case) is to suppress all warnings. If `-W` does the same as `-w`, then it seems the code tries to supporess the warnings, then enable them, which seems a bit illogical. But I can't find out exactly what `-W` is supposed to do. 

BTW, this should be called ppl-0.11 and not ppl-0.11.p0. Only once a version has appeared in Sage, and patches have been applied, should it be called .p0. 

A couple more points. 
* There is no code to handle 64-bit builds on platforms where SAGE64=yes. It needs something like this:

```
    if [ "x$CFLAG64" = x ]; then 
        CFLAG64=-m64
    fi

    # If the environment variable SAGE64=yes, force building a 64-bit version:
    if [ "x$SAGE64" = xyes ]; then
        echo "Building a 64-bit version of ppl"
        CC="$CC $CFLAG64"
        export CC
    fi
```

That needs to be in both spkg-install and spkg-check. 

* I don't think *Unpack distribution into src/ directory* needs to be in the `Special Update/Build Instructions` section, as that is the same with every single package. 
 
* I would start `spkg-check` with `#!/usr/bin/env bash` to be consistent. That said, there's nothing there which should not work with any half-reasonable shell. 

* It would be better to use `$MAKE` in `spkg-check` so the tests can be run in parallel too, which should speed things up a lot.



---

archive/issue_comments_105430.json:
```json
{
    "body": "Log showing how some of the test code failed to build when SPKG_CHECK=yes.  Without that, it builds OK in < 82 seconds. This is on a Sun Ultra 27 running OpenSolaris 06/2009",
    "created_at": "2010-10-19T22:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105430",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Log showing how some of the test code failed to build when SPKG_CHECK=yes.  Without that, it builds OK in < 82 seconds. This is on a Sun Ultra 27 running OpenSolaris 06/2009



---

archive/issue_comments_105431.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,26 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2010-10-20T14:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105431",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,26 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105432.json:
```json
{
    "body": "<a id='comment:15'></a>Attachment [ppl-0.11.p0.log](tarball://root/attachments/some-uuid/ticket10039/ppl-0.11.p0.log) by @vbraun created at 2010-10-20 14:46:18\n\nThe testsuite fails on Solaris gcc 4.5.0, most likely due to a gcc bug. For reference, the real error is \n\n```\ninterval1.cc:76:3: error: no matching function for call to 'Parma_Polyhedra_Library::Interval<float, Parma_Polyhedra_Library::Interval_Restriction_None<Parma_Polyhedra_Library::Interval_Info_Bitset<unsigned int, <unnamed>::My_Interval<float>::Floating_Point_Real_Interval_Info_Policy> > >::join_assign(double)'\ninterval1.cc:194:3:   instantiated from here\n```\nEverything should work fine with gcc 4.5.1. In particular, I could compile and run the testsuite on OpenSolaris/i386 with gcc 4.5.1. Also note that the offending floating point code is currently not used in the Cython wrapper. A similar bug report is here: https://www.cs.unipr.it/mantis/view.php?id=110\n\nAbout the `-W`, the gcc manual says:\n\n> -Wextra: This enables some extra warning flags that are not enabled by -Wall. (This option used to be called -W. The older name is still supported, but the newer name is more descriptive.)\n\n\nI have addressed the other issues that you raised. The updated spgk is here:\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg",
    "created_at": "2010-10-20T14:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105432",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>Attachment [ppl-0.11.p0.log](tarball://root/attachments/some-uuid/ticket10039/ppl-0.11.p0.log) by @vbraun created at 2010-10-20 14:46:18

The testsuite fails on Solaris gcc 4.5.0, most likely due to a gcc bug. For reference, the real error is 

```
interval1.cc:76:3: error: no matching function for call to 'Parma_Polyhedra_Library::Interval<float, Parma_Polyhedra_Library::Interval_Restriction_None<Parma_Polyhedra_Library::Interval_Info_Bitset<unsigned int, <unnamed>::My_Interval<float>::Floating_Point_Real_Interval_Info_Policy> > >::join_assign(double)'
interval1.cc:194:3:   instantiated from here
```
Everything should work fine with gcc 4.5.1. In particular, I could compile and run the testsuite on OpenSolaris/i386 with gcc 4.5.1. Also note that the offending floating point code is currently not used in the Cython wrapper. A similar bug report is here: https://www.cs.unipr.it/mantis/view.php?id=110

About the `-W`, the gcc manual says:

> -Wextra: This enables some extra warning flags that are not enabled by -Wall. (This option used to be called -W. The older name is still supported, but the newer name is more descriptive.)


I have addressed the other issues that you raised. The updated spgk is here:

http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg



---

archive/issue_comments_105433.json:
```json
{
    "body": "<a id='comment:16'></a>Sorry, I was too quick. The testsuite does not like \"MAKE=make -j8\", there is a missing shell escape. So I'll leave it at \"make check\" in the `spkg-check` for now. I've reported this upstream at https://www.cs.unipr.it/mantis/view.php?id=118\n\nI'm also getting the testsuite \"no matching function call\" from Opensolaris/gcc 4.5.1.",
    "created_at": "2010-10-20T17:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105433",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>Sorry, I was too quick. The testsuite does not like "MAKE=make -j8", there is a missing shell escape. So I'll leave it at "make check" in the `spkg-check` for now. I've reported this upstream at https://www.cs.unipr.it/mantis/view.php?id=118

I'm also getting the testsuite "no matching function call" from Opensolaris/gcc 4.5.1.



---

archive/issue_comments_105434.json:
```json
{
    "body": "<a id='comment:17'></a>I have patched out the PPL testsuite for Box<>, BD_Shape<>, and Octagonal_Shape<>. I think these templated classes are newer and not as well-tested. Note that the polyhedron code does not use templates. In any case, they are not currently exposed by the Cython wrapper and they don't provide any functionality that we need in the near future. \n\nThe updated spgk now compiles a) in parallel and b) under Solaris/gcc 4.5.1 without errors, including the testsuite.\n\nAs usual, get it here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg",
    "created_at": "2010-10-20T20:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105434",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>I have patched out the PPL testsuite for Box<>, BD_Shape<>, and Octagonal_Shape<>. I think these templated classes are newer and not as well-tested. Note that the polyhedron code does not use templates. In any case, they are not currently exposed by the Cython wrapper and they don't provide any functionality that we need in the near future. 

The updated spgk now compiles a) in parallel and b) under Solaris/gcc 4.5.1 without errors, including the testsuite.

As usual, get it here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg



---

archive/issue_comments_105435.json:
```json
{
    "body": "<a id='comment:18'></a>Some notes based on the posted documentation:\n1. \"Note that, by convention, every polyhedron must contain a point\" can be clarified a little that only generator systems containing a point may define a polyhedron, since there is no point issue in defining a polyhedron by a constraint system. (I would also add that it is natural to think about \"just rays\" as starting at the origin, but since your goal is to wrap PPL as closely as possible, it is not your design decision.)\n2. In the documentation of `Generator` I see \"frac\"s instead of fractions.\n3. `add_space_dimensions_and_embed` and `add_space_dimensions_and_project` - I think you want `(x,y)\\in P`, not `R^2`. Also the top of the documentation for \"project\" still says \"embed\". (I also find names confusing, but I guess that's how PPL calls them.)\n4. Why `affine_dimension` of the empty polyhedron is 0? Shouldn't it be -1 to distinguish it from points?\n5. Am I right that \"concatenating\" polyhedra means taking their Cartesian product? Perhaps, it is a simpler explanation than in `concatenate_assign`?\n6. `contains_integer_point` has wrong documentation description about being bounded.\n7. I don't understand what exactly is done by `drop_some_non_integer_points`.\n8. `frequency` does not have documentation.\n9. Is it necessary to have `hash_code`, especially if it only returns the dimension? My concern is that it can be confusing how it is related to standard `hash` in Python, also it seems strange to use it for mutable objects (again, because that's not how things work in Python). If this function is not used anywhere, I would suggest removing it.\n10. I got upset when I read in the documentation of `max_space_dimension` that it is bounded, but the doctest immediately made me happy ;-)\n21. `clear_mpz_globals`, `gmp_randrange`, `init_mpz_globals` have no documentation.",
    "created_at": "2010-10-21T01:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105435",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:18'></a>Some notes based on the posted documentation:
1. "Note that, by convention, every polyhedron must contain a point" can be clarified a little that only generator systems containing a point may define a polyhedron, since there is no point issue in defining a polyhedron by a constraint system. (I would also add that it is natural to think about "just rays" as starting at the origin, but since your goal is to wrap PPL as closely as possible, it is not your design decision.)
2. In the documentation of `Generator` I see "frac"s instead of fractions.
3. `add_space_dimensions_and_embed` and `add_space_dimensions_and_project` - I think you want `(x,y)\in P`, not `R^2`. Also the top of the documentation for "project" still says "embed". (I also find names confusing, but I guess that's how PPL calls them.)
4. Why `affine_dimension` of the empty polyhedron is 0? Shouldn't it be -1 to distinguish it from points?
5. Am I right that "concatenating" polyhedra means taking their Cartesian product? Perhaps, it is a simpler explanation than in `concatenate_assign`?
6. `contains_integer_point` has wrong documentation description about being bounded.
7. I don't understand what exactly is done by `drop_some_non_integer_points`.
8. `frequency` does not have documentation.
9. Is it necessary to have `hash_code`, especially if it only returns the dimension? My concern is that it can be confusing how it is related to standard `hash` in Python, also it seems strange to use it for mutable objects (again, because that's not how things work in Python). If this function is not used anywhere, I would suggest removing it.
10. I got upset when I read in the documentation of `max_space_dimension` that it is bounded, but the doctest immediately made me happy ;-)
21. `clear_mpz_globals`, `gmp_randrange`, `init_mpz_globals` have no documentation.



---

archive/issue_comments_105436.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-10-21T19:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105436",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_105437.json:
```json
{
    "body": "<a id='comment:19'></a>I fixed the documentation according to your suggestions.\n\n>  4. Why `affine_dimension` of the empty polyhedron is 0? Shouldn't it be -1 to distinguish it from points?\n\n\nThe internal representation of dimensions is an unsigned int. So PPL returns 0 instead of something negative. Using signed integer would half the `max_space_dimension()` ;-)\n\n>  5. Am I right that \"concatenating\" polyhedra means taking their Cartesian product? Perhaps, it is a simpler explanation than in `concatenate_assign`?\n\n\nYes. I just copy/pasted the C++ documentation. I've added a line that this is the Cartesian product.\n\n>  7. I don't understand what exactly is done by `drop_some_non_integer_points`.\n\n\nAll that is guaranteed is that the result is non-strictly contained in the original polyhedron and that integral vertices survive. Its not the most useful function, but it is there and was easy to wrap ;-)\n\n>  8. `frequency` does not have documentation.\n\n\nI removed this one, it is only useful for grids (spanned lattices / congruences).\n\n>  9. Is it necessary to have `hash_code`, especially if it only returns the dimension? My concern is that it can be confusing how it is related to standard `hash` in Python, also it seems strange to use it for mutable objects (again, because that's not how things work in Python). If this function is not used anywhere, I would suggest removing it.\n\n\nRemoved.\n\n>  10. I got upset when I read in the documentation of `max_space_dimension` that it is bounded, but the doctest immediately made me happy ;-)\n\n\nYes, should be enough for most applications ;)\n\n>  11. `clear_mpz_globals`, `gmp_randrange`, `init_mpz_globals` have no documentation.\n\n\nI didn't define these, they were imported from `gmp.pxi` and sphinx adds them to the documentation for some reason. Anyways, importing `gmp.pxi` is not necessary so I removed it.",
    "created_at": "2010-10-21T19:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105437",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>I fixed the documentation according to your suggestions.

>  4. Why `affine_dimension` of the empty polyhedron is 0? Shouldn't it be -1 to distinguish it from points?


The internal representation of dimensions is an unsigned int. So PPL returns 0 instead of something negative. Using signed integer would half the `max_space_dimension()` ;-)

>  5. Am I right that "concatenating" polyhedra means taking their Cartesian product? Perhaps, it is a simpler explanation than in `concatenate_assign`?


Yes. I just copy/pasted the C++ documentation. I've added a line that this is the Cartesian product.

>  7. I don't understand what exactly is done by `drop_some_non_integer_points`.


All that is guaranteed is that the result is non-strictly contained in the original polyhedron and that integral vertices survive. Its not the most useful function, but it is there and was easy to wrap ;-)

>  8. `frequency` does not have documentation.


I removed this one, it is only useful for grids (spanned lattices / congruences).

>  9. Is it necessary to have `hash_code`, especially if it only returns the dimension? My concern is that it can be confusing how it is related to standard `hash` in Python, also it seems strange to use it for mutable objects (again, because that's not how things work in Python). If this function is not used anywhere, I would suggest removing it.


Removed.

>  10. I got upset when I read in the documentation of `max_space_dimension` that it is bounded, but the doctest immediately made me happy ;-)


Yes, should be enough for most applications ;)

>  11. `clear_mpz_globals`, `gmp_randrange`, `init_mpz_globals` have no documentation.


I didn't define these, they were imported from `gmp.pxi` and sphinx adds them to the documentation for some reason. Anyways, importing `gmp.pxi` is not necessary so I removed it.



---

archive/issue_comments_105438.json:
```json
{
    "body": "<a id='comment:20'></a>I have tried building with the new spkg and sagelib patch, but I get the following error:\n\n```\nBuilding modified file sage/libs/pari/gen.pyx.\nTraceback (most recent call last):\n  File \"setup.py\", line 855, in <module>\n    queue = compile_command_list(ext_modules, deps)\n  File \"setup.py\", line 815, in compile_command_list\n    dep_file, dep_time = deps.newest_dep(f)\n  File \"setup.py\", line 722, in newest_dep\n    for f in self.all_deps(filename):\n  File \"setup.py\", line 703, in all_deps\n    for f in self.immediate_deps(filename):\n  File \"setup.py\", line 685, in immediate_deps\n    self._deps[filename] = self.parse_deps(filename)\n  File \"setup.py\", line 675, in parse_deps\n    raise IOError, \"could not find dependency %s included in %s.\"%(path, filename)\nIOError: could not find dependency ../../local/include/ppl.hh included in sage/libs/ppl.pyx.\nsage: There was an error installing modified sage library code.\n\nERROR installing SAGE\n```",
    "created_at": "2010-11-07T12:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105438",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>I have tried building with the new spkg and sagelib patch, but I get the following error:

```
Building modified file sage/libs/pari/gen.pyx.
Traceback (most recent call last):
  File "setup.py", line 855, in <module>
    queue = compile_command_list(ext_modules, deps)
  File "setup.py", line 815, in compile_command_list
    dep_file, dep_time = deps.newest_dep(f)
  File "setup.py", line 722, in newest_dep
    for f in self.all_deps(filename):
  File "setup.py", line 703, in all_deps
    for f in self.immediate_deps(filename):
  File "setup.py", line 685, in immediate_deps
    self._deps[filename] = self.parse_deps(filename)
  File "setup.py", line 675, in parse_deps
    raise IOError, "could not find dependency %s included in %s."%(path, filename)
IOError: could not find dependency ../../local/include/ppl.hh included in sage/libs/ppl.pyx.
sage: There was an error installing modified sage library code.

ERROR installing SAGE
```



---

archive/issue_comments_105439.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-11-07T12:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105439",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105440.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n+* #10233: Incomplete cython search path in `setup.py`\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2010-11-08T02:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105440",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,27 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
+* #10233: Incomplete cython search path in `setup.py`
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105441.json:
```json
{
    "body": "<a id='comment:21'></a>Is `SAGE_LOCAL!=SAGE_ROOT/local` in your install? It should work in either case, of course. I looked into how cython discovers the dependencies and the problem is that the `setup.py` expects the extension \"`.h`\" for C/C++ headers. But PPL uses `ppl.hh`. I fixed the dependency discovery for cython in  #10233, which is a new prerequisite for this patch.\n\nI also changed the ppl wrapper (this ticket) to rely on the search path instead of `cdef extern from \"../../local/include/ppl.hh\"`, which I probably should have done from the beginning.",
    "created_at": "2010-11-08T02:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105441",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>Is `SAGE_LOCAL!=SAGE_ROOT/local` in your install? It should work in either case, of course. I looked into how cython discovers the dependencies and the problem is that the `setup.py` expects the extension "`.h`" for C/C++ headers. But PPL uses `ppl.hh`. I fixed the dependency discovery for cython in  #10233, which is a new prerequisite for this patch.

I also changed the ppl wrapper (this ticket) to rely on the search path instead of `cdef extern from "../../local/include/ppl.hh"`, which I probably should have done from the beginning.



---

archive/issue_comments_105442.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-08T02:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105442",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105443.json:
```json
{
    "body": "<a id='comment:22'></a>If you want to make your package a **standard** package, you also need to patch `spkg/install` and `spkg/standard/deps` (most likely, that explains my error, your package simply wasn't installed).",
    "created_at": "2010-11-08T10:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105443",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>If you want to make your package a **standard** package, you also need to patch `spkg/install` and `spkg/standard/deps` (most likely, that explains my error, your package simply wasn't installed).



---

archive/issue_comments_105444.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-11-08T10:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105444",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105445.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:22 jdemeyer]:\n> If you want to make your package a **standard** package, you also need to patch `spkg/install` and `spkg/standard/deps` (most likely, that explains my error, your package simply wasn't installed).\n\nAny attempt to make a package standard would need discussion on sage-devel - which basically means William would have to agree to it. And I know William is not keen on adding too many standard packages. That's not to say he would not make it standard, but whereas a year or two ago virtually anything could become standard, that is no longer so. \n\nDave",
    "created_at": "2010-11-08T22:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105445",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:24'></a>Replying to [comment:22 jdemeyer]:
> If you want to make your package a **standard** package, you also need to patch `spkg/install` and `spkg/standard/deps` (most likely, that explains my error, your package simply wasn't installed).

Any attempt to make a package standard would need discussion on sage-devel - which basically means William would have to agree to it. And I know William is not keen on adding too many standard packages. That's not to say he would not make it standard, but whereas a year or two ago virtually anything could become standard, that is no longer so. 

Dave



---

archive/issue_comments_105446.json:
```json
{
    "body": "<a id='comment:25'></a>I'll attach updated `spkg/install` and `spkg/standard/deps` files. The only dependency is mpir, so its pretty simple.\n\nI did start a discussion thread on sage-devel about making it a standard spkg here:\nhttp://groups.google.com/group/sage-devel/browse_frm/thread/46e4363245607218\nNobody objected and Andrey, Dima, Marshall, and I were in favor.",
    "created_at": "2010-11-09T01:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105446",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>I'll attach updated `spkg/install` and `spkg/standard/deps` files. The only dependency is mpir, so its pretty simple.

I did start a discussion thread on sage-devel about making it a standard spkg here:
http://groups.google.com/group/sage-devel/browse_frm/thread/46e4363245607218
Nobody objected and Andrey, Dima, Marshall, and I were in favor.



---

archive/issue_comments_105447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-09T01:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105447",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105448.json:
```json
{
    "body": "diff for spkg/install",
    "created_at": "2010-11-09T01:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105448",
    "user": "https://github.com/vbraun"
}
```

diff for spkg/install



---

archive/issue_comments_105449.json:
```json
{
    "body": "Attachment [install](tarball://root/attachments/some-uuid/ticket10039/install) by @vbraun created at 2010-11-14 20:37:15\n\nUpdated spkg-install for sage-4.6.alpha1",
    "created_at": "2010-11-14T20:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105449",
    "user": "https://github.com/vbraun"
}
```

Attachment [install](tarball://root/attachments/some-uuid/ticket10039/install) by @vbraun created at 2010-11-14 20:37:15

Updated spkg-install for sage-4.6.alpha1



---

archive/issue_comments_105450.json:
```json
{
    "body": "<a id='comment:26'></a>I think there are a few more things to do for it to be standard sage material.\nIn module_list.py you may want to do a bit more:\n\n```\nExtension('sage.libs.ppl', \n \t  sources = ['sage/libs/ppl.pyx', 'sage/libs/ppl_shim.cc'],\n \t  libraries = ['ppl', 'gmpxx', 'gmp', 'm'], \n \t  language=\"c++\",\n          depends = [SAGE_LOCAL + \"/include/ppl.hh\"]),\n```\nIn your wrapper sage/libs/ppl.pyx,  ../../local/include/ppl.hh should be simplified\nto ppl.hh, same for everything else that has ../../local/include, setup.py knows to\ninclude this folder. You only needs to add things if it is in a sub-folder and then \nyou do that by adding an include line in module_list.py.",
    "created_at": "2010-11-15T11:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105450",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:26'></a>I think there are a few more things to do for it to be standard sage material.
In module_list.py you may want to do a bit more:

```
Extension('sage.libs.ppl', 
 	  sources = ['sage/libs/ppl.pyx', 'sage/libs/ppl_shim.cc'],
 	  libraries = ['ppl', 'gmpxx', 'gmp', 'm'], 
 	  language="c++",
          depends = [SAGE_LOCAL + "/include/ppl.hh"]),
```
In your wrapper sage/libs/ppl.pyx,  ../../local/include/ppl.hh should be simplified
to ppl.hh, same for everything else that has ../../local/include, setup.py knows to
include this folder. You only needs to add things if it is in a sub-folder and then 
you do that by adding an include line in module_list.py.



---

archive/issue_comments_105451.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:25 vbraun]:\n\n> I did start a discussion thread on sage-devel about making it a standard spkg here:\n> http://groups.google.com/group/sage-devel/browse_frm/thread/46e4363245607218\n> Nobody objected and Andrey, Dima, Marshall, and I were in favor.\n\n\nI think you should get William's approval too. I very much doubt it should be standard without being optional first. There's a ticket open to clarify that, but I can't be bothered to look for it now. \n\nBasically, getting a few people to agree to make it standard is not enough. \n\nDave",
    "created_at": "2010-11-15T11:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105451",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:27'></a>Replying to [comment:25 vbraun]:

> I did start a discussion thread on sage-devel about making it a standard spkg here:
> http://groups.google.com/group/sage-devel/browse_frm/thread/46e4363245607218
> Nobody objected and Andrey, Dima, Marshall, and I were in favor.


I think you should get William's approval too. I very much doubt it should be standard without being optional first. There's a ticket open to clarify that, but I can't be bothered to look for it now. 

Basically, getting a few people to agree to make it standard is not enough. 

Dave



---

archive/issue_comments_105452.json:
```json
{
    "body": "<a id='comment:28'></a>The bar should be high for standard packages, but not unreasonably so.  Don't make it difficult just so its difficult.\n\nMost packages should be optional before being standard.  But if a lot of functionality is tied to them being present, as is the case here, then that doesn't always make sense.\n\nCddlib would never make it as a standard package now.  This is a big step towards being able to remove cddlib.\n\nWhile William certainly has veto power, he did read that thread and did not object.  At this point I think that after someone gives this a positive review, its up to the release manager at the time to make the call.",
    "created_at": "2010-11-15T12:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105452",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:28'></a>The bar should be high for standard packages, but not unreasonably so.  Don't make it difficult just so its difficult.

Most packages should be optional before being standard.  But if a lot of functionality is tied to them being present, as is the case here, then that doesn't always make sense.

Cddlib would never make it as a standard package now.  This is a big step towards being able to remove cddlib.

While William certainly has veto power, he did read that thread and did not object.  At this point I think that after someone gives this a positive review, its up to the release manager at the time to make the call.



---

archive/issue_comments_105453.json:
```json
{
    "body": "<a id='comment:29'></a>I renamed the include `../../local/include/ppl.hh` to `ppl.hh`. Note that the `ppl.pyx` now really depends on #10233, because the current `setup.py` does **not** know how to include `*.hh` headers.\n\nI also added the explicit dependency on `SAGE_LOCAL+/include/ppl.hh`.\n\nLast, I just want to point out that now is the time to add PPL. I've fixed all outstanding bugs in `Polyhedron` that can be fixed within the current framework, and to continue improving it we need PPL.",
    "created_at": "2010-11-15T15:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105453",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>I renamed the include `../../local/include/ppl.hh` to `ppl.hh`. Note that the `ppl.pyx` now really depends on #10233, because the current `setup.py` does **not** know how to include `*.hh` headers.

I also added the explicit dependency on `SAGE_LOCAL+/include/ppl.hh`.

Last, I just want to point out that now is the time to add PPL. I've fixed all outstanding bugs in `Polyhedron` that can be fixed within the current framework, and to continue improving it we need PPL.



---

archive/issue_comments_105454.json:
```json
{
    "body": "<a id='comment:31'></a>There was no need to cc me, I have been added automatically because I commented.\nI didn't react immediately because I was sleeping (time zone GMT+12).\nAnyway the patch looks good to me now, the dep file looks right as well.\nI will probably include this in sage-on-gentoo in 4.6.1.alpha1 forward to give \nit some coverage. I may have to request a revision bump of the version of ppl\nshipped in gentoo first (currently shipping 0.10.2).",
    "created_at": "2010-11-15T22:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105454",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:31'></a>There was no need to cc me, I have been added automatically because I commented.
I didn't react immediately because I was sleeping (time zone GMT+12).
Anyway the patch looks good to me now, the dep file looks right as well.
I will probably include this in sage-on-gentoo in 4.6.1.alpha1 forward to give 
it some coverage. I may have to request a revision bump of the version of ppl
shipped in gentoo first (currently shipping 0.10.2).



---

archive/issue_comments_105455.json:
```json
{
    "body": "<a id='comment:32'></a>It has been noted in Gentoo (see [http://bugs.gentoo.org/show_bug.cgi?id=346173](http://bugs.gentoo.org/show_bug.cgi?id=346173)) that\nppl has an automagic dependency on glpk. that is ppl_lpsol will be built if glpk is found. It also looks like from the report that the test for ppl_lpsol succeeds or fails depending on the version of glpk used.\n\nglpk is not a dependency you gave to ppl so some sage install may end up with ppl_lpsol while others won't, depending on build order. I suggest that either glpk is added to the dependencies of ppl or that --disable-ppl_lpsol is passed to configure.",
    "created_at": "2010-11-21T09:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105455",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>It has been noted in Gentoo (see [http://bugs.gentoo.org/show_bug.cgi?id=346173](http://bugs.gentoo.org/show_bug.cgi?id=346173)) that
ppl has an automagic dependency on glpk. that is ppl_lpsol will be built if glpk is found. It also looks like from the report that the test for ppl_lpsol succeeds or fails depending on the version of glpk used.

glpk is not a dependency you gave to ppl so some sage install may end up with ppl_lpsol while others won't, depending on build order. I suggest that either glpk is added to the dependencies of ppl or that --disable-ppl_lpsol is passed to configure.



---

archive/issue_comments_105456.json:
```json
{
    "body": "Attachment [deps](tarball://root/attachments/some-uuid/ticket10039/deps) by @vbraun created at 2010-11-22 12:19:14\n\nUpdated spkg/standard/deps file with PPL added.",
    "created_at": "2010-11-22T12:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105456",
    "user": "https://github.com/vbraun"
}
```

Attachment [deps](tarball://root/attachments/some-uuid/ticket10039/deps) by @vbraun created at 2010-11-22 12:19:14

Updated spkg/standard/deps file with PPL added.



---

archive/issue_comments_105457.json:
```json
{
    "body": "Attachment [spkg-standard-deps.patch](tarball://root/attachments/some-uuid/ticket10039/spkg-standard-deps.patch) by @vbraun created at 2010-11-22 12:22:00\n\ndiff for spkg/standard/deps",
    "created_at": "2010-11-22T12:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105457",
    "user": "https://github.com/vbraun"
}
```

Attachment [spkg-standard-deps.patch](tarball://root/attachments/some-uuid/ticket10039/spkg-standard-deps.patch) by @vbraun created at 2010-11-22 12:22:00

diff for spkg/standard/deps



---

archive/issue_comments_105458.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks for pointing out the soft glpk dependency! I checked and the Fedora rpm requires `glpk-devel`, too. I've updated the `deps` file to include this dependency.",
    "created_at": "2010-11-22T12:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105458",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>Thanks for pointing out the soft glpk dependency! I checked and the Fedora rpm requires `glpk-devel`, too. I've updated the `deps` file to include this dependency.



---

archive/issue_comments_105459.json:
```json
{
    "body": "<a id='comment:34'></a>For the patch bot: \n\nApply trac_10039_parma_polyhedra_library.patch",
    "created_at": "2010-12-31T20:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105459",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>For the patch bot: 

Apply trac_10039_parma_polyhedra_library.patch



---

archive/issue_comments_105460.json:
```json
{
    "body": "<a id='comment:35'></a>I've now added sig_on/sig_off blocks around expensive library calls. Interrupting works, too:\n\n```\nsage: Cone(random_matrix(QQ,100,10).rows())\n^CERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (2152, 0))\n\n---------------------------------------------------------------------------\nKeyboardInterrupt                         Traceback (most recent call last)\n\n/home/vbraun/opt/sage-4.6.1.rc1/devel/sage-main/<ipython console> in <module>()\n\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/cone.pyc in Cone(rays, lattice, check, normalize)\n    390             pass\n    391     cone = C_Polyhedron(gs)\n--> 392     return _Cone_from_PPL(cone, lattice)\n    393 \n    394 def _Cone_from_PPL(cone, lattice):\n\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/cone.pyc in _Cone_from_PPL(cone, lattice)\n    420     rays = []\n    421     lines = []\n--> 422     for g in cone.minimized_generators():\n    423         ray = lattice(g.coefficients())\n    424         ray.set_immutable()\n\nKeyboardInterrupt: \n```\nNote: in this example I have #10140: \"Base sage.geometry.cone on the Parma Polyhedra Library (PPL)\" applied.",
    "created_at": "2011-01-12T06:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105460",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>I've now added sig_on/sig_off blocks around expensive library calls. Interrupting works, too:

```
sage: Cone(random_matrix(QQ,100,10).rows())
^CERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (2152, 0))

---------------------------------------------------------------------------
KeyboardInterrupt                         Traceback (most recent call last)

/home/vbraun/opt/sage-4.6.1.rc1/devel/sage-main/<ipython console> in <module>()

/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/cone.pyc in Cone(rays, lattice, check, normalize)
    390             pass
    391     cone = C_Polyhedron(gs)
--> 392     return _Cone_from_PPL(cone, lattice)
    393 
    394 def _Cone_from_PPL(cone, lattice):

/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sage/geometry/cone.pyc in _Cone_from_PPL(cone, lattice)
    420     rays = []
    421     lines = []
--> 422     for g in cone.minimized_generators():
    423         ray = lattice(g.coefficients())
    424         ray.set_immutable()

KeyboardInterrupt: 
```
Note: in this example I have #10140: "Base sage.geometry.cone on the Parma Polyhedra Library (PPL)" applied.



---

archive/issue_comments_105461.json:
```json
{
    "body": "<a id='comment:36'></a>This looks very good.\n\nOne doctest problem is that on 32-bit machines we get:\n\n```\nFile \"/Users/mh/sagestuff/sage-4.6.1.rc1/devel/sage-t1/sage/libs/ppl.pyx\", line 2299:\n    sage: C_Polyhedron(1, 'empty').max_space_dimension()\nExpected:\n    1152921504606846973\nGot:\n    357913939\n```\n\nso maybe that should be something like\n\n```\nsage: max_dim = C_Polyhedron(1, 'empty').max_space_dimension()\nsage: max_dim in [357913939,1152921504606846973]\nsage: True\n```\n\nor just \n\n```\nsage: max_dim = C_Polyhedron(1, 'empty').max_space_dimension()\nsage: max_dim > 1\nsage: True\n```",
    "created_at": "2011-01-13T00:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105461",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:36'></a>This looks very good.

One doctest problem is that on 32-bit machines we get:

```
File "/Users/mh/sagestuff/sage-4.6.1.rc1/devel/sage-t1/sage/libs/ppl.pyx", line 2299:
    sage: C_Polyhedron(1, 'empty').max_space_dimension()
Expected:
    1152921504606846973
Got:
    357913939
```

so maybe that should be something like

```
sage: max_dim = C_Polyhedron(1, 'empty').max_space_dimension()
sage: max_dim in [357913939,1152921504606846973]
sage: True
```

or just 

```
sage: max_dim = C_Polyhedron(1, 'empty').max_space_dimension()
sage: max_dim > 1
sage: True
```



---

archive/issue_comments_105462.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-01-13T02:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105462",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105463.json:
```json
{
    "body": "<a id='comment:38'></a>I fixed the `max_space_dimension` along the lines of Marshall's suggestion. I also improved the doctesting of the `ascii_dump()` methods using Jeroen's `test_executable()` function.",
    "created_at": "2011-01-13T03:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105463",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>I fixed the `max_space_dimension` along the lines of Marshall's suggestion. I also improved the doctesting of the `ascii_dump()` methods using Jeroen's `test_executable()` function.



---

archive/issue_comments_105464.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-13T03:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105464",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105465.json:
```json
{
    "body": "<a id='comment:39'></a>OK, looks good, all doctests pass now.  I will try to test on t2, then give a positive review.",
    "created_at": "2011-01-13T05:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105465",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:39'></a>OK, looks good, all doctests pass now.  I will try to test on t2, then give a positive review.



---

archive/issue_comments_105466.json:
```json
{
    "body": "<a id='comment:40'></a>I can't build this on t2, but I don't really know what I'm doing on Solaris.  I do have this in my .profile:\n\n```\nif [ `uname -n` = t2 ] ; then\n   . /usr/local/bin/t2-setup\nfi \n```\n\nas suggested by the login message.\n\nI get this error:\n\n```\nCC Version\ngcc -v\n/home/mhampton/solaris/sage-4.6.1.rc1/local/bin/sage-spkg: line 319: gcc: command not found\nUnable to determine C compiler version.\n****************************************************\nFailed to find mpir.  Please install the mpir spkg\n```",
    "created_at": "2011-01-13T17:42:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105466",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:40'></a>I can't build this on t2, but I don't really know what I'm doing on Solaris.  I do have this in my .profile:

```
if [ `uname -n` = t2 ] ; then
   . /usr/local/bin/t2-setup
fi 
```

as suggested by the login message.

I get this error:

```
CC Version
gcc -v
/home/mhampton/solaris/sage-4.6.1.rc1/local/bin/sage-spkg: line 319: gcc: command not found
Unable to determine C compiler version.
****************************************************
Failed to find mpir.  Please install the mpir spkg
```



---

archive/issue_comments_105467.json:
```json
{
    "body": "<a id='comment:41'></a>On t2 (only), the `newest_version` script returns nothing unless it is run from `$SAGE_ROOT/spkg`, which is why you got the \"Failed to find mpir\" message. I updated the ppl spkg (same location), and it works now on t2 as well. \n\nI followed the following steps to build on t2:\n* `. /usr/local/bin/t2-setup`\n* `tar xzf sage-4.6.1-sunos-32bit-5.10-sun4v-SunOS.tar.gz`\n* `sage -f ppl-0.11.spkg`",
    "created_at": "2011-01-20T23:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105467",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:41'></a>On t2 (only), the `newest_version` script returns nothing unless it is run from `$SAGE_ROOT/spkg`, which is why you got the "Failed to find mpir" message. I updated the ppl spkg (same location), and it works now on t2 as well. 

I followed the following steps to build on t2:
* `. /usr/local/bin/t2-setup`
* `tar xzf sage-4.6.1-sunos-32bit-5.10-sun4v-SunOS.tar.gz`
* `sage -f ppl-0.11.spkg`



---

archive/issue_comments_105468.json:
```json
{
    "body": "Add two ppl binaries to $SAGE_LOCAL/bin/.hgignore",
    "created_at": "2011-01-21T20:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105468",
    "user": "https://github.com/vbraun"
}
```

Add two ppl binaries to $SAGE_LOCAL/bin/.hgignore



---

archive/issue_comments_105469.json:
```json
{
    "body": "<a id='comment:42'></a>Attachment [trac_10039_scripts_hgignore.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_scripts_hgignore.patch) by @kiwifb created at 2011-01-29 19:42:26\n\nI got a weird test failure if you have an idea:\n\n```\nsage -t -force_lib \"devel/sage/sage/libs/ppl.pyx\"           \nsize 3 1 3 2 f -RPI_V -RPI  -NNC_V -NNC\ntopology NECESSARILY_CLOSED\n1 x 3 (sorted)\nindex_first_pending 1\n1 3 2 P\nsize 4 1 3 2 -1 f -RPI_V +RPI  -NNC_V +NNC\ntopology NOT_NECESSARILY_CLOSED\n1 x 4 (sorted)\nindex_first_pending 1\n-1 3 -2 -1 >\nNOTHINGNOTHING**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/libs/ppl.pyx\", line 1271:\n    sage: p.maximize( +x )\nExpected:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}\nGot:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/libs/ppl.pyx\", line 1340:\n    sage: p.minimize( -x )\nExpected:\n    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\nGot:\n    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\nspace_dim 2\n-ZE -EM  +CM +GM  +CS +GS  -CP -GP  -SC +SG \ncon_sys (up-to-date)\ntopology NECESSARILY_CLOSED\n2 x 3 (sorted)\nindex_first_pending 2\n-1 3 2 =\n1 0 0 >=\n\ngen_sys (up-to-date)\ntopology NECESSARILY_CLOSED\n2 x 3 (not_sorted)\nindex_first_pending 2\n0 2 -3 L\n2 0 1 P\n\nsat_c\n0 x 0\n\nsat_g\n2 x 2\n0 0 \n0 1 \n\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/libs/ppl.pyx\", line 2204:\n    sage: C_Polyhedron(1, 'empty').max_space_dimension()\nExpected:\n    1152921504606846973\nGot:\n    357913939\nsize 3 1 3 2 f -RPI_V -RPI  -NNC_V -NNC\n**********************************************************************\n3 items had failures:\n   1 of  15 in __main__.example_29\n   1 of  15 in __main__.example_30\n   1 of   4 in __main__.example_48\n***Test Failed*** 3 failures.\nFor whitespace errors, see the file /home/francois/.sage/tmp/.doctest_ppl.py\n         [15.8 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t -force_lib \"devel/sage/sage/libs/ppl.pyx\"\nTotal time for all tests: 15.8 seconds\n```",
    "created_at": "2011-01-29T19:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105469",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'></a>Attachment [trac_10039_scripts_hgignore.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_scripts_hgignore.patch) by @kiwifb created at 2011-01-29 19:42:26

I got a weird test failure if you have an idea:

```
sage -t -force_lib "devel/sage/sage/libs/ppl.pyx"           
size 3 1 3 2 f -RPI_V -RPI  -NNC_V -NNC
topology NECESSARILY_CLOSED
1 x 3 (sorted)
index_first_pending 1
1 3 2 P
size 4 1 3 2 -1 f -RPI_V +RPI  -NNC_V +NNC
topology NOT_NECESSARILY_CLOSED
1 x 4 (sorted)
index_first_pending 1
-1 3 -2 -1 >
NOTHINGNOTHING**********************************************************************
File "/usr/share/sage/devel/sage/sage/libs/ppl.pyx", line 1271:
    sage: p.maximize( +x )
Expected:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}
Got:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}
**********************************************************************
File "/usr/share/sage/devel/sage/sage/libs/ppl.pyx", line 1340:
    sage: p.minimize( -x )
Expected:
    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
Got:
    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
space_dim 2
-ZE -EM  +CM +GM  +CS +GS  -CP -GP  -SC +SG 
con_sys (up-to-date)
topology NECESSARILY_CLOSED
2 x 3 (sorted)
index_first_pending 2
-1 3 2 =
1 0 0 >=

gen_sys (up-to-date)
topology NECESSARILY_CLOSED
2 x 3 (not_sorted)
index_first_pending 2
0 2 -3 L
2 0 1 P

sat_c
0 x 0

sat_g
2 x 2
0 0 
0 1 

**********************************************************************
File "/usr/share/sage/devel/sage/sage/libs/ppl.pyx", line 2204:
    sage: C_Polyhedron(1, 'empty').max_space_dimension()
Expected:
    1152921504606846973
Got:
    357913939
size 3 1 3 2 f -RPI_V -RPI  -NNC_V -NNC
**********************************************************************
3 items had failures:
   1 of  15 in __main__.example_29
   1 of  15 in __main__.example_30
   1 of   4 in __main__.example_48
***Test Failed*** 3 failures.
For whitespace errors, see the file /home/francois/.sage/tmp/.doctest_ppl.py
         [15.8 s]
 
----------------------------------------------------------------------
The following tests failed:


        sage -t -force_lib "devel/sage/sage/libs/ppl.pyx"
Total time for all tests: 15.8 seconds
```



---

archive/issue_comments_105470.json:
```json
{
    "body": "<a id='comment:43'></a>Francois, I fixed the 32 bit issue in `max_space_dimension()` a while ago, so you have an old version of the patch.\n\nAbout the other errors, is this on Gentoo with your own PPL library? I suggest you use the Sage spkg since there are certain configuration options that I rely on.",
    "created_at": "2011-01-29T19:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105470",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>Francois, I fixed the 32 bit issue in `max_space_dimension()` a while ago, so you have an old version of the patch.

About the other errors, is this on Gentoo with your own PPL library? I suggest you use the Sage spkg since there are certain configuration options that I rely on.



---

archive/issue_comments_105471.json:
```json
{
    "body": "<a id='comment:44'></a>OK I will check the patch, it is possible that I have add it sitting there for a while before using it. \n\nI'll have to check your configuration options but from my porting point of view it has to be conservative with what we have in Gentoo since ppl is part of the toolchain (you need it to build gcc with graphite support). I can work out something if it isn't but that will be a downright pain. I'll keep you posted on that.",
    "created_at": "2011-01-29T20:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105471",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>OK I will check the patch, it is possible that I have add it sitting there for a while before using it. 

I'll have to check your configuration options but from my porting point of view it has to be conservative with what we have in Gentoo since ppl is part of the toolchain (you need it to build gcc with graphite support). I can work out something if it isn't but that will be a downright pain. I'll keep you posted on that.



---

archive/issue_comments_105472.json:
```json
{
    "body": "<a id='comment:45'></a>Here is the PPL configuration:\n\n```\n./configure --prefix=\"$SAGE_LOCAL\" --with-gmp-prefix=\"$SAGE_LOCAL\" --enable-fpmath=no --enable-coefficients=mpz --enable-interfaces=c++ \n```\nI need the GMP/MPIR based coefficients and C++ interface. PPL supports some tricks to work with floating point numbers as coefficients, but I'm not using that as it obviously comes with restrictions on the allowed coefficients. Also, the PPL Cython wrapper turns off the FPU rounding mode that PPL's floating point arithmetic relies on.",
    "created_at": "2011-01-29T20:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105472",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>Here is the PPL configuration:

```
./configure --prefix="$SAGE_LOCAL" --with-gmp-prefix="$SAGE_LOCAL" --enable-fpmath=no --enable-coefficients=mpz --enable-interfaces=c++ 
```
I need the GMP/MPIR based coefficients and C++ interface. PPL supports some tricks to work with floating point numbers as coefficients, but I'm not using that as it obviously comes with restrictions on the allowed coefficients. Also, the PPL Cython wrapper turns off the FPU rounding mode that PPL's floating point arithmetic relies on.



---

archive/issue_comments_105473.json:
```json
{
    "body": "<a id='comment:46'></a>I still get\n\n```\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/libs/ppl.pyx\", line 1271:\n    sage: p.maximize( +x )\nExpected:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}\nGot:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/libs/ppl.pyx\", line 1340:\n    sage: p.minimize( -x )\nExpected:\n    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\nGot:\n    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\n```\nOn x86 but not on amd64. I am guessing from the configuration log on my amd64 \nmachine and the configure.ac file that --enable-fpmath=no is the same as the \ndefault and enable use of 387 and sse instructions. --enable-coefficients also currently default to mpz, and we enable c++ by default. So it seems all good configuration wise.",
    "created_at": "2011-01-31T01:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105473",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:46'></a>I still get

```
**********************************************************************
File "/usr/share/sage/devel/sage/sage/libs/ppl.pyx", line 1271:
    sage: p.maximize( +x )
Expected:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}
Got:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}
**********************************************************************
File "/usr/share/sage/devel/sage/sage/libs/ppl.pyx", line 1340:
    sage: p.minimize( -x )
Expected:
    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
Got:
    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
```
On x86 but not on amd64. I am guessing from the configuration log on my amd64 
machine and the configure.ac file that --enable-fpmath=no is the same as the 
default and enable use of 387 and sse instructions. --enable-coefficients also currently default to mpz, and we enable c++ by default. So it seems all good configuration wise.



---

archive/issue_comments_105474.json:
```json
{
    "body": "<a id='comment:47'></a>more upsetting. The test pass on my x86-macos set up. I'll will have to check that's not limited to my own old home computer.",
    "created_at": "2011-01-31T02:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105474",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>more upsetting. The test pass on my x86-macos set up. I'll will have to check that's not limited to my own old home computer.



---

archive/issue_comments_105475.json:
```json
{
    "body": "<a id='comment:48'></a>387 and SSE instructions are floating point math. Which versions of PPL are you using? Am I right in the assumption that this is only with Gentoo's ppl library and not with my ppl spkg? If yes, can you open a separate ticket for Gentoo overlay bugs?",
    "created_at": "2011-01-31T02:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105475",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:48'></a>387 and SSE instructions are floating point math. Which versions of PPL are you using? Am I right in the assumption that this is only with Gentoo's ppl library and not with my ppl spkg? If yes, can you open a separate ticket for Gentoo overlay bugs?



---

archive/issue_comments_105476.json:
```json
{
    "body": "<a id='comment:49'></a>ppl is 0.11, same as yours unless you patched it. We don't.\nFor all intent and purpose I am the co-maintainer of sage-on-gentoo by the way.\nYou just asked me to open a bug with myself :)\nYes this is not with your ppl spkg, I will have to create a set up to compare\nresults with vanilla sage and see what's different on x86. But just to make my point,\nwe leave enable-fpmath and enable-coefficients to their defaults which happens to be \nwhat you choose (unless you can point to something subbtle somewhere else), from\nconfigure.ac:\n\n```\nenableval=default\nfpmath_may_use_387=yes\nfpmath_may_use_sse=yes\nAC_MSG_CHECKING([whether to select specific floating point arithmetics])\nAC_ARG_ENABLE(fpmath,\n  AS_HELP_STRING([--enable-fpmath=INSTRUCTION_SET],\n                 [select floating point arithmetics]))\ncase \"${enableval}\" in\nsse)\n  AC_MSG_RESULT(sse)\n  OPT_FLAGS=\"$OPT_FLAGS -msse -mfpmath=sse\"\n  # The SSE instruction set only supports single precision arithmetics:\n  # double and extended precision arithmetics is still done using 387.\n  ;;\nsse2)\n  AC_MSG_RESULT(sse2)\n  OPT_FLAGS=\"$OPT_FLAGS -msse2 -mfpmath=sse\"\n  # SSE2 still does not support extended precision arithmetics.\n  ;;\n387)\n  AC_MSG_RESULT(387)\n  OPT_FLAGS=\"$OPT_FLAGS -mno-sse -mno-sse2 -mfpmath=387\"\n  # Note that the -mno-sse* and -mfpmath options are only guaranteed\n  # to work with GCC.\n  if test x\"$GCC\" = xyes\n  then\n    fpmath_may_use_sse=no\n  fi\n  ;;\nsse+387)\n  AC_MSG_RESULT(sse+387)\n  OPT_FLAGS=\"$OPT_FLAGS -msse -mfpmath=sse,387\"\n  ;;\nsse2+387)\n  AC_MSG_RESULT(sse2+387)\n  OPT_FLAGS=\"$OPT_FLAGS -msse2 -mfpmath=sse,387\"\n  ;;\ndefault)\n  AC_MSG_RESULT(default)\n  ;;\nno)\n  AC_MSG_RESULT(default)\n  ;;\n*)\n  AC_MSG_ERROR([bad value ${enableval} for --enable-fpmath, needs sse, sse2, 387, sse+387, sse2+387, default or no])\n  ;;\nesac\n```\nAs you can see just saying \"no\" leaves you with the same thing as \"default\" and that is 387 and sse. Same thing for coefficient:\n\n```\nenableval=mpz\nAC_MSG_CHECKING([the type of integral values to use as coefficients])\nAC_ARG_ENABLE(coefficients,\n  AS_HELP_STRING([--enable-coefficients=TYPE],\n                 [select the type of the coefficients]))\ncase \"${enableval}\" in\nnative-int8)\n  AC_MSG_RESULT([native 8 bits integers])\n  coefficient_kind=native\n  coefficient_bits=8\n  coefficient_mnemonic=nint8\n  ;;\nnative-int16)\n  AC_MSG_RESULT([native 16 bits integers])\n  coefficient_kind=native\n  coefficient_bits=16\n  coefficient_mnemonic=nint16\n  ;;\nnative-int32)\n  AC_MSG_RESULT([native 32 bits integers])\n  coefficient_kind=native\n  coefficient_bits=32\n  coefficient_mnemonic=nint32\n  ;;\nnative-int64)\n  AC_MSG_RESULT([native 64 bits integers])\n  coefficient_kind=native\n  coefficient_bits=64\n  coefficient_mnemonic=nint64\n  ;;\nchecked-int8)\n  AC_MSG_RESULT([checked 8 bits integers])\n  coefficient_kind=checked\n  coefficient_bits=8\n  coefficient_mnemonic=int8\n  ;;\nchecked-int16)\n  AC_MSG_RESULT([checked 16 bits integers])\n  coefficient_kind=checked\n  coefficient_bits=16\n  coefficient_mnemonic=int16\n  ;;\nchecked-int32)\n  AC_MSG_RESULT([checked 32 bits integers])\n  coefficient_kind=checked\n  coefficient_bits=32\n  coefficient_mnemonic=int32\n  ;;\nchecked-int64)\n  AC_MSG_RESULT([checked 64 bits integers])\n  coefficient_kind=checked\n  coefficient_bits=64\n  coefficient_mnemonic=int64\n  ;;\nmpz)\n  AC_MSG_RESULT([GMP mpz])\n  coefficient_kind=unbounded\n  coefficient_bits=0\n  coefficient_mnemonic=mpz\n  ;;\n*)\n  AC_MSG_ERROR([bad value ${enableval} for --enable-coefficients, checked-int32, checked-int64, checked-int16, checked-int8, mpz, native-int32, native-int64, native-int16 or native-int8])\n  ;;\nesac\n```\nAgain mpz is the default if you don't pass anything. \n\nSo unless you have patched these behaviors - and you didn't, we have very similar configurations, we pass \n\n```\n--disable-debugging --disable-optimization --enable-ppl_lpsol --disable-pch --disable-watchdog\n```\nSince I have a different result for two different x86 setup I am wondering\nif the great age of my home machine (close to 8 years) is a factor.",
    "created_at": "2011-01-31T03:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105476",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'></a>ppl is 0.11, same as yours unless you patched it. We don't.
For all intent and purpose I am the co-maintainer of sage-on-gentoo by the way.
You just asked me to open a bug with myself :)
Yes this is not with your ppl spkg, I will have to create a set up to compare
results with vanilla sage and see what's different on x86. But just to make my point,
we leave enable-fpmath and enable-coefficients to their defaults which happens to be 
what you choose (unless you can point to something subbtle somewhere else), from
configure.ac:

```
enableval=default
fpmath_may_use_387=yes
fpmath_may_use_sse=yes
AC_MSG_CHECKING([whether to select specific floating point arithmetics])
AC_ARG_ENABLE(fpmath,
  AS_HELP_STRING([--enable-fpmath=INSTRUCTION_SET],
                 [select floating point arithmetics]))
case "${enableval}" in
sse)
  AC_MSG_RESULT(sse)
  OPT_FLAGS="$OPT_FLAGS -msse -mfpmath=sse"
  # The SSE instruction set only supports single precision arithmetics:
  # double and extended precision arithmetics is still done using 387.
  ;;
sse2)
  AC_MSG_RESULT(sse2)
  OPT_FLAGS="$OPT_FLAGS -msse2 -mfpmath=sse"
  # SSE2 still does not support extended precision arithmetics.
  ;;
387)
  AC_MSG_RESULT(387)
  OPT_FLAGS="$OPT_FLAGS -mno-sse -mno-sse2 -mfpmath=387"
  # Note that the -mno-sse* and -mfpmath options are only guaranteed
  # to work with GCC.
  if test x"$GCC" = xyes
  then
    fpmath_may_use_sse=no
  fi
  ;;
sse+387)
  AC_MSG_RESULT(sse+387)
  OPT_FLAGS="$OPT_FLAGS -msse -mfpmath=sse,387"
  ;;
sse2+387)
  AC_MSG_RESULT(sse2+387)
  OPT_FLAGS="$OPT_FLAGS -msse2 -mfpmath=sse,387"
  ;;
default)
  AC_MSG_RESULT(default)
  ;;
no)
  AC_MSG_RESULT(default)
  ;;
*)
  AC_MSG_ERROR([bad value ${enableval} for --enable-fpmath, needs sse, sse2, 387, sse+387, sse2+387, default or no])
  ;;
esac
```
As you can see just saying "no" leaves you with the same thing as "default" and that is 387 and sse. Same thing for coefficient:

```
enableval=mpz
AC_MSG_CHECKING([the type of integral values to use as coefficients])
AC_ARG_ENABLE(coefficients,
  AS_HELP_STRING([--enable-coefficients=TYPE],
                 [select the type of the coefficients]))
case "${enableval}" in
native-int8)
  AC_MSG_RESULT([native 8 bits integers])
  coefficient_kind=native
  coefficient_bits=8
  coefficient_mnemonic=nint8
  ;;
native-int16)
  AC_MSG_RESULT([native 16 bits integers])
  coefficient_kind=native
  coefficient_bits=16
  coefficient_mnemonic=nint16
  ;;
native-int32)
  AC_MSG_RESULT([native 32 bits integers])
  coefficient_kind=native
  coefficient_bits=32
  coefficient_mnemonic=nint32
  ;;
native-int64)
  AC_MSG_RESULT([native 64 bits integers])
  coefficient_kind=native
  coefficient_bits=64
  coefficient_mnemonic=nint64
  ;;
checked-int8)
  AC_MSG_RESULT([checked 8 bits integers])
  coefficient_kind=checked
  coefficient_bits=8
  coefficient_mnemonic=int8
  ;;
checked-int16)
  AC_MSG_RESULT([checked 16 bits integers])
  coefficient_kind=checked
  coefficient_bits=16
  coefficient_mnemonic=int16
  ;;
checked-int32)
  AC_MSG_RESULT([checked 32 bits integers])
  coefficient_kind=checked
  coefficient_bits=32
  coefficient_mnemonic=int32
  ;;
checked-int64)
  AC_MSG_RESULT([checked 64 bits integers])
  coefficient_kind=checked
  coefficient_bits=64
  coefficient_mnemonic=int64
  ;;
mpz)
  AC_MSG_RESULT([GMP mpz])
  coefficient_kind=unbounded
  coefficient_bits=0
  coefficient_mnemonic=mpz
  ;;
*)
  AC_MSG_ERROR([bad value ${enableval} for --enable-coefficients, checked-int32, checked-int64, checked-int16, checked-int8, mpz, native-int32, native-int64, native-int16 or native-int8])
  ;;
esac
```
Again mpz is the default if you don't pass anything. 

So unless you have patched these behaviors - and you didn't, we have very similar configurations, we pass 

```
--disable-debugging --disable-optimization --enable-ppl_lpsol --disable-pch --disable-watchdog
```
Since I have a different result for two different x86 setup I am wondering
if the great age of my home machine (close to 8 years) is a factor.



---

archive/issue_comments_105477.json:
```json
{
    "body": "<a id='comment:50'></a>I know that you are doing the sage-on-gentoo, I'm asking you to open a different ticket on the Sage track for the gentoo ebuild issues and stop hijacking this ticket :-P\n\nAs far as I know, I'm not using any floating point code in ppl. So your configuration seems to be fine. But clearly your ppl returns a wrong result. Is your compiler/toolchain up to date on your antique computer?",
    "created_at": "2011-01-31T03:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105477",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:50'></a>I know that you are doing the sage-on-gentoo, I'm asking you to open a different ticket on the Sage track for the gentoo ebuild issues and stop hijacking this ticket :-P

As far as I know, I'm not using any floating point code in ppl. So your configuration seems to be fine. But clearly your ppl returns a wrong result. Is your compiler/toolchain up to date on your antique computer?



---

archive/issue_comments_105478.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:50 vbraun]:\n> I know that you are doing the sage-on-gentoo, I'm asking you to open a different ticket on the Sage track for the gentoo ebuild issues and stop hijacking this ticket :-P\n> \n> As far as I know, I'm not using any floating point code in ppl. So your configuration seems to be fine. But clearly your ppl returns a wrong result. Is your compiler/toolchain up to date on your antique computer?\n\n\nYes it is (gcc-4.5.2/binutils-2.20.1/glibc-2.11.2). But I will abide to your requests \nand stop spamming this ticket. I will only abuse it again to post positive reviews (I hope).",
    "created_at": "2011-01-31T03:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105478",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:51'></a>Replying to [comment:50 vbraun]:
> I know that you are doing the sage-on-gentoo, I'm asking you to open a different ticket on the Sage track for the gentoo ebuild issues and stop hijacking this ticket :-P
> 
> As far as I know, I'm not using any floating point code in ppl. So your configuration seems to be fine. But clearly your ppl returns a wrong result. Is your compiler/toolchain up to date on your antique computer?


Yes it is (gcc-4.5.2/binutils-2.20.1/glibc-2.11.2). But I will abide to your requests 
and stop spamming this ticket. I will only abuse it again to post positive reviews (I hope).



---

archive/issue_comments_105479.json:
```json
{
    "body": "<a id='comment:52'></a>I had some `sig_on` without corresponding `sig_off`'s when exceptions were raised, the updated patch fixes that. Now everything plays nicely with Jeroen' sigon/off debugging patch at #10030.\n\nMarshall, considering that it now builds on t2, how about a positive review? ;-)",
    "created_at": "2011-01-31T04:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105479",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>I had some `sig_on` without corresponding `sig_off`'s when exceptions were raised, the updated patch fixes that. Now everything plays nicely with Jeroen' sigon/off debugging patch at #10030.

Marshall, considering that it now builds on t2, how about a positive review? ;-)



---

archive/issue_comments_105480.json:
```json
{
    "body": "<a id='comment:53'></a>I unfortunately not give a positive review. I tested this again on a vanilla\nsage-4.6.2.alpha4 (as in _NOT_ sage-on-gentoo) with the latest version of the \npatch, spkg, install and deps and I still get the same doctest failures.\nsage -testall didn't report any broken tests before applying the patch.\nMy opinion is that if this gets merged in an alpha release we will see\nthis failure more on 32bit linux.",
    "created_at": "2011-02-05T10:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105480",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:53'></a>I unfortunately not give a positive review. I tested this again on a vanilla
sage-4.6.2.alpha4 (as in _NOT_ sage-on-gentoo) with the latest version of the 
patch, spkg, install and deps and I still get the same doctest failures.
sage -testall didn't report any broken tests before applying the patch.
My opinion is that if this gets merged in an alpha release we will see
this failure more on 32bit linux.



---

archive/issue_comments_105481.json:
```json
{
    "body": "<a id='comment:54'></a>Can you give more details? Which hardware is it failing on, what is the result of the PPL testsuite (build with SAGE_CHECK=yes), is your gcc configured to use ppl (how is that working out for you), can you reproduce the issue with a supported linux distribution, ...",
    "created_at": "2011-02-05T12:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105481",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'></a>Can you give more details? Which hardware is it failing on, what is the result of the PPL testsuite (build with SAGE_CHECK=yes), is your gcc configured to use ppl (how is that working out for you), can you reproduce the issue with a supported linux distribution, ...



---

archive/issue_comments_105482.json:
```json
{
    "body": "<a id='comment:55'></a>I've updated the PPL spkg to the new upstream version 0.11.1 and tested it on Fedora 14 i386. It passes all tests on my system, so I'm pretty confident that it works fine on 32bit.",
    "created_at": "2011-02-20T19:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105482",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:55'></a>I've updated the PPL spkg to the new upstream version 0.11.1 and tested it on Fedora 14 i386. It passes all tests on my system, so I'm pretty confident that it works fine on 32bit.



---

archive/issue_comments_105483.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.1.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n+* #10233: Incomplete cython search path in `setup.py`\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-02-20T19:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105483",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,27 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.1.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
+* #10233: Incomplete cython search path in `setup.py`
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105484.json:
```json
{
    "body": "<a id='comment:56'></a>Volker - I still can't get this to work on t2, but I think that's because of my Solaris ignorance.  How did you build and test on Solaris - in particular, did you ever change your environment variables somehow?",
    "created_at": "2011-02-21T14:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105484",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:56'></a>Volker - I still can't get this to work on t2, but I think that's because of my Solaris ignorance.  How did you build and test on Solaris - in particular, did you ever change your environment variables somehow?



---

archive/issue_comments_105485.json:
```json
{
    "body": "<a id='comment:57'></a>Oops, I accidentally dropped the fix for the `newest_version` check that is required on t2, see comment:41. Sorry about that.\n\nUpdated spkg fixes it and builds on t2.\n\nMarshall: Are you asking about building all of Sage on t2? I don't remember any specific problem there, just source the t2-setup:\n\n```\n. /usr/local/bin/t2-setup\nmake\n```\nIf you put stuff into your .profile and it is not picked up you are using a different shell with different initalization files. You can also use a binary distribution, `sage-4.6.1-sunos-32bit-5.10-sun4v-SunOS.tar.gz` works.",
    "created_at": "2011-02-21T14:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105485",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:57'></a>Oops, I accidentally dropped the fix for the `newest_version` check that is required on t2, see comment:41. Sorry about that.

Updated spkg fixes it and builds on t2.

Marshall: Are you asking about building all of Sage on t2? I don't remember any specific problem there, just source the t2-setup:

```
. /usr/local/bin/t2-setup
make
```
If you put stuff into your .profile and it is not picked up you are using a different shell with different initalization files. You can also use a binary distribution, `sage-4.6.1-sunos-32bit-5.10-sun4v-SunOS.tar.gz` works.



---

archive/issue_comments_105486.json:
```json
{
    "body": "<a id='comment:58'></a>I noticed that 0.11.2 is out and from the release notes it sounds like you had some wish granted:\n\n```\nBugfixes\n========\n\no  Fixed the semantics of the `--disable-fpmath' configure option\n   (which is equivalent to `--enable-fpmath=no').  It now disables all\n   floating point computations and, consequently, all numerical\n   abstractions based on floating point numbers.\n\no  The PPL no longer overwrites the SIGILL signal handler.\n\no  Minor documentation fixes.\n\no  Portability improved.\n```",
    "created_at": "2011-03-07T22:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105486",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:58'></a>I noticed that 0.11.2 is out and from the release notes it sounds like you had some wish granted:

```
Bugfixes
========

o  Fixed the semantics of the `--disable-fpmath' configure option
   (which is equivalent to `--enable-fpmath=no').  It now disables all
   floating point computations and, consequently, all numerical
   abstractions based on floating point numbers.

o  The PPL no longer overwrites the SIGILL signal handler.

o  Minor documentation fixes.

o  Portability improved.
```



---

archive/issue_comments_105487.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+Dependencies:\n+* #10094: cython and c++\n+* #9828: Upgrade to Cython 0.13\n+* #10233: Incomplete cython search path in `setup.py`\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-03-08T11:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105487",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,27 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+Dependencies:
+* #10094: cython and c++
+* #9828: Upgrade to Cython 0.13
+* #10233: Incomplete cython search path in `setup.py`
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105488.json:
```json
{
    "body": "<a id='comment:59'></a>I updated my ppl spkg to 0.11.2, see the link in the ticket description. Builds and tests correctly on F14 x86_64, i384, and on t2.math.",
    "created_at": "2011-03-08T11:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105488",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:59'></a>I updated my ppl spkg to 0.11.2, see the link in the ticket description. Builds and tests correctly on F14 x86_64, i384, and on t2.math.



---

archive/issue_comments_105489.json:
```json
{
    "body": "<a id='comment:60'></a>I'm going to look at this again this week, hopefully can give a positive review soon.  I'm going to try to install on some of the skynet machines and do a little more testing.  It would be great to get this into sage-4.7.\n\nI just tested on a mac, with your latest package, and I think an error message might have changed.  I get the following doctest \"failure\" (test is expected to fail, just not with this message):\n\n```\nFile \"/Users/mh/sagestuff/sage-4.7.alpha2/devel/sage-t1/sage/libs/ppl.pyx\", line 4124:\n    sage: line.divisor()\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Only points and closure points have a divisor.\nGot:\n    Traceback (most recent call last):\n      File \"/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_108[8]>\", line 1, in <module>\n        line.divisor()###line 4124:\n    sage: line.divisor()\n      File \"ppl.pyx\", line 4131, in sage.libs.ppl.Generator.divisor (sage/libs/ppl.cpp:13949)\n        mpz_set(c.value, self.thisptr.divisor().get_mpz_t())\n    ValueError: PPL::Generator::divisor():\n    *this is neither a point nor a closure point.\n\n```",
    "created_at": "2011-03-14T11:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105489",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:60'></a>I'm going to look at this again this week, hopefully can give a positive review soon.  I'm going to try to install on some of the skynet machines and do a little more testing.  It would be great to get this into sage-4.7.

I just tested on a mac, with your latest package, and I think an error message might have changed.  I get the following doctest "failure" (test is expected to fail, just not with this message):

```
File "/Users/mh/sagestuff/sage-4.7.alpha2/devel/sage-t1/sage/libs/ppl.pyx", line 4124:
    sage: line.divisor()
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Only points and closure points have a divisor.
Got:
    Traceback (most recent call last):
      File "/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/mh/sagestuff/sage-4.7.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_108[8]>", line 1, in <module>
        line.divisor()###line 4124:
    sage: line.divisor()
      File "ppl.pyx", line 4131, in sage.libs.ppl.Generator.divisor (sage/libs/ppl.cpp:13949)
        mpz_set(c.value, self.thisptr.divisor().get_mpz_t())
    ValueError: PPL::Generator::divisor():
    *this is neither a point nor a closure point.

```



---

archive/issue_comments_105490.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-03-14T11:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105490",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_105491.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-03-14T20:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105491",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_105492.json:
```json
{
    "body": "<a id='comment:62'></a>Hi Marshall, \n\nSage-4.7.alpha2 hasn't been released yet, you are cheating :-P  \n\nIt seems like Cython-0.14.1 got smarter and now translates the C++ `std::invalid_argument` exception into a Python `ValueError`, while the older Cython only threw a nondescript `RuntimeError`. So I don't have to catch the exception any more, perfect. Attached patch fixes the doctest, I only removed the try/except block in `divisor()`.\n\nFor anybody who is still using Sage-4.6.x: You will encounter one doctest failure but that is harmless.",
    "created_at": "2011-03-14T20:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105492",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:62'></a>Hi Marshall, 

Sage-4.7.alpha2 hasn't been released yet, you are cheating :-P  

It seems like Cython-0.14.1 got smarter and now translates the C++ `std::invalid_argument` exception into a Python `ValueError`, while the older Cython only threw a nondescript `RuntimeError`. So I don't have to catch the exception any more, perfect. Attached patch fixes the doctest, I only removed the try/except block in `divisor()`.

For anybody who is still using Sage-4.6.x: You will encounter one doctest failure but that is harmless.



---

archive/issue_comments_105493.json:
```json
{
    "body": "Attachment [trac_10039_parma_polyhedra_library.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_parma_polyhedra_library.patch) by @vbraun created at 2011-03-14 20:13:20\n\nUpdated patch",
    "created_at": "2011-03-14T20:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105493",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10039_parma_polyhedra_library.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_parma_polyhedra_library.patch) by @vbraun created at 2011-03-14 20:13:20

Updated patch



---

archive/issue_comments_105494.json:
```json
{
    "body": "<a id='comment:63'></a>OK, this looks good on OS X, linux, and solaris.  I built and tested on the skynet machine \"mark\", and everything seemed fine except for some doctest errors which all seem related to timeout issues - not surprising perhaps since mark is quite slow and has a load of other processes on it right now.  So I'm not sure I would consider those failures blockers for this ticket.\nThe failures for mark are at:\n[http://sage.math.washington.edu/home/mhampton/ppltest2.txt](http://sage.math.washington.edu/home/mhampton/ppltest2.txt)",
    "created_at": "2011-03-15T16:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105494",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:63'></a>OK, this looks good on OS X, linux, and solaris.  I built and tested on the skynet machine "mark", and everything seemed fine except for some doctest errors which all seem related to timeout issues - not surprising perhaps since mark is quite slow and has a load of other processes on it right now.  So I'm not sure I would consider those failures blockers for this ticket.
The failures for mark are at:
[http://sage.math.washington.edu/home/mhampton/ppltest2.txt](http://sage.math.washington.edu/home/mhampton/ppltest2.txt)



---

archive/issue_comments_105495.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-15T19:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105495",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105496.json:
```json
{
    "body": "<a id='comment:64'></a>Sorry, I needed to read the test_executable docs.  Clearly these are just timeout issues, and running those doctests with longer values works fine on mark.  \n\nI've tested this on a variety of OS X 10.6, linux, and solaris machines now.  Hopefully this can be included in an alpha or rc0 of sage-4.7 for wider testing.",
    "created_at": "2011-03-15T19:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105496",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:64'></a>Sorry, I needed to read the test_executable docs.  Clearly these are just timeout issues, and running those doctests with longer values works fine on mark.  

I've tested this on a variety of OS X 10.6, linux, and solaris machines now.  Hopefully this can be included in an alpha or rc0 of sage-4.7 for wider testing.



---

archive/issue_comments_105497.json:
```json
{
    "body": "<a id='comment:65'></a>Can someone please post step-by-step instructions how to apply it? I tried to install the package (it went fine) and apply the last patch, but when I build I get the error\n\n```\n----------------------------------------------------------\nsage: Building and installing modified Sage library files.\n\n\nInstalling c_lib\nscons: `install' is up to date.\nUpdating Cython code....\nTraceback (most recent call last):\n  File \"setup.py\", line 859, in <module>\n    queue = compile_command_list(ext_modules, deps)\n  File \"setup.py\", line 819, in compile_command_list\n    dep_file, dep_time = deps.newest_dep(f)\n  File \"setup.py\", line 726, in newest_dep\n    for f in self.all_deps(filename):\n  File \"setup.py\", line 707, in all_deps\n    for f in self.immediate_deps(filename):\n  File \"setup.py\", line 689, in immediate_deps\n    self._deps[filename] = self.parse_deps(filename)\n  File \"setup.py\", line 679, in parse_deps\n    raise IOError, \"could not find dependency %s included in %s.\"%(path, filename)\nIOError: could not find dependency ppl.hh included in sage/libs/ppl.pyx.\nsage: There was an error installing modified sage library code.\n```",
    "created_at": "2011-03-15T19:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105497",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:65'></a>Can someone please post step-by-step instructions how to apply it? I tried to install the package (it went fine) and apply the last patch, but when I build I get the error

```
----------------------------------------------------------
sage: Building and installing modified Sage library files.


Installing c_lib
scons: `install' is up to date.
Updating Cython code....
Traceback (most recent call last):
  File "setup.py", line 859, in <module>
    queue = compile_command_list(ext_modules, deps)
  File "setup.py", line 819, in compile_command_list
    dep_file, dep_time = deps.newest_dep(f)
  File "setup.py", line 726, in newest_dep
    for f in self.all_deps(filename):
  File "setup.py", line 707, in all_deps
    for f in self.immediate_deps(filename):
  File "setup.py", line 689, in immediate_deps
    self._deps[filename] = self.parse_deps(filename)
  File "setup.py", line 679, in parse_deps
    raise IOError, "could not find dependency %s included in %s."%(path, filename)
IOError: could not find dependency ppl.hh included in sage/libs/ppl.pyx.
sage: There was an error installing modified sage library code.
```



---

archive/issue_comments_105498.json:
```json
{
    "body": "<a id='comment:66'></a>Andrey - that should have worked.  Installing the package should put ppl.hh in $SAGE_ROOT/local/include/ - is it there?  If the spkg installed OK, I don't know what would be wrong except the error that I sometimes make of working on two different copies of sage.",
    "created_at": "2011-03-15T20:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105498",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:66'></a>Andrey - that should have worked.  Installing the package should put ppl.hh in $SAGE_ROOT/local/include/ - is it there?  If the spkg installed OK, I don't know what would be wrong except the error that I sometimes make of working on two different copies of sage.



---

archive/issue_comments_105499.json:
```json
{
    "body": "<a id='comment:67'></a>It is, but I have realized that I didn't install dependencies. I guess I'll install 4.7.alpha1 and try again.",
    "created_at": "2011-03-15T20:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105499",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:67'></a>It is, but I have realized that I didn't install dependencies. I guess I'll install 4.7.alpha1 and try again.



---

archive/issue_events_025492.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-03-16T05:11:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10039#event-25492"
}
```



---

archive/issue_comments_105500.json:
```json
{
    "body": "<a id='comment:68'></a>Everything applies smooth now, sorry for the false alarm!",
    "created_at": "2011-03-16T05:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105500",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:68'></a>Everything applies smooth now, sorry for the false alarm!



---

archive/issue_comments_105501.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,22 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-03-16T11:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105501",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,22 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105502.json:
```json
{
    "body": "<a id='comment:69'></a>Some administrative issues:\n1. Now that #9433 is merged, changes to `spkg/install` and `spkg/standard/deps` should be made using `hg export tip` (producing an actual HG changeset for the `sage_root` repository).\n2. Please state clearly which patches have to be applied where.",
    "created_at": "2011-03-16T11:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105502",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>Some administrative issues:
1. Now that #9433 is merged, changes to `spkg/install` and `spkg/standard/deps` should be made using `hg export tip` (producing an actual HG changeset for the `sage_root` repository).
2. Please state clearly which patches have to be applied where.



---

archive/issue_comments_105503.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-03-17T11:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105503",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105504.json:
```json
{
    "body": "Patch to SAGE_ROOT repo",
    "created_at": "2011-03-21T16:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105504",
    "user": "https://github.com/vbraun"
}
```

Patch to SAGE_ROOT repo



---

archive/issue_comments_105505.json:
```json
{
    "body": "Attachment [trac_10039_SAGE_LOCAL_bin_repo.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_SAGE_LOCAL_bin_repo.patch) by @vbraun created at 2011-03-21 16:12:45\n\npatch to SAGE_LOCAL/bin repo",
    "created_at": "2011-03-21T16:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105505",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10039_SAGE_LOCAL_bin_repo.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_SAGE_LOCAL_bin_repo.patch) by @vbraun created at 2011-03-21 16:12:45

patch to SAGE_LOCAL/bin repo



---

archive/issue_comments_105506.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,28 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n+\n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+To apply this ticket\n+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`\n+* apply `trac_10039_parma_polyhedra_library.patch` to the Sage library\n+* apply `trac_10039_root_repo.patch` the sage root repository\n+* apply `trac_10039_SAGE_LOCAL_bin_repo.patch` to the `$SAGE_LOCAL/bin` repository\n \n \n Author: Volker Braun\n```\n",
    "created_at": "2011-03-21T16:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105506",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,28 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
+
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+To apply this ticket
+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`
+* apply `trac_10039_parma_polyhedra_library.patch` to the Sage library
+* apply `trac_10039_root_repo.patch` the sage root repository
+* apply `trac_10039_SAGE_LOCAL_bin_repo.patch` to the `$SAGE_LOCAL/bin` repository
 
 
 Author: Volker Braun
```




---

archive/issue_comments_105507.json:
```json
{
    "body": "<a id='comment:71'></a>The patches are explained in the ticket description.",
    "created_at": "2011-03-21T16:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105507",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:71'></a>The patches are explained in the ticket description.



---

archive/issue_comments_105508.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-03-21T16:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105508",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_105509.json:
```json
{
    "body": "<a id='comment:72'></a>back to positive review since I only repackaged existing changes.",
    "created_at": "2011-03-21T16:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105509",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:72'></a>back to positive review since I only repackaged existing changes.



---

archive/issue_comments_105510.json:
```json
{
    "body": "<a id='comment:73'></a>This ticket will also be an interesting test for #9433: adding a new spkg has not been tested before.",
    "created_at": "2011-03-26T15:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105510",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'></a>This ticket will also be an interesting test for #9433: adding a new spkg has not been tested before.



---

archive/issue_comments_105511.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-28T07:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105511",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_025493.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-28T07:18:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10039#event-25493"
}
```



---

archive/issue_comments_105512.json:
```json
{
    "body": "Attachment [10039_manifest.patch](tarball://root/attachments/some-uuid/ticket10039/10039_manifest.patch) by @jdemeyer created at 2011-03-30 07:49:41\n\nPatch to MANIFEST.in",
    "created_at": "2011-03-30T07:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105512",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [10039_manifest.patch](tarball://root/attachments/some-uuid/ticket10039/10039_manifest.patch) by @jdemeyer created at 2011-03-30 07:49:41

Patch to MANIFEST.in



---

archive/issue_comments_105513.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,30 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+To apply this ticket\n+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`\n+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library\n+* apply [attachment:10039_manifest.patch] to the Sage library\n+* apply [attachment:trac_10039_root_repo.patch] the sage root repository\n+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository\n+ \n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-03-30T07:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105513",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,30 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+To apply this ticket
+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`
+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library
+* apply [attachment:10039_manifest.patch] to the Sage library
+* apply [attachment:trac_10039_root_repo.patch] the sage root repository
+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository
+ 
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105514.json:
```json
{
    "body": "Changing status from closed to needs_work.",
    "created_at": "2011-03-30T07:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105514",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to needs_work.



---

archive/issue_events_025494.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-30T07:51:00Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10039#event-25494"
}
```



---

archive/issue_comments_105515.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-30T07:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105515",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105516.json:
```json
{
    "body": "<a id='comment:77'></a>On OS X 10.6 (both 32-bit and 64-bit):\n\n```\nsage -t -long  -force_lib devel/sage/sage/libs/ppl.pyx\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 4178:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_110[8]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 4178:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 4179:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_110[9]>\", line 1, in <module>\n        print err###line 4179:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 4444:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_124[8]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 4444:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 4445:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_124[9]>\", line 1, in <module>\n        print err###line 4445:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5056:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_149[8]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5056:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5057:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_149[9]>\", line 1, in <module>\n        print err###line 5057:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5293:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_161[8]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5293:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5294:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_161[9]>\", line 1, in <module>\n        print err###line 5294:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5572:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_176[5]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5572:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5573:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_176[6]>\", line 1, in <module>\n        print err###line 5573:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5822:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_189[5]>\", line 1, in <module>\n        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5822:\n    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py\", line 366, in test_executable\n        raise RuntimeError(\"timeout in test_executable()\")\n    RuntimeError: timeout in test_executable()\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 5823:\n    sage: print err\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_189[6]>\", line 1, in <module>\n        print err###line 5823:\n    sage: print err\n    NameError: name 'err' is not defined\n**********************************************************************\n```\n\nNote the default timeout of `test_executable()` is 10 seconds, which might simply be too short.",
    "created_at": "2011-03-31T11:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105516",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'></a>On OS X 10.6 (both 32-bit and 64-bit):

```
sage -t -long  -force_lib devel/sage/sage/libs/ppl.pyx
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 4178:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_110[8]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 4178:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 4179:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_110[9]>", line 1, in <module>
        print err###line 4179:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 4444:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_124[8]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 4444:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 4445:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_124[9]>", line 1, in <module>
        print err###line 4445:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5056:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_149[8]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5056:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5057:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_149[9]>", line 1, in <module>
        print err###line 5057:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5293:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_161[8]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5293:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5294:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_161[9]>", line 1, in <module>
        print err###line 5294:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5572:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_176[5]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5572:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5573:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_176[6]>", line 1, in <module>
        print err###line 5573:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5822:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_189[5]>", line 1, in <module>
        (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest###line 5822:
    sage: (out, err, ret) = test_executable(['sage', '-c', sage_cmd]);   # indirect doctest
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/lib/python/site-packages/sage/tests/cmdline.py", line 366, in test_executable
        raise RuntimeError("timeout in test_executable()")
    RuntimeError: timeout in test_executable()
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 5823:
    sage: print err
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/bsd-1/bsd_full/build/sage-4.7.alpha3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_189[6]>", line 1, in <module>
        print err###line 5823:
    sage: print err
    NameError: name 'err' is not defined
**********************************************************************
```

Note the default timeout of `test_executable()` is 10 seconds, which might simply be too short.



---

archive/issue_comments_105517.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-03-31T11:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105517",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105518.json:
```json
{
    "body": "<a id='comment:78'></a>On RHEL 5.3-64 (cleo), SUSE ES10-64 (iras), OpenSolaris 06.2009-32 (hawk), SunOS 5.10-32 (t2):\n\n```\nFile \"/scratch/buildbot/sage/t2-1/t2_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 1413:\n    sage: p.minimize( -x )\nExpected:\n    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\nGot:\n    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}\n```",
    "created_at": "2011-03-31T11:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105518",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'></a>On RHEL 5.3-64 (cleo), SUSE ES10-64 (iras), OpenSolaris 06.2009-32 (hawk), SunOS 5.10-32 (t2):

```
File "/scratch/buildbot/sage/t2-1/t2_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 1413:
    sage: p.minimize( -x )
Expected:
    {'minimum': False, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
Got:
    {'minimum': True, 'bounded': False, 'inf_d': 0, 'generator': None, 'inf_n': 0}
```



---

archive/issue_comments_105519.json:
```json
{
    "body": "<a id='comment:79'></a>On SunOS 5.10-32 (t2), OpenSolaris 06.2009-32 (hawk):\n\n```\nFile \"/scratch/buildbot/sage/t2-1/t2_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx\", line 1342:\n    sage: p.maximize( +x )\nExpected:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}\nGot:\n    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}\n```",
    "created_at": "2011-03-31T11:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105519",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:79'></a>On SunOS 5.10-32 (t2), OpenSolaris 06.2009-32 (hawk):

```
File "/scratch/buildbot/sage/t2-1/t2_full/build/sage-4.7.alpha3/devel/sage-main/sage/libs/ppl.pyx", line 1342:
    sage: p.maximize( +x )
Expected:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': False, 'generator': None}
Got:
    {'sup_d': 0, 'sup_n': 0, 'bounded': False, 'maximum': True, 'generator': None}
```



---

archive/issue_comments_105520.json:
```json
{
    "body": "<a id='comment:80'></a>See #11100 for the timeout problem.",
    "created_at": "2011-03-31T12:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105520",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'></a>See #11100 for the timeout problem.



---

archive/issue_comments_105521.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,31 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg\n+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+3. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+To apply this ticket\n+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`\n+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library\n+* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library\n+* apply [attachment:10039_manifest.patch] to the Sage library\n+* apply [attachment:trac_10039_root_repo.patch] the sage root repository\n+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository\n+ \n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-04-02T03:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105521",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,31 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. Spkg can be found here: http://www.stp.dias.ie/~vbraun/Sage/spkg/ppl-0.11.2.spkg
+2. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+3. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+To apply this ticket
+* copy the ppl spkg to `$SAGE_ROOT/spkg/standard`
+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library
+* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library
+* apply [attachment:10039_manifest.patch] to the Sage library
+* apply [attachment:trac_10039_root_repo.patch] the sage root repository
+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository
+ 
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105522.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-04-02T03:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105522",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105523.json:
```json
{
    "body": "<a id='comment:81'></a>I finally **got** the problem with the maximize/minimize doctest failure. If the linear function is not bounded on the polyhedron then it doesn't make sense to ask for whether its a maximum or minimum. And PPL then does not return a consistent value for the corresponding field. \n\nIn the attached patch I changed return value of the maximize/minimize methods to only return `{'bounded':False}` if the linear program is unbounded, since all other dictionary entries are not well-defined in that case. If the linear program is bounded then the returned dictionary is the same as before and contains information about the sup/inf value, whether it is a maximum, and where it is attained.\n\nThe new patch `trac_10039_ppl_fix_extremize.patch` needs to be applied on top of `trac_10039_parma_polyhedra_library.patch`, see also the ticket description. The new patch needs review.",
    "created_at": "2011-04-02T03:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105523",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:81'></a>I finally **got** the problem with the maximize/minimize doctest failure. If the linear function is not bounded on the polyhedron then it doesn't make sense to ask for whether its a maximum or minimum. And PPL then does not return a consistent value for the corresponding field. 

In the attached patch I changed return value of the maximize/minimize methods to only return `{'bounded':False}` if the linear program is unbounded, since all other dictionary entries are not well-defined in that case. If the linear program is bounded then the returned dictionary is the same as before and contains information about the sup/inf value, whether it is a maximum, and where it is attained.

The new patch `trac_10039_ppl_fix_extremize.patch` needs to be applied on top of `trac_10039_parma_polyhedra_library.patch`, see also the ticket description. The new patch needs review.



---

archive/issue_comments_105524.json:
```json
{
    "body": "<a id='comment:82'></a>That's good news and that wasn't just me then! I have my hands full at the moment so I won't be able to review it quickly but I am sure you have another reviewer around :)",
    "created_at": "2011-04-02T03:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105524",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:82'></a>That's good news and that wasn't just me then! I have my hands full at the moment so I won't be able to review it quickly but I am sure you have another reviewer around :)



---

archive/issue_comments_105525.json:
```json
{
    "body": "<a id='comment:83'></a>New patch looks good to me.  Still needs to be tested on the buildbots, but positive review in the hope that everything works fine.",
    "created_at": "2011-04-04T08:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105525",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:83'></a>New patch looks good to me.  Still needs to be tested on the buildbots, but positive review in the hope that everything works fine.



---

archive/issue_comments_105526.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-04-04T08:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105526",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105527.json:
```json
{
    "body": "<a id='comment:84'></a>Volker, you just need to put a proper commit message on your patch...",
    "created_at": "2011-04-04T09:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105527",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:84'></a>Volker, you just need to put a proper commit message on your patch...



---

archive/issue_comments_105528.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-04-04T09:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105528",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105529.json:
```json
{
    "body": "Attachment [trac_10039_ppl_fix_extremize.2.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_ppl_fix_extremize.2.patch) by @vbraun created at 2011-04-04 13:04:12\n\nUpdated patch",
    "created_at": "2011-04-04T13:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105529",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10039_ppl_fix_extremize.2.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_ppl_fix_extremize.2.patch) by @vbraun created at 2011-04-04 13:04:12

Updated patch



---

archive/issue_comments_105530.json:
```json
{
    "body": "Attachment [trac_10039_ppl_fix_extremize.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_ppl_fix_extremize.patch) by @vbraun created at 2011-04-04 13:04:29\n\nUpdated patch",
    "created_at": "2011-04-04T13:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105530",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10039_ppl_fix_extremize.patch](tarball://root/attachments/some-uuid/ticket10039/trac_10039_ppl_fix_extremize.patch) by @vbraun created at 2011-04-04 13:04:29

Updated patch



---

archive/issue_comments_105531.json:
```json
{
    "body": "<a id='comment:85'></a>Oops, sorry. New `trac_10039_ppl_fix_extremize.patch` now has a commit message, no other changes. Setting this back to positive review as only metadata changed.",
    "created_at": "2011-04-04T13:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105531",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'></a>Oops, sorry. New `trac_10039_ppl_fix_extremize.patch` now has a commit message, no other changes. Setting this back to positive review as only metadata changed.



---

archive/issue_comments_105532.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-04-04T13:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105532",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_025495.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-05T12:00:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10039#event-25495"
}
```



---

archive/issue_comments_105533.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,31 @@\n+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. \n+* ppl has already been widely tested on a multitude of platforms.\n+* Native C++ with a pure C interface.\n+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)\n \n+Official webpage: http://www.cs.unipr.it/ppl/\n+\n+My plan is to \n+1. Create a PPL spkg.\n+2. Write a Cython interface. \n+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`\n+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.\n+\n+Current status:\n+1. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.\n+2. Is split off into trac #10140.\n+\n+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html\n+\n+To apply this ticket:\n+* download the new spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg)\n+* copy the spkg to `$SAGE_ROOT/spkg/standard`\n+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library\n+* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library\n+* apply [attachment:10039_manifest.patch] to the Sage library\n+* apply [attachment:trac_10039_root_repo.patch] the sage root repository\n+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository\n+ \n \n Author: Volker Braun\n \n```\n",
    "created_at": "2011-04-12T08:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105533",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,31 @@
+The Parma Polyhedra Library (ppl) is for many workloads the fastest library for polyhedral computations. It is also high-quality code, for example GCC uses it (optionally) to optimize loops. 
+* ppl has already been widely tested on a multitude of platforms.
+* Native C++ with a pure C interface.
+* Contains a huge testsuite _and_ passes its own testsuite (in contrast to some other polydedral library that shall remain unnamed)
 
+Official webpage: http://www.cs.unipr.it/ppl/
+
+My plan is to 
+1. Create a PPL spkg.
+2. Write a Cython interface. 
+3. Base `sage.geometry.cone.Cone` on PPL instead of `Polyhedron/cddlib`
+4. Split `sage.geometry.polyhedra.Polyhedron` into an abstract base class and derived classes that use different polyhedral computation libraries.
+
+Current status:
+1. My cython wrapper for PPL is attached. It has full doctest coverage and any invalid input is caught and raises `ValueError`.
+2. Is split off into trac #10140.
+
+For convenience I mirrored the reference manual page here: http://www.stp.dias.ie/~vbraun/Sage/html/en/reference/sage/libs/ppl.html
+
+To apply this ticket:
+* download the new spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ppl-0.11.2.spkg)
+* copy the spkg to `$SAGE_ROOT/spkg/standard`
+* apply [attachment:trac_10039_parma_polyhedra_library.patch] to the Sage library
+* apply [attachment:trac_10039_ppl_fix_extremize.patch] to the Sage library
+* apply [attachment:10039_manifest.patch] to the Sage library
+* apply [attachment:trac_10039_root_repo.patch] the sage root repository
+* apply [attachment:trac_10039_SAGE_LOCAL_bin_repo.patch] to the `$SAGE_LOCAL/bin` repository
+ 
 
 Author: Volker Braun
 
```




---

archive/issue_comments_105534.json:
```json
{
    "body": "<a id='comment:87'></a>`www.stp.dias.ie` seems to be down, so I'm mirroring the spkg myself.",
    "created_at": "2011-04-12T08:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10039#issuecomment-105534",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:87'></a>`www.stp.dias.ie` seems to be down, so I'm mirroring the spkg myself.
