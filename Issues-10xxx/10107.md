# Issue 10107: Too many functions from databases/cremona.py are exported globally

archive/issues_010106.json:
```json
{
    "body": "In sage/databases/all.py:\n\n```\nfrom cremona import CremonaDatabase, \\\n     cremona_letter_code, parse_cremona_label, \\\n     old_cremona_letter_code, is_optimal_id\n```\nbut only the first of these should be global.\n\n\nAssignee: @JohnCremona\n\nKeywords: databases cremona\n\nReviewer: Robert Miller, Aly Deines\n\nAuthor: Mike Hansen\n\nMerged: sage-4.6.1.alpha2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10107\n\n",
    "closed_at": "2010-11-18T13:04:11Z",
    "created_at": "2010-10-09T12:01:33Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.1",
    "title": "Too many functions from databases/cremona.py are exported globally",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10107",
    "user": "https://github.com/JohnCremona"
}
```
In sage/databases/all.py:

```
from cremona import CremonaDatabase, \
     cremona_letter_code, parse_cremona_label, \
     old_cremona_letter_code, is_optimal_id
```
but only the first of these should be global.


Assignee: @JohnCremona

Keywords: databases cremona

Reviewer: Robert Miller, Aly Deines

Author: Mike Hansen

Merged: sage-4.6.1.alpha2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/10107





---

archive/issue_comments_101832.json:
```json
{
    "body": "Attachment [trac_10107.patch](tarball://root/attachments/some-uuid/ticket10107/trac_10107.patch) by @mwhansen created at 2010-10-09 20:06:44",
    "created_at": "2010-10-09T20:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101832",
    "user": "https://github.com/mwhansen"
}
```

Attachment [trac_10107.patch](tarball://root/attachments/some-uuid/ticket10107/trac_10107.patch) by @mwhansen created at 2010-10-09 20:06:44



---

archive/issue_comments_101833.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-10-10T17:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101833",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_101834.json:
```json
{
    "body": "<a id='comment:1'></a>This needs to be coordinated with #9907.",
    "created_at": "2010-10-10T17:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101834",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:1'></a>This needs to be coordinated with #9907.



---

archive/issue_comments_101835.json:
```json
{
    "body": "<a id='comment:2'></a>I don't really understand the connection between this and #9907, or what most of the patch is for!  Is it just that you don't want to get rid of a command which used to work from a sage: prompt without deprecating it first?",
    "created_at": "2010-10-10T17:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101835",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>I don't really understand the connection between this and #9907, or what most of the patch is for!  Is it just that you don't want to get rid of a command which used to work from a sage: prompt without deprecating it first?



---

archive/issue_comments_101836.json:
```json
{
    "body": "<a id='comment:3'></a>This patch has `from sage.misc.misc import sage_wraps ` while the patch at #9907 moves `sage_wraps` from `sage.misc.misc` to `sage.misc.decorators`.\n\nYes, most of the patch is to deprecate using those functions from the top level before removing them.  Since this shared some functionality with preexisting code, the idea was to unify the code.",
    "created_at": "2010-10-10T18:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101836",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:3'></a>This patch has `from sage.misc.misc import sage_wraps ` while the patch at #9907 moves `sage_wraps` from `sage.misc.misc` to `sage.misc.decorators`.

Yes, most of the patch is to deprecate using those functions from the top level before removing them.  Since this shared some functionality with preexisting code, the idea was to unify the code.



---

archive/issue_comments_101837.json:
```json
{
    "body": "<a id='comment:4'></a>If I apply #6094, #9907, #9919, and #10107 together on top of sage-4.6, all long tests pass. The code looks good.",
    "created_at": "2010-11-09T20:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101837",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:4'></a>If I apply #6094, #9907, #9919, and #10107 together on top of sage-4.6, all long tests pass. The code looks good.



---

archive/issue_comments_101838.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-11-09T20:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101838",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_101839.json:
```json
{
    "body": "<a id='comment:5'></a>I get various doctest errors in `sage/databases/cremona.py`:\n\n```\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha2/devel/sage-main/sage/databases/cremona.py\", line 102:\n    sage: is_optimal_id('b1')\nExpected:\n    True\nGot:\n    doctest:1: DeprecationWarning:\n    Using is_optimal_id from here is deprecated.  If you need to use it, please import it directly from sage.databases.cremona.\n    True\n```\nand several more like this.",
    "created_at": "2010-11-14T10:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101839",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>I get various doctest errors in `sage/databases/cremona.py`:

```
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha2/devel/sage-main/sage/databases/cremona.py", line 102:
    sage: is_optimal_id('b1')
Expected:
    True
Got:
    doctest:1: DeprecationWarning:
    Using is_optimal_id from here is deprecated.  If you need to use it, please import it directly from sage.databases.cremona.
    True
```
and several more like this.



---

archive/issue_comments_101840.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2010-11-14T10:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101840",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_101841.json:
```json
{
    "body": "Changing keywords from \"databases\" to \"databases cremona\".",
    "created_at": "2010-11-14T10:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101841",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "databases" to "databases cremona".



---

archive/issue_comments_101842.json:
```json
{
    "body": "Attachment [trac_10107-fix.patch](tarball://root/attachments/some-uuid/ticket10107/trac_10107-fix.patch) by @JohnCremona created at 2010-11-14 13:22:07\n\nreplaces previous",
    "created_at": "2010-11-14T13:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101842",
    "user": "https://github.com/JohnCremona"
}
```

Attachment [trac_10107-fix.patch](tarball://root/attachments/some-uuid/ticket10107/trac_10107-fix.patch) by @JohnCremona created at 2010-11-14 13:22:07

replaces previous



---

archive/issue_comments_101843.json:
```json
{
    "body": "<a id='comment:6'></a>The new patch deals with this (replaces previous).",
    "created_at": "2010-11-14T13:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101843",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'></a>The new patch deals with this (replaces previous).



---

archive/issue_comments_101844.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-14T13:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101844",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_101845.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-11-16T22:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101845",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_025764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-18T13:04:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10107#event-25764"
}
```



---

archive/issue_comments_101846.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-11-18T13:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101846",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_101847.json:
```json
{
    "body": "<a id='comment:11'></a>It's been over two years since these were deprecated; can they be removed from the global namespace?",
    "created_at": "2013-05-21T22:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101847",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:11'></a>It's been over two years since these were deprecated; can they be removed from the global namespace?



---

archive/issue_comments_101848.json:
```json
{
    "body": "<a id='comment:12'></a>I am happy with that.  I guess it needs a new ticket.  Will you make one and reference it from here?",
    "created_at": "2013-05-22T07:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101848",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'></a>I am happy with that.  I guess it needs a new ticket.  Will you make one and reference it from here?



---

archive/issue_comments_101849.json:
```json
{
    "body": "<a id='comment:13'></a>Okay, good. The new ticket is #14642.",
    "created_at": "2013-05-25T21:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101849",
    "user": "https://github.com/eviatarbach"
}
```

<a id='comment:13'></a>Okay, good. The new ticket is #14642.



---

archive/issue_comments_101850.json:
```json
{
    "body": "<a id='comment:14'></a>Interestingly, this ticket is the one which introduced `deprecated_callable_import`. Given that I see no advantage of `deprecated_callable_import` over a lazy import with deprecation, I plan to remove `deprecated_callable_import` in #22796.",
    "created_at": "2017-04-11T12:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10107#issuecomment-101850",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Interestingly, this ticket is the one which introduced `deprecated_callable_import`. Given that I see no advantage of `deprecated_callable_import` over a lazy import with deprecation, I plan to remove `deprecated_callable_import` in #22796.
