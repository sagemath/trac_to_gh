# Issue 10040: Don't ask for verbose output from tar when installing packages

archive/issues_010039.json:
```json
{
    "body": "The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate and search for errors and warnings, too.\n\nI think Leif Leonhardy proposed this, somewhere.\n\n\n**Assignee:** drkirkby\n\n**CC:**  @nexttime\n\n**Author:** Leif Leonhardy\n\n**Reviewer:** Mitesh Patel\n\n**Merged:** sage-4.6.1.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10040\n\n",
    "closed_at": "2010-11-10T22:20:36Z",
    "created_at": "2010-09-30T10:09:38Z",
    "labels": [
        "component: build",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "title": "Don't ask for verbose output from tar when installing packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10040",
    "user": "https://github.com/qed777"
}
```
The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate and search for errors and warnings, too.

I think Leif Leonhardy proposed this, somewhere.


**Assignee:** drkirkby

**CC:**  @nexttime

**Author:** Leif Leonhardy

**Reviewer:** Mitesh Patel

**Merged:** sage-4.6.1.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10040





---

archive/issue_comments_093829.json:
```json
{
    "body": "<a id='comment:1'></a>\nAre there good reasons to keep the verbose non-error output?\n\nSmaller logs would also help with #3524.",
    "created_at": "2010-09-30T10:11:03Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93829",
    "user": "https://github.com/qed777"
}
```

<a id='comment:1'></a>
Are there good reasons to keep the verbose non-error output?

Smaller logs would also help with #3524.



---

archive/issue_comments_093830.json:
```json
{
    "body": "<a id='comment:2'></a>\nI think Leif said the verbose output could be useful to find packages which have unnecessary files in them. But personally I think that issue should be resolved when packages are reviewed. I've not objections to adding an environment variable to control it, but it's more work than a one-character patch!\n\nAs you say, it would also help with buildbot too. \n\nDave",
    "created_at": "2010-10-22T11:11:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93830",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:2'></a>
I think Leif said the verbose output could be useful to find packages which have unnecessary files in them. But personally I think that issue should be resolved when packages are reviewed. I've not objections to adding an environment variable to control it, but it's more work than a one-character patch!

As you say, it would also help with buildbot too. 

Dave



---

archive/issue_comments_093831.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate, too.\n+The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate and search for errors and warnings, too.\n \n I think Leif Leonhardy proposed this, somewhere.\n \n``````\n",
    "created_at": "2010-10-22T11:34:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93831",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate, too.
+The `sage-spkg` script runs `tar` with the `v` option to extract spkgs.  This significantly increases the size of many installation logs.  Not adding the option would make the logs easier to navigate and search for errors and warnings, too.
 
 I think Leif Leonhardy proposed this, somewhere.
 
``````




---

archive/issue_comments_093832.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [drkirkby](#comment%3A2):\n> I think Leif said the verbose output could be useful to find packages which have unnecessary files in them.\n\nThat was meant a joke. (I don't expect people to read the full, nearly 300,000-lines `install.log`, but incidentally noticed the mentioned obsolete SageNB files when watching the build process.)\n\n> But personally I think that issue should be resolved when packages are reviewed.\n\nOf course. Unfortunately it's unlikely people look into the Mercurial repository for **deleted** files. (Ok, you can see them when verbosely unpacking an spkg manually, or do `du -sh` on the spkg's directory, which a reviewer should perhaps also do.)\n\n> I've not objections to adding an environment variable to control it, but it's more work than a one-character patch!\n\nObviously, but shouldn't carry much more of a danger.",
    "created_at": "2010-10-22T11:34:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93832",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:3'></a>
Replying to [drkirkby](#comment%3A2):
> I think Leif said the verbose output could be useful to find packages which have unnecessary files in them.

That was meant a joke. (I don't expect people to read the full, nearly 300,000-lines `install.log`, but incidentally noticed the mentioned obsolete SageNB files when watching the build process.)

> But personally I think that issue should be resolved when packages are reviewed.

Of course. Unfortunately it's unlikely people look into the Mercurial repository for **deleted** files. (Ok, you can see them when verbosely unpacking an spkg manually, or do `du -sh` on the spkg's directory, which a reviewer should perhaps also do.)

> I've not objections to adding an environment variable to control it, but it's more work than a one-character patch!

Obviously, but shouldn't carry much more of a danger.



---

archive/issue_comments_093833.json:
```json
{
    "body": "<a id='comment:4'></a>\nPerhaps (on another ticket) we should also address the almost useless *\"copying ...\"* messages that afaik originate from distutils. These make up another fair amount of the logs.",
    "created_at": "2010-10-22T11:39:37Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93833",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
Perhaps (on another ticket) we should also address the almost useless *"copying ..."* messages that afaik originate from distutils. These make up another fair amount of the logs.



---

archive/issue_comments_093834.json:
```json
{
    "body": "<a id='comment:5'></a>\nAre you two happy with just removing the 'v', and not bothering with an environment variable? I certainly am. If so, let's create a patch. \n\nAnything to cut down the log size is a good thing, so feel free to create a ticket for this other issue. \n\nDave",
    "created_at": "2010-10-22T11:42:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93834",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>
Are you two happy with just removing the 'v', and not bothering with an environment variable? I certainly am. If so, let's create a patch. 

Anything to cut down the log size is a good thing, so feel free to create a ticket for this other issue. 

Dave



---

archive/issue_comments_093835.json:
```json
{
    "body": "Apply to Sage scripts repository. Based on Sage 4.6.rc0pre1.",
    "created_at": "2010-10-22T12:02:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93835",
    "user": "https://github.com/nexttime"
}
```

Apply to Sage scripts repository. Based on Sage 4.6.rc0pre1.



---

archive/attachments_013577.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10040-untar_non-verbosely_by_default-sage_scripts.patch",
    "asset_url": "tarball://root/attachments/ticket10040/trac_10040-untar_non-verbosely_by_default-sage_scripts.patch",
    "created_at": "2010-10-22T12:06:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10040/trac_10040-untar_non-verbosely_by_default-sage_scripts.patch",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_093836.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Attachment:** [trac_10040-untar_non-verbosely_by_default-sage_scripts.patch](https://github.com/sagemath/sage/files/ticket10040/trac_10040-untar_non-verbosely_by_default-sage_scripts.patch)\n\nI've attached a patch to `sage-spkg` that honors `SAGE_SPKG_LIST_FILES=yes`, and calls `tar` without \"v\" otherwise.",
    "created_at": "2010-10-22T12:06:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93836",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>
**Attachment:** [trac_10040-untar_non-verbosely_by_default-sage_scripts.patch](https://github.com/sagemath/sage/files/ticket10040/trac_10040-untar_non-verbosely_by_default-sage_scripts.patch)

I've attached a patch to `sage-spkg` that honors `SAGE_SPKG_LIST_FILES=yes`, and calls `tar` without "v" otherwise.



---

archive/issue_comments_093837.json:
```json
{
    "body": "**Author:** Leif Leonhardy",
    "created_at": "2010-10-22T12:06:06Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93837",
    "user": "https://github.com/nexttime"
}
```

**Author:** Leif Leonhardy



---

archive/issue_events_075789.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-22T12:06:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75789"
}
```



---

archive/issue_comments_093838.json:
```json
{
    "body": "<a id='comment:7'></a>\nBtw, #9799 is also related (in case of build errors), since without that running `make` will also attempt to build the documentation regardless if the build succeeded or not, and obscure (and unnecessarily grow) the log or even \"hide\" the build error.\n\n(Build errors do not always cause failures in building the documentation, so it might look as if the whole build succeeded, which probably William meant by *\"leading to all kinds of confusion\"*.)",
    "created_at": "2010-10-22T12:58:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93838",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>
Btw, #9799 is also related (in case of build errors), since without that running `make` will also attempt to build the documentation regardless if the build succeeded or not, and obscure (and unnecessarily grow) the log or even "hide" the build error.

(Build errors do not always cause failures in building the documentation, so it might look as if the whole build succeeded, which probably William meant by *"leading to all kinds of confusion"*.)



---

archive/issue_comments_093839.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [leif](#comment%3A4):\n> Perhaps (on another ticket) we should also address the almost useless *\"copying ...\"* messages that afaik originate from distutils. These make up another fair amount of the logs.\n\n```sh\nleif@quadriga:~/Sage/sage-4.6.rc0pre1$ grep \"^copying\" install.log | wc -lc\n  65512 11147892\n```\n(That's more than 34% of the log file size.)\n\nMaybe it's setuptools, not distutils; I don't know yet.",
    "created_at": "2010-10-22T13:18:59Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93839",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Replying to [leif](#comment%3A4):
> Perhaps (on another ticket) we should also address the almost useless *"copying ..."* messages that afaik originate from distutils. These make up another fair amount of the logs.

```sh
leif@quadriga:~/Sage/sage-4.6.rc0pre1$ grep "^copying" install.log | wc -lc
  65512 11147892
```
(That's more than 34% of the log file size.)

Maybe it's setuptools, not distutils; I don't know yet.



---

archive/issue_comments_093840.json:
```json
{
    "body": "**Changing assignee** from GeorgSWeber to @nexttime.",
    "created_at": "2010-10-22T16:53:02Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93840",
    "user": "https://github.com/nexttime"
}
```

**Changing assignee** from GeorgSWeber to @nexttime.



---

archive/issue_comments_093841.json:
```json
{
    "body": "<a id='comment:9'></a>\nMore detailed:\n\n```sh\nleif@quadriga:~/Sage/sage-4.6.rc0pre1$ grep -c \"^copying\" spkg/logs/* | awk 'BEGIN { FS=\":\" } { if ($2!=0) printf \"%5d  %s\\n\", $2, $1 }' | sort -rn\n43543  spkg/logs/moin-1.9.1.p1.log\n 8419  spkg/logs/sagenb-0.8.7.log\n 2702  spkg/logs/sage-4.6.rc0pre1.log\n 2142  spkg/logs/matplotlib-1.0.0.log\n 1797  spkg/logs/twisted-9.0.p2.log\n 1096  spkg/logs/scipy-0.7.p5.log\n  773  spkg/logs/sympy-0.6.4.p0.log\n  661  spkg/logs/ipython-0.9.1.p0.log\n  620  spkg/logs/numpy-1.3.0.p4.log\n  429  spkg/logs/zodb3-3.7.0.p4.log\n  388  spkg/logs/mercurial-1.3.1.p2.log\n  367  spkg/logs/scons-1.2.0.log\n  363  spkg/logs/networkx-1.2.p1.log\n  349  spkg/logs/cython-0.13.p1.log\n  307  spkg/logs/sphinx-0.6.3.p4.log\n  292  spkg/logs/weave-0.4.9.p0.log\n  260  spkg/logs/docutils-0.5.p0.log\n  183  spkg/logs/pycrypto-2.1.0.log\n  169  spkg/logs/pil-1.1.6.p2.log\n  157  spkg/logs/sqlalchemy-0.5.8.log\n  154  spkg/logs/mpmath-0.15.log\n  122  spkg/logs/pygments-0.11.1.p0.log\n   76  spkg/logs/setuptools-0.6c9.p0.log\n   69  spkg/logs/python-2.6.4.p9.log\n   68  spkg/logs/rpy2-2.0.8.log\n   68  spkg/logs/r-2.10.1.p4.log\n   65  spkg/logs/jinja2-2.1.1.p0.log\n   27  spkg/logs/python_gnutls-1.1.4.p7.log\n   22  spkg/logs/scipy_sandbox-20071020.p7.log\n   21  spkg/logs/cvxopt-0.9.p9.log\n   15  spkg/logs/sagetex-2.2.5.log\n    3  spkg/logs/gdmodule-0.56.p7.log\n    2  spkg/logs/pexpect-2.0.p4.log\n    1  spkg/logs/gsl-1.14.log\n```\n\nSo it's perhaps more worth addressing that in those spkgs that produce a huge number of such lines. There's a \"verbose\" option to distutils' `setup()` which is enabled by default (and also a \"quiet\" one), but I think we only want to suppress the verbose *copying*, so we'd have to configure just that command.",
    "created_at": "2010-10-22T16:53:02Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93841",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>
More detailed:

```sh
leif@quadriga:~/Sage/sage-4.6.rc0pre1$ grep -c "^copying" spkg/logs/* | awk 'BEGIN { FS=":" } { if ($2!=0) printf "%5d  %s\n", $2, $1 }' | sort -rn
43543  spkg/logs/moin-1.9.1.p1.log
 8419  spkg/logs/sagenb-0.8.7.log
 2702  spkg/logs/sage-4.6.rc0pre1.log
 2142  spkg/logs/matplotlib-1.0.0.log
 1797  spkg/logs/twisted-9.0.p2.log
 1096  spkg/logs/scipy-0.7.p5.log
  773  spkg/logs/sympy-0.6.4.p0.log
  661  spkg/logs/ipython-0.9.1.p0.log
  620  spkg/logs/numpy-1.3.0.p4.log
  429  spkg/logs/zodb3-3.7.0.p4.log
  388  spkg/logs/mercurial-1.3.1.p2.log
  367  spkg/logs/scons-1.2.0.log
  363  spkg/logs/networkx-1.2.p1.log
  349  spkg/logs/cython-0.13.p1.log
  307  spkg/logs/sphinx-0.6.3.p4.log
  292  spkg/logs/weave-0.4.9.p0.log
  260  spkg/logs/docutils-0.5.p0.log
  183  spkg/logs/pycrypto-2.1.0.log
  169  spkg/logs/pil-1.1.6.p2.log
  157  spkg/logs/sqlalchemy-0.5.8.log
  154  spkg/logs/mpmath-0.15.log
  122  spkg/logs/pygments-0.11.1.p0.log
   76  spkg/logs/setuptools-0.6c9.p0.log
   69  spkg/logs/python-2.6.4.p9.log
   68  spkg/logs/rpy2-2.0.8.log
   68  spkg/logs/r-2.10.1.p4.log
   65  spkg/logs/jinja2-2.1.1.p0.log
   27  spkg/logs/python_gnutls-1.1.4.p7.log
   22  spkg/logs/scipy_sandbox-20071020.p7.log
   21  spkg/logs/cvxopt-0.9.p9.log
   15  spkg/logs/sagetex-2.2.5.log
    3  spkg/logs/gdmodule-0.56.p7.log
    2  spkg/logs/pexpect-2.0.p4.log
    1  spkg/logs/gsl-1.14.log
```

So it's perhaps more worth addressing that in those spkgs that produce a huge number of such lines. There's a "verbose" option to distutils' `setup()` which is enabled by default (and also a "quiet" one), but I think we only want to suppress the verbose *copying*, so we'd have to configure just that command.



---

archive/issue_comments_093842.json:
```json
{
    "body": "<a id='comment:10'></a>\nOh, the *\"copying ...\"* messages appear to be a distutils **bug**; `distutils.file_util.copy_file()` has a `verbose` (default: 0) parameter, but doesn't use it!\n\nIf I change it to the following:\n\n```python\n    ...\n    if verbose: # added just this line\n        if os.path.basename(dst) == os.path.basename(src):\n            log.info(\"%s %s -> %s\", action, src, dir)\n        else:\n            log.info(\"%s %s -> %s\", action, src, dst)\n    ...\n```\nthe *\"copying ...\"* messages vanish at least for mpmath (I only tried that so far).\n\nOpinions? (before I open a ticket for that)",
    "created_at": "2010-10-22T17:35:43Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93842",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Oh, the *"copying ..."* messages appear to be a distutils **bug**; `distutils.file_util.copy_file()` has a `verbose` (default: 0) parameter, but doesn't use it!

If I change it to the following:

```python
    ...
    if verbose: # added just this line
        if os.path.basename(dst) == os.path.basename(src):
            log.info("%s %s -> %s", action, src, dir)
        else:
            log.info("%s %s -> %s", action, src, dst)
    ...
```
the *"copying ..."* messages vanish at least for mpmath (I only tried that so far).

Opinions? (before I open a ticket for that)



---

archive/issue_comments_093843.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [leif](#comment%3A10):\n> If I change it [...] the *\"copying ...\"* messages vanish at least for mpmath (I only tried that so far).\n\nAlso works for the record holders MoinMoin and SageNB...",
    "created_at": "2010-10-22T17:43:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93843",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
Replying to [leif](#comment%3A10):
> If I change it [...] the *"copying ..."* messages vanish at least for mpmath (I only tried that so far).

Also works for the record holders MoinMoin and SageNB...



---

archive/issue_comments_093844.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [drkirkby](#comment%3A5):\n> Are you two happy with just removing the 'v', and not bothering with an environment variable? I certainly am. If so, let's create a patch. \n\nWould it make sense to have a make target which produced verbose logs?  Then you wouldn't have to explicitly set an environment variable.  The same might go for parallel building, by the way.",
    "created_at": "2010-10-22T18:08:09Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93844",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Replying to [drkirkby](#comment%3A5):
> Are you two happy with just removing the 'v', and not bothering with an environment variable? I certainly am. If so, let's create a patch. 

Would it make sense to have a make target which produced verbose logs?  Then you wouldn't have to explicitly set an environment variable.  The same might go for parallel building, by the way.



---

archive/issue_comments_093845.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jhpalmieri](#comment%3A12):\n> Would it make sense to have a make target which produced verbose logs?  Then you wouldn't have to explicitly set an environment variable.\n\nNo problem to add such.\n\n> The same might go for parallel building, by the way.\n\nNot a bad idea. I vaguely remember what I had in mind for the \"global\" log and parallel builds: Since our \"deps\" Makefile does nothing but call `sage-spkg`, we can move the logging (i.e. the use of `pipestatus`) there, just passing in addition the name(s) of the logfile(s) in the Make rules.\n\n`sage-spkg` can then take control of what (and how much) to log where (depending on command line options and/or environment variables), e.g. not `tee`ing but just redirecting the output of `spkg-install` to the logfile, and printing short messages to stdout on parallel builds.",
    "created_at": "2010-10-22T18:28:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93845",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>
Replying to [jhpalmieri](#comment%3A12):
> Would it make sense to have a make target which produced verbose logs?  Then you wouldn't have to explicitly set an environment variable.

No problem to add such.

> The same might go for parallel building, by the way.

Not a bad idea. I vaguely remember what I had in mind for the "global" log and parallel builds: Since our "deps" Makefile does nothing but call `sage-spkg`, we can move the logging (i.e. the use of `pipestatus`) there, just passing in addition the name(s) of the logfile(s) in the Make rules.

`sage-spkg` can then take control of what (and how much) to log where (depending on command line options and/or environment variables), e.g. not `tee`ing but just redirecting the output of `spkg-install` to the logfile, and printing short messages to stdout on parallel builds.



---

archive/issue_comments_093846.json:
```json
{
    "body": "<a id='comment:14'></a>\nOT: A target for building the documentation (at least some parts) *in parallel* would be nice, too.\n\n(We'd have to split the meaning of \"all\", which isn't defined by/in `sage-sage` but `devel/sage/doc/common/builder.py` in the Makefile. I'm not sure if we need that buggy Python script at all btw, which finally does an equivalent of `os.system(\"sphinx ...\")` rather than *importing* it to build the docs...)",
    "created_at": "2010-10-22T19:06:02Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93846",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'></a>
OT: A target for building the documentation (at least some parts) *in parallel* would be nice, too.

(We'd have to split the meaning of "all", which isn't defined by/in `sage-sage` but `devel/sage/doc/common/builder.py` in the Makefile. I'm not sure if we need that buggy Python script at all btw, which finally does an equivalent of `os.system("sphinx ...")` rather than *importing* it to build the docs...)



---

archive/issue_comments_093847.json:
```json
{
    "body": "<a id='comment:15'></a>\nThis works fine for me on OpenSolaris, and I can't possibly see it would be platform dependent. \n\nHowever, the meaning of `SAGE_SPKG_LIST_FILES` should be added to the installation guide, along with the other environment variables. \n\nI think in many cases one might want to set  `SAGE_SPKG_LIST_FILES=yes` when installing a particular package. i.e.\n\n```\n$  export SAGE_SPKG_LIST_FILES=yes\n$ ./sage -f somepackage.spkg\n```\n\nor something like that. As such, I think `SAGE_SPKG_LIST_FILES` should be documented in the installation guide, which will need another patch.",
    "created_at": "2010-10-23T14:17:24Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93847",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:15'></a>
This works fine for me on OpenSolaris, and I can't possibly see it would be platform dependent. 

However, the meaning of `SAGE_SPKG_LIST_FILES` should be added to the installation guide, along with the other environment variables. 

I think in many cases one might want to set  `SAGE_SPKG_LIST_FILES=yes` when installing a particular package. i.e.

```
$  export SAGE_SPKG_LIST_FILES=yes
$ ./sage -f somepackage.spkg
```

or something like that. As such, I think `SAGE_SPKG_LIST_FILES` should be documented in the installation guide, which will need another patch.



---

archive/issue_comments_093848.json:
```json
{
    "body": "**Work Issues:** Add a patch to document the new environment variable",
    "created_at": "2010-10-23T14:19:09Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93848",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Work Issues:** Add a patch to document the new environment variable



---

archive/issue_events_075790.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-10-23T14:19:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75790"
}
```



---

archive/issue_events_075791.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-10-23T14:19:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75791"
}
```



---

archive/issue_comments_093849.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [drkirkby](#comment%3A15):\n> However, the meaning of `SAGE_SPKG_LIST_FILES` should be added to the installation guide, along with the other environment variables.\n\nDone.\n\n> I think in many cases one might want to set  `SAGE_SPKG_LIST_FILES=yes` when installing a particular package.\n\nYou previously said you were happy with just removing the \"v\"... ;-)\n\n---\n\nThough the installation guide really needs work (it is fairly out-dated), I've in addition only reformatted one paragraph to (less than) 80 columns and moved the description of `CFLAG64` up s.t. it's now immediately below that of `SAGE64`, where it IMHO belongs.",
    "created_at": "2010-10-23T16:41:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93849",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Replying to [drkirkby](#comment%3A15):
> However, the meaning of `SAGE_SPKG_LIST_FILES` should be added to the installation guide, along with the other environment variables.

Done.

> I think in many cases one might want to set  `SAGE_SPKG_LIST_FILES=yes` when installing a particular package.

You previously said you were happy with just removing the "v"... ;-)

---

Though the installation guide really needs work (it is fairly out-dated), I've in addition only reformatted one paragraph to (less than) 80 columns and moved the description of `CFLAG64` up s.t. it's now immediately below that of `SAGE64`, where it IMHO belongs.



---

archive/issue_events_075792.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-23T16:41:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75792"
}
```



---

archive/issue_events_075793.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-23T16:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75793"
}
```



---

archive/issue_comments_093850.json:
```json
{
    "body": "**Changing work issues** from \"Add a patch to document the new environment variable\" to \"\".",
    "created_at": "2010-10-23T16:41:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93850",
    "user": "https://github.com/nexttime"
}
```

**Changing work issues** from "Add a patch to document the new environment variable" to "".



---

archive/issue_comments_093851.json:
```json
{
    "body": "**Changing assignee** from @nexttime to drkirkby.",
    "created_at": "2010-10-23T18:02:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93851",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Changing assignee** from @nexttime to drkirkby.



---

archive/issue_comments_093852.json:
```json
{
    "body": "<a id='comment:18'></a>\nWhat does the s.t. standard for, in the sentence *Since some spkgs contain a huge number of files s.t. the log files  get very large and harder to search (and listing the contained* ? \n\nIt's not obvious to me, so either I'm think or perhaps it wont be obvious to others too. \n\nI agree the installation guide is outdated, but was keen it did not get even more outdated! \n\nI was happy to just omit -v, but if we are going to have the option to configure it, we should document it. I would have been quite happy not to have the option myself. \n\nDave",
    "created_at": "2010-10-23T18:02:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93852",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:18'></a>
What does the s.t. standard for, in the sentence *Since some spkgs contain a huge number of files s.t. the log files  get very large and harder to search (and listing the contained* ? 

It's not obvious to me, so either I'm think or perhaps it wont be obvious to others too. 

I agree the installation guide is outdated, but was keen it did not get even more outdated! 

I was happy to just omit -v, but if we are going to have the option to configure it, we should document it. I would have been quite happy not to have the option myself. 

Dave



---

archive/issue_comments_093853.json:
```json
{
    "body": "<a id='comment:19'></a>\nI think \"s.t.\" stands for \"such that\".  Maybe that sentence could be rephrased as\n\n```\nSince some spkgs contain a huge number of files, the log files can \nget very large and hard to search (and listing the contained files is\nusually not very valuable), so this is turned off by default.\n```",
    "created_at": "2010-10-23T18:26:37Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93853",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>
I think "s.t." stands for "such that".  Maybe that sentence could be rephrased as

```
Since some spkgs contain a huge number of files, the log files can 
get very large and hard to search (and listing the contained files is
usually not very valuable), so this is turned off by default.
```



---

archive/issue_comments_093854.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [drkirkby](#comment%3A18):\n> What does the s.t. standard for, in the sentence *Since some spkgs contain a huge number of files s.t. the log files  get very large and harder to search (and listing the contained* ?\n\n[It](http://en.wiktionary.org/wiki/s.t.) does *not* mean *\"sine tempore\"* (nor *\"subject to\"*)...\n\nOf course I can change that.\n\n> I was happy to just omit -v, but if we are going to have the option to configure it, we should document it. I would have been quite happy not to have the option myself.\n\nI rather consider that a \"developer's back door\", which I would document in the Developer's Guide (if at all). ;-)",
    "created_at": "2010-10-23T19:08:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93854",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'></a>
Replying to [drkirkby](#comment%3A18):
> What does the s.t. standard for, in the sentence *Since some spkgs contain a huge number of files s.t. the log files  get very large and harder to search (and listing the contained* ?

[It](http://en.wiktionary.org/wiki/s.t.) does *not* mean *"sine tempore"* (nor *"subject to"*)...

Of course I can change that.

> I was happy to just omit -v, but if we are going to have the option to configure it, we should document it. I would have been quite happy not to have the option myself.

I rather consider that a "developer's back door", which I would document in the Developer's Guide (if at all). ;-)



---

archive/issue_comments_093855.json:
```json
{
    "body": "Apply to Sage library. Based on Sage 4.6.rc0pre1. (Updated version s.t. more people can read it.)",
    "created_at": "2010-10-23T19:51:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93855",
    "user": "https://github.com/nexttime"
}
```

Apply to Sage library. Based on Sage 4.6.rc0pre1. (Updated version s.t. more people can read it.)



---

archive/attachments_013578.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch",
    "asset_url": "tarball://root/attachments/ticket10040/trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch",
    "created_at": "2010-10-23T19:52:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10040/trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_093856.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Attachment:** [trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch](https://github.com/sagemath/sage/files/ticket10040/trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch)\n\nReplying to [leif](#comment%3A20):\n> Of course I can change that.\n\nReluctantly did that.",
    "created_at": "2010-10-23T19:52:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93856",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'></a>
**Attachment:** [trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch](https://github.com/sagemath/sage/files/ticket10040/trac_10040-document_SAGE_SPKG_LIST_FILES-sage_library.patch)

Replying to [leif](#comment%3A20):
> Of course I can change that.

Reluctantly did that.



---

archive/issue_comments_093857.json:
```json
{
    "body": "<a id='comment:22'></a>\nping (before it rottens) ;-)\n\nI'm working on a lot of further changes to (not only) `sage-spkg`...",
    "created_at": "2010-11-03T07:31:31Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93857",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
ping (before it rottens) ;-)

I'm working on a lot of further changes to (not only) `sage-spkg`...



---

archive/issue_comments_093858.json:
```json
{
    "body": "**Reviewer:** Mitesh Patel",
    "created_at": "2010-11-03T11:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93858",
    "user": "https://github.com/qed777"
}
```

**Reviewer:** Mitesh Patel



---

archive/issue_comments_093859.json:
```json
{
    "body": "<a id='comment:23'></a>\nSuppressing the *copying...* messages sounds good to me.  Should we have an option to enable them?\n\nShould we use suppress \"tarbosity\" in `sage-bdist`, too?",
    "created_at": "2010-11-03T11:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93859",
    "user": "https://github.com/qed777"
}
```

<a id='comment:23'></a>
Suppressing the *copying...* messages sounds good to me.  Should we have an option to enable them?

Should we use suppress "tarbosity" in `sage-bdist`, too?



---

archive/issue_events_075794.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-11-03T11:01:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75794"
}
```



---

archive/issue_events_075795.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-11-03T11:01:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75795"
}
```



---

archive/issue_events_075796.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-11-03T11:01:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "milestone": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75796"
}
```



---

archive/issue_comments_093860.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [mpatel](#comment%3A23):\n> Suppressing the *copying...* messages sounds good to me.  Should we have an option to enable them?\n\nI have a patched Python package here that currently only adds the `if verbose:`.\n\nUnfortunately, setting `distutils.log`'s verbosity level (before calling `setup()`) seems to not work for some reason. It's not clear what the `verbose` parameter is supposed to change, and apparently it isn't [always] passed to `copy_file()`.\n\nThere's always `DISTUTILS_DEBUG` btw. ;-)\n\nWe could make use of Sage environment variables (e.g. `SAGE_DEBUG_BUILD`, or `SAGE_DISTUTILS_VERBOSITY_LEVEL`) directly there, enabling more output. But I think keeping the other messages of the same verbosity level (like \"*creating ...*\" etc.) is ok, I'm not sure about \"*moving ...*\" of which we also have a lot, but by far not that many.\n\nDid I already tell the `install.log` size drops to less than the half with non-verbose untarring and \"copying\" messages suppressed? (Also quite significantly depends on the length of `$SAGE_ROOT`...)\n\n> Should we use suppress \"tarbosity\" in `sage-bdist`, too?\n\nLess important, at least to me.",
    "created_at": "2010-11-03T17:07:29Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93860",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>
Replying to [mpatel](#comment%3A23):
> Suppressing the *copying...* messages sounds good to me.  Should we have an option to enable them?

I have a patched Python package here that currently only adds the `if verbose:`.

Unfortunately, setting `distutils.log`'s verbosity level (before calling `setup()`) seems to not work for some reason. It's not clear what the `verbose` parameter is supposed to change, and apparently it isn't [always] passed to `copy_file()`.

There's always `DISTUTILS_DEBUG` btw. ;-)

We could make use of Sage environment variables (e.g. `SAGE_DEBUG_BUILD`, or `SAGE_DISTUTILS_VERBOSITY_LEVEL`) directly there, enabling more output. But I think keeping the other messages of the same verbosity level (like "*creating ...*" etc.) is ok, I'm not sure about "*moving ...*" of which we also have a lot, but by far not that many.

Did I already tell the `install.log` size drops to less than the half with non-verbose untarring and "copying" messages suppressed? (Also quite significantly depends on the length of `$SAGE_ROOT`...)

> Should we use suppress "tarbosity" in `sage-bdist`, too?

Less important, at least to me.



---

archive/issue_comments_093861.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [leif](#comment%3A24):\n> Did I already tell the `install.log` size drops to less than the half with non-verbose untarring and \"copying\" messages suppressed? (Also quite significantly depends on the length of `$SAGE_ROOT`...)\n\n```sh\n$ wc -lc sage-4.6.rc0/install.log-rc0-orig sage-4.6.rc0-short-logs/install.log-rc0-short-logs \n  299773 31880226 sage-4.6.rc0/install.log-rc0-orig\n  122924 15222503 sage-4.6.rc0-short-logs/install.log-rc0-short-logs\n  422697 47102729 total\n$ expr 15222503 - 11 \\* `grep -c -- -short-logs sage-4.6.rc0-short-logs/install.log-rc0-short-logs`\n14771536\n$ echo \"Total bytes saved: `expr 31880226 - 14771536`\"\nTotal bytes saved: 17108690\n```\n(The above computation does not even take into account multiple occurrences of `$SAGE_ROOT` on a single line, which is also frequently the case, so we save more than 53.7%. :) )",
    "created_at": "2010-11-03T17:37:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93861",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'></a>
Replying to [leif](#comment%3A24):
> Did I already tell the `install.log` size drops to less than the half with non-verbose untarring and "copying" messages suppressed? (Also quite significantly depends on the length of `$SAGE_ROOT`...)

```sh
$ wc -lc sage-4.6.rc0/install.log-rc0-orig sage-4.6.rc0-short-logs/install.log-rc0-short-logs 
  299773 31880226 sage-4.6.rc0/install.log-rc0-orig
  122924 15222503 sage-4.6.rc0-short-logs/install.log-rc0-short-logs
  422697 47102729 total
$ expr 15222503 - 11 \* `grep -c -- -short-logs sage-4.6.rc0-short-logs/install.log-rc0-short-logs`
14771536
$ echo "Total bytes saved: `expr 31880226 - 14771536`"
Total bytes saved: 17108690
```
(The above computation does not even take into account multiple occurrences of `$SAGE_ROOT` on a single line, which is also frequently the case, so we save more than 53.7%. :) )



---

archive/issue_comments_093862.json:
```json
{
    "body": "<a id='comment:26'></a>\nHave you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.",
    "created_at": "2010-11-04T08:58:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93862",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Have you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.



---

archive/issue_comments_093863.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jdemeyer](#comment%3A26):\n> Have you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.\n\nSee comments above. It's always good to have a \"back door\", the others then wanted me to officially document it. (And Mitesh recently asked if I could provide some way to reenable the useless \"*copying ...*\" messages from distutils if I suppress them.)\n\nI don't mind having dozens of environment variables *that nobody uses*, at least as far as their names do not pollute the environment. (And they're much easier to implement than command line options.) There are enough scripts that export(!) variables like `OPT` etc., often despite being only locally used. The package name variables set in `spkg/install`, used in `deps`, are bad enough.\n\nBut IMHO the opposite is the case: We have too many *useful* variables (some undocumented), many with odd names like `SAGE64` (which always reminds me of F77, Window95 etc.).",
    "created_at": "2010-11-04T09:49:43Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93863",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:27'></a>
Replying to [jdemeyer](#comment%3A26):
> Have you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.

See comments above. It's always good to have a "back door", the others then wanted me to officially document it. (And Mitesh recently asked if I could provide some way to reenable the useless "*copying ...*" messages from distutils if I suppress them.)

I don't mind having dozens of environment variables *that nobody uses*, at least as far as their names do not pollute the environment. (And they're much easier to implement than command line options.) There are enough scripts that export(!) variables like `OPT` etc., often despite being only locally used. The package name variables set in `spkg/install`, used in `deps`, are bad enough.

But IMHO the opposite is the case: We have too many *useful* variables (some undocumented), many with odd names like `SAGE64` (which always reminds me of F77, Window95 etc.).



---

archive/issue_comments_093864.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jdemeyer](#comment%3A26):\n> Have you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.\n\nAs you will see above, my suggestion was to just remove the 'v' and leave it there.\n\nBut I admit being able to change this does have some small benefit, and since it's now working, I think it's best left as it is. It can do no harm, and its documented properly. \n\nDave",
    "created_at": "2010-11-04T10:14:24Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93864",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:28'></a>
Replying to [jdemeyer](#comment%3A26):
> Have you considered simply remove the `v` option to `tar` without environment variables?  I don't really like adding another (pointless) environment variable.

As you will see above, my suggestion was to just remove the 'v' and leave it there.

But I admit being able to change this does have some small benefit, and since it's now working, I think it's best left as it is. It can do no harm, and its documented properly. 

Dave



---

archive/issue_comments_093865.json:
```json
{
    "body": "<a id='comment:29'></a>\nI get the following error which **might** be caused by this patch:\n\n```\n[...]\nsage_scripts-4.6.1.alpha1/spkg-install\nsage_scripts-4.6.1.alpha1/sage-rebase_sage.sh\nsage_scripts-4.6.1.alpha1/sage-sbuildhack\nsage_scripts-4.6.1.alpha1/sage-grep\nsage_scripts-4.6.1.alpha1/ipy_profile_sage.py\nsage_scripts-4.6.1.alpha1/sage-ipython\nFinished extraction\n****************************************************\nHost system\nuname -a:\nLinux boxen 2.6.24-24-server #1 SMP Fri Sep 18 16:47:05 UTC 2009 x86_64 GNU/Linux\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)\n****************************************************\ncp: cannot stat `/scratch/jdemeyer/merger/sage-4.6.1.alpha1/sage-python': No such file or directory\ncp: cannot stat `/scratch/jdemeyer/merger/sage-4.6.1.alpha1/ipython': No such file or directory\n\nreal\t0m0.075s\nuser\t0m0.000s\nsys\t0m0.060s\n/scratch/jdemeyer/merger/sage-4.6.1.alpha1/local/bin/sage-spkg: line 426: syntax error near unexpected token `('\n/scratch/jdemeyer/merger/sage-4.6.1.alpha1/local/bin/sage-spkg: line 426: `    echo \"(cd '`pwd`' && '$SAGE_ROOT/sage' -sh)\"'\nmake[1]: *** [installed/sage_scripts-4.6.1.alpha1] Error 2\nmake[1]: Leaving directory `/padic/scratch/jdemeyer/merger/sage-4.6.1.alpha1/spkg'\n```",
    "created_at": "2010-11-04T10:21:53Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93865",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
I get the following error which **might** be caused by this patch:

```
[...]
sage_scripts-4.6.1.alpha1/spkg-install
sage_scripts-4.6.1.alpha1/sage-rebase_sage.sh
sage_scripts-4.6.1.alpha1/sage-sbuildhack
sage_scripts-4.6.1.alpha1/sage-grep
sage_scripts-4.6.1.alpha1/ipy_profile_sage.py
sage_scripts-4.6.1.alpha1/sage-ipython
Finished extraction
****************************************************
Host system
uname -a:
Linux boxen 2.6.24-24-server #1 SMP Fri Sep 18 16:47:05 UTC 2009 x86_64 GNU/Linux
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)
****************************************************
cp: cannot stat `/scratch/jdemeyer/merger/sage-4.6.1.alpha1/sage-python': No such file or directory
cp: cannot stat `/scratch/jdemeyer/merger/sage-4.6.1.alpha1/ipython': No such file or directory

real	0m0.075s
user	0m0.000s
sys	0m0.060s
/scratch/jdemeyer/merger/sage-4.6.1.alpha1/local/bin/sage-spkg: line 426: syntax error near unexpected token `('
/scratch/jdemeyer/merger/sage-4.6.1.alpha1/local/bin/sage-spkg: line 426: `    echo "(cd '`pwd`' && '$SAGE_ROOT/sage' -sh)"'
make[1]: *** [installed/sage_scripts-4.6.1.alpha1] Error 2
make[1]: Leaving directory `/padic/scratch/jdemeyer/merger/sage-4.6.1.alpha1/spkg'
```



---

archive/issue_comments_093866.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jdemeyer](#comment%3A29):\n> I get the following error which **might** be caused by this patch:\n\nHow that? I see no relation to my patch, looks rather like the `spkg-install` does something weird, possibly corrupting (the running) `sage-spkg`?",
    "created_at": "2010-11-04T10:43:53Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93866",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:30'></a>
Replying to [jdemeyer](#comment%3A29):
> I get the following error which **might** be caused by this patch:

How that? I see no relation to my patch, looks rather like the `spkg-install` does something weird, possibly corrupting (the running) `sage-spkg`?



---

archive/issue_comments_093867.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [drkirkby](#comment%3A28):\n> I think it's best left as it is. It can do no harm, and its documented properly.\n\nWe need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.",
    "created_at": "2010-11-04T10:47:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93867",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:31'></a>
Replying to [drkirkby](#comment%3A28):
> I think it's best left as it is. It can do no harm, and its documented properly.

We need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.



---

archive/issue_comments_093868.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [leif](#comment%3A31):\n> Replying to [drkirkby](#comment%3A28):\n> > I think it's best left as it is. It can do no harm, and its documented properly.\n\n> \n> We need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.\n\nLike `PIL_NOTK` (I always read *\"Pill not K\"*, like the famous *nchoosek*.)",
    "created_at": "2010-11-04T10:48:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93868",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:32'></a>
Replying to [leif](#comment%3A31):
> Replying to [drkirkby](#comment%3A28):
> > I think it's best left as it is. It can do no harm, and its documented properly.

> 
> We need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.

Like `PIL_NOTK` (I always read *"Pill not K"*, like the famous *nchoosek*.)



---

archive/issue_comments_093869.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [leif](#comment%3A31):\n \n> We need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.\n\nYes, perhaps some of these rarely used once should be in a section of their own. But that can be the subject of another ticket, and would not doubt need a lot of discussion about what is rarely used, what should be used more often. \n\nIMHO, this ticket has positive review and should be merged unchanged.",
    "created_at": "2010-11-04T11:51:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93869",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:33'></a>
Replying to [leif](#comment%3A31):
 
> We need a special section for useless (or rarely used) variables, I think in the Developer's rather than the Installation Guide.

Yes, perhaps some of these rarely used once should be in a section of their own. But that can be the subject of another ticket, and would not doubt need a lot of discussion about what is rarely used, what should be used more often. 

IMHO, this ticket has positive review and should be merged unchanged.



---

archive/issue_comments_093870.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jdemeyer](#comment%3A29):\n> I get the following error which **might** be caused by this patch:\n\nYes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.  (Or apply the patch and then run \"sage -sdist\" and build the new version from scratch.)  Otherwise, if the files SAGE_ROOT/spkg/base/sage-spkg and sage-spkg in the sage_scripts spkg don't match, at some point one of them overwrites the other *while it is being executed*, and the shell gets confused.\n\nAt least, that's my guess about what happened.",
    "created_at": "2010-11-04T14:53:34Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93870",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'></a>
Replying to [jdemeyer](#comment%3A29):
> I get the following error which **might** be caused by this patch:

Yes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.  (Or apply the patch and then run "sage -sdist" and build the new version from scratch.)  Otherwise, if the files SAGE_ROOT/spkg/base/sage-spkg and sage-spkg in the sage_scripts spkg don't match, at some point one of them overwrites the other *while it is being executed*, and the shell gets confused.

At least, that's my guess about what happened.



---

archive/issue_comments_093871.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [jhpalmieri](#comment%3A34):\n> Yes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.  (Or apply the patch and then run \"sage -sdist\" and build the new version from scratch.)  Otherwise, if the files SAGE_ROOT/spkg/base/sage-spkg and sage-spkg in the sage_scripts spkg don't match, at some point one of them overwrites the other *while it is being executed*, and the shell gets confused.\n\nThat seems to be a likely explanation, I will test later.  I suppose the same holds for `sage-env` and `sage-make_relative`, which are also in `spkg/base`?",
    "created_at": "2010-11-04T15:03:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93871",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
Replying to [jhpalmieri](#comment%3A34):
> Yes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.  (Or apply the patch and then run "sage -sdist" and build the new version from scratch.)  Otherwise, if the files SAGE_ROOT/spkg/base/sage-spkg and sage-spkg in the sage_scripts spkg don't match, at some point one of them overwrites the other *while it is being executed*, and the shell gets confused.

That seems to be a likely explanation, I will test later.  I suppose the same holds for `sage-env` and `sage-make_relative`, which are also in `spkg/base`?



---

archive/issue_comments_093872.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [jhpalmieri](#comment%3A34):\n> Yes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.\n\nThanks a lot for the tip, that's precisely what happened.",
    "created_at": "2010-11-04T20:04:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93872",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
Replying to [jhpalmieri](#comment%3A34):
> Yes and no.  I think it was caused by the patch, but because you made a small mistake in applying the patch: when patching the script sage-spkg for testing purposes, you need to apply the patch, but then also copy the new version of sage-spkg to SAGE_ROOT/spkg/base.

Thanks a lot for the tip, that's precisely what happened.



---

archive/issue_comments_093873.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [jdemeyer](#comment%3A36):\n> Thanks a lot for the tip, that's precisely what happened.\n\nWell, the same thing happened to me a few days ago, so it was an educated guess.",
    "created_at": "2010-11-04T21:42:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93873",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:37'></a>
Replying to [jdemeyer](#comment%3A36):
> Thanks a lot for the tip, that's precisely what happened.

Well, the same thing happened to me a few days ago, so it was an educated guess.



---

archive/issue_comments_093874.json:
```json
{
    "body": "**Merged:** sage-4.6.1.alpha1",
    "created_at": "2010-11-10T22:20:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10040#issuecomment-93874",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.1.alpha1



---

archive/issue_events_075797.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-10T22:20:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75797"
}
```



---

archive/issue_events_075798.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-10T22:20:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10040",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10040#event-75798"
}
```
