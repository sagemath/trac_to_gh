# Issue 10955: Get Maxima to easily accept flag values

archive/issues_010876.json:
```json
{
    "body": "Maxima relatively recently decided that 1/sqrt(x) is not sqrt(1/x), for good reasons (1/sqrt(-1)=-i but sqrt(1/-1)=i in usual discussion).  So for the following integral, they note that it depends on how you input it:\n\n```\nsage: integrate(sqrt(1/x^2+x),x)\nintegrate(sqrt(x + 1/x^2), x)\nsage: integrate(1/sqrt(x^2+x),x)\nlog(2*x + 2*sqrt(x^2 + x) + 1)\n```\nFine.  Then they suggest using the flag `radexpand:all` to make the first one behave.  But I can't figure out how to get it to evaluate.\n\n```\nsage: sage.calculus.calculus.maxima('radexpand:all')\nall\nsage: integrate(sqrt(1/x^2+x),x)\nintegrate(sqrt(x + 1/x^2), x)\n```\nTrying maxima.eval only changes that I get 'all' instead of all.  We should make this work, since this is the *calculus* instance of Sage!\n\nAssignee: @burcin\n\nCC:  @robert-marik @burcin @nbruin @jasongrout @wdjoyner\n\nKeywords: maxima, calculus, flag, radexpand\n\nBranch/Commit: b94b48a873b29617f5562f18ffd1a61d67b1a7a6\n\nReviewer: Nils Bruin, Karl-Dieter Crisman\n\nAuthor: Peter Bruin\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/10955\n\n",
    "closed_at": "2014-05-29T14:51:26Z",
    "created_at": "2011-03-17T15:48:39Z",
    "labels": [
        "component: calculus",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Get Maxima to easily accept flag values",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10955",
    "user": "https://github.com/kcrisman"
}
```
Maxima relatively recently decided that 1/sqrt(x) is not sqrt(1/x), for good reasons (1/sqrt(-1)=-i but sqrt(1/-1)=i in usual discussion).  So for the following integral, they note that it depends on how you input it:

```
sage: integrate(sqrt(1/x^2+x),x)
integrate(sqrt(x + 1/x^2), x)
sage: integrate(1/sqrt(x^2+x),x)
log(2*x + 2*sqrt(x^2 + x) + 1)
```
Fine.  Then they suggest using the flag `radexpand:all` to make the first one behave.  But I can't figure out how to get it to evaluate.

```
sage: sage.calculus.calculus.maxima('radexpand:all')
all
sage: integrate(sqrt(1/x^2+x),x)
integrate(sqrt(x + 1/x^2), x)
```
Trying maxima.eval only changes that I get 'all' instead of all.  We should make this work, since this is the *calculus* instance of Sage!

Assignee: @burcin

CC:  @robert-marik @burcin @nbruin @jasongrout @wdjoyner

Keywords: maxima, calculus, flag, radexpand

Branch/Commit: b94b48a873b29617f5562f18ffd1a61d67b1a7a6

Reviewer: Nils Bruin, Karl-Dieter Crisman

Author: Peter Bruin

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/10955





---

archive/issue_comments_140085.json:
```json
{
    "body": "<a id='comment:1'></a>Works for me on some flavour of 5.13.beta0\n\n```\nsage: integrate(sqrt(1/x^2+x),x)\nintegrate(sqrt(x + 1/x^2), x)\nsage: sage.calculus.calculus.maxima('radexpand:all')\nall\nsage: integrate(sqrt(1/x^2+x),x)\n2/3*sqrt(x^3 + 1) - 1/3*log(sqrt(x^3 + 1) + 1) + 1/3*log(sqrt(x^3 + 1) - 1)\n```\nI didn't check if the answer makes sense, but at least setting the flag has effect.",
    "created_at": "2013-11-01T16:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140085",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>Works for me on some flavour of 5.13.beta0

```
sage: integrate(sqrt(1/x^2+x),x)
integrate(sqrt(x + 1/x^2), x)
sage: sage.calculus.calculus.maxima('radexpand:all')
all
sage: integrate(sqrt(1/x^2+x),x)
2/3*sqrt(x^3 + 1) - 1/3*log(sqrt(x^3 + 1) + 1) + 1/3*log(sqrt(x^3 + 1) - 1)
```
I didn't check if the answer makes sense, but at least setting the flag has effect.



---

archive/issue_comments_140086.json:
```json
{
    "body": "Changing author from \"\" to \"Peter Bruin\"",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140086",
    "user": "https://github.com/pjbruin"
}
```

Changing author from "" to "Peter Bruin"



---

archive/issue_comments_140087.json:
```json
{
    "body": "Changing branch from \"\" to \"u/pbruin/10955-maxima_radexpand\"",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140087",
    "user": "https://github.com/pjbruin"
}
```

Changing branch from "" to "u/pbruin/10955-maxima_radexpand"



---

archive/issue_comments_140088.json:
```json
{
    "body": "<a id='comment:2'></a>Works for me too; here is a doctest.",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140088",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:2'></a>Works for me too; here is a doctest.



---

archive/issue_comments_140089.json:
```json
{
    "body": "Changing priority from minor to trivial.",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140089",
    "user": "https://github.com/pjbruin"
}
```

Changing priority from minor to trivial.



---

archive/issue_comments_140090.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140090",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_140091.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140091",
    "user": "https://github.com/pjbruin"
}
```

Changing type from defect to task.



---

archive/issue_events_028401.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-21T21:41:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10955#event-28401"
}
```



---

archive/issue_comments_140092.json:
```json
{
    "body": "Changing commit from \"\" to \"b94b48a873b29617f5562f18ffd1a61d67b1a7a6\"",
    "created_at": "2014-05-21T21:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140092",
    "user": "https://github.com/pjbruin"
}
```

Changing commit from "" to "b94b48a873b29617f5562f18ffd1a61d67b1a7a6"



---

archive/issue_comments_140093.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-28T20:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140093",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_140094.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nils Bruin, Karl-Dieter Crisman, Michael Orlitzky\"",
    "created_at": "2014-05-28T20:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140094",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Nils Bruin, Karl-Dieter Crisman, Michael Orlitzky"



---

archive/issue_comments_140095.json:
```json
{
    "body": "<a id='comment:3'></a>As far as I can tell this is fine.  I have no idea why this didn't work before.  Passes tests, does right thing.  \n\n---\nWow, I am just now noticing that the suggestion made earlier was pretty bogus.\n\n```\nsage: integrate(1/sqrt(x^2+x),x)\nlog(2*x + 2*sqrt(x^2 + x) + 1)\n```\nTotally not the same thing as `sqrt(1/x^2+x)`!  Should have been\n\n```\nsage: integrate(1/sqrt(x^2+x),x)\nlog(2*x + 2*sqrt(x^2 + x) + 1)\nsage: integrate(sqrt(1/(x^2+x)),x)\nlog(sqrt(x + 1)/sqrt(x) + 1) - log(sqrt(x + 1)/sqrt(x) - 1)\n```\nwhich also happens to be affected by `radexpand:all`.",
    "created_at": "2014-05-28T20:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140095",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>As far as I can tell this is fine.  I have no idea why this didn't work before.  Passes tests, does right thing.  

---
Wow, I am just now noticing that the suggestion made earlier was pretty bogus.

```
sage: integrate(1/sqrt(x^2+x),x)
log(2*x + 2*sqrt(x^2 + x) + 1)
```
Totally not the same thing as `sqrt(1/x^2+x)`!  Should have been

```
sage: integrate(1/sqrt(x^2+x),x)
log(2*x + 2*sqrt(x^2 + x) + 1)
sage: integrate(sqrt(1/(x^2+x)),x)
log(sqrt(x + 1)/sqrt(x) + 1) - log(sqrt(x + 1)/sqrt(x) - 1)
```
which also happens to be affected by `radexpand:all`.



---

archive/issue_comments_140096.json:
```json
{
    "body": "Changing reviewer from \"Nils Bruin, Karl-Dieter Crisman, Michael Orlitzky\" to \"Nils Bruin, Karl-Dieter Crisman\"",
    "created_at": "2014-05-28T21:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140096",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "Nils Bruin, Karl-Dieter Crisman, Michael Orlitzky" to "Nils Bruin, Karl-Dieter Crisman"



---

archive/issue_comments_140097.json:
```json
{
    "body": "Changing branch from \"u/pbruin/10955-maxima_radexpand\" to \"b94b48a873b29617f5562f18ffd1a61d67b1a7a6\"",
    "created_at": "2014-05-29T14:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140097",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/pbruin/10955-maxima_radexpand" to "b94b48a873b29617f5562f18ffd1a61d67b1a7a6"



---

archive/issue_events_028402.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T14:51:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10955#event-28402"
}
```



---

archive/issue_comments_140098.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-29T14:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10955#issuecomment-140098",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
