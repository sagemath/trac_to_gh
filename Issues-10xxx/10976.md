# Issue 10976: computing order of a certain subgroup of a permutation group is double dog slow (compared to Magma)

archive/issues_010897.json:
```json
{
    "body": "```\n--- sage\ndef foo(n):\n\u00a0G = SymmetricGroup(n)\n\u00a0H = G.stabilizer(n//2)\n\u00a0return H.order()\n\ntime n = foo(200) \u00a0// approx 399 seconds\n\n--- magma\nn foo(n)\n\u00a0G := Sym(n);\n\u00a0H := Stabiliser(G,n div 2);\n\u00a0return Order(H);\nend function;\n\ntime n := foo(200); \u00a0// approx 0.40 seconds\n```\n\nSee also trac #10804 which is all about the underlying algorithms and ideas related to this problem. \n\nAssignee: @swenson\n\nKeywords: sd32\n\nResolution: fixed\n\nAuthor: Christopher Swenson\n\nReviewer: William Stein\n\nMerged: sage-5.0.beta8\n\nIssue created by migration from https://trac.sagemath.org/ticket/10976\n\n",
    "closed_at": "2012-03-13T08:22:32Z",
    "created_at": "2011-03-21T21:17:24Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "computing order of a certain subgroup of a permutation group is double dog slow (compared to Magma)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10976",
    "user": "https://github.com/williamstein"
}
```
```
--- sage
def foo(n):
 G = SymmetricGroup(n)
 H = G.stabilizer(n//2)
 return H.order()

time n = foo(200)  // approx 399 seconds

--- magma
n foo(n)
 G := Sym(n);
 H := Stabiliser(G,n div 2);
 return Order(H);
end function;

time n := foo(200);  // approx 0.40 seconds
```

See also trac #10804 which is all about the underlying algorithms and ideas related to this problem. 

Assignee: @swenson

Keywords: sd32

Resolution: fixed

Author: Christopher Swenson

Reviewer: William Stein

Merged: sage-5.0.beta8

Issue created by migration from https://trac.sagemath.org/ticket/10976





---

archive/issue_comments_122475.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -17,9 +17,7 @@\n time n := foo(200); \u00a0// approx 0.40 seconds\n ```\n \n-See also trac #10891 which is all about the underlying algorithms and ideas related to this problem.\n-\n-Assignee: joyner\n+See also trac #10804 which is all about the underlying algorithms and ideas related to this problem. \n \n Comment: 1\n \n```\n",
    "created_at": "2011-04-15T07:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122475",
    "user": "https://github.com/rlmill"
}
```

Description changed:
```diff
--- 
+++ 
@@ -17,9 +17,7 @@
 time n := foo(200);  // approx 0.40 seconds
 ```
 
-See also trac #10891 which is all about the underlying algorithms and ideas related to this problem.
-
-Assignee: joyner
+See also trac #10804 which is all about the underlying algorithms and ideas related to this problem. 
 
 Comment: 1
 
```




---

archive/issue_comments_122476.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122476",
    "user": "https://github.com/williamstein"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_122477.json:
```json
{
    "body": "<a id='comment:3'></a>I have a workaround I am testing for this (patch coming soon) that recognizes some subgroups of permutation groups (including stabilizer subgroups of the symmetric group), and can compute the order very quickly (~600 microseconds).  The running time of foo(200) above is still about a second, because GAP takes that long to construct the stabilizer group and give us back the generators.\n\nIn the future, I can add some more cases, or try to develop a more general theory for quickly computing these group orders (the special case I added is based on a argument from graph theory).\n\n```\nsage: def foo(n):\n....:     G = SymmetricGroup(n)\n....:     H = G.stabilizer(n//2)\n....:     return H.order()\n....: \nsage: %timeit foo(200)\n5 loops, best of 3: 935 ms per loop\n```",
    "created_at": "2012-01-22T19:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122477",
    "user": "https://github.com/swenson"
}
```

<a id='comment:3'></a>I have a workaround I am testing for this (patch coming soon) that recognizes some subgroups of permutation groups (including stabilizer subgroups of the symmetric group), and can compute the order very quickly (~600 microseconds).  The running time of foo(200) above is still about a second, because GAP takes that long to construct the stabilizer group and give us back the generators.

In the future, I can add some more cases, or try to develop a more general theory for quickly computing these group orders (the special case I added is based on a argument from graph theory).

```
sage: def foo(n):
....:     G = SymmetricGroup(n)
....:     H = G.stabilizer(n//2)
....:     return H.order()
....: 
sage: %timeit foo(200)
5 loops, best of 3: 935 ms per loop
```



---

archive/issue_comments_122478.json:
```json
{
    "body": "Changing assignee from joyner to @swenson.",
    "created_at": "2012-01-22T19:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122478",
    "user": "https://github.com/swenson"
}
```

Changing assignee from joyner to @swenson.



---

archive/issue_comments_122479.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-07T00:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122479",
    "user": "https://github.com/swenson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_122480.json:
```json
{
    "body": "<a id='comment:4'></a>Patch uploaded. Can I get someone to look it over?",
    "created_at": "2012-02-07T00:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122480",
    "user": "https://github.com/swenson"
}
```

<a id='comment:4'></a>Patch uploaded. Can I get someone to look it over?



---

archive/issue_comments_122481.json:
```json
{
    "body": "<a id='comment:5'></a>The format of the patch is not standard (not made by Sage's Mercurial).\n\nIt is also the first time I see \n\n```\nCopyright 2012 Google Inc. All Rights Reserved.\n```\nand I am not sure if that's OK. Traditionally people who edit the file add themselves there, but \"all rights reserved\" is a bit scary.",
    "created_at": "2012-02-07T03:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122481",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>The format of the patch is not standard (not made by Sage's Mercurial).

It is also the first time I see 

```
Copyright 2012 Google Inc. All Rights Reserved.
```
and I am not sure if that's OK. Traditionally people who edit the file add themselves there, but "all rights reserved" is a bit scary.



---

archive/issue_comments_122482.json:
```json
{
    "body": "<a id='comment:6'></a>My bad on the patch -- the new one should be in the correct format.\n\nSo, unfortunately, this is the copyright statement as required by my agreement with Google. The code is still licensed under GPL, but they require that exact wording in the copyright.",
    "created_at": "2012-02-07T03:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122482",
    "user": "https://github.com/swenson"
}
```

<a id='comment:6'></a>My bad on the patch -- the new one should be in the correct format.

So, unfortunately, this is the copyright statement as required by my agreement with Google. The code is still licensed under GPL, but they require that exact wording in the copyright.



---

archive/issue_comments_122483.json:
```json
{
    "body": "<a id='comment:7'></a>Google copyright is fine.  What does \"all rights reserved\" mean exactly.",
    "created_at": "2012-02-07T15:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122483",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'></a>Google copyright is fine.  What does "all rights reserved" mean exactly.



---

archive/issue_comments_122484.json:
```json
{
    "body": "<a id='comment:8'></a>I think it makes lawyers feel better.  Wikipedia says it means nothing.\n\nhttp://en.wikipedia.org/wiki/All_rights_reserved",
    "created_at": "2012-02-07T15:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122484",
    "user": "https://github.com/swenson"
}
```

<a id='comment:8'></a>I think it makes lawyers feel better.  Wikipedia says it means nothing.

http://en.wikipedia.org/wiki/All_rights_reserved



---

archive/issue_comments_122485.json:
```json
{
    "body": "<a id='comment:9'></a>Just out of curiosity, would it be allowed to do:\n\n```\n8\t+- Christopher Swenson (2011): Added a special case to compute the order efficiently (This patch Copyright 2012 Google Inc. All Rights Reserved.)\n9\t+\n10\t REFERENCES:\n...\n```\ninstead of\n\n```\n8\t+- Christopher Swenson (2011): Added a special case to compute the order efficiently.\n9\t+\n10\t REFERENCES:\n...\n17\t+# Copyright 2012 Google Inc. All Rights Reserved.\n```\n\nSince it looks like Google is copyrighting the whole file otherwise.",
    "created_at": "2012-02-07T16:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122485",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'></a>Just out of curiosity, would it be allowed to do:

```
8	+- Christopher Swenson (2011): Added a special case to compute the order efficiently (This patch Copyright 2012 Google Inc. All Rights Reserved.)
9	+
10	 REFERENCES:
...
```
instead of

```
8	+- Christopher Swenson (2011): Added a special case to compute the order efficiently.
9	+
10	 REFERENCES:
...
17	+# Copyright 2012 Google Inc. All Rights Reserved.
```

Since it looks like Google is copyrighting the whole file otherwise.



---

archive/issue_comments_122486.json:
```json
{
    "body": "Patch for 10976",
    "created_at": "2012-02-07T17:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122486",
    "user": "https://github.com/swenson"
}
```

Patch for 10976



---

archive/issue_comments_122487.json:
```json
{
    "body": "Attachment [patch-10976.2.txt](tarball://root/attachments/some-uuid/ticket10976/patch-10976.2.txt) by @swenson created at 2012-02-07 17:48:39\n\nPatch for 10976",
    "created_at": "2012-02-07T17:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122487",
    "user": "https://github.com/swenson"
}
```

Attachment [patch-10976.2.txt](tarball://root/attachments/some-uuid/ticket10976/patch-10976.2.txt) by @swenson created at 2012-02-07 17:48:39

Patch for 10976



---

archive/issue_comments_122488.json:
```json
{
    "body": "<a id='comment:10'></a>Attachment [patch-10976.txt](tarball://root/attachments/some-uuid/ticket10976/patch-10976.txt) by @swenson created at 2012-02-07 17:49:25\n\nGoogle said that was fine. I fixed the patch to reflect this.",
    "created_at": "2012-02-07T17:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122488",
    "user": "https://github.com/swenson"
}
```

<a id='comment:10'></a>Attachment [patch-10976.txt](tarball://root/attachments/some-uuid/ticket10976/patch-10976.txt) by @swenson created at 2012-02-07 17:49:25

Google said that was fine. I fixed the patch to reflect this.



---

archive/issue_comments_122489.json:
```json
{
    "body": "renamed to standard format for patch names",
    "created_at": "2012-02-07T17:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122489",
    "user": "https://github.com/williamstein"
}
```

renamed to standard format for patch names



---

archive/issue_comments_122490.json:
```json
{
    "body": "<a id='comment:11'></a>Attachment [trac_10976.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.patch) by @williamstein created at 2012-02-07 17:56:17\n\nI changed the name of the patch to our standard format.  In particular, by ending in .patch instead of .txt, it now gets nicely syntax highlighted.  Regarding the actual patch, can you:\n\n1. Indent four spaces instead of 2 (this is the Python.org standard, which we follow). \n\n2. Explain the mathematics behind the algorithm you are using.   For example, if you look at http://trac.sagemath.org/sage_trac/attachment/ticket/11975/trac_11975-part4.patch you'll see that I explain the mathematics behind the algorithm that I've coded.    Alternatively, if the algorithm you coded is very standard, you could give a reference (though I seem to recall you just came up with it from scratch).",
    "created_at": "2012-02-07T17:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122490",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'></a>Attachment [trac_10976.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.patch) by @williamstein created at 2012-02-07 17:56:17

I changed the name of the patch to our standard format.  In particular, by ending in .patch instead of .txt, it now gets nicely syntax highlighted.  Regarding the actual patch, can you:

1. Indent four spaces instead of 2 (this is the Python.org standard, which we follow). 

2. Explain the mathematics behind the algorithm you are using.   For example, if you look at http://trac.sagemath.org/sage_trac/attachment/ticket/11975/trac_11975-part4.patch you'll see that I explain the mathematics behind the algorithm that I've coded.    Alternatively, if the algorithm you coded is very standard, you could give a reference (though I seem to recall you just came up with it from scratch).



---

archive/issue_comments_122491.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-07T17:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122491",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_122492.json:
```json
{
    "body": "Attachment [trac_10976.2.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.2.patch) by @swenson created at 2012-02-08 16:26:45",
    "created_at": "2012-02-08T16:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122492",
    "user": "https://github.com/swenson"
}
```

Attachment [trac_10976.2.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.2.patch) by @swenson created at 2012-02-08 16:26:45



---

archive/issue_comments_122493.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-08T16:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122493",
    "user": "https://github.com/swenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_122494.json:
```json
{
    "body": "<a id='comment:13'></a>I believe that I have addressed your concerns.",
    "created_at": "2012-02-08T16:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122494",
    "user": "https://github.com/swenson"
}
```

<a id='comment:13'></a>I believe that I have addressed your concerns.



---

archive/issue_comments_122495.json:
```json
{
    "body": "<a id='comment:14'></a>I wish we had line-by-line commenting... Anyway:\n\n* Change \"that\" to \"for which\" below?\n\n```\n        1321\t        # Special case: certain subgroups of the symmetric group that Gap reports \n \t1322\t        # generators of the form ((1, 2), (1, 3), ..., (1, m))\n```\n\n* Delete \"the order of \" below:\n\n```\n        1330      \"We then know that the order of this group is isomorphic to S_n\" -- rewrite\n```\n\n* Is there confusion between \"n\" and \"m\" in the comments?\n\n* It would be nice to have a doctest like this:\n\n```\nsage: [SymmetricGroup(n).stabilizer(1)._gap_().Size() for n in [2..10]]\n[1, 2, 6, 24, 120, 720, 5040, 40320, 362880]\nsage: [SymmetricGroup(n).stabilizer(1)._order() for n in [2..10]]\n[1, 2, 6, 24, 120, 720, 5040, 40320, 362880]\n```",
    "created_at": "2012-02-08T17:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122495",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:14'></a>I wish we had line-by-line commenting... Anyway:

* Change "that" to "for which" below?

```
        1321	        # Special case: certain subgroups of the symmetric group that Gap reports 
 	1322	        # generators of the form ((1, 2), (1, 3), ..., (1, m))
```

* Delete "the order of " below:

```
        1330      "We then know that the order of this group is isomorphic to S_n" -- rewrite
```

* Is there confusion between "n" and "m" in the comments?

* It would be nice to have a doctest like this:

```
sage: [SymmetricGroup(n).stabilizer(1)._gap_().Size() for n in [2..10]]
[1, 2, 6, 24, 120, 720, 5040, 40320, 362880]
sage: [SymmetricGroup(n).stabilizer(1)._order() for n in [2..10]]
[1, 2, 6, 24, 120, 720, 5040, 40320, 362880]
```



---

archive/issue_comments_122496.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-08T17:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122496",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_122497.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-08T18:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122497",
    "user": "https://github.com/swenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_122498.json:
```json
{
    "body": "<a id='comment:15'></a>Attachment [trac_10976.3.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.3.patch) by @swenson created at 2012-02-08 18:22:28\n\nDone.\n\nIf we ever move to git, we could use gerrit.  I don't know if there are good line-by-line commenting tools for hg.",
    "created_at": "2012-02-08T18:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122498",
    "user": "https://github.com/swenson"
}
```

<a id='comment:15'></a>Attachment [trac_10976.3.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.3.patch) by @swenson created at 2012-02-08 18:22:28

Done.

If we ever move to git, we could use gerrit.  I don't know if there are good line-by-line commenting tools for hg.



---

archive/issue_comments_122499.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 swenson]:\n> Done.\n> \n> If we ever move to git, we could use gerrit.  I don't know if there are good line-by-line commenting tools for hg.\n\n\nI think it's more an issue of the code review tool we're using, e.g., trac.  For example, http://code.google.com/ has line-by-line code review annotation, and fully supports Mercurial. \n\n -- William",
    "created_at": "2012-02-08T18:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122499",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:16'></a>Replying to [comment:15 swenson]:
> Done.
> 
> If we ever move to git, we could use gerrit.  I don't know if there are good line-by-line commenting tools for hg.


I think it's more an issue of the code review tool we're using, e.g., trac.  For example, http://code.google.com/ has line-by-line code review annotation, and fully supports Mercurial. 

 -- William



---

archive/issue_comments_122500.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 swenson]:\n> If we ever move to git, ...\n\n\nI think it is more a \"when\" than \"if\".\n\n -- William",
    "created_at": "2012-02-08T18:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122500",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:17'></a>Replying to [comment:15 swenson]:
> If we ever move to git, ...


I think it is more a "when" than "if".

 -- William



---

archive/issue_comments_122501.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-08T18:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122501",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_122502.json:
```json
{
    "body": "<a id='comment:18'></a>I missed two small things:\n\n* \"This means that this graph is isomorphic\" --> \"This means that this group is isomorphic\"  (group, not graph). \n\n* \"Christopher Swenson (2011)\" --> \"Christopher Swenson (2012)\"\n\nPositive review once those two details are fixed.",
    "created_at": "2012-02-08T18:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122502",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:18'></a>I missed two small things:

* "This means that this graph is isomorphic" --> "This means that this group is isomorphic"  (group, not graph). 

* "Christopher Swenson (2011)" --> "Christopher Swenson (2012)"

Positive review once those two details are fixed.



---

archive/issue_comments_122503.json:
```json
{
    "body": "<a id='comment:19'></a>Attachment [trac_10976.4.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.4.patch) by @swenson created at 2012-02-08 19:22:58\n\nDone.",
    "created_at": "2012-02-08T19:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122503",
    "user": "https://github.com/swenson"
}
```

<a id='comment:19'></a>Attachment [trac_10976.4.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.4.patch) by @swenson created at 2012-02-08 19:22:58

Done.



---

archive/issue_comments_122504.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-08T19:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122504",
    "user": "https://github.com/swenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_122505.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-08T19:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122505",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_122506.json:
```json
{
    "body": "<a id='comment:20'></a>Argh: \"graoup\"",
    "created_at": "2012-02-08T19:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122506",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:20'></a>Argh: "graoup"



---

archive/issue_comments_122507.json:
```json
{
    "body": "Attachment [trac_10976.5.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.5.patch) by @swenson created at 2012-02-08 19:37:14",
    "created_at": "2012-02-08T19:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122507",
    "user": "https://github.com/swenson"
}
```

Attachment [trac_10976.5.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.5.patch) by @swenson created at 2012-02-08 19:37:14



---

archive/issue_comments_122508.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-08T19:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122508",
    "user": "https://github.com/swenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_122509.json:
```json
{
    "body": "<a id='comment:21'></a>My bad, must be an off day for me.",
    "created_at": "2012-02-08T19:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122509",
    "user": "https://github.com/swenson"
}
```

<a id='comment:21'></a>My bad, must be an off day for me.



---

archive/issue_comments_122510.json:
```json
{
    "body": "<a id='comment:22'></a>Thanks!  Positive review.",
    "created_at": "2012-02-08T19:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122510",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:22'></a>Thanks!  Positive review.



---

archive/issue_comments_122511.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-08T19:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122511",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_122512.json:
```json
{
    "body": "<a id='comment:23'></a>Since I'm new here, I don't know what happens now. The developer's guide is a bit murky on what happens after you get a positive review, especially since I don't believe that I have commit privileges?",
    "created_at": "2012-02-08T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122512",
    "user": "https://github.com/swenson"
}
```

<a id='comment:23'></a>Since I'm new here, I don't know what happens now. The developer's guide is a bit murky on what happens after you get a positive review, especially since I don't believe that I have commit privileges?



---

archive/issue_comments_122513.json:
```json
{
    "body": "<a id='comment:24'></a>It's now the release manager's job (jdmeyer).  Assuming we didn't forget anything obvious, and he trusts us, he'll apply your patch to one of the releases here (or soon to appear here):\n   \n  http://sage.math.washington.edu/home/release/?C=M;O=D\n\nThen the buildbot (or release manager) will run build tests all over the place (on dozens of computers).  If any errors pop up, the ticket will get \"needs work\".  If everything is fine, the patch stays in and will appear in the next Sage release (likely sage-5.0).",
    "created_at": "2012-02-08T20:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122513",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:24'></a>It's now the release manager's job (jdmeyer).  Assuming we didn't forget anything obvious, and he trusts us, he'll apply your patch to one of the releases here (or soon to appear here):
   
  http://sage.math.washington.edu/home/release/?C=M;O=D

Then the buildbot (or release manager) will run build tests all over the place (on dozens of computers).  If any errors pop up, the ticket will get "needs work".  If everything is fine, the patch stays in and will appear in the next Sage release (likely sage-5.0).



---

archive/issue_comments_122514.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:23 swenson]:\n> Since I'm new here, I don't know what happens now. The developer's guide is a bit murky on what happens after you get a positive review, especially since I don't believe that I have commit privileges?\n\n\nThis probably means that there should be a ticket clarifying these steps in the developer's guide...",
    "created_at": "2012-02-08T20:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122514",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:25'></a>Replying to [comment:23 swenson]:
> Since I'm new here, I don't know what happens now. The developer's guide is a bit murky on what happens after you get a positive review, especially since I don't believe that I have commit privileges?


This probably means that there should be a ticket clarifying these steps in the developer's guide...



---

archive/issue_comments_122515.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-02-09T19:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122515",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_122516.json:
```json
{
    "body": "<a id='comment:26'></a>There are several doctest failures with sage-5.0.beta3:\n\n```\nThe following tests failed:\n\n        sage -t  --long -force_lib devel/sage/doc/en/constructions/graph_theory.rst # 1 doctests failed\n        sage -t  --long -force_lib devel/sage/doc/en/thematic_tutorials/group_theory.rst # 1 doctests failed\n        sage -t  --long -force_lib devel/sage/sage/groups/perm_gps/partn_ref/data_structures_pyx.pxi # 3 doctests failed\n        sage -t  --long -force_lib devel/sage/sage/graphs/generic_graph.py # 1 doctests failed\n```\n\n(I'm assuming only the last patch needs to be applied)",
    "created_at": "2012-02-09T19:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122516",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>There are several doctest failures with sage-5.0.beta3:

```
The following tests failed:

        sage -t  --long -force_lib devel/sage/doc/en/constructions/graph_theory.rst # 1 doctests failed
        sage -t  --long -force_lib devel/sage/doc/en/thematic_tutorials/group_theory.rst # 1 doctests failed
        sage -t  --long -force_lib devel/sage/sage/groups/perm_gps/partn_ref/data_structures_pyx.pxi # 3 doctests failed
        sage -t  --long -force_lib devel/sage/sage/graphs/generic_graph.py # 1 doctests failed
```

(I'm assuming only the last patch needs to be applied)



---

archive/issue_comments_122517.json:
```json
{
    "body": "<a id='comment:27'></a>Concerning creating patches: you should use \"hg export tip\", not \"hg diff\".  This way, the uploaded patch contains meta-data about the username, the commit message...\n\nIf you use Mercurial queues, the commit message can be set using \"hg qrefresh -e\".  If not, simply use \"hg commit\".",
    "created_at": "2012-02-09T19:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122517",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Concerning creating patches: you should use "hg export tip", not "hg diff".  This way, the uploaded patch contains meta-data about the username, the commit message...

If you use Mercurial queues, the commit message can be set using "hg qrefresh -e".  If not, simply use "hg commit".



---

archive/issue_comments_122518.json:
```json
{
    "body": "<a id='comment:28'></a>Wow, at least one of those doctest failures shows that there is a mistake in this algorithm:\n\n```\nsage: G = DihedralGroup(5).cayley_graph().automorphism_group()\nsage: sage: G.order()\n6\nsage: G._gap_().Order()\n10\nsage: len(list(G))\n10\n```\n\nI think that the author was perhaps assuming that the generators are all transpositions, but didn't test this:\n\n```\nsage: G.gens()\n[(1,8)(2,10)(3,4)(5,6)(7,9), (1,10)(2,3)(4,5)(6,7)(8,9)]\nsage: G.gens()[0].cycle_tuples()\n[(1, 8), (2, 10), (3, 4), (5, 6), (7, 9)]\n```\nBut in the code in the patch we have\n\n```\n1357\t            a, b = g.cycle_tuples()[0]\n```",
    "created_at": "2012-02-09T23:20:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122518",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:28'></a>Wow, at least one of those doctest failures shows that there is a mistake in this algorithm:

```
sage: G = DihedralGroup(5).cayley_graph().automorphism_group()
sage: sage: G.order()
6
sage: G._gap_().Order()
10
sage: len(list(G))
10
```

I think that the author was perhaps assuming that the generators are all transpositions, but didn't test this:

```
sage: G.gens()
[(1,8)(2,10)(3,4)(5,6)(7,9), (1,10)(2,3)(4,5)(6,7)(8,9)]
sage: G.gens()[0].cycle_tuples()
[(1, 8), (2, 10), (3, 4), (5, 6), (7, 9)]
```
But in the code in the patch we have

```
1357	            a, b = g.cycle_tuples()[0]
```



---

archive/issue_comments_122519.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-12T03:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122519",
    "user": "https://github.com/swenson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_122520.json:
```json
{
    "body": "<a id='comment:29'></a>Attachment [trac_10976.6.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.6.patch) by @swenson created at 2012-02-12 03:06:16\n\nI believe I have fixed the errors.\n\nI wasn't able to test against those files on my current box, as they seemed to be giving me a bunch of random, unrelated errors.",
    "created_at": "2012-02-12T03:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122520",
    "user": "https://github.com/swenson"
}
```

<a id='comment:29'></a>Attachment [trac_10976.6.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.6.patch) by @swenson created at 2012-02-12 03:06:16

I believe I have fixed the errors.

I wasn't able to test against those files on my current box, as they seemed to be giving me a bunch of random, unrelated errors.



---

archive/issue_comments_122521.json:
```json
{
    "body": "<a id='comment:30'></a>Looking at the code, I'm pretty confident this is right and will pass tests.   Should the comment\n\"* All generators have order 2 \" be changed to \"* All generators are transpositions (i.e., permutations that flip switch two elements and leave everything else fixed)\" ?",
    "created_at": "2012-02-13T14:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122521",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:30'></a>Looking at the code, I'm pretty confident this is right and will pass tests.   Should the comment
"* All generators have order 2 " be changed to "* All generators are transpositions (i.e., permutations that flip switch two elements and leave everything else fixed)" ?



---

archive/issue_comments_122522.json:
```json
{
    "body": "Attachment [trac_10976.7.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.7.patch) by @swenson created at 2012-03-05 11:20:08",
    "created_at": "2012-03-05T11:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122522",
    "user": "https://github.com/swenson"
}
```

Attachment [trac_10976.7.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.7.patch) by @swenson created at 2012-03-05 11:20:08



---

archive/issue_comments_122523.json:
```json
{
    "body": "<a id='comment:31'></a>Sorry -- forgot that I still had to fix that comment.\n\nComment is now fixed in the latest patch set.  Please take a look.",
    "created_at": "2012-03-05T11:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122523",
    "user": "https://github.com/swenson"
}
```

<a id='comment:31'></a>Sorry -- forgot that I still had to fix that comment.

Comment is now fixed in the latest patch set.  Please take a look.



---

archive/issue_comments_122524.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-05T14:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122524",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_122525.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-03-08T08:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122525",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_122526.json:
```json
{
    "body": "<a id='comment:33'></a>[attachment:trac_10976.7.patch] doesn't apply to sage-5.0.beta7:\n\n```\napplying /mnt/usb1/scratch/jdemeyer/merger/patches/trac_10976.7.patch\npatching file sage/groups/perm_gps/permgroup.py\nHunk #1 FAILED at 1330\n1 out of 1 hunks FAILED -- saving rejects to file sage/groups/perm_gps/permgroup.py.rej\nabort: patch failed to apply\n```",
    "created_at": "2012-03-08T08:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122526",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>[attachment:trac_10976.7.patch] doesn't apply to sage-5.0.beta7:

```
applying /mnt/usb1/scratch/jdemeyer/merger/patches/trac_10976.7.patch
patching file sage/groups/perm_gps/permgroup.py
Hunk #1 FAILED at 1330
1 out of 1 hunks FAILED -- saving rejects to file sage/groups/perm_gps/permgroup.py.rej
abort: patch failed to apply
```



---

archive/issue_comments_122527.json:
```json
{
    "body": "Attachment [trac_10976.8.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.8.patch) by @williamstein created at 2012-03-08 20:39:05\n\nfolded the two patches into one; added proper \"Trac #10976\" to commit message.",
    "created_at": "2012-03-08T20:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122527",
    "user": "https://github.com/williamstein"
}
```

Attachment [trac_10976.8.patch](tarball://root/attachments/some-uuid/ticket10976/trac_10976.8.patch) by @williamstein created at 2012-03-08 20:39:05

folded the two patches into one; added proper "Trac #10976" to commit message.



---

archive/issue_comments_122528.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 jdemeyer]:\n> [attachment:trac_10976.7.patch] doesn't apply to sage-5.0.beta7:\n\n\nIt does, sort of, but the .patch file actually had two separate HG commits in it, which \"we don't do\".  I (the reviewer) have replaced it by a new patch with only one commit, and fixed the patch log description to start with \"Trac #10976\".",
    "created_at": "2012-03-08T20:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122528",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:34'></a>Replying to [comment:33 jdemeyer]:
> [attachment:trac_10976.7.patch] doesn't apply to sage-5.0.beta7:


It does, sort of, but the .patch file actually had two separate HG commits in it, which "we don't do".  I (the reviewer) have replaced it by a new patch with only one commit, and fixed the patch log description to start with "Trac #10976".



---

archive/issue_comments_122529.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-03-08T20:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122529",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_122530.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks. I didn't know about the one-commit-per-patch thing. (In fact, I thought people were arguing against switching to gerrit because it enforces this...)",
    "created_at": "2012-03-09T19:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122530",
    "user": "https://github.com/swenson"
}
```

<a id='comment:35'></a>Thanks. I didn't know about the one-commit-per-patch thing. (In fact, I thought people were arguing against switching to gerrit because it enforces this...)



---

archive/issue_comments_122531.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:34 was]:\n> It does, sort of, but the .patch file actually had two separate HG commits in it\n\nThere's nothing wrong with that *as long as those two commits are in the correct order* (which wasn't the case).",
    "created_at": "2012-03-09T20:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122531",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>Replying to [comment:34 was]:
> It does, sort of, but the .patch file actually had two separate HG commits in it

There's nothing wrong with that *as long as those two commits are in the correct order* (which wasn't the case).



---

archive/issue_comments_122532.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-13T08:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10976#issuecomment-122532",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028496.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-13T08:22:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10976",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10976#event-28496"
}
```
