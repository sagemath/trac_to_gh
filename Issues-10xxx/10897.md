# Issue 10897: better error msg in AlgebraicConverter.symbolic() and elsewhere

archive/issues_010825.json:
```json
{
    "assignees": [
        "https://github.com/robertwb"
    ],
    "body": "Original summary by reporter: sqrt() as scalar multiple of QQbar vector\n\n```\nsage: QQbar(sqrt(2))*vector(QQbar, [1,2])\n(1.414213562373095?, 2.828427124746190?)\n\nsage: vector(QQbar, [sqrt(2), 2*sqrt(2)])\n(1.414213562373095?, 2.828427124746190?)\n\nsage: sqrt(2)*vector(QQbar, [1,2])\n...\nNotImplementedError: symbol\n```\n\nThis error is confusing: it suggests that the last example is supposed to work, which currently is not the case.\n\nCC:  @jasongrout\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10897_\n\n",
    "created_at": "2011-03-09T21:26:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "better error msg in AlgebraicConverter.symbolic() and elsewhere",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/10897",
    "user": "https://github.com/rbeezer"
}
```
Original summary by reporter: sqrt() as scalar multiple of QQbar vector

```
sage: QQbar(sqrt(2))*vector(QQbar, [1,2])
(1.414213562373095?, 2.828427124746190?)

sage: vector(QQbar, [sqrt(2), 2*sqrt(2)])
(1.414213562373095?, 2.828427124746190?)

sage: sqrt(2)*vector(QQbar, [1,2])
...
NotImplementedError: symbol
```

This error is confusing: it suggests that the last example is supposed to work, which currently is not the case.

CC:  @jasongrout

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/10897_





---

archive/issue_events_144455.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-09T21:26:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144455"
}
```



---

archive/issue_events_144456.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-09T21:26:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144456"
}
```



---

archive/issue_events_144457.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-09T21:26:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144457"
}
```



---

archive/issue_events_144458.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2011-03-09T21:26:10Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "subject": "https://github.com/rbeezer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144458"
}
```



---

archive/issue_comments_105619.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis looks reasonable to me: in the first two cases, you are asking for an explicit conversion, but not in the last one. (Ok, it would probably be possible to make `sqrt(2)` return an element of an embedded quadratic field instead of a symbolic expression...)",
    "created_at": "2014-02-02T12:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105619",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:1" align="right">comment:1</div>

This looks reasonable to me: in the first two cases, you are asking for an explicit conversion, but not in the last one. (Ok, it would probably be possible to make `sqrt(2)` return an element of an embedded quadratic field instead of a symbolic expression...)



---

archive/issue_events_144459.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-02-02T12:04:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144459"
}
```



---

archive/issue_events_144460.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-02-02T12:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144460"
}
```



---

archive/issue_events_144461.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-02-02T12:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144461"
}
```



---

archive/issue_comments_105620.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNo, I don't think so. This is just an unknown use case for the detection of which the `NotImplementedError`s were placed. I have set the summary accordingly. After all, the minor flag is set.",
    "created_at": "2014-03-24T17:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105620",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

No, I don't think so. This is just an unknown use case for the detection of which the `NotImplementedError`s were placed. I have set the summary accordingly. After all, the minor flag is set.



---

archive/issue_events_144462.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144462"
}
```



---

archive/issue_events_144463.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144463"
}
```



---

archive/issue_events_144464.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144464"
}
```



---

archive/issue_events_144465.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144465"
}
```



---

archive/issue_events_144466.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144466"
}
```



---

archive/issue_events_144467.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-24T17:23:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "title_is": "implement AlgebraicConverter.symbolic()",
    "title_was": "sqrt() as scalar multiple of QQbar vector",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144467"
}
```



---

archive/issue_comments_105621.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n+Original summary by reporter: sqrt() as scalar multiple of QQbar vector\n \n ```\n sage: QQbar(sqrt(2))*vector(QQbar, [1,2])\n``````\n",
    "created_at": "2014-03-24T17:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105621",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
+Original summary by reporter: sqrt() as scalar multiple of QQbar vector
 
 ```
 sage: QQbar(sqrt(2))*vector(QQbar, [1,2])
``````




---

archive/issue_comments_105622.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI don't understand what you mean. So let me restate my previous comment in a different way: In the first two examples, you are *converting* `sqrt(2)` into an element of `QQbar`, either directly using the syntax `QQbar()`, or less directly by creating a vector. In the third one, you are multiplying an element of `SR` with a vector of elements of `QQbar`, which could trigger a *coercion* if there existed one, but there is none, and IMO that's a good thing.",
    "created_at": "2014-03-24T18:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105622",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:3" align="right">comment:3</div>

I don't understand what you mean. So let me restate my previous comment in a different way: In the first two examples, you are *converting* `sqrt(2)` into an element of `QQbar`, either directly using the syntax `QQbar()`, or less directly by creating a vector. In the third one, you are multiplying an element of `SR` with a vector of elements of `QQbar`, which could trigger a *coercion* if there existed one, but there is none, and IMO that's a good thing.



---

archive/issue_events_144468.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-25T08:13:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "title_is": "better error msg in AlgebraicConverter.symbolic() and elsewhere",
    "title_was": "implement AlgebraicConverter.symbolic()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144468"
}
```



---

archive/issue_comments_105623.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWhile I agree with this, there might be better solutions that don't leave the user with the impression that something perceived as possible is just \"not implemented\". A more informative error message would be a minimum improvement. I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.",
    "created_at": "2014-03-25T08:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105623",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

While I agree with this, there might be better solutions that don't leave the user with the impression that something perceived as possible is just "not implemented". A more informative error message would be a minimum improvement. I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.



---

archive/issue_comments_105624.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,8 @@\n (1.414213562373095?, 2.828427124746190?)\n \n sage: sqrt(2)*vector(QQbar, [1,2])\n-<BOOM>\n+...\n+NotImplementedError: symbol\n ```\n \n-It seems sqrt() generally gets treated right as an element of QQbar, but as a scalar multiple of a vector over QQbar, it does not.\n+This error is confusing: it suggests that the last example is supposed to work, which currently is not the case.\n``````\n",
    "created_at": "2014-03-25T08:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105624",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,8 @@
 (1.414213562373095?, 2.828427124746190?)
 
 sage: sqrt(2)*vector(QQbar, [1,2])
-<BOOM>
+...
+NotImplementedError: symbol
 ```
 
-It seems sqrt() generally gets treated right as an element of QQbar, but as a scalar multiple of a vector over QQbar, it does not.
+This error is confusing: it suggests that the last example is supposed to work, which currently is not the case.
``````




---

archive/issue_comments_105625.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@rwst](#comment:4):\n> A more informative error message would be a minimum improvement.\n\nTrue.\n\n> I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.\n\nYes, perhaps. At least this is something to keep in mind if one tries to implement a \"field of constant symbolic expression\" as recently discussed on sage-devel. But I'm not sure it is worth the effort...",
    "created_at": "2014-03-25T08:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10897#issuecomment-105625",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@rwst](#comment:4):
> A more informative error message would be a minimum improvement.

True.

> I could imagine subclassing the symbolic ring e.g. by creating an AlgebraicSymbolicRing whose elements then could be coerced might be a way to improve the situation.

Yes, perhaps. At least this is something to keep in mind if one tries to implement a "field of constant symbolic expression" as recently discussed on sage-devel. But I'm not sure it is worth the effort...



---

archive/issue_events_144469.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144469"
}
```



---

archive/issue_events_144470.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144470"
}
```



---

archive/issue_events_144471.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10897",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10897#event-144471"
}
```
