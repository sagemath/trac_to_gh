# Issue 10053: Equality testing instead of comparisons in differential forms code

archive/issues_010052.json:
```json
{
    "body": "This patch replaces the comparison member function in `CoordinatePatch` and `DifferentialForms` by equality checking (`__eq__` instead `__cmp__`), as there is generally no canonical way of making sense of the comparison between instances of those classes.\n\nThis is related to #10041.\n\n## Apply\n\n* patch from #10041\n* [attachment:trac_10053_equality_testing_forms.patch]\n\n**Assignee:** @burcin\n\n**CC:**  @jasongrout mhampton @nilesjohnson @qed777 @jdemeyer\n\n**Keywords:** forms, comparison, equality\n\n**Author:** Joris Vankerschaver\n\n**Reviewer:** Niles Johnson\n\n**Merged:** sage-4.6.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/10053\n\n",
    "closed_at": "2010-10-21T08:42:39Z",
    "created_at": "2010-10-02T00:11:42Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6",
    "title": "Equality testing instead of comparisons in differential forms code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10053",
    "user": "https://github.com/jvkersch"
}
```
This patch replaces the comparison member function in `CoordinatePatch` and `DifferentialForms` by equality checking (`__eq__` instead `__cmp__`), as there is generally no canonical way of making sense of the comparison between instances of those classes.

This is related to #10041.

## Apply

* patch from #10041
* [attachment:trac_10053_equality_testing_forms.patch]

**Assignee:** @burcin

**CC:**  @jasongrout mhampton @nilesjohnson @qed777 @jdemeyer

**Keywords:** forms, comparison, equality

**Author:** Joris Vankerschaver

**Reviewer:** Niles Johnson

**Merged:** sage-4.6.rc0

Issue created by migration from https://trac.sagemath.org/ticket/10053





---

archive/issue_events_077749.json:
```json
{
    "actor": "https://github.com/jvkersch",
    "created_at": "2010-10-02T00:16:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77749"
}
```



---

archive/issue_comments_095707.json:
```json
{
    "body": "<a id='comment:2'></a>\nAccording to python documentation for `__eq__` (http://docs.python.org/reference/datamodel.html#object.__eq__), you should also define `__ne__` for != comparison.",
    "created_at": "2010-10-02T01:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95707",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
According to python documentation for `__eq__` (http://docs.python.org/reference/datamodel.html#object.__eq__), you should also define `__ne__` for != comparison.



---

archive/issue_comments_095708.json:
```json
{
    "body": "<a id='comment:3'></a>\nTry again: According to python docs for !__eq!__ ([http://docs.python.org/reference/datamodel.html#object.__eq](http://docs.python.org/reference/datamodel.html#object.__eq__)!__), you should define !__ne!__ as well for != comparison.\n\nIf the objects are not hashable, you might also set !__hash!__=None (see the note about that function at\u00a0[http://docs.python.org/reference/datamodel.html#object.__hash](http://docs.python.org/reference/datamodel.html#object.__hash__)!__)",
    "created_at": "2010-10-02T01:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95708",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
Try again: According to python docs for !__eq!__ ([http://docs.python.org/reference/datamodel.html#object.__eq](http://docs.python.org/reference/datamodel.html#object.__eq__)!__), you should define !__ne!__ as well for != comparison.

If the objects are not hashable, you might also set !__hash!__=None (see the note about that function atÂ [http://docs.python.org/reference/datamodel.html#object.__hash](http://docs.python.org/reference/datamodel.html#object.__hash__)!__)



---

archive/issue_comments_095709.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jason](#comment%3A3):\n> Try again: According to python docs for !__eq!__ ([http://docs.python.org/reference/datamodel.html#object.__eq](http://docs.python.org/reference/datamodel.html#object.__eq__)!__), you should define !__ne!__ as well for != comparison.\n\n\nDone.  I didn't overload the hashing operator as this seems to work well (objects that are equal when compared have the same hash values).",
    "created_at": "2010-10-03T21:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95709",
    "user": "https://github.com/jvkersch"
}
```

<a id='comment:4'></a>
Replying to [jason](#comment%3A3):
> Try again: According to python docs for !__eq!__ ([http://docs.python.org/reference/datamodel.html#object.__eq](http://docs.python.org/reference/datamodel.html#object.__eq__)!__), you should define !__ne!__ as well for != comparison.


Done.  I didn't overload the hashing operator as this seems to work well (objects that are equal when compared have the same hash values).



---

archive/issue_comments_095710.json:
```json
{
    "body": "<a id='comment:5'></a>\nWith this patch and the one at #10041, sage passes all (`-long`) doctests (linux, Red Hat Enterprise).\n\nAt #10041, jason [commented](http://trac.sagemath.org/sage_trac/ticket/10041#comment:3) that comparison of tuples of symbolic variables is not well-defined, and suggested using strings instead.  That has been done in `coordinate_patch.py` and `differential_forms.py`, but not in `differential_form_element.py` -- there, comparison uses `__dict__`.  So is the following expected to work on all systems?\n\n```\nsage: F = DifferentialForms(); F\nAlgebra of differential forms in the variables x, y, z\nsage: var('x,y,z')\n(x, y, z)\nsage: f = DifferentialForm(F, 2)\nsage: f[1,2] = x; f\nx*dy/\\dz\nsage: g = DifferentialForm(F, 2)\nsage: g[0, 2] = y\nsage: g[1, 2] = 2*x; g\n2*x*dy/\\dz + y*dx/\\dz\n\nsage: f == g\nFalse\nsage: g == g\nTrue\n```\n\nNote:\n\n```\nsage: g.__dict__\n{'_components': {(1, 2): 2*x, (0, 2): y}, '_degree': 2}\nsage: f.__dict__\n{'_components': {(1, 2): x}, '_degree': 2}\nsage: type(g.__dict__['_components'][(0,2)])\n<type 'sage.symbolic.expression.Expression'>\n```",
    "created_at": "2010-10-05T15:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95710",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:5'></a>
With this patch and the one at #10041, sage passes all (`-long`) doctests (linux, Red Hat Enterprise).

At #10041, jason [commented](http://trac.sagemath.org/sage_trac/ticket/10041#comment:3) that comparison of tuples of symbolic variables is not well-defined, and suggested using strings instead.  That has been done in `coordinate_patch.py` and `differential_forms.py`, but not in `differential_form_element.py` -- there, comparison uses `__dict__`.  So is the following expected to work on all systems?

```
sage: F = DifferentialForms(); F
Algebra of differential forms in the variables x, y, z
sage: var('x,y,z')
(x, y, z)
sage: f = DifferentialForm(F, 2)
sage: f[1,2] = x; f
x*dy/\dz
sage: g = DifferentialForm(F, 2)
sage: g[0, 2] = y
sage: g[1, 2] = 2*x; g
2*x*dy/\dz + y*dx/\dz

sage: f == g
False
sage: g == g
True
```

Note:

```
sage: g.__dict__
{'_components': {(1, 2): 2*x, (0, 2): y}, '_degree': 2}
sage: f.__dict__
{'_components': {(1, 2): x}, '_degree': 2}
sage: type(g.__dict__['_components'][(0,2)])
<type 'sage.symbolic.expression.Expression'>
```



---

archive/issue_comments_095711.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n This patch replaces the comparison member function in `CoordinatePatch` and `DifferentialForms` by equality checking (`__eq__` instead `__cmp__`), as there is generally no canonical way of making sense of the comparison between instances of those classes.\n \n This is related to #10041.\n+\n+## Apply\n+\n+* patch from #10041\n+* [attachment:trac_10053_equality_testing_forms.patch]\n``````\n",
    "created_at": "2010-10-05T15:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95711",
    "user": "https://github.com/nilesjohnson"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
 This patch replaces the comparison member function in `CoordinatePatch` and `DifferentialForms` by equality checking (`__eq__` instead `__cmp__`), as there is generally no canonical way of making sense of the comparison between instances of those classes.
 
 This is related to #10041.
+
+## Apply
+
+* patch from #10041
+* [attachment:trac_10053_equality_testing_forms.patch]
``````




---

archive/issue_comments_095712.json:
```json
{
    "body": "**Reviewer:** Niles Johnson",
    "created_at": "2010-10-05T15:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95712",
    "user": "https://github.com/nilesjohnson"
}
```

**Reviewer:** Niles Johnson



---

archive/issue_events_077750.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2010-10-05T15:24:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77750"
}
```



---

archive/issue_events_077751.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2010-10-05T15:24:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77751"
}
```



---

archive/attachments_013109.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10053_equality_testing_forms.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10053/trac_10053_equality_testing_forms.patch",
    "created_at": "2010-10-06T04:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jvkersch"
}
```



---

archive/issue_comments_095713.json:
```json
{
    "body": "",
    "created_at": "2010-10-06T04:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95713",
    "user": "https://github.com/jvkersch"
}
```





---

archive/issue_events_077752.json:
```json
{
    "actor": "https://github.com/jvkersch",
    "created_at": "2010-10-06T04:38:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77752"
}
```



---

archive/issue_events_077753.json:
```json
{
    "actor": "https://github.com/jvkersch",
    "created_at": "2010-10-06T04:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77753"
}
```



---

archive/issue_comments_095714.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [niles](#comment%3A5):\n\n> \n> Note:\n> \n> ```\n> sage: g.__dict__\n> {'_components': {(1, 2): 2*x, (0, 2): y}, '_degree': 2}\n> sage: f.__dict__\n> {'_components': {(1, 2): x}, '_degree': 2}\n> sage: type(g.__dict__['_components'][(0,2)])\n> <type 'sage.symbolic.expression.Expression'>\n> ```\n\n\nThanks for noting this -- I agree that this code would give the same kind of problems as before.  I've uploaded a new patch, where `__eq__` essentially iterates over the underlying dictionary, converts the values to strings and does the comparison on the strings.  Secondly, in the internal function `_cleanup()` there was some code `if fun == 0`, which I've replaced by `if fun.is_zero()`.  I think this addresses all cases of symbolic expressions appearing in equalities.  One downside however is that the current implementation is somewhat slower than the previous one.  I have a few ideas of how to address this, but I feel this issue is better left to a different patch.",
    "created_at": "2010-10-06T04:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95714",
    "user": "https://github.com/jvkersch"
}
```

<a id='comment:6'></a>
Replying to [niles](#comment%3A5):

> 
> Note:
> 
> ```
> sage: g.__dict__
> {'_components': {(1, 2): 2*x, (0, 2): y}, '_degree': 2}
> sage: f.__dict__
> {'_components': {(1, 2): x}, '_degree': 2}
> sage: type(g.__dict__['_components'][(0,2)])
> <type 'sage.symbolic.expression.Expression'>
> ```


Thanks for noting this -- I agree that this code would give the same kind of problems as before.  I've uploaded a new patch, where `__eq__` essentially iterates over the underlying dictionary, converts the values to strings and does the comparison on the strings.  Secondly, in the internal function `_cleanup()` there was some code `if fun == 0`, which I've replaced by `if fun.is_zero()`.  I think this addresses all cases of symbolic expressions appearing in equalities.  One downside however is that the current implementation is somewhat slower than the previous one.  I have a few ideas of how to address this, but I feel this issue is better left to a different patch.



---

archive/issue_comments_095715.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jvkersch](#comment%3A6):\n\n> Thanks for noting this -- I agree that this code would give the same kind of problems as before.  \n\n\nDoes it really!?  Thinking more about this last night, I started to wonder if this is really a bug with comparison of symbolic expressions, not with differential forms.  Before we move on with this, would you mind doing a little checking to see if converting to strings really is the best way to compare symbolic expressions? (If it is, then I would say '`==`' is broken for symbolic expressions.)",
    "created_at": "2010-10-06T11:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95715",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:7'></a>
Replying to [jvkersch](#comment%3A6):

> Thanks for noting this -- I agree that this code would give the same kind of problems as before.  


Does it really!?  Thinking more about this last night, I started to wonder if this is really a bug with comparison of symbolic expressions, not with differential forms.  Before we move on with this, would you mind doing a little checking to see if converting to strings really is the best way to compare symbolic expressions? (If it is, then I would say '`==`' is broken for symbolic expressions.)



---

archive/issue_comments_095716.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [niles](#comment%3A7):\n \n> Does it really!?  Thinking more about this last night, I started to wonder if this is really a bug with comparison of symbolic expressions, not with differential forms.  Before we move on with this, would you mind doing a little checking to see if converting to strings really is the best way to compare symbolic expressions? (If it is, then I would say '`==`' is broken for symbolic expressions.)\n\n\n\nAs far as I can tell, the comparison code in `sage/symbolic/expression.pyx` just calls `_richcmp_` in `sage/structure/element.pyx`, which seems fine.  After reading the bug reports here and in #10041, I thought the issue was that writing anything like `x == 0` merely defined a symbolic equation (instead of evaluating directly to something boolean).  I could understand this (and I think it is the intended behavior, no?), so I changed all symbolic comparisons to comparisons of string expressions, or wrote something like `(lhs - rhs).is_zero()`, although the latter seems to be slower.  \n \n\nI would love to get to the bottom of this.  Specifically, I'm still confused as to why my original code (comparing tuples of symbolic variables) seemed to work fine on Mac but gave different answers on Linux.  It feels like it should fail consistently across all platforms :)",
    "created_at": "2010-10-07T05:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95716",
    "user": "https://github.com/jvkersch"
}
```

<a id='comment:8'></a>
Replying to [niles](#comment%3A7):
 
> Does it really!?  Thinking more about this last night, I started to wonder if this is really a bug with comparison of symbolic expressions, not with differential forms.  Before we move on with this, would you mind doing a little checking to see if converting to strings really is the best way to compare symbolic expressions? (If it is, then I would say '`==`' is broken for symbolic expressions.)



As far as I can tell, the comparison code in `sage/symbolic/expression.pyx` just calls `_richcmp_` in `sage/structure/element.pyx`, which seems fine.  After reading the bug reports here and in #10041, I thought the issue was that writing anything like `x == 0` merely defined a symbolic equation (instead of evaluating directly to something boolean).  I could understand this (and I think it is the intended behavior, no?), so I changed all symbolic comparisons to comparisons of string expressions, or wrote something like `(lhs - rhs).is_zero()`, although the latter seems to be slower.  
 

I would love to get to the bottom of this.  Specifically, I'm still confused as to why my original code (comparing tuples of symbolic variables) seemed to work fine on Mac but gave different answers on Linux.  It feels like it should fail consistently across all platforms :)



---

archive/issue_comments_095717.json:
```json
{
    "body": "<a id='comment:9'></a>\nAs far as symbolic variables are concerned, pynac can compare then.\n\nCurrently it does so by comparing the underlying strings, but it could change soon because Burcin and I are working on the orders used within pynac (see http://groups.google.com/group/pynac-devel/browse_thread/thread/a36020bf9208bf08 , however you'll still get consistent equality...).\n\nHowever, when using operators <, ==, etc. or `_richcmp_` you get symbolic equalities and inequalities.\n\nYou can use !__cmp!__ (symbolic/expression.pyx) or cmp to actually compare them (what is currently done by comparing strings).\n\nIf I understand correctly that calls _cmp (structure/elemet.pyx) which calls _cmp_c_impl (symbolic/expression.pyx) which calls compare of pynac (defined in libs/ginac/decl.pxi).\n\nI don't know what is done with the tuples...",
    "created_at": "2010-10-08T09:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95717",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
As far as symbolic variables are concerned, pynac can compare then.

Currently it does so by comparing the underlying strings, but it could change soon because Burcin and I are working on the orders used within pynac (see http://groups.google.com/group/pynac-devel/browse_thread/thread/a36020bf9208bf08 , however you'll still get consistent equality...).

However, when using operators <, ==, etc. or `_richcmp_` you get symbolic equalities and inequalities.

You can use !__cmp!__ (symbolic/expression.pyx) or cmp to actually compare them (what is currently done by comparing strings).

If I understand correctly that calls _cmp (structure/elemet.pyx) which calls _cmp_c_impl (symbolic/expression.pyx) which calls compare of pynac (defined in libs/ginac/decl.pxi).

I don't know what is done with the tuples...



---

archive/issue_comments_095718.json:
```json
{
    "body": "<a id='comment:10'></a>\nThanks Jean-Pierre, for providing that link and for your comments on this matter.  With this in mind, I think that this patch and #10041 address all of the symbolic equality issues that arose in #9650 and subsequent discussions: \n\n* When dealing with symbolic expressions, we compare the corresponding string representations (this is also how pynac does it) or call (lhs - rhs).is_zero(); \n* For tuples of symbolic string expressions, we convert everything to strings and compare the resulting tuples of strings (this is the approach taken in #10041 to establish equality of two instances of `CoordinatePatch`); \n* For dictionaries whose values are symbolic expressions, we iterate over the dictionary, convert the values to strings, and compare as we go along.  Using `itertools` this can be done quite efficiently, so I don't see any room for improvement now.  Comparing dictionaries of symbolic expressions comes up when establishing equality of differential forms, which is the subject of the current patch.",
    "created_at": "2010-10-10T05:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95718",
    "user": "https://github.com/jvkersch"
}
```

<a id='comment:10'></a>
Thanks Jean-Pierre, for providing that link and for your comments on this matter.  With this in mind, I think that this patch and #10041 address all of the symbolic equality issues that arose in #9650 and subsequent discussions: 

* When dealing with symbolic expressions, we compare the corresponding string representations (this is also how pynac does it) or call (lhs - rhs).is_zero(); 
* For tuples of symbolic string expressions, we convert everything to strings and compare the resulting tuples of strings (this is the approach taken in #10041 to establish equality of two instances of `CoordinatePatch`); 
* For dictionaries whose values are symbolic expressions, we iterate over the dictionary, convert the values to strings, and compare as we go along.  Using `itertools` this can be done quite efficiently, so I don't see any room for improvement now.  Comparing dictionaries of symbolic expressions comes up when establishing equality of differential forms, which is the subject of the current patch.



---

archive/issue_comments_095719.json:
```json
{
    "body": "<a id='comment:11'></a>\nOk, I'm ready to give this a positive review: the patch(es) pass all long doctests, documentation builds well.  Moreover, comparison of symbolic expressions is work in progress, so comparing as strings seems to be the best current solution.  jpflori suggested using `cmp` to compare symbolic expressions, but this is what lead to inconsistent behavior for comparison of tuples of symbolic expressions (see #10041).\n\nNote that forms are appropriately simplified before comparison:\n\n```\nsage: F = DifferentialForms(); F\nAlgebra of differential forms in the variables x, y, z\nsage: var('x,y,z')\n(x, y, z)\nsage: sage: g = DifferentialForm(F, 2)\nsage: sage: g[0, 2] = y\nsage: sage: g[1, 2] = 2*x; g\n2*x*dy/\\dz + y*dx/\\dz\nsage: g = DifferentialForm(F, 2)\nsage: g[0, 2] = y\nsage: g[1, 2] = 2*x; g\n2*x*dy/\\dz + y*dx/\\dz\nsage: f = DifferentialForm(F, 2)\nsage: f[0, 2] = sqrt(4)*y/2\nsage: f[1, 2] = -1 - x^2 + (x+1)^2; f\n((x + 1)^2 - x^2 - 1)*dy/\\dz + y*dx/\\dz\nsage: f == g\nTrue\n```\n\nI will also now mark #10041 as positive review.",
    "created_at": "2010-10-11T21:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95719",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:11'></a>
Ok, I'm ready to give this a positive review: the patch(es) pass all long doctests, documentation builds well.  Moreover, comparison of symbolic expressions is work in progress, so comparing as strings seems to be the best current solution.  jpflori suggested using `cmp` to compare symbolic expressions, but this is what lead to inconsistent behavior for comparison of tuples of symbolic expressions (see #10041).

Note that forms are appropriately simplified before comparison:

```
sage: F = DifferentialForms(); F
Algebra of differential forms in the variables x, y, z
sage: var('x,y,z')
(x, y, z)
sage: sage: g = DifferentialForm(F, 2)
sage: sage: g[0, 2] = y
sage: sage: g[1, 2] = 2*x; g
2*x*dy/\dz + y*dx/\dz
sage: g = DifferentialForm(F, 2)
sage: g[0, 2] = y
sage: g[1, 2] = 2*x; g
2*x*dy/\dz + y*dx/\dz
sage: f = DifferentialForm(F, 2)
sage: f[0, 2] = sqrt(4)*y/2
sage: f[1, 2] = -1 - x^2 + (x+1)^2; f
((x + 1)^2 - x^2 - 1)*dy/\dz + y*dx/\dz
sage: f == g
True
```

I will also now mark #10041 as positive review.



---

archive/issue_events_077754.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2010-10-11T21:32:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77754"
}
```



---

archive/issue_events_077755.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2010-10-11T21:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77755"
}
```



---

archive/issue_events_077756.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-21T07:40:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "milestone": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77756"
}
```



---

archive/issue_comments_095720.json:
```json
{
    "body": "**Merged:** sage-4.6.rc0",
    "created_at": "2010-10-21T08:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10053#issuecomment-95720",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.6.rc0



---

archive/issue_events_077757.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-21T08:42:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77757"
}
```



---

archive/issue_events_077758.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-21T08:42:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10053",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10053#event-77758"
}
```
