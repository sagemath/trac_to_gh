# Issue 10163: make doc-html sometimes hangs after having finished

archive/issues_010162.json:
```json
{
    "body": "The following is a non-reproducible problem, but it happened several times.\nWhen building the Sage documentation using\n\n```\nmake doc-html\n```\nit can happen that `make` simply hangs forever after the message\n\n```\nBuild finished.  The built documents can be found in /mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha0/devel/sage/doc/output/html/fr/a_tour_of_sage\n```\n\nPressing CTRL-C at this point gives\n\n```\nmake: *** [doc-html] Interrupt\n```\n\nHere is a `ps` snapshot of a situation where it happened:\n\n```\n$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed\n  PID  PPID  SESS TT       TPGID COMMAND\n30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n21614     1 21614 ?           -1 SCREEN\n23411 21614 23411 pts/6     6956  \\_ /bin/bash\n 6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n 6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n 6970  6969 23411 pts/6     6956  |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n30248  6956 23411 pts/6     6956  |       \\_ make -j6 doc-html\n30249 30248 23411 pts/6     6956  |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n30250 30249 23411 pts/6     6956  |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n```\nNote the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.\n\nIf it matters:\n\n```\n$ bash --version\nGNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)\nCopyright (C) 2009 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n\nThis is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n```\n\n**Apply** [attachment:10163_sage_cleaner.patch]\n\n**Assignee:** GeorgSWeber\n\n**Keywords:** build Makefile sage-cleaner cleaner\n\n**Resolution:** fixed\n\n**Author:** Jeroen Demeyer\n\n**Reviewer:** Volker Braun\n\n**Merged:** sage-4.7.2.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10163\n\n",
    "closed_at": "2011-10-08T18:14:56Z",
    "created_at": "2010-10-23T21:57:18Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "make doc-html sometimes hangs after having finished",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10163",
    "user": "https://github.com/jdemeyer"
}
```
The following is a non-reproducible problem, but it happened several times.
When building the Sage documentation using

```
make doc-html
```
it can happen that `make` simply hangs forever after the message

```
Build finished.  The built documents can be found in /mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha0/devel/sage/doc/output/html/fr/a_tour_of_sage
```

Pressing CTRL-C at this point gives

```
make: *** [doc-html] Interrupt
```

Here is a `ps` snapshot of a situation where it happened:

```
$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed
  PID  PPID  SESS TT       TPGID COMMAND
30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
21614     1 21614 ?           -1 SCREEN
23411 21614 23411 pts/6     6956  \_ /bin/bash
 6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
 6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
 6970  6969 23411 pts/6     6956  |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
30248  6956 23411 pts/6     6956  |       \_ make -j6 doc-html
30249 30248 23411 pts/6     6956  |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
30250 30249 23411 pts/6     6956  |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
```
Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.

If it matters:

```
$ bash --version
GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
```

**Apply** [attachment:10163_sage_cleaner.patch]

**Assignee:** GeorgSWeber

**Keywords:** build Makefile sage-cleaner cleaner

**Resolution:** fixed

**Author:** Jeroen Demeyer

**Reviewer:** Volker Braun

**Merged:** sage-4.7.2.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10163





---

archive/issue_comments_129735.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n-The following is a non-reproducible problem, but it happened at least twice for me:\n+The following is a non-reproducible problem, but it happened at least three times for me:\n when building Sage from source using\n \n ```\n-export MAKE=\"make -j8\"\n-$MAKE\n+make\n ```\n it can happen that `make` simply hangs forever after the message\n \n@@ -16,5 +15,3 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n-\n-I'm not sure whether the \"-j8\" option has anything to do with it.\n``````\n",
    "created_at": "2010-11-02T14:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129735",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
-The following is a non-reproducible problem, but it happened at least twice for me:
+The following is a non-reproducible problem, but it happened at least three times for me:
 when building Sage from source using
 
 ```
-export MAKE="make -j8"
-$MAKE
+make
 ```
 it can happen that `make` simply hangs forever after the message
 
@@ -16,5 +15,3 @@
 ```
 make: *** [doc-html] Interrupt
 ```
-
-I'm not sure whether the "-j8" option has anything to do with it.
``````




---

archive/issue_comments_129736.json:
```json
{
    "body": "**Changing keywords** from \"build\" to \"build Makefile\".",
    "created_at": "2010-12-19T13:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129736",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "build" to "build Makefile".



---

archive/issue_comments_129737.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis might be due to NFS (I know it happened on sage.math.washington.edu but I can't remember whether it ever happened on other machines).",
    "created_at": "2010-12-19T13:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
This might be due to NFS (I know it happened on sage.math.washington.edu but I can't remember whether it ever happened on other machines).



---

archive/issue_comments_129738.json:
```json
{
    "body": "<a id='comment:3'></a>\nI am getting more and more convinced that this is an NFS issue, so proposal to close this ticket as invalid.",
    "created_at": "2011-01-19T13:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129738",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
I am getting more and more convinced that this is an NFS issue, so proposal to close this ticket as invalid.



---

archive/issue_comments_129739.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-01-19T13:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129739",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_events_031308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T13:31:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10163#event-31308"
}
```



---

archive/issue_comments_129740.json:
```json
{
    "body": "<a id='comment:4'></a>\nJust because NFS triggers it doesn't necessarily mean that its not a bug in Sage. I've never seen this issue, but then I never use high-latency filesystems. Can you run strace/gdb on the stuck process if you see it again? (use -p to attach to existing pid)",
    "created_at": "2011-03-02T10:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129740",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
Just because NFS triggers it doesn't necessarily mean that its not a bug in Sage. I've never seen this issue, but then I never use high-latency filesystems. Can you run strace/gdb on the stuck process if you see it again? (use -p to attach to existing pid)



---

archive/issue_comments_129741.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2011-03-02T10:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129741",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_129742.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-The following is a non-reproducible problem, but it happened at least three times for me:\n-when building Sage from source using\n+The following is a non-reproducible problem, but it happened several times.\n+When building Sage from source using\n \n ```\n make\n@@ -15,3 +15,4 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n+The issue is a stuck `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-06T14:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129742",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-The following is a non-reproducible problem, but it happened at least three times for me:
-when building Sage from source using
+The following is a non-reproducible problem, but it happened several times.
+When building Sage from source using
 
 ```
 make
@@ -15,3 +15,4 @@
 ```
 make: *** [doc-html] Interrupt
 ```
+The issue is a stuck `sage-cleaner` process.
``````




---

archive/issue_events_031309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T14:55:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10163#event-31309"
}
```



---

archive/issue_comments_129743.json:
```json
{
    "body": "<a id='comment:6'></a>\nShould there be some timeout setting in sage-cleaner?  If it has to wait too long, exit but print a warning message that there may be some stray processes which should be killed by hand?",
    "created_at": "2011-10-06T18:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129743",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Should there be some timeout setting in sage-cleaner?  If it has to wait too long, exit but print a warning message that there may be some stray processes which should be killed by hand?



---

archive/issue_comments_129744.json:
```json
{
    "body": "<a id='comment:7'></a>\nNo the sage cleaner needs to stick around for as long as Sage is running. There might be a computation running that, after a long while, does a big `@`parallel loop and if nobody is cleaning up the filesystem will be very unhappy.",
    "created_at": "2011-10-06T19:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129744",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
No the sage cleaner needs to stick around for as long as Sage is running. There might be a computation running that, after a long while, does a big `@`parallel loop and if nobody is cleaning up the filesystem will be very unhappy.



---

archive/issue_comments_129745.json:
```json
{
    "body": "<a id='comment:8'></a>\nDoes `sage-cleaner` actually run when you do `sage -docbuild ...` (which is called by `make doc-html`)?  It doesn't look like it to me.  It seems that `sage -docbuild all html` creates a bunch of temporary directories in `DOT_SAGE/temp/HOSTNAME`, and those aren't deleted until the next time I run Sage, when `sage-cleaner` actually runs.  So maybe the issue on this ticket isn't related to `sage-cleaner`.",
    "created_at": "2011-10-06T20:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129745",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Does `sage-cleaner` actually run when you do `sage -docbuild ...` (which is called by `make doc-html`)?  It doesn't look like it to me.  It seems that `sage -docbuild all html` creates a bunch of temporary directories in `DOT_SAGE/temp/HOSTNAME`, and those aren't deleted until the next time I run Sage, when `sage-cleaner` actually runs.  So maybe the issue on this ticket isn't related to `sage-cleaner`.



---

archive/issue_comments_129746.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,4 +15,28 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n-The issue is a stuck `sage-cleaner` process.\n+\n+Here is a `ps` snapshot of a situation where it happened:\n+\n+```\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,args\n+  PID  PPID  SESS TT       COMMAND\n+26136 24879 24879 ?        sshd: jdemeyer@pts/25\n+26308 26136 26308 pts/25    \\_ -bash\n+26434 26308 26308 pts/25        \\_ screen -r\n+30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n+21614     1 21614 ?        SCREEN\n+21615 21614 21615 pts/24    \\_ /bin/bash\n+21623 21615 21615 pts/24    |   \\_ top\n+23411 21614 23411 pts/6     \\_ /bin/bash\n+ 6956 23411 23411 pts/6     |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6969  6956 23411 pts/6     |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6970  6969 23411 pts/6     |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n+30248  6956 23411 pts/6     |       \\_ make -j6 doc-html\n+30249 30248 23411 pts/6     |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+30250 30249 23411 pts/6     |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n+30747 30248 23411 pts/6     |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n+30748 30747 23411 pts/6     |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n+30750 30748 23411 pts/6     |                   \\_ tee -a dochtml.log\n+```\n+Note the orphaned `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-07T10:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129746",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,4 +15,28 @@
 ```
 make: *** [doc-html] Interrupt
 ```
-The issue is a stuck `sage-cleaner` process.
+
+Here is a `ps` snapshot of a situation where it happened:
+
+```
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,args
+  PID  PPID  SESS TT       COMMAND
+26136 24879 24879 ?        sshd: jdemeyer@pts/25
+26308 26136 26308 pts/25    \_ -bash
+26434 26308 26308 pts/25        \_ screen -r
+30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
+21614     1 21614 ?        SCREEN
+21615 21614 21615 pts/24    \_ /bin/bash
+21623 21615 21615 pts/24    |   \_ top
+23411 21614 23411 pts/6     \_ /bin/bash
+ 6956 23411 23411 pts/6     |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6969  6956 23411 pts/6     |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6970  6969 23411 pts/6     |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
+30248  6956 23411 pts/6     |       \_ make -j6 doc-html
+30249 30248 23411 pts/6     |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+30250 30249 23411 pts/6     |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
+30747 30248 23411 pts/6     |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
+30748 30747 23411 pts/6     |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
+30750 30748 23411 pts/6     |                   \_ tee -a dochtml.log
+```
+Note the orphaned `sage-cleaner` process.
``````




---

archive/issue_comments_129747.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,24 +19,24 @@\n Here is a `ps` snapshot of a situation where it happened:\n \n ```\n-$ ps -u jdemeyer xfo pid,ppid,sess,tty,args\n-  PID  PPID  SESS TT       COMMAND\n-26136 24879 24879 ?        sshd: jdemeyer@pts/25\n-26308 26136 26308 pts/25    \\_ -bash\n-26434 26308 26308 pts/25        \\_ screen -r\n-30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n-21614     1 21614 ?        SCREEN\n-21615 21614 21615 pts/24    \\_ /bin/bash\n-21623 21615 21615 pts/24    |   \\_ top\n-23411 21614 23411 pts/6     \\_ /bin/bash\n- 6956 23411 23411 pts/6     |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n- 6969  6956 23411 pts/6     |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n- 6970  6969 23411 pts/6     |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n-30248  6956 23411 pts/6     |       \\_ make -j6 doc-html\n-30249 30248 23411 pts/6     |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n-30250 30249 23411 pts/6     |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n-30747 30248 23411 pts/6     |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n-30748 30747 23411 pts/6     |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n-30750 30748 23411 pts/6     |                   \\_ tee -a dochtml.log\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n+  PID  PPID  SESS TT       TPGID COMMAND\n+26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25\n+26308 26136 26308 pts/25   26434  \\_ -bash\n+26434 26308 26308 pts/25   26434      \\_ screen -r\n+30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n+21614     1 21614 ?           -1 SCREEN\n+21615 21614 21615 pts/24   21623  \\_ /bin/bash\n+21623 21615 21615 pts/24   21623  |   \\_ top\n+23411 21614 23411 pts/6     6956  \\_ /bin/bash\n+ 6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6970  6969 23411 pts/6     6956  |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n+30248  6956 23411 pts/6     6956  |       \\_ make -j6 doc-html\n+30249 30248 23411 pts/6     6956  |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+30250 30249 23411 pts/6     6956  |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n+30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n+30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n+30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n ```\n Note the orphaned `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-07T10:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129747",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,24 +19,24 @@
 Here is a `ps` snapshot of a situation where it happened:
 
 ```
-$ ps -u jdemeyer xfo pid,ppid,sess,tty,args
-  PID  PPID  SESS TT       COMMAND
-26136 24879 24879 ?        sshd: jdemeyer@pts/25
-26308 26136 26308 pts/25    \_ -bash
-26434 26308 26308 pts/25        \_ screen -r
-30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
-21614     1 21614 ?        SCREEN
-21615 21614 21615 pts/24    \_ /bin/bash
-21623 21615 21615 pts/24    |   \_ top
-23411 21614 23411 pts/6     \_ /bin/bash
- 6956 23411 23411 pts/6     |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
- 6969  6956 23411 pts/6     |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
- 6970  6969 23411 pts/6     |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
-30248  6956 23411 pts/6     |       \_ make -j6 doc-html
-30249 30248 23411 pts/6     |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
-30250 30249 23411 pts/6     |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
-30747 30248 23411 pts/6     |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
-30748 30747 23411 pts/6     |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
-30750 30748 23411 pts/6     |                   \_ tee -a dochtml.log
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
+  PID  PPID  SESS TT       TPGID COMMAND
+26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25
+26308 26136 26308 pts/25   26434  \_ -bash
+26434 26308 26308 pts/25   26434      \_ screen -r
+30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
+21614     1 21614 ?           -1 SCREEN
+21615 21614 21615 pts/24   21623  \_ /bin/bash
+21623 21615 21615 pts/24   21623  |   \_ top
+23411 21614 23411 pts/6     6956  \_ /bin/bash
+ 6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6970  6969 23411 pts/6     6956  |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
+30248  6956 23411 pts/6     6956  |       \_ make -j6 doc-html
+30249 30248 23411 pts/6     6956  |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+30250 30249 23411 pts/6     6956  |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
+30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
+30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
+30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
 ```
 Note the orphaned `sage-cleaner` process.
``````




---

archive/issue_comments_129748.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,13 +21,8 @@\n ```\n $ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n   PID  PPID  SESS TT       TPGID COMMAND\n-26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25\n-26308 26136 26308 pts/25   26434  \\_ -bash\n-26434 26308 26308 pts/25   26434      \\_ screen -r\n 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n 21614     1 21614 ?           -1 SCREEN\n-21615 21614 21615 pts/24   21623  \\_ /bin/bash\n-21623 21615 21615 pts/24   21623  |   \\_ top\n 23411 21614 23411 pts/6     6956  \\_ /bin/bash\n  6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n  6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n``````\n",
    "created_at": "2011-10-07T10:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129748",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,13 +21,8 @@
 ```
 $ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
   PID  PPID  SESS TT       TPGID COMMAND
-26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25
-26308 26136 26308 pts/25   26434  \_ -bash
-26434 26308 26308 pts/25   26434      \_ screen -r
 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
 21614     1 21614 ?           -1 SCREEN
-21615 21614 21615 pts/24   21623  \_ /bin/bash
-21623 21615 21615 pts/24   21623  |   \_ top
 23411 21614 23411 pts/6     6956  \_ /bin/bash
  6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
  6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
``````




---

archive/issue_comments_129749.json:
```json
{
    "body": "<a id='comment:12'></a>\nCan you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...",
    "created_at": "2011-10-07T11:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129749",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...



---

archive/issue_comments_129750.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n Here is a `ps` snapshot of a situation where it happened:\n \n ```\n-$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed\n   PID  PPID  SESS TT       TPGID COMMAND\n 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n 21614     1 21614 ?           -1 SCREEN\n@@ -33,5 +33,14 @@\n 30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n+ 5454\n ```\n Note the orphaned `sage-cleaner` process.\n+\n+```\n+$ ls -F ~/.sage/temp/sage.math.washington.edu/\n+19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/\n+19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/\n+20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/\n+```\n+Each of these directories seems to contain only an `interface` directory, but there are no files.\n``````\n",
    "created_at": "2011-10-07T12:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129750",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 Here is a `ps` snapshot of a situation where it happened:
 
 ```
-$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed
   PID  PPID  SESS TT       TPGID COMMAND
 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
 21614     1 21614 ?           -1 SCREEN
@@ -33,5 +33,14 @@
 30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
+ 5454
 ```
 Note the orphaned `sage-cleaner` process.
+
+```
+$ ls -F ~/.sage/temp/sage.math.washington.edu/
+19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/
+19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/
+20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/
+```
+Each of these directories seems to contain only an `interface` directory, but there are no files.
``````




---

archive/issue_comments_129751.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -35,12 +35,3 @@\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n  5454\n ```\n-Note the orphaned `sage-cleaner` process.\n-\n-```\n-$ ls -F ~/.sage/temp/sage.math.washington.edu/\n-19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/\n-19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/\n-20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/\n-```\n-Each of these directories seems to contain only an `interface` directory, but there are no files.\n``````\n",
    "created_at": "2011-10-07T12:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129751",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -35,12 +35,3 @@
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
  5454
 ```
-Note the orphaned `sage-cleaner` process.
-
-```
-$ ls -F ~/.sage/temp/sage.math.washington.edu/
-19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/
-19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/
-20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/
-```
-Each of these directories seems to contain only an `interface` directory, but there are no files.
``````




---

archive/issue_comments_129752.json:
```json
{
    "body": "<a id='comment:14'></a>\nIt seems to have pulled itself through after a while.  Don't know why...",
    "created_at": "2011-10-07T12:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129752",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
It seems to have pulled itself through after a while.  Don't know why...



---

archive/issue_comments_129753.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [vbraun](#comment%3A12):\n> Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...\n\n\nWhat do mean with \"empty\"?  Does this mean that, if I have 10 copies of Sage running, the Sage cleaner will only exit if all those 10 copies of Sage exit?",
    "created_at": "2011-10-07T12:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129753",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Replying to [vbraun](#comment%3A12):
> Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...


What do mean with "empty"?  Does this mean that, if I have 10 copies of Sage running, the Sage cleaner will only exit if all those 10 copies of Sage exit?



---

archive/issue_comments_129754.json:
```json
{
    "body": "<a id='comment:16'></a>\nI think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...",
    "created_at": "2011-10-07T13:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129754",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...



---

archive/issue_comments_129755.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [vbraun](#comment%3A16):\n> I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...\n\n\nThis is probably because of file descriptors being open.",
    "created_at": "2011-10-07T13:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129755",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Replying to [vbraun](#comment%3A16):
> I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...


This is probably because of file descriptors being open.



---

archive/issue_comments_129756.json:
```json
{
    "body": "<a id='comment:18'></a>\nI will do some more controlled tests on `geom.math.washington.edu`, a machine where I normally don't run Sage.",
    "created_at": "2011-10-07T13:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129756",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
I will do some more controlled tests on `geom.math.washington.edu`, a machine where I normally don't run Sage.



---

archive/issue_comments_129757.json:
```json
{
    "body": "<a id='comment:19'></a>\nI still don't know why sage-cleaner is running at all if you're doing make doc-html.  That runs sage -docbuild, which runs this (from sage-sage):\n\n```sh\nif [ \"$1\" = \"-docbuild\" -o \"$1\" = \"--docbuild\" ]; then\n   cd \"$CUR\"\n   shift\n   python \"$SAGE_ROOT\"/devel/sage/doc/common/builder.py $@\n   exit $?\nfi\n```\nIt doesn't run sage-cleaner or sage_setup, so where does sage-cleaner get started?\n\nAre you running another copy of Sage at the same time?",
    "created_at": "2011-10-07T14:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129757",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>
I still don't know why sage-cleaner is running at all if you're doing make doc-html.  That runs sage -docbuild, which runs this (from sage-sage):

```sh
if [ "$1" = "-docbuild" -o "$1" = "--docbuild" ]; then
   cd "$CUR"
   shift
   python "$SAGE_ROOT"/devel/sage/doc/common/builder.py $@
   exit $?
fi
```
It doesn't run sage-cleaner or sage_setup, so where does sage-cleaner get started?

Are you running another copy of Sage at the same time?



---

archive/issue_comments_129758.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [jhpalmieri](#comment%3A19):\n> Are you running another copy of Sage at the same time?\n\n\nYes, that's why I said I will do more controlled tests.  However, the fact that the session ID of the `sage-cleaner` is the same as `make doc-html` indicates that `sage-cleaner` might have been started by the docbuilder.  Are you sure that the docbuilder doesn't run Sage?",
    "created_at": "2011-10-07T15:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [jhpalmieri](#comment%3A19):
> Are you running another copy of Sage at the same time?


Yes, that's why I said I will do more controlled tests.  However, the fact that the session ID of the `sage-cleaner` is the same as `make doc-html` indicates that `sage-cleaner` might have been started by the docbuilder.  Are you sure that the docbuilder doesn't run Sage?



---

archive/issue_comments_129759.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -35,3 +35,15 @@\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n  5454\n ```\n+\n+If it matters:\n+\n+```\n+$ bash --version\n+GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)\n+Copyright (C) 2009 Free Software Foundation, Inc.\n+License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n+\n+This is free software; you are free to change and redistribute it.\n+There is NO WARRANTY, to the extent permitted by law.\n+```\n``````\n",
    "created_at": "2011-10-07T15:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129759",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -35,3 +35,15 @@
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
  5454
 ```
+
+If it matters:
+
+```
+$ bash --version
+GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)
+Copyright (C) 2009 Free Software Foundation, Inc.
+License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+
+This is free software; you are free to change and redistribute it.
+There is NO WARRANTY, to the extent permitted by law.
+```
``````




---

archive/issue_comments_129760.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm not sure, but I don't see why sage-cleaner would start, and if I run \"sage -docbuild html all\" or \"make doc-html\" in one window, `ps ux | grep clean` comes up empty while it's running.",
    "created_at": "2011-10-07T15:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129760",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'></a>
I'm not sure, but I don't see why sage-cleaner would start, and if I run "sage -docbuild html all" or "make doc-html" in one window, `ps ux | grep clean` comes up empty while it's running.



---

archive/issue_comments_129761.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n The following is a non-reproducible problem, but it happened several times.\n-When building Sage from source using\n+When building the Sage documentation using\n \n ```\n-make\n+make doc-html\n ```\n it can happen that `make` simply hangs forever after the message\n \n@@ -33,8 +33,8 @@\n 30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n- 5454\n ```\n+Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.\n \n If it matters:\n \n``````\n",
    "created_at": "2011-10-07T15:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129761",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 The following is a non-reproducible problem, but it happened several times.
-When building Sage from source using
+When building the Sage documentation using
 
 ```
-make
+make doc-html
 ```
 it can happen that `make` simply hangs forever after the message
 
@@ -33,8 +33,8 @@
 30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
- 5454
 ```
+Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.
 
 If it matters:
 
``````




---

archive/issue_comments_129762.json:
```json
{
    "body": "<a id='comment:24'></a>\nNote that it's still only a conjecture that `sage-cleaner` has anything to do with it. I'm putting some hooks into `sage-cleaner` and see what that gives.  Another thing to consider is that maybe it only happens the very first time documentation is built.",
    "created_at": "2011-10-07T15:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129762",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Note that it's still only a conjecture that `sage-cleaner` has anything to do with it. I'm putting some hooks into `sage-cleaner` and see what that gives.  Another thing to consider is that maybe it only happens the very first time documentation is built.



---

archive/issue_comments_129763.json:
```json
{
    "body": "<a id='comment:25'></a>\n`sphinx-build` *does* start `sage-cleaner`:\n\n```\n$ ps -u jdemeyer xfo pid,ppid,pgid,sess,tty,tpgid,stat,args\n  PID  PPID  PGID  SESS TT       TPGID STAT COMMAND\n 2811     1  2262 26064 pts/3    26064 T    python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-cleaner\n 2830 24409  2829 24409 pts/6     2829 S+    |   \\_ grep -e pts/3 -e COMMAND\n26064  6198 26064 26064 pts/3    26064 Ss+   \\_ /bin/bash\n 2262 26064  2262 26064 pts/3    26064 T     |   \\_ make doc-html\n 2781  2262  2262 26064 pts/3    26064 T     |       \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 2782  2781  2262 26064 pts/3    26064 T     |           \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 2783  2782  2262 26064 pts/3    26064 T     |               \\_ bash ./sage -docbuild --no-pdf-links all html\n 2791  2783  2262 26064 pts/3    26064 T     |               |   \\_ bash /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-sage -docbuild --no-pdf-links all html\n 2806  2791  2262 26064 pts/3    26064 T     |               |       \\_ python /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/common/builder.py --no-pdf-links all html\n 2807  2806  2262 26064 pts/3    26064 T     |               |           \\_ /bin/sh -c sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial   -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial\n 2808  2807  2262 26064 pts/3    26064 T     |               |               \\_ python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial\n 2784  2782  2262 26064 pts/3    26064 T     |               \\_ tee -a dochtml.log\n```",
    "created_at": "2011-10-08T09:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129763",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
`sphinx-build` *does* start `sage-cleaner`:

```
$ ps -u jdemeyer xfo pid,ppid,pgid,sess,tty,tpgid,stat,args
  PID  PPID  PGID  SESS TT       TPGID STAT COMMAND
 2811     1  2262 26064 pts/3    26064 T    python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-cleaner
 2830 24409  2829 24409 pts/6     2829 S+    |   \_ grep -e pts/3 -e COMMAND
26064  6198 26064 26064 pts/3    26064 Ss+   \_ /bin/bash
 2262 26064  2262 26064 pts/3    26064 T     |   \_ make doc-html
 2781  2262  2262 26064 pts/3    26064 T     |       \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 2782  2781  2262 26064 pts/3    26064 T     |           \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 2783  2782  2262 26064 pts/3    26064 T     |               \_ bash ./sage -docbuild --no-pdf-links all html
 2791  2783  2262 26064 pts/3    26064 T     |               |   \_ bash /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-sage -docbuild --no-pdf-links all html
 2806  2791  2262 26064 pts/3    26064 T     |               |       \_ python /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/common/builder.py --no-pdf-links all html
 2807  2806  2262 26064 pts/3    26064 T     |               |           \_ /bin/sh -c sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial   -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial
 2808  2807  2262 26064 pts/3    26064 T     |               |               \_ python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial
 2784  2782  2262 26064 pts/3    26064 T     |               \_ tee -a dochtml.log
```



---

archive/issue_comments_129764.json:
```json
{
    "body": "<a id='comment:26'></a>\nFrustrating that it is hard to reproduce: `make doc-html` *sometimes* runs `sage-cleaner`.",
    "created_at": "2011-10-08T09:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129764",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Frustrating that it is hard to reproduce: `make doc-html` *sometimes* runs `sage-cleaner`.



---

archive/issue_comments_129765.json:
```json
{
    "body": "<a id='comment:27'></a>\nThis is `sphinx-build`:\n\n```\n#!/usr/bin/env python\n# EASY-INSTALL-ENTRY-SCRIPT: 'Sphinx==1.0.4','console_scripts','sphinx-build'\n`__requires__` = 'Sphinx==1.0.4'\nimport sys\nfrom pkg_resources import load_entry_point\nimport sage.all\nsys.exit(\n   load_entry_point('Sphinx==1.0.4', 'console_scripts', 'sphinx-build')()\n)\n```\n\nNote the line \"import sage.all\".  Perhaps this can sometimes (indirectly) run `sage-cleaner`?",
    "created_at": "2011-10-08T10:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129765",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
This is `sphinx-build`:

```
#!/usr/bin/env python
# EASY-INSTALL-ENTRY-SCRIPT: 'Sphinx==1.0.4','console_scripts','sphinx-build'
`__requires__` = 'Sphinx==1.0.4'
import sys
from pkg_resources import load_entry_point
import sage.all
sys.exit(
   load_entry_point('Sphinx==1.0.4', 'console_scripts', 'sphinx-build')()
)
```

Note the line "import sage.all".  Perhaps this can sometimes (indirectly) run `sage-cleaner`?



---

archive/issue_comments_129766.json:
```json
{
    "body": "<a id='comment:28'></a>\nI don't see how the import sage.all could start sage-cleaner. If you can reproduce the problem, how about you strace the docbuild process? Then it would be easy to find out which child process starts the cleaner.",
    "created_at": "2011-10-08T11:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129766",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>
I don't see how the import sage.all could start sage-cleaner. If you can reproduce the problem, how about you strace the docbuild process? Then it would be easy to find out which child process starts the cleaner.



---

archive/issue_comments_129767.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [vbraun](#comment%3A28):\n> If you can reproduce the problem\n\nThat's precisely the problem, it must be some weird race-condition.",
    "created_at": "2011-10-08T11:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129767",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Replying to [vbraun](#comment%3A28):
> If you can reproduce the problem

That's precisely the problem, it must be some weird race-condition.



---

archive/issue_comments_129768.json:
```json
{
    "body": "<a id='comment:30'></a>\nI found a way to reproduce it: when `$HOME/.sage` does not exist, `sage-cleaner` is always started when doing `make doc-html`.",
    "created_at": "2011-10-08T12:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129768",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
I found a way to reproduce it: when `$HOME/.sage` does not exist, `sage-cleaner` is always started when doing `make doc-html`.



---

archive/issue_comments_129769.json:
```json
{
    "body": "<a id='comment:31'></a>\nIt is indeed the line `import sage.all` which causes `sage-cleaner` to be run.",
    "created_at": "2011-10-08T12:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129769",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
It is indeed the line `import sage.all` which causes `sage-cleaner` to be run.



---

archive/attachments_013267.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "10163_debug_sage_cleaner.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10163/10163_debug_sage_cleaner.patch",
    "created_at": "2011-10-08T12:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_129770.json:
```json
{
    "body": "STOP all processes when sage-cleaner is run, **do not apply**",
    "created_at": "2011-10-08T12:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129770",
    "user": "https://github.com/jdemeyer"
}
```

STOP all processes when sage-cleaner is run, **do not apply**



---

archive/issue_comments_129771.json:
```json
{
    "body": "<a id='comment:32'></a>\n`gap` seems to be involved somehow.  The last thing which happens before starting `sage-cleaner` is starting `gap`.",
    "created_at": "2011-10-08T12:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129771",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
`gap` seems to be involved somehow.  The last thing which happens before starting `sage-cleaner` is starting `gap`.



---

archive/issue_comments_129772.json:
```json
{
    "body": "<a id='comment:33'></a>\nBut why does make hang until the cleaner exits? The sage-cleaner process is already orphaned, so nobody should be waiting for it. Did you strace the hanging make process? I would tend to think that it is a good thing that the sage-cleaner is started.",
    "created_at": "2011-10-08T12:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129772",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
But why does make hang until the cleaner exits? The sage-cleaner process is already orphaned, so nobody should be waiting for it. Did you strace the hanging make process? I would tend to think that it is a good thing that the sage-cleaner is started.



---

archive/issue_comments_129773.json:
```json
{
    "body": "<a id='comment:34'></a>\nThis reproduces the problem:\n\n```\n$ ( export HOME=/tmp/sagehome; rm -rf $HOME; mkdir -p $HOME/.sage/temp/`hostname`/$$; make doc-html; )\n```\nWhat happens here is that we start from a clean `$HOME` and create a bogus directory in `$HOME/.sage/temp/$hostname` to make sure `sage-cleaner` does not exit.  Note that you can delete the last 3 lines from `local/bin/sphinx-build` to speed up testing.",
    "created_at": "2011-10-08T13:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129773",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
This reproduces the problem:

```
$ ( export HOME=/tmp/sagehome; rm -rf $HOME; mkdir -p $HOME/.sage/temp/`hostname`/$$; make doc-html; )
```
What happens here is that we start from a clean `$HOME` and create a bogus directory in `$HOME/.sage/temp/$hostname` to make sure `sage-cleaner` does not exit.  Note that you can delete the last 3 lines from `local/bin/sphinx-build` to speed up testing.



---

archive/attachments_013268.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "10163_sage_cleaner.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10163/10163_sage_cleaner.patch",
    "created_at": "2011-10-08T13:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_129774.json:
```json
{
    "body": "",
    "created_at": "2011-10-08T13:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129774",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_129775.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -47,3 +47,5 @@\n This is free software; you are free to change and redistribute it.\n There is NO WARRANTY, to the extent permitted by law.\n ```\n+\n+**Apply** [attachment:10163_sage_cleaner.patch]\n``````\n",
    "created_at": "2011-10-08T13:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129775",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -47,3 +47,5 @@
 This is free software; you are free to change and redistribute it.
 There is NO WARRANTY, to the extent permitted by law.
 ```
+
+**Apply** [attachment:10163_sage_cleaner.patch]
``````




---

archive/issue_comments_129776.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2011-10-08T13:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129776",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_129777.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2011-10-08T13:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129777",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_129778.json:
```json
{
    "body": "<a id='comment:36'></a>\nThe problem was dangling file descriptors.  This patch fixes the problem for me.",
    "created_at": "2011-10-08T13:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129778",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
The problem was dangling file descriptors.  This patch fixes the problem for me.



---

archive/issue_comments_129779.json:
```json
{
    "body": "<a id='comment:37'></a>\nHmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner... In any case, the patch looks good to me.",
    "created_at": "2011-10-08T13:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129779",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>
Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner... In any case, the patch looks good to me.



---

archive/issue_comments_129780.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2011-10-08T13:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129780",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_129781.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-10-08T13:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129781",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_129782.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [vbraun](#comment%3A37):\n> Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner...\n\n\nExactly, that's what I was also thinking.",
    "created_at": "2011-10-08T13:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129782",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
Replying to [vbraun](#comment%3A37):
> Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner...


Exactly, that's what I was also thinking.



---

archive/issue_comments_129783.json:
```json
{
    "body": "**Changing keywords** from \"build Makefile\" to \"build Makefile sage-cleaner\".",
    "created_at": "2011-10-08T13:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129783",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "build Makefile" to "build Makefile sage-cleaner".



---

archive/issue_events_031310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T13:31:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10163#event-31310"
}
```



---

archive/issue_comments_129784.json:
```json
{
    "body": "**Changing keywords** from \"build Makefile sage-cleaner\" to \"build Makefile sage-cleaner cleaner\".",
    "created_at": "2011-10-08T13:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129784",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "build Makefile sage-cleaner" to "build Makefile sage-cleaner cleaner".



---

archive/issue_comments_129785.json:
```json
{
    "body": "<a id='comment:40'></a>\nWe had similar problems with (e.g.) `ptestlong` and (GAP?) orphans IIRC; while `sage -tp ...` did terminate (*\"All tests passed!\"*), `tee` did not because some file descriptor(s) were still open, so you didn't get the shell prompt back.\n\nKilling the orphans the shell prompt returned.",
    "created_at": "2011-10-08T16:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129785",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:40'></a>
We had similar problems with (e.g.) `ptestlong` and (GAP?) orphans IIRC; while `sage -tp ...` did terminate (*"All tests passed!"*), `tee` did not because some file descriptor(s) were still open, so you didn't get the shell prompt back.

Killing the orphans the shell prompt returned.



---

archive/issue_events_031311.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T18:14:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10163#event-31311"
}
```



---

archive/issue_comments_129786.json:
```json
{
    "body": "**Merged:** sage-4.7.2.alpha4",
    "created_at": "2011-10-08T18:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129786",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.2.alpha4



---

archive/issue_comments_129787.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-10-08T18:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10163#issuecomment-129787",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed
