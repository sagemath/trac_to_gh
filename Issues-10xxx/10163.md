# Issue 10163: make doc-html sometimes hangs after having finished

archive/issues_010162.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-GeorgSWeber"
    ],
    "body": "The following is a non-reproducible problem, but it happened several times.\nWhen building the Sage documentation using\n\n```\nmake doc-html\n```\nit can happen that `make` simply hangs forever after the message\n\n```\nBuild finished.  The built documents can be found in /mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha0/devel/sage/doc/output/html/fr/a_tour_of_sage\n```\n\nPressing CTRL-C at this point gives\n\n```\nmake: *** [doc-html] Interrupt\n```\n\nHere is a `ps` snapshot of a situation where it happened:\n\n```\n$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed\n  PID  PPID  SESS TT       TPGID COMMAND\n30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n21614     1 21614 ?           -1 SCREEN\n23411 21614 23411 pts/6     6956  \\_ /bin/bash\n 6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n 6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n 6970  6969 23411 pts/6     6956  |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n30248  6956 23411 pts/6     6956  |       \\_ make -j6 doc-html\n30249 30248 23411 pts/6     6956  |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n30250 30249 23411 pts/6     6956  |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n```\nNote the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.\n\nIf it matters:\n\n```\n$ bash --version\nGNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)\nCopyright (C) 2009 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n\nThis is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n```\n\n**Apply** [attachment: 10163_sage_cleaner.patch](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)\n\nComponent: **build**\n\nKeywords: **build Makefile sage-cleaner cleaner**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **Volker Braun**\n\nMerged: **sage-4.7.2.alpha4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10163_\n\n",
    "closed_at": "2011-10-08T18:14:56Z",
    "created_at": "2010-10-23T21:57:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make doc-html sometimes hangs after having finished",
    "type": "issue",
    "updated_at": "2011-10-08T18:14:56Z",
    "url": "https://github.com/sagemath/sage/issues/10163",
    "user": "https://github.com/jdemeyer"
}
```
The following is a non-reproducible problem, but it happened several times.
When building the Sage documentation using

```
make doc-html
```
it can happen that `make` simply hangs forever after the message

```
Build finished.  The built documents can be found in /mnt/usb1/scratch/jdemeyer/merger/sage-4.6.1.alpha0/devel/sage/doc/output/html/fr/a_tour_of_sage
```

Pressing CTRL-C at this point gives

```
make: *** [doc-html] Interrupt
```

Here is a `ps` snapshot of a situation where it happened:

```
$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed
  PID  PPID  SESS TT       TPGID COMMAND
30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
21614     1 21614 ?           -1 SCREEN
23411 21614 23411 pts/6     6956  \_ /bin/bash
 6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
 6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
 6970  6969 23411 pts/6     6956  |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
30248  6956 23411 pts/6     6956  |       \_ make -j6 doc-html
30249 30248 23411 pts/6     6956  |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
30250 30249 23411 pts/6     6956  |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
```
Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.

If it matters:

```
$ bash --version
GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
```

**Apply** [attachment: 10163_sage_cleaner.patch](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)

Component: **build**

Keywords: **build Makefile sage-cleaner cleaner**

Author: **Jeroen Demeyer**

Reviewer: **Volker Braun**

Merged: **sage-4.7.2.alpha4**

_Issue created by migration from https://trac.sagemath.org/ticket/10163_





---

archive/issue_events_131730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131730"
}
```



---

archive/issue_events_131731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131731"
}
```



---

archive/issue_events_131732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131732"
}
```



---

archive/issue_events_131733.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131733"
}
```



---

archive/issue_events_131734.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131734"
}
```



---

archive/issue_events_131735.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2010-10-23T21:57:18Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131735"
}
```



---

archive/issue_comments_093775.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n-The following is a non-reproducible problem, but it happened at least twice for me:\n+The following is a non-reproducible problem, but it happened at least three times for me:\n when building Sage from source using\n \n ```\n-export MAKE=\"make -j8\"\n-$MAKE\n+make\n ```\n it can happen that `make` simply hangs forever after the message\n \n@@ -16,5 +15,3 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n-\n-I'm not sure whether the \"-j8\" option has anything to do with it.\n``````\n",
    "created_at": "2010-11-02T14:54:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93775",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
-The following is a non-reproducible problem, but it happened at least twice for me:
+The following is a non-reproducible problem, but it happened at least three times for me:
 when building Sage from source using
 
 ```
-export MAKE="make -j8"
-$MAKE
+make
 ```
 it can happen that `make` simply hangs forever after the message
 
@@ -16,5 +15,3 @@
 ```
 make: *** [doc-html] Interrupt
 ```
-
-I'm not sure whether the "-j8" option has anything to do with it.
``````




---

archive/issue_comments_093776.json:
```json
{
    "body": "Changed keywords from none to **build Makefile**",
    "created_at": "2010-12-19T13:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93776",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from none to **build Makefile**



---

archive/issue_comments_093777.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis might be due to NFS (I know it happened on sage.math.washington.edu but I can't remember whether it ever happened on other machines).",
    "created_at": "2010-12-19T13:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93777",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

This might be due to NFS (I know it happened on sage.math.washington.edu but I can't remember whether it ever happened on other machines).



---

archive/issue_comments_093778.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI am getting more and more convinced that this is an NFS issue, so proposal to close this ticket as invalid.",
    "created_at": "2011-01-19T13:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93778",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I am getting more and more convinced that this is an NFS issue, so proposal to close this ticket as invalid.



---

archive/issue_events_131736.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T13:31:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131736"
}
```



---

archive/issue_events_131737.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T13:31:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131737"
}
```



---

archive/issue_comments_093779.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nJust because NFS triggers it doesn't necessarily mean that its not a bug in Sage. I've never seen this issue, but then I never use high-latency filesystems. Can you run strace/gdb on the stuck process if you see it again? (use -p to attach to existing pid)",
    "created_at": "2011-03-02T10:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93779",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

Just because NFS triggers it doesn't necessarily mean that its not a bug in Sage. I've never seen this issue, but then I never use high-latency filesystems. Can you run strace/gdb on the stuck process if you see it again? (use -p to attach to existing pid)



---

archive/issue_events_131738.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-02T10:09:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131738"
}
```



---

archive/issue_events_131739.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-02T10:09:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131739"
}
```



---

archive/issue_comments_093780.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-The following is a non-reproducible problem, but it happened at least three times for me:\n-when building Sage from source using\n+The following is a non-reproducible problem, but it happened several times.\n+When building Sage from source using\n \n ```\n make\n@@ -15,3 +15,4 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n+The issue is a stuck `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-06T14:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93780",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-The following is a non-reproducible problem, but it happened at least three times for me:
-when building Sage from source using
+The following is a non-reproducible problem, but it happened several times.
+When building Sage from source using
 
 ```
 make
@@ -15,3 +15,4 @@
 ```
 make: *** [doc-html] Interrupt
 ```
+The issue is a stuck `sage-cleaner` process.
``````




---

archive/issue_events_131740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T14:55:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131740"
}
```



---

archive/issue_comments_093781.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nShould there be some timeout setting in sage-cleaner?  If it has to wait too long, exit but print a warning message that there may be some stray processes which should be killed by hand?",
    "created_at": "2011-10-06T18:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93781",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Should there be some timeout setting in sage-cleaner?  If it has to wait too long, exit but print a warning message that there may be some stray processes which should be killed by hand?



---

archive/issue_comments_093782.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNo the sage cleaner needs to stick around for as long as Sage is running. There might be a computation running that, after a long while, does a big `@`parallel loop and if nobody is cleaning up the filesystem will be very unhappy.",
    "created_at": "2011-10-06T19:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93782",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

No the sage cleaner needs to stick around for as long as Sage is running. There might be a computation running that, after a long while, does a big `@`parallel loop and if nobody is cleaning up the filesystem will be very unhappy.



---

archive/issue_comments_093783.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDoes `sage-cleaner` actually run when you do `sage -docbuild ...` (which is called by `make doc-html`)?  It doesn't look like it to me.  It seems that `sage -docbuild all html` creates a bunch of temporary directories in `DOT_SAGE/temp/HOSTNAME`, and those aren't deleted until the next time I run Sage, when `sage-cleaner` actually runs.  So maybe the issue on this ticket isn't related to `sage-cleaner`.",
    "created_at": "2011-10-06T20:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93783",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Does `sage-cleaner` actually run when you do `sage -docbuild ...` (which is called by `make doc-html`)?  It doesn't look like it to me.  It seems that `sage -docbuild all html` creates a bunch of temporary directories in `DOT_SAGE/temp/HOSTNAME`, and those aren't deleted until the next time I run Sage, when `sage-cleaner` actually runs.  So maybe the issue on this ticket isn't related to `sage-cleaner`.



---

archive/issue_comments_093784.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,28 @@\n ```\n make: *** [doc-html] Interrupt\n ```\n-The issue is a stuck `sage-cleaner` process.\n+\n+Here is a `ps` snapshot of a situation where it happened:\n+\n+```\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,args\n+  PID  PPID  SESS TT       COMMAND\n+26136 24879 24879 ?        sshd: jdemeyer@pts/25\n+26308 26136 26308 pts/25    \\_ -bash\n+26434 26308 26308 pts/25        \\_ screen -r\n+30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n+21614     1 21614 ?        SCREEN\n+21615 21614 21615 pts/24    \\_ /bin/bash\n+21623 21615 21615 pts/24    |   \\_ top\n+23411 21614 23411 pts/6     \\_ /bin/bash\n+ 6956 23411 23411 pts/6     |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6969  6956 23411 pts/6     |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6970  6969 23411 pts/6     |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n+30248  6956 23411 pts/6     |       \\_ make -j6 doc-html\n+30249 30248 23411 pts/6     |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+30250 30249 23411 pts/6     |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n+30747 30248 23411 pts/6     |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n+30748 30747 23411 pts/6     |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n+30750 30748 23411 pts/6     |                   \\_ tee -a dochtml.log\n+```\n+Note the orphaned `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-07T10:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93784",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,28 @@
 ```
 make: *** [doc-html] Interrupt
 ```
-The issue is a stuck `sage-cleaner` process.
+
+Here is a `ps` snapshot of a situation where it happened:
+
+```
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,args
+  PID  PPID  SESS TT       COMMAND
+26136 24879 24879 ?        sshd: jdemeyer@pts/25
+26308 26136 26308 pts/25    \_ -bash
+26434 26308 26308 pts/25        \_ screen -r
+30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
+21614     1 21614 ?        SCREEN
+21615 21614 21615 pts/24    \_ /bin/bash
+21623 21615 21615 pts/24    |   \_ top
+23411 21614 23411 pts/6     \_ /bin/bash
+ 6956 23411 23411 pts/6     |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6969  6956 23411 pts/6     |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6970  6969 23411 pts/6     |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
+30248  6956 23411 pts/6     |       \_ make -j6 doc-html
+30249 30248 23411 pts/6     |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+30250 30249 23411 pts/6     |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
+30747 30248 23411 pts/6     |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
+30748 30747 23411 pts/6     |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
+30750 30748 23411 pts/6     |                   \_ tee -a dochtml.log
+```
+Note the orphaned `sage-cleaner` process.
``````




---

archive/issue_comments_093785.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,24 +19,24 @@\n Here is a `ps` snapshot of a situation where it happened:\n \n ```\n-$ ps -u jdemeyer xfo pid,ppid,sess,tty,args\n-  PID  PPID  SESS TT       COMMAND\n-26136 24879 24879 ?        sshd: jdemeyer@pts/25\n-26308 26136 26308 pts/25    \\_ -bash\n-26434 26308 26308 pts/25        \\_ screen -r\n-30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n-21614     1 21614 ?        SCREEN\n-21615 21614 21615 pts/24    \\_ /bin/bash\n-21623 21615 21615 pts/24    |   \\_ top\n-23411 21614 23411 pts/6     \\_ /bin/bash\n- 6956 23411 23411 pts/6     |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n- 6969  6956 23411 pts/6     |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n- 6970  6969 23411 pts/6     |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n-30248  6956 23411 pts/6     |       \\_ make -j6 doc-html\n-30249 30248 23411 pts/6     |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n-30250 30249 23411 pts/6     |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n-30747 30248 23411 pts/6     |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n-30748 30747 23411 pts/6     |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n-30750 30748 23411 pts/6     |                   \\_ tee -a dochtml.log\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n+  PID  PPID  SESS TT       TPGID COMMAND\n+26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25\n+26308 26136 26308 pts/25   26434  \\_ -bash\n+26434 26308 26308 pts/25   26434      \\_ screen -r\n+30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n+21614     1 21614 ?           -1 SCREEN\n+21615 21614 21615 pts/24   21623  \\_ /bin/bash\n+21623 21615 21615 pts/24   21623  |   \\_ top\n+23411 21614 23411 pts/6     6956  \\_ /bin/bash\n+ 6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+ 6970  6969 23411 pts/6     6956  |       |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log\n+30248  6956 23411 pts/6     6956  |       \\_ make -j6 doc-html\n+30249 30248 23411 pts/6     6956  |           \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n+30250 30249 23411 pts/6     6956  |           |   \\_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log\n+30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n+30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n+30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n ```\n Note the orphaned `sage-cleaner` process.\n``````\n",
    "created_at": "2011-10-07T10:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93785",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,24 +19,24 @@
 Here is a `ps` snapshot of a situation where it happened:
 
 ```
-$ ps -u jdemeyer xfo pid,ppid,sess,tty,args
-  PID  PPID  SESS TT       COMMAND
-26136 24879 24879 ?        sshd: jdemeyer@pts/25
-26308 26136 26308 pts/25    \_ -bash
-26434 26308 26308 pts/25        \_ screen -r
-30777     1 23411 pts/6    python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
-21614     1 21614 ?        SCREEN
-21615 21614 21615 pts/24    \_ /bin/bash
-21623 21615 21615 pts/24    |   \_ top
-23411 21614 23411 pts/6     \_ /bin/bash
- 6956 23411 23411 pts/6     |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
- 6969  6956 23411 pts/6     |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
- 6970  6969 23411 pts/6     |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
-30248  6956 23411 pts/6     |       \_ make -j6 doc-html
-30249 30248 23411 pts/6     |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
-30250 30249 23411 pts/6     |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
-30747 30248 23411 pts/6     |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
-30748 30747 23411 pts/6     |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
-30750 30748 23411 pts/6     |                   \_ tee -a dochtml.log
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
+  PID  PPID  SESS TT       TPGID COMMAND
+26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25
+26308 26136 26308 pts/25   26434  \_ -bash
+26434 26308 26308 pts/25   26434      \_ screen -r
+30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
+21614     1 21614 ?           -1 SCREEN
+21615 21614 21615 pts/24   21623  \_ /bin/bash
+21623 21615 21615 pts/24   21623  |   \_ top
+23411 21614 23411 pts/6     6956  \_ /bin/bash
+ 6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+ 6970  6969 23411 pts/6     6956  |       |   \_ tee /home/release/sage-4.7.2.alpha4/logs/merger.log
+30248  6956 23411 pts/6     6956  |       \_ make -j6 doc-html
+30249 30248 23411 pts/6     6956  |           \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
+30250 30249 23411 pts/6     6956  |           |   \_ tee /home/release/sage-4.7.2.alpha4/logs/dochtml.log
+30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
+30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
+30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
 ```
 Note the orphaned `sage-cleaner` process.
``````




---

archive/issue_comments_093786.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,13 +21,8 @@\n ```\n $ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n   PID  PPID  SESS TT       TPGID COMMAND\n-26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25\n-26308 26136 26308 pts/25   26434  \\_ -bash\n-26434 26308 26308 pts/25   26434      \\_ screen -r\n 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n 21614     1 21614 ?           -1 SCREEN\n-21615 21614 21615 pts/24   21623  \\_ /bin/bash\n-21623 21615 21615 pts/24   21623  |   \\_ top\n 23411 21614 23411 pts/6     6956  \\_ /bin/bash\n  6956 23411 23411 pts/6     6956  |   \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n  6969  6956 23411 pts/6     6956  |       \\_ bash -c source \"/home/jdemeyer/merger3/main.sh\"; source \"./merge\"\n``````\n",
    "created_at": "2011-10-07T10:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93786",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,13 +21,8 @@
 ```
 $ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
   PID  PPID  SESS TT       TPGID COMMAND
-26136 24879 24879 ?           -1 sshd: jdemeyer@pts/25
-26308 26136 26308 pts/25   26434  \_ -bash
-26434 26308 26308 pts/25   26434      \_ screen -r
 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
 21614     1 21614 ?           -1 SCREEN
-21615 21614 21615 pts/24   21623  \_ /bin/bash
-21623 21615 21615 pts/24   21623  |   \_ top
 23411 21614 23411 pts/6     6956  \_ /bin/bash
  6956 23411 23411 pts/6     6956  |   \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
  6969  6956 23411 pts/6     6956  |       \_ bash -c source "/home/jdemeyer/merger3/main.sh"; source "./merge"
``````




---

archive/issue_comments_093787.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nCan you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...",
    "created_at": "2011-10-07T11:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93787",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...



---

archive/issue_comments_093788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n Here is a `ps` snapshot of a situation where it happened:\n \n ```\n-$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args\n+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed\n   PID  PPID  SESS TT       TPGID COMMAND\n 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner\n 21614     1 21614 ?           -1 SCREEN\n@@ -33,5 +33,14 @@\n 30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n+ 5454\n ```\n Note the orphaned `sage-cleaner` process.\n+\n+```\n+$ ls -F ~/.sage/temp/sage.math.washington.edu/\n+19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/\n+19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/\n+20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/\n+```\n+Each of these directories seems to contain only an `interface` directory, but there are no files.\n``````\n",
    "created_at": "2011-10-07T12:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93788",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 Here is a `ps` snapshot of a situation where it happened:
 
 ```
-$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args
+$ ps -u jdemeyer xfo pid,ppid,sess,tty,tpgid,args  # Irrelevant entries removed
   PID  PPID  SESS TT       TPGID COMMAND
 30777     1 23411 pts/6     6956 python /mnt/usb1/scratch/jdemeyer/merger/sage-4.7.2.alpha4/local/bin/sage-cleaner
 21614     1 21614 ?           -1 SCREEN
@@ -33,5 +33,14 @@
 30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
+ 5454
 ```
 Note the orphaned `sage-cleaner` process.
+
+```
+$ ls -F ~/.sage/temp/sage.math.washington.edu/
+19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/
+19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/
+20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/
+```
+Each of these directories seems to contain only an `interface` directory, but there are no files.
``````




---

archive/issue_comments_093789.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,12 +35,3 @@\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n  5454\n ```\n-Note the orphaned `sage-cleaner` process.\n-\n-```\n-$ ls -F ~/.sage/temp/sage.math.washington.edu/\n-19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/\n-19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/\n-20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/\n-```\n-Each of these directories seems to contain only an `interface` directory, but there are no files.\n``````\n",
    "created_at": "2011-10-07T12:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93789",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,12 +35,3 @@
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
  5454
 ```
-Note the orphaned `sage-cleaner` process.
-
-```
-$ ls -F ~/.sage/temp/sage.math.washington.edu/
-19769/  20243/  20643/  21176/  30653/  3678/  4272/  4335/  4385/  4425/  5168/  5235/  5522/
-19942/  20359/  20860/  21288/  30822/  3828/  4291/  4351/  4400/  4445/  5187/  5307/
-20207/  20517/  20978/  30444/  30880/  3966/  4320/  4370/  4406/  5149/  5210/  5454/
-```
-Each of these directories seems to contain only an `interface` directory, but there are no files.
``````




---

archive/issue_comments_093790.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIt seems to have pulled itself through after a while.  Don't know why...",
    "created_at": "2011-10-07T12:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93790",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

It seems to have pulled itself through after a while.  Don't know why...



---

archive/issue_comments_093791.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@vbraun](#comment%3A12):\n> Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...\n\nWhat do mean with \"empty\"?  Does this mean that, if I have 10 copies of Sage running, the Sage cleaner will only exit if all those 10 copies of Sage exit?",
    "created_at": "2011-10-07T12:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93791",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@vbraun](#comment%3A12):
> Can you also add the content of `~/.sage/temp/HOSTNAME/` to the bug report? The sage cleaner lives on until it is empty...

What do mean with "empty"?  Does this mean that, if I have 10 copies of Sage running, the Sage cleaner will only exit if all those 10 copies of Sage exit?



---

archive/issue_comments_093792.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...",
    "created_at": "2011-10-07T13:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93792",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...



---

archive/issue_comments_093793.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@vbraun](#comment%3A16):\n> I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...\n\nThis is probably because of file descriptors being open.",
    "created_at": "2011-10-07T13:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93793",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@vbraun](#comment%3A16):
> I think so. Its purpose is to delete the `~/.sage/temp/HOSTNAME/PID` directory once the process with `PID` has ended. Also, note that if you start Sage multiple times only one sage-cleaner process is started. Really, `make doc` should not wait for the sage cleaner process to finish...

This is probably because of file descriptors being open.



---

archive/issue_comments_093794.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI will do some more controlled tests on `geom.math.washington.edu`, a machine where I normally don't run Sage.",
    "created_at": "2011-10-07T13:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93794",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

I will do some more controlled tests on `geom.math.washington.edu`, a machine where I normally don't run Sage.



---

archive/issue_comments_093795.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI still don't know why sage-cleaner is running at all if you're doing make doc-html.  That runs sage -docbuild, which runs this (from sage-sage):\n\n```sh\nif [ \"$1\" = \"-docbuild\" -o \"$1\" = \"--docbuild\" ]; then\n   cd \"$CUR\"\n   shift\n   python \"$SAGE_ROOT\"/devel/sage/doc/common/builder.py $@\n   exit $?\nfi\n```\nIt doesn't run sage-cleaner or sage_setup, so where does sage-cleaner get started?\n\nAre you running another copy of Sage at the same time?",
    "created_at": "2011-10-07T14:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93795",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

I still don't know why sage-cleaner is running at all if you're doing make doc-html.  That runs sage -docbuild, which runs this (from sage-sage):

```sh
if [ "$1" = "-docbuild" -o "$1" = "--docbuild" ]; then
   cd "$CUR"
   shift
   python "$SAGE_ROOT"/devel/sage/doc/common/builder.py $@
   exit $?
fi
```
It doesn't run sage-cleaner or sage_setup, so where does sage-cleaner get started?

Are you running another copy of Sage at the same time?



---

archive/issue_comments_093796.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jhpalmieri](#comment%3A19):\n> Are you running another copy of Sage at the same time?\n\nYes, that's why I said I will do more controlled tests.  However, the fact that the session ID of the `sage-cleaner` is the same as `make doc-html` indicates that `sage-cleaner` might have been started by the docbuilder.  Are you sure that the docbuilder doesn't run Sage?",
    "created_at": "2011-10-07T15:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93796",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jhpalmieri](#comment%3A19):
> Are you running another copy of Sage at the same time?

Yes, that's why I said I will do more controlled tests.  However, the fact that the session ID of the `sage-cleaner` is the same as `make doc-html` indicates that `sage-cleaner` might have been started by the docbuilder.  Are you sure that the docbuilder doesn't run Sage?



---

archive/issue_comments_093797.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,3 +35,15 @@\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n  5454\n ```\n+\n+If it matters:\n+\n+```\n+$ bash --version\n+GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)\n+Copyright (C) 2009 Free Software Foundation, Inc.\n+License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n+\n+This is free software; you are free to change and redistribute it.\n+There is NO WARRANTY, to the extent permitted by law.\n+```\n``````\n",
    "created_at": "2011-10-07T15:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93797",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,3 +35,15 @@
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
  5454
 ```
+
+If it matters:
+
+```
+$ bash --version
+GNU bash, version 4.1.0(1)-release (x86_64-unknown-linux-gnu)
+Copyright (C) 2009 Free Software Foundation, Inc.
+License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+
+This is free software; you are free to change and redistribute it.
+There is NO WARRANTY, to the extent permitted by law.
+```
``````




---

archive/issue_comments_093798.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI'm not sure, but I don't see why sage-cleaner would start, and if I run \"sage -docbuild html all\" or \"make doc-html\" in one window, `ps ux | grep clean` comes up empty while it's running.",
    "created_at": "2011-10-07T15:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93798",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

I'm not sure, but I don't see why sage-cleaner would start, and if I run "sage -docbuild html all" or "make doc-html" in one window, `ps ux | grep clean` comes up empty while it's running.



---

archive/issue_comments_093799.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n The following is a non-reproducible problem, but it happened several times.\n-When building Sage from source using\n+When building the Sage documentation using\n \n ```\n-make\n+make doc-html\n ```\n it can happen that `make` simply hangs forever after the message\n \n@@ -33,8 +33,8 @@\n 30747 30248 23411 pts/6     6956  |           \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 30748 30747 23411 pts/6     6956  |               \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 30750 30748 23411 pts/6     6956  |                   \\_ tee -a dochtml.log\n- 5454\n ```\n+Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.\n \n If it matters:\n \n``````\n",
    "created_at": "2011-10-07T15:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93799",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 The following is a non-reproducible problem, but it happened several times.
-When building Sage from source using
+When building the Sage documentation using
 
 ```
-make
+make doc-html
 ```
 it can happen that `make` simply hangs forever after the message
 
@@ -33,8 +33,8 @@
 30747 30248 23411 pts/6     6956  |           \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 30748 30747 23411 pts/6     6956  |               \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 30750 30748 23411 pts/6     6956  |                   \_ tee -a dochtml.log
- 5454
 ```
+Note the orphaned `sage-cleaner` process with the same session ID as `make doc-html`.
 
 If it matters:
 
``````




---

archive/issue_comments_093800.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNote that it's still only a conjecture that `sage-cleaner` has anything to do with it. I'm putting some hooks into `sage-cleaner` and see what that gives.  Another thing to consider is that maybe it only happens the very first time documentation is built.",
    "created_at": "2011-10-07T15:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93800",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Note that it's still only a conjecture that `sage-cleaner` has anything to do with it. I'm putting some hooks into `sage-cleaner` and see what that gives.  Another thing to consider is that maybe it only happens the very first time documentation is built.



---

archive/issue_comments_093801.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n`sphinx-build` *does* start `sage-cleaner`:\n\n```\n$ ps -u jdemeyer xfo pid,ppid,pgid,sess,tty,tpgid,stat,args\n  PID  PPID  PGID  SESS TT       TPGID STAT COMMAND\n 2811     1  2262 26064 pts/3    26064 T    python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-cleaner\n 2830 24409  2829 24409 pts/6     2829 S+    |   \\_ grep -e pts/3 -e COMMAND\n26064  6198 26064 26064 pts/3    26064 Ss+   \\_ /bin/bash\n 2262 26064  2262 26064 pts/3    26064 T     |   \\_ make doc-html\n 2781  2262  2262 26064 pts/3    26064 T     |       \\_ /bin/sh -c spkg/pipestatus \"./sage -docbuild --no-pdf-links all html  2>&1\" \"tee -a dochtml.log\"\n 2782  2781  2262 26064 pts/3    26064 T     |           \\_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log\n 2783  2782  2262 26064 pts/3    26064 T     |               \\_ bash ./sage -docbuild --no-pdf-links all html\n 2791  2783  2262 26064 pts/3    26064 T     |               |   \\_ bash /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-sage -docbuild --no-pdf-links all html\n 2806  2791  2262 26064 pts/3    26064 T     |               |       \\_ python /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/common/builder.py --no-pdf-links all html\n 2807  2806  2262 26064 pts/3    26064 T     |               |           \\_ /bin/sh -c sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial   -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial\n 2808  2807  2262 26064 pts/3    26064 T     |               |               \\_ python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial\n 2784  2782  2262 26064 pts/3    26064 T     |               \\_ tee -a dochtml.log\n```",
    "created_at": "2011-10-08T09:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93801",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

`sphinx-build` *does* start `sage-cleaner`:

```
$ ps -u jdemeyer xfo pid,ppid,pgid,sess,tty,tpgid,stat,args
  PID  PPID  PGID  SESS TT       TPGID STAT COMMAND
 2811     1  2262 26064 pts/3    26064 T    python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-cleaner
 2830 24409  2829 24409 pts/6     2829 S+    |   \_ grep -e pts/3 -e COMMAND
26064  6198 26064 26064 pts/3    26064 Ss+   \_ /bin/bash
 2262 26064  2262 26064 pts/3    26064 T     |   \_ make doc-html
 2781  2262  2262 26064 pts/3    26064 T     |       \_ /bin/sh -c spkg/pipestatus "./sage -docbuild --no-pdf-links all html  2>&1" "tee -a dochtml.log"
 2782  2781  2262 26064 pts/3    26064 T     |           \_ bash spkg/pipestatus ./sage -docbuild --no-pdf-links all html  2>&1 tee -a dochtml.log
 2783  2782  2262 26064 pts/3    26064 T     |               \_ bash ./sage -docbuild --no-pdf-links all html
 2791  2783  2262 26064 pts/3    26064 T     |               |   \_ bash /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sage-sage -docbuild --no-pdf-links all html
 2806  2791  2262 26064 pts/3    26064 T     |               |       \_ python /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/common/builder.py --no-pdf-links all html
 2807  2806  2262 26064 pts/3    26064 T     |               |           \_ /bin/sh -c sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial   -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial
 2808  2807  2262 26064 pts/3    26064 T     |               |               \_ python /scratch/jdemeyer/sage-4.7.2.alpha3/local/bin/sphinx-build -b html -d /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/doctrees/de/tutorial -A hide_pdf_links=1 /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/de/tutorial /scratch/jdemeyer/sage-4.7.2.alpha3/devel/sage/doc/output/html/de/tutorial
 2784  2782  2262 26064 pts/3    26064 T     |               \_ tee -a dochtml.log
```



---

archive/issue_comments_093802.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nFrustrating that it is hard to reproduce: `make doc-html` *sometimes* runs `sage-cleaner`.",
    "created_at": "2011-10-08T09:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93802",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Frustrating that it is hard to reproduce: `make doc-html` *sometimes* runs `sage-cleaner`.



---

archive/issue_comments_093803.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThis is `sphinx-build`:\n\n```\n#!/usr/bin/env python\n# EASY-INSTALL-ENTRY-SCRIPT: 'Sphinx==1.0.4','console_scripts','sphinx-build'\n__requires__ = 'Sphinx==1.0.4'\nimport sys\nfrom pkg_resources import load_entry_point\nimport sage.all\nsys.exit(\n   load_entry_point('Sphinx==1.0.4', 'console_scripts', 'sphinx-build')()\n)\n```\n\nNote the line \"import sage.all\".  Perhaps this can sometimes (indirectly) run `sage-cleaner`?",
    "created_at": "2011-10-08T10:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93803",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

This is `sphinx-build`:

```
#!/usr/bin/env python
# EASY-INSTALL-ENTRY-SCRIPT: 'Sphinx==1.0.4','console_scripts','sphinx-build'
__requires__ = 'Sphinx==1.0.4'
import sys
from pkg_resources import load_entry_point
import sage.all
sys.exit(
   load_entry_point('Sphinx==1.0.4', 'console_scripts', 'sphinx-build')()
)
```

Note the line "import sage.all".  Perhaps this can sometimes (indirectly) run `sage-cleaner`?



---

archive/issue_comments_093804.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI don't see how the import sage.all could start sage-cleaner. If you can reproduce the problem, how about you strace the docbuild process? Then it would be easy to find out which child process starts the cleaner.",
    "created_at": "2011-10-08T11:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93804",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

I don't see how the import sage.all could start sage-cleaner. If you can reproduce the problem, how about you strace the docbuild process? Then it would be easy to find out which child process starts the cleaner.



---

archive/issue_comments_093805.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@vbraun](#comment%3A28):\n> If you can reproduce the problem\n\nThat's precisely the problem, it must be some weird race-condition.",
    "created_at": "2011-10-08T11:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93805",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@vbraun](#comment%3A28):
> If you can reproduce the problem

That's precisely the problem, it must be some weird race-condition.



---

archive/issue_comments_093806.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI found a way to reproduce it: when `$HOME/.sage` does not exist, `sage-cleaner` is always started when doing `make doc-html`.",
    "created_at": "2011-10-08T12:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93806",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

I found a way to reproduce it: when `$HOME/.sage` does not exist, `sage-cleaner` is always started when doing `make doc-html`.



---

archive/issue_comments_093807.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIt is indeed the line `import sage.all` which causes `sage-cleaner` to be run.",
    "created_at": "2011-10-08T12:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93807",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

It is indeed the line `import sage.all` which causes `sage-cleaner` to be run.



---

archive/issue_comments_093808.json:
```json
{
    "body": "Attachment: **[10163_debug_sage_cleaner.patch.gz](https://github.com/sagemath/sage/files/ticket10163/10163_debug_sage_cleaner.patch.gz)**\n\nSTOP all processes when sage-cleaner is run, **do not apply**",
    "created_at": "2011-10-08T12:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93808",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[10163_debug_sage_cleaner.patch.gz](https://github.com/sagemath/sage/files/ticket10163/10163_debug_sage_cleaner.patch.gz)**

STOP all processes when sage-cleaner is run, **do not apply**



---

archive/issue_comments_093809.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n`gap` seems to be involved somehow.  The last thing which happens before starting `sage-cleaner` is starting `gap`.",
    "created_at": "2011-10-08T12:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93809",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

`gap` seems to be involved somehow.  The last thing which happens before starting `sage-cleaner` is starting `gap`.



---

archive/issue_comments_093810.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nBut why does make hang until the cleaner exits? The sage-cleaner process is already orphaned, so nobody should be waiting for it. Did you strace the hanging make process? I would tend to think that it is a good thing that the sage-cleaner is started.",
    "created_at": "2011-10-08T12:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93810",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

But why does make hang until the cleaner exits? The sage-cleaner process is already orphaned, so nobody should be waiting for it. Did you strace the hanging make process? I would tend to think that it is a good thing that the sage-cleaner is started.



---

archive/issue_comments_093811.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThis reproduces the problem:\n\n```\n$ ( export HOME=/tmp/sagehome; rm -rf $HOME; mkdir -p $HOME/.sage/temp/`hostname`/$$; make doc-html; )\n```\nWhat happens here is that we start from a clean `$HOME` and create a bogus directory in `$HOME/.sage/temp/$hostname` to make sure `sage-cleaner` does not exit.  Note that you can delete the last 3 lines from `local/bin/sphinx-build` to speed up testing.",
    "created_at": "2011-10-08T13:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93811",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

This reproduces the problem:

```
$ ( export HOME=/tmp/sagehome; rm -rf $HOME; mkdir -p $HOME/.sage/temp/`hostname`/$$; make doc-html; )
```
What happens here is that we start from a clean `$HOME` and create a bogus directory in `$HOME/.sage/temp/$hostname` to make sure `sage-cleaner` does not exit.  Note that you can delete the last 3 lines from `local/bin/sphinx-build` to speed up testing.



---

archive/issue_comments_093812.json:
```json
{
    "body": "Attachment: **[10163_sage_cleaner.patch.gz](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)**",
    "created_at": "2011-10-08T13:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93812",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[10163_sage_cleaner.patch.gz](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)**



---

archive/issue_comments_093813.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -47,3 +47,5 @@\n This is free software; you are free to change and redistribute it.\n There is NO WARRANTY, to the extent permitted by law.\n ```\n+\n+**Apply** [attachment: 10163_sage_cleaner.patch](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)\n``````\n",
    "created_at": "2011-10-08T13:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93813",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -47,3 +47,5 @@
 This is free software; you are free to change and redistribute it.
 There is NO WARRANTY, to the extent permitted by law.
 ```
+
+**Apply** [attachment: 10163_sage_cleaner.patch](https://github.com/sagemath/sage/files/ticket10163/10163_sage_cleaner.patch.gz)
``````




---

archive/issue_comments_093814.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2011-10-08T13:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93814",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_131741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T13:19:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131741"
}
```



---

archive/issue_events_131742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T13:19:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131742"
}
```



---

archive/issue_comments_093815.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe problem was dangling file descriptors.  This patch fixes the problem for me.",
    "created_at": "2011-10-08T13:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93815",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

The problem was dangling file descriptors.  This patch fixes the problem for me.



---

archive/issue_comments_093816.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nHmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner... In any case, the patch looks good to me.",
    "created_at": "2011-10-08T13:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93816",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner... In any case, the patch looks good to me.



---

archive/issue_comments_093817.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2011-10-08T13:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93817",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_131743.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-10-08T13:27:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131743"
}
```



---

archive/issue_events_131744.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-10-08T13:27:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131744"
}
```



---

archive/issue_comments_093818.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@vbraun](#comment%3A37):\n> Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner...\n\nExactly, that's what I was also thinking.",
    "created_at": "2011-10-08T13:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93818",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@vbraun](#comment%3A37):
> Hmm maybe sage-cleaner should close its stdout/stderr instead of hoping that all instances that call it do. But then that would make it annoying to debug the cleaner...

Exactly, that's what I was also thinking.



---

archive/issue_comments_093819.json:
```json
{
    "body": "Changed keywords from **build Makefile** to **build Makefile sage-cleaner**",
    "created_at": "2011-10-08T13:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93819",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **build Makefile** to **build Makefile sage-cleaner**



---

archive/issue_events_131745.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T13:31:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131745"
}
```



---

archive/issue_events_131746.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T13:31:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131746"
}
```



---

archive/issue_comments_093820.json:
```json
{
    "body": "Changed keywords from **build Makefile sage-cleaner** to **build Makefile sage-cleaner cleaner**",
    "created_at": "2011-10-08T13:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93820",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **build Makefile sage-cleaner** to **build Makefile sage-cleaner cleaner**



---

archive/issue_comments_093821.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nWe had similar problems with (e.g.) `ptestlong` and (GAP?) orphans IIRC; while `sage -tp ...` did terminate (*\"All tests passed!\"*), `tee` did not because some file descriptor(s) were still open, so you didn't get the shell prompt back.\n\nKilling the orphans the shell prompt returned.",
    "created_at": "2011-10-08T16:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93821",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:40" align="right">comment:40</div>

We had similar problems with (e.g.) `ptestlong` and (GAP?) orphans IIRC; while `sage -tp ...` did terminate (*"All tests passed!"*), `tee` did not because some file descriptor(s) were still open, so you didn't get the shell prompt back.

Killing the orphans the shell prompt returned.



---

archive/issue_events_131747.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T18:14:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131747"
}
```



---

archive/issue_events_131748.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T18:14:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10163#event-131748"
}
```



---

archive/issue_comments_093822.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha4**",
    "created_at": "2011-10-08T18:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10163#issuecomment-93822",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha4**
