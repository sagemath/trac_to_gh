# Issue 10966: Make it impossible for unprivileged trac users to close tickets

archive/issues_010887.json:
```json
{
    "body": "In several places in the documentation it says you shouldn't close tickets if you aren't a release manager. Since it's so trivial to fix maybe we should change the rights needed to change the status of a ticket in order to prevent unknown people from closing tickets. According to [the trac wiki](http://trac.edgewall.org/wiki/TracWorkflow) this can be done by changing `close.permissions = TICKET_MODIFY` to `close.permissions = TICKET_ADMIN` in the `trac.ini` file. Of course `TICKET_ADMIN` could be anything logical from [the possible permission set](http://trac.edgewall.org/wiki/TracPermissions).\n\nWe could even do more fancy stuff like add a \"nominate for closure\" status to the workflow or a \"request patchbot\" and a \"patchbot doctest passed\" depending on how the development workflow is in real life.\n\nAssignee: mvngu, schilly\n\nResolution: fixed\n\nAuthor: Maarten Derickx\n\nReviewer: Keshav Kini\n\nMerged: sage-4.7.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/10966\n\n",
    "closed_at": "2011-04-22T17:35:53Z",
    "created_at": "2011-03-19T02:36:02Z",
    "labels": [
        "component: website/wiki"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Make it impossible for unprivileged trac users to close tickets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10966",
    "user": "https://github.com/koffie"
}
```
In several places in the documentation it says you shouldn't close tickets if you aren't a release manager. Since it's so trivial to fix maybe we should change the rights needed to change the status of a ticket in order to prevent unknown people from closing tickets. According to [the trac wiki](http://trac.edgewall.org/wiki/TracWorkflow) this can be done by changing `close.permissions = TICKET_MODIFY` to `close.permissions = TICKET_ADMIN` in the `trac.ini` file. Of course `TICKET_ADMIN` could be anything logical from [the possible permission set](http://trac.edgewall.org/wiki/TracPermissions).

We could even do more fancy stuff like add a "nominate for closure" status to the workflow or a "request patchbot" and a "patchbot doctest passed" depending on how the development workflow is in real life.

Assignee: mvngu, schilly

Resolution: fixed

Author: Maarten Derickx

Reviewer: Keshav Kini

Merged: sage-4.7.rc0

Issue created by migration from https://trac.sagemath.org/ticket/10966





---

archive/issue_comments_141211.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-04-22T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141211",
    "user": "https://github.com/koffie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141212.json:
```json
{
    "body": "<a id='comment:1'></a>I changed the trac config so that closing should not be possible anymore. So test and review :)",
    "created_at": "2011-04-22T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141212",
    "user": "https://github.com/koffie"
}
```

<a id='comment:1'></a>I changed the trac config so that closing should not be possible anymore. So test and review :)



---

archive/issue_comments_141213.json:
```json
{
    "body": "Changing author from \"\" to \"Maarten Derickx\"",
    "created_at": "2011-04-22T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141213",
    "user": "https://github.com/koffie"
}
```

Changing author from "" to "Maarten Derickx"



---

archive/issue_comments_141214.json:
```json
{
    "body": "<a id='comment:2'></a>At least not when you don't have TICKET_ADMIN right's if you have TICKET_ADMIN or something higher like TRAC_ADMIN it is still possible.",
    "created_at": "2011-04-22T10:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141214",
    "user": "https://github.com/koffie"
}
```

<a id='comment:2'></a>At least not when you don't have TICKET_ADMIN right's if you have TICKET_ADMIN or something higher like TRAC_ADMIN it is still possible.



---

archive/issue_comments_141215.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-04-22T11:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141215",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141216.json:
```json
{
    "body": "Attachment [doc-closing-tickets.patch](tarball://root/attachments/some-uuid/ticket10966/doc-closing-tickets.patch) by @koffie created at 2011-04-22 11:10:47",
    "created_at": "2011-04-22T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141216",
    "user": "https://github.com/koffie"
}
```

Attachment [doc-closing-tickets.patch](tarball://root/attachments/some-uuid/ticket10966/doc-closing-tickets.patch) by @koffie created at 2011-04-22 11:10:47



---

archive/issue_comments_141217.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-04-22T11:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141217",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141218.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141218",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_141219.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,24 +1,6 @@\n-In several places in the documentation it says you shouldn't close\u00a0\n-tickets if you have never done the release management.\u00a0\n-Since it's so trivial to fix maybe we should change the needed rights\u00a0\n-to change the\u00a0\n-status to prevent someone unknowing to close a ticket. According to\u00a0\n-[http://trac.edgewall.org/wiki/TracWorkflow](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracWorkflow)\u00a0this\u00a0\n-can be done by changing:\u00a0\n+In several places in the documentation it says you shouldn't close tickets if you aren't a release manager. Since it's so trivial to fix maybe we should change the rights needed to change the status of a ticket in order to prevent unknown people from closing tickets. According to [the trac wiki](http://trac.edgewall.org/wiki/TracWorkflow) this can be done by changing `close.permissions = TICKET_MODIFY` to `close.permissions = TICKET_ADMIN` in the `trac.ini` file. Of course `TICKET_ADMIN` could be anything logical from [the possible permission set](http://trac.edgewall.org/wiki/TracPermissions).\n \n-close.permissions = TICKET_MODIFY\u00a0\n-\n-into\u00a0\n-\n-close.permissions = TICKET_ADMIN\u00a0\n-\n-in the trac.ini file. Offcourse TICKET_ADMIN could be anything logical\u00a0\n-from\u00a0[http://trac.edgewall.org/wiki/TracPermissions](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracPermissions)\u00a0\n-\n-ps. we could even do more fancy stuff like add a \"nominate for\u00a0\n-closure\" status to the workflow or a \"request patchbot\" and a\u00a0\n-\"patchbot doctest passed\" depending on how the developement workflow\u00a0\n-in real life.\n+We could even do more fancy stuff like add a \"nominate for closure\" status to the workflow or a \"request patchbot\" and a \"patchbot doctest passed\" depending on how the development workflow is in real life.\n \n Comment: 1\n \n``````\n",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141219",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,24 +1,6 @@
-In several places in the documentation it says you shouldn't close 
-tickets if you have never done the release management. 
-Since it's so trivial to fix maybe we should change the needed rights 
-to change the 
-status to prevent someone unknowing to close a ticket. According to 
-[http://trac.edgewall.org/wiki/TracWorkflow](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracWorkflow) this 
-can be done by changing: 
+In several places in the documentation it says you shouldn't close tickets if you aren't a release manager. Since it's so trivial to fix maybe we should change the rights needed to change the status of a ticket in order to prevent unknown people from closing tickets. According to [the trac wiki](http://trac.edgewall.org/wiki/TracWorkflow) this can be done by changing `close.permissions = TICKET_MODIFY` to `close.permissions = TICKET_ADMIN` in the `trac.ini` file. Of course `TICKET_ADMIN` could be anything logical from [the possible permission set](http://trac.edgewall.org/wiki/TracPermissions).
 
-close.permissions = TICKET_MODIFY 
-
-into 
-
-close.permissions = TICKET_ADMIN 
-
-in the trac.ini file. Offcourse TICKET_ADMIN could be anything logical 
-from [http://trac.edgewall.org/wiki/TracPermissions](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracPermissions) 
-
-ps. we could even do more fancy stuff like add a "nominate for 
-closure" status to the workflow or a "request patchbot" and a 
-"patchbot doctest passed" depending on how the developement workflow 
-in real life.
+We could even do more fancy stuff like add a "nominate for closure" status to the workflow or a "request patchbot" and a "patchbot doctest passed" depending on how the development workflow is in real life.
 
 Comment: 1
 
``````




---

archive/issue_comments_141220.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good. I can't close tickets, and the documentation builds fine. I successfully added a dependency to #11120. Positive review!",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141220",
    "user": "https://github.com/kini"
}
```

<a id='comment:5'></a>Looks good. I can't close tickets, and the documentation builds fine. I successfully added a dependency to #11120. Positive review!



---

archive/issue_comments_141221.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Keshav Kini\"",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141221",
    "user": "https://github.com/kini"
}
```

Changing reviewer from "" to "Keshav Kini"



---

archive/issue_events_028429.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-22T13:10:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10966#event-28429"
}
```



---

archive/issue_comments_141222.json:
```json
{
    "body": "<a id='comment:7'></a>It's not a major problem, but it is nice if the filename of a patch contains the ticket number (mainly to ensure no two patches from different tickets have the same filename).",
    "created_at": "2011-04-22T13:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141222",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>It's not a major problem, but it is nice if the filename of a patch contains the ticket number (mainly to ensure no two patches from different tickets have the same filename).



---

archive/issue_comments_141223.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.rc0\"",
    "created_at": "2011-04-22T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141223",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.rc0"



---

archive/issue_comments_141224.json:
```json
{
    "body": "<a id='comment:8'></a>Seems I am still an \"unprivileged trac user\", so I cannot close tickets, I sent an email to William about this.\nAnyway, this one can be closed.",
    "created_at": "2011-04-22T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141224",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Seems I am still an "unprivileged trac user", so I cannot close tickets, I sent an email to William about this.
Anyway, this one can be closed.



---

archive/issue_events_028430.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2011-04-22T17:35:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10966#event-28430"
}
```



---

archive/issue_comments_141225.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-22T17:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141225",
    "user": "https://github.com/koffie"
}
```

Resolution: fixed



---

archive/issue_comments_141226.json:
```json
{
    "body": "<a id='comment:10'></a>Hej Jeroen, Are you sure you cannot close tickets. I looked at the permissions and we have exactly the same permissions, yet I was able to close this ticket. (This is also how I tested if you would still be able to close tickets, since that would be very! important)\n\nKind Regards",
    "created_at": "2011-04-22T17:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141226",
    "user": "https://github.com/koffie"
}
```

<a id='comment:10'></a>Hej Jeroen, Are you sure you cannot close tickets. I looked at the permissions and we have exactly the same permissions, yet I was able to close this ticket. (This is also how I tested if you would still be able to close tickets, since that would be very! important)

Kind Regards



---

archive/issue_comments_141227.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 mderickx]:\n> Hej Jeroen, Are you sure you cannot close tickets.\n\nDid the procedure for closing tickets change?\n\nI do **not** see \"resolve as...\" in the Actions box on the bottom of a ticket webpage.\n\nI am using `Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.16) Gecko/20110420 Gentoo Firefox/3.6.16` if that is relevant.",
    "created_at": "2011-04-22T17:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Replying to [comment:10 mderickx]:
> Hej Jeroen, Are you sure you cannot close tickets.

Did the procedure for closing tickets change?

I do **not** see "resolve as..." in the Actions box on the bottom of a ticket webpage.

I am using `Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.16) Gecko/20110420 Gentoo Firefox/3.6.16` if that is relevant.



---

archive/issue_comments_141228.json:
```json
{
    "body": "<a id='comment:12'></a>The procedure is exactly the same, only the permissions needed to do certain things have been changed. I set the closing of tickets to require \"TICKET_ADMIN\" rights. After looking a bit more carefull at http://trac.sagemath.org/sage_trac/admin/general/perm I saw that the person who gave you administrative rights on trac made a small error. The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.",
    "created_at": "2011-04-22T18:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141228",
    "user": "https://github.com/koffie"
}
```

<a id='comment:12'></a>The procedure is exactly the same, only the permissions needed to do certain things have been changed. I set the closing of tickets to require "TICKET_ADMIN" rights. After looking a bit more carefull at http://trac.sagemath.org/sage_trac/admin/general/perm I saw that the person who gave you administrative rights on trac made a small error. The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.



---

archive/issue_comments_141229.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 mderickx]:\n> The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.\n\n\nBedankt!",
    "created_at": "2011-04-22T18:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10966#issuecomment-141229",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [comment:12 mderickx]:
> The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.


Bedankt!
