# Issue 10209: typo in vm_basis.py

archive/issues_010208.json:
```json
{
    "body": "A typo in the function `delta_qexp` in `vm_basis.py` means that an if statement which is supposed to speed things up over `ZZ` or `QQ` never gets it right.\n\nTrivial patch coming up.\n\n**Assignee:** @craigcitro\n\n**CC:**  @williamstein mraum\n\n**Keywords:** delta\n\n**Author:** Alex Ghitza\n\n**Reviewer:** Martin Raum\n\n**Merged:** sage-4.6.1.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10209\n\n",
    "closed_at": "2010-11-10T22:22:13Z",
    "created_at": "2010-11-04T08:03:57Z",
    "labels": [
        "component: modular forms",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "title": "typo in vm_basis.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10209",
    "user": "https://github.com/aghitza"
}
```
A typo in the function `delta_qexp` in `vm_basis.py` means that an if statement which is supposed to speed things up over `ZZ` or `QQ` never gets it right.

Trivial patch coming up.

**Assignee:** @craigcitro

**CC:**  @williamstein mraum

**Keywords:** delta

**Author:** Alex Ghitza

**Reviewer:** Martin Raum

**Merged:** sage-4.6.1.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10209





---

archive/attachments_013357.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10209.patch",
    "asset_url": "tarball://root/attachments/ticket10209/trac_10209.patch",
    "created_at": "2010-11-04T08:09:12Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10209/trac_10209.patch",
    "user": "https://github.com/aghitza"
}
```



---

archive/issue_comments_096844.json:
```json
{
    "body": "Attachment [trac_10209.patch](https://github.com/sagemath/sage/files/ticket10209/trac_10209.patch) by @aghitza created at 2010-11-04 08:09:12",
    "created_at": "2010-11-04T08:09:12Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96844",
    "user": "https://github.com/aghitza"
}
```

Attachment [trac_10209.patch](https://github.com/sagemath/sage/files/ticket10209/trac_10209.patch) by @aghitza created at 2010-11-04 08:09:12



---

archive/issue_comments_096845.json:
```json
{
    "body": "<a id='comment:1'></a>\nSee the attached patch.  I don't think the fix can be doctested, but here are some timings on `sage-4.6.1.alpha0`:\n\nBEFORE THE PATCH:\n\n```\nsage: timeit('f = delta_qexp(100)')\n625 loops, best of 3: 431 \u00b5s per loop\nsage: timeit('f = delta_qexp(10000)')\n25 loops, best of 3: 35.7 ms per loop\nsage: timeit('f = delta_qexp(1000000)')\n5 loops, best of 3: 6.42 s per loop\n```\n\nAFTER THE PATCH:\n\n```\nsage: timeit('f = delta_qexp(100)')\n625 loops, best of 3: 304 \u00b5s per loop\nsage: timeit('f = delta_qexp(10000)')\n25 loops, best of 3: 28.9 ms per loop\nsage: timeit('f = delta_qexp(1000000)')\n5 loops, best of 3: 5.73 s per loop\n```",
    "created_at": "2010-11-04T08:52:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96845",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:1'></a>
See the attached patch.  I don't think the fix can be doctested, but here are some timings on `sage-4.6.1.alpha0`:

BEFORE THE PATCH:

```
sage: timeit('f = delta_qexp(100)')
625 loops, best of 3: 431 µs per loop
sage: timeit('f = delta_qexp(10000)')
25 loops, best of 3: 35.7 ms per loop
sage: timeit('f = delta_qexp(1000000)')
5 loops, best of 3: 6.42 s per loop
```

AFTER THE PATCH:

```
sage: timeit('f = delta_qexp(100)')
625 loops, best of 3: 304 µs per loop
sage: timeit('f = delta_qexp(10000)')
25 loops, best of 3: 28.9 ms per loop
sage: timeit('f = delta_qexp(1000000)')
5 loops, best of 3: 5.73 s per loop
```



---

archive/issue_comments_096846.json:
```json
{
    "body": "**Author:** Alex Ghitza",
    "created_at": "2010-11-04T08:52:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96846",
    "user": "https://github.com/aghitza"
}
```

**Author:** Alex Ghitza



---

archive/issue_comments_096847.json:
```json
{
    "body": "<a id='comment:2'></a>\nThat's right, apart from timings there is no \"visible\" difference. All tests pass, so I would give this a positive review. Do you want to change anything before?",
    "created_at": "2010-11-04T09:47:42Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96847",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:2'></a>
That's right, apart from timings there is no "visible" difference. All tests pass, so I would give this a positive review. Do you want to change anything before?



---

archive/issue_comments_096848.json:
```json
{
    "body": "<a id='comment:3'></a>\nOops, just forgot to set it to \"needs review\".",
    "created_at": "2010-11-04T10:47:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96848",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:3'></a>
Oops, just forgot to set it to "needs review".



---

archive/issue_events_077682.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-11-04T10:47:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10209#event-77682"
}
```



---

archive/issue_comments_096849.json:
```json
{
    "body": "**Reviewer:** Martin Raum",
    "created_at": "2010-11-04T11:08:33Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96849",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Reviewer:** Martin Raum



---

archive/issue_events_077683.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2010-11-04T11:08:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10209#event-77683"
}
```



---

archive/issue_events_077684.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2010-11-04T11:08:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10209#event-77684"
}
```



---

archive/issue_comments_096850.json:
```json
{
    "body": "**Merged:** sage-4.6.1.alpha1",
    "created_at": "2010-11-10T22:22:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10209#issuecomment-96850",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.1.alpha1



---

archive/issue_events_077685.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-10T22:22:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10209#event-77685"
}
```



---

archive/issue_events_077686.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-10T22:22:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10209#event-77686"
}
```
