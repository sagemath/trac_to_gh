# Issue 10549: Improvements in canonical_form, is_isomorphic, and graph_isom_equivalent_non_edge_labeled_graph

archive/issues_010496.json:
```json
{
    "body": "This ticket implements several improvements in the three method in the summary.\n\nApply [attachment:trac_10549_flat.patch].\n\nDepends on #11181\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  rlm@rlmiller.org @anneschilling\n\n**Keywords:** graph, canonical form, isomorphism\n\n**Author:** Christian Stump, Robert Miller\n\n**Reviewer:** Robert Miller, Anne Schilling\n\n**Merged:** sage-4.7.1.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10549\n\n",
    "closed_at": "2011-05-13T06:13:29Z",
    "created_at": "2011-01-03T16:23:05Z",
    "labels": [
        "component: graph theory",
        "critical",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "title": "Improvements in canonical_form, is_isomorphic, and graph_isom_equivalent_non_edge_labeled_graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10549",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
This ticket implements several improvements in the three method in the summary.

Apply [attachment:trac_10549_flat.patch].

Depends on #11181

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  rlm@rlmiller.org @anneschilling

**Keywords:** graph, canonical form, isomorphism

**Author:** Christian Stump, Robert Miller

**Reviewer:** Robert Miller, Anne Schilling

**Merged:** sage-4.7.1.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10549





---

archive/issue_comments_102466.json:
```json
{
    "body": "<a id='comment:1'></a>\nMore specifically, one improvement this ticket makes is the following:\n\nBefore, if given an edge labeled graph, the automorphism group function would first translate this to a non-edge labeled graph of larger size. It would do so by making a vertex `('o',v)` for each original vertex `v`, and also other vertices labeled `('x', i)`.\n\nThis ticket includes the optimization of using consecutive integers in the resulting graph instead of tuples to label the vertices. This removes a lot of overhead when translating back and forth, which makes the automorphism group function much faster.",
    "created_at": "2011-01-11T00:11:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102466",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:1'></a>
More specifically, one improvement this ticket makes is the following:

Before, if given an edge labeled graph, the automorphism group function would first translate this to a non-edge labeled graph of larger size. It would do so by making a vertex `('o',v)` for each original vertex `v`, and also other vertices labeled `('x', i)`.

This ticket includes the optimization of using consecutive integers in the resulting graph instead of tuples to label the vertices. This removes a lot of overhead when translating back and forth, which makes the automorphism group function much faster.



---

archive/issue_events_080975.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-01-11T00:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80975"
}
```



---

archive/issue_comments_102467.json:
```json
{
    "body": "**Reviewer:** Robert Miller",
    "created_at": "2011-01-11T00:14:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102467",
    "user": "https://github.com/rlmill"
}
```

**Reviewer:** Robert Miller



---

archive/issue_comments_102468.json:
```json
{
    "body": "<a id='comment:2'></a>\nUnfortunately, the patch here doeesn't finish the job. For example, on lines 13088--13814, the old translation is still used, and as a result several doctests fail, in `sage/graphs/generic_graph.py` and `sage/geometry/polyhedra/py`.",
    "created_at": "2011-01-11T00:14:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102468",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:2'></a>
Unfortunately, the patch here doeesn't finish the job. For example, on lines 13088--13814, the old translation is still used, and as a result several doctests fail, in `sage/graphs/generic_graph.py` and `sage/geometry/polyhedra/py`.



---

archive/issue_comments_102469.json:
```json
{
    "body": "<a id='comment:3'></a>\nSorry, that should have been lines 13808--13814.\n\nSame thing also on line 14347.\n\nAnother problem is that copying graph backends is not currently implemented. However, it may seem to be when the line `G._backend = copy( g._backend )` executes without error. It seems to be simply copying the link address:\n\n```\nsage: G = Graph(sparse=True)\nsage: G.add_edges( [(0,1,'a'),(1,2,'b'),(2,3,'c'),(3,4,'b'),(4,0,'a')] )\nsage: G.num_verts()\n5\nsage: X = G.canonical_label(edge_labels=True)\nsage: G.num_verts()\n10\n```\n\nSo that really needs to be fixed.\n\nAlso, this could have better coding style: `for i in [ v for v in g if v not in G_vertices ]:`. This could be `for i in g if i not in G_vertices:`, as there is no need to construct a list there.",
    "created_at": "2011-01-11T00:53:43Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102469",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:3'></a>
Sorry, that should have been lines 13808--13814.

Same thing also on line 14347.

Another problem is that copying graph backends is not currently implemented. However, it may seem to be when the line `G._backend = copy( g._backend )` executes without error. It seems to be simply copying the link address:

```
sage: G = Graph(sparse=True)
sage: G.add_edges( [(0,1,'a'),(1,2,'b'),(2,3,'c'),(3,4,'b'),(4,0,'a')] )
sage: G.num_verts()
5
sage: X = G.canonical_label(edge_labels=True)
sage: G.num_verts()
10
```

So that really needs to be fixed.

Also, this could have better coding style: `for i in [ v for v in g if v not in G_vertices ]:`. This could be `for i in g if i not in G_vertices:`, as there is no need to construct a list there.



---

archive/issue_comments_102470.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [rlm](#comment%3A3):\n\n> Another problem is that copying graph backends is not currently implemented. However, it may seem to be when the line `G._backend = copy( g._backend )` executes without error.\n\n\nI now only make G = copy( g ), so this is again quite slow. But I don't see a better way to do it, do you?\n\n> Also, this could have better coding style: `for i in [ v for v in g if v not in G_vertices ]:`. This could be `for i in g if i not in G_vertices:`, as there is no need to construct a list there.\n\n\ndone.",
    "created_at": "2011-01-11T15:55:48Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102470",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
Replying to [rlm](#comment%3A3):

> Another problem is that copying graph backends is not currently implemented. However, it may seem to be when the line `G._backend = copy( g._backend )` executes without error.


I now only make G = copy( g ), so this is again quite slow. But I don't see a better way to do it, do you?

> Also, this could have better coding style: `for i in [ v for v in g if v not in G_vertices ]:`. This could be `for i in g if i not in G_vertices:`, as there is no need to construct a list there.


done.



---

archive/attachments_013812.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10549_refinements_graphs-cs.patch",
    "asset_url": "tarball://root/attachments/ticket10549/trac_10549_refinements_graphs-cs.patch",
    "created_at": "2011-01-16T23:24:31Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```



---

archive/issue_comments_102471.json:
```json
{
    "body": "Attachment [trac_10549_refinements_graphs-cs.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.patch) by stumpc5 created at 2011-01-16 23:24:31",
    "created_at": "2011-01-16T23:24:31Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102471",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Attachment [trac_10549_refinements_graphs-cs.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.patch) by stumpc5 created at 2011-01-16 23:24:31



---

archive/issue_events_080976.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-01-18T21:50:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80976"
}
```



---

archive/issue_events_080977.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-01-18T21:50:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80977"
}
```



---

archive/issue_comments_102472.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe first patch looks very good. Since the ordering of canonical labels will now change for multi-edge and edge labeled graphs, this might be worth mentioning in the release note. Canonical labels are not in principle supposed to be stable from one release to the next, but they generally are. So it would be good to warn users about this.\n\nAs a result, I had to change one of the doctests in `species.py` whose canonical label is relabeled. I am certainly happy with the first patch, so if someone can review my patch, then this ticket can be set to positive review.",
    "created_at": "2011-01-18T21:50:19Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102472",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:5'></a>
The first patch looks very good. Since the ordering of canonical labels will now change for multi-edge and edge labeled graphs, this might be worth mentioning in the release note. Canonical labels are not in principle supposed to be stable from one release to the next, but they generally are. So it would be good to warn users about this.

As a result, I had to change one of the doctests in `species.py` whose canonical label is relabeled. I am certainly happy with the first patch, so if someone can review my patch, then this ticket can be set to positive review.



---

archive/issue_comments_102473.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n This ticket implements several improvements in the three method in the summary.\n \n-Still needs work!\n``````\n",
    "created_at": "2011-01-18T21:50:19Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102473",
    "user": "https://github.com/rlmill"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
 This ticket implements several improvements in the three method in the summary.
 
-Still needs work!
``````




---

archive/issue_comments_102474.json:
```json
{
    "body": "<a id='comment:6'></a>\nHellooooooo !!\n\nOnly two errors in a -testall -long :\n\n```python\nsage -t -long sage-bug/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"/home/ncohen/sage/devel/sage-bug/sage/graphs/generic_graph.py\", line 14686:\n    sage: G.is_isomorphic(H, edge_labels=True)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/home/ncohen/sage/devel/sage-bug/sage/graphs/generic_graph.py\", line 14688:\n    sage: G.is_isomorphic(H, edge_labels=True, certify=True)\nExpected:\n    {0: 1, 1: 2, 2: 3, 3: 4, 4: 0}\nGot:\n    (False, None)\n**********************************************************************\n```\n\n(I'm running the latest alpha1)\n\nBy the way : would you know of a \"cheap/elegant\" way to deal with this :\n\n```python\nsage: g = graphs.KneserGraph(8,2)\nsage: h = g.copy()\nsage: %timeit g.is_isomorphic(h)\n125 loops, best of 3: 6.27 ms per loop\nsage: h.relabel()\nsage: %timeit g.is_isomorphic(h)\n125 loops, best of 3: 4.72 ms per loop\nsage: g.relabel()\nsage: %timeit g.is_isomorphic(h)\n125 loops, best of 3: 3.13 ms per loop\n```\n\nOr is it just because of the way labels are handled ?\n\nNathann",
    "created_at": "2011-01-23T13:06:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102474",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Hellooooooo !!

Only two errors in a -testall -long :

```python
sage -t -long sage-bug/sage/graphs/generic_graph.py
**********************************************************************
File "/home/ncohen/sage/devel/sage-bug/sage/graphs/generic_graph.py", line 14686:
    sage: G.is_isomorphic(H, edge_labels=True)
Expected:
    True
Got:
    False
**********************************************************************
File "/home/ncohen/sage/devel/sage-bug/sage/graphs/generic_graph.py", line 14688:
    sage: G.is_isomorphic(H, edge_labels=True, certify=True)
Expected:
    {0: 1, 1: 2, 2: 3, 3: 4, 4: 0}
Got:
    (False, None)
**********************************************************************
```

(I'm running the latest alpha1)

By the way : would you know of a "cheap/elegant" way to deal with this :

```python
sage: g = graphs.KneserGraph(8,2)
sage: h = g.copy()
sage: %timeit g.is_isomorphic(h)
125 loops, best of 3: 6.27 ms per loop
sage: h.relabel()
sage: %timeit g.is_isomorphic(h)
125 loops, best of 3: 4.72 ms per loop
sage: g.relabel()
sage: %timeit g.is_isomorphic(h)
125 loops, best of 3: 3.13 ms per loop
```

Or is it just because of the way labels are handled ?

Nathann



---

archive/issue_events_080978.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-01-23T13:06:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80978"
}
```



---

archive/issue_events_080979.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-01-23T13:06:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80979"
}
```



---

archive/issue_events_080980.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-11T05:25:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80980"
}
```



---

archive/issue_events_080981.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-11T05:25:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80981"
}
```



---

archive/issue_comments_102475.json:
```json
{
    "body": "apply after other patch",
    "created_at": "2011-03-11T05:56:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102475",
    "user": "https://github.com/rlmill"
}
```

apply after other patch



---

archive/attachments_013813.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10549_part2.patch",
    "asset_url": "tarball://root/attachments/ticket10549/trac_10549_part2.patch",
    "created_at": "2011-03-11T06:57:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10549/trac_10549_part2.patch",
    "user": "https://github.com/anneschilling"
}
```



---

archive/issue_comments_102476.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [trac_10549_part2.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_part2.patch) by @anneschilling created at 2011-03-11 06:57:26",
    "created_at": "2011-03-11T06:57:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102476",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:8'></a>
Attachment [trac_10549_part2.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_part2.patch) by @anneschilling created at 2011-03-11 06:57:26



---

archive/attachments_013814.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10549_refinements_graphs-cs.2.patch",
    "asset_url": "tarball://root/attachments/ticket10549/trac_10549_refinements_graphs-cs.2.patch",
    "created_at": "2011-03-11T07:35:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.2.patch",
    "user": "https://github.com/anneschilling"
}
```



---

archive/issue_comments_102477.json:
```json
{
    "body": "<a id='comment:9'></a>\nAttachment [trac_10549_refinements_graphs-cs.2.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.2.patch) by @anneschilling created at 2011-03-11 07:35:14\n\nI just posted a trivially rebased version of the patch trac_10549_refinements_graphs-cs.2.patch, which should now cleanly apply to sage-4.6.2. The same patch is now also in the sage-combinat queue (with the older version of the patch refinement_graphs-cs.patch disabled).\n\nAnne",
    "created_at": "2011-03-11T07:35:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102477",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:9'></a>
Attachment [trac_10549_refinements_graphs-cs.2.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_refinements_graphs-cs.2.patch) by @anneschilling created at 2011-03-11 07:35:14

I just posted a trivially rebased version of the patch trac_10549_refinements_graphs-cs.2.patch, which should now cleanly apply to sage-4.6.2. The same patch is now also in the sage-combinat queue (with the older version of the patch refinement_graphs-cs.patch disabled).

Anne



---

archive/issue_comments_102478.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n This ticket implements several improvements in the three method in the summary.\n \n+Apply trac_10549_refinements_graphs-cs.2.patch and trac_10549_part2.patch.\n``````\n",
    "created_at": "2011-03-11T11:36:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102478",
    "user": "https://github.com/rlmill"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 This ticket implements several improvements in the three method in the summary.
 
+Apply trac_10549_refinements_graphs-cs.2.patch and trac_10549_part2.patch.
``````




---

archive/issue_comments_102479.json:
```json
{
    "body": "<a id='comment:11'></a>\ntrac_10549_part2.patch correctly fixes a bug in isomorphisms of graphs when edge labels are supposed to be considered.\n\nAnne",
    "created_at": "2011-03-12T09:49:27Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102479",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:11'></a>
trac_10549_part2.patch correctly fixes a bug in isomorphisms of graphs when edge labels are supposed to be considered.

Anne



---

archive/issue_events_080982.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-12T19:30:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80982"
}
```



---

archive/issue_comments_102480.json:
```json
{
    "body": "<a id='comment:12'></a>\nSince you're happy with the second patch and I'm happy with the first, I'm setting this to positive review.",
    "created_at": "2011-03-12T19:30:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102480",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'></a>
Since you're happy with the second patch and I'm happy with the first, I'm setting this to positive review.



---

archive/issue_events_080983.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-12T19:30:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80983"
}
```



---

archive/issue_events_080984.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-12T19:30:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80984"
}
```



---

archive/issue_comments_102481.json:
```json
{
    "body": "**Changing author** from \"Christian Stump\" to \"Christian Stump, Robert Miller\".",
    "created_at": "2011-03-12T19:30:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102481",
    "user": "https://github.com/rlmill"
}
```

**Changing author** from "Christian Stump" to "Christian Stump, Robert Miller".



---

archive/issue_comments_102482.json:
```json
{
    "body": "**Changing reviewer** from \"Robert Miller\" to \"Robert Miller, Anne Schilling\".",
    "created_at": "2011-03-12T19:30:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102482",
    "user": "https://github.com/rlmill"
}
```

**Changing reviewer** from "Robert Miller" to "Robert Miller, Anne Schilling".



---

archive/issue_events_080985.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-03-12T19:30:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80985"
}
```



---

archive/issue_comments_102483.json:
```json
{
    "body": "<a id='comment:13'></a>\nI somehow missed Nathann's message. Thanks for providing a patch!\n\nBest, Christian",
    "created_at": "2011-03-12T20:47:15Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102483",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:13'></a>
I somehow missed Nathann's message. Thanks for providing a patch!

Best, Christian



---

archive/issue_events_080986.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T19:22:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80986"
}
```



---

archive/issue_events_080987.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T19:22:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80987"
}
```



---

archive/issue_comments_102484.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha2",
    "created_at": "2011-03-17T19:22:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102484",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha2



---

archive/issue_comments_102485.json:
```json
{
    "body": "<a id='comment:15'></a>\nSome problems on various Buildbot machines (probably the ones which are 32-bit):\n\n```\nsage -t -long  -force_lib devel/sage/sage/combinat/species/species.py\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha2/devel/sage-main/sage/combinat/species/species.py\", line 667:\n    sage: list(sorted(labels.items()))\nExpected:\n    [(Combinatorial species, 1),\n     (Product of (Combinatorial species) and (Combinatorial species), 3),\n     (Singleton species, 0),\n     (Sum of (Singleton species) and (Product of (Combinatorial species) and (Combinatorial species)), 2)]\nGot:\n    [(Combinatorial species, 0), (Product of (Combinatorial species) and (Combinatorial species), 1), (Singleton species, 3), (Sum of (Singleton species) and (Product of (Combinatorial species) and (Combinatorial species)), 2)]\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha2/devel/sage-main/sage/combinat/species/species.py\", line 672:\n    sage: g.edges()\nExpected:\n    [(1, 2, None), (2, 0, None), (2, 3, None), (3, 1, None), (3, 1, None)]\nGot:\n    [(0, 2, None), (1, 0, None), (1, 0, None), (2, 1, None), (2, 3, None)]\n**********************************************************************\n```",
    "created_at": "2011-03-19T17:12:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102485",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Some problems on various Buildbot machines (probably the ones which are 32-bit):

```
sage -t -long  -force_lib devel/sage/sage/combinat/species/species.py
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha2/devel/sage-main/sage/combinat/species/species.py", line 667:
    sage: list(sorted(labels.items()))
Expected:
    [(Combinatorial species, 1),
     (Product of (Combinatorial species) and (Combinatorial species), 3),
     (Singleton species, 0),
     (Sum of (Singleton species) and (Product of (Combinatorial species) and (Combinatorial species)), 2)]
Got:
    [(Combinatorial species, 0), (Product of (Combinatorial species) and (Combinatorial species), 1), (Singleton species, 3), (Sum of (Singleton species) and (Product of (Combinatorial species) and (Combinatorial species)), 2)]
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha2/devel/sage-main/sage/combinat/species/species.py", line 672:
    sage: g.edges()
Expected:
    [(1, 2, None), (2, 0, None), (2, 3, None), (3, 1, None), (3, 1, None)]
Got:
    [(0, 2, None), (1, 0, None), (1, 0, None), (2, 1, None), (2, 3, None)]
**********************************************************************
```



---

archive/issue_comments_102486.json:
```json
{
    "body": "**Changing merged** from \"sage-4.7.alpha2\" to \"\".",
    "created_at": "2011-03-19T17:12:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102486",
    "user": "https://github.com/jdemeyer"
}
```

**Changing merged** from "sage-4.7.alpha2" to "".



---

archive/issue_events_080988.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-19T17:12:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80988"
}
```



---

archive/attachments_013815.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10549_flat.patch",
    "asset_url": "tarball://root/attachments/ticket10549/trac_10549_flat.patch",
    "created_at": "2011-04-12T20:27:04Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10549/trac_10549_flat.patch",
    "user": "https://github.com/rlmill"
}
```



---

archive/issue_comments_102487.json:
```json
{
    "body": "<a id='comment:17'></a>\nAttachment [trac_10549_flat.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_flat.patch) by @rlmill created at 2011-04-12 20:27:04",
    "created_at": "2011-04-12T20:27:04Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102487",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:17'></a>
Attachment [trac_10549_flat.patch](https://github.com/sagemath/sage/files/ticket10549/trac_10549_flat.patch) by @rlmill created at 2011-04-12 20:27:04



---

archive/issue_comments_102488.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This ticket implements several improvements in the three method in the summary.\n \n-Apply trac_10549_refinements_graphs-cs.2.patch and trac_10549_part2.patch.\n+Apply trac_10549_flat2.patch.\n+\n+Depends on #11181.\n``````\n",
    "created_at": "2011-04-12T20:27:04Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102488",
    "user": "https://github.com/rlmill"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This ticket implements several improvements in the three method in the summary.
 
-Apply trac_10549_refinements_graphs-cs.2.patch and trac_10549_part2.patch.
+Apply trac_10549_flat2.patch.
+
+Depends on #11181.
``````




---

archive/issue_comments_102489.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This ticket implements several improvements in the three method in the summary.\n \n-Apply trac_10549_flat2.patch.\n+Apply trac_10549_flat.patch.\n \n Depends on #11181.\n``````\n",
    "created_at": "2011-04-12T20:27:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102489",
    "user": "https://github.com/rlmill"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This ticket implements several improvements in the three method in the summary.
 
-Apply trac_10549_flat2.patch.
+Apply trac_10549_flat.patch.
 
 Depends on #11181.
``````




---

archive/issue_events_080989.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-04-12T20:28:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80989"
}
```



---

archive/issue_events_080990.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-04-12T20:28:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80990"
}
```



---

archive/issue_comments_102490.json:
```json
{
    "body": "<a id='comment:19'></a>\nI'm setting this to needs_review, although note that its dependency #11181 is not quite ready yet.",
    "created_at": "2011-04-12T20:28:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102490",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:19'></a>
I'm setting this to needs_review, although note that its dependency #11181 is not quite ready yet.



---

archive/issue_comments_102491.json:
```json
{
    "body": "<a id='comment:20'></a>\nApply trac_10549_flat.patch",
    "created_at": "2011-04-18T22:26:25Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102491",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:20'></a>
Apply trac_10549_flat.patch



---

archive/issue_comments_102492.json:
```json
{
    "body": "<a id='comment:21'></a>\nPositive review to this one !\n\nPasses -testall -long, so I hope the many, many doctests scattered in Sage which use those methods would have gone ballistic in case I missed something dangerous `:-)`\n\nNathann",
    "created_at": "2011-04-30T17:34:29Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102492",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
Positive review to this one !

Passes -testall -long, so I hope the many, many doctests scattered in Sage which use those methods would have gone ballistic in case I missed something dangerous `:-)`

Nathann



---

archive/issue_events_080991.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-04-30T17:34:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80991"
}
```



---

archive/issue_events_080992.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-04-30T17:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80992"
}
```



---

archive/issue_events_080993.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-01T09:31:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80993"
}
```



---

archive/issue_events_080994.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-01T09:31:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80994"
}
```



---

archive/issue_comments_102493.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n This ticket implements several improvements in the three method in the summary.\n \n-Apply trac_10549_flat.patch.\n-\n-Depends on #11181.\n+Apply [attachment:trac_10549_flat.patch].\n``````\n",
    "created_at": "2011-05-10T08:00:24Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102493",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
 This ticket implements several improvements in the three method in the summary.
 
-Apply trac_10549_flat.patch.
-
-Depends on #11181.
+Apply [attachment:trac_10549_flat.patch].
``````




---

archive/issue_comments_102494.json:
```json
{
    "body": "**Dependencies:** #11181",
    "created_at": "2011-05-10T08:00:24Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102494",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #11181



---

archive/issue_comments_102495.json:
```json
{
    "body": "<a id='comment:24'></a>\nThis patch conflicts with #10804.",
    "created_at": "2011-05-10T08:20:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102495",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
This patch conflicts with #10804.



---

archive/issue_events_080995.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-10T08:20:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80995"
}
```



---

archive/issue_events_080996.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-10T08:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80996"
}
```



---

archive/issue_events_080997.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-05-11T20:49:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80997"
}
```



---

archive/issue_events_080998.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-05-11T20:49:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80998"
}
```



---

archive/issue_comments_102496.json:
```json
{
    "body": "<a id='comment:25'></a>\nGo ahead and merge this one, I'll rebase the other one.",
    "created_at": "2011-05-11T20:49:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102496",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:25'></a>
Go ahead and merge this one, I'll rebase the other one.



---

archive/issue_comments_102497.json:
```json
{
    "body": "**Merged:** sage-4.7.1.alpha1",
    "created_at": "2011-05-13T06:13:29Z",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10549#issuecomment-102497",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.1.alpha1



---

archive/issue_events_080999.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-13T06:13:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-80999"
}
```



---

archive/issue_events_081000.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-13T06:13:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10549#event-81000"
}
```
