# Issue 10430: Add some bugfixes to the PARI package

archive/issues_010377.json:
```json
{
    "body": "We should add bugfixes for\n1. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132) (see #10279)\n2. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144) (see #2329)\n3. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143) (see #2329)\n4. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1084](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1084) (see #9620)\n5. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141) (see #10369)\n6. #10559: path to perl hardcoded in gphelp (GP/PARI)\n\n**New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p5.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p5.spkg)**\n\nAssignee: tbd\n\nCC:  drkirkby\n\nKeywords: pari spkg bugs patches\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: Leif Leonhardy, Volker Braun\n\nMerged: sage-4.6.2.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/10430\n\n",
    "closed_at": "2011-01-25T08:15:49Z",
    "created_at": "2010-12-04T23:21:09Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Add some bugfixes to the PARI package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10430",
    "user": "https://github.com/jdemeyer"
}
```
We should add bugfixes for
1. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132) (see #10279)
2. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1144) (see #2329)
3. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1143) (see #2329)
4. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1084](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1084) (see #9620)
5. [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141) (see #10369)
6. #10559: path to perl hardcoded in gphelp (GP/PARI)

**New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p5.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p5.spkg)**

Assignee: tbd

CC:  drkirkby

Keywords: pari spkg bugs patches

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: Leif Leonhardy, Volker Braun

Merged: sage-4.6.2.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/10430





---

archive/issue_comments_106525.json:
```json
{
    "body": "<a id='comment:2'></a>Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.\n\nDid someone report this to the PARI guys? Perhaps they could provide a patch such that we don't have to maintain it (that selectively changes the compiler flags for only *some* files).\n\nUnfortunately(?), not all people building on e.g. openSUSE 11.2 run into these problems, apparently.",
    "created_at": "2010-12-05T04:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106525",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.

Did someone report this to the PARI guys? Perhaps they could provide a patch such that we don't have to maintain it (that selectively changes the compiler flags for only *some* files).

Unfortunately(?), not all people building on e.g. openSUSE 11.2 run into these problems, apparently.



---

archive/issue_comments_106526.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 leif]:\n> Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.\n\n\nHere's an idea: we first try to build with -O3 and when that doesn't work, fall back to -O2, then -O1, then -O0.\n\nThis way we don't have to find out exactly which versions of gcc are broken.\n\nI think reporting this to PARI is pointless, because they can't help (and probably won't care about) a broken gcc.",
    "created_at": "2010-12-05T09:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106526",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>Replying to [comment:2 leif]:
> Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.


Here's an idea: we first try to build with -O3 and when that doesn't work, fall back to -O2, then -O1, then -O0.

This way we don't have to find out exactly which versions of gcc are broken.

I think reporting this to PARI is pointless, because they can't help (and probably won't care about) a broken gcc.



---

archive/issue_comments_106527.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 jdemeyer]:\n> Replying to [comment:2 leif]:\n> > Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.\n\n> \n> Here's an idea: we first try to build with -O3 and when that doesn't work, fall back to -O2, then -O1, then -O0.\n\n\n[comment:ticket:10120:16 Koen reported]:\n  *\"For reference: OpenSuse? 11.2 (gcc (SUSE Linux) 4.4.1 [gcc-4_4-branch revision 150839]) has the same problem when building PARI: on a machine with 64GB of RAM, it eventually fails after all memory is exhausted (takes hours). [...]\"*\n\nSo I don't think that's the way to go. (Other machines might start swapping, which effectively \"freezes\" some systems.)\n\nOr should we do something like\n\n```sh\n    (ulimit -St 900; $MAKE) # Which value is appropriate?\n```\n?\n\n> I think reporting this to PARI is pointless, because they can't help (and probably won't care about) a broken gcc.\n\n\nThey at least perhaps have better experience which files are most likely to trigger failures due to GCC bugs.",
    "created_at": "2010-12-05T14:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106527",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>Replying to [comment:3 jdemeyer]:
> Replying to [comment:2 leif]:
> > Perhaps we should really also address #10120, as more systems than originally reported seem to be affected, i.e. reduce (perhaps partially) optimization to `-O1` to work around obvious bugs in GCC 4.4.1 on these platforms.

> 
> Here's an idea: we first try to build with -O3 and when that doesn't work, fall back to -O2, then -O1, then -O0.


[comment:ticket:10120:16 Koen reported]:
  *"For reference: OpenSuse? 11.2 (gcc (SUSE Linux) 4.4.1 [gcc-4_4-branch revision 150839]) has the same problem when building PARI: on a machine with 64GB of RAM, it eventually fails after all memory is exhausted (takes hours). [...]"*

So I don't think that's the way to go. (Other machines might start swapping, which effectively "freezes" some systems.)

Or should we do something like

```sh
    (ulimit -St 900; $MAKE) # Which value is appropriate?
```
?

> I think reporting this to PARI is pointless, because they can't help (and probably won't care about) a broken gcc.


They at least perhaps have better experience which files are most likely to trigger failures due to GCC bugs.



---

archive/issue_comments_106528.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 leif]:\n Or should we do something like\n> {{{\n> #!sh\n>     (ulimit -St 900; $MAKE) # Which value is appropriate?\n> }}}\n> ?\n\n\nHow about ulimiting the *memory*?",
    "created_at": "2010-12-05T14:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106528",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Replying to [comment:4 leif]:
 Or should we do something like
> {{{
> #!sh
>     (ulimit -St 900; $MAKE) # Which value is appropriate?
> }}}
> ?


How about ulimiting the *memory*?



---

archive/issue_comments_106529.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 jdemeyer]:\n> Replying to [comment:4 leif]:\n>  Or should we do something like\n\n{{{#!sh\n    (ulimit -St 900; $MAKE) # Which value is appropriate?\n}}}\n> > ?\n\n> \n> How about ulimiting the *memory*?\n\n\nMuch harder to estimate, isn't it? (Feel free to test out adequate values, with `-O3` etc.; perhaps something Dave likes...)\n\nOk, if a process starts thrashing, it won't consume much (user) CPU time as well.",
    "created_at": "2010-12-05T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106529",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>Replying to [comment:5 jdemeyer]:
> Replying to [comment:4 leif]:
>  Or should we do something like

{{{#!sh
    (ulimit -St 900; $MAKE) # Which value is appropriate?
}}}
> > ?

> 
> How about ulimiting the *memory*?


Much harder to estimate, isn't it? (Feel free to test out adequate values, with `-O3` etc.; perhaps something Dave likes...)

Ok, if a process starts thrashing, it won't consume much (user) CPU time as well.



---

archive/issue_comments_106530.json:
```json
{
    "body": "Changing keywords from \"pari spkg\" to \"pari spkg bugs patches\".",
    "created_at": "2010-12-05T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106530",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "pari spkg" to "pari spkg bugs patches".



---

archive/issue_comments_106531.json:
```json
{
    "body": "<a id='comment:7'></a>I don't think we should be changing `ulimit`. Sage used to unset it at one point, and that was changed in a trac ticket. \n\nChanging it could cause all sorts of problems for someone. If Sage fails with the limit they set, then tough - they set the limit. \n\nOnce we start changing limits, we could cause other proceses to fail, which might be more important to someone. \n\nDave",
    "created_at": "2010-12-05T15:01:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106531",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>I don't think we should be changing `ulimit`. Sage used to unset it at one point, and that was changed in a trac ticket. 

Changing it could cause all sorts of problems for someone. If Sage fails with the limit they set, then tough - they set the limit. 

Once we start changing limits, we could cause other proceses to fail, which might be more important to someone. 

Dave



---

archive/issue_comments_106532.json:
```json
{
    "body": "<a id='comment:8'></a>David: we could check the current value of `ulimit -v` to make sure we are only **decreasing** the value, not increasing.\n\nI quickly tested `ulimit -v` on a few systems, this is what I found for the minimal power of 2 for `ulimit -v` to have a successful build of the pari spkg:\n\n1. Gentoo Linux, kernel 2.6.32, x86_64, gcc 4.6.0: **128 MB**\n2. Ubuntu Linux 8.04.4 LTS, kernel 2.6.24, x86_64, gcc 4.5.1: **128 MB**\n3. Mac OS X 10.4 PPC, gcc 4.0.1: **ulimit -v doesn't seem to work**",
    "created_at": "2010-12-05T15:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106532",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>David: we could check the current value of `ulimit -v` to make sure we are only **decreasing** the value, not increasing.

I quickly tested `ulimit -v` on a few systems, this is what I found for the minimal power of 2 for `ulimit -v` to have a successful build of the pari spkg:

1. Gentoo Linux, kernel 2.6.32, x86_64, gcc 4.6.0: **128 MB**
2. Ubuntu Linux 8.04.4 LTS, kernel 2.6.24, x86_64, gcc 4.5.1: **128 MB**
3. Mac OS X 10.4 PPC, gcc 4.0.1: **ulimit -v doesn't seem to work**



---

archive/issue_comments_106533.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 drkirkby]:\n> I don't think we should be changing `ulimit`. Sage used to unset it at one point, and that was changed in a trac ticket. \n> \n> Changing it could cause all sorts of problems for someone. If Sage fails with the limit they set, then tough - they set the limit. \n> \n> Once we start changing limits, we could cause other proceses to fail, which might be more important to someone. \n\n\nWe would only set limits in (PARI's) `spkg-install`.\n\nNote that `ulimit` only affects the **current process** and its subprocesses (i.e. gets inherited), therefore I also used the parentheses in the example above.\n\n`ulimit` is (also) a `bash` built-in btw. We could also limit its use to Linux.\n\nAnd ordinary users (i.e., their processes) *cannot **in**crease* limits once they are set.",
    "created_at": "2010-12-05T16:04:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106533",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>Replying to [comment:7 drkirkby]:
> I don't think we should be changing `ulimit`. Sage used to unset it at one point, and that was changed in a trac ticket. 
> 
> Changing it could cause all sorts of problems for someone. If Sage fails with the limit they set, then tough - they set the limit. 
> 
> Once we start changing limits, we could cause other proceses to fail, which might be more important to someone. 


We would only set limits in (PARI's) `spkg-install`.

Note that `ulimit` only affects the **current process** and its subprocesses (i.e. gets inherited), therefore I also used the parentheses in the example above.

`ulimit` is (also) a `bash` built-in btw. We could also limit its use to Linux.

And ordinary users (i.e., their processes) *cannot **in**crease* limits once they are set.



---

archive/issue_comments_106534.json:
```json
{
    "body": "<a id='comment:10'></a>P.S.:\n\nIf we do \"trial building\" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization, e.g. check that the exit code was 152 (`SIGXCPU` + 128) if we use a CPU time limit.",
    "created_at": "2010-12-05T16:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106534",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>P.S.:

If we do "trial building" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization, e.g. check that the exit code was 152 (`SIGXCPU` + 128) if we use a CPU time limit.



---

archive/issue_comments_106535.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 leif]:\n> P.S.:\n> \n> If we do \"trial building\" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization, e.g. check that the exit code was 152 (`SIGXCPU` + 128) if we use a CPU time limit.\n\n\nWith `ulimit -v` I receive `SIGKILL` on exhausted memory, which isn't very specific...",
    "created_at": "2010-12-05T16:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106535",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>Replying to [comment:10 leif]:
> P.S.:
> 
> If we do "trial building" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization, e.g. check that the exit code was 152 (`SIGXCPU` + 128) if we use a CPU time limit.


With `ulimit -v` I receive `SIGKILL` on exhausted memory, which isn't very specific...



---

archive/issue_comments_106536.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 leif]:\n> P.S.:\n> \n> If we do \"trial building\" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization\n\n\nThe build could fail for many various reasons, including but not limited to allocating too much memory.  There are various other tickets where a PARI build fails because of a broken gcc.  All these should be caught, not only the cases where we run out of memory.",
    "created_at": "2010-12-05T16:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106536",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:10 leif]:
> P.S.:
> 
> If we do "trial building" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization


The build could fail for many various reasons, including but not limited to allocating too much memory.  There are various other tickets where a PARI build fails because of a broken gcc.  All these should be caught, not only the cases where we run out of memory.



---

archive/issue_comments_106537.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:\n> Replying to [comment:10 leif]:\n> > P.S.:\n> > \n> > If we do \"trial building\" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization\n\n> \n> The build could fail for many various reasons, including but not limited to allocating too much memory.  There are various other tickets where a PARI build fails because of a broken gcc.  All these should be caught, not only the cases where we run out of memory.\n\n\nOf course.\n\nI wonder if we then would get PARI build errors due to GCC bugs reported any longer... ;-)",
    "created_at": "2010-12-05T17:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106537",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:
> Replying to [comment:10 leif]:
> > P.S.:
> > 
> > If we do "trial building" with some limit(s), we should also make sure that the build actually failed due to a resource limit before retrying with less optimization

> 
> The build could fail for many various reasons, including but not limited to allocating too much memory.  There are various other tickets where a PARI build fails because of a broken gcc.  All these should be caught, not only the cases where we run out of memory.


Of course.

I wonder if we then would get PARI build errors due to GCC bugs reported any longer... ;-)



---

archive/issue_comments_106538.json:
```json
{
    "body": "<a id='comment:14'></a>Got one more PARI flaw:\n\nIt installs three real copies of the shared library rather than one with two symbolic links to it.\n\nCurrently not sure if (but I believe) that's an upstream matter, or if we do that.",
    "created_at": "2010-12-06T06:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106538",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'></a>Got one more PARI flaw:

It installs three real copies of the shared library rather than one with two symbolic links to it.

Currently not sure if (but I believe) that's an upstream matter, or if we do that.



---

archive/issue_comments_106539.json:
```json
{
    "body": "<a id='comment:16'></a>Very preliminary spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg) (not yet tested properly)",
    "created_at": "2010-12-10T08:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106539",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Very preliminary spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p1.spkg) (not yet tested properly)



---

archive/issue_comments_106540.json:
```json
{
    "body": "Doctest fixes",
    "created_at": "2010-12-10T09:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106540",
    "user": "https://github.com/jdemeyer"
}
```

Doctest fixes



---

archive/issue_comments_106541.json:
```json
{
    "body": "Attachment [10430_branch_cut.patch](tarball://root/attachments/some-uuid/ticket10430/10430_branch_cut.patch) by @jdemeyer created at 2010-12-10 12:45:33\n\nspkg patch for reference",
    "created_at": "2010-12-10T12:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106541",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [10430_branch_cut.patch](tarball://root/attachments/some-uuid/ticket10430/10430_branch_cut.patch) by @jdemeyer created at 2010-12-10 12:45:33

spkg patch for reference



---

archive/issue_comments_106542.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2010-12-10T13:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106542",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_106543.json:
```json
{
    "body": "<a id='comment:17'></a>Attachment [pari-2.4.3.alpha.p1.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p1.diff) by @jdemeyer created at 2010-12-10 13:54:10",
    "created_at": "2010-12-10T13:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106543",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Attachment [pari-2.4.3.alpha.p1.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p1.diff) by @jdemeyer created at 2010-12-10 13:54:10



---

archive/issue_comments_106544.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-10T22:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106544",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_106545.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-12-10T22:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106545",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106546.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-12-11T13:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106546",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106547.json:
```json
{
    "body": "spkg patch .p0 to .p2, for reference",
    "created_at": "2010-12-11T13:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106547",
    "user": "https://github.com/jdemeyer"
}
```

spkg patch .p0 to .p2, for reference



---

archive/issue_comments_106548.json:
```json
{
    "body": "<a id='comment:22'></a>Attachment [pari-2.4.3.alpha.p2.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p2.diff) by @nexttime created at 2010-12-12 03:09:54\n\nI wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)\n\n\nI'd like to have ticket references also in `SPKG.txt` (Changelog).\n\n\nTrial building with `-O3`...`-O0` won't work if `initial_CFLAGS` already contain some (higher) optimization level (which I think isn't unlikely), since `$optflag` gets **pre**pended.\nI would start with `CFLAGS` as is, and then append `-O2` etc. in case the previous *build* failed. Also, we IMHO shouldn't retry if `configure` failed. (We could simply keep the `exit` in these cases.)\n\n\nI'm not sure if all platforms support `ulimit -v`, although Linuces (where GCC bugs showed up) certainly do. Perhaps we should test its exit status (and skip trial building if the platform does not).\n\n\n`test ... -ne ...` (etc.) is for **numerical** comparison, not for comparing strings.\n\n\nThe changes aren't yet committed.",
    "created_at": "2010-12-12T03:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106548",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>Attachment [pari-2.4.3.alpha.p2.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p2.diff) by @nexttime created at 2010-12-12 03:09:54

I wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)


I'd like to have ticket references also in `SPKG.txt` (Changelog).


Trial building with `-O3`...`-O0` won't work if `initial_CFLAGS` already contain some (higher) optimization level (which I think isn't unlikely), since `$optflag` gets **pre**pended.
I would start with `CFLAGS` as is, and then append `-O2` etc. in case the previous *build* failed. Also, we IMHO shouldn't retry if `configure` failed. (We could simply keep the `exit` in these cases.)


I'm not sure if all platforms support `ulimit -v`, although Linuces (where GCC bugs showed up) certainly do. Perhaps we should test its exit status (and skip trial building if the platform does not).


`test ... -ne ...` (etc.) is for **numerical** comparison, not for comparing strings.


The changes aren't yet committed.



---

archive/issue_comments_106549.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-12-12T03:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106549",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106550.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 leif]:\n\n```\n...\n./spkg-install: line 274: [: yes: integer expression expected\nInstalling PARI/GP...\nMaking install-lib-sta in Olinux-x86_64\nMaking install in Olinux-x86_64\nmake[1]: Entering directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nmake[1]: Entering directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/include\"/pari\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc \"/home/leif/Sage/sage-4.6.1.alpha3/local/bin\"\nrm -f \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari-gmp-2.4.so.3.0.0 \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari-gmp-2.4.so.3 \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari.so\nrm -f \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/pari.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/gp.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/gp-2.4.1\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/bin\" \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../doc/gphelp.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"\n../config/install ../doc/gphelp    \"/home/leif/Sage/sage-4.6.1.alpha3/local/bin\"\nfor i in paricfg.h mpinl.h; do \\\n\t  ../config/install -m 644 $i \"/home/leif/Sage/sage-4.6.1.alpha3/local/include\"/pari; done\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib/pari\"\nFile ../src/funclist not changed.\nrm -f libpari.a\nar r libpari.a mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o\nmv: cannot stat `../src/desc/funclist-linux-x86_64-9212.tmp': No such file or directory\nmake[1]: [../src/funclist] Error 1 (ignored)\nif test -d ../data; then cd ../data; \t   for d in `ls`; do \t     mkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/$d && \t     for f in `ls $d`; do \t       ../config/install -m 644 $d/$f \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/$d; \t     done >/dev/null;\t   done; \t fi\n../config/install -m 644 pari.cfg \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib/pari\"\n../config/install -m 644 ../examples/EXPLAIN     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install ../misc/tex2mail \"/home/leif/Sage/sage-4.6.1.alpha3/local/bin\"\nif test -n \"../src/funclist\"; then\t   mkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/PARI;\t   ../config/install -m 644 ../src/desc/PARI/822.pm \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/PARI;\t   ../config/install -m 644 ../src/desc/pari.desc \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"; fi\n../config/install -m 644 ../examples/Inputrc     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../examples/Makefile    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../examples/bench.gp    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../doc/gp.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/gp-2.4.1\nln -s gp.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/pari.1\n../config/install -m 644 ../examples/cl.gp       \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\nln -s gp-2.4.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"/gp.1\ncd ../src/desc && /usr/bin/perl merge_822 ../funclist > def-linux-x86_64-9212.tmp\n../config/install -m 644 ../examples/classno.gp  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\ncannot find ../funclist at merge_822 line 4.\nmake[1]: *** [../src/desc/pari.desc] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n../config/install -m 644 ../examples/contfrac.gp \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../doc/Makefile     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../examples/lucas.gp    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../examples/extgcd.c    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../examples/rho.gp      \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\n../config/install -m 644 ../examples/squfof.gp   \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\nar: creating libpari.a\n../config/install -m 644 ../examples/taylor.gp   \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/examples\ngcc-4.5.1  -o \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari-gmp-2.4.so.3.0.0 -shared -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer  -O3 -g -march=native -O3 -fno-strict-aliasing -fomit-frame-pointer -DHONORS_CFLAGS -march=native -O3 -DHONORS_CPPFLAGS -fPIC -Wl,-shared,-soname=libpari-gmp-2.4.so.3  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o\n polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o -lc -lm -L/home/leif/Sage/sage-4.6.1.alpha3/local/lib -lgmp \n/usr/bin/ranlib libpari.a\n../config/install -m 644 ../doc/tex2mail.1 \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1\"\n../config/install -m 644 ../misc/README    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install -m 644 ../misc/color.dft \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install -m 644 ../misc/gpalias   \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install ../misc/gpflog \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install -m 644 ../misc/gprc.dft  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install -m 644 ../misc/pari.xpm  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\n../config/install ../misc/xgp    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/misc\nmkdir -p \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"\nrm -f \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari.a\nfor i in paridecl paripriv pari paricast paricom parierr parigen pariinl parinf pariold paristio parisys paritune ; do \\\n\t   ../config/install -m 644 ../src/headers/$i.h  \"/home/leif/Sage/sage-4.6.1.alpha3/local/include\"/pari; done\n../config/install -m 644 libpari.a \"/home/leif/Sage/sage-4.6.1.alpha3/local/lib\"/libpari.a\n../config/install -m 644 ../doc/translations \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/appa.tex     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\nrm -f \"/home/leif/Sage/sage-4.6.1.alpha3/local/include\"/pari/genpari.h\nln -s pari.h \"/home/leif/Sage/sage-4.6.1.alpha3/local/include\"/pari/genpari.h\n../config/install -m 644 ../doc/appb.tex     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/appd.tex     \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/parimacro.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/pdfmacs.tex  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\nmake[1]: Leaving directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'\n../config/install -m 644 ../doc/refcard.tex  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/tutorial.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/users.tex    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/usersch1.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/usersch2.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/usersch3.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/usersch4.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/usersch5.tex \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/paricfg.tex  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\n../config/install -m 644 ../doc/libpari.dvi    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\ncp: cannot stat `../doc/libpari.dvi': No such file or directory\n../config/install -m 644 ../doc/users.dvi    \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\ncp: cannot stat `../doc/users.dvi': No such file or directory\n../config/install -m 644 ../doc/tutorial.dvi \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\ncp: cannot stat `../doc/tutorial.dvi': No such file or directory\n../config/install -m 644 ../doc/refcard.dvi  \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\ncp: cannot stat `../doc/refcard.dvi': No such file or directory\n../config/install -m 644 ../doc/refcard.ps   \"/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari\"/doc\ncp: cannot stat `../doc/refcard.ps': No such file or directory\nmake[1]: Leaving directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'\nmake: *** [install] Error 2\nError installing PARI\n```\n(The line breaks are perhaps partially \"suboptimal\"...)",
    "created_at": "2010-12-12T03:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106550",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>Replying to [comment:23 leif]:

```
...
./spkg-install: line 274: [: yes: integer expression expected
Installing PARI/GP...
Making install-lib-sta in Olinux-x86_64
Making install in Olinux-x86_64
make[1]: Entering directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'
make[1]: warning: -jN forced in submake: disabling jobserver mode.
make[1]: Entering directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'
make[1]: warning: -jN forced in submake: disabling jobserver mode.
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/include"/pari
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc "/home/leif/Sage/sage-4.6.1.alpha3/local/bin"
rm -f "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari-gmp-2.4.so.3.0.0 "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari-gmp-2.4.so.3 "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari.so
rm -f "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/pari.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/gp.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/gp-2.4.1
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/bin" "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../doc/gphelp.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"
../config/install ../doc/gphelp    "/home/leif/Sage/sage-4.6.1.alpha3/local/bin"
for i in paricfg.h mpinl.h; do \
	  ../config/install -m 644 $i "/home/leif/Sage/sage-4.6.1.alpha3/local/include"/pari; done
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/lib/pari"
File ../src/funclist not changed.
rm -f libpari.a
ar r libpari.a mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o
mv: cannot stat `../src/desc/funclist-linux-x86_64-9212.tmp': No such file or directory
make[1]: [../src/funclist] Error 1 (ignored)
if test -d ../data; then cd ../data; 	   for d in `ls`; do 	     mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/$d && 	     for f in `ls $d`; do 	       ../config/install -m 644 $d/$f "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/$d; 	     done >/dev/null;	   done; 	 fi
../config/install -m 644 pari.cfg "/home/leif/Sage/sage-4.6.1.alpha3/local/lib/pari"
../config/install -m 644 ../examples/EXPLAIN     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install ../misc/tex2mail "/home/leif/Sage/sage-4.6.1.alpha3/local/bin"
if test -n "../src/funclist"; then	   mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/PARI;	   ../config/install -m 644 ../src/desc/PARI/822.pm "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/PARI;	   ../config/install -m 644 ../src/desc/pari.desc "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"; fi
../config/install -m 644 ../examples/Inputrc     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../examples/Makefile    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../examples/bench.gp    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../doc/gp.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/gp-2.4.1
ln -s gp.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/pari.1
../config/install -m 644 ../examples/cl.gp       "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
ln -s gp-2.4.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"/gp.1
cd ../src/desc && /usr/bin/perl merge_822 ../funclist > def-linux-x86_64-9212.tmp
../config/install -m 644 ../examples/classno.gp  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
cannot find ../funclist at merge_822 line 4.
make[1]: *** [../src/desc/pari.desc] Error 2
make[1]: *** Waiting for unfinished jobs....
../config/install -m 644 ../examples/contfrac.gp "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../doc/Makefile     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../examples/lucas.gp    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../examples/extgcd.c    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../examples/rho.gp      "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
../config/install -m 644 ../examples/squfof.gp   "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
ar: creating libpari.a
../config/install -m 644 ../examples/taylor.gp   "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/examples
gcc-4.5.1  -o "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari-gmp-2.4.so.3.0.0 -shared -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer  -O3 -g -march=native -O3 -fno-strict-aliasing -fomit-frame-pointer -DHONORS_CFLAGS -march=native -O3 -DHONORS_CPPFLAGS -fPIC -Wl,-shared,-soname=libpari-gmp-2.4.so.3  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o
 polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o -lc -lm -L/home/leif/Sage/sage-4.6.1.alpha3/local/lib -lgmp 
/usr/bin/ranlib libpari.a
../config/install -m 644 ../doc/tex2mail.1 "/home/leif/Sage/sage-4.6.1.alpha3/local/share/man/man1"
../config/install -m 644 ../misc/README    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install -m 644 ../misc/color.dft "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install -m 644 ../misc/gpalias   "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install ../misc/gpflog "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install -m 644 ../misc/gprc.dft  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install -m 644 ../misc/pari.xpm  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
../config/install ../misc/xgp    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/misc
mkdir -p "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"
rm -f "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari.a
for i in paridecl paripriv pari paricast paricom parierr parigen pariinl parinf pariold paristio parisys paritune ; do \
	   ../config/install -m 644 ../src/headers/$i.h  "/home/leif/Sage/sage-4.6.1.alpha3/local/include"/pari; done
../config/install -m 644 libpari.a "/home/leif/Sage/sage-4.6.1.alpha3/local/lib"/libpari.a
../config/install -m 644 ../doc/translations "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/appa.tex     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
rm -f "/home/leif/Sage/sage-4.6.1.alpha3/local/include"/pari/genpari.h
ln -s pari.h "/home/leif/Sage/sage-4.6.1.alpha3/local/include"/pari/genpari.h
../config/install -m 644 ../doc/appb.tex     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/appd.tex     "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/parimacro.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/pdfmacs.tex  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
make[1]: Leaving directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'
../config/install -m 644 ../doc/refcard.tex  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/tutorial.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/users.tex    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/usersch1.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/usersch2.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/usersch3.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/usersch4.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/usersch5.tex "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/paricfg.tex  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
../config/install -m 644 ../doc/libpari.dvi    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
cp: cannot stat `../doc/libpari.dvi': No such file or directory
../config/install -m 644 ../doc/users.dvi    "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
cp: cannot stat `../doc/users.dvi': No such file or directory
../config/install -m 644 ../doc/tutorial.dvi "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
cp: cannot stat `../doc/tutorial.dvi': No such file or directory
../config/install -m 644 ../doc/refcard.dvi  "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
cp: cannot stat `../doc/refcard.dvi': No such file or directory
../config/install -m 644 ../doc/refcard.ps   "/home/leif/Sage/sage-4.6.1.alpha3/local/share/pari"/doc
cp: cannot stat `../doc/refcard.ps': No such file or directory
make[1]: Leaving directory `/home/leif/Sage/sage-4.6.1.alpha3/spkg/build/pari-2.4.3.alpha.p2/src/Olinux-x86_64'
make: *** [install] Error 2
Error installing PARI
```
(The line breaks are perhaps partially "suboptimal"...)



---

archive/issue_comments_106551.json:
```json
{
    "body": "<a id='comment:25'></a>Suggested changes:\n\n```diff\ndiff -r d58606ef346e spkg-install\n--- a/spkg-install\tSun Dec 12 06:20:42 2010 +0100\n+++ b/spkg-install\tSun Dec 12 06:51:15 2010 +0100\n@@ -174,12 +174,12 @@\n \n     if [ $? -ne 0 ]; then\n         echo >&2 \"Error: Configuring PARI with readline and GMP kernel failed.\"\n-        return 1\n+        exit 1\n     fi\n \n     if [ ! -f Makefile ]; then\n         echo >&2 \"Error: Unable to configure PARI: No Makefile generated!\"\n-        return 1\n+        exit 1\n     fi\n \n     if [ \"$UNAME\" = \"CYGWIN\" ]; then\n@@ -198,7 +198,8 @@\n {\n     echo \"Installing PARI/GP...\"\n \n-    $MAKE install install-lib-sta\n+    # Parallel install is broken:\n+    $MAKE -j1 install install-lib-sta\n     if [ $? -ne 0 ]; then\n         echo >&2 \"Error installing PARI\"\n         exit 1\n@@ -258,20 +259,30 @@\n else\n     # First try -O3, then -O2 and so on until the build works.\n     # This is mainly meant to work around compiler bugs.\n-    initial_CFLAGS=\"-g $CFLAGS\"\n-    for optflag in -O3 -O2 -O1 -O0; do\n-        CFLAGS=\"$optflag $initial_CFLAGS\"\n-        echo \"===========================================\"\n-        echo \"Building PARI/GP with optimization flag $optflag\"\n-        echo \"===========================================\"\n-        if build; then\n-            build_success=yes\n-            break\n-        fi\n-    done\n+    CFLAGS=\"-O3 -g $CFLAGS\"\n+    echo \"===========================================\"\n+    echo \"Building PARI/GP with default optimization\"\n+    echo \"(-O3 or user-specified optimization level)\"\n+    echo \"===========================================\"\n+    if ! build; then\n+        echo >&2 \"Warning: Initial build of PARI/GP failed - retrying with\" \\\n+            \"less optimization...\" \n+        for optflag in -O2 -O1 -O0; do\n+            CFLAGS=\"$CFLAGS $optflag\"\n+            echo \"===========================================\"\n+            echo \"Building PARI/GP with optimization flag $optflag\"\n+            echo \"===========================================\"\n+            if build; then\n+                build_success=yes\n+                break\n+            fi\n+        done\n+    else\n+        build_success=yes\n+    fi\n fi\n \n-if [ $build_success -ne yes ]; then\n+if [ $build_success != yes ]; then\n     echo >&2 \"Error building PARI/GP\"\n     exit 1\n fi\n@@ -280,9 +291,9 @@\n install\n \n \n-# All (previous) errors are catched in build(), so we don't test $? here.\n-# Although we perhaps should also check success of the numerous copy commands\n-# inside build().\n+# All (previous) errors are catched in build() and install(), so we don't test\n+# $? here. Although we perhaps should also check success of the numerous copy\n+# commands inside install().\n \n if [ \"$UNAME\" = \"Darwin\" ]; then\n     pari_shlib=\"libpari.dylib\"\n```\n\nOf course we could handle modified `CFLAGS` differently, such that we don't eventually end up with `-O3 -g ... -O2 -O1 -O0`, but that's IMHO a minor, cosmetic issue.",
    "created_at": "2010-12-12T06:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106551",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'></a>Suggested changes:

```diff
diff -r d58606ef346e spkg-install
--- a/spkg-install	Sun Dec 12 06:20:42 2010 +0100
+++ b/spkg-install	Sun Dec 12 06:51:15 2010 +0100
@@ -174,12 +174,12 @@
 
     if [ $? -ne 0 ]; then
         echo >&2 "Error: Configuring PARI with readline and GMP kernel failed."
-        return 1
+        exit 1
     fi
 
     if [ ! -f Makefile ]; then
         echo >&2 "Error: Unable to configure PARI: No Makefile generated!"
-        return 1
+        exit 1
     fi
 
     if [ "$UNAME" = "CYGWIN" ]; then
@@ -198,7 +198,8 @@
 {
     echo "Installing PARI/GP..."
 
-    $MAKE install install-lib-sta
+    # Parallel install is broken:
+    $MAKE -j1 install install-lib-sta
     if [ $? -ne 0 ]; then
         echo >&2 "Error installing PARI"
         exit 1
@@ -258,20 +259,30 @@
 else
     # First try -O3, then -O2 and so on until the build works.
     # This is mainly meant to work around compiler bugs.
-    initial_CFLAGS="-g $CFLAGS"
-    for optflag in -O3 -O2 -O1 -O0; do
-        CFLAGS="$optflag $initial_CFLAGS"
-        echo "==========================================="
-        echo "Building PARI/GP with optimization flag $optflag"
-        echo "==========================================="
-        if build; then
-            build_success=yes
-            break
-        fi
-    done
+    CFLAGS="-O3 -g $CFLAGS"
+    echo "==========================================="
+    echo "Building PARI/GP with default optimization"
+    echo "(-O3 or user-specified optimization level)"
+    echo "==========================================="
+    if ! build; then
+        echo >&2 "Warning: Initial build of PARI/GP failed - retrying with" \
+            "less optimization..." 
+        for optflag in -O2 -O1 -O0; do
+            CFLAGS="$CFLAGS $optflag"
+            echo "==========================================="
+            echo "Building PARI/GP with optimization flag $optflag"
+            echo "==========================================="
+            if build; then
+                build_success=yes
+                break
+            fi
+        done
+    else
+        build_success=yes
+    fi
 fi
 
-if [ $build_success -ne yes ]; then
+if [ $build_success != yes ]; then
     echo >&2 "Error building PARI/GP"
     exit 1
 fi
@@ -280,9 +291,9 @@
 install
 
 
-# All (previous) errors are catched in build(), so we don't test $? here.
-# Although we perhaps should also check success of the numerous copy commands
-# inside build().
+# All (previous) errors are catched in build() and install(), so we don't test
+# $? here. Although we perhaps should also check success of the numerous copy
+# commands inside install().
 
 if [ "$UNAME" = "Darwin" ]; then
     pari_shlib="libpari.dylib"
```

Of course we could handle modified `CFLAGS` differently, such that we don't eventually end up with `-O3 -g ... -O2 -O1 -O0`, but that's IMHO a minor, cosmetic issue.



---

archive/issue_comments_106552.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:14 leif]:\n> Got one more PARI flaw:\n> \n> It installs three real copies of the shared library rather than one with two symbolic links to it.\n> \n> Currently not sure if (but I believe) that's an upstream matter, or if we do that.\n\n\nUpstream does fine (if we use `make install`).",
    "created_at": "2010-12-12T06:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106552",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>Replying to [comment:14 leif]:
> Got one more PARI flaw:
> 
> It installs three real copies of the shared library rather than one with two symbolic links to it.
> 
> Currently not sure if (but I believe) that's an upstream matter, or if we do that.


Upstream does fine (if we use `make install`).



---

archive/issue_comments_106553.json:
```json
{
    "body": "<a id='comment:27'></a>I essentially agree with your comments, *except* for not retrying when `Configure` fails.  It could very well be that some `gcc` bug causes `Configure` to fail and we should also catch that.\n\nYou're probably right that `ulimit -v` doesn't work everywhere (on OS X 10.4, the command succeeds but doesn't actually limit anything), but I don't think that's an issue.  If it doesn't work, so be it...",
    "created_at": "2010-12-12T09:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106553",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>I essentially agree with your comments, *except* for not retrying when `Configure` fails.  It could very well be that some `gcc` bug causes `Configure` to fail and we should also catch that.

You're probably right that `ulimit -v` doesn't work everywhere (on OS X 10.4, the command succeeds but doesn't actually limit anything), but I don't think that's an issue.  If it doesn't work, so be it...



---

archive/issue_comments_106554.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:\n> I essentially agree with your comments, *except* for not retrying when `Configure` fails.  It could very well be that some `gcc` bug causes `Configure` to fail and we should also catch that.\n\n\nHow / when would changing the `-O` level solve `Configure` errors? I can't imagine such, at least not with `gcc`...\n\n> You're probably right that `ulimit -v` doesn't work everywhere (on OS X 10.4, the command succeeds but doesn't actually limit anything), but I don't think that's an issue.  If it doesn't work, so be it...\n\n\n:-) Never mind, though we could also set some CPU time limit.\n\n---\n\nShould we report the broken parallel `make install` upstream?\n\nI must admit I haven't looked close at it; it failed with 8 jobs in the first place.",
    "created_at": "2010-12-12T10:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106554",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:28'></a>Replying to [comment:27 jdemeyer]:
> I essentially agree with your comments, *except* for not retrying when `Configure` fails.  It could very well be that some `gcc` bug causes `Configure` to fail and we should also catch that.


How / when would changing the `-O` level solve `Configure` errors? I can't imagine such, at least not with `gcc`...

> You're probably right that `ulimit -v` doesn't work everywhere (on OS X 10.4, the command succeeds but doesn't actually limit anything), but I don't think that's an issue.  If it doesn't work, so be it...


:-) Never mind, though we could also set some CPU time limit.

---

Should we report the broken parallel `make install` upstream?

I must admit I haven't looked close at it; it failed with 8 jobs in the first place.



---

archive/issue_comments_106555.json:
```json
{
    "body": "<a id='comment:29'></a>P.S.: We could also do `make -k ...` to compile as much as possible with higher optimization.",
    "created_at": "2010-12-12T10:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106555",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>P.S.: We could also do `make -k ...` to compile as much as possible with higher optimization.



---

archive/issue_comments_106556.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:22 leif]:\n> I wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)\n\n\nTrue, but it also prevents `tex` from hanging (you know the major misfeature of `tex` when it prompts the user for input).  We could probably solve this by redirecting the standard input from `/dev/null`, but I think not building the documentation is a cleaner solution.",
    "created_at": "2010-12-12T10:23:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106556",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>Replying to [comment:22 leif]:
> I wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)


True, but it also prevents `tex` from hanging (you know the major misfeature of `tex` when it prompts the user for input).  We could probably solve this by redirecting the standard input from `/dev/null`, but I think not building the documentation is a cleaner solution.



---

archive/issue_comments_106557.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:29 leif]:\n> P.S.: We could also do `make -k ...` to compile as much as possible with higher optimization.\n\n\nAgreed.",
    "created_at": "2010-12-12T10:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106557",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Replying to [comment:29 leif]:
> P.S.: We could also do `make -k ...` to compile as much as possible with higher optimization.


Agreed.



---

archive/issue_comments_106558.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 jdemeyer]:\n> Replying to [comment:22 leif]:\n> > I wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)\n\n> \n> True, but it also prevents `tex` from hanging (you know the major misfeature of `tex` when it prompts the user for input).  We could probably solve this by redirecting the standard input from `/dev/null`, but I think not building the documentation is a cleaner solution.\n\n\nIt won't prompt you if it isn't installed... ;-) Other issues?\n\nIn general, I think if [La]TeX is installed, we should use it, at least unless there's also some equivalent HMTL documentation or alike.\n\nOr ship pre-built PDFs...",
    "created_at": "2010-12-12T10:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106558",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:32'></a>Replying to [comment:30 jdemeyer]:
> Replying to [comment:22 leif]:
> > I wonder if we really need the `make install-doc*` patch (TeX usage) since apparently all errors are ignored... ;-)

> 
> True, but it also prevents `tex` from hanging (you know the major misfeature of `tex` when it prompts the user for input).  We could probably solve this by redirecting the standard input from `/dev/null`, but I think not building the documentation is a cleaner solution.


It won't prompt you if it isn't installed... ;-) Other issues?

In general, I think if [La]TeX is installed, we should use it, at least unless there's also some equivalent HMTL documentation or alike.

Or ship pre-built PDFs...



---

archive/issue_comments_106559.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:32 leif]:\n> Or ship pre-built PDFs...\n\nThis is probably the easiest solution.",
    "created_at": "2010-12-12T11:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106559",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>Replying to [comment:32 leif]:
> Or ship pre-built PDFs...

This is probably the easiest solution.



---

archive/issue_comments_106560.json:
```json
{
    "body": "<a id='comment:34'></a>New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg).  `make install` issue not yet fixed (I will investigate and if necessary, report upstream).\n\nAbout the documentation: if we ship PDF documentation for PARI, are users going to find it?",
    "created_at": "2010-12-12T11:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106560",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg).  `make install` issue not yet fixed (I will investigate and if necessary, report upstream).

About the documentation: if we ship PDF documentation for PARI, are users going to find it?



---

archive/issue_comments_106561.json:
```json
{
    "body": "<a id='comment:35'></a>I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)\n\nI'd set the limits for the specific tasks only anyway, but you could increase the [time] limit in case we do tune. (`spkg-check` is of course not affected.)\n\n\nCannot test it until you also do `$MAKE -j1 install ...` or fix the race condition... ;-)",
    "created_at": "2010-12-12T16:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106561",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:35'></a>I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)

I'd set the limits for the specific tasks only anyway, but you could increase the [time] limit in case we do tune. (`spkg-check` is of course not affected.)


Cannot test it until you also do `$MAKE -j1 install ...` or fix the race condition... ;-)



---

archive/issue_comments_106562.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 leif]:\n> I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)\n\n\nPARI's `tune` definitely takes longer, even on fast(er) machines.\n\n\n\n> I'd set the limits for the specific tasks only anyway, but you could increase the [time] limit in case we do tune. (`spkg-check` is of course not affected.)",
    "created_at": "2010-12-12T17:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106562",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:36'></a>Replying to [comment:35 leif]:
> I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)


PARI's `tune` definitely takes longer, even on fast(er) machines.



> I'd set the limits for the specific tasks only anyway, but you could increase the [time] limit in case we do tune. (`spkg-check` is of course not affected.)



---

archive/issue_comments_106563.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:35 leif]:\n> I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)\n\nHow about disabling the limits when tuning?  I think we may assume that the people who tune PARI know what they are doing.",
    "created_at": "2010-12-12T22:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106563",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>Replying to [comment:35 leif]:
> I doubt 5 minutes CPU time is enough for slow machines, at least with `--tune`. (Not sure at the moment how many processes are involved in that.)

How about disabling the limits when tuning?  I think we may assume that the people who tune PARI know what they are doing.



---

archive/issue_comments_106564.json:
```json
{
    "body": "<a id='comment:38'></a>Race condition in `make install` reported upstream (with patch): [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1148](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1148)",
    "created_at": "2010-12-13T10:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106564",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>Race condition in `make install` reported upstream (with patch): [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1148](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1148)



---

archive/issue_comments_106565.json:
```json
{
    "body": "Attachment [pari-2.4.3.alpha.p2-p3.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p2-p3.diff) by @jdemeyer created at 2010-12-13 10:24:59\n\nspkg patch .p2 to .p3, for reference",
    "created_at": "2010-12-13T10:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106565",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [pari-2.4.3.alpha.p2-p3.diff](tarball://root/attachments/some-uuid/ticket10430/pari-2.4.3.alpha.p2-p3.diff) by @jdemeyer created at 2010-12-13 10:24:59

spkg patch .p2 to .p3, for reference



---

archive/issue_comments_106566.json:
```json
{
    "body": "<a id='comment:39'></a>New spkg, same location: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg)",
    "created_at": "2010-12-13T10:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106566",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>New spkg, same location: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.alpha.p3.spkg)



---

archive/issue_comments_106567.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-12-13T10:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106567",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106568.json:
```json
{
    "body": "<a id='comment:40'></a>Well this is a spectacular bandaid to work around compiler breakage :-) \n\n* Having hard-coded memory and time limits will just create problems down the road as pari is bound to get bigger, gcc is going to use more ram, and people try this on a wider (slower) range of hardware. \n* We apparently know that optimization of Pari is not working correctly on gcc 4.4.1 yet we still build it with optimization and hope for the best? What could possibly go wrong?\n\nHow about we disable optimization (or set a known-good value, maybe `-O1`) if the compiler is gcc-4.4.1. Unless you set `SAGE_PARI_tune=yes`, in which case we'll still build it with all optimizations turned on.  That way we are on the safe side and the workaround will  become unnecessary over time as people upgrade to newer gcc releases. \nAnd if you know what you are doing you can easily override it.",
    "created_at": "2010-12-24T18:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106568",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>Well this is a spectacular bandaid to work around compiler breakage :-) 

* Having hard-coded memory and time limits will just create problems down the road as pari is bound to get bigger, gcc is going to use more ram, and people try this on a wider (slower) range of hardware. 
* We apparently know that optimization of Pari is not working correctly on gcc 4.4.1 yet we still build it with optimization and hope for the best? What could possibly go wrong?

How about we disable optimization (or set a known-good value, maybe `-O1`) if the compiler is gcc-4.4.1. Unless you set `SAGE_PARI_tune=yes`, in which case we'll still build it with all optimizations turned on.  That way we are on the safe side and the workaround will  become unnecessary over time as people upgrade to newer gcc releases. 
And if you know what you are doing you can easily override it.



---

archive/issue_comments_106569.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:40 vbraun]:\n> Well this is a spectacular bandaid to work around compiler breakage :-) \n> \n> * Having hard-coded memory and time limits will just create problems down the road as pari is bound to get bigger, gcc is going to use more ram, and people try this on a wider (slower) range of hardware.\n\n\nWell, the chosen limits are very conservative, so I doubt we will run into this problem any time soon.\n\n>   * We apparently know that optimization of Pari is not working correctly on gcc 4.4.1 yet we still build it with optimization and hope for the best? What could possibly go wrong?\n \nThere isn't just one single broken version, we want to catch *all* broken gcc's.  See #9897 for example.",
    "created_at": "2010-12-24T19:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106569",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>Replying to [comment:40 vbraun]:
> Well this is a spectacular bandaid to work around compiler breakage :-) 
> 
> * Having hard-coded memory and time limits will just create problems down the road as pari is bound to get bigger, gcc is going to use more ram, and people try this on a wider (slower) range of hardware.


Well, the chosen limits are very conservative, so I doubt we will run into this problem any time soon.

>   * We apparently know that optimization of Pari is not working correctly on gcc 4.4.1 yet we still build it with optimization and hope for the best? What could possibly go wrong?
 
There isn't just one single broken version, we want to catch *all* broken gcc's.  See #9897 for example.



---

archive/issue_comments_106570.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:40 vbraun]:\n> Well this is a spectacular bandaid to work around compiler breakage :-)\n\n\nI totally agree with this by the way, but in my opinion there are two things we can do:\n1. Use -O3 always and leave the user with a non-compiling Sage (\"it's not our fault, it's gcc's fault\")\n2. Do the optimization-fallback as in this spkg.\n\nI believe making a blacklist of versions known to fail is not a good solution because there will always be systems with a broken gcc that we don't know of.",
    "created_at": "2010-12-24T19:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106570",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>Replying to [comment:40 vbraun]:
> Well this is a spectacular bandaid to work around compiler breakage :-)


I totally agree with this by the way, but in my opinion there are two things we can do:
1. Use -O3 always and leave the user with a non-compiling Sage ("it's not our fault, it's gcc's fault")
2. Do the optimization-fallback as in this spkg.

I believe making a blacklist of versions known to fail is not a good solution because there will always be systems with a broken gcc that we don't know of.



---

archive/issue_comments_106571.json:
```json
{
    "body": "<a id='comment:43'></a>> I totally agree with this by the way, but in my opinion there are two things we can do:\n> 1. Use -O3 always and leave the user with a non-compiling Sage (\"it's not our fault, it's gcc's fault\")\n> 2. Do the optimization-fallback as in this spkg.\n\n\n3. Show the error and then tell the user how to report the issue and continue the build without optimization. I think all thats needed is \n\n```\nCFLAGS=-O0 ./sage -f spkg/standard/pari*\nmake\n```\nto build pari with no optimization and then build the rest?\n\n> I believe making a blacklist of versions known to fail is not a good solution because there will always be systems with a broken gcc that we don't know of.\n\n\nBut if we silently try some workarounds then we will never find out about broken compilers either. The user should file a trac ticket to document the issue so it can be fixed in Sage and reported upstream.",
    "created_at": "2010-12-24T20:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106571",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>> I totally agree with this by the way, but in my opinion there are two things we can do:
> 1. Use -O3 always and leave the user with a non-compiling Sage ("it's not our fault, it's gcc's fault")
> 2. Do the optimization-fallback as in this spkg.


3. Show the error and then tell the user how to report the issue and continue the build without optimization. I think all thats needed is 

```
CFLAGS=-O0 ./sage -f spkg/standard/pari*
make
```
to build pari with no optimization and then build the rest?

> I believe making a blacklist of versions known to fail is not a good solution because there will always be systems with a broken gcc that we don't know of.


But if we silently try some workarounds then we will never find out about broken compilers either. The user should file a trac ticket to document the issue so it can be fixed in Sage and reported upstream.



---

archive/issue_comments_106572.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:43 vbraun]:\n> But if we silently try some workarounds then we will never find out about broken compilers either. The user should file a trac ticket to document the issue so it can be fixed in Sage and reported upstream. \n\n\nI would prefer that users post the bug **directly** upstream (or not, gcc ignores most bug reports anyway).  I certainly don't want to waste too much energy in making gcc bug reports for every user who can't compile Sage due to a gcc bug.",
    "created_at": "2010-12-24T20:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>Replying to [comment:43 vbraun]:
> But if we silently try some workarounds then we will never find out about broken compilers either. The user should file a trac ticket to document the issue so it can be fixed in Sage and reported upstream. 


I would prefer that users post the bug **directly** upstream (or not, gcc ignores most bug reports anyway).  I certainly don't want to waste too much energy in making gcc bug reports for every user who can't compile Sage due to a gcc bug.



---

archive/issue_comments_106573.json:
```json
{
    "body": "<a id='comment:45'></a>Well nothing is going to be reported if we just silently compile away without optimization. I feel your pain wrt. to gcc bugs but if they don't get reported then they can't get fixed. \n\nSo far I've only seen\n1. general brokenness of `-O3` on itanium (dying arch...), we should just default to `-O2` there.\n2. gcc-4.4.1 needs `-O1`",
    "created_at": "2010-12-24T20:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106573",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>Well nothing is going to be reported if we just silently compile away without optimization. I feel your pain wrt. to gcc bugs but if they don't get reported then they can't get fixed. 

So far I've only seen
1. general brokenness of `-O3` on itanium (dying arch...), we should just default to `-O2` there.
2. gcc-4.4.1 needs `-O1`



---

archive/issue_comments_106574.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 vbraun]:\n> Well nothing is going to be reported if we just silently compile away without optimization. I feel your pain wrt. to gcc bugs but if they don't get reported then they can't get fixed.\n\n\nMaybe we should suggest to gcc to add PARI as a test suite (I'm mostly joking here).  For some reason it has a fenomenal ability to expose gcc bugs.",
    "created_at": "2010-12-24T20:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106574",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>Replying to [comment:45 vbraun]:
> Well nothing is going to be reported if we just silently compile away without optimization. I feel your pain wrt. to gcc bugs but if they don't get reported then they can't get fixed.


Maybe we should suggest to gcc to add PARI as a test suite (I'm mostly joking here).  For some reason it has a fenomenal ability to expose gcc bugs.



---

archive/issue_comments_106575.json:
```json
{
    "body": "<a id='comment:47'></a>One would need to ascertain if this is a gcc bug or a Pari bug. Badly written code will cause more aggressive optimisations to fail. It does not necessary mean it is a compiler bug.",
    "created_at": "2010-12-26T11:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106575",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:47'></a>One would need to ascertain if this is a gcc bug or a Pari bug. Badly written code will cause more aggressive optimisations to fail. It does not necessary mean it is a compiler bug.



---

archive/issue_comments_106576.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-12-26T12:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106576",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106577.json:
```json
{
    "body": "<a id='comment:48'></a>True, but thats the case here:\n\n1. brokenness of -O3 on itanium is discussed on the gcc bug ticket and definitely a compiler bug.\n2. gcc-4.4.1 with >= `-O2` just starts using all available memory until it dies.\n\nMy suggestion would be to just catch those two cases. And add a useful error message to the spkg in case pari fails to compile, explaining how to report this and how to work around it by compiling the pari spkg with different CFLAGS.",
    "created_at": "2010-12-26T12:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106577",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:48'></a>True, but thats the case here:

1. brokenness of -O3 on itanium is discussed on the gcc bug ticket and definitely a compiler bug.
2. gcc-4.4.1 with >= `-O2` just starts using all available memory until it dies.

My suggestion would be to just catch those two cases. And add a useful error message to the spkg in case pari fails to compile, explaining how to report this and how to work around it by compiling the pari spkg with different CFLAGS.



---

archive/issue_comments_106578.json:
```json
{
    "body": "<a id='comment:49'></a>Replying to [comment:47 drkirkby]:\n> One would need to ascertain if this is a gcc bug or a Pari bug. Badly written code will cause more aggressive optimisations to fail. It does not necessary mean it is a compiler bug. \n\n\nBadly written code should never cause the compiler to crash or to use infinite memory.  These things are certainly compiler bugs.",
    "created_at": "2010-12-27T11:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106578",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>Replying to [comment:47 drkirkby]:
> One would need to ascertain if this is a gcc bug or a Pari bug. Badly written code will cause more aggressive optimisations to fail. It does not necessary mean it is a compiler bug. 


Badly written code should never cause the compiler to crash or to use infinite memory.  These things are certainly compiler bugs.



---

archive/issue_comments_106579.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-12T00:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106579",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106580.json:
```json
{
    "body": "<a id='comment:52'></a>I removed all the trial building code from the spkg in light of #10572.  Also added patches for #10559.  New spkg needs review.",
    "created_at": "2011-01-12T00:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106580",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>I removed all the trial building code from the spkg in light of #10572.  Also added patches for #10559.  New spkg needs review.



---

archive/issue_comments_106581.json:
```json
{
    "body": "<a id='comment:53'></a>I'm happy with the current version, so I'll give this ticket a positive review. If any compiler bugs are still preventing pari from being built on some hardware then this should be reported to the gcc wrapper.",
    "created_at": "2011-01-12T01:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106581",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:53'></a>I'm happy with the current version, so I'll give this ticket a positive review. If any compiler bugs are still preventing pari from being built on some hardware then this should be reported to the gcc wrapper.



---

archive/issue_comments_106582.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-12T01:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106582",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_026719.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T22:23:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10430#event-26719"
}
```



---

archive/issue_comments_106583.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-19T22:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106583",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_106584.json:
```json
{
    "body": "<a id='comment:55'></a>Testing on the buildbot seems to indicate there might still be some race conditions in parallel `make install`.  So maybe we should avoid doing that.",
    "created_at": "2011-01-20T09:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106584",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>Testing on the buildbot seems to indicate there might still be some race conditions in parallel `make install`.  So maybe we should avoid doing that.



---

archive/issue_comments_106585.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-01-20T09:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106585",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_026720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-20T09:08:49Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10430#event-26720"
}
```



---

archive/issue_comments_106586.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-01-20T09:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106586",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_106587.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-23T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106587",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_106588.json:
```json
{
    "body": "<a id='comment:56'></a>Fixed race conditions in `make install` by using `-j1`.",
    "created_at": "2011-01-23T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106588",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>Fixed race conditions in `make install` by using `-j1`.



---

archive/issue_comments_106589.json:
```json
{
    "body": "<a id='comment:57'></a>That'll get rid of potential races in installation. Perhaps we should disable parallel make for all spkgs that don't use a proven build system like autotools or SCons. Chances are that any hand-rolled makefile has concurrency issues... \n\nI'll take it that you are going to commit the changes to the included repository before adding the spkg to the next Sage release, because right now they are not.",
    "created_at": "2011-01-23T19:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106589",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:57'></a>That'll get rid of potential races in installation. Perhaps we should disable parallel make for all spkgs that don't use a proven build system like autotools or SCons. Chances are that any hand-rolled makefile has concurrency issues... 

I'll take it that you are going to commit the changes to the included repository before adding the spkg to the next Sage release, because right now they are not.



---

archive/issue_comments_106590.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-23T19:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106590",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_106591.json:
```json
{
    "body": "<a id='comment:58'></a>Replying to [comment:57 vbraun]:\n> I'll take it that you are going to commit the changes to the included repository before adding the spkg to the next Sage release, because right now they are not.\n\n\nYes, done.",
    "created_at": "2011-01-23T19:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106591",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>Replying to [comment:57 vbraun]:
> I'll take it that you are going to commit the changes to the included repository before adding the spkg to the next Sage release, because right now they are not.


Yes, done.



---

archive/issue_events_026721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-25T08:15:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10430#event-26721"
}
```



---

archive/issue_comments_106592.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-25T08:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10430#issuecomment-106592",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
