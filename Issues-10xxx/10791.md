# Issue 10791: Fix and upgrade Gram-Schmidt

archive/issues_010726.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/williamstein"
    ],
    "body": "If a set of vectors has a linearly dependent subset, followed by a vector outside the span of that subset, then the presence of a zero vector in the orthogonal set causes division by a zero dot product.\n\nThere are various other improvements that can be made in this routine.\n\n```\nsage: A=matrix(QQ, [[1,2],[2,4],[1,1]])\nsage: A.gram_schmidt()\n---------------------------------------------------------------------------\nZeroDivisionError                         Traceback (most recent call last)\n\n/sage/sage-4.6.2.alpha4/<ipython console> in <module>()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.gram_schmidt (sage/matrix/matrix2.c:31979)()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/modules/misc.pyc in gram_schmidt(B)\n     55     for i in range(1,n):\n     56         for j in range(i):\n---> 57             mu[i,j] = B[i].dot_product(Bstar[j]) / (Bstar[j].dot_product(Bstar[j]))\n     58         Bstar.append(B[i] - sum(mu[i,j]*Bstar[j] for j in range(i)))\n     59     return Bstar, mu\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11981)()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._div_ (sage/rings/rational.c:15177)()\n\nZeroDivisionError: Rational division by zero\n```\n\nPatch summary:\n\n* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.\n\n* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.\n\n* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.\n\n* The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n\n**Apply:**\n1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)\n\n**Depends on:**\n1. #10536\n2. #10683\n3. #10794\n\n\nKeywords: **sd32**\n\nComponent: **linear algebra**\n\nAuthor: **Rob Beezer**\n\nReviewer: **Martin Raum, John Palmieri**\n\nMerged: **sage-4.8.alpha5**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10791_\n\n",
    "closed_at": "2011-12-17T09:12:05Z",
    "created_at": "2011-02-16T17:48:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix and upgrade Gram-Schmidt",
    "type": "issue",
    "updated_at": "2011-12-17T09:12:05Z",
    "url": "https://github.com/sagemath/sage/issues/10791",
    "user": "https://github.com/rbeezer"
}
```
If a set of vectors has a linearly dependent subset, followed by a vector outside the span of that subset, then the presence of a zero vector in the orthogonal set causes division by a zero dot product.

There are various other improvements that can be made in this routine.

```
sage: A=matrix(QQ, [[1,2],[2,4],[1,1]])
sage: A.gram_schmidt()
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)

/sage/sage-4.6.2.alpha4/<ipython console> in <module>()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.gram_schmidt (sage/matrix/matrix2.c:31979)()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/modules/misc.pyc in gram_schmidt(B)
     55     for i in range(1,n):
     56         for j in range(i):
---> 57             mu[i,j] = B[i].dot_product(Bstar[j]) / (Bstar[j].dot_product(Bstar[j]))
     58         Bstar.append(B[i] - sum(mu[i,j]*Bstar[j] for j in range(i)))
     59     return Bstar, mu

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11981)()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._div_ (sage/rings/rational.c:15177)()

ZeroDivisionError: Rational division by zero
```

Patch summary:

* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.

* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.

* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.

* The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.

**Apply:**
1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)

**Depends on:**
1. #10536
2. #10683
3. #10794


Keywords: **sd32**

Component: **linear algebra**

Author: **Rob Beezer**

Reviewer: **Martin Raum, John Palmieri**

Merged: **sage-4.8.alpha5**

_Issue created by migration from https://trac.sagemath.org/ticket/10791_





---

archive/issue_events_142647.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142647"
}
```



---

archive/issue_events_142648.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142648"
}
```



---

archive/issue_events_142649.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142649"
}
```



---

archive/issue_events_142650.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142650"
}
```



---

archive/issue_events_142651.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "subject": "https://github.com/rbeezer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142651"
}
```



---

archive/issue_events_142652.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "subject": "https://github.com/rbeezer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142652"
}
```



---

archive/issue_comments_103970.json:
```json
{
    "body": "Author: **Rob Beezer**",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103970",
    "user": "https://github.com/rbeezer"
}
```

Author: **Rob Beezer**



---

archive/issue_events_142653.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-27T01:38:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142653"
}
```



---

archive/issue_comments_103971.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,15 @@\n \n ZeroDivisionError: Rational division by zero\n ```\n+\n+Patch summary:\n+\n+* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.\n+\n+* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.\n+\n+* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.\n+\n+* The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n+\n+Depends #10536, #10683, #10794\n``````\n",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103971",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,15 @@
 
 ZeroDivisionError: Rational division by zero
 ```
+
+Patch summary:
+
+* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.
+
+* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.
+
+* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.
+
+* The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
+
+Depends #10536, #10683, #10794
``````




---

archive/issue_comments_103972.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_10791-fix-gram-schmidt.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt.patch.gz)**",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103972",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_10791-fix-gram-schmidt.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt.patch.gz)**



---

archive/issue_comments_103973.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,4 +36,4 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n-Depends #10536, #10683, #10794\n+Depends on #10536, #10683, #10794\n``````\n",
    "created_at": "2011-03-23T22:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103973",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,4 +36,4 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
-Depends #10536, #10683, #10794
+Depends on #10536, #10683, #10794
``````




---

archive/issue_comments_103974.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nfix patchbot comment",
    "created_at": "2011-03-23T22:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103974",
    "user": "https://github.com/kini"
}
```

<div id="comment:2" align="right">comment:2</div>

fix patchbot comment



---

archive/issue_comments_103975.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIn line 6364: properly contains\nIn line 6444: For the integers and the rationals the field \n\nThere is only one thing you didn't catch. If you fix that I can give this a positive review (please provide a patch that depends on the current one, to make my life easier) :\n\nFile \"/scratch/mraum/sagedev/devel/sage-dev/sage/modules/misc.py\", line 66:\n    sage: gram_schmidt(V)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/mraum/sagedev/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/mraum/sagedev/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/mraum/sagedev/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[16]>\", line 1, in <module>\n        gram_schmidt(V)###line 66:\n    sage: gram_schmidt(V)\n      File \"/scratch/mraum/sagedev/local/lib/python/site-packages/sage/modules/misc.py\", line 83, in gram_schmidt\n        raise ValueError(\"linearly dependent input for module version of Gram-Schmidt\")\n    ValueError: linearly dependent input for module version of Gram-Schmidt",
    "created_at": "2011-03-26T01:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103975",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:3" align="right">comment:3</div>

In line 6364: properly contains
In line 6444: For the integers and the rationals the field 

There is only one thing you didn't catch. If you fix that I can give this a positive review (please provide a patch that depends on the current one, to make my life easier) :

File "/scratch/mraum/sagedev/devel/sage-dev/sage/modules/misc.py", line 66:
    sage: gram_schmidt(V)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/mraum/sagedev/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/mraum/sagedev/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/mraum/sagedev/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[16]>", line 1, in <module>
        gram_schmidt(V)###line 66:
    sage: gram_schmidt(V)
      File "/scratch/mraum/sagedev/local/lib/python/site-packages/sage/modules/misc.py", line 83, in gram_schmidt
        raise ValueError("linearly dependent input for module version of Gram-Schmidt")
    ValueError: linearly dependent input for module version of Gram-Schmidt



---

archive/issue_comments_103976.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-03-26T01:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103976",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_events_142654.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-26T01:19:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142654"
}
```



---

archive/issue_events_142655.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-26T01:19:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142655"
}
```



---

archive/issue_events_142656.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-27T05:34:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142656"
}
```



---

archive/issue_events_142657.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-27T05:34:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142657"
}
```



---

archive/issue_comments_103977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,4 +36,6 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n+Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch\n+\n Depends on #10536, #10683, #10794\n``````\n",
    "created_at": "2011-03-27T05:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103977",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,4 +36,6 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
+Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch
+
 Depends on #10536, #10683, #10794
``````




---

archive/issue_comments_103978.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[trac_10791-gram-schmidt-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests.patch.gz)**\n\nMartin - thanks for the careful review and for catching these three items.\n\n\"doctests\" patch implements changes to fix all three.\n\nRob",
    "created_at": "2011-03-27T05:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103978",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[trac_10791-gram-schmidt-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests.patch.gz)**

Martin - thanks for the careful review and for catching these three items.

"doctests" patch implements changes to fix all three.

Rob



---

archive/issue_comments_103979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,6 +36,12 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n-Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch\n+**Apply:**\n+1. trac_10791-fix-gram-schmidt.patch\n+2. trac_10791-gram-schmidt-doctests.patch\n \n-Depends on #10536, #10683, #10794\n+**Depends on:**\n+1. #10536\n+2. #10683\n+3. #10794\n+\n``````\n",
    "created_at": "2011-03-30T19:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103979",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,6 +36,12 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
-Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch
+**Apply:**
+1. trac_10791-fix-gram-schmidt.patch
+2. trac_10791-gram-schmidt-doctests.patch
 
-Depends on #10536, #10683, #10794
+**Depends on:**
+1. #10536
+2. #10683
+3. #10794
+
``````




---

archive/issue_events_142658.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-30T19:28:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142658"
}
```



---

archive/issue_events_142659.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-30T19:28:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142659"
}
```



---

archive/issue_comments_103980.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOk, the doctest patch fixes all issues. So this gets a positive review",
    "created_at": "2011-03-30T19:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103980",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:5" align="right">comment:5</div>

Ok, the doctest patch fixes all issues. So this gets a positive review



---

archive/issue_comments_103981.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nProblems while building the documentation:\n\n```\ndocstring of sage.matrix.matrix2.Matrix.gram_schmidt:47: (WARNING/2) Literal block expected; none found.\ndocstring of sage.matrix.matrix2.Matrix.gram_schmidt:217: (WARNING/2) Literal block expected; none found.\n```",
    "created_at": "2011-04-13T12:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103981",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Problems while building the documentation:

```
docstring of sage.matrix.matrix2.Matrix.gram_schmidt:47: (WARNING/2) Literal block expected; none found.
docstring of sage.matrix.matrix2.Matrix.gram_schmidt:217: (WARNING/2) Literal block expected; none found.
```



---

archive/issue_events_142660.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T12:12:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142660"
}
```



---

archive/issue_events_142661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T12:12:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142661"
}
```



---

archive/issue_comments_103982.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,7 +38,7 @@\n \n **Apply:**\n 1. trac_10791-fix-gram-schmidt.patch\n-2. trac_10791-gram-schmidt-doctests.patch\n+2. trac_10791-gram-schmidt-doctests-v2.patch\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-04-14T05:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103982",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,7 +38,7 @@
 
 **Apply:**
 1. trac_10791-fix-gram-schmidt.patch
-2. trac_10791-gram-schmidt-doctests.patch
+2. trac_10791-gram-schmidt-doctests-v2.patch
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_events_142662.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-04-14T05:47:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142662"
}
```



---

archive/issue_events_142663.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-04-14T05:47:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142663"
}
```



---

archive/issue_comments_103983.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)**\n\nDocumentation fixes are added into a v2 version of the doctest patch.\n\nJust had to change two `::` to `:` in sage/matrix/matrix2.pyx.\n\nSo this change is ready for review.",
    "created_at": "2011-04-14T05:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103983",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)**

Documentation fixes are added into a v2 version of the doctest patch.

Just had to change two `::` to `:` in sage/matrix/matrix2.pyx.

So this change is ready for review.



---

archive/issue_comments_103984.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?",
    "created_at": "2011-04-18T11:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103984",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:8" align="right">comment:8</div>

The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?



---

archive/issue_comments_103985.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@sagetrac-mraum](#comment:8):\n> The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?\n\nI have tried to chase back the dependencies and get everything in order for the patchbot.  We'll see.  The only change since this *had* a positive review was a couple of extra double-colons that had to be removed, so the documentation would build right.",
    "created_at": "2011-04-19T00:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103985",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@sagetrac-mraum](#comment:8):
> The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?

I have tried to chase back the dependencies and get everything in order for the patchbot.  We'll see.  The only change since this *had* a positive review was a couple of extra double-colons that had to be removed, so the documentation would build right.



---

archive/issue_comments_103986.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFeeding the patchbot:\n\nDepends on #10536, #10683, #10794 \n\nApply: trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-04-19T00:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103986",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:10" align="right">comment:10</div>

Feeding the patchbot:

Depends on #10536, #10683, #10794 

Apply: trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_103987.json:
```json
{
    "body": "A copy of trac_10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-05-06T14:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103987",
    "user": "https://github.com/sagetrac-mraum"
}
```

A copy of trac_10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_103988.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac-10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac-10791-gram-schmidt-doctests-v2.patch.gz)**\n\nOne more try to make the patchbot retry: I added a copy of the last patch.\n\nDepends on #10536, #10683, #10794\n\nApply: trac_10791-fix-gram-schmidt.patch, trac-10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-05-06T14:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103988",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac-10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac-10791-gram-schmidt-doctests-v2.patch.gz)**

One more try to make the patchbot retry: I added a copy of the last patch.

Depends on #10536, #10683, #10794

Apply: trac_10791-fix-gram-schmidt.patch, trac-10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_103989.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nUsing a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.",
    "created_at": "2011-05-07T10:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103989",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.



---

archive/issue_comments_103990.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment:12):\n> Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.\n\nYes, I became aware of this many months ago.  However, I never know just what to be catching.  In other words, it would be nice to use a `__call___` method as a way to sanitize input, but I often have trouble figuring out just how the code will react when it fails (just what type of error will come back).\n\nSo which is preferable:\n\n```\ntry:\n   n = Integer(n_input)\nexcept SomeError:\n   raise ....\n```\n\nor\n\n```\nif not is_Integer(n_input):\n    raise ...\nelse:\n    n = Integer(n_input)\n```\n\nIn the first case is it enough to just catch  `TypeError` and `ValueError`?\n\nIn the second case, I am often at a loss to decide which to use, in particular I once spent a very long time trying to determine if an input was a real number.\n\nSo my naked except is really an act of desperation.  Advice would be appreciated.\n\nRob",
    "created_at": "2011-05-08T20:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103990",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment:12):
> Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.

Yes, I became aware of this many months ago.  However, I never know just what to be catching.  In other words, it would be nice to use a `__call___` method as a way to sanitize input, but I often have trouble figuring out just how the code will react when it fails (just what type of error will come back).

So which is preferable:

```
try:
   n = Integer(n_input)
except SomeError:
   raise ....
```

or

```
if not is_Integer(n_input):
    raise ...
else:
    n = Integer(n_input)
```

In the first case is it enough to just catch  `TypeError` and `ValueError`?

In the second case, I am often at a loss to decide which to use, in particular I once spent a very long time trying to determine if an input was a real number.

So my naked except is really an act of desperation.  Advice would be appreciated.

Rob



---

archive/issue_events_142664.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-05-08T20:22:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142664"
}
```



---

archive/issue_events_142665.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-05-08T20:22:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142665"
}
```



---

archive/issue_comments_103991.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,8 +37,8 @@\n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n **Apply:**\n-1. trac_10791-fix-gram-schmidt.patch\n-2. trac_10791-gram-schmidt-doctests-v2.patch\n+1. [attachment: trac_10791-fix-gram-schmidt-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)\n+2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-07-18T17:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103991",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,8 +37,8 @@
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
 **Apply:**
-1. trac_10791-fix-gram-schmidt.patch
-2. trac_10791-gram-schmidt-doctests-v2.patch
+1. [attachment: trac_10791-fix-gram-schmidt-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)
+2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_103992.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)**\n\nThe naked except has been corrected to:\n\n```\n        try:\n            F = R.fraction_field()\n        except TypeError:\n            raise TypeError(<snipped>)\n```\n\nThis had a positive review back at comment 5.  Since then it has received a documentation fix (double colons) and the fix on the except clause.  Those are the only changes since then.\n\nI do not know what is up with the patchbot, as it seems totally dead at the moment.  In any event, it seems counter-productive to wait on it while it is still being developed.  This is passing all tests for me right now.",
    "created_at": "2011-07-18T17:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103992",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)**

The naked except has been corrected to:

```
        try:
            F = R.fraction_field()
        except TypeError:
            raise TypeError(<snipped>)
```

This had a positive review back at comment 5.  Since then it has received a documentation fix (double colons) and the fix on the except clause.  Those are the only changes since then.

I do not know what is up with the patchbot, as it seems totally dead at the moment.  In any event, it seems counter-productive to wait on it while it is still being developed.  This is passing all tests for me right now.



---

archive/issue_events_142666.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T17:37:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142666"
}
```



---

archive/issue_events_142667.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T17:37:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142667"
}
```



---

archive/issue_comments_103993.json:
```json
{
    "body": "Apply **only** this patch",
    "created_at": "2011-07-18T17:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103993",
    "user": "https://github.com/rbeezer"
}
```

Apply **only** this patch



---

archive/issue_comments_103994.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,8 +37,7 @@\n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n **Apply:**\n-1. [attachment: trac_10791-fix-gram-schmidt-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)\n-2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)\n+1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-07-18T18:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103994",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,8 +37,7 @@
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
 **Apply:**
-1. [attachment: trac_10791-fix-gram-schmidt-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)
-2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)
+1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_103995.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttachment: **[trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)**\n\nGot confused with the various patches here, so I just rolled everything into one, the v3 patch.  So only apply this one patch.",
    "created_at": "2011-07-18T18:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103995",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:15" align="right">comment:15</div>

Attachment: **[trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)**

Got confused with the various patches here, so I just rolled everything into one, the v3 patch.  So only apply this one patch.



---

archive/issue_comments_103996.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI checked this once more. The documentation builds fine, indeed. And everything since nothing but the exception has changed, I can set this again to positive review.",
    "created_at": "2011-08-06T15:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103996",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:16" align="right">comment:16</div>

I checked this once more. The documentation builds fine, indeed. And everything since nothing but the exception has changed, I can set this again to positive review.



---

archive/issue_events_142668.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-06T15:01:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142668"
}
```



---

archive/issue_events_142669.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-06T15:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142669"
}
```



---

archive/issue_comments_103997.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThanks, Martin!  I'm just getting caught up now that email notifications are working again.\n\nRob",
    "created_at": "2011-08-11T05:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103997",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:17" align="right">comment:17</div>

Thanks, Martin!  I'm just getting caught up now that email notifications are working again.

Rob



---

archive/issue_events_142670.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:09:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142670"
}
```



---

archive/issue_events_142671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:09:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142671"
}
```



---

archive/issue_events_142672.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:02:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142672"
}
```



---

archive/issue_events_142673.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:02:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142673"
}
```



---

archive/issue_comments_103998.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha2**",
    "created_at": "2011-08-18T22:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103998",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha2**



---

archive/issue_comments_103999.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nDoctest failure on flavius ():\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"/home/buildbot/build/sage/flavius-1/flavius_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx\", line 7722:\n    sage: M.round(10)\nExpected:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624           0.0]\nGot:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624          -0.0]\n**********************************************************************\n```",
    "created_at": "2011-08-24T14:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-103999",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Doctest failure on flavius ():

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx
**********************************************************************
File "/home/buildbot/build/sage/flavius-1/flavius_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx", line 7722:
    sage: M.round(10)
Expected:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624           0.0]
Got:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624          -0.0]
**********************************************************************
```



---

archive/issue_comments_104000.json:
```json
{
    "body": "Changed merged from **sage-4.7.2.alpha2** to none",
    "created_at": "2011-08-24T14:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104000",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.2.alpha2** to none



---

archive/issue_comments_104001.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nDoctest failure on bsd (OS X 10.8.0 x86_64):\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx\", line 7718:\n    sage: G.round(6)\nExpected:\n    [-0.408248 -0.408248 -0.816497]\n    [ 0.707107 -0.707107      -0.0]\n    [ -0.57735  -0.57735   0.57735]\nGot:\n    [-0.408248 -0.408248 -0.816497]\n    [ 0.707107 -0.707107       0.0]\n    [ -0.57735  -0.57735   0.57735]\n**********************************************************************\n```",
    "created_at": "2011-08-24T21:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104001",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Doctest failure on bsd (OS X 10.8.0 x86_64):

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx", line 7718:
    sage: G.round(6)
Expected:
    [-0.408248 -0.408248 -0.816497]
    [ 0.707107 -0.707107      -0.0]
    [ -0.57735  -0.57735   0.57735]
Got:
    [-0.408248 -0.408248 -0.816497]
    [ 0.707107 -0.707107       0.0]
    [ -0.57735  -0.57735   0.57735]
**********************************************************************
```



---

archive/issue_events_142674.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142674"
}
```



---

archive/issue_events_142675.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142675"
}
```



---

archive/issue_events_142676.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142676"
}
```



---

archive/issue_events_142677.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-08-25T02:11:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142677"
}
```



---

archive/issue_events_142678.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-08-25T02:11:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142678"
}
```



---

archive/issue_comments_104002.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nTurns out the IEEE specification includes a \"negative zero.\"  Rounding and `.zero_at()` might do the trick.\n\nSix such changes in the \"negative zero\" patch.  Successful with one instance where I converted a `-0.0` to `0.0`.\n\nJeroen - could you easily test/review this on the two failing machines?  If it works across three architectures, I'll then apply the same technique to #10795, #10837 with some confidence.\n\nThanks for your patience with this (exasperating) numerical work.\n\nRob",
    "created_at": "2011-08-25T02:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104002",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:23" align="right">comment:23</div>

Turns out the IEEE specification includes a "negative zero."  Rounding and `.zero_at()` might do the trick.

Six such changes in the "negative zero" patch.  Successful with one instance where I converted a `-0.0` to `0.0`.

Jeroen - could you easily test/review this on the two failing machines?  If it works across three architectures, I'll then apply the same technique to #10795, #10837 with some confidence.

Thanks for your patience with this (exasperating) numerical work.

Rob



---

archive/issue_comments_104003.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,6 +38,7 @@\n \n **Apply:**\n 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n+2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-08-25T02:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104003",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,6 +38,7 @@
 
 **Apply:**
 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
+2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_104004.json:
```json
{
    "body": "Changed keywords from none to **sd32**",
    "created_at": "2011-08-25T18:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104004",
    "user": "https://github.com/rbeezer"
}
```

Changed keywords from none to **sd32**



---

archive/issue_events_142679.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-09-19T02:50:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142679"
}
```



---

archive/issue_events_142680.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-09-19T02:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142680"
}
```



---

archive/issue_comments_104005.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWhat's needed now?  Jeroen just needs to test this last doctest fix on flavius and bsd?  (or should we set it back to positive review, since the doctest changes are minor, and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?)\n\nI think I would prefer setting this back to positive review, since Jeroen will be implicitly testing it on those two platforms when he merges it (as long as it still passes on Rob's platform).",
    "created_at": "2011-12-04T00:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104005",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:26" align="right">comment:26</div>

What's needed now?  Jeroen just needs to test this last doctest fix on flavius and bsd?  (or should we set it back to positive review, since the doctest changes are minor, and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?)

I think I would prefer setting this back to positive review, since Jeroen will be implicitly testing it on those two platforms when he merges it (as long as it still passes on Rob's platform).



---

archive/issue_comments_104006.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThere are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:\n\n```\nsage -t --long \"devel/sage/sage/matrix/matrix2.pyx\"         \n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8072:\n    sage: G*G.transpose()\nExpected:\n    [      1 0.?e-37 0.?e-35]\n    [0.?e-37       1 0.?e-35]\n    [0.?e-35 0.?e-35       1]\nGot:\n    [      1 0.?e-18 0.?e-19]\n    [0.?e-18       1 0.?e-18]\n    [0.?e-19 0.?e-18       1]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8087:\n    sage: G\nExpected:\n    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]\n    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]\n    [  0.3842387256410419? - 0.5694103019142261?*I  0.1416892863096208? - 0.06139779741542298?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]\nGot:\n    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]\n    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]\n    [  0.3842387256410419? - 0.5694103019142261?*I   0.1416892863096208? - 0.0613977974154230?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8091:\n    sage: M\nExpected:\n    [                        5.196152422706632?                                          0                                          0]\n    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-37*I                                          0]\n    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-35*I]\nGot:\n    [                        5.196152422706632?                                          0                                          0]\n    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-17*I                                          0]\n    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8095:\n    sage: M*G-A\nExpected:\n    [            0.?e-37 0.?e-37 + 0.?e-37*I 0.?e-37 + 0.?e-37*I             0.?e-37]\n    [0.?e-36 + 0.?e-36*I 0.?e-35 + 0.?e-36*I 0.?e-36 + 0.?e-36*I 0.?e-36 + 0.?e-36*I]\n    [0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I]\nGot:\n    [            0.?e-18 0.?e-18 + 0.?e-18*I 0.?e-18 + 0.?e-17*I             0.?e-18]\n    [0.?e-17 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-17 + 0.?e-16*I]\n    [0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8099:\n    sage: G*G.conjugate().transpose()\nExpected:\n    [1.000000000000000? + 0.?e-37*I            0.?e-37 + 0.?e-37*I            0.?e-36 + 0.?e-36*I]\n    [           0.?e-37 + 0.?e-37*I 1.000000000000000? + 0.?e-37*I            0.?e-36 + 0.?e-36*I]\n    [           0.?e-36 + 0.?e-36*I            0.?e-36 + 0.?e-36*I 1.000000000000000? + 0.?e-35*I]\nGot:\n    [1.000000000000000? + 0.?e-18*I            0.?e-18 + 0.?e-18*I            0.?e-17 + 0.?e-16*I]\n    [           0.?e-18 + 0.?e-18*I 1.000000000000000? + 0.?e-18*I            0.?e-16 + 0.?e-17*I]\n    [           0.?e-17 + 0.?e-16*I            0.?e-16 + 0.?e-17*I 1.000000000000000? + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8130:\n    sage: G*G.transpose()\nExpected:\n    [      1 0.?e-35]\n    [0.?e-35       1]\nGot:\n    [      1 0.?e-18]\n    [0.?e-18       1]\n**********************************************************************\n1 items had failures:\n   6 of  68 in __main__.example_97\n***Test Failed*** 6 failures.\nFor whitespace errors, see the file /Users/palmieri/.sage//tmp/matrix2_40831.py\n\t [37.9 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t --long \"devel/sage/sage/matrix/matrix2.pyx\"\nTotal time for all tests: 37.9 seconds\n```",
    "created_at": "2011-12-04T00:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104006",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:

```
sage -t --long "devel/sage/sage/matrix/matrix2.pyx"         
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8072:
    sage: G*G.transpose()
Expected:
    [      1 0.?e-37 0.?e-35]
    [0.?e-37       1 0.?e-35]
    [0.?e-35 0.?e-35       1]
Got:
    [      1 0.?e-18 0.?e-19]
    [0.?e-18       1 0.?e-18]
    [0.?e-19 0.?e-18       1]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8087:
    sage: G
Expected:
    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]
    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]
    [  0.3842387256410419? - 0.5694103019142261?*I  0.1416892863096208? - 0.06139779741542298?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]
Got:
    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]
    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]
    [  0.3842387256410419? - 0.5694103019142261?*I   0.1416892863096208? - 0.0613977974154230?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8091:
    sage: M
Expected:
    [                        5.196152422706632?                                          0                                          0]
    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-37*I                                          0]
    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-35*I]
Got:
    [                        5.196152422706632?                                          0                                          0]
    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-17*I                                          0]
    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8095:
    sage: M*G-A
Expected:
    [            0.?e-37 0.?e-37 + 0.?e-37*I 0.?e-37 + 0.?e-37*I             0.?e-37]
    [0.?e-36 + 0.?e-36*I 0.?e-35 + 0.?e-36*I 0.?e-36 + 0.?e-36*I 0.?e-36 + 0.?e-36*I]
    [0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I]
Got:
    [            0.?e-18 0.?e-18 + 0.?e-18*I 0.?e-18 + 0.?e-17*I             0.?e-18]
    [0.?e-17 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-17 + 0.?e-16*I]
    [0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8099:
    sage: G*G.conjugate().transpose()
Expected:
    [1.000000000000000? + 0.?e-37*I            0.?e-37 + 0.?e-37*I            0.?e-36 + 0.?e-36*I]
    [           0.?e-37 + 0.?e-37*I 1.000000000000000? + 0.?e-37*I            0.?e-36 + 0.?e-36*I]
    [           0.?e-36 + 0.?e-36*I            0.?e-36 + 0.?e-36*I 1.000000000000000? + 0.?e-35*I]
Got:
    [1.000000000000000? + 0.?e-18*I            0.?e-18 + 0.?e-18*I            0.?e-17 + 0.?e-16*I]
    [           0.?e-18 + 0.?e-18*I 1.000000000000000? + 0.?e-18*I            0.?e-16 + 0.?e-17*I]
    [           0.?e-17 + 0.?e-16*I            0.?e-16 + 0.?e-17*I 1.000000000000000? + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8130:
    sage: G*G.transpose()
Expected:
    [      1 0.?e-35]
    [0.?e-35       1]
Got:
    [      1 0.?e-18]
    [0.?e-18       1]
**********************************************************************
1 items had failures:
   6 of  68 in __main__.example_97
***Test Failed*** 6 failures.
For whitespace errors, see the file /Users/palmieri/.sage//tmp/matrix2_40831.py
	 [37.9 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t --long "devel/sage/sage/matrix/matrix2.pyx"
Total time for all tests: 37.9 seconds
```



---

archive/issue_events_142681.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-04T00:48:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142681"
}
```



---

archive/issue_events_142682.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-04T00:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142682"
}
```



---

archive/issue_comments_104007.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jasongrout](#comment:26):\n> and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?\n\nYes.  If you think a patch looks reasonable and has been tested to some extent, just set it to positive_review.",
    "created_at": "2011-12-04T11:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104007",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jasongrout](#comment:26):
> and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?

Yes.  If you think a patch looks reasonable and has been tested to some extent, just set it to positive_review.



---

archive/issue_comments_104008.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jhpalmieri](#comment:27):\n> There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:\n\nJason, John, Jeroen - thanks for the attention to this, and the other outstanding linear algebra tickets.  I've been on an (extended) Sage vacation, but I think you are reeling me back in.  ;-)\n\nThis does need work.  Fix at #11544 prevents printing from having a side-effect that increases precision over QQbar.  I think this work predates that change.  So it does need work at the moment.\n\nI am building a fresh alpha right now and will try to get on top of outstanding tickets later today.  It'd be great to get a few of thse into 4.8 if it is not too late - I'll be using this stuff in class in the spring with my Sage-enabled textbook and a few of us are working on this CRC linear algebra handbook chapter that will be doctestable.\n\nThanks,\nRob",
    "created_at": "2011-12-04T19:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104008",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jhpalmieri](#comment:27):
> There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:

Jason, John, Jeroen - thanks for the attention to this, and the other outstanding linear algebra tickets.  I've been on an (extended) Sage vacation, but I think you are reeling me back in.  ;-)

This does need work.  Fix at #11544 prevents printing from having a side-effect that increases precision over QQbar.  I think this work predates that change.  So it does need work at the moment.

I am building a fresh alpha right now and will try to get on top of outstanding tickets later today.  It'd be great to get a few of thse into 4.8 if it is not too late - I'll be using this stuff in class in the spring with my Sage-enabled textbook and a few of us are working on this CRC linear algebra handbook chapter that will be doctestable.

Thanks,
Rob



---

archive/issue_comments_104009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,6 +39,7 @@\n **Apply:**\n 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n 2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n+3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104009",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,6 +39,7 @@
 **Apply:**
 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
 2. [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
+3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_104010.json:
```json
{
    "body": "Changed reviewer from **Martin Raum** to **Martin Raum, John Palmieri**",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104010",
    "user": "https://github.com/rbeezer"
}
```

Changed reviewer from **Martin Raum** to **Martin Raum, John Palmieri**



---

archive/issue_events_142683.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-05T05:12:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142683"
}
```



---

archive/issue_events_142684.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-05T05:12:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142684"
}
```



---

archive/issue_comments_104011.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAttachment: **[trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)**\n\nOh man, that was painful.  I am really rusty.  Use it or lose it.  But I'm back.\n\nPatch fixes failing doctests over QQbar, mostly by checking small norms on matrices which should be the zero matrix.  A bit brutal, but we don't have `round()` and `zero_at()` for matrices over QQbar.  (Those'd be a nice additions, no?).\n\nI got identical failures on Ubuntu.  Now passing all tests in matrix/matrix2.pyx.  My 4.8.alpha3 has some weirdness (Atlas segfaults), but I think this should be OK.\n\nThanks for the look, John and Jason.  Off to investigate a few other things.\n\nRob",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104011",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:30" align="right">comment:30</div>

Attachment: **[trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)**

Oh man, that was painful.  I am really rusty.  Use it or lose it.  But I'm back.

Patch fixes failing doctests over QQbar, mostly by checking small norms on matrices which should be the zero matrix.  A bit brutal, but we don't have `round()` and `zero_at()` for matrices over QQbar.  (Those'd be a nice additions, no?).

I got identical failures on Ubuntu.  Now passing all tests in matrix/matrix2.pyx.  My 4.8.alpha3 has some weirdness (Atlas segfaults), but I think this should be OK.

Thanks for the look, John and Jason.  Off to investigate a few other things.

Rob



---

archive/issue_comments_104012.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooks good.  Tested on OSX 10.6.8 and passes tests in matrix/*.pyx on sage-4.7.2.alpha3 (+some other patches I've applied)",
    "created_at": "2011-12-13T15:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104012",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:31" align="right">comment:31</div>

Looks good.  Tested on OSX 10.6.8 and passes tests in matrix/*.pyx on sage-4.7.2.alpha3 (+some other patches I've applied)



---

archive/issue_events_142685.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T15:44:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142685"
}
```



---

archive/issue_events_142686.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T15:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142686"
}
```



---

archive/issue_comments_104013.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe commit message of [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz) needs to be updated.",
    "created_at": "2011-12-16T10:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104013",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

The commit message of [attachment: trac_10791-gram-schmidt-negative-zero.patch](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz) needs to be updated.



---

archive/issue_events_142687.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T10:02:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142687"
}
```



---

archive/issue_events_142688.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T10:02:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142688"
}
```



---

archive/issue_comments_104014.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAttachment: **[trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)**\n\nJeroen,\n\nMy mistake - very sorry about that.\n\nI have replaced the problem patch with one containing a commit message.\n\nRob",
    "created_at": "2011-12-16T16:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104014",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:33" align="right">comment:33</div>

Attachment: **[trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)**

Jeroen,

My mistake - very sorry about that.

I have replaced the problem patch with one containing a commit message.

Rob



---

archive/issue_events_142689.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-16T16:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142689"
}
```



---

archive/issue_events_142690.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-16T16:04:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142690"
}
```



---

archive/issue_events_142691.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:12:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142691"
}
```



---

archive/issue_events_142692.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:12:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-142692"
}
```



---

archive/issue_comments_104015.json:
```json
{
    "body": "Merged: **sage-4.8.alpha5**",
    "created_at": "2011-12-17T09:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-104015",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha5**
