# Issue 10791: Fix and upgrade Gram-Schmidt

archive/issues_010726.json:
```json
{
    "assignees": [],
    "body": "If a set of vectors has a linearly dependent subset, followed by a vector outside the span of that subset, then the presence of a zero vector in the orthogonal set causes division by a zero dot product.\n\nThere are various other improvements that can be made in this routine.\n\n```\nsage: A=matrix(QQ, [[1,2],[2,4],[1,1]])\nsage: A.gram_schmidt()\n---------------------------------------------------------------------------\nZeroDivisionError                         Traceback (most recent call last)\n\n/sage/sage-4.6.2.alpha4/<ipython console> in <module>()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.gram_schmidt (sage/matrix/matrix2.c:31979)()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/modules/misc.pyc in gram_schmidt(B)\n     55     for i in range(1,n):\n     56         for j in range(i):\n---> 57             mu[i,j] = B[i].dot_product(Bstar[j]) / (Bstar[j].dot_product(Bstar[j]))\n     58         Bstar.append(B[i] - sum(mu[i,j]*Bstar[j] for j in range(i)))\n     59     return Bstar, mu\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11981)()\n\n/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._div_ (sage/rings/rational.c:15177)()\n\nZeroDivisionError: Rational division by zero\n```\n\nPatch summary:\n\n* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.\n\n* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.\n\n* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.\n\n* The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n\n**Apply:**\n1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)\n\n**Depends on:**\n1. #10536\n2. #10683\n3. #10794\n\n\nAssignee: **@jasongrout, @williamstein**\n\nKeywords: **sd32**\n\nAuthor: **Rob Beezer**\n\nReviewer: **Martin Raum, John Palmieri**\n\nMerged: **sage-4.8.alpha5**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10791_\n\n",
    "closed_at": "2011-12-17T09:12:05Z",
    "created_at": "2011-02-16T17:48:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix and upgrade Gram-Schmidt",
    "type": "issue",
    "updated_at": "2011-12-17T09:12:05Z",
    "url": "https://github.com/sagemath/sage/issues/10791",
    "user": "https://github.com/rbeezer"
}
```
If a set of vectors has a linearly dependent subset, followed by a vector outside the span of that subset, then the presence of a zero vector in the orthogonal set causes division by a zero dot product.

There are various other improvements that can be made in this routine.

```
sage: A=matrix(QQ, [[1,2],[2,4],[1,1]])
sage: A.gram_schmidt()
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)

/sage/sage-4.6.2.alpha4/<ipython console> in <module>()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.gram_schmidt (sage/matrix/matrix2.c:31979)()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/modules/misc.pyc in gram_schmidt(B)
     55     for i in range(1,n):
     56         for j in range(i):
---> 57             mu[i,j] = B[i].dot_product(Bstar[j]) / (Bstar[j].dot_product(Bstar[j]))
     58         Bstar.append(B[i] - sum(mu[i,j]*Bstar[j] for j in range(i)))
     59     return Bstar, mu

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__div__ (sage/structure/element.c:11981)()

/sage/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._div_ (sage/rings/rational.c:15177)()

ZeroDivisionError: Rational division by zero
```

Patch summary:

* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.

* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.

* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.

* The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.

**Apply:**
1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)

**Depends on:**
1. #10536
2. #10683
3. #10794


Assignee: **@jasongrout, @williamstein**

Keywords: **sd32**

Author: **Rob Beezer**

Reviewer: **Martin Raum, John Palmieri**

Merged: **sage-4.8.alpha5**

_Issue created by migration from https://trac.sagemath.org/ticket/10791_





---

archive/issue_events_125816.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125816"
}
```



---

archive/issue_events_125817.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125817"
}
```



---

archive/issue_events_125818.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125818"
}
```



---

archive/issue_events_125819.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-16T17:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125819"
}
```



---

archive/issue_comments_106009.json:
```json
{
    "body": "Author: **Rob Beezer**",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106009",
    "user": "https://github.com/rbeezer"
}
```

Author: **Rob Beezer**



---

archive/issue_events_125820.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-27T01:38:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125820"
}
```



---

archive/issue_comments_106010.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,15 @@\n \n ZeroDivisionError: Rational division by zero\n ```\n+\n+Patch summary:\n+\n+* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.\n+\n+* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.\n+\n+* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.\n+\n+* The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n+\n+Depends #10536, #10683, #10794\n``````\n",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106010",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,15 @@
 
 ZeroDivisionError: Rational division by zero
 ```
+
+Patch summary:
+
+* Original Gram-Schmidt has been adjusted to raise an error on linearly dependent input.
+
+* Free module version of original Gram-Schmidt was used just one place, and it has been referenced directly, rather than through the matrix version.
+
+* Matrix version is totally rewritten, building on QR factorizations as possible to get orthonormal bases.  Linearly dependent subsets should be handled properly now.  Return format has, by necessity, changed.
+
+* The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
+
+Depends #10536, #10683, #10794
``````




---

archive/issue_comments_106011.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac_10791-fix-gram-schmidt.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt.patch.gz)**",
    "created_at": "2011-02-27T01:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106011",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac_10791-fix-gram-schmidt.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt.patch.gz)**



---

archive/issue_comments_106012.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,4 +36,4 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n-Depends #10536, #10683, #10794\n+Depends on #10536, #10683, #10794\n``````\n",
    "created_at": "2011-03-23T22:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106012",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,4 +36,4 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
-Depends #10536, #10683, #10794
+Depends on #10536, #10683, #10794
``````




---

archive/issue_comments_106013.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nfix patchbot comment",
    "created_at": "2011-03-23T22:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106013",
    "user": "https://github.com/kini"
}
```

<a id='comment:2'>Comment 2:</a>
fix patchbot comment



---

archive/issue_comments_106014.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nIn line 6364: properly contains\nIn line 6444: For the integers and the rationals the field \n\nThere is only one thing you didn't catch. If you fix that I can give this a positive review (please provide a patch that depends on the current one, to make my life easier) :\n\nFile \"/scratch/mraum/sagedev/devel/sage-dev/sage/modules/misc.py\", line 66:\n    sage: gram_schmidt(V)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/mraum/sagedev/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/mraum/sagedev/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/mraum/sagedev/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_1[16]>\", line 1, in <module>\n        gram_schmidt(V)###line 66:\n    sage: gram_schmidt(V)\n      File \"/scratch/mraum/sagedev/local/lib/python/site-packages/sage/modules/misc.py\", line 83, in gram_schmidt\n        raise ValueError(\"linearly dependent input for module version of Gram-Schmidt\")\n    ValueError: linearly dependent input for module version of Gram-Schmidt",
    "created_at": "2011-03-26T01:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106014",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:3'>Comment 3:</a>
In line 6364: properly contains
In line 6444: For the integers and the rationals the field 

There is only one thing you didn't catch. If you fix that I can give this a positive review (please provide a patch that depends on the current one, to make my life easier) :

File "/scratch/mraum/sagedev/devel/sage-dev/sage/modules/misc.py", line 66:
    sage: gram_schmidt(V)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/mraum/sagedev/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/mraum/sagedev/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/mraum/sagedev/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_1[16]>", line 1, in <module>
        gram_schmidt(V)###line 66:
    sage: gram_schmidt(V)
      File "/scratch/mraum/sagedev/local/lib/python/site-packages/sage/modules/misc.py", line 83, in gram_schmidt
        raise ValueError("linearly dependent input for module version of Gram-Schmidt")
    ValueError: linearly dependent input for module version of Gram-Schmidt



---

archive/issue_comments_106015.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-03-26T01:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106015",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_events_125821.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-26T01:19:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125821"
}
```



---

archive/issue_events_125822.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-26T01:19:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125822"
}
```



---

archive/issue_events_125823.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-27T05:34:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125823"
}
```



---

archive/issue_events_125824.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-03-27T05:34:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125824"
}
```



---

archive/issue_comments_106016.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,4 +36,6 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n+Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch\n+\n Depends on #10536, #10683, #10794\n``````\n",
    "created_at": "2011-03-27T05:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106016",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,4 +36,6 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
+Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch
+
 Depends on #10536, #10683, #10794
``````




---

archive/issue_comments_106017.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAttachment: **[trac_10791-gram-schmidt-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests.patch.gz)**\n\nMartin - thanks for the careful review and for catching these three items.\n\n\"doctests\" patch implements changes to fix all three.\n\nRob",
    "created_at": "2011-03-27T05:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106017",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:4'>Comment 4:</a>
Attachment: **[trac_10791-gram-schmidt-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests.patch.gz)**

Martin - thanks for the careful review and for catching these three items.

"doctests" patch implements changes to fix all three.

Rob



---

archive/issue_comments_106018.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,6 +36,12 @@\n \n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n-Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch\n+**Apply:**\n+1. trac_10791-fix-gram-schmidt.patch\n+2. trac_10791-gram-schmidt-doctests.patch\n \n-Depends on #10536, #10683, #10794\n+**Depends on:**\n+1. #10536\n+2. #10683\n+3. #10794\n+\n``````\n",
    "created_at": "2011-03-30T19:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106018",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,6 +36,12 @@
 
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
-Apply trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests.patch
+**Apply:**
+1. trac_10791-fix-gram-schmidt.patch
+2. trac_10791-gram-schmidt-doctests.patch
 
-Depends on #10536, #10683, #10794
+**Depends on:**
+1. #10536
+2. #10683
+3. #10794
+
``````




---

archive/issue_events_125825.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-30T19:28:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125825"
}
```



---

archive/issue_events_125826.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-30T19:28:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125826"
}
```



---

archive/issue_comments_106019.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOk, the doctest patch fixes all issues. So this gets a positive review",
    "created_at": "2011-03-30T19:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106019",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:5'>Comment 5:</a>
Ok, the doctest patch fixes all issues. So this gets a positive review



---

archive/issue_comments_106020.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nProblems while building the documentation:\n\n```\ndocstring of sage.matrix.matrix2.Matrix.gram_schmidt:47: (WARNING/2) Literal block expected; none found.\ndocstring of sage.matrix.matrix2.Matrix.gram_schmidt:217: (WARNING/2) Literal block expected; none found.\n```",
    "created_at": "2011-04-13T12:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106020",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Problems while building the documentation:

```
docstring of sage.matrix.matrix2.Matrix.gram_schmidt:47: (WARNING/2) Literal block expected; none found.
docstring of sage.matrix.matrix2.Matrix.gram_schmidt:217: (WARNING/2) Literal block expected; none found.
```



---

archive/issue_events_125827.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T12:12:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125827"
}
```



---

archive/issue_events_125828.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T12:12:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125828"
}
```



---

archive/issue_comments_106021.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,7 +38,7 @@\n \n **Apply:**\n 1. trac_10791-fix-gram-schmidt.patch\n-2. trac_10791-gram-schmidt-doctests.patch\n+2. trac_10791-gram-schmidt-doctests-v2.patch\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-04-14T05:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106021",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,7 +38,7 @@
 
 **Apply:**
 1. trac_10791-fix-gram-schmidt.patch
-2. trac_10791-gram-schmidt-doctests.patch
+2. trac_10791-gram-schmidt-doctests-v2.patch
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_events_125829.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-04-14T05:47:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125829"
}
```



---

archive/issue_events_125830.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-04-14T05:47:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125830"
}
```



---

archive/issue_comments_106022.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAttachment: **[trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)**\n\nDocumentation fixes are added into a v2 version of the doctest patch.\n\nJust had to change two `::` to `:` in sage/matrix/matrix2.pyx.\n\nSo this change is ready for review.",
    "created_at": "2011-04-14T05:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106022",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'>Comment 7:</a>
Attachment: **[trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)**

Documentation fixes are added into a v2 version of the doctest patch.

Just had to change two `::` to `:` in sage/matrix/matrix2.pyx.

So this change is ready for review.



---

archive/issue_comments_106023.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThe patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?",
    "created_at": "2011-04-18T11:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106023",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:8'>Comment 8:</a>
The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?



---

archive/issue_comments_106024.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [mraum](#comment%3A8):\n> The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?\n\nI have tried to chase back the dependencies and get everything in order for the patchbot.  We'll see.  The only change since this *had* a positive review was a couple of extra double-colons that had to be removed, so the documentation would build right.",
    "created_at": "2011-04-19T00:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106024",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [mraum](#comment%3A8):
> The patchbot does not apply the patches this depends on. Do you, Robert, know how to fix that in the ticket description?

I have tried to chase back the dependencies and get everything in order for the patchbot.  We'll see.  The only change since this *had* a positive review was a couple of extra double-colons that had to be removed, so the documentation would build right.



---

archive/issue_comments_106025.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nFeeding the patchbot:\n\nDepends on #10536, #10683, #10794 \n\nApply: trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-04-19T00:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106025",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:10'>Comment 10:</a>
Feeding the patchbot:

Depends on #10536, #10683, #10794 

Apply: trac_10791-fix-gram-schmidt.patch, trac_10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_106026.json:
```json
{
    "body": "A copy of trac_10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-05-06T14:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106026",
    "user": "https://github.com/sagetrac-mraum"
}
```

A copy of trac_10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_106027.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAttachment: **[trac-10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac-10791-gram-schmidt-doctests-v2.patch.gz)**\n\nOne more try to make the patchbot retry: I added a copy of the last patch.\n\nDepends on #10536, #10683, #10794\n\nApply: trac_10791-fix-gram-schmidt.patch, trac-10791-gram-schmidt-doctests-v2.patch",
    "created_at": "2011-05-06T14:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106027",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:11'>Comment 11:</a>
Attachment: **[trac-10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac-10791-gram-schmidt-doctests-v2.patch.gz)**

One more try to make the patchbot retry: I added a copy of the last patch.

Depends on #10536, #10683, #10794

Apply: trac_10791-fix-gram-schmidt.patch, trac-10791-gram-schmidt-doctests-v2.patch



---

archive/issue_comments_106028.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nUsing a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.",
    "created_at": "2011-05-07T10:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106028",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.



---

archive/issue_comments_106029.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@jdemeyer](#comment%3A12):\n> Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.\n\nYes, I became aware of this many months ago.  However, I never know just what to be catching.  In other words, it would be nice to use a `__call___` method as a way to sanitize input, but I often have trouble figuring out just how the code will react when it fails (just what type of error will come back).\n\nSo which is preferable:\n\n```\ntry:\n   n = Integer(n_input)\nexcept SomeError:\n   raise ....\n```\n\nor\n\n```\nif not is_Integer(n_input):\n    raise ...\nelse:\n    n = Integer(n_input)\n```\n\nIn the first case is it enough to just catch  `TypeError` and `ValueError`?\n\nIn the second case, I am often at a loss to decide which to use, in particular I once spent a very long time trying to determine if an input was a real number.\n\nSo my naked except is really an act of desperation.  Advice would be appreciated.\n\nRob",
    "created_at": "2011-05-08T20:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106029",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@jdemeyer](#comment%3A12):
> Using a bare `except:` (line 6303 of `sage/matrix/matrix2.pyx`) is a very bad idea.  You should catch specific exceptions, not all.

Yes, I became aware of this many months ago.  However, I never know just what to be catching.  In other words, it would be nice to use a `__call___` method as a way to sanitize input, but I often have trouble figuring out just how the code will react when it fails (just what type of error will come back).

So which is preferable:

```
try:
   n = Integer(n_input)
except SomeError:
   raise ....
```

or

```
if not is_Integer(n_input):
    raise ...
else:
    n = Integer(n_input)
```

In the first case is it enough to just catch  `TypeError` and `ValueError`?

In the second case, I am often at a loss to decide which to use, in particular I once spent a very long time trying to determine if an input was a real number.

So my naked except is really an act of desperation.  Advice would be appreciated.

Rob



---

archive/issue_events_125831.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-05-08T20:22:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125831"
}
```



---

archive/issue_events_125832.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-05-08T20:22:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125832"
}
```



---

archive/issue_comments_106030.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,8 +37,8 @@\n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n **Apply:**\n-1. trac_10791-fix-gram-schmidt.patch\n-2. trac_10791-gram-schmidt-doctests-v2.patch\n+1. [attachment: trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)\n+2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-07-18T17:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106030",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,8 +37,8 @@
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
 **Apply:**
-1. trac_10791-fix-gram-schmidt.patch
-2. trac_10791-gram-schmidt-doctests-v2.patch
+1. [attachment: trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)
+2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_106031.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nAttachment: **[trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)**\n\nThe naked except has been corrected to:\n\n```\n        try:\n            F = R.fraction_field()\n        except TypeError:\n            raise TypeError(<snipped>)\n```\n\nThis had a positive review back at comment 5.  Since then it has received a documentation fix (double colons) and the fix on the except clause.  Those are the only changes since then.\n\nI do not know what is up with the patchbot, as it seems totally dead at the moment.  In any event, it seems counter-productive to wait on it while it is still being developed.  This is passing all tests for me right now.",
    "created_at": "2011-07-18T17:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106031",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:14'>Comment 14:</a>
Attachment: **[trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)**

The naked except has been corrected to:

```
        try:
            F = R.fraction_field()
        except TypeError:
            raise TypeError(<snipped>)
```

This had a positive review back at comment 5.  Since then it has received a documentation fix (double colons) and the fix on the except clause.  Those are the only changes since then.

I do not know what is up with the patchbot, as it seems totally dead at the moment.  In any event, it seems counter-productive to wait on it while it is still being developed.  This is passing all tests for me right now.



---

archive/issue_events_125833.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T17:37:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125833"
}
```



---

archive/issue_events_125834.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T17:37:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125834"
}
```



---

archive/issue_comments_106032.json:
```json
{
    "body": "Apply **only** this patch",
    "created_at": "2011-07-18T17:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106032",
    "user": "https://github.com/rbeezer"
}
```

Apply **only** this patch



---

archive/issue_comments_106033.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,8 +37,7 @@\n * The \"noscale\" helper method is reminiscent of the old code, but written in a column-oriented QR style.\n \n **Apply:**\n-1. [attachment: trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)\n-2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)\n+1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-07-18T18:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106033",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,8 +37,7 @@
 * The "noscale" helper method is reminiscent of the old code, but written in a column-oriented QR style.
 
 **Apply:**
-1. [attachment: trac_10791-fix-gram-schmidt-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v2.patch.gz)
-2. [attachment: trac_10791-gram-schmidt-doctests-v2.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-doctests-v2.patch.gz)
+1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_106034.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAttachment: **[trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)**\n\nGot confused with the various patches here, so I just rolled everything into one, the v3 patch.  So only apply this one patch.",
    "created_at": "2011-07-18T18:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106034",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:15'>Comment 15:</a>
Attachment: **[trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)**

Got confused with the various patches here, so I just rolled everything into one, the v3 patch.  So only apply this one patch.



---

archive/issue_comments_106035.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI checked this once more. The documentation builds fine, indeed. And everything since nothing but the exception has changed, I can set this again to positive review.",
    "created_at": "2011-08-06T15:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106035",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:16'>Comment 16:</a>
I checked this once more. The documentation builds fine, indeed. And everything since nothing but the exception has changed, I can set this again to positive review.



---

archive/issue_events_125835.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-06T15:01:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125835"
}
```



---

archive/issue_events_125836.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-06T15:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125836"
}
```



---

archive/issue_comments_106036.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nThanks, Martin!  I'm just getting caught up now that email notifications are working again.\n\nRob",
    "created_at": "2011-08-11T05:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106036",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:17'>Comment 17:</a>
Thanks, Martin!  I'm just getting caught up now that email notifications are working again.

Rob



---

archive/issue_events_125837.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:09:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125837"
}
```



---

archive/issue_events_125838.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:09:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125838"
}
```



---

archive/issue_events_125839.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:02:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125839"
}
```



---

archive/issue_events_125840.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:02:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125840"
}
```



---

archive/issue_comments_106037.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha2**",
    "created_at": "2011-08-18T22:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106037",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.2.alpha2**



---

archive/issue_comments_106038.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nDoctest failure on flavius ():\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"/home/buildbot/build/sage/flavius-1/flavius_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx\", line 7722:\n    sage: M.round(10)\nExpected:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624           0.0]\nGot:\n    [-2.4494897428           0.0           0.0]\n    [-3.6742346142  0.7071067812           0.0]\n    [-4.8989794856  1.4142135624          -0.0]\n**********************************************************************\n```",
    "created_at": "2011-08-24T14:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106038",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>Comment 20:</a>
Doctest failure on flavius ():

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx
**********************************************************************
File "/home/buildbot/build/sage/flavius-1/flavius_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx", line 7722:
    sage: M.round(10)
Expected:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624           0.0]
Got:
    [-2.4494897428           0.0           0.0]
    [-3.6742346142  0.7071067812           0.0]
    [-4.8989794856  1.4142135624          -0.0]
**********************************************************************
```



---

archive/issue_comments_106039.json:
```json
{
    "body": "Changed merged from **sage-4.7.2.alpha2** to none",
    "created_at": "2011-08-24T14:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106039",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.2.alpha2** to none



---

archive/issue_comments_106040.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nDoctest failure on bsd (OS X 10.8.0 x86_64):\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx\", line 7718:\n    sage: G.round(6)\nExpected:\n    [-0.408248 -0.408248 -0.816497]\n    [ 0.707107 -0.707107      -0.0]\n    [ -0.57735  -0.57735   0.57735]\nGot:\n    [-0.408248 -0.408248 -0.816497]\n    [ 0.707107 -0.707107       0.0]\n    [ -0.57735  -0.57735   0.57735]\n**********************************************************************\n```",
    "created_at": "2011-08-24T21:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106040",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>Comment 21:</a>
Doctest failure on bsd (OS X 10.8.0 x86_64):

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix2.pyx
**********************************************************************
File "/Users/buildbot/build/sage/bsd-1/bsd_64_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix2.pyx", line 7718:
    sage: G.round(6)
Expected:
    [-0.408248 -0.408248 -0.816497]
    [ 0.707107 -0.707107      -0.0]
    [ -0.57735  -0.57735   0.57735]
Got:
    [-0.408248 -0.408248 -0.816497]
    [ 0.707107 -0.707107       0.0]
    [ -0.57735  -0.57735   0.57735]
**********************************************************************
```



---

archive/issue_events_125841.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125841"
}
```



---

archive/issue_events_125842.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125842"
}
```



---

archive/issue_events_125843.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T21:58:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125843"
}
```



---

archive/issue_events_125844.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-08-25T02:11:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125844"
}
```



---

archive/issue_events_125845.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-08-25T02:11:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125845"
}
```



---

archive/issue_comments_106041.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nTurns out the IEEE specification includes a \"negative zero.\"  Rounding and `.zero_at()` might do the trick.\n\nSix such changes in the \"negative zero\" patch.  Successful with one instance where I converted a `-0.0` to `0.0`.\n\nJeroen - could you easily test/review this on the two failing machines?  If it works across three architectures, I'll then apply the same technique to #10795, #10837 with some confidence.\n\nThanks for your patience with this (exasperating) numerical work.\n\nRob",
    "created_at": "2011-08-25T02:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106041",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:23'>Comment 23:</a>
Turns out the IEEE specification includes a "negative zero."  Rounding and `.zero_at()` might do the trick.

Six such changes in the "negative zero" patch.  Successful with one instance where I converted a `-0.0` to `0.0`.

Jeroen - could you easily test/review this on the two failing machines?  If it works across three architectures, I'll then apply the same technique to #10795, #10837 with some confidence.

Thanks for your patience with this (exasperating) numerical work.

Rob



---

archive/issue_comments_106042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,6 +38,7 @@\n \n **Apply:**\n 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n+2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-08-25T02:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106042",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,6 +38,7 @@
 
 **Apply:**
 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
+2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_106043.json:
```json
{
    "body": "Changed keywords from **** to **sd32**",
    "created_at": "2011-08-25T18:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106043",
    "user": "https://github.com/rbeezer"
}
```

Changed keywords from **** to **sd32**



---

archive/issue_events_125846.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-09-19T02:50:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125846"
}
```



---

archive/issue_events_125847.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-09-19T02:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125847"
}
```



---

archive/issue_comments_106044.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nWhat's needed now?  Jeroen just needs to test this last doctest fix on flavius and bsd?  (or should we set it back to positive review, since the doctest changes are minor, and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?)\n\nI think I would prefer setting this back to positive review, since Jeroen will be implicitly testing it on those two platforms when he merges it (as long as it still passes on Rob's platform).",
    "created_at": "2011-12-04T00:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106044",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:26'>Comment 26:</a>
What's needed now?  Jeroen just needs to test this last doctest fix on flavius and bsd?  (or should we set it back to positive review, since the doctest changes are minor, and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?)

I think I would prefer setting this back to positive review, since Jeroen will be implicitly testing it on those two platforms when he merges it (as long as it still passes on Rob's platform).



---

archive/issue_comments_106045.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThere are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:\n\n```\nsage -t --long \"devel/sage/sage/matrix/matrix2.pyx\"         \n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8072:\n    sage: G*G.transpose()\nExpected:\n    [      1 0.?e-37 0.?e-35]\n    [0.?e-37       1 0.?e-35]\n    [0.?e-35 0.?e-35       1]\nGot:\n    [      1 0.?e-18 0.?e-19]\n    [0.?e-18       1 0.?e-18]\n    [0.?e-19 0.?e-18       1]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8087:\n    sage: G\nExpected:\n    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]\n    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]\n    [  0.3842387256410419? - 0.5694103019142261?*I  0.1416892863096208? - 0.06139779741542298?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]\nGot:\n    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]\n    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]\n    [  0.3842387256410419? - 0.5694103019142261?*I   0.1416892863096208? - 0.0613977974154230?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8091:\n    sage: M\nExpected:\n    [                        5.196152422706632?                                          0                                          0]\n    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-37*I                                          0]\n    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-35*I]\nGot:\n    [                        5.196152422706632?                                          0                                          0]\n    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-17*I                                          0]\n    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8095:\n    sage: M*G-A\nExpected:\n    [            0.?e-37 0.?e-37 + 0.?e-37*I 0.?e-37 + 0.?e-37*I             0.?e-37]\n    [0.?e-36 + 0.?e-36*I 0.?e-35 + 0.?e-36*I 0.?e-36 + 0.?e-36*I 0.?e-36 + 0.?e-36*I]\n    [0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I]\nGot:\n    [            0.?e-18 0.?e-18 + 0.?e-18*I 0.?e-18 + 0.?e-17*I             0.?e-18]\n    [0.?e-17 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-17 + 0.?e-16*I]\n    [0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8099:\n    sage: G*G.conjugate().transpose()\nExpected:\n    [1.000000000000000? + 0.?e-37*I            0.?e-37 + 0.?e-37*I            0.?e-36 + 0.?e-36*I]\n    [           0.?e-37 + 0.?e-37*I 1.000000000000000? + 0.?e-37*I            0.?e-36 + 0.?e-36*I]\n    [           0.?e-36 + 0.?e-36*I            0.?e-36 + 0.?e-36*I 1.000000000000000? + 0.?e-35*I]\nGot:\n    [1.000000000000000? + 0.?e-18*I            0.?e-18 + 0.?e-18*I            0.?e-17 + 0.?e-16*I]\n    [           0.?e-18 + 0.?e-18*I 1.000000000000000? + 0.?e-18*I            0.?e-16 + 0.?e-17*I]\n    [           0.?e-17 + 0.?e-16*I            0.?e-16 + 0.?e-17*I 1.000000000000000? + 0.?e-16*I]\n**********************************************************************\nFile \"/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx\", line 8130:\n    sage: G*G.transpose()\nExpected:\n    [      1 0.?e-35]\n    [0.?e-35       1]\nGot:\n    [      1 0.?e-18]\n    [0.?e-18       1]\n**********************************************************************\n1 items had failures:\n   6 of  68 in __main__.example_97\n***Test Failed*** 6 failures.\nFor whitespace errors, see the file /Users/palmieri/.sage//tmp/matrix2_40831.py\n\t [37.9 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t --long \"devel/sage/sage/matrix/matrix2.pyx\"\nTotal time for all tests: 37.9 seconds\n```",
    "created_at": "2011-12-04T00:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106045",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'>Comment 27:</a>
There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:

```
sage -t --long "devel/sage/sage/matrix/matrix2.pyx"         
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8072:
    sage: G*G.transpose()
Expected:
    [      1 0.?e-37 0.?e-35]
    [0.?e-37       1 0.?e-35]
    [0.?e-35 0.?e-35       1]
Got:
    [      1 0.?e-18 0.?e-19]
    [0.?e-18       1 0.?e-18]
    [0.?e-19 0.?e-18       1]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8087:
    sage: G
Expected:
    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]
    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]
    [  0.3842387256410419? - 0.5694103019142261?*I  0.1416892863096208? - 0.06139779741542298?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]
Got:
    [                         -0.3849001794597505?  -0.1924500897298753? - 0.1924500897298753?*I   0.3849001794597505? + 0.7698003589195010?*I                          -0.1924500897298753?]
    [-0.06165497274852388? - 0.1387236886841787?*I  0.8188551068163327? - 0.10018933071635130?*I  0.2003786614327026? + 0.05394810115495839?*I  0.02119389688230508? + 0.5028733714801478?*I]
    [  0.3842387256410419? - 0.5694103019142261?*I   0.1416892863096208? - 0.0613977974154230?*I  0.4633778333528464? - 0.01285039016180503?*I  0.02658516588219101? - 0.5373044261814995?*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8091:
    sage: M
Expected:
    [                        5.196152422706632?                                          0                                          0]
    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-37*I                                          0]
    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-35*I]
Got:
    [                        5.196152422706632?                                          0                                          0]
    [-3.079201435678004? + 3.464101615137755?*I             19.22286447225071? + 0.?e-17*I                                          0]
    [  4.426352063787131? - 8.66025403784439?*I -5.117362738127481? - 3.502773139275513?*I             7.480012456446966? + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8095:
    sage: M*G-A
Expected:
    [            0.?e-37 0.?e-37 + 0.?e-37*I 0.?e-37 + 0.?e-37*I             0.?e-37]
    [0.?e-36 + 0.?e-36*I 0.?e-35 + 0.?e-36*I 0.?e-36 + 0.?e-36*I 0.?e-36 + 0.?e-36*I]
    [0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I 0.?e-35 + 0.?e-35*I]
Got:
    [            0.?e-18 0.?e-18 + 0.?e-18*I 0.?e-18 + 0.?e-17*I             0.?e-18]
    [0.?e-17 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-16 + 0.?e-17*I 0.?e-17 + 0.?e-16*I]
    [0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I 0.?e-16 + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8099:
    sage: G*G.conjugate().transpose()
Expected:
    [1.000000000000000? + 0.?e-37*I            0.?e-37 + 0.?e-37*I            0.?e-36 + 0.?e-36*I]
    [           0.?e-37 + 0.?e-37*I 1.000000000000000? + 0.?e-37*I            0.?e-36 + 0.?e-36*I]
    [           0.?e-36 + 0.?e-36*I            0.?e-36 + 0.?e-36*I 1.000000000000000? + 0.?e-35*I]
Got:
    [1.000000000000000? + 0.?e-18*I            0.?e-18 + 0.?e-18*I            0.?e-17 + 0.?e-16*I]
    [           0.?e-18 + 0.?e-18*I 1.000000000000000? + 0.?e-18*I            0.?e-16 + 0.?e-17*I]
    [           0.?e-17 + 0.?e-16*I            0.?e-16 + 0.?e-17*I 1.000000000000000? + 0.?e-16*I]
**********************************************************************
File "/Applications/sage_builds/sage-4.8.alpha3/devel/sage/sage/matrix/matrix2.pyx", line 8130:
    sage: G*G.transpose()
Expected:
    [      1 0.?e-35]
    [0.?e-35       1]
Got:
    [      1 0.?e-18]
    [0.?e-18       1]
**********************************************************************
1 items had failures:
   6 of  68 in __main__.example_97
***Test Failed*** 6 failures.
For whitespace errors, see the file /Users/palmieri/.sage//tmp/matrix2_40831.py
	 [37.9 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t --long "devel/sage/sage/matrix/matrix2.pyx"
Total time for all tests: 37.9 seconds
```



---

archive/issue_events_125848.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-04T00:48:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125848"
}
```



---

archive/issue_events_125849.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2011-12-04T00:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125849"
}
```



---

archive/issue_comments_106046.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@jasongrout](#comment%3A26):\n> and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?\n\nYes.  If you think a patch looks reasonable and has been tested to some extent, just set it to positive_review.",
    "created_at": "2011-12-04T11:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106046",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@jasongrout](#comment%3A26):
> and depend on the more widespread release testing to catch it on the platforms we don't have easy access to?

Yes.  If you think a patch looks reasonable and has been tested to some extent, just set it to positive_review.



---

archive/issue_comments_106047.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@jhpalmieri](#comment%3A27):\n> There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:\n\nJason, John, Jeroen - thanks for the attention to this, and the other outstanding linear algebra tickets.  I've been on an (extended) Sage vacation, but I think you are reeling me back in.  ;-)\n\nThis does need work.  Fix at #11544 prevents printing from having a side-effect that increases precision over QQbar.  I think this work predates that change.  So it does need work at the moment.\n\nI am building a fresh alpha right now and will try to get on top of outstanding tickets later today.  It'd be great to get a few of thse into 4.8 if it is not too late - I'll be using this stuff in class in the spring with my Sage-enabled textbook and a few of us are working on this CRC linear algebra handbook chapter that will be doctestable.\n\nThanks,\nRob",
    "created_at": "2011-12-04T19:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106047",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@jhpalmieri](#comment%3A27):
> There are errors on sage.math and on OS X 10.6.8, applied to Sage 4.8.alpha3:

Jason, John, Jeroen - thanks for the attention to this, and the other outstanding linear algebra tickets.  I've been on an (extended) Sage vacation, but I think you are reeling me back in.  ;-)

This does need work.  Fix at #11544 prevents printing from having a side-effect that increases precision over QQbar.  I think this work predates that change.  So it does need work at the moment.

I am building a fresh alpha right now and will try to get on top of outstanding tickets later today.  It'd be great to get a few of thse into 4.8 if it is not too late - I'll be using this stuff in class in the spring with my Sage-enabled textbook and a few of us are working on this CRC linear algebra handbook chapter that will be doctestable.

Thanks,
Rob



---

archive/issue_comments_106048.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,6 +39,7 @@\n **Apply:**\n 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)\n 2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)\n+3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)\n \n **Depends on:**\n 1. #10536\n``````\n",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106048",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,6 +39,7 @@
 **Apply:**
 1. [attachment: trac_10791-fix-gram-schmidt-v3.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-fix-gram-schmidt-v3.patch.gz)
 2. [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)
+3. [attachment: trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)
 
 **Depends on:**
 1. #10536
``````




---

archive/issue_comments_106049.json:
```json
{
    "body": "Changed reviewer from **Martin Raum** to **Martin Raum, John Palmieri**",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106049",
    "user": "https://github.com/rbeezer"
}
```

Changed reviewer from **Martin Raum** to **Martin Raum, John Palmieri**



---

archive/issue_events_125850.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-05T05:12:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125850"
}
```



---

archive/issue_events_125851.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-05T05:12:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125851"
}
```



---

archive/issue_comments_106050.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nAttachment: **[trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)**\n\nOh man, that was painful.  I am really rusty.  Use it or lose it.  But I'm back.\n\nPatch fixes failing doctests over QQbar, mostly by checking small norms on matrices which should be the zero matrix.  A bit brutal, but we don't have `round()` and `zero_at()` for matrices over QQbar.  (Those'd be a nice additions, no?).\n\nI got identical failures on Ubuntu.  Now passing all tests in matrix/matrix2.pyx.  My 4.8.alpha3 has some weirdness (Atlas segfaults), but I think this should be OK.\n\nThanks for the look, John and Jason.  Off to investigate a few other things.\n\nRob",
    "created_at": "2011-12-05T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106050",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:30'>Comment 30:</a>
Attachment: **[trac_10791-gram-schmidt-qqbar-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-qqbar-doctests.patch.gz)**

Oh man, that was painful.  I am really rusty.  Use it or lose it.  But I'm back.

Patch fixes failing doctests over QQbar, mostly by checking small norms on matrices which should be the zero matrix.  A bit brutal, but we don't have `round()` and `zero_at()` for matrices over QQbar.  (Those'd be a nice additions, no?).

I got identical failures on Ubuntu.  Now passing all tests in matrix/matrix2.pyx.  My 4.8.alpha3 has some weirdness (Atlas segfaults), but I think this should be OK.

Thanks for the look, John and Jason.  Off to investigate a few other things.

Rob



---

archive/issue_comments_106051.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nLooks good.  Tested on OSX 10.6.8 and passes tests in matrix/*.pyx on sage-4.7.2.alpha3 (+some other patches I've applied)",
    "created_at": "2011-12-13T15:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106051",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:31'>Comment 31:</a>
Looks good.  Tested on OSX 10.6.8 and passes tests in matrix/*.pyx on sage-4.7.2.alpha3 (+some other patches I've applied)



---

archive/issue_events_125852.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T15:44:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125852"
}
```



---

archive/issue_events_125853.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-13T15:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125853"
}
```



---

archive/issue_comments_106052.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nThe commit message of [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz) needs to be updated.",
    "created_at": "2011-12-16T10:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106052",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
The commit message of [attachment: trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz) needs to be updated.



---

archive/issue_events_125854.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T10:02:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125854"
}
```



---

archive/issue_events_125855.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T10:02:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125855"
}
```



---

archive/issue_comments_106053.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nAttachment: **[trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)**\n\nJeroen,\n\nMy mistake - very sorry about that.\n\nI have replaced the problem patch with one containing a commit message.\n\nRob",
    "created_at": "2011-12-16T16:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106053",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:33'>Comment 33:</a>
Attachment: **[trac_10791-gram-schmidt-negative-zero.patch.gz](https://github.com/sagemath/sage/files/ticket10791/trac_10791-gram-schmidt-negative-zero.patch.gz)**

Jeroen,

My mistake - very sorry about that.

I have replaced the problem patch with one containing a commit message.

Rob



---

archive/issue_events_125856.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-16T16:04:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125856"
}
```



---

archive/issue_events_125857.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-12-16T16:04:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125857"
}
```



---

archive/issue_events_125858.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:12:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125858"
}
```



---

archive/issue_events_125859.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:12:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10791#event-125859"
}
```



---

archive/issue_comments_106054.json:
```json
{
    "body": "Merged: **sage-4.8.alpha5**",
    "created_at": "2011-12-17T09:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10791#issuecomment-106054",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha5**
