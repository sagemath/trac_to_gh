# Issue 10369: Yet another bug in factorization over number fields

archive/issues_010368.json:
```json
{
    "body": "I have found several issues factoring polynomials over number fields.\n\n**First issue**, fixed by #10430 (see also #10279):\n\n```\nsage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\nsage: l = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t\nsage: factor(l)\n```\n\nDepending on the execution I get two answers.  A wrong answer\n\n```\n(-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t^4 * (t^6 + (-19/7*a^5 - 17/7*a^4 - 15/7*a^3 - 13/7*a^2 - 11/7*a - 9/7)*t^5 + (2*a^5 - 10/7*a^4 - 16/7*a^3 + 10/7*a^2 - 2/7*a + 18/7)*t^4 + (-40/7*a^5 - 8/7*a^4 - 40/7*a^3 - 48/7*a^2 - 32/7)*t^3 + (26/7*a^5 - 6/7*a^4 + 26/7*a^3 - 6/7*a^2 - 4/7*a + 34/7)*t^2 + (-20/7*a^5 - 4/7*a^4 - 20/7*a^3 - 4/7*a^2 - 20/7*a - 16/7)*t + 2/7*a^5 - 2/7*a^4 + 2/7*a^3 - 2/7*a^2 + 2/7*a - 2/7)\n```\nor a correct answer:\n\n```\n(-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t * (t - a^5 - a^4 - a^3 - a^2 - a - 1)^4 * (t^5 + (-12/7*a^5 - 10/7*a^4 - 8/7*a^3 - 6/7*a^2 - 4/7*a - 2/7)*t^4 + (12/7*a^5 - 8/7*a^3 + 16/7*a^2 + 2/7*a + 20/7)*t^3 + (-20/7*a^5 - 20/7*a^3 - 20/7*a^2 + 4/7*a - 2)*t^2 + (12/7*a^5 + 12/7*a^3 + 2/7*a + 16/7)*t - 4/7*a^5 - 4/7*a^3 - 4/7*a - 2/7)\n```\n\n**Second issue:**\n\n```\nsage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\nsage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\nsage: factor(l2)  # WARNING --- eats all memory\n```\n\nIt is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session of what actually happens (note that `l2` is not monic):\n\n```\nK = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)\nf = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5\nnffactor(K, f)\n```\n\nSecond issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.\n\nDependencies: #10430, #10279.\n\n**Assignee:** tbd\n\n**CC:**  @jdemeyer\n\n**Keywords:** factorization, number fields\n\n**Resolution:** fixed\n\n**Author:** Jeroen Demeyer\n\n**Reviewer:** Luis Felipe Tabera Alonso\n\n**Upstream:** Fixed upstream, but not in a stable release.\n\n**Merged:** sage-4.6.2.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/10369\n\n",
    "closed_at": "2011-01-25T08:15:43Z",
    "created_at": "2010-12-02T15:15:28Z",
    "labels": [
        "component: factorization",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Yet another bug in factorization over number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10369",
    "user": "https://github.com/lftabera"
}
```
I have found several issues factoring polynomials over number fields.

**First issue**, fixed by #10430 (see also #10279):

```
sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
sage: l = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t
sage: factor(l)
```

Depending on the execution I get two answers.  A wrong answer

```
(-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t^4 * (t^6 + (-19/7*a^5 - 17/7*a^4 - 15/7*a^3 - 13/7*a^2 - 11/7*a - 9/7)*t^5 + (2*a^5 - 10/7*a^4 - 16/7*a^3 + 10/7*a^2 - 2/7*a + 18/7)*t^4 + (-40/7*a^5 - 8/7*a^4 - 40/7*a^3 - 48/7*a^2 - 32/7)*t^3 + (26/7*a^5 - 6/7*a^4 + 26/7*a^3 - 6/7*a^2 - 4/7*a + 34/7)*t^2 + (-20/7*a^5 - 4/7*a^4 - 20/7*a^3 - 4/7*a^2 - 20/7*a - 16/7)*t + 2/7*a^5 - 2/7*a^4 + 2/7*a^3 - 2/7*a^2 + 2/7*a - 2/7)
```
or a correct answer:

```
(-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t * (t - a^5 - a^4 - a^3 - a^2 - a - 1)^4 * (t^5 + (-12/7*a^5 - 10/7*a^4 - 8/7*a^3 - 6/7*a^2 - 4/7*a - 2/7)*t^4 + (12/7*a^5 - 8/7*a^3 + 16/7*a^2 + 2/7*a + 20/7)*t^3 + (-20/7*a^5 - 20/7*a^3 - 20/7*a^2 + 4/7*a - 2)*t^2 + (12/7*a^5 + 12/7*a^3 + 2/7*a + 16/7)*t - 4/7*a^5 - 4/7*a^3 - 4/7*a - 2/7)
```

**Second issue:**

```
sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
sage: factor(l2)  # WARNING --- eats all memory
```

It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session of what actually happens (note that `l2` is not monic):

```
K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)
f = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5
nffactor(K, f)
```

Second issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.

Dependencies: #10430, #10279.

**Assignee:** tbd

**CC:**  @jdemeyer

**Keywords:** factorization, number fields

**Resolution:** fixed

**Author:** Jeroen Demeyer

**Reviewer:** Luis Felipe Tabera Alonso

**Upstream:** Fixed upstream, but not in a stable release.

**Merged:** sage-4.6.2.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/10369





---

archive/issue_comments_134499.json:
```json
{
    "body": "<a id='comment:1'></a>\nI think this is very likely a pari bug, and is the same one ([http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132)) that was fixed in response to #10279.  If I'm right, it would be solved by #10430.\n\nThis is the simplest example (of the first problem) that I have found:\n\n```\ntrousseau-bash% sage-4.6/sage\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: L.<a> = QuadraticField(3)\nsage: PL.<y> = L[]\nsage: (y*(y^2 - (1 + a)/3)*(y^2 - a/2)^2).factor()\ny^3 * (y^4 + (-5/6*a - 1/3)*y^2 + 1/6*a + 1/2)\n```\nThis is the equivalent in pari (producing the same erroneous result):\n| Sage Version 4.6, Release Date: 2010-10-30                         |\n| Type notebook() for the GUI, and license() for information.        |\n\n```\ntrousseau-bash% sage-4.6/sage -gp\n                   GP/PARI CALCULATOR Version 2.4.3 (development svn-12577:12605)\n                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version\n...\nparisize = 8000000, primelimit = 500509\n? K = nfinit(a^2 - 3);\n? f = x*(x^2 + Mod(-(a + 1)/3, a^2 - 3))*(x^2 + Mod(-a/2, a^2 - 3))^2;\n? nffactor(K, f)\n%1 = \n[x 3]\n\n[x^4 + Mod(-5/6*a - 1/3, a^2 - 3)*x^2 + Mod(1/6*a + 1/2, a^2 - 3) 1]\n\n```\nBut with the version of pari in sage 4.5.3 the result is correct:\n\n```\ntrousseau-bash% sage-4.5.3/sage -gp\n                            GP/PARI CALCULATOR Version 2.3.5 (released)\n                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version\n ...\nparisize = 8000000, primelimit = 500000\n? K = nfinit(a^2 - 3);\n? f = x*(x^2 + Mod(-(a + 1)/3, a^2 - 3))*(x^2 + Mod(-a/2, a^2 - 3))^2;\n? nffactor(K, f)\n%1 = \n[x 1]\n\n[x^2 + Mod(-1/2*a, a^2 - 3) 2]\n\n[x^2 + Mod(-1/3*a - 1/3, a^2 - 3) 1]\n\n```",
    "created_at": "2010-12-10T13:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134499",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:1'></a>
I think this is very likely a pari bug, and is the same one ([http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1132)) that was fixed in response to #10279.  If I'm right, it would be solved by #10430.

This is the simplest example (of the first problem) that I have found:

```
trousseau-bash% sage-4.6/sage
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: L.<a> = QuadraticField(3)
sage: PL.<y> = L[]
sage: (y*(y^2 - (1 + a)/3)*(y^2 - a/2)^2).factor()
y^3 * (y^4 + (-5/6*a - 1/3)*y^2 + 1/6*a + 1/2)
```
This is the equivalent in pari (producing the same erroneous result):
| Sage Version 4.6, Release Date: 2010-10-30                         |
| Type notebook() for the GUI, and license() for information.        |

```
trousseau-bash% sage-4.6/sage -gp
                   GP/PARI CALCULATOR Version 2.4.3 (development svn-12577:12605)
                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version
...
parisize = 8000000, primelimit = 500509
? K = nfinit(a^2 - 3);
? f = x*(x^2 + Mod(-(a + 1)/3, a^2 - 3))*(x^2 + Mod(-a/2, a^2 - 3))^2;
? nffactor(K, f)
%1 = 
[x 3]

[x^4 + Mod(-5/6*a - 1/3, a^2 - 3)*x^2 + Mod(1/6*a + 1/2, a^2 - 3) 1]

```
But with the version of pari in sage 4.5.3 the result is correct:

```
trousseau-bash% sage-4.5.3/sage -gp
                            GP/PARI CALCULATOR Version 2.3.5 (released)
                    i386 running darwin (x86-64/GMP-4.2.1 kernel) 64-bit version
 ...
parisize = 8000000, primelimit = 500000
? K = nfinit(a^2 - 3);
? f = x*(x^2 + Mod(-(a + 1)/3, a^2 - 3))*(x^2 + Mod(-a/2, a^2 - 3))^2;
? nffactor(K, f)
%1 = 
[x 1]

[x^2 + Mod(-1/2*a, a^2 - 3) 2]

[x^2 + Mod(-1/3*a - 1/3, a^2 - 3) 1]

```



---

archive/issue_comments_134500.json:
```json
{
    "body": "<a id='comment:2'></a>\nTo the submitter of the bug: your `l` and `l2` in the report are the same and this is probably not what you meant.\n\nI can confirm that the first bug involving `l` is indeed fixed by #10430.",
    "created_at": "2010-12-10T13:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134500",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
To the submitter of the bug: your `l` and `l2` in the report are the same and this is probably not what you meant.

I can confirm that the first bug involving `l` is indeed fixed by #10430.



---

archive/issue_comments_134501.json:
```json
{
    "body": "<a id='comment:3'></a>\nInteresting, I was not able to reproduce the problem in gp. But being a pari bug makes sense.\n\nI have corrected the second example, with gp I have no problems to factor the polynomial. Maybe the problem is with libpari.",
    "created_at": "2010-12-10T17:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134501",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:3'></a>
Interesting, I was not able to reproduce the problem in gp. But being a pari bug makes sense.

I have corrected the second example, with gp I have no problems to factor the polynomial. Maybe the problem is with libpari.



---

archive/issue_comments_134502.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -27,7 +27,7 @@\n Next example is different:\n \n ```\n-sage: l2 = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t\n+sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n ```\n \n-The pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.\n+It is t**5 times an ireducible polynomial. With the Gp pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.\n``````\n",
    "created_at": "2010-12-10T17:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134502",
    "user": "https://github.com/lftabera"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -27,7 +27,7 @@
 Next example is different:
 
 ```
-sage: l2 = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t
+sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
 ```
 
-The pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.
+It is t**5 times an ireducible polynomial. With the Gp pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.
``````




---

archive/issue_comments_134503.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-I have found several issues factoring polynomials over number fields. This time pari seems to work ok, so it is not related to #10279\n+I have found several issues factoring polynomials over number fields.\n \n+**First issue, fixed by #10430:**\n \n ```\n sage: N.<a>=NumberField(x^6+x^5+x^4+x^3+x^2+x+1)\n@@ -8,26 +9,31 @@\n sage: factor(l)\n ```\n \n-Depending on the execution I get two answers\n-\n-wrong answer:\n+Depending on the execution I get two answers.  A wrong answer\n \n ```\n (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t^4 * (t^6 + (-19/7*a^5 - 17/7*a^4 - 15/7*a^3 - 13/7*a^2 - 11/7*a - 9/7)*t^5 + (2*a^5 - 10/7*a^4 - 16/7*a^3 + 10/7*a^2 - 2/7*a + 18/7)*t^4 + (-40/7*a^5 - 8/7*a^4 - 40/7*a^3 - 48/7*a^2 - 32/7)*t^3 + (26/7*a^5 - 6/7*a^4 + 26/7*a^3 - 6/7*a^2 - 4/7*a + 34/7)*t^2 + (-20/7*a^5 - 4/7*a^4 - 20/7*a^3 - 4/7*a^2 - 20/7*a - 16/7)*t + 2/7*a^5 - 2/7*a^4 + 2/7*a^3 - 2/7*a^2 + 2/7*a - 2/7)\n ```\n-\n-solution that looks right:\n+or a correct answer:\n \n ```\n (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t * (t - a^5 - a^4 - a^3 - a^2 - a - 1)^4 * (t^5 + (-12/7*a^5 - 10/7*a^4 - 8/7*a^3 - 6/7*a^2 - 4/7*a - 2/7)*t^4 + (12/7*a^5 - 8/7*a^3 + 16/7*a^2 + 2/7*a + 20/7)*t^3 + (-20/7*a^5 - 20/7*a^3 - 20/7*a^2 + 4/7*a - 2)*t^2 + (12/7*a^5 + 12/7*a^3 + 2/7*a + 16/7)*t - 4/7*a^5 - 4/7*a^3 - 4/7*a - 2/7)\n ```\n \n-With pari I only get the second answer, so it looks like a sage problem.\n-\n-Next example is different:\n+**Second issue:**\n \n ```\n sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n ```\n \n-It is t**5 times an ireducible polynomial. With the Gp pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.\n+It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:\n+\n+```\n+  t; K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)\n+  l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n+  nffactor(K, l2)\n+%3 =\n+[t 5]\n+\n+[t^5 + Mod(-40/7*a^5 - 38/7*a^4 - 36/7*a^3 - 34/7*a^2 - 32/7*a - 30/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^4 + Mod(60/7*a^5 - 30/7*a^4 - 18/7*a^3 - 9/7*a^2 - 3/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^3 + Mod(60/7*a^4 - 40/7*a^3 - 16/7*a^2 - 4/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^2 + Mod(30/7*a^3 - 25/7*a^2 - 5/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t + Mod(6/7*a^2 - 6/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1) 1]\n+```\n``````\n",
    "created_at": "2010-12-10T20:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134503",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-I have found several issues factoring polynomials over number fields. This time pari seems to work ok, so it is not related to #10279
+I have found several issues factoring polynomials over number fields.
 
+**First issue, fixed by #10430:**
 
 ```
 sage: N.<a>=NumberField(x^6+x^5+x^4+x^3+x^2+x+1)
@@ -8,26 +9,31 @@
 sage: factor(l)
 ```
 
-Depending on the execution I get two answers
-
-wrong answer:
+Depending on the execution I get two answers.  A wrong answer
 
 ```
 (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t^4 * (t^6 + (-19/7*a^5 - 17/7*a^4 - 15/7*a^3 - 13/7*a^2 - 11/7*a - 9/7)*t^5 + (2*a^5 - 10/7*a^4 - 16/7*a^3 + 10/7*a^2 - 2/7*a + 18/7)*t^4 + (-40/7*a^5 - 8/7*a^4 - 40/7*a^3 - 48/7*a^2 - 32/7)*t^3 + (26/7*a^5 - 6/7*a^4 + 26/7*a^3 - 6/7*a^2 - 4/7*a + 34/7)*t^2 + (-20/7*a^5 - 4/7*a^4 - 20/7*a^3 - 4/7*a^2 - 20/7*a - 16/7)*t + 2/7*a^5 - 2/7*a^4 + 2/7*a^3 - 2/7*a^2 + 2/7*a - 2/7)
 ```
-
-solution that looks right:
+or a correct answer:
 
 ```
 (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7) * t * (t - a^5 - a^4 - a^3 - a^2 - a - 1)^4 * (t^5 + (-12/7*a^5 - 10/7*a^4 - 8/7*a^3 - 6/7*a^2 - 4/7*a - 2/7)*t^4 + (12/7*a^5 - 8/7*a^3 + 16/7*a^2 + 2/7*a + 20/7)*t^3 + (-20/7*a^5 - 20/7*a^3 - 20/7*a^2 + 4/7*a - 2)*t^2 + (12/7*a^5 + 12/7*a^3 + 2/7*a + 16/7)*t - 4/7*a^5 - 4/7*a^3 - 4/7*a - 2/7)
 ```
 
-With pari I only get the second answer, so it looks like a sage problem.
-
-Next example is different:
+**Second issue:**
 
 ```
 sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
 ```
 
-It is t**5 times an ireducible polynomial. With the Gp pari released with sage computes the factorization without problems, but trying to compute the factorization with sage the program starts to eat all available ram and you have to kill the program.
+It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:
+
+```
+  t; K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)
+  l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
+  nffactor(K, l2)
+%3 =
+[t 5]
+
+[t^5 + Mod(-40/7*a^5 - 38/7*a^4 - 36/7*a^3 - 34/7*a^2 - 32/7*a - 30/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^4 + Mod(60/7*a^5 - 30/7*a^4 - 18/7*a^3 - 9/7*a^2 - 3/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^3 + Mod(60/7*a^4 - 40/7*a^3 - 16/7*a^2 - 4/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^2 + Mod(30/7*a^3 - 25/7*a^2 - 5/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t + Mod(6/7*a^2 - 6/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1) 1]
+```
``````




---

archive/issue_comments_134504.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,8 +3,7 @@\n **First issue, fixed by #10430:**\n \n ```\n-sage: N.<a>=NumberField(x^6+x^5+x^4+x^3+x^2+x+1)\n-sage: K.<t>=N[]\n+sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\n sage: l = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t\n sage: factor(l)\n ```\n@@ -23,6 +22,7 @@\n **Second issue:**\n \n ```\n+sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\n sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n ```\n \n``````\n",
    "created_at": "2010-12-10T20:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134504",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,8 +3,7 @@
 **First issue, fixed by #10430:**
 
 ```
-sage: N.<a>=NumberField(x^6+x^5+x^4+x^3+x^2+x+1)
-sage: K.<t>=N[]
+sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
 sage: l = (-1/7*a^5 - 1/7*a^4 - 1/7*a^3 - 1/7*a^2 - 2/7*a - 1/7)*t^10 + (4/7*a^5 - 2/7*a^4 - 2/7*a^3 - 2/7*a^2 - 2/7*a - 6/7)*t^9 + (90/49*a^5 + 152/49*a^4 + 18/49*a^3 + 24/49*a^2 + 30/49*a + 36/49)*t^8 + (-10/49*a^5 + 10/7*a^4 + 198/49*a^3 - 102/49*a^2 - 60/49*a - 26/49)*t^7 + (40/49*a^5 + 45/49*a^4 + 60/49*a^3 + 277/49*a^2 - 204/49*a - 78/49)*t^6 + (90/49*a^5 + 110/49*a^4 + 2*a^3 + 80/49*a^2 + 46/7*a - 30/7)*t^5 + (30/7*a^5 + 260/49*a^4 + 250/49*a^3 + 232/49*a^2 + 32/7*a + 8)*t^4 + (-184/49*a^5 - 58/49*a^4 - 52/49*a^3 - 66/49*a^2 - 72/49*a - 72/49)*t^3 + (18/49*a^5 - 32/49*a^4 + 10/49*a^3 + 4/49*a^2)*t^2 + (2/49*a^4 - 4/49*a^3 + 2/49*a^2)*t
 sage: factor(l)
 ```
@@ -23,6 +22,7 @@
 **Second issue:**
 
 ```
+sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
 sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
 ```
 
``````




---

archive/issue_comments_134505.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n I have found several issues factoring polynomials over number fields.\n \n-**First issue, fixed by #10430:**\n+**First issue**, fixed by #10430 (see also #10279):\n \n ```\n sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\n@@ -24,6 +24,7 @@\n ```\n sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)\n sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n+sage: factor(l2)  # WARNING --- eats all memory\n ```\n \n It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:\n``````\n",
    "created_at": "2010-12-10T20:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134505",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 I have found several issues factoring polynomials over number fields.
 
-**First issue, fixed by #10430:**
+**First issue**, fixed by #10430 (see also #10279):
 
 ```
 sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
@@ -24,6 +24,7 @@
 ```
 sage: K.<a> = NumberField(x^6+x^5+x^4+x^3+x^2+x+1); t=polygen(K)
 sage: l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
+sage: factor(l2)  # WARNING --- eats all memory
 ```
 
 It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:
``````




---

archive/issue_comments_134506.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -27,14 +27,10 @@\n sage: factor(l2)  # WARNING --- eats all memory\n ```\n \n-It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:\n+It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session of what actually happens (note that `l2` is not monic):\n \n ```\n-  t; K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)\n-  l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5\n-  nffactor(K, l2)\n-%3 =\n-[t 5]\n-\n-[t^5 + Mod(-40/7*a^5 - 38/7*a^4 - 36/7*a^3 - 34/7*a^2 - 32/7*a - 30/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^4 + Mod(60/7*a^5 - 30/7*a^4 - 18/7*a^3 - 9/7*a^2 - 3/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^3 + Mod(60/7*a^4 - 40/7*a^3 - 16/7*a^2 - 4/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^2 + Mod(30/7*a^3 - 25/7*a^2 - 5/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t + Mod(6/7*a^2 - 6/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1) 1]\n+K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)\n+f = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5\n+nffactor(K, f)\n ```\n``````\n",
    "created_at": "2010-12-10T21:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134506",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -27,14 +27,10 @@
 sage: factor(l2)  # WARNING --- eats all memory
 ```
 
-It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session:
+It is t**5 times an ireducible polynomial. GP released with Sage computes the factorization without problems, but trying to compute the factorization with Sage the program starts to eat all available RAM and you have to kill the program.  GP session of what actually happens (note that `l2` is not monic):
 
 ```
-  t; K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)
-  l2 = (1/7*a^2 - 1/7*a)*t^10 + (4/7*a - 6/7)*t^9 + (102/49*a^5 + 99/49*a^4 + 96/49*a^3 + 93/49*a^2 + 90/49*a + 150/49)*t^8 + (-160/49*a^5 - 36/49*a^4 - 48/49*a^3 - 8/7*a^2 - 60/49*a - 60/49)*t^7 + (30/49*a^5 - 55/49*a^4 + 20/49*a^3 + 5/49*a^2)*t^6 + (6/49*a^4 - 12/49*a^3 + 6/49*a^2)*t^5
-  nffactor(K, l2)
-%3 =
-[t 5]
-
-[t^5 + Mod(-40/7*a^5 - 38/7*a^4 - 36/7*a^3 - 34/7*a^2 - 32/7*a - 30/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^4 + Mod(60/7*a^5 - 30/7*a^4 - 18/7*a^3 - 9/7*a^2 - 3/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^3 + Mod(60/7*a^4 - 40/7*a^3 - 16/7*a^2 - 4/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t^2 + Mod(30/7*a^3 - 25/7*a^2 - 5/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*t + Mod(6/7*a^2 - 6/7*a, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1) 1]
+K = nfinit(a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)
+f = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5
+nffactor(K, f)
 ```
``````




---

archive/issue_comments_134507.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -34,3 +34,5 @@\n f = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5\n nffactor(K, f)\n ```\n+\n+Second issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.\n``````\n",
    "created_at": "2010-12-10T21:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134507",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -34,3 +34,5 @@
 f = Mod(1, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^10 + Mod(4/7*a - 6/7, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^9 + Mod(9/49*a^2 - 3/7*a + 15/49, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^8 + Mod(8/343*a^3 - 32/343*a^2 + 40/343*a - 20/343, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^7 + Mod(5/2401*a^4 - 20/2401*a^3 + 40/2401*a^2 - 5/343*a + 15/2401, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^6 + Mod(-6/16807*a^4 + 12/16807*a^3 - 18/16807*a^2 + 12/16807*a - 6/16807, a^6 + a^5 + a^4 + a^3 + a^2 + a + 1)*x^5
 nffactor(K, f)
 ```
+
+Second issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.
``````




---

archive/issue_comments_134508.json:
```json
{
    "body": "<a id='comment:9'></a>\nAttachment [10369_nffactor.patch](tarball://root/attachments/some-uuid/ticket10369/10369_nffactor.patch) by @jdemeyer created at 2010-12-10 22:04:41",
    "created_at": "2010-12-10T22:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134508",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Attachment [10369_nffactor.patch](tarball://root/attachments/some-uuid/ticket10369/10369_nffactor.patch) by @jdemeyer created at 2010-12-10 22:04:41



---

archive/issue_comments_134509.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -36,3 +36,5 @@\n ```\n \n Second issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.\n+\n+Dependencies: #10430, #10279.\n``````\n",
    "created_at": "2010-12-10T22:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134509",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -36,3 +36,5 @@
 ```
 
 Second issue is [PARI bug 1141](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1141).  See #10430 for a fix.
+
+Dependencies: #10430, #10279.
``````




---

archive/issue_comments_134510.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-12-10T22:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134510",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_134511.json:
```json
{
    "body": "**Reviewer:** Luis Felipe Tabera Alonso",
    "created_at": "2010-12-15T12:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134511",
    "user": "https://github.com/lftabera"
}
```

**Reviewer:** Luis Felipe Tabera Alonso



---

archive/issue_comments_134512.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-12-15T12:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134512",
    "user": "https://github.com/lftabera"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_134513.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2010-12-15T12:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134513",
    "user": "https://github.com/lftabera"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_134514.json:
```json
{
    "body": "<a id='comment:10'></a>\nI confirm that the patch solves the problems mentioned for these cases and also some others I have found. With the latests versions of PARI we do not need to be so careful with non-monic polynomials. In the future we may consider eliminating the unit parameter from _factor_pari_helper. It is used right now in a few other places right now though.\n\nThe patch also includes some documentation corrections.\n\nDepends on: #10430, #10279. \n\nPositive review.",
    "created_at": "2010-12-15T12:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134514",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:10'></a>
I confirm that the patch solves the problems mentioned for these cases and also some others I have found. With the latests versions of PARI we do not need to be so careful with non-monic polynomials. In the future we may consider eliminating the unit parameter from _factor_pari_helper. It is used right now in a few other places right now though.

The patch also includes some documentation corrections.

Depends on: #10430, #10279. 

Positive review.



---

archive/issue_comments_134515.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2010-12-15T17:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134515",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "N/A" to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_134516.json:
```json
{
    "body": "**Merged:** sage-4.6.2.alpha1",
    "created_at": "2011-01-19T22:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134516",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.2.alpha1



---

archive/issue_events_032071.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T22:23:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10369#event-32071"
}
```



---

archive/issue_comments_134517.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-01-19T22:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134517",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_134518.json:
```json
{
    "body": "**Changing status** from closed to new.",
    "created_at": "2011-01-20T09:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134518",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from closed to new.



---

archive/issue_comments_134519.json:
```json
{
    "body": "**Resolution changed** from fixed to .",
    "created_at": "2011-01-20T09:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134519",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution changed** from fixed to .



---

archive/issue_comments_134520.json:
```json
{
    "body": "**Changing merged** from \"sage-4.6.2.alpha1\" to \"\".",
    "created_at": "2011-01-20T09:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134520",
    "user": "https://github.com/jdemeyer"
}
```

**Changing merged** from "sage-4.6.2.alpha1" to "".



---

archive/issue_comments_134521.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-01-20T09:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134521",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_134522.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-01-20T09:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134522",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_032072.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-25T08:15:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10369#event-32072"
}
```



---

archive/issue_comments_134523.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-01-25T08:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134523",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_134524.json:
```json
{
    "body": "**Merged:** sage-4.6.2.alpha2",
    "created_at": "2011-01-25T08:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10369#issuecomment-134524",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.2.alpha2
