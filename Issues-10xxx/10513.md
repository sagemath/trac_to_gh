# Issue 10513: Coercion and category framework for modules

archive/issues_010460.json:
```json
{
    "body": "Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.\n\nMoreover, some coercions go wrong:\n\n```\nsage: V3 = QQ^3\nsage: M = V3 / [[1,2,3]]\nsage: V2 = QQ^2\nsage: N = V3 / [[1,1,1]]\n# The quotient maps are of course coercions\nsage: f3M = M.coerce_map_from(V3)\nsage: f3N = N.coerce_map_from(V3)\n# The following is a bug...\nsage: V2.has_coerce_map_from(N)\nTrue\nsage: M.has_coerce_map_from(V2)\nTrue\nsage: N.has_coerce_map_from(V2)\nTrue\n#... because the composition of coercion\n# from N to V2 to M should be a coercion,\n# but it isn't:\nsage: M.has_coerce_map_from(N)\nFalse\n# Moreover, we obtain a non-commuting triangle of\n# coercions:\nsage: fM2 = V2.coerce_map_from(M)\nsage: fN2 = V2.coerce_map_from(N)\nsage: [fM2(f3M(x)) for x in V3.basis()]\n[(1, 0), (0, 1), (-1/3, -2/3)]\nsage: [fN2(f3N(x)) for x in V3.basis()]\n[(1, 0), (0, 1), (-1, -1)]\n```\n\nComparison goes wrong as well:\n\n```\nsage: V2==M\nTrue\nsage: M==V2\nFalse\n```\n\nIn the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.\n\n\nDepends on #16507\n\nDepends on #17578\n\nDepends on #17561\n\nDepends on #18040\n\nDepends on #17562\n\n**Assignee:** @robertwb\n\n**CC:**  @vbraun @novoselt jpflori\n\n**Keywords:** coercion, category framework, modules\n\n**Branch/Commit:** [9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)\n\n**Reviewer:** Jean-Pierre Flori, Vincent Delecroix\n\n**Author:** Simon King, Peter Bruin\n\nIssue created by migration from https://trac.sagemath.org/ticket/10513\n\n",
    "closed_at": "2015-04-15T13:58:24Z",
    "created_at": "2010-12-22T09:20:06Z",
    "labels": [
        "component: coercion",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "title": "Coercion and category framework for modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10513",
    "user": "https://github.com/simon-king-jena"
}
```
Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.

Moreover, some coercions go wrong:

```
sage: V3 = QQ^3
sage: M = V3 / [[1,2,3]]
sage: V2 = QQ^2
sage: N = V3 / [[1,1,1]]
# The quotient maps are of course coercions
sage: f3M = M.coerce_map_from(V3)
sage: f3N = N.coerce_map_from(V3)
# The following is a bug...
sage: V2.has_coerce_map_from(N)
True
sage: M.has_coerce_map_from(V2)
True
sage: N.has_coerce_map_from(V2)
True
#... because the composition of coercion
# from N to V2 to M should be a coercion,
# but it isn't:
sage: M.has_coerce_map_from(N)
False
# Moreover, we obtain a non-commuting triangle of
# coercions:
sage: fM2 = V2.coerce_map_from(M)
sage: fN2 = V2.coerce_map_from(N)
sage: [fM2(f3M(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1/3, -2/3)]
sage: [fN2(f3N(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1, -1)]
```

Comparison goes wrong as well:

```
sage: V2==M
True
sage: M==V2
False
```

In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.


Depends on #16507

Depends on #17578

Depends on #17561

Depends on #18040

Depends on #17562

**Assignee:** @robertwb

**CC:**  @vbraun @novoselt jpflori

**Keywords:** coercion, category framework, modules

**Branch/Commit:** [9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)

**Reviewer:** Jean-Pierre Flori, Vincent Delecroix

**Author:** Simon King, Peter Bruin

Issue created by migration from https://trac.sagemath.org/ticket/10513





---

archive/attachments_014221.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac10513-coercion_and_categories_for_modules.patch",
    "asset_url": "tarball://root/attachments/ticket10513/trac10513-coercion_and_categories_for_modules.patch",
    "created_at": "2010-12-22T09:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10513/trac10513-coercion_and_categories_for_modules.patch",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_101529.json:
```json
{
    "body": "**Attachment:** [trac10513-coercion_and_categories_for_modules.patch](https://github.com/sagemath/sage/files/ticket10513/trac10513-coercion_and_categories_for_modules.patch)\n\nImplement coercion and category framework for free modules, submodules, quotient modules. Depends on #10496",
    "created_at": "2010-12-22T09:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101529",
    "user": "https://github.com/simon-king-jena"
}
```

**Attachment:** [trac10513-coercion_and_categories_for_modules.patch](https://github.com/sagemath/sage/files/ticket10513/trac10513-coercion_and_categories_for_modules.patch)

Implement coercion and category framework for free modules, submodules, quotient modules. Depends on #10496



---

archive/issue_comments_101530.json:
```json
{
    "body": "<a id='comment:1'></a>\nFor the patchbot/release manager:\n\ndepends on #10496\n\nReady for review!",
    "created_at": "2010-12-22T09:26:07Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101530",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>
For the patchbot/release manager:

depends on #10496

Ready for review!



---

archive/issue_events_080464.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80464"
}
```



---

archive/issue_events_080465.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80465"
}
```



---

archive/issue_comments_101531.json:
```json
{
    "body": "<a id='comment:2'></a>\nOne of the things that I did in #9713 was to replace `sage.structure.parent_gens.ParentWithAdditiveAbelianGens` with `sage.structure.parent.Parent` as the base class of `Module`. At the top of `sage/structure/parent_gens.pyx` it says that \n\n```\n   This class is being deprecated, see\n   ``sage.structure.parent.Parent`` and\n   ``sage.structure.category_object.CategoryObject`` for the new\n   model.\n```\nBut your patch does not change the Module base class. So I'm a bit confused about what the right way of doing things is.",
    "created_at": "2010-12-22T11:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101531",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
One of the things that I did in #9713 was to replace `sage.structure.parent_gens.ParentWithAdditiveAbelianGens` with `sage.structure.parent.Parent` as the base class of `Module`. At the top of `sage/structure/parent_gens.pyx` it says that 

```
   This class is being deprecated, see
   ``sage.structure.parent.Parent`` and
   ``sage.structure.category_object.CategoryObject`` for the new
   model.
```
But your patch does not change the Module base class. So I'm a bit confused about what the right way of doing things is.



---

archive/issue_events_080466.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-22T11:19:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80466"
}
```



---

archive/issue_events_080467.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-22T11:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80467"
}
```



---

archive/issue_comments_101532.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [vbraun](#comment%3A2):\n> At the top of `sage/structure/parent_gens.pyx` it says that \n> \n> ```\n>    This class is being deprecated, see\n>    ``sage.structure.parent.Parent`` and\n>    ``sage.structure.category_object.CategoryObject`` for the new\n>    model.\n> ```\n> But your patch does not change the Module base class.\n\n\nThank you, I simply wasn't aware of the deprecation. Changing it now, and if tests pass I'll update my patch.",
    "created_at": "2010-12-22T11:29:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101532",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
Replying to [vbraun](#comment%3A2):
> At the top of `sage/structure/parent_gens.pyx` it says that 
> 
> ```
>    This class is being deprecated, see
>    ``sage.structure.parent.Parent`` and
>    ``sage.structure.category_object.CategoryObject`` for the new
>    model.
> ```
> But your patch does not change the Module base class.


Thank you, I simply wasn't aware of the deprecation. Changing it now, and if tests pass I'll update my patch.



---

archive/issue_comments_101533.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just noticed that `ParentWithBase` is requested in various other files. So, it will take a while until I can replace `ParentWithAdditiveAbelianGens` by `Parent`.",
    "created_at": "2010-12-22T11:34:45Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101533",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
I just noticed that `ParentWithBase` is requested in various other files. So, it will take a while until I can replace `ParentWithAdditiveAbelianGens` by `Parent`.



---

archive/issue_events_080468.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T11:34:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80468"
}
```



---

archive/issue_events_080469.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T11:34:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80469"
}
```



---

archive/issue_comments_101534.json:
```json
{
    "body": "**Work Issues:** replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods",
    "created_at": "2010-12-22T13:36:26Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101534",
    "user": "https://github.com/simon-king-jena"
}
```

**Work Issues:** replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods



---

archive/issue_events_080470.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80470"
}
```



---

archive/issue_events_080471.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80471"
}
```



---

archive/issue_events_080472.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80472"
}
```



---

archive/issue_events_080473.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80473"
}
```



---

archive/issue_events_080474.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80474"
}
```



---

archive/issue_events_080475.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80475"
}
```



---

archive/issue_comments_101535.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"Simon King, Peter Bruin\".",
    "created_at": "2014-06-21T13:13:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101535",
    "user": "https://github.com/pjbruin"
}
```

**Changing author** from "Simon King" to "Simon King, Peter Bruin".



---

archive/issue_comments_101536.json:
```json
{
    "body": "**Dependencies:** #16507",
    "created_at": "2014-06-21T13:13:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101536",
    "user": "https://github.com/pjbruin"
}
```

**Dependencies:** #16507



---

archive/issue_comments_101537.json:
```json
{
    "body": "<a id='comment:9'></a>\nI am trying to finish this ticket.  I currently have a branch that passes all doctests, but I am still improving some of the code and adding documentation.",
    "created_at": "2014-06-21T13:13:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101537",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:9'></a>
I am trying to finish this ticket.  I currently have a branch that passes all doctests, but I am still improving some of the code and adding documentation.



---

archive/issue_comments_101538.json:
```json
{
    "body": "**Commit:** [ed13085009f4b79544e1aa9970820b7f1bf6cb8f](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)",
    "created_at": "2014-06-21T23:15:58Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101538",
    "user": "https://github.com/pjbruin"
}
```

**Commit:** [ed13085009f4b79544e1aa9970820b7f1bf6cb8f](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)



---

archive/issue_comments_101539.json:
```json
{
    "body": "<a id='comment:10'></a>\nOK, ready for review.  There is still some future work to be done:\n- move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n  1. `sage.coding.linear_code.LinearCode`\n  2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n  3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n  4. `sage.structure.formal_sum.FormalSums`\n- make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\nI think it is better to do these in separate tickets.",
    "created_at": "2014-06-21T23:15:58Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101539",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'></a>
OK, ready for review.  There is still some future work to be done:
- move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
  1. `sage.coding.linear_code.LinearCode`
  2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
  3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
  4. `sage.structure.formal_sum.FormalSums`
- make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
I think it is better to do these in separate tickets.



---

archive/issue_events_080476.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-06-21T23:15:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80476"
}
```



---

archive/issue_events_080477.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-06-21T23:15:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80477"
}
```



---

archive/issue_comments_101540.json:
```json
{
    "body": "**Changing work issues** from \"replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods\" to \"\".",
    "created_at": "2014-06-21T23:15:58Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101540",
    "user": "https://github.com/pjbruin"
}
```

**Changing work issues** from "replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods" to "".



---

archive/issue_comments_101541.json:
```json
{
    "body": "**Branch:** [u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)",
    "created_at": "2014-06-21T23:15:58Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101541",
    "user": "https://github.com/pjbruin"
}
```

**Branch:** [u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)



---

archive/issue_comments_101542.json:
```json
{
    "body": "<a id='comment:11'></a>\n`sage.coding.linear_code.LinearCode` is taken care of in #16644.",
    "created_at": "2014-07-23T21:10:25Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101542",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
`sage.coding.linear_code.LinearCode` is taken care of in #16644.



---

archive/issue_events_080478.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80478"
}
```



---

archive/issue_events_080479.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80479"
}
```



---

archive/issue_comments_101543.json:
```json
{
    "body": "**Changing commit** from \"[ed13085009f4b79544e1aa9970820b7f1bf6cb8f](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)\" to \"[5126b66a6c5ba2d52b6daff6ee489aa8b48a7548](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)\".",
    "created_at": "2014-08-15T11:08:56Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed13085009f4b79544e1aa9970820b7f1bf6cb8f](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)" to "[5126b66a6c5ba2d52b6daff6ee489aa8b48a7548](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)".



---

archive/issue_comments_101544.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548\">5126b66</a></td><td><code>Trac 10513: remove source line number in doctest</code></td></tr></table>\n",
    "created_at": "2014-08-15T11:08:56Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548">5126b66</a></td><td><code>Trac 10513: remove source line number in doctest</code></td></tr></table>




---

archive/issue_comments_101545.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-Currently, modules in Sage do not use the category framework and are based on the old coercion model. Moreover, some coercions go wrong:\n+Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.\n \n-Without my patch, we have\n+Moreover, some coercions go wrong:\n \n ```\n sage: V3 = QQ^3\n@@ -32,7 +32,7 @@\n [(1, 0), (0, 1), (-1, -1)]\n ```\n \n-Comparison goes wrong as well without my patch:\n+Comparison goes wrong as well:\n \n ```\n sage: V2==M\n@@ -41,8 +41,5 @@\n False\n ```\n \n-My patch removes the coercion between abstract module `V^2` and the quotient modules. Moreover, we then have `V2!=M`.\n+In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.\n \n-I did not implement the \"advanced\" bits of coercion yet, namely the construction functor and pushout magic. This will be dealt with on a different ticket.\n-\n-Note that what I propose here goes beyond what is done \"on the fly\" in #9713, whose main purpose isn't coercion anyway. Moreover, my patch here does hardly touch the stuff that is really important for #9713. Hence, I suggest to add the ticket here to the long list of dependencies for #9713.\n``````\n",
    "created_at": "2014-08-15T11:45:43Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101545",
    "user": "https://github.com/pjbruin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-Currently, modules in Sage do not use the category framework and are based on the old coercion model. Moreover, some coercions go wrong:
+Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.
 
-Without my patch, we have
+Moreover, some coercions go wrong:
 
 ```
 sage: V3 = QQ^3
@@ -32,7 +32,7 @@
 [(1, 0), (0, 1), (-1, -1)]
 ```
 
-Comparison goes wrong as well without my patch:
+Comparison goes wrong as well:
 
 ```
 sage: V2==M
@@ -41,8 +41,5 @@
 False
 ```
 
-My patch removes the coercion between abstract module `V^2` and the quotient modules. Moreover, we then have `V2!=M`.
+In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.
 
-I did not implement the "advanced" bits of coercion yet, namely the construction functor and pushout magic. This will be dealt with on a different ticket.
-
-Note that what I propose here goes beyond what is done "on the fly" in #9713, whose main purpose isn't coercion anyway. Moreover, my patch here does hardly touch the stuff that is really important for #9713. Hence, I suggest to add the ticket here to the long list of dependencies for #9713.
``````




---

archive/issue_comments_101546.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f\">ddda401</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>\n",
    "created_at": "2014-08-27T17:04:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f">ddda401</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>




---

archive/issue_comments_101547.json:
```json
{
    "body": "**Changing commit** from \"[5126b66a6c5ba2d52b6daff6ee489aa8b48a7548](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)\" to \"[ddda401f855fc34936e204eb14fa3d0af597b76f](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)\".",
    "created_at": "2014-08-27T17:04:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5126b66a6c5ba2d52b6daff6ee489aa8b48a7548](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)" to "[ddda401f855fc34936e204eb14fa3d0af597b76f](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)".



---

archive/issue_comments_101548.json:
```json
{
    "body": "**Changing commit** from \"[ddda401f855fc34936e204eb14fa3d0af597b76f](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)\" to \"[ed6bbf1bf478d40fe467d2f56bc58b0ad482a840](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)\".",
    "created_at": "2014-12-04T22:18:53Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ddda401f855fc34936e204eb14fa3d0af597b76f](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)" to "[ed6bbf1bf478d40fe467d2f56bc58b0ad482a840](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)".



---

archive/issue_comments_101549.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb997baca934097cdeb91e99520bac57938ca1d\">2bb997b</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840\">ed6bbf1</a></td><td><code>Trac 10513: fix doctest</code></td></tr></table>\n",
    "created_at": "2014-12-04T22:18:53Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb997baca934097cdeb91e99520bac57938ca1d">2bb997b</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840">ed6bbf1</a></td><td><code>Trac 10513: fix doctest</code></td></tr></table>




---

archive/issue_comments_101550.json:
```json
{
    "body": "<a id='comment:18'></a>\nCould you add a little documentation about the `coercion_reverse` thing?\nOr rather, move it in the actual code, rather than in comments?\nNot that the category/coercion stuff is already obscure, but...",
    "created_at": "2014-12-08T17:17:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101550",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
Could you add a little documentation about the `coercion_reverse` thing?
Or rather, move it in the actual code, rather than in comments?
Not that the category/coercion stuff is already obscure, but...



---

archive/issue_comments_101551.json:
```json
{
    "body": "<a id='comment:19'></a>\nI guess my comment should have been made in #16507.",
    "created_at": "2014-12-08T17:19:12Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101551",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
I guess my comment should have been made in #16507.



---

archive/issue_events_080480.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-18T20:13:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80480"
}
```



---

archive/issue_events_080481.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-18T20:13:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80481"
}
```



---

archive/issue_comments_101552.json:
```json
{
    "body": "<a id='comment:20'></a>\nAfter merging with 6.5.beta3 (which `git` does automatically, despite Trac being unable to auto-merge), there is one failing doctest:\n\n```\nFile \"src/sage/modules/free_module.py\", line 6074, in sage.modules.free_module.FreeModule_submodule_with_basis_field\nFailed example:\n    TestSuite(W).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/home/bruinpj/src/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 282, in run\n        test_method(tester = tester)\n      File \"sage/structure/sage_object.pyx\", line 543, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4553)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"/home/bruinpj/src/sage/local/lib/python/unittest/case.py\", line 513, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/home/bruinpj/src/sage/local/lib/python/unittest/case.py\", line 506, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n    User basis matrix:\n    [1 1 x] != Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n    User basis matrix:\n    [1 1 x]\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n```\nThis is due to the cached `echelonized_basis_matrix` behaving badly under pickling:\n\n```\nsage: K.<x> = FractionField(QQ['x'])\nsage: M = K^3\nsage: W = M.span_of_basis([[1, 1, x]])\nsage: W.echelonized_basis_matrix()\n[1 1 x]\nsage: s = dumps(W)\nsage: V = loads(s)\nsage: V.echelonized_basis_matrix()\n[1, 1, x]\nsage: type(_)\n<type 'list'>\n```\nThere does not seem to be any such problem with `basis_matrix()`:\n\n```\nsage: W.basis_matrix()\n[1 1 x]\nsage: V.basis_matrix()\n[1 1 x]\n```",
    "created_at": "2014-12-18T20:13:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101552",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:20'></a>
After merging with 6.5.beta3 (which `git` does automatically, despite Trac being unable to auto-merge), there is one failing doctest:

```
File "src/sage/modules/free_module.py", line 6074, in sage.modules.free_module.FreeModule_submodule_with_basis_field
Failed example:
    TestSuite(W).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/home/bruinpj/src/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "sage/structure/sage_object.pyx", line 543, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4553)
        tester.assertEqual(loads(dumps(self)), self)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 513, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 506, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x] != Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x]
    ------------------------------------------------------------
    The following tests failed: _test_pickling
```
This is due to the cached `echelonized_basis_matrix` behaving badly under pickling:

```
sage: K.<x> = FractionField(QQ['x'])
sage: M = K^3
sage: W = M.span_of_basis([[1, 1, x]])
sage: W.echelonized_basis_matrix()
[1 1 x]
sage: s = dumps(W)
sage: V = loads(s)
sage: V.echelonized_basis_matrix()
[1, 1, x]
sage: type(_)
<type 'list'>
```
There does not seem to be any such problem with `basis_matrix()`:

```
sage: W.basis_matrix()
[1 1 x]
sage: V.basis_matrix()
[1 1 x]
```



---

archive/issue_comments_101553.json:
```json
{
    "body": "**Work Issues:** fix pickling problem",
    "created_at": "2014-12-18T20:13:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101553",
    "user": "https://github.com/pjbruin"
}
```

**Work Issues:** fix pickling problem



---

archive/issue_comments_101554.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe pickling problem is independent of this ticket, see #17527.",
    "created_at": "2014-12-19T10:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101554",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:21'></a>
The pickling problem is independent of this ticket, see #17527.



---

archive/issue_comments_101555.json:
```json
{
    "body": "**Changing dependencies** from \"#16507\" to \"#16507, #17527\".",
    "created_at": "2014-12-19T10:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101555",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#16507" to "#16507, #17527".



---

archive/issue_comments_101556.json:
```json
{
    "body": "**Changing work issues** from \"fix pickling problem\" to \"\".",
    "created_at": "2014-12-19T10:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101556",
    "user": "https://github.com/pjbruin"
}
```

**Changing work issues** from "fix pickling problem" to "".



---

archive/issue_comments_101557.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19e2c5575d056fa7e91336363502e0a0a78afd8\">a19e2c5</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27\">2f52a3c</a></td><td><code>Trac 10513: remove unnecessary FreeModule_generic_field.__echelonized_basis_matrix</code></td></tr></table>\n",
    "created_at": "2014-12-19T12:04:03Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19e2c5575d056fa7e91336363502e0a0a78afd8">a19e2c5</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27">2f52a3c</a></td><td><code>Trac 10513: remove unnecessary FreeModule_generic_field.__echelonized_basis_matrix</code></td></tr></table>




---

archive/issue_comments_101558.json:
```json
{
    "body": "**Changing commit** from \"[ed6bbf1bf478d40fe467d2f56bc58b0ad482a840](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)\" to \"[2f52a3cb9945479d4d7298c06119bde5481c6d27](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)\".",
    "created_at": "2014-12-19T12:04:03Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed6bbf1bf478d40fe467d2f56bc58b0ad482a840](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)" to "[2f52a3cb9945479d4d7298c06119bde5481c6d27](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)".



---

archive/issue_comments_101559.json:
```json
{
    "body": "**Changing dependencies** from \"#16507, #17527\" to \"#16507\".",
    "created_at": "2014-12-19T12:06:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101559",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#16507, #17527" to "#16507".



---

archive/issue_comments_101560.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe pickling problem can actually be circumvented in a more elegant way by avoiding an unnecessary caching step (the echelon form of a matrix is already cached).",
    "created_at": "2014-12-19T12:06:08Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101560",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:23'></a>
The pickling problem can actually be circumvented in a more elegant way by avoiding an unnecessary caching step (the echelon form of a matrix is already cached).



---

archive/issue_events_080482.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-19T12:06:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80482"
}
```



---

archive/issue_events_080483.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-19T12:06:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80483"
}
```



---

archive/issue_comments_101561.json:
```json
{
    "body": "**Changing commit** from \"[2f52a3cb9945479d4d7298c06119bde5481c6d27](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)\" to \"[2d7f0759c12fbeeb45d42c2d6160f8d925a22252](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)\".",
    "created_at": "2014-12-19T14:13:34Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f52a3cb9945479d4d7298c06119bde5481c6d27](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)" to "[2d7f0759c12fbeeb45d42c2d6160f8d925a22252](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)".



---

archive/issue_comments_101562.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252\">2d7f075</a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>\n",
    "created_at": "2014-12-19T14:13:34Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252">2d7f075</a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>




---

archive/issue_comments_101563.json:
```json
{
    "body": "<a id='comment:25'></a>\nI had a look at the work done here and it looks nice.\n\n\nReplying to [pbruin](#comment%3A10):\n> OK, ready for review.  There is still some future work to be done:\n> - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n>   1. `sage.coding.linear_code.LinearCode`\n>   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n>   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n>   4. `sage.structure.formal_sum.FormalSums`\n> - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\n> I think it is better to do these in separate tickets.\n\nDid you open tickets for these?\n\nAnd in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.\nAny ticket opened to implement such a coercion?",
    "created_at": "2014-12-23T14:36:42Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101563",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>
I had a look at the work done here and it looks nice.


Replying to [pbruin](#comment%3A10):
> OK, ready for review.  There is still some future work to be done:
> - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
>   1. `sage.coding.linear_code.LinearCode`
>   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
>   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
>   4. `sage.structure.formal_sum.FormalSums`
> - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> I think it is better to do these in separate tickets.

Did you open tickets for these?

And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
Any ticket opened to implement such a coercion?



---

archive/issue_comments_101564.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jpflori](#comment%3A25):\n> I had a look at the work done here and it looks nice.\n\nThanks!\n> Replying to [pbruin](#comment%3A10):\n> > OK, ready for review.  There is still some future work to be done:\n> > - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n> >   1. `sage.coding.linear_code.LinearCode`\n> >   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n> >   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n> >   4. `sage.structure.formal_sum.FormalSums`\n> > - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\n> > I think it is better to do these in separate tickets.\n\n> Did you open tickets for these?\nI just created #17543 and #17544.  (See [comment:11](#comment%3A11) for `LinearCode`.)\n> And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.\n> Any ticket opened to implement such a coercion?\n\nI'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.",
    "created_at": "2014-12-23T17:44:40Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101564",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:26'></a>
Replying to [jpflori](#comment%3A25):
> I had a look at the work done here and it looks nice.

Thanks!
> Replying to [pbruin](#comment%3A10):
> > OK, ready for review.  There is still some future work to be done:
> > - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
> >   1. `sage.coding.linear_code.LinearCode`
> >   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
> >   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
> >   4. `sage.structure.formal_sum.FormalSums`
> > - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> > I think it is better to do these in separate tickets.

> Did you open tickets for these?
I just created #17543 and #17544.  (See [comment:11](#comment%3A11) for `LinearCode`.)
> And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
> Any ticket opened to implement such a coercion?

I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.



---

archive/issue_comments_101565.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [pbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?\n> I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.\n\nI was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.",
    "created_at": "2014-12-23T17:47:14Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101565",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
Replying to [pbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?
> I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.

I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.



---

archive/issue_comments_101566.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jpflori](#comment%3A27):\n> Replying to [pbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?\n> > I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.\n\n> I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.\nAfter looking at this again, I think the reason was as follows: a cone *C* is a certain type of subset of a vector space *V*, and *C* contains a largest maximal linear subspace *S*.  Now to test if an element *x* of *C* is in *S*, the coercion framework checks if *S*(*x*) == *x*, but when trying to comparing these two elements it cannot find a common parent for the toric lattice and the linear subspace.  This seems to be because of the following method in `ToricLattice_generic`:\n\n```python\n# We need to override this function, otherwise e.g. the sum of elements of\n# different lattices of the same dimension will live in ZZ^n.\ndef construction(self):\n    r\"\"\"\n    Return the functorial construction of ``self``.\n\n    OUTPUT:\n\n    - ``None``, we do not think of toric lattices as constructed from\n      simpler objects since we do not want to perform arithmetic involving\n      different lattices.\n\n    [...]\n    \"\"\"\n    return None\n```\nThe reason why it used to work with the old coercion model might have been a peculiarity of some `_coerce_impl()` method.  Trying to fix this (so that we can use `... in ...` again) will probably lead to all kind of other problems, so I'd prefer not to do that on this ticket.",
    "created_at": "2014-12-23T20:05:40Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101566",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:28'></a>
Replying to [jpflori](#comment%3A27):
> Replying to [pbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?
> > I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.

> I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.
After looking at this again, I think the reason was as follows: a cone *C* is a certain type of subset of a vector space *V*, and *C* contains a largest maximal linear subspace *S*.  Now to test if an element *x* of *C* is in *S*, the coercion framework checks if *S*(*x*) == *x*, but when trying to comparing these two elements it cannot find a common parent for the toric lattice and the linear subspace.  This seems to be because of the following method in `ToricLattice_generic`:

```python
# We need to override this function, otherwise e.g. the sum of elements of
# different lattices of the same dimension will live in ZZ^n.
def construction(self):
    r"""
    Return the functorial construction of ``self``.

    OUTPUT:

    - ``None``, we do not think of toric lattices as constructed from
      simpler objects since we do not want to perform arithmetic involving
      different lattices.

    [...]
    """
    return None
```
The reason why it used to work with the old coercion model might have been a peculiarity of some `_coerce_impl()` method.  Trying to fix this (so that we can use `... in ...` again) will probably lead to all kind of other problems, so I'd prefer not to do that on this ticket.



---

archive/issue_events_080484.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-12-26T10:09:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80484"
}
```



---

archive/issue_events_080485.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-12-26T10:09:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80485"
}
```



---

archive/issue_comments_101567.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2014-12-26T10:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101567",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_101568.json:
```json
{
    "body": "<a id='comment:29'></a>\nOk, I buy your explanation, thanks for digging this out.",
    "created_at": "2014-12-26T10:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101568",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
Ok, I buy your explanation, thanks for digging this out.



---

archive/issue_comments_101569.json:
```json
{
    "body": "<a id='comment:30'></a>\nI get lots of doctest failures all originating at something like\n\n```\n    TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)\n```",
    "created_at": "2015-01-02T08:25:59Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101569",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
I get lots of doctest failures all originating at something like

```
    TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
```



---

archive/issue_events_080486.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T08:26:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80486"
}
```



---

archive/issue_events_080487.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T08:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80487"
}
```



---

archive/issue_comments_101570.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [vbraun](#comment%3A30):\n> I get lots of doctest failures all originating at something like\n> \n> ```\n>     TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)\n> ```\n\nCan you give more details and/or a link to a log file?  I am not getting any doctest failures in `sage/modular` (which I would guess is where these failures occur) after merging this branch with 6.5.beta4, both on x86_64 and on ARM.",
    "created_at": "2015-01-02T11:38:33Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101570",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:32'></a>
Replying to [vbraun](#comment%3A30):
> I get lots of doctest failures all originating at something like
> 
> ```
>     TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
> ```

Can you give more details and/or a link to a log file?  I am not getting any doctest failures in `sage/modular` (which I would guess is where these failures occur) after merging this branch with 6.5.beta4, both on x86_64 and on ARM.



---

archive/issue_comments_101571.json:
```json
{
    "body": "<a id='comment:33'></a>\nI think it's because of #10962.",
    "created_at": "2015-01-02T12:18:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101571",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
I think it's because of #10962.



---

archive/issue_comments_101572.json:
```json
{
    "body": "<a id='comment:34'></a>\nDoes this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?",
    "created_at": "2015-01-02T12:19:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?



---

archive/issue_comments_101573.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [jdemeyer](#comment%3A34):\n> Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?\n\nNo, I don't think so.  (It does solve #17576, though.)",
    "created_at": "2015-01-02T12:57:34Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101573",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:35'></a>
Replying to [jdemeyer](#comment%3A34):
> Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?

No, I don't think so.  (It does solve #17576, though.)



---

archive/issue_comments_101574.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [jdemeyer](#comment%3A33):\n> I think it's because of #10962.\n\nYou're right, I'm looking into it.",
    "created_at": "2015-01-02T13:08:20Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101574",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:36'></a>
Replying to [jdemeyer](#comment%3A33):
> I think it's because of #10962.

You're right, I'm looking into it.



---

archive/issue_events_080488.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-02T19:25:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80488"
}
```



---

archive/issue_events_080489.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-02T19:25:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80489"
}
```



---

archive/issue_comments_101575.json:
```json
{
    "body": "<a id='comment:37'></a>\nThe failures when applying this together with #10962 are caused by the fact that Manin symbols do not use the `Parent`/`Element` machinery.  This is fixed by #17578.",
    "created_at": "2015-01-02T19:25:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101575",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:37'></a>
The failures when applying this together with #10962 are caused by the fact that Manin symbols do not use the `Parent`/`Element` machinery.  This is fixed by #17578.



---

archive/issue_comments_101576.json:
```json
{
    "body": "**Changing dependencies** from \"#16507\" to \"#16507, #17578\".",
    "created_at": "2015-01-02T19:25:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101576",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#16507" to "#16507, #17578".



---

archive/issue_comments_101577.json:
```json
{
    "body": "<a id='comment:38'></a>\nIn `src/sage/modules/free_module_element.pyx`, you changed in one place\n\n```\nexcept TypeError:\n```\nto\n\n```\nexcept (TypeError, ValueError):\n```\n\nIs this change needed? If yes, it should also be applied to the other place with similar code (there is one `__init__` method for dense and one for sparse vectors).",
    "created_at": "2015-01-03T00:12:42Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101577",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
In `src/sage/modules/free_module_element.pyx`, you changed in one place

```
except TypeError:
```
to

```
except (TypeError, ValueError):
```

Is this change needed? If yes, it should also be applied to the other place with similar code (there is one `__init__` method for dense and one for sparse vectors).



---

archive/issue_events_080490.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-03T00:12:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80490"
}
```



---

archive/issue_events_080491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-03T00:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80491"
}
```



---

archive/issue_comments_101578.json:
```json
{
    "body": "<a id='comment:39'></a>\n(I'm asking because this is a conflict with #17561)",
    "created_at": "2015-01-03T00:14:54Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101578",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
(I'm asking because this is a conflict with #17561)



---

archive/issue_comments_101579.json:
```json
{
    "body": "**Changing commit** from \"[2d7f0759c12fbeeb45d42c2d6160f8d925a22252](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)\" to \"[99ec4cc13099658e0bc762a6e8d230c3956c7150](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)\".",
    "created_at": "2015-01-03T08:41:37Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2d7f0759c12fbeeb45d42c2d6160f8d925a22252](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)" to "[99ec4cc13099658e0bc762a6e8d230c3956c7150](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)".



---

archive/issue_comments_101580.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150\">99ec4cc</a></td><td><code>Trac 10513: revert a change in try...except</code></td></tr></table>\n",
    "created_at": "2015-01-03T08:41:37Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101580",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150">99ec4cc</a></td><td><code>Trac 10513: revert a change in try...except</code></td></tr></table>




---

archive/issue_comments_101581.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [jdemeyer](#comment%3A38):\n> In `src/sage/modules/free_module_element.pyx`, you changed in one place\n> \n> ```\n> except TypeError:\n> ```\n> to\n> \n> ```\n> except (TypeError, ValueError):\n> ```\n> \n> Is this change needed?\n\nApparently not; the last commit reverts it.",
    "created_at": "2015-01-03T08:42:16Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101581",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:41'></a>
Replying to [jdemeyer](#comment%3A38):
> In `src/sage/modules/free_module_element.pyx`, you changed in one place
> 
> ```
> except TypeError:
> ```
> to
> 
> ```
> except (TypeError, ValueError):
> ```
> 
> Is this change needed?

Apparently not; the last commit reverts it.



---

archive/issue_events_080492.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-03T08:42:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80492"
}
```



---

archive/issue_events_080493.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-03T08:42:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80493"
}
```



---

archive/issue_comments_101582.json:
```json
{
    "body": "<a id='comment:43'></a>\nThere is a minor conflict with #17561.",
    "created_at": "2015-01-11T21:33:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101582",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
There is a minor conflict with #17561.



---

archive/issue_events_080494.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-11T21:33:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80494"
}
```



---

archive/issue_events_080495.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-11T21:33:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80495"
}
```



---

archive/issue_comments_101583.json:
```json
{
    "body": "**Changing dependencies** from \"#16507, #17578\" to \"#16507, #17578, #17561\".",
    "created_at": "2015-01-11T21:33:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101583",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#16507, #17578" to "#16507, #17578, #17561".



---

archive/issue_comments_101584.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)\" to \"[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)\".",
    "created_at": "2015-01-12T13:08:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101584",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)" to "[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)".



---

archive/issue_events_080496.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80496"
}
```



---

archive/issue_events_080497.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80497"
}
```



---

archive/issue_comments_101585.json:
```json
{
    "body": "**Changing commit** from \"[99ec4cc13099658e0bc762a6e8d230c3956c7150](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)\" to \"[b1287e75962a2dc590f1fa22acc90a4e53383aab](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)\".",
    "created_at": "2015-01-12T13:10:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101585",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[99ec4cc13099658e0bc762a6e8d230c3956c7150](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)" to "[b1287e75962a2dc590f1fa22acc90a4e53383aab](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)".



---

archive/issue_events_080498.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80498"
}
```



---

archive/issue_events_080499.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80499"
}
```



---

archive/issue_comments_101586.json:
```json
{
    "body": "<a id='comment:45'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df0fb69e1aa9ab205e35b98ad6d97d0c67b889af\">df0fb69</a></td><td><code>Declare types of _entries</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/106f5d41398794b13a6a683236cf219d49602312\">106f5d4</a></td><td><code>Minor improvements in FreeModuleElement_generic_sparse.__init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab\">b1287e7</a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr></table>\n",
    "created_at": "2015-01-12T13:10:00Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101586",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df0fb69e1aa9ab205e35b98ad6d97d0c67b889af">df0fb69</a></td><td><code>Declare types of _entries</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/106f5d41398794b13a6a683236cf219d49602312">106f5d4</a></td><td><code>Minor improvements in FreeModuleElement_generic_sparse.__init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab">b1287e7</a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr></table>




---

archive/issue_comments_101587.json:
```json
{
    "body": "<a id='comment:46'></a>\nOn 6.5.beta5:\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 3.63 s, sys: 28 ms, total: 3.66 s\nWall time: 3.65 s\n```\nWith this branch:\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 13.4 s, sys: 29 ms, total: 13.5 s\nWall time: 13.5 s\n```\nI think that's a significant regression in performance. It's probably due to the construction of the category-with-base. If you change the category to be \"Category of vector spaces over Fields\" or \"over Finite Fields\" you'll get much better performance, because there's not a new category to be constructed for every single space.\n\n(this stuff isn't academic--such spaces really get made a lot in CRT code). See also #17360, where the issue causes a memleak (that seems to be fine here). See also [[#10963 comment:506](https://github.com/sagemath/sage/issues/10963#comment:506)] where this issue was mentioned right at the start of the development of these parametrized categories.",
    "created_at": "2015-01-13T16:57:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101587",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:46'></a>
On 6.5.beta5:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 3.63 s, sys: 28 ms, total: 3.66 s
Wall time: 3.65 s
```
With this branch:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 13.4 s, sys: 29 ms, total: 13.5 s
Wall time: 13.5 s
```
I think that's a significant regression in performance. It's probably due to the construction of the category-with-base. If you change the category to be "Category of vector spaces over Fields" or "over Finite Fields" you'll get much better performance, because there's not a new category to be constructed for every single space.

(this stuff isn't academic--such spaces really get made a lot in CRT code). See also #17360, where the issue causes a memleak (that seems to be fine here). See also [[#10963 comment:506](https://github.com/sagemath/sage/issues/10963#comment:506)] where this issue was mentioned right at the start of the development of these parametrized categories.



---

archive/issue_events_080500.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-13T16:57:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80500"
}
```



---

archive/issue_events_080501.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-13T16:57:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80501"
}
```



---

archive/issue_comments_101588.json:
```json
{
    "body": "<a id='comment:47'></a>\nYep, with\n\n```diff\ndiff --git a/src/sage/modules/free_module.py b/src/sage/modules/free_module.py\nindex 4cf68fc..dc9248c 100644\n--- a/src/sage/modules/free_module.py\n+++ b/src/sage/modules/free_module.py\n@@ -721,10 +721,11 @@ done from the right side.\"\"\")\n \n         if category is None:\n             from sage.categories.all import Fields, FreeModules, VectorSpaces\n-            if base_ring in Fields():\n-                category = VectorSpaces(base_ring)\n+            F=Fields()\n+            if base_ring in F:\n+                category = VectorSpaces(F)\n             else:\n-                category = FreeModules(base_ring)\n+                category = FreeModules(base_ring.category())\n             try:\n                 if base_ring.is_finite() or rank == 0:\n                     # Put the module in the category of finite enumerated\n\n```\nI get\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 2.52 s, sys: 27 ms, total: 2.54 s\nWall time: 2.53 s\n```\nIn profiling this example I'm still finding\n\n```\n    28774    0.054    0.000    0.329    0.000 category.py:2281(join)\n```\nso it seems we're still spending more than 10% of our time on dynamically constructing a category (taking the join with `FiniteEnumeratedSets()`) just to get a list method. This looks like another candidate to improve (a bit).\n\nOn the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.",
    "created_at": "2015-01-13T19:08:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101588",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:47'></a>
Yep, with

```diff
diff --git a/src/sage/modules/free_module.py b/src/sage/modules/free_module.py
index 4cf68fc..dc9248c 100644
--- a/src/sage/modules/free_module.py
+++ b/src/sage/modules/free_module.py
@@ -721,10 +721,11 @@ done from the right side.""")
 
         if category is None:
             from sage.categories.all import Fields, FreeModules, VectorSpaces
-            if base_ring in Fields():
-                category = VectorSpaces(base_ring)
+            F=Fields()
+            if base_ring in F:
+                category = VectorSpaces(F)
             else:
-                category = FreeModules(base_ring)
+                category = FreeModules(base_ring.category())
             try:
                 if base_ring.is_finite() or rank == 0:
                     # Put the module in the category of finite enumerated

```
I get

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 2.52 s, sys: 27 ms, total: 2.54 s
Wall time: 2.53 s
```
In profiling this example I'm still finding

```
    28774    0.054    0.000    0.329    0.000 category.py:2281(join)
```
so it seems we're still spending more than 10% of our time on dynamically constructing a category (taking the join with `FiniteEnumeratedSets()`) just to get a list method. This looks like another candidate to improve (a bit).

On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.



---

archive/issue_comments_101589.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [nbruin](#comment%3A47):\n> On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.\n\nIndeed, the category of `GF(p)` is a join of three categories:\n\n```\nsage: GF(3).category()\nJoin of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n```\nMaybe parts of the category code (like `join`) should be transformed into Cython to make it faster?",
    "created_at": "2015-01-20T14:20:07Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101589",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:48'></a>
Replying to [nbruin](#comment%3A47):
> On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.

Indeed, the category of `GF(p)` is a join of three categories:

```
sage: GF(3).category()
Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
```
Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?



---

archive/issue_comments_101590.json:
```json
{
    "body": "**Changing commit** from \"[b1287e75962a2dc590f1fa22acc90a4e53383aab](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)\" to \"[6b63026ceea5e9daaee46ca821a85e4edd6ded8b](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)\".",
    "created_at": "2015-01-21T10:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101590",
    "user": "https://github.com/pjbruin"
}
```

**Changing commit** from "[b1287e75962a2dc590f1fa22acc90a4e53383aab](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)" to "[6b63026ceea5e9daaee46ca821a85e4edd6ded8b](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)".



---

archive/issue_comments_101591.json:
```json
{
    "body": "**Changing dependencies** from \"#16507, #17578, #17561\" to \"#16507, #17578, #17561, #11126\".",
    "created_at": "2015-01-21T10:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101591",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#16507, #17578, #17561" to "#16507, #17578, #17561, #11126".



---

archive/issue_comments_101592.json:
```json
{
    "body": "<a id='comment:49'></a>\nWith the new commits, the category of free modules is `FreeModules(base_ring.category())` by default, and instead of taking the join with `FiniteEnumeratedSets` (if applicable), we add a `list()` method.\n\nThere are two doctest failures:\n\n```\nsage -t --long --warn-long 43.7 src/sage/matrix/matrix2.pyx  # 1 doctest failed\nsage -t --long --warn-long 43.7 src/sage/modules/free_module.py  # 1 doctest failed\n```\nThe first is caused by #11126; the second is a `NotImplementedError` in `repr()` caused by the fact that `basis()` is not implemented for abstract free modules.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380\">f0957f0</a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b\">6b63026</a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr></table>\n",
    "created_at": "2015-01-21T10:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101592",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:49'></a>
With the new commits, the category of free modules is `FreeModules(base_ring.category())` by default, and instead of taking the join with `FiniteEnumeratedSets` (if applicable), we add a `list()` method.

There are two doctest failures:

```
sage -t --long --warn-long 43.7 src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long --warn-long 43.7 src/sage/modules/free_module.py  # 1 doctest failed
```
The first is caused by #11126; the second is a `NotImplementedError` in `repr()` caused by the fact that `basis()` is not implemented for abstract free modules.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380">f0957f0</a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b">6b63026</a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr></table>




---

archive/issue_comments_101593.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)\" to \"[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)\".",
    "created_at": "2015-01-21T10:01:22Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101593",
    "user": "https://github.com/pjbruin"
}
```

**Changing branch** from "[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)" to "[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)".



---

archive/issue_comments_101594.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [pbruin](#comment%3A48):\n> Indeed, the category of `GF(p)` is a join of three categories:\n> \n> ```\n> sage: GF(3).category()\n> Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n> ```\n> Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?\n\n\nThat's one option, but ultimately taking joins is a a rather dynamic operation that needs to investigate quite a bit of the category graph in order to ensure it's safe to use what's cached (can the result of a join depend on changes elsewhere in the graph?). In the case of finite fields, there is *no* variation in what the category is: this thing can be created up front (to accommodate GF(2), which is always present if I'm not mistaken), and just be set to be the category. The current problem is that the joining of categories happens in some of the more generic construction routines. We'd need a way of signalling that we want to shortcut that (a precise_category keyword that percolates up perhaps?). That's an optimization strategy that may have more pay-off for this particular scenario than making \"join\" faster (which might still be worthwhile to do). In any case, that's for another ticket. Also: premature optimization etc. Thanks for looking into this.",
    "created_at": "2015-01-21T18:49:35Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101594",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:50'></a>
Replying to [pbruin](#comment%3A48):
> Indeed, the category of `GF(p)` is a join of three categories:
> 
> ```
> sage: GF(3).category()
> Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
> ```
> Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?


That's one option, but ultimately taking joins is a a rather dynamic operation that needs to investigate quite a bit of the category graph in order to ensure it's safe to use what's cached (can the result of a join depend on changes elsewhere in the graph?). In the case of finite fields, there is *no* variation in what the category is: this thing can be created up front (to accommodate GF(2), which is always present if I'm not mistaken), and just be set to be the category. The current problem is that the joining of categories happens in some of the more generic construction routines. We'd need a way of signalling that we want to shortcut that (a precise_category keyword that percolates up perhaps?). That's an optimization strategy that may have more pay-off for this particular scenario than making "join" faster (which might still be worthwhile to do). In any case, that's for another ticket. Also: premature optimization etc. Thanks for looking into this.



---

archive/issue_comments_101595.json:
```json
{
    "body": "**Changing commit** from \"[6b63026ceea5e9daaee46ca821a85e4edd6ded8b](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)\" to \"[ac7098684fe07997da64bacee522d88c5530c38a](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)\".",
    "created_at": "2015-03-20T20:40:21Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6b63026ceea5e9daaee46ca821a85e4edd6ded8b](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)" to "[ac7098684fe07997da64bacee522d88c5530c38a](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)".



---

archive/issue_comments_101596.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2\">6d5aaa1</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf\">d1db7ea</a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b\">7b09742</a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6\">ac685ec</a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a\">ac70986</a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>\n",
    "created_at": "2015-03-20T20:40:21Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101596",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2">6d5aaa1</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf">d1db7ea</a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b">7b09742</a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6">ac685ec</a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a">ac70986</a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>




---

archive/issue_events_080502.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T20:42:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80502"
}
```



---

archive/issue_events_080503.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T20:42:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80503"
}
```



---

archive/issue_comments_101597.json:
```json
{
    "body": "<a id='comment:52'></a>\nEverything should work again after this update.",
    "created_at": "2015-03-20T20:42:15Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101597",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:52'></a>
Everything should work again after this update.



---

archive/issue_events_080504.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T10:02:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80504"
}
```



---

archive/issue_events_080505.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T10:02:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80505"
}
```



---

archive/issue_comments_101598.json:
```json
{
    "body": "<a id='comment:53'></a>\nNot everything...\n\n```\nsome tests failed:\nsage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed\nsage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed\nsage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed\nsage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed\nsage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed\n```",
    "created_at": "2015-03-21T10:02:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101598",
    "user": "https://github.com/videlec"
}
```

<a id='comment:53'></a>
Not everything...

```
some tests failed:
sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
```



---

archive/issue_comments_101599.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [vdelecroix](#comment%3A53):\n> Not everything...\n> \n> ```\n> some tests failed:\n> sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed\n> sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed\n> ```\n\nI just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?",
    "created_at": "2015-03-21T19:30:36Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101599",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:54'></a>
Replying to [vdelecroix](#comment%3A53):
> Not everything...
> 
> ```
> some tests failed:
> sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
> sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
> sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
> ```

I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?



---

archive/issue_comments_101600.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [pbruin](#comment%3A54):\n> Replying to [vdelecroix](#comment%3A53):\n\n>> ...\n> I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?\n\n\nStrange... I am launching the tests again.",
    "created_at": "2015-03-21T19:38:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101600",
    "user": "https://github.com/videlec"
}
```

<a id='comment:55'></a>
Replying to [pbruin](#comment%3A54):
> Replying to [vdelecroix](#comment%3A53):

>> ...
> I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?


Strange... I am launching the tests again.



---

archive/issue_comments_101601.json:
```json
{
    "body": "<a id='comment:56'></a>\nPlease be aware of #17562 which also involves modules. Given that #10513 is mostly about the parent and #17562 is mostly about the elements, there is probably no conflict but I felt like I should mention this anyway.",
    "created_at": "2015-03-21T20:04:40Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101601",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
Please be aware of #17562 which also involves modules. Given that #10513 is mostly about the parent and #17562 is mostly about the elements, there is probably no conflict but I felt like I should mention this anyway.



---

archive/issue_comments_101602.json:
```json
{
    "body": "<a id='comment:57'></a>\nResults of the new test... most of the failures disappeared except one\n\n```\nsage -t --long src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 1931, in sage.matrix.matrix2.Matrix.minpoly\nFailed example:\n    m.minimal_polynomial()\nException raised:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains\n**********************************************************************\n```",
    "created_at": "2015-03-21T20:25:04Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101602",
    "user": "https://github.com/videlec"
}
```

<a id='comment:57'></a>
Results of the new test... most of the failures disappeared except one

```
sage -t --long src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
Failed example:
    m.minimal_polynomial()
Exception raised:
    Traceback (most recent call last):
    ...
    NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
**********************************************************************
```



---

archive/issue_comments_101603.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [vdelecroix](#comment%3A57):\n> Results of the new test... most of the failures disappeared except one\n> \n> ```\n> sage -t --long src/sage/matrix/matrix2.pyx\n> **********************************************************************\n> File \"src/sage/matrix/matrix2.pyx\", line 1931, in sage.matrix.matrix2.Matrix.minpoly\n> Failed example:\n>     m.minimal_polynomial()\n> Exception raised:\n>     Traceback (most recent call last):\n>     ...\n>     NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains\n> **********************************************************************\n> ```\n\nThis one is fixed by #11126.  (The other failures were probably fixed by #17578 which is in 6.6.rc0.)  I deliberately did not merge #11126 into this branch since I expected some discussion about it.  Maybe this particular failure can be fixed in a more minimalistic way than as part of #11126.",
    "created_at": "2015-03-23T10:36:57Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101603",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:58'></a>
Replying to [vdelecroix](#comment%3A57):
> Results of the new test... most of the failures disappeared except one
> 
> ```
> sage -t --long src/sage/matrix/matrix2.pyx
> **********************************************************************
> File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
> Failed example:
>     m.minimal_polynomial()
> Exception raised:
>     Traceback (most recent call last):
>     ...
>     NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
> **********************************************************************
> ```

This one is fixed by #11126.  (The other failures were probably fixed by #17578 which is in 6.6.rc0.)  I deliberately did not merge #11126 into this branch since I expected some discussion about it.  Maybe this particular failure can be fixed in a more minimalistic way than as part of #11126.



---

archive/issue_comments_101604.json:
```json
{
    "body": "**Changing dependencies** from \"#16507, #17578, #17561, #11126\" to \"#16507, #17578, #17561, #18040\".",
    "created_at": "2015-03-23T11:51:52Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101604",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#16507, #17578, #17561, #11126" to "#16507, #17578, #17561, #18040".



---

archive/issue_events_080506.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80506"
}
```



---

archive/issue_events_080507.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80507"
}
```



---

archive/issue_events_080508.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80508"
}
```



---

archive/issue_events_080509.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80509"
}
```



---

archive/issue_comments_101605.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [jdemeyer](#comment%3A56):\n> Please be aware of #17562 which also involves modules.\n\nAll tests pass after merging #17562 and the new dependency #18040.",
    "created_at": "2015-03-23T13:11:37Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101605",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:60'></a>
Replying to [jdemeyer](#comment%3A56):
> Please be aware of #17562 which also involves modules.

All tests pass after merging #17562 and the new dependency #18040.



---

archive/issue_comments_101606.json:
```json
{
    "body": "**Changing dependencies** from \"#16507, #17578, #17561, #18040\" to \"#16507, #17578, #17561, #18040, #17562\".",
    "created_at": "2015-03-25T20:44:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101606",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#16507, #17578, #17561, #18040" to "#16507, #17578, #17561, #18040, #17562".



---

archive/issue_comments_101607.json:
```json
{
    "body": "<a id='comment:61'></a>\nIs this then ready to go back to positive review? Vincent, did/could you run through the tests again?",
    "created_at": "2015-03-25T20:44:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101607",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:61'></a>
Is this then ready to go back to positive review? Vincent, did/could you run through the tests again?



---

archive/issue_comments_101608.json:
```json
{
    "body": "<a id='comment:62'></a>\nNote: #17562 is actually independent of this ticket; it merges cleanly and tests pass with or without it.  Also, I intentionally did not merge #18040 (or any other dependencies) into the branch here.  The only merge conflict was with #17561, which was fixed by Jeroen.",
    "created_at": "2015-03-25T21:01:19Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101608",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:62'></a>
Note: #17562 is actually independent of this ticket; it merges cleanly and tests pass with or without it.  Also, I intentionally did not merge #18040 (or any other dependencies) into the branch here.  The only merge conflict was with #17561, which was fixed by Jeroen.



---

archive/issue_comments_101609.json:
```json
{
    "body": "<a id='comment:63'></a>\nAt least on my computer\n\n```\nAll tests passed!\n```",
    "created_at": "2015-03-26T21:37:34Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101609",
    "user": "https://github.com/videlec"
}
```

<a id='comment:63'></a>
At least on my computer

```
All tests passed!
```



---

archive/issue_events_080510.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T07:50:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80510"
}
```



---

archive/issue_events_080511.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T07:50:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80511"
}
```



---

archive/issue_comments_101610.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Pierre Flori\" to \"Jean-Pierre Flori, Vincent Delecroix\".",
    "created_at": "2015-03-27T07:50:52Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101610",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "Jean-Pierre Flori" to "Jean-Pierre Flori, Vincent Delecroix".



---

archive/issue_comments_101611.json:
```json
{
    "body": "<a id='comment:64'></a>\nThanks Vincent. I'm going to set this (back) to positive review.",
    "created_at": "2015-03-27T07:50:52Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101611",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>
Thanks Vincent. I'm going to set this (back) to positive review.



---

archive/issue_events_080512.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T01:59:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80512"
}
```



---

archive/issue_events_080513.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T01:59:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80513"
}
```



---

archive/issue_comments_101612.json:
```json
{
    "body": "<a id='comment:65'></a>\nMerge conflict with 6.7.beta0",
    "created_at": "2015-04-15T01:59:58Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101612",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:65'></a>
Merge conflict with 6.7.beta0



---

archive/issue_comments_101613.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c\">9865576</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>\n",
    "created_at": "2015-04-15T10:30:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c">9865576</a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>




---

archive/issue_comments_101614.json:
```json
{
    "body": "**Changing commit** from \"[ac7098684fe07997da64bacee522d88c5530c38a](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)\" to \"[9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)\".",
    "created_at": "2015-04-15T10:30:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ac7098684fe07997da64bacee522d88c5530c38a](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)" to "[9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)".



---

archive/issue_comments_101615.json:
```json
{
    "body": "<a id='comment:67'></a>\nThere was only a minor conflict; I assume this doesn't need another review.",
    "created_at": "2015-04-15T10:33:11Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101615",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:67'></a>
There was only a minor conflict; I assume this doesn't need another review.



---

archive/issue_events_080514.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-15T10:33:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80514"
}
```



---

archive/issue_events_080515.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-15T10:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80515"
}
```



---

archive/issue_comments_101616.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)\" to \"[9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)\".",
    "created_at": "2015-04-15T13:58:24Z",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-101616",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)" to "[9865576ec5600a1502e5c5e455e5f2ce08406f4c](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)".



---

archive/issue_events_080516.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T13:58:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80516"
}
```



---

archive/issue_events_080517.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "865aef67758f35ff1a2bc3e3b29f5cfb74a0c4f0",
    "created_at": "2015-04-15T13:58:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-80517"
}
```
