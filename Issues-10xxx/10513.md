# Issue 10513: Coercion and category framework for modules

archive/issues_010460.json:
```json
{
    "assignees": [
        "https://github.com/robertwb"
    ],
    "body": "Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.\n\nMoreover, some coercions go wrong:\n\n```\nsage: V3 = QQ^3\nsage: M = V3 / [[1,2,3]]\nsage: V2 = QQ^2\nsage: N = V3 / [[1,1,1]]\n# The quotient maps are of course coercions\nsage: f3M = M.coerce_map_from(V3)\nsage: f3N = N.coerce_map_from(V3)\n# The following is a bug...\nsage: V2.has_coerce_map_from(N)\nTrue\nsage: M.has_coerce_map_from(V2)\nTrue\nsage: N.has_coerce_map_from(V2)\nTrue\n#... because the composition of coercion\n# from N to V2 to M should be a coercion,\n# but it isn't:\nsage: M.has_coerce_map_from(N)\nFalse\n# Moreover, we obtain a non-commuting triangle of\n# coercions:\nsage: fM2 = V2.coerce_map_from(M)\nsage: fN2 = V2.coerce_map_from(N)\nsage: [fM2(f3M(x)) for x in V3.basis()]\n[(1, 0), (0, 1), (-1/3, -2/3)]\nsage: [fN2(f3N(x)) for x in V3.basis()]\n[(1, 0), (0, 1), (-1, -1)]\n```\n\nComparison goes wrong as well:\n\n```\nsage: V2==M\nTrue\nsage: M==V2\nFalse\n```\n\nIn the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.\n\n\nDepends on #16507\nDepends on #17578\nDepends on #17561\nDepends on #18040\nDepends on #17562\n\nCC:  @vbraun @novoselt @jpflori\n\nKeywords: **category framework, modules**\n\nBranch/Commit: **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**\n\nReviewer: **Jean-Pierre Flori, Vincent Delecroix**\n\nAuthor: **Simon King, Peter Bruin**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10513_\n\n",
    "closed_at": "2015-04-15T13:58:24Z",
    "created_at": "2010-12-22T09:20:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20coercion"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Coercion and category framework for modules",
    "type": "issue",
    "updated_at": "2015-04-15T13:58:24Z",
    "url": "https://github.com/sagemath/sage/issues/10513",
    "user": "https://github.com/simon-king-jena"
}
```
Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.

Moreover, some coercions go wrong:

```
sage: V3 = QQ^3
sage: M = V3 / [[1,2,3]]
sage: V2 = QQ^2
sage: N = V3 / [[1,1,1]]
# The quotient maps are of course coercions
sage: f3M = M.coerce_map_from(V3)
sage: f3N = N.coerce_map_from(V3)
# The following is a bug...
sage: V2.has_coerce_map_from(N)
True
sage: M.has_coerce_map_from(V2)
True
sage: N.has_coerce_map_from(V2)
True
#... because the composition of coercion
# from N to V2 to M should be a coercion,
# but it isn't:
sage: M.has_coerce_map_from(N)
False
# Moreover, we obtain a non-commuting triangle of
# coercions:
sage: fM2 = V2.coerce_map_from(M)
sage: fN2 = V2.coerce_map_from(N)
sage: [fM2(f3M(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1/3, -2/3)]
sage: [fN2(f3N(x)) for x in V3.basis()]
[(1, 0), (0, 1), (-1, -1)]
```

Comparison goes wrong as well:

```
sage: V2==M
True
sage: M==V2
False
```

In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.


Depends on #16507
Depends on #17578
Depends on #17561
Depends on #18040
Depends on #17562

CC:  @vbraun @novoselt @jpflori

Keywords: **category framework, modules**

Branch/Commit: **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**

Reviewer: **Jean-Pierre Flori, Vincent Delecroix**

Author: **Simon King, Peter Bruin**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/10513_





---

archive/issue_events_136710.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:20:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136710"
}
```



---

archive/issue_events_136711.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:20:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136711"
}
```



---

archive/issue_events_136712.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:20:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136712"
}
```



---

archive/issue_events_136713.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:20:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136713"
}
```



---

archive/issue_events_136714.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-12-22T09:20:06Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "subject": "https://github.com/simon-king-jena",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136714"
}
```



---

archive/issue_comments_099515.json:
```json
{
    "body": "Attachment: **[trac10513-coercion_and_categories_for_modules.patch.gz](https://github.com/sagemath/sage/files/ticket10513/trac10513-coercion_and_categories_for_modules.patch.gz)**\n\nImplement coercion and category framework for free modules, submodules, quotient modules. Depends on #10496",
    "created_at": "2010-12-22T09:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99515",
    "user": "https://github.com/simon-king-jena"
}
```

Attachment: **[trac10513-coercion_and_categories_for_modules.patch.gz](https://github.com/sagemath/sage/files/ticket10513/trac10513-coercion_and_categories_for_modules.patch.gz)**

Implement coercion and category framework for free modules, submodules, quotient modules. Depends on #10496



---

archive/issue_comments_099516.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor the patchbot/release manager:\n\ndepends on #10496\n\nReady for review!",
    "created_at": "2010-12-22T09:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99516",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

For the patchbot/release manager:

depends on #10496

Ready for review!



---

archive/issue_events_136715.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136715"
}
```



---

archive/issue_events_136716.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T09:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136716"
}
```



---

archive/issue_comments_099517.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOne of the things that I did in #9713 was to replace `sage.structure.parent_gens.ParentWithAdditiveAbelianGens` with `sage.structure.parent.Parent` as the base class of `Module`. At the top of `sage/structure/parent_gens.pyx` it says that \n\n```\n   This class is being deprecated, see\n   ``sage.structure.parent.Parent`` and\n   ``sage.structure.category_object.CategoryObject`` for the new\n   model.\n```\nBut your patch does not change the Module base class. So I'm a bit confused about what the right way of doing things is.",
    "created_at": "2010-12-22T11:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99517",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

One of the things that I did in #9713 was to replace `sage.structure.parent_gens.ParentWithAdditiveAbelianGens` with `sage.structure.parent.Parent` as the base class of `Module`. At the top of `sage/structure/parent_gens.pyx` it says that 

```
   This class is being deprecated, see
   ``sage.structure.parent.Parent`` and
   ``sage.structure.category_object.CategoryObject`` for the new
   model.
```
But your patch does not change the Module base class. So I'm a bit confused about what the right way of doing things is.



---

archive/issue_events_136717.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-22T11:19:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136717"
}
```



---

archive/issue_events_136718.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-22T11:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136718"
}
```



---

archive/issue_comments_099518.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@vbraun](#comment%3A2):\n> At the top of `sage/structure/parent_gens.pyx` it says that \n> \n> ```\n>    This class is being deprecated, see\n>    ``sage.structure.parent.Parent`` and\n>    ``sage.structure.category_object.CategoryObject`` for the new\n>    model.\n> ```\n> But your patch does not change the Module base class.\n\nThank you, I simply wasn't aware of the deprecation. Changing it now, and if tests pass I'll update my patch.",
    "created_at": "2010-12-22T11:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99518",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@vbraun](#comment%3A2):
> At the top of `sage/structure/parent_gens.pyx` it says that 
> 
> ```
>    This class is being deprecated, see
>    ``sage.structure.parent.Parent`` and
>    ``sage.structure.category_object.CategoryObject`` for the new
>    model.
> ```
> But your patch does not change the Module base class.

Thank you, I simply wasn't aware of the deprecation. Changing it now, and if tests pass I'll update my patch.



---

archive/issue_comments_099519.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI just noticed that `ParentWithBase` is requested in various other files. So, it will take a while until I can replace `ParentWithAdditiveAbelianGens` by `Parent`.",
    "created_at": "2010-12-22T11:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99519",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

I just noticed that `ParentWithBase` is requested in various other files. So, it will take a while until I can replace `ParentWithAdditiveAbelianGens` by `Parent`.



---

archive/issue_events_136719.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T11:34:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136719"
}
```



---

archive/issue_events_136720.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-12-22T11:34:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136720"
}
```



---

archive/issue_comments_099520.json:
```json
{
    "body": "Work Issues: **replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods**",
    "created_at": "2010-12-22T13:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99520",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods**



---

archive/issue_events_136721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136721"
}
```



---

archive/issue_events_136722.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136722"
}
```



---

archive/issue_events_136723.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136723"
}
```



---

archive/issue_events_136724.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136724"
}
```



---

archive/issue_events_136725.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136725"
}
```



---

archive/issue_events_136726.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136726"
}
```



---

archive/issue_comments_099521.json:
```json
{
    "body": "Changed author from **Simon King** to **Simon King, Peter Bruin**",
    "created_at": "2014-06-21T13:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99521",
    "user": "https://github.com/pjbruin"
}
```

Changed author from **Simon King** to **Simon King, Peter Bruin**



---

archive/issue_comments_099522.json:
```json
{
    "body": "Dependencies: **#16507**",
    "created_at": "2014-06-21T13:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99522",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#16507**



---

archive/issue_comments_099523.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI am trying to finish this ticket.  I currently have a branch that passes all doctests, but I am still improving some of the code and adding documentation.",
    "created_at": "2014-06-21T13:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99523",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:9" align="right">comment:9</div>

I am trying to finish this ticket.  I currently have a branch that passes all doctests, but I am still improving some of the code and adding documentation.



---

archive/issue_comments_099524.json:
```json
{
    "body": "Commit: **[`ed13085`](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)**",
    "created_at": "2014-06-21T23:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99524",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`ed13085`](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)**



---

archive/issue_comments_099525.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOK, ready for review.  There is still some future work to be done:\n- move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n  1. `sage.coding.linear_code.LinearCode`\n  2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n  3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n  4. `sage.structure.formal_sum.FormalSums`\n- make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\nI think it is better to do these in separate tickets.",
    "created_at": "2014-06-21T23:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99525",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

OK, ready for review.  There is still some future work to be done:
- move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
  1. `sage.coding.linear_code.LinearCode`
  2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
  3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
  4. `sage.structure.formal_sum.FormalSums`
- make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
I think it is better to do these in separate tickets.



---

archive/issue_events_136727.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-06-21T23:15:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136727"
}
```



---

archive/issue_events_136728.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-06-21T23:15:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136728"
}
```



---

archive/issue_comments_099526.json:
```json
{
    "body": "Changed work issues from **replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods** to none",
    "created_at": "2014-06-21T23:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99526",
    "user": "https://github.com/pjbruin"
}
```

Changed work issues from **replace ParentWithAdditiveGens by Parent; arithmetic for module elements using single underscore methods** to none



---

archive/issue_comments_099527.json:
```json
{
    "body": "Branch: **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)**",
    "created_at": "2014-06-21T23:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99527",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)**



---

archive/issue_comments_099528.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n`sage.coding.linear_code.LinearCode` is taken care of in #16644.",
    "created_at": "2014-07-23T21:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99528",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

`sage.coding.linear_code.LinearCode` is taken care of in #16644.



---

archive/issue_events_136729.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136729"
}
```



---

archive/issue_events_136730.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136730"
}
```



---

archive/issue_comments_099529.json:
```json
{
    "body": "Changed commit from **[`ed13085`](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)** to **[`5126b66`](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)**",
    "created_at": "2014-08-15T11:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99529",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed13085`](https://github.com/sagemath/sagetrac-mirror/commit/ed13085009f4b79544e1aa9970820b7f1bf6cb8f)** to **[`5126b66`](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)**



---

archive/issue_comments_099530.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548\"><code>5126b66</code></a></td><td><code>Trac 10513: remove source line number in doctest</code></td></tr></table>\n",
    "created_at": "2014-08-15T11:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99530",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548"><code>5126b66</code></a></td><td><code>Trac 10513: remove source line number in doctest</code></td></tr></table>




---

archive/issue_comments_099531.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-Currently, modules in Sage do not use the category framework and are based on the old coercion model. Moreover, some coercions go wrong:\n+Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.\n \n-Without my patch, we have\n+Moreover, some coercions go wrong:\n \n ```\n sage: V3 = QQ^3\n@@ -32,7 +32,7 @@\n [(1, 0), (0, 1), (-1, -1)]\n ```\n \n-Comparison goes wrong as well without my patch:\n+Comparison goes wrong as well:\n \n ```\n sage: V2==M\n@@ -41,8 +41,5 @@\n False\n ```\n \n-My patch removes the coercion between abstract module `V^2` and the quotient modules. Moreover, we then have `V2!=M`.\n+In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.\n \n-I did not implement the \"advanced\" bits of coercion yet, namely the construction functor and pushout magic. This will be dealt with on a different ticket.\n-\n-Note that what I propose here goes beyond what is done \"on the fly\" in #9713, whose main purpose isn't coercion anyway. Moreover, my patch here does hardly touch the stuff that is really important for #9713. Hence, I suggest to add the ticket here to the long list of dependencies for #9713.\n``````\n",
    "created_at": "2014-08-15T11:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99531",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-Currently, modules in Sage do not use the category framework and are based on the old coercion model. Moreover, some coercions go wrong:
+Currently, modules in Sage are based on the old coercion model and do not cooperate well with the category framework.  This ticket updates almost all module classes to the use new coercion model and the category framework.
 
-Without my patch, we have
+Moreover, some coercions go wrong:
 
 ```
 sage: V3 = QQ^3
@@ -32,7 +32,7 @@
 [(1, 0), (0, 1), (-1, -1)]
 ```
 
-Comparison goes wrong as well without my patch:
+Comparison goes wrong as well:
 
 ```
 sage: V2==M
@@ -41,8 +41,5 @@
 False
 ```
 
-My patch removes the coercion between abstract module `V^2` and the quotient modules. Moreover, we then have `V2!=M`.
+In the above examples, this ticket removes the coercion between abstract module `V^2` and the quotient modules, and makes sure that `V2!=M`.
 
-I did not implement the "advanced" bits of coercion yet, namely the construction functor and pushout magic. This will be dealt with on a different ticket.
-
-Note that what I propose here goes beyond what is done "on the fly" in #9713, whose main purpose isn't coercion anyway. Moreover, my patch here does hardly touch the stuff that is really important for #9713. Hence, I suggest to add the ticket here to the long list of dependencies for #9713.
``````




---

archive/issue_comments_099532.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f\"><code>ddda401</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>\n",
    "created_at": "2014-08-27T17:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99532",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f"><code>ddda401</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>




---

archive/issue_comments_099533.json:
```json
{
    "body": "Changed commit from **[`5126b66`](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)** to **[`ddda401`](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)**",
    "created_at": "2014-08-27T17:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99533",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5126b66`](https://github.com/sagemath/sagetrac-mirror/commit/5126b66a6c5ba2d52b6daff6ee489aa8b48a7548)** to **[`ddda401`](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)**



---

archive/issue_comments_099534.json:
```json
{
    "body": "Changed commit from **[`ddda401`](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)** to **[`ed6bbf1`](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)**",
    "created_at": "2014-12-04T22:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99534",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ddda401`](https://github.com/sagemath/sagetrac-mirror/commit/ddda401f855fc34936e204eb14fa3d0af597b76f)** to **[`ed6bbf1`](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)**



---

archive/issue_comments_099535.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb997baca934097cdeb91e99520bac57938ca1d\"><code>2bb997b</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840\"><code>ed6bbf1</code></a></td><td><code>Trac 10513: fix doctest</code></td></tr></table>\n",
    "created_at": "2014-12-04T22:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99535",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb997baca934097cdeb91e99520bac57938ca1d"><code>2bb997b</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840"><code>ed6bbf1</code></a></td><td><code>Trac 10513: fix doctest</code></td></tr></table>




---

archive/issue_comments_099536.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nCould you add a little documentation about the `coercion_reverse` thing?\nOr rather, move it in the actual code, rather than in comments?\nNot that the category/coercion stuff is already obscure, but...",
    "created_at": "2014-12-08T17:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99536",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Could you add a little documentation about the `coercion_reverse` thing?
Or rather, move it in the actual code, rather than in comments?
Not that the category/coercion stuff is already obscure, but...



---

archive/issue_comments_099537.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI guess my comment should have been made in #16507.",
    "created_at": "2014-12-08T17:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99537",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

I guess my comment should have been made in #16507.



---

archive/issue_events_136731.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-18T20:13:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136731"
}
```



---

archive/issue_events_136732.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-18T20:13:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136732"
}
```



---

archive/issue_comments_099538.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAfter merging with 6.5.beta3 (which `git` does automatically, despite Trac being unable to auto-merge), there is one failing doctest:\n\n```\nFile \"src/sage/modules/free_module.py\", line 6074, in sage.modules.free_module.FreeModule_submodule_with_basis_field\nFailed example:\n    TestSuite(W).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/home/bruinpj/src/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 282, in run\n        test_method(tester = tester)\n      File \"sage/structure/sage_object.pyx\", line 543, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4553)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"/home/bruinpj/src/sage/local/lib/python/unittest/case.py\", line 513, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/home/bruinpj/src/sage/local/lib/python/unittest/case.py\", line 506, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n    User basis matrix:\n    [1 1 x] != Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n    User basis matrix:\n    [1 1 x]\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n```\nThis is due to the cached `echelonized_basis_matrix` behaving badly under pickling:\n\n```\nsage: K.<x> = FractionField(QQ['x'])\nsage: M = K^3\nsage: W = M.span_of_basis([[1, 1, x]])\nsage: W.echelonized_basis_matrix()\n[1 1 x]\nsage: s = dumps(W)\nsage: V = loads(s)\nsage: V.echelonized_basis_matrix()\n[1, 1, x]\nsage: type(_)\n<type 'list'>\n```\nThere does not seem to be any such problem with `basis_matrix()`:\n\n```\nsage: W.basis_matrix()\n[1 1 x]\nsage: V.basis_matrix()\n[1 1 x]\n```",
    "created_at": "2014-12-18T20:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99538",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:20" align="right">comment:20</div>

After merging with 6.5.beta3 (which `git` does automatically, despite Trac being unable to auto-merge), there is one failing doctest:

```
File "src/sage/modules/free_module.py", line 6074, in sage.modules.free_module.FreeModule_submodule_with_basis_field
Failed example:
    TestSuite(W).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/home/bruinpj/src/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "sage/structure/sage_object.pyx", line 543, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4553)
        tester.assertEqual(loads(dumps(self)), self)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 513, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/home/bruinpj/src/sage/local/lib/python/unittest/case.py", line 506, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x] != Vector space of degree 3 and dimension 1 over Fraction Field of Univariate Polynomial Ring in x over Rational Field
    User basis matrix:
    [1 1 x]
    ------------------------------------------------------------
    The following tests failed: _test_pickling
```
This is due to the cached `echelonized_basis_matrix` behaving badly under pickling:

```
sage: K.<x> = FractionField(QQ['x'])
sage: M = K^3
sage: W = M.span_of_basis([[1, 1, x]])
sage: W.echelonized_basis_matrix()
[1 1 x]
sage: s = dumps(W)
sage: V = loads(s)
sage: V.echelonized_basis_matrix()
[1, 1, x]
sage: type(_)
<type 'list'>
```
There does not seem to be any such problem with `basis_matrix()`:

```
sage: W.basis_matrix()
[1 1 x]
sage: V.basis_matrix()
[1 1 x]
```



---

archive/issue_comments_099539.json:
```json
{
    "body": "Work Issues: **fix pickling problem**",
    "created_at": "2014-12-18T20:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99539",
    "user": "https://github.com/pjbruin"
}
```

Work Issues: **fix pickling problem**



---

archive/issue_comments_099540.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe pickling problem is independent of this ticket, see #17527.",
    "created_at": "2014-12-19T10:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99540",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:21" align="right">comment:21</div>

The pickling problem is independent of this ticket, see #17527.



---

archive/issue_comments_099541.json:
```json
{
    "body": "Changed dependencies from **#16507** to **#16507, #17527**",
    "created_at": "2014-12-19T10:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99541",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#16507** to **#16507, #17527**



---

archive/issue_comments_099542.json:
```json
{
    "body": "Changed work issues from **fix pickling problem** to none",
    "created_at": "2014-12-19T10:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99542",
    "user": "https://github.com/pjbruin"
}
```

Changed work issues from **fix pickling problem** to none



---

archive/issue_comments_099543.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19e2c5575d056fa7e91336363502e0a0a78afd8\"><code>a19e2c5</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27\"><code>2f52a3c</code></a></td><td><code>Trac 10513: remove unnecessary FreeModule_generic_field.__echelonized_basis_matrix</code></td></tr></table>\n",
    "created_at": "2014-12-19T12:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19e2c5575d056fa7e91336363502e0a0a78afd8"><code>a19e2c5</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27"><code>2f52a3c</code></a></td><td><code>Trac 10513: remove unnecessary FreeModule_generic_field.__echelonized_basis_matrix</code></td></tr></table>




---

archive/issue_comments_099544.json:
```json
{
    "body": "Changed commit from **[`ed6bbf1`](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)** to **[`2f52a3c`](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)**",
    "created_at": "2014-12-19T12:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed6bbf1`](https://github.com/sagemath/sagetrac-mirror/commit/ed6bbf1bf478d40fe467d2f56bc58b0ad482a840)** to **[`2f52a3c`](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)**



---

archive/issue_comments_099545.json:
```json
{
    "body": "Changed dependencies from **#16507, #17527** to **#16507**",
    "created_at": "2014-12-19T12:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99545",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#16507, #17527** to **#16507**



---

archive/issue_comments_099546.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe pickling problem can actually be circumvented in a more elegant way by avoiding an unnecessary caching step (the echelon form of a matrix is already cached).",
    "created_at": "2014-12-19T12:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99546",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:23" align="right">comment:23</div>

The pickling problem can actually be circumvented in a more elegant way by avoiding an unnecessary caching step (the echelon form of a matrix is already cached).



---

archive/issue_events_136733.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-19T12:06:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136733"
}
```



---

archive/issue_events_136734.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-12-19T12:06:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136734"
}
```



---

archive/issue_comments_099547.json:
```json
{
    "body": "Changed commit from **[`2f52a3c`](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)** to **[`2d7f075`](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)**",
    "created_at": "2014-12-19T14:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f52a3c`](https://github.com/sagemath/sagetrac-mirror/commit/2f52a3cb9945479d4d7298c06119bde5481c6d27)** to **[`2d7f075`](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)**



---

archive/issue_comments_099548.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252\"><code>2d7f075</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>\n",
    "created_at": "2014-12-19T14:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252"><code>2d7f075</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>




---

archive/issue_comments_099549.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI had a look at the work done here and it looks nice.\n\n\nReplying to [@pjbruin](#comment%3A10):\n> OK, ready for review.  There is still some future work to be done:\n> - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n>   1. `sage.coding.linear_code.LinearCode`\n>   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n>   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n>   4. `sage.structure.formal_sum.FormalSums`\n> - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\n> I think it is better to do these in separate tickets.\n\nDid you open tickets for these?\n\nAnd in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.\nAny ticket opened to implement such a coercion?",
    "created_at": "2014-12-23T14:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99549",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

I had a look at the work done here and it looks nice.


Replying to [@pjbruin](#comment%3A10):
> OK, ready for review.  There is still some future work to be done:
> - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
>   1. `sage.coding.linear_code.LinearCode`
>   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
>   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
>   4. `sage.structure.formal_sum.FormalSums`
> - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> I think it is better to do these in separate tickets.

Did you open tickets for these?

And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
Any ticket opened to implement such a coercion?



---

archive/issue_comments_099550.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jpflori](#comment%3A25):\n> I had a look at the work done here and it looks nice.\n\nThanks!\n> Replying to [@pjbruin](#comment%3A10):\n> > OK, ready for review.  There is still some future work to be done:\n> > - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:\n> >   1. `sage.coding.linear_code.LinearCode`\n> >   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`\n> >   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`\n> >   4. `sage.structure.formal_sum.FormalSums`\n> > - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.\n> > I think it is better to do these in separate tickets.\n\n> Did you open tickets for these?\n\nI just created #17543 and #17544.  (See [comment:11](#comment%3A11) for `LinearCode`.)\n> And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.\n> Any ticket opened to implement such a coercion?\n\nI'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.",
    "created_at": "2014-12-23T17:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99550",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jpflori](#comment%3A25):
> I had a look at the work done here and it looks nice.

Thanks!
> Replying to [@pjbruin](#comment%3A10):
> > OK, ready for review.  There is still some future work to be done:
> > - move the last few classes from `Module_old` to `Module`.  There are only four of these remaining:
> >   1. `sage.coding.linear_code.LinearCode`
> >   2. `sage.modular.abvar.finite_subgroup.FiniteSubgroup`
> >   3. `sage.modular.overconvergent.genus0.OverconvergentModularFormsSpace`
> >   4. `sage.structure.formal_sum.FormalSums`
> > - make `sage.modules.matrix_morphism.MatrixMorphism_abstract` use single-underscore methods for addition, subtraction, scalar multiplication and composition.
> > I think it is better to do these in separate tickets.

> Did you open tickets for these?

I just created #17543 and #17544.  (See [comment:11](#comment%3A11) for `LinearCode`.)
> And in a couple of changes to `src/sage/geometry/cone.py` you modify code not to use `_ in _` as ther is no coercion defined.
> Any ticket opened to implement such a coercion?

I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.



---

archive/issue_comments_099551.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@pjbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?\n> I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.\n\nI was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.",
    "created_at": "2014-12-23T17:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99551",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@pjbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?
> I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.

I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.



---

archive/issue_comments_099552.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jpflori](#comment%3A27):\n> Replying to [@pjbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?\n> > I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.\n\n> I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.\n\nAfter looking at this again, I think the reason was as follows: a cone *C* is a certain type of subset of a vector space *V*, and *C* contains a largest maximal linear subspace *S*.  Now to test if an element *x* of *C* is in *S*, the coercion framework checks if *S*(*x*) == *x*, but when trying to comparing these two elements it cannot find a common parent for the toric lattice and the linear subspace.  This seems to be because of the following method in `ToricLattice_generic`:\n\n```python\n# We need to override this function, otherwise e.g. the sum of elements of\n# different lattices of the same dimension will live in ZZ^n.\ndef construction(self):\n    r\"\"\"\n    Return the functorial construction of ``self``.\n\n    OUTPUT:\n\n    - ``None``, we do not think of toric lattices as constructed from\n      simpler objects since we do not want to perform arithmetic involving\n      different lattices.\n\n    [...]\n    \"\"\"\n    return None\n```\nThe reason why it used to work with the old coercion model might have been a peculiarity of some `_coerce_impl()` method.  Trying to fix this (so that we can use `... in ...` again) will probably lead to all kind of other problems, so I'd prefer not to do that on this ticket.",
    "created_at": "2014-12-23T20:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99552",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jpflori](#comment%3A27):
> Replying to [@pjbruin](#comment%3A26):> > Any ticket opened to implement such a coercion?
> > I'm not sure if this is desired; the absence of these particular maps may have been an (unintended) consequence of implementing the new coercion model in the simplest possible way, but it may have been intentional as well, I don't remember.

> I was asking because it used to be possible to use the `in` keyword when the classes were using the old coercion model.

After looking at this again, I think the reason was as follows: a cone *C* is a certain type of subset of a vector space *V*, and *C* contains a largest maximal linear subspace *S*.  Now to test if an element *x* of *C* is in *S*, the coercion framework checks if *S*(*x*) == *x*, but when trying to comparing these two elements it cannot find a common parent for the toric lattice and the linear subspace.  This seems to be because of the following method in `ToricLattice_generic`:

```python
# We need to override this function, otherwise e.g. the sum of elements of
# different lattices of the same dimension will live in ZZ^n.
def construction(self):
    r"""
    Return the functorial construction of ``self``.

    OUTPUT:

    - ``None``, we do not think of toric lattices as constructed from
      simpler objects since we do not want to perform arithmetic involving
      different lattices.

    [...]
    """
    return None
```
The reason why it used to work with the old coercion model might have been a peculiarity of some `_coerce_impl()` method.  Trying to fix this (so that we can use `... in ...` again) will probably lead to all kind of other problems, so I'd prefer not to do that on this ticket.



---

archive/issue_events_136735.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-26T10:09:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136735"
}
```



---

archive/issue_events_136736.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2014-12-26T10:09:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136736"
}
```



---

archive/issue_comments_099553.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2014-12-26T10:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99553",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_099554.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOk, I buy your explanation, thanks for digging this out.",
    "created_at": "2014-12-26T10:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99554",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Ok, I buy your explanation, thanks for digging this out.



---

archive/issue_comments_099555.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI get lots of doctest failures all originating at something like\n\n```\n    TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)\n```",
    "created_at": "2015-01-02T08:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99555",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

I get lots of doctest failures all originating at something like

```
    TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
```



---

archive/issue_events_136737.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T08:26:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136737"
}
```



---

archive/issue_events_136738.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T08:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136738"
}
```



---

archive/issue_comments_099556.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@vbraun](#comment%3A30):\n> I get lots of doctest failures all originating at something like\n> \n> ```\n>     TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)\n> ```\n\nCan you give more details and/or a link to a log file?  I am not getting any doctest failures in `sage/modular` (which I would guess is where these failures occur) after merging this branch with 6.5.beta4, both on x86_64 and on ARM.",
    "created_at": "2015-01-02T11:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99556",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@vbraun](#comment%3A30):
> I get lots of doctest failures all originating at something like
> 
> ```
>     TypeError: must be intialized with a type, not Manin Symbol List of weight 4 for Gamma0(11)
> ```

Can you give more details and/or a link to a log file?  I am not getting any doctest failures in `sage/modular` (which I would guess is where these failures occur) after merging this branch with 6.5.beta4, both on x86_64 and on ARM.



---

archive/issue_comments_099557.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI think it's because of #10962.",
    "created_at": "2015-01-02T12:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99557",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

I think it's because of #10962.



---

archive/issue_comments_099558.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nDoes this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?",
    "created_at": "2015-01-02T12:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99558",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?



---

archive/issue_comments_099559.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jdemeyer](#comment%3A34):\n> Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?\n\nNo, I don't think so.  (It does solve #17576, though.)",
    "created_at": "2015-01-02T12:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99559",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jdemeyer](#comment%3A34):
> Does this patch address anything of https://groups.google.com/forum/#!topic/sage-devel/7n5xtT9Dw2g by chance?

No, I don't think so.  (It does solve #17576, though.)



---

archive/issue_comments_099560.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jdemeyer](#comment%3A33):\n> I think it's because of #10962.\n\nYou're right, I'm looking into it.",
    "created_at": "2015-01-02T13:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99560",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jdemeyer](#comment%3A33):
> I think it's because of #10962.

You're right, I'm looking into it.



---

archive/issue_events_136739.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-02T19:25:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136739"
}
```



---

archive/issue_events_136740.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-02T19:25:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136740"
}
```



---

archive/issue_comments_099561.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThe failures when applying this together with #10962 are caused by the fact that Manin symbols do not use the `Parent`/`Element` machinery.  This is fixed by #17578.",
    "created_at": "2015-01-02T19:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99561",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:37" align="right">comment:37</div>

The failures when applying this together with #10962 are caused by the fact that Manin symbols do not use the `Parent`/`Element` machinery.  This is fixed by #17578.



---

archive/issue_comments_099562.json:
```json
{
    "body": "Changed dependencies from **#16507** to **#16507, #17578**",
    "created_at": "2015-01-02T19:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99562",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#16507** to **#16507, #17578**



---

archive/issue_comments_099563.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nIn `src/sage/modules/free_module_element.pyx`, you changed in one place\n\n```\nexcept TypeError:\n```\nto\n\n```\nexcept (TypeError, ValueError):\n```\n\nIs this change needed? If yes, it should also be applied to the other place with similar code (there is one `__init__` method for dense and one for sparse vectors).",
    "created_at": "2015-01-03T00:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99563",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

In `src/sage/modules/free_module_element.pyx`, you changed in one place

```
except TypeError:
```
to

```
except (TypeError, ValueError):
```

Is this change needed? If yes, it should also be applied to the other place with similar code (there is one `__init__` method for dense and one for sparse vectors).



---

archive/issue_events_136741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-03T00:12:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136741"
}
```



---

archive/issue_events_136742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-03T00:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136742"
}
```



---

archive/issue_comments_099564.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n(I'm asking because this is a conflict with #17561)",
    "created_at": "2015-01-03T00:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99564",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

(I'm asking because this is a conflict with #17561)



---

archive/issue_comments_099565.json:
```json
{
    "body": "Changed commit from **[`2d7f075`](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)** to **[`99ec4cc`](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)**",
    "created_at": "2015-01-03T08:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2d7f075`](https://github.com/sagemath/sagetrac-mirror/commit/2d7f0759c12fbeeb45d42c2d6160f8d925a22252)** to **[`99ec4cc`](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)**



---

archive/issue_comments_099566.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150\"><code>99ec4cc</code></a></td><td><code>Trac 10513: revert a change in try...except</code></td></tr></table>\n",
    "created_at": "2015-01-03T08:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150"><code>99ec4cc</code></a></td><td><code>Trac 10513: revert a change in try...except</code></td></tr></table>




---

archive/issue_comments_099567.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jdemeyer](#comment%3A38):\n> In `src/sage/modules/free_module_element.pyx`, you changed in one place\n> \n> ```\n> except TypeError:\n> ```\n> to\n> \n> ```\n> except (TypeError, ValueError):\n> ```\n> \n> Is this change needed?\n\nApparently not; the last commit reverts it.",
    "created_at": "2015-01-03T08:42:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99567",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jdemeyer](#comment%3A38):
> In `src/sage/modules/free_module_element.pyx`, you changed in one place
> 
> ```
> except TypeError:
> ```
> to
> 
> ```
> except (TypeError, ValueError):
> ```
> 
> Is this change needed?

Apparently not; the last commit reverts it.



---

archive/issue_events_136743.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-03T08:42:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136743"
}
```



---

archive/issue_events_136744.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-01-03T08:42:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136744"
}
```



---

archive/issue_comments_099568.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThere is a minor conflict with #17561.",
    "created_at": "2015-01-11T21:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99568",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

There is a minor conflict with #17561.



---

archive/issue_events_136745.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-11T21:33:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136745"
}
```



---

archive/issue_events_136746.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-11T21:33:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136746"
}
```



---

archive/issue_comments_099569.json:
```json
{
    "body": "Changed dependencies from **#16507, #17578** to **#16507, #17578, #17561**",
    "created_at": "2015-01-11T21:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99569",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#16507, #17578** to **#16507, #17578, #17561**



---

archive/issue_comments_099570.json:
```json
{
    "body": "Changed branch from **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)** to **[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)**",
    "created_at": "2015-01-12T13:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99570",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)** to **[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)**



---

archive/issue_events_136747.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136747"
}
```



---

archive/issue_events_136748.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136748"
}
```



---

archive/issue_comments_099571.json:
```json
{
    "body": "Changed commit from **[`99ec4cc`](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)** to **[`b1287e7`](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)**",
    "created_at": "2015-01-12T13:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99571",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`99ec4cc`](https://github.com/sagemath/sagetrac-mirror/commit/99ec4cc13099658e0bc762a6e8d230c3956c7150)** to **[`b1287e7`](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)**



---

archive/issue_events_136749.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136749"
}
```



---

archive/issue_events_136750.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-12T13:10:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136750"
}
```



---

archive/issue_comments_099572.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df0fb69e1aa9ab205e35b98ad6d97d0c67b889af\"><code>df0fb69</code></a></td><td><code>Declare types of _entries</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/106f5d41398794b13a6a683236cf219d49602312\"><code>106f5d4</code></a></td><td><code>Minor improvements in FreeModuleElement_generic_sparse.__init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab\"><code>b1287e7</code></a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr></table>\n",
    "created_at": "2015-01-12T13:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99572",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df0fb69e1aa9ab205e35b98ad6d97d0c67b889af"><code>df0fb69</code></a></td><td><code>Declare types of _entries</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/106f5d41398794b13a6a683236cf219d49602312"><code>106f5d4</code></a></td><td><code>Minor improvements in FreeModuleElement_generic_sparse.__init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab"><code>b1287e7</code></a></td><td><code>Merge branch 'ticket/17561' into ticket/10513</code></td></tr></table>




---

archive/issue_comments_099573.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nOn 6.5.beta5:\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 3.63 s, sys: 28 ms, total: 3.66 s\nWall time: 3.65 s\n```\nWith this branch:\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 13.4 s, sys: 29 ms, total: 13.5 s\nWall time: 13.5 s\n```\nI think that's a significant regression in performance. It's probably due to the construction of the category-with-base. If you change the category to be \"Category of vector spaces over Fields\" or \"over Finite Fields\" you'll get much better performance, because there's not a new category to be constructed for every single space.\n\n(this stuff isn't academic--such spaces really get made a lot in CRT code). See also #17360, where the issue causes a memleak (that seems to be fine here). See also [[#10963 comment:506](https://github.com/sagemath/sage/issues/10963#comment:506)] where this issue was mentioned right at the start of the development of these parametrized categories.",
    "created_at": "2015-01-13T16:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99573",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:46" align="right">comment:46</div>

On 6.5.beta5:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 3.63 s, sys: 28 ms, total: 3.66 s
Wall time: 3.65 s
```
With this branch:

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 13.4 s, sys: 29 ms, total: 13.5 s
Wall time: 13.5 s
```
I think that's a significant regression in performance. It's probably due to the construction of the category-with-base. If you change the category to be "Category of vector spaces over Fields" or "over Finite Fields" you'll get much better performance, because there's not a new category to be constructed for every single space.

(this stuff isn't academic--such spaces really get made a lot in CRT code). See also #17360, where the issue causes a memleak (that seems to be fine here). See also [[#10963 comment:506](https://github.com/sagemath/sage/issues/10963#comment:506)] where this issue was mentioned right at the start of the development of these parametrized categories.



---

archive/issue_events_136751.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-13T16:57:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136751"
}
```



---

archive/issue_events_136752.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-01-13T16:57:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136752"
}
```



---

archive/issue_comments_099574.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nYep, with\n\n```diff\ndiff --git a/src/sage/modules/free_module.py b/src/sage/modules/free_module.py\nindex 4cf68fc..dc9248c 100644\n--- a/src/sage/modules/free_module.py\n+++ b/src/sage/modules/free_module.py\n@@ -721,10 +721,11 @@ done from the right side.\"\"\")\n \n         if category is None:\n             from sage.categories.all import Fields, FreeModules, VectorSpaces\n-            if base_ring in Fields():\n-                category = VectorSpaces(base_ring)\n+            F=Fields()\n+            if base_ring in F:\n+                category = VectorSpaces(F)\n             else:\n-                category = FreeModules(base_ring)\n+                category = FreeModules(base_ring.category())\n             try:\n                 if base_ring.is_finite() or rank == 0:\n                     # Put the module in the category of finite enumerated\n\n```\nI get\n\n```\nsage: %time for p in prime_range(10^5): V=(GF(p))^3\nCPU times: user 2.52 s, sys: 27 ms, total: 2.54 s\nWall time: 2.53 s\n```\nIn profiling this example I'm still finding\n\n```\n    28774    0.054    0.000    0.329    0.000 category.py:2281(join)\n```\nso it seems we're still spending more than 10% of our time on dynamically constructing a category (taking the join with `FiniteEnumeratedSets()`) just to get a list method. This looks like another candidate to improve (a bit).\n\nOn the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.",
    "created_at": "2015-01-13T19:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99574",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:47" align="right">comment:47</div>

Yep, with

```diff
diff --git a/src/sage/modules/free_module.py b/src/sage/modules/free_module.py
index 4cf68fc..dc9248c 100644
--- a/src/sage/modules/free_module.py
+++ b/src/sage/modules/free_module.py
@@ -721,10 +721,11 @@ done from the right side.""")
 
         if category is None:
             from sage.categories.all import Fields, FreeModules, VectorSpaces
-            if base_ring in Fields():
-                category = VectorSpaces(base_ring)
+            F=Fields()
+            if base_ring in F:
+                category = VectorSpaces(F)
             else:
-                category = FreeModules(base_ring)
+                category = FreeModules(base_ring.category())
             try:
                 if base_ring.is_finite() or rank == 0:
                     # Put the module in the category of finite enumerated

```
I get

```
sage: %time for p in prime_range(10^5): V=(GF(p))^3
CPU times: user 2.52 s, sys: 27 ms, total: 2.54 s
Wall time: 2.53 s
```
In profiling this example I'm still finding

```
    28774    0.054    0.000    0.329    0.000 category.py:2281(join)
```
so it seems we're still spending more than 10% of our time on dynamically constructing a category (taking the join with `FiniteEnumeratedSets()`) just to get a list method. This looks like another candidate to improve (a bit).

On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.



---

archive/issue_comments_099575.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@nbruin](#comment%3A47):\n> On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.\n\nIndeed, the category of `GF(p)` is a join of three categories:\n\n```\nsage: GF(3).category()\nJoin of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n```\nMaybe parts of the category code (like `join`) should be transformed into Cython to make it faster?",
    "created_at": "2015-01-20T14:20:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99575",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@nbruin](#comment%3A47):
> On the other hand, part of this might by due to `GF(p)` construction by itself. If I first do `L=[GF(p) for  p in prime_range(10^5)]` the run time drops to 1.19 s, there are less calls to join (exactly one per constructed field, so `GF(p)` seems to need two category joins) and the impact of `category.join` drops to `0.086`, which is about 6-7% of the run time then.

Indeed, the category of `GF(p)` is a join of three categories:

```
sage: GF(3).category()
Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
```
Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?



---

archive/issue_comments_099576.json:
```json
{
    "body": "Changed commit from **[`b1287e7`](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)** to **[`6b63026`](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)**",
    "created_at": "2015-01-21T10:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99576",
    "user": "https://github.com/pjbruin"
}
```

Changed commit from **[`b1287e7`](https://github.com/sagemath/sagetrac-mirror/commit/b1287e75962a2dc590f1fa22acc90a4e53383aab)** to **[`6b63026`](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)**



---

archive/issue_comments_099577.json:
```json
{
    "body": "Changed dependencies from **#16507, #17578, #17561** to **#16507, #17578, #17561, #11126**",
    "created_at": "2015-01-21T10:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99577",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#16507, #17578, #17561** to **#16507, #17578, #17561, #11126**



---

archive/issue_comments_099578.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nWith the new commits, the category of free modules is `FreeModules(base_ring.category())` by default, and instead of taking the join with `FiniteEnumeratedSets` (if applicable), we add a `list()` method.\n\nThere are two doctest failures:\n\n```\nsage -t --long --warn-long 43.7 src/sage/matrix/matrix2.pyx  # 1 doctest failed\nsage -t --long --warn-long 43.7 src/sage/modules/free_module.py  # 1 doctest failed\n```\nThe first is caused by #11126; the second is a `NotImplementedError` in `repr()` caused by the fact that `basis()` is not implemented for abstract free modules.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380\"><code>f0957f0</code></a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b\"><code>6b63026</code></a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr></table>\n",
    "created_at": "2015-01-21T10:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99578",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:49" align="right">comment:49</div>

With the new commits, the category of free modules is `FreeModules(base_ring.category())` by default, and instead of taking the join with `FiniteEnumeratedSets` (if applicable), we add a `list()` method.

There are two doctest failures:

```
sage -t --long --warn-long 43.7 src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long --warn-long 43.7 src/sage/modules/free_module.py  # 1 doctest failed
```
The first is caused by #11126; the second is a `NotImplementedError` in `repr()` caused by the fact that `basis()` is not implemented for abstract free modules.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0957f0ab545bab9d405fadbe1fdffdbd9e39380"><code>f0957f0</code></a></td><td><code>Trac 10513: use FreeModules(base_ring.category()) instead of FreeModules(base_ring)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b"><code>6b63026</code></a></td><td><code>Trac 10513: method FreeModule_generic.list() to replace FiniteEnumeratedSets magic</code></td></tr></table>




---

archive/issue_comments_099579.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)** to **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)**",
    "created_at": "2015-01-21T10:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99579",
    "user": "https://github.com/pjbruin"
}
```

Changed branch from **[u/jdemeyer/ticket/10513](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10513)** to **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)**



---

archive/issue_comments_099580.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@pjbruin](#comment%3A48):\n> Indeed, the category of `GF(p)` is a join of three categories:\n> \n> ```\n> sage: GF(3).category()\n> Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups\n> ```\n> Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?\n\nThat's one option, but ultimately taking joins is a a rather dynamic operation that needs to investigate quite a bit of the category graph in order to ensure it's safe to use what's cached (can the result of a join depend on changes elsewhere in the graph?). In the case of finite fields, there is *no* variation in what the category is: this thing can be created up front (to accommodate GF(2), which is always present if I'm not mistaken), and just be set to be the category. The current problem is that the joining of categories happens in some of the more generic construction routines. We'd need a way of signalling that we want to shortcut that (a precise_category keyword that percolates up perhaps?). That's an optimization strategy that may have more pay-off for this particular scenario than making \"join\" faster (which might still be worthwhile to do). In any case, that's for another ticket. Also: premature optimization etc. Thanks for looking into this.",
    "created_at": "2015-01-21T18:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99580",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@pjbruin](#comment%3A48):
> Indeed, the category of `GF(p)` is a join of three categories:
> 
> ```
> sage: GF(3).category()
> Join of Category of finite fields and Category of subquotients of monoids and Category of quotients of semigroups
> ```
> Maybe parts of the category code (like `join`) should be transformed into Cython to make it faster?

That's one option, but ultimately taking joins is a a rather dynamic operation that needs to investigate quite a bit of the category graph in order to ensure it's safe to use what's cached (can the result of a join depend on changes elsewhere in the graph?). In the case of finite fields, there is *no* variation in what the category is: this thing can be created up front (to accommodate GF(2), which is always present if I'm not mistaken), and just be set to be the category. The current problem is that the joining of categories happens in some of the more generic construction routines. We'd need a way of signalling that we want to shortcut that (a precise_category keyword that percolates up perhaps?). That's an optimization strategy that may have more pay-off for this particular scenario than making "join" faster (which might still be worthwhile to do). In any case, that's for another ticket. Also: premature optimization etc. Thanks for looking into this.



---

archive/issue_comments_099581.json:
```json
{
    "body": "Changed commit from **[`6b63026`](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)** to **[`ac70986`](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)**",
    "created_at": "2015-03-20T20:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b63026`](https://github.com/sagemath/sagetrac-mirror/commit/6b63026ceea5e9daaee46ca821a85e4edd6ded8b)** to **[`ac70986`](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)**



---

archive/issue_comments_099582.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2\"><code>6d5aaa1</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf\"><code>d1db7ea</code></a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b\"><code>7b09742</code></a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6\"><code>ac685ec</code></a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a\"><code>ac70986</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>\n",
    "created_at": "2015-03-20T20:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99582",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d5aaa146b24ce0af273d1449ad7568ad383b1a2"><code>6d5aaa1</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1db7ea795c2b79cd7df250a2e7e005ac2375caf"><code>d1db7ea</code></a></td><td><code>Trac 10513: construct coerce_map as default conversion map instead of matrix morphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b09742f58b3d96f4cf0f6573d166bdca3207c1b"><code>7b09742</code></a></td><td><code>Trac 10513: checking if element_class is a method is no longer necessary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac685ec9aeb5f89dce2c6e6bcd97e795cffa0ba6"><code>ac685ec</code></a></td><td><code>Trac 10513: update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a"><code>ac70986</code></a></td><td><code>Trac 10513: small documentation improvement</code></td></tr></table>




---

archive/issue_events_136753.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T20:42:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136753"
}
```



---

archive/issue_events_136754.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-20T20:42:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136754"
}
```



---

archive/issue_comments_099583.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nEverything should work again after this update.",
    "created_at": "2015-03-20T20:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99583",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:52" align="right">comment:52</div>

Everything should work again after this update.



---

archive/issue_events_136755.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T10:02:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136755"
}
```



---

archive/issue_events_136756.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-21T10:02:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136756"
}
```



---

archive/issue_comments_099584.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nNot everything...\n\n```\nsome tests failed:\nsage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed\nsage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed\nsage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed\nsage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed\nsage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed\n```",
    "created_at": "2015-03-21T10:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99584",
    "user": "https://github.com/videlec"
}
```

<div id="comment:53" align="right">comment:53</div>

Not everything...

```
some tests failed:
sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
```



---

archive/issue_comments_099585.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@videlec](#comment%3A53):\n> Not everything...\n> \n> ```\n> some tests failed:\n> sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed\n> sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed\n> sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed\n> ```\n\nI just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?",
    "created_at": "2015-03-21T19:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99585",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@videlec](#comment%3A53):
> Not everything...
> 
> ```
> some tests failed:
> sage -t --long src/sage/matrix/matrix2.pyx  # 1 doctest failed
> sage -t --long src/sage/modular/modform/constructor.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/eisenstein_submodule.py  # 1 doctest failed
> sage -t --long src/sage/modular/modform/ambient_g1.py  # 1 doctest failed
> sage -t --long src/sage/modular/arithgroup/congroup_gamma0.py  # 1 doctest failed
> ```

I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?



---

archive/issue_comments_099586.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@pjbruin](#comment%3A54):\n> Replying to [@videlec](#comment%3A53):\n\n>> ...\n\n> I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?\n\nStrange... I am launching the tests again.",
    "created_at": "2015-03-21T19:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99586",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@pjbruin](#comment%3A54):
> Replying to [@videlec](#comment%3A53):

>> ...

> I just tested again with 6.6.rc0 and #11126 merged, and got no failures.  What kind of errors are you getting?

Strange... I am launching the tests again.



---

archive/issue_comments_099587.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nPlease be aware of #17562 which also involves modules. Given that #10513 is mostly about the parent and #17562 is mostly about the elements, there is probably no conflict but I felt like I should mention this anyway.",
    "created_at": "2015-03-21T20:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99587",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Please be aware of #17562 which also involves modules. Given that #10513 is mostly about the parent and #17562 is mostly about the elements, there is probably no conflict but I felt like I should mention this anyway.



---

archive/issue_comments_099588.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nResults of the new test... most of the failures disappeared except one\n\n```\nsage -t --long src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 1931, in sage.matrix.matrix2.Matrix.minpoly\nFailed example:\n    m.minimal_polynomial()\nException raised:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains\n**********************************************************************\n```",
    "created_at": "2015-03-21T20:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99588",
    "user": "https://github.com/videlec"
}
```

<div id="comment:57" align="right">comment:57</div>

Results of the new test... most of the failures disappeared except one

```
sage -t --long src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
Failed example:
    m.minimal_polynomial()
Exception raised:
    Traceback (most recent call last):
    ...
    NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
**********************************************************************
```



---

archive/issue_comments_099589.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@videlec](#comment%3A57):\n> Results of the new test... most of the failures disappeared except one\n> \n> ```\n> sage -t --long src/sage/matrix/matrix2.pyx\n> **********************************************************************\n> File \"src/sage/matrix/matrix2.pyx\", line 1931, in sage.matrix.matrix2.Matrix.minpoly\n> Failed example:\n>     m.minimal_polynomial()\n> Exception raised:\n>     Traceback (most recent call last):\n>     ...\n>     NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains\n> **********************************************************************\n> ```\n\nThis one is fixed by #11126.  (The other failures were probably fixed by #17578 which is in 6.6.rc0.)  I deliberately did not merge #11126 into this branch since I expected some discussion about it.  Maybe this particular failure can be fixed in a more minimalistic way than as part of #11126.",
    "created_at": "2015-03-23T10:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99589",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@videlec](#comment%3A57):
> Results of the new test... most of the failures disappeared except one
> 
> ```
> sage -t --long src/sage/matrix/matrix2.pyx
> **********************************************************************
> File "src/sage/matrix/matrix2.pyx", line 1931, in sage.matrix.matrix2.Matrix.minpoly
> Failed example:
>     m.minimal_polynomial()
> Exception raised:
>     Traceback (most recent call last):
>     ...
>     NotImplementedError: is_squarefree() is only implemented for polynomials over principal ideal domains
> **********************************************************************
> ```

This one is fixed by #11126.  (The other failures were probably fixed by #17578 which is in 6.6.rc0.)  I deliberately did not merge #11126 into this branch since I expected some discussion about it.  Maybe this particular failure can be fixed in a more minimalistic way than as part of #11126.



---

archive/issue_comments_099590.json:
```json
{
    "body": "Changed dependencies from **#16507, #17578, #17561, #11126** to **#16507, #17578, #17561, #18040**",
    "created_at": "2015-03-23T11:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99590",
    "user": "https://github.com/pjbruin"
}
```

Changed dependencies from **#16507, #17578, #17561, #11126** to **#16507, #17578, #17561, #18040**



---

archive/issue_events_136757.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136757"
}
```



---

archive/issue_events_136758.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136758"
}
```



---

archive/issue_events_136759.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136759"
}
```



---

archive/issue_events_136760.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-03-23T13:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136760"
}
```



---

archive/issue_comments_099591.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@jdemeyer](#comment%3A56):\n> Please be aware of #17562 which also involves modules.\n\nAll tests pass after merging #17562 and the new dependency #18040.",
    "created_at": "2015-03-23T13:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99591",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@jdemeyer](#comment%3A56):
> Please be aware of #17562 which also involves modules.

All tests pass after merging #17562 and the new dependency #18040.



---

archive/issue_comments_099592.json:
```json
{
    "body": "Changed dependencies from **#16507, #17578, #17561, #18040** to **#16507, #17578, #17561, #18040, #17562**",
    "created_at": "2015-03-25T20:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99592",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#16507, #17578, #17561, #18040** to **#16507, #17578, #17561, #18040, #17562**



---

archive/issue_comments_099593.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nIs this then ready to go back to positive review? Vincent, did/could you run through the tests again?",
    "created_at": "2015-03-25T20:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99593",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:61" align="right">comment:61</div>

Is this then ready to go back to positive review? Vincent, did/could you run through the tests again?



---

archive/issue_comments_099594.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nNote: #17562 is actually independent of this ticket; it merges cleanly and tests pass with or without it.  Also, I intentionally did not merge #18040 (or any other dependencies) into the branch here.  The only merge conflict was with #17561, which was fixed by Jeroen.",
    "created_at": "2015-03-25T21:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99594",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:62" align="right">comment:62</div>

Note: #17562 is actually independent of this ticket; it merges cleanly and tests pass with or without it.  Also, I intentionally did not merge #18040 (or any other dependencies) into the branch here.  The only merge conflict was with #17561, which was fixed by Jeroen.



---

archive/issue_comments_099595.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nAt least on my computer\n\n```\nAll tests passed!\n```",
    "created_at": "2015-03-26T21:37:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99595",
    "user": "https://github.com/videlec"
}
```

<div id="comment:63" align="right">comment:63</div>

At least on my computer

```
All tests passed!
```



---

archive/issue_events_136761.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T07:50:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136761"
}
```



---

archive/issue_events_136762.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T07:50:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136762"
}
```



---

archive/issue_comments_099596.json:
```json
{
    "body": "Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Vincent Delecroix**",
    "created_at": "2015-03-27T07:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99596",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Vincent Delecroix**



---

archive/issue_comments_099597.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThanks Vincent. I'm going to set this (back) to positive review.",
    "created_at": "2015-03-27T07:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99597",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:64" align="right">comment:64</div>

Thanks Vincent. I'm going to set this (back) to positive review.



---

archive/issue_events_136763.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T01:59:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136763"
}
```



---

archive/issue_events_136764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T01:59:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136764"
}
```



---

archive/issue_comments_099598.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nMerge conflict with 6.7.beta0",
    "created_at": "2015-04-15T01:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99598",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:65" align="right">comment:65</div>

Merge conflict with 6.7.beta0



---

archive/issue_comments_099599.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c\"><code>9865576</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>\n",
    "created_at": "2015-04-15T10:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99599",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c"><code>9865576</code></a></td><td><code>Merge branch 'develop' into ticket/10513-coercion_and_categories_for_modules</code></td></tr></table>




---

archive/issue_comments_099600.json:
```json
{
    "body": "Changed commit from **[`ac70986`](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)** to **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**",
    "created_at": "2015-04-15T10:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99600",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ac70986`](https://github.com/sagemath/sagetrac-mirror/commit/ac7098684fe07997da64bacee522d88c5530c38a)** to **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**



---

archive/issue_comments_099601.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThere was only a minor conflict; I assume this doesn't need another review.",
    "created_at": "2015-04-15T10:33:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99601",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:67" align="right">comment:67</div>

There was only a minor conflict; I assume this doesn't need another review.



---

archive/issue_events_136765.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-15T10:33:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136765"
}
```



---

archive/issue_events_136766.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-04-15T10:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136766"
}
```



---

archive/issue_comments_099602.json:
```json
{
    "body": "Changed branch from **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)** to **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**",
    "created_at": "2015-04-15T13:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10513#issuecomment-99602",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/10513-coercion_and_categories_for_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10513-coercion_and_categories_for_modules)** to **[`9865576`](https://github.com/sagemath/sagetrac-mirror/commit/9865576ec5600a1502e5c5e455e5f2ce08406f4c)**



---

archive/issue_events_136767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-15T13:58:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136767"
}
```



---

archive/issue_events_136768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "865aef67758f35ff1a2bc3e3b29f5cfb74a0c4f0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-04-15T13:58:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10513#event-136768"
}
```
