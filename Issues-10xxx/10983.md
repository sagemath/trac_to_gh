# Issue 10983: new doctest for french book about Sage

archive/issues_010904.json:
```json
{
    "body": "The attached patch includes a new doctest for a book (in french) some people are writing about Sage, under the supervision of Paul Zimmermann.\n\nThis patch contains only the doctests for two chapters (about calculus and graphics and solutions for corresponding exercices). \n\nThis doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.\n\nApply [attachment:trac_10983_doctests_from_french_book_v3.patch]\n\n**Assignee:** mvngu\n\n**CC:**  @zimmermann6 @saliola\n\n**Reviewer:** Dmitrii Pasechnik\n\n**Author:** Alexandre Casamayou, Marc Mezzarobba, Paul Zimmermann\n\n**Merged:** sage-5.13.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/10983\n\n",
    "closed_at": "2013-11-12T11:33:25Z",
    "created_at": "2011-03-22T15:56:20Z",
    "labels": [
        "component: doctest coverage",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "new doctest for french book about Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10983",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```
The attached patch includes a new doctest for a book (in french) some people are writing about Sage, under the supervision of Paul Zimmermann.

This patch contains only the doctests for two chapters (about calculus and graphics and solutions for corresponding exercices). 

This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.

Apply [attachment:trac_10983_doctests_from_french_book_v3.patch]

**Assignee:** mvngu

**CC:**  @zimmermann6 @saliola

**Reviewer:** Dmitrii Pasechnik

**Author:** Alexandre Casamayou, Marc Mezzarobba, Paul Zimmermann

**Merged:** sage-5.13.beta3

Issue created by migration from https://trac.sagemath.org/ticket/10983





---

archive/attachments_014429.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "calculus.2.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/calculus.2.py",
    "created_at": "2011-05-08T18:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111657.json:
```json
{
    "body": "",
    "created_at": "2011-05-08T18:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111657",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/issue_events_087794.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-08-24T19:51:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87794"
}
```



---

archive/issue_comments_111658.json:
```json
{
    "body": "<a id='comment:3'></a>\nFranco, please could you review this ticket for inclusion in the Sage doctests?\nThis will ensure stability of the example of our book (see #9395).\n\nThank you,\nPaul",
    "created_at": "2011-08-24T19:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111658",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:3'></a>
Franco, please could you review this ticket for inclusion in the Sage doctests?
This will ensure stability of the example of our book (see #9395).

Thank you,
Paul



---

archive/issue_events_087795.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2011-08-24T20:27:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87795"
}
```



---

archive/issue_events_087796.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2011-08-24T20:27:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87796"
}
```



---

archive/issue_comments_111659.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello Paul. I think it is a great idea to include these tests in Sage. However, the files are just python files that contain docstrings; I suspect that one would prefer a patch instead (perhaps I am wrong about this). In order to produce a patch, one needs to first find the best place to put these tests within the sage library. Is there a standard location for such tests?",
    "created_at": "2011-08-24T20:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111659",
    "user": "https://github.com/saliola"
}
```

<a id='comment:4'></a>
Hello Paul. I think it is a great idea to include these tests in Sage. However, the files are just python files that contain docstrings; I suspect that one would prefer a patch instead (perhaps I am wrong about this). In order to produce a patch, one needs to first find the best place to put these tests within the sage library. Is there a standard location for such tests?



---

archive/issue_comments_111660.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [saliola](#comment%3A4):\n> Hello Paul. I think it is a great idea to include these tests in Sage. However, the files are just python files that contain docstrings; I suspect that one would prefer a patch instead (perhaps I am wrong about this). In order to produce a patch, one needs to first find the best place to put these tests within the sage library. Is there a standard location for such tests?\n\n\nFranco, you are right. The standard location is `tests/french_book` where there is already\nthe Python file corresponding to #9395.\n\nAlexandre, please could you make a real patch? Do you know how to do that?\n\nPaul",
    "created_at": "2011-08-24T20:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111660",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:5'></a>
Replying to [saliola](#comment%3A4):
> Hello Paul. I think it is a great idea to include these tests in Sage. However, the files are just python files that contain docstrings; I suspect that one would prefer a patch instead (perhaps I am wrong about this). In order to produce a patch, one needs to first find the best place to put these tests within the sage library. Is there a standard location for such tests?


Franco, you are right. The standard location is `tests/french_book` where there is already
the Python file corresponding to #9395.

Alexandre, please could you make a real patch? Do you know how to do that?

Paul



---

archive/attachments_014430.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10983.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/trac_10983.patch",
    "created_at": "2011-08-25T13:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111661.json:
```json
{
    "body": "",
    "created_at": "2011-08-25T13:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111661",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/issue_comments_111662.json:
```json
{
    "body": "<a id='comment:6'></a>\nPaul,\nHere is the log-message for the patch.\n\nAlexandre.",
    "created_at": "2011-08-25T13:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111662",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

<a id='comment:6'></a>
Paul,
Here is the log-message for the patch.

Alexandre.



---

archive/issue_events_087797.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-22T12:28:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87797"
}
```



---

archive/issue_events_087798.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-22T12:28:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87798"
}
```



---

archive/issue_events_087799.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-22T12:32:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87799"
}
```



---

archive/issue_events_087800.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-22T12:32:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87800"
}
```



---

archive/issue_comments_111663.json:
```json
{
    "body": "**Author:** Alexandre Casamayou",
    "created_at": "2011-11-22T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111663",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Alexandre Casamayou



---

archive/issue_comments_111664.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.\n \n+Apply [attachment:trac_10983.patch]\n``````\n",
    "created_at": "2011-11-22T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111664",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.
 
+Apply [attachment:trac_10983.patch]
``````




---

archive/issue_comments_111665.json:
```json
{
    "body": "**Reviewer:** Dmitrii Pasechnik",
    "created_at": "2011-11-22T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111665",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Dmitrii Pasechnik



---

archive/issue_comments_111666.json:
```json
{
    "body": "<a id='comment:10'></a>\nI am slightly worried about timings.  Did you check how long the tests take?  You might need to add `#long time` in various places.",
    "created_at": "2011-11-27T21:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111666",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
I am slightly worried about timings.  Did you check how long the tests take?  You might need to add `#long time` in various places.



---

archive/issue_comments_111667.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A10):\n> I am slightly worried about timings.  Did you check how long the tests take?  You might need to add `#long time` in various places.\n\n\nthe longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?",
    "created_at": "2011-11-28T03:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111667",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A10):
> I am slightly worried about timings.  Did you check how long the tests take?  You might need to add `#long time` in various places.


the longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?



---

archive/issue_comments_111668.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [dimpase](#comment%3A11):\n> the longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?\n\n\nGuidelines say: anything more than 1 second (on sage.math) should be marked as long time.  No test should take more than 30 seconds (even though we have several tests taking more than 30 seconds).",
    "created_at": "2011-11-28T08:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111668",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Replying to [dimpase](#comment%3A11):
> the longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?


Guidelines say: anything more than 1 second (on sage.math) should be marked as long time.  No test should take more than 30 seconds (even though we have several tests taking more than 30 seconds).



---

archive/issue_comments_111669.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A12):\n> Replying to [dimpase](#comment%3A11):\n> > the longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?\n\n> \n> Guidelines say: anything more than 1 second (on sage.math) should be marked as long time.  No test should take more than 30 seconds (even though we have several tests taking more than 30 seconds).\n\n\nOops, sorry. I'll revert to needs_work then!\nAs well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.\nWould be great if this it taken care of, too.",
    "created_at": "2011-11-28T09:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111669",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A12):
> Replying to [dimpase](#comment%3A11):
> > the longest test took about 2 minutes on  1.8Gz Intel. Is it something that should be marked as long? Do we have any specific guidelines on this?

> 
> Guidelines say: anything more than 1 second (on sage.math) should be marked as long time.  No test should take more than 30 seconds (even though we have several tests taking more than 30 seconds).


Oops, sorry. I'll revert to needs_work then!
As well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.
Would be great if this it taken care of, too.



---

archive/issue_events_087801.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-28T09:02:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87801"
}
```



---

archive/issue_events_087802.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-28T09:02:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87802"
}
```



---

archive/issue_comments_111670.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [dimpase](#comment%3A13):\n> As well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.\n> Would be great if this it taken care of, too.\n\n\nBy breaking tests into several subtests, did you think test as file or as code line ? \nShall I break the files 'graphique*.py' and 'sol_graphiques*.py' into shortest files ?",
    "created_at": "2011-11-29T11:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111670",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

<a id='comment:14'></a>
Replying to [dimpase](#comment%3A13):
> As well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.
> Would be great if this it taken care of, too.


By breaking tests into several subtests, did you think test as file or as code line ? 
Shall I break the files 'graphique*.py' and 'sol_graphiques*.py' into shortest files ?



---

archive/issue_comments_111671.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [casamayou](#comment%3A14):\n> Replying to [dimpase](#comment%3A13):\n> > As well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.\n> > Would be great if this it taken care of, too.\n\n> \n> By breaking tests into several subtests, did you think test as file or as code line ? \n> Shall I break the files 'graphique*.py' and 'sol_graphiques*.py' into shortest files ?\n\n\nYes, this looks like a good idea . \nPerhaps there is also a way to have several independent tests in one file, I don't know.",
    "created_at": "2011-11-29T11:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111671",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
Replying to [casamayou](#comment%3A14):
> Replying to [dimpase](#comment%3A13):
> > As well, there are tests that ought to be broken into several subtests - as they are really long sequences of independent tests.
> > Would be great if this it taken care of, too.

> 
> By breaking tests into several subtests, did you think test as file or as code line ? 
> Shall I break the files 'graphique*.py' and 'sol_graphiques*.py' into shortest files ?


Yes, this looks like a good idea . 
Perhaps there is also a way to have several independent tests in one file, I don't know.



---

archive/issue_comments_111672.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [dimpase](#comment%3A15):\n> Perhaps there is also a way to have several independent tests in one file, I don't know.\n\n\nOf course you can have several independent tests in one file, just like you can have more than one function or more than one class in a file.  Just put several test blocks in the file:\n\n```\nr\"\"\"\ntest1\n\"\"\"\n\nr\"\"\"\ntest2\n\"\"\"\n```\ninstead of\n\n```\nr\"\"\"\ntest1\ntest2\n\"\"\"\n```",
    "created_at": "2011-11-29T13:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111672",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [dimpase](#comment%3A15):
> Perhaps there is also a way to have several independent tests in one file, I don't know.


Of course you can have several independent tests in one file, just like you can have more than one function or more than one class in a file.  Just put several test blocks in the file:

```
r"""
test1
"""

r"""
test2
"""
```
instead of

```
r"""
test1
test2
"""
```



---

archive/issue_comments_111673.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jdemeyer](#comment%3A16):\n> Replying to [dimpase](#comment%3A15):\n> > Perhaps there is also a way to have several independent tests in one file, I don't know.\n\n> \n> Of course you can have several independent tests in one file, just like you can have more than one function or more than one class in a file.  Just put several test blocks in the file:\n\n\n\n\nAttached you will find the test files corrected.\n\nThe too long tests were commented: # long time\n\nDoes that sound correct ?\n\nHere are the execution time :\n\n```\n$ for i in *.py ; do sage -t $i; done; \nsage -t  \"calculus_fixed.py\"                                \n\t [11.2 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 11.2 seconds\nsage -t  \"graphique_1_fixed.py\"                             \n\t [14.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 15.0 seconds\nsage -t  \"graphique_2_fixed.py\"                             \n\t [19.4 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 19.4 seconds\nsage -t  \"graphique_3_fixed.py\"                             \n\t [8.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 8.4 seconds\nsage -t  \"sol_calculus_fixed.py\"                            \n\t [8.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 9.0 seconds\nsage -t  \"sol_graphiques_1_fixed.py\"                        \n\t [13.0 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 13.1 seconds\nsage -t  \"sol_graphiques_2_fixed.py\"                        \n\t [4.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 4.8 seconds\n```\n\nAnd with the long tests :\n\n```\n$ for i in *.py ; do sage -t -long $i; done; \nsage -t -long \"calculus_fixed.py\"                           \n\t [11.2 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 11.3 seconds\nsage -t -long \"graphique_1_fixed.py\"                        \n\t [323.1 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 323.1 seconds\nsage -t -long \"graphique_2_fixed.py\"                        \n\t [20.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 20.3 seconds\nsage -t -long \"graphique_3_fixed.py\"                        \n\t [8.1 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 8.1 seconds\nsage -t -long \"sol_calculus_fixed.py\"                       \n\t [8.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 9.0 seconds\nsage -t -long \"sol_graphiques_1_fixed.py\"                   \n\t [47.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 47.3 seconds\nsage -t -long \"sol_graphiques_2_fixed.py\"                   \n\t [64.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 65.0 seconds\n```\n\n\nIt was the execution of the following instruction that is very long :\n\n```\nsage: f = lambda x, y : (abs(cos((x + I * y) ** 4)) - 1)\nsage: g2 = implicit_plot(f, (-3, 3), (-3, 3), plot_points=400) # long time \n```",
    "created_at": "2011-11-29T20:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111673",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

<a id='comment:17'></a>
Replying to [jdemeyer](#comment%3A16):
> Replying to [dimpase](#comment%3A15):
> > Perhaps there is also a way to have several independent tests in one file, I don't know.

> 
> Of course you can have several independent tests in one file, just like you can have more than one function or more than one class in a file.  Just put several test blocks in the file:




Attached you will find the test files corrected.

The too long tests were commented: # long time

Does that sound correct ?

Here are the execution time :

```
$ for i in *.py ; do sage -t $i; done; 
sage -t  "calculus_fixed.py"                                
	 [11.2 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 11.2 seconds
sage -t  "graphique_1_fixed.py"                             
	 [14.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15.0 seconds
sage -t  "graphique_2_fixed.py"                             
	 [19.4 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 19.4 seconds
sage -t  "graphique_3_fixed.py"                             
	 [8.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 8.4 seconds
sage -t  "sol_calculus_fixed.py"                            
	 [8.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 9.0 seconds
sage -t  "sol_graphiques_1_fixed.py"                        
	 [13.0 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 13.1 seconds
sage -t  "sol_graphiques_2_fixed.py"                        
	 [4.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 4.8 seconds
```

And with the long tests :

```
$ for i in *.py ; do sage -t -long $i; done; 
sage -t -long "calculus_fixed.py"                           
	 [11.2 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 11.3 seconds
sage -t -long "graphique_1_fixed.py"                        
	 [323.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 323.1 seconds
sage -t -long "graphique_2_fixed.py"                        
	 [20.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 20.3 seconds
sage -t -long "graphique_3_fixed.py"                        
	 [8.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 8.1 seconds
sage -t -long "sol_calculus_fixed.py"                       
	 [8.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 9.0 seconds
sage -t -long "sol_graphiques_1_fixed.py"                   
	 [47.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 47.3 seconds
sage -t -long "sol_graphiques_2_fixed.py"                   
	 [64.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 65.0 seconds
```


It was the execution of the following instruction that is very long :

```
sage: f = lambda x, y : (abs(cos((x + I * y) ** 4)) - 1)
sage: g2 = implicit_plot(f, (-3, 3), (-3, 3), plot_points=400) # long time 
```



---

archive/attachments_014431.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "calculus_fixed.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/calculus_fixed.py",
    "created_at": "2011-11-29T20:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111674.json:
```json
{
    "body": "",
    "created_at": "2011-11-29T20:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111674",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/attachments_014432.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "graphique_2_fixed.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/graphique_2_fixed.py",
    "created_at": "2011-11-29T20:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111675.json:
```json
{
    "body": "",
    "created_at": "2011-11-29T20:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111675",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/attachments_014433.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sol_calculus_fixed.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/sol_calculus_fixed.py",
    "created_at": "2011-11-29T20:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111676.json:
```json
{
    "body": "",
    "created_at": "2011-11-29T20:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111676",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/attachments_014434.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sol_graphiques_1_fixed.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/sol_graphiques_1_fixed.py",
    "created_at": "2011-11-29T20:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111677.json:
```json
{
    "body": "",
    "created_at": "2011-11-29T20:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111677",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/attachments_014435.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sol_graphiques_2_fixed.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/sol_graphiques_2_fixed.py",
    "created_at": "2011-11-29T20:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111678.json:
```json
{
    "body": "",
    "created_at": "2011-11-29T20:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111678",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```





---

archive/issue_comments_111679.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111679",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/attachments_014436.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "graphique_1.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/graphique_1.py",
    "created_at": "2011-11-30T17:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111680.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111680",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/attachments_014437.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "graphique_2.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/graphique_2.py",
    "created_at": "2011-11-30T17:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111681.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111681",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/attachments_014438.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "graphique_3.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/graphique_3.py",
    "created_at": "2011-11-30T17:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111682.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111682",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/issue_comments_111683.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111683",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/attachments_014439.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sol_graphiques_1.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/sol_graphiques_1.py",
    "created_at": "2011-11-30T17:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111684.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111684",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/attachments_014440.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sol_graphiques_2.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/sol_graphiques_2.py",
    "created_at": "2011-11-30T17:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```



---

archive/issue_comments_111685.json:
```json
{
    "body": "updated file",
    "created_at": "2011-11-30T17:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111685",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

updated file



---

archive/issue_comments_111686.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe files *_fixed.py are outdated, because they were tested under sage 7.4.1.\n\nThe following files have been updated and tested under sage 7.4.2 and are the only ones to consider:\n\ncalculus.py  \ngraphique_1.py  \ngraphique_2.py  \ngraphique_3.py  \nsol_calculus.py  \nsol_graphiques_1.py  \nsol_graphiques_2.py",
    "created_at": "2011-11-30T17:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111686",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

<a id='comment:18'></a>
The files *_fixed.py are outdated, because they were tested under sage 7.4.1.

The following files have been updated and tested under sage 7.4.2 and are the only ones to consider:

calculus.py  
graphique_1.py  
graphique_2.py  
graphique_3.py  
sol_calculus.py  
sol_graphiques_1.py  
sol_graphiques_2.py



---

archive/issue_comments_111687.json:
```json
{
    "body": "<a id='comment:19'></a>\nOne more question.\n\nShould I create a new file trac_10983.patch with a \"hg commit\" ?\n\n(Sorry... I'm a newbie)",
    "created_at": "2011-11-30T19:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111687",
    "user": "https://trac.sagemath.org/admin/accounts/users/casamayou"
}
```

<a id='comment:19'></a>
One more question.

Should I create a new file trac_10983.patch with a "hg commit" ?

(Sorry... I'm a newbie)



---

archive/issue_comments_111688.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [casamayou](#comment%3A19):\n> One more question.\n> \n> Should I create a new file trac_10983.patch with a \"hg commit\" ?\n> \n> (Sorry... I'm a newbie)\n\n\nhg commit is what you might sometimes do after applying a patch. It certainly does not create patches. You can create patches using hg, e.g. by hg import. But you don't have to. I'll look at your updates later today.",
    "created_at": "2011-12-01T02:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111688",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
Replying to [casamayou](#comment%3A19):
> One more question.
> 
> Should I create a new file trac_10983.patch with a "hg commit" ?
> 
> (Sorry... I'm a newbie)


hg commit is what you might sometimes do after applying a patch. It certainly does not create patches. You can create patches using hg, e.g. by hg import. But you don't have to. I'll look at your updates later today.



---

archive/issue_comments_111689.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.\n \n-Apply [attachment:trac_10983.patch]\n+Apply [attachment:trac_10983_doctests_from_french_book.patch]\n``````\n",
    "created_at": "2013-03-22T20:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111689",
    "user": "https://github.com/mezzarobba"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.
 
-Apply [attachment:trac_10983.patch]
+Apply [attachment:trac_10983_doctests_from_french_book.patch]
``````




---

archive/issue_comments_111690.json:
```json
{
    "body": "<a id='comment:21'></a>\nHere are updated tests that correspond to the current version of the book. (The division of chapters changed a little bit, but the tests I'm including here roughly correspond to those posted by Alexandre.)\n\nOn my machine, using Sage-5.9\u03b20:\n\n```\nRunning doctests with ID 2013-03-22-21-36-07-c7afe8cf.\nDoctesting 3 files.\nsage -t calculus_doctest.py\n    [246 tests, 6.9 s]\nsage -t graphique_doctest.py\n    [167 tests, 26.8 s]\nsage -t premierspas_doctest.py\n    [49 tests, 1.5 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 35.4 seconds\n    cpu time: 30.6 seconds\n    cumulative wall time: 35.2 seconds\n```",
    "created_at": "2013-03-22T20:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111690",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:21'></a>
Here are updated tests that correspond to the current version of the book. (The division of chapters changed a little bit, but the tests I'm including here roughly correspond to those posted by Alexandre.)

On my machine, using Sage-5.9Î²0:

```
Running doctests with ID 2013-03-22-21-36-07-c7afe8cf.
Doctesting 3 files.
sage -t calculus_doctest.py
    [246 tests, 6.9 s]
sage -t graphique_doctest.py
    [167 tests, 26.8 s]
sage -t premierspas_doctest.py
    [49 tests, 1.5 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 35.4 seconds
    cpu time: 30.6 seconds
    cumulative wall time: 35.2 seconds
```



---

archive/issue_events_087803.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-03-22T20:42:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87803"
}
```



---

archive/issue_events_087804.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2013-03-22T20:42:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87804"
}
```



---

archive/issue_comments_111691.json:
```json
{
    "body": "**Changing author** from \"Alexandre Casamayou\" to \"Alexandre Casamayou, Marc Mezzarobba\".",
    "created_at": "2013-03-22T20:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111691",
    "user": "https://github.com/mezzarobba"
}
```

**Changing author** from "Alexandre Casamayou" to "Alexandre Casamayou, Marc Mezzarobba".



---

archive/issue_comments_111692.json:
```json
{
    "body": "<a id='comment:22'></a>\nMost of the doctests break on sage 5.1.beta3. Most output are ordered differently, so there's nothing to be worried about either.\n\n```\n----------------------------------------------------------------------\nsage -t --long calculus_doctest.py  # 12 doctests failed\nsage -t --long graphique_doctest.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nNathann\n\nApply trac_10983_doctests_from_french_book.patch",
    "created_at": "2013-07-04T09:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111692",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
Most of the doctests break on sage 5.1.beta3. Most output are ordered differently, so there's nothing to be worried about either.

```
----------------------------------------------------------------------
sage -t --long calculus_doctest.py  # 12 doctests failed
sage -t --long graphique_doctest.py  # 1 doctest failed
----------------------------------------------------------------------
```

Nathann

Apply trac_10983_doctests_from_french_book.patch



---

archive/issue_events_087805.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-04T09:46:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87805"
}
```



---

archive/issue_events_087806.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-07-04T09:46:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87806"
}
```



---

archive/issue_comments_111693.json:
```json
{
    "body": "<a id='comment:23'></a>\nAhem. 5.11.beta3 `:-P`\n\nNathann",
    "created_at": "2013-07-04T09:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111693",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
Ahem. 5.11.beta3 `:-P`

Nathann



---

archive/issue_events_087807.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87807"
}
```



---

archive/issue_events_087808.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87808"
}
```



---

archive/attachments_014441.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10983_doctests_from_french_book.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/trac_10983_doctests_from_french_book.patch",
    "created_at": "2013-08-23T08:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_111694.json:
```json
{
    "body": "Combined patch",
    "created_at": "2013-08-23T08:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111694",
    "user": "https://github.com/zimmermann6"
}
```

Combined patch



---

archive/issue_comments_111695.json:
```json
{
    "body": "**Changing author** from \"Alexandre Casamayou, Marc Mezzarobba\" to \"Alexandre Casamayou, Marc Mezzarobba, Paul Zimmermann\".",
    "created_at": "2013-08-23T08:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111695",
    "user": "https://github.com/zimmermann6"
}
```

**Changing author** from "Alexandre Casamayou, Marc Mezzarobba" to "Alexandre Casamayou, Marc Mezzarobba, Paul Zimmermann".



---

archive/issue_comments_111696.json:
```json
{
    "body": "<a id='comment:25'></a>\nI've made a new patch with a different ordering in the outputs, due to a recent change in Sage (I can't find the corresponding ticket). Unfortunately the book output now slightly differs with what we get in Sage. This patch works fine with Sage 5.11.\n\nPaul",
    "created_at": "2013-08-23T08:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111696",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:25'></a>
I've made a new patch with a different ordering in the outputs, due to a recent change in Sage (I can't find the corresponding ticket). Unfortunately the book output now slightly differs with what we get in Sage. This patch works fine with Sage 5.11.

Paul



---

archive/issue_events_087809.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2013-08-23T08:03:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87809"
}
```



---

archive/issue_events_087810.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2013-08-23T08:03:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87810"
}
```



---

archive/issue_comments_111697.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe ticket which changed the ordering is #9880.",
    "created_at": "2013-08-23T08:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
The ticket which changed the ordering is #9880.



---

archive/issue_events_087811.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-09-22T19:46:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87811"
}
```



---

archive/issue_events_087812.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-09-22T19:46:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87812"
}
```



---

archive/issue_comments_111698.json:
```json
{
    "body": "<a id='comment:27'></a>\nindentation should be 4 spaces rather than 2",
    "created_at": "2013-09-22T19:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111698",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
indentation should be 4 spaces rather than 2



---

archive/issue_comments_111699.json:
```json
{
    "body": "<a id='comment:28'></a>\nfor patchbot:\n\napply trac_10983_doctests_from_french_book.patch\u200b",
    "created_at": "2013-10-15T18:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111699",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>
for patchbot:

apply trac_10983_doctests_from_french_book.patchâ



---

archive/issue_comments_111700.json:
```json
{
    "body": "<a id='comment:29'></a>\napply trac_10983_doctests_from_french_book.patch",
    "created_at": "2013-10-15T18:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111700",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
apply trac_10983_doctests_from_french_book.patch



---

archive/attachments_014442.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10983_doctests_from_french_book_v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/trac_10983_doctests_from_french_book_v2.patch",
    "created_at": "2013-10-22T18:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/fchapoton"
}
```



---

archive/issue_comments_111701.json:
```json
{
    "body": "",
    "created_at": "2013-10-22T18:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111701",
    "user": "https://github.com/fchapoton"
}
```





---

archive/issue_comments_111702.json:
```json
{
    "body": "<a id='comment:30'></a>\nI have made a new patch with correct indentations.\n\nUnfortunately, there are now 2 doctest errors with simplify_full !!!\n\nfor the **patchbots**:\n\napply trac_10983_doctests_from_french_book_v2.patch",
    "created_at": "2013-10-22T18:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111702",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>
I have made a new patch with correct indentations.

Unfortunately, there are now 2 doctest errors with simplify_full !!!

for the **patchbots**:

apply trac_10983_doctests_from_french_book_v2.patch



---

archive/issue_comments_111703.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.\n \n-Apply [attachment:trac_10983_doctests_from_french_book.patch]\n+Apply [attachment:trac_10983_doctests_from_french_book_v2.patch]\n``````\n",
    "created_at": "2013-10-22T19:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111703",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.
 
-Apply [attachment:trac_10983_doctests_from_french_book.patch]
+Apply [attachment:trac_10983_doctests_from_french_book_v2.patch]
``````




---

archive/issue_comments_111704.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [chapoton](#comment%3A30):\n> I have made a new patch with correct indentations.\n> \n> Unfortunately, there are now 2 doctest errors with simplify_full !!!\n\n\nHow about the following changes: (I suppose this also means minor corrections to the main text, which I can't do)\n\n```\ndiff --git a/sage/tests/french_book/calculus_doctest.py b/sage/tests/french_book/calculus_doctest.py\n--- a/sage/tests/french_book/calculus_doctest.py\n+++ b/sage/tests/french_book/calculus_doctest.py\n@@ -643,7 +643,7 @@\n     sage: assume(8*n+1>0)\n     sage: u(n) = integrate((4*sqrt(2)-8*t^3-4*sqrt(2)*t^4\\\n     ....:                  -8*t^5) * t^(8*n), t, 0, 1/sqrt(2))\n-    sage: (u(n)-v(n)).simplify_full()\n+    sage: (u(n)-v(n)).simplify_exp()\n     0\n \n Sage example in ./sol/calculus.tex, line 258::\n@@ -652,8 +652,8 @@\n     sage: J = integrate((4*sqrt(2)-8*t^3 \\\n     ....:      - 4*sqrt(2)*t^4-8*t^5)\\\n     ....:      / (1-t^8), t, 0, 1/sqrt(2))\n-    sage: J.simplify_full()\n-    pi + 2*log(sqrt(2) + 1) + 2*log(sqrt(2) - 1)\n+    sage: J.simplify_log().simplify_full()\n+    pi\n \n Sage example in ./sol/calculus.tex, line 272::\n \n```",
    "created_at": "2013-10-23T10:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111704",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
Replying to [chapoton](#comment%3A30):
> I have made a new patch with correct indentations.
> 
> Unfortunately, there are now 2 doctest errors with simplify_full !!!


How about the following changes: (I suppose this also means minor corrections to the main text, which I can't do)

```
diff --git a/sage/tests/french_book/calculus_doctest.py b/sage/tests/french_book/calculus_doctest.py
--- a/sage/tests/french_book/calculus_doctest.py
+++ b/sage/tests/french_book/calculus_doctest.py
@@ -643,7 +643,7 @@
     sage: assume(8*n+1>0)
     sage: u(n) = integrate((4*sqrt(2)-8*t^3-4*sqrt(2)*t^4\
     ....:                  -8*t^5) * t^(8*n), t, 0, 1/sqrt(2))
-    sage: (u(n)-v(n)).simplify_full()
+    sage: (u(n)-v(n)).simplify_exp()
     0
 
 Sage example in ./sol/calculus.tex, line 258::
@@ -652,8 +652,8 @@
     sage: J = integrate((4*sqrt(2)-8*t^3 \
     ....:      - 4*sqrt(2)*t^4-8*t^5)\
     ....:      / (1-t^8), t, 0, 1/sqrt(2))
-    sage: J.simplify_full()
-    pi + 2*log(sqrt(2) + 1) + 2*log(sqrt(2) - 1)
+    sage: J.simplify_log().simplify_full()
+    pi
 
 Sage example in ./sol/calculus.tex, line 272::
 
```



---

archive/issue_comments_111705.json:
```json
{
    "body": "<a id='comment:33'></a>\nthe second doctest failure looks like a regression in Sage, since the expression `2*e` is not simplified similarly to `e`:\n\n```\nsage: e=log(1/2*sqrt(2)*(sqrt(2) + 1)) + log(1/2*sqrt(2)*(sqrt(2) - 1))\nsage: e.simplify_full()\n-log(2)\nsage: (2*e).simplify_full()\n2*log(1/2*sqrt(2)*(sqrt(2) + 1)) + 2*log(1/2*sqrt(2)*(sqrt(2) - 1))\n```\nShould I open a ticket for that?\n\nPaul",
    "created_at": "2013-11-06T14:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111705",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:33'></a>
the second doctest failure looks like a regression in Sage, since the expression `2*e` is not simplified similarly to `e`:

```
sage: e=log(1/2*sqrt(2)*(sqrt(2) + 1)) + log(1/2*sqrt(2)*(sqrt(2) - 1))
sage: e.simplify_full()
-log(2)
sage: (2*e).simplify_full()
2*log(1/2*sqrt(2)*(sqrt(2) + 1)) + 2*log(1/2*sqrt(2)*(sqrt(2) - 1))
```
Should I open a ticket for that?

Paul



---

archive/issue_comments_111706.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [zimmerma](#comment%3A33):\n> the second doctest failure looks like a regression in Sage, since the expression `2*e` is not simplified similarly to `e`:\n> \n> ```\n> sage: (2*e).simplify_full()\n> 2*log(1/2*sqrt(2)*(sqrt(2) + 1)) + 2*log(1/2*sqrt(2)*(sqrt(2) - 1))\n> ```\n> Should I open a ticket for that?\n\n\nJust as in the patch proposed, you may chain simplifies, getting \n\n```\nsage: (2*e).simplify_log().simplify_full()\n-log(4)\n```\nNot sure it's a Maxima regression, or a proper Sage regression. Opening a trac ticket won't hurt, I suppose.",
    "created_at": "2013-11-06T15:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111706",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
Replying to [zimmerma](#comment%3A33):
> the second doctest failure looks like a regression in Sage, since the expression `2*e` is not simplified similarly to `e`:
> 
> ```
> sage: (2*e).simplify_full()
> 2*log(1/2*sqrt(2)*(sqrt(2) + 1)) + 2*log(1/2*sqrt(2)*(sqrt(2) - 1))
> ```
> Should I open a ticket for that?


Just as in the patch proposed, you may chain simplifies, getting 

```
sage: (2*e).simplify_log().simplify_full()
-log(4)
```
Not sure it's a Maxima regression, or a proper Sage regression. Opening a trac ticket won't hurt, I suppose.



---

archive/issue_comments_111707.json:
```json
{
    "body": "<a id='comment:35'></a>\n> Opening a trac ticket won't hurt, I suppose.\n\n\ndone, cf #15362.\n\nPaul",
    "created_at": "2013-11-06T15:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111707",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:35'></a>
> Opening a trac ticket won't hurt, I suppose.


done, cf #15362.

Paul



---

archive/issue_comments_111708.json:
```json
{
    "body": "<a id='comment:36'></a>\na simpler fix is to replace `simplify_full` by `simplify_radical` in the two failing doctests. See #15362. Since that change also works before #12737 (merged in Sage 5.12) I will do the change in our book too.\n\nPaul",
    "created_at": "2013-11-06T16:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111708",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:36'></a>
a simpler fix is to replace `simplify_full` by `simplify_radical` in the two failing doctests. See #15362. Since that change also works before #12737 (merged in Sage 5.12) I will do the change in our book too.

Paul



---

archive/issue_comments_111709.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.\n \n-Apply [attachment:trac_10983_doctests_from_french_book_v2.patch]\n+Apply [attachment:trac_10983_doctests_from_french_book_v3.patch]\n``````\n",
    "created_at": "2013-11-06T16:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111709",
    "user": "https://github.com/zimmermann6"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 This doctest was tested successfully with Sage 4.6.2 under Debian Squeeze.
 
-Apply [attachment:trac_10983_doctests_from_french_book_v2.patch]
+Apply [attachment:trac_10983_doctests_from_french_book_v3.patch]
``````




---

archive/attachments_014443.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10983_doctests_from_french_book_v3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10983/trac_10983_doctests_from_french_book_v3.patch",
    "created_at": "2013-11-06T16:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_111710.json:
```json
{
    "body": "<a id='comment:37'></a>\nwith the new patch, the doctests pass again. Ready for review.\n\nPaul",
    "created_at": "2013-11-06T16:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111710",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:37'></a>
with the new patch, the doctests pass again. Ready for review.

Paul



---

archive/issue_events_087813.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2013-11-06T16:53:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87813"
}
```



---

archive/issue_events_087814.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2013-11-06T16:53:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87814"
}
```



---

archive/issue_comments_111711.json:
```json
{
    "body": "<a id='comment:38'></a>\nlooks good to me.",
    "created_at": "2013-11-08T13:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111711",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
looks good to me.



---

archive/issue_events_087815.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-11-08T13:25:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87815"
}
```



---

archive/issue_events_087816.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-11-08T13:25:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87816"
}
```



---

archive/issue_comments_111712.json:
```json
{
    "body": "**Merged:** sage-5.13.beta3",
    "created_at": "2013-11-12T11:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10983#issuecomment-111712",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.13.beta3



---

archive/issue_events_087817.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T11:33:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87817"
}
```



---

archive/issue_events_087818.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-12T11:33:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10983",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10983#event-87818"
}
```
