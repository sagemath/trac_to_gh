# Issue 10962: Set_PythonType objects are not picklable

archive/issues_010883.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "\n```\n    sage: S = sage.structure.parent.Set_PythonType(tuple)\n    sage: dumps(S)\n    ------------------------------------------------------------\n    Traceback (most recent call last):\n      File \"<ipython console>\", line 1, in <module>\n      File \"sage_object.pyx\", line 842, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8274)\n      File \"sage_object.pyx\", line 217, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2183)\n    PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed\n```\n \n\n\nCC:  @sagetrac-sage-combinat\n\nBranch/Commit: **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**\n\nReviewer: **Jeroen Demeyer, Vincent Delecroix**\n\nAuthor: **Vincent Delecroix, Jeroen Demeyer**\n\nComponent: **pickling**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10962_\n\n",
    "closed_at": "2015-01-02T15:46:39Z",
    "created_at": "2011-03-18T16:19:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20pickling",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Set_PythonType objects are not picklable",
    "type": "issue",
    "updated_at": "2015-01-02T15:46:39Z",
    "url": "https://github.com/sagemath/sage/issues/10962",
    "user": "https://github.com/stumpc5"
}
```

```
    sage: S = sage.structure.parent.Set_PythonType(tuple)
    sage: dumps(S)
    ------------------------------------------------------------
    Traceback (most recent call last):
      File "<ipython console>", line 1, in <module>
      File "sage_object.pyx", line 842, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8274)
      File "sage_object.pyx", line 217, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2183)
    PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
```
 


CC:  @sagetrac-sage-combinat

Branch/Commit: **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**

Reviewer: **Jeroen Demeyer, Vincent Delecroix**

Author: **Vincent Delecroix, Jeroen Demeyer**

Component: **pickling**

_Issue created by migration from https://trac.sagemath.org/ticket/10962_





---

archive/issue_events_143942.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2011-03-18T16:19:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143942"
}
```



---

archive/issue_events_143943.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2011-03-18T16:19:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143943"
}
```



---

archive/issue_events_143944.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2011-03-18T16:19:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143944"
}
```



---

archive/issue_events_143945.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2011-03-18T16:19:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "subject": "https://github.com/stumpc5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143945"
}
```



---

archive/issue_events_143946.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2011-03-18T16:27:36Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143946"
}
```



---

archive/issue_events_143947.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-18T16:27:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143947"
}
```



---

archive/issue_comments_106622.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,21 +1,13 @@\n-This works:\n \n ```\n-sage: Q =  CombinatorialFreeModule( QQ, [1,2,3] )\n-sage: a = Q.an_element()\n-sage: dumps(a)\n-...\n-```\n-\n-And this doesn't:\n-\n-```\n-sage: Q =  CombinatorialFreeModule( QQ, sage.structure.parent.Set_PythonType(tuple) )\n-sage: a = Q.an_element()\n-sage: dumps(a)\n----------------------------------------------------------------------------\n-PicklingError                             Traceback (most recent call last)\n-...\n-PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed\n+    sage: S = sage.structure.parent.Set_PythonType(tuple)\n+    sage: dumps(S)\n+    ------------------------------------------------------------\n+    Traceback (most recent call last):\n+      File \"<ipython console>\", line 1, in <module>\n+      File \"sage_object.pyx\", line 842, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8274)\n+      File \"sage_object.pyx\", line 217, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2183)\n+    PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed\n ```\n  \n+\n``````\n",
    "created_at": "2011-03-18T16:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106622",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,21 +1,13 @@
-This works:
 
 ```
-sage: Q =  CombinatorialFreeModule( QQ, [1,2,3] )
-sage: a = Q.an_element()
-sage: dumps(a)
-...
-```
-
-And this doesn't:
-
-```
-sage: Q =  CombinatorialFreeModule( QQ, sage.structure.parent.Set_PythonType(tuple) )
-sage: a = Q.an_element()
-sage: dumps(a)
----------------------------------------------------------------------------
-PicklingError                             Traceback (most recent call last)
-...
-PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
+    sage: S = sage.structure.parent.Set_PythonType(tuple)
+    sage: dumps(S)
+    ------------------------------------------------------------
+    Traceback (most recent call last):
+      File "<ipython console>", line 1, in <module>
+      File "sage_object.pyx", line 842, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8274)
+      File "sage_object.pyx", line 217, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2183)
+    PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
 ```
  
+
``````




---

archive/issue_events_143948.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-03-18T16:27:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143948"
}
```



---

archive/issue_events_143949.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-03-18T16:27:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20pickling",
    "label_color": "0000b0",
    "label_name": "c: pickling",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143949"
}
```



---

archive/issue_events_143950.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-03-18T16:27:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "title_is": "Set_PythonType objects are not picklable",
    "title_was": "Problem with pickle in CombinatorialFreeModule",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143950"
}
```



---

archive/issue_comments_106623.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI implement a `__reduce__` method for Set_PythonType and now it works...\n\nBest,\nVincent",
    "created_at": "2012-12-13T13:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106623",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

I implement a `__reduce__` method for Set_PythonType and now it works...

Best,
Vincent



---

archive/issue_events_143951.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2013-01-15T12:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143951"
}
```



---

archive/issue_comments_106624.json:
```json
{
    "body": "Attachment: **[trac_10962-pickle_set_pythontype.2.patch.gz](https://github.com/sagemath/sage/files/ticket10962/trac_10962-pickle_set_pythontype.2.patch.gz)**",
    "created_at": "2013-01-17T11:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106624",
    "user": "https://github.com/videlec"
}
```

Attachment: **[trac_10962-pickle_set_pythontype.2.patch.gz](https://github.com/sagemath/sage/files/ticket10962/trac_10962-pickle_set_pythontype.2.patch.gz)**



---

archive/issue_comments_106625.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI undo a change which produces error (because of some metaclass buisness). I also add a method is_finite in relation with the cardinality one.\n\napply only: trac_10962-pickle_set_pythontype.2.patch",
    "created_at": "2013-01-17T11:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106625",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

I undo a change which produces error (because of some metaclass buisness). I also add a method is_finite in relation with the cardinality one.

apply only: trac_10962-pickle_set_pythontype.2.patch



---

archive/issue_comments_106626.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHi,\n\nI added a relatively fast check at the very begining of the `__init__` method that verifies that the argument is a type or not (using the function `PyType_Check` from the C-API. It is the cause of many errors (see the log of the patchbot) and I do not know whether it is a good thing to check...\n\nSee the following [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/8f28e2637e92e1c1).",
    "created_at": "2013-01-18T09:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106626",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Hi,

I added a relatively fast check at the very begining of the `__init__` method that verifies that the argument is a type or not (using the function `PyType_Check` from the C-API. It is the cause of many errors (see the log of the patchbot) and I do not know whether it is a good thing to check...

See the following [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/8f28e2637e92e1c1).



---

archive/issue_comments_106627.json:
```json
{
    "body": "Branch: **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)**",
    "created_at": "2014-12-19T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106627",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)**



---

archive/issue_comments_106628.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d\"><code>18b968d</code></a></td><td><code>trac #10962: make Set_PythonType pickable</code></td></tr></table>\n",
    "created_at": "2014-12-19T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106628",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d"><code>18b968d</code></a></td><td><code>trac #10962: make Set_PythonType pickable</code></td></tr></table>




---

archive/issue_comments_106629.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2014-12-19T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106629",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_106630.json:
```json
{
    "body": "Commit: **[`18b968d`](https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d)**",
    "created_at": "2014-12-19T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106630",
    "user": "https://github.com/videlec"
}
```

Commit: **[`18b968d`](https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d)**



---

archive/issue_events_143952.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-19T17:37:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143952"
}
```



---

archive/issue_events_143953.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-19T17:37:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143953"
}
```



---

archive/issue_comments_106631.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis is wrong, it should be `EXAMPLES:`:\n\n```\nEXAMPLES::\n\nLet us create a parent in the category of rings::\n```",
    "created_at": "2014-12-19T17:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106631",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

This is wrong, it should be `EXAMPLES:`:

```
EXAMPLES::

Let us create a parent in the category of rings::
```



---

archive/issue_comments_106632.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01\"><code>97f3984</code></a></td><td><code>trac #10962: fix documentation</code></td></tr></table>\n",
    "created_at": "2014-12-19T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106632",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01"><code>97f3984</code></a></td><td><code>trac #10962: fix documentation</code></td></tr></table>




---

archive/issue_comments_106633.json:
```json
{
    "body": "Changed commit from **[`18b968d`](https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d)** to **[`97f3984`](https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01)**",
    "created_at": "2014-12-19T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106633",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`18b968d`](https://github.com/sagemath/sagetrac-mirror/commit/18b968d45aa8649698eae4e5e70a88f9964e0e0d)** to **[`97f3984`](https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01)**



---

archive/issue_events_143954.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-19T17:40:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143954"
}
```



---

archive/issue_events_143955.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-19T17:40:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143955"
}
```



---

archive/issue_comments_106634.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI got a strange error from the pickle jar. Could anyone perform the test?\n\n```\nsage -t --long structure/sage_object.pyx\n**********************************************************************\nFile \"structure/sage_object.pyx\", line 1431, in sage.structure.sage_object.unpickle_all\nFailed example:\n    sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)\nExpected:\n    doctest:... DeprecationWarning: ...\n    See http://trac.sagemath.org/... for details.\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n    doctest:1: DeprecationWarning: OrderedAlphabet is deprecated; use Alphabet instead.\n    See http://trac.sagemath.org/8920 for details.\n    doctest:850: DeprecationWarning: This class is replaced by Matrix_modn_dense_float/Matrix_modn_dense_double.\n    See http://trac.sagemath.org/4260 for details.\n     * unpickle failure: load('/home/vincent/.sage/temp/mangouste/23352/dir_D94KcT//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')\n    doctest:1: DeprecationWarning: gen_py.pari is deprecated, use sage.libs.pari.all.pari instead\n    See http://trac.sagemath.org/17451 for details.\n    doctest:632: DeprecationWarning: The \"pari_mod\" finite field implementation is deprecated\n    See http://trac.sagemath.org/17297 for details.\n    Failed:\n    _class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj\n    ----------------------------------------------------------------------\n    ** This error is probably due to an old pickle failing to unpickle.\n    ** See sage.structure.sage_object.register_unpickle_override for\n    ** how to override the default unpickling methods for (old) pickles.\n    ** NOTE: pickles should never be removed from the pickle_jar! \n    ----------------------------------------------------------------------\n    Successfully unpickled 585 objects.\n    Failed to unpickle 1 objects.\n**********************************************************************\nFile \"structure/sage_object.pyx\", line 1439, in sage.structure.sage_object.unpickle_all\nFailed example:\n    sage.structure.sage_object.unpickle_all()\nExpected:\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n     * unpickle failure: load('/home/vincent/.sage/temp/mangouste/23352/dir_VbqHGc//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')\n    Failed:\n    _class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj\n    ----------------------------------------------------------------------\n    ** This error is probably due to an old pickle failing to unpickle.\n    ** See sage.structure.sage_object.register_unpickle_override for\n    ** how to override the default unpickling methods for (old) pickles.\n    ** NOTE: pickles should never be removed from the pickle_jar! \n    ----------------------------------------------------------------------\n    Successfully unpickled 585 objects.\n    Failed to unpickle 1 objects.\n**********************************************************************\n```",
    "created_at": "2014-12-19T17:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106634",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

I got a strange error from the pickle jar. Could anyone perform the test?

```
sage -t --long structure/sage_object.pyx
**********************************************************************
File "structure/sage_object.pyx", line 1431, in sage.structure.sage_object.unpickle_all
Failed example:
    sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)
Expected:
    doctest:... DeprecationWarning: ...
    See http://trac.sagemath.org/... for details.
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
    doctest:1: DeprecationWarning: OrderedAlphabet is deprecated; use Alphabet instead.
    See http://trac.sagemath.org/8920 for details.
    doctest:850: DeprecationWarning: This class is replaced by Matrix_modn_dense_float/Matrix_modn_dense_double.
    See http://trac.sagemath.org/4260 for details.
     * unpickle failure: load('/home/vincent/.sage/temp/mangouste/23352/dir_D94KcT//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')
    doctest:1: DeprecationWarning: gen_py.pari is deprecated, use sage.libs.pari.all.pari instead
    See http://trac.sagemath.org/17451 for details.
    doctest:632: DeprecationWarning: The "pari_mod" finite field implementation is deprecated
    See http://trac.sagemath.org/17297 for details.
    Failed:
    _class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj
    ----------------------------------------------------------------------
    ** This error is probably due to an old pickle failing to unpickle.
    ** See sage.structure.sage_object.register_unpickle_override for
    ** how to override the default unpickling methods for (old) pickles.
    ** NOTE: pickles should never be removed from the pickle_jar! 
    ----------------------------------------------------------------------
    Successfully unpickled 585 objects.
    Failed to unpickle 1 objects.
**********************************************************************
File "structure/sage_object.pyx", line 1439, in sage.structure.sage_object.unpickle_all
Failed example:
    sage.structure.sage_object.unpickle_all()
Expected:
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
     * unpickle failure: load('/home/vincent/.sage/temp/mangouste/23352/dir_VbqHGc//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')
    Failed:
    _class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj
    ----------------------------------------------------------------------
    ** This error is probably due to an old pickle failing to unpickle.
    ** See sage.structure.sage_object.register_unpickle_override for
    ** how to override the default unpickling methods for (old) pickles.
    ** NOTE: pickles should never be removed from the pickle_jar! 
    ----------------------------------------------------------------------
    Successfully unpickled 585 objects.
    Failed to unpickle 1 objects.
**********************************************************************
```



---

archive/issue_comments_106635.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)** to **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)**",
    "created_at": "2014-12-19T18:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106635",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)** to **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)**



---

archive/issue_comments_106636.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI confirm the unpickling error, it is due to\n\n```\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-d62ad2672fb4> in <module>()\n----> 1 load('/home/jdemeyer/.sage/temp/tamiyo/6215/dir_LJVs2X//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')\n\n/usr/local/src/sage-config/src/sage/structure/sage_object.pyx in sage.structure.sage_object.load (build/cythonized/sage/structure/sage_object.c:11233)()\n    945 \n    946     ## Load file by absolute filename\n--> 947     X = loads(open(filename).read(), compress=compress)\n    948     try:\n    949         X._default_filename = os.path.abspath(filename)\n\n/usr/local/src/sage-config/src/sage/structure/sage_object.pyx in sage.structure.sage_object.loads (build/cythonized/sage/structure/sage_object.c:13238)()\n   1319     unpickler.find_global = unpickle_global\n   1320 \n-> 1321     return unpickler.load()\n   1322 \n   1323 \n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/matrix_gps/pickling_overrides.pyc in __setstate__(self, state)\n     36         degree = state['_MatrixGroup_gap__n']\n     37         from sage.libs.all import libgap\n---> 38         libgap_group = libgap.Group(libgap(matrix_gens))\n     39         self.__init__(degree, ring, libgap_group)\n     40 \n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9585)()\n   1102             mor = <map.Map> self._convert_from_hash.get(R)\n   1103         except KeyError:\n-> 1104             mor = <map.Map> self._internal_convert_map_from(R)\n   1105 \n   1106         if mor is not None:\n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent._internal_convert_map_from (build/cythonized/sage/structure/parent.c:19460)()\n   2581             return self._convert_from_hash.get(S)\n   2582         except KeyError:\n-> 2583             mor = self.discover_convert_map_from(S)\n   2584             # Before trac #14711, the morphism has been\n   2585             # put both into _convert_from_list and into\n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.discover_convert_map_from (build/cythonized/sage/structure/parent.c:20064)()\n   2624             from sage.structure.coerce_maps import ListMorphism\n   2625             if isinstance(S, Sequences):\n-> 2626                 return ListMorphism(S, self.convert_map_from(list))\n   2627 \n   2628         mor = self._generic_convert_map(S)\n\n/usr/local/src/sage-config/src/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.ListMorphism.__init__ (build/cythonized/sage/structure/coerce_maps.c:8911)()\n    529     def __init__(self, domain, Map real_morphism):\n    530         if not PY_TYPE_CHECK(domain, Parent):\n--> 531             domain = Set_PythonType(domain)\n    532         Map.__init__(self, domain, real_morphism.codomain())\n    533         self._coerce_cost = real_morphism._coerce_cost + 3\n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24290)()\n   2990 cdef _type_set_cache = {}\n   2991 \n-> 2992 cpdef Parent Set_PythonType(theType):\n   2993     \"\"\"\n   2994     Return the (unique) Parent that represents the set of Python objects\n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24199)()\n   3021         return _type_set_cache[theType]\n   3022     except KeyError:\n-> 3023         _type_set_cache[theType] = theSet = Set_PythonType_class(theType)\n   3024         return theSet\n   3025 \n\n/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType_class.__init__ (build/cythonized/sage/structure/parent.c:24417)()\n   3055         \"\"\"\n   3056         if not isinstance(theType, type):\n-> 3057             raise TypeError(\"must be intialized with a type, not %r\" % theType)\n   3058         Set_generic.__init__(self, element_constructor=theType, category=Sets())\n   3059         self._type = theType\n\nTypeError: must be intialized with a type, not Category of sequences in Full MatrixSpace of 2 by 2 dense matrices over Finite Field of size 3\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb\"><code>2908e57</code></a></td><td><code>Remove useless C/API calls</code></td></tr></table>\n",
    "created_at": "2014-12-19T18:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106636",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

I confirm the unpickling error, it is due to

```
TypeError                                 Traceback (most recent call last)
<ipython-input-3-d62ad2672fb4> in <module>()
----> 1 load('/home/jdemeyer/.sage/temp/tamiyo/6215/dir_LJVs2X//pickle_jar/_class__sage_groups_matrix_gps_matrix_group_element_MatrixGroupElement__.sobj')

/usr/local/src/sage-config/src/sage/structure/sage_object.pyx in sage.structure.sage_object.load (build/cythonized/sage/structure/sage_object.c:11233)()
    945 
    946     ## Load file by absolute filename
--> 947     X = loads(open(filename).read(), compress=compress)
    948     try:
    949         X._default_filename = os.path.abspath(filename)

/usr/local/src/sage-config/src/sage/structure/sage_object.pyx in sage.structure.sage_object.loads (build/cythonized/sage/structure/sage_object.c:13238)()
   1319     unpickler.find_global = unpickle_global
   1320 
-> 1321     return unpickler.load()
   1322 
   1323 

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/matrix_gps/pickling_overrides.pyc in __setstate__(self, state)
     36         degree = state['_MatrixGroup_gap__n']
     37         from sage.libs.all import libgap
---> 38         libgap_group = libgap.Group(libgap(matrix_gens))
     39         self.__init__(degree, ring, libgap_group)
     40 

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9585)()
   1102             mor = <map.Map> self._convert_from_hash.get(R)
   1103         except KeyError:
-> 1104             mor = <map.Map> self._internal_convert_map_from(R)
   1105 
   1106         if mor is not None:

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent._internal_convert_map_from (build/cythonized/sage/structure/parent.c:19460)()
   2581             return self._convert_from_hash.get(S)
   2582         except KeyError:
-> 2583             mor = self.discover_convert_map_from(S)
   2584             # Before trac #14711, the morphism has been
   2585             # put both into _convert_from_list and into

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Parent.discover_convert_map_from (build/cythonized/sage/structure/parent.c:20064)()
   2624             from sage.structure.coerce_maps import ListMorphism
   2625             if isinstance(S, Sequences):
-> 2626                 return ListMorphism(S, self.convert_map_from(list))
   2627 
   2628         mor = self._generic_convert_map(S)

/usr/local/src/sage-config/src/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.ListMorphism.__init__ (build/cythonized/sage/structure/coerce_maps.c:8911)()
    529     def __init__(self, domain, Map real_morphism):
    530         if not PY_TYPE_CHECK(domain, Parent):
--> 531             domain = Set_PythonType(domain)
    532         Map.__init__(self, domain, real_morphism.codomain())
    533         self._coerce_cost = real_morphism._coerce_cost + 3

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24290)()
   2990 cdef _type_set_cache = {}
   2991 
-> 2992 cpdef Parent Set_PythonType(theType):
   2993     """
   2994     Return the (unique) Parent that represents the set of Python objects

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24199)()
   3021         return _type_set_cache[theType]
   3022     except KeyError:
-> 3023         _type_set_cache[theType] = theSet = Set_PythonType_class(theType)
   3024         return theSet
   3025 

/usr/local/src/sage-config/src/sage/structure/parent.pyx in sage.structure.parent.Set_PythonType_class.__init__ (build/cythonized/sage/structure/parent.c:24417)()
   3055         """
   3056         if not isinstance(theType, type):
-> 3057             raise TypeError("must be intialized with a type, not %r" % theType)
   3058         Set_generic.__init__(self, element_constructor=theType, category=Sets())
   3059         self._type = theType

TypeError: must be intialized with a type, not Category of sequences in Full MatrixSpace of 2 by 2 dense matrices over Finite Field of size 3
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb"><code>2908e57</code></a></td><td><code>Remove useless C/API calls</code></td></tr></table>




---

archive/issue_comments_106637.json:
```json
{
    "body": "Changed commit from **[`97f3984`](https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01)** to **[`2908e57`](https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb)**",
    "created_at": "2014-12-19T18:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106637",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`97f3984`](https://github.com/sagemath/sagetrac-mirror/commit/97f39849ff27767c6a99608d3a29db9b5738ae01)** to **[`2908e57`](https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb)**



---

archive/issue_comments_106638.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nQuestion: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?",
    "created_at": "2014-12-19T18:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106638",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?



---

archive/issue_events_143956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-19T19:45:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143956"
}
```



---

archive/issue_events_143957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-19T19:45:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143957"
}
```



---

archive/issue_events_143958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-19T19:45:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143958"
}
```



---

archive/issue_comments_106639.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jdemeyer](#comment%3A13):\n> Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?\n\nNo. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...",
    "created_at": "2014-12-20T07:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106639",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jdemeyer](#comment%3A13):
> Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?

No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...



---

archive/issue_comments_106640.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)** to **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)**",
    "created_at": "2014-12-20T07:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106640",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)** to **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)**



---

archive/issue_events_143959.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-20T07:26:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143959"
}
```



---

archive/issue_events_143960.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-20T07:26:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143960"
}
```



---

archive/issue_comments_106641.json:
```json
{
    "body": "Changed commit from **[`2908e57`](https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb)** to **[`da81792`](https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2)**",
    "created_at": "2014-12-20T07:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106641",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`2908e57`](https://github.com/sagemath/sagetrac-mirror/commit/2908e5797bb558895695abd5443ad718cc14d5fb)** to **[`da81792`](https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2)**



---

archive/issue_comments_106642.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2\"><code>da81792</code></a></td><td><code>trac #10962: fix unpickle (Sequences is not a parent)</code></td></tr></table>\n",
    "created_at": "2014-12-20T07:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106642",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2"><code>da81792</code></a></td><td><code>trac #10962: fix unpickle (Sequences is not a parent)</code></td></tr></table>




---

archive/issue_comments_106643.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)** to **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)**",
    "created_at": "2014-12-20T08:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106643",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vdelecroix/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/10962)** to **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)**



---

archive/issue_comments_106644.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-12-20T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106644",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_106645.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI added one extra commit to simplify the code and remove a compiler warning for `parent.pyx` (which is not your fault, but which should be fixed anyway).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27\"><code>4b5c373</code></a></td><td><code>Remove useless C/API calls; improve error message</code></td></tr></table>\n",
    "created_at": "2014-12-20T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106645",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

I added one extra commit to simplify the code and remove a compiler warning for `parent.pyx` (which is not your fault, but which should be fixed anyway).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27"><code>4b5c373</code></a></td><td><code>Remove useless C/API calls; improve error message</code></td></tr></table>




---

archive/issue_comments_106646.json:
```json
{
    "body": "Changed commit from **[`da81792`](https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2)** to **[`4b5c373`](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)**",
    "created_at": "2014-12-20T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106646",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`da81792`](https://github.com/sagemath/sagetrac-mirror/commit/da81792004986e23a3dee4c92b0cc229b64741f2)** to **[`4b5c373`](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)**



---

archive/issue_events_143961.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-20T10:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143961"
}
```



---

archive/issue_events_143962.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-20T10:53:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143962"
}
```



---

archive/issue_comments_106647.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n\n```\nsage -t --long src/sage/symbolic/maxima_wrapper.py\n**********************************************************************\nFile \"src/sage/symbolic/maxima_wrapper.py\", line 113, in sage.symbolic.maxima_wrapper.MaximaWrapper._symbolic_\nFailed example:\n    SR(u) is t # indirect doctest\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 850, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.maxima_wrapper.MaximaWrapper._symbolic_[2]>\", line 1, in <module>\n        SR(u) is t # indirect doctest\n      File \"sage/structure/parent.pyx\", line 1104, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9585)\n        mor = <map.Map> self._internal_convert_map_from(R)\n      File \"sage/structure/parent.pyx\", line 2583, in sage.structure.parent.Parent._internal_convert_map_from (build/cythonized/sage/structure/parent.c:19460)\n        mor = self.discover_convert_map_from(S)\n      File \"sage/structure/parent.pyx\", line 2632, in sage.structure.parent.Parent.discover_convert_map_from (build/cythonized/sage/structure/parent.c:20119)\n        mor = self._generic_convert_map(S)\n      File \"sage/structure/parent_old.pyx\", line 534, in sage.structure.parent_old.Parent._generic_convert_map (build/cythonized/sage/structure/parent_old.c:8211)\n        return parent.Parent._generic_convert_map(self, S)\n      File \"sage/structure/parent.pyx\", line 2142, in sage.structure.parent.Parent._generic_convert_map (build/cythonized/sage/structure/parent.c:16530)\n        return coerce_maps.DefaultConvertMap_unique(S, self)\n      File \"sage/structure/coerce_maps.pyx\", line 39, in sage.structure.coerce_maps.DefaultConvertMap.__init__ (build/cythonized/sage/structure/coerce_maps.c:2712)\n        domain = Set_PythonType(domain)\n      File \"sage/structure/parent.pyx\", line 2996, in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24328)\n        cpdef Parent Set_PythonType(theType):\n      File \"sage/structure/parent.pyx\", line 3027, in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24237)\n        _type_set_cache[theType] = theSet = Set_PythonType_class(theType)\n      File \"sage/structure/parent.pyx\", line 3061, in sage.structure.parent.Set_PythonType_class.__init__ (build/cythonized/sage/structure/parent.c:24455)\n        raise TypeError(\"must be intialized with a type, not %r\" % theType)\n    TypeError: must be intialized with a type, not parent(log(sqrt(2) + 1) + log(sqrt(2) - 1))\n**********************************************************************\n```",
    "created_at": "2014-12-20T10:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106647",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>


```
sage -t --long src/sage/symbolic/maxima_wrapper.py
**********************************************************************
File "src/sage/symbolic/maxima_wrapper.py", line 113, in sage.symbolic.maxima_wrapper.MaximaWrapper._symbolic_
Failed example:
    SR(u) is t # indirect doctest
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.maxima_wrapper.MaximaWrapper._symbolic_[2]>", line 1, in <module>
        SR(u) is t # indirect doctest
      File "sage/structure/parent.pyx", line 1104, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9585)
        mor = <map.Map> self._internal_convert_map_from(R)
      File "sage/structure/parent.pyx", line 2583, in sage.structure.parent.Parent._internal_convert_map_from (build/cythonized/sage/structure/parent.c:19460)
        mor = self.discover_convert_map_from(S)
      File "sage/structure/parent.pyx", line 2632, in sage.structure.parent.Parent.discover_convert_map_from (build/cythonized/sage/structure/parent.c:20119)
        mor = self._generic_convert_map(S)
      File "sage/structure/parent_old.pyx", line 534, in sage.structure.parent_old.Parent._generic_convert_map (build/cythonized/sage/structure/parent_old.c:8211)
        return parent.Parent._generic_convert_map(self, S)
      File "sage/structure/parent.pyx", line 2142, in sage.structure.parent.Parent._generic_convert_map (build/cythonized/sage/structure/parent.c:16530)
        return coerce_maps.DefaultConvertMap_unique(S, self)
      File "sage/structure/coerce_maps.pyx", line 39, in sage.structure.coerce_maps.DefaultConvertMap.__init__ (build/cythonized/sage/structure/coerce_maps.c:2712)
        domain = Set_PythonType(domain)
      File "sage/structure/parent.pyx", line 2996, in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24328)
        cpdef Parent Set_PythonType(theType):
      File "sage/structure/parent.pyx", line 3027, in sage.structure.parent.Set_PythonType (build/cythonized/sage/structure/parent.c:24237)
        _type_set_cache[theType] = theSet = Set_PythonType_class(theType)
      File "sage/structure/parent.pyx", line 3061, in sage.structure.parent.Set_PythonType_class.__init__ (build/cythonized/sage/structure/parent.c:24455)
        raise TypeError("must be intialized with a type, not %r" % theType)
    TypeError: must be intialized with a type, not parent(log(sqrt(2) + 1) + log(sqrt(2) - 1))
**********************************************************************
```



---

archive/issue_comments_106648.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7\"><code>edf526e</code></a></td><td><code>Define a parent() method for MaximaWrapper objects</code></td></tr></table>\n",
    "created_at": "2014-12-20T11:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7"><code>edf526e</code></a></td><td><code>Define a parent() method for MaximaWrapper objects</code></td></tr></table>




---

archive/issue_comments_106649.json:
```json
{
    "body": "Changed commit from **[`4b5c373`](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)** to **[`edf526e`](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)**",
    "created_at": "2014-12-20T11:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4b5c373`](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)** to **[`edf526e`](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)**



---

archive/issue_events_143963.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-20T11:16:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143963"
}
```



---

archive/issue_events_143964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-20T11:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143964"
}
```



---

archive/issue_comments_106650.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@videlec](#comment%3A15):\n> Replying to [@jdemeyer](#comment%3A13):\n> > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?\n\n> \n> No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...\n\nThe category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult\nbecause of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`\nsituation.",
    "created_at": "2014-12-20T11:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106650",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@videlec](#comment%3A15):
> Replying to [@jdemeyer](#comment%3A13):
> > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?

> 
> No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...

The category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult
because of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`
situation.



---

archive/issue_comments_106651.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis finally passes all doctests. We just need somebody to review my last two commits:\n* [https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)\n* [https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)",
    "created_at": "2014-12-20T12:13:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106651",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

This finally passes all doctests. We just need somebody to review my last two commits:
* [https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)
* [https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)



---

archive/issue_comments_106652.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nthiery](#comment%3A22):\n> Replying to [@videlec](#comment%3A15):\n> > Replying to [@jdemeyer](#comment%3A13):\n> > > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?\n\n> > \n> > No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...\n\n> \n> The category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult\n> because of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`\n> situation.\n\nThanks Nicolas. But I do not understand why it is an answer to my question: \"why Posets and Sequences are categories and not Parent?\" As far as I understand, to declare something to have a category it needs to inherit from Parent (via `Parent.__init__(category=XYZ)`). So I do not see how to avoid `Parent`  by \"having others\".\nThe issue of `Ring` versus `Rings` has nothing to do with my question, or I missed something.\n\nVincent",
    "created_at": "2014-12-20T20:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106652",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nthiery](#comment%3A22):
> Replying to [@videlec](#comment%3A15):
> > Replying to [@jdemeyer](#comment%3A13):
> > > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?

> > 
> > No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...

> 
> The category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult
> because of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`
> situation.

Thanks Nicolas. But I do not understand why it is an answer to my question: "why Posets and Sequences are categories and not Parent?" As far as I understand, to declare something to have a category it needs to inherit from Parent (via `Parent.__init__(category=XYZ)`). So I do not see how to avoid `Parent`  by "having others".
The issue of `Ring` versus `Rings` has nothing to do with my question, or I missed something.

Vincent



---

archive/issue_comments_106653.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jeroen Demeyer**",
    "created_at": "2014-12-20T21:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106653",
    "user": "https://github.com/videlec"
}
```

Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jeroen Demeyer**



---

archive/issue_events_143965.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-20T21:04:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143965"
}
```



---

archive/issue_events_143966.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-20T21:04:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143966"
}
```



---

archive/issue_comments_106654.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> This finally passes all doctests. We just need somebody to review my last two commits:\n> * [https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)\n> * [https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)\n\nI am fine with the first one. But the result of `.parent()` should be a parent isn't it? Why not\n\n```\ndef parent(self):\n    return Set_PythonType(type(self))\n```\n\nOn the other hand, the `MaximaWrapper` does not inherit from `Element` which is perfectly fine. I am worried that we need this method. The bug for me is the following behavior\n\n```\nsage: parent(sin(1).maxima_methods())\nparent(sin(1))\n```\nwhich should just behave like\n\n```\nsage: parent(int(1))\n<type 'int'>\n```\n(which is also strange but perfectly fine if uniform).\n\nThe reason is that there is a too permissive `__getattr__` in `MaximaWrapper` which never raises `AttributeError`. I would really prefer that:\n- either we move your solution at the level of `SageObject`\n- or we hack `__getattr__` of `MaximaWrapper`\n\nVincent",
    "created_at": "2014-12-20T21:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106654",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jdemeyer](#comment%3A23):
> This finally passes all doctests. We just need somebody to review my last two commits:
> * [https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27](https://github.com/sagemath/sagetrac-mirror/commit/4b5c3732a910b99b8f43b5b4eb0da13c8f1c7f27)
> * [https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)

I am fine with the first one. But the result of `.parent()` should be a parent isn't it? Why not

```
def parent(self):
    return Set_PythonType(type(self))
```

On the other hand, the `MaximaWrapper` does not inherit from `Element` which is perfectly fine. I am worried that we need this method. The bug for me is the following behavior

```
sage: parent(sin(1).maxima_methods())
parent(sin(1))
```
which should just behave like

```
sage: parent(int(1))
<type 'int'>
```
(which is also strange but perfectly fine if uniform).

The reason is that there is a too permissive `__getattr__` in `MaximaWrapper` which never raises `AttributeError`. I would really prefer that:
- either we move your solution at the level of `SageObject`
- or we hack `__getattr__` of `MaximaWrapper`

Vincent



---

archive/issue_comments_106655.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@videlec](#comment%3A24):\n> Replying to [@nthiery](#comment%3A22):\n> > Replying to [@videlec](#comment%3A15):\n> > > Replying to [@jdemeyer](#comment%3A13):\n> > > > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?\n\n> > > \n> > > No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...\n\n> > \n> > The category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult\n> > because of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`\n> > situation.\n\n> \n> Thanks Nicolas. But I do not understand why it is an answer to my question: \"why Posets and Sequences are categories and not Parent?\" As far as I understand, to declare something to have a category it needs to inherit from Parent (via `Parent.__init__(category=XYZ)`). So I do not see how to avoid `Parent`  by \"having others\".\n> The issue of `Ring` versus `Rings` has nothing to do with my question, or I missed something.\n\nHmm I am not sure I understand your question then. Can you rephrase it?\n\nJust a quick note for now: to have a category, you need to be a CategoryObject (surprise surprise ...).",
    "created_at": "2014-12-20T21:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106655",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@videlec](#comment%3A24):
> Replying to [@nthiery](#comment%3A22):
> > Replying to [@videlec](#comment%3A15):
> > > Replying to [@jdemeyer](#comment%3A13):
> > > > Question: would it be valid to use `Set_PythonType()` on a `Category` instead of a `type`?

> > > 
> > > No. By the way I do not understand why `Posets`  and `Sequences` are categories and not `Parent`...

> > 
> > The category corresponding to `Parent` is `Sets`. Now, why is there both `Parent` and `Sets`? The latter is an abstract class, while the former is a concrete implementation (and currently the only concrete base implementation; but we could imagine having others). Of course, a lot of the current features of `Parent` really should be moved up in `Sets` or in other categories. Some just need to be taken care of (handling some backward compatibility issues). Some are more intrinsically difficult
> > because of the lack of multiple inheritance in Cython; that's analog to the `Ring` versus `Rings`
> > situation.

> 
> Thanks Nicolas. But I do not understand why it is an answer to my question: "why Posets and Sequences are categories and not Parent?" As far as I understand, to declare something to have a category it needs to inherit from Parent (via `Parent.__init__(category=XYZ)`). So I do not see how to avoid `Parent`  by "having others".
> The issue of `Ring` versus `Rings` has nothing to do with my question, or I missed something.

Hmm I am not sure I understand your question then. Can you rephrase it?

Just a quick note for now: to have a category, you need to be a CategoryObject (surprise surprise ...).



---

archive/issue_comments_106656.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@videlec](#comment%3A25):\n> But the result of `.parent()` should be a parent isn't it?\n\nIt doesn't have to be. For things which don't have a parent, it's accepted to return a `type` instead. After all, the global `parent(x)` function returns `type(x)` if x has no parent.",
    "created_at": "2014-12-20T22:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106656",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@videlec](#comment%3A25):
> But the result of `.parent()` should be a parent isn't it?

It doesn't have to be. For things which don't have a parent, it's accepted to return a `type` instead. After all, the global `parent(x)` function returns `type(x)` if x has no parent.



---

archive/issue_comments_106657.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc\"><code>f28f02a</code></a></td><td><code>Define parent() to be type() for SageObject</code></td></tr></table>\n",
    "created_at": "2014-12-21T09:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106657",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc"><code>f28f02a</code></a></td><td><code>Define parent() to be type() for SageObject</code></td></tr></table>




---

archive/issue_comments_106658.json:
```json
{
    "body": "Changed commit from **[`edf526e`](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)** to **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**",
    "created_at": "2014-12-21T09:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106658",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`edf526e`](https://github.com/sagemath/sagetrac-mirror/commit/edf526e2a9b181c058620e1b42b1b378c37d99a7)** to **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**



---

archive/issue_comments_106659.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@videlec](#comment%3A25):\n> - either we move your solution at the level of `SageObject`\n\nDone! This commit *replaces* the last one.",
    "created_at": "2014-12-21T09:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106659",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@videlec](#comment%3A25):
> - either we move your solution at the level of `SageObject`

Done! This commit *replaces* the last one.



---

archive/issue_events_143967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-21T09:47:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143967"
}
```



---

archive/issue_events_143968.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-12-21T09:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143968"
}
```



---

archive/issue_comments_106660.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@nthiery](#comment%3A26):\n> Hmm I am not sure I understand your question then. Can you rephrase it?\n\nWhy `Posets` and `Sequences` do not inherit from `CategoryObject`?\n\nVincent",
    "created_at": "2014-12-21T11:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106660",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@nthiery](#comment%3A26):
> Hmm I am not sure I understand your question then. Can you rephrase it?

Why `Posets` and `Sequences` do not inherit from `CategoryObject`?

Vincent



---

archive/issue_comments_106661.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAll right. Thanks.",
    "created_at": "2014-12-21T11:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106661",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

All right. Thanks.



---

archive/issue_events_143969.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-21T11:11:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143969"
}
```



---

archive/issue_events_143970.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-12-21T11:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143970"
}
```



---

archive/issue_comments_106662.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Vincent Delecroix**",
    "created_at": "2014-12-21T11:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106662",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Vincent Delecroix**



---

archive/issue_events_143971.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-02T15:46:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143971"
}
```



---

archive/issue_events_143972.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "920c3043ff03b3e5e524428903aff945b1ac8fc4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-01-02T15:46:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10962#event-143972"
}
```



---

archive/issue_comments_106663.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)** to **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**",
    "created_at": "2015-01-02T15:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10962#issuecomment-106663",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/10962](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/10962)** to **[`f28f02a`](https://github.com/sagemath/sagetrac-mirror/commit/f28f02aeb6008daa88a267dc31d31963664c17dc)**
