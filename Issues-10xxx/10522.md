# Issue 10522: Allow specifying coefficients of anticanonical hypersurfaces

archive/issues_010469.json:
```json
{
    "assignees": [],
    "body": "Currently one can only pick monomials which will be present in the defining polynomial of an anticanonical hypersurface of a CPR-Fano toric variety and choose names for coefficients of these monomials.\n\nThe patch allows using any rational functions as coefficients, in particular just concrete numbers. The base ring of the ambient space is automatically extended to include all coefficient names, but only if necessary.\n\nAssignee: **@aghitza**\n\nCC:  @vbraun\n\nAuthor: **Andrey Novoseltsev**\n\nReviewer: **Volker Braun**\n\nMerged: **sage-4.7.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10522_\n\n",
    "closed_at": "2011-03-08T21:46:05Z",
    "created_at": "2010-12-24T04:00:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow specifying coefficients of anticanonical hypersurfaces",
    "type": "issue",
    "updated_at": "2011-03-08T21:46:05Z",
    "url": "https://github.com/sagemath/sage/issues/10522",
    "user": "https://github.com/novoselt"
}
```
Currently one can only pick monomials which will be present in the defining polynomial of an anticanonical hypersurface of a CPR-Fano toric variety and choose names for coefficients of these monomials.

The patch allows using any rational functions as coefficients, in particular just concrete numbers. The base ring of the ambient space is automatically extended to include all coefficient names, but only if necessary.

Assignee: **@aghitza**

CC:  @vbraun

Author: **Andrey Novoseltsev**

Reviewer: **Volker Braun**

Merged: **sage-4.7.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/10522_





---

archive/issue_events_121987.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-12-24T04:00:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121987"
}
```



---

archive/issue_events_121988.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-12-24T04:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121988"
}
```



---

archive/issue_events_121989.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-12-24T04:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121989"
}
```



---

archive/issue_events_121990.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-12-24T04:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121990"
}
```



---

archive/issue_events_121991.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-12-24T04:56:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121991"
}
```



---

archive/issue_comments_101875.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThe new version applies without fuzz after #10525, although there is no real dependency.",
    "created_at": "2011-01-20T00:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101875",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'>Comment 2:</a>
The new version applies without fuzz after #10525, although there is no real dependency.



---

archive/issue_events_121992.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-28T21:11:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121992"
}
```



---

archive/issue_events_121993.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-01-28T21:11:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121993"
}
```



---

archive/issue_comments_101876.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI'd prefer it if \"`Multivariate Polynomial Ring in no variables over Rational Field`\" would just be \"`Rational Field`\" in this example:\n\n```\nsage: T2 = toric_varieties.P2().anticanonical_hypersurface(coefficients=[1,3,4,5,5])\nsage: T2.coordinate_ring()\nQuotient of Multivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in no variables over Rational Field by the ideal (x^3 + 3*y^3 + 5*x*y*z + 4*z^3)\n```\nI think its within the scope of this ticket to get that right...",
    "created_at": "2011-01-28T21:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101876",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'>Comment 3:</a>
I'd prefer it if "`Multivariate Polynomial Ring in no variables over Rational Field`" would just be "`Rational Field`" in this example:

```
sage: T2 = toric_varieties.P2().anticanonical_hypersurface(coefficients=[1,3,4,5,5])
sage: T2.coordinate_ring()
Quotient of Multivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in no variables over Rational Field by the ideal (x^3 + 3*y^3 + 5*x*y*z + 4*z^3)
```
I think its within the scope of this ticket to get that right...



---

archive/issue_comments_101877.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2011-01-28T21:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101877",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_101878.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nGood point, that definitely the behaviour I would like! So I added\n\n```\n    if not variables:\n        return field\n```",
    "created_at": "2011-01-28T21:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101878",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'>Comment 4:</a>
Good point, that definitely the behaviour I would like! So I added

```
    if not variables:
        return field
```



---

archive/issue_events_121994.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-28T21:34:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121994"
}
```



---

archive/issue_events_121995.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-28T21:34:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121995"
}
```



---

archive/issue_events_121996.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-20T21:35:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121996"
}
```



---

archive/issue_events_121997.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-20T21:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121997"
}
```



---

archive/issue_comments_101879.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nLooks good to me!",
    "created_at": "2011-02-20T21:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101879",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'>Comment 5:</a>
Looks good to me!



---

archive/issue_events_121998.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-21T10:51:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121998"
}
```



---

archive/issue_events_121999.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-21T10:51:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-121999"
}
```



---

archive/issue_comments_101880.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nTrivial typo: \"if there is no such a natural map.\"",
    "created_at": "2011-02-23T12:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101880",
    "user": "https://github.com/sagetrac-dsm"
}
```

<a id='comment:7'>Comment 7:</a>
Trivial typo: "if there is no such a natural map."



---

archive/issue_comments_101881.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [dsm](#comment%3A7):\n> Trivial typo: \"if there is no such a natural map.\"\n\nI don't understand where is the typo.",
    "created_at": "2011-02-23T15:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101881",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [dsm](#comment%3A7):
> Trivial typo: "if there is no such a natural map."

I don't understand where is the typo.



---

archive/issue_comments_101882.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@novoselt](#comment%3A8):\n> Replying to [dsm](#comment%3A7):\n> > Trivial typo: \"if there is no such a natural map.\"\n\n> \n> I don't understand where is the typo.\n\nIt should be \"if there is no such natural map.\"",
    "created_at": "2011-02-23T21:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101882",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@novoselt](#comment%3A8):
> Replying to [dsm](#comment%3A7):
> > Trivial typo: "if there is no such a natural map."

> 
> I don't understand where is the typo.

It should be "if there is no such natural map."



---

archive/issue_comments_101883.json:
```json
{
    "body": "Removed \"a\"",
    "created_at": "2011-02-23T21:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101883",
    "user": "https://github.com/novoselt"
}
```

Removed "a"



---

archive/issue_comments_101884.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAttachment: **[trac_10522_coefficients_of_anticanonical_hypersurfaces.patch.gz](https://github.com/sagemath/sage/files/ticket10522/trac_10522_coefficients_of_anticanonical_hypersurfaces.patch.gz)**\n\nOK, fixed it, but it was not a typo, it was a mistake ;-)",
    "created_at": "2011-02-23T21:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101884",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:10'>Comment 10:</a>
Attachment: **[trac_10522_coefficients_of_anticanonical_hypersurfaces.patch.gz](https://github.com/sagemath/sage/files/ticket10522/trac_10522_coefficients_of_anticanonical_hypersurfaces.patch.gz)**

OK, fixed it, but it was not a typo, it was a mistake ;-)



---

archive/issue_events_122000.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:46:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-122000"
}
```



---

archive/issue_events_122001.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:46:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10522#event-122001"
}
```



---

archive/issue_comments_101885.json:
```json
{
    "body": "Merged: **sage-4.7.alpha1**",
    "created_at": "2011-03-08T21:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10522#issuecomment-101885",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha1**
