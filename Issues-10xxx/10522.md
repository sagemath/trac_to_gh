# Issue 10522: Allow specifying coefficients of anticanonical hypersurfaces

archive/issues_010469.json:
```json
{
    "body": "Currently one can only pick monomials which will be present in the defining polynomial of an anticanonical hypersurface of a CPR-Fano toric variety and choose names for coefficients of these monomials.\n\nThe patch allows using any rational functions as coefficients, in particular just concrete numbers. The base ring of the ambient space is automatically extended to include all coefficient names, but only if necessary.\n\nAssignee: @aghitza\n\nCC:  @vbraun\n\nResolution: fixed\n\nAuthor: Andrey Novoseltsev\n\nReviewer: Volker Braun\n\nMerged: sage-4.7.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10522\n\n",
    "closed_at": "2011-03-08T21:46:05Z",
    "created_at": "2010-12-24T04:00:42Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Allow specifying coefficients of anticanonical hypersurfaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10522",
    "user": "https://github.com/novoselt"
}
```
Currently one can only pick monomials which will be present in the defining polynomial of an anticanonical hypersurface of a CPR-Fano toric variety and choose names for coefficients of these monomials.

The patch allows using any rational functions as coefficients, in particular just concrete numbers. The base ring of the ambient space is automatically extended to include all coefficient names, but only if necessary.

Assignee: @aghitza

CC:  @vbraun

Resolution: fixed

Author: Andrey Novoseltsev

Reviewer: Volker Braun

Merged: sage-4.7.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/10522





---

archive/issue_comments_113919.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-24T04:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113919",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_113920.json:
```json
{
    "body": "<a id='comment:2'></a>The new version applies without fuzz after #10525, although there is no real dependency.",
    "created_at": "2011-01-20T00:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113920",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>The new version applies without fuzz after #10525, although there is no real dependency.



---

archive/issue_comments_113921.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-01-28T21:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113921",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_113922.json:
```json
{
    "body": "<a id='comment:3'></a>I'd prefer it if \"`Multivariate Polynomial Ring in no variables over Rational Field`\" would just be \"`Rational Field`\" in this example:\n\n```\nsage: T2 = toric_varieties.P2().anticanonical_hypersurface(coefficients=[1,3,4,5,5])\nsage: T2.coordinate_ring()\nQuotient of Multivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in no variables over Rational Field by the ideal (x^3 + 3*y^3 + 5*x*y*z + 4*z^3)\n```\nI think its within the scope of this ticket to get that right...",
    "created_at": "2011-01-28T21:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113922",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>I'd prefer it if "`Multivariate Polynomial Ring in no variables over Rational Field`" would just be "`Rational Field`" in this example:

```
sage: T2 = toric_varieties.P2().anticanonical_hypersurface(coefficients=[1,3,4,5,5])
sage: T2.coordinate_ring()
Quotient of Multivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in no variables over Rational Field by the ideal (x^3 + 3*y^3 + 5*x*y*z + 4*z^3)
```
I think its within the scope of this ticket to get that right...



---

archive/issue_comments_113923.json:
```json
{
    "body": "<a id='comment:4'></a>Good point, that definitely the behaviour I would like! So I added\n\n```\n    if not variables:\n        return field\n```",
    "created_at": "2011-01-28T21:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113923",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>Good point, that definitely the behaviour I would like! So I added

```
    if not variables:
        return field
```



---

archive/issue_comments_113924.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-28T21:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113924",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_113925.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-02-20T21:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113925",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113926.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good to me!",
    "created_at": "2011-02-20T21:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113926",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>Looks good to me!



---

archive/issue_events_027013.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-21T10:51:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10522#event-27013"
}
```



---

archive/issue_comments_113927.json:
```json
{
    "body": "<a id='comment:7'></a>Trivial typo: \"if there is no such a natural map.\"",
    "created_at": "2011-02-23T12:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113927",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

<a id='comment:7'></a>Trivial typo: "if there is no such a natural map."



---

archive/issue_comments_113928.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 dsm]:\n> Trivial typo: \"if there is no such a natural map.\"\n\n\nI don't understand where is the typo.",
    "created_at": "2011-02-23T15:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113928",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'></a>Replying to [comment:7 dsm]:
> Trivial typo: "if there is no such a natural map."


I don't understand where is the typo.



---

archive/issue_comments_113929.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 novoselt]:\n> Replying to [comment:7 dsm]:\n> > Trivial typo: \"if there is no such a natural map.\"\n\n> \n> I don't understand where is the typo.\n\n\nIt should be \"if there is no such natural map.\"",
    "created_at": "2011-02-23T21:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113929",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:9'></a>Replying to [comment:8 novoselt]:
> Replying to [comment:7 dsm]:
> > Trivial typo: "if there is no such a natural map."

> 
> I don't understand where is the typo.


It should be "if there is no such natural map."



---

archive/issue_comments_113930.json:
```json
{
    "body": "Removed \"a\"",
    "created_at": "2011-02-23T21:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113930",
    "user": "https://github.com/novoselt"
}
```

Removed "a"



---

archive/issue_comments_113931.json:
```json
{
    "body": "<a id='comment:10'></a>Attachment [trac_10522_coefficients_of_anticanonical_hypersurfaces.patch](tarball://root/attachments/some-uuid/ticket10522/trac_10522_coefficients_of_anticanonical_hypersurfaces.patch) by @novoselt created at 2011-02-23 21:59:02\n\nOK, fixed it, but it was not a typo, it was a mistake ;-)",
    "created_at": "2011-02-23T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113931",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:10'></a>Attachment [trac_10522_coefficients_of_anticanonical_hypersurfaces.patch](tarball://root/attachments/some-uuid/ticket10522/trac_10522_coefficients_of_anticanonical_hypersurfaces.patch) by @novoselt created at 2011-02-23 21:59:02

OK, fixed it, but it was not a typo, it was a mistake ;-)



---

archive/issue_events_027014.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:46:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10522#event-27014"
}
```



---

archive/issue_comments_113932.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-08T21:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10522#issuecomment-113932",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
