# Issue 10441: Error creating an empty multi-edge (di)graph

archive/issues_010388.json:
```json
{
    "body": "In SAGE 4.5.1 if you try to create an empty graph or digraph using the multi-edge keyword the (di)graph created is a non-multi (di)graph.\n\nExamples of the strange behaviour:\n\n```\nsage: G=Graph(multiple_edges=True)\nsage: G\nGraph on 0 vertices\n```\n\n```\nsage: G=Graph([],multiple_edges=True)\nsage: G\nGraph on 0 vertices\n```\n\n```\nsage: H=DiGraph(multiple_edges=True)\nsage: H\nDigraph on 0 vertices\n```\n\n```\nsage: H=DiGraph([],multiple_edges=True)\nsage: H\nDigraph on 0 vertices\n```\n\nNevertheless it works fine, i.e. produces a multi-graph/multi-digraph if one uses an empty dictionary like in the following:\n\n```\nsage: G=Graph({},multiple_edges=True)\nsage: G\nMulti-graph on 0 vertices\n```\n\n```\nsage: H=DiGraph({},multiple_edges=True)\nsage: H\nMulti-digraph on 0 vertices\n```\n\nAfter posting on sage-develop **Strange behaviour of add_edges** [http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc](http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc) I was asked to open a new ticket...\n\nAssignee: somebody\n\nCC:  mvngu brunellus\n\nKeywords: creating empty Graph, DiGraph, multiple_edges=True\n\nResolution: fixed\n\nAuthor: Luk\u00e1\u0161 L\u00e1nsk\u00fd\n\nReviewer: Nathann Cohen\n\nMerged: sage-5.0.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/10441\n\n",
    "closed_at": "2012-02-06T21:23:13Z",
    "created_at": "2010-12-08T03:00:40Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Error creating an empty multi-edge (di)graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10441",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhs"
}
```
In SAGE 4.5.1 if you try to create an empty graph or digraph using the multi-edge keyword the (di)graph created is a non-multi (di)graph.

Examples of the strange behaviour:

```
sage: G=Graph(multiple_edges=True)
sage: G
Graph on 0 vertices
```

```
sage: G=Graph([],multiple_edges=True)
sage: G
Graph on 0 vertices
```

```
sage: H=DiGraph(multiple_edges=True)
sage: H
Digraph on 0 vertices
```

```
sage: H=DiGraph([],multiple_edges=True)
sage: H
Digraph on 0 vertices
```

Nevertheless it works fine, i.e. produces a multi-graph/multi-digraph if one uses an empty dictionary like in the following:

```
sage: G=Graph({},multiple_edges=True)
sage: G
Multi-graph on 0 vertices
```

```
sage: H=DiGraph({},multiple_edges=True)
sage: H
Multi-digraph on 0 vertices
```

After posting on sage-develop **Strange behaviour of add_edges** [http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc](http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc) I was asked to open a new ticket...

Assignee: somebody

CC:  mvngu brunellus

Keywords: creating empty Graph, DiGraph, multiple_edges=True

Resolution: fixed

Author: Lukáš Lánský

Reviewer: Nathann Cohen

Merged: sage-5.0.beta3

Issue created by migration from https://trac.sagemath.org/ticket/10441





---

archive/issue_comments_134852.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,7 +29,7 @@\n Nevertheless it works fine, i.e. produces a multi-graph/multi-digraph if one uses an empty dictionary like in the following:\n \n ```\n-sage: G=Graph([],multiple_edges=True)\n+sage: G=Graph({},multiple_edges=True)\n sage: G\n Multi-graph on 0 vertices\n ```\n``````\n",
    "created_at": "2010-12-08T03:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134852",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhs"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,7 +29,7 @@
 Nevertheless it works fine, i.e. produces a multi-graph/multi-digraph if one uses an empty dictionary like in the following:
 
 ```
-sage: G=Graph([],multiple_edges=True)
+sage: G=Graph({},multiple_edges=True)
 sage: G
 Multi-graph on 0 vertices
 ```
``````




---

archive/issue_comments_134853.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"N/A\"",
    "created_at": "2010-12-08T03:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134853",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "N/A"



---

archive/issue_comments_134854.json:
```json
{
    "body": "Changing author from \"MHS\" to \"\"",
    "created_at": "2010-12-08T03:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134854",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing author from "MHS" to ""



---

archive/issue_comments_134855.json:
```json
{
    "body": "Changing reviewer from \"somebody\" to \"\"",
    "created_at": "2010-12-08T03:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134855",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing reviewer from "somebody" to ""



---

archive/issue_comments_134856.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think that having **kwds in the Graph constructor is very confusing, because any misspelling of an argument pass through without notice. Do you see some serious reason why is this there? I'm looking into the code and can't see anything.",
    "created_at": "2012-01-13T10:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134856",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:4'></a>
I think that having **kwds in the Graph constructor is very confusing, because any misspelling of an argument pass through without notice. Do you see some serious reason why is this there? I'm looking into the code and can't see anything.



---

archive/issue_comments_134857.json:
```json
{
    "body": "<a id='comment:5'></a>\nI started #12318 for the mentioned problem.\n\nFix for this ticket is a rather simple one, I think. Prove me wrong! :-)",
    "created_at": "2012-01-20T22:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134857",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:5'></a>
I started #12318 for the mentioned problem.

Fix for this ticket is a rather simple one, I think. Prove me wrong! :-)



---

archive/issue_comments_134858.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-20T22:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134858",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_134859.json:
```json
{
    "body": "<a id='comment:6'></a>\nHellooooooooooooo !!\n\nWell, the code building the graph is a bit messy but indeed what you wrote 1) prevents the bug 2) is what we should do until somebody comes with another weird situation `:-)`\n\nWould it be possible to move your \"# not a multi [...]\" comments to the line just above the test, though ? That's where we put flags like \"optional\" or \"not tested\" for the automatic tests, and it's best to be sure these comments do not interfere `^^;`\n\nNathann",
    "created_at": "2012-01-29T18:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134859",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Hellooooooooooooo !!

Well, the code building the graph is a bit messy but indeed what you wrote 1) prevents the bug 2) is what we should do until somebody comes with another weird situation `:-)`

Would it be possible to move your "# not a multi [...]" comments to the line just above the test, though ? That's where we put flags like "optional" or "not tested" for the automatic tests, and it's best to be sure these comments do not interfere `^^;`

Nathann



---

archive/issue_comments_134860.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-29T18:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134860",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_134861.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [trac_10441_multigraph.patch](tarball://root/attachments/some-uuid/ticket10441/trac_10441_multigraph.patch) by brunellus created at 2012-01-31 11:37:51\n\nThanks! Is it better now?",
    "created_at": "2012-01-31T11:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134861",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:8'></a>
Attachment [trac_10441_multigraph.patch](tarball://root/attachments/some-uuid/ticket10441/trac_10441_multigraph.patch) by brunellus created at 2012-01-31 11:37:51

Thanks! Is it better now?



---

archive/issue_comments_134862.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-31T11:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134862",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_134863.json:
```json
{
    "body": "<a id='comment:9'></a>\nHellooooooo !!!\n\nI thought you would put the comments just before the \"::\" but there's no problem with way either... Good to go ! `:-)`\n\nNathann",
    "created_at": "2012-01-31T11:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134863",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Hellooooooo !!!

I thought you would put the comments just before the "::" but there's no problem with way either... Good to go ! `:-)`

Nathann



---

archive/issue_comments_134864.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2012-01-31T11:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134864",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_134865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-31T11:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134865",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_134866.json:
```json
{
    "body": "Changing author from \"\" to \"Luk\u00e1\u0161 L\u00e1nsk\u00fd\"",
    "created_at": "2012-01-31T11:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134866",
    "user": "https://github.com/nathanncohen"
}
```

Changing author from "" to "Lukáš Lánský"



---

archive/issue_comments_134867.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-06T21:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134867",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_032116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-06T21:23:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10441#event-32116"
}
```



---

archive/issue_comments_134868.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta3\"",
    "created_at": "2012-02-06T21:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10441#issuecomment-134868",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta3"
