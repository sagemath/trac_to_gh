# Issue 10187: Update ECL to 10.4.1 and Maxima to 5.22.1 - currently the latest releases.

archive/issues_010186.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-drkirkby"
    ],
    "body": "<div id=\"comment:0\"></div>\n\n**Note:** See #10434 for a follow-up ticket.\n\nPlease update ECL and Maxima to the newest upstream release. Sage packages are here:\n\nIt's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:\n\nhttp://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg\n\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg\n\nNote that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.\n\nRelevant tickets for ECL:\n\n* #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. \n\n* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ECL from this ticket.\n\nRelevant tickets for maxima:\n\n* #8645: ECL library \"maxima.fasb\" is built at new location. The patches from this bug have been incorporated into the maxima spkg, and #8645 can be closed after this ticket.\n\n* #8731: update/upgrade Maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.\n\n* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new Maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.\n\nThe updated Maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):\n\n* `trac_10187_fix_easy_doctests.patch`\n* `trac_10187_general_display_prefix_workaround.patch`\n* `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`\n\nFinally, you need to patch `$SAGE_ROOT/local/bin/sage-maxima.lisp` with\n\n* `trac_10187_sage-maxima_lisp.patch`\n\nUpstream: **Workaround found; Bug reported upstream.**\n\nCC:  @williamstein @jhpalmieri @qed777 @nexttime @jaapspies @jasongrout @kcrisman @kiwifb @jpflori\n\nComponent: **packages: standard**\n\nAuthor: **Volker Braun, David Kirkby**\n\nReviewer: **Karl-Dieter Crisman, David Kirkby, Volker Braun, Leif Leonhardy**\n\nMerged: **sage-4.6.1.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10187_\n\n",
    "closed_at": "2010-12-03T09:38:51Z",
    "created_at": "2010-10-29T13:32:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update ECL to 10.4.1 and Maxima to 5.22.1 - currently the latest releases.",
    "type": "issue",
    "updated_at": "2010-12-06T13:39:45Z",
    "url": "https://github.com/sagemath/sage/issues/10187",
    "user": "https://github.com/vbraun"
}
```
<div id="comment:0"></div>

**Note:** See #10434 for a follow-up ticket.

Please update ECL and Maxima to the newest upstream release. Sage packages are here:

It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:

http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg


http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg

Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.

Relevant tickets for ECL:

* #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. 

* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ECL from this ticket.

Relevant tickets for maxima:

* #8645: ECL library "maxima.fasb" is built at new location. The patches from this bug have been incorporated into the maxima spkg, and #8645 can be closed after this ticket.

* #8731: update/upgrade Maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.

* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new Maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.

The updated Maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):

* `trac_10187_fix_easy_doctests.patch`
* `trac_10187_general_display_prefix_workaround.patch`
* `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`

Finally, you need to patch `$SAGE_ROOT/local/bin/sage-maxima.lisp` with

* `trac_10187_sage-maxima_lisp.patch`

Upstream: **Workaround found; Bug reported upstream.**

CC:  @williamstein @jhpalmieri @qed777 @nexttime @jaapspies @jasongrout @kcrisman @kiwifb @jpflori

Component: **packages: standard**

Author: **Volker Braun, David Kirkby**

Reviewer: **Karl-Dieter Crisman, David Kirkby, Volker Braun, Leif Leonhardy**

Merged: **sage-4.6.1.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/10187_





---

archive/issue_events_132133.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-10-29T13:32:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132133"
}
```



---

archive/issue_events_132134.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-10-29T13:32:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132134"
}
```



---

archive/issue_events_132135.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-10-29T13:32:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132135"
}
```



---

archive/issue_events_132136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-10-29T13:32:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132136"
}
```



---

archive/issue_comments_094250.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe doctests show one maxima regression: \n\n```\nsage: t = log(sqrt(2) - 1) + log(sqrt(2) + 1); t\nlog(sqrt(2) - 1) + log(sqrt(2) + 1)\nsage: u = t.maxima_methods(); u\nMaximaWrapper(log(sqrt(2) - 1) + log(sqrt(2) + 1))\nsage: u.logcontract()\nlog((sqrt(2) - 1)*(sqrt(2) + 1))\n```\nThis simplified to 0 in a previous version. But at least its not wrong ;-)\n\nThe attached patch fixes all doctests except for a timeout in maxima. That one is a different issue with maxima, which forgets to print the `general-display-prefix` variable for errors:\n\n```\n(sage subshell) volker-desktop:sage vbraun$ ./local/bin/maxima -p ./local/bin/sage-maxima.lisp \n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sockets.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/defsystem.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/cmp.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sysfun.lsp\"\nMaxima 5.22.1 http://maxima.sourceforge.net\nusing Lisp ECL 10.4.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) 1;\n<sage-display>(%o1)                                  1\n(%i2) 1==1;\nincorrect syntax: = is not a prefix operator\n1==\n ^\n(%i2) 1=1;\n<sage-display>(%o2)                                1 = 1\n```",
    "created_at": "2010-10-29T17:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94250",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

The doctests show one maxima regression: 

```
sage: t = log(sqrt(2) - 1) + log(sqrt(2) + 1); t
log(sqrt(2) - 1) + log(sqrt(2) + 1)
sage: u = t.maxima_methods(); u
MaximaWrapper(log(sqrt(2) - 1) + log(sqrt(2) + 1))
sage: u.logcontract()
log((sqrt(2) - 1)*(sqrt(2) + 1))
```
This simplified to 0 in a previous version. But at least its not wrong ;-)

The attached patch fixes all doctests except for a timeout in maxima. That one is a different issue with maxima, which forgets to print the `general-display-prefix` variable for errors:

```
(sage subshell) volker-desktop:sage vbraun$ ./local/bin/maxima -p ./local/bin/sage-maxima.lisp 
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/cmp.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sysfun.lsp"
Maxima 5.22.1 http://maxima.sourceforge.net
using Lisp ECL 10.4.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) 1;
<sage-display>(%o1)                                  1
(%i2) 1==1;
incorrect syntax: = is not a prefix operator
1==
 ^
(%i2) 1=1;
<sage-display>(%o2)                                1 = 1
```



---

archive/issue_comments_094251.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFYI, here's the failures on OpenSolaris 06/2009 with those updated versions of Maxima and ECL. \n\n```\nsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n\n\t [1800.2 s]\n \n----------------------------------------------------------------------\n\nThe following tests failed:\n\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 11 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/functional.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # Time out\n----------------------------------------------------------------------\nTotal time for all tests: 2628.2 seconds\nmake: *** [ptestlong] Error 192\ndrkirkby@hawk:~/sage-4.6.1.alpha0$ \n```\nI've not applied any patches at this point. I'll apply patches and rerun later.",
    "created_at": "2010-10-29T17:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94251",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:3" align="right">comment:3</div>

FYI, here's the failures on OpenSolaris 06/2009 with those updated versions of Maxima and ECL. 

```
sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

	 [1800.2 s]
 
----------------------------------------------------------------------

The following tests failed:

	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 11 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/functional.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # Time out
----------------------------------------------------------------------
Total time for all tests: 2628.2 seconds
make: *** [ptestlong] Error 192
drkirkby@hawk:~/sage-4.6.1.alpha0$ 
```
I've not applied any patches at this point. I'll apply patches and rerun later.



---

archive/issue_comments_094252.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A3):\n> FYI, here's the failures on OpenSolaris 06/2009 with those updated versions of Maxima and ECL. \n> \n\n```\nsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n\n\t [1800.2 s]\n \n```\n\nI'd be interested what happened if you manually removed the tests in that file which test the tab-completion for Maxima.  I get a problem on Mac OS X Tiger with that file for exactly that reason.  We haven't filed a ticket because nobody knows how to fix it, and tab-completion does work on that platform, just not the testing.",
    "created_at": "2010-10-29T17:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94252",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@sagetrac-drkirkby](#comment%3A3):
> FYI, here's the failures on OpenSolaris 06/2009 with those updated versions of Maxima and ECL. 
> 

```
sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

	 [1800.2 s]
 
```

I'd be interested what happened if you manually removed the tests in that file which test the tab-completion for Maxima.  I get a problem on Mac OS X Tiger with that file for exactly that reason.  We haven't filed a ticket because nobody knows how to fix it, and tab-completion does work on that platform, just not the testing.



---

archive/issue_comments_094253.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe TIMED OUT! error is the missing `general-display-prefix`, which causes the expect interface to wait forever for maxima to print its next prompt.\n\nI've filed a bug upstream here: https://sourceforge.net/tracker/?func=detail&aid=3098375&group_id=4933&atid=104933",
    "created_at": "2010-10-29T18:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94253",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

The TIMED OUT! error is the missing `general-display-prefix`, which causes the expect interface to wait forever for maxima to print its next prompt.

I've filed a bug upstream here: https://sourceforge.net/tracker/?func=detail&aid=3098375&group_id=4933&atid=104933



---

archive/issue_comments_094254.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@vbraun](#comment%3A5):\n> The TIMED OUT! error is the missing `general-display-prefix`, which causes the expect interface to wait forever for maxima to print its next prompt.\n> \n\nOkay, thanks - so that's unrelated to the Tiger timeout from earlier Maximas.",
    "created_at": "2010-10-29T20:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94254",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@vbraun](#comment%3A5):
> The TIMED OUT! error is the missing `general-display-prefix`, which causes the expect interface to wait forever for maxima to print its next prompt.
> 

Okay, thanks - so that's unrelated to the Tiger timeout from earlier Maximas.



---

archive/issue_comments_094255.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.\n\nThis requires that `$SAGE_LOCAL/bin/sage-maxima.lisp sets \n\n```\n; (setf *general-display-prefix* \"<sage-display>\")\n(setf *prompt-prefix* \"<sage-display>\")\n```\nI've made a updated sage_scripts spkg here:\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/sage_scripts-4.6.rc0.p0.spkg\n\nTo test this ticket, you need all three spkgs and both patches.",
    "created_at": "2010-10-29T20:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94255",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

I've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.

This requires that `$SAGE_LOCAL/bin/sage-maxima.lisp sets 

```
; (setf *general-display-prefix* "<sage-display>")
(setf *prompt-prefix* "<sage-display>")
```
I've made a updated sage_scripts spkg here:
http://www.stp.dias.ie/~vbraun/Sage/spkg/sage_scripts-4.6.rc0.p0.spkg

To test this ticket, you need all three spkgs and both patches.



---

archive/issue_comments_094256.json:
```json
{
    "body": "Upstream: **Workaround found; Bug reported upstream.**",
    "created_at": "2010-10-29T20:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94256",
    "user": "https://github.com/vbraun"
}
```

Upstream: **Workaround found; Bug reported upstream.**



---

archive/issue_events_132137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-10-29T20:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132137"
}
```



---

archive/issue_comments_094257.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOne thing we don't don, which I think would be sensible, is to include the test suite for ECL. That adds 1.7 MB. From the README.ECL file:\n\n```\n\tcd tests\n\tmake\n\nYou will find two types of output files:\n\n\t*.out\tThe whole output of a test\n\t*.erg\tThe errors arising from a test\n\nWhen there is no *.erg, it means that ECL passed the test.\n```\n\nWould it not be sensible to add these in? Then we could execute the tests with a spkg-check file, like we do other code which has self-tests. \n\nDave",
    "created_at": "2010-10-29T23:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94257",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:10" align="right">comment:10</div>

One thing we don't don, which I think would be sensible, is to include the test suite for ECL. That adds 1.7 MB. From the README.ECL file:

```
	cd tests
	make

You will find two types of output files:

	*.out	The whole output of a test
	*.erg	The errors arising from a test

When there is no *.erg, it means that ECL passed the test.
```

Would it not be sensible to add these in? Then we could execute the tests with a spkg-check file, like we do other code which has self-tests. 

Dave



---

archive/issue_comments_094258.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@vbraun](#comment%3A7):\n> I've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.\n\nJust a very minor note: \n\n```\n# we are now getting three lines of commented verbosity \n```\nbut of course you changed it to get rid of the extra two lines from our constantly added packages :) so it's now five lines.  Might as well change that too so future people are confused.",
    "created_at": "2010-10-30T00:13:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94258",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@vbraun](#comment%3A7):
> I've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.

Just a very minor note: 

```
# we are now getting three lines of commented verbosity 
```
but of course you changed it to get rid of the extra two lines from our constantly added packages :) so it's now five lines.  Might as well change that too so future people are confused.



---

archive/issue_comments_094259.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAlso, be sure to include a test that shows #8729 is fixed, as that was closed as a duplicate on the condition that #8731's doctests would show that.",
    "created_at": "2010-10-30T00:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94259",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

Also, be sure to include a test that shows #8729 is fixed, as that was closed as a duplicate on the condition that #8731's doctests would show that.



---

archive/issue_comments_094260.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI looked trough doctest patch and compared it with mine from #8731, I have few comments.\n\nI think that doctest fix for sage/calculus/functional.py should be modified - it was documentation of the use of assume, but now - when maxima can calculate this integral without assumption, isn't that same as applying assumption to result? And the integral is checked in other doctest now. Maybe there is better example that still needs the assume to get result?\n\nAlso the doctest in sage/misc/functional.py was here to demonstrate numerical approximation of integral that cannot be evaluated iirc, and now when it can be evaluated, I think it should be changed to something that cannot be - like Jason did in patch in #8731.\n\nFinally, there is typo in doctest to sage/symbolic/expression.pyx - it should say that this doctest is here to check that #7334 not #7344 is fixed (#7344 point to libjpeg issue so it cannot be it) - and it should stay in here unmodified. Also - the log thing - it's not exactly regression, it's feature. This is because of Maxima ticket 947808 - http://sourceforge.net/tracker/?func=detail&aid=947808&group_id=4933&atid=104933 - they now try to keep the expression as factored as they can without using factor. This results in observed behaviour. This doctest I think cannot be changed as it demonstrated that ticket is solved, but we should apply \"x = x.simplify_rational()\" after \"x = x.simplify_log('one')\" in definition of simplify_full - that way full simplify would result in same results as before I think, and #7334 would be still fixed. Now, this doctest shows nothing.",
    "created_at": "2010-10-30T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94260",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:13" align="right">comment:13</div>

I looked trough doctest patch and compared it with mine from #8731, I have few comments.

I think that doctest fix for sage/calculus/functional.py should be modified - it was documentation of the use of assume, but now - when maxima can calculate this integral without assumption, isn't that same as applying assumption to result? And the integral is checked in other doctest now. Maybe there is better example that still needs the assume to get result?

Also the doctest in sage/misc/functional.py was here to demonstrate numerical approximation of integral that cannot be evaluated iirc, and now when it can be evaluated, I think it should be changed to something that cannot be - like Jason did in patch in #8731.

Finally, there is typo in doctest to sage/symbolic/expression.pyx - it should say that this doctest is here to check that #7334 not #7344 is fixed (#7344 point to libjpeg issue so it cannot be it) - and it should stay in here unmodified. Also - the log thing - it's not exactly regression, it's feature. This is because of Maxima ticket 947808 - http://sourceforge.net/tracker/?func=detail&aid=947808&group_id=4933&atid=104933 - they now try to keep the expression as factored as they can without using factor. This results in observed behaviour. This doctest I think cannot be changed as it demonstrated that ticket is solved, but we should apply "x = x.simplify_rational()" after "x = x.simplify_log('one')" in definition of simplify_full - that way full simplify would result in same results as before I think, and #7334 would be still fixed. Now, this doctest shows nothing.



---

archive/issue_comments_094261.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThere is a problem with the ECL package here. The history of all recent changes has been lost. The recent changes to the package have been:\n\n```\n=== ecl-10.2.1.p3 (David Kirkby, David Kirkby, 17th September 2010) ===\n=== ecl-10.2.1.p2 (David Kirkby, 30th July 2010) ===\n=== ecl-10.2.1.p1 (Mitesh Patel, 11th July 2010) ===\n=== ecl-10.2.1.p0 (David Kirkby, 11th July 2010) ===\n=== ecl-10.2.1 (William Stein, 14 February 2010) ===\n```\n\nbut instead SPKG.txt shows\n\n```\n=== ecl-10.4.1.p0 (Leif Leonhardy, Volker Braun, 29th September 2010) ===\n=== ecl-10.4.1 (N. Bruin, W. Stein, D. Kirkby and M. Patel 19th June 2010) ===\n=== ecl-10.2.1 (William Stein, 14 February 2010) ===\n```\n\nThis error has occurred since the package is based on one that I created several months ago, which never got merged, because their were conflicts with that and the Maxima package at the time. \n\nThe current version of ECL in Sage should have been used as a starting point - not an old one that was never merged. \n\nI'll sort the above problem out, and add the ECL test code today. \n\nDave",
    "created_at": "2010-10-30T14:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94261",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:14" align="right">comment:14</div>

There is a problem with the ECL package here. The history of all recent changes has been lost. The recent changes to the package have been:

```
=== ecl-10.2.1.p3 (David Kirkby, David Kirkby, 17th September 2010) ===
=== ecl-10.2.1.p2 (David Kirkby, 30th July 2010) ===
=== ecl-10.2.1.p1 (Mitesh Patel, 11th July 2010) ===
=== ecl-10.2.1.p0 (David Kirkby, 11th July 2010) ===
=== ecl-10.2.1 (William Stein, 14 February 2010) ===
```

but instead SPKG.txt shows

```
=== ecl-10.4.1.p0 (Leif Leonhardy, Volker Braun, 29th September 2010) ===
=== ecl-10.4.1 (N. Bruin, W. Stein, D. Kirkby and M. Patel 19th June 2010) ===
=== ecl-10.2.1 (William Stein, 14 February 2010) ===
```

This error has occurred since the package is based on one that I created several months ago, which never got merged, because their were conflicts with that and the Maxima package at the time. 

The current version of ECL in Sage should have been used as a starting point - not an old one that was never merged. 

I'll sort the above problem out, and add the ECL test code today. 

Dave



---

archive/issue_events_132138.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-10-30T14:05:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132138"
}
```



---

archive/issue_events_132139.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-10-30T14:05:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132139"
}
```



---

archive/issue_comments_094262.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe patch fix_easy_doctest doesn't apply cleanly on either 4.6.rc0 or 4.6.1.alpha0.\nWas it prepared against 4.5.3?",
    "created_at": "2010-10-30T22:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94262",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

The patch fix_easy_doctest doesn't apply cleanly on either 4.6.rc0 or 4.6.1.alpha0.
Was it prepared against 4.5.3?



---

archive/issue_comments_094263.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@vbraun](#comment%3A7):\n> I've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.\n> \n> This requires that `$SAGE_LOCAL/bin/sage-maxima.lisp sets \n\n\n```\n; (setf *general-display-prefix* \"<sage-display>\")\n(setf *prompt-prefix* \"<sage-display>\")\n```\n> I've made a updated sage_scripts spkg here:\n> http://www.stp.dias.ie/~vbraun/Sage/spkg/sage_scripts-4.6.rc0.p0.spkg\n> \n> To test this ticket, you need all three spkgs and both patches.\n\nCould you please attach a *patch to the scripts repo*, too (rather than a link to a complete new scripts spkg)?\n\nAlso, attaching diffs (or Mercurial patches) of the spkgs makes reviewing easier.",
    "created_at": "2010-10-31T02:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94263",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@vbraun](#comment%3A7):
> I've modified `sage/interfaces/maxima.py` to work with maxima's `prompt_prefix` instead. Patch is attached and fixes the remaining doctest error.
> 
> This requires that `$SAGE_LOCAL/bin/sage-maxima.lisp sets 


```
; (setf *general-display-prefix* "<sage-display>")
(setf *prompt-prefix* "<sage-display>")
```
> I've made a updated sage_scripts spkg here:
> http://www.stp.dias.ie/~vbraun/Sage/spkg/sage_scripts-4.6.rc0.p0.spkg
> 
> To test this ticket, you need all three spkgs and both patches.

Could you please attach a *patch to the scripts repo*, too (rather than a link to a complete new scripts spkg)?

Also, attaching diffs (or Mercurial patches) of the spkgs makes reviewing easier.



---

archive/issue_comments_094264.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nexttime](#comment%3A16):\n> Could you please attach a *patch to the scripts repo*, too (rather than a link to a complete new scripts spkg)?\n\nP.S.: Of course I could do that, too, but then you wouldn't be able to update it in case you later modify the patch.",
    "created_at": "2010-10-31T02:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94264",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nexttime](#comment%3A16):
> Could you please attach a *patch to the scripts repo*, too (rather than a link to a complete new scripts spkg)?

P.S.: Of course I could do that, too, but then you wouldn't be able to update it in case you later modify the patch.



---

archive/issue_comments_094265.json:
```json
{
    "body": "Attachment: **[trac_10187_general_display_prefix_workaround.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_general_display_prefix_workaround.patch.gz)**\n\nUpdated patch",
    "created_at": "2010-10-31T02:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94265",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_10187_general_display_prefix_workaround.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_general_display_prefix_workaround.patch.gz)**

Updated patch



---

archive/issue_comments_094266.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI've incorporated your suggestions and updated the patches. Both are (and were) against 4.6.rc0 and apply cleanly. Maybe you had the wrong order? It should be \n* trac_10187_fix_easy_doctests.patch\n* trac_10187_general_display_prefix_workaround.patch\n\nI'll attach patches for the `sage_scripts` and `maxima` spgk for easier review. Once Dave is finished with the ecl package then this ticket is ready for review again.",
    "created_at": "2010-10-31T02:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94266",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

I've incorporated your suggestions and updated the patches. Both are (and were) against 4.6.rc0 and apply cleanly. Maybe you had the wrong order? It should be 
* trac_10187_fix_easy_doctests.patch
* trac_10187_general_display_prefix_workaround.patch

I'll attach patches for the `sage_scripts` and `maxima` spgk for easier review. Once Dave is finished with the ecl package then this ticket is ready for review again.



---

archive/issue_comments_094267.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWrong order indeed! I thought the two patches were orthogonal.",
    "created_at": "2010-10-31T03:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94267",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Wrong order indeed! I thought the two patches were orthogonal.



---

archive/issue_comments_094268.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI'm going to have to ask on the ECL list how to run the test suite - I can't work out where ones supposed to copy the source. \n\nThese changes are not going to make it into 4.6. The milestone is 4.6.1, and it will easily be resolved by then. \n\nDave",
    "created_at": "2010-10-31T20:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94268",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">comment:20</div>

I'm going to have to ask on the ECL list how to run the test suite - I can't work out where ones supposed to copy the source. 

These changes are not going to make it into 4.6. The milestone is 4.6.1, and it will easily be resolved by then. 

Dave



---

archive/issue_comments_094269.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A20):\n> I'm going to have to ask on the ECL list how to run the test suite - I can't work out where ones supposed to copy the source. \n> \n> These changes are not going to make it into 4.6. The milestone is 4.6.1, and it will easily be resolved by then. \n> \n> Dave \n\nI've now got the information on the ANSI test suite from the ECL developer, though I gather the copy on the ECL site is rather out of date. Also, the ECL developer has fixed the bug that causes #9840, so I'll patch that too, so #9840 can hopefully be closed at the same time. \n\nI'll try to get this sorted out within the next few days.\n\nDave",
    "created_at": "2010-11-09T09:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94269",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@sagetrac-drkirkby](#comment%3A20):
> I'm going to have to ask on the ECL list how to run the test suite - I can't work out where ones supposed to copy the source. 
> 
> These changes are not going to make it into 4.6. The milestone is 4.6.1, and it will easily be resolved by then. 
> 
> Dave 

I've now got the information on the ANSI test suite from the ECL developer, though I gather the copy on the ECL site is rather out of date. Also, the ECL developer has fixed the bug that causes #9840, so I'll patch that too, so #9840 can hopefully be closed at the same time. 

I'll try to get this sorted out within the next few days.

Dave



---

archive/issue_comments_094270.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI have put an updated ECL file at http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg This has only been checked on OpenSolaris - I don't have access to a Fedora 14 machine, so can't verify if it actually fixes the issues reported at #10185\n\nI should make a few comments about this:\n\n* I have not added an spkg-check file or the Lisp tests, as I gather from the ECL developer the Lisp tests on the ECL site are outdated. Fixing this appears to be a non-trivial issue. \n* The repository information from the ecl-10.2.1.p3 version actually in Sage is kept, as it should be. (Volker's package was based on a 10.4.1 package I created months ago, which never got merged into Sage. So the repository information was not correct). \n* Despite being told the Solaris text relocation issue was resolved, it appears it is not as simple as applying a single patch as I had hoped. So #9840 remains unresolved, though it should be fixed when the next stable ECL release is made. \n* I've cleaned the package up somewhat. \n* I did not remove the gmp sources, as doing so requires a new configure file to be created. Whilst I can see this is advantageous if done properly, I fear that this will be done incorrectly at some point in the future, which can result in chaos. \n\nAfter \n* Installing the new ECL package I created, and put at http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg \n* Installing the Maxima package from http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg \n* Trying to install all the patches (one failed, see below)\n* Rebuilding the Sage library. \n* Running all the doctests, which all pass. \n\nI get one reject out of six when adding \n\n`trac_10187_general_display_prefix_workaround.patch` \n\nto sage 4.6.1.alpha0, so I think that patch needs updating. The contents of the reject are: \n\n```\n--- maxima.py\n+++ maxima.py\n@@ -728,10 +729,12 @@\n         \n             sage: maxima._eval_line('1+1;')\n             '2'\n-            sage: maxima.eval('sage0: x == x;')\n+            sage: maxima._eval_line('sage0: x == x;')\n             Traceback (most recent call last):\n             ...\n-            TypeError: error evaluating \"sage0: x == x;\":...\n+            TypeError: Error executing code in Maxima...\n+\n+\n         \"\"\"\n         if len(line) == 0:\n             return ''\n```\n\nBut as I say, all doctests passed for me, despite one patch was not fully applied!! \n\n```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 1871.3 seconds\n```\n\nI'm leaving as needs work, as clearly the fact one patch does not apply cleanly is a problem. It also needs testing on more than one system, but I don't have access to the Fedora 14 system where this was a particular problem. \n\n\n\nDave",
    "created_at": "2010-11-11T18:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94270",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:22" align="right">comment:22</div>

I have put an updated ECL file at http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg This has only been checked on OpenSolaris - I don't have access to a Fedora 14 machine, so can't verify if it actually fixes the issues reported at #10185

I should make a few comments about this:

* I have not added an spkg-check file or the Lisp tests, as I gather from the ECL developer the Lisp tests on the ECL site are outdated. Fixing this appears to be a non-trivial issue. 
* The repository information from the ecl-10.2.1.p3 version actually in Sage is kept, as it should be. (Volker's package was based on a 10.4.1 package I created months ago, which never got merged into Sage. So the repository information was not correct). 
* Despite being told the Solaris text relocation issue was resolved, it appears it is not as simple as applying a single patch as I had hoped. So #9840 remains unresolved, though it should be fixed when the next stable ECL release is made. 
* I've cleaned the package up somewhat. 
* I did not remove the gmp sources, as doing so requires a new configure file to be created. Whilst I can see this is advantageous if done properly, I fear that this will be done incorrectly at some point in the future, which can result in chaos. 

After 
* Installing the new ECL package I created, and put at http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg 
* Installing the Maxima package from http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg 
* Trying to install all the patches (one failed, see below)
* Rebuilding the Sage library. 
* Running all the doctests, which all pass. 

I get one reject out of six when adding 

`trac_10187_general_display_prefix_workaround.patch` 

to sage 4.6.1.alpha0, so I think that patch needs updating. The contents of the reject are: 

```
--- maxima.py
+++ maxima.py
@@ -728,10 +729,12 @@
         
             sage: maxima._eval_line('1+1;')
             '2'
-            sage: maxima.eval('sage0: x == x;')
+            sage: maxima._eval_line('sage0: x == x;')
             Traceback (most recent call last):
             ...
-            TypeError: error evaluating "sage0: x == x;":...
+            TypeError: Error executing code in Maxima...
+
+
         """
         if len(line) == 0:
             return ''
```

But as I say, all doctests passed for me, despite one patch was not fully applied!! 

```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 1871.3 seconds
```

I'm leaving as needs work, as clearly the fact one patch does not apply cleanly is a problem. It also needs testing on more than one system, but I don't have access to the Fedora 14 system where this was a particular problem. 



Dave



---

archive/issue_comments_094271.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,17 +1,15 @@\n Please update ecl and maxima to the newest upstream release. Sage packages are here:\n \n-http://www.stp.dias.ie/~vbraun/Sage/spkg/ecl-10.4.1.p0.spkg\n+http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg\n http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg\n \n Note that you cannot upgrade one without the other; Both need to be upgraded simultaneously or build will fail.\n \n Relevant tickets for ecl:\n \n-* #9264: Apply ALL relevent fixes to ECL 10.4.1: As far as I can tell all relevant patches are included in ecl-10.4.1.p0.spkg.\n+* #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. \n \n-* #9493: Remove extra baggage from ECL 10.2.1.p1 (again): Patch is included and #9493 can be closed after this ticket.\n-\n-* #10185: the old ecl-10.2.1 does not build on Fedora 14: Fixed with the updated ecl from this ticket.\n+* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ecl from this ticket.\n \n Relevant tickets for maxima:\n \n``````\n",
    "created_at": "2010-11-11T18:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94271",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,17 +1,15 @@
 Please update ecl and maxima to the newest upstream release. Sage packages are here:
 
-http://www.stp.dias.ie/~vbraun/Sage/spkg/ecl-10.4.1.p0.spkg
+http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg
 http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg
 
 Note that you cannot upgrade one without the other; Both need to be upgraded simultaneously or build will fail.
 
 Relevant tickets for ecl:
 
-* #9264: Apply ALL relevent fixes to ECL 10.4.1: As far as I can tell all relevant patches are included in ecl-10.4.1.p0.spkg.
+* #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. 
 
-* #9493: Remove extra baggage from ECL 10.2.1.p1 (again): Patch is included and #9493 can be closed after this ticket.
-
-* #10185: the old ecl-10.2.1 does not build on Fedora 14: Fixed with the updated ecl from this ticket.
+* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ecl from this ticket.
 
 Relevant tickets for maxima:
 
``````




---

archive/issue_comments_094272.json:
```json
{
    "body": "Changed author from **Volker Braun** to **Volker Braun, David Kirkby**",
    "created_at": "2010-11-11T18:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94272",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed author from **Volker Braun** to **Volker Braun, David Kirkby**



---

archive/issue_comments_094273.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nDave's `ecl-10.4.1.spkg` compiles just fine on Fedora 14! I don't have sage 4.6.1.alpha0 installed right now, so it'll take me a few hours to update the patch.",
    "created_at": "2010-11-11T18:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94273",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

Dave's `ecl-10.4.1.spkg` compiles just fine on Fedora 14! I don't have sage 4.6.1.alpha0 installed right now, so it'll take me a few hours to update the patch.



---

archive/issue_events_132140.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-11T22:24:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132140"
}
```



---

archive/issue_events_132141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-11T22:24:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132141"
}
```



---

archive/issue_comments_094274.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nPatches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order\n* trac_10187_fix_easy_doctests.patch\n* trac_10187_general_display_prefix_workaround.patch",
    "created_at": "2010-11-11T22:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94274",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">comment:24</div>

Patches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order
* trac_10187_fix_easy_doctests.patch
* trac_10187_general_display_prefix_workaround.patch



---

archive/issue_comments_094275.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@vbraun](#comment%3A24):\n> Patches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order\n> * trac_10187_fix_easy_doctests.patch\n> * trac_10187_general_display_prefix_workaround.patch\n\nPerhaps I did not have a clean sage 4.6.1.alpha0. I will start a fresh build and try again. \n\nDave",
    "created_at": "2010-11-11T22:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94275",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@vbraun](#comment%3A24):
> Patches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order
> * trac_10187_fix_easy_doctests.patch
> * trac_10187_general_display_prefix_workaround.patch

Perhaps I did not have a clean sage 4.6.1.alpha0. I will start a fresh build and try again. 

Dave



---

archive/issue_comments_094276.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@vbraun](#comment%3A24):\n> Patches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order\n> * trac_10187_fix_easy_doctests.patch\n> * trac_10187_general_display_prefix_workaround.patch\n\nAh, I missed that fact. I applied the patches in the order they were applied to the trac ticket, which is the reverse order to what you are saying should have been done! \n\nI've just started a build. It takes a bit over an hour to build Sage and run all the long doctests on this machine, but it's 11 pm local time. I'll try to get it done before going to bed, so I can report on it, but it might have to wait until tomorrow. I'm feeling rather tired here. \n\nDave",
    "created_at": "2010-11-11T23:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94276",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@vbraun](#comment%3A24):
> Patches apply cleanly on sage 4.6.1.alpha0. As I wrote in [#10187 comment:18](https://github.com/sagemath/sage/issues/10187#comment:18), they need to be applied in the order
> * trac_10187_fix_easy_doctests.patch
> * trac_10187_general_display_prefix_workaround.patch

Ah, I missed that fact. I applied the patches in the order they were applied to the trac ticket, which is the reverse order to what you are saying should have been done! 

I've just started a build. It takes a bit over an hour to build Sage and run all the long doctests on this machine, but it's 11 pm local time. I'll try to get it done before going to bed, so I can report on it, but it might have to wait until tomorrow. I'm feeling rather tired here. 

Dave



---

archive/issue_comments_094277.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOK, this is fine on OpenSolaris 06/2009 and Fedora 14. What about any other platforms?",
    "created_at": "2010-11-12T00:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94277",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:27" align="right">comment:27</div>

OK, this is fine on OpenSolaris 06/2009 and Fedora 14. What about any other platforms?



---

archive/issue_comments_094278.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A27):\n> OK, this is fine on OpenSolaris 06/2009 and Fedora 14. What about any other platforms? \n\nI have switched sage-on-gentoo to maxima-5.22.1 on sage-4.6's release I haven't run a \nlong test of alpha1 with it but I haven't heard complaint from anyone running tests\non x86 and amd64 with 4.6.",
    "created_at": "2010-11-15T10:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94278",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@sagetrac-drkirkby](#comment%3A27):
> OK, this is fine on OpenSolaris 06/2009 and Fedora 14. What about any other platforms? 

I have switched sage-on-gentoo to maxima-5.22.1 on sage-4.6's release I haven't run a 
long test of alpha1 with it but I haven't heard complaint from anyone running tests
on x86 and amd64 with 4.6.



---

archive/issue_comments_094279.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@kiwifb](#comment%3A28):\n\n> I have switched sage-on-gentoo to maxima-5.22.1 on sage-4.6's release I haven't run a \n> long test of alpha1 with it but I haven't heard complaint from anyone running tests\n> on x86 and amd64 with 4.6.\n\nThank you. I must do some other things today, so don't have time to test this much. But hopefully we can get some testers on other platforms. To my knowledge we know nothing about\n\n* Any OS X release\n* Solaris 10 on SPARC\n* Solaris 10 on x86\n\nall of which are supported platforms. \n\nI've asked on sage-devel, if someone else can do some testing. It would be nice to get this merged. Experience shows if we leave updating Maxima too long, it becomes a nightmare to update. It really is something we should regularly update - not only for new functionality, but also it saves a nightmare at a later date. \n\nDave",
    "created_at": "2010-11-15T11:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94279",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@kiwifb](#comment%3A28):

> I have switched sage-on-gentoo to maxima-5.22.1 on sage-4.6's release I haven't run a 
> long test of alpha1 with it but I haven't heard complaint from anyone running tests
> on x86 and amd64 with 4.6.

Thank you. I must do some other things today, so don't have time to test this much. But hopefully we can get some testers on other platforms. To my knowledge we know nothing about

* Any OS X release
* Solaris 10 on SPARC
* Solaris 10 on x86

all of which are supported platforms. 

I've asked on sage-devel, if someone else can do some testing. It would be nice to get this merged. Experience shows if we leave updating Maxima too long, it becomes a nightmare to update. It really is something we should regularly update - not only for new functionality, but also it saves a nightmare at a later date. 

Dave



---

archive/issue_comments_094280.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI'm currently testing on OS X 10.4 (Tiger) PPC.  ECL installed fine, but I won't be able to see the results of the rest and some testing until tomorrow.",
    "created_at": "2010-11-15T19:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94280",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:31" align="right">comment:31</div>

I'm currently testing on OS X 10.4 (Tiger) PPC.  ECL installed fine, but I won't be able to see the results of the rest and some testing until tomorrow.



---

archive/issue_comments_094281.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI tested both spkg on Debian, everything compiled fine, the patches applied cleanly on 4.6.1.alpha2 and sage_scripts spkg from that version (when applied in order of comment 18, otherwise 1 hunk does not get applied) and all tests passed.\n\n```\nsage -t -long -force_lib \"devel/sage/sage/interfaces/maxima.py\"\n         [22.4 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 22.5 seconds\n\n```\nIt should be noted that the Maxima update fixes #7952 (and #10273 I opened by mistake and closed as duplicate).",
    "created_at": "2010-11-16T12:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94281",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

I tested both spkg on Debian, everything compiled fine, the patches applied cleanly on 4.6.1.alpha2 and sage_scripts spkg from that version (when applied in order of comment 18, otherwise 1 hunk does not get applied) and all tests passed.

```
sage -t -long -force_lib "devel/sage/sage/interfaces/maxima.py"
         [22.4 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 22.5 seconds

```
It should be noted that the Maxima update fixes #7952 (and #10273 I opened by mistake and closed as duplicate).



---

archive/issue_comments_094282.json:
```json
{
    "body": "Work Issues: **new interface patch needs help**",
    "created_at": "2010-11-16T14:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94282",
    "user": "https://github.com/kcrisman"
}
```

Work Issues: **new interface patch needs help**



---

archive/issue_comments_094283.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI get a LOT of timeouts on PPC OS X 10.4.  I think that basically any time Maxima is invoked inside Sage, it times out or does something else weird.  E.g.\n\n```\nsage: integrate(x^2,x)\nException RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\n ignored\nException RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\n ignored\nException RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\n ignored\nException RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\nException RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored\n ignored\n```\nI also get the following:\n\n```\nsage -t -long \"devel/sage/sage/calculus/functions.py\"       \n**********************************************************************\nFile \"/Users/student/Desktop/sage-4.6/devel/sage/sage/calculus/functions.py\", line 46:\n    sage: wronskian(*[x^k for k in range(1, 5)])\n        assert len(self._before())==0, 'Maxima expect interface is confused!'\n    AssertionError: Maxima expect interface is confused!\n```\nWhat the heck?  I assume the change to the Maxima interface is to blame; reverting that patch only (not the doctest one) seems to fix the problem.\n\nThough in that case I do get \n\n```\nFile \"/Users/student/Desktop/sage-4.6/devel/sage/sage/calculus/calculus.py\", line 343:\n    sage: taylor(gamma(1/3+x),x,0,3)\nExpected:\n    -1/432*((36*(pi*sqrt(3) + 9*log(3))*euler_gamma^2 + 27*pi^2*log(3) + 72*euler_gamma^3 + 243*log(3)^3 + 18*(6*pi*sqrt(3)*log(3) + pi^2 + 27*log(3)^2 + 12*psi(1, 1/3))*euler_gamma + 324*psi(1, 1/3)*log(3) + (pi^3 + 9*(9*log(3)^2 + 4*psi(1, 1/3))*pi)*sqrt(3))*gamma(1/3) - 72*gamma(1/3)*psi(2, 1/3))*x^3 + 1/24*(6*pi*sqrt(3)*log(3) + 4*(pi*sqrt(3) + 9*log(3))*euler_gamma + pi^2 + 12*euler_gamma^2 + 27*log(3)^2 + 12*psi(1, 1/3))*x^2*gamma(1/3) - 1/6*(6*euler_gamma + pi*sqrt(3) + 9*log(3))*x*gamma(1/3) + gamma(1/3)\nGot:\n    -1/432*((36*(pi*sqrt(3) + 9*log(3))*euler_gamma^2 + 27*pi^2*log(3) + 72*euler_gamma^3 + 243*log(3)^3 + 18*(6*pi*sqrt(3)*log(3) + pi^2 + 27*log(3)^2 + 12*psi(1, 1/3))*euler_gamma + 324*log(3)*psi(1, 1/3) + (pi^3 + 9*(9*log(3)^2 + 4*psi(1, 1/3))*pi)*sqrt(3))*gamma(1/3) - 72*gamma(1/3)*psi(2, 1/3))*x^3 + 1/24*(6*pi*sqrt(3)*log(3) + 4*(pi*sqrt(3) + 9*log(3))*euler_gamma + pi^2 + 12*euler_gamma^2 + 27*log(3)^2 + 12*psi(1, 1/3))*x^2*gamma(1/3) - 1/6*(6*euler_gamma + pi*sqrt(3) + 9*log(3))*x*gamma(1/3) + gamma(1/3)\n**********************************************************************\n```\nwhich is interesting; if you find where they differ (hint - transposed multiplication), you win the Where's Waldo award.\n\nI'll report back if there are any other errors without it.",
    "created_at": "2010-11-16T14:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94283",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:33" align="right">comment:33</div>

I get a LOT of timeouts on PPC OS X 10.4.  I think that basically any time Maxima is invoked inside Sage, it times out or does something else weird.  E.g.

```
sage: integrate(x^2,x)
Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
 ignored
Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
 ignored
Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
 ignored
Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
Exception RuntimeError: RuntimeError('maximum recursion depth exceeded in cmp',) in Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.RuntimeError'> ignored
 ignored
```
I also get the following:

```
sage -t -long "devel/sage/sage/calculus/functions.py"       
**********************************************************************
File "/Users/student/Desktop/sage-4.6/devel/sage/sage/calculus/functions.py", line 46:
    sage: wronskian(*[x^k for k in range(1, 5)])
        assert len(self._before())==0, 'Maxima expect interface is confused!'
    AssertionError: Maxima expect interface is confused!
```
What the heck?  I assume the change to the Maxima interface is to blame; reverting that patch only (not the doctest one) seems to fix the problem.

Though in that case I do get 

```
File "/Users/student/Desktop/sage-4.6/devel/sage/sage/calculus/calculus.py", line 343:
    sage: taylor(gamma(1/3+x),x,0,3)
Expected:
    -1/432*((36*(pi*sqrt(3) + 9*log(3))*euler_gamma^2 + 27*pi^2*log(3) + 72*euler_gamma^3 + 243*log(3)^3 + 18*(6*pi*sqrt(3)*log(3) + pi^2 + 27*log(3)^2 + 12*psi(1, 1/3))*euler_gamma + 324*psi(1, 1/3)*log(3) + (pi^3 + 9*(9*log(3)^2 + 4*psi(1, 1/3))*pi)*sqrt(3))*gamma(1/3) - 72*gamma(1/3)*psi(2, 1/3))*x^3 + 1/24*(6*pi*sqrt(3)*log(3) + 4*(pi*sqrt(3) + 9*log(3))*euler_gamma + pi^2 + 12*euler_gamma^2 + 27*log(3)^2 + 12*psi(1, 1/3))*x^2*gamma(1/3) - 1/6*(6*euler_gamma + pi*sqrt(3) + 9*log(3))*x*gamma(1/3) + gamma(1/3)
Got:
    -1/432*((36*(pi*sqrt(3) + 9*log(3))*euler_gamma^2 + 27*pi^2*log(3) + 72*euler_gamma^3 + 243*log(3)^3 + 18*(6*pi*sqrt(3)*log(3) + pi^2 + 27*log(3)^2 + 12*psi(1, 1/3))*euler_gamma + 324*log(3)*psi(1, 1/3) + (pi^3 + 9*(9*log(3)^2 + 4*psi(1, 1/3))*pi)*sqrt(3))*gamma(1/3) - 72*gamma(1/3)*psi(2, 1/3))*x^3 + 1/24*(6*pi*sqrt(3)*log(3) + 4*(pi*sqrt(3) + 9*log(3))*euler_gamma + pi^2 + 12*euler_gamma^2 + 27*log(3)^2 + 12*psi(1, 1/3))*x^2*gamma(1/3) - 1/6*(6*euler_gamma + pi*sqrt(3) + 9*log(3))*x*gamma(1/3) + gamma(1/3)
**********************************************************************
```
which is interesting; if you find where they differ (hint - transposed multiplication), you win the Where's Waldo award.

I'll report back if there are any other errors without it.



---

archive/issue_comments_094284.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2010-11-16T14:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94284",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_events_132142.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T14:37:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132142"
}
```



---

archive/issue_events_132143.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T14:37:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132143"
}
```



---

archive/issue_comments_094285.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nkcrisman: looks like you did not install the updated `sage_scripts-4.6.rc0.p0.spkg`, see [#10187 comment:7](https://github.com/sagemath/sage/issues/10187#comment:7)",
    "created_at": "2010-11-16T15:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94285",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

kcrisman: looks like you did not install the updated `sage_scripts-4.6.rc0.p0.spkg`, see [#10187 comment:7](https://github.com/sagemath/sage/issues/10187#comment:7)



---

archive/issue_comments_094286.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nIf sage_scripts needs to be patched, please provide a hg patch for that.",
    "created_at": "2010-11-16T16:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94286",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

If sage_scripts needs to be patched, please provide a hg patch for that.



---

archive/issue_comments_094287.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIt is sage-maxima.lisp.patch provided in the ticked.\n\nIt applies cleanly on sage_script spkg of sage 4.6.1.alpha2 for me and tests pass.",
    "created_at": "2010-11-16T16:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94287",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:36" align="right">comment:36</div>

It is sage-maxima.lisp.patch provided in the ticked.

It applies cleanly on sage_script spkg of sage 4.6.1.alpha2 for me and tests pass.



---

archive/issue_comments_094288.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jdemeyer](#comment%3A35):\n> If sage_scripts needs to be patched, please provide a hg patch for that.\n\nLooks like it needs a commit message to apply straight-up with `hg_scripts`, so it's not ready as it stands, perhaps.\n\nWithout *either* of those patches, I get most relevant tests passing EXCEPT the `taylor(gamma(1/3+x),x,0,3)` one, on both OS X 10.6 Intel and 10.4 PPC.    The interfaces/maxima.py times out without both the workaround and lisp patch on 10.6, after which it's fine on that and sage/calculus, sage/symbolic, and sage/functions.  \n\nI haven't tested that last combination of patches yet on my 10.4 machine, as it's very slow  - later today I might know more.",
    "created_at": "2010-11-16T16:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94288",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jdemeyer](#comment%3A35):
> If sage_scripts needs to be patched, please provide a hg patch for that.

Looks like it needs a commit message to apply straight-up with `hg_scripts`, so it's not ready as it stands, perhaps.

Without *either* of those patches, I get most relevant tests passing EXCEPT the `taylor(gamma(1/3+x),x,0,3)` one, on both OS X 10.6 Intel and 10.4 PPC.    The interfaces/maxima.py times out without both the workaround and lisp patch on 10.6, after which it's fine on that and sage/calculus, sage/symbolic, and sage/functions.  

I haven't tested that last combination of patches yet on my 10.4 machine, as it's very slow  - later today I might know more.



---

archive/issue_comments_094289.json:
```json
{
    "body": "patch to SAGE_LOCAL/bin/sage_maxima.lisp with commit message",
    "created_at": "2010-11-16T17:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94289",
    "user": "https://github.com/vbraun"
}
```

patch to SAGE_LOCAL/bin/sage_maxima.lisp with commit message



---

archive/issue_comments_094290.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAttachment: **[trac_10187_sage-maxima_lisp.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_sage-maxima_lisp.patch.gz)**\n\nI've added a patch for `sage-maxima.lisp` as `trac_10187_sage-maxima_lisp.patch`. \n\nTo summarize, you need to\n1. Apply `trac_10187_sage-maxima_lisp.patch` to SAGE_LOCAL/bin\n2. http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg\n3. http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg\n4. Apply trac_10187_fix_easy_doctests.patch to the sage library\n5. Apply trac_10187_general_display_prefix_workaround.patch to the sage library\n\nIts true, but completely pointless, that some doctests pass without some of these patches. Maxima's error reporting changed and we cannot use the old parser any more. Read this ticket for details.",
    "created_at": "2010-11-16T17:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94290",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>

Attachment: **[trac_10187_sage-maxima_lisp.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_sage-maxima_lisp.patch.gz)**

I've added a patch for `sage-maxima.lisp` as `trac_10187_sage-maxima_lisp.patch`. 

To summarize, you need to
1. Apply `trac_10187_sage-maxima_lisp.patch` to SAGE_LOCAL/bin
2. http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg
3. http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg
4. Apply trac_10187_fix_easy_doctests.patch to the sage library
5. Apply trac_10187_general_display_prefix_workaround.patch to the sage library

Its true, but completely pointless, that some doctests pass without some of these patches. Maxima's error reporting changed and we cannot use the old parser any more. Read this ticket for details.



---

archive/issue_events_132144.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T17:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132144"
}
```



---

archive/issue_events_132145.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T17:34:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132145"
}
```



---

archive/issue_comments_094291.json:
```json
{
    "body": "Changed work issues from **new interface patch needs help** to none",
    "created_at": "2010-11-16T17:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94291",
    "user": "https://github.com/vbraun"
}
```

Changed work issues from **new interface patch needs help** to none



---

archive/issue_comments_094292.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOkay, after running all (not long) doctests, I get the following error in addition to the taylor error above, on Mac OS X 10.6, applied to a brand-new Sage 4.6.1.alpha1 build:\n\n```\n\nsage -t  devel/sage/sage/plot/plot3d/transform.pyx\n**********************************************************************\nFile \"/Users/.../sage-4.6.1.alpha1/devel/sage-main/sage/plot/plot3d/transform.pyx\", line 217:\n    sage: m\nExpected:\n    [                                       -(cos(theta) - 1)*x^2 + cos(theta)              -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x + sin(theta)*abs(z)      -((cos(theta) - 1)*x*z^2 + sqrt(-x^2 - z^2 + 1)*sin(theta)*abs(z))/z]\n    [             -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x - sin(theta)*abs(z)                           (cos(theta) - 1)*x^2 + (cos(theta) - 1)*z^2 + 1 -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) - x*z*sin(theta))/abs(z)]\n    [     -((cos(theta) - 1)*x*z^2 - sqrt(-x^2 - z^2 + 1)*sin(theta)*abs(z))/z -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) + x*z*sin(theta))/abs(z)                                        -(cos(theta) - 1)*z^2 + cos(theta)]\nGot:\n    [                                       -(cos(theta) - 1)*x^2 + cos(theta)              -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x + abs(z)*sin(theta)      -((cos(theta) - 1)*x*z^2 + sqrt(-x^2 - z^2 + 1)*abs(z)*sin(theta))/z]\n    [             -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x - abs(z)*sin(theta)                           (cos(theta) - 1)*x^2 + (cos(theta) - 1)*z^2 + 1 -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) - x*z*sin(theta))/abs(z)]\n    [     -((cos(theta) - 1)*x*z^2 - sqrt(-x^2 - z^2 + 1)*abs(z)*sin(theta))/z -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) + x*z*sin(theta))/abs(z)                                        -(cos(theta) - 1)*z^2 + cos(theta)]\n**********************************************************************\n```\nThere are several transpositions of `abs(z)*sin(theta)` in this one, just like the transposition of `psi(1, 1/3)*log(3)` in the other error.    \n\nI get \n\n```\n\nsage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')\n'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'\n```\nwhich looks like the 'expected' line.   I also get\n\n```\nsage: psi(1,1/3)*log(3)\nlog(3)*psi(1, 1/3)\n```\nwhich perhaps is the issue.  What do people who do not have problems with this doctest get for this?  (If the same for Maxima, but different for Sage, maybe it's a platform-dependent Pynac issue ... why on earth would that happen?)",
    "created_at": "2010-11-16T19:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94292",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:39" align="right">comment:39</div>

Okay, after running all (not long) doctests, I get the following error in addition to the taylor error above, on Mac OS X 10.6, applied to a brand-new Sage 4.6.1.alpha1 build:

```

sage -t  devel/sage/sage/plot/plot3d/transform.pyx
**********************************************************************
File "/Users/.../sage-4.6.1.alpha1/devel/sage-main/sage/plot/plot3d/transform.pyx", line 217:
    sage: m
Expected:
    [                                       -(cos(theta) - 1)*x^2 + cos(theta)              -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x + sin(theta)*abs(z)      -((cos(theta) - 1)*x*z^2 + sqrt(-x^2 - z^2 + 1)*sin(theta)*abs(z))/z]
    [             -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x - sin(theta)*abs(z)                           (cos(theta) - 1)*x^2 + (cos(theta) - 1)*z^2 + 1 -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) - x*z*sin(theta))/abs(z)]
    [     -((cos(theta) - 1)*x*z^2 - sqrt(-x^2 - z^2 + 1)*sin(theta)*abs(z))/z -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) + x*z*sin(theta))/abs(z)                                        -(cos(theta) - 1)*z^2 + cos(theta)]
Got:
    [                                       -(cos(theta) - 1)*x^2 + cos(theta)              -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x + abs(z)*sin(theta)      -((cos(theta) - 1)*x*z^2 + sqrt(-x^2 - z^2 + 1)*abs(z)*sin(theta))/z]
    [             -(cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*x - abs(z)*sin(theta)                           (cos(theta) - 1)*x^2 + (cos(theta) - 1)*z^2 + 1 -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) - x*z*sin(theta))/abs(z)]
    [     -((cos(theta) - 1)*x*z^2 - sqrt(-x^2 - z^2 + 1)*abs(z)*sin(theta))/z -((cos(theta) - 1)*sqrt(-x^2 - z^2 + 1)*z*abs(z) + x*z*sin(theta))/abs(z)                                        -(cos(theta) - 1)*z^2 + cos(theta)]
**********************************************************************
```
There are several transpositions of `abs(z)*sin(theta)` in this one, just like the transposition of `psi(1, 1/3)*log(3)` in the other error.    

I get 

```

sage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')
'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'
```
which looks like the 'expected' line.   I also get

```
sage: psi(1,1/3)*log(3)
log(3)*psi(1, 1/3)
```
which perhaps is the issue.  What do people who do not have problems with this doctest get for this?  (If the same for Maxima, but different for Sage, maybe it's a platform-dependent Pynac issue ... why on earth would that happen?)



---

archive/issue_comments_094293.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nCan you double-check that the maxima binary works? you should get:\n\n```\n[vbraun@volker-two ~]$ sage -sh\n\nStarting subshell with Sage environment variables set.\nBe sure to exit when you are done and do not do anything\nwith other copies of Sage!\n\nBypassing shell configuration files ...\n\nSAGE_ROOT=/home/vbraun/Sage/sage\n(sage subshell) volker-two:~ vbraun$ maxima\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sockets.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/defsystem.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/cmp.fas\"\n;;; Loading #P\"/home/vbraun/Sage/sage/local/lib/ecl/sysfun.lsp\"\nMaxima 5.22.1 http://maxima.sourceforge.net\nusing Lisp ECL 10.4.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) display2d : false;\n\n(%o1) false\n(%i2) psi(1,1/3)*log(3);\n\n(%o2) psi(1,1/3)*log(3)\n```",
    "created_at": "2010-11-16T19:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94293",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:40" align="right">comment:40</div>

Can you double-check that the maxima binary works? you should get:

```
[vbraun@volker-two ~]$ sage -sh

Starting subshell with Sage environment variables set.
Be sure to exit when you are done and do not do anything
with other copies of Sage!

Bypassing shell configuration files ...

SAGE_ROOT=/home/vbraun/Sage/sage
(sage subshell) volker-two:~ vbraun$ maxima
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sockets.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/defsystem.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/cmp.fas"
;;; Loading #P"/home/vbraun/Sage/sage/local/lib/ecl/sysfun.lsp"
Maxima 5.22.1 http://maxima.sourceforge.net
using Lisp ECL 10.4.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) display2d : false;

(%o1) false
(%i2) psi(1,1/3)*log(3);

(%o2) psi(1,1/3)*log(3)
```



---

archive/issue_events_132146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T19:58:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132146"
}
```



---

archive/issue_events_132147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T19:58:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132147"
}
```



---

archive/issue_comments_094294.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nRReplying to [@vbraun](#comment%3A40):\n> Can you double-check that the maxima binary works? you should get:\n\nI'm not sure how it could have passed tests without working :) but yes, it works on OS X 10.6.   From command line, from `sage -sh`, from `maxima_console`, etc. \n\nOn 10.4 it also works once I add in the script change, and I'm currently running doctests.  It is even slower than before, but so far it does seem to be working.   Just FYI that on that platform testing sage/interfaces/maxima.py has no point, because of the (unrelated, I think) #9361.\n\nPutting to needs work because of this weird multiplication issue.",
    "created_at": "2010-11-16T20:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94294",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:41" align="right">comment:41</div>

RReplying to [@vbraun](#comment%3A40):
> Can you double-check that the maxima binary works? you should get:

I'm not sure how it could have passed tests without working :) but yes, it works on OS X 10.6.   From command line, from `sage -sh`, from `maxima_console`, etc. 

On 10.4 it also works once I add in the script change, and I'm currently running doctests.  It is even slower than before, but so far it does seem to be working.   Just FYI that on that platform testing sage/interfaces/maxima.py has no point, because of the (unrelated, I think) #9361.

Putting to needs work because of this weird multiplication issue.



---

archive/issue_events_132148.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T20:30:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132148"
}
```



---

archive/issue_events_132149.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T20:30:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132149"
}
```



---

archive/issue_comments_094295.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n> yes, it works on OS X 10.6.\n\nDoes maxima return `psi(1,1/3)*log(3)` in this order or in the reversed order?",
    "created_at": "2010-11-16T20:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94295",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">comment:42</div>

> yes, it works on OS X 10.6.

Does maxima return `psi(1,1/3)*log(3)` in this order or in the reversed order?



---

archive/issue_events_132150.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T21:04:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132150"
}
```



---

archive/issue_events_132151.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-11-16T21:04:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132151"
}
```



---

archive/issue_comments_094296.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@vbraun](#comment%3A42):\n> > yes, it works on OS X 10.6.\n> \n> \n> Does maxima return `psi(1,1/3)*log(3)` in this order or in the reversed order?\n\nI already reverted ... but as far as I recall, it was Sage itself that reversed this, as in comment 39, and in straight Maxima I got what you did.  \n\nSorry, put to wrong thing before - needs work because of this, or needs info if you like.",
    "created_at": "2010-11-16T21:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94296",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@vbraun](#comment%3A42):
> > yes, it works on OS X 10.6.
> 
> 
> Does maxima return `psi(1,1/3)*log(3)` in this order or in the reversed order?

I already reverted ... but as far as I recall, it was Sage itself that reversed this, as in comment 39, and in straight Maxima I got what you did.  

Sorry, put to wrong thing before - needs work because of this, or needs info if you like.



---

archive/issue_comments_094297.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI'm still confused what, if any, issue remains. This patch only touches the capture of the whole maxima output string, and not the parsing of expression. If maxima's output ordering has not changed yet some platform returns a different output sort order then this is an unrelated bug in the maxima interface.",
    "created_at": "2010-11-16T21:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94297",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">comment:44</div>

I'm still confused what, if any, issue remains. This patch only touches the capture of the whole maxima output string, and not the parsing of expression. If maxima's output ordering has not changed yet some platform returns a different output sort order then this is an unrelated bug in the maxima interface.



---

archive/issue_events_132152.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T21:29:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132152"
}
```



---

archive/issue_events_132153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-16T21:29:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132153"
}
```



---

archive/issue_comments_094298.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nOn Ubuntu 10.04 64-bit with 4.6.1.alpha1, everything is working -- all \"ptestlong\" tests pass.\n\nReplying to [@kcrisman](#comment%3A39):\n> I get \n> \n> ```\n> \n> sage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')\n> 'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'\n> ```\n> which looks like the 'expected' line.   I also get\n> \n> ```\n> sage: psi(1,1/3)*log(3)\n> log(3)*psi(1, 1/3)\n> ```\n> which perhaps is the issue.  What do people who do not have problems with this doctest get for this?  (If the same for Maxima, but different for Sage, maybe it's a platform-dependent Pynac issue ... why on earth would that happen?)\n\nHere's what I get for those commands with all the patches and spkgs here, in 4.6.1.alpha1:\n\n```\nsage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')\n'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'\nsage: psi(1,1/3)*log(3)\npsi(1, 1/3)*log(3)\n```",
    "created_at": "2010-11-16T22:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94298",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:45" align="right">comment:45</div>

On Ubuntu 10.04 64-bit with 4.6.1.alpha1, everything is working -- all "ptestlong" tests pass.

Replying to [@kcrisman](#comment%3A39):
> I get 
> 
> ```
> 
> sage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')
> 'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'
> ```
> which looks like the 'expected' line.   I also get
> 
> ```
> sage: psi(1,1/3)*log(3)
> log(3)*psi(1, 1/3)
> ```
> which perhaps is the issue.  What do people who do not have problems with this doctest get for this?  (If the same for Maxima, but different for Sage, maybe it's a platform-dependent Pynac issue ... why on earth would that happen?)

Here's what I get for those commands with all the patches and spkgs here, in 4.6.1.alpha1:

```
sage: sage.calculus.calculus.maxima.eval('taylor(gamma(1/3+x),x,0,3)')
'gamma(1/3)-(6*%gamma+%pi*sqrt(3)+9*log(3))*gamma(1/3)*x/6+(12*%gamma^2+(4*%pi*sqrt(3)+36*log(3))*%gamma+6*log(3)*%pi*sqrt(3)+%pi^2+27*log(3)^2+12*psi[1](1/3))*gamma(1/3)*x^2/24+(72*gamma(1/3)*psi[2](1/3)+(-72*%gamma^3+(-36*%pi*sqrt(3)-324*log(3))*%gamma^2+(-108*log(3)*%pi*sqrt(3)-18*%pi^2-486*log(3)^2-216*psi[1](1/3))*%gamma+(-%pi^3+(-81*log(3)^2-36*psi[1](1/3))*%pi)*sqrt(3)-27*log(3)*%pi^2-243*log(3)^3-324*psi[1](1/3)*log(3))*gamma(1/3))*x^3/432'
sage: psi(1,1/3)*log(3)
psi(1, 1/3)*log(3)
```



---

archive/issue_comments_094299.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nDan, thanks for that confirmation of the issue.\n\nReplying to [@vbraun](#comment%3A44):\n> I'm still confused what, if any, issue remains. This patch only touches the capture of the whole maxima output string, and not the parsing of expression. If maxima's output ordering has not changed yet some platform returns a different output sort order then this is an unrelated bug in the maxima interface.\n> \n\nActually, I'm pretty sure it's an unrelated bug in something else.  At first I thought Pynac/Ginac, but maybe not (?) - in Sage 4.6 on PPC, I get\n\n```\nsage: psi(1,1/3)*log(3)\nlog(3)*psi(1, 1/3)\nsage: from sage.misc.citation import get_systems\nsage: get_systems('psi(1,1/3)*log(3)')\n['GMP']\n```\nThis machine doesn't have the new Maxima, so it's definitely unrelated.\n\nNonetheless, we can't ship a Sage with a failing doctest that we know about, except at great need - this is why I put needs work.   The very minor change in how Maxima grouped the coefficient of `x^3` created this.\n\nSo I recommend that we replace this doctest with something very similar which doesn't have this problem, and then open a new ticket for this issue.  Maybe something like\n\n```\nsage: taylor(gamma(1/4+x),x,0,3)\n```\nexcept I can't tell you what the Mac output is on this until tomorrow - maybe someone else can.  \n\nThe new ticket is #10282.",
    "created_at": "2010-11-17T02:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94299",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:46" align="right">comment:46</div>

Dan, thanks for that confirmation of the issue.

Replying to [@vbraun](#comment%3A44):
> I'm still confused what, if any, issue remains. This patch only touches the capture of the whole maxima output string, and not the parsing of expression. If maxima's output ordering has not changed yet some platform returns a different output sort order then this is an unrelated bug in the maxima interface.
> 

Actually, I'm pretty sure it's an unrelated bug in something else.  At first I thought Pynac/Ginac, but maybe not (?) - in Sage 4.6 on PPC, I get

```
sage: psi(1,1/3)*log(3)
log(3)*psi(1, 1/3)
sage: from sage.misc.citation import get_systems
sage: get_systems('psi(1,1/3)*log(3)')
['GMP']
```
This machine doesn't have the new Maxima, so it's definitely unrelated.

Nonetheless, we can't ship a Sage with a failing doctest that we know about, except at great need - this is why I put needs work.   The very minor change in how Maxima grouped the coefficient of `x^3` created this.

So I recommend that we replace this doctest with something very similar which doesn't have this problem, and then open a new ticket for this issue.  Maybe something like

```
sage: taylor(gamma(1/4+x),x,0,3)
```
except I can't tell you what the Mac output is on this until tomorrow - maybe someone else can.  

The new ticket is #10282.



---

archive/issue_comments_094300.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI installed Sage on a Mac:\n\nMachine Name:\tPower Mac G5\n\n\u00a0 Machine Model:\tPowerMac11,2\n\n\u00a0 CPU Type:\tPowerPC G5 (1.1)\n\n\n\nwith Mac OS X:\n\n\u00a0\u00a0System Version:\tMac OS X 10.4.11 (8S165)\n\n\u00a0 Kernel Version:\tDarwin 8.11.0\n\nfrom binary packages:\n\nhttp://www.sagemath.org/download-mac.html\n\nand using cp -R - A ... to a custom directory because I don't have admin rights.\n\nSo I got Sage 4.6.\n\nI ran Sage once.\n\nI then patched sage_scripts (downloaded spkg, uncompressed, hg qimport patch, hg qpush) and\u00a0installed it.\n\nI installed ecl-10.4 and maxima5.22.1 spkgs.\n\nI ran ./sage -b but got problem of paths, it was looking in /Users/Shared/sage/sage-4.6/ ...\n\nSo I moved my installation folder there and ./sage -b worked.\n\nI then ran ./sage -t \u00a0-long -force_lib devel/sage/sage/interfaces/maxima.py\n\nand everything was fine:\n\n\n\n```\ninit.sage does not exist ... creating\nsage -t -long -force_lib \"devel/sage/sage/interfaces/maxima.py\"\n         [53.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 53.8 seconds\n```\nI'll try to test on a SPARC machine with Solaris 10 soon.",
    "created_at": "2010-11-17T11:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94300",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:47" align="right">comment:47</div>

I installed Sage on a Mac:

Machine Name:	Power Mac G5

 Machine Model:	PowerMac11,2

 CPU Type:	PowerPC G5 (1.1)



with Mac OS X:

System Version:	Mac OS X 10.4.11 (8S165)

 Kernel Version:	Darwin 8.11.0

from binary packages:

http://www.sagemath.org/download-mac.html

and using cp -R - A ... to a custom directory because I don't have admin rights.

So I got Sage 4.6.

I ran Sage once.

I then patched sage_scripts (downloaded spkg, uncompressed, hg qimport patch, hg qpush) andinstalled it.

I installed ecl-10.4 and maxima5.22.1 spkgs.

I ran ./sage -b but got problem of paths, it was looking in /Users/Shared/sage/sage-4.6/ ...

So I moved my installation folder there and ./sage -b worked.

I then ran ./sage -t -long -force_lib devel/sage/sage/interfaces/maxima.py

and everything was fine:



```
init.sage does not exist ... creating
sage -t -long -force_lib "devel/sage/sage/interfaces/maxima.py"
         [53.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 53.8 seconds
```
I'll try to test on a SPARC machine with Solaris 10 soon.



---

archive/issue_comments_094301.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI'm currently running all long doctest on the Mac machine I have access to.\n\nThe Mac output for\u00a0taylor(gamma(1/4+x),x,0,3) is:\n\n```\nsage: taylor(gamma(1/4+x),x,0,3)\n-1/48*((12*(pi + 6*log(2))*euler_gamma^2 + pi^3 + 18*pi^2*log(2) + 8*euler_gamma^3 + 216*log(2)^3 + 12*(9*log(2)^2 + psi(1, 1/4))*pi + 6*(pi^2 + 12*pi*log(2) + 36*log(2)^2 + 4*psi(1, 1/4))*euler_gamma + 72*log(2)*psi(1, 1/4))*gamma(1/4) - 8*gamma(1/4)*psi(2, 1/4))*x^3 + 1/8*(4*(pi + 6*log(2))*euler_gamma + pi^2 + 12*pi*log(2) + 4*euler_gamma^2 + 36*log(2)^2 + 4*psi(1, 1/4))*x^2*gamma(1/4) - 1/2*(pi + 2*euler_gamma + 6*log(2))*x*gamma(1/4) + gamma(1/4)\n```\nOn Linux with latest alpha I get :\n\n```\nsage: taylor(gamma(1/4+x),x,0,3)\n-1/48*((12*(pi + 6*log(2))*euler_gamma^2 + pi^3 + 18*pi^2*log(2) + 8*euler_gamma^3 + 216*log(2)^3 + 12*(9*log(2)^2 + psi(1, 1/4))*pi + 6*(pi^2 + 12*pi*log(2) + 36*log(2)^2 + 4*psi(1, 1/4))*euler_gamma + 72*psi(1, 1/4)*log(2))*gamma(1/4) - 8*gamma(1/4)*psi(2, 1/4))*x^3 + 1/8*(4*(pi + 6*log(2))*euler_gamma + pi^2 + 12*pi*log(2) + 4*euler_gamma^2 + 36*log(2)^2 + 4*psi(1, 1/4))*x^2*gamma(1/4) - 1/2*(pi + 2*euler_gamma + 6*log(2))*x*gamma(1/4) + gamma(1/4)\n```\nwhich is not the same.Look at 72*...",
    "created_at": "2010-11-17T11:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94301",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:48" align="right">comment:48</div>

I'm currently running all long doctest on the Mac machine I have access to.

The Mac output fortaylor(gamma(1/4+x),x,0,3) is:

```
sage: taylor(gamma(1/4+x),x,0,3)
-1/48*((12*(pi + 6*log(2))*euler_gamma^2 + pi^3 + 18*pi^2*log(2) + 8*euler_gamma^3 + 216*log(2)^3 + 12*(9*log(2)^2 + psi(1, 1/4))*pi + 6*(pi^2 + 12*pi*log(2) + 36*log(2)^2 + 4*psi(1, 1/4))*euler_gamma + 72*log(2)*psi(1, 1/4))*gamma(1/4) - 8*gamma(1/4)*psi(2, 1/4))*x^3 + 1/8*(4*(pi + 6*log(2))*euler_gamma + pi^2 + 12*pi*log(2) + 4*euler_gamma^2 + 36*log(2)^2 + 4*psi(1, 1/4))*x^2*gamma(1/4) - 1/2*(pi + 2*euler_gamma + 6*log(2))*x*gamma(1/4) + gamma(1/4)
```
On Linux with latest alpha I get :

```
sage: taylor(gamma(1/4+x),x,0,3)
-1/48*((12*(pi + 6*log(2))*euler_gamma^2 + pi^3 + 18*pi^2*log(2) + 8*euler_gamma^3 + 216*log(2)^3 + 12*(9*log(2)^2 + psi(1, 1/4))*pi + 6*(pi^2 + 12*pi*log(2) + 36*log(2)^2 + 4*psi(1, 1/4))*euler_gamma + 72*psi(1, 1/4)*log(2))*gamma(1/4) - 8*gamma(1/4)*psi(2, 1/4))*x^3 + 1/8*(4*(pi + 6*log(2))*euler_gamma + pi^2 + 12*pi*log(2) + 4*euler_gamma^2 + 36*log(2)^2 + 4*psi(1, 1/4))*x^2*gamma(1/4) - 1/2*(pi + 2*euler_gamma + 6*log(2))*x*gamma(1/4) + gamma(1/4)
```
which is not the same.Look at 72*...



---

archive/issue_comments_094302.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\n> Machine Name:\tPower Mac G5\n> \u00a0\u00a0System Version:\tMac OS X 10.4.11 (8S165)\n> I then ran ./sage -t \u00a0-long -force_lib devel/sage/sage/interfaces/maxima.py\n\nWow, you got no timeout with that file?  Georg W. also said that he got this to pass... maybe it's the force lib option, I still get (unrelated to this ticket) timeouts...\n\nUnfortunately, I did not have any luck with relieving the timeouts on my machine in any file which actually uses Maxima.  With `SAGE_TIMEOUT_LONG=5000` I still get them on all those files.  The only difference is I have a G4, not a G5.  Maxima *does* work - I tried it in various ways - but it's amazingly slow to start up.  \n\nI'll try to look at this more later today.",
    "created_at": "2010-11-17T14:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94302",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:49" align="right">comment:49</div>

> Machine Name:	Power Mac G5
> System Version:	Mac OS X 10.4.11 (8S165)
> I then ran ./sage -t -long -force_lib devel/sage/sage/interfaces/maxima.py

Wow, you got no timeout with that file?  Georg W. also said that he got this to pass... maybe it's the force lib option, I still get (unrelated to this ticket) timeouts...

Unfortunately, I did not have any luck with relieving the timeouts on my machine in any file which actually uses Maxima.  With `SAGE_TIMEOUT_LONG=5000` I still get them on all those files.  The only difference is I have a G4, not a G5.  Maxima *does* work - I tried it in various ways - but it's amazingly slow to start up.  

I'll try to look at this more later today.



---

archive/issue_comments_094303.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@kcrisman](#comment%3A49):\n\n> Wow, you got no timeout with that file?  Georg W. also said that he got this to pass... maybe it's the force lib option, I still get (unrelated to this ticket) timeouts...\n\nIt also passes without the froce_lib option (in 52.1 seconds).\n\nHere is the output of  ./sage -t -long -force_lib devel/sage on my Debian with 4.6.1.alpha2, the timeouts are mentionned at http://groups.google.com/group/sage-devel/browse_thread/thread/09e4cef8c8558150# :\n\n```\n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/build/lib.linux-x86_64-2.6/sage/misc/sagedoc.py\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/build/lib.linux-x86_64-2.6/sage/homology/examples.py\" # Time out\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/build/sage/misc/sagedoc.py\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/build/sage/homology/examples.py\" # Time out\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/sage/misc/sagedoc.py\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/sage/homology/examples.py\" # Time out\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 sage -t -long -force_lib \"devel/sage/doc/en/numerical_sage/cvxopt.rst\"\nTotal time for all tests: 28820.2 seconds\n\n```\nAnd on the Mac with 4.6:\n\n```\n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t -long -force_lib \"devel/sage/build/lib.macosx-10.4-ppc-2.6/sage/calculus/calculus.py\"\n        sage -t -long -force_lib \"devel/sage/build/sage/calculus/calculus.py\"\n        sage -t -long -force_lib \"devel/sage/build/sage/plot/plot3d/transform.pyx\"\n        sage -t -long -force_lib \"devel/sage/sage/calculus/calculus.py\"\n        sage -t -long -force_lib \"devel/sage/sage/plot/plot3d/transform.pyx\"\nTotal time for all tests: 60789.1 seconds\n```",
    "created_at": "2010-11-18T11:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94303",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@kcrisman](#comment%3A49):

> Wow, you got no timeout with that file?  Georg W. also said that he got this to pass... maybe it's the force lib option, I still get (unrelated to this ticket) timeouts...

It also passes without the froce_lib option (in 52.1 seconds).

Here is the output of  ./sage -t -long -force_lib devel/sage on my Debian with 4.6.1.alpha2, the timeouts are mentionned at http://groups.google.com/group/sage-devel/browse_thread/thread/09e4cef8c8558150# :

```
----------------------------------------------------------------------
The following tests failed:


 sage -t -long -force_lib "devel/sage/build/lib.linux-x86_64-2.6/sage/misc/sagedoc.py"
 sage -t -long -force_lib "devel/sage/build/lib.linux-x86_64-2.6/sage/homology/examples.py" # Time out
 sage -t -long -force_lib "devel/sage/build/sage/misc/sagedoc.py"
 sage -t -long -force_lib "devel/sage/build/sage/homology/examples.py" # Time out
 sage -t -long -force_lib "devel/sage/sage/misc/sagedoc.py"
 sage -t -long -force_lib "devel/sage/sage/homology/examples.py" # Time out
 sage -t -long -force_lib "devel/sage/doc/en/numerical_sage/cvxopt.rst"
Total time for all tests: 28820.2 seconds

```
And on the Mac with 4.6:

```
----------------------------------------------------------------------
The following tests failed:


        sage -t -long -force_lib "devel/sage/build/lib.macosx-10.4-ppc-2.6/sage/calculus/calculus.py"
        sage -t -long -force_lib "devel/sage/build/sage/calculus/calculus.py"
        sage -t -long -force_lib "devel/sage/build/sage/plot/plot3d/transform.pyx"
        sage -t -long -force_lib "devel/sage/sage/calculus/calculus.py"
        sage -t -long -force_lib "devel/sage/sage/plot/plot3d/transform.pyx"
Total time for all tests: 60789.1 seconds
```



---

archive/issue_comments_094304.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nOkay, so the failures are the same as on mine *before* I add the two patches to the Maxima interface.  \n\nSummary:\n\n1. All Macs have some sort of multiplication transposition, so we will either have to simultaneously fix #10282 or find different doctests for those two examples (the taylor of gamma and the matrix in plot3d/transform.pyx).\n\n2. Debian and OpenSolaris seem ok.\n\n3. Other Linux/Solaris still needed?\n\n4. Finally, someone needs to actually review the content of the two Maxima interface change patches (one to Sage library, one to scripts library) and whether the spkgs do, in fact, have all properly changed (not that we don't believe the authors! just someone different needs to check them).\n\nI still am getting this weird behavior of timeouts on mine.  The problem seems to be restarting Maxima.  Once Maxima is started, timings are slow but normal for this computer:\n\n```\nsage: time integrate(x^2,x)\nCPU times: user 0.15 s, sys: 0.16 s, total: 0.31 s\nWall time: 134.04 s\n1/3*x^3\nsage: time integrate(x^2,x)\nCPU times: user 0.08 s, sys: 0.01 s, total: 0.09 s\nWall time: 0.83 s\n1/3*x^3\nsage: time integrate(x^2,x)\nCPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s\nWall time: 0.92 s\n1/3*x^3\n```\nBut I think the way doctests work is that things are restarted from function to function - is that right?\n\nI'm going to try to see what is going on with my computer, but if jpflori is ok with a very similar one, it shouldn't hold things up - unless there is a reason a G4 would be this much slower than a G5?  I'm going to try downloading 4.6.1.alpha1, replacing the spkgs with the new ones, and then building from scratch to see what happens.",
    "created_at": "2010-11-18T15:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94304",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:51" align="right">comment:51</div>

Okay, so the failures are the same as on mine *before* I add the two patches to the Maxima interface.  

Summary:

1. All Macs have some sort of multiplication transposition, so we will either have to simultaneously fix #10282 or find different doctests for those two examples (the taylor of gamma and the matrix in plot3d/transform.pyx).

2. Debian and OpenSolaris seem ok.

3. Other Linux/Solaris still needed?

4. Finally, someone needs to actually review the content of the two Maxima interface change patches (one to Sage library, one to scripts library) and whether the spkgs do, in fact, have all properly changed (not that we don't believe the authors! just someone different needs to check them).

I still am getting this weird behavior of timeouts on mine.  The problem seems to be restarting Maxima.  Once Maxima is started, timings are slow but normal for this computer:

```
sage: time integrate(x^2,x)
CPU times: user 0.15 s, sys: 0.16 s, total: 0.31 s
Wall time: 134.04 s
1/3*x^3
sage: time integrate(x^2,x)
CPU times: user 0.08 s, sys: 0.01 s, total: 0.09 s
Wall time: 0.83 s
1/3*x^3
sage: time integrate(x^2,x)
CPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s
Wall time: 0.92 s
1/3*x^3
```
But I think the way doctests work is that things are restarted from function to function - is that right?

I'm going to try to see what is going on with my computer, but if jpflori is ok with a very similar one, it shouldn't hold things up - unless there is a reason a G4 would be this much slower than a G5?  I'm going to try downloading 4.6.1.alpha1, replacing the spkgs with the new ones, and then building from scratch to see what happens.



---

archive/issue_comments_094305.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n> Nonetheless, we can't ship a Sage with a failing doctest that we know about, except at great need - this is why I put needs work.   The very minor change in how Maxima grouped the coefficient of `x^3` created this. So I recommend that we replace this doctest with something very similar which doesn't have this problem, and then open a new ticket for this issue.  Maybe something like ` sage: taylor(gamma(1/4+x),x,0,3) ` except I can't tell you what the Mac output is on this until tomorrow - maybe someone else can.   The new ticket is #10282.\n\nAs noted by Burcin in #10282 , it is related to pynac ordering and applying the patch I provided in #9880 gives me a consistent behavior on Mac and Linux:\n\n```\nsage: psi(1,1/3)*log(3)\nlog(3)*psi(1, 1/3)\n\n```\n(I order the functions according to their name in lexicographic order)\n\nHowever #9880 still needs a lot of work:\n\n- my patch must be reviewed\n\n- pynac must be updated\n\n- a lot of doctests will have to be fixed afterwards",
    "created_at": "2010-11-18T16:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94305",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:52" align="right">comment:52</div>

> Nonetheless, we can't ship a Sage with a failing doctest that we know about, except at great need - this is why I put needs work.   The very minor change in how Maxima grouped the coefficient of `x^3` created this. So I recommend that we replace this doctest with something very similar which doesn't have this problem, and then open a new ticket for this issue.  Maybe something like ` sage: taylor(gamma(1/4+x),x,0,3) ` except I can't tell you what the Mac output is on this until tomorrow - maybe someone else can.   The new ticket is #10282.

As noted by Burcin in #10282 , it is related to pynac ordering and applying the patch I provided in #9880 gives me a consistent behavior on Mac and Linux:

```
sage: psi(1,1/3)*log(3)
log(3)*psi(1, 1/3)

```
(I order the functions according to their name in lexicographic order)

However #9880 still needs a lot of work:

- my patch must be reviewed

- pynac must be updated

- a lot of doctests will have to be fixed afterwards



---

archive/issue_comments_094306.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nOkay, reverting the patches made no difference on the timing of starting Maxima, so maybe there is something wrong with Maxima itself on my computer... but it *does* allow some of the doctest files to actually pass.  Hmm...\n\nYup, I just saw that update on #10282.  So we have three options for this ticket:\n\nIgnore the Mac doctest failure as a known issue with an open ticket OR make the failing doctests optional based on platform until #9880 is reviewed and merged etc.  OR find similar doctests where the order doesn't matter.",
    "created_at": "2010-11-18T16:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94306",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:53" align="right">comment:53</div>

Okay, reverting the patches made no difference on the timing of starting Maxima, so maybe there is something wrong with Maxima itself on my computer... but it *does* allow some of the doctest files to actually pass.  Hmm...

Yup, I just saw that update on #10282.  So we have three options for this ticket:

Ignore the Mac doctest failure as a known issue with an open ticket OR make the failing doctests optional based on platform until #9880 is reviewed and merged etc.  OR find similar doctests where the order doesn't matter.



---

archive/issue_comments_094307.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@kcrisman](#comment%3A53):\n> Okay, reverting the patches made no difference on the timing of starting Maxima, so maybe there is something wrong with Maxima itself on my computer... but it *does* allow some of the doctest files to actually pass.  Hmm...\n\nEven weirder - testing a file with no long doctests, but which uses Maxima, passes without `-long` and times out with it.  WHAT?",
    "created_at": "2010-11-18T16:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94307",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@kcrisman](#comment%3A53):
> Okay, reverting the patches made no difference on the timing of starting Maxima, so maybe there is something wrong with Maxima itself on my computer... but it *does* allow some of the doctest files to actually pass.  Hmm...

Even weirder - testing a file with no long doctests, but which uses Maxima, passes without `-long` and times out with it.  WHAT?



---

archive/issue_comments_094308.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nOkay, after reverting to the previous ECL/Maxima on this machine, I get\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.14 s, sys: 0.14 s, total: 0.29 s\nWall time: 17.79 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.07 s, sys: 0.01 s, total: 0.08 s\nWall time: 0.20 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s\nWall time: 0.21 s\n1/4*x^4\n```\nSo Maxima is taking four times as long to do things, and the startup time is woefully long.  Is anyone else noticing a slowdown on Maxima via Sage this way with the new spkg?  I'd especially appreciate hearing from PPC OR Tiger users.  As it stands, this package makes it so slow it makes Maxima (and integration etc.) almost useless on this machine.",
    "created_at": "2010-11-22T13:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94308",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:55" align="right">comment:55</div>

Okay, after reverting to the previous ECL/Maxima on this machine, I get

```
sage: time integrate(x^3,x)
CPU times: user 0.14 s, sys: 0.14 s, total: 0.29 s
Wall time: 17.79 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.07 s, sys: 0.01 s, total: 0.08 s
Wall time: 0.20 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s
Wall time: 0.21 s
1/4*x^4
```
So Maxima is taking four times as long to do things, and the startup time is woefully long.  Is anyone else noticing a slowdown on Maxima via Sage this way with the new spkg?  I'd especially appreciate hearing from PPC OR Tiger users.  As it stands, this package makes it so slow it makes Maxima (and integration etc.) almost useless on this machine.



---

archive/issue_comments_094309.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nThe new maxima certainly comes with a bigger library; Its inevitable that it is somewhat slower in exchange for being better at integration. I don't know why startup is so slow on kcrisman's antique computer, but stracing the maxima startup shows that it thrashes around quite a lot in the `$SAGE_LOCAL/share/maxima/5.22.1/` directory tree. \n\nFor the record, Fedora 14 on a Thinkpad T410s Core i5:\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.03 s, sys: 0.01 s, total: 0.04 s\nWall time: 1.15 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.05 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.05 s\n1/4*x^4\n```\n\nI say we should press ahead and update maxima so that Sage compiles on Fedora 14. If the new maxima starts up slowly on your hardware then file a ticket and see if you can profile/fix it.",
    "created_at": "2010-11-23T04:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94309",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:56" align="right">comment:56</div>

The new maxima certainly comes with a bigger library; Its inevitable that it is somewhat slower in exchange for being better at integration. I don't know why startup is so slow on kcrisman's antique computer, but stracing the maxima startup shows that it thrashes around quite a lot in the `$SAGE_LOCAL/share/maxima/5.22.1/` directory tree. 

For the record, Fedora 14 on a Thinkpad T410s Core i5:

```
sage: time integrate(x^3,x)
CPU times: user 0.03 s, sys: 0.01 s, total: 0.04 s
Wall time: 1.15 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.05 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.05 s
1/4*x^4
```

I say we should press ahead and update maxima so that Sage compiles on Fedora 14. If the new maxima starts up slowly on your hardware then file a ticket and see if you can profile/fix it.



---

archive/issue_events_132154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-23T04:59:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132154"
}
```



---

archive/issue_events_132155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-11-23T04:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132155"
}
```



---

archive/issue_comments_094310.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nOn my [Trac macro QuadCore](https://trac.sagemath.org/wiki/WikiMacros#QuadCore-macro) running Debian, here are the timings for the new Maxima:\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s\nWall time: 1.49 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.06 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.06 s\n1/4*x^4\n\n```\nand with the old Maxima:\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.02 s, total: 0.03 s\nWall time: 1.42 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.04 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.04 s\n1/4*x^4\n\n```\nOn the Power G5 with the new Maxima:\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.04 s, sys: 0.06 s, total: 0.10 s\nWall time: 4.04 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.02 s, sys: 0.00 s, total: 0.02 s\nWall time: 0.03 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s\nWall time: 0.04 s\n1/4*x^4\n\n```\nand the old Maxima:\n\n```\nage: time integrate(x^3,x)\nCPU times: user 0.04 s, sys: 0.07 s, total: 0.10 s\nWall time: 4.87 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.02 s, sys: 0.00 s, total: 0.02 s\nWall time: 0.04 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s\nWall time: 0.04 s\n1/4*x^4\n\n```\nSo it was actually faster with the new one.\n\nI managed to update Ecl and Maxima on top of sage 4.5.1 on a Sunblade 1500 (SPARC with Solaris 10), but doctesting maxima.py timedout or died eating all the memory.",
    "created_at": "2010-11-23T12:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94310",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:57" align="right">comment:57</div>

On my [Trac macro QuadCore](https://trac.sagemath.org/wiki/WikiMacros#QuadCore-macro) running Debian, here are the timings for the new Maxima:

```
sage: time integrate(x^3,x)
CPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s
Wall time: 1.49 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.06 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.06 s
1/4*x^4

```
and with the old Maxima:

```
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.02 s, total: 0.03 s
Wall time: 1.42 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.04 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.04 s
1/4*x^4

```
On the Power G5 with the new Maxima:

```
sage: time integrate(x^3,x)
CPU times: user 0.04 s, sys: 0.06 s, total: 0.10 s
Wall time: 4.04 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.02 s, sys: 0.00 s, total: 0.02 s
Wall time: 0.03 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s
Wall time: 0.04 s
1/4*x^4

```
and the old Maxima:

```
age: time integrate(x^3,x)
CPU times: user 0.04 s, sys: 0.07 s, total: 0.10 s
Wall time: 4.87 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.02 s, sys: 0.00 s, total: 0.02 s
Wall time: 0.04 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.02 s, sys: 0.01 s, total: 0.03 s
Wall time: 0.04 s
1/4*x^4

```
So it was actually faster with the new one.

I managed to update Ecl and Maxima on top of sage 4.5.1 on a Sunblade 1500 (SPARC with Solaris 10), but doctesting maxima.py timedout or died eating all the memory.



---

archive/issue_comments_094311.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@vbraun](#comment%3A56):\n> The new maxima certainly comes with a bigger library; Its inevitable that it is somewhat slower in exchange for being better at integration. I don't know why startup is so slow on kcrisman's antique computer, but stracing the maxima startup shows that it thrashes around quite a lot in the `$SAGE_LOCAL/share/maxima/5.22.1/` directory tree. \n> I say we should press ahead and update maxima so that Sage compiles on Fedora 14. If the new maxima starts up slowly on your hardware then file a ticket and see if you can profile/fix it. \n\nOkay, but you'd still have to address the issue in Comment 52.  The best option there is finding similar doctests that don't have different orders, since #9880 isn't necessarily going to be merged in the immediate future (see above).",
    "created_at": "2010-11-23T15:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94311",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@vbraun](#comment%3A56):
> The new maxima certainly comes with a bigger library; Its inevitable that it is somewhat slower in exchange for being better at integration. I don't know why startup is so slow on kcrisman's antique computer, but stracing the maxima startup shows that it thrashes around quite a lot in the `$SAGE_LOCAL/share/maxima/5.22.1/` directory tree. 
> I say we should press ahead and update maxima so that Sage compiles on Fedora 14. If the new maxima starts up slowly on your hardware then file a ticket and see if you can profile/fix it. 

Okay, but you'd still have to address the issue in Comment 52.  The best option there is finding similar doctests that don't have different orders, since #9880 isn't necessarily going to be merged in the immediate future (see above).



---

archive/issue_comments_094312.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nOK lets mark the offending doctests `# random output` until #9880 is fixed. I'll attach a complimentary patch to #9880 that reverts `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`.",
    "created_at": "2010-11-24T01:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94312",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:59" align="right">comment:59</div>

OK lets mark the offending doctests `# random output` until #9880 is fixed. I'll attach a complimentary patch to #9880 that reverts `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`.



---

archive/issue_comments_094313.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nFor tickets with many patches and multiple spkg's like this one, it would be very helpful to write in the description precisely which patches have to be applied.",
    "created_at": "2010-11-26T08:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94313",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

For tickets with many patches and multiple spkg's like this one, it would be very helpful to write in the description precisely which patches have to be applied.



---

archive/issue_comments_094314.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@jdemeyer](#comment%3A60):\n> For tickets with many patches and multiple spkg's like this one, it would be very helpful to write in the description precisely which patches have to be applied.\n\nDave, as you have admin rights on trac, you could delete the obsolete / redundant https://github.com/sagemath/sage/files/ticket10187/sage-maxima.lisp.patch.gz . (It's a \"duplicate\" of https://github.com/sagemath/sage/files/ticket10187/trac_10187_sage-maxima_lisp.patch.gz .)",
    "created_at": "2010-11-26T09:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94314",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@jdemeyer](#comment%3A60):
> For tickets with many patches and multiple spkg's like this one, it would be very helpful to write in the description precisely which patches have to be applied.

Dave, as you have admin rights on trac, you could delete the obsolete / redundant https://github.com/sagemath/sage/files/ticket10187/sage-maxima.lisp.patch.gz . (It's a "duplicate" of https://github.com/sagemath/sage/files/ticket10187/trac_10187_sage-maxima_lisp.patch.gz .)



---

archive/issue_comments_094315.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,4 +19,12 @@\n \n * #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.\n \n-The updated maxima code seems to be more careful about signs which leads to doctest errors.\n+The updated maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):\n+\n+* `trac_10187_fix_easy_doctests.patch`\n+* `trac_10187_general_display_prefix_workaround.patch`\n+* `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`\n+\n+Finally, you need to patch `$SAGE_LOCAL/local/bin/sage-maxima.lisp` with\n+\n+* `trac_10187_sage-maxima_lisp.patch`\n``````\n",
    "created_at": "2010-11-26T09:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94315",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,4 +19,12 @@
 
 * #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.
 
-The updated maxima code seems to be more careful about signs which leads to doctest errors.
+The updated maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):
+
+* `trac_10187_fix_easy_doctests.patch`
+* `trac_10187_general_display_prefix_workaround.patch`
+* `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`
+
+Finally, you need to patch `$SAGE_LOCAL/local/bin/sage-maxima.lisp` with
+
+* `trac_10187_sage-maxima_lisp.patch`
``````




---

archive/issue_comments_094316.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nThe Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, \"incompatible\" changes.)\n\nBesides minor things (like unquoted `SAGE_LOCAL`), unsetting `MAKE` and using `make` is a very bad thing to do. This doesn't work as expected (or intended) with `MAKE=make -j` by the way, and prohibits the user to use different `make`s, or pass other options in it.\n\n(Currently `$SAGE_ROOT/spkg/install` does similar if `SAGE_PARALLEL_SPKG_BUILD` is not \"yes\", but that's equally wrong, and that code isn't executed when doing e.g. `./sage -i ...`.)\n\nAlso, I see no reason for not removing GMP from the ECL source tree, which more than halves the size of the ECL spkg. This requires just a trivial change to `configure` s.t. a different copy of `install-sh` is used. (See #9493. To me it's pointless to create yet another spkg and bump the patch level for such a change when we're already at it, at least if it's likely to get merged into a different Sage release, which then causes completely useless downloads and rebuilds on upgrades.)\n\nSuch a patch to `configure` is a very good use case for the newly included GNU `patch`, since `configure` is huge while the patch is tiny, so putting a patched copy in `patches/` would again - now really unnecessarily - increase the size of the resulting spkg.\n\nI'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.",
    "created_at": "2010-11-26T10:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94316",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:63" align="right">comment:63</div>

The Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, "incompatible" changes.)

Besides minor things (like unquoted `SAGE_LOCAL`), unsetting `MAKE` and using `make` is a very bad thing to do. This doesn't work as expected (or intended) with `MAKE=make -j` by the way, and prohibits the user to use different `make`s, or pass other options in it.

(Currently `$SAGE_ROOT/spkg/install` does similar if `SAGE_PARALLEL_SPKG_BUILD` is not "yes", but that's equally wrong, and that code isn't executed when doing e.g. `./sage -i ...`.)

Also, I see no reason for not removing GMP from the ECL source tree, which more than halves the size of the ECL spkg. This requires just a trivial change to `configure` s.t. a different copy of `install-sh` is used. (See #9493. To me it's pointless to create yet another spkg and bump the patch level for such a change when we're already at it, at least if it's likely to get merged into a different Sage release, which then causes completely useless downloads and rebuilds on upgrades.)

Such a patch to `configure` is a very good use case for the newly included GNU `patch`, since `configure` is huge while the patch is tiny, so putting a patched copy in `patches/` would again - now really unnecessarily - increase the size of the resulting spkg.

I'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.



---

archive/issue_comments_094317.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\n\n```\n  * Removed comments about removing the src/contrib/encodings directory,\n    as there is no such directory.\n```\n\n```sh\n~/Sage/spkgs/ecl-10.4.1$ ls src/contrib/encodings/\nATARIST.BIN    DOS-CP855.BIN  DOS-CP865.BIN  ISO-8859-10.BIN  ISO-8859-2.BIN  ISO-8859-9.BIN  tools.lisp          WINDOWS-CP1256.BIN\nCP-856.BIN     DOS-CP857.BIN  DOS-CP866.BIN  ISO-8859-11.BIN  ISO-8859-3.BIN  JISX0201.BIN    WINDOWS-CP1250.BIN  WINDOWS-CP1257.BIN\nDOS-CP437.BIN  DOS-CP860.BIN  DOS-CP869.BIN  ISO-8859-13.BIN  ISO-8859-4.BIN  JISX0208.BIN    WINDOWS-CP1251.BIN  WINDOWS-CP1258.BIN\nDOS-CP737.BIN  DOS-CP861.BIN  DOS-CP874.BIN  ISO-8859-14.BIN  ISO-8859-5.BIN  JISX0212.BIN    WINDOWS-CP1252.BIN  WINDOWS-CP932.BIN\nDOS-CP775.BIN  DOS-CP862.BIN  generate.lisp  ISO-8859-15.BIN  ISO-8859-6.BIN  KOI8-R.BIN      WINDOWS-CP1253.BIN  WINDOWS-CP936.BIN\nDOS-CP850.BIN  DOS-CP863.BIN  ISO-2022-JP    ISO-8859-16.BIN  ISO-8859-7.BIN  KOI8-U.BIN      WINDOWS-CP1254.BIN  WINDOWS-CP949.BIN\nDOS-CP852.BIN  DOS-CP864.BIN  ISO-2022-JP-1  ISO-8859-1.BIN   ISO-8859-8.BIN  SHIFT-JIS.BIN   WINDOWS-CP1255.BIN  WINDOWS-CP950.BIN\n```",
    "created_at": "2010-11-26T10:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94317",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:64" align="right">comment:64</div>


```
  * Removed comments about removing the src/contrib/encodings directory,
    as there is no such directory.
```

```sh
~/Sage/spkgs/ecl-10.4.1$ ls src/contrib/encodings/
ATARIST.BIN    DOS-CP855.BIN  DOS-CP865.BIN  ISO-8859-10.BIN  ISO-8859-2.BIN  ISO-8859-9.BIN  tools.lisp          WINDOWS-CP1256.BIN
CP-856.BIN     DOS-CP857.BIN  DOS-CP866.BIN  ISO-8859-11.BIN  ISO-8859-3.BIN  JISX0201.BIN    WINDOWS-CP1250.BIN  WINDOWS-CP1257.BIN
DOS-CP437.BIN  DOS-CP860.BIN  DOS-CP869.BIN  ISO-8859-13.BIN  ISO-8859-4.BIN  JISX0208.BIN    WINDOWS-CP1251.BIN  WINDOWS-CP1258.BIN
DOS-CP737.BIN  DOS-CP861.BIN  DOS-CP874.BIN  ISO-8859-14.BIN  ISO-8859-5.BIN  JISX0212.BIN    WINDOWS-CP1252.BIN  WINDOWS-CP932.BIN
DOS-CP775.BIN  DOS-CP862.BIN  generate.lisp  ISO-8859-15.BIN  ISO-8859-6.BIN  KOI8-R.BIN      WINDOWS-CP1253.BIN  WINDOWS-CP936.BIN
DOS-CP850.BIN  DOS-CP863.BIN  ISO-2022-JP    ISO-8859-16.BIN  ISO-8859-7.BIN  KOI8-U.BIN      WINDOWS-CP1254.BIN  WINDOWS-CP949.BIN
DOS-CP852.BIN  DOS-CP864.BIN  ISO-2022-JP-1  ISO-8859-1.BIN   ISO-8859-8.BIN  SHIFT-JIS.BIN   WINDOWS-CP1255.BIN  WINDOWS-CP950.BIN
```



---

archive/issue_comments_094318.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\n\n```\n  * Removed the 'patches' directory as there are no patches!\n```\n\n```sh\n~/Sage/spkgs/ecl-10.4.1$ ls -l patches/\nls: cannot access patches/: No such file or directory\n```\n\n```sh\n# Add a patch which works around a gcc bug on Solaris. Actually\n# the code is not standard C, but a GCC extension, which does\n# not work on Solaris, causing relocation issues - see \n# https://github.com/sagemath/sage/issues/9840\n# This is committed to the ECL trunk, so can be removed \n# whenever we update to a version of ECL newer than 10.4.1. \ncp patches/bytecodes.h src/src/h/bytecodes.h\n```",
    "created_at": "2010-11-26T11:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94318",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:65" align="right">comment:65</div>


```
  * Removed the 'patches' directory as there are no patches!
```

```sh
~/Sage/spkgs/ecl-10.4.1$ ls -l patches/
ls: cannot access patches/: No such file or directory
```

```sh
# Add a patch which works around a gcc bug on Solaris. Actually
# the code is not standard C, but a GCC extension, which does
# not work on Solaris, causing relocation issues - see 
# https://github.com/sagemath/sage/issues/9840
# This is committed to the ECL trunk, so can be removed 
# whenever we update to a version of ECL newer than 10.4.1. 
cp patches/bytecodes.h src/src/h/bytecodes.h
```



---

archive/issue_comments_094319.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nWhat is the correct way to force-disable parallel make, then?\n\nApart from that, do you have any other issue than the unquoted `SAGE_LOCAL` (which this ticked did not add) for the maxima spkg? I'm happy to fix \"minor things\", but at the very least you have to list them if you want them fixed.\n\nI don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk. Or, better yet, if you have the time then fix some real bugs...",
    "created_at": "2010-11-26T11:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94319",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:66" align="right">comment:66</div>

What is the correct way to force-disable parallel make, then?

Apart from that, do you have any other issue than the unquoted `SAGE_LOCAL` (which this ticked did not add) for the maxima spkg? I'm happy to fix "minor things", but at the very least you have to list them if you want them fixed.

I don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk. Or, better yet, if you have the time then fix some real bugs...



---

archive/issue_comments_094320.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThere are other flaws in ECL's `spkg-install`; also, user-specified `CFLAGS` shouldn't get overridden unless necessary. (`-O2` is appended rather than prepended.)",
    "created_at": "2010-11-26T11:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94320",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:67" align="right">comment:67</div>

There are other flaws in ECL's `spkg-install`; also, user-specified `CFLAGS` shouldn't get overridden unless necessary. (`-O2` is appended rather than prepended.)



---

archive/issue_comments_094321.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@vbraun](#comment%3A66):\n> What is the correct way to force-disable parallel make, then?\n\nAs long as we rely on a GNU `make`, the correct thing to do is\n\n```sh\nMAKE=\"$MAKE -j1\" # force sequential build (1 job)\n```\nOtherwise we'd have to test if the actual `$MAKE` understands that.\n\n> Apart from that, do you have any other issue than the unquoted `SAGE_LOCAL` (which this ticked did not add) for the maxima spkg? I'm happy to fix \"minor things\", but at the very least you have to list them if you want them fixed.\n\n:) I don't recall. A major clean-up could be done, but I won't insist on having it here.\n\n\n\n> I don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk.\n\nYes, but they accumulate. I'm not sure if upstream would make such a patch.\n\nBtw, it's more than 2 MB of the spkg, 13 MB uncompressed.\n\n\"Maintaining\" a real patch is trivial. It will still apply or not, in which case an error message is given. The patch itself is also trivial.\n\n> Or, better yet, if you have the time then fix some real bugs.",
    "created_at": "2010-11-26T11:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94321",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@vbraun](#comment%3A66):
> What is the correct way to force-disable parallel make, then?

As long as we rely on a GNU `make`, the correct thing to do is

```sh
MAKE="$MAKE -j1" # force sequential build (1 job)
```
Otherwise we'd have to test if the actual `$MAKE` understands that.

> Apart from that, do you have any other issue than the unquoted `SAGE_LOCAL` (which this ticked did not add) for the maxima spkg? I'm happy to fix "minor things", but at the very least you have to list them if you want them fixed.

:) I don't recall. A major clean-up could be done, but I won't insist on having it here.



> I don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk.

Yes, but they accumulate. I'm not sure if upstream would make such a patch.

Btw, it's more than 2 MB of the spkg, 13 MB uncompressed.

"Maintaining" a real patch is trivial. It will still apply or not, in which case an error message is given. The patch itself is also trivial.

> Or, better yet, if you have the time then fix some real bugs.



---

archive/issue_comments_094322.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@nexttime](#comment%3A68):\n> Replying to [@vbraun](#comment%3A66):\n> > I don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk.\n> \n> \n> Yes, but they accumulate. I'm not sure if upstream would make such a patch.\n> \n> Btw, it's more than 2 MB of the spkg, 13 MB uncompressed.\n> \n> \"Maintaining\" a real patch is trivial. It will still apply or not, in which case an error message is given. The patch itself is also trivial.\n\nP.S.: If someone fears `patch`, a trivial alternative is to simply keep the only file from there `configure` uses, which is a redundant copy anyway, so one could even create a symbolic link to one of the other instances.\n\n```sh\n~/Sage/spkgs/ecl-10.4.1$ find . -name install-sh -exec head -v {} \\;\n==> ./src/src/gc/install-sh <==\n#!/bin/sh\n#\n# install - install a program, script, or datafile\n# This comes from X11R5 (mit/util/scripts/install.sh).\n#\n# Copyright 1991 by the Massachusetts Institute of Technology\n#\n# Permission to use, copy, modify, distribute, and sell this software and its\n# documentation for any purpose is hereby granted without fee, provided that\n# the above copyright notice appear in all copies and that both that\n==> ./src/src/gc/libatomic_ops-1.2/install-sh <==\n#!/bin/sh\n# install - install a program, script, or datafile\n\nscriptversion=2005-05-14.22\n\n# This originates from X11R5 (mit/util/scripts/install.sh), which was\n# later released in X11R6 (xc/config/util/install.sh) with the\n# following copyright and license.\n#\n# Copyright (C) 1994 X Consortium\n==> ./src/src/gmp/install-sh <==\n#!/bin/sh\n# install - install a program, script, or datafile\n\nscriptversion=2004-04-01.17\n\n# This originates from X11R5 (mit/util/scripts/install.sh), which was\n# later released in X11R6 (xc/config/util/install.sh) with the\n# following copyright and license.\n#\n# Copyright (C) 1994 X Consortium\n```",
    "created_at": "2010-11-26T12:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94322",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@nexttime](#comment%3A68):
> Replying to [@vbraun](#comment%3A66):
> > I don't think that saving 1 MB is good enough a reason to justify patching ecl's `configure` and maintaining that patch in future versions. If you want to save space then there are much bigger spkgs that could be shrunk.
> 
> 
> Yes, but they accumulate. I'm not sure if upstream would make such a patch.
> 
> Btw, it's more than 2 MB of the spkg, 13 MB uncompressed.
> 
> "Maintaining" a real patch is trivial. It will still apply or not, in which case an error message is given. The patch itself is also trivial.

P.S.: If someone fears `patch`, a trivial alternative is to simply keep the only file from there `configure` uses, which is a redundant copy anyway, so one could even create a symbolic link to one of the other instances.

```sh
~/Sage/spkgs/ecl-10.4.1$ find . -name install-sh -exec head -v {} \;
==> ./src/src/gc/install-sh <==
#!/bin/sh
#
# install - install a program, script, or datafile
# This comes from X11R5 (mit/util/scripts/install.sh).
#
# Copyright 1991 by the Massachusetts Institute of Technology
#
# Permission to use, copy, modify, distribute, and sell this software and its
# documentation for any purpose is hereby granted without fee, provided that
# the above copyright notice appear in all copies and that both that
==> ./src/src/gc/libatomic_ops-1.2/install-sh <==
#!/bin/sh
# install - install a program, script, or datafile

scriptversion=2005-05-14.22

# This originates from X11R5 (mit/util/scripts/install.sh), which was
# later released in X11R6 (xc/config/util/install.sh) with the
# following copyright and license.
#
# Copyright (C) 1994 X Consortium
==> ./src/src/gmp/install-sh <==
#!/bin/sh
# install - install a program, script, or datafile

scriptversion=2004-04-01.17

# This originates from X11R5 (mit/util/scripts/install.sh), which was
# later released in X11R6 (xc/config/util/install.sh) with the
# following copyright and license.
#
# Copyright (C) 1994 X Consortium
```



---

archive/issue_comments_094323.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nWith the two new spkgs and all four patches applied, I got:\n\n```\nsage -t  -long -force_lib devel/sage/sage/modular/modform/ambient.py\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n\n\t [1800.1 s]\n \n----------------------------------------------------------------------\n\nThe following tests failed:\n\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/r.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/modform/ambient.py # Time out\n----------------------------------------------------------------------\nTotal time for all tests: 3619.8 seconds\nmake: *** [ptestlong] Error 192\n```\n(Sage 4.6.1.alpha2 with MPIR 2.1.3.p1 and [GMP-]ECM 6.3.p2, Ubuntu 10.04 x86_64)\n\nRerunning the tests individually, everything passes:\n\n```sh\n~/Sage/sage-4.6.1.alpha2/devel/sage-10187$ ../../sage -t -long -force_lib sage/interfaces/r.py\nsage -t -long -force_lib \"devel/sage-10187/sage/interfaces/r.py\"\n\t [23.5 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 23.5 seconds\n~/Sage/sage-4.6.1.alpha2/devel/sage-10187$ ../../sage -t -long -force_lib sage/modular/modform/ambient.py\nsage -t -long -force_lib \"devel/sage-10187/sage/modular/modform/ambient.py\"\n\t [5.5 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 5.5 seconds\n```\n\nI've run `ptestlong` many times on that installation (before testing #10187) without any errors... Quite weird.",
    "created_at": "2010-11-26T13:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94323",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:70" align="right">comment:70</div>

With the two new spkgs and all four patches applied, I got:

```
sage -t  -long -force_lib devel/sage/sage/modular/modform/ambient.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

	 [1800.1 s]
 
----------------------------------------------------------------------

The following tests failed:

	sage -t  -long -force_lib devel/sage/sage/interfaces/r.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/modform/ambient.py # Time out
----------------------------------------------------------------------
Total time for all tests: 3619.8 seconds
make: *** [ptestlong] Error 192
```
(Sage 4.6.1.alpha2 with MPIR 2.1.3.p1 and [GMP-]ECM 6.3.p2, Ubuntu 10.04 x86_64)

Rerunning the tests individually, everything passes:

```sh
~/Sage/sage-4.6.1.alpha2/devel/sage-10187$ ../../sage -t -long -force_lib sage/interfaces/r.py
sage -t -long -force_lib "devel/sage-10187/sage/interfaces/r.py"
	 [23.5 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 23.5 seconds
~/Sage/sage-4.6.1.alpha2/devel/sage-10187$ ../../sage -t -long -force_lib sage/modular/modform/ambient.py
sage -t -long -force_lib "devel/sage-10187/sage/modular/modform/ambient.py"
	 [5.5 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 5.5 seconds
```

I've run `ptestlong` many times on that installation (before testing #10187) without any errors... Quite weird.



---

archive/issue_comments_094324.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@nexttime](#comment%3A70):\n> The following tests failed:\n> \n> \tsage -t  -long -force_lib devel/sage/sage/interfaces/r.py # 1 doctests failed\n\nThis is probably #9970.",
    "created_at": "2010-11-26T14:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94324",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@nexttime](#comment%3A70):
> The following tests failed:
> 
> 	sage -t  -long -force_lib devel/sage/sage/interfaces/r.py # 1 doctests failed

This is probably #9970.



---

archive/issue_comments_094325.json:
```json
{
    "body": "Attachment: **[10187-remove-encodings-and-solaris-header.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-remove-encodings-and-solaris-header.patch.gz)**\n\nRemove the comment about not removing the 'endcodings' directory, as it should have been remove.d Removed attempt to patch on Solaris, as the patch did not work. This patch is ror review  purposes only, as the changes are in ecl-10.4.1.spkg",
    "created_at": "2010-11-26T14:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94325",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[10187-remove-encodings-and-solaris-header.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-remove-encodings-and-solaris-header.patch.gz)**

Remove the comment about not removing the 'endcodings' directory, as it should have been remove.d Removed attempt to patch on Solaris, as the patch did not work. This patch is ror review  purposes only, as the changes are in ecl-10.4.1.spkg



---

archive/issue_comments_094326.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@nexttime](#comment%3A63):\n> The Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, \"incompatible\" changes.)\n\nA point that needs to be born in mind is that whilst the Maxima package may not be perfect (I've not looked myself), a failure to update ECL and Maxima will mean Sage will not build on the latest version of Fedora, which is the second most popular linux distro. So I feel there is some argument here for possibly accepting a package that could be improved. (I say this, despite having no involvement whatsoever in updating the Maxima package). But ECL and Maxima need to done together. \n\n* I've removed the src/contrib/encodings/ directory in the ECL package, and corrected comments in SPKG.txt about this. \n* I've removed the `cp patches/bytecodes.h src/src/h/bytecodes.h` in the ECL package, along iwth the comments attached to why the copy was being made. (Basically the patch suggested by the ECL developer did not work on the latest stable ECL - only on a CVS snapshot). \n* I've updated the ecl-10.4.1.spkg. The changes should be totally harmless - a copy which would never have occured, some changes of comments and the removal of some unused files. The md5 checksum should be `7a0d66ee152b847009b23b1dbbfeb75d`\n\n> Such a patch to `configure` is a very good use case for the newly included GNU `patch`, since `configure` is huge while the patch is tiny, so putting a patched copy in `patches/` would again - now really unnecessarily - increase the size of the resulting spkg.\n\nAgreed, but it would be unwise to start using GNU patch here for several reasons. \n* We have not agreed on how its best used (that's the subject of #9419)\n* Patch is not in any stable release of Sage. It would be unwise to switch to using it extensively just now. \n* Robert Bradshaw stated we should not mix use the use of `patch` and `cp` in the same package. I'm not sure if I agree with that or not. I can see his logic, though I can see it could be an error prone process converting all the cp's to patches. \n\n> I'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.\n\nI'm not aware of any. \n\nDave",
    "created_at": "2010-11-26T15:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94326",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@nexttime](#comment%3A63):
> The Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, "incompatible" changes.)

A point that needs to be born in mind is that whilst the Maxima package may not be perfect (I've not looked myself), a failure to update ECL and Maxima will mean Sage will not build on the latest version of Fedora, which is the second most popular linux distro. So I feel there is some argument here for possibly accepting a package that could be improved. (I say this, despite having no involvement whatsoever in updating the Maxima package). But ECL and Maxima need to done together. 

* I've removed the src/contrib/encodings/ directory in the ECL package, and corrected comments in SPKG.txt about this. 
* I've removed the `cp patches/bytecodes.h src/src/h/bytecodes.h` in the ECL package, along iwth the comments attached to why the copy was being made. (Basically the patch suggested by the ECL developer did not work on the latest stable ECL - only on a CVS snapshot). 
* I've updated the ecl-10.4.1.spkg. The changes should be totally harmless - a copy which would never have occured, some changes of comments and the removal of some unused files. The md5 checksum should be `7a0d66ee152b847009b23b1dbbfeb75d`

> Such a patch to `configure` is a very good use case for the newly included GNU `patch`, since `configure` is huge while the patch is tiny, so putting a patched copy in `patches/` would again - now really unnecessarily - increase the size of the resulting spkg.

Agreed, but it would be unwise to start using GNU patch here for several reasons. 
* We have not agreed on how its best used (that's the subject of #9419)
* Patch is not in any stable release of Sage. It would be unwise to switch to using it extensively just now. 
* Robert Bradshaw stated we should not mix use the use of `patch` and `cp` in the same package. I'm not sure if I agree with that or not. I can see his logic, though I can see it could be an error prone process converting all the cp's to patches. 

> I'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.

I'm not aware of any. 

Dave



---

archive/issue_comments_094327.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nI've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.",
    "created_at": "2010-11-26T15:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94327",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:73" align="right">comment:73</div>

I've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.



---

archive/issue_comments_094328.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A72):\n> Replying to [@nexttime](#comment%3A63):\n> > The Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, \"incompatible\" changes.)\n> \n> \n> A point that needs to be born in mind is that whilst the Maxima package may not be perfect (I've not looked myself), a failure to update ECL and Maxima will mean Sage will not build on the latest version of Fedora, which is the second most popular linux distro. So I feel there is some argument here for possibly accepting a package that could be improved. (I say this, despite having no involvement whatsoever in updating the Maxima package). But ECL and Maxima need to done together.\n\nIf there's a chance of getting it into 4.6.1 (and the authors are willing to open follow-up tickets ;-) ), yes.\nI'm not the release manager, but other spkg updates / changes have been postponed to Sage 4.6.2. Clearly Maxima is also a \"central\" package in Sage, so any upgrade carries the risk to break potentially a lot, or at least more than other spkgs hardly used within Sage.\n\n\n\n\n> > I'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.\n\n> I'm not aware of any.\n\nCertainly not... :D\n\n(Otherwise I would have expected you to incorporate them if necessary. But I see your ECL package is \"fresh\"; I first thought you just took some \"old\" one since there were not many comments on it on the ticket, and no patch or diff attached.)",
    "created_at": "2010-11-26T16:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94328",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@sagetrac-drkirkby](#comment%3A72):
> Replying to [@nexttime](#comment%3A63):
> > The Maxima spkg IMHO needs work; not sure if on another ticket. (I guess the authors will say yes; I personally don't like postponing spkg changes very much, since this tends to make them never happen, or leads to concurrent, "incompatible" changes.)
> 
> 
> A point that needs to be born in mind is that whilst the Maxima package may not be perfect (I've not looked myself), a failure to update ECL and Maxima will mean Sage will not build on the latest version of Fedora, which is the second most popular linux distro. So I feel there is some argument here for possibly accepting a package that could be improved. (I say this, despite having no involvement whatsoever in updating the Maxima package). But ECL and Maxima need to done together.

If there's a chance of getting it into 4.6.1 (and the authors are willing to open follow-up tickets ;-) ), yes.
I'm not the release manager, but other spkg updates / changes have been postponed to Sage 4.6.2. Clearly Maxima is also a "central" package in Sage, so any upgrade carries the risk to break potentially a lot, or at least more than other spkgs hardly used within Sage.




> > I'm not sure if there are other changes from the previous attempt to update ECL not made in the current spkg here.

> I'm not aware of any.

Certainly not... :D

(Otherwise I would have expected you to incorporate them if necessary. But I see your ECL package is "fresh"; I first thought you just took some "old" one since there were not many comments on it on the ticket, and no patch or diff attached.)



---

archive/issue_comments_094329.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@vbraun](#comment%3A73):\n> I've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.\n\nWell, if you redefine `MAKE` rather than unsetting it, you should also use it... (i.e. call `$MAKE` instead of `make`).",
    "created_at": "2010-11-26T16:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94329",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@vbraun](#comment%3A73):
> I've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.

Well, if you redefine `MAKE` rather than unsetting it, you should also use it... (i.e. call `$MAKE` instead of `make`).



---

archive/issue_comments_094330.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@nexttime](#comment%3A75):\n> Replying to [@vbraun](#comment%3A73):\n> > I've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.\n> \n> \n> Well, if you redefine `MAKE` rather than unsetting it, you should also use it... (i.e. call `$MAKE` instead of `make`).\n\nOf course you could also just do\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -14,8 +14,6 @@\n \n cd src/\n \n-unset MAKE  # this can break things\n-\n check_error() {\n     if [ $? -ne 0 ]; then\n \techo \"***********************************************************\"\n@@ -35,13 +33,13 @@\n    echo \"you will not be able to see the output of the build\"\n    echo \"as it occurs.  Don't worry, the build process did\"\n    echo \"not hang.\"\n-   make >> \"$CUR\"/output.log  2>> \"$CUR\"/error.log\n+   $MAKE -j1 >> \"$CUR\"/output.log  2>> \"$CUR\"/error.log\n else\n-   make\n+   $MAKE -j1\n fi\n check_error \"Failed to make Maxima.\" \n \n-make install\n+$MAKE -j1 install\n check_error \"Failed to install Maxima.\"\n \n echo \"creating wrapper script with disabled readline\"\n```\n\nP.S.: Did anybody recently test where and if parallel Maxima builds or installs fail? Building it sequentially takes a fair amount of time...",
    "created_at": "2010-11-26T16:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94330",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@nexttime](#comment%3A75):
> Replying to [@vbraun](#comment%3A73):
> > I've updated the maxima spkg to address the quotes and the MAKE issue. For review purposes see the `maxima-5.22.1.patch`.
> 
> 
> Well, if you redefine `MAKE` rather than unsetting it, you should also use it... (i.e. call `$MAKE` instead of `make`).

Of course you could also just do

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -14,8 +14,6 @@
 
 cd src/
 
-unset MAKE  # this can break things
-
 check_error() {
     if [ $? -ne 0 ]; then
 	echo "***********************************************************"
@@ -35,13 +33,13 @@
    echo "you will not be able to see the output of the build"
    echo "as it occurs.  Don't worry, the build process did"
    echo "not hang."
-   make >> "$CUR"/output.log  2>> "$CUR"/error.log
+   $MAKE -j1 >> "$CUR"/output.log  2>> "$CUR"/error.log
 else
-   make
+   $MAKE -j1
 fi
 check_error "Failed to make Maxima." 
 
-make install
+$MAKE -j1 install
 check_error "Failed to install Maxima."
 
 echo "creating wrapper script with disabled readline"
```

P.S.: Did anybody recently test where and if parallel Maxima builds or installs fail? Building it sequentially takes a fair amount of time...



---

archive/issue_comments_094331.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nFixed the `make->$MAKE`, too. Too much jet lag ;-)\n\nI haven't tried if parallel build suddenly works. But then, even if it were to compile in parallel on my machine, what do we learn?",
    "created_at": "2010-11-26T16:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94331",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:77" align="right">comment:77</div>

Fixed the `make->$MAKE`, too. Too much jet lag ;-)

I haven't tried if parallel build suddenly works. But then, even if it were to compile in parallel on my machine, what do we learn?



---

archive/issue_comments_094332.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@vbraun](#comment%3A77):\n> I haven't tried if parallel build suddenly works. But then, even if it were to compile in parallel on my machine, what do we learn?\n\nNeed not be suddenly.\n\nIf e.g. just `make install` fails with multiple jobs, we could just do `$MAKE -j1 install`.\n\nAlso, failures might be limited to the OS (e.g. MacOS X), in which case we shouldn't disable parallel builds on all platforms.\n\nIf parallel builds or installs just non-deterministically fail in, say, 5-10%, it would IMHO be acceptable to enable them though, since on a failure one simply has to rerun `make` or `./sage -i ...`.",
    "created_at": "2010-11-26T17:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94332",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@vbraun](#comment%3A77):
> I haven't tried if parallel build suddenly works. But then, even if it were to compile in parallel on my machine, what do we learn?

Need not be suddenly.

If e.g. just `make install` fails with multiple jobs, we could just do `$MAKE -j1 install`.

Also, failures might be limited to the OS (e.g. MacOS X), in which case we shouldn't disable parallel builds on all platforms.

If parallel builds or installs just non-deterministically fail in, say, 5-10%, it would IMHO be acceptable to enable them though, since on a failure one simply has to rerun `make` or `./sage -i ...`.



---

archive/issue_comments_094333.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nLooks as if enabling parallel make (in Maxima) doesn't make any difference, so rather a non-issue.",
    "created_at": "2010-11-26T17:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94333",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:79" align="right">comment:79</div>

Looks as if enabling parallel make (in Maxima) doesn't make any difference, so rather a non-issue.



---

archive/issue_comments_094334.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@nexttime](#comment%3A79):\n> Looks as if enabling parallel make (in Maxima) doesn't make any difference, so rather a non-issue.\n\nI can't do it now, but later I will try my old trick of building it 1000 times, inserting random delays before invoking gcc. I don't think a few]build in parallel proves very much. \n\nIt took:\n\n```\nreal    9m0.386s\nuser    5m4.518s\nsys     0m43.198s\nSuccessfully installed maxima-5.22.1\n```\n\nso I guess it would take about 6 minutes to build serially. So we will see see how long it takes to build in parallel and so how practical it is to test it 100 times or 1000 times. \n\nDave \n\nDave\n\n\n\n\n\nDave",
    "created_at": "2010-11-26T19:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94334",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@nexttime](#comment%3A79):
> Looks as if enabling parallel make (in Maxima) doesn't make any difference, so rather a non-issue.

I can't do it now, but later I will try my old trick of building it 1000 times, inserting random delays before invoking gcc. I don't think a few]build in parallel proves very much. 

It took:

```
real    9m0.386s
user    5m4.518s
sys     0m43.198s
Successfully installed maxima-5.22.1
```

so I guess it would take about 6 minutes to build serially. So we will see see how long it takes to build in parallel and so how practical it is to test it 100 times or 1000 times. 

Dave 

Dave





Dave



---

archive/issue_events_132156.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-26T23:18:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132156"
}
```



---

archive/issue_events_132157.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-26T23:18:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132157"
}
```



---

archive/issue_comments_094335.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,16 @@\n Please update ecl and maxima to the newest upstream release. Sage packages are here:\n \n+It's unsafe to build ECL in parallel, but it would appear that Maxima can be build in parallel, so reducing the build time. Updated versions of ECL and Maxima can be found here:\n+\n http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg\n+http://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg\n+\n+\n+(A version, which does not build in parallel can be found at \n http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg\n+but hopefully the parallel version is OK and will build faster).\n \n-Note that you cannot upgrade one without the other; Both need to be upgraded simultaneously or build will fail.\n+Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.\n \n Relevant tickets for ecl:\n \n``````\n",
    "created_at": "2010-11-26T23:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94335",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,16 @@
 Please update ecl and maxima to the newest upstream release. Sage packages are here:
 
+It's unsafe to build ECL in parallel, but it would appear that Maxima can be build in parallel, so reducing the build time. Updated versions of ECL and Maxima can be found here:
+
 http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg
+http://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg
+
+
+(A version, which does not build in parallel can be found at 
 http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg
+but hopefully the parallel version is OK and will build faster).
 
-Note that you cannot upgrade one without the other; Both need to be upgraded simultaneously or build will fail.
+Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.
 
 Relevant tickets for ecl:
 
``````




---

archive/issue_comments_094336.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@nexttime](#comment%3A78):\n \n> If parallel builds or installs just non-deterministically fail in, say, 5-10%, it would IMHO be acceptable to enable them though, since on a failure one simply has to rerun `make` or `./sage -i ...`.\n\nI personally think it would be unwise to enable parallel builds unless we are confident they work reliably on every platform. It's conceivable a file may not be written fully, yet processed in some way, leading to undefined behavior. \n\nI've asked on the Maxima mailing list if parallel builds are OK or not. So far there is no reply. \n\nI've started a build of Maxima, inserting a random delay between 0 and 1 second before invoking gcc. The problem is, Maxima is now taking 11 and a half minutes to build on my machine. \n\n```\nreal    11m33.576s\nuser    3m22.703s\nsys     0m29.970s\n```\n\nas obviously delaying gcc on average by 500 ms slows down the build. So far it has only built twice, but both times it was OK. \n\nI'll build a few more copies of Sage, then test Maxima on them too, since testing this even 100 times is going to take 19 hours. \n\nI've put to needs info, since I think we need to verify if parallel builds are ok or not. \n\nA new package, with parallel builds enabled, can be found at \n\nhttp://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg\n\nDave",
    "created_at": "2010-11-26T23:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94336",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@nexttime](#comment%3A78):
 
> If parallel builds or installs just non-deterministically fail in, say, 5-10%, it would IMHO be acceptable to enable them though, since on a failure one simply has to rerun `make` or `./sage -i ...`.

I personally think it would be unwise to enable parallel builds unless we are confident they work reliably on every platform. It's conceivable a file may not be written fully, yet processed in some way, leading to undefined behavior. 

I've asked on the Maxima mailing list if parallel builds are OK or not. So far there is no reply. 

I've started a build of Maxima, inserting a random delay between 0 and 1 second before invoking gcc. The problem is, Maxima is now taking 11 and a half minutes to build on my machine. 

```
real    11m33.576s
user    3m22.703s
sys     0m29.970s
```

as obviously delaying gcc on average by 500 ms slows down the build. So far it has only built twice, but both times it was OK. 

I'll build a few more copies of Sage, then test Maxima on them too, since testing this even 100 times is going to take 19 hours. 

I've put to needs info, since I think we need to verify if parallel builds are ok or not. 

A new package, with parallel builds enabled, can be found at 

http://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg

Dave



---

archive/issue_comments_094337.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,11 @@\n Please update ecl and maxima to the newest upstream release. Sage packages are here:\n \n-It's unsafe to build ECL in parallel, but it would appear that Maxima can be build in parallel, so reducing the build time. Updated versions of ECL and Maxima can be found here:\n+It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:\n \n http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg\n-http://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg\n \n \n-(A version, which does not build in parallel can be found at \n http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg\n-but hopefully the parallel version is OK and will build faster).\n \n Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.\n \n``````\n",
    "created_at": "2010-11-26T23:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94337",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,11 @@
 Please update ecl and maxima to the newest upstream release. Sage packages are here:
 
-It's unsafe to build ECL in parallel, but it would appear that Maxima can be build in parallel, so reducing the build time. Updated versions of ECL and Maxima can be found here:
+It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:
 
 http://boxen.math.washington.edu/home/kirkby/patches/ecl-10.4.1.spkg
-http://boxen.math.washington.edu/home/kirkby/patches/maxima-5.22.1.spkg
 
 
-(A version, which does not build in parallel can be found at 
 http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg
-but hopefully the parallel version is OK and will build faster).
 
 Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.
 
``````




---

archive/issue_events_132158.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-26T23:58:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132158"
}
```



---

archive/issue_events_132159.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-26T23:58:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132159"
}
```



---

archive/issue_comments_094338.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI tried to build Maxima in parallel a number of times. It failed once with the following, so I think it is unwise to attempt a parallel build. \n\nThis was without any random delays before invoking gcc, but on a heavily loaded system. \n\nWe should use http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg and **not** my parallel version. \n\n```\n/usr/bin/ginstall -c -m 644 maxima-index.lisp \"/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima-index.lisp\"\nmkdir: /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html: [File exists]\nmake[6]: *** [install-maxima-html] Error 1\nmake[6]: *** Waiting for unfinished jobs....\n /usr/bin/ginstall -c -m 644 ./figures/contour1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour1.gif\n /usr/bin/ginstall -c -m 644 ./figures/contour2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour2.gif\n /usr/bin/ginstall -c -m 644 ./figures/contour3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour3.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics1.gif\n /usr/bin/ginstall -c -m 644 './maxima.info' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info'\n /usr/bin/ginstall -c -m 644 './maxima.info-1' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-1'\n /usr/bin/ginstall -c -m 644 ./figures/dynamics2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics2.gif\n /usr/bin/ginstall -c -m 644 './maxima.info-2' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-2'\n /usr/bin/ginstall -c -m 644 ./figures/dynamics3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics3.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics4.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics5.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics6.gif\n /usr/bin/ginstall -c -m 644 './maxima.info-3' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-3'\n /usr/bin/ginstall -c -m 644 ./figures/dynamics7.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics7.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics8.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics8.gif\n install-info --info-dir='/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info'\n /usr/bin/ginstall -c -m 644 ./figures/dynamics9.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics9.gif\n /usr/bin/ginstall -c -m 644 ./figures/dynamics10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics10.gif\n /usr/bin/ginstall -c -m 644 ./figures/implicit_plot.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/implicit_plot.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf1.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf2.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf3.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf4.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf5.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotdf6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf6.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting1.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting2.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting3.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting4.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting5.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting6.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting7.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting7.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting8.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting8.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting9.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting9.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting10.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting11.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting11.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting12.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting12.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting13.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting13.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting14.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting14.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting15.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting15.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting16.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting16.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting17.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting17.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting18.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting18.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting19.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting19.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting20.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting20.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting21.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting21.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting22.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting22.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting23.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting23.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting24.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting24.gif\n /usr/bin/ginstall -c -m 644 ./figures/plotting25.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting25.gif\n /usr/bin/ginstall -c -m 644 ./figures/orthopoly1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/orthopoly1.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs01.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs01.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs02.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs02.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs03.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs03.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs04.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs04.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs05.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs05.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs06.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs06.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs07.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs07.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs08.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs08.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs09.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs09.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs10.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs11.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs11.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs12.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs12.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs13.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs13.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs14.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs14.gif\n /usr/bin/ginstall -c -m 644 ./figures/graphs15.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs15.gif\n /usr/bin/ginstall -c -m 644 ./contents.hhc /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/contents.hhc\n /usr/bin/ginstall -c -m 644 ./index.hhk /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/index.hhk\n /usr/bin/ginstall -c -m 644 ./header.hhp /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/header.hhp\n /usr/bin/ginstall -c -m 644 ./maxima.hhp /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/maxima.hhp\nmake[6]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'\nmake[5]: *** [install-am] Error 2\nmake[5]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'\nmake[4]: *** [install-recursive] Error 1\nmake[4]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'\nmake[3]: *** [install-recursive] Error 1\nmake[3]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc'\nmake[2]: *** [install-recursive] Error 1\nmake[2]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src'\n***********************************************************\nFailed to install Maxima.\n***********************************************************\n\nreal\t11m2.520s\nuser\t5m0.763s\nsys\t0m33.530s\nsage: An error occurred while installing maxima-5.22.1\n```",
    "created_at": "2010-11-26T23:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94338",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:82" align="right">comment:82</div>

I tried to build Maxima in parallel a number of times. It failed once with the following, so I think it is unwise to attempt a parallel build. 

This was without any random delays before invoking gcc, but on a heavily loaded system. 

We should use http://www.stp.dias.ie/~vbraun/Sage/spkg/maxima-5.22.1.spkg and **not** my parallel version. 

```
/usr/bin/ginstall -c -m 644 maxima-index.lisp "/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima-index.lisp"
mkdir: /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html: [File exists]
make[6]: *** [install-maxima-html] Error 1
make[6]: *** Waiting for unfinished jobs....
 /usr/bin/ginstall -c -m 644 ./figures/contour1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour1.gif
 /usr/bin/ginstall -c -m 644 ./figures/contour2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour2.gif
 /usr/bin/ginstall -c -m 644 ./figures/contour3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/contour3.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics1.gif
 /usr/bin/ginstall -c -m 644 './maxima.info' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info'
 /usr/bin/ginstall -c -m 644 './maxima.info-1' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-1'
 /usr/bin/ginstall -c -m 644 ./figures/dynamics2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics2.gif
 /usr/bin/ginstall -c -m 644 './maxima.info-2' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-2'
 /usr/bin/ginstall -c -m 644 ./figures/dynamics3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics3.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics4.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics5.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics6.gif
 /usr/bin/ginstall -c -m 644 './maxima.info-3' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info-3'
 /usr/bin/ginstall -c -m 644 ./figures/dynamics7.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics7.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics8.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics8.gif
 install-info --info-dir='/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info' '/export/home/drkirkby/1/sage-4.6.1.alpha2/local/info/maxima.info'
 /usr/bin/ginstall -c -m 644 ./figures/dynamics9.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics9.gif
 /usr/bin/ginstall -c -m 644 ./figures/dynamics10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/dynamics10.gif
 /usr/bin/ginstall -c -m 644 ./figures/implicit_plot.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/implicit_plot.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf1.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf2.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf3.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf4.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf5.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotdf6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotdf6.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting1.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting2.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting2.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting3.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting3.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting4.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting4.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting5.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting5.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting6.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting6.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting7.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting7.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting8.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting8.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting9.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting9.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting10.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting11.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting11.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting12.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting12.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting13.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting13.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting14.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting14.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting15.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting15.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting16.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting16.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting17.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting17.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting18.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting18.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting19.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting19.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting20.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting20.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting21.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting21.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting22.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting22.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting23.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting23.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting24.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting24.gif
 /usr/bin/ginstall -c -m 644 ./figures/plotting25.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/plotting25.gif
 /usr/bin/ginstall -c -m 644 ./figures/orthopoly1.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/orthopoly1.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs01.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs01.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs02.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs02.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs03.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs03.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs04.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs04.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs05.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs05.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs06.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs06.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs07.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs07.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs08.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs08.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs09.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs09.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs10.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs10.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs11.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs11.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs12.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs12.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs13.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs13.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs14.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs14.gif
 /usr/bin/ginstall -c -m 644 ./figures/graphs15.gif /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/figures/graphs15.gif
 /usr/bin/ginstall -c -m 644 ./contents.hhc /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/contents.hhc
 /usr/bin/ginstall -c -m 644 ./index.hhk /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/index.hhk
 /usr/bin/ginstall -c -m 644 ./header.hhp /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/header.hhp
 /usr/bin/ginstall -c -m 644 ./maxima.hhp /export/home/drkirkby/1/sage-4.6.1.alpha2/local/share/maxima/5.22.1/doc/html/maxima.hhp
make[6]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'
make[5]: *** [install-am] Error 2
make[5]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'
make[4]: *** [install-recursive] Error 1
make[4]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc/info'
make[3]: *** [install-recursive] Error 1
make[3]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src/doc'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/export/home/drkirkby/1/sage-4.6.1.alpha2/spkg/build/maxima-5.22.1/src'
***********************************************************
Failed to install Maxima.
***********************************************************

real	11m2.520s
user	5m0.763s
sys	0m33.530s
sage: An error occurred while installing maxima-5.22.1
```



---

archive/issue_comments_094339.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nAs seen above, the parallel build appeared to work, but the install failed. But I think we should leave this. I've reported the failure on the Maxima list. \n\nI don't feel able to review the maxima package, and obviously can't the ECL one, as I wrote most of it. \n\nBut I'm fairly convinced these two packages are working ok together myself, based on the buildbot results. \n\nDave",
    "created_at": "2010-11-27T00:28:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94339",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:83" align="right">comment:83</div>

As seen above, the parallel build appeared to work, but the install failed. But I think we should leave this. I've reported the failure on the Maxima list. 

I don't feel able to review the maxima package, and obviously can't the ECL one, as I wrote most of it. 

But I'm fairly convinced these two packages are working ok together myself, based on the buildbot results. 

Dave



---

archive/issue_comments_094340.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nThis was posted on the Maxima list by Rupert Swarbrick, who is a Maxima developer. \n\n---\n''\nSorry, I think I was not clear. What I meant was that most of the time\ncompiling maxima is spent compiling code written in lisp. This code is\ncompiled in order using a \"Makefile-like\" process called asdf (or\nmk:defsystem, depending on which you prefer) and this is a serial\nprocess.''\n\n''There are projects like XCVB that have tried to do this in parallel for\nbuilding large lisp images, but it's not clear how much success they've\nhad.''\n\n*Rupert*\n\n---\nSo it looks like we wont gain much trying to build in parallel and as I've shown, at least installing in parallel is unsafe. \n\nDave",
    "created_at": "2010-11-27T00:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94340",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:84" align="right">comment:84</div>

This was posted on the Maxima list by Rupert Swarbrick, who is a Maxima developer. 

---
''
Sorry, I think I was not clear. What I meant was that most of the time
compiling maxima is spent compiling code written in lisp. This code is
compiled in order using a "Makefile-like" process called asdf (or
mk:defsystem, depending on which you prefer) and this is a serial
process.''

''There are projects like XCVB that have tried to do this in parallel for
building large lisp images, but it's not clear how much success they've
had.''

*Rupert*

---
So it looks like we wont gain much trying to build in parallel and as I've shown, at least installing in parallel is unsafe. 

Dave



---

archive/issue_comments_094341.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@jpflori](#comment%3A57):\n\n> I managed to update Ecl and Maxima on top of sage 4.5.1 on a Sunblade 1500 (SPARC with Solaris 10), but doctesting maxima.py timedout or died eating all the memory.\n\nOn a Blade 1500, you will need to increase the values of the timeouts. I would suggest suitable values would be : \n\n```\nSAGE_TIMEOUT=600\nSAGE_TIMEOUT_LONG=3000\n```\n\nI suspect the SAGE_TIMEOUT_LONG could actually be 2000 seconds, but I'd go for 6000 to be really safe. \n\nI use:\n\n```\nSAGE_TIMEOUT=1000\nSAGE_TIMEOUT_LONG=10000\n```\n\non a dual processor 900 MHz Blade 1000. I think however the SAGE_TIMEOUT_LONG, which defaults to 1800 s, is probably not too far from ok, so I reckon 2000 s would be fine.\n\nThe default SAGE_TIMEOUT of 300 s will certainly be too short. \n\nDave",
    "created_at": "2010-11-28T15:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94341",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@jpflori](#comment%3A57):

> I managed to update Ecl and Maxima on top of sage 4.5.1 on a Sunblade 1500 (SPARC with Solaris 10), but doctesting maxima.py timedout or died eating all the memory.

On a Blade 1500, you will need to increase the values of the timeouts. I would suggest suitable values would be : 

```
SAGE_TIMEOUT=600
SAGE_TIMEOUT_LONG=3000
```

I suspect the SAGE_TIMEOUT_LONG could actually be 2000 seconds, but I'd go for 6000 to be really safe. 

I use:

```
SAGE_TIMEOUT=1000
SAGE_TIMEOUT_LONG=10000
```

on a dual processor 900 MHz Blade 1000. I think however the SAGE_TIMEOUT_LONG, which defaults to 1800 s, is probably not too far from ok, so I reckon 2000 s would be fine.

The default SAGE_TIMEOUT of 300 s will certainly be too short. 

Dave



---

archive/issue_comments_094342.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nWhat do we need for a positive review of this?",
    "created_at": "2010-11-28T15:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94342",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:86" align="right">comment:86</div>

What do we need for a positive review of this?



---

archive/issue_comments_094343.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A85):\n\n> On a Blade 1500, you will need to increase the values of the timeouts. I would suggest suitable values would be :  ` SAGE_TIMEOUT=600 SAGE_TIMEOUT_LONG=3000 ` I suspect the SAGE_TIMEOUT_LONG could actually be 2000 seconds, but I'd go for 6000 to be really safe.  I use: ` SAGE_TIMEOUT=1000 SAGE_TIMEOUT_LONG=10000 ` on a dual processor 900 MHz Blade 1000. I think however the SAGE_TIMEOUT_LONG, which defaults to 1800 s, is probably not too far from ok, so I reckon 2000 s would be fine. The default SAGE_TIMEOUT of 300 s will certainly be too short.  Dave\n\nI did increase the timeout, to 20000 if I remember correctly.\n\nHowever when I came back Sage had gotten out of memory (and the computer had to be restarted).\n\nIt could be because of the way I installed Sage (downloaded binary 4.5.1 package, updated the spkgs and could have used an old gcc at some point because the default one on the system is 3.4.something even if 4.something is available).\n\nI should build everything from scratch but do not have the time right now.",
    "created_at": "2010-11-29T10:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94343",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@sagetrac-drkirkby](#comment%3A85):

> On a Blade 1500, you will need to increase the values of the timeouts. I would suggest suitable values would be :  ` SAGE_TIMEOUT=600 SAGE_TIMEOUT_LONG=3000 ` I suspect the SAGE_TIMEOUT_LONG could actually be 2000 seconds, but I'd go for 6000 to be really safe.  I use: ` SAGE_TIMEOUT=1000 SAGE_TIMEOUT_LONG=10000 ` on a dual processor 900 MHz Blade 1000. I think however the SAGE_TIMEOUT_LONG, which defaults to 1800 s, is probably not too far from ok, so I reckon 2000 s would be fine. The default SAGE_TIMEOUT of 300 s will certainly be too short.  Dave

I did increase the timeout, to 20000 if I remember correctly.

However when I came back Sage had gotten out of memory (and the computer had to be restarted).

It could be because of the way I installed Sage (downloaded binary 4.5.1 package, updated the spkgs and could have used an old gcc at some point because the default one on the system is 3.4.something even if 4.something is available).

I should build everything from scratch but do not have the time right now.



---

archive/issue_comments_094344.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@jpflori](#comment%3A87):\n> I did increase the timeout, to 20000 if I remember correctly.\n\nThat is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds. \n \n> However when I came back Sage had gotten out of memory (and the computer had to be restarted).\n\nI can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM. \n\n> It could be because of the way I installed Sage (downloaded binary 4.5.1 package, updated the spkgs and could have used an old gcc at some point because the default one on the system is 3.4.something even if 4.something is available).\n\nThat indeed would screw it up. We should run the 'prereq' script every time we run 'make' as that will stop some instances of people mess up, but I think installing individual packages with `sage -f foobar`, will be difficult to detect problems like a wrong gcc. \n\n> \n> I should build everything from scratch but do not have the time right now.\n\nIt will take a long time on a blade 1500, so I suggest you start it asap. \n\nDave",
    "created_at": "2010-11-29T12:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94344",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@jpflori](#comment%3A87):
> I did increase the timeout, to 20000 if I remember correctly.

That is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds. 
 
> However when I came back Sage had gotten out of memory (and the computer had to be restarted).

I can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM. 

> It could be because of the way I installed Sage (downloaded binary 4.5.1 package, updated the spkgs and could have used an old gcc at some point because the default one on the system is 3.4.something even if 4.something is available).

That indeed would screw it up. We should run the 'prereq' script every time we run 'make' as that will stop some instances of people mess up, but I think installing individual packages with `sage -f foobar`, will be difficult to detect problems like a wrong gcc. 

> 
> I should build everything from scratch but do not have the time right now.

It will take a long time on a blade 1500, so I suggest you start it asap. 

Dave



---

archive/issue_comments_094345.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A84):\n> This was posted on the Maxima list by Rupert Swarbrick, who is a Maxima developer. \n> \n> ---\n> ''\n> Sorry, I think I was not clear. What I meant was that most of the time\n> compiling maxima is spent compiling code written in lisp. This code is\n> compiled in order using a \"Makefile-like\" process called asdf (or\n> mk:defsystem, depending on which you prefer) and this is a serial\n> process.''\n> \n> ''There are projects like XCVB that have tried to do this in parallel for\n> building large lisp images, but it's not clear how much success they've\n> had.''\n> \n> *Rupert*\n> \n> ---\n> So it looks like we wont gain much trying to build in parallel\n\n... as I said a few comments [above](https://github.com/sagemath/sage/issues/10187#comment:79).\n\n> and as I've shown, at least installing in parallel is unsafe. \n\n(If *building* Maxima in parallel would make [more] sense, we could still disable just parallel *installation*.)",
    "created_at": "2010-11-29T13:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94345",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@sagetrac-drkirkby](#comment%3A84):
> This was posted on the Maxima list by Rupert Swarbrick, who is a Maxima developer. 
> 
> ---
> ''
> Sorry, I think I was not clear. What I meant was that most of the time
> compiling maxima is spent compiling code written in lisp. This code is
> compiled in order using a "Makefile-like" process called asdf (or
> mk:defsystem, depending on which you prefer) and this is a serial
> process.''
> 
> ''There are projects like XCVB that have tried to do this in parallel for
> building large lisp images, but it's not clear how much success they've
> had.''
> 
> *Rupert*
> 
> ---
> So it looks like we wont gain much trying to build in parallel

... as I said a few comments [above](https://github.com/sagemath/sage/issues/10187#comment:79).

> and as I've shown, at least installing in parallel is unsafe. 

(If *building* Maxima in parallel would make [more] sense, we could still disable just parallel *installation*.)



---

archive/issue_comments_094346.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A88):\n> Replying to [@jpflori](#comment%3A87):\n> > I did increase the timeout, to 20000 if I remember correctly.\n> \n> \n> That is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds.\n\nUnless someone has changed this recently, if you run some doctest(s) with `-long`, **only** `SAGE_TIMEOUT_LONG` will be used, regardless if the file(s) contain(s) doctests marked \"`long`\".\n\n(And the timeout applies to the whole file being doctested, not individual doctests in it.)\n\nIf you run out of memory (i.e., the machine starts to swap), increasing the timeout doesn't help much; it's better to then reduce the number of doctests run in parallel (\"`NUM_THREADS`\" in the Makefile).\n\n> > However when I came back Sage had gotten out of memory (and the computer had to be restarted).\n> \n> \n> I can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM.",
    "created_at": "2010-11-29T14:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94346",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@sagetrac-drkirkby](#comment%3A88):
> Replying to [@jpflori](#comment%3A87):
> > I did increase the timeout, to 20000 if I remember correctly.
> 
> 
> That is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds.

Unless someone has changed this recently, if you run some doctest(s) with `-long`, **only** `SAGE_TIMEOUT_LONG` will be used, regardless if the file(s) contain(s) doctests marked "`long`".

(And the timeout applies to the whole file being doctested, not individual doctests in it.)

If you run out of memory (i.e., the machine starts to swap), increasing the timeout doesn't help much; it's better to then reduce the number of doctests run in parallel ("`NUM_THREADS`" in the Makefile).

> > However when I came back Sage had gotten out of memory (and the computer had to be restarted).
> 
> 
> I can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM.



---

archive/issue_comments_094347.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@nexttime](#comment%3A89):\n> (If *building* Maxima in parallel would make [more] sense, we could still disable just parallel *installation*.)\n\nYes, but for various reasons, there's no point. \n\nDave",
    "created_at": "2010-11-30T15:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94347",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@nexttime](#comment%3A89):
> (If *building* Maxima in parallel would make [more] sense, we could still disable just parallel *installation*.)

Yes, but for various reasons, there's no point. 

Dave



---

archive/issue_comments_094348.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@nexttime](#comment%3A90):\n> Replying to [@sagetrac-drkirkby](#comment%3A88):\n\n> > That is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds.\n> \n> \n> Unless someone has changed this recently, if you run some doctest(s) with `-long`, **only** `SAGE_TIMEOUT_LONG` will be used, regardless if the file(s) contain(s) doctests marked \"`long`\".\n\n\nI was not aware of that. \n\n\n> (And the timeout applies to the whole file being doctested, not individual doctests in it.)\n\n> If you run out of memory (i.e., the machine starts to swap), increasing the timeout doesn't help much; it's better to then reduce the number of doctests run in parallel (\"`NUM_THREADS`\" in the Makefile).\n\n \n> > > However when I came back Sage had gotten out of memory (and the computer had to be restarted).\n\nI know there are exceptions, but normally one can kill the process that's taking all the ram. If ulimit was set, this should not happen. \n\n> > I can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM. \n\nFWIW, that's running Solaris 10 03/2005, so is an almost 6 year old version of Solaris. \n\nA later version of Solaris, if configured to use the 128-bit ZFS file system, then I doubt 2 GB would be sufficient. One could always use the old UFS file system, but ZFS has lots of advantages, but it tends to need more memory. \n\nDave",
    "created_at": "2010-11-30T15:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94348",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@nexttime](#comment%3A90):
> Replying to [@sagetrac-drkirkby](#comment%3A88):

> > That is more than enough. Remember there are two timeout values. I think if you set just SAGE_TIMEOUT to 20000 seconds, but leave SAGE_TIMEOUT_LONG at the default 1800 seconds, then the long tests will just use 1800 seconds.
> 
> 
> Unless someone has changed this recently, if you run some doctest(s) with `-long`, **only** `SAGE_TIMEOUT_LONG` will be used, regardless if the file(s) contain(s) doctests marked "`long`".


I was not aware of that. 


> (And the timeout applies to the whole file being doctested, not individual doctests in it.)

> If you run out of memory (i.e., the machine starts to swap), increasing the timeout doesn't help much; it's better to then reduce the number of doctests run in parallel ("`NUM_THREADS`" in the Makefile).

 
> > > However when I came back Sage had gotten out of memory (and the computer had to be restarted).

I know there are exceptions, but normally one can kill the process that's taking all the ram. If ulimit was set, this should not happen. 

> > I can build Sage and doctest it on a Sun Blade 1000 which has only 2 GB RAM. 

FWIW, that's running Solaris 10 03/2005, so is an almost 6 year old version of Solaris. 

A later version of Solaris, if configured to use the 128-bit ZFS file system, then I doubt 2 GB would be sufficient. One could always use the old UFS file system, but ZFS has lots of advantages, but it tends to need more memory. 

Dave



---

archive/issue_comments_094349.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nDon't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** \"yes\".\n\nAre `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.",
    "created_at": "2010-11-30T16:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94349",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:93" align="right">comment:93</div>

Don't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** "yes".

Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.



---

archive/issue_comments_094350.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nOkay, I was able (finally) to rebuild everything on OS X 10.4 PPC and now have no problems.\n\n```\nsage: time integrate(x^3,x)\nCPU times: user 0.13 s, sys: 0.13 s, total: 0.26 s\nWall time: 14.62 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.07 s, sys: 0.01 s, total: 0.08 s\nWall time: 0.17 s\n1/4*x^4\nsage: time integrate(x^3,x)\nCPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s\nWall time: 0.19 s\n1/4*x^4\n```\n\nAs to review and Volker's comments on sage-devel, note that sometimes the people who can review the functioning of the patch/spkg are not the same as those who can review the actual changed code.  That is probably a big piece of the problem.  \n\nAnyway, I cannot review the lisp-ish changes and whether they are needed, though I can look at the rest and of course verify that things seem to work.  \n\nHowever, you and David could review each others' spkgs in computer terms; I think that might be okay, n'est pas?",
    "created_at": "2010-11-30T18:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94350",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:94" align="right">comment:94</div>

Okay, I was able (finally) to rebuild everything on OS X 10.4 PPC and now have no problems.

```
sage: time integrate(x^3,x)
CPU times: user 0.13 s, sys: 0.13 s, total: 0.26 s
Wall time: 14.62 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.07 s, sys: 0.01 s, total: 0.08 s
Wall time: 0.17 s
1/4*x^4
sage: time integrate(x^3,x)
CPU times: user 0.08 s, sys: 0.02 s, total: 0.10 s
Wall time: 0.19 s
1/4*x^4
```

As to review and Volker's comments on sage-devel, note that sometimes the people who can review the functioning of the patch/spkg are not the same as those who can review the actual changed code.  That is probably a big piece of the problem.  

Anyway, I cannot review the lisp-ish changes and whether they are needed, though I can look at the rest and of course verify that things seem to work.  

However, you and David could review each others' spkgs in computer terms; I think that might be okay, n'est pas?



---

archive/issue_comments_094351.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, David Kirkby, Volker Braun**",
    "created_at": "2010-11-30T18:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94351",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, David Kirkby, Volker Braun**



---

archive/issue_comments_094352.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman, David Kirkby, Volker Braun** to **Karl-Dieter Crisman, David Kirkby, Volker Braun, Leif Leonhardy**",
    "created_at": "2010-11-30T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94352",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Karl-Dieter Crisman, David Kirkby, Volker Braun** to **Karl-Dieter Crisman, David Kirkby, Volker Braun, Leif Leonhardy**



---

archive/issue_comments_094353.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@nexttime](#comment%3A93):\n> Don't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** \"yes\".\n> \n> Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.\n\nCXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler\n\nand it used the Sun compiler. \n\nI must admit, I'm not so convinced it is honoring CXXFLAGS, but it would be unwise to not set them. That's really an ECL bug if it ignore the flags. \n\nDave",
    "created_at": "2010-11-30T21:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94353",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@nexttime](#comment%3A93):
> Don't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** "yes".
> 
> Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.

CXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler

and it used the Sun compiler. 

I must admit, I'm not so convinced it is honoring CXXFLAGS, but it would be unwise to not set them. That's really an ECL bug if it ignore the flags. 

Dave



---

archive/issue_comments_094354.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A96):\n> Replying to [@nexttime](#comment%3A93):\n> > Don't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** \"yes\".\n\nSo did you fix that?\n\n\n\n> > \n> > Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.\n> \n> \n> CXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler\n> \n> and it used the Sun compiler. \n> \n\n:-) What for?\n\n> I must admit, I'm not so convinced it is honoring CXXFLAGS, but it would be unwise to not set them. That's really an ECL bug if it ignore the flags. \n\n(At least I couldn't find `CXXFLAGS` being used in the build logs.)",
    "created_at": "2010-11-30T21:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94354",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@sagetrac-drkirkby](#comment%3A96):
> Replying to [@nexttime](#comment%3A93):
> > Don't know if I mentioned this earlier, but in the ECL spkg user-specified `CFLAGS` (and `CXXFLAGS`) still get overridden even if `SAGE_DEBUG` is **not** "yes".

So did you fix that?



> > 
> > Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.
> 
> 
> CXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler
> 
> and it used the Sun compiler. 
> 

:-) What for?

> I must admit, I'm not so convinced it is honoring CXXFLAGS, but it would be unwise to not set them. That's really an ECL bug if it ignore the flags. 

(At least I couldn't find `CXXFLAGS` being used in the build logs.)



---

archive/issue_comments_094355.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@nexttime](#comment%3A97):\n> Replying to [@sagetrac-drkirkby](#comment%3A96):\n> > Replying to [@nexttime](#comment%3A93):\n> > > Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.\n> > \n> > \n> > CXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler\n> > \n> > and it used the Sun compiler. \n> > \n> \n> \n> :-) What for?\n\nI just successfully installed ECL (and afterwards Maxima) with `env CXX=/some/nonexistent/cxx ./sage -f ...`.\n\n`configure` tests `CXX`, but it'll only be used if you also build the included GMP, with C++ support, I guess.",
    "created_at": "2010-11-30T22:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94355",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@nexttime](#comment%3A97):
> Replying to [@sagetrac-drkirkby](#comment%3A96):
> > Replying to [@nexttime](#comment%3A93):
> > > Are `CXX` and `CXXFLAGS` used by ECL at all? I don't think so.
> > 
> > 
> > CXX is definitely used. I just tried to specify CXX=/path/to/Sun/C++-compiler
> > 
> > and it used the Sun compiler. 
> > 
> 
> 
> :-) What for?

I just successfully installed ECL (and afterwards Maxima) with `env CXX=/some/nonexistent/cxx ./sage -f ...`.

`configure` tests `CXX`, but it'll only be used if you also build the included GMP, with C++ support, I guess.



---

archive/issue_events_132160.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-30T23:11:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132160"
}
```



---

archive/issue_events_132161.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-30T23:11:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132161"
}
```



---

archive/issue_comments_094356.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nSome comments, having spent some time looking at the code others have written. \n\n### My ECL package\n\n* I don't see anything wrong with the way CXXFLAGS/CFLAGS is handled in the ECL package. It looks OK to me. It might not be 100% necessary, but in general we should set these flags and hope the package follows this. \n\n---\n### Looking at the doc tests:\n* **trac_10187_general_display_prefix_workaround.patch** looks OK to me. So I'll positively review that part. \n* **trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch** looks OK to me, So I'll positively review that part. \n*  **maxima-5.22.1.patch** SPKG.txt looks OK, but you will need to find someone that know more about Lisp than me to tell you if that's correct. Ask on sage-devel to get someone who understands it, since I don't. \n* **trac_10187_fix_easy_doctests.patch**\n\n1) There are these numerical results. Has anyone independently verified this are correct?\n\n```\n[2.6789385347..., -8.3905259853..., 26.662447494..., -80.683148377...] \n```\nOn what basis was the number of significant digits selected? \n\nAs a matter of interest, do we know if anyone every verify the original horrid looking symbolic integral is correct? \n\nI have a dislike for tests where is appears we don't verify the result is correct, but assume it must be. Please justify why those results are correct. That should be in a comment in the code, not displayed. \n\n2) Why was the doctest:\n\n```\nintegral(abs(x), x, 0, a)\n```\nchanged to:\n\n```\nintegral(abs(x)*x, x, 0, a) \n```\n\nIt rather strikes me that we should show the example of how to do this calculation in the way Maxima now wants, rather than to simply change the integral to one which gives a simpler answer. \n\nIt so happens that Mathematica 7.0.1 can do the first inegral:\n\n```\nIn[7]:= Integrate[Abs[x],{x,0,a}]\n\n        a Abs[a]\nOut[7]= --------\n           2\n\n```\n\nI think it would be better to show the original integral, show the failure. We could even point out how to do the integral in Maxima, and get the hopefully correct result. \nIs rather strikes me that inputting something that was quite reasonable looking does not work. So we should explain why that reasonable thing is wrong, rather than just pick another example. \n\nThe Mathematica documentation often shows a section marked **Possible issues** and would explain problems one might get. Here it seems we should do this, rather than just pick another integral. \n\n**sage/plot/plot3d/transform.pyx** Do we know if that horrible looking result is correct? I see it is a simple change from the previous horrible looking result, but how do we know if the previous one is correct? If, as I suspect, this has not been verified by hand or with another package, then we should write that fact.\n\n == Summary == \n\n* The portability issues appears to have been resolved. \n* Someone needs to check my ECL package\n* **trac_10187_general_display_prefix_workaround.patch** is OK\n* **trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch**  is OK\n* **trac_10187_fix_easy_doctests.patch** Needs explanation. \n* **maxima-5.22.1.patch**  Needs someone to review with a skill set different to me. \n\nI'm changing to needs work, as some of these tests changes needs explanation. \n\nDave",
    "created_at": "2010-11-30T23:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94356",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:99" align="right">comment:99</div>

Some comments, having spent some time looking at the code others have written. 

### My ECL package

* I don't see anything wrong with the way CXXFLAGS/CFLAGS is handled in the ECL package. It looks OK to me. It might not be 100% necessary, but in general we should set these flags and hope the package follows this. 

---
### Looking at the doc tests:
* **trac_10187_general_display_prefix_workaround.patch** looks OK to me. So I'll positively review that part. 
* **trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch** looks OK to me, So I'll positively review that part. 
*  **maxima-5.22.1.patch** SPKG.txt looks OK, but you will need to find someone that know more about Lisp than me to tell you if that's correct. Ask on sage-devel to get someone who understands it, since I don't. 
* **trac_10187_fix_easy_doctests.patch**

1) There are these numerical results. Has anyone independently verified this are correct?

```
[2.6789385347..., -8.3905259853..., 26.662447494..., -80.683148377...] 
```
On what basis was the number of significant digits selected? 

As a matter of interest, do we know if anyone every verify the original horrid looking symbolic integral is correct? 

I have a dislike for tests where is appears we don't verify the result is correct, but assume it must be. Please justify why those results are correct. That should be in a comment in the code, not displayed. 

2) Why was the doctest:

```
integral(abs(x), x, 0, a)
```
changed to:

```
integral(abs(x)*x, x, 0, a) 
```

It rather strikes me that we should show the example of how to do this calculation in the way Maxima now wants, rather than to simply change the integral to one which gives a simpler answer. 

It so happens that Mathematica 7.0.1 can do the first inegral:

```
In[7]:= Integrate[Abs[x],{x,0,a}]

        a Abs[a]
Out[7]= --------
           2

```

I think it would be better to show the original integral, show the failure. We could even point out how to do the integral in Maxima, and get the hopefully correct result. 
Is rather strikes me that inputting something that was quite reasonable looking does not work. So we should explain why that reasonable thing is wrong, rather than just pick another example. 

The Mathematica documentation often shows a section marked **Possible issues** and would explain problems one might get. Here it seems we should do this, rather than just pick another integral. 

**sage/plot/plot3d/transform.pyx** Do we know if that horrible looking result is correct? I see it is a simple change from the previous horrible looking result, but how do we know if the previous one is correct? If, as I suspect, this has not been verified by hand or with another package, then we should write that fact.

 == Summary == 

* The portability issues appears to have been resolved. 
* Someone needs to check my ECL package
* **trac_10187_general_display_prefix_workaround.patch** is OK
* **trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch**  is OK
* **trac_10187_fix_easy_doctests.patch** Needs explanation. 
* **maxima-5.22.1.patch**  Needs someone to review with a skill set different to me. 

I'm changing to needs work, as some of these tests changes needs explanation. 

Dave



---

archive/issue_comments_094357.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A99):\n> ### My ECL package\n> \n> * I don't see anything wrong with the way CXXFLAGS/CFLAGS is handled in the ECL package. It looks OK to me. It might not be 100% necessary, but in general we should set these flags and hope the package follows this.\n\nIf you change\n\n```sh\nif [ \"x$SAGE_DEBUG\" = xyes ] ; then\n   CFLAGS=\"$CFLAGS -g -O0\"\n   CXXFLAGS=\"$CXXFLAGS -g -O0\"\nelse\n   CFLAGS=\"$CFLAGS -g -O2\"\n   CXXFLAGS=\"$CXXFLAGS -g -O2\"\nfi\n```\nto\n\n```sh\nif [ \"x$SAGE_DEBUG\" = xyes ] ; then\n   CFLAGS=\"$CFLAGS -g -O0\"\n   CXXFLAGS=\"$CXXFLAGS -g -O0\"\nelse\n   CFLAGS=\"-g -O2 $CFLAGS\"\n   CXXFLAGS=\"-g -O2 $CXXFLAGS\"\nfi\n```\nand add a comment that neither `CXX` nor `CXXFLAGS` are used within Sage / the way we configure / install ECL, I'm ok with your package.\n\nIn the long run, `CFLAG64` and `CXXFLAG64` should be set to their defaults (if empty) in (e.g.) `sage-env`.\n\nYou could remove the superfluous\n\n```sh\nset +e\n```\n\nThe comment\n\n```sh\n# 'export MAKE='make -j n' where n>1, breaks ECL builds, so unset make\n```\nisn't up-to-date (since we do no longer `unset MAKE`).\n\n\nI have no idea what\n\n```sh\n# We clear MAKEFLAGS to fix building multiple spkgs in parallel on OS X.\nexport MAKEFLAGS=\n```\nis (now) intended to fix; `MAKE=\"$MAKE -j1\"` should be sufficient. If it was really necessary on Darwin, it should only be done on Darwin, since it clears other `MAKEFLAGS` unrelated to parallel builds as well.\n\nThe following comment is a bit weird; `ln -sf ...` should do the right thing (without `rm`).\n\n```sh\n# Create symbolic link to lib/ecl-version directory.\n# This is important when the Sage install is moved.\ncd \"$SAGE_LOCAL/lib/\" && rm -f ecl && ln -s ecl-* ecl\n```\n\nThe following won't work with spaces in `$SAGE_LOCAL` (currently a minor issue):\n\n```sh\nCPPFLAGS=\"$CPPFLAGS -I$SAGE_LOCAL/include\"\nLDFLAGS=\"$LDFLAGS -L$SAGE_LOCAL/lib\"\n```\n(We could instead use `--with-gmp-prefix=\"$SAGE_LOCAL\"`, and similar for the Boehm garbage collector...)\n\nPerhaps add a comment to `SPKG.txt` that the *included* Boehm GC is used on MacOS X (only), if this is still the case. (I think it is; ECL used to assume *any* other Boehm GC found on MacOS X must be Fink's broken one, so always used its own there.)\n\nI don't agree with the comment regarding the removal of the GMP source tree; leaving just `install-sh` there is totally safe, without requiring any patch.\n\n---\n\nI'm ok with the Maxima spkg (IIRC ;-) ).",
    "created_at": "2010-12-01T00:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94357",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@sagetrac-drkirkby](#comment%3A99):
> ### My ECL package
> 
> * I don't see anything wrong with the way CXXFLAGS/CFLAGS is handled in the ECL package. It looks OK to me. It might not be 100% necessary, but in general we should set these flags and hope the package follows this.

If you change

```sh
if [ "x$SAGE_DEBUG" = xyes ] ; then
   CFLAGS="$CFLAGS -g -O0"
   CXXFLAGS="$CXXFLAGS -g -O0"
else
   CFLAGS="$CFLAGS -g -O2"
   CXXFLAGS="$CXXFLAGS -g -O2"
fi
```
to

```sh
if [ "x$SAGE_DEBUG" = xyes ] ; then
   CFLAGS="$CFLAGS -g -O0"
   CXXFLAGS="$CXXFLAGS -g -O0"
else
   CFLAGS="-g -O2 $CFLAGS"
   CXXFLAGS="-g -O2 $CXXFLAGS"
fi
```
and add a comment that neither `CXX` nor `CXXFLAGS` are used within Sage / the way we configure / install ECL, I'm ok with your package.

In the long run, `CFLAG64` and `CXXFLAG64` should be set to their defaults (if empty) in (e.g.) `sage-env`.

You could remove the superfluous

```sh
set +e
```

The comment

```sh
# 'export MAKE='make -j n' where n>1, breaks ECL builds, so unset make
```
isn't up-to-date (since we do no longer `unset MAKE`).


I have no idea what

```sh
# We clear MAKEFLAGS to fix building multiple spkgs in parallel on OS X.
export MAKEFLAGS=
```
is (now) intended to fix; `MAKE="$MAKE -j1"` should be sufficient. If it was really necessary on Darwin, it should only be done on Darwin, since it clears other `MAKEFLAGS` unrelated to parallel builds as well.

The following comment is a bit weird; `ln -sf ...` should do the right thing (without `rm`).

```sh
# Create symbolic link to lib/ecl-version directory.
# This is important when the Sage install is moved.
cd "$SAGE_LOCAL/lib/" && rm -f ecl && ln -s ecl-* ecl
```

The following won't work with spaces in `$SAGE_LOCAL` (currently a minor issue):

```sh
CPPFLAGS="$CPPFLAGS -I$SAGE_LOCAL/include"
LDFLAGS="$LDFLAGS -L$SAGE_LOCAL/lib"
```
(We could instead use `--with-gmp-prefix="$SAGE_LOCAL"`, and similar for the Boehm garbage collector...)

Perhaps add a comment to `SPKG.txt` that the *included* Boehm GC is used on MacOS X (only), if this is still the case. (I think it is; ECL used to assume *any* other Boehm GC found on MacOS X must be Fink's broken one, so always used its own there.)

I don't agree with the comment regarding the removal of the GMP source tree; leaving just `install-sh` there is totally safe, without requiring any patch.

---

I'm ok with the Maxima spkg (IIRC ;-) ).



---

archive/issue_comments_094358.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A99):\n>>  *  **maxima-5.22.1.patch** SPKG.txt looks OK, but you will need to find someone that know more about Lisp than me to tell you if that's correct.\n\nThe only Lisp change is adding the one line `(setf asdf::*user-cache* (truename \"./lisp-cache\"))` to asdf (Lisp build system). This was actually written by Nils Bruin in #8645, I just collected the patch. So I'll positively review that line myself, if I may.\n\n> * **trac_10187_fix_easy_doctests.patch** \n> 1) There are these numerical results. Has anyone independently verified this are correct?\n> [2.6789385347..., -8.3905259853..., 26.662447494..., -80.683148377...] \n> On what basis was the number of significant digits selected? \n\nThe preceeding (long) symbolic expression changed in some trivial ways and I added the numerical evaluation to make sure that the old and new symbolic expression are the same. \n\n> As a matter of interest, do we know if anyone every verify the original horrid looking symbolic integral is correct? \n\nI'm not the original author. All I know is that it is as correct in the patched doctest as it was before my patch.\n\n> 2) Why was the doctest:\n> \n> ```\n> integral(abs(x), x, 0, a)\n> ```\n> changed to:\n> \n> ```\n> integral(abs(x)*x, x, 0, a) \n> ```\n\nThe old maxima could not perform the old integral, but the new maxima version can do it. To keep testing the assume facility and maxima error reporting, I made the integral more difficult.\n\n> **sage/plot/plot3d/transform.pyx** Do we know if that horrible looking result is correct? I see it is a simple change from the previous horrible looking result, but how do we know if the previous one is correct? If, as I suspect, this has not been verified by hand or with another package, then we should write that fact.\n\nThe old and new maxima actually yield different expressions because of some branch choice issue with the square roots. I'm not the original author, but I think this doctest only shows that maxima doesn't blow up with horrible expressions. I don't think anyone verified the original version. If you want to go through all maxima doctests and annotate them with a manual computation then that is great, but maybe material for a different ticket.",
    "created_at": "2010-12-01T00:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94358",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@sagetrac-drkirkby](#comment%3A99):
>>  *  **maxima-5.22.1.patch** SPKG.txt looks OK, but you will need to find someone that know more about Lisp than me to tell you if that's correct.

The only Lisp change is adding the one line `(setf asdf::*user-cache* (truename "./lisp-cache"))` to asdf (Lisp build system). This was actually written by Nils Bruin in #8645, I just collected the patch. So I'll positively review that line myself, if I may.

> * **trac_10187_fix_easy_doctests.patch** 
> 1) There are these numerical results. Has anyone independently verified this are correct?
> [2.6789385347..., -8.3905259853..., 26.662447494..., -80.683148377...] 
> On what basis was the number of significant digits selected? 

The preceeding (long) symbolic expression changed in some trivial ways and I added the numerical evaluation to make sure that the old and new symbolic expression are the same. 

> As a matter of interest, do we know if anyone every verify the original horrid looking symbolic integral is correct? 

I'm not the original author. All I know is that it is as correct in the patched doctest as it was before my patch.

> 2) Why was the doctest:
> 
> ```
> integral(abs(x), x, 0, a)
> ```
> changed to:
> 
> ```
> integral(abs(x)*x, x, 0, a) 
> ```

The old maxima could not perform the old integral, but the new maxima version can do it. To keep testing the assume facility and maxima error reporting, I made the integral more difficult.

> **sage/plot/plot3d/transform.pyx** Do we know if that horrible looking result is correct? I see it is a simple change from the previous horrible looking result, but how do we know if the previous one is correct? If, as I suspect, this has not been verified by hand or with another package, then we should write that fact.

The old and new maxima actually yield different expressions because of some branch choice issue with the square roots. I'm not the original author, but I think this doctest only shows that maxima doesn't blow up with horrible expressions. I don't think anyone verified the original version. If you want to go through all maxima doctests and annotate them with a manual computation then that is great, but maybe material for a different ticket.



---

archive/issue_comments_094359.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nIf you comment the doctest, to indicate that the numerical results have not been verified, explaining why, then I;d consider that OK. But I think to stick a test with numerical results, which have not been verified, needs to be noted. \n\nI would also remark you are not the author of the original test, but don't think the integral has been verified. \n\nIf state the reasons for the numerical results in the doctest then\n\n* I'm happy with everything except the Lisp. \n* You copied the Lisp, but understand Lisp and know its correct. \n* Someone else can verify my ECL package\n\nthen I think that is all we need tor a positive review. \n\nI must say, I think it's pretty unimpressive if we use as a test a result we have not verified. I would have thought it more sensible to use an example from a table of integrals from a book, verify it with Mathematica or Maple. But to base a test on something we don't even know is right is a very unfortunate state of affairs.",
    "created_at": "2010-12-01T02:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94359",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:102" align="right">comment:102</div>

If you comment the doctest, to indicate that the numerical results have not been verified, explaining why, then I;d consider that OK. But I think to stick a test with numerical results, which have not been verified, needs to be noted. 

I would also remark you are not the author of the original test, but don't think the integral has been verified. 

If state the reasons for the numerical results in the doctest then

* I'm happy with everything except the Lisp. 
* You copied the Lisp, but understand Lisp and know its correct. 
* Someone else can verify my ECL package

then I think that is all we need tor a positive review. 

I must say, I think it's pretty unimpressive if we use as a test a result we have not verified. I would have thought it more sensible to use an example from a table of integrals from a book, verify it with Mathematica or Maple. But to base a test on something we don't even know is right is a very unfortunate state of affairs.



---

archive/issue_comments_094360.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nWhen I say *\"verify it with Mathematica or Maple\"*, I'm not saying they are a *\"gold standard\"*. But if software developed independently of other software gives the same results, it would give increased confidence that the results are indeed correct.",
    "created_at": "2010-12-01T03:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94360",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:103" align="right">comment:103</div>

When I say *"verify it with Mathematica or Maple"*, I'm not saying they are a *"gold standard"*. But if software developed independently of other software gives the same results, it would give increased confidence that the results are indeed correct.



---

archive/issue_comments_094361.json:
```json
{
    "body": "clean up SPKG.txt and spkg-install on the ECL package",
    "created_at": "2010-12-01T05:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94361",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

clean up SPKG.txt and spkg-install on the ECL package



---

archive/issue_comments_094362.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nAttachment: **[10187-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-cleanup.patch.gz)**\n\nI've attached a cleanup patch, addressing most of Leif's comments. See  10187-cleanup.patch \n\nI decided not to restrict the MAKEFLAGS to only OS X, since we don't know for sure it's not needed on other systems, and I don't want to take a chance. \n\nThere appears to be no option to specify the location of the garbidge collector - only whether it is a system one or not. This differs from gmp, where you can specify the location too. \n\nThe package has been updated. MD5 hecksum = `a72f6967736c3d0dd9f69ab34a0cadb7`\n\nDave",
    "created_at": "2010-12-01T05:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94362",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:104" align="right">comment:104</div>

Attachment: **[10187-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-cleanup.patch.gz)**

I've attached a cleanup patch, addressing most of Leif's comments. See  10187-cleanup.patch 

I decided not to restrict the MAKEFLAGS to only OS X, since we don't know for sure it's not needed on other systems, and I don't want to take a chance. 

There appears to be no option to specify the location of the garbidge collector - only whether it is a system one or not. This differs from gmp, where you can specify the location too. 

The package has been updated. MD5 hecksum = `a72f6967736c3d0dd9f69ab34a0cadb7`

Dave



---

archive/issue_comments_094363.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A104):\n> I decided not to restrict the MAKEFLAGS to only OS X, since we don't know for sure it's not needed on other systems, and I don't want to take a chance.\n\n*I* know... ;-) (at least if we rely on [GNU `make`](http://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion))\n\n> There appears to be no option to specify the location of the garbidge collector - only whether it is a system one or not. This differs from gmp, where you can specify the location too.\n\nYes, the apparently right one is unfortunately deprecated; I think we should report the Darwin issue upstream if ECL's behavior hasn't changed yet, since it is dumb to assume any \"system\" version there was broken.",
    "created_at": "2010-12-01T05:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94363",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@sagetrac-drkirkby](#comment%3A104):
> I decided not to restrict the MAKEFLAGS to only OS X, since we don't know for sure it's not needed on other systems, and I don't want to take a chance.

*I* know... ;-) (at least if we rely on [GNU `make`](http://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html#Options_002fRecursion))

> There appears to be no option to specify the location of the garbidge collector - only whether it is a system one or not. This differs from gmp, where you can specify the location too.

Yes, the apparently right one is unfortunately deprecated; I think we should report the Darwin issue upstream if ECL's behavior hasn't changed yet, since it is dumb to assume any "system" version there was broken.



---

archive/issue_comments_094364.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nDave, how does changing\n\n```sh\nFOO=\"$with_spaces/foo/bar\"\n```\nto\n\n```sh\nFOO=\"${with_spaces}/foo/bar\"\n```\nsolve the problem with spaces?\n\n`SPKG.txt` contains some unterminated sentence (*\"Added -with-gmp-prefix=\"$SAGE_LOCAL\" --with-system-gmp=yes --enable-boehm=system to the line invoking the configure script. These...\"* ?)",
    "created_at": "2010-12-01T07:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94364",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:106" align="right">comment:106</div>

Dave, how does changing

```sh
FOO="$with_spaces/foo/bar"
```
to

```sh
FOO="${with_spaces}/foo/bar"
```
solve the problem with spaces?

`SPKG.txt` contains some unterminated sentence (*"Added -with-gmp-prefix="$SAGE_LOCAL" --with-system-gmp=yes --enable-boehm=system to the line invoking the configure script. These..."* ?)



---

archive/issue_comments_094365.json:
```json
{
    "body": "Attachment: **[trac_10187_fix_easy_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_fix_easy_doctests.patch.gz)**\n\nUpdated patch",
    "created_at": "2010-12-01T11:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94365",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_10187_fix_easy_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_fix_easy_doctests.patch.gz)**

Updated patch



---

archive/issue_comments_094366.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@nexttime](#comment%3A106):\n> Dave, how does changing\n> \n> ```sh\n> FOO=\"$with_spaces/foo/bar\"\n> ```\n> to\n> \n> ```sh\n> FOO=\"${with_spaces}/foo/bar\"\n> ```\n> solve the problem with spaces?\n> \n\nWhat's wrong with it?\n\n```\ndrkirkby@laptop:~$ cat tt\n#!/bin/sh\nSAGE_LOCAL=\"/this path has/some spaces in/it\"\nFULL_PATH=\"${SAGE_LOCAL}/local/lib\"\necho \"$FULL_PATH\"\n\ndrkirkby@laptop:~$ ./tt\n/this path has/some spaces in/it/local/lib\n```\n\nAs far as I can tell, that basically shows that what we have will permit spaces. If not, please explain why and provide an alternative.\n\n> `SPKG.txt` contains some unterminated sentence (*\"Added -with-gmp-prefix=\"$SAGE_LOCAL\" --with-system-gmp=yes --enable-boehm=system to the line invoking the configure script. These...\"* ?)\n\nI was finishing that at about 3 AM local time. I'll sort out that minor issue, and any others you can see, once we agree how to handle the spaces in the path\n\nDave",
    "created_at": "2010-12-01T11:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94366",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@nexttime](#comment%3A106):
> Dave, how does changing
> 
> ```sh
> FOO="$with_spaces/foo/bar"
> ```
> to
> 
> ```sh
> FOO="${with_spaces}/foo/bar"
> ```
> solve the problem with spaces?
> 

What's wrong with it?

```
drkirkby@laptop:~$ cat tt
#!/bin/sh
SAGE_LOCAL="/this path has/some spaces in/it"
FULL_PATH="${SAGE_LOCAL}/local/lib"
echo "$FULL_PATH"

drkirkby@laptop:~$ ./tt
/this path has/some spaces in/it/local/lib
```

As far as I can tell, that basically shows that what we have will permit spaces. If not, please explain why and provide an alternative.

> `SPKG.txt` contains some unterminated sentence (*"Added -with-gmp-prefix="$SAGE_LOCAL" --with-system-gmp=yes --enable-boehm=system to the line invoking the configure script. These..."* ?)

I was finishing that at about 3 AM local time. I'll sort out that minor issue, and any others you can see, once we agree how to handle the spaces in the path

Dave



---

archive/issue_comments_094367.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nI've added a comment to explain the numeric evaluation of the taylor series in `trac_10187_fix_easy_doctests.patch` and compared it with Maple 12.\n\nAbout the spaces in paths: `FOO=\"$with_spaces/foo/bar\"` and `FOO=\"${with_spaces}/foo/bar\"` will assign the same value to `FOO`. You only need the curly brackets if then next character is a valid part of a variable name, i.e. `FOO=\"${with_spaces}bar\"` works but `FOO=\"$with_spacesbar\"` is wrong.",
    "created_at": "2010-12-01T11:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94367",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:108" align="right">comment:108</div>

I've added a comment to explain the numeric evaluation of the taylor series in `trac_10187_fix_easy_doctests.patch` and compared it with Maple 12.

About the spaces in paths: `FOO="$with_spaces/foo/bar"` and `FOO="${with_spaces}/foo/bar"` will assign the same value to `FOO`. You only need the curly brackets if then next character is a valid part of a variable name, i.e. `FOO="${with_spaces}bar"` works but `FOO="$with_spacesbar"` is wrong.



---

archive/issue_comments_094368.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@vbraun](#comment%3A108):\n> I've added a comment to explain the numeric evaluation of the taylor series in `trac_10187_fix_easy_doctests.patch` and compared it with Maple 12.\n\nThank you. I'm ok with that then. \n\n> About the spaces in paths: `FOO=\"$with_spaces/foo/bar\"` and `FOO=\"${with_spaces}/foo/bar\"` will assign the same value to `FOO`. You only need the curly brackets if then next character is a valid part of a variable name, i.e. `FOO=\"${with_spaces}bar\"` works but `FOO=\"$with_spacesbar\"` is wrong.\n\nSo what bit of spkg-install will break with spaces in the SAGE_LOCAL? Leif commented the CPPFLAGS would not handle spaces, but I don't see why not. The braces should just make 100% sure not even a contrived example should break things. \n\nDave",
    "created_at": "2010-12-01T12:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94368",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@vbraun](#comment%3A108):
> I've added a comment to explain the numeric evaluation of the taylor series in `trac_10187_fix_easy_doctests.patch` and compared it with Maple 12.

Thank you. I'm ok with that then. 

> About the spaces in paths: `FOO="$with_spaces/foo/bar"` and `FOO="${with_spaces}/foo/bar"` will assign the same value to `FOO`. You only need the curly brackets if then next character is a valid part of a variable name, i.e. `FOO="${with_spaces}bar"` works but `FOO="$with_spacesbar"` is wrong.

So what bit of spkg-install will break with spaces in the SAGE_LOCAL? Leif commented the CPPFLAGS would not handle spaces, but I don't see why not. The braces should just make 100% sure not even a contrived example should break things. 

Dave



---

archive/issue_comments_094369.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nI just wanted to verify that all seems well, except possibly that the `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch` may not apply correctly after the latest change to clarify that the Taylor coefficients are correct.  Certainly the #8645 changes are fine.  So if that patch still applies (or is updated) and you guys figure out the spaces issue, this should definitely get positive review! Great work.  Hopefully it will be merged before the *next* Maxima upgrade :)",
    "created_at": "2010-12-01T13:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94369",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:110" align="right">comment:110</div>

I just wanted to verify that all seems well, except possibly that the `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch` may not apply correctly after the latest change to clarify that the Taylor coefficients are correct.  Certainly the #8645 changes are fine.  So if that patch still applies (or is updated) and you guys figure out the spaces issue, this should definitely get positive review! Great work.  Hopefully it will be merged before the *next* Maxima upgrade :)



---

archive/issue_comments_094370.json:
```json
{
    "body": "Attachment: **[trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch.gz)**\n\nUpdated patch",
    "created_at": "2010-12-01T14:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94370",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch.gz](https://github.com/sagemath/sage/files/ticket10187/trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch.gz)**

Updated patch



---

archive/issue_events_132162.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-01T14:14:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132162"
}
```



---

archive/issue_events_132163.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2010-12-01T14:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132163"
}
```



---

archive/issue_comments_094371.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nI've rediffed `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch` to eliminate the fuzz, nothing fancy.\n\nI think all that remains is to give a positive review to ECL; Leif, are you satisfied?",
    "created_at": "2010-12-01T14:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94371",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:111" align="right">comment:111</div>

I've rediffed `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch` to eliminate the fuzz, nothing fancy.

I think all that remains is to give a positive review to ECL; Leif, are you satisfied?



---

archive/issue_comments_094372.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nReplying to [@vbraun](#comment%3A111):\n \n> I think all that remains is to give a positive review to ECL; \n\nI agree. \n\n> Leif, are you satisfied? \n\nLeif found a couple of errors in the documentation I put in SPKG.txt. I found two myself, but perhaps Leif found others. If he can list them, along with some suggestions to get around what he perceives as a problem with spaces in filenames, I'll address all issues at once. \n\nThen this should get a positive review I think. \n\nDave",
    "created_at": "2010-12-01T14:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94372",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:112" align="right">comment:112</div>

Replying to [@vbraun](#comment%3A111):
 
> I think all that remains is to give a positive review to ECL; 

I agree. 

> Leif, are you satisfied? 

Leif found a couple of errors in the documentation I put in SPKG.txt. I found two myself, but perhaps Leif found others. If he can list them, along with some suggestions to get around what he perceives as a problem with spaces in filenames, I'll address all issues at once. 

Then this should get a positive review I think. 

Dave



---

archive/issue_comments_094373.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nI had (*\"in principle\"*<sup>TM</sup>) already been ok with Dave's ECL package, then he made further changes.\n\nAs said before, I consider the \"spaces in `SAGE_ROOT`\" issue a currently rather minor one (as long as our `spkg-install` doesn't fail in an unexpected manner), since I doubt upstream (at least some other packages) will support that.\n\nHowever, Dave claimed he had fixed that (with a change that effectively changes nothing ;-) ).\nWhile `echo $CPPFLAGS` will almost always work, running `gcc` with spaces in the include path won't as is. So if at all, I'd change it to\n\n```sh\nCPPFLAGS=\"$CPPFLAGS -I\\\"$SAGE_LOCAL/include\\\"\"\nLDFLAGS=\"$LDFLAGS -L\\\"$SAGE_LOCAL/lib\\\"\"\n```\nwhich at least `gcc` does support, but not necessarily other parts of `configure` etc.\n\n---\n\nThere are some typos in `SPKG.txt` (IMHO minor as well):\n* s/sa**f**ter/safer/ (plus spurious \":w\" ?)\n* s/user defined/user**-**defined/\n* s/overwritten, as they would have done/over**ridden**, as they would have **been**/\n* s/it will cause**s**/it will cause/\n* s/Remove/Remove**d**/\n\nBut `SPKG.txt` is not the *User* or *Developer's Guide*...\n\n---\n\nI cannot guarantee (nor test) the new parameters to `configure` work on all platforms as expected: `--with-system-gmp=yes` is IMHO (at least) superfluous if we also pass `--with-gmp-prefix=\"$SAGE_LOCAL\"`.\n\n---\n\nI'd prefer all error messages (in `spkg-install`) starting with *\"Error\"* to ease grepping for such, consistent with other packages.",
    "created_at": "2010-12-01T16:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94373",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:113" align="right">comment:113</div>

I had (*"in principle"*<sup>TM</sup>) already been ok with Dave's ECL package, then he made further changes.

As said before, I consider the "spaces in `SAGE_ROOT`" issue a currently rather minor one (as long as our `spkg-install` doesn't fail in an unexpected manner), since I doubt upstream (at least some other packages) will support that.

However, Dave claimed he had fixed that (with a change that effectively changes nothing ;-) ).
While `echo $CPPFLAGS` will almost always work, running `gcc` with spaces in the include path won't as is. So if at all, I'd change it to

```sh
CPPFLAGS="$CPPFLAGS -I\"$SAGE_LOCAL/include\""
LDFLAGS="$LDFLAGS -L\"$SAGE_LOCAL/lib\""
```
which at least `gcc` does support, but not necessarily other parts of `configure` etc.

---

There are some typos in `SPKG.txt` (IMHO minor as well):
* s/sa**f**ter/safer/ (plus spurious ":w" ?)
* s/user defined/user**-**defined/
* s/overwritten, as they would have done/over**ridden**, as they would have **been**/
* s/it will cause**s**/it will cause/
* s/Remove/Remove**d**/

But `SPKG.txt` is not the *User* or *Developer's Guide*...

---

I cannot guarantee (nor test) the new parameters to `configure` work on all platforms as expected: `--with-system-gmp=yes` is IMHO (at least) superfluous if we also pass `--with-gmp-prefix="$SAGE_LOCAL"`.

---

I'd prefer all error messages (in `spkg-install`) starting with *"Error"* to ease grepping for such, consistent with other packages.



---

archive/issue_comments_094374.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nCan someone test if / verify that ECL meanwhile allows us to use Sage's Boehm GC on Darwin as well, rather than the one shipped with ECL?",
    "created_at": "2010-12-01T16:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94374",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:114" align="right">comment:114</div>

Can someone test if / verify that ECL meanwhile allows us to use Sage's Boehm GC on Darwin as well, rather than the one shipped with ECL?



---

archive/issue_comments_094375.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@nexttime](#comment%3A114):\n> Can someone test if / verify that ECL meanwhile allows us to use Sage's Boehm GC on Darwin as well, rather than the one shipped with ECL?\n\n(If not, I think we should mention this in the *Special Update/Build Instructions*, and report this upstream as a bug.)",
    "created_at": "2010-12-01T16:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94375",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@nexttime](#comment%3A114):
> Can someone test if / verify that ECL meanwhile allows us to use Sage's Boehm GC on Darwin as well, rather than the one shipped with ECL?

(If not, I think we should mention this in the *Special Update/Build Instructions*, and report this upstream as a bug.)



---

archive/issue_comments_094376.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nI take your point Leif, you can't check the extra options I added to the configure script. I think they were helpful and safe. Given that, and to stop this ticket dragging on any longer, they are best removed. It's one less thing to worry about. \n\nIf I remove those options to the configured script, **and** implement your changes to CPPFLAGS and LDFLAGS, it actually break the code, as the Boehm header files are no longer found. (I cut and pasted your changes.) As soon as I undo your changes, so the header files are found. \n\nGiven this, I've made some more changes\n\n* Put CPPFLAGS and LDFLAGS back to how they were in the previous ECL package. \n* Removed the options to configure, so they are the same as the previous ECL package\n* Corrected the typos. \n\nIf you want to sort out the problem with spaces in the filenames, then edit the ticket and add yourself as an author. But I don't want spend any longer on this. \n\nI've attched another patch, which reverses some changes, and corrects the typos. A new package can be found at the old place. The MD5 checksum is `8f60b1b4453a277d33178683ef532a93`\nDave",
    "created_at": "2010-12-01T18:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94376",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:116" align="right">comment:116</div>

I take your point Leif, you can't check the extra options I added to the configure script. I think they were helpful and safe. Given that, and to stop this ticket dragging on any longer, they are best removed. It's one less thing to worry about. 

If I remove those options to the configured script, **and** implement your changes to CPPFLAGS and LDFLAGS, it actually break the code, as the Boehm header files are no longer found. (I cut and pasted your changes.) As soon as I undo your changes, so the header files are found. 

Given this, I've made some more changes

* Put CPPFLAGS and LDFLAGS back to how they were in the previous ECL package. 
* Removed the options to configure, so they are the same as the previous ECL package
* Corrected the typos. 

If you want to sort out the problem with spaces in the filenames, then edit the ticket and add yourself as an author. But I don't want spend any longer on this. 

I've attched another patch, which reverses some changes, and corrects the typos. A new package can be found at the old place. The MD5 checksum is `8f60b1b4453a277d33178683ef532a93`
Dave



---

archive/issue_comments_094377.json:
```json
{
    "body": "Further clean up SPKG.txt and spkg-install on the ECL package. Reverse some previous changes",
    "created_at": "2010-12-01T18:54:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94377",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Further clean up SPKG.txt and spkg-install on the ECL package. Reverse some previous changes



---

archive/issue_comments_094378.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nAttachment: **[10187-further-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-further-cleanup.patch.gz)**\n\nReplying to [@sagetrac-drkirkby](#comment%3A116):\n> I take your point Leif, you can't check the extra options I added to the configure script. I think they were helpful and safe. Given that, and to stop this ticket dragging on any longer, they are best removed. It's one less thing to worry about. \n> \n> If I remove those options to the configured script, **and** implement your changes to CPPFLAGS and LDFLAGS, it actually break the code, as the Boehm header files are no longer found. (I cut and pasted your changes.) As soon as I undo your changes, so the header files are found. \n\nYes, with\n\n```sh\nCPPFLAGS=\"$CPPFLAGS -I\\\"${SAGE_LOCAL}/include\\\"\"\nLDFLAGS=\"$LDFLAGS -L\\\"${SAGE_LOCAL}/lib\\\"\"\n```\nand\n\n```sh\n   ./configure --prefix=\"$SAGE_LOCAL\" --with-gmp-prefix=\"$SAGE_LOCAL\" # --enable-boehm=system\n```\n`configure` behaves weird (and finally the Lisp build fails for me):\n\n```\n...\nchecking for ld flags when building shared libraries... -shared  -L\"/home/leif/Sage/sage-4.6.1.alpha2/local/lib\"\n...\nchecking gmp.h usability... yes\nchecking gmp.h presence... yes\nchecking for gmp.h... yes\n...\nchecking for GC_malloc in -lgc... yes\nchecking whether we can use the existing Boehm-Weiser library ... yes\nchecking for GC_malloc in -lgc... (cached) yes\nchecking if we need to copy GC private headers ... checking if we use Boehm-Demers-Weiser precise garbage collector... no\n...\nchecking for ffi_call in -lffi... no\n/home/leif/Sage/sage-4.6.1.alpha2/spkg/build/ecl-10.4.1/src/src/configure: line\n9924: test: =: unary operator expected\nchecking whether we can dynamically build calls to C functions... yes\n...\nchecking gc.h usability... yes\nchecking gc.h presence... no\nconfigure: WARNING: gc.h: accepted by the compiler, rejected by the preprocessor\n!\nconfigure: WARNING: gc.h: proceeding with the compiler's result\nchecking for gc.h... yes\nconfigure: creating ./config.status\n...\nConfiguration complete. To build ECL, issue make in this directory.\n...\n;;; About to load cmp/load.lsp\nToo many arguments supplied to a macro or a destructuring-bind form.\n\nNo restarts available.\n\nBroken at SI::TPL.\n File: #P\"/home/leif/Sage/sage-4.6.1.alpha2/spkg/build/ecl-10.4.1/src/src/lsp/to\np.lsp\" (Position #20393)\nC>>\n```\n\nI'd like to see such documented in `SPKG.txt` (*Special Update/Build Instructions*) and / or `spkg-install` (e.g. `# *don't* quote SAGE_LOCAL here, since...`), to avoid others touching this spkg running into the same problem(s).\n\nClearly there are bugs in `configure`, which might get fixed in future releases though.",
    "created_at": "2010-12-01T20:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94378",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:117" align="right">comment:117</div>

Attachment: **[10187-further-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-further-cleanup.patch.gz)**

Replying to [@sagetrac-drkirkby](#comment%3A116):
> I take your point Leif, you can't check the extra options I added to the configure script. I think they were helpful and safe. Given that, and to stop this ticket dragging on any longer, they are best removed. It's one less thing to worry about. 
> 
> If I remove those options to the configured script, **and** implement your changes to CPPFLAGS and LDFLAGS, it actually break the code, as the Boehm header files are no longer found. (I cut and pasted your changes.) As soon as I undo your changes, so the header files are found. 

Yes, with

```sh
CPPFLAGS="$CPPFLAGS -I\"${SAGE_LOCAL}/include\""
LDFLAGS="$LDFLAGS -L\"${SAGE_LOCAL}/lib\""
```
and

```sh
   ./configure --prefix="$SAGE_LOCAL" --with-gmp-prefix="$SAGE_LOCAL" # --enable-boehm=system
```
`configure` behaves weird (and finally the Lisp build fails for me):

```
...
checking for ld flags when building shared libraries... -shared  -L"/home/leif/Sage/sage-4.6.1.alpha2/local/lib"
...
checking gmp.h usability... yes
checking gmp.h presence... yes
checking for gmp.h... yes
...
checking for GC_malloc in -lgc... yes
checking whether we can use the existing Boehm-Weiser library ... yes
checking for GC_malloc in -lgc... (cached) yes
checking if we need to copy GC private headers ... checking if we use Boehm-Demers-Weiser precise garbage collector... no
...
checking for ffi_call in -lffi... no
/home/leif/Sage/sage-4.6.1.alpha2/spkg/build/ecl-10.4.1/src/src/configure: line
9924: test: =: unary operator expected
checking whether we can dynamically build calls to C functions... yes
...
checking gc.h usability... yes
checking gc.h presence... no
configure: WARNING: gc.h: accepted by the compiler, rejected by the preprocessor
!
configure: WARNING: gc.h: proceeding with the compiler's result
checking for gc.h... yes
configure: creating ./config.status
...
Configuration complete. To build ECL, issue make in this directory.
...
;;; About to load cmp/load.lsp
Too many arguments supplied to a macro or a destructuring-bind form.

No restarts available.

Broken at SI::TPL.
 File: #P"/home/leif/Sage/sage-4.6.1.alpha2/spkg/build/ecl-10.4.1/src/src/lsp/to
p.lsp" (Position #20393)
C>>
```

I'd like to see such documented in `SPKG.txt` (*Special Update/Build Instructions*) and / or `spkg-install` (e.g. `# *don't* quote SAGE_LOCAL here, since...`), to avoid others touching this spkg running into the same problem(s).

Clearly there are bugs in `configure`, which might get fixed in future releases though.



---

archive/issue_comments_094379.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nI will attach yet another patch, documenting the problem as requested. Hopefully this is sufficient to get a positive review. The MD5 checksum is now `d162c7fa859b7f894bdd6a6cfa061359` \n\nBTW Leif, I'd appreciate your input on sage-devel on the thread [When is a test not a valid test?](http://groups.google.com/group/sage-devel/browse_thread/thread/c201930abdbd23d3?hl=en)  It's clear different Sage developers have **very** different views on quality control. \n\nDave",
    "created_at": "2010-12-01T20:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94379",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:118" align="right">comment:118</div>

I will attach yet another patch, documenting the problem as requested. Hopefully this is sufficient to get a positive review. The MD5 checksum is now `d162c7fa859b7f894bdd6a6cfa061359` 

BTW Leif, I'd appreciate your input on sage-devel on the thread [When is a test not a valid test?](http://groups.google.com/group/sage-devel/browse_thread/thread/c201930abdbd23d3?hl=en)  It's clear different Sage developers have **very** different views on quality control. 

Dave



---

archive/issue_comments_094380.json:
```json
{
    "body": "Document that quoting SAGE_LOCAL can cause problems. Correct a spelling error too.",
    "created_at": "2010-12-01T20:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94380",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Document that quoting SAGE_LOCAL can cause problems. Correct a spelling error too.



---

archive/issue_comments_094381.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nAttachment: **[10187-Document-quoting-problem.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-Document-quoting-problem.patch.gz)**\n\nSince Leif's last comment was he wanted the issue of quoting of SAGE_LOCAL documented in SPKG.txt and spkg-install, and I've now added those comments, I believe this ticket should now get a positive review. I hope Leif and/or others agree!! It would be good to see it merged into 4.6.1, which will hopefully address the Fedora 14 issues. \n\nDave",
    "created_at": "2010-12-02T11:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94381",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:119" align="right">comment:119</div>

Attachment: **[10187-Document-quoting-problem.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-Document-quoting-problem.patch.gz)**

Since Leif's last comment was he wanted the issue of quoting of SAGE_LOCAL documented in SPKG.txt and spkg-install, and I've now added those comments, I believe this ticket should now get a positive review. I hope Leif and/or others agree!! It would be good to see it merged into 4.6.1, which will hopefully address the Fedora 14 issues. 

Dave



---

archive/issue_comments_094382.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nPlease confirm that the links to the spkgs and patches in the ticket description are up-to-date, then I will do some testing.",
    "created_at": "2010-12-02T11:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94382",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:120" align="right">comment:120</div>

Please confirm that the links to the spkgs and patches in the ticket description are up-to-date, then I will do some testing.



---

archive/issue_comments_094383.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@jdemeyer](#comment%3A120):\n> Please confirm that the links to the spkgs and patches in the ticket description are up-to-date, then I will do some testing.\n\nCurrently myself doing \"final\" testing... ;-)\n\nDave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .",
    "created_at": "2010-12-02T11:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94383",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@jdemeyer](#comment%3A120):
> Please confirm that the links to the spkgs and patches in the ticket description are up-to-date, then I will do some testing.

Currently myself doing "final" testing... ;-)

Dave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .



---

archive/issue_comments_094384.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nReplying to [@nexttime](#comment%3A121):\n> Dave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .\n\nOoops, forget that.\n\nConfused it with the (now deleted) redundant patch to Sage scripts.",
    "created_at": "2010-12-02T11:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94384",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:122" align="right">comment:122</div>

Replying to [@nexttime](#comment%3A121):
> Dave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .

Ooops, forget that.

Confused it with the (now deleted) redundant patch to Sage scripts.



---

archive/issue_comments_094385.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@nexttime](#comment%3A122):\n> Replying to [@nexttime](#comment%3A121):\n> > Dave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .\n> \n> \n> Ooops, forget that.\n> \n> Confused it with the (now deleted) redundant patch to Sage scripts.\n\nAh, we have a problem. I see your message, checked the description which no longer mentions that patch, so I have deleted it. There is no way to retrieve it from trac either. \n\nDave",
    "created_at": "2010-12-02T11:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94385",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@nexttime](#comment%3A122):
> Replying to [@nexttime](#comment%3A121):
> > Dave: You can still delete the redundant https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz .
> 
> 
> Ooops, forget that.
> 
> Confused it with the (now deleted) redundant patch to Sage scripts.

Ah, we have a problem. I see your message, checked the description which no longer mentions that patch, so I have deleted it. There is no way to retrieve it from trac either. 

Dave



---

archive/issue_comments_094386.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nLeif, since you are now doing the final testing, I assume you have downloaded the patch. Can you put it back. \n\nThere's no mention in the description of applying the patch either. Is it in the .spkg, in which case it was only needed for review purposes, and can be retried with\n\n```\nhg export tip\n```\n\nDave",
    "created_at": "2010-12-02T12:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94386",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:124" align="right">comment:124</div>

Leif, since you are now doing the final testing, I assume you have downloaded the patch. Can you put it back. 

There's no mention in the description of applying the patch either. Is it in the .spkg, in which case it was only needed for review purposes, and can be retried with

```
hg export tip
```

Dave



---

archive/issue_comments_094387.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nOk, except for the now obsolete changelog entry\n\n```\n  * Changed method of setting CPPFLAGS and LDFLAGS so they would work with\n    a space in $SAGE_LOCAL.\n```\nthe ECL spkgs looks clean (though there's work for follow-up tickets).\n\nThe patch recently deleted by Dave was just the (cumulative) Maxima **spkg** patch for reference / review, so can easily be restored.",
    "created_at": "2010-12-02T12:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94387",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:125" align="right">comment:125</div>

Ok, except for the now obsolete changelog entry

```
  * Changed method of setting CPPFLAGS and LDFLAGS so they would work with
    a space in $SAGE_LOCAL.
```
the ECL spkgs looks clean (though there's work for follow-up tickets).

The patch recently deleted by Dave was just the (cumulative) Maxima **spkg** patch for reference / review, so can easily be restored.



---

archive/issue_comments_094388.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A124):\n> There's no mention in the description of applying the patch either. Is it in the .spkg, in which case it was only needed for review purposes, and can be retried with\n> \n\n```\nhg export tip\n```\n\nYou'd have to export changesets 20, 21 and 22:\n\n```\nchangeset:   22:e8822a6306c4\ntag:         tip\nuser:        Volker Braun <vbraun@stp.dias.ie>\ndate:        Fri Nov 26 17:46:01 2010 +0100\nfiles:       spkg-install\ndescription:\ntrac 10187: use MAKE variable\n\n\nchangeset:   21:2f6e663e08f6\nuser:        Volker Braun <vbraun@stp.dias.ie>\ndate:        Fri Nov 26 16:12:35 2010 +0100\nfiles:       spkg-install\ndescription:\ntrac 10187: minor changes\n\n\nchangeset:   20:1b2e265d49d2\nuser:        Volker Braun <vbraun@stp.dias.ie>\ndate:        Fri Oct 29 13:40:03 2010 +0100\nfiles:       SPKG.txt spkg-install\ndescription:\nupdated to latest upstream; rewritten build for maxima.fas (see spgk-install)\n```",
    "created_at": "2010-12-02T12:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94388",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@sagetrac-drkirkby](#comment%3A124):
> There's no mention in the description of applying the patch either. Is it in the .spkg, in which case it was only needed for review purposes, and can be retried with
> 

```
hg export tip
```

You'd have to export changesets 20, 21 and 22:

```
changeset:   22:e8822a6306c4
tag:         tip
user:        Volker Braun <vbraun@stp.dias.ie>
date:        Fri Nov 26 17:46:01 2010 +0100
files:       spkg-install
description:
trac 10187: use MAKE variable


changeset:   21:2f6e663e08f6
user:        Volker Braun <vbraun@stp.dias.ie>
date:        Fri Nov 26 16:12:35 2010 +0100
files:       spkg-install
description:
trac 10187: minor changes


changeset:   20:1b2e265d49d2
user:        Volker Braun <vbraun@stp.dias.ie>
date:        Fri Oct 29 13:40:03 2010 +0100
files:       SPKG.txt spkg-install
description:
updated to latest upstream; rewritten build for maxima.fas (see spgk-install)
```



---

archive/issue_comments_094389.json:
```json
{
    "body": "Attachment: **[maxima-5.22.1.patch.gz](https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz)**\n\nRe-uploaded diff for the maxima spkg (for review purposes only)",
    "created_at": "2010-12-02T12:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94389",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[maxima-5.22.1.patch.gz](https://github.com/sagemath/sage/files/ticket10187/maxima-5.22.1.patch.gz)**

Re-uploaded diff for the maxima spkg (for review purposes only)



---

archive/issue_comments_094390.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nI have re-uploaded the diff for the maxima spkg. It is only for historical purposes right now as we have already reviewed the new maxima spkg.",
    "created_at": "2010-12-02T12:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94390",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:127" align="right">comment:127</div>

I have re-uploaded the diff for the maxima spkg. It is only for historical purposes right now as we have already reviewed the new maxima spkg.



---

archive/issue_comments_094391.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nMinor correction, description is (and was) up-to-date.",
    "created_at": "2010-12-02T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94391",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:128" align="right">comment:128</div>

Minor correction, description is (and was) up-to-date.



---

archive/issue_comments_094392.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,6 +29,6 @@\n * `trac_10187_general_display_prefix_workaround.patch`\n * `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`\n \n-Finally, you need to patch `$SAGE_LOCAL/local/bin/sage-maxima.lisp` with\n+Finally, you need to patch `$SAGE_ROOT/local/bin/sage-maxima.lisp` with\n \n * `trac_10187_sage-maxima_lisp.patch`\n``````\n",
    "created_at": "2010-12-02T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94392",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,6 +29,6 @@
 * `trac_10187_general_display_prefix_workaround.patch`
 * `trac_10187_mark_some_doctests_random_until_9880_gets_merged.patch`
 
-Finally, you need to patch `$SAGE_LOCAL/local/bin/sage-maxima.lisp` with
+Finally, you need to patch `$SAGE_ROOT/local/bin/sage-maxima.lisp` with
 
 * `trac_10187_sage-maxima_lisp.patch`
``````




---

archive/issue_comments_094393.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nThank you for uploading the Maxima patch again. Perhaps you could explain how one would export one patch containing those 3 changesets, as I don't know how to do that, but have often felt it would be useful. \n\nOK, hopefully after Leif's Final<sup>TM</sup> testing, this is ready to go, with all the correct library patches and .spkg files now in place. \n\nAt least that's my understanding of the situation. Can anyone else confirm this? \n\nDave",
    "created_at": "2010-12-02T12:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94393",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:129" align="right">comment:129</div>

Thank you for uploading the Maxima patch again. Perhaps you could explain how one would export one patch containing those 3 changesets, as I don't know how to do that, but have often felt it would be useful. 

OK, hopefully after Leif's Final<sup>TM</sup> testing, this is ready to go, with all the correct library patches and .spkg files now in place. 

At least that's my understanding of the situation. Can anyone else confirm this? 

Dave



---

archive/issue_comments_094394.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nReplying to [@nexttime](#comment%3A125):\n> Ok, except for the now obsolete changelog entry\n> \n> ```\n>   * Changed method of setting CPPFLAGS and LDFLAGS so they would work with\n>     a space in $SAGE_LOCAL.\n> ```\n> the ECL spkgs looks clean (though there's work for follow-up tickets).\n\nI'll address that. Give me 10 minutes and I'll upload a new .spkg with that entry in SPKG.txt removed.",
    "created_at": "2010-12-02T12:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94394",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:130" align="right">comment:130</div>

Replying to [@nexttime](#comment%3A125):
> Ok, except for the now obsolete changelog entry
> 
> ```
>   * Changed method of setting CPPFLAGS and LDFLAGS so they would work with
>     a space in $SAGE_LOCAL.
> ```
> the ECL spkgs looks clean (though there's work for follow-up tickets).

I'll address that. Give me 10 minutes and I'll upload a new .spkg with that entry in SPKG.txt removed.



---

archive/issue_comments_094395.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A130):\n> Replying to [@nexttime](#comment%3A125):\n> I'll address that. Give me 10 minutes and I'll upload a new .spkg with that entry in SPKG.txt removed. \n\nI thought we were in \"feature\" freeze. ;-)\n\nAs mentioned before, positive review from me for both spkgs (and the scripts patch, haven't really looked at the others).\n\nFinal test on a slow machine will take hours; I think Jeroen is also going to test on the farm.\n\nI'll report back then.",
    "created_at": "2010-12-02T12:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94395",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:131" align="right">comment:131</div>

Replying to [@sagetrac-drkirkby](#comment%3A130):
> Replying to [@nexttime](#comment%3A125):
> I'll address that. Give me 10 minutes and I'll upload a new .spkg with that entry in SPKG.txt removed. 

I thought we were in "feature" freeze. ;-)

As mentioned before, positive review from me for both spkgs (and the scripts patch, haven't really looked at the others).

Final test on a slow machine will take hours; I think Jeroen is also going to test on the farm.

I'll report back then.



---

archive/issue_comments_094396.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nA new ECL package, with an MD5 cheskcum of `7c612a32fef87878cf686f9c35858e15` has been uploaded. That has the inaccurate comment removed. I'll attach a patch in a minute or two, but there's no need for Jeroen to wait - he can test this now, as the package is fully upto date. \n\nDave",
    "created_at": "2010-12-02T12:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94396",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:132" align="right">comment:132</div>

A new ECL package, with an MD5 cheskcum of `7c612a32fef87878cf686f9c35858e15` has been uploaded. That has the inaccurate comment removed. I'll attach a patch in a minute or two, but there's no need for Jeroen to wait - he can test this now, as the package is fully upto date. 

Dave



---

archive/issue_comments_094397.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nOops, forget my comment. I failed to cmmmit the change. \n\nGive me a bit longer!!!\n\nDave",
    "created_at": "2010-12-02T13:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94397",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:133" align="right">comment:133</div>

Oops, forget my comment. I failed to cmmmit the change. 

Give me a bit longer!!!

Dave



---

archive/issue_events_132164.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-12-02T13:09:41Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "subject": "https://github.com/sagetrac-drkirkby",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132164"
}
```



---

archive/issue_comments_094398.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nOK, new package with a checksum of `452b5481d6e9dfd47d276cda89cebe7d` is now in place. Patch will follow, but it only removes two lines from SPKG.txt\n\nDave",
    "created_at": "2010-12-02T13:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94398",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:134" align="right">comment:134</div>

OK, new package with a checksum of `452b5481d6e9dfd47d276cda89cebe7d` is now in place. Patch will follow, but it only removes two lines from SPKG.txt

Dave



---

archive/issue_comments_094399.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nFor the record, here is how to generate a patch for a range of changesets:\n\n```\nhg diff -r 19:tip > maxima-5.22.1.patch\n```\nApplying the resulting patch is equivalent to applying the output of\n\n```\nhg export -r 19:tip\n```\nbut the `hg diff` patch is not broken down into the individual changesets.",
    "created_at": "2010-12-02T13:12:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94399",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:135" align="right">comment:135</div>

For the record, here is how to generate a patch for a range of changesets:

```
hg diff -r 19:tip > maxima-5.22.1.patch
```
Applying the resulting patch is equivalent to applying the output of

```
hg export -r 19:tip
```
but the `hg diff` patch is not broken down into the individual changesets.



---

archive/issue_comments_094400.json:
```json
{
    "body": "Attachment: **[10187-remove-inaccure-comment-in-SPKG.txt.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-remove-inaccure-comment-in-SPKG.txt.patch.gz)**\n\nRemoves an inaccurate comment from SPKG.txt",
    "created_at": "2010-12-02T13:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94400",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[10187-remove-inaccure-comment-in-SPKG.txt.patch.gz](https://github.com/sagemath/sage/files/ticket10187/10187-remove-inaccure-comment-in-SPKG.txt.patch.gz)**

Removes an inaccurate comment from SPKG.txt



---

archive/issue_comments_094401.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nAll ready to be tested now. \n\nDave",
    "created_at": "2010-12-02T13:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94401",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:136" align="right">comment:136</div>

All ready to be tested now. 

Dave



---

archive/issue_comments_094402.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nJust for the record:\n\nI do get doctest errors with Sage 4.6.1.alpha2 (+ #8664 + #5847) running `ptestlong` on Ubuntu 9.04 x86 (Pentium 4); have to analyze later...",
    "created_at": "2010-12-02T14:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94402",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:137" align="right">comment:137</div>

Just for the record:

I do get doctest errors with Sage 4.6.1.alpha2 (+ #8664 + #5847) running `ptestlong` on Ubuntu 9.04 x86 (Pentium 4); have to analyze later...



---

archive/issue_comments_094403.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nI hope my installation is somehow broken:\n\n```\nThe following tests failed:\n\n\tsage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_rings.rst # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/words/word_generators.py # 11 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/constructor.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 16 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/functional.py # 34 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 39 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix_sparse.pyx # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 7 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 63 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 72 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 255 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial.pyx # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_rational_flint.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 27 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 49 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/line.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/parent.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 218 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/tensor/differential_forms.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/tensor/differential_form_element.py # 43 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 13327.9 seconds\nmake: *** [ptestlong] Error 128\n```\n\nGoing to retry, which again will take hours...",
    "created_at": "2010-12-02T16:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94403",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:138" align="right">comment:138</div>

I hope my installation is somehow broken:

```
The following tests failed:

	sage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_rings.rst # 2 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/words/word_generators.py # 11 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/constructor.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 16 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/functional.py # 34 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 39 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix_sparse.pyx # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 7 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 63 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 72 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 255 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial.pyx # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_rational_flint.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 27 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 49 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/line.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/parent.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 218 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/tensor/differential_forms.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/tensor/differential_form_element.py # 43 doctests failed
----------------------------------------------------------------------
Total time for all tests: 13327.9 seconds
make: *** [ptestlong] Error 128
```

Going to retry, which again will take hours...



---

archive/issue_comments_094404.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nYes, `make` reverted both ECL and Maxima to the previous versions.\n\nAnother `ptestlong` in progress...",
    "created_at": "2010-12-02T17:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94404",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:139" align="right">comment:139</div>

Yes, `make` reverted both ECL and Maxima to the previous versions.

Another `ptestlong` in progress...



---

archive/issue_comments_094405.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nAm I right in assuming all these patches are against sage-4.6.1.alpha1 ? \n\nI just built sage-4.6.1.alpha2, but some of these patches are applied, and some are not. So it looks like I'm going to have to build sage-4.6.1.alpha1. I expect it will take me a couple of hours to build it, patch it, then doctest it\n\nDave",
    "created_at": "2010-12-02T18:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94405",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:140" align="right">comment:140</div>

Am I right in assuming all these patches are against sage-4.6.1.alpha1 ? 

I just built sage-4.6.1.alpha2, but some of these patches are applied, and some are not. So it looks like I'm going to have to build sage-4.6.1.alpha1. I expect it will take me a couple of hours to build it, patch it, then doctest it

Dave



---

archive/issue_comments_094406.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A140):\n> Am I right in assuming all these patches are against sage-4.6.1.alpha1 ? \n> \n> I just built sage-4.6.1.alpha2, but some of these patches are applied, and some are not. So it looks like I'm going to have to build sage-4.6.1.alpha1. I expect it will take me a couple of hours to build it, patch it, then doctest it\n\nShouldn't be necessary.\n\nI've previously tested the spkgs and patches successfully (`ptestlong`) multiple times with Sage 4.6.1.alpha2 (in addition with the new MPIR and ECM, #8664 and #5847, respectively) on Ubuntu 10.04 x86_64.\n\nOn the 32-bit machine, I so far again got 47 doctest errors with the same though.",
    "created_at": "2010-12-02T19:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94406",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:141" align="right">comment:141</div>

Replying to [@sagetrac-drkirkby](#comment%3A140):
> Am I right in assuming all these patches are against sage-4.6.1.alpha1 ? 
> 
> I just built sage-4.6.1.alpha2, but some of these patches are applied, and some are not. So it looks like I'm going to have to build sage-4.6.1.alpha1. I expect it will take me a couple of hours to build it, patch it, then doctest it

Shouldn't be necessary.

I've previously tested the spkgs and patches successfully (`ptestlong`) multiple times with Sage 4.6.1.alpha2 (in addition with the new MPIR and ECM, #8664 and #5847, respectively) on Ubuntu 10.04 x86_64.

On the 32-bit machine, I so far again got 47 doctest errors with the same though.



---

archive/issue_comments_094407.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\nHmmm, maybe a Mercurial issue?\n\nPatches apply apparently clean on vanilla alpha2 as well (with an old Mercurial version), but I also get doctest errors on Ubuntu 9.04 x86_64.",
    "created_at": "2010-12-02T19:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94407",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:142" align="right">comment:142</div>

Hmmm, maybe a Mercurial issue?

Patches apply apparently clean on vanilla alpha2 as well (with an old Mercurial version), but I also get doctest errors on Ubuntu 9.04 x86_64.



---

archive/issue_comments_094408.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nReplying to [@nexttime](#comment%3A142):\n> Hmmm, maybe a Mercurial issue?\n> \n> Patches apply apparently clean on vanilla alpha2 as well (with an old Mercurial version), but I also get doctest errors on Ubuntu 9.04 x86_64.\n\nSame with Sage's Mercurial version (1.6.x), i.e. patches apply cleanly.\n\nNow at 199+ doctest errors on the 32-bit machine... :(",
    "created_at": "2010-12-02T19:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94408",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:143" align="right">comment:143</div>

Replying to [@nexttime](#comment%3A142):
> Hmmm, maybe a Mercurial issue?
> 
> Patches apply apparently clean on vanilla alpha2 as well (with an old Mercurial version), but I also get doctest errors on Ubuntu 9.04 x86_64.

Same with Sage's Mercurial version (1.6.x), i.e. patches apply cleanly.

Now at 199+ doctest errors on the 32-bit machine... :(



---

archive/issue_comments_094409.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nUbuntu 9.04 x86_64 (gcc 4.3.3), vanilla Sage 4.6.1.alpha2 with #10187:\n\n```\nThe following tests failed:\n\n\tsage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 40 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 66 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 247 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 224 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 15 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/line.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/functional.py # 29 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 24 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 45 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 8 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 2000.6 seconds\nmake: *** [ptestlong] Error 128\n```\n\nCurrently no idea what happens there...",
    "created_at": "2010-12-02T20:00:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94409",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:144" align="right">comment:144</div>

Ubuntu 9.04 x86_64 (gcc 4.3.3), vanilla Sage 4.6.1.alpha2 with #10187:

```
The following tests failed:

	sage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 40 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 66 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 247 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 224 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 15 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/line.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/functional.py # 29 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed
	sage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 24 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 45 doctests failed
	sage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 8 doctests failed
----------------------------------------------------------------------
Total time for all tests: 2000.6 seconds
make: *** [ptestlong] Error 128
```

Currently no idea what happens there...



---

archive/issue_comments_094410.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nReplying to [@nexttime](#comment%3A138):\n> Going to retry, which again will take hours...\n\nNow I get (Ubuntu 9.04 x86, gcc 4.3.3):\n\n```\nThe following tests failed:\n\n\tsage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 15 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/functional.py # 29 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 40 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 66 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 247 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 24 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 45 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/line.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 224 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed\n\tsage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 13357.2 seconds\n```\n\nwhich at first glance doesn't look much different; 525 doctest errors.",
    "created_at": "2010-12-02T21:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94410",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:145" align="right">comment:145</div>

Replying to [@nexttime](#comment%3A138):
> Going to retry, which again will take hours...

Now I get (Ubuntu 9.04 x86, gcc 4.3.3):

```
The following tests failed:

	sage -t  -long -force_lib devel/sage/doc/en/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/bordeaux_2008/nf_introduction.rst # 8 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/interface_issues.rst # 4 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/linear_algebra.rst # 5 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/calculus.rst # 31 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/constructions/plotting.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/installation/source.rst # 1 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/latex.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/en/tutorial/tour_algebra.rst # 21 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/interfaces.rst # 18 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/a_tour_of_sage/index.rst # 3 doctests failed
	sage -t  -long -force_lib devel/sage/doc/fr/tutorial/tour_algebra.rst # 20 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/perfect_matching.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/combinat/combinat.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/lattice_polytope.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/geometry/polyhedra.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/schemes/elliptic_curves/ell_generic.py # 15 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/latex.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/preparser.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/functional.py # 29 doctests failed
	sage -t  -long -force_lib devel/sage/sage/misc/citation.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/graphs/graph_generators.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/gsl/integration.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modules/free_module_element.pyx # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix1.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix2.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/matrix/matrix_symbolic_dense.pyx # 40 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/power_helper.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/relation.py # 66 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/pynac.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/function_factory.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/ring.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/random_tests.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants_c.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/maxima_wrapper.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression_conversions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/constants.py # 16 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/assumptions.py # 51 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/expression.pyx # 247 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/integral.py # 64 doctests failed
	sage -t  -long -force_lib devel/sage/sage/symbolic/integration/external.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/infinity.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/fraction_field_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 15 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/misc.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/contfrac.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/integer_ring.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/polynomial/polynomial_element.pyx # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/order.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/galois_group.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element_quadratic.pyx # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # 12 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_base.pyx # 13 doctests failed
	sage -t  -long -force_lib devel/sage/sage/rings/number_field/number_field_rel.py # 10 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functions.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/calculus.py # 127 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/desolvers.py # 70 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/tests.py # 24 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/functional.py # 45 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/test_sympy.py # 7 doctests failed
	sage -t  -long -force_lib devel/sage/sage/calculus/wester.py # 45 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/special.py # 69 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/log.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/wigner.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/min_max.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/hyperbolic.py # 9 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/transcendental.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/piecewise.py # 65 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/orthogonal_polys.py # 42 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/other.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/functions/trig.py # 17 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/line.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/arc.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/plot3d.py # 3 doctests failed
	sage -t  -long -force_lib devel/sage/sage/plot/plot3d/transform.pyx # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/element.pyx # 5 doctests failed
	sage -t  -long -force_lib devel/sage/sage/structure/formal_sum.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/expect.py # 26 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/tests.py # 1 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/maxima.py # 224 doctests failed
	sage -t  -long -force_lib devel/sage/sage/interfaces/quit.py # 2 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/group_algebra.py # 6 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quaternion_algebra_element.py # 4 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra_element.pyx # 36 doctests failed
	sage -t  -long -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # 8 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/overconvergent/genus0.py # 19 doctests failed
	sage -t  -long -force_lib devel/sage/sage/modular/modform/ambient_R.py # 5 doctests failed
----------------------------------------------------------------------
Total time for all tests: 13357.2 seconds
```

which at first glance doesn't look much different; 525 doctest errors.



---

archive/issue_comments_094411.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\n(Note that on all systems vanilla Sage 4.6.1.alpha2 passes all tests.)",
    "created_at": "2010-12-02T21:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94411",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:146" align="right">comment:146</div>

(Note that on all systems vanilla Sage 4.6.1.alpha2 passes all tests.)



---

archive/issue_comments_094412.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nIf you would tell us what the error is then that would be much more useful than a list of failed tests. All of these work fine on Fedora 14 with sage-4.6.1.alpha2 and the new maxima/ecl. My first guess would be that you forgot to apply one of the patches (been there, done that), can you double-check?",
    "created_at": "2010-12-02T21:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94412",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:147" align="right">comment:147</div>

If you would tell us what the error is then that would be much more useful than a list of failed tests. All of these work fine on Fedora 14 with sage-4.6.1.alpha2 and the new maxima/ecl. My first guess would be that you forgot to apply one of the patches (been there, done that), can you double-check?



---

archive/issue_comments_094413.json:
```json
{
    "body": "<div id=\"comment:148\" align=\"right\">comment:148</div>\n\nWell, I didn't attach the logs since they're huge.\n\nI've reverted all changes and started from scratch, and now all tests pass on the Ubuntu 9.04 x86_64 machine. I have absolutely no idea what went wrong in the first two attempts; in the succeeding one I used Sage's `hg` to apply the patches, *after* installing the spkgs, and afterwards ran `./sage -ba-force` (rather than just `./sage -b`), which IMHO shouldn't be necessary.\n\nI did apply all patches in the right order in all cases, so something else must be wrong. Never experienced similar before...",
    "created_at": "2010-12-02T22:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94413",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:148" align="right">comment:148</div>

Well, I didn't attach the logs since they're huge.

I've reverted all changes and started from scratch, and now all tests pass on the Ubuntu 9.04 x86_64 machine. I have absolutely no idea what went wrong in the first two attempts; in the succeeding one I used Sage's `hg` to apply the patches, *after* installing the spkgs, and afterwards ran `./sage -ba-force` (rather than just `./sage -b`), which IMHO shouldn't be necessary.

I did apply all patches in the right order in all cases, so something else must be wrong. Never experienced similar before...



---

archive/issue_comments_094414.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nThe patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2. What we don't have on this ticket are changes relative to 4.6.1.alpha2. \n\nI've built **sage 4.6.1.alpha1** with the patches applied and the new .spkg files. This is on a Sun Ultra 27, 3.33 GHz Xeon processor running OpenSolaris 06/2009.\n\n```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 1560.4 seconds\ndrkirkby@hawk:~/new/sage-4.6.1.alpha1$ \n```\n\nI wonder if Leif's problems had anything to the patch process going wrong? \n\nDave",
    "created_at": "2010-12-02T23:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94414",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:149" align="right">comment:149</div>

The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2. What we don't have on this ticket are changes relative to 4.6.1.alpha2. 

I've built **sage 4.6.1.alpha1** with the patches applied and the new .spkg files. This is on a Sun Ultra 27, 3.33 GHz Xeon processor running OpenSolaris 06/2009.

```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 1560.4 seconds
drkirkby@hawk:~/new/sage-4.6.1.alpha1$ 
```

I wonder if Leif's problems had anything to the patch process going wrong? 

Dave



---

archive/issue_comments_094415.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A149):\n> The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.\n\nReally?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?",
    "created_at": "2010-12-02T23:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94415",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:150" align="right">comment:150</div>

Replying to [@sagetrac-drkirkby](#comment%3A149):
> The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.

Really?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?



---

archive/issue_comments_094416.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nReplying to [@jdemeyer](#comment%3A150):\n> Replying to [@sagetrac-drkirkby](#comment%3A149):\n> > The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.\n> \n> \n> Really?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?\n\nI don't think so. I've applied all patches multiple times with `-v` and different Mercurial versions; no rejects, no moved hunks.\n\n---\n\nOne problem I ran into seems to be that when running `make` with `SAGE_UPGRADING=yes` to (safely) install spkgs the Sage library install completely ignores the current branch, and switches back to `sage-main`, such that previously applied patches \"vanish\".\n\nAnother odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).",
    "created_at": "2010-12-02T23:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94416",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:151" align="right">comment:151</div>

Replying to [@jdemeyer](#comment%3A150):
> Replying to [@sagetrac-drkirkby](#comment%3A149):
> > The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.
> 
> 
> Really?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?

I don't think so. I've applied all patches multiple times with `-v` and different Mercurial versions; no rejects, no moved hunks.

---

One problem I ran into seems to be that when running `make` with `SAGE_UPGRADING=yes` to (safely) install spkgs the Sage library install completely ignores the current branch, and switches back to `sage-main`, such that previously applied patches "vanish".

Another odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).



---

archive/issue_comments_094417.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nReplying to [@nexttime](#comment%3A151):\n> One problem I ran into seems to be that when running `make` with `SAGE_UPGRADING=yes` to (safely) install spkgs the Sage library install completely ignores the current branch, and switches back to `sage-main`, such that previously applied patches \"vanish\".\n\n... which means one has to apply patches to the Sage library **after** all spkgs have been installed that way.\n\nAlso, there seems to be a missing dependency for `libcsage`, i.e. SCons doesn't always rebuild it when necessary, so one has to run `./sage -ba-force`.",
    "created_at": "2010-12-02T23:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94417",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:152" align="right">comment:152</div>

Replying to [@nexttime](#comment%3A151):
> One problem I ran into seems to be that when running `make` with `SAGE_UPGRADING=yes` to (safely) install spkgs the Sage library install completely ignores the current branch, and switches back to `sage-main`, such that previously applied patches "vanish".

... which means one has to apply patches to the Sage library **after** all spkgs have been installed that way.

Also, there seems to be a missing dependency for `libcsage`, i.e. SCons doesn't always rebuild it when necessary, so one has to run `./sage -ba-force`.



---

archive/issue_comments_094418.json:
```json
{
    "body": "<div id=\"comment:153\" align=\"right\">comment:153</div>\n\nReplying to [@jdemeyer](#comment%3A150):\n> Replying to [@sagetrac-drkirkby](#comment%3A149):\n> > The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.\n> \n> \n> Really?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?\n\nI guess I must have been mistaken - perhaps my alpha2 was not \"clean\", though I thought I'd extracted a fresh tarball. \n\nAnyway, several others have got all passes, and I got all passes if I apply this to sage-4.6.1.alpha1. \n\nI would say I'd try again with sage-4.6.1.alpha2, but it is late here, and I'm not going to start a build now, as you wont get the results until I wake in the morning. I'm pretty convinced this is OK. To my knowledge, the only thing was some minor changes Leif wanted to the ECL package, and those have been addressed. Leif seemed happy, so I'm setting this to positive.",
    "created_at": "2010-12-02T23:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94418",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:153" align="right">comment:153</div>

Replying to [@jdemeyer](#comment%3A150):
> Replying to [@sagetrac-drkirkby](#comment%3A149):
> > The patches on this ticket are not so easy to apply as usual, as part of them is already in Sage 4.6.1.alpha2.
> 
> 
> Really?  If that's true, it was unintentional.  Which patches are in sage-4.6.1.alpha2?

I guess I must have been mistaken - perhaps my alpha2 was not "clean", though I thought I'd extracted a fresh tarball. 

Anyway, several others have got all passes, and I got all passes if I apply this to sage-4.6.1.alpha1. 

I would say I'd try again with sage-4.6.1.alpha2, but it is late here, and I'm not going to start a build now, as you wont get the results until I wake in the morning. I'm pretty convinced this is OK. To my knowledge, the only thing was some minor changes Leif wanted to the ECL package, and those have been addressed. Leif seemed happy, so I'm setting this to positive.



---

archive/issue_events_132165.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-12-02T23:49:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132165"
}
```



---

archive/issue_events_132166.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-12-02T23:49:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132166"
}
```



---

archive/issue_comments_094419.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nReplying to [@nexttime](#comment%3A151):\n\n> Another odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).\n\nI'm not surprised by that, as `LD_LIBRARY_PATH` gets `$SAGE_LOCAL/lib` **prepended** to it when sage is run.. \n\nWhen building gcc, the `configure` options like `--with-gmp=/path/to/gmp` only tell the first stage build of the compiler where to find the libraries. They do not hard-code the path of the libraries, though there are ways of doing that if you wish when building gcc. If your not careful, it is easy to build gcc where the first stage of the build works, as it finds the GMP and MPFR libraries, but the second stage fails. That's hit many people on Solaris systems, a they often will not have suitable versions of the libraries on the system. \n\nDave \n\nDave",
    "created_at": "2010-12-03T00:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94419",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:154" align="right">comment:154</div>

Replying to [@nexttime](#comment%3A151):

> Another odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).

I'm not surprised by that, as `LD_LIBRARY_PATH` gets `$SAGE_LOCAL/lib` **prepended** to it when sage is run.. 

When building gcc, the `configure` options like `--with-gmp=/path/to/gmp` only tell the first stage build of the compiler where to find the libraries. They do not hard-code the path of the libraries, though there are ways of doing that if you wish when building gcc. If your not careful, it is easy to build gcc where the first stage of the build works, as it finds the GMP and MPFR libraries, but the second stage fails. That's hit many people on Solaris systems, a they often will not have suitable versions of the libraries on the system. 

Dave 

Dave



---

archive/issue_events_132167.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-12-03T00:34:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "title_is": "Update ECL to 10.4.1 and Maxima to 5.22.1 - currently the latest releases.",
    "title_was": "Update ecl and maxima",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132167"
}
```



---

archive/issue_comments_094420.json:
```json
{
    "body": "<div id=\"comment:155\" align=\"right\">comment:155</div>\n\nI'm just changing the ticket title, to be more explicit.",
    "created_at": "2010-12-03T00:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94420",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:155" align="right">comment:155</div>

I'm just changing the ticket title, to be more explicit.



---

archive/issue_comments_094421.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Please update ecl and maxima to the newest upstream release. Sage packages are here:\n+Please update ECL and Maxima to the newest upstream release. Sage packages are here:\n \n It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:\n \n@@ -9,21 +9,21 @@\n \n Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.\n \n-Relevant tickets for ecl:\n+Relevant tickets for ECL:\n \n * #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. \n \n-* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ecl from this ticket.\n+* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ECL from this ticket.\n \n Relevant tickets for maxima:\n \n * #8645: ECL library \"maxima.fasb\" is built at new location. The patches from this bug have been incorporated into the maxima spkg, and #8645 can be closed after this ticket.\n \n-* #8731: update/upgrade maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.\n+* #8731: update/upgrade Maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.\n \n-* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.\n+* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new Maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.\n \n-The updated maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):\n+The updated Maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):\n \n * `trac_10187_fix_easy_doctests.patch`\n * `trac_10187_general_display_prefix_workaround.patch`\n``````\n",
    "created_at": "2010-12-03T00:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94421",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Please update ecl and maxima to the newest upstream release. Sage packages are here:
+Please update ECL and Maxima to the newest upstream release. Sage packages are here:
 
 It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:
 
@@ -9,21 +9,21 @@
 
 Note that you cannot upgrade one without the other; Both ECL and Maxima need to be upgraded simultaneously or build will fail.
 
-Relevant tickets for ecl:
+Relevant tickets for ECL:
 
 * #9493: Remove extra baggage from ECL 10.2.1.p1 (again). The package has been cleaned up, but I feel removing gmp sources is too dangerous. 
 
-* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ecl from this ticket.
+* #10185: the old ecl-10.2.1 does not build on Fedora 14: Hopefully fixed with the updated ECL from this ticket.
 
 Relevant tickets for maxima:
 
 * #8645: ECL library "maxima.fasb" is built at new location. The patches from this bug have been incorporated into the maxima spkg, and #8645 can be closed after this ticket.
 
-* #8731: update/upgrade maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.
+* #8731: update/upgrade Maxima to latest upstream (5.21.1): Latest upstream is nowadays 5.22.1.
 
-* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.
+* #8582: `sum(1/(1+k^2), k, -oo, oo)` returns 0: The new Maxima seems to be able to evaluate this correctly, at leasts it returns some expression with digamma functions.
 
-The updated maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):
+The updated Maxima code seems to be more careful about signs which leads to doctest errors. Moreover, error reporting was changed. Therefore you need to apply the following patches to the Sage library (in this order):
 
 * `trac_10187_fix_easy_doctests.patch`
 * `trac_10187_general_display_prefix_workaround.patch`
``````




---

archive/issue_comments_094422.json:
```json
{
    "body": "<div id=\"comment:156\" align=\"right\">comment:156</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A154):\n> Replying to [@nexttime](#comment%3A151):\n> \n> > Another odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).\n> \n> \n> I'm not surprised by that, as `LD_LIBRARY_PATH` gets `$SAGE_LOCAL/lib` **prepended** to it when sage is run.. \n\nYes, but I would have expected the Debian or Ubuntu developers to set the `RPATH`.\n\nNot many people like setting `LD_LIBRARY_PATH` (which is empty outside Sage btw.).",
    "created_at": "2010-12-03T01:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94422",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:156" align="right">comment:156</div>

Replying to [@sagetrac-drkirkby](#comment%3A154):
> Replying to [@nexttime](#comment%3A151):
> 
> > Another odd thing I discovered is that at least on Ubuntu 9.04, `gcc` run from Sage picks up Sage's MPFR (and GMP/MPIR).
> 
> 
> I'm not surprised by that, as `LD_LIBRARY_PATH` gets `$SAGE_LOCAL/lib` **prepended** to it when sage is run.. 

Yes, but I would have expected the Debian or Ubuntu developers to set the `RPATH`.

Not many people like setting `LD_LIBRARY_PATH` (which is empty outside Sage btw.).



---

archive/issue_comments_094423.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nFinally passed all tests (`ptestlong`) with Sage 4.6.1.alpha2 on\n* Ubuntu 9.04 x86 (gcc 4.3.3),\n* Ubuntu 9.04 x86_64 (gcc 4.3.3), with and without the new MPIR and GMP-ECM (#8664 / #5847),\n* Ubuntu 10.04 x86_64 (gcc 4.4.3) with the new MPIR and GMP-ECM.\n\nSorry for the noise.",
    "created_at": "2010-12-03T06:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94423",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:157" align="right">comment:157</div>

Finally passed all tests (`ptestlong`) with Sage 4.6.1.alpha2 on
* Ubuntu 9.04 x86 (gcc 4.3.3),
* Ubuntu 9.04 x86_64 (gcc 4.3.3), with and without the new MPIR and GMP-ECM (#8664 / #5847),
* Ubuntu 10.04 x86_64 (gcc 4.4.3) with the new MPIR and GMP-ECM.

Sorry for the noise.



---

archive/issue_comments_094424.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha3**",
    "created_at": "2010-12-03T09:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94424",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha3**



---

archive/issue_events_132168.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-03T09:38:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132168"
}
```



---

archive/issue_events_132169.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-03T09:38:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10187#event-132169"
}
```



---

archive/issue_comments_094425.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nI just wanted to say \"Bravo!\" to everyone that has diligently worked on this.  Thanks for your work!",
    "created_at": "2010-12-06T13:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94425",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:159" align="right">comment:159</div>

I just wanted to say "Bravo!" to everyone that has diligently worked on this.  Thanks for your work!



---

archive/issue_comments_094426.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+**Note:** See #10434 for a follow-up ticket.\n+\n Please update ECL and Maxima to the newest upstream release. Sage packages are here:\n \n It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:\n``````\n",
    "created_at": "2010-12-06T13:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10187#issuecomment-94426",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+**Note:** See #10434 for a follow-up ticket.
+
 Please update ECL and Maxima to the newest upstream release. Sage packages are here:
 
 It's unsafe to build either ECL or Maxima in parallel, so we must not do this. Updated versions of ECL and Maxima can be found here:
``````

