# Issue 10734: Improve matrix_modn_sparse methods for converting to dense and taking submatrices

archive/issues_010671.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nHere I'll post some improvements that are needed for #10733 but are of independent interest.\n\nDepends on #17837\n\nComponent: **linear algebra**\n\nAuthor: **Gonzalo Tornaria**\n\nBranch/Commit: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734) @ [`d3f8b5f`](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**\n\nReviewer: **William Stein, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10734_\n\n",
    "created_at": "2011-02-03T01:26:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve matrix_modn_sparse methods for converting to dense and taking submatrices",
    "type": "issue",
    "updated_at": "2022-12-29T01:31:15Z",
    "url": "https://github.com/sagemath/sage/issues/10734",
    "user": "https://github.com/tornaria"
}
```
<div id="comment:0"></div>

Here I'll post some improvements that are needed for #10733 but are of independent interest.

Depends on #17837

Component: **linear algebra**

Author: **Gonzalo Tornaria**

Branch/Commit: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734) @ [`d3f8b5f`](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**

Reviewer: **William Stein, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/10734_





---

archive/issue_events_140305.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140305"
}
```



---

archive/issue_events_140306.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140306"
}
```



---

archive/issue_events_140307.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140307"
}
```



---

archive/issue_events_140308.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "subject": "https://github.com/tornaria",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140308"
}
```



---

archive/issue_events_140309.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-05T23:02:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140309"
}
```



---

archive/issue_comments_103102.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis ticket introduces a bunch of new functions, but doesn't include any documentation or doctests for them.",
    "created_at": "2011-03-21T19:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103102",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

This ticket introduces a bunch of new functions, but doesn't include any documentation or doctests for them.



---

archive/issue_events_140310.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-21T19:15:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140310"
}
```



---

archive/issue_events_140311.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-21T19:15:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140311"
}
```



---

archive/issue_comments_103103.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe new patch adds documentation to all the functions created in the first patch.",
    "created_at": "2011-03-24T03:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103103",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:3" align="right">comment:3</div>

The new patch adds documentation to all the functions created in the first patch.



---

archive/issue_events_140312.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-03-24T03:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140312"
}
```



---

archive/issue_events_140313.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-03-24T03:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140313"
}
```



---

archive/issue_comments_103104.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nGreat!",
    "created_at": "2011-03-25T01:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103104",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:4" align="right">comment:4</div>

Great!



---

archive/issue_events_140314.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-25T01:55:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140314"
}
```



---

archive/issue_events_140315.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-25T01:55:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140315"
}
```



---

archive/issue_events_140316.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-25T08:38:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140316"
}
```



---

archive/issue_comments_103105.json:
```json
{
    "body": "Reviewer: **William Stein**",
    "created_at": "2011-03-25T08:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103105",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **William Stein**



---

archive/issue_comments_103106.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPatches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.",
    "created_at": "2011-04-12T09:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103106",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.



---

archive/issue_events_140317.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-12T09:23:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140317"
}
```



---

archive/issue_events_140318.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-12T09:23:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140318"
}
```



---

archive/issue_comments_103107.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jdemeyer](#comment%3A6):\n> Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.\n\nIs it just this\n\n```\n# User Gonzalo Tornaria <tornaria@cmat.edu.uy>\n```\nwhat the patches are missing?\n\nThis is a misfeature of mercurial (queues), because it doesn't set the user by default in the patches. Very silly.\n\nDo you need me to reupload all the patches again, or can you just use\n\n```\n-u \"Gonzalo Tornaria <tornaria@cmat.edu.uy>\"\n```\nas an option when you run hg import? Reuploading 7 files to trac gets boring (is there an easier way to a batch upload to trac? from the command line?).\n\n[as a general comment; I'd prefer if the requirements are stated in terms of what the patches need to include, rather than dictating how one must use mercurial --\nI find mercurial inconvenient to use without using queues, because the history cannot be rewritten and I don't know how to effectively use branches -- I've been spoiled by git, I guess]",
    "created_at": "2011-04-14T04:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103107",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jdemeyer](#comment%3A6):
> Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.

Is it just this

```
# User Gonzalo Tornaria <tornaria@cmat.edu.uy>
```
what the patches are missing?

This is a misfeature of mercurial (queues), because it doesn't set the user by default in the patches. Very silly.

Do you need me to reupload all the patches again, or can you just use

```
-u "Gonzalo Tornaria <tornaria@cmat.edu.uy>"
```
as an option when you run hg import? Reuploading 7 files to trac gets boring (is there an easier way to a batch upload to trac? from the command line?).

[as a general comment; I'd prefer if the requirements are stated in terms of what the patches need to include, rather than dictating how one must use mercurial --
I find mercurial inconvenient to use without using queues, because the history cannot be rewritten and I don't know how to effectively use branches -- I've been spoiled by git, I guess]



---

archive/issue_comments_103108.json:
```json
{
    "body": "Attachment: **[trac_10734.dense_matrix_and_submatrix.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.dense_matrix_and_submatrix.gz)**\n\nFor matrix_modn_sparse: implement optimized versions of submatrix(), dense_matrix(), add methods dense_submatrix() and set_block_unsafe()",
    "created_at": "2011-06-13T18:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103108",
    "user": "https://github.com/tornaria"
}
```

Attachment: **[trac_10734.dense_matrix_and_submatrix.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.dense_matrix_and_submatrix.gz)**

For matrix_modn_sparse: implement optimized versions of submatrix(), dense_matrix(), add methods dense_submatrix() and set_block_unsafe()



---

archive/issue_comments_103109.json:
```json
{
    "body": "Attachment: **[trac_10734.02-documentation.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.02-documentation.gz)**\n\nAdd documentation for the functions added in #10734",
    "created_at": "2011-06-13T18:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103109",
    "user": "https://github.com/tornaria"
}
```

Attachment: **[trac_10734.02-documentation.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.02-documentation.gz)**

Add documentation for the functions added in #10734



---

archive/issue_comments_103110.json:
```json
{
    "body": "refactor code to support p=2 case (part 1)",
    "created_at": "2011-06-13T18:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103110",
    "user": "https://github.com/tornaria"
}
```

refactor code to support p=2 case (part 1)



---

archive/issue_comments_103111.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_10734.03-referee_refactor_to_support_p2.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.03-referee_refactor_to_support_p2.patch.gz)**\n\nI've reuploaded the two patches (hopefully) with the right format (username and date).\n\nAlso, I moved part of the referee patch in #10733 here, otherwise some doctests would fail until that ticket is merged.\n\nThere's no new code at all, so I assume the positive review is still valid.",
    "created_at": "2011-06-13T18:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103111",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_10734.03-referee_refactor_to_support_p2.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.03-referee_refactor_to_support_p2.patch.gz)**

I've reuploaded the two patches (hopefully) with the right format (username and date).

Also, I moved part of the referee patch in #10733 here, otherwise some doctests would fail until that ticket is merged.

There's no new code at all, so I assume the positive review is still valid.



---

archive/issue_events_140319.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-06-13T18:31:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140319"
}
```



---

archive/issue_events_140320.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-06-13T18:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140320"
}
```



---

archive/issue_comments_103112.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\napply trac_10734.dense_matrix_and_submatrix, trac_10734.02-documentation, trac_10734.03-referee_refactor_to_support_p2.patch",
    "created_at": "2011-06-15T12:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103112",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:9" align="right">comment:9</div>

apply trac_10734.dense_matrix_and_submatrix, trac_10734.02-documentation, trac_10734.03-referee_refactor_to_support_p2.patch



---

archive/issue_comments_103113.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMaybe you should add .patch at the end of the names of your patches. Otherwise they are not recognised as such, it seems.",
    "created_at": "2011-09-30T20:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103113",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Maybe you should add .patch at the end of the names of your patches. Otherwise they are not recognised as such, it seems.



---

archive/issue_comments_103114.json:
```json
{
    "body": "Apply only this patch. Patch against 5.0.beta7",
    "created_at": "2012-03-12T16:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103114",
    "user": "https://github.com/loefflerd"
}
```

Apply only this patch. Patch against 5.0.beta7



---

archive/issue_comments_103115.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac_10734-dense_matrix_and_submatrix-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734-dense_matrix_and_submatrix-folded.patch.gz)**\n\nI qfolded Gonzalo's patches into a single patch, and made sure it has \".patch\" at the end of its name, as Frederic suggests. But with this (or, equivalently, Gonzalo's original three patches) installed I get some doctest failures in sage/matrix/matrix_modn_sparse -- any ideas what's causing that?",
    "created_at": "2012-03-12T16:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103115",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac_10734-dense_matrix_and_submatrix-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734-dense_matrix_and_submatrix-folded.patch.gz)**

I qfolded Gonzalo's patches into a single patch, and made sure it has ".patch" at the end of its name, as Frederic suggests. But with this (or, equivalently, Gonzalo's original three patches) installed I get some doctest failures in sage/matrix/matrix_modn_sparse -- any ideas what's causing that?



---

archive/issue_events_140321.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:32:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140321"
}
```



---

archive/issue_events_140322.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:32:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140322"
}
```



---

archive/issue_comments_103116.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLooks like the patchbot is getting the same failures, under both 4.8 and 5.0.beta7. I'm afraid that's \"needs work\", then. Here's an example of the kind of error that's coming up:\n\n```\nsage -t  -force_lib devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx\n**********************************************************************\nFile \"/Users/patchbot/sage-4.8/devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx\", line 635:\n    sage: A.dense_submatrix(24,24,3,3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/patchbot/sage-4.8/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/patchbot/sage-4.8/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/patchbot/sage-4.8/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_10[4]>\", line 1, in <module>\n        A.dense_submatrix(Integer(24),Integer(24),Integer(3),Integer(3))###line 635:\n    sage: A.dense_submatrix(24,24,3,3)\n      File \"matrix_modn_sparse.pyx\", line 655, in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.dense_submatrix (sage/matrix/matrix_modn_sparse.c:11628)\n        M = self.new_matrix(nrows, ncols, sparse=False)\n    TypeError: Cannot convert sage.matrix.matrix_modn_dense_float.Matrix_modn_dense_float to sage.matrix.matrix_mod_dense.Matrix_mod_dense\n**********************************************************************\n```",
    "created_at": "2012-03-12T17:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103116",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:12" align="right">comment:12</div>

Looks like the patchbot is getting the same failures, under both 4.8 and 5.0.beta7. I'm afraid that's "needs work", then. Here's an example of the kind of error that's coming up:

```
sage -t  -force_lib devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx
**********************************************************************
File "/Users/patchbot/sage-4.8/devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx", line 635:
    sage: A.dense_submatrix(24,24,3,3)
Exception raised:
    Traceback (most recent call last):
      File "/Users/patchbot/sage-4.8/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/patchbot/sage-4.8/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/patchbot/sage-4.8/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_10[4]>", line 1, in <module>
        A.dense_submatrix(Integer(24),Integer(24),Integer(3),Integer(3))###line 635:
    sage: A.dense_submatrix(24,24,3,3)
      File "matrix_modn_sparse.pyx", line 655, in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.dense_submatrix (sage/matrix/matrix_modn_sparse.c:11628)
        M = self.new_matrix(nrows, ncols, sparse=False)
    TypeError: Cannot convert sage.matrix.matrix_modn_dense_float.Matrix_modn_dense_float to sage.matrix.matrix_mod_dense.Matrix_mod_dense
**********************************************************************
```



---

archive/issue_events_140323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140323"
}
```



---

archive/issue_events_140324.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140324"
}
```



---

archive/issue_events_140325.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140325"
}
```



---

archive/issue_events_140326.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140326"
}
```



---

archive/issue_events_140327.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140327"
}
```



---

archive/issue_events_140328.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140328"
}
```



---

archive/issue_events_140329.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140329"
}
```



---

archive/issue_events_140330.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140330"
}
```



---

archive/issue_events_140331.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-09-14T23:40:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140331"
}
```



---

archive/issue_events_140332.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-09-14T23:40:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140332"
}
```



---

archive/issue_comments_103117.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nGit branch and also has the fixes for the sparse conversion by making the `matrix_modn_dense_template` inherit from `matrix_mod_dense`\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0a74b9289d7f578b1e579a6d36fdc042f087bc2\"><code>c0a74b9</code></a></td><td><code>#10734: Matrix_modn_sparse speed improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181\"><code>8bc6935</code></a></td><td><code>Made modn dense template inherit from mod_dense.</code></td></tr></table>\n",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103117",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Git branch and also has the fixes for the sparse conversion by making the `matrix_modn_dense_template` inherit from `matrix_mod_dense`

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0a74b9289d7f578b1e579a6d36fdc042f087bc2"><code>c0a74b9</code></a></td><td><code>#10734: Matrix_modn_sparse speed improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181"><code>8bc6935</code></a></td><td><code>Made modn dense template inherit from mod_dense.</code></td></tr></table>




---

archive/issue_comments_103118.json:
```json
{
    "body": "Changed reviewer from **William Stein** to **William Stein, Travis Scrimshaw**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103118",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **William Stein** to **William Stein, Travis Scrimshaw**



---

archive/issue_comments_103119.json:
```json
{
    "body": "Branch: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734)**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103119",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734)**



---

archive/issue_comments_103120.json:
```json
{
    "body": "Commit: **[`8bc6935`](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103120",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`8bc6935`](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)**



---

archive/issue_events_140333.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-28T20:07:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140333"
}
```



---

archive/issue_events_140334.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-28T20:07:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140334"
}
```



---

archive/issue_comments_103121.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nneeds rebase",
    "created_at": "2014-09-28T20:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103121",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

needs rebase



---

archive/issue_comments_103122.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6\"><code>d3f8b5f</code></a></td><td><code>Merge branch 'public/matrix/improve_modn_sparse_methods-10734' of trac.sagemath.org:sage into public/matrix/improve_modn_sparse_methods-10734</code></td></tr></table>\n",
    "created_at": "2014-11-07T03:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6"><code>d3f8b5f</code></a></td><td><code>Merge branch 'public/matrix/improve_modn_sparse_methods-10734' of trac.sagemath.org:sage into public/matrix/improve_modn_sparse_methods-10734</code></td></tr></table>




---

archive/issue_comments_103123.json:
```json
{
    "body": "Changed commit from **[`8bc6935`](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)** to **[`d3f8b5f`](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**",
    "created_at": "2014-11-07T03:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103123",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8bc6935`](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)** to **[`d3f8b5f`](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**



---

archive/issue_events_140335.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-11-07T03:41:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140335"
}
```



---

archive/issue_events_140336.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-11-07T03:41:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140336"
}
```



---

archive/issue_comments_103124.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nRebased to `6.4.rc1`.",
    "created_at": "2014-11-07T03:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103124",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Rebased to `6.4.rc1`.



---

archive/issue_comments_103125.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello,\n\nWhat is the purpose of introducing the class `Matrix_mod_dense`?\n\nVincent",
    "created_at": "2015-01-25T17:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103125",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello,

What is the purpose of introducing the class `Matrix_mod_dense`?

Vincent



---

archive/issue_events_140337.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T17:29:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140337"
}
```



---

archive/issue_events_140338.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T17:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140338"
}
```



---

archive/issue_comments_103126.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nTicket #17837 proposes to remove `matrix_modn_dense` (it is unused since a long time and much slower than `matrix_modn_dense_float` or `matrix_modn_dense_double` using LinBox). Is there anybody working on this ticket that can say something about it? Otherwise I will put #17837 in positive review (and consequently this one in needs work).\n\nVincent",
    "created_at": "2015-02-23T22:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103126",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Ticket #17837 proposes to remove `matrix_modn_dense` (it is unused since a long time and much slower than `matrix_modn_dense_float` or `matrix_modn_dense_double` using LinBox). Is there anybody working on this ticket that can say something about it? Otherwise I will put #17837 in positive review (and consequently this one in needs work).

Vincent



---

archive/issue_events_140339.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140339"
}
```



---

archive/issue_events_140340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140340"
}
```



---

archive/issue_events_140341.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140341"
}
```



---

archive/issue_events_140342.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140342"
}
```



---

archive/issue_comments_103127.json:
```json
{
    "body": "Dependencies: **#17837**",
    "created_at": "2015-02-24T16:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-103127",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17837**



---

archive/issue_events_140343.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:31:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-140343"
}
```
