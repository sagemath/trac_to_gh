# Issue 10734: Improve matrix_modn_sparse methods for converting to dense and taking submatrices

archive/issues_010671.json:
```json
{
    "assignees": [],
    "body": "Here I'll post some improvements that are needed for #10733 but are of independent interest.\n\nDepends on #17837\n\nAssignee: **@williamstein**\n\nBranch/Commit: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734) @ [d3f8b5f](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**\n\nReviewer: **William Stein, Travis Scrimshaw**\n\nAuthor: **Gonzalo Tornaria**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10734_\n\n",
    "created_at": "2011-02-03T01:26:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve matrix_modn_sparse methods for converting to dense and taking submatrices",
    "type": "issue",
    "updated_at": "2022-12-29T01:31:15Z",
    "url": "https://github.com/sagemath/sage/issues/10734",
    "user": "https://github.com/tornaria"
}
```
Here I'll post some improvements that are needed for #10733 but are of independent interest.

Depends on #17837

Assignee: **@williamstein**

Branch/Commit: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734) @ [d3f8b5f](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**

Reviewer: **William Stein, Travis Scrimshaw**

Author: **Gonzalo Tornaria**

_Issue created by migration from https://trac.sagemath.org/ticket/10734_





---

archive/issue_events_125006.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125006"
}
```



---

archive/issue_events_125007.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125007"
}
```



---

archive/issue_events_125008.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-03T01:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125008"
}
```



---

archive/issue_events_125009.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-02-05T23:02:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125009"
}
```



---

archive/issue_comments_105178.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThis ticket introduces a bunch of new functions, but doesn't include any documentation or doctests for them.",
    "created_at": "2011-03-21T19:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105178",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'>Comment 2:</a>
This ticket introduces a bunch of new functions, but doesn't include any documentation or doctests for them.



---

archive/issue_events_125010.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-21T19:15:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125010"
}
```



---

archive/issue_events_125011.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-21T19:15:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125011"
}
```



---

archive/issue_comments_105179.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThe new patch adds documentation to all the functions created in the first patch.",
    "created_at": "2011-03-24T03:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105179",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:3'>Comment 3:</a>
The new patch adds documentation to all the functions created in the first patch.



---

archive/issue_events_125012.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-03-24T03:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125012"
}
```



---

archive/issue_events_125013.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-03-24T03:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125013"
}
```



---

archive/issue_comments_105180.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nGreat!",
    "created_at": "2011-03-25T01:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105180",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'>Comment 4:</a>
Great!



---

archive/issue_events_125014.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-25T01:55:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125014"
}
```



---

archive/issue_events_125015.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-03-25T01:55:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125015"
}
```



---

archive/issue_events_125016.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-25T08:38:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125016"
}
```



---

archive/issue_comments_105181.json:
```json
{
    "body": "Reviewer: **William Stein**",
    "created_at": "2011-03-25T08:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105181",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **William Stein**



---

archive/issue_comments_105182.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nPatches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.",
    "created_at": "2011-04-12T09:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105182",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.



---

archive/issue_events_125017.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-12T09:23:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125017"
}
```



---

archive/issue_events_125018.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-12T09:23:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125018"
}
```



---

archive/issue_comments_105183.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@jdemeyer](#comment%3A6):\n> Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.\n\nIs it just this\n\n```\n# User Gonzalo Tornaria <tornaria@cmat.edu.uy>\n```\nwhat the patches are missing?\n\nThis is a misfeature of mercurial (queues), because it doesn't set the user by default in the patches. Very silly.\n\nDo you need me to reupload all the patches again, or can you just use\n\n```\n-u \"Gonzalo Tornaria <tornaria@cmat.edu.uy>\"\n```\nas an option when you run hg import? Reuploading 7 files to trac gets boring (is there an easier way to a batch upload to trac? from the command line?).\n\n[as a general comment; I'd prefer if the requirements are stated in terms of what the patches need to include, rather than dictating how one must use mercurial --\nI find mercurial inconvenient to use without using queues, because the history cannot be rewritten and I don't know how to effectively use branches -- I've been spoiled by git, I guess]",
    "created_at": "2011-04-14T04:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105183",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@jdemeyer](#comment%3A6):
> Patches should be created using `hg export tip` and not `hg diff` or any other method.  Also make sure you have a file `$HOME/.hgrc` as explained in the developer's manual.

Is it just this

```
# User Gonzalo Tornaria <tornaria@cmat.edu.uy>
```
what the patches are missing?

This is a misfeature of mercurial (queues), because it doesn't set the user by default in the patches. Very silly.

Do you need me to reupload all the patches again, or can you just use

```
-u "Gonzalo Tornaria <tornaria@cmat.edu.uy>"
```
as an option when you run hg import? Reuploading 7 files to trac gets boring (is there an easier way to a batch upload to trac? from the command line?).

[as a general comment; I'd prefer if the requirements are stated in terms of what the patches need to include, rather than dictating how one must use mercurial --
I find mercurial inconvenient to use without using queues, because the history cannot be rewritten and I don't know how to effectively use branches -- I've been spoiled by git, I guess]



---

archive/issue_comments_105184.json:
```json
{
    "body": "Attachment: **[trac_10734.dense_matrix_and_submatrix.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.dense_matrix_and_submatrix.gz)**\n\nFor matrix_modn_sparse: implement optimized versions of submatrix(), dense_matrix(), add methods dense_submatrix() and set_block_unsafe()",
    "created_at": "2011-06-13T18:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105184",
    "user": "https://github.com/tornaria"
}
```

Attachment: **[trac_10734.dense_matrix_and_submatrix.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.dense_matrix_and_submatrix.gz)**

For matrix_modn_sparse: implement optimized versions of submatrix(), dense_matrix(), add methods dense_submatrix() and set_block_unsafe()



---

archive/issue_comments_105185.json:
```json
{
    "body": "Attachment: **[trac_10734.02-documentation.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.02-documentation.gz)**\n\nAdd documentation for the functions added in #10734",
    "created_at": "2011-06-13T18:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105185",
    "user": "https://github.com/tornaria"
}
```

Attachment: **[trac_10734.02-documentation.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.02-documentation.gz)**

Add documentation for the functions added in #10734



---

archive/issue_comments_105186.json:
```json
{
    "body": "refactor code to support p=2 case (part 1)",
    "created_at": "2011-06-13T18:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105186",
    "user": "https://github.com/tornaria"
}
```

refactor code to support p=2 case (part 1)



---

archive/issue_comments_105187.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nAttachment: **[trac_10734.03-referee_refactor_to_support_p2.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.03-referee_refactor_to_support_p2.patch.gz)**\n\nI've reuploaded the two patches (hopefully) with the right format (username and date).\n\nAlso, I moved part of the referee patch in #10733 here, otherwise some doctests would fail until that ticket is merged.\n\nThere's no new code at all, so I assume the positive review is still valid.",
    "created_at": "2011-06-13T18:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105187",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:8'>Comment 8:</a>
Attachment: **[trac_10734.03-referee_refactor_to_support_p2.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734.03-referee_refactor_to_support_p2.patch.gz)**

I've reuploaded the two patches (hopefully) with the right format (username and date).

Also, I moved part of the referee patch in #10733 here, otherwise some doctests would fail until that ticket is merged.

There's no new code at all, so I assume the positive review is still valid.



---

archive/issue_events_125019.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-06-13T18:31:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125019"
}
```



---

archive/issue_events_125020.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2011-06-13T18:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125020"
}
```



---

archive/issue_comments_105188.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\napply trac_10734.dense_matrix_and_submatrix, trac_10734.02-documentation, trac_10734.03-referee_refactor_to_support_p2.patch",
    "created_at": "2011-06-15T12:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105188",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:9'>Comment 9:</a>
apply trac_10734.dense_matrix_and_submatrix, trac_10734.02-documentation, trac_10734.03-referee_refactor_to_support_p2.patch



---

archive/issue_comments_105189.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nMaybe you should add .patch at the end of the names of your patches. Otherwise they are not recognised as such, it seems.",
    "created_at": "2011-09-30T20:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105189",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'>Comment 10:</a>
Maybe you should add .patch at the end of the names of your patches. Otherwise they are not recognised as such, it seems.



---

archive/issue_comments_105190.json:
```json
{
    "body": "Apply only this patch. Patch against 5.0.beta7",
    "created_at": "2012-03-12T16:49:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105190",
    "user": "https://github.com/loefflerd"
}
```

Apply only this patch. Patch against 5.0.beta7



---

archive/issue_comments_105191.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAttachment: **[trac_10734-dense_matrix_and_submatrix-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734-dense_matrix_and_submatrix-folded.patch.gz)**\n\nI qfolded Gonzalo's patches into a single patch, and made sure it has \".patch\" at the end of its name, as Frederic suggests. But with this (or, equivalently, Gonzalo's original three patches) installed I get some doctest failures in sage/matrix/matrix_modn_sparse -- any ideas what's causing that?",
    "created_at": "2012-03-12T16:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105191",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:11'>Comment 11:</a>
Attachment: **[trac_10734-dense_matrix_and_submatrix-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10734/trac_10734-dense_matrix_and_submatrix-folded.patch.gz)**

I qfolded Gonzalo's patches into a single patch, and made sure it has ".patch" at the end of its name, as Frederic suggests. But with this (or, equivalently, Gonzalo's original three patches) installed I get some doctest failures in sage/matrix/matrix_modn_sparse -- any ideas what's causing that?



---

archive/issue_events_125021.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:32:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125021"
}
```



---

archive/issue_events_125022.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T17:32:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125022"
}
```



---

archive/issue_comments_105192.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nLooks like the patchbot is getting the same failures, under both 4.8 and 5.0.beta7. I'm afraid that's \"needs work\", then. Here's an example of the kind of error that's coming up:\n\n```\nsage -t  -force_lib devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx\n**********************************************************************\nFile \"/Users/patchbot/sage-4.8/devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx\", line 635:\n    sage: A.dense_submatrix(24,24,3,3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/patchbot/sage-4.8/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/patchbot/sage-4.8/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/patchbot/sage-4.8/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_10[4]>\", line 1, in <module>\n        A.dense_submatrix(Integer(24),Integer(24),Integer(3),Integer(3))###line 635:\n    sage: A.dense_submatrix(24,24,3,3)\n      File \"matrix_modn_sparse.pyx\", line 655, in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.dense_submatrix (sage/matrix/matrix_modn_sparse.c:11628)\n        M = self.new_matrix(nrows, ncols, sparse=False)\n    TypeError: Cannot convert sage.matrix.matrix_modn_dense_float.Matrix_modn_dense_float to sage.matrix.matrix_mod_dense.Matrix_mod_dense\n**********************************************************************\n```",
    "created_at": "2012-03-12T17:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105192",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:12'>Comment 12:</a>
Looks like the patchbot is getting the same failures, under both 4.8 and 5.0.beta7. I'm afraid that's "needs work", then. Here's an example of the kind of error that's coming up:

```
sage -t  -force_lib devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx
**********************************************************************
File "/Users/patchbot/sage-4.8/devel/sage-10734/sage/matrix/matrix_modn_sparse.pyx", line 635:
    sage: A.dense_submatrix(24,24,3,3)
Exception raised:
    Traceback (most recent call last):
      File "/Users/patchbot/sage-4.8/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/patchbot/sage-4.8/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/patchbot/sage-4.8/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_10[4]>", line 1, in <module>
        A.dense_submatrix(Integer(24),Integer(24),Integer(3),Integer(3))###line 635:
    sage: A.dense_submatrix(24,24,3,3)
      File "matrix_modn_sparse.pyx", line 655, in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.dense_submatrix (sage/matrix/matrix_modn_sparse.c:11628)
        M = self.new_matrix(nrows, ncols, sparse=False)
    TypeError: Cannot convert sage.matrix.matrix_modn_dense_float.Matrix_modn_dense_float to sage.matrix.matrix_mod_dense.Matrix_mod_dense
**********************************************************************
```



---

archive/issue_events_125023.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125023"
}
```



---

archive/issue_events_125024.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125024"
}
```



---

archive/issue_events_125025.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125025"
}
```



---

archive/issue_events_125026.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125026"
}
```



---

archive/issue_events_125027.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125027"
}
```



---

archive/issue_events_125028.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125028"
}
```



---

archive/issue_events_125029.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125029"
}
```



---

archive/issue_events_125030.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125030"
}
```



---

archive/issue_events_125031.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-09-14T23:40:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125031"
}
```



---

archive/issue_events_125032.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-09-14T23:40:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125032"
}
```



---

archive/issue_comments_105193.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nGit branch and also has the fixes for the sparse conversion by making the `matrix_modn_dense_template` inherit from `matrix_mod_dense`\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0a74b9289d7f578b1e579a6d36fdc042f087bc2\">c0a74b9</a></td><td><code>#10734: Matrix_modn_sparse speed improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181\">8bc6935</a></td><td><code>Made modn dense template inherit from mod_dense.</code></td></tr></table>\n",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105193",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>Comment 17:</a>
Git branch and also has the fixes for the sparse conversion by making the `matrix_modn_dense_template` inherit from `matrix_mod_dense`

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0a74b9289d7f578b1e579a6d36fdc042f087bc2">c0a74b9</a></td><td><code>#10734: Matrix_modn_sparse speed improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181">8bc6935</a></td><td><code>Made modn dense template inherit from mod_dense.</code></td></tr></table>




---

archive/issue_comments_105194.json:
```json
{
    "body": "Changed reviewer from **William Stein** to **William Stein, Travis Scrimshaw**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105194",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **William Stein** to **William Stein, Travis Scrimshaw**



---

archive/issue_comments_105195.json:
```json
{
    "body": "Branch: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734)**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105195",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/matrix/improve_modn_sparse_methods-10734](https://github.com/sagemath/sagetrac-mirror/tree/public/matrix/improve_modn_sparse_methods-10734)**



---

archive/issue_comments_105196.json:
```json
{
    "body": "Commit: **[8bc6935](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)**",
    "created_at": "2014-09-14T23:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105196",
    "user": "https://github.com/tscrim"
}
```

Commit: **[8bc6935](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)**



---

archive/issue_events_125033.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-28T20:07:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125033"
}
```



---

archive/issue_events_125034.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-09-28T20:07:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125034"
}
```



---

archive/issue_comments_105197.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nneeds rebase",
    "created_at": "2014-09-28T20:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105197",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'>Comment 18:</a>
needs rebase



---

archive/issue_comments_105198.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6\">d3f8b5f</a></td><td><code>Merge branch 'public/matrix/improve_modn_sparse_methods-10734' of trac.sagemath.org:sage into public/matrix/improve_modn_sparse_methods-10734</code></td></tr></table>\n",
    "created_at": "2014-11-07T03:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105198",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6">d3f8b5f</a></td><td><code>Merge branch 'public/matrix/improve_modn_sparse_methods-10734' of trac.sagemath.org:sage into public/matrix/improve_modn_sparse_methods-10734</code></td></tr></table>




---

archive/issue_comments_105199.json:
```json
{
    "body": "Changed commit from **[8bc6935](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)** to **[d3f8b5f](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**",
    "created_at": "2014-11-07T03:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105199",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8bc6935](https://github.com/sagemath/sagetrac-mirror/commit/8bc6935c6085a2f7de0e227f2c961d4e875df181)** to **[d3f8b5f](https://github.com/sagemath/sagetrac-mirror/commit/d3f8b5fb5b220fcba8874484f6d09700409159b6)**



---

archive/issue_events_125035.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-11-07T03:41:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125035"
}
```



---

archive/issue_events_125036.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-11-07T03:41:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125036"
}
```



---

archive/issue_comments_105200.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nRebased to `6.4.rc1`.",
    "created_at": "2014-11-07T03:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105200",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
Rebased to `6.4.rc1`.



---

archive/issue_comments_105201.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nHello,\n\nWhat is the purpose of introducing the class `Matrix_mod_dense`?\n\nVincent",
    "created_at": "2015-01-25T17:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105201",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'>Comment 21:</a>
Hello,

What is the purpose of introducing the class `Matrix_mod_dense`?

Vincent



---

archive/issue_events_125037.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T17:29:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125037"
}
```



---

archive/issue_events_125038.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-01-25T17:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125038"
}
```



---

archive/issue_comments_105202.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nTicket #17837 proposes to remove `matrix_modn_dense` (it is unused since a long time and much slower than `matrix_modn_dense_float` or `matrix_modn_dense_double` using LinBox). Is there anybody working on this ticket that can say something about it? Otherwise I will put #17837 in positive review (and consequently this one in needs work).\n\nVincent",
    "created_at": "2015-02-23T22:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105202",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'>Comment 22:</a>
Ticket #17837 proposes to remove `matrix_modn_dense` (it is unused since a long time and much slower than `matrix_modn_dense_float` or `matrix_modn_dense_double` using LinBox). Is there anybody working on this ticket that can say something about it? Otherwise I will put #17837 in positive review (and consequently this one in needs work).

Vincent



---

archive/issue_events_125039.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125039"
}
```



---

archive/issue_events_125040.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125040"
}
```



---

archive/issue_events_125041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125041"
}
```



---

archive/issue_events_125042.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-02-24T16:37:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125042"
}
```



---

archive/issue_comments_105203.json:
```json
{
    "body": "Dependencies: **#17837**",
    "created_at": "2015-02-24T16:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10734#issuecomment-105203",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17837**



---

archive/issue_events_125043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:31:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10734",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10734#event-125043"
}
```
