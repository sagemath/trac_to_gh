# Issue 10491: Dump environment before building

archive/issues_010438.json:
```json
{
    "body": "\n\nAssignee: GeorgSWeber\n\nKeywords: scripts install\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer, Leif Leonhardy\n\nReviewer: Volker Braun\n\nMerged: sage-4.6.1.rc1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10491\n\n",
    "closed_at": "2011-01-05T08:20:02Z",
    "created_at": "2010-12-18T09:48:41Z",
    "labels": [
        "component: scripts",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.1",
    "title": "Dump environment before building",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10491",
    "user": "https://github.com/jdemeyer"
}
```


Assignee: GeorgSWeber

Keywords: scripts install

Resolution: fixed

Author: Jeroen Demeyer, Leif Leonhardy

Reviewer: Volker Braun

Merged: sage-4.6.1.rc1

Issue created by migration from https://trac.sagemath.org/ticket/10491





---

archive/issue_comments_127744.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-18T09:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127744",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127745.json:
```json
{
    "body": "SCRIPTS",
    "created_at": "2010-12-18T09:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127745",
    "user": "https://github.com/jdemeyer"
}
```

SCRIPTS



---

archive/issue_comments_127746.json:
```json
{
    "body": "<a id='comment:2'></a>\nAttachment [10491_install_dump_env.patch](tarball://root/attachments/some-uuid/ticket10491/10491_install_dump_env.patch) by @jdemeyer created at 2010-12-18 16:38:13",
    "created_at": "2010-12-18T16:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
Attachment [10491_install_dump_env.patch](tarball://root/attachments/some-uuid/ticket10491/10491_install_dump_env.patch) by @jdemeyer created at 2010-12-18 16:38:13



---

archive/issue_comments_127747.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks good!",
    "created_at": "2010-12-24T18:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127747",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
Looks good!



---

archive/issue_comments_127748.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2010-12-24T18:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127748",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_127749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-12-24T18:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127749",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-12-24T20:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127750",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_127751.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.6.1.rc0\"",
    "created_at": "2010-12-24T20:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127751",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.6.1.rc0"



---

archive/issue_events_039905.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-24T20:01:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10491#event-39905"
}
```



---

archive/issue_comments_127752.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Don't always dump the whole environment.\"",
    "created_at": "2010-12-27T01:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127752",
    "user": "https://github.com/nexttime"
}
```

Changing work_issues from "" to "Don't always dump the whole environment."



---

archive/issue_comments_127753.json:
```json
{
    "body": "<a id='comment:5'></a>\nIMHO **needs work**.\n\nIt's totally odd to dump the whole environment whenever `make something` is run, where `something` includes `doc`, `ptestlong` and most of all other targets.\n\nI would\n* make the output depend on some environment variable (*not* `SAGE_DEBUG` ;-) , but perhaps `SAGE_DEBUG_BUILD` to be also used elsewhere),\n* limit the output to \"relevant\" variables; I e.g. personally use\n\n```sh\nprintenv | egrep \"SAGE|MAKE|CC|CXX|FLAG|LC|TMP|TEMP\" | sort\n```\n (which you would certainly extend I think),\n* use `printenv`, the shell built-in, instead of `env`.\n\n\nSorry, had some \"Sage-free Days\"...",
    "created_at": "2010-12-27T01:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127753",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
IMHO **needs work**.

It's totally odd to dump the whole environment whenever `make something` is run, where `something` includes `doc`, `ptestlong` and most of all other targets.

I would
* make the output depend on some environment variable (*not* `SAGE_DEBUG` ;-) , but perhaps `SAGE_DEBUG_BUILD` to be also used elsewhere),
* limit the output to "relevant" variables; I e.g. personally use

```sh
printenv | egrep "SAGE|MAKE|CC|CXX|FLAG|LC|TMP|TEMP" | sort
```
 (which you would certainly extend I think),
* use `printenv`, the shell built-in, instead of `env`.


Sorry, had some "Sage-free Days"...



---

archive/issue_comments_127754.json:
```json
{
    "body": "<a id='comment:6'></a>\nYou could also do (one of or some other combination of) the following:\n\n```diff\n--- Makefile.orig\t2010-12-24 13:39:58.000000000 +0100\n+++ Makefile\t2010-12-27 02:38:20.000000000 +0100\n@@ -43,7 +43,7 @@\n #\ttest -x $@ # or make it executable if it exists; sanity check only anyway\n \n build: $(PIPE)\n-\tcd spkg && \"../$(PIPE)\" \"./install all 2>&1\" \"tee -a ../install.log\"\n+\tcd spkg && env MAKECMDGOALS=\"$(MAKECMDGOALS)\" \"../$(PIPE)\" \"./install all 2>&1\" \"tee -a ../install.log\"\n \n doc: doc-html\n \n--- spkg/install.orig\t2010-12-26 23:28:59.000000000 +0100\n+++ spkg/install\t2010-12-27 03:10:04.000000000 +0100\n@@ -432,10 +432,26 @@\n export ZNPOLY\n \n \n-# Dump environment for debugging purposes:\n-echo \"*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\"\n-env\n-echo \"***********************************************\"\n+# Skip the rest if nothing to do (i.e., to [re]build):\n+# (Note that we should use $MAKE here, but we currently don't use\n+# it further below either unless SAGE_PARALLEL_SPKG_BUILD=yes, which\n+# I consider a \"bug\".)\n+if make -q -f standard/deps $1; then\n+    echo\n+    echo \"Nothing to (re)build / all up-to-date.\"\n+    echo\n+    exit 0\n+fi\n+\n+# ALTERNATIVELY:\n+\n+# Only dump the environment when 'make' or 'make build' was issued:\n+if ! echo $MAKECMDGOALS | egrep \"doc|test\" >/dev/null; then\n+    # Dump environment for debugging purposes:\n+    echo \"*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\"\n+    env\n+    echo \"***********************************************\"\n+fi\n \n \n ###############################################################################\n```\n\n---\n\nP.S.: I did not know you are the copyright owner of our rewritten `pipestatus`... ;-)",
    "created_at": "2010-12-27T02:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127754",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>
You could also do (one of or some other combination of) the following:

```diff
--- Makefile.orig	2010-12-24 13:39:58.000000000 +0100
+++ Makefile	2010-12-27 02:38:20.000000000 +0100
@@ -43,7 +43,7 @@
 #	test -x $@ # or make it executable if it exists; sanity check only anyway
 
 build: $(PIPE)
-	cd spkg && "../$(PIPE)" "./install all 2>&1" "tee -a ../install.log"
+	cd spkg && env MAKECMDGOALS="$(MAKECMDGOALS)" "../$(PIPE)" "./install all 2>&1" "tee -a ../install.log"
 
 doc: doc-html
 
--- spkg/install.orig	2010-12-26 23:28:59.000000000 +0100
+++ spkg/install	2010-12-27 03:10:04.000000000 +0100
@@ -432,10 +432,26 @@
 export ZNPOLY
 
 
-# Dump environment for debugging purposes:
-echo "*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***"
-env
-echo "***********************************************"
+# Skip the rest if nothing to do (i.e., to [re]build):
+# (Note that we should use $MAKE here, but we currently don't use
+# it further below either unless SAGE_PARALLEL_SPKG_BUILD=yes, which
+# I consider a "bug".)
+if make -q -f standard/deps $1; then
+    echo
+    echo "Nothing to (re)build / all up-to-date."
+    echo
+    exit 0
+fi
+
+# ALTERNATIVELY:
+
+# Only dump the environment when 'make' or 'make build' was issued:
+if ! echo $MAKECMDGOALS | egrep "doc|test" >/dev/null; then
+    # Dump environment for debugging purposes:
+    echo "*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***"
+    env
+    echo "***********************************************"
+fi
 
 
 ###############################################################################
```

---

P.S.: I did not know you are the copyright owner of our rewritten `pipestatus`... ;-)



---

archive/issue_comments_127755.json:
```json
{
    "body": "<a id='comment:7'></a>\n(You could invert the test on `$MAKECMDGOALS` to\n\n```sh\nif [ -z \"$MAKECMDGOALS\" ] || (echo $MAKECMDGOALS | egrep \"build|all\" >/dev/null); then\n    # dump all (or some) env vars\n    ...\nfi\n```\n)\n\nThe \"early exit\" in my patch above is IMHO useful anyway, since always printing\n\n```\nTo install gap, gp, singular, etc., scripts\nin a standard bin directory, start sage and\ntype something like\n   sage: install_scripts('/usr/local/bin')\nat the Sage command prompt.\n\nTo build the documentation, run\n   make doc\n\nSage build/upgrade complete!\n```\nis also dumb.",
    "created_at": "2010-12-27T02:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127755",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>
(You could invert the test on `$MAKECMDGOALS` to

```sh
if [ -z "$MAKECMDGOALS" ] || (echo $MAKECMDGOALS | egrep "build|all" >/dev/null); then
    # dump all (or some) env vars
    ...
fi
```
)

The "early exit" in my patch above is IMHO useful anyway, since always printing

```
To install gap, gp, singular, etc., scripts
in a standard bin directory, start sage and
type something like
   sage: install_scripts('/usr/local/bin')
at the Sage command prompt.

To build the documentation, run
   make doc

Sage build/upgrade complete!
```
is also dumb.



---

archive/issue_comments_127756.json:
```json
{
    "body": "<a id='comment:8'></a>\nP.P.S., related:\n\nImplementing `sage -printenv` is also on my TODO list since a while...\n\n(This should only print relevant variables, e.g. set/used in `sage-env`, grouped by category.)",
    "created_at": "2010-12-27T02:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127756",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
P.P.S., related:

Implementing `sage -printenv` is also on my TODO list since a while...

(This should only print relevant variables, e.g. set/used in `sage-env`, grouped by category.)



---

archive/issue_comments_127757.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [leif](#comment%3A5):\n> It's totally odd to dump the whole environment whenever `make something` is run, where `something` includes `doc`, `ptestlong` and most of all other targets.\n\nAgreed.\n\n> I would\n> * make the output depend on some environment variable (*not* `SAGE_DEBUG` ;-) , but perhaps `SAGE_DEBUG_BUILD` to be also used elsewhere),\n\nMakes sense.\n\n>  * limit the output to \"relevant\" variables; I e.g. personally use\n \nDisagree, you never know in advance which environment variables are \"relevant\".  If a build fails, it might be because of some obscure environment variable.  That's why I added this patch.\n\n>  * use `printenv`, the shell built-in, instead of `env`.\n \nDisagree, `env` is more portable than `printenv`.",
    "created_at": "2010-12-27T12:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127757",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [leif](#comment%3A5):
> It's totally odd to dump the whole environment whenever `make something` is run, where `something` includes `doc`, `ptestlong` and most of all other targets.

Agreed.

> I would
> * make the output depend on some environment variable (*not* `SAGE_DEBUG` ;-) , but perhaps `SAGE_DEBUG_BUILD` to be also used elsewhere),

Makes sense.

>  * limit the output to "relevant" variables; I e.g. personally use
 
Disagree, you never know in advance which environment variables are "relevant".  If a build fails, it might be because of some obscure environment variable.  That's why I added this patch.

>  * use `printenv`, the shell built-in, instead of `env`.
 
Disagree, `env` is more portable than `printenv`.



---

archive/issue_comments_127758.json:
```json
{
    "body": "Changing work_issues from \"Don't always dump the whole environment.\" to \"Don't always dump the environment.\"",
    "created_at": "2010-12-27T12:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127758",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "Don't always dump the whole environment." to "Don't always dump the environment."



---

archive/issue_comments_127759.json:
```json
{
    "body": "<a id='comment:10'></a>\nTo me, it makes sense to me to always dump the environment before running make ptest/ptestlong. For example, say, I change an environment variable and testing breaks today, but I know it worked yesterday... For the same reason, I don't like it to be contingent on some \"debug\" environment variable. Its good to be able to compare with previously working tests.\n\nAnd if you look at the size of the `install.log`, thats just a drop of water in the ocean. Saving 4k of disk space? really, we are even discussing this?",
    "created_at": "2010-12-27T16:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127759",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
To me, it makes sense to me to always dump the environment before running make ptest/ptestlong. For example, say, I change an environment variable and testing breaks today, but I know it worked yesterday... For the same reason, I don't like it to be contingent on some "debug" environment variable. Its good to be able to compare with previously working tests.

And if you look at the size of the `install.log`, thats just a drop of water in the ocean. Saving 4k of disk space? really, we are even discussing this?



---

archive/issue_comments_127760.json:
```json
{
    "body": "<a id='comment:11'></a>\nEdit your `~/.sagerc`.\n\nMost of the environment is completely unrelated to Sage, and will annoy ordinary users.\n\n\n\nWe already had long discussions regarding the removal of (short!) useless messages like \"*Building a 64-bit version of Sage*\".\n\n\n\nI'm also strongly in favour of first running `make -q` before (usually one-time) build-related messages are printed. `ptestlong` etc. are likely to be run much more often than a real (re)build is performed.\n\nIf you need it, you can add `ptestlong-debug` etc. targets to the top-level `Makefile`.",
    "created_at": "2010-12-27T16:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127760",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
Edit your `~/.sagerc`.

Most of the environment is completely unrelated to Sage, and will annoy ordinary users.



We already had long discussions regarding the removal of (short!) useless messages like "*Building a 64-bit version of Sage*".



I'm also strongly in favour of first running `make -q` before (usually one-time) build-related messages are printed. `ptestlong` etc. are likely to be run much more often than a real (re)build is performed.

If you need it, you can add `ptestlong-debug` etc. targets to the top-level `Makefile`.



---

archive/issue_comments_127761.json:
```json
{
    "body": "<a id='comment:12'></a>\nFine. I don't really care what the color of your bike shed is. If you post a patch that at least somehow adds a dump of environment variables to the log then I'll review it positively for you. If its not in time for Sage-4.6.1 then preferably in a different ticket.",
    "created_at": "2010-12-27T18:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127761",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
Fine. I don't really care what the color of your bike shed is. If you post a patch that at least somehow adds a dump of environment variables to the log then I'll review it positively for you. If its not in time for Sage-4.6.1 then preferably in a different ticket.



---

archive/issue_comments_127762.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [leif](#comment%3A11):\n> Most of the environment is completely unrelated to Sage\n\nThis is certainly true, but as I have said before: you never know in advance which environment variables are relevant, so better print them all.",
    "created_at": "2011-01-03T10:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127762",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [leif](#comment%3A11):
> Most of the environment is completely unrelated to Sage

This is certainly true, but as I have said before: you never know in advance which environment variables are relevant, so better print them all.



---

archive/issue_comments_127763.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-01-03T10:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127763",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_127764.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-01-03T10:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127764",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_039906.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-03T10:35:37Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10491#event-39906"
}
```



---

archive/issue_comments_127765.json:
```json
{
    "body": "Attachment [10491_skip.patch](tarball://root/attachments/some-uuid/ticket10491/10491_skip.patch) by @jdemeyer created at 2011-01-03 10:36:31\n\nSCRIPTS, Apply on top of previous",
    "created_at": "2011-01-03T10:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127765",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [10491_skip.patch](tarball://root/attachments/some-uuid/ticket10491/10491_skip.patch) by @jdemeyer created at 2011-01-03 10:36:31

SCRIPTS, Apply on top of previous



---

archive/issue_comments_127766.json:
```json
{
    "body": "<a id='comment:15'></a>\nLeif, I implemented your \"skip the rest of the script if nothing to do\" patch.",
    "created_at": "2011-01-03T10:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127766",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Leif, I implemented your "skip the rest of the script if nothing to do" patch.



---

archive/issue_comments_127767.json:
```json
{
    "body": "Changing author from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Leif Leonhardy\"",
    "created_at": "2011-01-03T10:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127767",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Jeroen Demeyer" to "Jeroen Demeyer, Leif Leonhardy"



---

archive/issue_comments_127768.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-03T10:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127768",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127769.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-03T11:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127769",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127770.json:
```json
{
    "body": "Changing merged from \"sage-4.6.1.rc0\" to \"\"",
    "created_at": "2011-01-03T11:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127770",
    "user": "https://github.com/vbraun"
}
```

Changing merged from "sage-4.6.1.rc0" to ""



---

archive/issue_comments_127771.json:
```json
{
    "body": "<a id='comment:16'></a>\nLooks good to me.\n\nFor the release manager: First apply 10491_install_dump_env.patch (merged in Sage-4.6.1.rc0), then 10491_skip.patch\n\nAll patches apply within `$SAGE_ROOT/spkg/`",
    "created_at": "2011-01-03T11:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127771",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Looks good to me.

For the release manager: First apply 10491_install_dump_env.patch (merged in Sage-4.6.1.rc0), then 10491_skip.patch

All patches apply within `$SAGE_ROOT/spkg/`



---

archive/issue_events_039907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-05T08:20:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10491#event-39907"
}
```



---

archive/issue_comments_127772.json:
```json
{
    "body": "Changing work_issues from \"Don't always dump the environment.\" to \"\"",
    "created_at": "2011-01-05T08:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127772",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "Don't always dump the environment." to ""



---

archive/issue_comments_127773.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.6.1.rc1\"",
    "created_at": "2011-01-05T08:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127773",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.6.1.rc1"



---

archive/issue_comments_127774.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-05T08:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10491#issuecomment-127774",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
