# Issue 10244: legends don't save correctly

archive/issues_010243.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/williamstein"
    ],
    "body": "The new plot legends look great, but generate an error when you try to save them.\n\nFor example:\n\n```\na1 = plot(sin,-pi,pi,legend_label='sin')\na2 = plot(cos,-pi,pi,legend_label='cos',rgbcolor='red')\ntwo_plots = a1+a2\ntwo_plots.save('./two_plots.png')\n```\n\ngives the error:\n\n```\nKeyError: 'pop(): dictionary is empty'\n```\n\n**Apply:** [attachment: trac_10244_legend_label_fix_v3.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz) and [attachment: trac_10244-reviewer.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)\n\nCC:  @kcrisman @jasongrout @novoselt\n\nComponent: **graphics**\n\nAuthor: **Marshall Hampton**\n\nReviewer: **Karl-Dieter Crisman**\n\nMerged: **sage-4.6.2.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10244_\n\n",
    "closed_at": "2011-01-25T08:15:08Z",
    "created_at": "2010-11-10T06:33:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "legends don't save correctly",
    "type": "issue",
    "updated_at": "2011-01-25T08:15:08Z",
    "url": "https://github.com/sagemath/sage/issues/10244",
    "user": "https://github.com/sagetrac-mhampton"
}
```
The new plot legends look great, but generate an error when you try to save them.

For example:

```
a1 = plot(sin,-pi,pi,legend_label='sin')
a2 = plot(cos,-pi,pi,legend_label='cos',rgbcolor='red')
two_plots = a1+a2
two_plots.save('./two_plots.png')
```

gives the error:

```
KeyError: 'pop(): dictionary is empty'
```

**Apply:** [attachment: trac_10244_legend_label_fix_v3.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz) and [attachment: trac_10244-reviewer.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)

CC:  @kcrisman @jasongrout @novoselt

Component: **graphics**

Author: **Marshall Hampton**

Reviewer: **Karl-Dieter Crisman**

Merged: **sage-4.6.2.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/10244_





---

archive/issue_events_134500.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-11-10T06:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134500"
}
```



---

archive/issue_events_134501.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-11-10T06:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134501"
}
```



---

archive/issue_events_134502.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2010-11-10T06:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134502"
}
```



---

archive/issue_events_134503.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-11-10T06:33:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134503"
}
```



---

archive/issue_events_134504.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-10T06:33:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134504"
}
```



---

archive/issue_comments_095395.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks for noticing this, Marshall.  In particular:\n\n```\n/Users/.../sage-4.6.1.alpha0/local/lib/python2.6/site-packages/sage/plot/plot.pyc in matplotlib(self, filename, xmin, xmax, ymin, ymax, figsize, figure, sub, axes, axes_labels, fontsize, frame, verify, aspect_ratio, gridlines, gridlinesstyle, vgridlinesstyle, hgridlinesstyle, show_legend, legend_options, axes_pad, ticks_integer, tick_formatter, ticks)\n   1965             lopts.update(legend_options)\n   1966             lopts.update(self.__legend_opts)\n-> 1967             prop = FontProperties(family=lopts.pop('font_family'), weight=lopts.pop('font_weight'), \\\n   1968                     size=lopts.pop('font_size'), style=lopts.pop('font_style'), variant=lopts.pop('font_variant'))\n   1969             color = lopts.pop('back_color')\n```\nSo we've already popped everything while saving in `.matplotlib`, but then try to pop some other options like `font_family`.  I would think those were already given in some `@options` thingie, but maybe they weren't.  I don't have time to check more into this, but I suspect the suboptions decorator has something to do with this - maybe we never initialized them but then try to access them.",
    "created_at": "2010-11-10T16:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95395",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks for noticing this, Marshall.  In particular:

```
/Users/.../sage-4.6.1.alpha0/local/lib/python2.6/site-packages/sage/plot/plot.pyc in matplotlib(self, filename, xmin, xmax, ymin, ymax, figsize, figure, sub, axes, axes_labels, fontsize, frame, verify, aspect_ratio, gridlines, gridlinesstyle, vgridlinesstyle, hgridlinesstyle, show_legend, legend_options, axes_pad, ticks_integer, tick_formatter, ticks)
   1965             lopts.update(legend_options)
   1966             lopts.update(self.__legend_opts)
-> 1967             prop = FontProperties(family=lopts.pop('font_family'), weight=lopts.pop('font_weight'), \
   1968                     size=lopts.pop('font_size'), style=lopts.pop('font_style'), variant=lopts.pop('font_variant'))
   1969             color = lopts.pop('back_color')
```
So we've already popped everything while saving in `.matplotlib`, but then try to pop some other options like `font_family`.  I would think those were already given in some `@options` thingie, but maybe they weren't.  I don't have time to check more into this, but I suspect the suboptions decorator has something to do with this - maybe we never initialized them but then try to access them.



---

archive/issue_comments_095396.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThen a probably related issue is that this saving command:\n\n```\nplot(x,(x,0,1),aspect_ratio=1).save('test.png')\n```\n\ndoes *not* save a plot with aspect_ratio=1.  If this isn't related, I guess we should open a new ticket.",
    "created_at": "2010-11-10T16:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95396",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Then a probably related issue is that this saving command:

```
plot(x,(x,0,1),aspect_ratio=1).save('test.png')
```

does *not* save a plot with aspect_ratio=1.  If this isn't related, I guess we should open a new ticket.



---

archive/issue_comments_095397.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI wonder if something like #7981 (or a rebased and updated version) could fix this?  I think the problem in my comment is directly related to #7981.",
    "created_at": "2010-11-10T16:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95397",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

I wonder if something like #7981 (or a rebased and updated version) could fix this?  I think the problem in my comment is directly related to #7981.



---

archive/issue_comments_095398.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jasongrout](#comment:3):\n> I wonder if something like #7981 (or a rebased and updated version) could fix this?  I think the problem in my comment is directly related to #7981.\n\nHmm, this seems quite likely - if the options are mostly used in show, not save.  I'd have to actually try it out and follow the code through, though, and that won't happen soon :(",
    "created_at": "2010-11-11T01:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95398",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jasongrout](#comment:3):
> I wonder if something like #7981 (or a rebased and updated version) could fix this?  I think the problem in my comment is directly related to #7981.

Hmm, this seems quite likely - if the options are mostly used in show, not save.  I'd have to actually try it out and follow the code through, though, and that won't happen soon :(



---

archive/issue_comments_095399.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nUnfortunately the current fix at #7981 does NOT fix this.  Its extremely annoying for me, since I am currently in a project in which my group needs rather baroque plots and the legend is essential.",
    "created_at": "2011-01-12T01:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95399",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

Unfortunately the current fix at #7981 does NOT fix this.  Its extremely annoying for me, since I am currently in a project in which my group needs rather baroque plots and the legend is essential.



---

archive/issue_comments_095400.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis seems like a clue:\n\n```\nsage: p= plot(x,(x,0,10),legend_label='Fantastic legend label', gridlines='major')\nsage: print p._extra_kwds\n{'gridlines': 'major'}\n```\n\nI would think that the legend info would show up in _extra_kwds, but I my understanding of the plotting code is weak.",
    "created_at": "2011-01-12T01:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95400",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:6" align="right">comment:6</div>

This seems like a clue:

```
sage: p= plot(x,(x,0,10),legend_label='Fantastic legend label', gridlines='major')
sage: print p._extra_kwds
{'gridlines': 'major'}
```

I would think that the legend info would show up in _extra_kwds, but I my understanding of the plotting code is weak.



---

archive/issue_comments_095401.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think I figured this out, patch coming in a moment.",
    "created_at": "2011-01-12T02:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95401",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:8" align="right">comment:8</div>

I think I figured this out, patch coming in a moment.



---

archive/issue_comments_095402.json:
```json
{
    "body": "Fixes problem by adding suboptions decorator to save command",
    "created_at": "2011-01-12T02:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95402",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Fixes problem by adding suboptions decorator to save command



---

archive/issue_comments_095403.json:
```json
{
    "body": "Author: **Marshall Hampton**",
    "created_at": "2011-01-12T02:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95403",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Author: **Marshall Hampton**



---

archive/issue_events_134505.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T02:14:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134505"
}
```



---

archive/issue_comments_095404.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[trac_10244_legend_label_fix.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix.patch.gz)**",
    "created_at": "2011-01-12T02:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95404",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[trac_10244_legend_label_fix.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix.patch.gz)**



---

archive/issue_comments_095405.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n\"maybe we never initialized them but then try to access them.\"   Glad to know that I did sort of understand it :)  If no one reviews this, I might look at it tomorrow.",
    "created_at": "2011-01-12T02:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95405",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

"maybe we never initialized them but then try to access them."   Glad to know that I did sort of understand it :)  If no one reviews this, I might look at it tomorrow.



---

archive/issue_events_134506.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-01-12T15:19:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134506"
}
```



---

archive/issue_events_134507.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-01-12T15:19:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134507"
}
```



---

archive/issue_comments_095406.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis does fix the original problem.  That should be doctested, something like\n\n```\nsage: P = plot(x,(x,0,1),legend_label='$xyz$')\nsage: P.set_legend_options(back_color=(1,0,0))\nsage: P.set_legend_options(loc=7)\nsage: P.save() # but with the usual temp saving directory used!\n```\n\nIt does NOT seem to fix Jason's issue with\n\n```\nplot(x,(x,0,1),aspect_ratio=1).save('test.png')\n```\nNor does it fix this :(\n\n```\nsage: P = plot(x,(x,0,1),legend_label='$xyz$')\nsage: P.set_legend_options(back_color=(1,0,0))\nsage: P # has nasty red background for label\nsage: Q = plot(x,(x,0,1),legend_label='$xyz$')\nsage: Q = plot(x,(x,0,1),legend_label='$xyz$',legend_back_color=(1,0,0))\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<snip>\n/Users/.../sage-4.6.1.rc1/local/lib/python2.6/site-packages/sage/plot/line.pyc in __init__(self, xdata, ydata, options)\n     46         for opt in options.iterkeys():\n     47             if opt not in valid_options:\n---> 48                 raise RuntimeError(\"Error in line(): option '%s' not valid.\"%opt)\n     49         self.xdata = xdata\n     50         self.ydata = ydata\n\nRuntimeError: Error in line(): option 'legend_back_color' not valid.\n```\nSo we aren't done yet.  But probably that should be a different ticket, since these suboptions didn't work before anyway.  Apparently we never doctested them!  Which is probably my and/or Jason's fault... :(",
    "created_at": "2011-01-12T15:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95406",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

This does fix the original problem.  That should be doctested, something like

```
sage: P = plot(x,(x,0,1),legend_label='$xyz$')
sage: P.set_legend_options(back_color=(1,0,0))
sage: P.set_legend_options(loc=7)
sage: P.save() # but with the usual temp saving directory used!
```

It does NOT seem to fix Jason's issue with

```
plot(x,(x,0,1),aspect_ratio=1).save('test.png')
```
Nor does it fix this :(

```
sage: P = plot(x,(x,0,1),legend_label='$xyz$')
sage: P.set_legend_options(back_color=(1,0,0))
sage: P # has nasty red background for label
sage: Q = plot(x,(x,0,1),legend_label='$xyz$')
sage: Q = plot(x,(x,0,1),legend_label='$xyz$',legend_back_color=(1,0,0))
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<snip>
/Users/.../sage-4.6.1.rc1/local/lib/python2.6/site-packages/sage/plot/line.pyc in __init__(self, xdata, ydata, options)
     46         for opt in options.iterkeys():
     47             if opt not in valid_options:
---> 48                 raise RuntimeError("Error in line(): option '%s' not valid."%opt)
     49         self.xdata = xdata
     50         self.ydata = ydata

RuntimeError: Error in line(): option 'legend_back_color' not valid.
```
So we aren't done yet.  But probably that should be a different ticket, since these suboptions didn't work before anyway.  Apparently we never doctested them!  Which is probably my and/or Jason's fault... :(



---

archive/issue_comments_095407.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2011-01-12T15:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95407",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_095408.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry - to be clear, the 'needs work' is with respect to the doctest which is needed.\n\nJason's thing is probably about `SHOW_OPTIONS` having `aspect_ratio` but `save` not having it directly defined.  Interestingly, in the documentation for `save()`, this example DOES work.\n\n```\n\n        EXAMPLES::\n        \n            sage: c = circle((1,1),1,color='red')\n            sage: filename=os.path.join(SAGE_TMP, 'test.png')\n            sage: c.save(filename, xmin=-1,xmax=3,ymin=-1,ymax=3)\n\n        To correct the aspect ratio of certain graphics, you can \n        set the ``aspect_ratio`` to 1::\n        \n            sage: c.save(filename, aspect_ratio=1, xmin=-1, xmax=3, ymin=-1, ymax=3)\n```\nBut I think this is because we have new defaults for `aspect_ratio`, not because this works in general.\n\n```\nsage: c = circle((1,1),1,color='red')\nsage: c.save(xmin=-1,xmax=5,aspect_ratio=4) # works\nsage: c = circle((1,1),1,color='red',aspect_ratio=4)\nsage: c.save(xmin=-1,xmax=5) # still aspect ratio 1\n```\n\nAny thoughts on how many tickets this should all get divided into?",
    "created_at": "2011-01-12T15:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95408",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry - to be clear, the 'needs work' is with respect to the doctest which is needed.

Jason's thing is probably about `SHOW_OPTIONS` having `aspect_ratio` but `save` not having it directly defined.  Interestingly, in the documentation for `save()`, this example DOES work.

```

        EXAMPLES::
        
            sage: c = circle((1,1),1,color='red')
            sage: filename=os.path.join(SAGE_TMP, 'test.png')
            sage: c.save(filename, xmin=-1,xmax=3,ymin=-1,ymax=3)

        To correct the aspect ratio of certain graphics, you can 
        set the ``aspect_ratio`` to 1::
        
            sage: c.save(filename, aspect_ratio=1, xmin=-1, xmax=3, ymin=-1, ymax=3)
```
But I think this is because we have new defaults for `aspect_ratio`, not because this works in general.

```
sage: c = circle((1,1),1,color='red')
sage: c.save(xmin=-1,xmax=5,aspect_ratio=4) # works
sage: c = circle((1,1),1,color='red',aspect_ratio=4)
sage: c.save(xmin=-1,xmax=5) # still aspect ratio 1
```

Any thoughts on how many tickets this should all get divided into?



---

archive/issue_comments_095409.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_10244_legend_label_fix_v2.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v2.patch.gz)**\n\nAttached patch trac_10244_legend_label_fix_v2.patch is cumulative, includes Karl-Dieter's test suggestion.\n\nI am also posting a cumulative patch with #7981 since they don't merge nicely.",
    "created_at": "2011-01-12T17:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95409",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_10244_legend_label_fix_v2.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v2.patch.gz)**

Attached patch trac_10244_legend_label_fix_v2.patch is cumulative, includes Karl-Dieter's test suggestion.

I am also posting a cumulative patch with #7981 since they don't merge nicely.



---

archive/issue_events_134508.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T17:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134508"
}
```



---

archive/issue_events_134509.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T17:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134509"
}
```



---

archive/issue_events_134510.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T18:42:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134510"
}
```



---

archive/issue_events_134511.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T18:42:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134511"
}
```



---

archive/issue_comments_095410.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nJust realized I need to format my test better for documentation.",
    "created_at": "2011-01-12T18:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95410",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:15" align="right">comment:15</div>

Just realized I need to format my test better for documentation.



---

archive/issue_comments_095411.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis is not directly related to this ticket, but are there any plans to make something better for the numerous plot options? My concern is that the default values seems to be repeated in different places, e.g. this ticket adds them for save. This makes is difficult to change the default values since one has to find all places where they are set. It would be nice also to provide some user interface for adjusting all defaults, i.e. let the user call some commands in the beginning of the session to affect all plots. I have tried to address this for fans and cones at #9664: single storage for all defaults and a possibility to tweak them. Clearly I like that approach since I have written it, but I think that it has some objective advantages.",
    "created_at": "2011-01-12T18:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95411",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:16" align="right">comment:16</div>

This is not directly related to this ticket, but are there any plans to make something better for the numerous plot options? My concern is that the default values seems to be repeated in different places, e.g. this ticket adds them for save. This makes is difficult to change the default values since one has to find all places where they are set. It would be nice also to provide some user interface for adjusting all defaults, i.e. let the user call some commands in the beginning of the session to affect all plots. I have tried to address this for fans and cones at #9664: single storage for all defaults and a possibility to tweak them. Clearly I like that approach since I have written it, but I think that it has some objective advantages.



---

archive/issue_comments_095412.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThat's a great idea.  Some of these defaults can be manipulated already (such as xmin!) but I don't know that one would want to do each one by hand.   If you have a concrete idea for making this all work (once tickets like these are closed) please put me in the cc: field.  The plot code is already pretty hard for newcomers to find their way around, despite simplifications and refactorings of the past, so more help is great.",
    "created_at": "2011-01-12T20:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95412",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

That's a great idea.  Some of these defaults can be manipulated already (such as xmin!) but I don't know that one would want to do each one by hand.   If you have a concrete idea for making this all work (once tickets like these are closed) please put me in the cc: field.  The plot code is already pretty hard for newcomers to find their way around, despite simplifications and refactorings of the past, so more help is great.



---

archive/issue_comments_095413.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment:17):\n> That's a great idea.  Some of these defaults can be manipulated already (such as xmin!) but I don't know that one would want to do each one by hand.   If you have a concrete idea for making this all work (once tickets like these are closed) please put me in the cc: field.  The plot code is already pretty hard for newcomers to find their way around, despite simplifications and refactorings of the past, so more help is great.\n\nWell, in principal `toric_plotter` (which is merged and is in the global name space) is concrete and working.\n\nIt has inside a dictionary for \"Sage default options\" and another one for \"current user default options.\" Users can use commands like `toric_plotter.options(ray_thickness=2)` to change defaults for consecutive commands (and I found it very convenient for use with SageTeX, where \"Sage defaults\" don't work nicely). There is no separation into options that are easy to change and options that are difficult to change, all are treated in the same way.\n\nWhen a fan or a cone is plotted, it starts with a copy of \"current user default options\" and replaces any values in it with arguments of the plot command, if any. Then these options are used for actual plotting.\n\nAlso, all toric plotting commands have a reference to `toric_plotter.options` so all options are described in a singe place, eliminating redundancy and improving consistency.\n\nSo I was thinking of something like `plot.options(xmin=-10, xmax=10, color=\"red\")` to affect all future plotting commands in the session. One of the drawbacks of current decorators like\n\n```\nsage: plot.options\n{'fillalpha': 0.5, 'detect_poles': False, 'plot_points': 200, 'thickness': 1,\n 'alpha': 1, 'adaptive_tolerance': 0.01, 'fillcolor': 'automatic',\n 'adaptive_recursion': 5, 'exclude': None, 'legend_label': None,\n 'rgbcolor': (0, 0, 1), 'fill': False}\n```\nis that there is no description of options and they are not always easy to understand, e.g. what is `adaptive_recursion`? This is especially important if some options are \"smartly\" chosen based on others. E.g. it would be reasonable to set `fill=True` if the user has explicitly provided `fillcolor`, but such a behaviour should be explained. Note that in `circle.options` there is `FACEcolor` instead of `FILLcolor`. I suppose they are the same but got named differently because of writing the same thing in different places. Inconsistency in naming parameters and their interpretation also makes it hard to write plotting code that works both for 2d and 3d, leading to extra `if dim == 2: ... elif dim ==3: ...` for no good reason.\n\nUnfortunately, I already put a bit on my plate so rewriting plotting code is not on my todo list for now and I just complain...",
    "created_at": "2011-01-12T23:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95413",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment:17):
> That's a great idea.  Some of these defaults can be manipulated already (such as xmin!) but I don't know that one would want to do each one by hand.   If you have a concrete idea for making this all work (once tickets like these are closed) please put me in the cc: field.  The plot code is already pretty hard for newcomers to find their way around, despite simplifications and refactorings of the past, so more help is great.

Well, in principal `toric_plotter` (which is merged and is in the global name space) is concrete and working.

It has inside a dictionary for "Sage default options" and another one for "current user default options." Users can use commands like `toric_plotter.options(ray_thickness=2)` to change defaults for consecutive commands (and I found it very convenient for use with SageTeX, where "Sage defaults" don't work nicely). There is no separation into options that are easy to change and options that are difficult to change, all are treated in the same way.

When a fan or a cone is plotted, it starts with a copy of "current user default options" and replaces any values in it with arguments of the plot command, if any. Then these options are used for actual plotting.

Also, all toric plotting commands have a reference to `toric_plotter.options` so all options are described in a singe place, eliminating redundancy and improving consistency.

So I was thinking of something like `plot.options(xmin=-10, xmax=10, color="red")` to affect all future plotting commands in the session. One of the drawbacks of current decorators like

```
sage: plot.options
{'fillalpha': 0.5, 'detect_poles': False, 'plot_points': 200, 'thickness': 1,
 'alpha': 1, 'adaptive_tolerance': 0.01, 'fillcolor': 'automatic',
 'adaptive_recursion': 5, 'exclude': None, 'legend_label': None,
 'rgbcolor': (0, 0, 1), 'fill': False}
```
is that there is no description of options and they are not always easy to understand, e.g. what is `adaptive_recursion`? This is especially important if some options are "smartly" chosen based on others. E.g. it would be reasonable to set `fill=True` if the user has explicitly provided `fillcolor`, but such a behaviour should be explained. Note that in `circle.options` there is `FACEcolor` instead of `FILLcolor`. I suppose they are the same but got named differently because of writing the same thing in different places. Inconsistency in naming parameters and their interpretation also makes it hard to write plotting code that works both for 2d and 3d, leading to extra `if dim == 2: ... elif dim ==3: ...` for no good reason.

Unfortunately, I already put a bit on my plate so rewriting plotting code is not on my todo list for now and I just complain...



---

archive/issue_comments_095414.json:
```json
{
    "body": "cumulative new patch for 7981 and 10244",
    "created_at": "2011-01-12T23:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95414",
    "user": "https://github.com/sagetrac-mhampton"
}
```

cumulative new patch for 7981 and 10244



---

archive/issue_comments_095415.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAttachment: **[trac_7981_and_10244_cumulative.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_7981_and_10244_cumulative.patch.gz)**\n\nOK, I think I fixed it so the reference manual looks OK.\n\nI agree these options are a mess, but cleaning it up like Andrey suggests is beyond the scope of this ticket and my available effort.",
    "created_at": "2011-01-12T23:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95415",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:19" align="right">comment:19</div>

Attachment: **[trac_7981_and_10244_cumulative.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_7981_and_10244_cumulative.patch.gz)**

OK, I think I fixed it so the reference manual looks OK.

I agree these options are a mess, but cleaning it up like Andrey suggests is beyond the scope of this ticket and my available effort.



---

archive/issue_events_134512.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T23:25:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134512"
}
```



---

archive/issue_events_134513.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-12T23:25:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134513"
}
```



---

archive/issue_comments_095416.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@sagetrac-mhampton](#comment:19):\n> OK, I think I fixed it so the reference manual looks OK.\n\nThis is fairly important, so I will try to review it soon.\n\n> I agree these options are a mess, but cleaning it up like Andrey suggests is beyond the scope of this ticket and my available effort.\n\nAgreed.  See #10615.",
    "created_at": "2011-01-13T01:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95416",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@sagetrac-mhampton](#comment:19):
> OK, I think I fixed it so the reference manual looks OK.

This is fairly important, so I will try to review it soon.

> I agree these options are a mess, but cleaning it up like Andrey suggests is beyond the scope of this ticket and my available effort.

Agreed.  See #10615.



---

archive/issue_comments_095417.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> It does NOT seem to fix Jason's issue with\n\n\n```\nplot(x,(x,0,1),aspect_ratio=1).save('test.png')\n```\n\nThis *is* fixed by #7981, thankfully.\n\n> Nor does it fix this :(\n\n\n```\nsage: Q = plot(x,(x,0,1),legend_label='$xyz$')\nsage: Q = plot(x,(x,0,1),legend_label='$xyz$',legend_back_color=(1,0,0))\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<snip>\n/Users/.../sage-4.6.1.rc1/local/lib/python2.6/site-packages/sage/plot/line.pyc in __init__(self, xdata, ydata, options)\n     46         for opt in options.iterkeys():\n     47             if opt not in valid_options:\n---> 48                 raise RuntimeError(\"Error in line(): option '%s' not valid.\"%opt)\n     49         self.xdata = xdata\n     50         self.ydata = ydata\n\nRuntimeError: Error in line(): option 'legend_back_color' not valid.\n```\nThis still isn't fixed in either patch, so it's now #10616.",
    "created_at": "2011-01-13T01:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95417",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

> It does NOT seem to fix Jason's issue with


```
plot(x,(x,0,1),aspect_ratio=1).save('test.png')
```

This *is* fixed by #7981, thankfully.

> Nor does it fix this :(


```
sage: Q = plot(x,(x,0,1),legend_label='$xyz$')
sage: Q = plot(x,(x,0,1),legend_label='$xyz$',legend_back_color=(1,0,0))
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<snip>
/Users/.../sage-4.6.1.rc1/local/lib/python2.6/site-packages/sage/plot/line.pyc in __init__(self, xdata, ydata, options)
     46         for opt in options.iterkeys():
     47             if opt not in valid_options:
---> 48                 raise RuntimeError("Error in line(): option '%s' not valid."%opt)
     49         self.xdata = xdata
     50         self.ydata = ydata

RuntimeError: Error in line(): option 'legend_back_color' not valid.
```
This still isn't fixed in either patch, so it's now #10616.



---

archive/issue_comments_095418.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis may need to be rebased for the slight change in #7981.  Also would be best to have a separate patch for just this - if they don't merge nicely, maybe the original needs to be rebased?",
    "created_at": "2011-01-13T03:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95418",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:23" align="right">comment:23</div>

This may need to be rebased for the slight change in #7981.  Also would be best to have a separate patch for just this - if they don't merge nicely, maybe the original needs to be rebased?



---

archive/issue_comments_095419.json:
```json
{
    "body": "Rebased to #7981 and #8632",
    "created_at": "2011-01-14T02:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95419",
    "user": "https://github.com/kcrisman"
}
```

Rebased to #7981 and #8632



---

archive/issue_comments_095420.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[trac_10244_legend_label_fix_v3.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz)**\n\nOkay, this should apply correctly.  \n\nTo buildbot: Depends on #7981 and #8632, apply only trac_10244_legend_label_fix_v3.patch\n\nI noticed a few other things that apparently weren't caught the first time (meaning they were already present before this ticket), and may fix them in a brief reviewer patch shortly.",
    "created_at": "2011-01-14T02:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95420",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[trac_10244_legend_label_fix_v3.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz)**

Okay, this should apply correctly.  

To buildbot: Depends on #7981 and #8632, apply only trac_10244_legend_label_fix_v3.patch

I noticed a few other things that apparently weren't caught the first time (meaning they were already present before this ticket), and may fix them in a brief reviewer patch shortly.



---

archive/issue_comments_095421.json:
```json
{
    "body": "reviewer patch",
    "created_at": "2011-01-14T03:21:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95421",
    "user": "https://github.com/kcrisman"
}
```

reviewer patch



---

archive/issue_comments_095422.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[trac_10244-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)**\n\nTurns out that some of the defaults weren't the same as the documentation.  The legends look nice, so I changed the documentation to reflect the defaults.  Also, it was `handlelength`, not `handlelen`.  I also accidentally didn't get the right formatting since I based it on the earlier patch, so I fixed that goof of mine in the rebase.\n\nThis is significant enough that I would appreciate a review by someone of the review patch - original author is fine!  But all should be well.\n\nTo buildbot: Depends on #7981 and #8632, apply trac_10244_legend_label_fix_v3.patch and trac_10244-reviewer.patch",
    "created_at": "2011-01-14T03:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95422",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[trac_10244-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)**

Turns out that some of the defaults weren't the same as the documentation.  The legends look nice, so I changed the documentation to reflect the defaults.  Also, it was `handlelength`, not `handlelen`.  I also accidentally didn't get the right formatting since I based it on the earlier patch, so I fixed that goof of mine in the rebase.

This is significant enough that I would appreciate a review by someone of the review patch - original author is fine!  But all should be well.

To buildbot: Depends on #7981 and #8632, apply trac_10244_legend_label_fix_v3.patch and trac_10244-reviewer.patch



---

archive/issue_comments_095423.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nJust FYI - still applies fine on 4.6.2.alpha0.",
    "created_at": "2011-01-15T03:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95423",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Just FYI - still applies fine on 4.6.2.alpha0.



---

archive/issue_comments_095424.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nUpon actually looking at the patch I generated, it's much smaller than I thought, and only a few numbers are changed in the doc (the other change is fixing the formatting, which Marshall had already done).  So I'm comfortable with giving this positive review after all.",
    "created_at": "2011-01-17T18:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95424",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">comment:27</div>

Upon actually looking at the patch I generated, it's much smaller than I thought, and only a few numbers are changed in the doc (the other change is fixing the formatting, which Marshall had already done).  So I'm comfortable with giving this positive review after all.



---

archive/issue_events_134514.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-01-17T18:03:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134514"
}
```



---

archive/issue_events_134515.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-01-17T18:03:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134515"
}
```



---

archive/issue_comments_095425.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nDepends on #8632\n\n(I think that build bot get's confused if we methion the first one which is already listed in the second one).",
    "created_at": "2011-01-18T22:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95425",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:28" align="right">comment:28</div>

Depends on #8632

(I think that build bot get's confused if we methion the first one which is already listed in the second one).



---

archive/issue_events_134516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T01:33:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134516"
}
```



---

archive/issue_events_134517.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-19T01:33:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134517"
}
```



---

archive/issue_comments_095426.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nPlease clarify which patches have to be applied.",
    "created_at": "2011-01-19T01:33:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95426",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Please clarify which patches have to be applied.



---

archive/issue_events_134518.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-19T01:35:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134518"
}
```



---

archive/issue_events_134519.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-19T01:35:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134519"
}
```



---

archive/issue_comments_095427.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nPlease apply trac_10244_legend_label_fix_v3.patch and trac_10244-reviewer.patch",
    "created_at": "2011-01-19T01:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95427",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:30" align="right">comment:30</div>

Please apply trac_10244_legend_label_fix_v3.patch and trac_10244-reviewer.patch



---

archive/issue_events_134520.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-19T01:35:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134520"
}
```



---

archive/issue_events_134521.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-19T01:35:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134521"
}
```



---

archive/issue_comments_095428.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n KeyError: 'pop(): dictionary is empty'\n ```\n \n+**Apply:** [attachment: trac_10244_legend_label_fix_v3.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz) and [attachment: trac_10244-reviewer.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)\n``````\n",
    "created_at": "2011-01-19T01:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95428",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 KeyError: 'pop(): dictionary is empty'
 ```
 
+**Apply:** [attachment: trac_10244_legend_label_fix_v3.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244_legend_label_fix_v3.patch.gz) and [attachment: trac_10244-reviewer.patch](https://github.com/sagemath/sage/files/ticket10244/trac_10244-reviewer.patch.gz)
``````




---

archive/issue_events_134522.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-01-20T06:04:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134522"
}
```



---

archive/issue_events_134523.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-25T08:15:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134523"
}
```



---

archive/issue_events_134524.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-25T08:15:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10244#event-134524"
}
```



---

archive/issue_comments_095429.json:
```json
{
    "body": "Merged: **sage-4.6.2.alpha2**",
    "created_at": "2011-01-25T08:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10244#issuecomment-95429",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.2.alpha2**
