# Issue 10507: In Generic graphs, adjacency matrices with non-negative non-integral entries are treated as "multi-edge" instead of "weighted"

archive/issues_010454.json:
```json
{
    "body": "Let M be a symmetric, non-negative, and non-integral valued matrix. The Graph Theory module (graph.py) treats is as the adjacency matrix of a multi-edge graph, which does not make sense. It is more reasonable and intuitive to treat is as the adjacency matrix of a weight graph.\n\nThis defect is observed in Sage 4.4.1 and Sage 4.6\n\n``` \nsage: M = Matrix([[0,1,1],[1,0,1/2],[1,1/2,0]]); M    \n[  0   1   1]\n[  1   0 1/2]\n[  1 1/2   0]\nsage: Graph(M)\nMulti-graph on 3 vertices\n```\n\n**Assignee:** xqwang\n\n**CC:**  @tscrim\n\n**Keywords:** weighted adjacency matrix\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/10507\n\n",
    "closed_at": "2016-08-30T13:32:25Z",
    "created_at": "2010-12-21T08:12:38Z",
    "labels": [
        "component: graph theory",
        "minor",
        "bug",
        "wontfix"
    ],
    "title": "In Generic graphs, adjacency matrices with non-negative non-integral entries are treated as \"multi-edge\" instead of \"weighted\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10507",
    "user": "https://trac.sagemath.org/admin/accounts/users/xqwang"
}
```
Let M be a symmetric, non-negative, and non-integral valued matrix. The Graph Theory module (graph.py) treats is as the adjacency matrix of a multi-edge graph, which does not make sense. It is more reasonable and intuitive to treat is as the adjacency matrix of a weight graph.

This defect is observed in Sage 4.4.1 and Sage 4.6

``` 
sage: M = Matrix([[0,1,1],[1,0,1/2],[1,1/2,0]]); M    
[  0   1   1]
[  1   0 1/2]
[  1 1/2   0]
sage: Graph(M)
Multi-graph on 3 vertices
```

**Assignee:** xqwang

**CC:**  @tscrim

**Keywords:** weighted adjacency matrix

**Reviewer:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/10507





---

archive/issue_comments_102477.json:
```json
{
    "body": "**Changing assignee** from @jasongrout, @nathanncohen, @rlmill to xqwang.",
    "created_at": "2010-12-21T08:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102477",
    "user": "https://trac.sagemath.org/admin/accounts/users/xqwang"
}
```

**Changing assignee** from @jasongrout, @nathanncohen, @rlmill to xqwang.



---

archive/issue_comments_102478.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis defect can be fixed by changing the following two lines of code in $SAGE_HOME/local/lib/python/site-packages/sage/graphs/graph.py\n\n    918                     e = int(e)\n\n\n    919                     assert e >= 0 \nTO\n\n    918                     e_flr = int(e)\n\n\n    919                     assert (e_flr >= 0 and e_flr == e)\n\nThis change will make sure that if the adjacency matrix is non-integral then its entries are treated as weights (in stead of # of edges).",
    "created_at": "2010-12-21T08:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102478",
    "user": "https://trac.sagemath.org/admin/accounts/users/xqwang"
}
```

<a id='comment:1'></a>
This defect can be fixed by changing the following two lines of code in $SAGE_HOME/local/lib/python/site-packages/sage/graphs/graph.py

    918                     e = int(e)


    919                     assert e >= 0 
TO

    918                     e_flr = int(e)


    919                     assert (e_flr >= 0 and e_flr == e)

This change will make sure that if the adjacency matrix is non-integral then its entries are treated as weights (in stead of # of edges).



---

archive/issue_events_082261.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-20T05:55:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82261"
}
```



---

archive/issue_events_082262.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-20T05:55:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82262"
}
```



---

archive/issue_comments_102479.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis has been corrected at some point. Travis, can you confirm and put to positive_review.",
    "created_at": "2016-08-20T05:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102479",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
This has been corrected at some point. Travis, can you confirm and put to positive_review.



---

archive/issue_comments_102480.json:
```json
{
    "body": "<a id='comment:3'></a>\nok, seems to work smoothly",
    "created_at": "2016-08-20T07:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102480",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
ok, seems to work smoothly



---

archive/issue_events_082263.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-20T07:09:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82263"
}
```



---

archive/issue_events_082264.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-20T07:09:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82264"
}
```



---

archive/issue_comments_102481.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2016-08-20T07:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102481",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_102482.json:
```json
{
    "body": "**Changing author** from \"xqwang\" to \"\".",
    "created_at": "2016-08-20T07:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102482",
    "user": "https://github.com/fchapoton"
}
```

**Changing author** from "xqwang" to "".



---

archive/issue_events_082265.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82265"
}
```



---

archive/issue_events_082266.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82266"
}
```



---

archive/issue_events_082267.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10507#event-82267"
}
```



---

archive/issue_comments_102483.json:
```json
{
    "body": "<a id='comment:4'></a>\nDetermined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10507#issuecomment-102483",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).
