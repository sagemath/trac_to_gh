# Issue 10705: unpickle_all called twice = boom!

archive/issues_010645.json:
```json
{
    "assignees": [],
    "body": "Calling twice in a row the function `unpickle_all` breaks sage:\n\n```\nsage: sage.structure.sage_object.unpickle_all()\nx...\nSuccessfully unpickled 586 objects.\nFailed to unpickle 0 objects.\nsage: sage.structure.sage_object.unpickle_all()\n/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  \n7292 Abort trap              sage-ipython \"$@\" -i\n$\n```\n\nDoing some `print i, A` inside the loop of the function `unpickle_all` shows that the process stop on the 170th :\n\n```\nsage: sage.structure.sage_object.unpickle_all()\n...\n163 _class__sage_combinat_sf_homogeneous_SymmetricFunctionAlgebra_homogeneous__.sobj\n164 _class__sage_combinat_sf_jack_JackPolynomials_j__.sobj\n165 _class__sage_combinat_sf_jack_JackPolynomials_p__.sobj\n166 _class__sage_combinat_sf_jack_JackPolynomials_q__.sobj\n167 _class__sage_combinat_sf_kschur_kSchurFunctions_t__.sobj\n168 _class__sage_combinat_sf_llt_LLT_cospin__.sobj\n169 _class__sage_combinat_sf_llt_LLT_spin__.sobj\n170 _class__sage_combinat_sf_macdonald_MacdonaldPolynomials_h__.sobj\n/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  \n6926 Abort trap              sage-ipython \"$@\" -i\n $ \n```\n\n\nAssignee: **@williamstein**\n\nReviewer: **S\u00e9bastien Labb\u00e9, Peter Bruin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10705_\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2011-01-28T20:43:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20pickling",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "unpickle_all called twice = boom!",
    "type": "issue",
    "updated_at": "2017-12-12T08:23:33Z",
    "url": "https://github.com/sagemath/sage/issues/10705",
    "user": "https://github.com/seblabbe"
}
```
Calling twice in a row the function `unpickle_all` breaks sage:

```
sage: sage.structure.sage_object.unpickle_all()
x...
Successfully unpickled 586 objects.
Failed to unpickle 0 objects.
sage: sage.structure.sage_object.unpickle_all()
/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  
7292 Abort trap              sage-ipython "$@" -i
$
```

Doing some `print i, A` inside the loop of the function `unpickle_all` shows that the process stop on the 170th :

```
sage: sage.structure.sage_object.unpickle_all()
...
163 _class__sage_combinat_sf_homogeneous_SymmetricFunctionAlgebra_homogeneous__.sobj
164 _class__sage_combinat_sf_jack_JackPolynomials_j__.sobj
165 _class__sage_combinat_sf_jack_JackPolynomials_p__.sobj
166 _class__sage_combinat_sf_jack_JackPolynomials_q__.sobj
167 _class__sage_combinat_sf_kschur_kSchurFunctions_t__.sobj
168 _class__sage_combinat_sf_llt_LLT_cospin__.sobj
169 _class__sage_combinat_sf_llt_LLT_spin__.sobj
170 _class__sage_combinat_sf_macdonald_MacdonaldPolynomials_h__.sobj
/Users/slabbe/Applications/sage-4.6.1/local/bin/sage-sage: line 300:  
6926 Abort trap              sage-ipython "$@" -i
 $ 
```


Assignee: **@williamstein**

Reviewer: **Sébastien Labbé, Peter Bruin**

_Issue created by migration from https://trac.sagemath.org/ticket/10705_





---

archive/issue_events_128887.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2011-01-28T20:43:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128887"
}
```



---

archive/issue_events_128888.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2011-01-28T20:43:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20pickling",
    "label_color": "000080",
    "label_name": "component: pickling",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128888"
}
```



---

archive/issue_events_128889.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2011-01-28T20:43:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128889"
}
```



---

archive/issue_events_128890.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2011-01-28T20:43:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128890"
}
```



---

archive/issue_events_128891.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2011-01-28T20:43:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "title_is": "unpickle_all called twice = boom!",
    "title_was": "unpickle_all called twice in a row = boom!",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128891"
}
```



---

archive/issue_comments_104790.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,7 +29,3 @@\n  $ \n ```\n \n-If a solution needs to change the `pickle_jar`, be aware, because it may\n-results in conflicts because I am actually changing it at #10354.\n-\n-\n``````\n",
    "created_at": "2013-01-25T00:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10705#issuecomment-104790",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,7 +29,3 @@
  $ 
 ```
 
-If a solution needs to change the `pickle_jar`, be aware, because it may
-results in conflicts because I am actually changing it at #10354.
-
-
``````




---

archive/issue_comments_104791.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nSee #13636 for another seg fault associated with unpickle_all.",
    "created_at": "2013-01-25T00:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10705#issuecomment-104791",
    "user": "https://github.com/AndrewAtLarge"
}
```

<div id="comment:3" align="right">Comment 3</div>

See #13636 for another seg fault associated with unpickle_all.



---

archive/issue_events_128892.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128892"
}
```



---

archive/issue_events_128893.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128893"
}
```



---

archive/issue_events_128894.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128894"
}
```



---

archive/issue_events_128895.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128895"
}
```



---

archive/issue_events_128896.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128896"
}
```



---

archive/issue_events_128897.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128897"
}
```



---

archive/issue_events_128898.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128898"
}
```



---

archive/issue_events_128899.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128899"
}
```



---

archive/issue_events_128900.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128900"
}
```



---

archive/issue_events_128901.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128901"
}
```



---

archive/issue_events_128902.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128902"
}
```



---

archive/issue_events_128903.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128903"
}
```



---

archive/issue_events_128904.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-19T12:26:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128904"
}
```



---

archive/issue_comments_104792.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nThis is not a problem anymore on 8.0.rc0.",
    "created_at": "2017-07-19T12:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10705#issuecomment-104792",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">Comment 9</div>

This is not a problem anymore on 8.0.rc0.



---

archive/issue_comments_104793.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9, Peter Bruin**",
    "created_at": "2017-08-04T12:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10705#issuecomment-104793",
    "user": "https://github.com/pjbruin"
}
```

Reviewer: **Sébastien Labbé, Peter Bruin**



---

archive/issue_events_128905.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2017-08-04T12:46:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128905"
}
```



---

archive/issue_events_128906.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2017-08-04T12:46:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128906"
}
```



---

archive/issue_events_128907.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2017-08-04T12:46:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128907"
}
```



---

archive/issue_comments_104794.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nA doctest to check that this is fixed was added in #5838.",
    "created_at": "2017-08-04T12:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10705#issuecomment-104794",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:10" align="right">Comment 10</div>

A doctest to check that this is fixed was added in #5838.



---

archive/issue_events_128908.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128908"
}
```



---

archive/issue_events_128909.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128909"
}
```



---

archive/issue_events_128910.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10705",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10705#event-128910"
}
```
