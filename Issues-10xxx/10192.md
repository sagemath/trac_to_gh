# Issue 10192: SageNB broken when SAGE_PATH contains flavours of  '.' during installation

archive/issues_010191.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/williamstein"
    ],
    "body": "When `SAGE_PATH` (and hence also `PYTHONPATH`) contains \"`.`\" (the current working directory) during the installation of `sagenb`, Python is able to find `sagenb` in its path and therefore refuses to add it to `easy-install.pth`. Later, Sage won't find it, leading to the following error message:\n\n```\nImportError: No module named sagenb.misc.sphinxify\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\n\nThis is a follow-up to #10176, and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332).\n\n---\n\nApply only\n\n[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)\nto the Sage **root repository**.\n\nDepends on #11073\n\nCC:  @nexttime @qed777 @mwhansen @jdemeyer @jhpalmieri\n\nKeywords: **notebook installation dot PYTHONPATH easy_install easy-install pth sage-spkg setuptools**\n\nComponent: **build**\n\nAuthor: **Leif Leonhardy, Punarbasu Purkayastha**\n\nReviewer: **Florent Hivert, Jeroen Demeyer**\n\nMerged: **sage-5.0.beta6**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10192_\n\n",
    "closed_at": "2012-02-27T11:20:06Z",
    "created_at": "2010-10-30T15:48:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "SageNB broken when SAGE_PATH contains flavours of  '.' during installation",
    "type": "issue",
    "updated_at": "2012-02-27T11:20:06Z",
    "url": "https://github.com/sagemath/sage/issues/10192",
    "user": "https://github.com/hivert"
}
```
When `SAGE_PATH` (and hence also `PYTHONPATH`) contains "`.`" (the current working directory) during the installation of `sagenb`, Python is able to find `sagenb` in its path and therefore refuses to add it to `easy-install.pth`. Later, Sage won't find it, leading to the following error message:

```
ImportError: No module named sagenb.misc.sphinxify
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```

This is a follow-up to #10176, and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332).

---

Apply only

[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)
to the Sage **root repository**.

Depends on #11073

CC:  @nexttime @qed777 @mwhansen @jdemeyer @jhpalmieri

Keywords: **notebook installation dot PYTHONPATH easy_install easy-install pth sage-spkg setuptools**

Component: **build**

Author: **Leif Leonhardy, Punarbasu Purkayastha**

Reviewer: **Florent Hivert, Jeroen Demeyer**

Merged: **sage-5.0.beta6**

_Issue created by migration from https://trac.sagemath.org/ticket/10192_





---

archive/issue_events_134145.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134145"
}
```



---

archive/issue_events_134146.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134146"
}
```



---

archive/issue_events_134147.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134147"
}
```



---

archive/issue_events_134148.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134148"
}
```



---

archive/issue_events_134149.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "subject": "https://github.com/hivert",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134149"
}
```



---

archive/issue_events_134150.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-10-30T15:48:54Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "subject": "https://github.com/hivert",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134150"
}
```



---

archive/issue_comments_094508.json:
```json
{
    "body": "Changed keywords from **notebook installation** to **notebook installation dot PYTHONPATH easy_install easy-install pth sage-spkg setuptools**",
    "created_at": "2010-10-30T22:53:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94508",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **notebook installation** to **notebook installation dot PYTHONPATH easy_install easy-install pth sage-spkg setuptools**



---

archive/issue_comments_094509.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFrom `sage-env`:\n\n```sh\nif [ -d \"$SAGE_ROOT/local/lib/python\" ]; then\n    PYTHONPATH=\"$SAGE_PATH:$SAGE_ROOT/local/lib/python\"   && export PYTHONPATH\n    PYTHONHOME=\"$SAGE_ROOT/local\" && export PYTHONHOME\nfi\n```\n\nWe shouldn't add `$SAGE_PATH` there if it is empty btw., but the removal of \"`.`\" from `PYTHONPATH` should be performed in `sage-spkg` I think.\n\n(`$SAGE_PATH` is also *appended* to an overwritten(?!) `PYTHONPATH` in `sage-doctest`.)",
    "created_at": "2010-10-30T22:53:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94509",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

From `sage-env`:

```sh
if [ -d "$SAGE_ROOT/local/lib/python" ]; then
    PYTHONPATH="$SAGE_PATH:$SAGE_ROOT/local/lib/python"   && export PYTHONPATH
    PYTHONHOME="$SAGE_ROOT/local" && export PYTHONHOME
fi
```

We shouldn't add `$SAGE_PATH` there if it is empty btw., but the removal of "`.`" from `PYTHONPATH` should be performed in `sage-spkg` I think.

(`$SAGE_PATH` is also *appended* to an overwritten(?!) `PYTHONPATH` in `sage-doctest`.)



---

archive/issue_comments_094510.json:
```json
{
    "body": "Author: **Leif Leonhardy**",
    "created_at": "2010-10-31T01:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94510",
    "user": "https://github.com/nexttime"
}
```

Author: **Leif Leonhardy**



---

archive/issue_comments_094511.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOk, after changing some instances of `PYTHON_PATH` to `PYTHONPATH` (argh!), the attached patch works for me.\n\nYou can try setting `SAGE_PATH` to something containing \"`.`\" (e.g. `\":/foo/bar:.:/baz`, too), of course also doing `export SAGE_PATH`, then [re]installing the SageNB 0.8.7 spkg (or the newer ones, p1 or p2, but these aren't necessary, i.e., the patch here fixes the issue in a different way, not needing an additional work-around).",
    "created_at": "2010-10-31T01:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94511",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:3" align="right">comment:3</div>

Ok, after changing some instances of `PYTHON_PATH` to `PYTHONPATH` (argh!), the attached patch works for me.

You can try setting `SAGE_PATH` to something containing "`.`" (e.g. `":/foo/bar:.:/baz`, too), of course also doing `export SAGE_PATH`, then [re]installing the SageNB 0.8.7 spkg (or the newer ones, p1 or p2, but these aren't necessary, i.e., the patch here fixes the issue in a different way, not needing an additional work-around).



---

archive/issue_events_134151.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-31T01:23:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134151"
}
```



---

archive/issue_comments_094512.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAs far as I know, Cygwin (as opposed to MS DOS/Windows) also uses \"`:`\" to separate directories in search paths, so this should work for Cygwin as well.\n\n(Other shell and even Python scripts in Sage also hard-code that character.)",
    "created_at": "2010-10-31T01:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94512",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

As far as I know, Cygwin (as opposed to MS DOS/Windows) also uses "`:`" to separate directories in search paths, so this should work for Cygwin as well.

(Other shell and even Python scripts in Sage also hard-code that character.)



---

archive/issue_events_134152.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-31T01:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134152"
}
```



---

archive/issue_events_134153.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-10-31T01:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134153"
}
```



---

archive/issue_comments_094513.json:
```json
{
    "body": "Reviewer: **Florent Hivert**",
    "created_at": "2010-10-31T08:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94513",
    "user": "https://github.com/hivert"
}
```

Reviewer: **Florent Hivert**



---

archive/issue_comments_094514.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nexttime](#comment:5):\n\nApplying the patch give me\n\n```\npatching file sage-spkg\nHunk #1 succeeded at 292 (offset -8 lines).\n```\nAre you sure that you didn't change anything else from a vanilla 4.6.rc0 ? \n\nAnyway, for what concerns openSUSE 11.1 and 11.3 the patch perfectly works. I also checked it on sage.sagemath.org. So I'm ok to give it a positive review, except for the Cygwin question where I'm not competent. Please do it on my behalf as soon as you have Mike answer.",
    "created_at": "2010-10-31T08:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94514",
    "user": "https://github.com/hivert"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nexttime](#comment:5):

Applying the patch give me

```
patching file sage-spkg
Hunk #1 succeeded at 292 (offset -8 lines).
```
Are you sure that you didn't change anything else from a vanilla 4.6.rc0 ? 

Anyway, for what concerns openSUSE 11.1 and 11.3 the patch perfectly works. I also checked it on sage.sagemath.org. So I'm ok to give it a positive review, except for the Cygwin question where I'm not competent. Please do it on my behalf as soon as you have Mike answer.



---

archive/issue_comments_094515.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@hivert](#comment:6):\n> Applying the patch give me\n\n\n```\npatching file sage-spkg\nHunk #1 succeeded at 292 (offset -8 lines).\n```\n> Are you sure that you didn't change anything else from a vanilla 4.6.rc0 ? \n\nOk, not based on *vanilla* rc0; I've also applied a completely unrelated patch to `sage-spkg` (removing \"`x`\" from `tar` by default, #10040).",
    "created_at": "2010-10-31T09:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94515",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@hivert](#comment:6):
> Applying the patch give me


```
patching file sage-spkg
Hunk #1 succeeded at 292 (offset -8 lines).
```
> Are you sure that you didn't change anything else from a vanilla 4.6.rc0 ? 

Ok, not based on *vanilla* rc0; I've also applied a completely unrelated patch to `sage-spkg` (removing "`x`" from `tar` by default, #10040).



---

archive/issue_comments_094516.json:
```json
{
    "body": "Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg-scripts_repo.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg-scripts_repo.patch.gz)**\n\nApply to scripts repo. Based on vanilla Sage 4.6.rc0. (Updated version, handles more weird cases, too.)",
    "created_at": "2010-10-31T12:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94516",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg-scripts_repo.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg-scripts_repo.patch.gz)**

Apply to scripts repo. Based on vanilla Sage 4.6.rc0. (Updated version, handles more weird cases, too.)



---

archive/issue_comments_094517.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI've uploaded a slightly improved patch, this time *really* based on *vanilla* 4.6.rc0.\n\nTry again...\n\n(also with `SAGE_PATH=\".::./././//./://bingo//:baz:::://///:./.:.\"` and alike) ;-)\n\nAlthough it *might* still fail with e.g. `SAGE_PATH=\"./foo/..\"` (if `./foo/` happens to exist in the directory `setup` is run in), but this would at least for SageNB be catched by the 0.8.7.p{1,2} spkgs...",
    "created_at": "2010-10-31T13:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94517",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

I've uploaded a slightly improved patch, this time *really* based on *vanilla* 4.6.rc0.

Try again...

(also with `SAGE_PATH=".::./././//./://bingo//:baz:::://///:./.:."` and alike) ;-)

Although it *might* still fail with e.g. `SAGE_PATH="./foo/.."` (if `./foo/` happens to exist in the directory `setup` is run in), but this would at least for SageNB be catched by the 0.8.7.p{1,2} spkgs...



---

archive/issue_comments_094518.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nping...\n\n(Still needs review, only the Cygwin question seems still open, though I believe it'll also work on Cygwin.)\n\nThe patch will almost certainly have to get rebased, haven't tried yet.",
    "created_at": "2011-08-11T19:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94518",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

ping...

(Still needs review, only the Cygwin question seems still open, though I believe it'll also work on Cygwin.)

The patch will almost certainly have to get rebased, haven't tried yet.



---

archive/issue_comments_094519.json:
```json
{
    "body": "SCRIPTS repo. Same patch, rebased to Sage 4.7.1.rc2.",
    "created_at": "2011-08-11T20:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94519",
    "user": "https://github.com/nexttime"
}
```

SCRIPTS repo. Same patch, rebased to Sage 4.7.1.rc2.



---

archive/issue_comments_094520.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)**\n\nReplying to [@nexttime](#comment:9):\n> The patch will almost certainly have to get rebased, haven't tried yet.\n\nWow, the patch still applied (with an offset of only a few lines); I've rebased it on Sage 4.7.1.rc2 despite of that to now apply cleanly.\n\nThere are currently some concurrent tickets also patching `sage-spkg` though.",
    "created_at": "2011-08-11T20:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94520",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)**

Replying to [@nexttime](#comment:9):
> The patch will almost certainly have to get rebased, haven't tried yet.

Wow, the patch still applied (with an offset of only a few lines); I've rebased it on Sage 4.7.1.rc2 despite of that to now apply cleanly.

There are currently some concurrent tickets also patching `sage-spkg` though.



---

archive/issue_comments_094521.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-When `SAGE_PATH` is set to '.', during the installation of sagenb, python is able to find sagenb into its path and therefore refuse to add it to easy-install.pth. Later sage won't find it leading to the following error message\n+When `SAGE_PATH` (and hence also `PYTHONPATH`) contains \"`.`\" (the current working directory) during the installation of `sagenb`, Python is able to find `sagenb` in its path and therefore refuses to add it to `easy-install.pth`. Later, Sage won't find it, leading to the following error message:\n \n ```\n ImportError: No module named sagenb.misc.sphinxify\n@@ -6,4 +6,13 @@\n WARNING: Loading of ipy_profile_sage failed.\n ```\n \n-This is a followup to #10176 and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332)\n+This is a follow-up to #10176, and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332).\n+\n+---\n+\n+**Apply**\n+\n+  [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)\n+\n+**to the Sage scripts repository** (in `$SAGE_ROOT/local/bin/`).\n+\n``````\n",
    "created_at": "2011-08-11T20:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94521",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-When `SAGE_PATH` is set to '.', during the installation of sagenb, python is able to find sagenb into its path and therefore refuse to add it to easy-install.pth. Later sage won't find it leading to the following error message
+When `SAGE_PATH` (and hence also `PYTHONPATH`) contains "`.`" (the current working directory) during the installation of `sagenb`, Python is able to find `sagenb` in its path and therefore refuses to add it to `easy-install.pth`. Later, Sage won't find it, leading to the following error message:
 
 ```
 ImportError: No module named sagenb.misc.sphinxify
@@ -6,4 +6,13 @@
 WARNING: Loading of ipy_profile_sage failed.
 ```
 
-This is a followup to #10176 and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332)
+This is a follow-up to #10176, and there has been some discussion on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/bb636656e2153332).
+
+---
+
+**Apply**
+
+  [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)
+
+**to the Sage scripts repository** (in `$SAGE_ROOT/local/bin/`).
+
``````




---

archive/issue_comments_094522.json:
```json
{
    "body": "New attempt to clean up even nastier paths (including .., ./., etc)",
    "created_at": "2011-10-13T12:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94522",
    "user": "https://github.com/ppurka"
}
```

New attempt to clean up even nastier paths (including .., ./., etc)



---

archive/issue_comments_094523.json:
```json
{
    "body": "Attachment: **[trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.2.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.2.patch.gz)**\n\nNew attempt to clean up even nastier paths (including .., ./., etc) (Ignore the other patch)",
    "created_at": "2011-10-13T12:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94523",
    "user": "https://github.com/ppurka"
}
```

Attachment: **[trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.2.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.2.patch.gz)**

New attempt to clean up even nastier paths (including .., ./., etc) (Ignore the other patch)



---

archive/issue_comments_094524.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz)**\n\nPlease check [attachment: trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz) against other platforms. I have checked it on Linux x86_64 and it cleans up nasty examples like the one mentioned earlier `\".::./././//./://bingo//:baz:::://///:./.:.\"`. (Indented the paste below :))\n\n```\n ~ $ AAAA=\".::./././//./://bingo//:baz:::://///:./.:.\"\n ~ $ new_pp=\"\"\n ~ $ IFS=\":\"\n ~ $ for x in $AAAA; do\n  if [ -n \"$x\" -a -n \"$(echo \"$x\" | sed -e 's/[\\.\\/]\\+//g')\" ]; then\n    if [ -z \"$new_pp\" ]; then\n      new_pp=\"$x\"\n    else\n      new_pp=\"${new_pp}:$x\"\n    fi\n  fi\ndone \n ~ $ echo \"$new_pp\"\n//bingo//:baz\n```\nThis is against 4.7.0. I will later try to upload it rebased against 4.7.2.",
    "created_at": "2011-10-13T12:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94524",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz)**

Please check [attachment: trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_and_more_from_PYTHONPATH_in_sage.spkg.patch.gz) against other platforms. I have checked it on Linux x86_64 and it cleans up nasty examples like the one mentioned earlier `".::./././//./://bingo//:baz:::://///:./.:."`. (Indented the paste below :))

```
 ~ $ AAAA=".::./././//./://bingo//:baz:::://///:./.:."
 ~ $ new_pp=""
 ~ $ IFS=":"
 ~ $ for x in $AAAA; do
  if [ -n "$x" -a -n "$(echo "$x" | sed -e 's/[\.\/]\+//g')" ]; then
    if [ -z "$new_pp" ]; then
      new_pp="$x"
    else
      new_pp="${new_pp}:$x"
    fi
  fi
done 
 ~ $ echo "$new_pp"
//bingo//:baz
```
This is against 4.7.0. I will later try to upload it rebased against 4.7.2.



---

archive/issue_comments_094525.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnd what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)\n\nI'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/",
    "created_at": "2011-10-13T15:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94525",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

And what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)

I'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/



---

archive/issue_comments_094526.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment:13):\n> And what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)\n> \n> I'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/\n\nThe main point in the patch is the separator that is redefined to ':'.\n\nNow when you run a loop through the variable, it loops through all the parts separated by ':'. Once each part is separated, you can check whether it is empty (hence the first test `-n \"$x\"`), or whether it consists of only . and / (hence the echo + sed). This is important because this catches all the bad cases like `..`, `./.`, `.`, etc. ( In relation to #11914, I tried to cd to devel/sage/sage and ran sage as `SAGE_PATH=.. sage -n` and it failed to run. So we should definitely weed out at least `..` by itself. ) I do feel that it is over-engineered, but I haven't been able to come up with a better solution that catches all the cases.\n\nSince all the scripts in Sage are trying to conform to POSIX you need the echo + sed. In pure bash, you can replace the `\"$( echo \"$x\" | sed ... )\"` with simply `\"${x//[\\.\\/]}\"`",
    "created_at": "2011-10-13T15:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94526",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment:13):
> And what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)
> 
> I'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/

The main point in the patch is the separator that is redefined to ':'.

Now when you run a loop through the variable, it loops through all the parts separated by ':'. Once each part is separated, you can check whether it is empty (hence the first test `-n "$x"`), or whether it consists of only . and / (hence the echo + sed). This is important because this catches all the bad cases like `..`, `./.`, `.`, etc. ( In relation to #11914, I tried to cd to devel/sage/sage and ran sage as `SAGE_PATH=.. sage -n` and it failed to run. So we should definitely weed out at least `..` by itself. ) I do feel that it is over-engineered, but I haven't been able to come up with a better solution that catches all the cases.

Since all the scripts in Sage are trying to conform to POSIX you need the echo + sed. In pure bash, you can replace the `"$( echo "$x" | sed ... )"` with simply `"${x//[\.\/]}"`



---

archive/issue_comments_094527.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@ppurka](#comment:14):\n> Replying to [@nexttime](#comment:13):\n> > And what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)\n> > \n> > I'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/\n\n> The main point in the patch is the separator that is redefined to ':'.\n\nWell, I know `IFS`, but I don't want to run it in a loop; that was my point.\n\nMy improved code snippet (simplified and catching additional instances; using a single invocation of `sed`) looks like this:\n\n```sh\n$ echo $EXAMPLE; echo; echo \":$EXAMPLE:\" | sed \\\n-e 's|/\\+|/|g' \\\n-e 's|:\\(\\./\\)\\+|:|g' \\\n-e 's|\\(/\\.\\)\\+:|:|g' \\\n-e 's|\\(:\\.\\)\\+:|:|g' \\\n-e 's|:\\+|:|g' -e 's|^:\\+||' -e 's|:\\+$||' \n.::./././//./://bingo//:baz:::://///:./.:.\n\n/bingo/:baz:/\n```\n\n\n\n\n> This is important because this catches all the bad cases like `..`, `./.`, `.`, etc.\n\nWe only have to catch \"`.`\" (i.e., the current working directory) *here*.\n\n\n\n\n> (In relation to #11914, I tried to cd to devel/sage/sage and ran sage as `SAGE_PATH=.. sage -n` and it failed to run. So we should definitely weed out at least `..` by itself.)\n\nIMHO not.  If you put things into `SAGE_PATH`, you have to live with the results (or side-effects) *in that case*.  Or we have to do that in `sage-sage`, before we (try to) start the notebook only, independently of the fix to `sage-env` at #11914 (and of course `sage-spkg`, which is patched here).\n\nA better approach in the case of the notebook would perhaps be to directly test whether any component of `PYTHONPATH` yields `devel/sage-*/` (or has a subdirectory `sage` with an `__init__.py` file in it), or, probably easiest, *prepend* the correct directory to `PYTHONPATH` before running `sage-notebook`.\n\n(We should better discuss the latter on #11914.)",
    "created_at": "2011-10-13T17:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94527",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@ppurka](#comment:14):
> Replying to [@nexttime](#comment:13):
> > And what's the advantage of running `sed` (and twice `test`, and `echo`) multiple times in a loop? B)
> > 
> > I'm not sure right now whether my patch is up-to-date btw., as the currently attached one doesn't remove redundant slashs and (e.g.) `./`... 8/

> The main point in the patch is the separator that is redefined to ':'.

Well, I know `IFS`, but I don't want to run it in a loop; that was my point.

My improved code snippet (simplified and catching additional instances; using a single invocation of `sed`) looks like this:

```sh
$ echo $EXAMPLE; echo; echo ":$EXAMPLE:" | sed \
-e 's|/\+|/|g' \
-e 's|:\(\./\)\+|:|g' \
-e 's|\(/\.\)\+:|:|g' \
-e 's|\(:\.\)\+:|:|g' \
-e 's|:\+|:|g' -e 's|^:\+||' -e 's|:\+$||' 
.::./././//./://bingo//:baz:::://///:./.:.

/bingo/:baz:/
```




> This is important because this catches all the bad cases like `..`, `./.`, `.`, etc.

We only have to catch "`.`" (i.e., the current working directory) *here*.




> (In relation to #11914, I tried to cd to devel/sage/sage and ran sage as `SAGE_PATH=.. sage -n` and it failed to run. So we should definitely weed out at least `..` by itself.)

IMHO not.  If you put things into `SAGE_PATH`, you have to live with the results (or side-effects) *in that case*.  Or we have to do that in `sage-sage`, before we (try to) start the notebook only, independently of the fix to `sage-env` at #11914 (and of course `sage-spkg`, which is patched here).

A better approach in the case of the notebook would perhaps be to directly test whether any component of `PYTHONPATH` yields `devel/sage-*/` (or has a subdirectory `sage` with an `__init__.py` file in it), or, probably easiest, *prepend* the correct directory to `PYTHONPATH` before running `sage-notebook`.

(We should better discuss the latter on #11914.)



---

archive/issue_comments_094528.json:
```json
{
    "body": "Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)**\n\nSCRIPTS repo. Improved version of my previous patch. Based on Sage 4.7.2.alpha4.",
    "created_at": "2011-10-13T17:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94528",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)**

SCRIPTS repo. Improved version of my previous patch. Based on Sage 4.7.2.alpha4.



---

archive/issue_comments_094529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,9 +10,9 @@\n \n ---\n \n-**Apply**\n+Apply only\n \n-  [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)\n+ [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)\n \n-**to the Sage scripts repository** (in `$SAGE_ROOT/local/bin/`).\n+to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).\n \n``````\n",
    "created_at": "2011-10-13T17:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94529",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,9 +10,9 @@
 
 ---
 
-**Apply**
+Apply only
 
-  [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.rebased_to_4.7.1.rc2.scripts.patch.gz)
+ [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)
 
-**to the Sage scripts repository** (in `$SAGE_ROOT/local/bin/`).
+to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).
 
``````




---

archive/issue_comments_094530.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNew patch is up.",
    "created_at": "2011-10-13T17:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94530",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

New patch is up.



---

archive/issue_events_134154.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-10-13T17:58:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "title_is": "SageNB broken when SAGE_PATH contains flavours of  '.' during installation",
    "title_was": "SageNB fails to install when SAGE_PATH is set to '.'",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134154"
}
```



---

archive/issue_comments_094531.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNew patch looks good to me. I will leave it to people who actually had the problem(s) to report back and change this to \"positive review.\"\n\nPersonally, I had no problems in getting Sage compiled and up and running on two different Linux distributions, and with sage-4.7.0 and sage-4.7.2_alpha3.",
    "created_at": "2011-10-16T12:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94531",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:18" align="right">comment:18</div>

New patch looks good to me. I will leave it to people who actually had the problem(s) to report back and change this to "positive review."

Personally, I had no problems in getting Sage compiled and up and running on two different Linux distributions, and with sage-4.7.0 and sage-4.7.2_alpha3.



---

archive/issue_comments_094532.json:
```json
{
    "body": "Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)**\n\nUpdated the v2 of the file so that it applies to sage-4.8",
    "created_at": "2012-02-03T19:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94532",
    "user": "https://github.com/ppurka"
}
```

Attachment: **[trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)**

Updated the v2 of the file so that it applies to sage-4.8



---

archive/issue_comments_094533.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nUpdate patch to sage-4.8.\n\nThis has positive review from my side. If there is nothing else holding it up, then it should be merged, in my opinion.",
    "created_at": "2012-02-03T19:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94533",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:19" align="right">comment:19</div>

Update patch to sage-4.8.

This has positive review from my side. If there is nothing else holding it up, then it should be merged, in my opinion.



---

archive/issue_comments_094534.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n \n Apply only\n \n- [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)\n+ [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)\n \n to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).\n \n``````\n",
    "created_at": "2012-02-03T19:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94534",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 
 Apply only
 
- [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v2.scripts.patch.gz)
+ [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)
 
 to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).
 
``````




---

archive/issue_events_134155.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-02-03T19:30:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134155"
}
```



---

archive/issue_events_134156.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-02-03T19:30:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134156"
}
```



---

archive/issue_comments_094535.json:
```json
{
    "body": "Attachment: **[10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)**",
    "created_at": "2012-02-04T14:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94535",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)**



---

archive/issue_comments_094536.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nRebased to #11073.",
    "created_at": "2012-02-04T14:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94536",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Rebased to #11073.



---

archive/issue_comments_094537.json:
```json
{
    "body": "Dependencies: **#11073**",
    "created_at": "2012-02-04T14:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94537",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#11073**



---

archive/issue_comments_094538.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,7 +12,5 @@\n \n Apply only\n \n- [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)\n-\n-to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).\n-\n+[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)\n+to the Sage **root repository**.\n``````\n",
    "created_at": "2012-02-04T14:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94538",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,7 +12,5 @@
 
 Apply only
 
- [attachment: trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch](https://github.com/sagemath/sage/files/ticket10192/trac_10192-remove_dot_from_PYTHONPATH_in_sage-spkg.v3.scripts.patch.gz)
-
-to the Sage **scripts repository** (in `$SAGE_ROOT/local/bin/`).
-
+[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)
+to the Sage **root repository**.
``````




---

archive/issue_comments_094539.json:
```json
{
    "body": "Merged: **sage-5.0.beta3**",
    "created_at": "2012-02-06T21:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94539",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta3**



---

archive/issue_events_134157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-06T21:23:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134157"
}
```



---

archive/issue_events_134158.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-06T21:23:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134158"
}
```



---

archive/issue_comments_094540.json:
```json
{
    "body": "Changed merged from **sage-5.0.beta3** to none",
    "created_at": "2012-02-16T09:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94540",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-5.0.beta3** to none



---

archive/issue_comments_094541.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis needs work because \"\\+\" in sed scripts isn't portable.  You can replace \"X\\+\" by \"XX*\", which is equivalent.",
    "created_at": "2012-02-16T09:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94541",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

This needs work because "\+" in sed scripts isn't portable.  You can replace "X\+" by "XX*", which is equivalent.



---

archive/issue_comments_094542.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAnother minor comment: use spaces instead of TABs for indenting.",
    "created_at": "2012-02-16T09:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94542",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Another minor comment: use spaces instead of TABs for indenting.



---

archive/issue_comments_094543.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:22):\n> This needs work because \"\\+\" in sed scripts isn't portable.  You can replace \"X\\+\" by \"XX*\", which is equivalent.\n\nIs `\\{1,\\}` a portable version of `\\+`?",
    "created_at": "2012-02-16T09:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94543",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:22):
> This needs work because "\+" in sed scripts isn't portable.  You can replace "X\+" by "XX*", which is equivalent.

Is `\{1,\}` a portable version of `\+`?



---

archive/issue_comments_094544.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@ppurka](#comment:24):\n> Is `\\{1,\\}` a portable version of `\\+`?\n\nAs far as I can tell, yes.  But I consider \"XX*\" to be more readable than \"X\\{1,\\}\", especially for short strings X, which is the case here.",
    "created_at": "2012-02-16T09:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94544",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@ppurka](#comment:24):
> Is `\{1,\}` a portable version of `\+`?

As far as I can tell, yes.  But I consider "XX*" to be more readable than "X\{1,\}", especially for short strings X, which is the case here.



---

archive/issue_comments_094545.json:
```json
{
    "body": "Apply only this to SAGE_ROOT",
    "created_at": "2012-02-16T11:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94545",
    "user": "https://github.com/ppurka"
}
```

Apply only this to SAGE_ROOT



---

archive/issue_comments_094546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,5 +12,5 @@\n \n Apply only\n \n-[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)\n+[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)\n to the Sage **root repository**.\n``````\n",
    "created_at": "2012-02-16T11:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94546",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,5 +12,5 @@
 
 Apply only
 
-[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.patch.gz)
+[attachment: 10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)
 to the Sage **root repository**.
``````




---

archive/issue_comments_094547.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)**\n\nUpdated the patch with the stated modifications. Please review.\n\nHere is the output in busybox (probably the closest system to POSIX I have around here, but the earlier version also works fine):\n\n```\n~> busybox sh\n\n\nBusyBox v1.18.4 (Ubuntu 1:1.18.4-2ubuntu2) built-in shell (ash)\nEnter 'help' for a list of built-in commands.\n\n~ $ EXAMPLE=\".::./././//./://bingo//:baz:::://///:./.:.\"\n~ $ echo :$EXAMPLE: | busybox sed -e 's|//*|/|g' -e 's|:\\(\\./\\)\\{1,\\}|:|g' -e 's\n|\\(/\\.\\)\\{1,\\}:|:|g' -e 's|\\(:\\.\\)\\{1,\\}:|:|g' -e 's|::*|:|g' -e 's|^::*||' -e '\ns|::*$||'\n/bingo/:baz:/\n```",
    "created_at": "2012-02-16T11:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94547",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz](https://github.com/sagemath/sage/files/ticket10192/10192-remove_dot_from_PYTHONPATH_in_sage-spkg.2.patch.gz)**

Updated the patch with the stated modifications. Please review.

Here is the output in busybox (probably the closest system to POSIX I have around here, but the earlier version also works fine):

```
~> busybox sh


BusyBox v1.18.4 (Ubuntu 1:1.18.4-2ubuntu2) built-in shell (ash)
Enter 'help' for a list of built-in commands.

~ $ EXAMPLE=".::./././//./://bingo//:baz:::://///:./.:."
~ $ echo :$EXAMPLE: | busybox sed -e 's|//*|/|g' -e 's|:\(\./\)\{1,\}|:|g' -e 's
|\(/\.\)\{1,\}:|:|g' -e 's|\(:\.\)\{1,\}:|:|g' -e 's|::*|:|g' -e 's|^::*||' -e '
s|::*$||'
/bingo/:baz:/
```



---

archive/issue_events_134159.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-02-16T11:46:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134159"
}
```



---

archive/issue_events_134160.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-21T10:55:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134160"
}
```



---

archive/issue_events_134161.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-21T10:55:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134161"
}
```



---

archive/issue_comments_094548.json:
```json
{
    "body": "Changed reviewer from **Florent Hivert** to **Florent Hivert, Jeroen Demeyer**",
    "created_at": "2012-02-21T10:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94548",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Florent Hivert** to **Florent Hivert, Jeroen Demeyer**



---

archive/issue_comments_094549.json:
```json
{
    "body": "Changed author from **Leif Leonhardy** to **Leif Leonhardy, Punarbasu Purkayastha**",
    "created_at": "2012-02-21T10:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94549",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Leif Leonhardy** to **Leif Leonhardy, Punarbasu Purkayastha**



---

archive/issue_events_134162.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:20:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134162"
}
```



---

archive/issue_events_134163.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:20:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10192#event-134163"
}
```



---

archive/issue_comments_094550.json:
```json
{
    "body": "Merged: **sage-5.0.beta6**",
    "created_at": "2012-02-27T11:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10192#issuecomment-94550",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta6**
