# Issue 10823: environment variable SAGE_SPKG_INSTALL_DOCS to build and install spkg docs

archive/issues_010757.json:
```json
{
    "assignees": [],
    "body": "There are lots of times when it would be convenient to have the documentation of various spkgs installed in a local or system Sage installation.  For example, it seems that I'm always wishing that I had that at an airport or on an airplane.  At one point a long time ago, we had an extradocs spkg, but it was never maintained.  So here is a proposal:\n\nWhen building an spkg, if the SAGE_SPKG_INSTALL_DOCS environment variable is yes, then the docs are built (if available in the spkg) and are installed in $SAGE_ROOT/local/share/doc/<SPKG NAME>/\n\nFor example, numpy includes the docs with the sources.  I'd like to insert the following at the bottom of the numpy spkg-install:\n\n```\nif [ \"x$SAGE_SPKG_INSTALL_DOCS\" = xyes ] ; then\n    cd doc\n    make html\n    if [ $? -ne 0 ]; then\n    echo \"Error building numpy docs.\"\n    exit 1\n    fi\n    mkdir -p $SAGE_ROOT/local/share/doc/numpy\n    mv build/html $SAGE_ROOT/local/share/doc/numpy\nfi\n```\nThis builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.\n\nHere are a few updated spkgs:\n\n* numpy: #10826\n* cython: #10827\n* matplotlib: #10828\n* mpmath: #10829\n* pari: #10830\n* gap: #10825\n* python: #10831\n* sagetex: #10908\n\n\nCC:  @sagetrac-drkirkby @kcrisman\n\nComponent: **packages: standard**\n\nAuthor: **Jason Grout**\n\nReviewer: **David Kirkby**\n\nMerged: **sage-4.7.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10823_\n\n",
    "closed_at": "2011-03-08T21:48:04Z",
    "created_at": "2011-02-22T20:26:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "environment variable SAGE_SPKG_INSTALL_DOCS to build and install spkg docs",
    "type": "issue",
    "updated_at": "2011-04-14T13:53:17Z",
    "url": "https://github.com/sagemath/sage/issues/10823",
    "user": "https://github.com/jasongrout"
}
```
There are lots of times when it would be convenient to have the documentation of various spkgs installed in a local or system Sage installation.  For example, it seems that I'm always wishing that I had that at an airport or on an airplane.  At one point a long time ago, we had an extradocs spkg, but it was never maintained.  So here is a proposal:

When building an spkg, if the SAGE_SPKG_INSTALL_DOCS environment variable is yes, then the docs are built (if available in the spkg) and are installed in $SAGE_ROOT/local/share/doc/<SPKG NAME>/

For example, numpy includes the docs with the sources.  I'd like to insert the following at the bottom of the numpy spkg-install:

```
if [ "x$SAGE_SPKG_INSTALL_DOCS" = xyes ] ; then
    cd doc
    make html
    if [ $? -ne 0 ]; then
    echo "Error building numpy docs."
    exit 1
    fi
    mkdir -p $SAGE_ROOT/local/share/doc/numpy
    mv build/html $SAGE_ROOT/local/share/doc/numpy
fi
```
This builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.

Here are a few updated spkgs:

* numpy: #10826
* cython: #10827
* matplotlib: #10828
* mpmath: #10829
* pari: #10830
* gap: #10825
* python: #10831
* sagetex: #10908


CC:  @sagetrac-drkirkby @kcrisman

Component: **packages: standard**

Author: **Jason Grout**

Reviewer: **David Kirkby**

Merged: **sage-4.7.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/10823_





---

archive/issue_events_143890.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-22T20:26:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143890"
}
```



---

archive/issue_events_143891.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-22T20:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143891"
}
```



---

archive/issue_events_143892.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-22T20:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143892"
}
```



---

archive/issue_events_143893.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-22T20:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143893"
}
```



---

archive/issue_comments_104643.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,3 +18,7 @@\n ```\n This builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.\n \n+Here are a few updated spkgs:\n+\n+* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg\n+\n``````\n",
    "created_at": "2011-02-22T20:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104643",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,3 +18,7 @@
 ```
 This builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.
 
+Here are a few updated spkgs:
+
+* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg
+
``````




---

archive/issue_comments_104644.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,5 +20,5 @@\n \n Here are a few updated spkgs:\n \n-* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg\n+* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n \n``````\n",
    "created_at": "2011-02-22T20:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104644",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,5 +20,5 @@
 
 Here are a few updated spkgs:
 
-* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg
+* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)
 
``````




---

archive/issue_comments_104645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n     exit 1\n     fi\n     mkdir -p $SAGE_ROOT/local/share/doc/numpy\n-    cp -r build/html $SAGE_ROOT/local/share/doc/numpy\n+    mv build/html $SAGE_ROOT/local/share/doc/numpy\n fi\n ```\n This builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.\n@@ -21,4 +21,5 @@\n Here are a few updated spkgs:\n \n * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n+* cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)\n \n``````\n",
    "created_at": "2011-02-22T20:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104645",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
     exit 1
     fi
     mkdir -p $SAGE_ROOT/local/share/doc/numpy
-    cp -r build/html $SAGE_ROOT/local/share/doc/numpy
+    mv build/html $SAGE_ROOT/local/share/doc/numpy
 fi
 ```
 This builds the numpy docs and makes a directory $SAGE_ROOT/local/share/doc/numpy/html/ that contains the standalone html documentation for numpy.
@@ -21,4 +21,5 @@
 Here are a few updated spkgs:
 
 * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)
+* cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)
 
``````




---

archive/issue_events_143894.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-22T21:03:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143894"
}
```



---

archive/issue_comments_104646.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,4 +22,4 @@\n \n * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)\n-\n+* matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)\n``````\n",
    "created_at": "2011-02-22T21:03:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104646",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,4 +22,4 @@
 
 * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)
 * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)
-
+* matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)
``````




---

archive/issue_comments_104647.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n     cd doc\n     make html\n     if [ $? -ne 0 ]; then\n-    echo \"Error building numpy.\"\n+    echo \"Error building numpy docs.\"\n     exit 1\n     fi\n     mkdir -p $SAGE_ROOT/local/share/doc/numpy\n``````\n",
    "created_at": "2011-02-22T21:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104647",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
     cd doc
     make html
     if [ $? -ne 0 ]; then
-    echo "Error building numpy."
+    echo "Error building numpy docs."
     exit 1
     fi
     mkdir -p $SAGE_ROOT/local/share/doc/numpy
``````




---

archive/issue_comments_104648.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nCCing our resident shell script expert for comments: David, is there anything else that should be done in the above snippet of shell script?",
    "created_at": "2011-02-22T21:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104648",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

CCing our resident shell script expert for comments: David, is there anything else that should be done in the above snippet of shell script?



---

archive/issue_comments_104649.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,3 +23,4 @@\n * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)\n * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)\n+* mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg\n``````\n",
    "created_at": "2011-02-22T21:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104649",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,3 +23,4 @@
 * numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)
 * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)
 * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)
+* mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg
``````




---

archive/issue_comments_104650.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,3 +24,4 @@\n * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)\n * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)\n * mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg\n+* pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg\n``````\n",
    "created_at": "2011-02-22T21:52:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104650",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,3 +24,4 @@
 * cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)
 * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)
 * mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg
+* pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg
``````




---

archive/issue_comments_104651.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,4 @@\n * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)\n * mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg\n * pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg\n+* gap: http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg\n``````\n",
    "created_at": "2011-02-22T22:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104651",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,4 @@
 * matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)
 * mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg
 * pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg
+* gap: http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg
``````




---

archive/issue_comments_104652.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jasongrout](#comment:6):\n> CCing our resident shell script expert for comments: David, is there anything else that should be done in the above snippet of shell script?\n\nI would indent the \n\n```\n    echo \"Error building numpy docs.\"\n    exit 1\n```\n\nfor clarity. Apart from that, it looks OK. It will put the docs in a directory \n\n```\n$SAGE_ROOT/local/share/doc/numpy/html\n```\n\nnot \n\n```\n$SAGE_ROOT/local/share/doc/numpy\n```\n\nbut I think that's a good idea, as some docs might be in pdf, others in html etc. \n\nI think it would be more normal to copy the files, rather than move them, so the build directory remains intact. (It usually gets deleted anyway, but there are ways of saving the contents). \n\nOverall, I think this is a good proposal. Lots of programs used by Sage have documentation which we don't use. There may be other tools needed to generate some of the files - (GNU info for example). In cases like that, it might be worth checking if the right tool existed.",
    "created_at": "2011-02-22T23:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104652",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jasongrout](#comment:6):
> CCing our resident shell script expert for comments: David, is there anything else that should be done in the above snippet of shell script?

I would indent the 

```
    echo "Error building numpy docs."
    exit 1
```

for clarity. Apart from that, it looks OK. It will put the docs in a directory 

```
$SAGE_ROOT/local/share/doc/numpy/html
```

not 

```
$SAGE_ROOT/local/share/doc/numpy
```

but I think that's a good idea, as some docs might be in pdf, others in html etc. 

I think it would be more normal to copy the files, rather than move them, so the build directory remains intact. (It usually gets deleted anyway, but there are ways of saving the contents). 

Overall, I think this is a good proposal. Lots of programs used by Sage have documentation which we don't use. There may be other tools needed to generate some of the files - (GNU info for example). In cases like that, it might be worth checking if the right tool existed.



---

archive/issue_comments_104653.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPS, \nI think the Sage users (or is it developers?) guide needs to be modified to document the variable. One of the manuals, (I forget which) has all the environment variables documented on one page. So I think the changes to the documentation need to be reviewed here, which will be a trivial review. \n\nThen each .spkg with the changes would need to be on separate tickets.",
    "created_at": "2011-02-22T23:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104653",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:11" align="right">comment:11</div>

PS, 
I think the Sage users (or is it developers?) guide needs to be modified to document the variable. One of the manuals, (I forget which) has all the environment variables documented on one page. So I think the changes to the documentation need to be reviewed here, which will be a trivial review. 

Then each .spkg with the changes would need to be on separate tickets.



---

archive/issue_comments_104654.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,9 +20,9 @@\n \n Here are a few updated spkgs:\n \n-* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n-* cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)\n-* matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)\n-* mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg\n-* pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg\n-* gap: http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg\n+* numpy: #10826\n+* cython: #10827\n+* matplotlib: #10828\n+* mpmath: #10829\n+* pari: #10830\n+* gap: #10825\n``````\n",
    "created_at": "2011-02-23T01:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104654",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,9 +20,9 @@
 
 Here are a few updated spkgs:
 
-* numpy: http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)
-* cython: http://sage.math.washington.edu/home/jason/cython-0.14.1.p0.spkg (depends on #10493)
-* matplotlib: http://sage.math.washington.edu/home/jason/matplotlib-1.0.1.p0.spkg (depends on #10588)
-* mpmath: http://sage.math.washington.edu/home/jason/mpmath-0.15.p0.spkg
-* pari: http://sage.math.washington.edu/home/jason/pari-2.4.3.alpha.p1.spkg
-* gap: http://sage.math.washington.edu/home/jason/gap-4.4.12.p5.spkg
+* numpy: #10826
+* cython: #10827
+* matplotlib: #10828
+* mpmath: #10829
+* pari: #10830
+* gap: #10825
``````




---

archive/issue_comments_104655.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOkay, the doc patches are up here and the description notes which tickets are for the spkgs that I put up earlier.",
    "created_at": "2011-02-23T01:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104655",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:14" align="right">comment:14</div>

Okay, the doc patches are up here and the description notes which tickets are for the spkgs that I put up earlier.



---

archive/issue_comments_104656.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,3 +26,5 @@\n * mpmath: #10829\n * pari: #10830\n * gap: #10825\n+* python: #10831\n+\n``````\n",
    "created_at": "2011-02-23T03:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104656",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,3 +26,5 @@
 * mpmath: #10829
 * pari: #10830
 * gap: #10825
+* python: #10831
+
``````




---

archive/issue_comments_104657.json:
```json
{
    "body": "Author: **Jason Grout**",
    "created_at": "2011-02-23T03:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104657",
    "user": "https://github.com/jasongrout"
}
```

Author: **Jason Grout**



---

archive/issue_comments_104658.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOkay, that's it for now, so feel free to review this and the spkgs noted in the description!",
    "created_at": "2011-02-23T03:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104658",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:16" align="right">comment:16</div>

Okay, that's it for now, so feel free to review this and the spkgs noted in the description!



---

archive/issue_events_143895.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-02-25T21:07:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143895"
}
```



---

archive/issue_events_143896.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-02-25T21:07:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143896"
}
```



---

archive/issue_comments_104659.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSorry for the delay. I spent about an hour replying to this yesterday when my wife accidentally pulled the power cord from my laptop, which did not have a battery in it at the time. So it was all lost. \n\nFrom what I recall\n\n* 'make' should be $MAKE\n* There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. \n* The line with ` echo \"SAGE_LOCAL undefined ... exiting\";` in `doc/en/developer/producing_spkgs.rst` has an extra semi-colon on the end. Since that is in the same file as here, that might as well be fixed at the same time. Also replace 'make' by $MAKE there.\n* The ticket description shows `make html` but the patch `make doc`. There is no standard way of creating documentation. Hence the developers guide should make it clearer that this section of `spk-install` will probably need changing depending on the package, and should not be copied verbatim and expected to work. \n* There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. \n* The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`\n\nClearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ \n\nHave you given thought to what is to be done if one can build both HTML and PDF docs? I suggesting building both might be best, but I don't know. \n\nOverall though, I think this is a good idea. \n\nDave",
    "created_at": "2011-02-25T21:07:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104659",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:17" align="right">comment:17</div>

Sorry for the delay. I spent about an hour replying to this yesterday when my wife accidentally pulled the power cord from my laptop, which did not have a battery in it at the time. So it was all lost. 

From what I recall

* 'make' should be $MAKE
* There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. 
* The line with ` echo "SAGE_LOCAL undefined ... exiting";` in `doc/en/developer/producing_spkgs.rst` has an extra semi-colon on the end. Since that is in the same file as here, that might as well be fixed at the same time. Also replace 'make' by $MAKE there.
* The ticket description shows `make html` but the patch `make doc`. There is no standard way of creating documentation. Hence the developers guide should make it clearer that this section of `spk-install` will probably need changing depending on the package, and should not be copied verbatim and expected to work. 
* There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. 
* The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`

Clearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ 

Have you given thought to what is to be done if one can build both HTML and PDF docs? I suggesting building both might be best, but I don't know. 

Overall though, I think this is a good idea. 

Dave



---

archive/issue_comments_104660.json:
```json
{
    "body": "Reviewer: **David Kirkby**",
    "created_at": "2011-02-25T21:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104660",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Reviewer: **David Kirkby**



---

archive/issue_comments_104661.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@sagetrac-drkirkby](#comment:17):\n\n> * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`\n\nI meant to say there was a $ sign missing. So it should be\n\n`$SAGE_ROOT/local/share/doc/$SPKG_NAME/`, with files stored in one or more directories below `$SAGE_ROOT/local/share/doc/$SPKG_NAME/`\n\nDave",
    "created_at": "2011-02-26T01:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104661",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@sagetrac-drkirkby](#comment:17):

> * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`

I meant to say there was a $ sign missing. So it should be

`$SAGE_ROOT/local/share/doc/$SPKG_NAME/`, with files stored in one or more directories below `$SAGE_ROOT/local/share/doc/$SPKG_NAME/`

Dave



---

archive/issue_comments_104662.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@sagetrac-drkirkby](#comment:17):\n> Sorry for the delay. I spent about an hour replying to this yesterday when my wife accidentally pulled the power cord from my laptop, which did not have a battery in it at the time. So it was all lost. \n> \n\nThanks very much for your time and thoughtful care in reviewing this (twice, even!)\n\n\n> From what I recall\n> \n> * 'make' should be $MAKE\n> * The ticket description shows `make html` but the patch `make doc`. There is no standard way of creating documentation. Hence the developers guide should make it clearer that this section of `spk-install` will probably need changing depending on the package, and should not be copied verbatim and expected to work. \n\nYou're right that I just put example instructions up there.  Instead, I'll just put a comment (I've modified the description accordingly).\n\n> * The line with ` echo \"SAGE_LOCAL undefined ... exiting\";` in `doc/en/developer/producing_spkgs.rst` has an extra semi-colon on the end. Since that is in the same file as here, that might as well be fixed at the same time. Also replace 'make' by $MAKE there.\n\nOkay, though it's not really in the direct scope of this ticket, since I'm modifying the file anyway, I'll throw this in too.\n\n\n> * There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. \n> \n> Clearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ \n\nDo you happen to know what file this is generated from?  I'd also consider this a separate ticket, since there are questions about how to deal with this on sagemath.org, and the fact that the link probably ought not be there if we don't generate the docs, maybe.\n\n\n> * There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. \n\nFix coming up.\n\n\n> * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`\n\nI didn't put the $ since $SPKG_NAME is not a variable that works in the spkg-install file.  My hope was to help them realize that they needed to manually fill in SPKG_NAME.  I'll put a note to that effect.\n\n\n> \n> Have you given thought to what is to be done if one can build both HTML and PDF docs? I suggesting building both might be best, but I don't know. \n\nPersonally, in the spkgs I modified, I just built the html documentation unless the default package documentation-building command built pdf too (I believe pari was that way).  I think both might be best, but having just html documentation built requires less (latex is not required, IIRC).\n\n> \n> Overall though, I think this is a good idea. \n\nThanks!",
    "created_at": "2011-02-26T03:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104662",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@sagetrac-drkirkby](#comment:17):
> Sorry for the delay. I spent about an hour replying to this yesterday when my wife accidentally pulled the power cord from my laptop, which did not have a battery in it at the time. So it was all lost. 
> 

Thanks very much for your time and thoughtful care in reviewing this (twice, even!)


> From what I recall
> 
> * 'make' should be $MAKE
> * The ticket description shows `make html` but the patch `make doc`. There is no standard way of creating documentation. Hence the developers guide should make it clearer that this section of `spk-install` will probably need changing depending on the package, and should not be copied verbatim and expected to work. 

You're right that I just put example instructions up there.  Instead, I'll just put a comment (I've modified the description accordingly).

> * The line with ` echo "SAGE_LOCAL undefined ... exiting";` in `doc/en/developer/producing_spkgs.rst` has an extra semi-colon on the end. Since that is in the same file as here, that might as well be fixed at the same time. Also replace 'make' by $MAKE there.

Okay, though it's not really in the direct scope of this ticket, since I'm modifying the file anyway, I'll throw this in too.


> * There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. 
> 
> Clearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ 

Do you happen to know what file this is generated from?  I'd also consider this a separate ticket, since there are questions about how to deal with this on sagemath.org, and the fact that the link probably ought not be there if we don't generate the docs, maybe.


> * There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. 

Fix coming up.


> * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`

I didn't put the $ since $SPKG_NAME is not a variable that works in the spkg-install file.  My hope was to help them realize that they needed to manually fill in SPKG_NAME.  I'll put a note to that effect.


> 
> Have you given thought to what is to be done if one can build both HTML and PDF docs? I suggesting building both might be best, but I don't know. 

Personally, in the spkgs I modified, I just built the html documentation unless the default package documentation-building command built pdf too (I believe pari was that way).  I think both might be best, but having just html documentation built requires less (latex is not required, IIRC).

> 
> Overall though, I think this is a good idea. 

Thanks!



---

archive/issue_comments_104663.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jasongrout](#comment:20):\n> Replying to [@sagetrac-drkirkby](#comment:17):\n\n\n\n> > * There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. \n> > \n> > Clearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ \n\n\nThis is now #10853\n\n\n\n> > * There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. \n\n> \n> Fix coming up.\n\nDone.\n\n> \n> \n> > * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`\n\n> \n> I didn't put the $ since $SPKG_NAME is not a variable that works in the spkg-install file.  My hope was to help them realize that they needed to manually fill in SPKG_NAME.  I'll put a note to that effect.\n\nPACKAGE_NAME is used quite a bit in other places in that file, so I used that.  That is understood in that file to be a placeholder to be replaced for a specific package.",
    "created_at": "2011-02-26T05:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104663",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jasongrout](#comment:20):
> Replying to [@sagetrac-drkirkby](#comment:17):



> > * There should be a link added to this page http://www.sagemath.org/doc/ (which is generated from the docs in Sage) to show the place where the new documentation can be found. 
> > 
> > Clearly adding the code to the packages is quite simple, but unless it is well documented it's not going to be much use. People must be able to find the documentation, which I think will be most easily done if on the main page http://www.sagemath.org/doc/ 


This is now #10853



> > * There's a possibility that building some of the documentation may require external programs like GNU info, LaTeX. makeinfo etc. This needs to be mentioned in the docs. 

> 
> Fix coming up.

Done.

> 
> 
> > * The patch says the documentation gets installed in the file `$SAGE_ROOT/local/share/doc/SPKG_NAME/`. I think there should be in front of $SPKG_NAME  - just as with SAGE_ROOT. Also, a more accurate description is that the docs are installed in one or more directories below `$SAGE_ROOT/local/share/doc/SPKG_NAME/`

> 
> I didn't put the $ since $SPKG_NAME is not a variable that works in the spkg-install file.  My hope was to help them realize that they needed to manually fill in SPKG_NAME.  I'll put a note to that effect.

PACKAGE_NAME is used quite a bit in other places in that file, so I used that.  That is understood in that file to be a placeholder to be replaced for a specific package.



---

archive/issue_comments_104664.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThings should be ready for review...",
    "created_at": "2011-02-26T05:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104664",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:22" align="right">comment:22</div>

Things should be ready for review...



---

archive/issue_events_143897.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-26T05:03:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143897"
}
```



---

archive/issue_events_143898.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-02-26T05:03:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143898"
}
```



---

archive/issue_comments_104665.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI take your point about `$SPKG_NAME`. Leaving it as `SPKG_NAME` is the right thing to do. \n\nThe file `devel/sage-main/doc/en/website/templates/index.html` looks to be the one that generates http://www.sagemath.org/doc/ We can discuss that on #10853\n\nI forgot, what is shown as lines 221 to 224 in `doc/en/developer/producing_spkgs.rst` are indented one space too much. \n\nI don't have a strong feeling on the following, and are happy to give it a positive review either way, but something that should at least be considered. \n\nShould `doc/en/developer/producing_spkgs.rst` state the **developer** should check if any required software is actually installed? Or is it better to let the installation fail if the program is not installed? I assume there should be a helpful message like \"latex not found\" generated by a package that needs it.\n\nIt might be helpful to add something like this to the sample spkg-install file, inside your `if [ \"x$SAGE_SPKG_INSTALL_DOCS\" = xyes ] ; then`. \n\n```\n# Before trying to build the documentation, check if any needed programs are \n# present. In the example below we check for 'latex', but this will depend on the package.\n# Some packages may need no extra tools installed, others may require some. \n# We use 'command -v' for testing this, and not 'which' since 'which' is not\n# portable, whereas 'command -v' is defined by POSIX \n# if [ `command -v latex` ] ; then \n#   echo \"Good, latex was found, so building the documentation\"\n# else\n#   echo \"Sorry, can't build the documentation for SPKG_NAME as latex is not installed\"\n# fi\n```\n\nAs I say, I don't have a strong opinion. \n\nFix the indentation and I'll give this a positive review, or make the developer do more work in testing for the required software. You choose! \n\nDave",
    "created_at": "2011-02-26T11:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104665",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:23" align="right">comment:23</div>

I take your point about `$SPKG_NAME`. Leaving it as `SPKG_NAME` is the right thing to do. 

The file `devel/sage-main/doc/en/website/templates/index.html` looks to be the one that generates http://www.sagemath.org/doc/ We can discuss that on #10853

I forgot, what is shown as lines 221 to 224 in `doc/en/developer/producing_spkgs.rst` are indented one space too much. 

I don't have a strong feeling on the following, and are happy to give it a positive review either way, but something that should at least be considered. 

Should `doc/en/developer/producing_spkgs.rst` state the **developer** should check if any required software is actually installed? Or is it better to let the installation fail if the program is not installed? I assume there should be a helpful message like "latex not found" generated by a package that needs it.

It might be helpful to add something like this to the sample spkg-install file, inside your `if [ "x$SAGE_SPKG_INSTALL_DOCS" = xyes ] ; then`. 

```
# Before trying to build the documentation, check if any needed programs are 
# present. In the example below we check for 'latex', but this will depend on the package.
# Some packages may need no extra tools installed, others may require some. 
# We use 'command -v' for testing this, and not 'which' since 'which' is not
# portable, whereas 'command -v' is defined by POSIX 
# if [ `command -v latex` ] ; then 
#   echo "Good, latex was found, so building the documentation"
# else
#   echo "Sorry, can't build the documentation for SPKG_NAME as latex is not installed"
# fi
```

As I say, I don't have a strong opinion. 

Fix the indentation and I'll give this a positive review, or make the developer do more work in testing for the required software. You choose! 

Dave



---

archive/issue_comments_104666.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nQuestion: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.",
    "created_at": "2011-02-26T21:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104666",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Question: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.



---

archive/issue_comments_104667.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@kcrisman](#comment:24):\n> Question: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.  \n\nIf we continue as now, not building the documentation, then only a 1000 or so bytes for the patches. \n\nIf we changed the way we built binaries, and included all the documentation, then I could believe the download size would increase significantly - I would guess someone in the range 10 to 100 MB. \n\nDave",
    "created_at": "2011-02-27T01:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104667",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@kcrisman](#comment:24):
> Question: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.  

If we continue as now, not building the documentation, then only a 1000 or so bytes for the patches. 

If we changed the way we built binaries, and included all the documentation, then I could believe the download size would increase significantly - I would guess someone in the range 10 to 100 MB. 

Dave



---

archive/issue_comments_104668.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@sagetrac-drkirkby](#comment:25):\n> Replying to [@kcrisman](#comment:24):\n> > Question: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.  \n\n> \n> If we continue as now, not building the documentation, then only a 1000 or so bytes for the patches. \n> \n\nSorry for the spam - I guess I didn't realize this would be an *optional* variable!",
    "created_at": "2011-02-27T02:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104668",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@sagetrac-drkirkby](#comment:25):
> Replying to [@kcrisman](#comment:24):
> > Question: How much does this add to the size of a Sage download?  It's at least conceivable that it would be not be negligible.  

> 
> If we continue as now, not building the documentation, then only a 1000 or so bytes for the patches. 
> 

Sorry for the spam - I guess I didn't realize this would be an *optional* variable!



---

archive/issue_comments_104669.json:
```json
{
    "body": "Attachment: **[trac-10823-doc.patch.gz](https://github.com/sagemath/sage/files/ticket10823/trac-10823-doc.patch.gz)**",
    "created_at": "2011-03-01T02:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104669",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-10823-doc.patch.gz](https://github.com/sagemath/sage/files/ticket10823/trac-10823-doc.patch.gz)**



---

archive/issue_comments_104670.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOkay, I attached a new patch which should take care of all of David's concerns.\n\nThanks for the careful review!",
    "created_at": "2011-03-01T03:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104670",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:27" align="right">comment:27</div>

Okay, I attached a new patch which should take care of all of David's concerns.

Thanks for the careful review!



---

archive/issue_events_143899.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-01T13:58:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143899"
}
```



---

archive/issue_events_143900.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-01T13:58:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143900"
}
```



---

archive/issue_comments_104671.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThis is fine, so positive review. I'll look to review the individual packages that make use of the environment variable, but for now at least it is properly documented in both the Installation and Developer guides.",
    "created_at": "2011-03-01T13:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104671",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:28" align="right">comment:28</div>

This is fine, so positive review. I'll look to review the individual packages that make use of the environment variable, but for now at least it is properly documented in both the Installation and Developer guides.



---

archive/issue_comments_104672.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI'm putting this back to needs_work, as I realised after looking at a revised Matplotlib package (#10828) that simply copying the \"docs\" directory might in some cases copy a lot of unnecessary files. The spkg-install should tell developers to remove unnecessary files from $SAGE_ROOT/local/share/doc/SPKG_NAME. Again this will depend on the package, but something like:\n\n```\nfind \"$SAGE_ROOT/local/share/doc/SPKG_NAME\" -name '*.py'  -exec rm -f {} \\;\n```\n\nshould get rid of the .py files for example. \n\nDave",
    "created_at": "2011-03-02T01:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104672",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:29" align="right">comment:29</div>

I'm putting this back to needs_work, as I realised after looking at a revised Matplotlib package (#10828) that simply copying the "docs" directory might in some cases copy a lot of unnecessary files. The spkg-install should tell developers to remove unnecessary files from $SAGE_ROOT/local/share/doc/SPKG_NAME. Again this will depend on the package, but something like:

```
find "$SAGE_ROOT/local/share/doc/SPKG_NAME" -name '*.py'  -exec rm -f {} \;
```

should get rid of the .py files for example. 

Dave



---

archive/issue_events_143901.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T01:41:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143901"
}
```



---

archive/issue_events_143902.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T01:41:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143902"
}
```



---

archive/issue_comments_104673.json:
```json
{
    "body": "Attachment: **[trac-10823-doc-2.patch.gz](https://github.com/sagemath/sage/files/ticket10823/trac-10823-doc-2.patch.gz)**\n\napply on top of previous patches",
    "created_at": "2011-03-02T04:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104673",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-10823-doc-2.patch.gz](https://github.com/sagemath/sage/files/ticket10823/trac-10823-doc-2.patch.gz)**

apply on top of previous patches



---

archive/issue_comments_104674.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI added a further note to the documentation.",
    "created_at": "2011-03-02T04:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104674",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:30" align="right">comment:30</div>

I added a further note to the documentation.



---

archive/issue_events_143903.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-03-02T04:24:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143903"
}
```



---

archive/issue_events_143904.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-03-02T04:24:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143904"
}
```



---

archive/issue_comments_104675.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThat's fine.",
    "created_at": "2011-03-02T04:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104675",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:31" align="right">comment:31</div>

That's fine.



---

archive/issue_events_143905.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T04:42:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143905"
}
```



---

archive/issue_events_143906.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-02T04:42:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143906"
}
```



---

archive/issue_events_143907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143907"
}
```



---

archive/issue_events_143908.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:48:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10823#event-143908"
}
```



---

archive/issue_comments_104676.json:
```json
{
    "body": "Merged: **sage-4.7.alpha1**",
    "created_at": "2011-03-08T21:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104676",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha1**



---

archive/issue_comments_104677.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,4 +27,5 @@\n * pari: #10830\n * gap: #10825\n * python: #10831\n+* sagetex: #10908\n \n``````\n",
    "created_at": "2011-03-18T07:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104677",
    "user": "https://github.com/dandrake"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,4 +27,5 @@
 * pari: #10830
 * gap: #10825
 * python: #10831
+* sagetex: #10908
 
``````




---

archive/issue_comments_104678.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nSee #11197 for a follow-up ticket for implementing building docs after Sage is built.",
    "created_at": "2011-04-14T13:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10823#issuecomment-104678",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:34" align="right">comment:34</div>

See #11197 for a follow-up ticket for implementing building docs after Sage is built.
