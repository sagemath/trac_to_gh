# Issue 10914: Integration involving abs gives wrong result

archive/issues_010840.json:
```json
{
    "body": "Running\n\n```\nsage: integrate(abs(sin(x)),(x,0,2*pi))\n```\ngives 0, but the correct result is 4.\n\nThis happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.\n\nApply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).\n\n**Assignee:** @burcin\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Author:** Michael Orlitzky\n\n**Merged:** sage-5.0.beta14\n\nIssue created by migration from https://trac.sagemath.org/ticket/10914\n\n",
    "closed_at": "2012-04-26T20:10:42Z",
    "created_at": "2011-03-11T13:11:40Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "title": "Integration involving abs gives wrong result",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10914",
    "user": "https://trac.sagemath.org/admin/accounts/users/poeschko"
}
```
Running

```
sage: integrate(abs(sin(x)),(x,0,2*pi))
```
gives 0, but the correct result is 4.

This happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.

Apply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).

**Assignee:** @burcin

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Karl-Dieter Crisman

**Author:** Michael Orlitzky

**Merged:** sage-5.0.beta14

Issue created by migration from https://trac.sagemath.org/ticket/10914





---

archive/issue_comments_107989.json:
```json
{
    "body": "**Upstream:** Reported upstream. Little or no feedback.",
    "created_at": "2011-03-14T19:54:18Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107989",
    "user": "https://github.com/kcrisman"
}
```

**Upstream:** Reported upstream. Little or no feedback.



---

archive/issue_comments_107990.json:
```json
{
    "body": "<a id='comment:1'></a>\nCertainly the integral better be positive!  \n\nThis is wrong in Maxima (5.23.2), though it does get the one arch problem correct:\n\n```\nMaxima 5.23.2 http://maxima.sourceforge.net\nusing Lisp SBCL 1.0.24\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(sin(x)),x,0,2*%pi);\n(%o1)                                  0\n(%i2) integrate(sin(x),x,0,%pi/2);\n(%o2)                                  1\n(%i3) \n```\n\nThis is now Maxima bug 3211915.",
    "created_at": "2011-03-14T19:54:18Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107990",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
Certainly the integral better be positive!  

This is wrong in Maxima (5.23.2), though it does get the one arch problem correct:

```
Maxima 5.23.2 http://maxima.sourceforge.net
using Lisp SBCL 1.0.24
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(sin(x)),x,0,2*%pi);
(%o1)                                  0
(%i2) integrate(sin(x),x,0,%pi/2);
(%o2)                                  1
(%i3) 
```

This is now Maxima bug 3211915.



---

archive/issue_comments_107991.json:
```json
{
    "body": "<a id='comment:2'></a>\nApparently that was a dup - see [this bug report](https://sourceforge.net/tracker/?func=detail&aid=3165872&group_id=4933&atid=104933) instead.  Fixed, so when we upgrade we'll need a doctest.",
    "created_at": "2011-03-30T15:20:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107991",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Apparently that was a dup - see [this bug report](https://sourceforge.net/tracker/?func=detail&aid=3165872&group_id=4933&atid=104933) instead.  Fixed, so when we upgrade we'll need a doctest.



---

archive/issue_comments_107992.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2011-03-30T15:20:28Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107992",
    "user": "https://github.com/kcrisman"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_107993.json:
```json
{
    "body": "<a id='comment:3'></a>\nWell, we don't get `4`, but at least the bug is fixed with our current Maxima.",
    "created_at": "2012-04-14T21:21:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107993",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>
Well, we don't get `4`, but at least the bug is fixed with our current Maxima.



---

archive/issue_comments_107994.json:
```json
{
    "body": "**Author:** Michael Orlitzky",
    "created_at": "2012-04-14T21:21:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107994",
    "user": "https://github.com/orlitzky"
}
```

**Author:** Michael Orlitzky



---

archive/issue_comments_107995.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2012-04-14T21:21:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107995",
    "user": "https://github.com/orlitzky"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release.".



---

archive/issue_events_084982.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-04-14T21:21:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84982"
}
```



---

archive/issue_comments_107996.json:
```json
{
    "body": "<a id='comment:4'></a>\n`shouln't`?\n\nAnyway, this is fine, but the style is a little too informal - those not having read the ticket will be mystified, and shouldn't have to go to the ticket to find out.  So I'm uploading the same patch but with slightly different wording.\n\nNotwithstanding that this file doesn't appear to be in the reference manual in any case.",
    "created_at": "2012-04-15T02:56:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107996",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
`shouln't`?

Anyway, this is fine, but the style is a little too informal - those not having read the ticket will be mystified, and shouldn't have to go to the ticket to find out.  So I'm uploading the same patch but with slightly different wording.

Notwithstanding that this file doesn't appear to be in the reference manual in any case.



---

archive/issue_comments_107997.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2012-04-15T02:56:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107997",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_events_084983.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-04-15T02:56:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84983"
}
```



---

archive/issue_events_084984.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-04-15T02:56:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84984"
}
```



---

archive/attachments_014838.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10914.patch",
    "asset_url": "tarball://root/attachments/ticket10914/trac_10914.patch",
    "created_at": "2012-04-15T02:57:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch",
    "user": "https://github.com/kcrisman"
}
```



---

archive/issue_comments_107998.json:
```json
{
    "body": "**Attachment:** [trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch)\n\nApply this patch only",
    "created_at": "2012-04-15T02:57:05Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107998",
    "user": "https://github.com/kcrisman"
}
```

**Attachment:** [trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch)

Apply this patch only



---

archive/issue_comments_107999.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,5 @@\n gives 0, but the correct result is 4.\n \n This happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.\n+\n+Apply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).\n``````\n",
    "created_at": "2012-04-15T02:57:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-107999",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,5 @@
 gives 0, but the correct result is 4.
 
 This happens in version 4.6.1 . In 4.5.3, the integral was not evaluated at all.
+
+Apply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).
``````




---

archive/issue_comments_108000.json:
```json
{
    "body": "<a id='comment:5'></a>\nApply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).",
    "created_at": "2012-04-15T02:57:50Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-108000",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Apply [attachment:trac_10914.patch](https://github.com/sagemath/sage/files/ticket10914/trac_10914.patch).



---

archive/issue_comments_108001.json:
```json
{
    "body": "<a id='comment:6'></a>\nAh, sorry. I actually parse it now as, \"We won't get (an evaluated answer here, which is better than the previous (wrong) answer of zero),\" but I don't think it matters much since most of them don't make sense out-of-context, \"make sure #xyz is fixed.\"",
    "created_at": "2012-04-15T15:05:02Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-108001",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>
Ah, sorry. I actually parse it now as, "We won't get (an evaluated answer here, which is better than the previous (wrong) answer of zero)," but I don't think it matters much since most of them don't make sense out-of-context, "make sure #xyz is fixed."



---

archive/issue_events_084985.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T06:57:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84985"
}
```



---

archive/issue_comments_108002.json:
```json
{
    "body": "**Merged:** sage-5.0.beta14",
    "created_at": "2012-04-26T20:10:42Z",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10914#issuecomment-108002",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta14



---

archive/issue_events_084986.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-26T20:10:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84986"
}
```



---

archive/issue_events_084987.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-26T20:10:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10914",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10914#event-84987"
}
```
