# Issue 10489: plot_slope_field broken

archive/issues_010436.json:
```json
{
    "body": "**plot_slope_field( lambda x,y: x+y,(x,-3,4),(y,-2,2) );**\n\nresults in\n\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_15.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"cGxvdF9zbG9wZV9maWVsZCggbGFtYmRhIHgseTogeCt5LCh4LC0zLDQpLCh5LC0yLDIpICk7\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n    \n  File \"/tmp/tmp639i0K/___code___.py\", line 3, in <module>\n    exec compile(u'plot_slope_field( lambda x,y: x+y,(x,-_sage_const_3 ,_sage_const_4 ),(y,-_sage_const_2 ,_sage_const_2 ) );\n  File \"\", line 1, in <module>\n    \n  File \"/homes/sageserv/sage-4.5.1-Solaris_10_SPARC/local/lib/python2.6/site-packages/sage/plot/plot_field.py\", line 220, in plot_slope_field\n    norm = sqrt((f**2+1))\nTypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'\n```\n\n---\n\nTo release manager:\n* apply [attachment:trac-10489-slope-field-lambda-4-7-3.patch] to the Sage library\n\n\nAssignee: jason, was\n\nCC:  @kcrisman\n\nKeywords: plot_slope_field beginner sd35.5\n\nResolution: fixed\n\nAuthor: Ryan Grout, Jason Grout, Nathan Carter\n\nReviewer: Aly Deines, Ryan Grout, Benjamin Jones\n\nMerged: sage-5.0.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10489\n\n",
    "closed_at": "2012-01-21T23:37:33Z",
    "created_at": "2010-12-17T09:54:55Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "plot_slope_field broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10489",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```
**plot_slope_field( lambda x,y: x+y,(x,-3,4),(y,-2,2) );**

results in


```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_15.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("cGxvdF9zbG9wZV9maWVsZCggbGFtYmRhIHgseTogeCt5LCh4LC0zLDQpLCh5LC0yLDIpICk7"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/tmp/tmp639i0K/___code___.py", line 3, in <module>
    exec compile(u'plot_slope_field( lambda x,y: x+y,(x,-_sage_const_3 ,_sage_const_4 ),(y,-_sage_const_2 ,_sage_const_2 ) );
  File "", line 1, in <module>
    
  File "/homes/sageserv/sage-4.5.1-Solaris_10_SPARC/local/lib/python2.6/site-packages/sage/plot/plot_field.py", line 220, in plot_slope_field
    norm = sqrt((f**2+1))
TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'
```

---

To release manager:
* apply [attachment:trac-10489-slope-field-lambda-4-7-3.patch] to the Sage library


Assignee: jason, was

CC:  @kcrisman

Keywords: plot_slope_field beginner sd35.5

Resolution: fixed

Author: Ryan Grout, Jason Grout, Nathan Carter

Reviewer: Aly Deines, Ryan Grout, Benjamin Jones

Merged: sage-5.0.beta1

Issue created by migration from https://trac.sagemath.org/ticket/10489





---

archive/issue_comments_129787.json:
```json
{
    "body": "<a id='comment:1'></a>Did that ever work?  I think the code assumes that a symbolic function is given:\n\n```\nsage: f(x,y)=x+y\nsage: plot_slope_field(f,(x,-3,4),(y,-2,2) )\n```",
    "created_at": "2010-12-17T17:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129787",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'></a>Did that ever work?  I think the code assumes that a symbolic function is given:

```
sage: f(x,y)=x+y
sage: plot_slope_field(f,(x,-3,4),(y,-2,2) )
```



---

archive/issue_events_026890.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-12-17T17:47:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10489#event-26890"
}
```



---

archive/issue_comments_129788.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2010-12-17T17:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129788",
    "user": "https://github.com/jasongrout"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_129789.json:
```json
{
    "body": "<a id='comment:2'></a>Changing to enhancement, since I don't think the code was ever designed to handle a python lambda function.  I suggest changing the code to see if we have a symbolic expression or a python function.  If a python function, then create a new lambda function which normalizes the vectors.",
    "created_at": "2010-12-17T17:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129789",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>Changing to enhancement, since I don't think the code was ever designed to handle a python lambda function.  I suggest changing the code to see if we have a symbolic expression or a python function.  If a python function, then create a new lambda function which normalizes the vectors.



---

archive/issue_comments_129790.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-17T18:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129790",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_129791.json:
```json
{
    "body": "<a id='comment:3'></a>Attachment [10489_slope_field_lambda.patch](tarball://root/attachments/some-uuid/ticket10489/10489_slope_field_lambda.patch) by @jasongrout created at 2010-12-17 18:06:47\n\nAttached patch adds this feature to plot_slope_field.  Someone just needs to review it!",
    "created_at": "2010-12-17T18:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129791",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>Attachment [10489_slope_field_lambda.patch](tarball://root/attachments/some-uuid/ticket10489/10489_slope_field_lambda.patch) by @jasongrout created at 2010-12-17 18:06:47

Attached patch adds this feature to plot_slope_field.  Someone just needs to review it!



---

archive/issue_comments_129792.json:
```json
{
    "body": "<a id='comment:4'></a>Thank you. I figured this out by now but you had already replied. I just think this should be a consistent behaviour through all plotting functions (unless the nature of the function itsself demands otherwise - and then it should be made very explicit). I don't think that some function should be able to handle both, some only the prior and some only the latter.",
    "created_at": "2010-12-17T18:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129792",
    "user": "https://trac.sagemath.org/admin/accounts/users/ManDay"
}
```

<a id='comment:4'></a>Thank you. I figured this out by now but you had already replied. I just think this should be a consistent behaviour through all plotting functions (unless the nature of the function itsself demands otherwise - and then it should be made very explicit). I don't think that some function should be able to handle both, some only the prior and some only the latter.



---

archive/issue_comments_129793.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 ManDay]:\n> Thank you. I figured this out by now but you had already replied. I just think this should be a consistent behaviour through all plotting functions (unless the nature of the function itsself demands otherwise - and then it should be made very explicit). I don't think that some function should be able to handle both, some only the prior and some only the latter.\n> \n\n\nI agree!  Feel free to review the patch.",
    "created_at": "2010-12-17T19:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129793",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>Replying to [comment:4 ManDay]:
> Thank you. I figured this out by now but you had already replied. I just think this should be a consistent behaviour through all plotting functions (unless the nature of the function itsself demands otherwise - and then it should be made very explicit). I don't think that some function should be able to handle both, some only the prior and some only the latter.
> 


I agree!  Feel free to review the patch.



---

archive/issue_comments_129794.json:
```json
{
    "body": "<a id='comment:7'></a>Add the beginner keyword, as this seems like a good beginner review.",
    "created_at": "2011-01-11T16:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129794",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>Add the beginner keyword, as this seems like a good beginner review.



---

archive/issue_comments_129795.json:
```json
{
    "body": "Changing keywords from \"plot_slope_field\" to \"plot_slope_field beginner\".",
    "created_at": "2011-01-11T16:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129795",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "plot_slope_field" to "plot_slope_field beginner".



---

archive/issue_comments_129796.json:
```json
{
    "body": "<a id='comment:8'></a>Running sage-4.6.1.rc0 on sage.math the patch did not apply:\n\n\nadeines`@`sage:~/sage-4.6.1.rc0/devel/sage$ hg qpush\napplying 10489_slope_field_lambda.patch\npatching file sage/plot/plot_field.py\nHunk #1 FAILED at 218\n1 out of 1 hunks FAILED -- saving rejects to file sage/plot/plot_field.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh 10489_slope_field_lambda.patch\nadeines`@`sage:~/sage-4.6.1.rc0/devel/sage$ vi sage/plot/plot_field.py.rej \n\n--- plot_field.py\n+++ plot_field.py\n`@``@` -219,10 +219,21 `@``@`\n\n         sage: x,y = var('x y')\n         sage: plot_slope_field(sin(x+y)+cos(x+y), (x,-3,3), (y,-3,3))\n+\n+    Plot a slope field using a lambda function::\n+\n+        sage: plot_slope_field(lambda x,y: x+y, (-2,2), (-2,2))\n+\n     \"\"\"\n     slope_options = {'headaxislength': 0, 'headlength': 0, 'pivot': 'middle'}\n     slope_options.update(kwds)\n\n     from sage.functions.all import sqrt\n-    norm = sqrt((f**2+1))\n-    return plot_vector_field((1/norm, f/norm), xrange, yrange, **slope_options)\n+    from inspect import isfunction\n+    if isfunction(f):\n+        norm_inverse=lambda x,y: 1/sqrt(f(x,y)**2+1)\n+        f_normalized=lambda x,y: f(x,y)*norm_inverse(x,y)\n+    else:\n+        norm_inverse = 1/sqrt((f**2+1))\n+        f_normalized=f*norm_inverse\n+    return plot_vector_field((norm_inverse, f_normalized), xrange, yrange, **slope_options)",
    "created_at": "2011-01-11T23:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129796",
    "user": "https://github.com/adeines"
}
```

<a id='comment:8'></a>Running sage-4.6.1.rc0 on sage.math the patch did not apply:


adeines`@`sage:~/sage-4.6.1.rc0/devel/sage$ hg qpush
applying 10489_slope_field_lambda.patch
patching file sage/plot/plot_field.py
Hunk #1 FAILED at 218
1 out of 1 hunks FAILED -- saving rejects to file sage/plot/plot_field.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh 10489_slope_field_lambda.patch
adeines`@`sage:~/sage-4.6.1.rc0/devel/sage$ vi sage/plot/plot_field.py.rej 

--- plot_field.py
+++ plot_field.py
`@``@` -219,10 +219,21 `@``@`

         sage: x,y = var('x y')
         sage: plot_slope_field(sin(x+y)+cos(x+y), (x,-3,3), (y,-3,3))
+
+    Plot a slope field using a lambda function::
+
+        sage: plot_slope_field(lambda x,y: x+y, (-2,2), (-2,2))
+
     """
     slope_options = {'headaxislength': 0, 'headlength': 0, 'pivot': 'middle'}
     slope_options.update(kwds)

     from sage.functions.all import sqrt
-    norm = sqrt((f**2+1))
-    return plot_vector_field((1/norm, f/norm), xrange, yrange, **slope_options)
+    from inspect import isfunction
+    if isfunction(f):
+        norm_inverse=lambda x,y: 1/sqrt(f(x,y)**2+1)
+        f_normalized=lambda x,y: f(x,y)*norm_inverse(x,y)
+    else:
+        norm_inverse = 1/sqrt((f**2+1))
+        f_normalized=f*norm_inverse
+    return plot_vector_field((norm_inverse, f_normalized), xrange, yrange, **slope_options)



---

archive/issue_comments_129797.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-01-11T23:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129797",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_129798.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Aly Deines\"",
    "created_at": "2011-01-11T23:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129798",
    "user": "https://github.com/adeines"
}
```

Changing reviewer from "" to "Aly Deines"



---

archive/issue_comments_129799.json:
```json
{
    "body": "rebased against sage-4.6.1",
    "created_at": "2011-01-17T16:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129799",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

rebased against sage-4.6.1



---

archive/issue_comments_129800.json:
```json
{
    "body": "<a id='comment:9'></a>Attachment [10489_slope_field_lambda_reviewer.patch](tarball://root/attachments/some-uuid/ticket10489/10489_slope_field_lambda_reviewer.patch) by ryan created at 2011-01-17 16:30:46\n\nrebased patch against sage-4.6.1\nShould apply cleanly now.\n\nAll tests passed on my machine.  However, plotting the doctest gave several warnings before finally plotting the function.  Should we maybe check for divide by zero cases or other such cases?\n\n```\nWarning: divide by zero encountered in divide\nWarning: invalid value encountered in multiply\nWarning: invalid value encountered in multiply\nWarning: divide by zero encountered in divide\nWarning: invalid value encountered in multiply\nWarning: invalid value encountered in multiply}}}",
    "created_at": "2011-01-17T16:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129800",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

<a id='comment:9'></a>Attachment [10489_slope_field_lambda_reviewer.patch](tarball://root/attachments/some-uuid/ticket10489/10489_slope_field_lambda_reviewer.patch) by ryan created at 2011-01-17 16:30:46

rebased patch against sage-4.6.1
Should apply cleanly now.

All tests passed on my machine.  However, plotting the doctest gave several warnings before finally plotting the function.  Should we maybe check for divide by zero cases or other such cases?

```
Warning: divide by zero encountered in divide
Warning: invalid value encountered in multiply
Warning: invalid value encountered in multiply
Warning: divide by zero encountered in divide
Warning: invalid value encountered in multiply
Warning: invalid value encountered in multiply}}}



---

archive/issue_comments_129801.json:
```json
{
    "body": "Changing reviewer from \"Aly Deines\" to \"Aly Deines, Ryan Grout\"",
    "created_at": "2011-01-17T16:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129801",
    "user": "https://trac.sagemath.org/admin/accounts/users/ryan"
}
```

Changing reviewer from "Aly Deines" to "Aly Deines, Ryan Grout"



---

archive/issue_comments_129802.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 ryan]:\n> rebased patch against sage-4.6.1\n> Should apply cleanly now.\n> \n> All tests passed on my machine.  However, plotting the doctest gave several warnings before finally plotting the function.  Should we maybe check for divide by zero cases or other such cases?\n\n\n\nYes, but that is a separate issue from this ticket, so we should open a new ticket for that.  In fact, I seem to remember that a ticket was opened several years ago for the divide by zero issue.",
    "created_at": "2011-01-17T17:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129802",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>Replying to [comment:9 ryan]:
> rebased patch against sage-4.6.1
> Should apply cleanly now.
> 
> All tests passed on my machine.  However, plotting the doctest gave several warnings before finally plotting the function.  Should we maybe check for divide by zero cases or other such cases?



Yes, but that is a separate issue from this ticket, so we should open a new ticket for that.  In fact, I seem to remember that a ticket was opened several years ago for the divide by zero issue.



---

archive/issue_comments_129803.json:
```json
{
    "body": "<a id='comment:11'></a>#5553 is a related issue to the divide by zero issue.",
    "created_at": "2011-01-17T17:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129803",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:11'></a>#5553 is a related issue to the divide by zero issue.



---

archive/issue_comments_129804.json:
```json
{
    "body": "<a id='comment:12'></a>The issue with the divide by zero warnings is #11208.",
    "created_at": "2011-05-24T02:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129804",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>The issue with the divide by zero warnings is #11208.



---

archive/issue_comments_129805.json:
```json
{
    "body": "<a id='comment:13'></a>The most recent patch (12 mo ago) doesn't apply anymore.  I will now upload an updated version of the same patch, for review.",
    "created_at": "2012-01-09T17:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129805",
    "user": "https://trac.sagemath.org/admin/accounts/users/ncarter"
}
```

<a id='comment:13'></a>The most recent patch (12 mo ago) doesn't apply anymore.  I will now upload an updated version of the same patch, for review.



---

archive/issue_comments_129806.json:
```json
{
    "body": "Attachment [trac-10489-slope-field-lambda-4-7-3.patch](tarball://root/attachments/some-uuid/ticket10489/trac-10489-slope-field-lambda-4-7-3.patch) by ncarter created at 2012-01-09 17:26:59\n\nUpdating previous patch to newer Sage version",
    "created_at": "2012-01-09T17:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129806",
    "user": "https://trac.sagemath.org/admin/accounts/users/ncarter"
}
```

Attachment [trac-10489-slope-field-lambda-4-7-3.patch](tarball://root/attachments/some-uuid/ticket10489/trac-10489-slope-field-lambda-4-7-3.patch) by ncarter created at 2012-01-09 17:26:59

Updating previous patch to newer Sage version



---

archive/issue_comments_129807.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-09T17:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129807",
    "user": "https://trac.sagemath.org/admin/accounts/users/ncarter"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_129808.json:
```json
{
    "body": "Changing keywords from \"plot_slope_field beginner\" to \"plot_slope_field beginner sd35.5\".",
    "created_at": "2012-01-09T19:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129808",
    "user": "https://trac.sagemath.org/admin/accounts/users/ncarter"
}
```

Changing keywords from "plot_slope_field beginner" to "plot_slope_field beginner sd35.5".



---

archive/issue_comments_129809.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,11 @@\n TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'\n ```\n \n-Keywords: plot_slope_field\n+---\n+\n+To release manager:\n+* apply [This is the Trac macro *trac-10489-slope-field-lambda-4-7-3.patch trac-10489-slope-field-lambda-4-7-3.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#trac-10489-slope-field-lambda-4-7-3.patch trac-10489-slope-field-lambda-4-7-3.patch-macro) to the Sage library\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-10T00:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129809",
    "user": "https://github.com/benjaminfjones"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,11 @@
 TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'
 ```
 
-Keywords: plot_slope_field
+---
+
+To release manager:
+* apply [This is the Trac macro *trac-10489-slope-field-lambda-4-7-3.patch trac-10489-slope-field-lambda-4-7-3.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#trac-10489-slope-field-lambda-4-7-3.patch trac-10489-slope-field-lambda-4-7-3.patch-macro) to the Sage library
+
 
 Comment: 1
 
``````




---

archive/issue_comments_129810.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-10T00:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129810",
    "user": "https://github.com/benjaminfjones"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_129811.json:
```json
{
    "body": "Changing reviewer from \"Aly Deines, Ryan Grout\" to \"Aly Deines, Ryan Grout, Benjamin Jones\"",
    "created_at": "2012-01-10T00:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129811",
    "user": "https://github.com/benjaminfjones"
}
```

Changing reviewer from "Aly Deines, Ryan Grout" to "Aly Deines, Ryan Grout, Benjamin Jones"



---

archive/issue_comments_129812.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,28 @@\n+**plot_slope_field( lambda x,y: x+y,(x,-3,4),(y,-2,2) );**\n+\n+results in\n+\n+\n+```\n+Traceback (most recent call last):\n+  File \"<stdin>\", line 1, in <module>\n+  File \"_sage_input_15.py\", line 10, in <module>\n+    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"cGxvdF9zbG9wZV9maWVsZCggbGFtYmRhIHgseTogeCt5LCh4LC0zLDQpLCh5LC0yLDIpICk7\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n+  File \"\", line 1, in <module>\n+    \n+  File \"/tmp/tmp639i0K/___code___.py\", line 3, in <module>\n+    exec compile(u'plot_slope_field( lambda x,y: x+y,(x,-_sage_const_3 ,_sage_const_4 ),(y,-_sage_const_2 ,_sage_const_2 ) );\n+  File \"\", line 1, in <module>\n+    \n+  File \"/homes/sageserv/sage-4.5.1-Solaris_10_SPARC/local/lib/python2.6/site-packages/sage/plot/plot_field.py\", line 220, in plot_slope_field\n+    norm = sqrt((f**2+1))\n+TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'\n+```\n+\n+---\n+\n+To release manager:\n+* apply [attachment:trac-10489-slope-field-lambda-4-7-3.patch] to the Sage library\n \n \n Comment: 1\n``````\n",
    "created_at": "2012-01-10T00:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129812",
    "user": "https://github.com/benjaminfjones"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,28 @@
+**plot_slope_field( lambda x,y: x+y,(x,-3,4),(y,-2,2) );**
+
+results in
+
+
+```
+Traceback (most recent call last):
+  File "<stdin>", line 1, in <module>
+  File "_sage_input_15.py", line 10, in <module>
+    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("cGxvdF9zbG9wZV9maWVsZCggbGFtYmRhIHgseTogeCt5LCh4LC0zLDQpLCh5LC0yLDIpICk7"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
+  File "", line 1, in <module>
+    
+  File "/tmp/tmp639i0K/___code___.py", line 3, in <module>
+    exec compile(u'plot_slope_field( lambda x,y: x+y,(x,-_sage_const_3 ,_sage_const_4 ),(y,-_sage_const_2 ,_sage_const_2 ) );
+  File "", line 1, in <module>
+    
+  File "/homes/sageserv/sage-4.5.1-Solaris_10_SPARC/local/lib/python2.6/site-packages/sage/plot/plot_field.py", line 220, in plot_slope_field
+    norm = sqrt((f**2+1))
+TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'
+```
+
+---
+
+To release manager:
+* apply [attachment:trac-10489-slope-field-lambda-4-7-3.patch] to the Sage library
 
 
 Comment: 1
``````




---

archive/issue_comments_129813.json:
```json
{
    "body": "<a id='comment:17'></a>The patch `trac-10489-slope-field-lambda-4-7-3.patch` applies cleanly to Sage-4.8.alpha6, all doctests pass, the patch looks great.\n\nPositive review.",
    "created_at": "2012-01-10T00:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129813",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:17'></a>The patch `trac-10489-slope-field-lambda-4-7-3.patch` applies cleanly to Sage-4.8.alpha6, all doctests pass, the patch looks great.

Positive review.



---

archive/issue_comments_129814.json:
```json
{
    "body": "Changing author from \"\" to \"Ryan Grout, Jason Grout, Nathan Carter\"",
    "created_at": "2012-01-10T01:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129814",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "" to "Ryan Grout, Jason Grout, Nathan Carter"



---

archive/issue_comments_129815.json:
```json
{
    "body": "<a id='comment:18'></a>Assuming that the plots look great as well :)",
    "created_at": "2012-01-10T01:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129815",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>Assuming that the plots look great as well :)



---

archive/issue_comments_129816.json:
```json
{
    "body": "<a id='comment:19'></a>They look correct to me.",
    "created_at": "2012-01-10T02:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129816",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:19'></a>They look correct to me.



---

archive/issue_events_026891.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-10T08:46:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10489#event-26891"
}
```



---

archive/issue_events_026892.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-10T08:46:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10489#event-26892"
}
```



---

archive/issue_comments_129817.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-21T23:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129817",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_129818.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta1\"",
    "created_at": "2012-01-21T23:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10489#issuecomment-129818",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta1"



---

archive/issue_events_026893.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-21T23:37:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10489",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10489#event-26893"
}
```
