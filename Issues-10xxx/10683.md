# Issue 10683: Hermitian inner product

archive/issues_010630.json:
```json
{
    "body": "One patch adds the Hermitian inner product, by that name, for use with vectors over the complex numbers.\n\nSecond patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.\n\n**Depends on:**\n1. #10536\n\n**Apply:**\n1. [attachment:trac_10683-hermitian_inner_product-v3.patch]\n2. [attachment:trac_10683-vector-products-docs-v2.patch]\n\n**Assignee:** @jasongrout, @williamstein\n\n**Resolution:** fixed\n\n**Author:** Rob Beezer\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Merged:** sage-4.7.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10683\n\n",
    "closed_at": "2011-04-07T19:57:41Z",
    "created_at": "2011-01-24T22:43:26Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Hermitian inner product",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10683",
    "user": "https://github.com/rbeezer"
}
```
One patch adds the Hermitian inner product, by that name, for use with vectors over the complex numbers.

Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.

**Depends on:**
1. #10536

**Apply:**
1. [attachment:trac_10683-hermitian_inner_product-v3.patch]
2. [attachment:trac_10683-vector-products-docs-v2.patch]

**Assignee:** @jasongrout, @williamstein

**Resolution:** fixed

**Author:** Rob Beezer

**Reviewer:** Karl-Dieter Crisman

**Merged:** sage-4.7.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10683





---

archive/attachments_013999.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10683-vector-products-docs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10683/trac_10683-vector-products-docs.patch",
    "created_at": "2011-01-24T22:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_140807.json:
```json
{
    "body": "",
    "created_at": "2011-01-24T22:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140807",
    "user": "https://github.com/rbeezer"
}
```





---

archive/issue_comments_140808.json:
```json
{
    "body": "<a id='comment:1'></a>\nApply patches in order given here:\n\nApply: trac_10683-hermitian_inner_product.patch\n\nApply: trac_10683-vector-products-docs.patch",
    "created_at": "2011-01-24T22:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140808",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'></a>
Apply patches in order given here:

Apply: trac_10683-hermitian_inner_product.patch

Apply: trac_10683-vector-products-docs.patch



---

archive/issue_comments_140809.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-01-24T22:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140809",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_140810.json:
```json
{
    "body": "**Author:** Rob Beezer",
    "created_at": "2011-01-24T22:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140810",
    "user": "https://github.com/rbeezer"
}
```

**Author:** Rob Beezer



---

archive/issue_comments_140811.json:
```json
{
    "body": "<a id='comment:2'></a>\nForgot: this depends on several patches, assuming 4.6.2.alpha0 or better (for #10364).\n\n#10537, #10536 in that order, plus independently #10541",
    "created_at": "2011-01-24T22:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140811",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:2'></a>
Forgot: this depends on several patches, assuming 4.6.2.alpha0 or better (for #10364).

#10537, #10536 in that order, plus independently #10541



---

archive/attachments_014000.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10683-hermitian_inner_product-v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10683/trac_10683-hermitian_inner_product-v2.patch",
    "created_at": "2011-02-17T19:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_140812.json:
```json
{
    "body": "Apply first",
    "created_at": "2011-02-17T19:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140812",
    "user": "https://github.com/rbeezer"
}
```

Apply first



---

archive/attachments_014001.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10683-vector-products-docs-v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10683/trac_10683-vector-products-docs-v2.patch",
    "created_at": "2011-02-17T19:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_140813.json:
```json
{
    "body": "Apply second",
    "created_at": "2011-02-17T19:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140813",
    "user": "https://github.com/rbeezer"
}
```

Apply second



---

archive/issue_comments_140814.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n One patch adds the Hermitian inner product, by that name, for use with vectors over the complex numbers.\n \n Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.\n+\n+Depends #10536\n+\n+Apply trac_10683-hermitian_inner_product-v2.patch, trac_10683-vector-products-docs-v2.patch\n``````\n",
    "created_at": "2011-02-17T19:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140814",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 One patch adds the Hermitian inner product, by that name, for use with vectors over the complex numbers.
 
 Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.
+
+Depends #10536
+
+Apply trac_10683-hermitian_inner_product-v2.patch, trac_10683-vector-products-docs-v2.patch
``````




---

archive/issue_comments_140815.json:
```json
{
    "body": "<a id='comment:3'></a>\nAfter working with this for a while, I though it better to build off the dot product, rather than the inner product with its custom inner product matrices, due to the havoc that could result by specifying a matrix without the necessary properties for certain algorithms to run properly.\n\nv2 series reflects this change.  On 4.6.2.alpha4 depends only on #10536 now.",
    "created_at": "2011-02-17T19:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140815",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:3'></a>
After working with this for a while, I though it better to build off the dot product, rather than the inner product with its custom inner product matrices, due to the havoc that could result by specifying a matrix without the necessary properties for certain algorithms to run properly.

v2 series reflects this change.  On 4.6.2.alpha4 depends only on #10536 now.



---

archive/issue_comments_140816.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Depends #10536\n \n-Apply trac_10683-hermitian_inner_product-v2.patch, trac_10683-vector-products-docs-v2.patch\n+Apply attachment:trac_10683-hermitian_inner_product-v2.patch and attachment:trac_10683-vector-products-docs-v2.patch\n``````\n",
    "created_at": "2011-03-17T19:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140816",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Depends #10536
 
-Apply trac_10683-hermitian_inner_product-v2.patch, trac_10683-vector-products-docs-v2.patch
+Apply attachment:trac_10683-hermitian_inner_product-v2.patch and attachment:trac_10683-vector-products-docs-v2.patch
``````




---

archive/issue_comments_140817.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2011-03-18T01:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140817",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_comments_140818.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis is really good.  Docs are fine, excellent examples.  I could barely think of anything to test. \n\n```\nsage: k.<b> = FiniteField(9); k\nFinite Field in b of size 3^2\nsage: vector([1,1]).hermitian_inner_product(vector(k,[1,b]))\nb + 1\nsage: vector([1,i]).hermitian_inner_product(vector(k,[1,b]))\n---------------------------------------------------------------------------\nArithmeticError: \n```\nWhich is a little obscure, especially if this were buried in other code.  Of course, \n\n```\nsage: vector([1,i]).dot_product(vector(k,[1,b]))\n---------------------------------------------------------------------------\nArithmeticError: \n```\nSo I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?",
    "created_at": "2011-03-18T01:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140818",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
This is really good.  Docs are fine, excellent examples.  I could barely think of anything to test. 

```
sage: k.<b> = FiniteField(9); k
Finite Field in b of size 3^2
sage: vector([1,1]).hermitian_inner_product(vector(k,[1,b]))
b + 1
sage: vector([1,i]).hermitian_inner_product(vector(k,[1,b]))
---------------------------------------------------------------------------
ArithmeticError: 
```
Which is a little obscure, especially if this were buried in other code.  Of course, 

```
sage: vector([1,i]).dot_product(vector(k,[1,b]))
---------------------------------------------------------------------------
ArithmeticError: 
```
So I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?



---

archive/issue_comments_140819.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2011-03-18T01:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140819",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_140820.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2011-03-18T05:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140820",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_140821.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [kcrisman](#comment%3A5):\n> So I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?  \n\n\nThis routine is an extension of the idea of a dot product.  So I'd say the dot product is broken and needs to be more careful about mixing the two base rings.  Maybe it should check compatibility, and if there is no conflict, then go on its way.  If there is a conflict, the vectors should be converted to a common base ring, then do the dot product.  If that does not work, then the routine should fail gracefully.\n\nSo I'd like that to be on another ticket.  If you make the ticket and cc me, then I'll put it on my list for SD 29 next week, and coordinate with this ticket, if necessary.  But I'd like to see this go in pretty much as-is and let improvements to the \"plain\" dot product improve this routine from outside.\n\nThanks,\nRob",
    "created_at": "2011-03-18T05:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140821",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:6'></a>
Replying to [kcrisman](#comment%3A5):
> So I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?  


This routine is an extension of the idea of a dot product.  So I'd say the dot product is broken and needs to be more careful about mixing the two base rings.  Maybe it should check compatibility, and if there is no conflict, then go on its way.  If there is a conflict, the vectors should be converted to a common base ring, then do the dot product.  If that does not work, then the routine should fail gracefully.

So I'd like that to be on another ticket.  If you make the ticket and cc me, then I'll put it on my list for SD 29 next week, and coordinate with this ticket, if necessary.  But I'd like to see this go in pretty much as-is and let improvements to the "plain" dot product improve this routine from outside.

Thanks,
Rob



---

archive/issue_comments_140822.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-03-18T14:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140822",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_140823.json:
```json
{
    "body": "<a id='comment:7'></a>\nSee #10960 - it's really a problem for multiplication in general, not the dot or Hermitian product, as it turns out, so definitely a different ticket is needed.\n\nPositive review!",
    "created_at": "2011-03-18T14:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140823",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
See #10960 - it's really a problem for multiplication in general, not the dot or Hermitian product, as it turns out, so definitely a different ticket is needed.

Positive review!



---

archive/issue_comments_140824.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2011-04-04T09:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140824",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_140825.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis needs to be rebased to sage-4.7.alpha3:\n\n```\napplying /scratch/jdemeyer/merger/downloads/trac_10683-hermitian_inner_product-v2.patch\npatching file sage/modules/free_module_element.pyx\nHunk #1 FAILED at 2126\n1 out of 1 hunks FAILED -- saving rejects to file sage/modules/free_module_element.pyx.rej\nabort: patch failed to apply\n```",
    "created_at": "2011-04-04T09:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140825",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
This needs to be rebased to sage-4.7.alpha3:

```
applying /scratch/jdemeyer/merger/downloads/trac_10683-hermitian_inner_product-v2.patch
patching file sage/modules/free_module_element.pyx
Hunk #1 FAILED at 2126
1 out of 1 hunks FAILED -- saving rejects to file sage/modules/free_module_element.pyx.rej
abort: patch failed to apply
```



---

archive/issue_comments_140826.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,9 @@\n \n Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.\n \n-Depends #10536\n+**Depends on:**\n+1. #10536\n \n-Apply attachment:trac_10683-hermitian_inner_product-v2.patch and attachment:trac_10683-vector-products-docs-v2.patch\n+**Apply:**\n+1. [attachment:trac_10683-hermitian_inner_product-v3.patch]\n+2. [attachment:trac_10683-vector-products-docs-v2.patch]\n``````\n",
    "created_at": "2011-04-04T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140826",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,9 @@
 
 Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.
 
-Depends #10536
+**Depends on:**
+1. #10536
 
-Apply attachment:trac_10683-hermitian_inner_product-v2.patch and attachment:trac_10683-vector-products-docs-v2.patch
+**Apply:**
+1. [attachment:trac_10683-hermitian_inner_product-v3.patch]
+2. [attachment:trac_10683-vector-products-docs-v2.patch]
``````




---

archive/attachments_014002.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10683-hermitian_inner_product-v3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10683/trac_10683-hermitian_inner_product-v3.patch",
    "created_at": "2011-04-04T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_140827.json:
```json
{
    "body": "<a id='comment:9'></a>\nv3 patch is a trivial rebase, no changes.  Just didn't match up with surrounding routines.  So I have sent this back to positive review (and made the depends/apply block look really pretty).",
    "created_at": "2011-04-04T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140827",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:9'></a>
v3 patch is a trivial rebase, no changes.  Just didn't match up with surrounding routines.  So I have sent this back to positive review (and made the depends/apply block look really pretty).



---

archive/issue_comments_140828.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2011-04-04T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140828",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_140829.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha4",
    "created_at": "2011-04-07T19:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140829",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha4



---

archive/issue_events_032969.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T19:57:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10683#event-32969"
}
```



---

archive/issue_comments_140830.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-04-07T19:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140830",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_140831.json:
```json
{
    "body": "<a id='comment:11'></a>\nFeeding the patchbot:\n\nDepends on #10536 \n\nApply: trac_10683-hermitian_inner_product-v3.patch, trac_10683-vector-products-docs-v2.patch",
    "created_at": "2011-04-19T00:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10683#issuecomment-140831",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'></a>
Feeding the patchbot:

Depends on #10536 

Apply: trac_10683-hermitian_inner_product-v3.patch, trac_10683-vector-products-docs-v2.patch
