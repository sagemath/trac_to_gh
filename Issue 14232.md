# Issue 14232: Doctest failure in sage/rings/polynomial/polynomial_element.pyx on Solaris

archive/issues_014232.json:
```json
{
    "body": "Assignee: drkirkby\n\nCC:  @jdemeyer\n\nKeywords: solaris numerical noise\n\n\n```\nsage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx\n**********************************************************************\nFile \"devel/sage/sage/rings/polynomial/polynomial_element.pyx\", line 1054, in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod\nFailed example:\n    parent(poly)([ 0.0 if abs(c)<=1e-14 else c for c in poly.coeffs() ])\nExpected:\n    1.0\nGot:\n    1.02140518266e-14*x^2 + 1.0\n**********************************************************************\n1 item had failures:\n   1 of  16 in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod\n    [1375 tests, 1 failure, 84.4 s]\n----------------------------------------------------------------------\nsage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 88.1 seconds\n    cpu time: 75.4 seconds\n    cumulative wall time: 84.4 seconds\n```\n\nIt looks like there is more numerical noise than expected.\nChanging 1e-14 to 1e-13 might be a sensible solution.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14436\n\n",
    "created_at": "2013-04-10T11:19:40Z",
    "labels": [
        "component: porting: solaris",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Doctest failure in sage/rings/polynomial/polynomial_element.pyx on Solaris",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14232",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Assignee: drkirkby

CC:  @jdemeyer

Keywords: solaris numerical noise


```
sage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx
**********************************************************************
File "devel/sage/sage/rings/polynomial/polynomial_element.pyx", line 1054, in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod
Failed example:
    parent(poly)([ 0.0 if abs(c)<=1e-14 else c for c in poly.coeffs() ])
Expected:
    1.0
Got:
    1.02140518266e-14*x^2 + 1.0
**********************************************************************
1 item had failures:
   1 of  16 in sage.rings.polynomial.polynomial_element.Polynomial.inverse_mod
    [1375 tests, 1 failure, 84.4 s]
----------------------------------------------------------------------
sage -t devel/sage/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 88.1 seconds
    cpu time: 75.4 seconds
    cumulative wall time: 84.4 seconds
```

It looks like there is more numerical noise than expected.
Changing 1e-14 to 1e-13 might be a sensible solution.

Issue created by migration from https://trac.sagemath.org/ticket/14436





---

archive/issue_comments_178836.json:
```json
{
    "body": "I've not looked at the code, so I don't know if we really expect the coefficients rounded to zero to be less than 1e-14, or if that's just an arbitrary bound which looked close enough to zero.",
    "created_at": "2013-04-10T11:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178836",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I've not looked at the code, so I don't know if we really expect the coefficients rounded to zero to be less than 1e-14, or if that's just an arbitrary bound which looked close enough to zero.



---

archive/issue_comments_178837.json:
```json
{
    "body": "Attachment [trac_10508_doctest.rebased.patch](tarball://root/attachments/some-uuid/ticket14436/trac_10508_doctest.rebased.patch) by @jdemeyer created at 2013-04-10 11:26:31",
    "created_at": "2013-04-10T11:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178837",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [trac_10508_doctest.rebased.patch](tarball://root/attachments/some-uuid/ticket14436/trac_10508_doctest.rebased.patch) by @jdemeyer created at 2013-04-10 11:26:31



---

archive/issue_comments_178838.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-10T11:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178838",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178839.json:
```json
{
    "body": "Please note this happened with ATLAS 3.10.1.p0 from #10508 which may be used in the linear algebra step of the algorithm.\n\nAnd the bound seems quite random, at least there is no justification for this choice, nor a precise error bounding stated anywhere.",
    "created_at": "2013-04-10T11:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178839",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Please note this happened with ATLAS 3.10.1.p0 from #10508 which may be used in the linear algebra step of the algorithm.

And the bound seems quite random, at least there is no justification for this choice, nor a precise error bounding stated anywhere.



---

archive/issue_comments_178840.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2013-04-10T11:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178840",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_041029.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14232#event-41029"
}
```



---

archive/issue_comments_178841.json:
```json
{
    "body": "Replying to [comment:3 jpflori]:\n> Please note this happened with ATLAS 3.10.1.p0 from #10508\nIn that case, the problem **is already fixed by a patch on that ticket**.",
    "created_at": "2013-04-10T11:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178841",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 jpflori]:
> Please note this happened with ATLAS 3.10.1.p0 from #10508
In that case, the problem **is already fixed by a patch on that ticket**.



---

archive/issue_events_041030.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-10T11:29:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14232#event-41030"
}
```



---

archive/issue_comments_178842.json:
```json
{
    "body": "Oh yeah, really sorry about that...\nI completely forgot to install the Sage library patches on this system...",
    "created_at": "2013-04-10T11:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14232#issuecomment-178842",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Oh yeah, really sorry about that...
I completely forgot to install the Sage library patches on this system...
