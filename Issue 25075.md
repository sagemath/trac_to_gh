# Issue 25075: Remove pari stackwarn patch

Issue created by migration from Trac.

Original creator: @timokau

Original creation time: 2018-05-08 22:04:17

The patch can be replaced by a doctest warning filter. That means that sage doesn't have to maintain that patch anymore and distributions don't have to patch that package just for sage.

This patch originated at [debian](https://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/u2-pari-stackwarn.patch) and I adapted it for [the nix package](https://github.com/timokau/nixpkgs/blob/sage-on-nixos/pkgs/applications/science/math/sage/patches/pari-stackwarn.patch).


---

Comment by jdemeyer created at 2018-05-09 07:25:25

The patch has been accepted upstream. So IMHO it makes little sense to remove it. Otherwise, we would have to undo the changes here when PARI is upgraded.

PS: if you want a ticket to be reviewed, you need to set it to "needs_review". You should also add your real name in the "Author" field.


---

Comment by @timokau created at 2018-05-09 09:58:34

Ah, right. I thought it was declined upstream, must have confused it with the glpk exact_verbosity patch.

For reference, [here is the relevant pari commit](http://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commitdiff;h=def3bed8d2dcba1ea88a6e3faacd316124a63147;hp=b96fdad01b33faeb0c501d6ffc0f31388123588f).

Then you're right of course, it doesn't make sense to patch around it if it won't be necessary at all anymore next update. But a patch is still needed to set the DEBUGMEM variable to 0 (default 1), right? At least if I read [the source](http://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=blob;f=src/language/init.c;h=345519a73c876fc92e23a088d9747c2d347817ff;hb=def3bed8d2dcba1ea88a6e3faacd316124a63147#l539) correctly, that variable is hard-coded and not fetched from the environment.


Thanks for the tips, using trac is new to me.


---

Comment by @timokau created at 2018-05-09 09:59:14

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-05-09 11:48:18

Replying to [comment:2 gh-timokau]:
> But a patch is still needed to set the DEBUGMEM variable to 0 (default 1), right?

Yes, that will be fixed in #24481.


---

Comment by jdemeyer created at 2018-05-09 11:49:59

Replying to [comment:2 gh-timokau]:
> Ah, right. I thought it was declined upstream

For the record: it has been declined multiple times upstream but I eventually managed to convince one PARI developer to accept this patch. Even then, a different PARI developer reverted patch of my patch (the commit you linked to is actually that revert).


---

Comment by jdemeyer created at 2018-05-09 11:50:32

Resolution: wontfix


---

Comment by jdemeyer created at 2018-05-09 11:50:32

Replying to [comment:2 gh-timokau]:
> Then you're right of course, it doesn't make sense to patch around it if it won't be necessary at all anymore next update.

OK, so closing this as "wontfix".


---

Comment by @timokau created at 2018-05-09 12:24:08

Replying to [comment:4 jdemeyer]:
> Replying to [comment:2 gh-timokau]:
> > But a patch is still needed to set the DEBUGMEM variable to 0 (default 1), right?
> 
> Yes, that will be fixed in #24481.

Ah, so you can set it through the pari interface. Thats nice.

> OK, so closing this as "wontfix". 

Yes, thanks for the pointers and you for your effort to convince upstream.
