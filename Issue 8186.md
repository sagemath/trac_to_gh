# Issue 8186: iterated_right_palindromic_closure of a finite word should return a finite word

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2010-02-05 01:06:23

Assignee: sage-combinat

CC:  abmasse


```
Le 5 février 2010 00:33, Alexandre Blondin Massé a écrit :
> Salut, Seb !
> C'est bizarre, j'obtiens ceci dans Sage:
>
> sage: w = Word('abaabababababab')
> sage: u = w.iterated_right_palindromic_closure()
> sage: print u.length()
> None
> sage: len(u)
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
>
> /Users/alexandre/<ipython console> in <module>()
>
> TypeError: an integer is required
> sage:
>
> J'imagine que c'est dû au fait que c'est un mot implémenté par un itérateur
> avec cache, mais ce n'est pas très pratique, on devrait pouvoir savoir la
> longueur d'un tel mot. Y a-t-il moyen de le faire ? Peut-on forcer
> l'évaluation ? Merci !
> Alex
```




---

Comment by slabbe created at 2010-02-05 01:28:23

Changing status from new to needs_review.


---

Comment by slabbe created at 2010-02-05 01:28:23

I just attached a patch which fixes the problem for the mentioned function, but also for some others having the same problem.

It also adds a function that gives the longest periodic prefixes of a word which should not be harder to review.


---

Attachment

Very minor changes in the doc (typos and rephrasing)


---

Comment by abmasse created at 2010-02-05 14:01:03

Changing status from needs_review to positive_review.


---

Comment by abmasse created at 2010-02-05 14:01:03

Tested the patch on sage 4.3.1. Everything builds fine, the doc generated by Sphinx is ok too. I made very minor modifications, only typos and rephrasing. Positive review if Sébastien agrees with my changes.


---

Comment by abmasse created at 2010-02-05 14:01:47

Forgot to set the author and reviewer fields. Done.


---

Comment by abmasse created at 2010-02-05 14:08:14

I forgot to mention that it solved my initial problem as well.


---

Comment by slabbe created at 2010-02-05 16:28:38

Thanks for the doc fixes. I agree with them.


---

Comment by mpatel created at 2010-02-10 15:42:25

For the record, the "length handling" patch applies to 4.3.2 with


```
applying trac_8186_length_handling-sl.patch
patching file sage/combinat/words/word.py
Hunk #2 succeeded at 1109 with fuzz 2 (offset 0 lines).
```

in the queue


```
trac_8219.patch
trac_3683-upgrade_moinmoin.patch
trac_8183-French_pdf.patch
trac_8190-docbuild.patch
trac_8184-eclib.patch
trac_8184-indentation.patch
trac_8155.patch
trac_8124-selmer-nf.review.patch
trac_7575.patch
trac_7575-followup.patch
trac_8189-hg.patch
trac_7935.patch
trac_7935b.2.patch
trac_6296.patch
trac_6296-part2.patch
trac6942_jordan.patch
trac6942_jordan_tests.patch
trac_6942-reviewer.patch
trac_8128-latex_cell_unicode.patch
trac_7313-multiline.patch
trac_8203-doc.patch
trac_8206_developer-doc.patch
trac_7944-dev-guide.patch
trac-8211.patch
trac_8044-categories_finite_groups-nt.patch
trac_8215_empty_word-sl.patch
trac_8186_length_handling-sl.patch               # You are here!
trac_8186_minor_doc_changes-abm.patch
trac_8140-sturmian-sl.patch
trac_8140-doc_fixes-abm.patch
trac_8140_cf-arg-sl.patch
trac_8093_palindromes_prefixes-abm.patch
trac_8093_doc_fixes-sl.patch
trac_7978_crystal_cleanup-as.2.patch
trac_6775-disjoint_set-sl.patch
7580_fixes_and_extensions_total.patch
trac_8120-uniquerep_hash-fh.patch
trac_8212-minimal_weight_poly_defining_GF2n.patch
6199-fast-int-mul-all.patch
trac_8188.patch
trac_8138-one_column_index-v2.patch
trac_8209-mathtt.3.patch
trac_8199-dev-guide.patch
trac_7947.patch
trac_7793-zorder-disk.patch
trac_4838-vd.patch
trac_8082.patch
trac-8004-region_plot.patch
trac_6878_exclude.patch
8185-numerical-noise.patch
trac_8180-kpsewhich.patch
6515-solve-assume.patch
trac_6515-referee.patch
trac-7334-logcontract-5.patch
trac-7334-logcontract-5-bugfix.patch
trac_7334-logcontract-5-reviewer.patch
```



---

Comment by mpatel created at 2010-02-10 15:45:05

Never mind. I switched the order of #8186 and #8093.


---

Comment by slabbe created at 2010-02-10 17:22:24

Replying to [comment:7 mpatel]:
> Never mind. I switched the order of #8186 and #8093. 

Here is the ordering of the current positive review patches in the sage-combinat tree, if it may help your job, I just tested them and they all apply without warning fuzz message :


```
sage-4.3.3.patch
trac_8223-fix_dir-nt.patch
trac_8044-categories_finite_groups-nt.patch
trac_8093_palindromes_prefixes-abm.patch
trac_8093_doc_fixes-sl.patch
trac_8140-sturmian-sl.patch
trac_8140-doc_fixes-abm.patch
trac_8140_cf-arg-sl.patch
trac_6775-disjoint_set-sl.patch
trac_8186_length_handling-sl.patch
trac_8186_minor_doc_changes-abm.patch
trac_8120-uniquerep_hash-fh.patch
trac_7978_crystal_cleanup-as.patch
trac_8215_empty_word-sl.patch
trac_8127-word_str_features-vd.patch
trac_8127-review-sl.patch
trac_8232_word_cmp_bug-sl.patch
```



---

Comment by slabbe created at 2010-02-10 17:24:24

the patch


```
trac_8127-word_str_features-vd.patch
```


correspond to `trac_8127.patch` on the trac server.


---

Comment by mpatel created at 2010-02-11 14:48:02

Resolution: fixed
