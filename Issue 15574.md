# Issue 15574: Random doctest failure in maxima_abstract.py

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-02-11 14:43:30




---

Comment by vbraun created at 2014-02-11 14:47:09

Example of failure:

```
sage -t --long src/sage/interfaces/maxima_abstract.py
**********************************************************************
File "src/sage/interfaces/maxima_abstract.py", line 2183, in sage.interfaces.maxima_abstract.MaximaAbstractElementFunction._add_
Failed example:
    f+3
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.interfaces.maxima_abstract.MaximaAbstractElementFunction._add_[4]>", line 1, in <module>
        f+Integer(3)
      File "element.pyx", line 1539, in sage.structure.element.RingElement.__add__ (sage/structure/element.c:13873)
      File "coerce.pyx", line 782, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7311)
      File "coerce.pyx", line 900, in sage.structure.coerce.CoercionModel_cache_maps.canonical_coercion (sage/structure/coerce.c:8549)
      File "morphism.pyx", line 287, in sage.categories.morphism.CallMorphism._call_ (sage/categories/morphism.c:4698)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 201, in __call__
        return self._coerce_from_special_method(x)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 227, in _coerce_from_special_method
        return (x.__getattribute__(s))(self)
      File "sage_object.pyx", line 603, in sage.structure.sage_object.SageObject._maxima_ (sage/structure/sage_object.c:6329)
      File "sage_object.pyx", line 515, in sage.structure.sage_object.SageObject._interface_ (sage/structure/sage_object.c:4373)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 199, in __call__
        return cls(self, x, name=name)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 1127, in __init__
        ExpectElement.__init__(self, parent, value, is_name=False, name=None)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1291, in __init__
        self._name = parent._create(value, name=name)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 389, in _create
        self.set(name, value)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 972, in set
        self._eval_line(cmd)
      File "/home/buildbot/build/sage/snapperkob/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/maxima.py", line 759, in _eval_line
        assert line_echo.strip() == line.strip(), 'mismatch:\n' + line_echo + line
    AssertionError: mismatch:
    kill(sage144)$sage225 : 3$

    sage225 : 3$
**********************************************************************
```



---

Comment by vbraun created at 2014-02-11 14:47:09

Changing type from PLEASE CHANGE to defect.


---

Comment by vbraun created at 2014-02-11 14:47:09

Changing component from PLEASE CHANGE to interfaces.


---

Comment by vbraun created at 2014-02-11 15:12:34

Changing status from new to needs_review.


---

Comment by vbraun created at 2014-02-11 15:12:34

New commits:


---

Comment by jpflori created at 2014-02-14 13:15:09

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2014-02-14 13:15:09

Looks simple enough and should do the trick.


---

Comment by vbraun created at 2014-02-14 19:44:46

Resolution: fixed
