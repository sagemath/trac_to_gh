# Issue 15756: Python 3 preparation: Remove implicit tuple parameter unpacking

Issue created by migration from https://trac.sagemath.org/ticket/15993

Original creator: wluebbe

Original creation time: 2014-03-20 15:37:48

Keywords: python3

The old syntax no more supported by Python 3.

Changes according to `lib2to3/fixes/fix_tuple_params.py`:

```
Fixer for function definitions with tuple parameters:
Replace
    def func(((a, b), c), d):
        ...
with
    def func(x, d):
        ((a, b), c) = x
        ...

It will also support lambdas:
    lambda (x, y): x + y -> lambda t: t[0] + t[1]
    # The parens are a syntax error in Python 3
    lambda (x): x + y -> lambda x: x + y
```



---

Comment by wluebbe created at 2014-03-27 16:58:39

Some patches still need to be updated manually (they contain strings like `xxx_todo_changeme`).
----
New commits:


---

Comment by git created at 2014-03-28 10:25:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by wluebbe created at 2014-03-28 10:30:02


```
./sage -t -p --all --long --logfile=logs/ptestlong-15993-c.log
...
All tests passed!
```


Note: .pyx modules were not adapted since 2to3 does not support cython modules.

But cython is said to be Python 3 compatible.


---

Comment by wluebbe created at 2014-03-28 10:30:02

Changing status from new to needs_review.


---

Comment by chapoton created at 2014-04-03 07:54:27

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2014-04-03 07:54:27

needs to be rebased


---

Comment by git created at 2014-04-03 08:36:59

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by wluebbe created at 2014-04-03 08:38:44

Rebased on 6.2.beta6 and resolved merge conflicts.


---

Comment by ohanar created at 2014-04-03 16:06:13

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2014-04-03 20:11:41

I have made a few changes in a reviewer branch.
----
New commits:


---

Comment by git created at 2014-04-03 20:23:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-04-03 20:25:13

This looks good to me. I have made minor corrections ; it would be good that someone else checks again all the changes.

One should run the doctests, and then this will be good to go.


---

Comment by ohanar created at 2014-04-03 21:16:59

Looked them over, seem reasonable. I would be happy so long as the doctests pass.


---

Comment by wluebbe created at 2014-04-04 09:40:51

Looks good:

```
git fetch trac public/ticket/15993:public/ticket/15993
git co public/ticket/15993 
./sage -b
./sage -tp 4 --all --long >logs/sage-ptestlong-15993
#####
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 2392.2 seconds
    cpu time: 8143.0 seconds
```



---

Comment by chapoton created at 2014-04-04 09:47:32

ok, setting to positive


---

Comment by chapoton created at 2014-04-04 09:47:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-04 12:05:30


```
File "src/sage/combinat/designs/ext_rep.py", line 737, in sage.combinat.designs.ext_rep.XTree.__getitem__
Failed example:
    xt.__getitem__(119)
Expected:
    Traceback (most recent call last):
    ...
    IndexError: XTree<blocks> has no index 119
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.combinat.designs.ext_rep.XTree.__getitem__[4]>", line 1, in <module>
        xt.__getitem__(Integer(119))
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/combinat/designs/ext_rep.py", line 745, in __getitem__
        raise IndexError('%s no index %s' % (self.__repr__(), `i`))
    IndexError: XTree<blocks> no index 119
```

You can probably reproduce this if you merge in the latest beta...


---

Comment by vbraun created at 2014-04-04 12:09:24

Never mind, caused by #15990


---

Comment by vbraun created at 2014-04-04 15:55:39

Resolution: fixed


---

Comment by jdemeyer created at 2016-05-04 15:23:29

See #20554 for a new version of this...
