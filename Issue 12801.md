# Issue 12801: Cannot copy() instances of GurobiBackend.

archive/issues_012801.json:
```json
{
    "body": "Assignee: jason, jkantor\n\nGurobiBackend does not implement copy().\n\nIssue created by migration from https://trac.sagemath.org/ticket/12973\n\n",
    "created_at": "2012-05-18T15:26:03Z",
    "labels": [
        "component: numerical",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Cannot copy() instances of GurobiBackend.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12801",
    "user": "https://trac.sagemath.org/admin/accounts/users/e.vaughan"
}
```
Assignee: jason, jkantor

GurobiBackend does not implement copy().

Issue created by migration from https://trac.sagemath.org/ticket/12973





---

archive/issue_comments_153495.json:
```json
{
    "body": "Changing keywords from \"\" to \"Gurobi, GurobiBackend, MixedIntegerLinearProgram\".",
    "created_at": "2012-05-18T15:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153495",
    "user": "https://trac.sagemath.org/admin/accounts/users/e.vaughan"
}
```

Changing keywords from "" to "Gurobi, GurobiBackend, MixedIntegerLinearProgram".



---

archive/issue_comments_153496.json:
```json
{
    "body": "Wow !! Very good patch for a first ! `:-D`\n\nWell, it did not apply cleanly on version 5.1.beta0 but that was to be expected if you worked on 4.8 Actually, the replacement from GUROBI to Gurobi has been done since, and that was the whole reason why it did not apply. I just rebased your patch on 5.1.beta0 and updated it on the trac ticket.\n\nThere is a problem though, for your patch does not *compile*. When I apply it and type \"sage -b\" I get this :\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n            sage: p.set_objective([2, 5])                                           # optional - Gurobi\n            sage: p.write_lp(SAGE_TMP+\"/lp_problem.lp\")                             # optional - Gurobi\n        \"\"\"\n        check(self.env, GRBwrite(self.model[0], filename))\n\n    cpdef GurobiBackend copy(self):\n         ^\n------------------------------------------------------------\n\nsage/numerical/backends/gurobi_backend.pyx:1079:10: C method 'copy' not previously declared in definition part of extension type\nError running command, failed with status 256.\nError installing modified sage library code.\n```\n\nThis is because cdef methods should be added to gurobi_backend.pxd as it is added for glpk in glpk_backend.pxd. I will post another patch to do exactly that.\n\nNathann",
    "created_at": "2012-05-19T12:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153496",
    "user": "https://github.com/nathanncohen"
}
```

Wow !! Very good patch for a first ! `:-D`

Well, it did not apply cleanly on version 5.1.beta0 but that was to be expected if you worked on 4.8 Actually, the replacement from GUROBI to Gurobi has been done since, and that was the whole reason why it did not apply. I just rebased your patch on 5.1.beta0 and updated it on the trac ticket.

There is a problem though, for your patch does not *compile*. When I apply it and type "sage -b" I get this :

```
Error compiling Cython file:
------------------------------------------------------------
...
            sage: p.set_objective([2, 5])                                           # optional - Gurobi
            sage: p.write_lp(SAGE_TMP+"/lp_problem.lp")                             # optional - Gurobi
        """
        check(self.env, GRBwrite(self.model[0], filename))

    cpdef GurobiBackend copy(self):
         ^
------------------------------------------------------------

sage/numerical/backends/gurobi_backend.pyx:1079:10: C method 'copy' not previously declared in definition part of extension type
Error running command, failed with status 256.
Error installing modified sage library code.
```

This is because cdef methods should be added to gurobi_backend.pxd as it is added for glpk in glpk_backend.pxd. I will post another patch to do exactly that.

Nathann



---

archive/issue_comments_153497.json:
```json
{
    "body": "Nice !\n\nSo I agree with your changes, but as I added something myself you also need to check that everything is fine on your side, and then we will be able to set this ticket to \"positive review\", which means that the release manager can add it to the next release of Sage!\n\nThank you for your patch !!\n\nNathann",
    "created_at": "2012-05-19T12:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153497",
    "user": "https://github.com/nathanncohen"
}
```

Nice !

So I agree with your changes, but as I added something myself you also need to check that everything is fine on your side, and then we will be able to set this ticket to "positive review", which means that the release manager can add it to the next release of Sage!

Thank you for your patch !!

Nathann



---

archive/issue_comments_153498.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-19T12:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153498",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153499.json:
```json
{
    "body": "Changing component from numerical to linear programming.",
    "created_at": "2012-05-19T12:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153499",
    "user": "https://github.com/nathanncohen"
}
```

Changing component from numerical to linear programming.



---

archive/issue_comments_153500.json:
```json
{
    "body": "Thanks Nathann! I am a bit reluctant to upgrade to Sage 5.x to test the patch due to the issues with Core2 Duo Macs....\n\nAlso, in my original patch, I *did* have a\n \n   `cpdef GurobiBackend copy(self)`\n\nline.... Maybe that bit of the patch didn't apply properly in 5.1?\n\nOne question: why have you changed copy to be a cdef instead of a cpdef? (I used cpdef because that's what GLPKBackend uses (or did in 4.8).)",
    "created_at": "2012-05-19T23:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153500",
    "user": "https://trac.sagemath.org/admin/accounts/users/e.vaughan"
}
```

Thanks Nathann! I am a bit reluctant to upgrade to Sage 5.x to test the patch due to the issues with Core2 Duo Macs....

Also, in my original patch, I *did* have a
 
   `cpdef GurobiBackend copy(self)`

line.... Maybe that bit of the patch didn't apply properly in 5.1?

One question: why have you changed copy to be a cdef instead of a cpdef? (I used cpdef because that's what GLPKBackend uses (or did in 4.8).)



---

archive/issue_comments_153501.json:
```json
{
    "body": "Helloooooo !!!\n\n> Thanks Nathann! I am a bit reluctant to upgrade to Sage 5.x to test the patch due to the issues with Core2 Duo Macs....\n\n\nAhaha. That's understandable `:-D`\nSo the bug happens even when you compile from source ? Scary mac..\n\n> Also, in my original patch, I *did* have a\n>  \n>    `cpdef GurobiBackend copy(self)`\n> \n> line.... Maybe that bit of the patch didn't apply properly in 5.1?\n\n\nOOpps. Yes, probably. I looked at the list of rejected lines and saw so many GUROBI -> Gurobi, I probably missed that one.\n\n> One question: why have you changed copy to be a cdef instead of a cpdef? (I used cpdef because that's what GLPKBackend uses (or did in 4.8).)\n\n\nOops, you are right. Actually, cpef functions are functions that can be called at either C-level or Python level. Well, it more or less changes nothing in this situation, as the code onl calls the copy method from the backends at C level. It's actually totally up to you `:-)`\n\nNathann",
    "created_at": "2012-05-20T07:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153501",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooo !!!

> Thanks Nathann! I am a bit reluctant to upgrade to Sage 5.x to test the patch due to the issues with Core2 Duo Macs....


Ahaha. That's understandable `:-D`
So the bug happens even when you compile from source ? Scary mac..

> Also, in my original patch, I *did* have a
>  
>    `cpdef GurobiBackend copy(self)`
> 
> line.... Maybe that bit of the patch didn't apply properly in 5.1?


OOpps. Yes, probably. I looked at the list of rejected lines and saw so many GUROBI -> Gurobi, I probably missed that one.

> One question: why have you changed copy to be a cdef instead of a cpdef? (I used cpdef because that's what GLPKBackend uses (or did in 4.8).)


Oops, you are right. Actually, cpef functions are functions that can be called at either C-level or Python level. Well, it more or less changes nothing in this situation, as the code onl calls the copy method from the backends at C level. It's actually totally up to you `:-)`

Nathann



---

archive/issue_events_035515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-29T00:15:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12801#event-35515"
}
```



---

archive/issue_comments_153502.json:
```json
{
    "body": "Please fill in your real name as Author.",
    "created_at": "2012-07-27T20:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153502",
    "user": "https://github.com/jdemeyer"
}
```

Please fill in your real name as Author.



---

archive/issue_comments_153503.json:
```json
{
    "body": "patchbot: \napply 16400.patch, trac_12973-review.patch",
    "created_at": "2013-05-11T18:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153503",
    "user": "https://github.com/vbraun"
}
```

patchbot: 
apply 16400.patch, trac_12973-review.patch



---

archive/issue_comments_153504.json:
```json
{
    "body": "Attachment [16400.patch](tarball://root/attachments/some-uuid/ticket12973/16400.patch) by @nathanncohen created at 2013-05-11 23:29:48",
    "created_at": "2013-05-11T23:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153504",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [16400.patch](tarball://root/attachments/some-uuid/ticket12973/16400.patch) by @nathanncohen created at 2013-05-11 23:29:48



---

archive/issue_comments_153505.json:
```json
{
    "body": "Attachment [trac_12973-review.patch](tarball://root/attachments/some-uuid/ticket12973/trac_12973-review.patch) by @nathanncohen created at 2013-05-11 23:30:19",
    "created_at": "2013-05-11T23:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153505",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_12973-review.patch](tarball://root/attachments/some-uuid/ticket12973/trac_12973-review.patch) by @nathanncohen created at 2013-05-11 23:30:19



---

archive/issue_comments_153506.json:
```json
{
    "body": "Rebased !\n\nNathann",
    "created_at": "2013-05-11T23:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153506",
    "user": "https://github.com/nathanncohen"
}
```

Rebased !

Nathann



---

archive/issue_comments_153507.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-12T18:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153507",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153508.json:
```json
{
    "body": "lgtm",
    "created_at": "2013-05-12T18:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153508",
    "user": "https://github.com/vbraun"
}
```

lgtm



---

archive/issue_comments_153509.json:
```json
{
    "body": "Just learned a new acronym. Thank you very much Volker ! `:-)`\n\nNathann",
    "created_at": "2013-05-12T18:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153509",
    "user": "https://github.com/nathanncohen"
}
```

Just learned a new acronym. Thank you very much Volker ! `:-)`

Nathann



---

archive/issue_comments_153510.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-15T08:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12801#issuecomment-153510",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_035516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-15T08:24:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12801",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12801#event-35516"
}
```
