# Issue 33101: Refactor CI workflows using reusable workflows and scripts in SAGE_ROOT/.ci

Issue created by migration from https://trac.sagemath.org/ticket/33338

Original creator: mkoeppe

Original creation time: 2022-02-13 19:20:37

CC:  @tobiasdiez dimpase saraedum

The Sage portability CI workflows, both within the Sage repository and in upstream deployments, contain a lot of copy-pasting.
 - https://github.com/sagemath/sage/tree/develop/.github/workflows
 - https://github.com/pypa/setuptools/blob/main/.github/workflows/ci-sage.yml
 - https://github.com/sympy/sympy/blob/master/.github/workflows/ci-sage.yml
 - https://github.com/Singular/Singular/blob/spielwiese/.github/workflows/ci-sage.yml
 - https://github.com/sagemath/cysignals/tree/main/.github/workflows
 - https://github.com/4ti2/4ti2/blob/master/.github/workflows/ci-sage.yml
 - https://github.com/wbhart/flint2/blob/flint-2.8/.github/workflows/ci-sage.yml
 - https://github.com/fredrik-johansson/arb/blob/master/.github/workflows/ci-sage.yml
 - ...

We refactor them using a combination of 
- scripts in `SAGE_ROOT/.ci/`; 
- new top-level `SAGE_ROOT/Makefile` targets; 
- reusable workflows in the main Sage repo - https://docs.github.com/en/actions/learn-github-actions/reusing-workflows
- reusable workflows in a different repo.


---

Comment by mkoeppe created at 2022-05-03 16:47:25

#33791 does this for cygwin
