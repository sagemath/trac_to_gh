# Issue 33101: Refactor CI workflows using reusable workflows and scripts in SAGE_ROOT/.ci

archive/issues_033101.json:
```json
{
    "body": "CC:  @tobiasdiez @dimpase @saraedum\n\nThe Sage portability CI workflows, both within the Sage repository and in upstream deployments, contain a lot of copy-pasting.\n- https://github.com/sagemath/sage/tree/develop/.github/workflows\n- https://github.com/pypa/setuptools/blob/main/.github/workflows/ci-sage.yml\n- https://github.com/sympy/sympy/blob/master/.github/workflows/ci-sage.yml\n- https://github.com/Singular/Singular/blob/spielwiese/.github/workflows/ci-sage.yml\n- https://github.com/sagemath/cysignals/tree/main/.github/workflows\n- https://github.com/4ti2/4ti2/blob/master/.github/workflows/ci-sage.yml\n- https://github.com/wbhart/flint2/blob/flint-2.8/.github/workflows/ci-sage.yml\n- https://github.com/fredrik-johansson/arb/blob/master/.github/workflows/ci-sage.yml\n- ...\n\nWe refactor them using a combination of \n- scripts in `SAGE_ROOT/.ci/`; \n- new top-level `SAGE_ROOT/Makefile` targets; \n- reusable workflows in the main Sage repo - https://docs.github.com/en/actions/learn-github-actions/reusing-workflows\n- reusable workflows in a different repo.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33338\n\n",
    "created_at": "2022-02-13T19:20:37Z",
    "labels": [
        "porting",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Refactor CI workflows using reusable workflows and scripts in SAGE_ROOT/.ci",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33101",
    "user": "@mkoeppe"
}
```
CC:  @tobiasdiez @dimpase @saraedum

The Sage portability CI workflows, both within the Sage repository and in upstream deployments, contain a lot of copy-pasting.
- https://github.com/sagemath/sage/tree/develop/.github/workflows
- https://github.com/pypa/setuptools/blob/main/.github/workflows/ci-sage.yml
- https://github.com/sympy/sympy/blob/master/.github/workflows/ci-sage.yml
- https://github.com/Singular/Singular/blob/spielwiese/.github/workflows/ci-sage.yml
- https://github.com/sagemath/cysignals/tree/main/.github/workflows
- https://github.com/4ti2/4ti2/blob/master/.github/workflows/ci-sage.yml
- https://github.com/wbhart/flint2/blob/flint-2.8/.github/workflows/ci-sage.yml
- https://github.com/fredrik-johansson/arb/blob/master/.github/workflows/ci-sage.yml
- ...

We refactor them using a combination of 
- scripts in `SAGE_ROOT/.ci/`; 
- new top-level `SAGE_ROOT/Makefile` targets; 
- reusable workflows in the main Sage repo - https://docs.github.com/en/actions/learn-github-actions/reusing-workflows
- reusable workflows in a different repo.

Issue created by migration from https://trac.sagemath.org/ticket/33338





---

archive/issue_comments_471850.json:
```json
{
    "body": "#33791 does this for cygwin",
    "created_at": "2022-05-03T16:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33101#issuecomment-471850",
    "user": "@mkoeppe"
}
```

#33791 does this for cygwin
