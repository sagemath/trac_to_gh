# Issue 11175: global_minimal_model function is sometimes wrong over number fields, when input model isn't integral.

archive/issues_011175.json:
```json
{
    "body": "Assignee: @JohnCremona\n\nThe discriminant and conductor of a global minimal model must be divisible by the same primes.  However the following code (extracted from examples computed by Joanna Gaski), illustrates the Sage `global_minimal_model` function producing a model that can't possibly be a global minimal model (since the conductor and discriminant are divisible by different primes).  \n\n\n```\nsage: E = EllipticCurve(K,[0,0,0,-1/48,161/864]).global_minimal_model(); E\nElliptic Curve defined by y^2 = x^3 + (-1)*x^2 + 12 over Number Field in g with defining polynomial x^2 - x - 1\nsage: E.conductor().factor()\n(Fractional ideal (3)) * (Fractional ideal (-2*g + 1))\nsage: E.discriminant().factor()\n(-1) * 2^12 * 3 * (-2*g + 1)^2\n```\n\nAgain, the bug is that the global_minimal_model function is assuming that its input is integral, and the fix is easy, probably.\n\n\n```\nsage: E = EllipticCurve(K,[0,0,0,-1/48,161/864]).integral_model().global_minimal_model(); E\nElliptic Curve defined by y^2 + x*y + y = x^3 + x^2 over Number Field in g with defining polynomial x^2 - x - 1\nsage: E.conductor().factor()\n(Fractional ideal (3)) * (Fractional ideal (-2*g + 1))\nsage: E.discriminant().factor()\n(-1) * 3 * (-2*g + 1)^2\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11347\n\n",
    "created_at": "2011-05-17T18:58:31Z",
    "labels": [
        "elliptic curves",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.1",
    "title": "global_minimal_model function is sometimes wrong over number fields, when input model isn't integral.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11175",
    "user": "@williamstein"
}
```
Assignee: @JohnCremona

The discriminant and conductor of a global minimal model must be divisible by the same primes.  However the following code (extracted from examples computed by Joanna Gaski), illustrates the Sage `global_minimal_model` function producing a model that can't possibly be a global minimal model (since the conductor and discriminant are divisible by different primes).  


```
sage: E = EllipticCurve(K,[0,0,0,-1/48,161/864]).global_minimal_model(); E
Elliptic Curve defined by y^2 = x^3 + (-1)*x^2 + 12 over Number Field in g with defining polynomial x^2 - x - 1
sage: E.conductor().factor()
(Fractional ideal (3)) * (Fractional ideal (-2*g + 1))
sage: E.discriminant().factor()
(-1) * 2^12 * 3 * (-2*g + 1)^2
```

Again, the bug is that the global_minimal_model function is assuming that its input is integral, and the fix is easy, probably.


```
sage: E = EllipticCurve(K,[0,0,0,-1/48,161/864]).integral_model().global_minimal_model(); E
Elliptic Curve defined by y^2 + x*y + y = x^3 + x^2 over Number Field in g with defining polynomial x^2 - x - 1
sage: E.conductor().factor()
(Fractional ideal (3)) * (Fractional ideal (-2*g + 1))
sage: E.discriminant().factor()
(-1) * 3 * (-2*g + 1)^2
```


Issue created by migration from https://trac.sagemath.org/ticket/11347





---

archive/issue_comments_122787.json:
```json
{
    "body": "Attachment [trac_11347.patch](tarball://root/attachments/some-uuid/ticket11347/trac_11347.patch) by @williamstein created at 2011-05-17 19:14:13",
    "created_at": "2011-05-17T19:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122787",
    "user": "@williamstein"
}
```

Attachment [trac_11347.patch](tarball://root/attachments/some-uuid/ticket11347/trac_11347.patch) by @williamstein created at 2011-05-17 19:14:13



---

archive/issue_comments_122788.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-05-17T19:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122788",
    "user": "@williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_122789.json:
```json
{
    "body": "Patch looks good to me -- the typo could well have been mine...\n\nTesting now.",
    "created_at": "2011-05-18T11:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122789",
    "user": "@JohnCremona"
}
```

Patch looks good to me -- the typo could well have been mine...

Testing now.



---

archive/issue_comments_122790.json:
```json
{
    "body": "Applies fine to 4.7.rc1, tests pass.",
    "created_at": "2011-05-18T11:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122790",
    "user": "@JohnCremona"
}
```

Applies fine to 4.7.rc1, tests pass.



---

archive/issue_comments_122791.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-05-18T11:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122791",
    "user": "@JohnCremona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_122792.json:
```json
{
    "body": "See the comment (#4) at #11346.",
    "created_at": "2011-05-18T11:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122792",
    "user": "@JohnCremona"
}
```

See the comment (#4) at #11346.



---

archive/issue_comments_122793.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-05-31T17:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11175#issuecomment-122793",
    "user": "@jdemeyer"
}
```

Resolution: fixed
