# Issue 11971: PariError when creating a relative number field

Issue created by migration from Trac.

Original creator: culler

Original creation time: 2011-12-11 04:57:57

Assignee: davidloeffler


```
sage: t = QQ['t'].gen() 
sage: K.<a> = QQ.extension(t^6 - 1/4*t^3 - 1/64)
sage: s = K['s'].gen() 
sage: g = s^4 + 2*a^2*s^2 + a^4 + a
sage: L.<b> = K.extension(g)
```


fails with PariError: inconsistent data (12)

The failure occurs in:
rings.number_field.number_field_rel.pari_relative_polynomial().polisirreducible() 

If, instead, one tries:

```
sage: L.<b> = K.extension(g, check=False)
```

it fails with PariError: (5)

This time it fails in:
pari_absolute_base_polynomial().rnfequation(self.pari_relative_polynomial(), 1)


---

Comment by culler created at 2011-12-11 05:17:05

I see now that this is just another example of NumberField not working with polynomials that are not monic or not integral, which goes back 5 years to #252. So feel free to close the ticket.  Unfortunately I don't see any way to work around it in my project.  Too bad.


---

Comment by fwclarke created at 2011-12-12 09:54:21

Replying to [comment:1 culler]:

> Unfortunately I don't see any way to work around it in my project.

I think the following works:

```
sage: PQ.<t> = QQ[]
sage: f = t^6 - 1/4*t^3 - 1/64
sage: f = PQ(pari(f).polredabs())
sage: K.<a> = QQ.extension(f)
sage: s = K['s'].gen()
sage: g = s^4 + 2*a^2*s^2 + a^4 + a
sage: L.<b> = K.extension(g)
sage: L
Number Field in b with defining polynomial s^4 + 2*a^2*s^2 + a^4 + a over its base field
sage: K
Number Field in a with defining polynomial t^6 - 2*t^3 - 1
```


I think this technique could be used to sort out #252.  But there are many details to be got right.


---

Comment by culler created at 2011-12-12 22:32:50

Replying to [comment:2 fwclarke]:

Thanks!  That is very helpful.  It is not the whole story, I'm afraid, since I am working in a tower of extensions and the call pari(f) seems to fail if f does not have rational coefficients.  Still, it gets things off the ground and gives me a hint about where to look for the rest of the answer.


---

Comment by mstreng created at 2013-06-14 13:59:56

Changing status from new to needs_review.


---

Comment by mstreng created at 2013-06-14 14:00:16

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-06-19 12:20:33

Resolution: duplicate
