# Issue 24030: Fix newton_sqrt() method

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-11-22 14:03:46

CC:  jen robertwb kedlaya

The code does some strange things, like depending on a variable name, raising a string to a power...

It turns out that the `try:` block always raises an exception, so we can just remove it.


---

Comment by kedlaya created at 2017-11-22 14:17:08

New commits:


---

Comment by jdemeyer created at 2017-11-22 14:56:06

Changing status from new to needs_review.


---

Comment by roed created at 2017-11-30 02:41:53

Before returning `z`, you no longer adjust the precision.  Shouldn't you still add `O(x^prec)`?


---

Comment by jdemeyer created at 2017-11-30 06:48:52

Replying to [comment:7 roed]:
> Before returning `z`, you no longer adjust the precision.

The old code didn't do that either, although it gave that impression. `x` is the string(!) `"a"`, so the code tried to add `O("a" ** prec)` which obviously failed.

I am just replacing that by the `except:` branch.


---

Comment by jdemeyer created at 2017-11-30 06:49:53

That being said, if you want to improve the code in a way which doesn't involve arithmetic with strings and which still passes doctests, that is fine for me.


---

Comment by chapoton created at 2017-12-06 12:22:10

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-12-06 12:22:10

ok


---

Comment by vbraun created at 2017-12-13 17:38:10

Resolution: fixed
