# Issue 12205: Stack overflow in definite integral

Issue created by migration from https://trac.sagemath.org/ticket/12377

Original creator: mjo

Original creation time: 2012-01-28 13:23:23

Assignee: burcin

This was reported by William in #11591. It still occurs with maxima-5.24:


```
sage: y=(x^2)*exp(x)/(1+exp(x))^2
sage: integrate(y,(x,-1000,1000))
...
;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;
...
/home/mjo/src/sage-5.0.beta1/spkg/bin/sage: line 304:   863 Segmentation fault      sage-ipython "$@" -i
```



---

Comment by nbruin created at 2012-03-23 17:14:44

This bug also occurs in Maxima (on at least SBCL and ECL):

```
(%i1) y: (x^2)*exp(x)/(1+exp(x))^2$
(%i2) integrate(y,x,-1000,1000);
Maxima encountered a Lisp error:

 Control stack exhausted (no more space for function call frames).
```

so this looks like a straightforward bug in maxima.


---

Comment by nbruin created at 2012-03-23 18:10:01

More news on [Maxima bugtracker](https://sourceforge.net/tracker/?func=detail&aid=3510618&group_id=4933&atid=104933)

(I'm not setting this to "Reported Upstream - little or no feedback" because, while technically correct, I think it's offensive to the Maxima devs, who are generally very diligent and helpful. They haven't had time to give feedback yet)


---

Comment by kcrisman created at 2013-06-26 14:44:56

For some reason this works now.

```
sage: integrate(y,(x,-1000,1000))
-2*((1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 1000000)*e^1000 + 1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 500000)/(e^1000 + 1) - 2*(1000*(e^1000 + 1)*log(e^1000 + 1) + (e^1000 + 1)*polylog(2, -e^1000) - 500000*e^1000)/(e^1000 + 1)
```

The Maxima overflows also seem to work now.


---

Attachment

Doctest the upstream fix


---

Comment by mjo created at 2013-06-30 18:19:03

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-07-12 13:23:49

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-07-31 12:53:23

Resolution: fixed
