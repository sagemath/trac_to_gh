# Issue 12205: Stack overflow in definite integral

archive/issues_012205.json:
```json
{
    "body": "Assignee: @burcin\n\nThis was reported by William in #11591. It still occurs with maxima-5.24:\n\n\n```\nsage: y=(x^2)*exp(x)/(1+exp(x))^2\nsage: integrate(y,(x,-1000,1000))\n...\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n...\n/home/mjo/src/sage-5.0.beta1/spkg/bin/sage: line 304:   863 Segmentation fault      sage-ipython \"$@\" -i\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12377\n\n",
    "created_at": "2012-01-28T13:23:23Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Stack overflow in definite integral",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12205",
    "user": "https://github.com/orlitzky"
}
```
Assignee: @burcin

This was reported by William in #11591. It still occurs with maxima-5.24:


```
sage: y=(x^2)*exp(x)/(1+exp(x))^2
sage: integrate(y,(x,-1000,1000))
...
;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;
...
/home/mjo/src/sage-5.0.beta1/spkg/bin/sage: line 304:   863 Segmentation fault      sage-ipython "$@" -i
```


Issue created by migration from https://trac.sagemath.org/ticket/12377





---

archive/issue_comments_142368.json:
```json
{
    "body": "This bug also occurs in Maxima (on at least SBCL and ECL):\n\n```\n(%i1) y: (x^2)*exp(x)/(1+exp(x))^2$\n(%i2) integrate(y,x,-1000,1000);\nMaxima encountered a Lisp error:\n\n Control stack exhausted (no more space for function call frames).\n```\n\nso this looks like a straightforward bug in maxima.",
    "created_at": "2012-03-23T17:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142368",
    "user": "https://github.com/nbruin"
}
```

This bug also occurs in Maxima (on at least SBCL and ECL):

```
(%i1) y: (x^2)*exp(x)/(1+exp(x))^2$
(%i2) integrate(y,x,-1000,1000);
Maxima encountered a Lisp error:

 Control stack exhausted (no more space for function call frames).
```

so this looks like a straightforward bug in maxima.



---

archive/issue_comments_142369.json:
```json
{
    "body": "More news on [Maxima bugtracker](https://sourceforge.net/tracker/?func=detail&aid=3510618&group_id=4933&atid=104933)\n\n(I'm not setting this to \"Reported Upstream - little or no feedback\" because, while technically correct, I think it's offensive to the Maxima devs, who are generally very diligent and helpful. They haven't had time to give feedback yet)",
    "created_at": "2012-03-23T18:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142369",
    "user": "https://github.com/nbruin"
}
```

More news on [Maxima bugtracker](https://sourceforge.net/tracker/?func=detail&aid=3510618&group_id=4933&atid=104933)

(I'm not setting this to "Reported Upstream - little or no feedback" because, while technically correct, I think it's offensive to the Maxima devs, who are generally very diligent and helpful. They haven't had time to give feedback yet)



---

archive/issue_comments_142370.json:
```json
{
    "body": "For some reason this works now.\n\n```\nsage: integrate(y,(x,-1000,1000))\n-2*((1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 1000000)*e^1000 + 1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 500000)/(e^1000 + 1) - 2*(1000*(e^1000 + 1)*log(e^1000 + 1) + (e^1000 + 1)*polylog(2, -e^1000) - 500000*e^1000)/(e^1000 + 1)\n```\n\nThe Maxima overflows also seem to work now.",
    "created_at": "2013-06-26T14:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142370",
    "user": "https://github.com/kcrisman"
}
```

For some reason this works now.

```
sage: integrate(y,(x,-1000,1000))
-2*((1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 1000000)*e^1000 + 1000*log(e^1000 + 1) - polylog(2, -e^(-1000)) - 500000)/(e^1000 + 1) - 2*(1000*(e^1000 + 1)*log(e^1000 + 1) + (e^1000 + 1)*polylog(2, -e^1000) - 500000*e^1000)/(e^1000 + 1)
```

The Maxima overflows also seem to work now.



---

archive/issue_comments_142371.json:
```json
{
    "body": "Attachment [sage-trac_12377.patch](tarball://root/attachments/some-uuid/ticket12377/sage-trac_12377.patch) by @orlitzky created at 2013-06-30 18:18:36\n\nDoctest the upstream fix",
    "created_at": "2013-06-30T18:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142371",
    "user": "https://github.com/orlitzky"
}
```

Attachment [sage-trac_12377.patch](tarball://root/attachments/some-uuid/ticket12377/sage-trac_12377.patch) by @orlitzky created at 2013-06-30 18:18:36

Doctest the upstream fix



---

archive/issue_comments_142372.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-30T18:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142372",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_142373.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-12T13:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142373",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_142374.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-07-31T12:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12205#issuecomment-142374",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012217.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-31T12:53:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12205",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12205#event-12217"
}
```
