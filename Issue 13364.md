# Issue 13364: Quaternion Orders over Number Fields

archive/issues_013364.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  schisholm daniels\n\nKeywords: quaternion, order\n\nGeneralizes the code for quaternion orders of quaternion algebras over QQ to allow for quaternion orders of quaternion algebras over number fields.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13568\n\n",
    "created_at": "2012-10-04T15:30:09Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "title": "Quaternion Orders over Number Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13364",
    "user": "aly.deines"
}
```
Assignee: AlexGhitza

CC:  schisholm daniels

Keywords: quaternion, order

Generalizes the code for quaternion orders of quaternion algebras over QQ to allow for quaternion orders of quaternion algebras over number fields.

Issue created by migration from https://trac.sagemath.org/ticket/13568





---

archive/issue_comments_164257.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-10-04T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164257",
    "user": "aly.deines"
}
```

Attachment



---

archive/issue_comments_164258.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-04T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164258",
    "user": "aly.deines"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_164259.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-09T18:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164259",
    "user": "aly.deines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_164260.json:
```json
{
    "body": "Rebased the patch to sage-6.4.beta1 and moved to git",
    "created_at": "2014-08-26T11:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164260",
    "user": "tornaria"
}
```

Rebased the patch to sage-6.4.beta1 and moved to git



---

archive/issue_comments_164261.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-26T16:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164261",
    "user": "aly.deines"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_164262.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T14:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164262",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_164263.json:
```json
{
    "body": "I've pushed a bunch of reviewer commits, the log explains them (esp f824306).\n\nThere's still a bug, namely when the base field is QQ and a pseudo-basis is given, the current code will just ignore the ideals.",
    "created_at": "2014-08-27T15:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164263",
    "user": "tornaria"
}
```

I've pushed a bunch of reviewer commits, the log explains them (esp f824306).

There's still a bug, namely when the base field is QQ and a pseudo-basis is given, the current code will just ignore the ideals.



---

archive/issue_comments_164264.json:
```json
{
    "body": "Okay.  I'll get on that.",
    "created_at": "2014-08-27T15:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164264",
    "user": "aly.deines"
}
```

Okay.  I'll get on that.



---

archive/issue_comments_164265.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-27T15:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164265",
    "user": "aly.deines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_164266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T23:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164266",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_164267.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-27T23:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164267",
    "user": "tornaria"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_164268.json:
```json
{
    "body": "I'm happy with this now. Since I made a lot of changes I'm leaving it as *needs_review*.",
    "created_at": "2014-08-27T23:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164268",
    "user": "tornaria"
}
```

I'm happy with this now. Since I made a lot of changes I'm leaving it as *needs_review*.



---

archive/issue_comments_164269.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T09:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164269",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_164270.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T12:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164270",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_164271.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-06T21:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164271",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_164272.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-09-12T13:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164272",
    "user": "mmasdeu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_164273.json:
```json
{
    "body": "I started reviewing it, and made some changes. Some are to make it more pythonic, some are for clarity.\n\nI've set it to needs_work because the patch fails when using quaternion algebras not defined over number fields:\n\n```\nsage: A.<i,j,k> = QuaternionAlgebra(ZZ['x'].fraction_field(),-1,-1)\nsage: A.quaternion_order([1,i,j,k])                                \n---------------------------------------------------------------------------\nUnboundLocalError                         Traceback (most recent call last)\n...\nUnboundLocalError: local variable 'M1' referenced before assignment\n```\n",
    "created_at": "2014-09-12T13:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164273",
    "user": "mmasdeu"
}
```

I started reviewing it, and made some changes. Some are to make it more pythonic, some are for clarity.

I've set it to needs_work because the patch fails when using quaternion algebras not defined over number fields:

```
sage: A.<i,j,k> = QuaternionAlgebra(ZZ['x'].fraction_field(),-1,-1)
sage: A.quaternion_order([1,i,j,k])                                
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
...
UnboundLocalError: local variable 'M1' referenced before assignment
```




---

archive/issue_comments_164274.json:
```json
{
    "body": "Just a remark: this functionality is in PARI now, so you could just try to wrap PARI.",
    "created_at": "2015-05-30T10:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164274",
    "user": "jdemeyer"
}
```

Just a remark: this functionality is in PARI now, so you could just try to wrap PARI.



---

archive/issue_comments_164275.json:
```json
{
    "body": "With Marc Masdeu, we checked that this is still compiling after rebasing on develop. We intend to have a look at this ticket.\n----\nLast 10 new commits:",
    "created_at": "2017-03-02T23:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13364#issuecomment-164275",
    "user": "aurel"
}
```

With Marc Masdeu, we checked that this is still compiling after rebasing on develop. We intend to have a look at this ticket.
----
Last 10 new commits:
