# Issue 1314: graphs: calculate tutte polynomial

archive/issues_001314.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "Implements a `Graph.tutte_polynomial` method\n\nCC:  @sagetrac-mvngu @sagetrac-lkeough @sdenton4 @nathanncohen @sagetrac-Stefan @sagetrac-azi @simon-king-jena @nbruin\n\nKeywords: **tutte**\n\nBranch/Commit: **[u/mhansen/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/mhansen/tutte_polynomial-1314) @ [`b279c33`](https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d)**\n\nReviewer: **Jernej Azarija, Nathann Cohen**\n\nAuthor: **Mike Hansen, Fr\u00e9d\u00e9ric Chapoton, Jernej Azarija**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/1314_\n\n",
    "closed_at": "2014-01-11T14:56:12Z",
    "created_at": "2007-11-28T20:02:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "graphs: calculate tutte polynomial",
    "type": "issue",
    "updated_at": "2014-01-11T14:56:12Z",
    "url": "https://github.com/sagemath/sage/issues/1314",
    "user": "https://github.com/jasongrout"
}
```
Implements a `Graph.tutte_polynomial` method

CC:  @sagetrac-mvngu @sagetrac-lkeough @sdenton4 @nathanncohen @sagetrac-Stefan @sagetrac-azi @simon-king-jena @nbruin

Keywords: **tutte**

Branch/Commit: **[u/mhansen/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/mhansen/tutte_polynomial-1314) @ [`b279c33`](https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d)**

Reviewer: **Jernej Azarija, Nathann Cohen**

Author: **Mike Hansen, Frédéric Chapoton, Jernej Azarija**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/1314_





---

archive/issue_events_012734.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12734"
}
```



---

archive/issue_events_012735.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12735"
}
```



---

archive/issue_events_012736.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12736"
}
```



---

archive/issue_events_012737.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12737"
}
```



---

archive/issue_events_012738.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12738"
}
```



---

archive/issue_events_012739.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2007-11-28T20:02:44Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12739"
}
```



---

archive/issue_events_012740.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2007-11-29T16:24:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "title_is": "graphs: calculate tutte polynomial",
    "title_was": "[graphs] calculate tutte polynomial",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12740"
}
```



---

archive/issue_events_012741.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2007-12-17T15:15:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12741"
}
```



---

archive/issue_events_012742.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2007-12-17T15:15:27Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "subject": "https://github.com/rlmill",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12742"
}
```



---

archive/issue_events_012743.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2007-12-17T15:15:27Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "subject": "https://github.com/rlmill",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12743"
}
```



---

archive/issue_comments_005963.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nhttp://homepages.mcs.vuw.ac.nz/~djp/tutte/\n\nThis software could be pretty useful.... But I know nothing about license matters :\n\n\n---\nThe majority of files are currently under the following simple and quite\nunrestrictive license:\n\n \"(C) Copyright David James Pearce and Gary Haggard, 2007.\n  Permission to copy, use, modify, sell and distribute this software\n  is granted provided this copyright notice appears in all copies.\n  This software is provided \"as is\" without express or implied\n  warranty, and with no claim as to its suitability for any purpose.\n\n  Email: david.pearce@mcs.vuw.ac.nz\"\n\nThis license may not be removed from any of the files in question.\n\nThis software makes use of Brendan McKay's excellent \"Nauty\" program\nfor determining (amongst other things) whether two graphs are\nisomorphic or not.  You can find more information about this program\nhere: http://cs.anu.edu.au/~bdm/nauty\n\nAll files from the Nauty program are located in the nauty/\nsubdirectory.  The following license applies to all files in the\nnauty/ directory (see nauty.h for more details):\n\n  \"Copyright (1984-2004) Brendan McKay.  All rights reserved.  Permission\n   is hereby given for use and/or distribution with the exception of\n   sale for profit or application with nontrivial military significance.\n   You must not remove this copyright notice, and you must document any\n   changes that you make to this program.\n   This software is subject to this copyright only, irrespective of\n   any copyright attached to any package of which this is a part.\n\n   This program is only provided \"as is\".  No responsibility will be taken\n   by the author, his employer or his pet rabbit for any misfortune which\n   befalls you because of its use.  I don't think it will delete all your\n   files, burn down your computer room or turn your children against you,\n   but if it does: stiff cheddar.  On the other hand, I very much welcome\n   bug reports, or at least I would if there were any bugs.\n                                                        RIP, 1989\n\n---\n\nSo in the end it reads like the license is at least as GPL-uncompatible as Nauty's, and will then have to be included as an external software...",
    "created_at": "2009-05-17T16:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5963",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

http://homepages.mcs.vuw.ac.nz/~djp/tutte/

This software could be pretty useful.... But I know nothing about license matters :


---
The majority of files are currently under the following simple and quite
unrestrictive license:

 "(C) Copyright David James Pearce and Gary Haggard, 2007.
  Permission to copy, use, modify, sell and distribute this software
  is granted provided this copyright notice appears in all copies.
  This software is provided "as is" without express or implied
  warranty, and with no claim as to its suitability for any purpose.

  Email: david.pearce@mcs.vuw.ac.nz"

This license may not be removed from any of the files in question.

This software makes use of Brendan McKay's excellent "Nauty" program
for determining (amongst other things) whether two graphs are
isomorphic or not.  You can find more information about this program
here: http://cs.anu.edu.au/~bdm/nauty

All files from the Nauty program are located in the nauty/
subdirectory.  The following license applies to all files in the
nauty/ directory (see nauty.h for more details):

  "Copyright (1984-2004) Brendan McKay.  All rights reserved.  Permission
   is hereby given for use and/or distribution with the exception of
   sale for profit or application with nontrivial military significance.
   You must not remove this copyright notice, and you must document any
   changes that you make to this program.
   This software is subject to this copyright only, irrespective of
   any copyright attached to any package of which this is a part.

   This program is only provided "as is".  No responsibility will be taken
   by the author, his employer or his pet rabbit for any misfortune which
   befalls you because of its use.  I don't think it will delete all your
   files, burn down your computer room or turn your children against you,
   but if it does: stiff cheddar.  On the other hand, I very much welcome
   bug reports, or at least I would if there were any bugs.
                                                        RIP, 1989

---

So in the end it reads like the license is at least as GPL-uncompatible as Nauty's, and will then have to be included as an external software...



---

archive/issue_comments_005964.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nathanncohen](#comment:3):\n> So in the end it reads like the license is at least as GPL-uncompatible as Nauty's, and will then have to be included as an external software...\n\nNot really. Sage includes software which could be used to replace this functionality. We just need to get the *rest* of the software relicensed, if this is possible.",
    "created_at": "2009-05-17T18:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5964",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nathanncohen](#comment:3):
> So in the end it reads like the license is at least as GPL-uncompatible as Nauty's, and will then have to be included as an external software...

Not really. Sage includes software which could be used to replace this functionality. We just need to get the *rest* of the software relicensed, if this is possible.



---

archive/issue_comments_005965.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCC myself.",
    "created_at": "2009-10-01T16:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5965",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:5" align="right">comment:5</div>

CC myself.



---

archive/issue_comments_005966.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPer discussion in Ticket https://github.com/sagemath/sage/issues/7052 Pearce and Haggard's code could be included but nauty's license is incompatible. nauty could however be included as a separate optional spkg and the isomorphism function that it is used for replaced with Sage library calls. Then nauty could be used if available or called.\n\nSince Pearce and Haggard's code is extremely efficient at computing the chromatic polynomial as well (between two and three orders of magnitude faster than the current Sage function) it could offer benefit there too.",
    "created_at": "2009-11-06T12:33:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5966",
    "user": "https://github.com/sagetrac-timmcmillen"
}
```

<div id="comment:6" align="right">comment:6</div>

Per discussion in Ticket https://github.com/sagemath/sage/issues/7052 Pearce and Haggard's code could be included but nauty's license is incompatible. nauty could however be included as a separate optional spkg and the isomorphism function that it is used for replaced with Sage library calls. Then nauty could be used if available or called.

Since Pearce and Haggard's code is extremely efficient at computing the chromatic polynomial as well (between two and three orders of magnitude faster than the current Sage function) it could offer benefit there too.



---

archive/issue_comments_005967.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI have written code from scratch to compute the Tutte polynomial of a graph.  I think it is at least correct and maybe even sort of efficient.  Along the way I have written a couple of other routines for the Graph class that might be useful.  I am planning to submit a patch once I figure out how do that (I am brand new at Sage developing....)",
    "created_at": "2012-07-10T21:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5967",
    "user": "https://github.com/sagetrac-jeremy-l-martin"
}
```

<div id="comment:7" align="right">comment:7</div>

I have written code from scratch to compute the Tutte polynomial of a graph.  I think it is at least correct and maybe even sort of efficient.  Along the way I have written a couple of other routines for the Graph class that might be useful.  I am planning to submit a patch once I figure out how do that (I am brand new at Sage developing....)



---

archive/issue_comments_005968.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis ticket requires an edge contraction method; the existing `merge_vertices` method doesn't work properly for the computation of Tutte polynomials. A working method is available at ticket #13239.",
    "created_at": "2012-07-12T16:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5968",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:9" align="right">comment:9</div>

This ticket requires an edge contraction method; the existing `merge_vertices` method doesn't work properly for the computation of Tutte polynomials. A working method is available at ticket #13239.



---

archive/issue_comments_005969.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nTutte polynomial also needs code to determine whether an edge is a cut edge.  You can find this at ticket #13242.",
    "created_at": "2012-07-12T19:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5969",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:11" align="right">comment:11</div>

Tutte polynomial also needs code to determine whether an edge is a cut edge.  You can find this at ticket #13242.



---

archive/issue_comments_005970.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI had some old code from awhile back for computing this which I've attached, along with some commented out possible optimizations.  I think I remember when doing this in practice, avoiding copying the graph saved quite a bit of time (hence the unmerge function).",
    "created_at": "2012-07-13T02:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5970",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:12" align="right">comment:12</div>

I had some old code from awhile back for computing this which I've attached, along with some commented out possible optimizations.  I think I remember when doing this in practice, avoiding copying the graph saved quite a bit of time (hence the unmerge function).



---

archive/issue_comments_005971.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mwhansen](#comment:12):\n\n> I had some old code from awhile back for computing this which I've attached, along with some commented out possible optimizations.  I think I remember when doing this in practice, avoiding copying the graph saved quite a bit of time (hence the unmerge function).\n\nmhansen, thanks for sharing this code.  Unfortunately, it does not seem to give the right answer for K_4:\n\nsage: G = graphs.[This is the Trac macro *CompleteGraph* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#CompleteGraph-macro)(4); G.allow_loops(true); G.allow_multiple_edges(true); tp = tutte_polynomial(G,x,y); tp\n\nx<sup>2</sup>*y<sup>2</sup> + x*y<sup>3</sup> + x<sup>3</sup> + x<sup>2</sup>*y + x*y<sup>2</sup> + x<sup>2</sup> + x*y\n\nThe actual Tutte polynomial of K4 is x<sup>3</sup> + 3*x<sup>2</sup> + y<sup>3</sup> + 4*x*y + 3*y<sup>2</sup> + 2*x + 2*y.  \n\nI currently do not see a way to implement the Tutte polynomial without making lots of copies of graphs, but maybe someone else can.",
    "created_at": "2012-07-13T15:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5971",
    "user": "https://github.com/sagetrac-jeremy-l-martin"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mwhansen](#comment:12):

> I had some old code from awhile back for computing this which I've attached, along with some commented out possible optimizations.  I think I remember when doing this in practice, avoiding copying the graph saved quite a bit of time (hence the unmerge function).

mhansen, thanks for sharing this code.  Unfortunately, it does not seem to give the right answer for K_4:

sage: G = graphs.[This is the Trac macro *CompleteGraph* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#CompleteGraph-macro)(4); G.allow_loops(true); G.allow_multiple_edges(true); tp = tutte_polynomial(G,x,y); tp

x<sup>2</sup>*y<sup>2</sup> + x*y<sup>3</sup> + x<sup>3</sup> + x<sup>2</sup>*y + x*y<sup>2</sup> + x<sup>2</sup> + x*y

The actual Tutte polynomial of K4 is x<sup>3</sup> + 3*x<sup>2</sup> + y<sup>3</sup> + 4*x*y + 3*y<sup>2</sup> + 2*x + 2*y.  

I currently do not see a way to implement the Tutte polynomial without making lots of copies of graphs, but maybe someone else can.



---

archive/issue_comments_005972.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSorry -- there was a typo in that one.  I've uploaded a new version which works and implements caching which should save quite a bit of time.",
    "created_at": "2012-07-13T20:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5972",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:14" align="right">comment:14</div>

Sorry -- there was a typo in that one.  I've uploaded a new version which works and implements caching which should save quite a bit of time.



---

archive/issue_comments_005973.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI timed both Jeremy's code and mhansen's code and it seems that mhansen's is much faster.  \n\nThe two codes give two different looking (but potentially the same) answers on the Petersen graph.\n\nThis is about a third of the tutte.sage output\n14*x^4 + 22*(x + y)^2*x + 8*(x + y)*((x + y)*x + y^2 + x + y)*x + (x^4 +\nx^3 + (x + y)*(x^2 + x + y) + x^2 + x + y)*x^2 + ((x + y)^2*x + (x +\ny)^2 + y^3 + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + y^2 + x +\ny)*x^2 + 22*(x + y)^2 + 13*(y^2 + x + y)^2 + 14*x^3 + 22*y^3 + 14*(x +\ny)*(x^2 + x + y) + 4*(y^2 + x + y)*((x + y)^2 + y^3 + y^2 + x + y) +\n5*((x + y)*x + (x^2 + x + y)*x + y^2 + x + y)*y + 9*((x + y)*x^2 + (x +\ny)*x + y^2 + x + y)*x + 9*(x^4 + x^3 + x^2 + x + y)*x + ((x + y)^2*x +\n(x + y)^2 + y^3 + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + y^2 + x +\ny)*x + (x^4 + (x^4 + x^3 + x^2 + x + y)*x^2 + x^3 + (x + y)*(x^2 + x +\ny) + (x^4 + x^3 + x^2 + x + y)*x + x^2 + x + y)*x + 4*(x^4 + (x + y)^2*x\n+ (x + y)^2 + x^3 + y^3 + (x + y)*(x^2 + x + y) + ((x + y)*x^2 + (x +\ny)*x + y^2 + x + y)*x + (x^4 + x^3 + x^2 + x + y)*x + x^2 + y^2 + 2*x +\n2*y)*x + 2*(x^4 + (x + y)^2*x + (x + y)^2 + x^3 + y^3 + (x + y)*(x^2 + x\n+ y) + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + (x^4 + x^3 + x^2 + x\n+ y)*x + (x^4 + x^3 + (x + y)*(x^2 + x + y) + (x^4 + x^3 + x^2 + x +\ny)*x + x^2 + x + y)*x + x^2 + y^2 + 2*x + 2*y)*x + 2*(x^4 + 2*(x +....\n\nAnd this is the output of Jeremy's:\nx^9 + 6*x^8 + 21*x^7 + 56*x^6 + 12*x^5*y + 114*x^5 + y^6 + 70*x^4*y +\n30*x<sup>3*y</sup>2 + 15*x<sup>2*y</sup>3 + 10*x*y^4 + 170*x^4 + 180*x^3 + 120*x^2 + 9*y^5\n+ 170*x^3*y + 105*x<sup>2*y</sup>2 + 65*x*y^3 + 35*y^4 + 240*x^2*y + 171*x*y^2 +\n75*y^3 + 168*x*y + 84*y^2 + 36*x + 36*y\n\nAlthough they are both showing up funny looking here...\n\nIs there an easy way to multiply out and gather like terms in sage?",
    "created_at": "2012-07-15T20:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5973",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:15" align="right">comment:15</div>

I timed both Jeremy's code and mhansen's code and it seems that mhansen's is much faster.  

The two codes give two different looking (but potentially the same) answers on the Petersen graph.

This is about a third of the tutte.sage output
14*x^4 + 22*(x + y)^2*x + 8*(x + y)*((x + y)*x + y^2 + x + y)*x + (x^4 +
x^3 + (x + y)*(x^2 + x + y) + x^2 + x + y)*x^2 + ((x + y)^2*x + (x +
y)^2 + y^3 + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + y^2 + x +
y)*x^2 + 22*(x + y)^2 + 13*(y^2 + x + y)^2 + 14*x^3 + 22*y^3 + 14*(x +
y)*(x^2 + x + y) + 4*(y^2 + x + y)*((x + y)^2 + y^3 + y^2 + x + y) +
5*((x + y)*x + (x^2 + x + y)*x + y^2 + x + y)*y + 9*((x + y)*x^2 + (x +
y)*x + y^2 + x + y)*x + 9*(x^4 + x^3 + x^2 + x + y)*x + ((x + y)^2*x +
(x + y)^2 + y^3 + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + y^2 + x +
y)*x + (x^4 + (x^4 + x^3 + x^2 + x + y)*x^2 + x^3 + (x + y)*(x^2 + x +
y) + (x^4 + x^3 + x^2 + x + y)*x + x^2 + x + y)*x + 4*(x^4 + (x + y)^2*x
+ (x + y)^2 + x^3 + y^3 + (x + y)*(x^2 + x + y) + ((x + y)*x^2 + (x +
y)*x + y^2 + x + y)*x + (x^4 + x^3 + x^2 + x + y)*x + x^2 + y^2 + 2*x +
2*y)*x + 2*(x^4 + (x + y)^2*x + (x + y)^2 + x^3 + y^3 + (x + y)*(x^2 + x
+ y) + ((x + y)*x^2 + (x + y)*x + y^2 + x + y)*x + (x^4 + x^3 + x^2 + x
+ y)*x + (x^4 + x^3 + (x + y)*(x^2 + x + y) + (x^4 + x^3 + x^2 + x +
y)*x + x^2 + x + y)*x + x^2 + y^2 + 2*x + 2*y)*x + 2*(x^4 + 2*(x +....

And this is the output of Jeremy's:
x^9 + 6*x^8 + 21*x^7 + 56*x^6 + 12*x^5*y + 114*x^5 + y^6 + 70*x^4*y +
30*x<sup>3*y</sup>2 + 15*x<sup>2*y</sup>3 + 10*x*y^4 + 170*x^4 + 180*x^3 + 120*x^2 + 9*y^5
+ 170*x^3*y + 105*x<sup>2*y</sup>2 + 65*x*y^3 + 35*y^4 + 240*x^2*y + 171*x*y^2 +
75*y^3 + 168*x*y + 84*y^2 + 36*x + 36*y

Although they are both showing up funny looking here...

Is there an easy way to multiply out and gather like terms in sage?



---

archive/issue_comments_005974.json:
```json
{
    "body": "Attachment: **[Tuttepolynomial.sage.gz](https://github.com/sagemath/sage/files/ticket1314/Tuttepolynomial.sage.gz)**\n\nYou also need the patches from #13242",
    "created_at": "2012-07-15T21:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5974",
    "user": "https://github.com/sagetrac-lkeough"
}
```

Attachment: **[Tuttepolynomial.sage.gz](https://github.com/sagemath/sage/files/ticket1314/Tuttepolynomial.sage.gz)**

You also need the patches from #13242



---

archive/issue_comments_005975.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI attached Jeremy's code as Tuttepolynomial.sage in case anyone else wants to timeit.",
    "created_at": "2012-07-15T21:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5975",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:16" align="right">comment:16</div>

I attached Jeremy's code as Tuttepolynomial.sage in case anyone else wants to timeit.



---

archive/issue_comments_005976.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n`x` and `y` should ideally be integer polynomials (i.e., `R.<x,y> = ZZ[]`) -- then you don't have to deal with manually \"expanding\".\n\nAdditionally, in the `tuttepolynomial.sage` code, you should probably be caching a canonical label of the graph -- see the `cache_key` method in my patch.",
    "created_at": "2012-07-15T21:04:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5976",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:17" align="right">comment:17</div>

`x` and `y` should ideally be integer polynomials (i.e., `R.<x,y> = ZZ[]`) -- then you don't have to deal with manually "expanding".

Additionally, in the `tuttepolynomial.sage` code, you should probably be caching a canonical label of the graph -- see the `cache_key` method in my patch.



---

archive/issue_comments_005977.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mwhansen](#comment:17):\n> `x` and `y` should ideally be integer polynomials (i.e., `R.<x,y> = ZZ[]`) -- then you don't have to deal with manually \"expanding\".\n> \n\nI see now!  This makes it much better.  If we put R.<x,y> = ZZ[] as the first line in the Tutte polynomial code it does this for us.  Doing that shouldn't mess anything up, right?\n\n> Additionally, in the `tuttepolynomial.sage` code, you should probably be caching a canonical label of the graph -- see the `cache_key` method in my patch.\n\nWill do!",
    "created_at": "2012-07-15T21:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5977",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mwhansen](#comment:17):
> `x` and `y` should ideally be integer polynomials (i.e., `R.<x,y> = ZZ[]`) -- then you don't have to deal with manually "expanding".
> 

I see now!  This makes it much better.  If we put R.<x,y> = ZZ[] as the first line in the Tutte polynomial code it does this for us.  Doing that shouldn't mess anything up, right?

> Additionally, in the `tuttepolynomial.sage` code, you should probably be caching a canonical label of the graph -- see the `cache_key` method in my patch.

Will do!



---

archive/issue_comments_005978.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI was curious and went ahead an implemented the optimizations at http://homepages.ecs.vuw.ac.nz/~djp/files/TOMS10.pdf .  It seems our primary bottleneck is computing the canonical label of the graphs.",
    "created_at": "2012-07-16T23:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5978",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:19" align="right">comment:19</div>

I was curious and went ahead an implemented the optimizations at http://homepages.ecs.vuw.ac.nz/~djp/files/TOMS10.pdf .  It seems our primary bottleneck is computing the canonical label of the graphs.



---

archive/issue_comments_005979.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachment: **[tutte.sage.gz](https://github.com/sagemath/sage/files/ticket1314/tutte.sage.gz)**",
    "created_at": "2012-07-18T04:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5979",
    "user": "https://github.com/sagetrac-Stefan"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachment: **[tutte.sage.gz](https://github.com/sagemath/sage/files/ticket1314/tutte.sage.gz)**



---

archive/issue_comments_005980.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWhat is the current status of this code?",
    "created_at": "2013-05-05T14:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5980",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:21" align="right">comment:21</div>

What is the current status of this code?



---

archive/issue_comments_005981.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\ntutte.sage works -- it just needs to be added as a patch, documented, etc.  I haven't had time to do this myself.",
    "created_at": "2013-05-05T14:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5981",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:23" align="right">comment:23</div>

tutte.sage works -- it just needs to be added as a patch, documented, etc.  I haven't had time to do this myself.



---

archive/issue_comments_005982.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNice, perhaps I'll do that one time if you wish.\n\nBtw, there is a minor bug in tutte.sage. In the corner case \n\n```\n257     if G.num_edges() == 0:\n258         return 1\n```\n\nwe should actually still return a polynomial since otherwise:\n\n```\ntutte_polynomial(graphs.CompleteGraph(10).complement())(0,3)\n```\n\nwould break.",
    "created_at": "2013-05-05T14:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5982",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:24" align="right">comment:24</div>

Nice, perhaps I'll do that one time if you wish.

Btw, there is a minor bug in tutte.sage. In the corner case 

```
257     if G.num_edges() == 0:
258         return 1
```

we should actually still return a polynomial since otherwise:

```
tutte_polynomial(graphs.CompleteGraph(10).complement())(0,3)
```

would break.



---

archive/issue_comments_005983.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@sagetrac-azi](#comment:24):\n> Btw, there is a minor bug in tutte.sage. In the corner case \n> \n> ```\n> 257     if G.num_edges() == 0:\n> 258         return 1\n> ```\n\nYep.  One of the things that helps a lot is being able to avoid copying the graph.  For the Tutte polynomial code, we just make one copy of the graph on the initial call, but never copy it afterward.  I found context managers useful to manage mutating the graph and restoring it.\n\nAlso, I think the edge selection strategy has a bit of an effect on the speed of the chromatic polynomial computation as well.",
    "created_at": "2013-05-05T15:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5983",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@sagetrac-azi](#comment:24):
> Btw, there is a minor bug in tutte.sage. In the corner case 
> 
> ```
> 257     if G.num_edges() == 0:
> 258         return 1
> ```

Yep.  One of the things that helps a lot is being able to avoid copying the graph.  For the Tutte polynomial code, we just make one copy of the graph on the initial call, but never copy it afterward.  I found context managers useful to manage mutating the graph and restoring it.

Also, I think the edge selection strategy has a bit of an effect on the speed of the chromatic polynomial computation as well.



---

archive/issue_comments_005984.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI am in the process of integrating this code into Sage. There appears to be a memory issue when calculating the Tutte polynomial of a number of small graphs sequentially. Namely, Sage gets killed by the OS after exhausting all the physical memory.\n\nDo you happen to have an idea where the fault for this could be?",
    "created_at": "2013-05-11T07:24:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5984",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:26" align="right">comment:26</div>

I am in the process of integrating this code into Sage. There appears to be a memory issue when calculating the Tutte polynomial of a number of small graphs sequentially. Namely, Sage gets killed by the OS after exhausting all the physical memory.

Do you happen to have an idea where the fault for this could be?



---

archive/issue_comments_005985.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nCan you give some code to reproduce this?  I've been running code like\n\n```python\nfor g in graphs.nauty_geng(\"7\"):\n    print tutte_polynomial(g, x, y)\n```\n\nbut haven't been able to reproduce this.",
    "created_at": "2013-05-11T08:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5985",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:27" align="right">comment:27</div>

Can you give some code to reproduce this?  I've been running code like

```python
for g in graphs.nauty_geng("7"):
    print tutte_polynomial(g, x, y)
```

but haven't been able to reproduce this.



---

archive/issue_comments_005986.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSure here is an example.\n\n```\nload tutte.sage\nc = 0 \nfor G in graphs.nauty_geng(\"13 39:39\"):\n    \n    if sorted(G.degree_sequence()) != sorted(G.complement().degree_sequence()):\n        c+=1\n        if tutte_polynomial(G,x,y) == tutte_polynomial(G.complement(),x,y):\n            print G.graph6_string()\n            from time import sleep\n            sleep(24*60*60)\n        if c % 1000 == 0:\n            print c\n```\n\nThe motivation of this code stems from an open problem that I am now working on.",
    "created_at": "2013-05-11T08:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5986",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:28" align="right">comment:28</div>

Sure here is an example.

```
load tutte.sage
c = 0 
for G in graphs.nauty_geng("13 39:39"):
    
    if sorted(G.degree_sequence()) != sorted(G.complement().degree_sequence()):
        c+=1
        if tutte_polynomial(G,x,y) == tutte_polynomial(G.complement(),x,y):
            print G.graph6_string()
            from time import sleep
            sleep(24*60*60)
        if c % 1000 == 0:
            print c
```

The motivation of this code stems from an open problem that I am now working on.



---

archive/issue_comments_005987.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMy guess is just that the cache in that version isn't reset after each run.  If you add `tutte_polynomial.cache.clear()` before the `if tutte_polynomial(G,x,y) == tutte_polynomial(G.complement(),x,y):` line, you won't have that problem.",
    "created_at": "2013-05-11T18:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5987",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:29" align="right">comment:29</div>

My guess is just that the cache in that version isn't reset after each run.  If you add `tutte_polynomial.cache.clear()` before the `if tutte_polynomial(G,x,y) == tutte_polynomial(G.complement(),x,y):` line, you won't have that problem.



---

archive/issue_comments_005988.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nGood! I'll play with that and see what happens.\n\nBTW, could you add yourself to the main TRAC page at the bottom so that I know what to write in the code under as the author ?",
    "created_at": "2013-05-11T18:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5988",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:30" align="right">comment:30</div>

Good! I'll play with that and see what happens.

BTW, could you add yourself to the main TRAC page at the bottom so that I know what to write in the code under as the author ?



---

archive/issue_comments_005989.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAttachment: **[trac_1314_tuttePoly.patch.gz](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)**\n\nOkay !\n\nAttached is the nhansen's code factored into Sage. Before having any changes of being positively reviewed I we need to figure out how can we allow the users to use the edge selectors in the code and document that.\n\nLet me know if you have any other comments and of course don't be shy to modify this yourself as well.",
    "created_at": "2013-06-22T10:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5989",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:31" align="right">comment:31</div>

Attachment: **[trac_1314_tuttePoly.patch.gz](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)**

Okay !

Attached is the nhansen's code factored into Sage. Before having any changes of being positively reviewed I we need to figure out how can we allow the users to use the edge selectors in the code and document that.

Let me know if you have any other comments and of course don't be shy to modify this yourself as well.



---

archive/issue_events_012744.json:
```json
{
    "actor": "https://github.com/sagetrac-azi",
    "created_at": "2013-06-22T10:16:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12744"
}
```



---

archive/issue_comments_005990.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nJust a quick remark! The code computing the Tutte polynomial is correct (I reviewed that) so I only need someone to check if this patch is integrated correctly into Sage.",
    "created_at": "2013-06-27T20:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5990",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:33" align="right">comment:33</div>

Just a quick remark! The code computing the Tutte polynomial is correct (I reviewed that) so I only need someone to check if this patch is integrated correctly into Sage.



---

archive/issue_comments_005991.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHellooooooooo !!\n\nIf you just want comments on the integration into Sage, it would be nice if you could add it to the reference manual, perhaps rename the file to `tutte_polynomial.py`, and add documentation to the new functions until `sage -coverage yourfile.py` says that everything is filled. In particular it would be nice if you could be more verbose about what `VertexOrder` and `MinimizeDegree` actually do `:-)`\n\nOh, and people around do not like the `raise ValueError, \"something\"`. They say it's not pep8 or not Python3-ready, and prefer `ValueError(\"something\")`.\n\nThis contextmanager decorator really is a funny thing `:-)`\n\nNathann",
    "created_at": "2013-06-28T22:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5991",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

Hellooooooooo !!

If you just want comments on the integration into Sage, it would be nice if you could add it to the reference manual, perhaps rename the file to `tutte_polynomial.py`, and add documentation to the new functions until `sage -coverage yourfile.py` says that everything is filled. In particular it would be nice if you could be more verbose about what `VertexOrder` and `MinimizeDegree` actually do `:-)`

Oh, and people around do not like the `raise ValueError, "something"`. They say it's not pep8 or not Python3-ready, and prefer `ValueError("something")`.

This contextmanager decorator really is a funny thing `:-)`

Nathann



---

archive/issue_comments_005992.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nBy the way, could you define what an \"ear\" is somewhere ? You say that it is a \"sequence of vertices\" which is a tad vague, and your code seems to imply somewhere that a vertex of degree 2 adjacent to two vertices of degree 3 is not an ear, while I thought that it was.\n\nWell, .. `:-)`\n\nNathann",
    "created_at": "2013-06-28T22:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5992",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>

By the way, could you define what an "ear" is somewhere ? You say that it is a "sequence of vertices" which is a tad vague, and your code seems to imply somewhere that a vertex of degree 2 adjacent to two vertices of degree 3 is not an ear, while I thought that it was.

Well, .. `:-)`

Nathann



---

archive/issue_events_012745.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-06-29T08:48:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12745"
}
```



---

archive/issue_events_012746.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-06-29T08:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12746"
}
```



---

archive/issue_comments_005993.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-\n+Apply:\n+[attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)\n``````\n",
    "created_at": "2013-06-29T08:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5993",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-
+Apply:
+[attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)
``````




---

archive/issue_comments_005994.json:
```json
{
    "body": "Work Issues: **documentation**",
    "created_at": "2013-07-17T12:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5994",
    "user": "https://github.com/fchapoton"
}
```

Work Issues: **documentation**



---

archive/issue_comments_005995.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n Apply:\n-[attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)\n+* [attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)\n+* [attachment: trac_1314_addon_fc.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)\n``````\n",
    "created_at": "2013-07-17T12:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5995",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 Apply:
-[attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)
+* [attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)
+* [attachment: trac_1314_addon_fc.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)
``````




---

archive/issue_comments_005996.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nhere is small clean-up patch. There remains to write doc for all functions.\n\nfor the bot:\n\napply trac_1314_tuttePoly.patch trac_1314_addon_fc.patch",
    "created_at": "2013-07-17T12:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5996",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

here is small clean-up patch. There remains to write doc for all functions.

for the bot:

apply trac_1314_tuttePoly.patch trac_1314_addon_fc.patch



---

archive/issue_comments_005997.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nHere is a new patch, that includes\n\n* renaming of the file tutte_poly.py into tutte_polynomial.py\n\n* inclusion into the reference manual\n\nThere still remains work to be done to have 100% doctesting and clean documentation",
    "created_at": "2013-07-22T09:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5997",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">comment:39</div>

Here is a new patch, that includes

* renaming of the file tutte_poly.py into tutte_polynomial.py

* inclusion into the reference manual

There still remains work to be done to have 100% doctesting and clean documentation



---

archive/issue_comments_005998.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHello!\n\nWhat exactly is still required to be done? Also, is there a reason for renaming it to tutte_polynomial? I am wondering whether we should name it tuttepoly to be consistent with chrompoly?",
    "created_at": "2013-07-29T12:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5998",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:40" align="right">comment:40</div>

Hello!

What exactly is still required to be done? Also, is there a reason for renaming it to tutte_polynomial? I am wondering whether we should name it tuttepoly to be consistent with chrompoly?



---

archive/issue_comments_005999.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThere is nothing like chrompoly, the function is called \n\n```\nG.chromatic_polynomial\n```\n\nWhat remains to be done: add explanations, and document every function. See the previous comments (see comments 34 and 35 in particular)",
    "created_at": "2013-07-29T12:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-5999",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:41" align="right">comment:41</div>

There is nothing like chrompoly, the function is called 

```
G.chromatic_polynomial
```

What remains to be done: add explanations, and document every function. See the previous comments (see comments 34 and 35 in particular)



---

archive/issue_comments_006000.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nYes! But the file is called chrompoly.py. And so is the file for the matching polynomial called matchpoly.\n\nOK I'll  look into Nathann's comments!",
    "created_at": "2013-07-29T12:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6000",
    "user": "https://github.com/sagetrac-azi"
}
```

<div id="comment:42" align="right">comment:42</div>

Yes! But the file is called chrompoly.py. And so is the file for the matching polynomial called matchpoly.

OK I'll  look into Nathann's comments!



---

archive/issue_comments_006001.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI have started adding the doc, but there remains several functions with no doc.\n\nIn particular, it is necessary to explain more precisely **what is an ear**.",
    "created_at": "2013-08-31T19:09:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6001",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">comment:43</div>

I have started adding the doc, but there remains several functions with no doc.

In particular, it is necessary to explain more precisely **what is an ear**.



---

archive/issue_comments_006002.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nmore doc, doctest coverage is now 65%",
    "created_at": "2013-09-01T08:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6002",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">comment:44</div>

more doc, doctest coverage is now 65%



---

archive/issue_comments_006003.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nmore doc, doctest coverage is now **95%**\n\nThere remains only one function to doctest, but this is a decorator and I do not know what to do ! Could anybody please help ?",
    "created_at": "2013-10-01T20:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6003",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:45" align="right">comment:45</div>

more doc, doctest coverage is now **95%**

There remains only one function to doctest, but this is a decorator and I do not know what to do ! Could anybody please help ?



---

archive/issue_comments_006004.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nYou could just call a function which is decorated with it, and add a `#indirect doctest` flag to the corresponding doctest line.\n\nNathann",
    "created_at": "2013-10-02T08:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6004",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:46" align="right">comment:46</div>

You could just call a function which is decorated with it, and add a `#indirect doctest` flag to the corresponding doctest line.

Nathann



---

archive/issue_comments_006005.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\n**100 %** doctested and almost ready for review !\n\n*But* the doc of `tutte_polynomial` does not appear, because it is cached (in a custom way, not by the usual `cached_function`) !",
    "created_at": "2013-10-02T18:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6005",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">comment:47</div>

**100 %** doctested and almost ready for review !

*But* the doc of `tutte_polynomial` does not appear, because it is cached (in a custom way, not by the usual `cached_function`) !



---

archive/issue_comments_006006.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nYep, I think this was before cached_function existed.  Anyway, you can add \"@sage_wraps(func)\" before \"def wrapper\" to make things nicer on that front.  I also feel that at the end of the tutte_polynomial function, we should add something like \n\n```\nif initial_call is True:\n    tutte_polynomial.cache.clear()\n```\n\nso that the cache is valid for only the computation of one \"tree\".  This does play bad with threads (which aren't used much).  It might be better to just manually pass the cache along as a default argument throughout the call tree.  I think that's probably best.",
    "created_at": "2013-10-03T08:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6006",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:48" align="right">comment:48</div>

Yep, I think this was before cached_function existed.  Anyway, you can add "@sage_wraps(func)" before "def wrapper" to make things nicer on that front.  I also feel that at the end of the tutte_polynomial function, we should add something like 

```
if initial_call is True:
    tutte_polynomial.cache.clear()
```

so that the cache is valid for only the computation of one "tree".  This does play bad with threads (which aren't used much).  It might be better to just manually pass the cache along as a default argument throughout the call tree.  I think that's probably best.



---

archive/issue_comments_006007.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nAttachment: **[trac_1314_addon_fc.patch.gz](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)**\n\nThe docs seems to be ok now, thanks Mike !\n\nI have not taken care of the cache cleaning, as I do not know where to put the lines you suggested.\n\nStill I think it deserves to be \"need review\"",
    "created_at": "2013-10-03T17:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6007",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

Attachment: **[trac_1314_addon_fc.patch.gz](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)**

The docs seems to be ok now, thanks Mike !

I have not taken care of the cache cleaning, as I do not know where to put the lines you suggested.

Still I think it deserves to be "need review"



---

archive/issue_events_012747.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-03T17:02:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12747"
}
```



---

archive/issue_events_012748.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-03T17:02:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12748"
}
```



---

archive/issue_comments_006008.json:
```json
{
    "body": "Changed work issues from **documentation** to **memory cleanup ?**",
    "created_at": "2013-10-15T19:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6008",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **documentation** to **memory cleanup ?**



---

archive/issue_comments_006009.json:
```json
{
    "body": "Changed keywords from none to **tutte**",
    "created_at": "2013-10-15T19:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6009",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **tutte**



---

archive/issue_events_012749.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-15T19:05:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12749"
}
```



---

archive/issue_events_012750.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-15T19:05:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12750"
}
```



---

archive/issue_comments_006010.json:
```json
{
    "body": "Author: **Mike Hansen**",
    "created_at": "2013-10-16T15:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6010",
    "user": "https://github.com/fchapoton"
}
```

Author: **Mike Hansen**



---

archive/issue_comments_006011.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n> I have not taken care of the cache cleaning, as I do not know where to put the lines you suggested.\n\nAt the end of the block `if initial_call is True`, you can add the following :\n\n```\nans = tutte_polynomial(G, initial_call=False, edge_selector=edge_selector)\ntutte_polynomial.cache.clear()\nreturn ans\n```\n\nNathann",
    "created_at": "2013-10-16T15:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6011",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:52" align="right">comment:52</div>

> I have not taken care of the cache cleaning, as I do not know where to put the lines you suggested.

At the end of the block `if initial_call is True`, you can add the following :

```
ans = tutte_polynomial(G, initial_call=False, edge_selector=edge_selector)
tutte_polynomial.cache.clear()
return ans
```

Nathann



---

archive/issue_comments_006012.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI think it's better to just have a cache=None default keyword.  On the initial call, this can be detected and a new cache can be created or the user could pass in their own to use across multiple runs.",
    "created_at": "2013-10-16T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6012",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:53" align="right">comment:53</div>

I think it's better to just have a cache=None default keyword.  On the initial call, this can be detected and a new cache can be created or the user could pass in their own to use across multiple runs.



---

archive/issue_comments_006013.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nMike, could you please add a review patch implementing what you suggest ? I do not feel able to guess and try to do it myself.",
    "created_at": "2013-10-18T19:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6013",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:54" align="right">comment:54</div>

Mike, could you please add a review patch implementing what you suggest ? I do not feel able to guess and try to do it myself.



---

archive/issue_comments_006014.json:
```json
{
    "body": "Commit: **[`34735d6`](https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea)**",
    "created_at": "2014-01-04T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6014",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`34735d6`](https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea)**



---

archive/issue_comments_006015.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34735d6\"><code>34735d6</code></a></td><td><code>trac #1314 cleanup of tutte patch + 100 % doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e411f6b\"><code>e411f6b</code></a></td><td><code># Sat Jun 22 12:10:02 2013 +0200</code></td></tr></table>\n",
    "created_at": "2014-01-04T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6015",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:55"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34735d6"><code>34735d6</code></a></td><td><code>trac #1314 cleanup of tutte patch + 100 % doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e411f6b"><code>e411f6b</code></a></td><td><code># Sat Jun 22 12:10:02 2013 +0200</code></td></tr></table>




---

archive/issue_comments_006016.json:
```json
{
    "body": "Branch: **[u/chapoton/1314](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/1314)**",
    "created_at": "2014-01-04T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6016",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/1314](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/1314)**



---

archive/issue_comments_006017.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nPing ?",
    "created_at": "2014-01-07T09:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6017",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:56" align="right">comment:56</div>

Ping ?



---

archive/issue_comments_006018.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThis is now available via matroids.",
    "created_at": "2014-01-07T11:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6018",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:57" align="right">comment:57</div>

This is now available via matroids.



---

archive/issue_comments_006019.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nWhat does that mean ? `O_o`",
    "created_at": "2014-01-07T11:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6019",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:58" align="right">comment:58</div>

What does that mean ? `O_o`



---

archive/issue_comments_006020.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThis mean that somebody else has done the job for matroids.\n\n```\nsage: Matroid(graphs.PetersenGraph()).tutte_polynomial()\nx^9 + 6*x^8 + 21*x^7 + 56*x^6 + 12*x^5*y + y^6 + 114*x^5 + 70*x^4*y + 30*x^3*y^2 + 15*x^2*y^3 + 10*x*y^4 + 9*y^5 + 170*x^4 + 170*x^3*y + 105*x^2*y^2 + 65*x*y^3 + 35*y^4 + 180*x^3 + 240*x^2*y + 171*x*y^2 + 75*y^3 + 120*x^2 + 168*x*y + 84*y^2 + 36*x + 36*y\n```",
    "created_at": "2014-01-07T11:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6020",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:59" align="right">comment:59</div>

This mean that somebody else has done the job for matroids.

```
sage: Matroid(graphs.PetersenGraph()).tutte_polynomial()
x^9 + 6*x^8 + 21*x^7 + 56*x^6 + 12*x^5*y + y^6 + 114*x^5 + 70*x^4*y + 30*x^3*y^2 + 15*x^2*y^3 + 10*x*y^4 + 9*y^5 + 170*x^4 + 170*x^3*y + 105*x^2*y^2 + 65*x*y^3 + 35*y^4 + 180*x^3 + 240*x^2*y + 171*x*y^2 + 75*y^3 + 120*x^2 + 168*x*y + 84*y^2 + 36*x + 36*y
```



---

archive/issue_comments_006021.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nOh. Right. They enumerate all spanning trees, though. They would probably be glad to have another implementation `:-P``\n\nNathann",
    "created_at": "2014-01-07T11:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6021",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:60" align="right">comment:60</div>

Oh. Right. They enumerate all spanning trees, though. They would probably be glad to have another implementation `:-P``

Nathann



---

archive/issue_comments_006022.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nAnyway Frederic, is this patch in `needs_review` or in `needs_work` (cf the caching thing above), and what is left to be reviewed ? Jernej said some time ago that the mathematical part of the algorithm was correct, but as it seems he wrote the code himself that does not count `:-P`\n\nNathann",
    "created_at": "2014-01-07T12:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6022",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:61" align="right">comment:61</div>

Anyway Frederic, is this patch in `needs_review` or in `needs_work` (cf the caching thing above), and what is left to be reviewed ? Jernej said some time ago that the mathematical part of the algorithm was correct, but as it seems he wrote the code himself that does not count `:-P`

Nathann



---

archive/issue_comments_006023.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThe  Matroid implementation is hopelessly slow, and an optimized implementation as in this ticket would be most welcome for matroids too. Until that day, there is definitely a use for the implementation on this ticket!",
    "created_at": "2014-01-07T12:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6023",
    "user": "https://github.com/sagetrac-Stefan"
}
```

<div id="comment:62" align="right">comment:62</div>

The  Matroid implementation is hopelessly slow, and an optimized implementation as in this ticket would be most welcome for matroids too. Until that day, there is definitely a use for the implementation on this ticket!



---

archive/issue_comments_006024.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nStefan : how should this method be exposed in the matroid code ? It only works for graph, and I guess matroids need something more general ?\n\nNathann",
    "created_at": "2014-01-07T13:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6024",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:63" align="right">comment:63</div>

Stefan : how should this method be exposed in the matroid code ? It only works for graph, and I guess matroids need something more general ?

Nathann



---

archive/issue_comments_006025.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nYeah. The main idea (caching small graphs) generalizes to matroids, but the code needs to be changed properly, and probably tweaked a lot to get good speeds.",
    "created_at": "2014-01-07T13:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6025",
    "user": "https://github.com/sagetrac-Stefan"
}
```

<div id="comment:64" align="right">comment:64</div>

Yeah. The main idea (caching small graphs) generalizes to matroids, but the code needs to be changed properly, and probably tweaked a lot to get good speeds.



---

archive/issue_comments_006026.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nOkay. Does it mean that the function that this patch implements is of no direct use for Matroids, and that there is no need to expose it anywhere right now ?\n\nNathann",
    "created_at": "2014-01-07T13:21:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6026",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:65" align="right">comment:65</div>

Okay. Does it mean that the function that this patch implements is of no direct use for Matroids, and that there is no need to expose it anywhere right now ?

Nathann



---

archive/issue_comments_006027.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-Apply:\n-* [attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)\n-* [attachment: trac_1314_addon_fc.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)\n+Implements a `Graph.tutte_polynomial` method\n``````\n",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6027",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-Apply:
-* [attachment: trac_1314_tuttePoly.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_tuttePoly.patch.gz)
-* [attachment: trac_1314_addon_fc.patch](https://github.com/sagemath/sage/files/ticket1314/trac_1314_addon_fc.patch.gz)
+Implements a `Graph.tutte_polynomial` method
``````




---

archive/issue_comments_006028.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nOkayyyyyyy... Let's sum it up : Mike Hansen wrote the initial code, Jernej checked the math and cleaned bits of it, and Fr\u00e9d\u00e9ric cleaned it again and add some documentation.\n\nCool. I just changed the branch as I have a couple of commits to add \n\n* Rebase on 6.1.beta4\n* An option to clean the cache, as mentionned earlier\n\nI agree with the non-mathematical part of what was above. Soooooo we just need somebody to review my two commits and we are done.\n\nHave fuuuuuuuuun !\n\nNathann",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6028",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:66" align="right">comment:66</div>

Okayyyyyyy... Let's sum it up : Mike Hansen wrote the initial code, Jernej checked the math and cleaned bits of it, and Frédéric cleaned it again and add some documentation.

Cool. I just changed the branch as I have a couple of commits to add 

* Rebase on 6.1.beta4
* An option to clean the cache, as mentionned earlier

I agree with the non-mathematical part of what was above. Soooooo we just need somebody to review my two commits and we are done.

Have fuuuuuuuuun !

Nathann



---

archive/issue_comments_006029.json:
```json
{
    "body": "Changed author from **Mike Hansen** to **Mike Hansen, Fr\u00e9d\u00e9ric Chapoton, Jernej Azarija**",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6029",
    "user": "https://github.com/nathanncohen"
}
```

Changed author from **Mike Hansen** to **Mike Hansen, Frédéric Chapoton, Jernej Azarija**



---

archive/issue_comments_006030.json:
```json
{
    "body": "Changed commit from **[`34735d6`](https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea)** to none",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6030",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`34735d6`](https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea)** to none



---

archive/issue_comments_006031.json:
```json
{
    "body": "Reviewer: **Jernej Azarija, Nathann Cohen**",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6031",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Jernej Azarija, Nathann Cohen**



---

archive/issue_comments_006032.json:
```json
{
    "body": "Changed branch from **[u/chapoton/1314](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/1314)** to **[public/1314](https://github.com/sagemath/sagetrac-mirror/tree/public/1314)**",
    "created_at": "2014-01-07T16:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6032",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/chapoton/1314](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/1314)** to **[public/1314](https://github.com/sagemath/sagetrac-mirror/tree/public/1314)**



---

archive/issue_comments_006033.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e411f6bc6d129f8934d6790a58784b87bc4939cc\"><code>e411f6b</code></a></td><td><code># Sat Jun 22 12:10:02 2013 +0200</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea\"><code>34735d6</code></a></td><td><code>trac #1314 cleanup of tutte patch + 100 % doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f515a6eb54d40c934337a1582244f8ed37c528cd\"><code>f515a6e</code></a></td><td><code>trac #1314: Rebase ono 6.1.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d\"><code>6ef434e</code></a></td><td><code>trac #1314: cleaning the cache before leaving</code></td></tr></table>\n",
    "created_at": "2014-01-07T16:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6033",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e411f6bc6d129f8934d6790a58784b87bc4939cc"><code>e411f6b</code></a></td><td><code># Sat Jun 22 12:10:02 2013 +0200</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34735d6ff56394bbbaedd3a778e1d2fc1bae14ea"><code>34735d6</code></a></td><td><code>trac #1314 cleanup of tutte patch + 100 % doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f515a6eb54d40c934337a1582244f8ed37c528cd"><code>f515a6e</code></a></td><td><code>trac #1314: Rebase ono 6.1.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d"><code>6ef434e</code></a></td><td><code>trac #1314: cleaning the cache before leaving</code></td></tr></table>




---

archive/issue_comments_006034.json:
```json
{
    "body": "Commit: **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)**",
    "created_at": "2014-01-07T16:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6034",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)**



---

archive/issue_comments_006035.json:
```json
{
    "body": "Changed work issues from **memory cleanup ?** to none",
    "created_at": "2014-01-07T16:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6035",
    "user": "https://github.com/nathanncohen"
}
```

Changed work issues from **memory cleanup ?** to none



---

archive/issue_comments_006036.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e896d884fecc58ab18e75c546bd3c79b046cbd41\"><code>e896d88</code></a></td><td><code>Reworked the internal structure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839\"><code>63b0487</code></a></td><td><code>Added doctest to the internal function.</code></td></tr></table>\n",
    "created_at": "2014-01-07T17:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e896d884fecc58ab18e75c546bd3c79b046cbd41"><code>e896d88</code></a></td><td><code>Reworked the internal structure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839"><code>63b0487</code></a></td><td><code>Added doctest to the internal function.</code></td></tr></table>




---

archive/issue_comments_006037.json:
```json
{
    "body": "Changed commit from **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)** to **[`63b0487`](https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839)**",
    "created_at": "2014-01-07T17:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6037",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)** to **[`63b0487`](https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839)**



---

archive/issue_comments_006038.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nI've removed the `initial_call` argument since it was prone to be abused (especially since it was the first one), and doing it this way should give some (marginal) speedup. I'm going to run some timings now. I'm also going to now try it by converting to use `cached_function`.\n\nEdit - I just realized I forgot to move the `@_cache` to the internal function...",
    "created_at": "2014-01-07T17:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6038",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:70" align="right">comment:70</div>

I've removed the `initial_call` argument since it was prone to be abused (especially since it was the first one), and doing it this way should give some (marginal) speedup. I'm going to run some timings now. I'm also going to now try it by converting to use `cached_function`.

Edit - I just realized I forgot to move the `@_cache` to the internal function...



---

archive/issue_comments_006039.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nOkay, `@cached_function` doesn't work because we can't pass a key function to it... (aside: I think such a feature would be quite useful) Back to the custom `@_cache`.\n\nWith my changes (including some other optimizations):\n\n```\nsage: P = graphs.PetersenGraph()\nsage: %timeit P.tutte_polynomial()\n1 loops, best of 3: 256 ms per loop\n```\nBefore:\n\n```\nsage: P = graphs.PetersenGraph()\nsage: %timeit P.tutte_polynomial()\n1000 loops, best of 3: 1.08 ms per loop\n```\n\nNow I'm currently perplexed...currently the best involves extra if statements, creation of parents, and unused arguments being passed. So we might just want to merge `6ef434e` instead. Still testing stuff...",
    "created_at": "2014-01-07T17:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6039",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:71" align="right">comment:71</div>

Okay, `@cached_function` doesn't work because we can't pass a key function to it... (aside: I think such a feature would be quite useful) Back to the custom `@_cache`.

With my changes (including some other optimizations):

```
sage: P = graphs.PetersenGraph()
sage: %timeit P.tutte_polynomial()
1 loops, best of 3: 256 ms per loop
```
Before:

```
sage: P = graphs.PetersenGraph()
sage: %timeit P.tutte_polynomial()
1000 loops, best of 3: 1.08 ms per loop
```

Now I'm currently perplexed...currently the best involves extra if statements, creation of parents, and unused arguments being passed. So we might just want to merge `6ef434e` instead. Still testing stuff...



---

archive/issue_comments_006040.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-01-07T18:09:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6040",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_006041.json:
```json
{
    "body": "Changed commit from **[`63b0487`](https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839)** to **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)**",
    "created_at": "2014-01-07T18:09:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6041",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`63b0487`](https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839)** to **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)**



---

archive/issue_comments_006042.json:
```json
{
    "body": "Changed commit from **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)** to **[`7a55cf6`](https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98)**",
    "created_at": "2014-01-07T18:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6042",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ef434e`](https://github.com/sagemath/sagetrac-mirror/commit/6ef434eb8b91c3c1e3587ee3acbd08f7c0158e3d)** to **[`7a55cf6`](https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98)**



---

archive/issue_comments_006043.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98\"><code>7a55cf6</code></a></td><td><code>Tweaked the cache and set initial_call to last argument.</code></td></tr></table>\n",
    "created_at": "2014-01-07T18:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6043",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98"><code>7a55cf6</code></a></td><td><code>Tweaked the cache and set initial_call to last argument.</code></td></tr></table>




---

archive/issue_comments_006044.json:
```json
{
    "body": "Changed commit from **[`7a55cf6`](https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98)** to **[`5450ef2`](https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8)**",
    "created_at": "2014-01-07T18:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7a55cf6`](https://github.com/sagemath/sagetrac-mirror/commit/7a55cf6c7f53c6d32a33907641b1a0db9bd4cb98)** to **[`5450ef2`](https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8)**



---

archive/issue_comments_006045.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8\"><code>5450ef2</code></a></td><td><code>Some other micro optimizations.</code></td></tr></table>\n",
    "created_at": "2014-01-07T18:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6045",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8"><code>5450ef2</code></a></td><td><code>Some other micro optimizations.</code></td></tr></table>




---

archive/issue_comments_006046.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nI put my changes in the branch `u/tscrim/tutte_polynomial-1314` and reverted back the public branch. It seems like I'm making a whole bunch of extra function calls that I have NO idea why...stuff it getting put into the cache as it should, everything is calling the internal function... IMO this is a better way of doing things, but something is being hyper-sensitive.\n\nAnyways, I did make a few tweaks. I put `initial_call` as the last argument to make the user less likely to touch it. I also allowed the cache to take non-keyword arguments. I also made some other micro-optimizations by moving the `if edge_selector is None:` into the `initial_call` block and moved the `x,y = R.gens()`.",
    "created_at": "2014-01-07T18:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6046",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:75" align="right">comment:75</div>

I put my changes in the branch `u/tscrim/tutte_polynomial-1314` and reverted back the public branch. It seems like I'm making a whole bunch of extra function calls that I have NO idea why...stuff it getting put into the cache as it should, everything is calling the internal function... IMO this is a better way of doing things, but something is being hyper-sensitive.

Anyways, I did make a few tweaks. I put `initial_call` as the last argument to make the user less likely to touch it. I also allowed the cache to take non-keyword arguments. I also made some other micro-optimizations by moving the `if edge_selector is None:` into the `initial_call` block and moved the `x,y = R.gens()`.



---

archive/issue_comments_006047.json:
```json
{
    "body": "Changed branch from **[public/1314](https://github.com/sagemath/sagetrac-mirror/tree/public/1314)** to **[u/tscrim/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/tutte_polynomial-1314)**",
    "created_at": "2014-01-07T19:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6047",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[public/1314](https://github.com/sagemath/sagetrac-mirror/tree/public/1314)** to **[u/tscrim/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/tutte_polynomial-1314)**



---

archive/issue_events_012751.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-07T19:14:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12751"
}
```



---

archive/issue_events_012752.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-07T19:14:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12752"
}
```



---

archive/issue_comments_006048.json:
```json
{
    "body": "Changed commit from **[`5450ef2`](https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8)** to **[`b02b939`](https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564)**",
    "created_at": "2014-01-07T19:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6048",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`5450ef2`](https://github.com/sagemath/sagetrac-mirror/commit/5450ef20b36892ccbe3f6c3d5c9f049fad03cbb8)** to **[`b02b939`](https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564)**



---

archive/issue_comments_006049.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nOkay, I figured out what was changing. I wasn't caching the final result of the Tutte polynomial, and how it currently is done will overly clear the cache. For example, say you compute the Tutte polynomial on some large graph `G`, then you compute it on a very small graph `H` and ask it to clear the cache. Now the cached data for `G` is gone. I think we should always cache the final results, and with the current implementation, there is the possibility we've already computed the Tutte polynomial of a small graph. However I think this will be infrequent or you should not be clearing the utility cache.\n\nAlthough there is a problem, we get memory leaks. Now one can argue with the previous behavior along with the default implementation, this is not a leak. If the user was deciding to keep the cache, this would be the user knowing what (s)he is doing. Yet I wouldn't want my small computation to destroy the data of my big one, nor store it myself. So which way should we go, and if we go with 2 caches, how usable would the weak caches be? Feedback is needed.\n\nSimon, Nils -- I cc-ed you here because we might need a good weak cache solution here and I'd like your thoughts and expertise.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e896d884fecc58ab18e75c546bd3c79b046cbd41\"><code>e896d88</code></a></td><td><code>Reworked the internal structure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839\"><code>63b0487</code></a></td><td><code>Added doctest to the internal function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/466cec64e495570548ad90a3923cffc43a2479cb\"><code>466cec6</code></a></td><td><code>Moved the cache.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da55de3e37b727f474cf86706935a6486ec8f6c2\"><code>da55de3</code></a></td><td><code>Moved @_cached to its proper place.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7515b6bceb2510b040cee5489e0e01a73c11d16a\"><code>7515b6b</code></a></td><td><code>Added the variables back.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91a36960339d944a932a7db3177de1ce4614906c\"><code>91a3696</code></a></td><td><code>pyflakes cleanup.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564\"><code>b02b939</code></a></td><td><code>Cached the output of tutte_polynomial.</code></td></tr></table>\n",
    "created_at": "2014-01-07T19:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6049",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:76" align="right">comment:76</div>

Okay, I figured out what was changing. I wasn't caching the final result of the Tutte polynomial, and how it currently is done will overly clear the cache. For example, say you compute the Tutte polynomial on some large graph `G`, then you compute it on a very small graph `H` and ask it to clear the cache. Now the cached data for `G` is gone. I think we should always cache the final results, and with the current implementation, there is the possibility we've already computed the Tutte polynomial of a small graph. However I think this will be infrequent or you should not be clearing the utility cache.

Although there is a problem, we get memory leaks. Now one can argue with the previous behavior along with the default implementation, this is not a leak. If the user was deciding to keep the cache, this would be the user knowing what (s)he is doing. Yet I wouldn't want my small computation to destroy the data of my big one, nor store it myself. So which way should we go, and if we go with 2 caches, how usable would the weak caches be? Feedback is needed.

Simon, Nils -- I cc-ed you here because we might need a good weak cache solution here and I'd like your thoughts and expertise.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e896d884fecc58ab18e75c546bd3c79b046cbd41"><code>e896d88</code></a></td><td><code>Reworked the internal structure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63b04872bc064f46b2856b63e9fc2d4a4e1b2839"><code>63b0487</code></a></td><td><code>Added doctest to the internal function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/466cec64e495570548ad90a3923cffc43a2479cb"><code>466cec6</code></a></td><td><code>Moved the cache.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da55de3e37b727f474cf86706935a6486ec8f6c2"><code>da55de3</code></a></td><td><code>Moved @_cached to its proper place.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7515b6bceb2510b040cee5489e0e01a73c11d16a"><code>7515b6b</code></a></td><td><code>Added the variables back.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91a36960339d944a932a7db3177de1ce4614906c"><code>91a3696</code></a></td><td><code>pyflakes cleanup.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564"><code>b02b939</code></a></td><td><code>Cached the output of tutte_polynomial.</code></td></tr></table>




---

archive/issue_comments_006050.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nAhahahah. So you will not do without a \"local cache\" and a \"global cache\". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.\n\nAnd what happens if the local cache generates values that exist in the global cache too ? `:-P` What do you cache then ? `:-P`\n\nI think you are overthinking very simple needs `:-)`\n\nNathann",
    "created_at": "2014-01-07T19:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6050",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:77" align="right">comment:77</div>

Ahahahah. So you will not do without a "local cache" and a "global cache". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.

And what happens if the local cache generates values that exist in the global cache too ? `:-P` What do you cache then ? `:-P`

I think you are overthinking very simple needs `:-)`

Nathann



---

archive/issue_comments_006051.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@tscrim](#comment:71):\n> Okay, `@cached_function` doesn't work because we can't pass a key function to it...\n\nI don't understand what you mean with this. Note that in the @_cached decorator you are not passing an arbitrary key function either: You have _cache_key hardcoded.",
    "created_at": "2014-01-07T21:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6051",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@tscrim](#comment:71):
> Okay, `@cached_function` doesn't work because we can't pass a key function to it...

I don't understand what you mean with this. Note that in the @_cached decorator you are not passing an arbitrary key function either: You have _cache_key hardcoded.



---

archive/issue_comments_006052.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@nathanncohen](#comment:77):\n> Ahahahah. So you will not do without a \"local cache\" and a \"global cache\". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.\n\nWhat we should probably do, if we do keep a global cache, is during the computation check if the key is in the global cache as well. However I'm thinking we should not have a global cache because we get a memory leak. Create a graph `G`, compute it's Tutte polynomial, then delete `G`. The polynomial is now stuck in the global cache (that we don't want to have to manually clear). I'm thinking the better way to do things is only have a local cache and make `tutte_polynomial()` a cached method of the graphs. That way when we delete the graph (along with the local cache), the resulting polynomial can be garbage collected. It's probably better to call the local cache the computation cache.\n\n> And what happens if the local cache generates values that exist in the global cache too ? `:-P` What do you cache then ? `:-P`\n\nIn effect what I'm proposing is we keep them completely separate, I think that would create the least amount of problems. One other thing we could do is keep a small fixed-size permanent cache.\n\nThat gives me an idea about something else to do: have an option for the max size of a truly local cache when doing the computations. A priority queue up to some fixed size which keeps track of computed Tutte polynomials (with the priority being most often computed or some other heuristic) from that in the local cache. However the above, which turns it into a paging problem, might be an over-thought approach.\n\nHow big of a concern is it for recomputing Tutte polynomials for isomorphic-but-not-identical graphs?\n\nSimon, I was trying to convert it to use the usual `@cached_function` instead of the custom cache.",
    "created_at": "2014-01-07T21:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6052",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@nathanncohen](#comment:77):
> Ahahahah. So you will not do without a "local cache" and a "global cache". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.

What we should probably do, if we do keep a global cache, is during the computation check if the key is in the global cache as well. However I'm thinking we should not have a global cache because we get a memory leak. Create a graph `G`, compute it's Tutte polynomial, then delete `G`. The polynomial is now stuck in the global cache (that we don't want to have to manually clear). I'm thinking the better way to do things is only have a local cache and make `tutte_polynomial()` a cached method of the graphs. That way when we delete the graph (along with the local cache), the resulting polynomial can be garbage collected. It's probably better to call the local cache the computation cache.

> And what happens if the local cache generates values that exist in the global cache too ? `:-P` What do you cache then ? `:-P`

In effect what I'm proposing is we keep them completely separate, I think that would create the least amount of problems. One other thing we could do is keep a small fixed-size permanent cache.

That gives me an idea about something else to do: have an option for the max size of a truly local cache when doing the computations. A priority queue up to some fixed size which keeps track of computed Tutte polynomials (with the priority being most often computed or some other heuristic) from that in the local cache. However the above, which turns it into a paging problem, might be an over-thought approach.

How big of a concern is it for recomputing Tutte polynomials for isomorphic-but-not-identical graphs?

Simon, I was trying to convert it to use the usual `@cached_function` instead of the custom cache.



---

archive/issue_comments_006053.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@nathanncohen](#comment:77):\n> Ahahahah. So you will not do without a \"local cache\" and a \"global cache\". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.\n\nWhere are the two merged? I can't see it in the code.\n\n> And what happens if the local cache generates values that exist in the global cache too ?\n\nWhat should happen? You have two caches caching the same value. You clear the first cache. The value is still in the second cache.",
    "created_at": "2014-01-07T21:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6053",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@nathanncohen](#comment:77):
> Ahahahah. So you will not do without a "local cache" and a "global cache". You want to use the global cache to speedup the results, and you want to clear the local cache only. And merge the two if the user wants to keep it.

Where are the two merged? I can't see it in the code.

> And what happens if the local cache generates values that exist in the global cache too ?

What should happen? You have two caches caching the same value. You clear the first cache. The value is still in the second cache.



---

archive/issue_comments_006054.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@tscrim](#comment:79):\n> I'm thinking the better way to do things is only have a local cache and make `tutte_polynomial()` a cached method of the graphs.\n\nSounds reasonable.\n\n> Simon, I was trying to convert it to use the usual `@cached_function` instead of the custom cache.\n\nCan you use immutable graphs? See #15278, #15603, #15619 and #15622. These can be used as dictionary key and are thus acceptable input for a cached function.",
    "created_at": "2014-01-07T22:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6054",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@tscrim](#comment:79):
> I'm thinking the better way to do things is only have a local cache and make `tutte_polynomial()` a cached method of the graphs.

Sounds reasonable.

> Simon, I was trying to convert it to use the usual `@cached_function` instead of the custom cache.

Can you use immutable graphs? See #15278, #15603, #15619 and #15622. These can be used as dictionary key and are thus acceptable input for a cached function.



---

archive/issue_comments_006055.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nThe problem is we can't currently do any preprocessing  on the arguments for `@cached_function`(like we do for `UniqueRepresentation`), or at least that I'm aware of. So if we pass in a mutable graph, we can't convert it into something immutable and `@cached_function` returns an error (or do any other form of standardization).",
    "created_at": "2014-01-07T23:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6055",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:82" align="right">comment:82</div>

The problem is we can't currently do any preprocessing  on the arguments for `@cached_function`(like we do for `UniqueRepresentation`), or at least that I'm aware of. So if we pass in a mutable graph, we can't convert it into something immutable and `@cached_function` returns an error (or do any other form of standardization).



---

archive/issue_comments_006056.json:
```json
{
    "body": "Changed branch from **[u/tscrim/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/tutte_polynomial-1314)** to **[u/mhansen/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/mhansen/tutte_polynomial-1314)**",
    "created_at": "2014-01-08T01:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6056",
    "user": "https://github.com/mwhansen"
}
```

Changed branch from **[u/tscrim/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/tutte_polynomial-1314)** to **[u/mhansen/tutte_polynomial-1314](https://github.com/sagemath/sagetrac-mirror/tree/u/mhansen/tutte_polynomial-1314)**



---

archive/issue_comments_006057.json:
```json
{
    "body": "Changed commit from **[`b02b939`](https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564)** to **[`b279c33`](https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d)**",
    "created_at": "2014-01-08T01:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6057",
    "user": "https://github.com/mwhansen"
}
```

Changed commit from **[`b02b939`](https://github.com/sagemath/sagetrac-mirror/commit/b02b9395dad4d69508a2897832b42892ce89e564)** to **[`b279c33`](https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d)**



---

archive/issue_comments_006058.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nI pushed a change which just makes the cache an optional keyword argument.  All of the sub-calls to tutte_polynomial use the same cache as the top-level one.  Additionally, if the use does not want the cache destroyed at the end of the computation, they just provide their own dictionary to the method.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d\"><code>b279c33</code></a></td><td><code>#1314: Make the cache an argument instead of storing it on the decorator</code></td></tr></table>\n",
    "created_at": "2014-01-08T01:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6058",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:84" align="right">comment:84</div>

I pushed a change which just makes the cache an optional keyword argument.  All of the sub-calls to tutte_polynomial use the same cache as the top-level one.  Additionally, if the use does not want the cache destroyed at the end of the computation, they just provide their own dictionary to the method.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b279c3363f2e06dab8332c8ce8f470480ccf966d"><code>b279c33</code></a></td><td><code>#1314: Make the cache an argument instead of storing it on the decorator</code></td></tr></table>




---

archive/issue_comments_006059.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nI like the elegance of it; so positive review from me. Nathann and anyone else, any objections?",
    "created_at": "2014-01-09T16:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6059",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:85" align="right">comment:85</div>

I like the elegance of it; so positive review from me. Nathann and anyone else, any objections?



---

archive/issue_events_012753.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-09T16:34:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12753"
}
```



---

archive/issue_events_012754.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-09T16:34:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12754"
}
```



---

archive/issue_comments_006060.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\n> I like the elegance of it; so positive review from me. Nathann and anyone else, any objections?\n\nNono, it's fine `:-)`\n\nNathann",
    "created_at": "2014-01-09T16:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6060",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:87" align="right">comment:87</div>

> I like the elegance of it; so positive review from me. Nathann and anyone else, any objections?

Nono, it's fine `:-)`

Nathann



---

archive/issue_events_012755.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-09T16:43:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12755"
}
```



---

archive/issue_events_012756.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-01-09T16:43:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12756"
}
```



---

archive/issue_comments_006061.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nFor a future ticket with #15657 - make `Graph.tutte_polynomial` a `@cached_method` once `@cached_method` can ignore the cache argument.",
    "created_at": "2014-01-09T16:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1314#issuecomment-6061",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:88" align="right">comment:88</div>

For a future ticket with #15657 - make `Graph.tutte_polynomial` a `@cached_method` once `@cached_method` can ignore the cache argument.



---

archive/issue_events_012757.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-11T14:56:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12757"
}
```



---

archive/issue_events_012758.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a71fc880072844baccf493745826e3a546efb312",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-01-11T14:56:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/1314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1314#event-12758"
}
```
