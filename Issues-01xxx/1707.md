# Issue 1707: add Carlo Hamalainen's latin square stuff to Sage

archive/issues_001707.json:
```json
{
    "body": "\n\nAssignee: @mwhansen\n\nCC:  sage-combinat\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/1707\n\n",
    "closed_at": "2008-03-25T14:33:09Z",
    "created_at": "2008-01-07T07:51:28Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.11",
    "title": "add Carlo Hamalainen's latin square stuff to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1707",
    "user": "https://github.com/mwhansen"
}
```


Assignee: @mwhansen

CC:  sage-combinat

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/1707





---

archive/issue_comments_011666.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2008-01-07T07:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11666",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to assigned.



---

archive/issue_comments_011667.json:
```json
{
    "body": "Changing assignee from @williamstein to @mwhansen.",
    "created_at": "2008-01-07T07:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11667",
    "user": "https://github.com/mwhansen"
}
```

Changing assignee from @williamstein to @mwhansen.



---

archive/issue_events_004998.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "rename": {
        "from": "add Carlo Hamalainen latin square stuff to Sage",
        "to": "add Carlo Hamalainen's latin square stuff to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-4998"
}
```



---

archive/issue_events_004999.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-01-07T07:52:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "milestone": "sage-2.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-4999"
}
```



---

archive/issue_events_005000.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "rename": {
        "from": "add Carlo Hamalainen's latin square stuff to Sage",
        "to": "[with code] add Carlo Hamalainen's latin square stuff to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-5000"
}
```



---

archive/issue_comments_011668.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2008-03-16T08:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11668",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_011669.json:
```json
{
    "body": "<a id='comment:3'></a>\nI'm willing to review this but since the patch was created 2 months ago(?), I am not sure what version of SAGe to apply it against. Looks very interesting.",
    "created_at": "2008-03-16T12:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11669",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:3'></a>
I'm willing to review this but since the patch was created 2 months ago(?), I am not sure what version of SAGe to apply it against. Looks very interesting.



---

archive/issue_comments_011670.json:
```json
{
    "body": "<a id='comment:4'></a>\nI've looked at this more. This is not a patch at all but simply some SAGE code. A lot of this seems like good code but a lot is missing for this to be acceptable for inclusion in SAGE - missing docstrings and doctests, and I think some functions should be methods for a (yet to be created and designed) LatinSquare class. \nSuggestion: This could all go into a subdirectory of combinat called matrices, since there is a wide subfield of combinatorics which deals with matrices of various types (eg, latin squares, Hadamard matrices, (0,1)-matrices, etc).",
    "created_at": "2008-03-16T13:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11670",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:4'></a>
I've looked at this more. This is not a patch at all but simply some SAGE code. A lot of this seems like good code but a lot is missing for this to be acceptable for inclusion in SAGE - missing docstrings and doctests, and I think some functions should be methods for a (yet to be created and designed) LatinSquare class. 
Suggestion: This could all go into a subdirectory of combinat called matrices, since there is a wide subfield of combinatorics which deals with matrices of various types (eg, latin squares, Hadamard matrices, (0,1)-matrices, etc).



---

archive/issue_comments_011671.json:
```json
{
    "body": "Dancing links C++",
    "created_at": "2008-03-21T07:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11671",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

Dancing links C++



---

archive/issue_comments_011672.json:
```json
{
    "body": "Attachment [dancing_links.spyx](tarball://root/attachments/some-uuid/ticket1707/dancing_links.spyx) by carlohamalainen created at 2008-03-21 07:53:40\n\nDancing links C++ wrapper",
    "created_at": "2008-03-21T07:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11672",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

Attachment [dancing_links.spyx](tarball://root/attachments/some-uuid/ticket1707/dancing_links.spyx) by carlohamalainen created at 2008-03-21 07:53:40

Dancing links C++ wrapper



---

archive/issue_comments_011673.json:
```json
{
    "body": "Updated latin squares code (lots of doctests), replaces latin.sage",
    "created_at": "2008-03-21T07:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11673",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

Updated latin squares code (lots of doctests), replaces latin.sage



---

archive/issue_comments_011674.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [latin.2.sage](tarball://root/attachments/some-uuid/ticket1707/latin.2.sage) by carlohamalainen created at 2008-03-21 07:57:30\n\n* The file dfs_latin.spyx can be removed, all functionality has been superseded by the C++ dancing links solver.\n\n* Many doctests/docstrings added to latin.sage (see latin.2.sage attachment)",
    "created_at": "2008-03-21T07:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11674",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

<a id='comment:5'></a>
Attachment [latin.2.sage](tarball://root/attachments/some-uuid/ticket1707/latin.2.sage) by carlohamalainen created at 2008-03-21 07:57:30

* The file dfs_latin.spyx can be removed, all functionality has been superseded by the C++ dancing links solver.

* Many doctests/docstrings added to latin.sage (see latin.2.sage attachment)



---

archive/issue_comments_011675.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi, \n\nI have deleted latin.sage and dfs_latin.spyx. As David did state earlier we now need to rename the files, add them to the build systems, add imports and finally turn this into a patch. Then hopefully somebody will review this quickly.\n\nAnybody around who wants to help Carlo out?\n\nCheers,\n\nMichael",
    "created_at": "2008-03-21T08:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11675",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
Hi, 

I have deleted latin.sage and dfs_latin.spyx. As David did state earlier we now need to rename the files, add them to the build systems, add imports and finally turn this into a patch. Then hopefully somebody will review this quickly.

Anybody around who wants to help Carlo out?

Cheers,

Michael



---

archive/issue_events_005001.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-21T08:38:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "milestone": "sage-2.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-5001"
}
```



---

archive/issue_events_005002.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-21T08:38:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "milestone": "sage-2.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-5002"
}
```



---

archive/issue_comments_011676.json:
```json
{
    "body": "<a id='comment:7'></a>\nI can try to help in the beginning. However, I've forgotten how to add a new directory to the devel tree. Do you use hg_sage.add as well?",
    "created_at": "2008-03-21T12:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11676",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:7'></a>
I can try to help in the beginning. However, I've forgotten how to add a new directory to the devel tree. Do you use hg_sage.add as well?



---

archive/issue_comments_011677.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [wdj](#comment%3A7):\n> I can try to help in the beginning. However, I've forgotten how to add a new directory to the devel tree. Do you use hg_sage.add as well?\n\n\nTo the Sage repo? Just add it and add the new file to the repo. Somebody should add this to the development manual in case it isn't in there yet, i.e. \"How do I add my code to the tree in case it is all new\".\n\nCheers,\n\nMichael",
    "created_at": "2008-03-21T12:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11677",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
Replying to [wdj](#comment%3A7):
> I can try to help in the beginning. However, I've forgotten how to add a new directory to the devel tree. Do you use hg_sage.add as well?


To the Sage repo? Just add it and add the new file to the repo. Somebody should add this to the development manual in case it isn't in there yet, i.e. "How do I add my code to the tree in case it is all new".

Cheers,

Michael



---

archive/issue_events_005003.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "rename": {
        "from": "[with code] add Carlo Hamalainen's latin square stuff to Sage",
        "to": "add Carlo Hamalainen's latin square stuff to Sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-5003"
}
```



---

archive/issue_comments_011678.json:
```json
{
    "body": "Changing status from needs_review to needs_review.",
    "created_at": "2008-03-23T17:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11678",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

Changing status from needs_review to needs_review.



---

archive/issue_comments_011679.json:
```json
{
    "body": "Attachment [trac1707-combinat-matrices.patch](tarball://root/attachments/some-uuid/ticket1707/trac1707-combinat-matrices.patch) by carlohamalainen created at 2008-03-23 18:12:36\n\npatch against 2.11.alpha1, needs review",
    "created_at": "2008-03-23T18:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11679",
    "user": "https://trac.sagemath.org/admin/accounts/users/carlohamalainen"
}
```

Attachment [trac1707-combinat-matrices.patch](tarball://root/attachments/some-uuid/ticket1707/trac1707-combinat-matrices.patch) by carlohamalainen created at 2008-03-23 18:12:36

patch against 2.11.alpha1, needs review



---

archive/issue_comments_011680.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis applies cleanly, but not not build without an addition to setup.py (in the top directory), since it adds a subdirectory \"matrices\" to combinat. With this change, it passes sage -testall, except for the plot.py failure (which has nothing to do with this patch).\n\nI give this a positive review but leave some food for thought: In my opinion, at some point, possibly in a future version, some very minor changes to the docstring are worth considering:\n1. \"nauty?\" should be replaced by \"NICE?\"\n2. add REFERENCES section, with actual literature sources\n3. allow base rings other than ZZ\n4. discuss whether isotopism sould return a Permutation or a \nPermutationGroupElement with sage-devel",
    "created_at": "2008-03-23T19:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11680",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:10'></a>
This applies cleanly, but not not build without an addition to setup.py (in the top directory), since it adds a subdirectory "matrices" to combinat. With this change, it passes sage -testall, except for the plot.py failure (which has nothing to do with this patch).

I give this a positive review but leave some food for thought: In my opinion, at some point, possibly in a future version, some very minor changes to the docstring are worth considering:
1. "nauty?" should be replaced by "NICE?"
2. add REFERENCES section, with actual literature sources
3. allow base rings other than ZZ
4. discuss whether isotopism sould return a Permutation or a 
PermutationGroupElement with sage-devel



---

archive/issue_comments_011681.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2008-03-23T19:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11681",
    "user": "https://github.com/wdjoyner"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_011682.json:
```json
{
    "body": "<a id='comment:11'></a>\nHello,\n\nI'll post a more in-depth review in awhile, but one thing that needs to be done is to make it so that doctests pass.\n\n1) 'sage.combinat.matrices' has to be added in setup.py under 'sage.combinat.sf' (for example) so that Sage knows about the module.\n\n2) All the doctests for functions which are not raised to the global namespace (via matrices.all) need to be explicitly imported in the doctest.  For example, \"sage: from sage.combinat.matrices.latin import dlxcpp_find_completions\".\n\n--Mike",
    "created_at": "2008-03-24T19:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11682",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:11'></a>
Hello,

I'll post a more in-depth review in awhile, but one thing that needs to be done is to make it so that doctests pass.

1) 'sage.combinat.matrices' has to be added in setup.py under 'sage.combinat.sf' (for example) so that Sage knows about the module.

2) All the doctests for functions which are not raised to the global namespace (via matrices.all) need to be explicitly imported in the doctest.  For example, "sage: from sage.combinat.matrices.latin import dlxcpp_find_completions".

--Mike



---

archive/issue_comments_011683.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2008-03-24T19:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11683",
    "user": "https://github.com/mwhansen"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_011684.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2008-03-25T14:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11684",
    "user": "https://github.com/mwhansen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_011685.json:
```json
{
    "body": "<a id='comment:12'></a>\nAttachment [1707-referee.patch](tarball://root/attachments/some-uuid/ticket1707/1707-referee.patch) by @mwhansen created at 2008-03-25 14:07:19\n\nApply the last two patches: trac1707-combinat-matrices.patch and 1707-referee.patch",
    "created_at": "2008-03-25T14:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11685",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:12'></a>
Attachment [1707-referee.patch](tarball://root/attachments/some-uuid/ticket1707/1707-referee.patch) by @mwhansen created at 2008-03-25 14:07:19

Apply the last two patches: trac1707-combinat-matrices.patch and 1707-referee.patch



---

archive/issue_events_005004.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-25T14:33:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1707#event-5004"
}
```



---

archive/issue_comments_011686.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-03-25T14:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11686",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_011687.json:
```json
{
    "body": "<a id='comment:13'></a>\nMerged trac1707-combinat-matrices.patch and 1707-referee.patch in Sage 2.11.alpha2",
    "created_at": "2008-03-25T14:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11687",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:13'></a>
Merged trac1707-combinat-matrices.patch and 1707-referee.patch in Sage 2.11.alpha2



---

archive/issue_comments_011688.json:
```json
{
    "body": "set file to C++ in pbuild",
    "created_at": "2008-03-26T11:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11688",
    "user": "https://github.com/garyfurnish"
}
```

set file to C++ in pbuild



---

archive/issue_comments_011689.json:
```json
{
    "body": "Attachment [trac_1707-dancing_links.pyx-doctestfix.patch](tarball://root/attachments/some-uuid/ticket1707/trac_1707-dancing_links.pyx-doctestfix.patch) by mabshoff created at 2008-03-26 15:35:14",
    "created_at": "2008-03-26T15:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11689",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Attachment [trac_1707-dancing_links.pyx-doctestfix.patch](tarball://root/attachments/some-uuid/ticket1707/trac_1707-dancing_links.pyx-doctestfix.patch) by mabshoff created at 2008-03-26 15:35:14



---

archive/issue_comments_011690.json:
```json
{
    "body": "<a id='comment:14'></a>\nMerged trac_1707_pbuild.patch and trac_1707-dancing_links.pyx-doctestfix.patch in Sage 2.11.alpha2\n\nCheers,\n\nMichael",
    "created_at": "2008-03-26T15:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1707#issuecomment-11690",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:14'></a>
Merged trac_1707_pbuild.patch and trac_1707-dancing_links.pyx-doctestfix.patch in Sage 2.11.alpha2

Cheers,

Michael
