# Issue 1284: G.subgroup([...]) for G an abelian group has at least one lame property

archive/issues_001284.json:
```json
{
    "assignees": [],
    "body": "\n```\nFrancis Clarke to sage-support\n\nSubgroups of abelian groups:\n\nsage: G.<a, b> = AbelianGroup(2)\nsage: A = G.subgroup([a])\nsage: B = G.subgroup([b])\nsage: A == B\nTrue\n\nSurely not!\n\nOn the other hand for vector spaces:\n\nsage: W.<u, v> = QQ^2\nsage: U = W.subspace([u])\nsage: V = W.subspace([v])\nsage: U == V\nFalse\n\nAs expected.\n```\n\nI have verified this and I agree that this is stupid.\nThe problem is that the `__cmp__` method is just comparing\nthe groups abstract structure:\n\n```\n        if not is_AbelianGroup(right):\n            return -1\n        return cmp(self.invariants(), right.invariants())\n```\n\nIt should also take into account the embedding. \n\nAssignee: **@rlmill**\n\nCC:  fwclarke\n\n_Issue created by migration from https://trac.sagemath.org/ticket/1284_\n\n",
    "closed_at": "2008-05-26T16:42:38Z",
    "created_at": "2007-11-26T21:04:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "G.subgroup([...]) for G an abelian group has at least one lame property",
    "type": "issue",
    "updated_at": "2008-05-26T16:42:38Z",
    "url": "https://github.com/sagemath/sage/issues/1284",
    "user": "https://github.com/williamstein"
}
```

```
Francis Clarke to sage-support

Subgroups of abelian groups:

sage: G.<a, b> = AbelianGroup(2)
sage: A = G.subgroup([a])
sage: B = G.subgroup([b])
sage: A == B
True

Surely not!

On the other hand for vector spaces:

sage: W.<u, v> = QQ^2
sage: U = W.subspace([u])
sage: V = W.subspace([v])
sage: U == V
False

As expected.
```

I have verified this and I agree that this is stupid.
The problem is that the `__cmp__` method is just comparing
the groups abstract structure:

```
        if not is_AbelianGroup(right):
            return -1
        return cmp(self.invariants(), right.invariants())
```

It should also take into account the embedding. 

Assignee: **@rlmill**

CC:  fwclarke

_Issue created by migration from https://trac.sagemath.org/ticket/1284_





---

archive/issue_events_010922.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-26T21:04:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "milestone_number": null,
    "milestone_title": "sage-2.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10922"
}
```



---

archive/issue_events_010923.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-26T21:04:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10923"
}
```



---

archive/issue_events_010924.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-26T21:04:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10924"
}
```



---

archive/issue_events_010925.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-26T21:04:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10925"
}
```



---

archive/issue_events_010926.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-12-14T04:12:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "milestone_number": null,
    "milestone_title": "sage-2.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10926"
}
```



---

archive/issue_events_010927.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-12-14T04:12:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "milestone_number": null,
    "milestone_title": "sage-2.9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10927"
}
```



---

archive/issue_comments_006161.json:
```json
{
    "body": "Assignee: **@rlmill**",
    "created_at": "2008-05-10T23:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6161",
    "user": "https://github.com/rlmill"
}
```

Assignee: **@rlmill**



---

archive/issue_comments_006162.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThis fixes the bugs at #2272 and #3127 as well.\n\n```\nrank4:sage-3.0.1 rlmill$ ./sage -t devel/sage/sage/groups/\n...\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 183.2 seconds\n```",
    "created_at": "2008-05-10T23:36:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6162",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:2'>Comment 2:</a>
This fixes the bugs at #2272 and #3127 as well.

```
rank4:sage-3.0.1 rlmill$ ./sage -t devel/sage/sage/groups/
...
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 183.2 seconds
```



---

archive/issue_events_010928.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-05-10T23:37:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10928"
}
```



---

archive/issue_comments_006163.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNegative review:  if I understand the code for `__contains__` in the first patch correctly, it looks very inefficient.  There must be vastly better ways of handling finite abelian groups than this: the code is the equivalent of testing whether m divides n by repeated subtraction instead of division with remainder.\n\nOf course I may be wrong, and perhaps having an inefficient implementation temporarily is better than the wrong answers reported in the orginal posting.  Does the patch solve that, by the way?  It would be good to have a doctest which proced it but I did not see one.",
    "created_at": "2008-05-11T17:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6163",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>Comment 4:</a>
Negative review:  if I understand the code for `__contains__` in the first patch correctly, it looks very inefficient.  There must be vastly better ways of handling finite abelian groups than this: the code is the equivalent of testing whether m divides n by repeated subtraction instead of division with remainder.

Of course I may be wrong, and perhaps having an inefficient implementation temporarily is better than the wrong answers reported in the orginal posting.  Does the patch solve that, by the way?  It would be good to have a doctest which proced it but I did not see one.



---

archive/issue_events_010929.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-05-11T17:49:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "title_is": "[negative review] G.subgroup([...]) for G an abelian group has at least one lame property",
    "title_was": "G.subgroup([...]) for G an abelian group has at least one lame property",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10929"
}
```



---

archive/issue_comments_006164.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nJohn,\n\nYou're right about the efficiency part. I was just trying to take the code from not working to working. Will post another patch soon.",
    "created_at": "2008-05-11T17:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6164",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:5'>Comment 5:</a>
John,

You're right about the efficiency part. I was just trying to take the code from not working to working. Will post another patch soon.



---

archive/issue_comments_006165.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nHi John, Robert,\n\nI would even go so far and choose a working, but slow/sucky implementation over a future perfect one. Perfection is the enemy of the good. Since this issue has made it into trac three times I would like to have this ticket resolved in 3.0.2. So assuming this work let's merge it as is and open an enhancement ticket for a proper fast implementation. \n\nThoughts?\n\nCheers,\n\nMichael",
    "created_at": "2008-05-11T20:22:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6165",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:6'>Comment 6:</a>
Hi John, Robert,

I would even go so far and choose a working, but slow/sucky implementation over a future perfect one. Perfection is the enemy of the good. Since this issue has made it into trac three times I would like to have this ticket resolved in 3.0.2. So assuming this work let's merge it as is and open an enhancement ticket for a proper fast implementation. 

Thoughts?

Cheers,

Michael



---

archive/issue_comments_006166.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\n+1",
    "created_at": "2008-05-11T20:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6166",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:7'>Comment 7:</a>
+1



---

archive/issue_comments_006167.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nSince Francis reported this bug initially let's get him uptodate on this ticket. I didn't look at the ticket in detail, but we should certainly add a doctest that test this specific bug for obvious reasons :)\n\nCheers,\n\nMichael",
    "created_at": "2008-05-11T20:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6167",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:8'>Comment 8:</a>
Since Francis reported this bug initially let's get him uptodate on this ticket. I didn't look at the ticket in detail, but we should certainly add a doctest that test this specific bug for obvious reasons :)

Cheers,

Michael



---

archive/issue_comments_006168.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nSorry for the missing doctest, however:\n\n```\nsage: G.<a,b> = AbelianGroup(2)\nsage: A = G.subgroup([a])\nsage: B = G.subgroup([b])\nsage: A == B\nFalse\n```",
    "created_at": "2008-05-11T20:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6168",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:9'>Comment 9:</a>
Sorry for the missing doctest, however:

```
sage: G.<a,b> = AbelianGroup(2)
sage: A = G.subgroup([a])
sage: B = G.subgroup([b])
sage: A == B
False
```



---

archive/issue_comments_006169.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nYes, the original problem is solved, but others remain. \n \nWith the two patches installed:\n\n```\nsage: G.<a, b> = AbelianGroup(2)\nsage: H.<c> = AbelianGroup(1)\nsage: H < G\nTrue\n```\nwhich is not what I would expect.  There is no reason to assume H is a subgroup of G.\n\nBut anyway `__cmp__` and `__contains__` are inconsistent.  For\n\n```\nsage: c in H\nTrue\nsage: c in G\nFalse\n```\n\nMoreover\n\n```\nsage: A = G.subgroup([a])\nsage: A == H\nFalse\nsage: H == A\nTrue\n```",
    "created_at": "2008-05-11T21:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6169",
    "user": "https://github.com/sagetrac-fwclarke"
}
```

<a id='comment:10'>Comment 10:</a>
Yes, the original problem is solved, but others remain. 
 
With the two patches installed:

```
sage: G.<a, b> = AbelianGroup(2)
sage: H.<c> = AbelianGroup(1)
sage: H < G
True
```
which is not what I would expect.  There is no reason to assume H is a subgroup of G.

But anyway `__cmp__` and `__contains__` are inconsistent.  For

```
sage: c in H
True
sage: c in G
False
```

Moreover

```
sage: A = G.subgroup([a])
sage: A == H
False
sage: H == A
True
```



---

archive/issue_comments_006170.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nWith this latest patch:\n\n```\nsage: G.<a, b> = AbelianGroup(2)\nsage: H.<c> = AbelianGroup(1)\nsage: H < G\nFalse\nsage: c in H\nTrue\nsage: c in G\nFalse\nsage: A = G.subgroup([a])\nsage: A == H\nFalse\nsage: H == A\nFalse\n```\n\nI know it's still missing some documentation, I just want to see if there is more work necessary.",
    "created_at": "2008-05-11T23:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6170",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:11'>Comment 11:</a>
With this latest patch:

```
sage: G.<a, b> = AbelianGroup(2)
sage: H.<c> = AbelianGroup(1)
sage: H < G
False
sage: c in H
True
sage: c in G
False
sage: A = G.subgroup([a])
sage: A == H
False
sage: H == A
False
```

I know it's still missing some documentation, I just want to see if there is more work necessary.



---

archive/issue_events_010930.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2008-05-12T08:22:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "milestone_number": null,
    "milestone_title": "sage-3.0.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10930"
}
```



---

archive/issue_events_010931.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2008-05-12T08:22:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10931"
}
```



---

archive/issue_comments_006171.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI am beginning to think the problem is rather deeper.  There are many inconsistencies in the way that algebraic objects are implemented.  It should be possible for a user to learn the basic syntax for, say, rings, and then adopt most of the basics when working with vector spaces, or abelian groups, etc.\n\nSome examples of inconsistent behaviour follow.\n\n```\nsage: R.<r> = PolynomialRing(QQ)\nsage: S.<s> = PolynomialRing(QQ)\nsage: R == S\nFalse\nsage: R.ideal(r^2 - 1) < S\nTrue\n```\n\n```\nsage: U.<u1, u2> = QQ^2\nsage: V.<v1, v2> = QQ^2\nsage: U == V\nTrue\nsage: W = VectorSpace(QQ, 2)\nsage: U == W\nTrue\nsage: W.<w1, w2> = VectorSpace(QQ, 2)\n---------------------------------------------------------------------------\n<type 'exceptions.TypeError'>             Traceback (most recent call last)\n\n/Users/mafwc/<ipython console> in <module>()\n\n<type 'exceptions.TypeError'>: VectorSpace() got an unexpected keyword argument 'names'\n```\n\nIn my experience of doing calculations (rather than looking at the code) number fields have the best implementation of the algebraic objects which I have encountered .  But even so there are things that could be improved.  For example:\n\n```\nsage: K.subfield((theta^4 + 26*theta)/84)\n\n(Number Field in theta0 with defining polynomial x^3 - 2,\n Ring morphism:\n  From: Number Field in theta0 with defining polynomial x^3 - 2\n  To:   Number Field in theta with defining polynomial x^6 + 40*x^3 + 1372\n  Defn: theta0 |--> 1/84*theta^4 + 13/42*theta)\n```\nHere a subfield is generated by a single element.  There is no definition for a subfield generated by a list of elements; `K.subfield([(theta^4 + 26*theta)/84])` leads to a long, unhelpful error message.  In contrast, subgroups of abelian groups and subspaces of vector spaces **must** be generated by a list.  \n\nSurely `X.subobject([x,y,z])` should be standard, with `X.subobject(x)`equivalent to `X.subobject([x])`.  Ideals of rings work well in this respect:\n\n```\nsage: R.<r> = PolynomialRing(QQ)\nsage: R.ideal([r^2, r^3])\nPrincipal ideal (r^2) of Univariate Polynomial Ring in r over Rational Field\nsage: R.ideal(r^2 - 1)\nPrincipal ideal (r^2 - 1) of Univariate Polynomial Ring in r over Rational Field\nsage: R.ideal([r^2 - 1])\nPrincipal ideal (r^2 - 1) of Univariate Polynomial Ring in r over Rational Field\nsage: R.ideal([r^2 - 1, r - 1])\nPrincipal ideal (r - 1) of Univariate Polynomial Ring in r over Rational Field\n```\nBut\n\n```\nsage: R.ideal([r^2, r - 1])\nPrincipal ideal (1) of Univariate Polynomial Ring in r over Rational Field\nsage: R == R.ideal([r^2, r - 1])\nFalse\n```\nand at the moment there doesn't seem to be any subring construction, while `is_subring` restricts itself to 'natural' inclusions.\n\nOne thing that appears to be missing from most (all?) the algebraic objects is intersection of subobjects.\n\nProbably what is needed to to rethink, and eventually, rewrite all the standard algebraic categories in a consistent and standard way.",
    "created_at": "2008-05-12T08:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6171",
    "user": "https://github.com/sagetrac-fwclarke"
}
```

<a id='comment:12'>Comment 12:</a>
I am beginning to think the problem is rather deeper.  There are many inconsistencies in the way that algebraic objects are implemented.  It should be possible for a user to learn the basic syntax for, say, rings, and then adopt most of the basics when working with vector spaces, or abelian groups, etc.

Some examples of inconsistent behaviour follow.

```
sage: R.<r> = PolynomialRing(QQ)
sage: S.<s> = PolynomialRing(QQ)
sage: R == S
False
sage: R.ideal(r^2 - 1) < S
True
```

```
sage: U.<u1, u2> = QQ^2
sage: V.<v1, v2> = QQ^2
sage: U == V
True
sage: W = VectorSpace(QQ, 2)
sage: U == W
True
sage: W.<w1, w2> = VectorSpace(QQ, 2)
---------------------------------------------------------------------------
<type 'exceptions.TypeError'>             Traceback (most recent call last)

/Users/mafwc/<ipython console> in <module>()

<type 'exceptions.TypeError'>: VectorSpace() got an unexpected keyword argument 'names'
```

In my experience of doing calculations (rather than looking at the code) number fields have the best implementation of the algebraic objects which I have encountered .  But even so there are things that could be improved.  For example:

```
sage: K.subfield((theta^4 + 26*theta)/84)

(Number Field in theta0 with defining polynomial x^3 - 2,
 Ring morphism:
  From: Number Field in theta0 with defining polynomial x^3 - 2
  To:   Number Field in theta with defining polynomial x^6 + 40*x^3 + 1372
  Defn: theta0 |--> 1/84*theta^4 + 13/42*theta)
```
Here a subfield is generated by a single element.  There is no definition for a subfield generated by a list of elements; `K.subfield([(theta^4 + 26*theta)/84])` leads to a long, unhelpful error message.  In contrast, subgroups of abelian groups and subspaces of vector spaces **must** be generated by a list.  

Surely `X.subobject([x,y,z])` should be standard, with `X.subobject(x)`equivalent to `X.subobject([x])`.  Ideals of rings work well in this respect:

```
sage: R.<r> = PolynomialRing(QQ)
sage: R.ideal([r^2, r^3])
Principal ideal (r^2) of Univariate Polynomial Ring in r over Rational Field
sage: R.ideal(r^2 - 1)
Principal ideal (r^2 - 1) of Univariate Polynomial Ring in r over Rational Field
sage: R.ideal([r^2 - 1])
Principal ideal (r^2 - 1) of Univariate Polynomial Ring in r over Rational Field
sage: R.ideal([r^2 - 1, r - 1])
Principal ideal (r - 1) of Univariate Polynomial Ring in r over Rational Field
```
But

```
sage: R.ideal([r^2, r - 1])
Principal ideal (1) of Univariate Polynomial Ring in r over Rational Field
sage: R == R.ideal([r^2, r - 1])
False
```
and at the moment there doesn't seem to be any subring construction, while `is_subring` restricts itself to 'natural' inclusions.

One thing that appears to be missing from most (all?) the algebraic objects is intersection of subobjects.

Probably what is needed to to rethink, and eventually, rewrite all the standard algebraic categories in a consistent and standard way.



---

archive/issue_events_010932.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2008-05-12T08:22:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10932"
}
```



---

archive/issue_events_010933.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2008-05-12T08:22:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10933"
}
```



---

archive/issue_comments_006172.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI agree strongly with Francis on this.  There are serious issues here which cannot be dealt with by treating the problem as a small bug that can be fixed with a small patch.",
    "created_at": "2008-05-12T09:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6172",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'>Comment 13:</a>
I agree strongly with Francis on this.  There are serious issues here which cannot be dealt with by treating the problem as a small bug that can be fixed with a small patch.



---

archive/issue_comments_006173.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nActually, the issue I was treating with these patches was in fact a pretty deep bit of circular logic in the abelian group code. Perhaps we can close this ticket, open another for the division optimization, and move the discussion to sage-devel?",
    "created_at": "2008-05-12T13:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6173",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:14'>Comment 14:</a>
Actually, the issue I was treating with these patches was in fact a pretty deep bit of circular logic in the abelian group code. Perhaps we can close this ticket, open another for the division optimization, and move the discussion to sage-devel?



---

archive/issue_comments_006174.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nJohn,\n\nI've addressed your concerns regarding efficiency. I think that the rest of Francis' complaints are not specific to abelian groups, so I say that this ticket is finished. We should move the rest of his complaints to another ticket. My guess is that in many cases people are implementing `__cmp__` for equality/inequality testing only, which gives adverse results for < and <=. The problem is that `__cmp__` assumes that exactly one of <, ==, or > holds, which isn't true unless the ordering is linear-- in particular this isn't the case in general for subobjects.",
    "created_at": "2008-05-12T19:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6174",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:15'>Comment 15:</a>
John,

I've addressed your concerns regarding efficiency. I think that the rest of Francis' complaints are not specific to abelian groups, so I say that this ticket is finished. We should move the rest of his complaints to another ticket. My guess is that in many cases people are implementing `__cmp__` for equality/inequality testing only, which gives adverse results for < and <=. The problem is that `__cmp__` assumes that exactly one of <, ==, or > holds, which isn't true unless the ordering is linear-- in particular this isn't the case in general for subobjects.



---

archive/issue_events_010934.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2008-05-12T19:17:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "title_is": "G.subgroup([...]) for G an abelian group has at least one lame property",
    "title_was": "[negative review] G.subgroup([...]) for G an abelian group has at least one lame property",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10934"
}
```



---

archive/issue_comments_006175.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOK.  But I haven't time right now to do any testing, so I haven't looked at patches 3 and 4 and haven't tested any of it so you'll need to find someone who has.",
    "created_at": "2008-05-12T19:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6175",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:16'>Comment 16:</a>
OK.  But I haven't time right now to do any testing, so I haven't looked at patches 3 and 4 and haven't tested any of it so you'll need to find someone who has.



---

archive/issue_comments_006176.json:
```json
{
    "body": "Attachment: **[trac1284-flattened.patch.gz](https://github.com/sagemath/sage/files/ticket1284/trac1284-flattened.patch.gz)**",
    "created_at": "2008-05-14T20:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6176",
    "user": "https://github.com/rlmill"
}
```

Attachment: **[trac1284-flattened.patch.gz](https://github.com/sagemath/sage/files/ticket1284/trac1284-flattened.patch.gz)**



---

archive/issue_comments_006177.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSee the thread:\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/9e13b5c63e485f8f",
    "created_at": "2008-05-23T16:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6177",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:17'>Comment 17:</a>
See the thread:

http://groups.google.com/group/sage-devel/browse_thread/thread/9e13b5c63e485f8f



---

archive/issue_comments_006178.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nOn the above thread, it is nearly unanimous that `G<=H` should mean \"Is G a subgroup of H?\". Therefore, I propose we merge the patch as-is, and create a ticket to provide `is_subgroup` functionality.",
    "created_at": "2008-05-25T19:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6178",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:18'>Comment 18:</a>
On the above thread, it is nearly unanimous that `G<=H` should mean "Is G a subgroup of H?". Therefore, I propose we merge the patch as-is, and create a ticket to provide `is_subgroup` functionality.



---

archive/issue_events_010935.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-05-25T19:24:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "milestone_number": null,
    "milestone_title": "sage-3.0.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10935"
}
```



---

archive/issue_events_010936.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-05-25T19:24:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10936"
}
```



---

archive/issue_comments_006179.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI agree with rlm. Could someone review trac1284-flattened.patch? Then we can take it from there with a new ticket.\n\nCheers,\n\nMichael",
    "created_at": "2008-05-25T19:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6179",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:19'>Comment 19:</a>
I agree with rlm. Could someone review trac1284-flattened.patch? Then we can take it from there with a new ticket.

Cheers,

Michael



---

archive/issue_comments_006180.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nSorry about this, but:  we all agreed that H<=G should mean \"H is a subgroup of G\" and have nothing to do with order-comparison.  But you still have H<G meaning such an order-comparison!  As a user I would expect H<G to mean \"H is a proper subgroup of G\" so that (H<=G) == ((H<G) or (H==G)) and (H<G) == ((H<=G) and not (H==G)).\n\nSo I would be happier if < and > were defined this way!",
    "created_at": "2008-05-25T20:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6180",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:20'>Comment 20:</a>
Sorry about this, but:  we all agreed that H<=G should mean "H is a subgroup of G" and have nothing to do with order-comparison.  But you still have H<G meaning such an order-comparison!  As a user I would expect H<G to mean "H is a proper subgroup of G" so that (H<=G) == ((H<G) or (H==G)) and (H<G) == ((H<=G) and not (H==G)).

So I would be happier if < and > were defined this way!



---

archive/issue_comments_006181.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@JohnCremona](#comment%3A20):\n> Sorry about this, but:  we all agreed that H<=G should mean \"H is a subgroup of G\" and have nothing to do with order-comparison.  But you still have H<G meaning such an order-comparison!  As a user I would expect H<G to mean \"H is a proper subgroup of G\" so that (H<=G) == ((H<G) or (H==G)) and (H<G) == ((H<=G) and not (H==G)).\n> \n> So I would be happier if < and > were defined this way!\n\nLook more carefully: this is exactly what they *are* defined to do.",
    "created_at": "2008-05-25T20:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6181",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@JohnCremona](#comment%3A20):
> Sorry about this, but:  we all agreed that H<=G should mean "H is a subgroup of G" and have nothing to do with order-comparison.  But you still have H<G meaning such an order-comparison!  As a user I would expect H<G to mean "H is a proper subgroup of G" so that (H<=G) == ((H<G) or (H==G)) and (H<G) == ((H<=G) and not (H==G)).
> 
> So I would be happier if < and > were defined this way!

Look more carefully: this is exactly what they *are* defined to do.



---

archive/issue_comments_006182.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nApologies -- you are right of course.  It's a bit late in the evening where I live.\nI'll test applying the patch to 3.0.2 on Monday, but the code does appear to do what we agree it should.",
    "created_at": "2008-05-25T21:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6182",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:22'>Comment 22:</a>
Apologies -- you are right of course.  It's a bit late in the evening where I live.
I'll test applying the patch to 3.0.2 on Monday, but the code does appear to do what we agree it should.



---

archive/issue_events_010937.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-05-26T10:28:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10937"
}
```



---

archive/issue_events_010938.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-05-26T10:28:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10938"
}
```



---

archive/issue_comments_006183.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThe immediate problem with abelian groups has been solved, and all the group-related problems posted with this patch are dealt with by this patch, which I think can go ahead.\n\nThe wider problems raised by Frances are not touched by this and should somehow be preserved in a new patch.  I also believe that the whole f.g. abelian groups implementation would benefit from a rewrite using ultra-efficient matrix operations (HNF and SNF) to do everything;  but that would be a serious undertaking, and talk is cheap...",
    "created_at": "2008-05-26T10:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6183",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:23'>Comment 23:</a>
The immediate problem with abelian groups has been solved, and all the group-related problems posted with this patch are dealt with by this patch, which I think can go ahead.

The wider problems raised by Frances are not touched by this and should somehow be preserved in a new patch.  I also believe that the whole f.g. abelian groups implementation would benefit from a rewrite using ultra-efficient matrix operations (HNF and SNF) to do everything;  but that would be a serious undertaking, and talk is cheap...



---

archive/issue_events_010939.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-05-26T16:42:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10939"
}
```



---

archive/issue_events_010940.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-05-26T16:42:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1284#event-10940"
}
```



---

archive/issue_comments_006184.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nMerged in Sage 3.0.3.alpha0. Somebody please open up a follow up ticket with the issues Frances described. \n\nCheers,\n\nMichael",
    "created_at": "2008-05-26T16:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1284#issuecomment-6184",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:24'>Comment 24:</a>
Merged in Sage 3.0.3.alpha0. Somebody please open up a follow up ticket with the issues Frances described. 

Cheers,

Michael
