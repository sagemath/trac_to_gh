# Issue 1793: [with positive review] Hilbert series, Hilbert polynomial, Laurent series expansion

archive/issues_001793.json:
```json
{
    "body": "The attached bundle implements everything to make the following work:\n\n```\nsage: P.<x11,x12,x13,x14,x21,x22,x23,x24,x31,x32,x33,x34,x41,x42,x43,x44> = PolynomialRing(QQ,order='degrevlex')\nsage: I = Ideal([\n    x11^2 + x12*x21 + x13*x31 + x14*x41,   x11*x12 + x12*x22 + x13*x32 + x14*x42,\n    x11*x13 + x12*x23 + x13*x33 + x14*x43, x11*x14 + x12*x24 + x13*x34 + x14*x44,\n    x11*x21 + x21*x22 + x23*x31 + x24*x41, x12*x21 + x22^2 + x23*x32 + x24*x42,\n    x13*x21 + x22*x23 + x23*x33 + x24*x43, x14*x21 + x22*x24 + x23*x34 + x24*x44,\n    x11*x31 + x21*x32 + x31*x33 + x34*x41, x12*x31 + x22*x32 + x32*x33 + x34*x42,\n    x13*x31 + x23*x32 + x33^2 + x34*x43,   x14*x31 + x24*x32 + x33*x34 + x34*x44,\n    x11*x41 + x21*x42 + x31*x43 + x41*x44, x12*x41 + x22*x42 + x32*x43 + x42*x44,\n    x13*x41 + x23*x42 + x33*x43 + x43*x44, x14*x41 + x24*x42 + x34*x43 + x44^2\n    ])\nsage: S = I.hilbert_series(); S\n(t^12 - 7*t^11 + 20*t^10 - 28*t^9 + 14*t^8 + 15*t^7 - 20*t^6 + 19*t^5 - 22*t^4 + 7*t^3 + 20*t^2 + 8*t + 1)/(t^8 - 8*t^7 + 28*t^6 - 56*t^5 + 70*t^4 - 56*t^3 + 28*t^2 - 8*t + 1)\n\nsage: H = I.hilbert_polynomial(); H\n1/180*t^7 + 7/90*t^6 + 293/360*t^5 + 61/36*t^4 + 1553/360*t^3 + 851/180*t^2 + 101/30*t + 1\n\nsage: L.<u> = LaurentSeriesRing(ZZ)\nsage: L(S)\n1 + 16*u + 120*u^2 + 575*u^3 + 2044*u^4 + 5927*u^5 + 14832*u^6 + 33209*u^7 + 68189*u^8 + 130642*u^9 + 236488*u^10 + 408288*u^11 + 677143*u^12 + 1084929*u^13 + 1686896*u^14 + 2554659*u^15 + 3779609*u^16 + 5476772*u^17 + 7789144*u^18 + 10892530*u^19 + O(u^20)\n\nsage: [H(n) for n in range(20)] # matches above for n>=5\n[1, 16, 120, 574, 2043, 5927, 14832, 33209, 68189, 130642]\n```\n\nHowever, it needs careful review especially in the `LaurentSeries` department because I am not very experienced there.\n\n**Assignee:** @malb\n\n**CC:**  @williamstein mabshoff\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/1793\n\n",
    "closed_at": "2008-02-15T00:29:50Z",
    "created_at": "2008-01-16T14:28:48Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.2",
    "title": "[with positive review] Hilbert series, Hilbert polynomial, Laurent series expansion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1793",
    "user": "https://github.com/malb"
}
```
The attached bundle implements everything to make the following work:

```
sage: P.<x11,x12,x13,x14,x21,x22,x23,x24,x31,x32,x33,x34,x41,x42,x43,x44> = PolynomialRing(QQ,order='degrevlex')
sage: I = Ideal([
    x11^2 + x12*x21 + x13*x31 + x14*x41,   x11*x12 + x12*x22 + x13*x32 + x14*x42,
    x11*x13 + x12*x23 + x13*x33 + x14*x43, x11*x14 + x12*x24 + x13*x34 + x14*x44,
    x11*x21 + x21*x22 + x23*x31 + x24*x41, x12*x21 + x22^2 + x23*x32 + x24*x42,
    x13*x21 + x22*x23 + x23*x33 + x24*x43, x14*x21 + x22*x24 + x23*x34 + x24*x44,
    x11*x31 + x21*x32 + x31*x33 + x34*x41, x12*x31 + x22*x32 + x32*x33 + x34*x42,
    x13*x31 + x23*x32 + x33^2 + x34*x43,   x14*x31 + x24*x32 + x33*x34 + x34*x44,
    x11*x41 + x21*x42 + x31*x43 + x41*x44, x12*x41 + x22*x42 + x32*x43 + x42*x44,
    x13*x41 + x23*x42 + x33*x43 + x43*x44, x14*x41 + x24*x42 + x34*x43 + x44^2
    ])
sage: S = I.hilbert_series(); S
(t^12 - 7*t^11 + 20*t^10 - 28*t^9 + 14*t^8 + 15*t^7 - 20*t^6 + 19*t^5 - 22*t^4 + 7*t^3 + 20*t^2 + 8*t + 1)/(t^8 - 8*t^7 + 28*t^6 - 56*t^5 + 70*t^4 - 56*t^3 + 28*t^2 - 8*t + 1)

sage: H = I.hilbert_polynomial(); H
1/180*t^7 + 7/90*t^6 + 293/360*t^5 + 61/36*t^4 + 1553/360*t^3 + 851/180*t^2 + 101/30*t + 1

sage: L.<u> = LaurentSeriesRing(ZZ)
sage: L(S)
1 + 16*u + 120*u^2 + 575*u^3 + 2044*u^4 + 5927*u^5 + 14832*u^6 + 33209*u^7 + 68189*u^8 + 130642*u^9 + 236488*u^10 + 408288*u^11 + 677143*u^12 + 1084929*u^13 + 1686896*u^14 + 2554659*u^15 + 3779609*u^16 + 5476772*u^17 + 7789144*u^18 + 10892530*u^19 + O(u^20)

sage: [H(n) for n in range(20)] # matches above for n>=5
[1, 16, 120, 574, 2043, 5927, 14832, 33209, 68189, 130642]
```

However, it needs careful review especially in the `LaurentSeries` department because I am not very experienced there.

**Assignee:** @malb

**CC:**  @williamstein mabshoff

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/1793





---

archive/issue_comments_012265.json:
```json
{
    "body": "<a id='comment:1'></a>\nA relevant [sage-support] thread is here\n\nhttp://groups.google.com/group/sage-support/browse_thread/thread/db22a8fa713b8da2\n\nAlso, the bundle contains some old patches as well, if that presents a problem, I'll provide clean patches instead.",
    "created_at": "2008-01-16T14:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12265",
    "user": "https://github.com/malb"
}
```

<a id='comment:1'></a>
A relevant [sage-support] thread is here

http://groups.google.com/group/sage-support/browse_thread/thread/db22a8fa713b8da2

Also, the bundle contains some old patches as well, if that presents a problem, I'll provide clean patches instead.



---

archive/issue_comments_012266.json:
```json
{
    "body": "<a id='comment:2'></a>\nmabshoff wrote at #1756:\n> Singular's Hilbert series has overflow issues in certain situations. Let me digg \n> out some email about a test case and report this to the Singular team.\n",
    "created_at": "2008-01-16T15:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12266",
    "user": "https://github.com/malb"
}
```

<a id='comment:2'></a>
mabshoff wrote at #1756:
> Singular's Hilbert series has overflow issues in certain situations. Let me digg 
> out some email about a test case and report this to the Singular team.




---

archive/issue_comments_012267.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2008-01-16T15:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12267",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to assigned.



---

archive/issue_events_005266.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "rename": {
        "from": "[needs careful review] Hilbert series, Hilbert polynomial, Laurent series expansion",
        "to": "Hilbert series, Hilbert polynomial, Laurent series expansion"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1793#event-5266"
}
```



---

archive/issue_comments_012268.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-01-16T19:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12268",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_012269.json:
```json
{
    "body": "<a id='comment:3'></a>\n`hilbert2.hg` contains the corrections William suggested on IRC and replaces `hilbert.hg`.",
    "created_at": "2008-01-16T19:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12269",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>
`hilbert2.hg` contains the corrections William suggested on IRC and replaces `hilbert.hg`.



---

archive/issue_events_005267.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "rename": {
        "from": "Hilbert series, Hilbert polynomial, Laurent series expansion",
        "to": "[with partial positive review] Hilbert series, Hilbert polynomial, Laurent series expansion"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1793#event-5267"
}
```



---

archive/issue_comments_012270.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe patches from hilbery2.hg with ids a692e0df3534, 0b92c1071492, 6f3a99024ee7 should be applied.\n\nI didn't look at the other patches.",
    "created_at": "2008-01-20T06:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12270",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>
The patches from hilbery2.hg with ids a692e0df3534, 0b92c1071492, 6f3a99024ee7 should be applied.

I didn't look at the other patches.



---

archive/issue_events_005268.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "rename": {
        "from": "[with partial positive review] Hilbert series, Hilbert polynomial, Laurent series expansion",
        "to": "Hilbert series, Hilbert polynomial, Laurent series expansion"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1793#event-5268"
}
```



---

archive/issue_comments_012271.json:
```json
{
    "body": "<a id='comment:5'></a>\nBecause the bundle contained many irrelevant patches I tried to provide clean patches instead and deleted every copy of my patches on the way (and all attachments to avoid confusion for the release maintainer). Me stupid. I'll provide new patches as soon as I have re-implemented the functionality.",
    "created_at": "2008-01-20T14:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12271",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'></a>
Because the bundle contained many irrelevant patches I tried to provide clean patches instead and deleted every copy of my patches on the way (and all attachments to avoid confusion for the release maintainer). Me stupid. I'll provide new patches as soon as I have re-implemented the functionality.



---

archive/issue_comments_012272.json:
```json
{
    "body": "Attachment [trac_1793_laurent.patch](tarball://root/attachments/some-uuid/ticket1793/trac_1793_laurent.patch) by @malb created at 2008-01-20 16:47:19",
    "created_at": "2008-01-20T16:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12272",
    "user": "https://github.com/malb"
}
```

Attachment [trac_1793_laurent.patch](tarball://root/attachments/some-uuid/ticket1793/trac_1793_laurent.patch) by @malb created at 2008-01-20 16:47:19



---

archive/issue_comments_012273.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-01-20T16:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12273",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_012274.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe attached files `trac_1793_hilbert.patch` and `trac_1793_laurent.patch` re-implement the desired functionality and need review.",
    "created_at": "2008-01-20T16:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12274",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
The attached files `trac_1793_hilbert.patch` and `trac_1793_laurent.patch` re-implement the desired functionality and need review.



---

archive/issue_events_005269.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "rename": {
        "from": "Hilbert series, Hilbert polynomial, Laurent series expansion",
        "to": "[with positive review] Hilbert series, Hilbert polynomial, Laurent series expansion"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1793#event-5269"
}
```



---

archive/issue_comments_012275.json:
```json
{
    "body": "<a id='comment:7'></a>\nI say apply both patches.\n\nI think that the Laurent series patch touches coercion code that will be completely rewritten soon, so I'm not worried that it's not particularily general.\n\nThere is an unclear comment in the hilbert_polynomial docstring.  The comment could be removed.  From IRC:\n\n```\nncalexan: malb: let's took 1793.\n[3:12pm] ncalexan: The docstring to hilbert_polynomial says, ' This $d$ is called the index of regularity of\n[3:12pm] ncalexan:  1116        $I$. '\n[3:12pm] ncalexan: Which $d$?  The minimal one?\n[3:13pm] malb: yes\n[3:13pm] malb:  for all but finitely many positive  integers $d$\n[3:14pm] malb: that encodes minimal for me?\n[3:15pm] ncalexan: malb: that is unclear to me.  Is there a function to return the index of regularity?\n[3:15pm] malb: no\n[3:15pm] ncalexan: If not, I say drop the remark.  Or clarify it.  Why is it there?\n[3:15pm] ncalexan: (The remark about $d$ being the index)\n[3:15pm] malb: because there should be such a function\n[3:15pm] malb: but I can drop it\n[3:16pm] ncalexan: malb: is that easy to determine?  'cuz it would be useful :)\n```",
    "created_at": "2008-02-14T23:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12275",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:7'></a>
I say apply both patches.

I think that the Laurent series patch touches coercion code that will be completely rewritten soon, so I'm not worried that it's not particularily general.

There is an unclear comment in the hilbert_polynomial docstring.  The comment could be removed.  From IRC:

```
ncalexan: malb: let's took 1793.
[3:12pm] ncalexan: The docstring to hilbert_polynomial says, ' This $d$ is called the index of regularity of
[3:12pm] ncalexan:  1116        $I$. '
[3:12pm] ncalexan: Which $d$?  The minimal one?
[3:13pm] malb: yes
[3:13pm] malb:  for all but finitely many positive  integers $d$
[3:14pm] malb: that encodes minimal for me?
[3:15pm] ncalexan: malb: that is unclear to me.  Is there a function to return the index of regularity?
[3:15pm] malb: no
[3:15pm] ncalexan: If not, I say drop the remark.  Or clarify it.  Why is it there?
[3:15pm] ncalexan: (The remark about $d$ being the index)
[3:15pm] malb: because there should be such a function
[3:15pm] malb: but I can drop it
[3:16pm] ncalexan: malb: is that easy to determine?  'cuz it would be useful :)
```



---

archive/issue_comments_012276.json:
```json
{
    "body": "Attachment [trac_1793_review.patch](tarball://root/attachments/some-uuid/ticket1793/trac_1793_review.patch) by @malb created at 2008-02-14 23:27:13\n\npatch removes remark about index of regularity",
    "created_at": "2008-02-14T23:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12276",
    "user": "https://github.com/malb"
}
```

Attachment [trac_1793_review.patch](tarball://root/attachments/some-uuid/ticket1793/trac_1793_review.patch) by @malb created at 2008-02-14 23:27:13

patch removes remark about index of regularity



---

archive/issue_comments_012277.json:
```json
{
    "body": "<a id='comment:8'></a>\nMerged all three patches in Sage 2.10.2.alpha0",
    "created_at": "2008-02-15T00:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12277",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
Merged all three patches in Sage 2.10.2.alpha0



---

archive/issue_events_005270.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-02-15T00:29:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1793#event-5270"
}
```



---

archive/issue_comments_012278.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2008-02-15T00:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1793#issuecomment-12278",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Resolution:** fixed
