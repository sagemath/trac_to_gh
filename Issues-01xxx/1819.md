# Issue 1819: move crypto.mq.MPolynomialSystem somewhere else

archive/issues_001819.json:
```json
{
    "assignees": [],
    "body": "`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n\n**Depends on #10600**\n\nAssignee: **@malb**\n\nCC:  sbulygin mhampton\n\nAuthor: **Martin Albrecht**\n\nReviewer: **Volker Braun**\n\nMerged: **sage-4.7.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/1819_\n\n",
    "closed_at": "2011-03-08T21:45:01Z",
    "created_at": "2008-01-18T00:29:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "move crypto.mq.MPolynomialSystem somewhere else",
    "type": "issue",
    "updated_at": "2011-03-08T21:45:01Z",
    "url": "https://github.com/sagemath/sage/issues/1819",
    "user": "https://github.com/malb"
}
```
`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.

**Depends on #10600**

Assignee: **@malb**

CC:  sbulygin mhampton

Author: **Martin Albrecht**

Reviewer: **Volker Braun**

Merged: **sage-4.7.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/1819_





---

archive/issue_events_015748.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-01-18T00:29:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15748"
}
```



---

archive/issue_events_015749.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-01-18T00:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15749"
}
```



---

archive/issue_events_015750.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-01-18T00:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15750"
}
```



---

archive/issue_events_015751.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2008-01-18T00:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15751"
}
```



---

archive/issue_comments_008843.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Though it is motivated by cryptography it is not specific to it, maybe move it to `sage.rings.polynomial` after all ideals are there as well?\n+`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n``````\n",
    "created_at": "2011-01-13T15:50:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8843",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Though it is motivated by cryptography it is not specific to it, maybe move it to `sage.rings.polynomial` after all ideals are there as well?
+`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.
``````




---

archive/issue_comments_008844.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n `mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n+\n+**depends** #10600\n``````\n",
    "created_at": "2011-01-13T17:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8844",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 `mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.
+
+**depends** #10600
``````




---

archive/issue_events_015752.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-01-13T17:14:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15752"
}
```



---

archive/issue_comments_008845.json:
```json
{
    "body": "Author: **Martin Albrecht**",
    "created_at": "2011-01-13T17:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8845",
    "user": "https://github.com/malb"
}
```

Author: **Martin Albrecht**



---

archive/issue_comments_008846.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n+`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n \n **depends** #10600\n``````\n",
    "created_at": "2011-01-13T17:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8846",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_system` and used as a special case of `Sequence` if the members are all multivariate polynomials.
+`mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.
 
 **depends** #10600
``````




---

archive/issue_comments_008847.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThere are a few minor doctest failures:\n\n```\nsage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 3 doctests failed\nsage -t  -long -force_lib devel/sage/sage/rings/ideal.py # 1 doctests failed\nsage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_sequence.py # 2 doctests failed\nsage -t  -long -force_lib devel/sage/sage/tests/cmdline.py # 1 doctests failed\n```",
    "created_at": "2011-01-13T21:10:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8847",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'>Comment 5:</a>
There are a few minor doctest failures:

```
sage -t  -long -force_lib devel/sage/sage/rings/residue_field.pyx # 3 doctests failed
sage -t  -long -force_lib devel/sage/sage/rings/ideal.py # 1 doctests failed
sage -t  -long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_sequence.py # 2 doctests failed
sage -t  -long -force_lib devel/sage/sage/tests/cmdline.py # 1 doctests failed
```



---

archive/issue_comments_008848.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThe attached patch takes care of those doctest failures (except for the cmdline one which is not due to this patch)",
    "created_at": "2011-01-14T14:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8848",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'>Comment 6:</a>
The attached patch takes care of those doctest failures (except for the cmdline one which is not due to this patch)



---

archive/issue_comments_008849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n `mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.\n \n-**depends** #10600\n+**Depends on #10600**\n``````\n",
    "created_at": "2011-01-14T14:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8849",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 `mq.MPolynomialSystem` is more general than its position in the tree suggests. I should be moved to `sage.rings.polynomial.multi_polynomial_sequence` and used as a special case of `Sequence` if the members are all multivariate polynomials.
 
-**depends** #10600
+**Depends on #10600**
``````




---

archive/issue_comments_008850.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nHi, can one of you two take a look at this patch? Cheers.",
    "created_at": "2011-01-22T14:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8850",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'>Comment 8:</a>
Hi, can one of you two take a look at this patch? Cheers.



---

archive/issue_comments_008851.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBtw. patchbot reports \"Apply failed\" because the patch is for 4.6.2.alpha4 instead of 4.6.1.",
    "created_at": "2011-02-18T14:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8851",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'>Comment 9:</a>
Btw. patchbot reports "Apply failed" because the patch is for 4.6.2.alpha4 instead of 4.6.1.



---

archive/issue_comments_008852.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThe whole rename looks reasonable to me.\n\nHaving said that, I don't understand why we need both `MPolynomialIdeal` and `PolynomialSequence`. It seems to be that both are essentially containers for polynomials in a common ring. Maybe the methods of `PolynomialSequence` could just be merged with the ideal code? Do you have any thoughts about that?",
    "created_at": "2011-02-26T17:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8852",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'>Comment 10:</a>
The whole rename looks reasonable to me.

Having said that, I don't understand why we need both `MPolynomialIdeal` and `PolynomialSequence`. It seems to be that both are essentially containers for polynomials in a common ring. Maybe the methods of `PolynomialSequence` could just be merged with the ideal code? Do you have any thoughts about that?



---

archive/issue_comments_008853.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@vbraun](#comment%3A10):\n> Having said that, I don't understand why we need both `MPolynomialIdeal` and \n> `PolynomialSequence`. It seems to be that both are essentially containers for \n> polynomials in a common ring. Maybe the methods of `PolynomialSequence` could just\n> be merged with the ideal code? Do you have any thoughts about that?\n\nI disagree with merging the two. Ideal are not the same as sequences of polynomials: ideals may be infinite, but our polynomial sequences are always finite. Furthermore, some methods don't make sense on ideals but do make sense for sequences of polynomials such as interreduction and weil restriction. That we have those methods on ideals now is not proper, I'd say. Another example: set operations on ideals are different from set operations on polynomial sequences.",
    "created_at": "2011-02-26T17:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8853",
    "user": "https://github.com/malb"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@vbraun](#comment%3A10):
> Having said that, I don't understand why we need both `MPolynomialIdeal` and 
> `PolynomialSequence`. It seems to be that both are essentially containers for 
> polynomials in a common ring. Maybe the methods of `PolynomialSequence` could just
> be merged with the ideal code? Do you have any thoughts about that?

I disagree with merging the two. Ideal are not the same as sequences of polynomials: ideals may be infinite, but our polynomial sequences are always finite. Furthermore, some methods don't make sense on ideals but do make sense for sequences of polynomials such as interreduction and weil restriction. That we have those methods on ideals now is not proper, I'd say. Another example: set operations on ideals are different from set operations on polynomial sequences.



---

archive/issue_comments_008854.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nMathematically, they are of course not the same. But as far as the implementation goes, both are lists of polynomials with some methods attached. I don't understand your comment about finiteness, you can't generate a non-finitely generated ideal in Sage, nor could you construct the requisite infinite polynomial ring to evade Hilberts basis theorem. Moreover, I don't understand your comment about the `interreduced_basis` method in the ideal class. Where else but as a method of the ideal class should we define this functionality in OOP?",
    "created_at": "2011-02-26T17:39:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8854",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'>Comment 12:</a>
Mathematically, they are of course not the same. But as far as the implementation goes, both are lists of polynomials with some methods attached. I don't understand your comment about finiteness, you can't generate a non-finitely generated ideal in Sage, nor could you construct the requisite infinite polynomial ring to evade Hilberts basis theorem. Moreover, I don't understand your comment about the `interreduced_basis` method in the ideal class. Where else but as a method of the ideal class should we define this functionality in OOP?



---

archive/issue_comments_008855.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@vbraun](#comment%3A12):\n> Mathematically, they are of course not the same. But as far as the implementation goes, both are lists of polynomials with some methods attached. I don't understand your comment about finiteness, you can't generate a non-finitely generated ideal in Sage, nor could you construct the requisite infinite polynomial ring to evade Hilberts basis theorem. Moreover, I don't understand your comment about the `interreduced_basis` method in the ideal class. Where else but as a method of the ideal class should we define this functionality in OOP?\n\nI meant infinite but finitely generated which is for example relevant for set operations on them. Another example is reduction: reduction modulo the ideal is different from reduction modulo a list of polynomials. The method `interreduced_basis` assumes a particular basis for the ideal, i.e. violates the distinction between ideal and a list of polynomials. I'd say we should aim to have methods on ideals deal with ideals instead of the particular basis the user chose when constructing it.",
    "created_at": "2011-02-26T18:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8855",
    "user": "https://github.com/malb"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@vbraun](#comment%3A12):
> Mathematically, they are of course not the same. But as far as the implementation goes, both are lists of polynomials with some methods attached. I don't understand your comment about finiteness, you can't generate a non-finitely generated ideal in Sage, nor could you construct the requisite infinite polynomial ring to evade Hilberts basis theorem. Moreover, I don't understand your comment about the `interreduced_basis` method in the ideal class. Where else but as a method of the ideal class should we define this functionality in OOP?

I meant infinite but finitely generated which is for example relevant for set operations on them. Another example is reduction: reduction modulo the ideal is different from reduction modulo a list of polynomials. The method `interreduced_basis` assumes a particular basis for the ideal, i.e. violates the distinction between ideal and a list of polynomials. I'd say we should aim to have methods on ideals deal with ideals instead of the particular basis the user chose when constructing it.



---

archive/issue_comments_008856.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nIn principle, it would be nice if the ideal class could represent some basis-free abstract notion of ideal. In practice, this is not possible as all non-trivial computations are exponential complexity due to the need for Groebner bases. Even worse, the Groebner basis computation often depends on a judiciously chosen term ordering which cannot be automated. This is why all computer algebra programs that I am aware of treat ideals as sequences of polynomials, and not as ideals in the mathematical sense. Barring any breakthrough in algebra it is not feasible to do otherwise.",
    "created_at": "2011-02-26T18:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8856",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'>Comment 14:</a>
In principle, it would be nice if the ideal class could represent some basis-free abstract notion of ideal. In practice, this is not possible as all non-trivial computations are exponential complexity due to the need for Groebner bases. Even worse, the Groebner basis computation often depends on a judiciously chosen term ordering which cannot be automated. This is why all computer algebra programs that I am aware of treat ideals as sequences of polynomials, and not as ideals in the mathematical sense. Barring any breakthrough in algebra it is not feasible to do otherwise.



---

archive/issue_comments_008857.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI should have mentioned that the decision to treat ideals as such abstract basis-free objects was made before I joined the project, probably inherited from Magma. For example, cf. the intro of http://sagemath.org/doc/reference/sage/crypto/mq/mpolynomialsystem.html (which I admit to have written, though). Thus, many methods of the multivariate polynomial ideal class do compute a Gr\u00f6bner basis behind the scenes. Btw. since ideals know their ring and rings contain the term ordering in Sage, we can compute GBs without any additionally provided information.",
    "created_at": "2011-02-26T19:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8857",
    "user": "https://github.com/malb"
}
```

<a id='comment:15'>Comment 15:</a>
I should have mentioned that the decision to treat ideals as such abstract basis-free objects was made before I joined the project, probably inherited from Magma. For example, cf. the intro of http://sagemath.org/doc/reference/sage/crypto/mq/mpolynomialsystem.html (which I admit to have written, though). Thus, many methods of the multivariate polynomial ideal class do compute a Gröbner basis behind the scenes. Btw. since ideals know their ring and rings contain the term ordering in Sage, we can compute GBs without any additionally provided information.



---

archive/issue_comments_008858.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI don't see that anywhere in the `MPolynomialIdeal` class. Correct me if I'm wrong, but the chosen generators and their order is immutable. Even when computing a Groebner basis, the generators are not replaced by this much more useful basis. On the other hand, there are methods like `basis_is_groebner()` which are obviously basis-dependent. It seems to me that Sage implements ideals very much as an immutable sequence of polynomials with some methods attached. The individual methods do, of course, need Groebner bases but they never change the underlying sequence of polynomials.\n\nI am aware that the ideals implicitly contain the term order, though I found that a somewhat mixed blessing in #10708.",
    "created_at": "2011-02-26T19:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8858",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'>Comment 16:</a>
I don't see that anywhere in the `MPolynomialIdeal` class. Correct me if I'm wrong, but the chosen generators and their order is immutable. Even when computing a Groebner basis, the generators are not replaced by this much more useful basis. On the other hand, there are methods like `basis_is_groebner()` which are obviously basis-dependent. It seems to me that Sage implements ideals very much as an immutable sequence of polynomials with some methods attached. The individual methods do, of course, need Groebner bases but they never change the underlying sequence of polynomials.

I am aware that the ideals implicitly contain the term order, though I found that a somewhat mixed blessing in #10708.



---

archive/issue_comments_008859.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@vbraun](#comment%3A16):\n> I don't see that anywhere in the `MPolynomialIdeal` class. Correct me if I'm wrong,\n> but the chosen generators and their order is immutable. \n\nYep.\n\n> Even when computing a Groebner basis, the generators are not replaced by this much \n> more useful basis. \n\nBut the GB is cached and used for \"interesting\" operations.\n\n> On the other hand, there are methods like `basis_is_groebner()` which are obviously\n> basis-dependent. \n\nThis was the compromise reached to (a) keep the notion that ideals are different objects than their generators and to (b) still allow to query some information about the basis. We should have separated stuff back then perhaps. In any case, it was this method's name which sparked the debate we're having between William and myself. \n\n> It seems to me that Sage implements ideals very much as an immutable sequence of \n> polynomials with some methods attached. \n\nI'd say: it attempts to present a view on ideals which abstracts away chosen bases but with varying success.\n\n> The individual methods do, of course, need Groebner bases but they never change the > underlying sequence of polynomials.\n\nBut e.g. `intersection()` and `reduce()` actually use the GB and not the provided basis, they are methods on the ideal and not on the generating set. Some other methods are less clear such as `basis_is_groebner()` and `interreduced_basis()`. These could perhaps be moved to `PolynomialSequence`.\n\n> I am aware that the ideals implicitly contain the term order, though I found that a somewhat mixed blessing in #10708.\n\nI wouldn't say this is because of the containment of term orderings but because of lack of care dealing with them?",
    "created_at": "2011-02-26T20:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8859",
    "user": "https://github.com/malb"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@vbraun](#comment%3A16):
> I don't see that anywhere in the `MPolynomialIdeal` class. Correct me if I'm wrong,
> but the chosen generators and their order is immutable. 

Yep.

> Even when computing a Groebner basis, the generators are not replaced by this much 
> more useful basis. 

But the GB is cached and used for "interesting" operations.

> On the other hand, there are methods like `basis_is_groebner()` which are obviously
> basis-dependent. 

This was the compromise reached to (a) keep the notion that ideals are different objects than their generators and to (b) still allow to query some information about the basis. We should have separated stuff back then perhaps. In any case, it was this method's name which sparked the debate we're having between William and myself. 

> It seems to me that Sage implements ideals very much as an immutable sequence of 
> polynomials with some methods attached. 

I'd say: it attempts to present a view on ideals which abstracts away chosen bases but with varying success.

> The individual methods do, of course, need Groebner bases but they never change the > underlying sequence of polynomials.

But e.g. `intersection()` and `reduce()` actually use the GB and not the provided basis, they are methods on the ideal and not on the generating set. Some other methods are less clear such as `basis_is_groebner()` and `interreduced_basis()`. These could perhaps be moved to `PolynomialSequence`.

> I am aware that the ideals implicitly contain the term order, though I found that a somewhat mixed blessing in #10708.

I wouldn't say this is because of the containment of term orderings but because of lack of care dealing with them?



---

archive/issue_comments_008860.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@malb](#comment%3A17):\nit was this method's name which sparked the debate we're having between William and myself. \n\nWe are having? Where? Or you were having at one point (and if yes, did you decide anything)?",
    "created_at": "2011-02-26T20:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8860",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@malb](#comment%3A17):
it was this method's name which sparked the debate we're having between William and myself. 

We are having? Where? Or you were having at one point (and if yes, did you decide anything)?



---

archive/issue_comments_008861.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@vbraun](#comment%3A18):\n> Replying to [@malb](#comment%3A17):\n> it was this method's name which sparked the debate we're having between William and myself. \n> \n> We are having? Where? Or you were having at one point (and if yes, did you decide anything)?\n\nSorry, my English failed me: William and I had a debate about whether ideal class == list of polynomials a few years back (October 2006). It was essentially about the same issue which we are discussion here now (I realised while double checking that it wasn't about `basis_is_groebner()` but about the return type of `groebner_basis()`) The decision was: ideals are objects in their own right in Sage and not lists of polynomials.\n\nShould we move this discussion to [sage-devel]?",
    "created_at": "2011-02-26T21:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8861",
    "user": "https://github.com/malb"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@vbraun](#comment%3A18):
> Replying to [@malb](#comment%3A17):
> it was this method's name which sparked the debate we're having between William and myself. 
> 
> We are having? Where? Or you were having at one point (and if yes, did you decide anything)?

Sorry, my English failed me: William and I had a debate about whether ideal class == list of polynomials a few years back (October 2006). It was essentially about the same issue which we are discussion here now (I realised while double checking that it wasn't about `basis_is_groebner()` but about the return type of `groebner_basis()`) The decision was: ideals are objects in their own right in Sage and not lists of polynomials.

Should we move this discussion to [sage-devel]?



---

archive/issue_comments_008862.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nNow that I see some of the bigger picture I'm happy with distinguishing ideals and polynomial sequences in the way you are implementing. I don't quite get how the multiple parts of the polynomial sequence are supposed to fit into this. The documentation should either stress that this is optional (and that, by default, there is only a unique part) or separate this functionality into a derived class. \n\nSome other suggestions, though that could easily be postponed to followup tickets:\n* Document the relationship between ideals and polynomial sequences in the ideals module.\n* An alias `MPolynomialIdeal.basis` = `MPolynomialIdeal.gens`\n* Move `MPolynomialIdeal.basis_is_groebner` to `PolynomialSequence.is_groebner`\n* Move `MPolynomialIdeal.interreduced_basis` to `PolynomialSequence.interreduce` and make it return a `PolynomialSequence` instead of a list.\n* there shouldn't be a `PolynomialSequence.groebner_basis`\n* Perhaps move `MPolynomialIdeal.weil_restriction` since you say that it depends on the presentation.",
    "created_at": "2011-02-26T21:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8862",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'>Comment 20:</a>
Now that I see some of the bigger picture I'm happy with distinguishing ideals and polynomial sequences in the way you are implementing. I don't quite get how the multiple parts of the polynomial sequence are supposed to fit into this. The documentation should either stress that this is optional (and that, by default, there is only a unique part) or separate this functionality into a derived class. 

Some other suggestions, though that could easily be postponed to followup tickets:
* Document the relationship between ideals and polynomial sequences in the ideals module.
* An alias `MPolynomialIdeal.basis` = `MPolynomialIdeal.gens`
* Move `MPolynomialIdeal.basis_is_groebner` to `PolynomialSequence.is_groebner`
* Move `MPolynomialIdeal.interreduced_basis` to `PolynomialSequence.interreduce` and make it return a `PolynomialSequence` instead of a list.
* there shouldn't be a `PolynomialSequence.groebner_basis`
* Perhaps move `MPolynomialIdeal.weil_restriction` since you say that it depends on the presentation.



---

archive/issue_comments_008863.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@vbraun](#comment%3A20):\n> Now that I see some of the bigger picture I'm happy with distinguishing ideals and polynomial sequences in the way you are implementing. I don't quite get how the multiple parts of the polynomial sequence are supposed to fit into this. The documentation should either stress that this is optional (and that, by default, there is only a unique part)\n\nGood idea.\n\n> Some other suggestions, though that could easily be postponed to followup tickets:\n> * Document the relationship between ideals and polynomial sequences in the ideals module.\n\nDone.\n\n> * An alias `MPolynomialIdeal.basis` = `MPolynomialIdeal.gens`\n> * Move `MPolynomialIdeal.basis_is_groebner` to `PolynomialSequence.is_groebner`\n> * Move `MPolynomialIdeal.interreduced_basis` to `PolynomialSequence.interreduce` and make it return a `PolynomialSequence` instead of a list.\n> * there shouldn't be a `PolynomialSequence.groebner_basis`\n\nThis is now #10856.\n\n> * Perhaps move `MPolynomialIdeal.weil_restriction` since you say that it depends on the presentation.\n\nThinking about it: it's about the variety and thus can stay with the ideals.",
    "created_at": "2011-02-26T22:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8863",
    "user": "https://github.com/malb"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@vbraun](#comment%3A20):
> Now that I see some of the bigger picture I'm happy with distinguishing ideals and polynomial sequences in the way you are implementing. I don't quite get how the multiple parts of the polynomial sequence are supposed to fit into this. The documentation should either stress that this is optional (and that, by default, there is only a unique part)

Good idea.

> Some other suggestions, though that could easily be postponed to followup tickets:
> * Document the relationship between ideals and polynomial sequences in the ideals module.

Done.

> * An alias `MPolynomialIdeal.basis` = `MPolynomialIdeal.gens`
> * Move `MPolynomialIdeal.basis_is_groebner` to `PolynomialSequence.is_groebner`
> * Move `MPolynomialIdeal.interreduced_basis` to `PolynomialSequence.interreduce` and make it return a `PolynomialSequence` instead of a list.
> * there shouldn't be a `PolynomialSequence.groebner_basis`

This is now #10856.

> * Perhaps move `MPolynomialIdeal.weil_restriction` since you say that it depends on the presentation.

Thinking about it: it's about the variety and thus can stay with the ideals.



---

archive/issue_comments_008864.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThe attached updated patch clarifies \"parts\" and the relation between ideals and polynomial sequences.",
    "created_at": "2011-02-26T22:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8864",
    "user": "https://github.com/malb"
}
```

<a id='comment:22'>Comment 22:</a>
The attached updated patch clarifies "parts" and the relation between ideals and polynomial sequences.



---

archive/issue_events_015753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-26T22:38:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15753"
}
```



---

archive/issue_events_015754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-26T22:38:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15754"
}
```



---

archive/issue_events_015755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-26T22:38:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15755"
}
```



---

archive/issue_events_015756.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-26T22:38:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15756"
}
```



---

archive/issue_comments_008865.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2011-02-26T22:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8865",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_008866.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nOk looks good to me. Applies to Sage-4.6.2.rc1, too.",
    "created_at": "2011-02-26T22:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8866",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'>Comment 23:</a>
Ok looks good to me. Applies to Sage-4.6.2.rc1, too.



---

archive/issue_comments_008867.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThere is a Sphinx warning:\n\n```\nmnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py:docstring of sage.rings.polynomial.multi_polynomial_ideal:206: (ERROR/3) Unknown interpreted text role \"cls\".\n```",
    "created_at": "2011-02-28T19:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8867",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'>Comment 24:</a>
There is a Sphinx warning:

```
mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py:docstring of sage.rings.polynomial.multi_polynomial_ideal:206: (ERROR/3) Unknown interpreted text role "cls".
```



---

archive/issue_events_015757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-28T19:36:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15757"
}
```



---

archive/issue_events_015758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-28T19:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15758"
}
```



---

archive/issue_comments_008868.json:
```json
{
    "body": "rebased to 4.6.2.alpha4",
    "created_at": "2011-02-28T20:05:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8868",
    "user": "https://github.com/malb"
}
```

rebased to 4.6.2.alpha4



---

archive/issue_comments_008869.json:
```json
{
    "body": "Attachment: **[trac_1819.patch.gz](https://github.com/sagemath/sage/files/ticket1819/trac_1819.patch.gz)**\n\nAttachment: **[trac_1819.patch.diff.gz](https://github.com/sagemath/sage/files/ticket1819/trac_1819.patch.diff.gz)**\n\ndiff of this version of the patch and the last version",
    "created_at": "2011-02-28T20:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8869",
    "user": "https://github.com/malb"
}
```

Attachment: **[trac_1819.patch.gz](https://github.com/sagemath/sage/files/ticket1819/trac_1819.patch.gz)**

Attachment: **[trac_1819.patch.diff.gz](https://github.com/sagemath/sage/files/ticket1819/trac_1819.patch.diff.gz)**

diff of this version of the patch and the last version



---

archive/issue_comments_008870.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThe updated attached patch fixes the reported issue. However, I'm not setting this to **positive review** myself since I fixed a few more formating issues wrt to the reference manual. I also a diff between the current and the previous version of the patch for easy reviewing of those changes.",
    "created_at": "2011-02-28T20:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8870",
    "user": "https://github.com/malb"
}
```

<a id='comment:25'>Comment 25:</a>
The updated attached patch fixes the reported issue. However, I'm not setting this to **positive review** myself since I fixed a few more formating issues wrt to the reference manual. I also a diff between the current and the previous version of the patch for easy reviewing of those changes.



---

archive/issue_events_015759.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-02-28T20:07:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15759"
}
```



---

archive/issue_events_015760.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-02-28T20:07:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15760"
}
```



---

archive/issue_events_015761.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-28T20:15:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15761"
}
```



---

archive/issue_events_015762.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-02-28T20:15:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15762"
}
```



---

archive/issue_comments_008871.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nLooks good. Fixes the documentation warning.",
    "created_at": "2011-02-28T20:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8871",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'>Comment 26:</a>
Looks good. Fixes the documentation warning.



---

archive/issue_events_015763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:45:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15763"
}
```



---

archive/issue_events_015764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:45:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/1819#event-15764"
}
```



---

archive/issue_comments_008872.json:
```json
{
    "body": "Merged: **sage-4.7.alpha1**",
    "created_at": "2011-03-08T21:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/1819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/1819#issuecomment-8872",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha1**
