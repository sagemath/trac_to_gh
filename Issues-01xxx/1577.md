# Issue 1577: [with positive review] .coefficients() and .monomials() differ in order in multivariate polynomial rings

archive/issues_001577.json:
```json
{
    "body": "A small annoyance -- the ordering on the lists below is different:\n\n```\nsage: R.<fx,fy,gx,gy> = ZZ[]\nsage: F = ((fx*gy - fy*gx)^3)\nsage: F\n-1*fy^3*gx^3 + 3*fx*fy^2*gx^2*gy - 3*fx^2*fy*gx*gy^2 + fx^3*gy^3\nsage: F.monomials()\n[fx^2*fy*gx*gy^2, fy^3*gx^3, fx*fy^2*gx^2*gy, fx^3*gy^3]\nsage: F.coefficients()\n[-3, -1, 3, 1]\n```\n\n```\nF.coefficients?}}} says\n\"The order the coefficients appear in depends on the ordering used on self's parent.\"\n{{{F.monomials?}}} says\n\"Returns list of all monomials which occure in this multivariate polynomial.\"\n\nI think the latter should be changed.\n\n**Assignee:** @malb\n\n**CC:**  jbmohler\n\n**Keywords:** multi polynomial rings coefficients monomials\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/1577\n\n",
    "closed_at": "2008-01-21T05:47:04Z",
    "created_at": "2007-12-21T01:34:55Z",
    "labels": [
        "component: commutative algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.1",
    "title": "[with positive review] .coefficients() and .monomials() differ in order in multivariate polynomial rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1577",
    "user": "https://github.com/ncalexan"
}
```
A small annoyance -- the ordering on the lists below is different:

```
sage: R.<fx,fy,gx,gy> = ZZ[]
sage: F = ((fx*gy - fy*gx)^3)
sage: F
-1*fy^3*gx^3 + 3*fx*fy^2*gx^2*gy - 3*fx^2*fy*gx*gy^2 + fx^3*gy^3
sage: F.monomials()
[fx^2*fy*gx*gy^2, fy^3*gx^3, fx*fy^2*gx^2*gy, fx^3*gy^3]
sage: F.coefficients()
[-3, -1, 3, 1]
```

```
F.coefficients?}}} says
"The order the coefficients appear in depends on the ordering used on self's parent."
{{{F.monomials?}}} says
"Returns list of all monomials which occure in this multivariate polynomial."

I think the latter should be changed.

**Assignee:** @malb

**CC:**  jbmohler

**Keywords:** multi polynomial rings coefficients monomials

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/1577





---

archive/issue_comments_010808.json:
```json
{
    "body": "<a id='comment:1'></a>\nLooks like monomials and coefficients line up, but it's not in the same order as they print?",
    "created_at": "2007-12-21T01:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10808",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:1'></a>
Looks like monomials and coefficients line up, but it's not in the same order as they print?



---

archive/issue_comments_010809.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhile we're here:\n\nThe elements of list() don't have the correct types -- the final line should be a libsingular poly as well:\n\n```\nsage: R.<x, y> = QQ[]\nsage: (x + y).monomials()\n[x, y]\nsage: type((x + y).monomials()[0])\n<type 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular'>\nsage: list(x + y)[0]\n(1, x)\nsage: type(list(x + y)[0][-1])\n<class 'sage.rings.polynomial.multi_polynomial_element.MPolynomial_polydict'>\n```",
    "created_at": "2007-12-21T04:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10809",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:2'></a>
While we're here:

The elements of list() don't have the correct types -- the final line should be a libsingular poly as well:

```
sage: R.<x, y> = QQ[]
sage: (x + y).monomials()
[x, y]
sage: type((x + y).monomials()[0])
<type 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular'>
sage: list(x + y)[0]
(1, x)
sage: type(list(x + y)[0][-1])
<class 'sage.rings.polynomial.multi_polynomial_element.MPolynomial_polydict'>
```



---

archive/issue_comments_010810.json:
```json
{
    "body": "Attachment [trac_1577.patch](tarball://root/attachments/some-uuid/ticket1577/trac_1577.patch) by @malb created at 2008-01-06 17:09:38",
    "created_at": "2008-01-06T17:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10810",
    "user": "https://github.com/malb"
}
```

Attachment [trac_1577.patch](tarball://root/attachments/some-uuid/ticket1577/trac_1577.patch) by @malb created at 2008-01-06 17:09:38



---

archive/issue_comments_010811.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-01-06T17:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10811",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_010812.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2008-01-06T17:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10812",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to assigned.



---

archive/issue_events_004677.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "rename": {
        "from": ".coefficients() and .monomials() differ in order in multivariate polynomial rings",
        "to": "[with mostly positive review] .coefficients() and .monomials() differ in order in multivariate polynomial rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1577#event-4677"
}
```



---

archive/issue_comments_010813.json:
```json
{
    "body": "<a id='comment:4'></a>\nI entirely agree with the actual code of this patch.  One of the doc-string changes is not representative though -- we are not sorting largest to smallest (whatever that might mean for a monomial).\n\nI think that ZZ mpolys doc-string for monomials should read \n\n```\n        Return the list of monomials in self. The returned list is\n        ordered by the term ordering of self.parent().\n```\njust like for QQ mpolys.",
    "created_at": "2008-01-10T10:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10813",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```

<a id='comment:4'></a>
I entirely agree with the actual code of this patch.  One of the doc-string changes is not representative though -- we are not sorting largest to smallest (whatever that might mean for a monomial).

I think that ZZ mpolys doc-string for monomials should read 

```
        Return the list of monomials in self. The returned list is
        ordered by the term ordering of self.parent().
```
just like for QQ mpolys.



---

archive/issue_comments_010814.json:
```json
{
    "body": "<a id='comment:5'></a>\nOh, perhaps I should add that I doc-tested 'sage/rings' and verified that the patch fixes the original bug as well as the bug mentioned in the comments.",
    "created_at": "2008-01-10T10:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10814",
    "user": "https://trac.sagemath.org/admin/accounts/users/jbmohler"
}
```

<a id='comment:5'></a>
Oh, perhaps I should add that I doc-tested 'sage/rings' and verified that the patch fixes the original bug as well as the bug mentioned in the comments.



---

archive/issue_comments_010815.json:
```json
{
    "body": "<a id='comment:6'></a>\nI am okay with changing the docstring but want to point out that \"from largest to smallest\" is well defined for a multivariate polynomial in a given ring. It means to sort according to the monomial ordering of the ring (which is a property of that ring) but in _descending_ order. This fact is not clear -- though probably 'natural' -- when writing \"The returned list is ordered by the term ordering of self.parent()\"",
    "created_at": "2008-01-10T10:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10815",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
I am okay with changing the docstring but want to point out that "from largest to smallest" is well defined for a multivariate polynomial in a given ring. It means to sort according to the monomial ordering of the ring (which is a property of that ring) but in _descending_ order. This fact is not clear -- though probably 'natural' -- when writing "The returned list is ordered by the term ordering of self.parent()"



---

archive/issue_comments_010816.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_1577_comment_4.patch](tarball://root/attachments/some-uuid/ticket1577/trac_1577_comment_4.patch) by @malb created at 2008-01-10 15:03:32\n\nJoel's suggested change is in `trac_1577_comment_4.patch`.",
    "created_at": "2008-01-10T15:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10816",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
Attachment [trac_1577_comment_4.patch](tarball://root/attachments/some-uuid/ticket1577/trac_1577_comment_4.patch) by @malb created at 2008-01-10 15:03:32

Joel's suggested change is in `trac_1577_comment_4.patch`.



---

archive/issue_events_004678.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "rename": {
        "from": "[with mostly positive review] .coefficients() and .monomials() differ in order in multivariate polynomial rings",
        "to": ".coefficients() and .monomials() differ in order in multivariate polynomial rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1577#event-4678"
}
```



---

archive/issue_comments_010817.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-01-16T15:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10817",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_010818.json:
```json
{
    "body": "<a id='comment:8'></a>\njbmohler can you verify this is correct now?",
    "created_at": "2008-01-16T15:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10818",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
jbmohler can you verify this is correct now?



---

archive/issue_comments_010819.json:
```json
{
    "body": "<a id='comment:9'></a>\nI reported this bug, and I approved this patch!  Apply.",
    "created_at": "2008-01-20T06:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10819",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:9'></a>
I reported this bug, and I approved this patch!  Apply.



---

archive/issue_events_004679.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "rename": {
        "from": ".coefficients() and .monomials() differ in order in multivariate polynomial rings",
        "to": "[with positive review] .coefficients() and .monomials() differ in order in multivariate polynomial rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1577#event-4679"
}
```



---

archive/issue_comments_010820.json:
```json
{
    "body": "<a id='comment:10'></a>\nMerged both patches in Sage 2.10.1.alpha1",
    "created_at": "2008-01-21T05:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10820",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:10'></a>
Merged both patches in Sage 2.10.1.alpha1



---

archive/issue_events_004680.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-01-21T05:47:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1577#event-4680"
}
```



---

archive/issue_comments_010821.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2008-01-21T05:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1577#issuecomment-10821",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Resolution:** fixed
