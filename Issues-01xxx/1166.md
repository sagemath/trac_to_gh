# Issue 1166: [with positive review] 2D terminal output is inconsistent and corrupted

archive/issues_001166.json:
```json
{
    "body": "\n```\nsage: f = (exp(x)-1)/(exp(x/2)+1)\nsage: g = exp(x/2)-1\nsage: print f(10.0), g(10.0)\n                               147.4131591025766                               \\\n 147.4131591025766\nsage: print 1, 2\n1 2\nsage: print f(10), g(10)\n                                     10\n                                    e   - 1\n                                   --------\n                                     5\n                                    e  + 1                                     \\\n  5\n                                     e  - 1\n```\n\nThe output of f(10.0), g(10.0) [with many spaces] seems inconsistent with that of 1, 2 [no spaces]. With f(10), g(10) the exponent 5 of g(10) wraps around the terminal line, and is thus\nnot properly aligned with e - 1. (all this in a 80-column xterm)\n\n**Assignee:** @williamstein\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/1166\n\n",
    "closed_at": "2008-01-21T22:58:49Z",
    "created_at": "2007-11-13T22:44:08Z",
    "labels": [
        "component: user interface",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.1",
    "title": "[with positive review] 2D terminal output is inconsistent and corrupted",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1166",
    "user": "https://github.com/zimmermann6"
}
```

```
sage: f = (exp(x)-1)/(exp(x/2)+1)
sage: g = exp(x/2)-1
sage: print f(10.0), g(10.0)
                               147.4131591025766                               \
 147.4131591025766
sage: print 1, 2
1 2
sage: print f(10), g(10)
                                     10
                                    e   - 1
                                   --------
                                     5
                                    e  + 1                                     \
  5
                                     e  - 1
```

The output of f(10.0), g(10.0) [with many spaces] seems inconsistent with that of 1, 2 [no spaces]. With f(10), g(10) the exponent 5 of g(10) wraps around the terminal line, and is thus
not properly aligned with e - 1. (all this in a 80-column xterm)

**Assignee:** @williamstein

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/1166





---

archive/issue_events_003524.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-12-18T23:17:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "milestone": "sage-2.9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1166#event-3524"
}
```



---

archive/issue_comments_007671.json:
```json
{
    "body": "<a id='comment:1'></a>\nIt looks like a newline at the end of the multi line expression of f(10) would fix the issue:\n\n```\n----------------------------------------------------------------------\n| SAGE Version 2.9, Release Date: 2007-12-16                         |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n\nsage: f = (exp(x)-1)/(exp(x/2)+1)\nsage: g = exp(x/2)-1\nsage: print f(10.0), g(10.0)\n                               147.4131591025766                                147.4131591025766\nsage: print 1, 2\n1 2\nsage: print f(10), g(10)\n                                     10\n                                    e   - 1\n                                   --------\n                                     5\n                                    e  + 1                                       5\n                                     e  - 1\nsage: print f(10)\n                                     10\n                                    e   - 1\n                                   --------\n                                     5\n                                    e  + 1\nsage: print g(10)\n                                      5\n                                     e  - 1\nsage:\n```\n\nCheers,\n\nMichael",
    "created_at": "2007-12-18T23:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7671",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
It looks like a newline at the end of the multi line expression of f(10) would fix the issue:

```
----------------------------------------------------------------------
| SAGE Version 2.9, Release Date: 2007-12-16                         |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------

sage: f = (exp(x)-1)/(exp(x/2)+1)
sage: g = exp(x/2)-1
sage: print f(10.0), g(10.0)
                               147.4131591025766                                147.4131591025766
sage: print 1, 2
1 2
sage: print f(10), g(10)
                                     10
                                    e   - 1
                                   --------
                                     5
                                    e  + 1                                       5
                                     e  - 1
sage: print f(10)
                                     10
                                    e   - 1
                                   --------
                                     5
                                    e  + 1
sage: print g(10)
                                      5
                                     e  - 1
sage:
```

Cheers,

Michael



---

archive/issue_comments_007672.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-01-21T11:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7672",
    "user": "https://github.com/williamstein"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_000833.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-1166.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket1166/trac-1166.patch",
    "created_at": "2008-01-21T11:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_007673.json:
```json
{
    "body": "<a id='comment:2'></a>\n",
    "created_at": "2008-01-21T11:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7673",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>




---

archive/issue_comments_007674.json:
```json
{
    "body": "<a id='comment:3'></a>\n[this is my first review, thus please take with care]\n\nI get with this patch applied in 2.10:\n\n```\nsage: f=(exp(x)-1)/(exp(x/2)+1)\nsage: g=exp(x/2)-1\nsage: print f(10.0), g(10.0)\n\n                               147.4131591025766 \n                               147.4131591025766\nsage: print 1, 2\n1 2\nsage: print f(10), g(10)\n\n                                     10\n                                    e   - 1\n                                   --------\n                                     5\n                                    e  + 1 \n                                      5\n                                     e  - 1\n```\nThe output is much better, but I would expect:\n\n```\nsage: print f(10.0), g(10.0)\n\n                   147.4131591025766, 147.4131591025766\n```\nor\n\n```\nsage: print f(10.0), g(10.0)\n147.4131591025766 147.4131591025766\n```\nHowever, since this is an improvement, I give a positive review.",
    "created_at": "2008-01-21T15:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7674",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:3'></a>
[this is my first review, thus please take with care]

I get with this patch applied in 2.10:

```
sage: f=(exp(x)-1)/(exp(x/2)+1)
sage: g=exp(x/2)-1
sage: print f(10.0), g(10.0)

                               147.4131591025766 
                               147.4131591025766
sage: print 1, 2
1 2
sage: print f(10), g(10)

                                     10
                                    e   - 1
                                   --------
                                     5
                                    e  + 1 
                                      5
                                     e  - 1
```
The output is much better, but I would expect:

```
sage: print f(10.0), g(10.0)

                   147.4131591025766, 147.4131591025766
```
or

```
sage: print f(10.0), g(10.0)
147.4131591025766 147.4131591025766
```
However, since this is an improvement, I give a positive review.



---

archive/issue_events_003525.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "rename": {
        "from": "2D terminal output is inconsistent and corrupted",
        "to": "[with positive review] 2D terminal output is inconsistent and corrupted"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1166#event-3525"
}
```



---

archive/issue_comments_007675.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe potential solution to the adding an extra newlines in situations like\n\n```\nsage: print f(10.0), g(10.0)\n147.4131591025766 147.4131591025766\n```\nmight be that we need to check if the string returned from `f(10.0` contains a newline in which case we need to add the extra newline to separate the the two multiline outputs. If that is doable please open another ticket.\n\nCheers,\n\nMichael",
    "created_at": "2008-01-21T22:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7675",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
The potential solution to the adding an extra newlines in situations like

```
sage: print f(10.0), g(10.0)
147.4131591025766 147.4131591025766
```
might be that we need to check if the string returned from `f(10.0` contains a newline in which case we need to add the extra newline to separate the the two multiline outputs. If that is doable please open another ticket.

Cheers,

Michael



---

archive/issue_events_003526.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-01-21T22:58:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1166#event-3526"
}
```



---

archive/issue_comments_007676.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged in Sage 2.10.1.alpha1",
    "created_at": "2008-01-21T22:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7676",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>
Merged in Sage 2.10.1.alpha1



---

archive/issue_comments_007677.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2008-01-21T22:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1166",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1166#issuecomment-7677",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Resolution:** fixed
