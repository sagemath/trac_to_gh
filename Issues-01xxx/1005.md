# Issue 1005: port Sage to 32 bit OSX 10.5

archive/issues_001005.json:
```json
{
    "body": "NOTES:  The remarks below are enough to get Sage to 100% build on OSX 10.5, and *all doctests pass*. \n\n\nThe only anomaly is that doctesting the tutorial results in a bunch of error messages like this:\n\n```\npython(15525) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\n```\n\nThese don't cause any doctests to fail, and I observed this only for tut.tex (nothing else). \n\n\nThis is a meta ticket:\n\n* #1056: Givaro 3.2.6 build fix\n* #1059: lcacl installation fix\n* #1060: flintqs build fix\n* #1061: python build fix\n\nAssignee: mabshoff\n\nKeywords: Leopard\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/1005\n\n",
    "closed_at": "2007-11-20T11:34:26Z",
    "created_at": "2007-10-26T20:43:43Z",
    "labels": [
        "component: porting",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.8.13",
    "title": "port Sage to 32 bit OSX 10.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1005",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```
NOTES:  The remarks below are enough to get Sage to 100% build on OSX 10.5, and *all doctests pass*. 


The only anomaly is that doctesting the tutorial results in a bunch of error messages like this:

```
python(15525) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
```

These don't cause any doctests to fail, and I observed this only for tut.tex (nothing else). 


This is a meta ticket:

* #1056: Givaro 3.2.6 build fix
* #1059: lcacl installation fix
* #1060: flintqs build fix
* #1061: python build fix

Assignee: mabshoff

Keywords: Leopard

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/1005





---

archive/issue_comments_006100.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2007-10-26T20:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6100",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Changing status from new to assigned.



---

archive/issue_comments_006101.json:
```json
{
    "body": "<a id='comment:2'></a>When this is fixed, inst/inst.tex should be updated; I just changed that file to say that OS X 10.5 is not yet supported.",
    "created_at": "2007-10-27T03:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6101",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

<a id='comment:2'></a>When this is fixed, inst/inst.tex should be updated; I just changed that file to say that OS X 10.5 is not yet supported.



---

archive/issue_comments_006102.json:
```json
{
    "body": "<a id='comment:3'></a>Some hacks / workarounds:\n\n```\nCrazy hacks to get things to build.  Will figure out right fixes once everything\nworks, etc.\n\nThese come from rpw, me, Mabshoff .\n\n1) FLINT (william stein):\nProblem -- Multiple symbols... --\nSolution:\n   comment out this one line 423 of local/include/gmp.h\n/* #define __GMP_EXTERN_INLINE      extern __inline__ */\n\n2) PYTHON (rpw):\nPython fails to build:\nSolution:\nI did\n   export CFLAGS=\"-D__DARWIN_UNIX03\"\nthen in src/ manually did this line again after it failed:\ngcc -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd -DNDEBUG -g -O3 -Wall -Wstrict-prototypes  -I. -I./Include   -DPy_BUILD_CORE  -c ./Modules/posixmodule.c -o Modules/posixmodule.o\n\nNote that putting the above CFLAGS lines in spkg-install at the top or in the ./configure\nline did *not* work for some reason.\n\n3) GIVARO (rpw and mabshoff):\nProblem: Fails to build.\nSolution: Add #include \"sys/types.h\" to the top of\nsrc/src/kernel/zpz/givzpz32std.inl\nsrc/src/kernel/zpz/givzpz32uns.inl\n\n```",
    "created_at": "2007-10-29T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6102",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>Some hacks / workarounds:

```
Crazy hacks to get things to build.  Will figure out right fixes once everything
works, etc.

These come from rpw, me, Mabshoff .

1) FLINT (william stein):
Problem -- Multiple symbols... --
Solution:
   comment out this one line 423 of local/include/gmp.h
/* #define __GMP_EXTERN_INLINE      extern __inline__ */

2) PYTHON (rpw):
Python fails to build:
Solution:
I did
   export CFLAGS="-D__DARWIN_UNIX03"
then in src/ manually did this line again after it failed:
gcc -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd -DNDEBUG -g -O3 -Wall -Wstrict-prototypes  -I. -I./Include   -DPy_BUILD_CORE  -c ./Modules/posixmodule.c -o Modules/posixmodule.o

Note that putting the above CFLAGS lines in spkg-install at the top or in the ./configure
line did *not* work for some reason.

3) GIVARO (rpw and mabshoff):
Problem: Fails to build.
Solution: Add #include "sys/types.h" to the top of
src/src/kernel/zpz/givzpz32std.inl
src/src/kernel/zpz/givzpz32uns.inl

```



---

archive/issue_comments_006103.json:
```json
{
    "body": "<a id='comment:4'></a>\n```\n4) Building clisp fails with \n\n  UNIX error 45: Operation not supported\n\nSOLUTION: \n\n   cd spkg/build/clisp-*\n   cd src/src\n   make\n   make install\n\nIt works.  The problem is that building tee'ing breaks on 10.5. See\nhttp://osdir.com/ml/apple.fink.tracker/2004-12/msg00149.html\n```",
    "created_at": "2007-10-29T02:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6103",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
```
4) Building clisp fails with 

  UNIX error 45: Operation not supported

SOLUTION: 

   cd spkg/build/clisp-*
   cd src/src
   make
   make install

It works.  The problem is that building tee'ing breaks on 10.5. See
http://osdir.com/ml/apple.fink.tracker/2004-12/msg00149.html
```



---

archive/issue_comments_006104.json:
```json
{
    "body": "<a id='comment:5'></a>\n```\n5) MAXIMA:\n\nSolution: Exactly the same as for clisp.  This works.\n```",
    "created_at": "2007-10-29T03:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6104",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>
```
5) MAXIMA:

Solution: Exactly the same as for clisp.  This works.
```



---

archive/issue_comments_006105.json:
```json
{
    "body": "<a id='comment:6'></a>Other broken packages:\n\n```\nlcalc -- fails\nflintqs -- fails\nscipy -- fails (looks easy to fix)\n```\n\nEverything else builds and Sage starts up.",
    "created_at": "2007-10-29T03:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6105",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>Other broken packages:

```
lcalc -- fails
flintqs -- fails
scipy -- fails (looks easy to fix)
```

Everything else builds and Sage starts up.



---

archive/issue_comments_006106.json:
```json
{
    "body": "<a id='comment:7'></a>6) LCALC:\n\nThe fix for lcalc is to change the line\n\n```\ncp lcalc* \"$SAGE_LOCAL\"/bin\n```\nin spkg-install to \n\n```\ncp lcalc \"$SAGE_LOCAL\"/bin\n```\n\nThe former was needed when we supported windows (e.g., lcalc.exe), and\nwas sort of hack-ish.  The latter works around that there is some \nsmall problem with strip on os x, which isn't an issue. \n\n -- William",
    "created_at": "2007-10-29T05:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6106",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'></a>6) LCALC:

The fix for lcalc is to change the line

```
cp lcalc* "$SAGE_LOCAL"/bin
```
in spkg-install to 

```
cp lcalc "$SAGE_LOCAL"/bin
```

The former was needed when we supported windows (e.g., lcalc.exe), and
was sort of hack-ish.  The latter works around that there is some 
small problem with strip on os x, which isn't an issue. 

 -- William



---

archive/issue_comments_006107.json:
```json
{
    "body": "<a id='comment:8'></a>7) FLINTQS:\n\nThe fix for flintqs is the same as for givaro, basically.\nTo the file\n\n```\n    src/lanczos.c\n```\nadd the following as the first line:\n\n```\n#include \"sys/types.h\"\n```\nThen it builds fine.",
    "created_at": "2007-10-29T05:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6107",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'></a>7) FLINTQS:

The fix for flintqs is the same as for givaro, basically.
To the file

```
    src/lanczos.c
```
add the following as the first line:

```
#include "sys/types.h"
```
Then it builds fine.



---

archive/issue_comments_006108.json:
```json
{
    "body": "<a id='comment:9'></a>8) SCIPY\n\nThe final build problem was with Scipy.  There is a problem with g95 not working correctly to build some of scipy on 10.5.  Fortunately, using gfortran instead *does* work.  So I installed a system-wide gfortran in /usr/local/bin/, then did\n\n```\n   export SAGE_FORTRAN=`which gfortran`\n   cd SAGE_ROOT\n   rm spkg/installed/fortran*\n   sage -f fortran-20070912\n   make\n```\nand the rest of the build completed fine.",
    "created_at": "2007-10-29T07:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6108",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'></a>8) SCIPY

The final build problem was with Scipy.  There is a problem with g95 not working correctly to build some of scipy on 10.5.  Fortunately, using gfortran instead *does* work.  So I installed a system-wide gfortran in /usr/local/bin/, then did

```
   export SAGE_FORTRAN=`which gfortran`
   cd SAGE_ROOT
   rm spkg/installed/fortran*
   sage -f fortran-20070912
   make
```
and the rest of the build completed fine.



---

archive/issue_comments_006109.json:
```json
{
    "body": "Replying to [ticket:1005 mabshoff]:\n> NOTES:  The remarks below are enough to get Sage to 100% build on OSX 10.5.\n> \n> \n> \n> Doctesting the tutorial results in a bunch of error messages like this:\n> \n> ```\n> python(15525) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n> *** set a breakpoint in malloc_error_break to debug\n> ```\n\n\nCheck out https://lists.ubuntu.com/archives/storm/2007-July/000035.html for some pointers how this might be resolved.\n\nCheers,\n\nMichael",
    "created_at": "2007-10-29T07:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6109",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Replying to [ticket:1005 mabshoff]:
> NOTES:  The remarks below are enough to get Sage to 100% build on OSX 10.5.
> 
> 
> 
> Doctesting the tutorial results in a bunch of error messages like this:
> 
> ```
> python(15525) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
> *** set a breakpoint in malloc_error_break to debug
> ```


Check out https://lists.ubuntu.com/archives/storm/2007-July/000035.html for some pointers how this might be resolved.

Cheers,

Michael



---

archive/issue_comments_006110.json:
```json
{
    "body": "<a id='comment:11'></a>There are two potential patches to try out to fix the non-aligned pointer issue:\n\nhttp://groups.google.com/group/sage-devel/attach/64e42ec65e8a9fa2/no-collect-integer.patch?part=2\n\nhttp://groups.google.com/group/sage-devel/attach/3cd7a66aa5c1a355/__Pyx_ImportModule-decref-fix.patch?part=2\n\nBoth are from Robert Bradshaw, they should get rolled into 2.8.11, so I will open a ticket for them once I get some feedback from Robert.\n\nCheers,\n\nMichael",
    "created_at": "2007-10-29T08:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6110",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:11'></a>There are two potential patches to try out to fix the non-aligned pointer issue:

http://groups.google.com/group/sage-devel/attach/64e42ec65e8a9fa2/no-collect-integer.patch?part=2

http://groups.google.com/group/sage-devel/attach/3cd7a66aa5c1a355/__Pyx_ImportModule-decref-fix.patch?part=2

Both are from Robert Bradshaw, they should get rolled into 2.8.11, so I will open a ticket for them once I get some feedback from Robert.

Cheers,

Michael



---

archive/issue_comments_006111.json:
```json
{
    "body": "<a id='comment:12'></a>Pointers toward a potential solution for the flint problem with gmp at link time can be found at \n\nhttp://lists.apple.com/archives/darwin-dev/2006/Oct/msg00015.html\n\nCheers,\n\nMichael",
    "created_at": "2007-10-29T08:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6111",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:12'></a>Pointers toward a potential solution for the flint problem with gmp at link time can be found at 

http://lists.apple.com/archives/darwin-dev/2006/Oct/msg00015.html

Cheers,

Michael



---

archive/issue_comments_006112.json:
```json
{
    "body": "<a id='comment:13'></a>NOTE: A binary built on 10.5 will *not* work on 10.4.",
    "created_at": "2007-10-29T17:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6112",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:13'></a>NOTE: A binary built on 10.5 will *not* work on 10.4.



---

archive/issue_comments_006113.json:
```json
{
    "body": "<a id='comment:14'></a>I've posted a pre-built version of Sage that was built on Leopard here:\n\nhttp://sagemath.org/SAGEbin/apple_osx/intel/leopard/\n\nThis might be the optimal version of Sage to use on OSX 10.5.  It \nprobably won't 100% work without gfortran installed though.",
    "created_at": "2007-10-29T21:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6113",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:14'></a>I've posted a pre-built version of Sage that was built on Leopard here:

http://sagemath.org/SAGEbin/apple_osx/intel/leopard/

This might be the optimal version of Sage to use on OSX 10.5.  It 
probably won't 100% work without gfortran installed though.



---

archive/issue_comments_006114.json:
```json
{
    "body": "<a id='comment:15'></a>I just tried making some matplotlib plots using athe sage I built on 10.5.  I get lots of *serious* problems.  Nothing works.  This may be very difficult to resolve; I don't know.   This happens both in the notebook and from the command line.\n\n```\nsage: P = point( (0,0) )\nsage: show( P )\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\npython(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed\n*** set a breakpoint in malloc_error_break to debug\n```\n\nNOTE: Using sage-2.8.9 that I built on OS X 10.4 the above problem does not occur.",
    "created_at": "2007-10-31T21:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6114",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:15'></a>I just tried making some matplotlib plots using athe sage I built on 10.5.  I get lots of *serious* problems.  Nothing works.  This may be very difficult to resolve; I don't know.   This happens both in the notebook and from the command line.

```
sage: P = point( (0,0) )
sage: show( P )
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
python(5144) malloc: *** error for object 0xa023c6d8: Non-aligned pointer being freed
*** set a breakpoint in malloc_error_break to debug
```

NOTE: Using sage-2.8.9 that I built on OS X 10.4 the above problem does not occur.



---

archive/issue_comments_006115.json:
```json
{
    "body": "<a id='comment:16'></a>*READLINE in GP doesn't work*\n\nYet another problem:\n\n```\nsage: !gp\n                       GP/PARI CALCULATOR Version 2.3.2 (released)\n               i386 running darwin (ix86/GMP-4.2.1 kernel) 32-bit version\n                compiled: Oct 31 2007, gcc-4.0.1 (Apple Inc. build 5465)\n                   (readline not compiled in, extended help available)\n                             ^^^^^^^^^^^^^^^\n```",
    "created_at": "2007-11-01T06:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6115",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:16'></a>*READLINE in GP doesn't work*

Yet another problem:

```
sage: !gp
                       GP/PARI CALCULATOR Version 2.3.2 (released)
               i386 running darwin (ix86/GMP-4.2.1 kernel) 32-bit version
                compiled: Oct 31 2007, gcc-4.0.1 (Apple Inc. build 5465)
                   (readline not compiled in, extended help available)
                             ^^^^^^^^^^^^^^^
```



---

archive/issue_comments_006116.json:
```json
{
    "body": "Changing component from distribution to memleak.",
    "created_at": "2007-11-01T06:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6116",
    "user": "https://github.com/williamstein"
}
```

Changing component from distribution to memleak.



---

archive/issue_comments_006117.json:
```json
{
    "body": "Changing component from memleak to porting.",
    "created_at": "2007-11-01T06:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6117",
    "user": "https://github.com/williamstein"
}
```

Changing component from memleak to porting.



---

archive/issue_comments_006118.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:15 was]:\n> I just tried making some matplotlib plots using athe sage I built on 10.5.  \n> I get lots of *serious* problems.  \n\n\nI think this was a result of something involving #1044; I've tested\nagain and I can't replicate this problem at all.  So never mind -- matplotlib is fine :-).",
    "created_at": "2007-11-01T07:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6118",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:19'></a>Replying to [comment:15 was]:
> I just tried making some matplotlib plots using athe sage I built on 10.5.  
> I get lots of *serious* problems.  


I think this was a result of something involving #1044; I've tested
again and I can't replicate this problem at all.  So never mind -- matplotlib is fine :-).



---

archive/issue_comments_006119.json:
```json
{
    "body": "<a id='comment:20'></a>From rpw:\n\n```\nRalf-Philipp Weinmann \t\nto Jean-Guillaume., sage-devel\n\t\nshow details\n\t 7:21 am (2 hours ago) \nDear Dr. Dumas,\n\nI've encountered a build problem in Givaro 3.2.6 on MacOS X 10.5. The\nuint type used in src/kernel/zpz/givzpz32std.inl for example is not\navailable unless sys/types.h is included. The following patch fixes\nthe problem for me:\n\n--- src/kernel/system/givbasictype.h.ORIG       2007-11-01\n15:17:57.000000000 +0100\n+++ src/kernel/system/givbasictype.h    2007-11-01 15:18:33.000000000 +0100\n@@ -11,6 +11,9 @@\n #include \"givaro/givconfig.h\"\n\n #include <stdlib.h> // for size_t\n+#ifdef MACOSX\n+#  include <sys/types.h> // needed on MacOS X 10.5 for uint type\n+#endif\n\n // -- Neutral type: definition of zero and one\n class Neutral {\n```",
    "created_at": "2007-11-01T16:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6119",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:20'></a>From rpw:

```
Ralf-Philipp Weinmann 	
to Jean-Guillaume., sage-devel
	
show details
	 7:21 am (2 hours ago) 
Dear Dr. Dumas,

I've encountered a build problem in Givaro 3.2.6 on MacOS X 10.5. The
uint type used in src/kernel/zpz/givzpz32std.inl for example is not
available unless sys/types.h is included. The following patch fixes
the problem for me:

--- src/kernel/system/givbasictype.h.ORIG       2007-11-01
15:17:57.000000000 +0100
+++ src/kernel/system/givbasictype.h    2007-11-01 15:18:33.000000000 +0100
@@ -11,6 +11,9 @@
 #include "givaro/givconfig.h"

 #include <stdlib.h> // for size_t
+#ifdef MACOSX
+#  include <sys/types.h> // needed on MacOS X 10.5 for uint type
+#endif

 // -- Neutral type: definition of zero and one
 class Neutral {
```



---

archive/issue_comments_006120.json:
```json
{
    "body": "<a id='comment:21'></a>The givaro issue has been fixed in givaro-3.2.6.p2 for 2.8.11.rc1\n\nCheers,\n\nMichael",
    "created_at": "2007-11-01T23:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6120",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:21'></a>The givaro issue has been fixed in givaro-3.2.6.p2 for 2.8.11.rc1

Cheers,

Michael



---

archive/issue_comments_006121.json:
```json
{
    "body": "<a id='comment:24'></a>The lcalc issue has been fixed in lcalc-20070107.p0.spkg\n\nCheers,\n\nMichael",
    "created_at": "2007-11-02T00:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6121",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:24'></a>The lcalc issue has been fixed in lcalc-20070107.p0.spkg

Cheers,

Michael



---

archive/issue_comments_006122.json:
```json
{
    "body": "<a id='comment:25'></a>I've posted a patched python spkg here:\n\nhttp://sage.math.washington.edu/tmp/python-2.5.1.p8.spkg",
    "created_at": "2007-11-02T00:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6122",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:25'></a>I've posted a patched python spkg here:

http://sage.math.washington.edu/tmp/python-2.5.1.p8.spkg



---

archive/issue_comments_006123.json:
```json
{
    "body": "<a id='comment:27'></a>I'm posting spkgs here:\n\nhttp://sage.math.washington.edu/tmp/leopard/",
    "created_at": "2007-11-02T03:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6123",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:27'></a>I'm posting spkgs here:

http://sage.math.washington.edu/tmp/leopard/



---

archive/issue_comments_006124.json:
```json
{
    "body": "<a id='comment:28'></a>All the above spkgs have been merged in 2.8.11. The only open issue now is that g95 miscompiles scipy and we need to figure out what to do about this. A binary of gfortran 4.2.2 is 19mb compressed, so that is not the solution.\n\nCheers,\n\nMichael",
    "created_at": "2007-11-03T12:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6124",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:28'></a>All the above spkgs have been merged in 2.8.11. The only open issue now is that g95 miscompiles scipy and we need to figure out what to do about this. A binary of gfortran 4.2.2 is 19mb compressed, so that is not the solution.

Cheers,

Michael



---

archive/issue_events_002761.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-11-03T12:13:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "milestone": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1005#event-2761"
}
```



---

archive/issue_events_002762.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-20T05:11:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "milestone": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1005#event-2762"
}
```



---

archive/issue_events_002763.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-20T05:11:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "milestone": "sage-2.8.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1005#event-2763"
}
```



---

archive/issue_comments_006125.json:
```json
{
    "body": "<a id='comment:29'></a>\n```\nHi,\n\nI just did a test and using the new version of g95 here:\n    http://ftp.g95.org/g95-x86-osx.tgz\nworks fine for building Sage on Leopard OS X 10.5 intel.  \nSo, we can just update that and stop worrying about require\ngfortran on that platform.  Very nice. \n\n -- Wiliam\n\n```",
    "created_at": "2007-11-20T05:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6125",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:29'></a>
```
Hi,

I just did a test and using the new version of g95 here:
    http://ftp.g95.org/g95-x86-osx.tgz
works fine for building Sage on Leopard OS X 10.5 intel.  
So, we can just update that and stop worrying about require
gfortran on that platform.  Very nice. 

 -- Wiliam

```



---

archive/issue_comments_006126.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2007-11-20T11:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6126",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_006127.json:
```json
{
    "body": "<a id='comment:31'></a>The new fortran.spkg at \n\nhttp://sage.math.washington.edu/home/mabshoff/fortran-20071120.spkg\n\nfixes the last known issue.\n\nCheers,\n\nMichael",
    "created_at": "2007-11-20T11:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6127",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:31'></a>The new fortran.spkg at 

http://sage.math.washington.edu/home/mabshoff/fortran-20071120.spkg

fixes the last known issue.

Cheers,

Michael



---

archive/issue_events_002764.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-11-20T11:34:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1005#event-2764"
}
```



---

archive/issue_comments_006128.json:
```json
{
    "body": "<a id='comment:33'></a>2.8.13.rc0 builds \"out of the box\" on bsd.\n\nCheers,\n\nMichael",
    "created_at": "2007-11-20T11:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1005#issuecomment-6128",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:33'></a>2.8.13.rc0 builds "out of the box" on bsd.

Cheers,

Michael
