# Issue 1926: [with positive patch] fixes for the maple interface

archive/issues_001926.json:
```json
{
    "body": "Attached patch includes the following fixes:\n\n* Maple uses = as the equality test operator\n* Use . as multiplication operator\n* Print using printf(\"%q\",var)\n* Add code to convert Sage matrices to Maple\n* Add code to convert Sage vectors to Maple\n\n\n**Assignee:** @burcin\n\nIssue created by migration from https://trac.sagemath.org/ticket/1926\n\n",
    "closed_at": "2008-02-01T03:48:36Z",
    "created_at": "2008-01-25T13:53:08Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.1",
    "title": "[with positive patch] fixes for the maple interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/1926",
    "user": "https://github.com/burcin"
}
```
Attached patch includes the following fixes:

* Maple uses = as the equality test operator
* Use . as multiplication operator
* Print using printf("%q",var)
* Add code to convert Sage matrices to Maple
* Add code to convert Sage vectors to Maple


**Assignee:** @burcin

Issue created by migration from https://trac.sagemath.org/ticket/1926





---

archive/issue_comments_011196.json:
```json
{
    "body": "fixes to the maple interface",
    "created_at": "2008-01-25T13:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11196",
    "user": "https://github.com/burcin"
}
```

fixes to the maple interface



---

archive/attachments_001541.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage-maple_interface_fixes.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket1926/sage-maple_interface_fixes.patch",
    "created_at": "2008-01-25T13:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_011197.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis patch is very good except I don't like:\n\n```\n \t581\t        # everything is supposed to be comparable in Python, so we define \n \t582\t        # the comparison thus when no comparable in interfaced system. \n \t583\t        return -1   \n```\n\nIt would be better to compare something deterministic instead of always return -1, since you want that if a < b then it isn't the case that b < a; however your code will return that a < b *and* b < a, when the two aren't comparable.  Better would be to compare a hash of the string reps of the objects (can maple do that?!) or _something_ deterministic and easy.",
    "created_at": "2008-01-25T13:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11197",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
This patch is very good except I don't like:

```
 	581	        # everything is supposed to be comparable in Python, so we define 
 	582	        # the comparison thus when no comparable in interfaced system. 
 	583	        return -1   
```

It would be better to compare something deterministic instead of always return -1, since you want that if a < b then it isn't the case that b < a; however your code will return that a < b *and* b < a, when the two aren't comparable.  Better would be to compare a hash of the string reps of the objects (can maple do that?!) or _something_ deterministic and easy.



---

archive/issue_comments_011198.json:
```json
{
    "body": "fixes to the maple interface (new version, fixing __cmp__ problem)",
    "created_at": "2008-01-25T16:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11198",
    "user": "https://github.com/burcin"
}
```

fixes to the maple interface (new version, fixing __cmp__ problem)



---

archive/attachments_001542.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage-maple_interface_fixes.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket1926/sage-maple_interface_fixes.2.patch",
    "created_at": "2008-01-25T16:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_011199.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [was](#comment%3A1):\n> This patch is very good except I don't like:\n\n\n ```\n  \t581\t        # everything is supposed to be comparable in Python, so we define \n  \t582\t        # the comparison thus when no comparable in interfaced system. \n \t583\t        return -1   \n ```\n\nI copied the body of the `__cmp__` function from `sage/interfaces/expect.py`, and this comment came with it. \n\n> It would be better to compare something deterministic instead of always return -1, since you want that if a < b then it isn't the case that b < a; however your code will return that a < b *and* b < a, when the two aren't comparable.  Better would be to compare a hash of the string reps of the objects (can maple do that?!) or _something_ deterministic and easy.   \n\n\nYou're right. This was also a problem with `expect.py`. attachment:sage-maple_interface_fixes.2.patch  changes the offending lines with\n\n``` \nif hash(str(self)) < hash(str(other):\n    return -1\nelse:\n    return 1\n```\n\nHopefully making `__cmp__` behave more like an order relation.",
    "created_at": "2008-01-25T16:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11199",
    "user": "https://github.com/burcin"
}
```

<a id='comment:2'></a>
Replying to [was](#comment%3A1):
> This patch is very good except I don't like:


 ```
  	581	        # everything is supposed to be comparable in Python, so we define 
  	582	        # the comparison thus when no comparable in interfaced system. 
 	583	        return -1   
 ```

I copied the body of the `__cmp__` function from `sage/interfaces/expect.py`, and this comment came with it. 

> It would be better to compare something deterministic instead of always return -1, since you want that if a < b then it isn't the case that b < a; however your code will return that a < b *and* b < a, when the two aren't comparable.  Better would be to compare a hash of the string reps of the objects (can maple do that?!) or _something_ deterministic and easy.   


You're right. This was also a problem with `expect.py`. attachment:sage-maple_interface_fixes.2.patch  changes the offending lines with

``` 
if hash(str(self)) < hash(str(other):
    return -1
else:
    return 1
```

Hopefully making `__cmp__` behave more like an order relation.



---

archive/issue_comments_011200.json:
```json
{
    "body": "<a id='comment:3'></a>\n> I copied the body of the __cmp__ function from sage/interfaces/expect.py, \n> and this comment came with it.\n\n\nI've certainly made the mistake of defining cmp to return -1 always, which \nis very stupid.  If __cmp__ currently does that in expect.py, please open\na ticket about it!\n\n> if hash(str(self)) < hash(str(other):\n>     return -1\n> else:\n>    return 1\n\n\n> Hopefully making __cmp__ behave more like an order relation. \n\n\nI do not like the above cmp (even though I used to write code\nlike that).  Imagine that self or orther is a 1000x1000 matrix,\nsay, which is completely reasonable.  Then the above would\nliterally take a very long time, since it would have to pull that matrix\nback to Sage, etc.   Much better would be to do a comparison\nthat involves a Maple hash function. \n\nWilliam",
    "created_at": "2008-01-25T17:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11200",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>
> I copied the body of the __cmp__ function from sage/interfaces/expect.py, 
> and this comment came with it.


I've certainly made the mistake of defining cmp to return -1 always, which 
is very stupid.  If __cmp__ currently does that in expect.py, please open
a ticket about it!

> if hash(str(self)) < hash(str(other):
>     return -1
> else:
>    return 1


> Hopefully making __cmp__ behave more like an order relation. 


I do not like the above cmp (even though I used to write code
like that).  Imagine that self or orther is a 1000x1000 matrix,
say, which is completely reasonable.  Then the above would
literally take a very long time, since it would have to pull that matrix
back to Sage, etc.   Much better would be to do a comparison
that involves a Maple hash function. 

William



---

archive/issue_comments_011201.json:
```json
{
    "body": "<a id='comment:4'></a>\nI've added a patch which changes the hashing of expect elements and adds a special hash method for MapleElements.",
    "created_at": "2008-01-28T01:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11201",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:4'></a>
I've added a patch which changes the hashing of expect elements and adds a special hash method for MapleElements.



---

archive/attachments_001543.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "1926.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket1926/1926.patch",
    "created_at": "2008-01-28T01:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_011202.json:
```json
{
    "body": "",
    "created_at": "2008-01-28T01:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11202",
    "user": "https://github.com/mwhansen"
}
```





---

archive/issue_comments_011203.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2008-01-28T02:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11203",
    "user": "https://github.com/williamstein"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_005696.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-01-28T02:45:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1926#event-5696"
}
```



---

archive/issue_comments_011204.json:
```json
{
    "body": "<a id='comment:6'></a>\nMerged sage-maple_interface_fixes.2.patch and 1926.patch in Sage 2.10.1.rc2",
    "created_at": "2008-01-28T02:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11204",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
Merged sage-maple_interface_fixes.2.patch and 1926.patch in Sage 2.10.1.rc2



---

archive/issue_comments_011205.json:
```json
{
    "body": "make the doctests optional in sage/interfaces/maple.py",
    "created_at": "2008-01-29T09:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11205",
    "user": "https://github.com/burcin"
}
```

make the doctests optional in sage/interfaces/maple.py



---

archive/issue_events_005697.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "rename": {
        "from": "fixes for the maple interface",
        "to": "[with trivial additional patch] fixes for the maple interface"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1926#event-5697"
}
```



---

archive/issue_comments_011206.json:
```json
{
    "body": "**Changing status** from closed to reopened.",
    "created_at": "2008-01-29T09:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11206",
    "user": "https://github.com/burcin"
}
```

**Changing status** from closed to reopened.



---

archive/attachments_001544.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "1926-make_doctests_optional.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket1926/1926-make_doctests_optional.patch",
    "created_at": "2008-01-29T09:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_011207.json:
```json
{
    "body": "<a id='comment:7'></a>\nattachment:1926-make_doctests_optional.patch needs to be applied to make the new doctests in the maple interface optional.",
    "created_at": "2008-01-29T09:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11207",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'></a>
attachment:1926-make_doctests_optional.patch needs to be applied to make the new doctests in the maple interface optional.



---

archive/issue_comments_011208.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew patch looks good to me.",
    "created_at": "2008-02-01T03:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11208",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:8'></a>
New patch looks good to me.



---

archive/issue_events_005698.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-02-01T03:48:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1926#event-5698"
}
```



---

archive/issue_events_005699.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "rename": {
        "from": "[with trivial additional patch] fixes for the maple interface",
        "to": "[with positive patch] fixes for the maple interface"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/1926#event-5699"
}
```



---

archive/issue_comments_011209.json:
```json
{
    "body": "<a id='comment:9'></a>\nMerged 1926-make_doctests_optional.patch in Sahe 2.10.1.rc4",
    "created_at": "2008-02-01T03:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/1926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/1926#issuecomment-11209",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:9'></a>
Merged 1926-make_doctests_optional.patch in Sahe 2.10.1.rc4
