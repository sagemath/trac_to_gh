# Issue 16687: Read DIMACS files

archive/issues_016687.json:
```json
{
    "body": "CC:  @nathanncohen tmonteil\n\nSage writes dimacs files (for SAT solvers) but doesn't seem to read them.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16924\n\n",
    "closed_at": "2015-09-01T14:06:55Z",
    "created_at": "2014-09-03T08:06:28Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Read DIMACS files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16687",
    "user": "https://github.com/malb"
}
```
CC:  @nathanncohen tmonteil

Sage writes dimacs files (for SAT solvers) but doesn't seem to read them.

Issue created by migration from https://trac.sagemath.org/ticket/16924





---

archive/issue_comments_220038.json:
```json
{
    "body": "Hello,\n\nseems to be done in `sympy` (which is shipped with Sage)\n\n```\nsage: from sympy.logic.utilities.dimacs import load\nsage: load('1 2 \\n 3')\nAnd(Or(cnf_1, cnf_2), cnf_3)\n```\nBut I do not know how `sympy` fits with the current SAT stuff in Sage.\n\nVincent",
    "created_at": "2014-09-03T09:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220038",
    "user": "https://github.com/videlec"
}
```

Hello,

seems to be done in `sympy` (which is shipped with Sage)

```
sage: from sympy.logic.utilities.dimacs import load
sage: load('1 2 \n 3')
And(Or(cnf_1, cnf_2), cnf_3)
```
But I do not know how `sympy` fits with the current SAT stuff in Sage.

Vincent



---

archive/issue_comments_220039.json:
```json
{
    "body": "it's very easy to load/parse: just turn each line into a tuple and feed those to the SatSolver class with add_clause. Something like\n\n```python\nfor line in dimacs_file:\n    if line.startswith(\"c\"):\n        continue # comment\n    if line.startswith(\"p\"):\n        continue # header\n    line = line.split(\" \"))\n    clause = map(int,[e for e in line if e])\n    clause = clause[:-1] # strip trailing zero\n    solver.add_clause(clause)\n```",
    "created_at": "2014-09-03T09:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220039",
    "user": "https://github.com/malb"
}
```

it's very easy to load/parse: just turn each line into a tuple and feed those to the SatSolver class with add_clause. Something like

```python
for line in dimacs_file:
    if line.startswith("c"):
        continue # comment
    if line.startswith("p"):
        continue # header
    line = line.split(" "))
    clause = map(int,[e for e in line if e])
    clause = clause[:-1] # strip trailing zero
    solver.add_clause(clause)
```



---

archive/issue_comments_220040.json:
```json
{
    "body": "This is perhaps off-topic. I have read the `dimacs.py` file and i am surprised that the class maintains the data as an opened file (see `self._tail`). I am thinking of the case, where the data is a string given by `propcalc.formula(\"a|b\").satformat()`, it looks weird to me that the class has to create a file on the disk for that. Is there a reason for that design choice that i could be missing ? Why not maintaining as a list of tuples of integers (corresponding to a list of clauses), and opening a file only when writing and loading data to/from a file ?",
    "created_at": "2014-09-03T12:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220040",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

This is perhaps off-topic. I have read the `dimacs.py` file and i am surprised that the class maintains the data as an opened file (see `self._tail`). I am thinking of the case, where the data is a string given by `propcalc.formula("a|b").satformat()`, it looks weird to me that the class has to create a file on the disk for that. Is there a reason for that design choice that i could be missing ? Why not maintaining as a list of tuples of integers (corresponding to a list of clauses), and opening a file only when writing and loading data to/from a file ?



---

archive/issue_comments_220041.json:
```json
{
    "body": "Hi, the idea was to avoid having the clauses in memory twice: once in the solver and once (in a bloated format) in Python. The rationale behind this was that in my applications these SAT clauses can be rather big (think 1-2GB).",
    "created_at": "2014-09-03T14:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220041",
    "user": "https://github.com/malb"
}
```

Hi, the idea was to avoid having the clauses in memory twice: once in the solver and once (in a bloated format) in Python. The rationale behind this was that in my applications these SAT clauses can be rather big (think 1-2GB).



---

archive/issue_comments_220042.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-26T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220042",
    "user": "https://github.com/tscholl2"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_220043.json:
```json
{
    "body": "I added a `read` method as described in the comments here. I split it into two methods, a `read` method with the usual `read(filename)` signature and also a `load(file_object)` method which actually reads the lines from the file. This way it's easy to use other kinds of buffers besides files. Also it allows easy testing using fake files from StringIO. The import uses the `six` package so the example is compatible with both python 2 and 3. It should read line by line so it shouldn't store the entire files in memory as it sounds like people use somewhat larger files for this.\n\n---\nNew commits:",
    "created_at": "2015-05-26T18:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220043",
    "user": "https://github.com/tscholl2"
}
```

I added a `read` method as described in the comments here. I split it into two methods, a `read` method with the usual `read(filename)` signature and also a `load(file_object)` method which actually reads the lines from the file. This way it's easy to use other kinds of buffers besides files. Also it allows easy testing using fake files from StringIO. The import uses the `six` package so the example is compatible with both python 2 and 3. It should read line by line so it shouldn't store the entire files in memory as it sounds like people use somewhat larger files for this.

---
New commits:



---

archive/issue_comments_220044.json:
```json
{
    "body": "I think file objects are a rare thing in the Sage \"API\", i.e. as far as I know we don't usually use them. I'm not sure there should be two methods, just one with a filename. Also, aren't \"read\" and \"load\" a bit too generic as names given that these are methods on solver instances?",
    "created_at": "2015-05-27T08:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220044",
    "user": "https://github.com/malb"
}
```

I think file objects are a rare thing in the Sage "API", i.e. as far as I know we don't usually use them. I'm not sure there should be two methods, just one with a filename. Also, aren't "read" and "load" a bit too generic as names given that these are methods on solver instances?



---

archive/issue_comments_220045.json:
```json
{
    "body": "Thanks for the comment.\n\nI wasn't sure about the kind of use case this class gets. You mentioned in a comment that you sometimes use files on the order of gigabytes. I thought it might be useful to have easy access to a method which you only need a stream in case you don't have a disk file (for example a memory mapped file object, a StringIO file object, or some kind of stream from stdin). I don't know if you can open those with `fopen`.\n\nHowever, if you think that most people just read from a file on the disk, then I could easily remove the `load` function.\n\nAs for the `read` name, I used `read` because there was already a `write` method and it seemed complementary. Do you think `parse` is a better name?",
    "created_at": "2015-05-27T14:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220045",
    "user": "https://github.com/tscholl2"
}
```

Thanks for the comment.

I wasn't sure about the kind of use case this class gets. You mentioned in a comment that you sometimes use files on the order of gigabytes. I thought it might be useful to have easy access to a method which you only need a stream in case you don't have a disk file (for example a memory mapped file object, a StringIO file object, or some kind of stream from stdin). I don't know if you can open those with `fopen`.

However, if you think that most people just read from a file on the disk, then I could easily remove the `load` function.

As for the `read` name, I used `read` because there was already a `write` method and it seemed complementary. Do you think `parse` is a better name?



---

archive/issue_comments_220046.json:
```json
{
    "body": "You're right `read` makes sense given that there is a `write`. How about both functions are merged into one? If the parameter is a string it is considered a file name? Otherwise it is considered a file object?",
    "created_at": "2015-05-28T10:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220046",
    "user": "https://github.com/malb"
}
```

You're right `read` makes sense given that there is a `write`. How about both functions are merged into one? If the parameter is a string it is considered a file name? Otherwise it is considered a file object?



---

archive/issue_comments_220047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-28T17:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220048.json:
```json
{
    "body": "That's a great idea. I merged the methods and uploaded the new version.",
    "created_at": "2015-05-28T17:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220048",
    "user": "https://github.com/tscholl2"
}
```

That's a great idea. I merged the methods and uploaded the new version.



---

archive/issue_comments_220049.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to interfaces.",
    "created_at": "2015-05-29T01:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220049",
    "user": "https://github.com/kcrisman"
}
```

Changing component from PLEASE CHANGE to interfaces.



---

archive/issue_comments_220050.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-29T09:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220050",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_220051.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2015-05-29T09:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220051",
    "user": "https://github.com/malb"
}
```

Looks good to me.



---

archive/issue_comments_220052.json:
```json
{
    "body": "Docs don't build",
    "created_at": "2015-05-29T13:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220052",
    "user": "https://github.com/vbraun"
}
```

Docs don't build



---

archive/issue_comments_220053.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-29T13:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220053",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_220054.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-29T20:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220055.json:
```json
{
    "body": "Added an \"r\" so the doc string is raw text instead of a string so that the \"\\n\"'s in the example don't crash the doc building.",
    "created_at": "2015-05-29T20:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220055",
    "user": "https://github.com/tscholl2"
}
```

Added an "r" so the doc string is raw text instead of a string so that the "\n"'s in the example don't crash the doc building.



---

archive/issue_comments_220056.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-29T20:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220056",
    "user": "https://github.com/tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_220057.json:
```json
{
    "body": "Changing component from interfaces to interfaces: optional.",
    "created_at": "2015-06-23T13:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220057",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from interfaces to interfaces: optional.



---

archive/issue_comments_220058.json:
```json
{
    "body": "Hello,\n\nThe docstring of the function should follow the scheme\n\n```\ndef my_function(x,y,z):\n    r\"\"\"\n    one line description\n\n    longer description if needed\n\n    EXAMPLES::\n\n        sage: my_function(1,2,3)\n```\n\nThe following is not helpful in the documentation\n\n```\nSee http://trac.sagemath.org/ticket/16924\n```\nIt would make sense in an `AUTHOR` section. Or within the `TESTS` section if it would correspond to some bug fix. Moreover, the syntax is now `trac:`16924``.\n\nIn your example, I do not understand what you want to show.\n\n```\nsage: solver.read(file_object)\nsage: solver\nDIMACS Solver: ''\n```\nIt seems that nothing happened... Would it be possible to print the clauses?\n\nVincent",
    "created_at": "2015-08-03T08:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220058",
    "user": "https://github.com/videlec"
}
```

Hello,

The docstring of the function should follow the scheme

```
def my_function(x,y,z):
    r"""
    one line description

    longer description if needed

    EXAMPLES::

        sage: my_function(1,2,3)
```

The following is not helpful in the documentation

```
See http://trac.sagemath.org/ticket/16924
```
It would make sense in an `AUTHOR` section. Or within the `TESTS` section if it would correspond to some bug fix. Moreover, the syntax is now `trac:`16924``.

In your example, I do not understand what you want to show.

```
sage: solver.read(file_object)
sage: solver
DIMACS Solver: ''
```
It seems that nothing happened... Would it be possible to print the clauses?

Vincent



---

archive/issue_comments_220059.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-03T15:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220060.json:
```json
{
    "body": "Thanks for the comments!\n\nI changed the doc string as you suggested and changed the example to print out the clauses. It's a lot better for the example.\n\nPlease let me know if you notice anything else that doesn't fit in.",
    "created_at": "2015-08-03T15:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220060",
    "user": "https://github.com/tscholl2"
}
```

Thanks for the comments!

I changed the doc string as you suggested and changed the example to print out the clauses. It's a lot better for the example.

Please let me know if you notice anything else that doesn't fit in.



---

archive/issue_comments_220061.json:
```json
{
    "body": "I hardly found specification for DIMACS files. In http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html they say several things that you are not taking care of:\n- the comments should only be at the begining\n- there is one line starting with `p cnf NUM_VAR NUM_CLAUSES` (the same format is used for other constraint satisfcation problems)\n- a clause might extend on more than one line and a clause might start on the same line as another one\n\nIn other words, as far as I understand, this would be valid\n\n```\nc hey\nc ho\np cnf 3 2\n1 -2 0 3\n1   0\n```\n\nMoreover, it is written *In some examples of CNF files, the rule that the variables are numbered from 1 to N is not followed. The file might declare that there are 10 variables, for instance, but allow them to be numbered 2 through 11.*\n\nIt would be nice if you know some link with the exact specification of the format.",
    "created_at": "2015-08-03T16:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220061",
    "user": "https://github.com/videlec"
}
```

I hardly found specification for DIMACS files. In http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html they say several things that you are not taking care of:
- the comments should only be at the begining
- there is one line starting with `p cnf NUM_VAR NUM_CLAUSES` (the same format is used for other constraint satisfcation problems)
- a clause might extend on more than one line and a clause might start on the same line as another one

In other words, as far as I understand, this would be valid

```
c hey
c ho
p cnf 3 2
1 -2 0 3
1   0
```

Moreover, it is written *In some examples of CNF files, the rule that the variables are numbered from 1 to N is not followed. The file might declare that there are 10 variables, for instance, but allow them to be numbered 2 through 11.*

It would be nice if you know some link with the exact specification of the format.



---

archive/issue_comments_220062.json:
```json
{
    "body": "Replying to [comment:23 vdelecroix]:\n> - the comments should only be at the begining\n\n\nWhy enforce that restriction when there is no harm (as far as I can see) in being more liberal?\n\n> - there is one line starting with `p cnf NUM_VAR NUM_CLAUSES` (the same format is used for other constraint satisfcation problems)\n\n\nAs far as I know, many parsers these days ignore this (source: I chatted to M\u00e1t\u00e9 Soos ages ago, I might be misremembering, though)\n\n> - a clause might extend on more than one line and a clause might start on the same line as another one\n\n\nI did not know about that one.\n \n> In other words, as far as I understand, this would be valid\n> \n> ```\n> c hey\n> c ho\n> p cnf 3 2\n> 1 -2 0 3\n> 1   0\n> ```",
    "created_at": "2015-08-03T16:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220062",
    "user": "https://github.com/malb"
}
```

Replying to [comment:23 vdelecroix]:
> - the comments should only be at the begining


Why enforce that restriction when there is no harm (as far as I can see) in being more liberal?

> - there is one line starting with `p cnf NUM_VAR NUM_CLAUSES` (the same format is used for other constraint satisfcation problems)


As far as I know, many parsers these days ignore this (source: I chatted to Máté Soos ages ago, I might be misremembering, though)

> - a clause might extend on more than one line and a clause might start on the same line as another one


I did not know about that one.
 
> In other words, as far as I understand, this would be valid
> 
> ```
> c hey
> c ho
> p cnf 3 2
> 1 -2 0 3
> 1   0
> ```



---

archive/issue_comments_220063.json:
```json
{
    "body": "Replying to [comment:24 malb]:\n> Replying to [comment:23 vdelecroix]:\n\n\nI very naively read the web page I mentioned. I am fine with the current state, but I just wanted to be sure that anybody (that uses this format) agrees with this parser. And of course, I an not the required person to judge that.\n\nOne option would be to write down in the docstring that the DIMACS format is not well specified.\n\nVincent",
    "created_at": "2015-08-03T16:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220063",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:24 malb]:
> Replying to [comment:23 vdelecroix]:


I very naively read the web page I mentioned. I am fine with the current state, but I just wanted to be sure that anybody (that uses this format) agrees with this parser. And of course, I an not the required person to judge that.

One option would be to write down in the docstring that the DIMACS format is not well specified.

Vincent



---

archive/issue_comments_220064.json:
```json
{
    "body": "Sorry it took me a while, I'm at a Sage days working on other things. But I asked people here and got directed to a SAT solver competition website [http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html](http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html).\n\nI copied their rules here\n\n- The file can start with comments, that is lines begining with the character c.\n- Right after the comments, there is the line p cnf nbvar nbclauses indicating that the instance is in CNF format; nbvar is the exact number of variables appearing in the file; nbclauses is the exact number of clauses contained in the file.\n- Then the clauses follow. Each clause is a sequence of distinct non-null numbers between -nbvar and nbvar ending with 0 on the same line; it cannot contain the opposite literals i and -i simultaneously. Positive numbers denote the corresponding variables. Negative numbers denote the negations of the corresponding variables.\n\nThe clause about \"ending with 0 on the same line\" means they don't allow the multi-line clauses. So it sounds like the definition of \"DIMACS standards\" depends on who you ask.\n\nI will modify the docstring to clearly describe the variation it assumes the file is in. \n\nShould I post links to these pages describing different rules for DIMACS files in the docstring as well?\n\nEDIT: Sorry I realized I copied the wrong link. Here is the corect one: [http://www.satcompetition.org/2009/format-benchmarks2009.html](http://www.satcompetition.org/2009/format-benchmarks2009.html)",
    "created_at": "2015-08-26T18:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220064",
    "user": "https://github.com/tscholl2"
}
```

Sorry it took me a while, I'm at a Sage days working on other things. But I asked people here and got directed to a SAT solver competition website [http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html](http://people.sc.fsu.edu/~jburkardt/data/cnf/cnf.html).

I copied their rules here

- The file can start with comments, that is lines begining with the character c.
- Right after the comments, there is the line p cnf nbvar nbclauses indicating that the instance is in CNF format; nbvar is the exact number of variables appearing in the file; nbclauses is the exact number of clauses contained in the file.
- Then the clauses follow. Each clause is a sequence of distinct non-null numbers between -nbvar and nbvar ending with 0 on the same line; it cannot contain the opposite literals i and -i simultaneously. Positive numbers denote the corresponding variables. Negative numbers denote the negations of the corresponding variables.

The clause about "ending with 0 on the same line" means they don't allow the multi-line clauses. So it sounds like the definition of "DIMACS standards" depends on who you ask.

I will modify the docstring to clearly describe the variation it assumes the file is in. 

Should I post links to these pages describing different rules for DIMACS files in the docstring as well?

EDIT: Sorry I realized I copied the wrong link. Here is the corect one: [http://www.satcompetition.org/2009/format-benchmarks2009.html](http://www.satcompetition.org/2009/format-benchmarks2009.html)



---

archive/issue_comments_220065.json:
```json
{
    "body": "Hi, might as well thrown in the links. Sounds like a good plan.",
    "created_at": "2015-08-27T08:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220065",
    "user": "https://github.com/malb"
}
```

Hi, might as well thrown in the links. Sounds like a good plan.



---

archive/issue_comments_220066.json:
```json
{
    "body": "If, instead of reimplementing it yourself, you prefer to sweat over GLPK's API, then you can try calling \"glp_read_cnfsat\" [1]. That's a way to delegate the desponsibility of handling all cases `:-P`\n\nNathann\n\n[1] http://elis.dvo.ru/~lab_11/glpk-doc/cnfsat.pdf",
    "created_at": "2015-08-27T08:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220066",
    "user": "https://github.com/nathanncohen"
}
```

If, instead of reimplementing it yourself, you prefer to sweat over GLPK's API, then you can try calling "glp_read_cnfsat" [1]. That's a way to delegate the desponsibility of handling all cases `:-P`

Nathann

[1] http://elis.dvo.ru/~lab_11/glpk-doc/cnfsat.pdf



---

archive/issue_comments_220067.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-28T19:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220067",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220068.json:
```json
{
    "body": "I added some lines to the documentation for the read method which explains the differences in DIMACS files with links to various \"standards\". I rebuilt the docs and everything seemed to be formatted alright.\n\nI thought the method Martin wrote is flexible and simple enough that it wasn't worth it to call (and sweat over) GLPK's definition of DIMAC files. Thank you for pointing out another source though Nathann!",
    "created_at": "2015-08-28T19:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220068",
    "user": "https://github.com/tscholl2"
}
```

I added some lines to the documentation for the read method which explains the differences in DIMACS files with links to various "standards". I rebuilt the docs and everything seemed to be formatted alright.

I thought the method Martin wrote is flexible and simple enough that it wasn't worth it to call (and sweat over) GLPK's definition of DIMAC files. Thank you for pointing out another source though Nathann!



---

archive/issue_comments_220069.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2015-08-31T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220069",
    "user": "https://github.com/malb"
}
```

Looks good to me.



---

archive/issue_comments_220070.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-31T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220070",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_220071.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-09-01T14:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16687#issuecomment-220071",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049397.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-09-01T14:06:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16687",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16687#event-49397"
}
```
