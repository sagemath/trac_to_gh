# Issue 31844: opensuse-minimal: complex.h present but cannot be compiled

Issue created by migration from https://trac.sagemath.org/ticket/32081

Original creator: mkoeppe

Original creation time: 2021-06-29 00:51:18

CC:  @kliem


```
checking complex.h usability... no
checking complex.h presence... yes
configure: WARNING: complex.h: present but cannot be compiled
configure: WARNING: complex.h:     check for missing prerequisite headers?
configure: WARNING: complex.h: see the Autoconf documentation
configure: WARNING: complex.h:     section "Present But Cannot Be Compiled"
configure: WARNING: complex.h: proceeding with the compiler's result
configure: WARNING:     ## ------------------------------------------ ##
configure: WARNING:     ## Report this to sage-devel@googlegroups.com ##
configure: WARNING:     ## ------------------------------------------ ##
checking for complex.h... no
configure: error: Exiting, since you do not have the 'complex.h' header file.
```


Looks like we are missing some system package in `_prereq`. The `-standard` builds are OK.



---

Comment by mkoeppe created at 2021-06-29 07:11:09

New commits:


---

Comment by mkoeppe created at 2021-06-29 07:11:09

Changing status from new to needs_review.


---

Comment by dimpase created at 2021-06-29 15:27:45

lgtm


---

Comment by dimpase created at 2021-06-29 15:27:45

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-06-29 15:47:57

Thanks!

However, `tox -e docker-opensuse-15-minimal` revealed that some more packages are missing:

```
  [r-3.6.3]   checking iconv.h usability... yes
  [r-3.6.3]   checking iconv.h presence... yes
  [r-3.6.3]   checking for iconv.h... yes
  [r-3.6.3]   checking for iconv... yes
  [r-3.6.3]   checking whether iconv accepts "UTF-8", "latin1", "ASCII" and "UCS-*"... no
  [r-3.6.3]   configure: error: a suitable iconv is essential
```



```
  [sympow-2.023.6]   gcc version 7.5.0 (SUSE Linux) 
  [sympow-2.023.6]   ****************************************************
  [sympow-2.023.6]   Package 'sympow' is currently not installed
  [sympow-2.023.6]   No legacy uninstaller found for 'sympow'; nothing to do
  [sympow-2.023.6]   ./Configure: line 15: which: command not found
  [sympow-2.023.6]   **ERROR**: Could not find rm
  [sympow-2.023.6]   Building sympow-2.023.6
  [sympow-2.023.6]   make[5]: *** No targets specified and no makefile found.  Stop.
  [sympow-2.023.6]   ********************************************************************************
```



---

Comment by mkoeppe created at 2021-06-29 16:02:53

The build error of r suggests that `build/pkgs/iconv/spkg-configure.m4` is insufficient


---

Comment by git created at 2021-06-29 16:45:30

Changing status from positive_review to needs_review.


---

Comment by git created at 2021-06-29 16:45:30

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by mkoeppe created at 2021-06-29 18:19:31

With these packages added, it works for me


---

Comment by dimpase created at 2021-06-29 19:39:48

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2021-06-29 19:39:48

ok


---

Comment by mkoeppe created at 2021-06-29 20:31:56

Thanks.


---

Comment by mkoeppe created at 2021-07-20 20:55:18

Changing priority from minor to critical.


---

Comment by vbraun created at 2021-07-24 15:28:41

Resolution: fixed
