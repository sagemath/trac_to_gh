# Issue 12132: Singular build failure on OS X 10.4 when directory name is long

Issue created by migration from https://trac.sagemath.org/ticket/12304

Original creator: jdemeyer

Original creation time: 2012-01-13 11:07:02

Assignee: tbd

CC:  malb kcrisman

When building Sage within a directory with a long name, singular fails to build on OS X 10.4.  For example:

```
$ pwd
/Users/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-sage-4.8
```


This problem was discovered by the newly added "moufang" (UGent) buildbot.

This is because of a problem with `src/factory/configure` and is fixed by generating `configure` with a more recent `autoconf` version.


---

Comment by jdemeyer created at 2012-01-13 11:29:56

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-01-13 11:32:09

Changing priority from major to critical.


---

Comment by kcrisman created at 2012-01-13 19:49:32

So do you think this is the problem I had?  After all, names with `prealpha` in them are longer than those with `alpha` in them...


---

Comment by jdemeyer created at 2012-01-13 22:45:20

Replying to [comment:3 kcrisman]:
> So do you think this is the problem I had?
The new spkg fixes a problem, but I don't know if this caused your build failure.  Just try the new spkg here and let me know whether it works...


---

Comment by jdemeyer created at 2012-01-15 09:58:44

Replying to [comment:3 kcrisman]:
> So do you think this is the problem I had?
No, I reproduced your problem.  It has nothing to do with Singular, it is caused by #11073.  Can you copy the file `spkg/bin/testcc.sh` to `local/bin/testcc.sh` and try building again?  This file was moved in #11073.


---

Comment by kcrisman created at 2012-01-17 14:56:40

> > So do you think this is the problem I had?
> No, I reproduced your problem.  It has nothing to do with Singular, it is caused by #11073.  Can you copy the file `spkg/bin/testcc.sh` to `local/bin/testcc.sh` and try building again?  This file was moved in #11073.
I _finally_ was able to get Xcode for one of my old home computers with similar specs, and building 5.0.beta0 went fine (which has the full #11073, including the cp to local/bin).    Still checking on my work computer but no problems in Singular thus far.


---

Comment by kcrisman created at 2012-01-17 14:57:15

I can try to build Sage with a really long directory name if you'd like to test this ticket.  How long will it have to be?


---

Comment by jdemeyer created at 2012-01-17 15:49:20

It doesn't have to be super-long, try the example in the ticket description.


---

Comment by kcrisman created at 2012-01-17 16:29:08

> It doesn't have to be super-long, try the example in the ticket description.
Okay, I'll try this when the load is lower on that computer.

----

The #11073 definitely was fixed, thanks.


---

Comment by kcrisman created at 2012-01-19 13:35:28

Okay, I have now observed the failure.  I've downloaded the new spkg and should know more in about an hour.  Actually, more like five minutes since that's where the other one broke, but might as well let it finish :)


---

Comment by kcrisman created at 2012-01-19 15:25:06

It works!  I will _not_ try this on other platforms, trusting it works to the release manager.  I'm certainly not going to try to compare that new conf file to the old one, and I don't understand it in any case.

It seems like the changes in the spkg are not checked in, though.  Since that's the case, you might as well fix the typo "spgk-changes" in SPKG.txt.


---

Comment by jdemeyer created at 2012-01-19 16:42:58

Replying to [comment:12 kcrisman]:
> It works!  I will _not_ try this on other platforms, trusting it works to the release manager.
In any case, the release will be tested on the buildbot.

> I'm certainly not going to try to compare that new conf file to the old one, and I don't understand it in any case.
Obviously, you shouldn't.  Now that upstream made the same change, you can consider the patch as coming from upstream.

> It seems like the changes in the spkg are not checked in, though.
Done.

> Since that's the case, you might as well fix the typo "spgk-changes" in SPKG.txt.
Done.


---

Comment by kcrisman created at 2012-01-19 16:55:40

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-01-19 16:55:40

Looks good.


---

Comment by jdemeyer created at 2012-01-20 08:37:30

Resolution: fixed
