# Issue 14479: New datastructure for iet

archive/issues_014479.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  fougeroc\n\nIn #8386 we decided to only move iet to sage/dynamics. This ticket stands for the creation of the new datatype and the correction of the following bug\n\n```\nsage: p = iet.Permutation('a b','b a')\nsage: q = iet.Permutation('b a','a b')\nsage: p == q\nTrue\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14683\n\n",
    "created_at": "2013-06-03T20:42:24Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "New datastructure for iet",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14479",
    "user": "https://github.com/videlec"
}
```
Assignee: sage-combinat

CC:  fougeroc

In #8386 we decided to only move iet to sage/dynamics. This ticket stands for the creation of the new datatype and the correction of the following bug

```
sage: p = iet.Permutation('a b','b a')
sage: q = iet.Permutation('b a','a b')
sage: p == q
True
```


Issue created by migration from https://trac.sagemath.org/ticket/14683





---

archive/issue_events_041993.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41993"
}
```



---

archive/issue_events_041994.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41994"
}
```



---

archive/issue_events_041995.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41995"
}
```



---

archive/issue_comments_182977.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-04-14T14:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182977",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_182978.json:
```json
{
    "body": "Changing keywords from \"\" to \"iet, flat surfaces\".",
    "created_at": "2014-04-14T14:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182978",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "iet, flat surfaces".



---

archive/issue_events_041996.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41996"
}
```



---

archive/issue_events_041997.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41997"
}
```



---

archive/issue_comments_182979.json:
```json
{
    "body": "rebased. Is this needs review ?\n----\nNew commits:",
    "created_at": "2014-07-18T19:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182979",
    "user": "https://github.com/fchapoton"
}
```

rebased. Is this needs review ?
----
New commits:



---

archive/issue_comments_182980.json:
```json
{
    "body": "Hi Frederic,\n\nThanks for the update. It would be nice if you provide clearer message with your commit. The following is completely meaningless\n\n```\nMerge branch 'u/vdelecroix/14683-iet_new_datastructure' of\nssh://trac.sagemath.org:22/sage into 14683\n```\n\n\nVincent",
    "created_at": "2014-07-19T19:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182980",
    "user": "https://github.com/videlec"
}
```

Hi Frederic,

Thanks for the update. It would be nice if you provide clearer message with your commit. The following is completely meaningless

```
Merge branch 'u/vdelecroix/14683-iet_new_datastructure' of
ssh://trac.sagemath.org:22/sage into 14683
```


Vincent



---

archive/issue_comments_182981.json:
```json
{
    "body": "This was just a rebase, as explained in the comment. Once again, is this ticket in \"needs review\" ?",
    "created_at": "2014-07-19T20:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182981",
    "user": "https://github.com/fchapoton"
}
```

This was just a rebase, as explained in the comment. Once again, is this ticket in "needs review" ?



---

archive/issue_comments_182982.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-07-20T09:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182982",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182983.json:
```json
{
    "body": "Hi Frederic,\n\nYour comment on trac will not appear in the git history. So please, set your message to \"rebase #14683 on sage-X.betaY\" or something meaningful. The fact that it is \"just a rebase\" is not an argument to have an ugly commit message.\n\nAnd yes it is in needs review.\n\nVincent",
    "created_at": "2014-07-20T09:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182983",
    "user": "https://github.com/videlec"
}
```

Hi Frederic,

Your comment on trac will not appear in the git history. So please, set your message to "rebase #14683 on sage-X.betaY" or something meaningful. The fact that it is "just a rebase" is not an argument to have an ugly commit message.

And yes it is in needs review.

Vincent



---

archive/issue_comments_182984.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-20T16:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_182985.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-22T14:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_182986.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-22T15:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_182987.json:
```json
{
    "body": "Hello Vincent,\n\nI am in the middle of the process of reading quickly the code, making small cosmetic changes, like putting doctest continuation and raise statements to new standards, etc. Once done, I will run the tests.\n\nIf the tests pass, I could give a positive review, but without checking the new data structure. would it be ok to you ? Have you used this branch heavily, so that you know that it works (and is really better than the current state) ?",
    "created_at": "2014-07-22T15:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182987",
    "user": "https://github.com/fchapoton"
}
```

Hello Vincent,

I am in the middle of the process of reading quickly the code, making small cosmetic changes, like putting doctest continuation and raise statements to new standards, etc. Once done, I will run the tests.

If the tests pass, I could give a positive review, but without checking the new data structure. would it be ok to you ? Have you used this branch heavily, so that you know that it works (and is really better than the current state) ?



---

archive/issue_comments_182988.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-23T09:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182988",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_041998.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41998"
}
```



---

archive/issue_events_041999.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-41999"
}
```



---

archive/issue_comments_182989.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-10-01T08:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182989",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_182990.json:
```json
{
    "body": "What's your justification for removing doctests like\n\n```\nTESTS::\n\n    sage: t(-3/2)\n    Traceback (most recent call last):\n     ...\n    ValueError: value must positive and smaller than length\n```\n\nand replacing the `raise ValueError` with an `assert`?\n\n(note that I don't really care about this ticket, I am just looking for abuses of `assert`)",
    "created_at": "2014-10-01T08:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182990",
    "user": "https://github.com/jdemeyer"
}
```

What's your justification for removing doctests like

```
TESTS::

    sage: t(-3/2)
    Traceback (most recent call last):
     ...
    ValueError: value must positive and smaller than length
```

and replacing the `raise ValueError` with an `assert`?

(note that I don't really care about this ticket, I am just looking for abuses of `assert`)



---

archive/issue_comments_182991.json:
```json
{
    "body": "Replying to [comment:15 jdemeyer]:\n> What's your justification for removing doctests like\n> {{{\n> TESTS::\n> \n>     sage: t(-3/2)\n>     Traceback (most recent call last):\n>      ...\n>     ValueError: value must positive and smaller than length\n> }}}\n> and replacing the `raise ValueError` with an `assert`?\n\nBad design choice ;-P\n\nThis ticket is pending since it needs some more intensive testing/proof of concepts.\n\nVincent",
    "created_at": "2014-10-01T08:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182991",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:15 jdemeyer]:
> What's your justification for removing doctests like
> {{{
> TESTS::
> 
>     sage: t(-3/2)
>     Traceback (most recent call last):
>      ...
>     ValueError: value must positive and smaller than length
> }}}
> and replacing the `raise ValueError` with an `assert`?

Bad design choice ;-P

This ticket is pending since it needs some more intensive testing/proof of concepts.

Vincent



---

archive/issue_comments_182992.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-10-01T09:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182992",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_182993.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-28T12:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_042000.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-28T12:02:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42000"
}
```



---

archive/issue_events_042001.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-28T12:02:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42001"
}
```



---

archive/issue_comments_182994.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-26T11:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182994",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_042002.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-26T12:00:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42002"
}
```



---

archive/issue_events_042003.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-26T12:00:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42003"
}
```



---

archive/issue_events_042004.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-27T17:32:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42004"
}
```



---

archive/issue_events_042005.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-05-27T17:32:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42005"
}
```



---

archive/issue_comments_182995.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-27T17:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182995",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182996.json:
```json
{
    "body": "ok, I agree this could be closed. But maybe there would be a short way to solve the bug ?",
    "created_at": "2016-05-27T19:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182996",
    "user": "https://github.com/fchapoton"
}
```

ok, I agree this could be closed. But maybe there would be a short way to solve the bug ?



---

archive/issue_comments_182997.json:
```json
{
    "body": "I am focusing on #20695 and will not fix this bug in the mean time.",
    "created_at": "2016-05-28T00:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182997",
    "user": "https://github.com/videlec"
}
```

I am focusing on #20695 and will not fix this bug in the mean time.



---

archive/issue_comments_182998.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-28T06:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182998",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182999.json:
```json
{
    "body": "ok, then",
    "created_at": "2016-05-28T06:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-182999",
    "user": "https://github.com/fchapoton"
}
```

ok, then



---

archive/issue_events_042006.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-12T12:02:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14479#event-42006"
}
```



---

archive/issue_comments_183000.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-12T12:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14479#issuecomment-183000",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
