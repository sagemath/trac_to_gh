# Issue 28903: sagedoc introspection removes all backslashes

archive/issues_028903.json:
```json
{
    "body": "The unconditional removal of backslashes leads to incorrect display of docstrings, for example:\n\n\n```\nsage: BinaryTree.to_full?\n...\n      sage: ascii_art(bt.to_full())\n           __o___\n          /\n        _o_       o\n       /\n      o     o\n           /\n          o   o\n...\n```\n\n\nThe correct docstring should contain:\n\n```\n                 __o___\n                /      \\\n              _o_       o\n             /   \\\n            o     o\n                 / \\\n                o   o\n```\n\n\nThis affects both the command line and the jupyter notebook.\n\nA consequence of the change on this ticket is that unknown latex macros such as `\\leftarrow` are rendered as is and are not converted to `leftarrow` anymore.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29140\n\n",
    "created_at": "2020-02-02T12:54:52Z",
    "labels": [
        "documentation",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "sagedoc introspection removes all backslashes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28903",
    "user": "@mwageringel"
}
```
The unconditional removal of backslashes leads to incorrect display of docstrings, for example:


```
sage: BinaryTree.to_full?
...
      sage: ascii_art(bt.to_full())
           __o___
          /
        _o_       o
       /
      o     o
           /
          o   o
...
```


The correct docstring should contain:

```
                 __o___
                /      \
              _o_       o
             /   \
            o     o
                 / \
                o   o
```


This affects both the command line and the jupyter notebook.

A consequence of the change on this ticket is that unknown latex macros such as `\leftarrow` are rendered as is and are not converted to `leftarrow` anymore.


Issue created by migration from https://trac.sagemath.org/ticket/29140





---

archive/issue_comments_409183.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-02-02T13:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409183",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_409184.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-02-02T13:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409184",
    "user": "@mwageringel"
}
```

New commits:



---

archive/issue_comments_409185.json:
```json
{
    "body": "A bit disjoint from the purpose of the ticket: could you add `\\\\leftarrow` and `\\\\rightarrow` to the `math_substitutes` list?",
    "created_at": "2020-02-15T15:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409185",
    "user": "@videlec"
}
```

A bit disjoint from the purpose of the ticket: could you add `\\leftarrow` and `\\rightarrow` to the `math_substitutes` list?



---

archive/issue_comments_409186.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-17T16:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409186",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409187.json:
```json
{
    "body": "I have added some common arrow symbols. If using unicode is ok, we could also add Greek letters and a few other frequent math symbols.",
    "created_at": "2020-02-17T16:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409187",
    "user": "@mwageringel"
}
```

I have added some common arrow symbols. If using unicode is ok, we could also add Greek letters and a few other frequent math symbols.



---

archive/issue_comments_409188.json:
```json
{
    "body": "Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)\n\nDo you know whether the pyflakes report is meaningful?\n\n```\nsrc/sage/misc/sagedoc.py:769: 'sage.all' imported but unused\n```\n",
    "created_at": "2020-02-17T20:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409188",
    "user": "@videlec"
}
```

Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)

Do you know whether the pyflakes report is meaningful?

```
src/sage/misc/sagedoc.py:769: 'sage.all' imported but unused
```




---

archive/issue_comments_409189.json:
```json
{
    "body": "Replying to [comment:5 vdelecroix]:\n> Do you know whether the pyflakes report is meaningful?\n> {{{\n> src/sage/misc/sagedoc.py:769: 'sage.all' imported but unused\n> }}}\nIt is a false positive. The import is needed for the use of `eval('sage.all.%s'%obj, locals())`.",
    "created_at": "2020-02-17T20:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409189",
    "user": "@mwageringel"
}
```

Replying to [comment:5 vdelecroix]:
> Do you know whether the pyflakes report is meaningful?
> {{{
> src/sage/misc/sagedoc.py:769: 'sage.all' imported but unused
> }}}
It is a false positive. The import is needed for the use of `eval('sage.all.%s'%obj, locals())`.



---

archive/issue_comments_409190.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-17T20:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409190",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_409191.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-02-21T22:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409191",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_409192.json:
```json
{
    "body": "Replying to [comment:5 vdelecroix]:\n> Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)\n\nI just want to mention that Julia has a quite extensive list of [latex-unicode mappings](https://github.com/JuliaLang/julia/blob/v1.4.0-rc2/stdlib/REPL/src/latex_symbols.jl) that could be used for that purpose. The IPython latex tab-completion is based on that, but is limited to valid Python identifiers.",
    "created_at": "2020-02-25T17:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28903#issuecomment-409192",
    "user": "@mwageringel"
}
```

Replying to [comment:5 vdelecroix]:
> Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)

I just want to mention that Julia has a quite extensive list of [latex-unicode mappings](https://github.com/JuliaLang/julia/blob/v1.4.0-rc2/stdlib/REPL/src/latex_symbols.jl) that could be used for that purpose. The IPython latex tab-completion is based on that, but is limited to valid Python identifiers.
