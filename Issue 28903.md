# Issue 28903: sagedoc introspection removes all backslashes

Issue created by migration from https://trac.sagemath.org/ticket/29140

Original creator: @mwageringel

Original creation time: 2020-02-02 12:54:52

The unconditional removal of backslashes leads to incorrect display of docstrings, for example:


```
sage: BinaryTree.to_full?
...
      sage: ascii_art(bt.to_full())
           __o___
          /
        _o_       o
       /
      o     o
           /
          o   o
...
```


The correct docstring should contain:

```
                 __o___
                /      \
              _o_       o
             /   \
            o     o
                 / \
                o   o
```


This affects both the command line and the jupyter notebook.

A consequence of the change on this ticket is that unknown latex macros such as `\leftarrow` are rendered as is and are not converted to `leftarrow` anymore.



---

Comment by @mwageringel created at 2020-02-02 13:01:20

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2020-02-02 13:01:20

New commits:


---

Comment by vdelecroix created at 2020-02-15 15:12:24

A bit disjoint from the purpose of the ticket: could you add `\\leftarrow` and `\\rightarrow` to the `math_substitutes` list?


---

Comment by git created at 2020-02-17 16:56:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2020-02-17 16:57:31

I have added some common arrow symbols. If using unicode is ok, we could also add Greek letters and a few other frequent math symbols.


---

Comment by vdelecroix created at 2020-02-17 20:08:05

Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)

Do you know whether the pyflakes report is meaningful?

```
src/sage/misc/sagedoc.py:769: 'sage.all' imported but unused
```



---

Comment by @mwageringel created at 2020-02-17 20:16:31

Replying to [comment:5 vdelecroix]:
> Do you know whether the pyflakes report is meaningful?
> {{{
> src/sage/misc/sagedoc.py:769: 'sage.all' imported but unused
> }}}
It is a false positive. The import is needed for the use of `eval('sage.all.%s'%obj, locals())`.


---

Comment by vdelecroix created at 2020-02-17 20:34:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-02-21 22:17:25

Resolution: fixed


---

Comment by @mwageringel created at 2020-02-25 17:00:49

Replying to [comment:5 vdelecroix]:
> Let us stick to ascii for now. (though given that Python 3 strings are unicode, we should keep in mind to moving to unicode for sage-9.2)

I just want to mention that Julia has a quite extensive list of [latex-unicode mappings](https://github.com/JuliaLang/julia/blob/v1.4.0-rc2/stdlib/REPL/src/latex_symbols.jl) that could be used for that purpose. The IPython latex tab-completion is based on that, but is limited to valid Python identifiers.
