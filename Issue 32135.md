# Issue 32135: requests: Upgrade to 2.26.0, add new (unvendored) deps

archive/issues_032135.json:
```json
{
    "body": "CC:  @fchapoton @slel @dimpase\n\n(split out from #31280)\n\nAs noted in #31280#comment:65, this will help for #30768 and hence for Python 3.10 compatibility\n\nIssue created by migration from https://trac.sagemath.org/ticket/32372\n\n",
    "created_at": "2021-08-12T17:56:45Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "requests: Upgrade to 2.26.0, add new (unvendored) deps",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32135",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @fchapoton @slel @dimpase

(split out from #31280)

As noted in #31280#comment:65, this will help for #30768 and hence for Python 3.10 compatibility

Issue created by migration from https://trac.sagemath.org/ticket/32372





---

archive/issue_comments_458396.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-12T17:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458396",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458397.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-12T17:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458397",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_458398.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T18:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458399.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-13T01:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458399",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_458400.json:
```json
{
    "body": "requests 2.26.0 has switched from `chardet` to `charset_normalizer`\nhttps://docs.python-requests.org/en/master/community/updates/#id1",
    "created_at": "2021-08-13T01:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458400",
    "user": "https://github.com/mkoeppe"
}
```

requests 2.26.0 has switched from `chardet` to `charset_normalizer`
https://docs.python-requests.org/en/master/community/updates/#id1



---

archive/issue_comments_458401.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T04:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458402.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-13T04:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458402",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_458403.json:
```json
{
    "body": "Would a round of github-actions be a good way\nto start a review of this?",
    "created_at": "2021-08-21T12:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458403",
    "user": "https://github.com/slel"
}
```

Would a round of github-actions be a good way
to start a review of this?



---

archive/issue_comments_458404.json:
```json
{
    "body": "I have launched one some hours ago. It should take 1 day or more.\n\nhttps://github.com/sagemath/sagetrac-mirror/actions/runs/1153312296",
    "created_at": "2021-08-21T15:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458404",
    "user": "https://github.com/fchapoton"
}
```

I have launched one some hours ago. It should take 1 day or more.

https://github.com/sagemath/sagetrac-mirror/actions/runs/1153312296



---

archive/issue_comments_458405.json:
```json
{
    "body": "apparently, the github CI is not able to use the \"upstream_url\" for \"charset_normalizer\"",
    "created_at": "2021-08-21T18:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458405",
    "user": "https://github.com/fchapoton"
}
```

apparently, the github CI is not able to use the "upstream_url" for "charset_normalizer"



---

archive/issue_comments_458406.json:
```json
{
    "body": "The download failure on `ubuntu-trusty-standard` [https://github.com/sagemath/sagetrac-mirror/runs/3388617349?check_suite_focus=true](https://github.com/sagemath/sagetrac-mirror/runs/3388617349?check_suite_focus=true)\n\n```\n  [urllib3-1.26.6]   [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n  [urllib3-1.26.6]   ERROR [transfer|run:135]: [Errno 403] SNI is required: '//pypi.io/packages/source/u/urllib3/urllib3-1.26.6.tar.gz'\n  [urllib3-1.26.6]   ************************************************************************\n  [urllib3-1.26.6]   Traceback (most recent call last):\n  [urllib3-1.26.6]     File \"/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 126, in run_safe\n  [urllib3-1.26.6]       run()\n```\n\nis new (and unrelated to #32403)",
    "created_at": "2021-08-21T20:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458406",
    "user": "https://github.com/mkoeppe"
}
```

The download failure on `ubuntu-trusty-standard` [https://github.com/sagemath/sagetrac-mirror/runs/3388617349?check_suite_focus=true](https://github.com/sagemath/sagetrac-mirror/runs/3388617349?check_suite_focus=true)

```
  [urllib3-1.26.6]   [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
  [urllib3-1.26.6]   ERROR [transfer|run:135]: [Errno 403] SNI is required: '//pypi.io/packages/source/u/urllib3/urllib3-1.26.6.tar.gz'
  [urllib3-1.26.6]   ************************************************************************
  [urllib3-1.26.6]   Traceback (most recent call last):
  [urllib3-1.26.6]     File "/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 126, in run_safe
  [urllib3-1.26.6]       run()
```

is new (and unrelated to #32403)



---

archive/issue_comments_458407.json:
```json
{
    "body": "This appears to be from https://github.com/pypa/pypi-support/issues/978 (\"Deprecation of non-SNI compatible clients\")",
    "created_at": "2021-08-21T20:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458407",
    "user": "https://github.com/mkoeppe"
}
```

This appears to be from https://github.com/pypa/pypi-support/issues/978 ("Deprecation of non-SNI compatible clients")



---

archive/issue_comments_458408.json:
```json
{
    "body": "I've opened #32405 for this failure; it has no technical relation to the present ticket.",
    "created_at": "2021-08-21T22:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458408",
    "user": "https://github.com/mkoeppe"
}
```

I've opened #32405 for this failure; it has no technical relation to the present ticket.



---

archive/issue_comments_458409.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-30T20:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458409",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_458410.json:
```json
{
    "body": "lgtm",
    "created_at": "2021-08-30T20:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458410",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_458411.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-08-30T20:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458411",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_458412.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-07T20:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32135#issuecomment-458412",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
