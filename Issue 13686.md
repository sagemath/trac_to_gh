# Issue 13686: small bug in point3d

archive/issues_013686.json:
```json
{
    "body": "Assignee: jason, was\n\nThe following three commands work as expected (a Graphics object is returned)\n\n```\nsage: points([(1,1)])                                                                                      \n\nsage: points(iter([(1,1)]))                                                                                \n\nsage: points([(1,1,1)])                                                                                    \n```\n\nbut the following command raises an `AttributeError`.\n\n```\nsage: points(iter([(1,1,1)]))\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n\n/home/jaje/dropbox/Dropbox/IFS/<ipython console> in <module>()\n\n/home/jaje/sage-5.5/local/lib/python2.7/site-packages/sage/plot/point.pyc in point(points, **kwds)\n    310     except (ValueError, TypeError):\n    311         from sage.plot.plot3d.shapes2 import point3d\n--> 312         return point3d(points, **kwds)\n    313 \n    314 @rename_keyword(color='rgbcolor', pointsize='size')\n\n/home/jaje/sage-5.5/local/lib/python2.7/site-packages/sage/plot/plot3d/shapes2.pyc in point3d(v, size, **kwds)\n   1021     else:\n   1022         A = sum([Point(z, size, **kwds) for z in v])\n-> 1023         A._set_extra_kwds(kwds)\n   1024         return A\n   1025 \n\nAttributeError: 'int' object has no attribute '_set_extra_kwds'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13890\n\n",
    "created_at": "2012-12-30T23:11:56Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "title": "small bug in point3d",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13686",
    "user": "tjolivet"
}
```
Assignee: jason, was

The following three commands work as expected (a Graphics object is returned)

```
sage: points([(1,1)])                                                                                      

sage: points(iter([(1,1)]))                                                                                

sage: points([(1,1,1)])                                                                                    
```

but the following command raises an `AttributeError`.

```
sage: points(iter([(1,1,1)]))
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/jaje/dropbox/Dropbox/IFS/<ipython console> in <module>()

/home/jaje/sage-5.5/local/lib/python2.7/site-packages/sage/plot/point.pyc in point(points, **kwds)
    310     except (ValueError, TypeError):
    311         from sage.plot.plot3d.shapes2 import point3d
--> 312         return point3d(points, **kwds)
    313 
    314 @rename_keyword(color='rgbcolor', pointsize='size')

/home/jaje/sage-5.5/local/lib/python2.7/site-packages/sage/plot/plot3d/shapes2.pyc in point3d(v, size, **kwds)
   1021     else:
   1022         A = sum([Point(z, size, **kwds) for z in v])
-> 1023         A._set_extra_kwds(kwds)
   1024         return A
   1025 

AttributeError: 'int' object has no attribute '_set_extra_kwds'
```


Issue created by migration from https://trac.sagemath.org/ticket/13890





---

archive/issue_comments_169650.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-28T09:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169650",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_169651.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-28T09:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169651",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_169652.json:
```json
{
    "body": "Changing keywords from \"\" to \"plot3d, point3d\".",
    "created_at": "2014-10-28T09:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169652",
    "user": "chapoton"
}
```

Changing keywords from "" to "plot3d, point3d".



---

archive/issue_comments_169653.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-28T09:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169653",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_169654.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T10:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169654",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169655.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-28T10:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169655",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169656.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-28T10:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169656",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_169657.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-28T10:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169657",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_169658.json:
```json
{
    "body": "This applies, but apparently needs rebasing since I still get the same error after applying this.  There does seem to be some new code in that spot.\n\nInterestingly, n the meantime the original error has changed.\n\n```\nsage: points(iter([(1,1,1)]))\n---------------------------------------------------------------------------\n   1077 \n   1078     \"\"\"\n-> 1079     if len(v) == 3:\n   1080         try:\n   1081             # check if the first element can be changed to a float\n\nTypeError: object of type 'listiterator' has no len()\n```\n\n\nBy the way, should we try to accommodate generators as well?   \n\n```\npoints( (x,x,x) for x in range(3) )\n```\n\nor the like.",
    "created_at": "2014-11-13T19:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169658",
    "user": "kcrisman"
}
```

This applies, but apparently needs rebasing since I still get the same error after applying this.  There does seem to be some new code in that spot.

Interestingly, n the meantime the original error has changed.

```
sage: points(iter([(1,1,1)]))
---------------------------------------------------------------------------
   1077 
   1078     """
-> 1079     if len(v) == 3:
   1080         try:
   1081             # check if the first element can be changed to a float

TypeError: object of type 'listiterator' has no len()
```


By the way, should we try to accommodate generators as well?   

```
points( (x,x,x) for x in range(3) )
```

or the like.



---

archive/issue_comments_169659.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-13T19:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169659",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_169660.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-14T14:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169660",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169661.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-14T14:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169661",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_169662.json:
```json
{
    "body": "I have now made so that use of iterators is forbidden in `points`. The reason is that one cannot test if the point has 2 or 3 dimensions without burning the iterator. So it does not make sense to try to guess what is the expected dimension. But iterators are now allowed in both `point2d` and `point3d`.",
    "created_at": "2014-11-14T14:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169662",
    "user": "chapoton"
}
```

I have now made so that use of iterators is forbidden in `points`. The reason is that one cannot test if the point has 2 or 3 dimensions without burning the iterator. So it does not make sense to try to guess what is the expected dimension. But iterators are now allowed in both `point2d` and `point3d`.



---

archive/issue_comments_169663.json:
```json
{
    "body": "Aha!  I see what happened.   Glad I tried that out.   I'll take a look at this momentarily.",
    "created_at": "2014-11-14T15:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169663",
    "user": "kcrisman"
}
```

Aha!  I see what happened.   Glad I tried that out.   I'll take a look at this momentarily.



---

archive/issue_comments_169664.json:
```json
{
    "body": "Hmm, but look at #10478.  There is an explicit example there (oddly, not doctested) for\n\n```\nline(iter([(0,0), (1,0), (2,2)]))\n```\n\nand `points` and `line` should really work the same.  Can't we just do `points = list(points)` and then test like they do there?",
    "created_at": "2014-11-14T15:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169664",
    "user": "kcrisman"
}
```

Hmm, but look at #10478.  There is an explicit example there (oddly, not doctested) for

```
line(iter([(0,0), (1,0), (2,2)]))
```

and `points` and `line` should really work the same.  Can't we just do `points = list(points)` and then test like they do there?



---

archive/issue_comments_169665.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-19T16:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169665",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169666.json:
```json
{
    "body": "ping ?",
    "created_at": "2014-12-26T16:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169666",
    "user": "chapoton"
}
```

ping ?



---

archive/issue_comments_169667.json:
```json
{
    "body": "Sorry, other business (Sage-wise as well) to attend to, and then a break.  Is this behavior desired?\n\n```\nsage: point(iter([]))  # works\n\nsage: point2d(iter([]))\n---------------------------------------------------------------------------\nValueError             \n```\n\nActually, probably only the latter (and 3d version thereof) is desired, since one can't know what dimension an empty list should be... or we could default to 2d.",
    "created_at": "2015-01-04T02:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169667",
    "user": "kcrisman"
}
```

Sorry, other business (Sage-wise as well) to attend to, and then a break.  Is this behavior desired?

```
sage: point(iter([]))  # works

sage: point2d(iter([]))
---------------------------------------------------------------------------
ValueError             
```

Actually, probably only the latter (and 3d version thereof) is desired, since one can't know what dimension an empty list should be... or we could default to 2d.



---

archive/issue_comments_169668.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-01-23T14:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169668",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_169669.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-29T20:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169669",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169670.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-01-29T20:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169670",
    "user": "chapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_169671.json:
```json
{
    "body": "So the empty iterator should be 2d, not 3d (or nothing)?  Just checking if this is the \"right\" design decision.",
    "created_at": "2015-02-03T01:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169671",
    "user": "kcrisman"
}
```

So the empty iterator should be 2d, not 3d (or nothing)?  Just checking if this is the "right" design decision.



---

archive/issue_comments_169672.json:
```json
{
    "body": "Sorry, I do not understand if you still have a concern or not ?",
    "created_at": "2015-02-05T10:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169672",
    "user": "chapoton"
}
```

Sorry, I do not understand if you still have a concern or not ?



---

archive/issue_comments_169673.json:
```json
{
    "body": "Well, I'm asking about that.  To me `point2d([])` and `point3d([])` are meaningful; `point([])` maybe isn't, because it isn't clear what the default dimension should be.  Same for empty iterators.  Maybe I'm thinking about it too much.",
    "created_at": "2015-02-05T14:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169673",
    "user": "kcrisman"
}
```

Well, I'm asking about that.  To me `point2d([])` and `point3d([])` are meaningful; `point([])` maybe isn't, because it isn't clear what the default dimension should be.  Same for empty iterators.  Maybe I'm thinking about it too much.



---

archive/issue_comments_169674.json:
```json
{
    "body": "It seems to me that the initial aim of this ticket is met (namely allowing to use iterators in all kinds of points). Maybe this is enough ?",
    "created_at": "2015-02-05T16:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169674",
    "user": "chapoton"
}
```

It seems to me that the initial aim of this ticket is met (namely allowing to use iterators in all kinds of points). Maybe this is enough ?



---

archive/issue_comments_169675.json:
```json
{
    "body": "Yes, upon further thought you are right, that was a pre-existing thing.  Thanks!  Sorry this small thing ended up going crazy long.",
    "created_at": "2015-02-12T03:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169675",
    "user": "kcrisman"
}
```

Yes, upon further thought you are right, that was a pre-existing thing.  Thanks!  Sorry this small thing ended up going crazy long.



---

archive/issue_comments_169676.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-12T03:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169676",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_169677.json:
```json
{
    "body": "Some doctests  fail, e.g.\n\n```\nsage -t --long --warn-long 56.5 src/sage/geometry/polyhedron/ppl_lattice_polygon.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/ppl_lattice_polygon.py\", line 413, in sage.geometry.polyhedron.ppl_lattice_polygon.LatticePolygon_PPL_class.plot\nFailed example:\n    LatticePolytope_PPL([0], [1]).plot()\nExpected:\n    Graphics object consisting of 2 graphics primitives\nGot:\n    Graphics object consisting of 3 graphics primitives\n```\n",
    "created_at": "2015-02-17T09:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169677",
    "user": "vbraun"
}
```

Some doctests  fail, e.g.

```
sage -t --long --warn-long 56.5 src/sage/geometry/polyhedron/ppl_lattice_polygon.py
**********************************************************************
File "src/sage/geometry/polyhedron/ppl_lattice_polygon.py", line 413, in sage.geometry.polyhedron.ppl_lattice_polygon.LatticePolygon_PPL_class.plot
Failed example:
    LatticePolytope_PPL([0], [1]).plot()
Expected:
    Graphics object consisting of 2 graphics primitives
Got:
    Graphics object consisting of 3 graphics primitives
```




---

archive/issue_comments_169678.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-02-17T09:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169678",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_169679.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-17T10:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169679",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-17T12:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_169681.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-17T12:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169681",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_169682.json:
```json
{
    "body": "Should be good now.",
    "created_at": "2015-02-17T12:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169682",
    "user": "chapoton"
}
```

Should be good now.



---

archive/issue_comments_169683.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-17T13:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169683",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_169684.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-17T19:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13686",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13686#issuecomment-169684",
    "user": "vbraun"
}
```

Resolution: fixed
