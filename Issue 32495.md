# Issue 32495: sage.geometry.polyhedron: More # optional for test with examples that need sage.combinat etc.

Issue created by migration from https://trac.sagemath.org/ticket/32732

Original creator: mkoeppe

Original creation time: 2021-10-21 02:36:00

CC:  @kliem




---

Comment by mkoeppe created at 2021-10-21 02:49:51

Last 10 new commits:


---

Comment by mkoeppe created at 2021-10-21 02:50:02

Changing status from new to needs_review.


---

Comment by git created at 2021-10-21 02:51:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2021-10-22 09:23:00

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2021-10-22 09:23:00

lgtm


---

Comment by mkoeppe created at 2021-10-22 15:24:46

Thanks!


---

Comment by mkoeppe created at 2021-10-22 15:27:01

Changing status from positive_review to needs_work.


---

Comment by mkoeppe created at 2021-10-22 15:27:01

Except the patchbot indicates some failures


---

Comment by git created at 2021-10-22 17:34:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-22 17:37:11

But there's something else wrong:
The log indicates 
`Using --optional=argcomplete,build,ccache,debian,dochtml,pip,sage,sage.rings.real_double,sage_spkg`
... lots of the components such as `sage.plot` are missing


---

Comment by git created at 2021-10-22 19:29:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-22 19:33:04

Changing priority from major to critical.


---

Comment by git created at 2021-10-22 19:33:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-22 19:34:32

With the new diagnostic messages issued with `sage -t --verbose`, we see:

```
FeatureTestResult('sage.combinat.combination', False), reason: Failed to import `sage.combinat.combination`: cannot import name complex_mpfr
FeatureTestResult('sage.graphs.graph', False), reason: Failed to import `sage.graphs.graph`: cannot import name complex_mpfr
FeatureTestResult('sage.plot.plot', False), reason: Failed to import `sage.plot.plot`: cannot import name complex_mpfr
FeatureTestResult('sage.rings.number_field.number_field_element', False), reason: Failed to import `sage.rings.number_field.number_field_element`: cannot import name complex_mpfr
FeatureTestResult('sage.rings.real_double', True), reason: Successfully imported `sage.rings.real_double`.
FeatureTestResult('sage.symbolic.expression', False), reason: Failed to import `sage.symbolic.expression`: cannot import name complex_mpfr
```

So some cyclic import business is happening here


---

Comment by mkoeppe created at 2021-10-22 19:55:37

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2021-10-22 19:56:59

Fixing the imports, or alternatively running the sagemath feature tests *after* sage.all has been imported, will be done in a follow-up ticket.

Let's see what the patchbot says now.


---

Comment by git created at 2021-10-23 01:07:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-10-27 05:15:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-10-27 05:48:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-10-28 06:53:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2021-11-05 18:32:38

lgtm


---

Comment by dimpase created at 2021-11-05 18:32:38

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-11-05 18:58:49

Thanks!


---

Comment by vbraun created at 2021-11-12 21:27:57

Resolution: fixed


---

Comment by arojas created at 2021-11-14 12:14:05

Is there a ticket to fix the imports already? Lots of tests are being skipped in beta6 because of this.


---

Comment by mkoeppe created at 2021-11-14 17:55:13

Help is welcome on tickets 
- #30741 ... which attempts to fix the cyclic import issues
- #32174/#30746 ... which will sidestep this issue by importing stuff later
