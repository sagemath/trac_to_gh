# Issue 22955: some_elements is trivial for orders/number fields

archive/issues_022955.json:
```json
{
    "body": "Keywords: sd86.5\n\nCurrently this is trivial\n\n```\nsage: G = GaussianIntegers()\nsage: G.some_elements()\n[1]\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/23192\n\n",
    "created_at": "2017-06-09T07:38:52Z",
    "labels": [
        "number fields",
        "major",
        "enhancement"
    ],
    "title": "some_elements is trivial for orders/number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22955",
    "user": "saraedum"
}
```
Keywords: sd86.5

Currently this is trivial

```
sage: G = GaussianIntegers()
sage: G.some_elements()
[1]
```


Issue created by migration from https://trac.sagemath.org/ticket/23192





---

archive/issue_comments_321178.json:
```json
{
    "body": "I tried to choose \"typical\" elements, please let me know if you think this is not done in a good way.\n\nEdouard\n----\nNew commits:",
    "created_at": "2017-06-10T06:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321178",
    "user": "erousseau"
}
```

I tried to choose "typical" elements, please let me know if you think this is not done in a good way.

Edouard
----
New commits:



---

archive/issue_comments_321179.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-10T06:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321179",
    "user": "erousseau"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_321180.json:
```json
{
    "body": "This looks already quite good. A few minor comments (sorry that it's so many\u2026nothing of this is really important):\n1. Many places in the documentation talk about `self` but it is usually best to avoid this (because people who don't know Python, don't understand it - and it also sounds unnatural.) So it is better to talk about \"this number field\" and \"this order\" instead.\n2. For a similar reason, you should not mention the parameter `self` in the INPUT section. From a user's perspective, these methods take no parameters, so the INPUT section can go away.\n3. Since the OUTPUT section does not say anything different from the first line of the docstring, you could as well just leave it out, but it also does not hurt.\n4. In docstrings, it is usually considered more readable, to write `t^2 - 2` instead of `t^2-2`, i.e., use spaces around `+` and `-`.\n5. I would probably not print the polynomial rings, since their not of interest here.\n6. Is `length` ever `== 1`?",
    "created_at": "2017-06-10T06:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321180",
    "user": "saraedum"
}
```

This looks already quite good. A few minor comments (sorry that it's so manyâ€¦nothing of this is really important):
1. Many places in the documentation talk about `self` but it is usually best to avoid this (because people who don't know Python, don't understand it - and it also sounds unnatural.) So it is better to talk about "this number field" and "this order" instead.
2. For a similar reason, you should not mention the parameter `self` in the INPUT section. From a user's perspective, these methods take no parameters, so the INPUT section can go away.
3. Since the OUTPUT section does not say anything different from the first line of the docstring, you could as well just leave it out, but it also does not hurt.
4. In docstrings, it is usually considered more readable, to write `t^2 - 2` instead of `t^2-2`, i.e., use spaces around `+` and `-`.
5. I would probably not print the polynomial rings, since their not of interest here.
6. Is `length` ever `== 1`?



---

archive/issue_comments_321181.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-10T06:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321181",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_321182.json:
```json
{
    "body": "Replying to [comment:3 saraedum]:\n> Is `length` ever `== 1`?\n\nI don't know if we want to consider cases like that, but the user can define degenerate extensions such as\n\n\n\n```\nsage: R.<t> = QQ[]\nsage: K.<a> = QQ.extension(t)\nsage: Z = K.ring_of_integers()\nsage: Z.basis()\n[1]\n```\n\n\nthat is why I added that test.\n\nAnyway, I will change the rest, and that test too if you think that it is irrelevant. \n\nEdouard",
    "created_at": "2017-06-10T07:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321182",
    "user": "erousseau"
}
```

Replying to [comment:3 saraedum]:
> Is `length` ever `== 1`?

I don't know if we want to consider cases like that, but the user can define degenerate extensions such as



```
sage: R.<t> = QQ[]
sage: K.<a> = QQ.extension(t)
sage: Z = K.ring_of_integers()
sage: Z.basis()
[1]
```


that is why I added that test.

Anyway, I will change the rest, and that test too if you think that it is irrelevant. 

Edouard



---

archive/issue_comments_321183.json:
```json
{
    "body": "Replying to [comment:4 erousseau]:\n> Replying to [comment:3 saraedum]:\n> Anyway, I will change the rest, and that test too if you think that it is irrelevant. \nOh, I did not know that this was \"allowed\". You should definitely leave the test in then.\nYou could probably add a doctest for this, saying something like\n\n```\nTESTS:\n\nThis also works for trivial extensions::\n\nsage: ... your example ...\n```\n\nto make this clear for anybody who stumbles upon this.",
    "created_at": "2017-06-10T07:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321183",
    "user": "saraedum"
}
```

Replying to [comment:4 erousseau]:
> Replying to [comment:3 saraedum]:
> Anyway, I will change the rest, and that test too if you think that it is irrelevant. 
Oh, I did not know that this was "allowed". You should definitely leave the test in then.
You could probably add a doctest for this, saying something like

```
TESTS:

This also works for trivial extensions::

sage: ... your example ...
```

to make this clear for anybody who stumbles upon this.



---

archive/issue_comments_321184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-10T17:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321184",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321185.json:
```json
{
    "body": "I tried to follow your remarks, please let me know if I missed something.\n\nAlso, I added a test to deal with the trivial extensions in the class `NumberField`.\n\nEdouard",
    "created_at": "2017-06-10T17:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321185",
    "user": "erousseau"
}
```

I tried to follow your remarks, please let me know if I missed something.

Also, I added a test to deal with the trivial extensions in the class `NumberField`.

Edouard



---

archive/issue_comments_321186.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-10T17:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321186",
    "user": "erousseau"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_321187.json:
```json
{
    "body": "I have not tried this, but I think that the `absolute_degree` does not matter. Currently, you would miss a trivial extension of a non-trivial extension (and produce a division by zero if the second extension has `gen == 1`). Or am I missing something?",
    "created_at": "2017-06-10T18:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321187",
    "user": "saraedum"
}
```

I have not tried this, but I think that the `absolute_degree` does not matter. Currently, you would miss a trivial extension of a non-trivial extension (and produce a division by zero if the second extension has `gen == 1`). Or am I missing something?



---

archive/issue_comments_321188.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-10T18:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321188",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_321189.json:
```json
{
    "body": "Yes you are right, currently I would divide by zero if one of the extensions is trivial with a generator equal to 0 or -1. But if I use `relative_degree`, I can still divide by zero if the last extension is not trivial but there is a trivial one in the tower.\n\nOne thing I can do is just test `gen == 0` and add only `gen` to the lists of elements if it is zero, otherwise add `gen` and `gen**(-1)`.\n\nBut then, since `gen` can be anything, I can add some elements two times, e.g. if gen is 1. It is probably not a big problem...",
    "created_at": "2017-06-10T22:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321189",
    "user": "erousseau"
}
```

Yes you are right, currently I would divide by zero if one of the extensions is trivial with a generator equal to 0 or -1. But if I use `relative_degree`, I can still divide by zero if the last extension is not trivial but there is a trivial one in the tower.

One thing I can do is just test `gen == 0` and add only `gen` to the lists of elements if it is zero, otherwise add `gen` and `gen**(-1)`.

But then, since `gen` can be anything, I can add some elements two times, e.g. if gen is 1. It is probably not a big problem...



---

archive/issue_comments_321190.json:
```json
{
    "body": "Ok. I underestimated the complexity of this.\n\nSo, there's is also a completely different approach to this, basically along the lines of https://git.sagemath.org/sage.git/diff?id2=d9e145d44c3e2e18e00409ff93620d4bee6141a2&id=61b3a437fdcd9935a9e4e0b7b07b1ae2b0e30ff0. So, for number fields, you could take a, b in the underlying polynomial ring, plug in the generator of the field and create the quotient if it makes sense. For orders, you could take elements in the number field and filter out those that are in the order.",
    "created_at": "2017-06-11T01:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321190",
    "user": "saraedum"
}
```

Ok. I underestimated the complexity of this.

So, there's is also a completely different approach to this, basically along the lines of https://git.sagemath.org/sage.git/diff?id2=d9e145d44c3e2e18e00409ff93620d4bee6141a2&id=61b3a437fdcd9935a9e4e0b7b07b1ae2b0e30ff0. So, for number fields, you could take a, b in the underlying polynomial ring, plug in the generator of the field and create the quotient if it makes sense. For orders, you could take elements in the number field and filter out those that are in the order.



---

archive/issue_comments_321191.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-06-19T05:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321191",
    "user": "saraedum"
}
```

New commits:



---

archive/issue_comments_321192.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-19T05:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321192",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321193.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-19T05:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321193",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_321194.json:
```json
{
    "body": "Changing keywords from \"sd86.5\" to \"sd86.5, sd87\".",
    "created_at": "2017-07-17T17:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321194",
    "user": "roed"
}
```

Changing keywords from "sd86.5" to "sd86.5, sd87".



---

archive/issue_comments_321195.json:
```json
{
    "body": "This looks good, though I think it's a little weird that the list length isn't a parameter (but it makes sense that it isn't given the code.)",
    "created_at": "2017-07-17T21:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321195",
    "user": "aly.deines"
}
```

This looks good, though I think it's a little weird that the list length isn't a parameter (but it makes sense that it isn't given the code.)



---

archive/issue_comments_321196.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-17T21:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321196",
    "user": "aly.deines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_321197.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22955#issuecomment-321197",
    "user": "vbraun"
}
```

Resolution: fixed
