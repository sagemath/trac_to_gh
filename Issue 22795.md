# Issue 22795: linear_code.covering_radius fails due to unloaded gap package

Issue created by migration from https://trac.sagemath.org/ticket/23032

Original creator: jsrn

Original creation time: 2017-05-19 13:09:58

CC:  dimpase

Keywords: gap

Having installed `gap_packages`, the following in a fresh Sage session fails:

```
sage: C = codes.HammingCode(GF(2), 5)
sage: C.covering_radius()  # optional - gap_packages (Guava package)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
...
RuntimeError: Gap produced error output
Error, Variable: 'GeneratorMatCode' must have a value
```


This is also evident running the doc-test with `--optional=sage,gap_packages`.


---

Comment by jsrn created at 2017-05-19 13:39:26

I've added the appropriate `gap.load_packages` call, along with a guard for having it installed. I also added that guard to other places in `sage/coding` where `guava` is loaded. I also added a guard for fields of size `> 256` where the GAP function fails ungracefully (as for `linear_code.minimum_distance`). 
----
New commits:


---

Comment by jsrn created at 2017-05-19 13:39:26

Changing status from new to needs_review.


---

Comment by dimpase created at 2017-05-19 20:43:21

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2017-05-19 20:43:21

Looks good to me.


---

Comment by jsrn created at 2017-05-20 08:12:42

Thanks.


---

Comment by vbraun created at 2017-05-21 10:08:19

Resolution: fixed
