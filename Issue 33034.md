# Issue 33034: broken image EXAMPLEs in ​Density Plots

Issue created by migration from https://trac.sagemath.org/ticket/33271

Original creator: @umedoblock

Original creation time: 2022-02-01 19:26:15

I tried to run some EXAMPLEs in [Density Plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/density_plot.html)

## environment

```
macOS Monterey
Version 12.1
```



```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.5.rc2, Release Date: 2022-01-16                 │
│ Using Python 3.9.9. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```


## EXAMPLE1


```
sage: density_plot(log(x) + log(y), (x,1,10), (y,1,10), dpi=20) 
....:
```


## output image1
![](ticket::tmp_m0fft6r1.png)

## expected image1
![](https://doc.sagemath.org/html/en/reference/plotting/_images/density_plot-6.svg)

## EXAMPLE2

```
sage: density_plot(log(x) + log(y), (x,1,10), (y,1,10)).show(dpi=20) # These are
....:  equivalent 
```


## output image2
![](ticket::tmp_yoj2qy3g.png)

## expected image2
![](https://doc.sagemath.org/html/en/reference/plotting/_images/density_plot-7.svg)


---

Comment by @umedoblock created at 2022-02-01 19:26:56

output image1


---

Attachment

output image2


---

Attachment


---

Comment by @umedoblock created at 2022-02-01 19:42:30

All of the EXAMPLEs works in [Plotting fields](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot_field.html).


---

Comment by @mwageringel created at 2022-02-01 19:45:06

The documentation only includes one image for these two lines of code because they are equivalent. Expected image 1 belongs to the previous example

```
sage: density_plot(y^2 + 1 - x^3 - x, (x,-pi,pi), (y,-pi,pi))
```

so that is not relevant here.

The small size is what I obtain as well, but 20 dpi is honestly not a very high resolution, so I do not see any problem here.


---

Comment by @umedoblock created at 2022-02-02 01:38:05

low resolution image


---

Attachment

So sorry.

I gave you wrong report.

expected image1 is wrong.

I mistake.

Sorry...

And I'd like to talk about "dpi=20".

First, I hope to similar resolution image with below.


```
density_plot(y^2 + 1 - x^3 - x, (y,-pi,pi), (x,-pi,pi))
density_plot(y^2 + 1 - x^3 - x, (x,-pi,pi), (y,-pi,pi))
```


So please show "dpi=200" for sagemath beginner.

```
density_plot(log(x) + log(y), (x,1,10), (y,1,10), dpi=200)
density_plot(log(x) + log(y), (x,1,10), (y,1,10)).show(dpi=200)           
```


First I watched below image(dpi=20) and feel it broken.

I cannot make shrink image.

TOO BIG SORRY...

![](ticket:33271:a.png)


---

Attachment

low resolution image2


---

Comment by @mwageringel created at 2022-02-02 18:57:02

Changing priority from major to minor.


---

Comment by @mwageringel created at 2022-02-02 18:57:02

Changing keywords from "" to "beginner".


---

Comment by @mwageringel created at 2022-02-02 18:57:02

Changing component from graphics to documentation.


---

Comment by @mwageringel created at 2022-02-02 18:57:02

Ok, so the source of the problem is that the function `sphinx_plot` in `src/sage/docs/conf.py`, which is used to produce the images in the documentation, explicitly discards the `dpi` keyword. I assume this makes sense so that all the images in the documentation have a consistent resolution.

To avoid confusion in this example, I would suggest to replace the `dpi=20` parameter by a different one such as `aspect_ratio=1` or `gridlines=True`. This would retain the original intent of the example by showing that the keywords get passed on to `show`.


---

Comment by @mwageringel created at 2022-02-02 18:57:02

Changing type from PLEASE CHANGE to enhancement.


---

Comment by @scramblerdoodle created at 2022-04-04 11:46:27

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-04-04 18:32:16

The "Authors:" field in the ticket box should be filled out


---

Comment by @scramblerdoodle created at 2022-04-04 20:33:13

Right, sorry!


---

Comment by @mwageringel created at 2022-04-08 08:47:37

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2022-04-08 08:47:37

Thank you for the implementation. The change to the documentation can be seen [here](https://83ec6a249cd15c044d25bebdaff59fbd5fbdb819--sagemath-tobias.netlify.app/reference/plotting/sage/plot/density_plot.html#sage.plot.density_plot.density_plot) and looks good now.


---

Comment by vbraun created at 2022-04-10 13:12:19

Resolution: fixed
