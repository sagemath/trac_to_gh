# Issue 33582: build.yml: In workflow_dispatch, make container and base tag selectable

Issue created by migration from https://trac.sagemath.org/ticket/33819

Original creator: mkoeppe

Original creation time: 2022-05-07 21:19:08

CC:  @tobiasdiez chapoton klee dimpase

as done in https://github.com/sagemath/sage-patchbot/blob/master/.github/workflows/run_patchbot.yml


---

Comment by git created at 2022-07-04 03:25:46

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-07-04 04:05:15

Changing status from new to needs_review.


---

Comment by @tobiasdiez created at 2022-07-04 20:16:06

Changing status from needs_review to needs_work.


---

Comment by @tobiasdiez created at 2022-07-04 20:16:06

With these changes the normal workflow triggered by a push doesn't seem to work anymore since the fallback is not used, i.e. the workflow tries to get `ghcr.io/sagemath/sage/sage-docker--with-targets` which obviously doesn't work: https://github.com/sagemath/sagetrac-mirror/runs/7173656912?check_suite_focus=true


---

Comment by mkoeppe created at 2022-07-04 21:01:02

Ah, thanks for catching this


---

Comment by git created at 2022-07-04 21:02:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-04 21:04:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-07-04 21:04:49

Changing status from needs_work to needs_review.


---

Comment by git created at 2022-07-04 21:57:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-06 01:58:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2022-07-06 23:12:16

docs build only after applying

```diff
--- a/src/doc/en/developer/trac.rst
+++ b/src/doc/en/developer/trac.rst
@@ -288,9 +288,8 @@ After pushing a branch to a ticket, the ticket will show badges
 linking to results of automated tests that run on the patchbot and
 other â€‹tests that run on GitHub Actions.
 
-* The Patch buildbot will automatically test your ticket. See `the
-  patchbot wiki <https://trac.sagemath.org/wiki/patchbot>`_ for more
-  information about its features and limitations. Make sure that you
+* The Patch buildbot will automatically test your ticket. See :trac:`wiki/patchbot`
+  for more information about its features and limitations. Make sure that you
   look at the log, especially if the patch buildbot did not give you
   the green blob.
 
```



---

Comment by dimpase created at 2022-07-06 23:12:28

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-07-06 23:13:12

Thanks, can you push the change to the ticket please?


---

Comment by git created at 2022-07-07 04:33:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-07 04:34:20

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2022-07-07 11:23:13

lgtm


---

Comment by dimpase created at 2022-07-07 11:23:13

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-07-07 19:18:12

Thanks!


---

Comment by vbraun created at 2022-07-10 10:54:25

PDF docs don't build


---

Comment by vbraun created at 2022-07-10 10:54:25

Changing status from positive_review to needs_work.


---

Comment by git created at 2022-07-10 15:22:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-10 15:22:39

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2022-07-11 21:56:30

Resolution: fixed
