# Issue 33582: build.yml: In workflow_dispatch, make container and base tag selectable

archive/issues_033582.json:
```json
{
    "body": "CC:  @tobiasdiez chapoton klee dimpase\n\nas done in https://github.com/sagemath/sage-patchbot/blob/master/.github/workflows/run_patchbot.yml\n\nIssue created by migration from https://trac.sagemath.org/ticket/33819\n\n",
    "created_at": "2022-05-07T21:19:08Z",
    "labels": [
        "user interface",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "build.yml: In workflow_dispatch, make container and base tag selectable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33582",
    "user": "mkoeppe"
}
```
CC:  @tobiasdiez chapoton klee dimpase

as done in https://github.com/sagemath/sage-patchbot/blob/master/.github/workflows/run_patchbot.yml

Issue created by migration from https://trac.sagemath.org/ticket/33819





---

archive/issue_comments_477996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-07-04T03:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-477996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_477997.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-04T04:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-477997",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477998.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-07-04T20:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-477998",
    "user": "@tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_477999.json:
```json
{
    "body": "With these changes the normal workflow triggered by a push doesn't seem to work anymore since the fallback is not used, i.e. the workflow tries to get `ghcr.io/sagemath/sage/sage-docker--with-targets` which obviously doesn't work: https://github.com/sagemath/sagetrac-mirror/runs/7173656912?check_suite_focus=true",
    "created_at": "2022-07-04T20:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-477999",
    "user": "@tobiasdiez"
}
```

With these changes the normal workflow triggered by a push doesn't seem to work anymore since the fallback is not used, i.e. the workflow tries to get `ghcr.io/sagemath/sage/sage-docker--with-targets` which obviously doesn't work: https://github.com/sagemath/sagetrac-mirror/runs/7173656912?check_suite_focus=true



---

archive/issue_comments_478000.json:
```json
{
    "body": "Ah, thanks for catching this",
    "created_at": "2022-07-04T21:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478000",
    "user": "mkoeppe"
}
```

Ah, thanks for catching this



---

archive/issue_comments_478001.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-04T21:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478001",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478002.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-07-04T21:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478002",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_478003.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-07-04T21:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478003",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_478004.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-04T21:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478004",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478005.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-06T01:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478005",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478006.json:
```json
{
    "body": "docs build only after applying\n\n```diff\n--- a/src/doc/en/developer/trac.rst\n+++ b/src/doc/en/developer/trac.rst\n@@ -288,9 +288,8 @@ After pushing a branch to a ticket, the ticket will show badges\n linking to results of automated tests that run on the patchbot and\n other \u200btests that run on GitHub Actions.\n \n-* The Patch buildbot will automatically test your ticket. See `the\n-  patchbot wiki <https://trac.sagemath.org/wiki/patchbot>`_ for more\n-  information about its features and limitations. Make sure that you\n+* The Patch buildbot will automatically test your ticket. See :trac:`wiki/patchbot`\n+  for more information about its features and limitations. Make sure that you\n   look at the log, especially if the patch buildbot did not give you\n   the green blob.\n \n```\n",
    "created_at": "2022-07-06T23:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478006",
    "user": "dimpase"
}
```

docs build only after applying

```diff
--- a/src/doc/en/developer/trac.rst
+++ b/src/doc/en/developer/trac.rst
@@ -288,9 +288,8 @@ After pushing a branch to a ticket, the ticket will show badges
 linking to results of automated tests that run on the patchbot and
 other â€‹tests that run on GitHub Actions.
 
-* The Patch buildbot will automatically test your ticket. See `the
-  patchbot wiki <https://trac.sagemath.org/wiki/patchbot>`_ for more
-  information about its features and limitations. Make sure that you
+* The Patch buildbot will automatically test your ticket. See :trac:`wiki/patchbot`
+  for more information about its features and limitations. Make sure that you
   look at the log, especially if the patch buildbot did not give you
   the green blob.
 
```




---

archive/issue_comments_478007.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-07-06T23:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478007",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_478008.json:
```json
{
    "body": "Thanks, can you push the change to the ticket please?",
    "created_at": "2022-07-06T23:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478008",
    "user": "mkoeppe"
}
```

Thanks, can you push the change to the ticket please?



---

archive/issue_comments_478009.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-07T04:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478009",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478010.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-07-07T04:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478010",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_478011.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-07-07T11:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478011",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_478012.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-07T11:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478012",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_478013.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-07-07T19:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478013",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_478014.json:
```json
{
    "body": "PDF docs don't build",
    "created_at": "2022-07-10T10:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478014",
    "user": "vbraun"
}
```

PDF docs don't build



---

archive/issue_comments_478015.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-07-10T10:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478015",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_478016.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-10T15:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478016",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478017.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-07-10T15:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478017",
    "user": "mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_478018.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-11T21:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33582#issuecomment-478018",
    "user": "vbraun"
}
```

Resolution: fixed
