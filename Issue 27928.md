# Issue 27928: Improve symmetric functions tutorial

Issue created by migration from https://trac.sagemath.org/ticket/28165

Original creator: phubert

Original creation time: 2019-07-11 09:29:19

CC:  nthiery mlapointe falque opechenik

Keywords: symmetric functions, tutorial, fpsac2019

Improvement of the previous tutorial to make it more accessible to beginners.


---

Comment by phubert created at 2019-07-12 08:46:25

I add the new tutorial we wrote with Melodie into the file sf.py and removed redundant examples in sfa.py
I tried to be as careful as possible while merging the new tutorial into the previous one, but a second check that I didn't erase something I shouldn't would't be too much. 
Also feel free to correct any grammar and syntax mistake because my English is far from perfect. 
----
New commits:


---

Comment by phubert created at 2019-07-12 08:47:55

Changing status from new to needs_review.


---

Comment by opechenik created at 2019-07-12 13:02:11

New commits:


---

Comment by opechenik created at 2019-07-12 13:07:13

I think that instead of having the local bibliography of references at the bottom, you are supposed to put them in the global bibliography file $SAGE_ROOT/src/doc/en/reference/references/index.rst Can you move them there?

Everything else looks good to me (although I started skimming towards the end in the stuff that I think is not new). I mostly fixed a few typos and spacing issues.


---

Comment by falque created at 2019-07-12 16:31:25

J'ai corrigé des typos ici ou là, mais surtout il y a un gros passage avec des paragraphes qui apparaissent deux fois (chose que je n'ai pas osé corriger moi-même). Je donne les premiers mots des paragraphes concernés (ils sont presque tous consécutifs dans leurs deux versions, mais pas tous).

"In this interpretation of symmetric functions as characters" [...]

"The coproduct is an algebra morphism, and therefore" [...]

jusqu'à (je crois)

"Here are further examples [...]" 

et les examples qui suivent différent légèrement (f <--> g notamment) selon les deux copies
(pour trouver, au cas où: "coproduct().apply_multilinear_morphism( lambda x,y" [...]

C'est tout ce que j'ai relevé :)


----
New commits:


---

Comment by phubert created at 2019-07-13 11:36:32

Thank you very much to both of you for reviewing. 
I corrected the repetitions problems. 

About the references, I didn't change that, they were already in this file and I found other examples of .py files containing references. But if it is better to put them in the index.rst with the other references I can do it. 
----
New commits:


---

Comment by falque created at 2019-07-14 17:12:28

Ça m'a l'air bien ! Est-ce que je passe en positive review ? Ou est-ce qu'on attend l'autre/un autre reviewer ?


---

Comment by git created at 2019-07-15 16:00:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by phubert created at 2019-07-15 16:02:23

Someone else confirmed that I should put the references in $SAGE_ROOT/src/doc/en/reference/references/index.rst  so it is done !


---

Comment by opechenik created at 2019-07-16 14:38:46

I caught a couple more typos. Everything else looks good to me now!
----
New commits:


---

Comment by opechenik created at 2019-07-16 14:38:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-07-19 23:17:15

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2019-07-19 23:17:15

Merge conflict, please fix


---

Comment by git created at 2019-07-22 20:17:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by phubert created at 2019-07-22 20:19:20

Changing status from needs_work to needs_review.


---

Comment by kdilks created at 2019-07-23 17:50:42

Corrected some indentation/formatting issues that were causing problems with documentation build, checking with Patchbot now to see if it's better.

Mélodie, Sage does not like the non-ascii character for the accent in your name. I know some people with accents in their name choose to suppress them when their name appears in the Sage source code, though I don't know if this a rule or something they choose to do to make things easier. I took this approach since it is easier, but if you want the accent to appear, I believe you could use ` \'{e} `.
----
New commits:


---

Comment by tscrim created at 2019-07-25 07:41:59

Replying to [comment:21 kdilks]:
> Corrected some indentation/formatting issues that were causing problems with documentation build, checking with Patchbot now to see if it's better.
> 
> Mélodie, Sage does not like the non-ascii character for the accent in your name. I know some people with accents in their name choose to suppress them when their name appears in the Sage source code, though I don't know if this a rule or something they choose to do to make things easier. I took this approach since it is easier, but if you want the accent to appear, I believe you could use ` \'{e} `.

This is wrong. You just need to add at the first line `# -*- coding: utf-8 -*-` that this should be interpreted as unicode (see, e.g., `combinat/tableau.py`).


---

Comment by zabrocki created at 2019-07-27 11:56:37

I think that there are a few lines that are really long and should be wrapped.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by chapoton created at 2020-02-19 19:26:24

red branch, needs to be rebased on the latest develop


---

Comment by chapoton created at 2020-02-19 19:26:24

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2020-02-20 16:36:38

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2020-02-20 16:36:38

I performed the rebase.
----
New commits:


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by git created at 2020-04-24 10:09:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-24 10:18:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-24 11:50:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2020-04-24 11:51:15

Review in progress -- this needs a lot more fixing IMHO.


---

Comment by git created at 2020-05-08 11:32:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-11 16:01:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-11 18:36:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-11 20:57:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-11 21:03:22

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-11 21:22:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-05-11 21:33:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-12 09:20:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-05-12 09:25:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2020-05-12 09:28:17

I'm done with my review. Unfortunately,

1. it still needs someone who understands Sphinx to fix the "make doc" errors (most of which I probably have introduced myself...):


```
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:80: WARNING: Inline literal start-string without end-string.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:250: WARNING: Unexpected indentation.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:252: WARNING: Block quote ends without a blank line; unexpected unindent.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:254: WARNING: Unexpected indentation.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:257: WARNING: Block quote ends without a blank line; unexpected unindent.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:447: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:467: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:603: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:607: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:630: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:634: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:643: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:658: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:1046: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:1052: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:1260: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:1299: WARNING: The "TOPIC" directive may not be used within topics or body elements.
[dochtml] [combinat ] /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sfa.py:docstring of sage.combinat.sf.sfa:20: WARNING: Literal block expected; none found.
[dochtml] [combinat ] The inventory files are in local/share/doc/sage/inventory/en/reference/combinat.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1720, in main
[dochtml]     builder()
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 327, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 552, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 538, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 280, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/skraeling/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] OSError: /home/skraeling/sage/local/lib/python3.7/site-packages/sage/combinat/sf/sf.py:docstring of sage.combinat.sf.sf.SymmetricFunctions:80: WARNING: Inline literal start-string without end-string.
[dochtml]
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
make[1]: *** [Makefile:2008: doc-html] Error 1
```


2. it needs someone to review my rather substantial changes.

One thing I'm still a bit confused about: what is the compilation target for sf.py? Is it supposed to be read in-console? In html? As some kind of notebook? I'm seeing some constructs used that will probably look weird even in html, so I suspect some kind of interactive target is envisioned, but I don't know what it is.


---

Comment by git created at 2020-05-12 09:29:26

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2020-05-13 06:28:39

Possible errors:


```
    .. MATH:: h_d = \sum \limits_{\mu \vdash d} \dfrac{1}{z_{\mu}} p_{\mu}
```

I am not sure that sphinx will well-handle the `\limits`; I am also not sure how necessary it is. Plus you are missing a comma at the end (a number of `.. MATH::` lines have missing punctuation).


```diff
-the power-sum basis (a realization of :math:`\operatorname{Sym}`):
+the power-sum basis (a realization of :math:`\operatorname{Sym}`)::
```


This one might be more stylistic, but I am not 100% certain:

```diff
-    .. MATH:: p_k(x_1,x_2,\ldots, x_n) = x_1^k + x_2^k + \ldots + x_n^k,
-                \ (\hbox{for any } k > 0),\ {\rm or}
-
-    .. MATH:: e_n(x_1,x_2,\ldots, x_n) = x_1 x_2 \cdots x_n.
+    .. MATH::
+
+        p_k(x_1, x_2, \ldots, x_n) = x_1^k + x_2^k + \ldots + x_n^k,
+               \quad (\hbox{for any } k > 0), \text{ or }
+
+   .. MATH::
+
+       e_n(x_1,x_2,\ldots, x_n) = x_1 x_2 \cdots x_n.
```


Is `.. TOPIC::` valid? Might need to be `.. RUBRIC::`.

It might not be smart enough to handle this:

```
    .. TOPIC:: Solution

        ::
```

but it seems okay...

This seems misaligned:

```
        function, you should import it from ``sage.combinat.sf.sfa``.

    ::

        sage: from sage.combinat.sf.sfa import zee
        sage: zee([4,4,2,1])
        64
```

Actually, now I am confused about whether the `..TOPIC::` should be indented or not. You are inconsistent about this.


```diff
-This is already refined as `scalar_qt()`::
+This is already refined as ``scalar_qt()``::
```


You can't do nesting like this:

```
*Note that the n-th q,t-Catalan number can be computed using the command ``qt_catalan_number(n)``, which has to be imported from* ``sage.combinat.q_analogues`` if not done yet*.
```


Need blank lines probably:

```diff
     .. MATH::
+
         \Delta(g) = \sum_{\mu, \nu} a_{\mu,\nu}\, s_\mu\otimes s_\nu
 
     where
 
     .. MATH::
+
         g(\mathbf{x},\mathbf{y})= \sum_{\mu, \nu} a_{\mu,\nu}\, s_\mu(\mathbf{x}) s_\nu(\mathbf{y}),
```


----

There might be more, and I definitely would make a bunch of other stylistic changes if I did a thorough pass through. Hopefully these will fix the docbuild.
----

Definitely style stuff:

For standardization:

```diff
-    :math:`\operatorname{Sym}` of symmetric functions over
-    :math:`\mathbb{Q}` ::
+    `\operatorname{Sym}` of symmetric functions over `\QQ`::
```

In fact, I would recommend removing all `:math:`f+2`` and just using ``f+2``. Similarly using `\QQ` instead of `\mathbb{Q`}.

General style: `.. rubric::` -> `.. RUBRIC::`.

Extra space here `syntax ,`.

Break the long line on line 348, the output of `s([5])^2*s([1,1,1])`.

`See also ``map_coefficients``.` -> `See also :meth:`~the.path.to.map_coefficients`.`

``t=1`.::` -> ``t=1`. ::`


---

Comment by git created at 2020-05-13 08:39:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2020-05-13 08:41:19

Thanks, Travis! I'm doing some of your changes. There are many that I'm hesitant to do, as I'm not sure what we're targeting in this file. For normal doc, the `:math:` in front of ``...`` is useless, but this appears to be something more interactive, and I'm wary of making changes I cannot easily undo. Likewise for macros like `\QQ`.

I don't know about topics and rubrics. The indentation in the exercises does look weird to me, but I can't really see what comes out, so again I'd rather not change it. Anyone?

Sphinx does understand \prod\limits, as witnessed in the arithmetic_product doc in https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/sf/sfa.html . So I guess \sum\limits should work too. But the whitespace in "\sum \limits" doesn't really belong; I'm removing it.


---

Comment by tscrim created at 2020-05-13 23:23:31

Replying to [comment:46 gh-darijgr]:
> Thanks, Travis! I'm doing some of your changes. There are many that I'm hesitant to do, as I'm not sure what we're targeting in this file. For normal doc, the `:math:` in front of ``...`` is useless, but this appears to be something more interactive, and I'm wary of making changes I cannot easily undo.

I don't quite understand what you mean by this. The `:math:` is just outdated AFAIK.

> Likewise for macros like `\QQ`.

This is a matter of standardization in Sage's documentation and is commonplace.

> I don't know about topics and rubrics. The indentation in the exercises does look weird to me, but I can't really see what comes out, so again I'd rather not change it. Anyone?

Well, we will need to get the doc to be compiled and looked at. Also, my understanding is a large part of this header is to be viewed as html documentation (possibly pdf, but I suspect that is a small number of people).

> Sphinx does understand \prod\limits, as witnessed in the arithmetic_product doc in https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/sf/sfa.html . So I guess \sum\limits should work too. But the whitespace in "\sum \limits" doesn't really belong; I'm removing it.

Okay, I just wasn't sure if it was handled or not. Thanks.


---

Comment by @darijgr created at 2020-05-14 07:46:47

I see lots of `:math:`...`` in the tutorials folder, and this is a tutorial too. My impression is that it's supposed to be compiled into a notebook, not just a dumb html. The exercises with solutions at least suggest that. But with the original authors gone, I can at best guess.

You're right about \QQ, though -- it does appear in tutorials, so can be used.


---

Comment by git created at 2020-05-14 07:54:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-05-15 08:25:51

Replying to [comment:48 gh-darijgr]:
> I see lots of `:math:`...`` in the tutorials folder, and this is a tutorial too. My impression is that it's supposed to be compiled into a notebook, not just a dumb html. The exercises with solutions at least suggest that. But with the original authors gone, I can at best guess.

I don't think that makes any difference. I am fairly certain the `:math:` is just an "old" way of doing things in Sage (it is standard Sphinx IIRC, but locally we moved away from that).


---

Comment by chapoton created at 2020-06-15 17:17:45

the branch has turned red => back to "needs work"


---

Comment by chapoton created at 2020-06-15 17:17:45

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-06-15 19:59:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2020-06-15 20:01:20

Merged it, but someone still needs to review the doc and ensure it compiles.


---

Comment by @darijgr created at 2020-06-15 20:01:20

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2020-11-26 16:28:52

red branch again..


---

Comment by chapoton created at 2020-11-26 16:28:52

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
