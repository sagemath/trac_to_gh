# Issue 23606: for graphs g1.union(g2) would better be weighted if both g1 and g2 are

Issue created by migration from https://trac.sagemath.org/ticket/23843

Original creator: vdelecroix

Original creation time: 2017-09-13 05:38:32

CC:  dcoudert

The following is wrong

```
sage: g1 = Graph(weighted=True)
sage: g2 = Graph(weighted=True)
sage: g = g1.union(g2)
sage: g.weighted()
False
```


For both loops and multiedges the union takes an "or" (ie `g` allows loops if any of `g1` or `g2` allows loops). Though it is not clear that such rule should apply for weighted. Three possibilities
- make `g` weighted if any of `g1` or `g2` are
- make `g` weighted if both `g1` and `g2` are
- When `g1.weighted()` and `g2.weighted()` are different raise a `ValueError` and otherwise apply any of the two above rules.


---

Comment by dcoudert created at 2017-09-13 07:33:10

I don't use weighted graph very often, so I don't know what is expected: number as label? dictionary with specific key? If we make the union weigthed if one of the graph is weighted, should we turn `None` to 0 ? what if one of the graph has `"bob"` for label ? should we check that weights are consistent ?

The easiest is certainly to raise an error.


---

Comment by vdelecroix created at 2017-09-17 18:05:49

Simpler version without errors: make it weighted if both are weighted.


---

Comment by vdelecroix created at 2017-09-17 18:05:49

Changing status from new to needs_review.


---

Comment by dcoudert created at 2017-09-17 21:16:52

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2017-09-17 21:16:52

Let's go for it. Passes all tests and doc build.


---

Comment by vbraun created at 2017-09-20 22:26:28

Resolution: fixed
