# Issue 24940: cython() does not work in Jupyter

Issue created by migration from https://trac.sagemath.org/ticket/25177

Original creator: jdemeyer

Original creation time: 2018-04-16 07:48:30

CC:  simonking

When `sys.stderr` is not a file but some other stream, `cython()` breaks because of this redirection:

```
                with redirection(sys.stderr, errfile, close=False):
                    dist.run_command("build")
```


The goal is to redirect the actual OS-level stderr, so we should just use the file descriptor number `2` instead.


---

Comment by jdemeyer created at 2018-04-16 07:48:38

Changing priority from major to blocker.


---

Comment by jdemeyer created at 2018-04-16 08:14:39

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-04-16 08:14:39

New commits:


---

Comment by nbruin created at 2018-04-16 08:20:38

If the bots are happy you can give this a positive review.


---

Comment by nbruin created at 2018-04-17 02:47:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-04-17 20:29:51

Resolution: fixed
