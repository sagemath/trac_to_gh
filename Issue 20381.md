# Issue 20381: Thematic tutorial on free modules and algebras

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2016-05-18 08:34:26

CC:  sage-combinat darij chapoton andrew.mathas jbandlow tscrim

This ticket adds two thematic tutorials that cover the following topics:

* using (combinatorial) free modules
* constructing and manipulating new modules/vector spaces
* adding more algebraic structure
* defining morphisms
* defining coercions and conversions
* algebraic structures with several realizations

The material was developed at the occasion of a series of tutorials
given during Sage Days.

See also #16810.



---

Comment by nthiery created at 2016-05-18 15:45:54

Changing status from new to needs_review.


---

Comment by nthiery created at 2016-05-18 15:45:54

New commits:


---

Comment by chapoton created at 2016-05-18 18:55:44

* the lazy import is not correct
* tutorial-implementing-algebraic-structures is not there. Uncommited ?


---

Comment by chapoton created at 2016-05-18 19:18:14

please use python3-compatible print syntax: `print(bla)`


---

Comment by git created at 2016-05-18 22:02:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-05-18 22:33:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2016-05-18 22:35:42

Thanks Frédéric for the comments.

I have fixed the prints by mostly removing them; it's actually more readable.

I haven't touched the lazy import yet. Sorry Sage is broken on my machine since I upgraded its OS, and I can't test things out. Will do soon!


---

Comment by git created at 2016-05-19 06:47:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2016-05-19 07:10:04

Note: I have created #20626 to later enable the lazy importing of such modules


---

Comment by chapoton created at 2016-05-19 09:03:27

+TypeError: lazy_import() takes at least 2 positional arguments (1 given)

EDIT: sorry, this was for a previous version of the branch


---

Comment by git created at 2016-05-19 14:57:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2016-05-19 16:07:44

Changing status from needs_review to needs_work.


---

Comment by nthiery created at 2016-05-19 16:08:42

Hi,

I am in the process of proofreading the tutorial "implementing algebraic structures" and adding a section on WithRealizations. I hope to be finished tomorrow.


---

Comment by git created at 2016-05-19 16:17:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-05-20 10:03:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2016-05-20 10:05:53

Done. Andrew: can you throw in your template? I'll then add a few explanations about it, and then this should be ready for final review.

Andrew, as a reader of this tutorial, you'll have the best point of view on what's useful. So please feel free to hack in and improve the explanations whenever needed.

Thanks!
----
New commits:


---

Comment by kdilks created at 2016-06-19 03:20:56

I looked over `tutorial-implementing-algebraic-structures.rst` earlier today (as much for personal knowledge as for reviewing). My three comments are:

* Typo on line 438, (``h`` should be ``Y``).

* The "python fun-fact" is potentially confusing, because it takes some thought to figure out why `~(int(2)=-3` if you're more knowledgeable in mathematics than you are in Python.

* In the example `func_on_basis(g)` giving an algebra morphism, as somebody that doesn't have much familiarity with using algebras in Sage, it's not immediately clear what's going on in the line `if g==1:`. It's not immediately obvious whether `1` should be referring to `1 mod 6Z`, or whether Sage is smart enough to coerce things and know that "1" is referring to `A.one()` for whatever category makes sense in context (0 mod 6Z, in this case). My guess is the latter, based on the output, but I think it merits being mentioned.


---

Comment by git created at 2016-06-29 11:22:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2016-06-29 11:35:06

Hi Nicolas,

I have been through the tutorial and made a few changes and added the promised realizations template. I also addressed the comments made above by kdilks. If you want to check my template and add some "technical details" then I'll have one more look over it and give it  a positive review.

Andrew


---

Comment by andrew.mathas created at 2016-06-29 12:31:45

Replying to [comment:20 andrew.mathas]:

There's supposed to be a commit attached here...


---

Comment by tscrim created at 2016-06-29 14:59:35

The commit is not a638d15?

I'm also interpreting comment:22 as this should be back to needs_review.


---

Comment by tscrim created at 2016-06-29 14:59:35

Changing status from needs_work to needs_review.


---

Comment by andrew.mathas created at 2016-06-29 15:49:09

Replying to [comment:24 tscrim]:
> The commit is not a638d15?

I pushed two commits to trac: 6f1f88d and a638d15. The first one resulted in comment:20, with the branch being changed to `u/andrew.mathas/thematic...` but the commit was not attached. The second push worked fine.

> I'm also interpreting comment:22 as this should be back to needs_review.

No, it is not yet ready for review. Nicolas wanted to add some "technical comments" to my template. Once this is done, or Nicolas says that he does not want to do this, I will finalise my review.


---

Comment by andrew.mathas created at 2016-06-29 15:49:44

Changing status from needs_review to needs_info.


---

Comment by andrew.mathas created at 2016-07-27 04:55:04

Hi Nicolas.

I have just added a link from the tutorial to the `Categories` page in the reference manual (and removed the corresponding TODO from the tutorial). Did you want to add some more details to this or is it good to go?

Something strange was happening with the links to the "free modules" tutorial. They were giving errors when I was building the documentation, because the files were not there, but I notice that they are included in my patch. I didn't touch this directory so I am not sure what is happening there but perhaps it's OK now.

Andrew


---

Comment by nthiery created at 2016-08-01 21:11:20

New commits:


---

Comment by nthiery created at 2016-08-01 21:13:17

Hi Andrew,

Thanks for the review and the template! I finally got back to this, made some further edits, and added some technical comments. Up to the proofreading of my recent blurb, it's good to go from my point of view.

Cheers,


---

Comment by nthiery created at 2016-08-01 21:13:17

Changing status from needs_info to needs_review.


---

Comment by jdemeyer created at 2016-08-01 21:38:45

Technical comment: can this be a lazy import:

```diff
diff --git a/src/sage/modules/__init__.py b/src/sage/modules/__init__.py
index e69de29..16adf94 100644
--- a/src/sage/modules/__init__.py
+++ b/src/sage/modules/__init__.py
`@``@` -0,0 +1 `@``@`
+import tutorial_free_modules
```



---

Comment by jdemeyer created at 2016-08-01 21:38:45

Changing status from needs_review to needs_work.


---

Comment by andrew.mathas created at 2016-08-02 01:15:16

Hi Nicolas,

I made a few more tweaks. If you are happy with my changes then please set this to a positive review once the `lazy_import` question is resolved. As far as I can see this is not possible because `tutorial_free_modules` does not live inside a module.

Andrew
----
New commits:


---

Comment by jdemeyer created at 2016-08-02 07:26:08

Thinking twice about it, why does it even need to be imported at all?


---

Comment by nthiery created at 2016-08-02 11:30:08

New commits:


---

Comment by nthiery created at 2016-08-02 11:40:09

The goal of the import is to enable accessing the tutorial with `sage.modules.tutorial_free_module?`. I agree that a lazy import would be better. I'll investigate this later today.

Other than this, this is good to go!


---

Comment by jdemeyer created at 2016-08-02 13:01:24

Replying to [comment:35 nthiery]:
> The goal of the import is to enable accessing the tutorial with `sage.modules.tutorial_free_module?`.

Honestly, who is going to remember that?


---

Comment by jdemeyer created at 2016-08-02 13:02:38

If you really want to enable reading the tutorial from the command line, why not

```
sage: tutorials.free_module?
```

so you could do

```
sage: tutorials.<tab>
```

to find all tutorials.


---

Comment by tscrim created at 2016-08-02 15:43:48

I agree with Jeroen on comment:37, that we should have a catalog of tutorials that we can link together (and lazily import). An alternative would be to have something like `CombinatorialFreeModule.tutorial`, but I feel this could be much more of a maintenance headache.


---

Comment by jdemeyer created at 2016-08-02 16:07:14

For this ticket, I suggest to just remove the `import`.


---

Comment by nthiery created at 2016-08-02 17:18:40

We don't need a new catalog of all tutorials: we already have the thematic tutorial help page which does just that, and this tutorial is linked from there.

Adding this import does something complementary: it enables discovering documentation and tutorials by navigating the module hierarchy. We already have a couple of them, and I believe we should pursue way further in this direction:

```
mistral-/opt/sage/src/sage>ls **/*tuto*
categories/tutorial.py  combinat/ncsf_qsym/tutorial.py  combinat/tutorial.py  modules/tutorial_free_modules.py  rings/padics/tutorial.py
```



---

Comment by nthiery created at 2016-08-02 17:23:27

I did not find a way to lazy import a module with our current lazy_import function.

I see this as a (temporary?) limitation of lazy_import, and for now I suggest to import the module, as we do for the other documentation modules above: it adds value to the user and the overhead is not horrible. That being said, I am taking off for vacations and am not inclined spending time debating this. If you don't want the import, go ahead and remove it :-)

On my side it's a positive review.


---

Comment by jdemeyer created at 2016-08-02 21:20:51

I don't agree either but I can live with it.


---

Comment by nthiery created at 2016-08-02 21:30:52

Changing status from needs_work to needs_review.


---

Comment by andrew.mathas created at 2016-08-02 22:54:58

I agree with Jeroen: the import has marginal benefit since almost no one will find it and even though it does not cost much in terms overhead the more "little things" we import at start up time the slower it gets. Since Nicolas said that he is happy for the import to be removed I have taken it out and set this to a positive review. Either having `lazy_import` handle this use-case or having a `tutorials` catalogue is, I think, a better way to go.
----
New commits:


---

Comment by andrew.mathas created at 2016-08-02 22:54:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-08-05 21:04:22

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-08-05 21:04:22


```
sage -t --long src/doc/en/thematic_tutorials/tutorial-implementing-algebraic-structures.rst  # 7 doctests failed
}}}}


---

Comment by git created at 2016-08-08 07:28:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by andrew.mathas created at 2016-08-08 07:29:29

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2016-08-13 22:51:10

Resolution: fixed
