# Issue 13973: More uniform handling of color_by_labels for graph plot, plot3d, graphviz

Issue created by migration from https://trac.sagemath.org/ticket/14177

Original creator: nthiery

Original creation time: 2013-02-25 01:23:38

Assignee: jason, ncohen, rlm

CC:  sage-combinat

Back in #7004 I introduced some more flexibility for the color_by_labels option for graphviz, in order to allow for specifying a dictionary or function mapping labels to color. The attached patch extends this feature to plot and plot3d, by having them call _color_by_label uniformly.

In the long run, one would want to factor out the edge/vertex/color/labels option handling to guarantee uniformness; but that's for another ticket.


---

Comment by nthiery created at 2013-02-25 01:30:02

Changing status from new to needs_review.


---

Comment by ncohen created at 2013-02-25 08:29:48

Oh ! I just saw that on my rss feeds: could you add my name as a cc next time ? I don't automatically get emails when something gets created in the graph section.

Nathann


---

Comment by ncohen created at 2013-02-25 08:34:26

HMmmmm.... Really ? `:-P`


```
``color_by_label`` - a boolean (default: False)
...
sage: p = G.plot(edge_labels=True, color_by_label={'a':'yellow', 'b':'purple'}); p 
```


This being said, what would you think of a `color_by_label` argument that can be set to `False` (all edges receive the same color), to a dictionary like you do right now, or to `True`, in which case you can give each label a specific color (with `g.edge_labels()` and `rainbow`) ?

Nathann


---

Comment by ncohen created at 2013-02-25 08:34:26

Changing status from needs_review to needs_work.


---

Comment by nthiery created at 2013-02-25 15:32:28

Replying to [comment:2 ncohen]:
> Oh ! I just saw that on my rss feeds: could you add my name as a cc next time ? I don't automatically get emails when something gets created in the graph section.

Sure. That being said, maybe you want to ask the trac maintainer to add you to the cc list for the graph section!

Cheers,


---

Comment by nthiery created at 2013-02-25 15:41:30

Replying to [comment:3 ncohen]:
> HMmmmm.... Really ? `:-P`
> {{{
> ``color_by_label`` - a boolean (default: False)
> ...
> sage: p = G.plot(edge_labels=True, color_by_label={'a':'yellow', 'b':'purple'}); p 
> }}}

Yes, really! Just take a slightly larger extract :-)

```
        - ``color_by_label`` - a boolean (default: False)
           whether to color each edge with a different color according
           to its label; this can also take as value a function or
           dictionary mapping labels to colors; this option is
           incompatible with ``edge_color`` and ``edge_colors``.
```


I agree it's not perfect, as you may at first glance miss the information that the value can be something else than a boolean. But I did not find a better formulation without being heavy in the formaluation. Better suggestions welcome. Maybe something like:

```
        - ``color_by_label`` - a boolean, dictionary or function (default: False)
           whether to color each edge with a different color according
           to its label; the value can be a function or
           dictionary mapping labels to colors; this option is
           incompatible with ``edge_color`` and ``edge_colors``.
```




> This being said, what would you think of a `color_by_label` argument that can be set to `False` (all edges receive the same color), to a dictionary like you do right now, or to `True`, in which case you can give each label a specific color (with `g.edge_labels()` and `rainbow`) ?

This is exactly what this is doing currently, isn't it?

Cheers,
                                   Nicolas


---

Comment by ncohen created at 2013-02-25 16:36:48

> Sure. That being said, maybe you want to ask the trac maintainer to add you to the cc list for the graph section!

Is that different fom being in the "owned by" field ? `O_o`

I will ask then.

Nathann


---

Comment by ncohen created at 2013-02-25 16:58:26

> I agree it's not perfect, as you may at first glance miss the information that the value can be something else than a boolean. But I did not find a better formulation without being heavy in the formaluation. Better suggestions welcome. Maybe something like:
> {{{
>         - ``color_by_label`` - a boolean, dictionary or function (default: False)
>            whether to color each edge with a different color according
>            to its label; the value can be a function or
>            dictionary mapping labels to colors; this option is
>            incompatible with ``edge_color`` and ``edge_colors``.
> }}}

Well, saying that this variable is a boolean when it is not is clearly not an option. What you just wrote looks nice !

> This is exactly what this is doing currently, isn't it?

Oh. Cool. I looked at the patch and did not see anything related with rainbow, nor any loop, so I assumed it did not do it, but now I realise that it was the former behaviour `:-)`

Nathann


---

Attachment


---

Comment by nthiery created at 2013-02-25 20:03:38

Replying to [comment:7 ncohen]:
> Well, saying that this variable is a boolean when it is not is clearly not an option. What you just wrote looks nice !

The updated patch uses yet another quick variant. By the way, I added appropriate doc to the option descriptions in graph_plot.py.

> Oh. Cool. I looked at the patch and did not see anything related with rainbow, nor any loop, so I assumed it did not do it, but now I realise that it was the former behaviour `:-)`

:-)

Cheers,
                         Nicolas


---

Comment by nthiery created at 2013-02-25 20:03:48

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2013-02-25 20:28:37

Ok, looks good and passes all tests ! It took some time because I am not very familiar with this part of the code, and also because there seems to be something wrong with the html documentation right now `^^;`

Thanks for this patch !!!


---

Comment by ncohen created at 2013-02-25 20:33:57

Ahem... Would you have anything against adding this to your ticket ? It's not worth creating another one, and I'm pretty sure to forget it if I do not do it soon `^^;`

Nathann


---

Attachment


---

Comment by ncohen created at 2013-02-25 20:36:04

(Samuel reported this problem : the page mentionned is not updated anymore, and anyway the LP section disappeared from the book, as it did not add anything interesting to it)

Nathann


---

Comment by nthiery created at 2013-02-25 22:22:35

Replying to [comment:11 ncohen]:
> Ahem... Would you have anything against adding this to your ticket ? It's not worth creating another one, and I'm pretty sure to forget it if I do not do it soon `^^;`

Did not you say something about small independent patches some day?

:-)

Yeah, sure I don't mind. So off to positive review.


---

Comment by nthiery created at 2013-02-25 22:22:35

Changing status from needs_review to positive_review.


---

Comment by nthiery created at 2013-02-25 22:25:41

And thanks for the quick review!


---

Comment by jdemeyer created at 2013-02-28 10:35:18

Resolution: fixed
