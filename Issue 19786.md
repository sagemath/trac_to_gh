# Issue 19786: Remove Python 2.6 support

Issue created by migration from https://trac.sagemath.org/ticket/20023

Original creator: vbraun

Original creation time: 2016-02-07 18:02:59

CC:  chapoton dimpase embray fbissey jdemeyer slelievre jhpalmieri

Currently building Sage depends on Python 2.6+. Bump to 2.7+ build-time dependency.

* Delete `sage_bootstrap/compat/argparse.py`
* Change ​http://doc.sagemath.org/html/en/developer/packaging.html#checksums and any other related documentation.


---

Comment by karandesai-96 created at 2016-02-09 15:03:22

I changed the directory to `SAGE_ROOT/build/sage_bootstrap` and checked out contents :
`
.
├── cksum.py
├── cmdline.py
├── compat.py
├── config.py
├── download.py
├── env.py
├── __init__.py
├── levenshtein.py
├── logger.py
├── mirror_list.py
├── package.py
├── README
├── stdio.py
├── tarball.py
└── updater.py

`

There is no subdirectory named "compat".


---

Comment by embray created at 2016-02-24 10:40:58

This can also help with #9536 since Python 2.7+ supports the `--no-user-cfg` option to `setup.py`/`setup.cfg`, which Python 2.6 does not (just thought of this since it's an issue I looked at recently).


---

Comment by leif created at 2016-07-01 14:59:54

Changing type from enhancement to task.


---

Comment by slelievre created at 2019-06-16 17:06:59

See #28000 for complete removal of Python 2 support.


---

Comment by embray created at 2019-06-17 22:03:24

I'm pretty sure Python 2.6 support is completely removed from sagelib itself, just not from sage_bootstrap.


---

Comment by dimpase created at 2019-06-18 09:13:33

should we clean up `sage_bootstrap` in this respect here? (this would mean to require system's Python 2.7 or better for building)


---

Comment by slelievre created at 2019-06-19 13:28:59

Removing the ability to bootstrap from Python 2.6 probably does
not need to happen before we remove Python 2 support in sagelib.


---

Comment by dimpase created at 2019-06-19 16:38:09

From the brief look at the code, this is a change that may be done now, and after all noone must Python 2.6 now.


---

Comment by fbissey created at 2019-06-19 19:55:30

It's the default python on redhat/centos 6 and possibly some ancient debian. I'll note that redhat/centos 6 have access to newer python but someone with admin privileges and knowledge of software collections is needed.


---

Comment by dimpase created at 2020-06-18 10:45:48

I'll make an experimental branch to remove vendored argparse


---

Comment by dimpase created at 2020-06-18 10:56:12

New commits:


---

Comment by dimpase created at 2020-06-18 10:57:53

tests run on https://github.com/dimpase/sage/pull/11


---

Comment by dimpase created at 2020-06-18 10:58:47

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-06-18 15:50:56

Also need to update `build/tox.ini`


---

Comment by git created at 2020-06-18 21:07:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-06-19 20:06:10

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-19 20:07:37

Changing status from positive_review to needs_work.


---

Comment by mkoeppe created at 2020-06-19 20:08:22

`sage-system-python` should probably check that `python` is new enough.


---

Comment by mkoeppe created at 2020-06-19 20:15:28

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-06-19 20:21:04

New commits:


---

Comment by mkoeppe created at 2020-06-19 20:22:06

I set it to `sage-pending` because I think 9.2 may be too early to merge this ticket.


---

Comment by dimpase created at 2020-11-06 16:00:58

needs a rebase - set milestone to 9.3


---

Comment by mkoeppe created at 2020-11-06 19:03:04

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-11-06 19:03:15

Changing priority from major to minor.


---

Comment by dimpase created at 2020-12-18 18:38:20

it seems that the branch ought to remove `build/sage_bootstrap/compat`, no?


---

Comment by mkoeppe created at 2020-12-18 18:49:27

I think sage 9.3 is still too early for removing the support for building the distribution on systems that only have python 2.6. Setting the milestone back to pending


---

Comment by mkoeppe created at 2021-03-04 19:27:13

Changing priority from minor to critical.


---

Comment by git created at 2021-03-04 19:30:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2021-03-04 19:32:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-03-04 19:37:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-03-04 19:38:26

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2021-03-04 20:10:26

should we also remove `py33` from `build/tox.ini` ?


---

Comment by git created at 2021-03-04 20:21:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2021-03-05 01:40:16

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2021-03-05 01:40:16

OK, this works


---

Comment by mkoeppe created at 2021-03-05 19:45:48

Thanks.


---

Comment by vbraun created at 2021-03-08 08:44:02

Merge conflict


---

Comment by vbraun created at 2021-03-08 08:44:02

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-03-08 13:11:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-03-08 13:14:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-03-08 13:15:14

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2021-03-14 15:03:35

Resolution: fixed
