# Issue 29482: upgrade to flint 2.6.0

archive/issues_029482.json:
```json
{
    "body": "CC:  @timokau @kedlaya @jbalakrishnan @saraedum @isuruf @mkoeppe @kliem @videlec winfried @slel\n\nSee anouncement\n\nhttps://groups.google.com/forum/#!topic/sage-devel/SyUykKwQw6I\n\nIssue created by migration from https://trac.sagemath.org/ticket/29719\n\n",
    "created_at": "2020-05-20T22:40:57Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "upgrade to flint 2.6.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29482",
    "user": "https://github.com/videlec"
}
```
CC:  @timokau @kedlaya @jbalakrishnan @saraedum @isuruf @mkoeppe @kliem @videlec winfried @slel

See anouncement

https://groups.google.com/forum/#!topic/sage-devel/SyUykKwQw6I

Issue created by migration from https://trac.sagemath.org/ticket/29719





---

archive/issue_comments_418032.json:
```json
{
    "body": "this is from the latest alpha2 (commit a960857c7d8e5ea7c4d4c2958e38ec52778d85d9)\n\nPatches still need to be sorted out.\n----\nNew commits:",
    "created_at": "2020-05-21T10:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418032",
    "user": "https://github.com/dimpase"
}
```

this is from the latest alpha2 (commit a960857c7d8e5ea7c4d4c2958e38ec52778d85d9)

Patches still need to be sorted out.
----
New commits:



---

archive/issue_comments_418033.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-05-21T12:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418034.json:
```json
{
    "body": "OK, can be tested now. All our patches got upstreamed, so they are gone now.",
    "created_at": "2020-05-21T12:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418034",
    "user": "https://github.com/dimpase"
}
```

OK, can be tested now. All our patches got upstreamed, so they are gone now.



---

archive/issue_comments_418035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-21T12:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418035",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418036.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-05-21T13:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418036",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418037.json:
```json
{
    "body": "Neither arb 2.16 nor 2.17 work with this version of Flint.\n\nOne gets\n\n```\ngcc -fPIC -ansi -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/arb-2.17.0/src -I/home/scratch2/dimpase/sage/sage/local/include -I/home/scratch2/dimpase/sage/sage/local/include -I/home/scratch2/dimpase/sage/sage/local/include -c mul_mpn.c -o ../build/fmpr/mul_mpn.lo -MMD -MP -MF \"../build/fmpr/mul_mpn.d\" -MT \"../build/fmpr/mul_mpn.d\" -MT \"../build/fmpr/mul_mpn.lo\"\nIn file included from ../fmpr.h:26,\n                 from get_si.c:12:\n../fmpz_extras.h:47:1: error: redefinition of 'fmpz_add_si'\n   47 | fmpz_add_si(fmpz_t z, const fmpz_t x, slong y)\n      | ^~~~~~~~~~~\nIn file included from ../fmpr.h:23,\n                 from get_si.c:12:\n../../../../../../../include/flint/fmpz.h:479:18: note: previous definition of 'fmpz_add_si' was here\n  479 | FMPZ_INLINE void fmpz_add_si(fmpz_t f, const fmpz_t g, slong x)\n      |                  ^~~~~~~~~~~\nIn file included from ../fmpr.h:26,\n                 from get_si.c:12:\n../fmpz_extras.h:56:1: error: redefinition of 'fmpz_sub_si'\n   56 | fmpz_sub_si(fmpz_t z, const fmpz_t x, slong y)\n      | ^~~~~~~~~~~\nIn file included from ../fmpr.h:23,\n                 from get_si.c:12:\n../../../../../../../include/flint/fmpz.h:487:18: note: previous definition of 'fmpz_sub_si' was here\n  487 | FMPZ_INLINE void fmpz_sub_si(fmpz_t f, const fmpz_t g, slong x)\n      |                  ^~~~~~~~~~~\nmake[5]: *** [../Makefile.subdirs:60: ../build/fmpr/get_si.lo] Error 1\n```\n",
    "created_at": "2020-05-21T13:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418037",
    "user": "https://github.com/dimpase"
}
```

Neither arb 2.16 nor 2.17 work with this version of Flint.

One gets

```
gcc -fPIC -ansi -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/arb-2.17.0/src -I/home/scratch2/dimpase/sage/sage/local/include -I/home/scratch2/dimpase/sage/sage/local/include -I/home/scratch2/dimpase/sage/sage/local/include -c mul_mpn.c -o ../build/fmpr/mul_mpn.lo -MMD -MP -MF "../build/fmpr/mul_mpn.d" -MT "../build/fmpr/mul_mpn.d" -MT "../build/fmpr/mul_mpn.lo"
In file included from ../fmpr.h:26,
                 from get_si.c:12:
../fmpz_extras.h:47:1: error: redefinition of 'fmpz_add_si'
   47 | fmpz_add_si(fmpz_t z, const fmpz_t x, slong y)
      | ^~~~~~~~~~~
In file included from ../fmpr.h:23,
                 from get_si.c:12:
../../../../../../../include/flint/fmpz.h:479:18: note: previous definition of 'fmpz_add_si' was here
  479 | FMPZ_INLINE void fmpz_add_si(fmpz_t f, const fmpz_t g, slong x)
      |                  ^~~~~~~~~~~
In file included from ../fmpr.h:26,
                 from get_si.c:12:
../fmpz_extras.h:56:1: error: redefinition of 'fmpz_sub_si'
   56 | fmpz_sub_si(fmpz_t z, const fmpz_t x, slong y)
      | ^~~~~~~~~~~
In file included from ../fmpr.h:23,
                 from get_si.c:12:
../../../../../../../include/flint/fmpz.h:487:18: note: previous definition of 'fmpz_sub_si' was here
  487 | FMPZ_INLINE void fmpz_sub_si(fmpz_t f, const fmpz_t g, slong x)
      |                  ^~~~~~~~~~~
make[5]: *** [../Makefile.subdirs:60: ../build/fmpr/get_si.lo] Error 1
```




---

archive/issue_comments_418038.json:
```json
{
    "body": "One apparently may use arb patch: https://github.com/fredrik-johansson/arb/commit/d3d9983231e0f034e86a1e75761627eb8213b704.patch - trying this with arb 2.17.0 now.",
    "created_at": "2020-05-21T13:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418038",
    "user": "https://github.com/dimpase"
}
```

One apparently may use arb patch: https://github.com/fredrik-johansson/arb/commit/d3d9983231e0f034e86a1e75761627eb8213b704.patch - trying this with arb 2.17.0 now.



---

archive/issue_comments_418039.json:
```json
{
    "body": "Yes, there will be an immediate new Arb release. The current git master ought to work.",
    "created_at": "2020-05-21T13:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418039",
    "user": "https://github.com/fredrik-johansson"
}
```

Yes, there will be an immediate new Arb release. The current git master ought to work.



---

archive/issue_comments_418040.json:
```json
{
    "body": "Replying to [comment:6 fredrik.johansson]:\n> Yes, there will be an immediate new Arb release. The current git master ought to work.\n\nthere are doctest errors (I made https://github.com/dimpase/arb/releases/tag/2.17.1, and removed all the arb patches)\n\n```\nsage -t --warn-long 59.4 src/sage/rings/complex_arb.pyx\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4554, in sage.rings.complex_arb.ComplexBall.elliptic_pi\nFailed example:\n    CBF(2,3).elliptic_pi(CBF(1,1))\nExpected:\n    [0.27029997361983 +/- ...e-15] + [0.715676058329095 +/- ...e-16]*I\nGot:\n    [0.2702999736198 +/- 4.51e-14] + [0.7156760583291 +/- 1.78e-14]*I\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4662, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc\nFailed example:\n    n.elliptic_pi_inc(CBF.pi()/2, m)\nExpected:\n    [0.8934793755173 +/- ...e-14] + [0.95707868710750 +/- ...e-15]*I\nGot:\n    nan + nan*I\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4664, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc\nFailed example:\n    n.elliptic_pi(m)\nExpected:\n    [0.89347937551733 +/- ...e-15] + [0.95707868710750 +/- ...e-15]*I\nGot:\n    [0.8934793755173 +/- 4.27e-14] + [0.9570786871075 +/- 9.91e-15]*I\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4669, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc\nFailed example:\n    n.elliptic_pi_inc(CBF.pi()/2, m)\nExpected:\n    [0.2969588746419 +/- ...e-14] + [1.3188795332738 +/- ...e-14]*I\nGot:\n    nan + nan*I\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4671, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc\nFailed example:\n    n.elliptic_pi(m)\nExpected:\n    [0.29695887464189 +/- ...e-15] + [1.31887953327376 +/- ...e-15]*I\nGot:\n    [0.2969588746419 +/- 3.79e-14] + [1.3188795332738 +/- 7.19e-14]*I\n**********************************************************************\nFile \"src/sage/rings/complex_arb.pyx\", line 4747, in sage.rings.complex_arb.ComplexBall.elliptic_rj\nFailed example:\n    CBF(0,1).elliptic_rj(CBF(-1/2,1), CBF(-1,-1), CBF(2))\nExpected:\n    [1.004386756285733 +/- ...e-16] + [-0.2451626834391645 +/- ...e-17]*I\nGot:\n    [1.00438675628573 +/- 6.85e-15] + [-0.24516268343916 +/- 8.11e-15]*I\n**********************************************************************\n3 items had failures:\n   1 of   2 in sage.rings.complex_arb.ComplexBall.elliptic_pi\n   4 of  10 in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc\n   1 of   2 in sage.rings.complex_arb.ComplexBall.elliptic_rj\n    [639 tests, 6 failures, 8.14 s]\n```\n\nand\n\n```\nsage -t --warn-long 59.4 src/sage/rings/real_arb.pyx\n**********************************************************************\nFile \"src/sage/rings/real_arb.pyx\", line 295, in sage.rings.real_arb.arb_to_mpfi\nFailed example:\n    RIF(RBF(2)**(2**100)) # indirect doctest\nExpected:\n    Traceback (most recent call last):\n    ...\n    ArithmeticError: Error converting arb to mpfi. Overflow?\nGot:\n    [5.8756537891115869e1388255822130839282 .. +infinity]\n**********************************************************************\nFile \"src/sage/rings/real_arb.pyx\", line 1660, in sage.rings.real_arb.RealBall.mid\nFailed example:\n    b.mid()\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: unable to convert to MPFR (exponent out of range?)\nGot:\n    +infinity\n**********************************************************************\n2 items had failures:\n   1 of   7 in sage.rings.real_arb.RealBall.mid\n   1 of   2 in sage.rings.real_arb.arb_to_mpfi\n    [542 tests, 2 failures, 0.64 s]\n```\n",
    "created_at": "2020-05-21T19:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418040",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:6 fredrik.johansson]:
> Yes, there will be an immediate new Arb release. The current git master ought to work.

there are doctest errors (I made https://github.com/dimpase/arb/releases/tag/2.17.1, and removed all the arb patches)

```
sage -t --warn-long 59.4 src/sage/rings/complex_arb.pyx
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4554, in sage.rings.complex_arb.ComplexBall.elliptic_pi
Failed example:
    CBF(2,3).elliptic_pi(CBF(1,1))
Expected:
    [0.27029997361983 +/- ...e-15] + [0.715676058329095 +/- ...e-16]*I
Got:
    [0.2702999736198 +/- 4.51e-14] + [0.7156760583291 +/- 1.78e-14]*I
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4662, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc
Failed example:
    n.elliptic_pi_inc(CBF.pi()/2, m)
Expected:
    [0.8934793755173 +/- ...e-14] + [0.95707868710750 +/- ...e-15]*I
Got:
    nan + nan*I
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4664, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc
Failed example:
    n.elliptic_pi(m)
Expected:
    [0.89347937551733 +/- ...e-15] + [0.95707868710750 +/- ...e-15]*I
Got:
    [0.8934793755173 +/- 4.27e-14] + [0.9570786871075 +/- 9.91e-15]*I
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4669, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc
Failed example:
    n.elliptic_pi_inc(CBF.pi()/2, m)
Expected:
    [0.2969588746419 +/- ...e-14] + [1.3188795332738 +/- ...e-14]*I
Got:
    nan + nan*I
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4671, in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc
Failed example:
    n.elliptic_pi(m)
Expected:
    [0.29695887464189 +/- ...e-15] + [1.31887953327376 +/- ...e-15]*I
Got:
    [0.2969588746419 +/- 3.79e-14] + [1.3188795332738 +/- 7.19e-14]*I
**********************************************************************
File "src/sage/rings/complex_arb.pyx", line 4747, in sage.rings.complex_arb.ComplexBall.elliptic_rj
Failed example:
    CBF(0,1).elliptic_rj(CBF(-1/2,1), CBF(-1,-1), CBF(2))
Expected:
    [1.004386756285733 +/- ...e-16] + [-0.2451626834391645 +/- ...e-17]*I
Got:
    [1.00438675628573 +/- 6.85e-15] + [-0.24516268343916 +/- 8.11e-15]*I
**********************************************************************
3 items had failures:
   1 of   2 in sage.rings.complex_arb.ComplexBall.elliptic_pi
   4 of  10 in sage.rings.complex_arb.ComplexBall.elliptic_pi_inc
   1 of   2 in sage.rings.complex_arb.ComplexBall.elliptic_rj
    [639 tests, 6 failures, 8.14 s]
```

and

```
sage -t --warn-long 59.4 src/sage/rings/real_arb.pyx
**********************************************************************
File "src/sage/rings/real_arb.pyx", line 295, in sage.rings.real_arb.arb_to_mpfi
Failed example:
    RIF(RBF(2)**(2**100)) # indirect doctest
Expected:
    Traceback (most recent call last):
    ...
    ArithmeticError: Error converting arb to mpfi. Overflow?
Got:
    [5.8756537891115869e1388255822130839282 .. +infinity]
**********************************************************************
File "src/sage/rings/real_arb.pyx", line 1660, in sage.rings.real_arb.RealBall.mid
Failed example:
    b.mid()
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: unable to convert to MPFR (exponent out of range?)
Got:
    +infinity
**********************************************************************
2 items had failures:
   1 of   7 in sage.rings.real_arb.RealBall.mid
   1 of   2 in sage.rings.real_arb.arb_to_mpfi
    [542 tests, 2 failures, 0.64 s]
```




---

archive/issue_comments_418041.json:
```json
{
    "body": "OK, I ended up using arb patch: \u200bhttps://github.com/fredrik-johansson/arb/commit/d3d9983231e0f034e86a1e75761627eb8213b704.patch\nwith arb 2.16.0 (the arb version in Sage now), and get one flint-related regression (a segfault)\n\n```\nsage: R.<x> = QQ['x']\nsage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 3)\n-------------------------------------------------------------------------------------\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x84a4)[0x7f98890224a4]\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x8679)[0x7f9889022679]\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xae41)[0x7f9889024e41]\n/lib64/libc.so.6(+0x37ec0)[0x7f988a679ec0]\n/lib64/libc.so.6(gsignal+0x145)[0x7f988a679e35]\n/lib64/libc.so.6(abort+0x127)[0x7f988a664895]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(+0x85dcd)[0x7f9880a64dcd]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(flint_throw+0xe0)[0x7f9880a64eb0]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_rem_q1+0xa1)[0x7f9880bd8bd1]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_rem+0x195)[0x7f9880bc39f5]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x7f9880babd50]\n/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(nmod_poly_gcd+0x95)[0x7f9880bb28b5]\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x1201c)[0x7f983d7b401c]\n/lib64/libpython3.7m.so.1.0(_PyMethodDef_RawFastCallDict+0x33a)[0x7f988a402bea]\n/lib64/libpython3.7m.so.1.0(+0x1ccd3f)[0x7f988a4c1d3f]\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/structure/element.cpython-37m-x86_64-linux-gnu.so(+0x134fc)[0x7f98897424fc]\n/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/structure/element.cpython-37m-x86_64-linux-gnu.so(+0x338a4)[0x7f98897628a4]\n/lib64/libpython3.7m.so.1.0(_PyObject_FastCallKeywords+0x4bc)[0x7f988a433eec]\n/lib64/libpython3.7m.so.1.0(+0x1404e9)[0x7f988a4354e9]\n/lib64/libpython3.7m.so.1.0(_PyEval_EvalFrameDefault+0x55da)[0x7f988a46fdea]\n/lib64/libpython3.7m.so.1.0(_PyEval_EvalCodeWithName+0x2f0)[0x7f988a4227e0]\n/lib64/libpython3.7m.so.1.0(_PyFunction_FastCallKeywords+0x2a2)[0x7f988a423822]\n/lib64/libpython3.7m.so.1.0(+0x14035f)[0x7f988a43535f]\n...\n```\n",
    "created_at": "2020-05-22T09:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418041",
    "user": "https://github.com/dimpase"
}
```

OK, I ended up using arb patch: ​https://github.com/fredrik-johansson/arb/commit/d3d9983231e0f034e86a1e75761627eb8213b704.patch
with arb 2.16.0 (the arb version in Sage now), and get one flint-related regression (a segfault)

```
sage: R.<x> = QQ['x']
sage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 3)
-------------------------------------------------------------------------------------
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x84a4)[0x7f98890224a4]
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x8679)[0x7f9889022679]
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xae41)[0x7f9889024e41]
/lib64/libc.so.6(+0x37ec0)[0x7f988a679ec0]
/lib64/libc.so.6(gsignal+0x145)[0x7f988a679e35]
/lib64/libc.so.6(abort+0x127)[0x7f988a664895]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(+0x85dcd)[0x7f9880a64dcd]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(flint_throw+0xe0)[0x7f9880a64eb0]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_rem_q1+0xa1)[0x7f9880bd8bd1]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_rem+0x195)[0x7f9880bc39f5]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x7f9880babd50]
/home/scratch2/dimpase/sage/sage/local/lib/libflint.so.14(nmod_poly_gcd+0x95)[0x7f9880bb28b5]
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x1201c)[0x7f983d7b401c]
/lib64/libpython3.7m.so.1.0(_PyMethodDef_RawFastCallDict+0x33a)[0x7f988a402bea]
/lib64/libpython3.7m.so.1.0(+0x1ccd3f)[0x7f988a4c1d3f]
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/structure/element.cpython-37m-x86_64-linux-gnu.so(+0x134fc)[0x7f98897424fc]
/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/structure/element.cpython-37m-x86_64-linux-gnu.so(+0x338a4)[0x7f98897628a4]
/lib64/libpython3.7m.so.1.0(_PyObject_FastCallKeywords+0x4bc)[0x7f988a433eec]
/lib64/libpython3.7m.so.1.0(+0x1404e9)[0x7f988a4354e9]
/lib64/libpython3.7m.so.1.0(_PyEval_EvalFrameDefault+0x55da)[0x7f988a46fdea]
/lib64/libpython3.7m.so.1.0(_PyEval_EvalCodeWithName+0x2f0)[0x7f988a4227e0]
/lib64/libpython3.7m.so.1.0(_PyFunction_FastCallKeywords+0x2a2)[0x7f988a423822]
/lib64/libpython3.7m.so.1.0(+0x14035f)[0x7f988a43535f]
...
```




---

archive/issue_comments_418042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-22T09:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-22T10:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418044.json:
```json
{
    "body": "experiments tell that precision  needs to be at least 25 for this example to run, i.e. this works:\n\n```\nsage: monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 25)\n```\n",
    "created_at": "2020-05-22T10:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418044",
    "user": "https://github.com/dimpase"
}
```

experiments tell that precision  needs to be at least 25 for this example to run, i.e. this works:

```
sage: monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 25)
```




---

archive/issue_comments_418045.json:
```json
{
    "body": "But this works:\n\n```\nsage: R.<x> = QQ['x']\nsage: C=HyperellipticCurve(x^5 - 2*x + 3)\nsage: A,f=monsky_washnitzer.matrix_of_frobenius_hyperelliptic(C,5,3)\nsage: A\n[            4*5 + O(5^3)       5 + 2*5^2 + O(5^3) 2 + 3*5 + 2*5^2 + O(5^3)     2 + 5 + 5^2 + O(5^3)]\n[      3*5 + 5^2 + O(5^3)             3*5 + O(5^3)             4*5 + O(5^3)         2 + 5^2 + O(5^3)]\n[    4*5 + 4*5^2 + O(5^3)     3*5 + 2*5^2 + O(5^3)       5 + 3*5^2 + O(5^3)     2*5 + 2*5^2 + O(5^3)]\n[            5^2 + O(5^3)       5 + 4*5^2 + O(5^3)     4*5 + 3*5^2 + O(5^3)             2*5 + O(5^3)]\n```\n\n\nSo, apparently, some initialisation is missing, if C is created on the fly.",
    "created_at": "2020-05-22T10:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418045",
    "user": "https://github.com/dimpase"
}
```

But this works:

```
sage: R.<x> = QQ['x']
sage: C=HyperellipticCurve(x^5 - 2*x + 3)
sage: A,f=monsky_washnitzer.matrix_of_frobenius_hyperelliptic(C,5,3)
sage: A
[            4*5 + O(5^3)       5 + 2*5^2 + O(5^3) 2 + 3*5 + 2*5^2 + O(5^3)     2 + 5 + 5^2 + O(5^3)]
[      3*5 + 5^2 + O(5^3)             3*5 + O(5^3)             4*5 + O(5^3)         2 + 5^2 + O(5^3)]
[    4*5 + 4*5^2 + O(5^3)     3*5 + 2*5^2 + O(5^3)       5 + 3*5^2 + O(5^3)     2*5 + 2*5^2 + O(5^3)]
[            5^2 + O(5^3)       5 + 4*5^2 + O(5^3)     4*5 + 3*5^2 + O(5^3)             2*5 + O(5^3)]
```


So, apparently, some initialisation is missing, if C is created on the fly.



---

archive/issue_comments_418046.json:
```json
{
    "body": "This is reproducible on the ticket branch, on Fedora 30 and on Debian 10.\nThis works:\n\n```\nsage: R.<x> = QQ['x']\nsage: C=HyperellipticCurve(x^5 - 2*x + 3)\nsage: A,f=monsky_washnitzer.matrix_of_frobenius_hyperelliptic(C,5,3)\nsage: A\n```\n\nbut\n\n```\nsage: R.<x> = QQ['x']\nsage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 3)\n```\n\nsegfaults.",
    "created_at": "2020-05-22T12:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418046",
    "user": "https://github.com/dimpase"
}
```

This is reproducible on the ticket branch, on Fedora 30 and on Debian 10.
This works:

```
sage: R.<x> = QQ['x']
sage: C=HyperellipticCurve(x^5 - 2*x + 3)
sage: A,f=monsky_washnitzer.matrix_of_frobenius_hyperelliptic(C,5,3)
sage: A
```

but

```
sage: R.<x> = QQ['x']
sage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5 - 2*x + 3, 5, 3)
```

segfaults.



---

archive/issue_comments_418047.json:
```json
{
    "body": "Dima, thanks for reporting the Arb doctest failures.\n\nThe slight regressions in accuracy for elliptic_pi, elliptic_pi_inc and elliptic_rj are due to using a different algorithm to compute the R_J function for certain complex parameters. The new algorithm is a bit slower and less accurate, but unlike the old algorithm always gives the right branch. These doctest results just need to be updated.\n\nUnfortunately, the new algorithm doesn't work when phi is an inexact multiple of pi/2, leading to the NaN values. There is a workaround: acb_elliptic_pi_inc takes a pi flag to multiply the argument by pi exactly, so if you add a pi flag to the Sage wrapper and pass in phi=0.5 with pi=True in the doctest, it should give the expected result.\n\nIt's theoretically possible to fix these regressions, and I will open an Arb issue for it, but I'm not keen to spend time on it any time soon.\n\nThe other two examples look correct: converting an Arb number to an MPFR now rounds according to MPFR semantics (including rounding to infinity) instead of abort()ing when the exponents are out of range for MPFR.",
    "created_at": "2020-05-22T12:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418047",
    "user": "https://github.com/fredrik-johansson"
}
```

Dima, thanks for reporting the Arb doctest failures.

The slight regressions in accuracy for elliptic_pi, elliptic_pi_inc and elliptic_rj are due to using a different algorithm to compute the R_J function for certain complex parameters. The new algorithm is a bit slower and less accurate, but unlike the old algorithm always gives the right branch. These doctest results just need to be updated.

Unfortunately, the new algorithm doesn't work when phi is an inexact multiple of pi/2, leading to the NaN values. There is a workaround: acb_elliptic_pi_inc takes a pi flag to multiply the argument by pi exactly, so if you add a pi flag to the Sage wrapper and pass in phi=0.5 with pi=True in the doctest, it should give the expected result.

It's theoretically possible to fix these regressions, and I will open an Arb issue for it, but I'm not keen to spend time on it any time soon.

The other two examples look correct: converting an Arb number to an MPFR now rounds according to MPFR semantics (including rounding to infinity) instead of abort()ing when the exponents are out of range for MPFR.



---

archive/issue_comments_418048.json:
```json
{
    "body": "This works too:\n\n```\nsage: sage: R.<x> = QQ['x']\n....: sage: C=HyperellipticCurve(x^5 - 2*x + 7)\n....: sage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5-2*x+3, 5, 3)\n```\n\nThat is, apparently, some kind of Flint initialisation needs to happen before\nthe latter function can be called.",
    "created_at": "2020-05-22T15:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418048",
    "user": "https://github.com/dimpase"
}
```

This works too:

```
sage: sage: R.<x> = QQ['x']
....: sage: C=HyperellipticCurve(x^5 - 2*x + 7)
....: sage: A,f = monsky_washnitzer.matrix_of_frobenius_hyperelliptic(x^5-2*x+3, 5, 3)
```

That is, apparently, some kind of Flint initialisation needs to happen before
the latter function can be called.



---

archive/issue_comments_418049.json:
```json
{
    "body": "here it is one step closer to the bug:\n\n```\nsage: from sage.schemes.hyperelliptic_curves.monsky_washnitzer import SpecialHyperellipticQuotientRing\nsage: R.<x> = QQ['x']\nsage: Q=x^5 - 2*x + 3\nsage: SpecialHyperellipticQuotientRing(Q, Integers(5**4), True)\nFlint exception (Impossible inverse):\n    Cannot invert modulo 5*0\n------------------------------------------------------------------------\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7ccb)[0x795d3c2ccccb]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7e98)[0x795d3c2cce98]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xa70d)[0x795d3c2cf70d]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x12730)[0x795d3f372730]\n/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x10b)[0x795d3edec7bb]\n/lib/x86_64-linux-gnu/libc.so.6(abort+0x121)[0x795d3edd7535]\n/home/dimpase/sage-src/local/lib/libflint.so.14(+0x84cfd)[0x795d2f868cfd]\n/home/dimpase/sage-src/local/lib/libflint.so.14(flint_throw+0xe0)[0x795d2f868de0]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem_q1+0x8f)[0x795d2f9e26ef]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem+0x145)[0x795d2f9d0d85]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x795d2f9b3da0]\n/home/dimpase/sage-src/local/lib/libflint.so.14(nmod_poly_gcd+0x93)[0x795d2f9db6a3]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x117e4)[0x795cbaa107e4]\n/home/dimpase/sage-src/local/bin/python3(_PyMethodDef_RawFastCallDict+0x2d8)[0x5d7518]\n/home/dimpase/sage-src/local/bin/python3[0x4d77be]\n...\n```\n\n\nwith Flint 2.5.2, it prints\n\n```\nSpecialHyperellipticQuotientRing K[x,y,y^-1] / (y^2 = x^5 + 623*x + 3) over Ring of integers modulo 625\n```\n\nas it should.",
    "created_at": "2020-05-22T21:12:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418049",
    "user": "https://github.com/dimpase"
}
```

here it is one step closer to the bug:

```
sage: from sage.schemes.hyperelliptic_curves.monsky_washnitzer import SpecialHyperellipticQuotientRing
sage: R.<x> = QQ['x']
sage: Q=x^5 - 2*x + 3
sage: SpecialHyperellipticQuotientRing(Q, Integers(5**4), True)
Flint exception (Impossible inverse):
    Cannot invert modulo 5*0
------------------------------------------------------------------------
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7ccb)[0x795d3c2ccccb]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7e98)[0x795d3c2cce98]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xa70d)[0x795d3c2cf70d]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x12730)[0x795d3f372730]
/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x10b)[0x795d3edec7bb]
/lib/x86_64-linux-gnu/libc.so.6(abort+0x121)[0x795d3edd7535]
/home/dimpase/sage-src/local/lib/libflint.so.14(+0x84cfd)[0x795d2f868cfd]
/home/dimpase/sage-src/local/lib/libflint.so.14(flint_throw+0xe0)[0x795d2f868de0]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem_q1+0x8f)[0x795d2f9e26ef]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem+0x145)[0x795d2f9d0d85]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x795d2f9b3da0]
/home/dimpase/sage-src/local/lib/libflint.so.14(nmod_poly_gcd+0x93)[0x795d2f9db6a3]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x117e4)[0x795cbaa107e4]
/home/dimpase/sage-src/local/bin/python3(_PyMethodDef_RawFastCallDict+0x2d8)[0x5d7518]
/home/dimpase/sage-src/local/bin/python3[0x4d77be]
...
```


with Flint 2.5.2, it prints

```
SpecialHyperellipticQuotientRing K[x,y,y^-1] / (y^2 = x^5 + 623*x + 3) over Ring of integers modulo 625
```

as it should.



---

archive/issue_comments_418050.json:
```json
{
    "body": "and one more step further - basically, creating HyperellipticCurve over Z mod 625\ndoes not work:\n\n```\nsage: R.<x> = QQ['x']\nsage: Q=x^5 - 2*x + 3\nsage: HyperellipticCurve(Q.change_ring(Integers(5**4)))\nFlint exception (Impossible inverse):\n    Cannot invert modulo 5*0\n------------------------------------------------------------------------\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7ccb)[0x7d0ea9c75ccb]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7e98)[0x7d0ea9c75e98]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xa70d)[0x7d0ea9c7870d]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x12730)[0x7d0eacd1b730]\n/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x10b)[0x7d0eac7957bb]\n/lib/x86_64-linux-gnu/libc.so.6(abort+0x121)[0x7d0eac780535]\n/home/dimpase/sage-src/local/lib/libflint.so.14(+0x84cfd)[0x7d0ea1684cfd]\n/home/dimpase/sage-src/local/lib/libflint.so.14(flint_throw+0xe0)[0x7d0ea1684de0]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem_q1+0x8f)[0x7d0ea17fe6ef]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem+0x145)[0x7d0ea17ecd85]\n/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x7d0ea17cfda0]\n/home/dimpase/sage-src/local/lib/libflint.so.14(nmod_poly_gcd+0x93)[0x7d0ea17f76a3]\n/home/dimpase/sage-src/local/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x117e4)[0x7d0e28f387e4]\n/home/dimpase/sage-src/local/bin/python3(_PyMethodDef_RawFastCallDict+0x2d8)[0x5d7518]\n```\n",
    "created_at": "2020-05-22T21:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418050",
    "user": "https://github.com/dimpase"
}
```

and one more step further - basically, creating HyperellipticCurve over Z mod 625
does not work:

```
sage: R.<x> = QQ['x']
sage: Q=x^5 - 2*x + 3
sage: HyperellipticCurve(Q.change_ring(Integers(5**4)))
Flint exception (Impossible inverse):
    Cannot invert modulo 5*0
------------------------------------------------------------------------
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7ccb)[0x7d0ea9c75ccb]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0x7e98)[0x7d0ea9c75e98]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/cysignals/signals.cpython-37m-x86_64-linux-gnu.so(+0xa70d)[0x7d0ea9c7870d]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x12730)[0x7d0eacd1b730]
/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x10b)[0x7d0eac7957bb]
/lib/x86_64-linux-gnu/libc.so.6(abort+0x121)[0x7d0eac780535]
/home/dimpase/sage-src/local/lib/libflint.so.14(+0x84cfd)[0x7d0ea1684cfd]
/home/dimpase/sage-src/local/lib/libflint.so.14(flint_throw+0xe0)[0x7d0ea1684de0]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem_q1+0x8f)[0x7d0ea17fe6ef]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_rem+0x145)[0x7d0ea17ecd85]
/home/dimpase/sage-src/local/lib/libflint.so.14(_nmod_poly_gcd_euclidean+0x60)[0x7d0ea17cfda0]
/home/dimpase/sage-src/local/lib/libflint.so.14(nmod_poly_gcd+0x93)[0x7d0ea17f76a3]
/home/dimpase/sage-src/local/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_zmod_flint.cpython-37m-x86_64-linux-gnu.so(+0x117e4)[0x7d0e28f387e4]
/home/dimpase/sage-src/local/bin/python3(_PyMethodDef_RawFastCallDict+0x2d8)[0x5d7518]
```




---

archive/issue_comments_418051.json:
```json
{
    "body": "OK, so this seems to be a basic `Polynomial_zmod_flint` problem:\n\n```\nsage: R.<x> = QQ['x']\nsage: Q=x^5 - 2*x + 3\nsage: Qm=Q.change_ring(Integers(5**4))\nsage: F=4*Qm\nsage: F.gcd(F.derivative())\nFlint exception (Impossible inverse):\n    Cannot invert modulo 5*0\n-------------------------\nboom...\n```\n\n\n(this happily returns `1` with Flint 2.5.2)\n\nSo this is not really a specific p-adic problem at all.",
    "created_at": "2020-05-22T22:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418051",
    "user": "https://github.com/dimpase"
}
```

OK, so this seems to be a basic `Polynomial_zmod_flint` problem:

```
sage: R.<x> = QQ['x']
sage: Q=x^5 - 2*x + 3
sage: Qm=Q.change_ring(Integers(5**4))
sage: F=4*Qm
sage: F.gcd(F.derivative())
Flint exception (Impossible inverse):
    Cannot invert modulo 5*0
-------------------------
boom...
```


(this happily returns `1` with Flint 2.5.2)

So this is not really a specific p-adic problem at all.



---

archive/issue_comments_418052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-23T09:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-23T09:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418054.json:
```json
{
    "body": "related discussion with Flint people (Bill): https://github.com/wbhart/flint2/issues/743",
    "created_at": "2020-05-23T09:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418054",
    "user": "https://github.com/dimpase"
}
```

related discussion with Flint people (Bill): https://github.com/wbhart/flint2/issues/743



---

archive/issue_comments_418055.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-05-23T10:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418055",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418056.json:
```json
{
    "body": "Probably one would need to revise the handling of GCDs of polynomials in general, but this is for another ticket, I guess.",
    "created_at": "2020-05-23T10:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418056",
    "user": "https://github.com/dimpase"
}
```

Probably one would need to revise the handling of GCDs of polynomials in general, but this is for another ticket, I guess.



---

archive/issue_comments_418057.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-05-29T09:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418058.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-05-29T10:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418059.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-05T17:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418060.json:
```json
{
    "body": "New commits:\n----\nNew commits:",
    "created_at": "2020-06-05T17:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418060",
    "user": "https://github.com/dimpase"
}
```

New commits:
----
New commits:



---

archive/issue_comments_418061.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-06-05T17:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418061",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to critical.



---

archive/issue_comments_418062.json:
```json
{
    "body": "OK, now the real reviewing/testing may commence!",
    "created_at": "2020-06-05T17:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418062",
    "user": "https://github.com/dimpase"
}
```

OK, now the real reviewing/testing may commence!



---

archive/issue_comments_418063.json:
```json
{
    "body": "I'm running github workflows here:\n\nhttps://github.com/kliem/sage-test-27122/actions/runs/126335040\n\nhttps://github.com/kliem/sage-test-27122/actions/runs/126335044\n\nhttps://github.com/kliem/sage-test-27122/actions/runs/126335047\n\nhttps://github.com/kliem/sage-test-27122/actions/runs/126335050\n\nhttps://github.com/kliem/sage-test-27122/actions/runs/126335052\n\n(and I should really rename my github repository)\n\nand I'm testing it on a debian buster myself.",
    "created_at": "2020-06-05T19:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418063",
    "user": "https://github.com/kliem"
}
```

I'm running github workflows here:

https://github.com/kliem/sage-test-27122/actions/runs/126335040

https://github.com/kliem/sage-test-27122/actions/runs/126335044

https://github.com/kliem/sage-test-27122/actions/runs/126335047

https://github.com/kliem/sage-test-27122/actions/runs/126335050

https://github.com/kliem/sage-test-27122/actions/runs/126335052

(and I should really rename my github repository)

and I'm testing it on a debian buster myself.



---

archive/issue_comments_418064.json:
```json
{
    "body": "Attachment [e_antic-0.1.5.log](tarball://root/attachments/some-uuid/ticket29719/e_antic-0.1.5.log) by @kliem created at 2020-06-05 20:15:09",
    "created_at": "2020-06-05T20:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418064",
    "user": "https://github.com/kliem"
}
```

Attachment [e_antic-0.1.5.log](tarball://root/attachments/some-uuid/ticket29719/e_antic-0.1.5.log) by @kliem created at 2020-06-05 20:15:09



---

archive/issue_comments_418065.json:
```json
{
    "body": "e_antic fails to build on this flint.",
    "created_at": "2020-06-05T20:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418065",
    "user": "https://github.com/kliem"
}
```

e_antic fails to build on this flint.



---

archive/issue_comments_418066.json:
```json
{
    "body": "I just was about to do this :-)",
    "created_at": "2020-06-05T20:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418066",
    "user": "https://github.com/kliem"
}
```

I just was about to do this :-)



---

archive/issue_comments_418067.json:
```json
{
    "body": "\n```\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -fopenmp -march=native -O2 -c poly_extra/descartes_bound.c  -fPIC -DPIC -o poly_extra/.libs/descartes_bound.o\nIn file included from ./e-antic/poly_extra.h:15,\n                 from poly_extra/bisection_step_arb.c:12:\n./e-antic/e-antic.h:24:2: error: #error FLINT 2.5.2 or 2.5.3 required\n #error FLINT 2.5.2 or 2.5.3 required\n  ^~~~~\n```\n\nWhy is this done in a header, not in `./configure` ?\n\nusing `--enable-flint-devel` in configure doesn't help, by the way.",
    "created_at": "2020-06-05T21:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418067",
    "user": "https://github.com/dimpase"
}
```


```
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -fopenmp -march=native -O2 -c poly_extra/descartes_bound.c  -fPIC -DPIC -o poly_extra/.libs/descartes_bound.o
In file included from ./e-antic/poly_extra.h:15,
                 from poly_extra/bisection_step_arb.c:12:
./e-antic/e-antic.h:24:2: error: #error FLINT 2.5.2 or 2.5.3 required
 #error FLINT 2.5.2 or 2.5.3 required
  ^~~~~
```

Why is this done in a header, not in `./configure` ?

using `--enable-flint-devel` in configure doesn't help, by the way.



---

archive/issue_comments_418068.json:
```json
{
    "body": "see https://github.com/videlec/e-antic/issues/93",
    "created_at": "2020-06-06T12:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418068",
    "user": "https://github.com/dimpase"
}
```

see https://github.com/videlec/e-antic/issues/93



---

archive/issue_comments_418069.json:
```json
{
    "body": "Let's take care of e_antic on a follow-up ticket.",
    "created_at": "2020-06-06T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418069",
    "user": "https://github.com/mkoeppe"
}
```

Let's take care of e_antic on a follow-up ticket.



---

archive/issue_comments_418070.json:
```json
{
    "body": "I don't like this. It breaks `normaliz`. Yes, it is only an `optional` package, but that is basically downgrading it to `experimental`. Isn't it?\n\nOr is the fix already pretty much done? The order of things makes sense (first upgrade flint and then fix optional packages it breaks) but I would like that the fix is available (and ideally is even merged in the same beta).",
    "created_at": "2020-06-06T18:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418070",
    "user": "https://github.com/kliem"
}
```

I don't like this. It breaks `normaliz`. Yes, it is only an `optional` package, but that is basically downgrading it to `experimental`. Isn't it?

Or is the fix already pretty much done? The order of things makes sense (first upgrade flint and then fix optional packages it breaks) but I would like that the fix is available (and ideally is even merged in the same beta).



---

archive/issue_comments_418071.json:
```json
{
    "body": "Of course we must fix it before the next release, but not everything can be done within one beta. We need to do LOTS of package upgrades!",
    "created_at": "2020-06-06T18:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418071",
    "user": "https://github.com/mkoeppe"
}
```

Of course we must fix it before the next release, but not everything can be done within one beta. We need to do LOTS of package upgrades!



---

archive/issue_comments_418072.json:
```json
{
    "body": "In particular, a big Normaliz update is coming. Not sure if Winfried is already testing with the new FLINT release?",
    "created_at": "2020-06-06T18:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418072",
    "user": "https://github.com/mkoeppe"
}
```

In particular, a big Normaliz update is coming. Not sure if Winfried is already testing with the new FLINT release?



---

archive/issue_comments_418073.json:
```json
{
    "body": "I had not noticed that Flint 2.6.0 is available. Therefore it is not installed with Normaliz 3.8.5 that was just released (not a big release). \n\nAs soon as possible, I will test Flint 2.6.0. I need the backport to the 0 series of e-antic.",
    "created_at": "2020-06-07T08:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418073",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

I had not noticed that Flint 2.6.0 is available. Therefore it is not installed with Normaliz 3.8.5 that was just released (not a big release). 

As soon as possible, I will test Flint 2.6.0. I need the backport to the 0 series of e-antic.



---

archive/issue_comments_418074.json:
```json
{
    "body": "There is some mac problem:\n\nhttps://github.com/kliem/sage-test-27122/runs/743556771 local-macos (homebrew-macos-python3_xcode, standard) \n\n\n```\n [dochtml]     File \"/Applications/Xcode_11.4.1.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/runpy.py\", line 109, in _get_module_details\n  [dochtml]       __import__(pkg_name)\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 60, in <module>\n  [dochtml]       import sage.all\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/all.py\", line 119, in <module>\n  [dochtml]       from sage.misc.all       import *         # takes a while\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/misc/all.py\", line 84, in <module>\n  [dochtml]       from .functional import (additive_order,\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/misc/functional.py\", line 26, in <module>\n  [dochtml]       from sage.rings.complex_double import CDF\n  [dochtml]     File \"sage/rings/integer.pxd\", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)\n  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/libflint-14.dylib\n  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so\n  [dochtml]     Reason: image not found\n  [dochtml] Full log file: logs/dochtml.log\nmake[1]: *** [doc-html] Error 1\n```\n\n\nhomebrew https://github.com/kliem/sage-test-27122/runs/743556743\n\n\n```\n[dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/homebrew/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py\", line 109, in _get_module_details\n  [dochtml]       __import__(pkg_name)\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 60, in <module>\n  [dochtml]       import sage.all\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/all.py\", line 119, in <module>\n  [dochtml]       from sage.misc.all       import *         # takes a while\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/misc/all.py\", line 84, in <module>\n  [dochtml]       from .functional import (additive_order,\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/misc/functional.py\", line 26, in <module>\n  [dochtml]       from sage.rings.complex_double import CDF\n  [dochtml]     File \"sage/rings/integer.pxd\", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)\n  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/libflint-14.dylib\n  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so\n  [dochtml]     Reason: image not found\n```\n\n\nhttps://github.com/kliem/sage-test-27122/runs/743556808\n\nlocal-macos (homebrew-macos-python3_pythonorg, standard) \n\n\n```\n [dochtml]   Traceback (most recent call last):\n  [dochtml]     File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py\", line 183, in _run_module_as_main\n  [dochtml]       mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  [dochtml]     File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py\", line 142, in _get_module_details\n  [dochtml]       return _get_module_details(pkg_main_name, error)\n  [dochtml]     File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py\", line 109, in _get_module_details\n  [dochtml]       __import__(pkg_name)\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 60, in <module>\n  [dochtml]       import sage.all\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/all.py\", line 119, in <module>\n  [dochtml]       from sage.misc.all       import *         # takes a while\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/misc/all.py\", line 84, in <module>\n  [dochtml]       from .functional import (additive_order,\n  [dochtml]     File \"/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/misc/functional.py\", line 26, in <module>\n  [dochtml]       from sage.rings.complex_double import CDF\n  [dochtml]     File \"sage/rings/integer.pxd\", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)\n  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/libflint-14.dylib\n  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so\n  [dochtml]     Reason: image not found\n```\n",
    "created_at": "2020-06-07T12:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418074",
    "user": "https://github.com/kliem"
}
```

There is some mac problem:

https://github.com/kliem/sage-test-27122/runs/743556771 local-macos (homebrew-macos-python3_xcode, standard) 


```
 [dochtml]     File "/Applications/Xcode_11.4.1.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/runpy.py", line 109, in _get_module_details
  [dochtml]       __import__(pkg_name)
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 60, in <module>
  [dochtml]       import sage.all
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/all.py", line 119, in <module>
  [dochtml]       from sage.misc.all       import *         # takes a while
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/misc/all.py", line 84, in <module>
  [dochtml]       from .functional import (additive_order,
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/misc/functional.py", line 26, in <module>
  [dochtml]       from sage.rings.complex_double import CDF
  [dochtml]     File "sage/rings/integer.pxd", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)
  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/libflint-14.dylib
  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_xcode-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so
  [dochtml]     Reason: image not found
  [dochtml] Full log file: logs/dochtml.log
make[1]: *** [doc-html] Error 1
```


homebrew https://github.com/kliem/sage-test-27122/runs/743556743


```
[dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/homebrew/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 109, in _get_module_details
  [dochtml]       __import__(pkg_name)
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 60, in <module>
  [dochtml]       import sage.all
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/all.py", line 119, in <module>
  [dochtml]       from sage.misc.all       import *         # takes a while
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/misc/all.py", line 84, in <module>
  [dochtml]       from .functional import (additive_order,
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/misc/functional.py", line 26, in <module>
  [dochtml]       from sage.rings.complex_double import CDF
  [dochtml]     File "sage/rings/integer.pxd", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)
  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/libflint-14.dylib
  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so
  [dochtml]     Reason: image not found
```


https://github.com/kliem/sage-test-27122/runs/743556808

local-macos (homebrew-macos-python3_pythonorg, standard) 


```
 [dochtml]   Traceback (most recent call last):
  [dochtml]     File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 183, in _run_module_as_main
  [dochtml]       mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  [dochtml]     File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 142, in _get_module_details
  [dochtml]       return _get_module_details(pkg_main_name, error)
  [dochtml]     File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 109, in _get_module_details
  [dochtml]       __import__(pkg_name)
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 60, in <module>
  [dochtml]       import sage.all
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/all.py", line 119, in <module>
  [dochtml]       from sage.misc.all       import *         # takes a while
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/misc/all.py", line 84, in <module>
  [dochtml]       from .functional import (additive_order,
  [dochtml]     File "/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/misc/functional.py", line 26, in <module>
  [dochtml]       from sage.rings.complex_double import CDF
  [dochtml]     File "sage/rings/integer.pxd", line 7, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:23890)
  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so, 2): Library not loaded: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/var/tmp/sage/build/flint-2.6.0/inst/Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/libflint-14.dylib
  [dochtml]     Referenced from: /Users/runner/runners/2.263.0/work/sage-test-27122/sage-test-27122/.tox/local-homebrew-macos-python3_pythonorg-standard/local/lib/python3.7/site-packages/sage/rings/integer.cpython-37m-darwin.so
  [dochtml]     Reason: image not found
```




---

archive/issue_comments_418075.json:
```json
{
    "body": "Sounds like the `install_name` business has been messed up again",
    "created_at": "2020-06-07T18:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418075",
    "user": "https://github.com/mkoeppe"
}
```

Sounds like the `install_name` business has been messed up again



---

archive/issue_comments_418076.json:
```json
{
    "body": "Indeed, broken again with DESTDIR, in https://github.com/wbhart/flint2/blob/v2.6.0/Makefile.in#L216:\n\n```\n\t$(AT)if [ \"$(OS)\" = \"Darwin\" ] && [ \"$(FLINT_SHARED)\" -eq \"1\" ]; then \\\n\t\tinstall_name_tool -id \"$(DESTDIR)$(PREFIX)/$(LIBDIR)/$(FLINT_LIB)\" \"$(DESTDIR)$(PREFIX)/$(LIBDIR)/$(FLINT_LIBNAME)\"; \\\n\tfi\n```\n",
    "created_at": "2020-06-07T18:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418076",
    "user": "https://github.com/mkoeppe"
}
```

Indeed, broken again with DESTDIR, in https://github.com/wbhart/flint2/blob/v2.6.0/Makefile.in#L216:

```
	$(AT)if [ "$(OS)" = "Darwin" ] && [ "$(FLINT_SHARED)" -eq "1" ]; then \
		install_name_tool -id "$(DESTDIR)$(PREFIX)/$(LIBDIR)/$(FLINT_LIB)" "$(DESTDIR)$(PREFIX)/$(LIBDIR)/$(FLINT_LIBNAME)"; \
	fi
```




---

archive/issue_comments_418077.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-07T18:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418077",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418078.json:
```json
{
    "body": "please open an issue with upstream",
    "created_at": "2020-06-07T19:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418078",
    "user": "https://github.com/dimpase"
}
```

please open an issue with upstream



---

archive/issue_comments_418079.json:
```json
{
    "body": "Here's a branch that should fix it. Please try:\nhttps://github.com/mkoeppe/flint2/tree/v2.6.0-sage",
    "created_at": "2020-06-07T19:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418079",
    "user": "https://github.com/mkoeppe"
}
```

Here's a branch that should fix it. Please try:
https://github.com/mkoeppe/flint2/tree/v2.6.0-sage



---

archive/issue_comments_418080.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-07T19:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418080",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418081.json:
```json
{
    "body": "I'm running some tests at https://github.com/mkoeppe/sage/actions/runs/128112212\n(updated<sup>2</sup>)",
    "created_at": "2020-06-07T19:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418081",
    "user": "https://github.com/mkoeppe"
}
```

I'm running some tests at https://github.com/mkoeppe/sage/actions/runs/128112212
(updated<sup>2</sup>)



---

archive/issue_comments_418082.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-07T21:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418082",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418083.json:
```json
{
    "body": "e-antic should be fixed by #29826",
    "created_at": "2020-06-08T09:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418083",
    "user": "https://github.com/videlec"
}
```

e-antic should be fixed by #29826



---

archive/issue_comments_418084.json:
```json
{
    "body": "Appears to work for me. Also the normaliz doesn't make any problems (at least all doctests in geometry pass and it did install cleanly with flint 2.6.0).",
    "created_at": "2020-06-08T10:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418084",
    "user": "https://github.com/kliem"
}
```

Appears to work for me. Also the normaliz doesn't make any problems (at least all doctests in geometry pass and it did install cleanly with flint 2.6.0).



---

archive/issue_comments_418085.json:
```json
{
    "body": "Replying to [comment:50 vdelecroix]:\n> e-antic should be fixed by #29826\n\nshould we add here the patch you produced for flint?\nhttps://github.com/wbhart/flint2/pull/766\nas mentioned on\nhttps://github.com/videlec/e-antic/issues/93 ?",
    "created_at": "2020-06-08T11:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418085",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:50 vdelecroix]:
> e-antic should be fixed by #29826

should we add here the patch you produced for flint?
https://github.com/wbhart/flint2/pull/766
as mentioned on
https://github.com/videlec/e-antic/issues/93 ?



---

archive/issue_comments_418086.json:
```json
{
    "body": "Replying to [comment:52 dimpase]:\n> Replying to [comment:50 vdelecroix]:\n> > e-antic should be fixed by #29826\n> \n> should we add here the patch you produced for flint?\n> https://github.com/wbhart/flint2/pull/766\n> as mentioned on\n> https://github.com/videlec/e-antic/issues/93 ?\n\nThe patch is not required for e-antic. Without the patch the `fmpq_poly_add_fmpq` from flint is broken. But this function does not seem to be used anywhere in sage.",
    "created_at": "2020-06-08T11:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418086",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:52 dimpase]:
> Replying to [comment:50 vdelecroix]:
> > e-antic should be fixed by #29826
> 
> should we add here the patch you produced for flint?
> https://github.com/wbhart/flint2/pull/766
> as mentioned on
> https://github.com/videlec/e-antic/issues/93 ?

The patch is not required for e-antic. Without the patch the `fmpq_poly_add_fmpq` from flint is broken. But this function does not seem to be used anywhere in sage.



---

archive/issue_comments_418087.json:
```json
{
    "body": "I have tried to build Normaliz natively with Flint 2.6.0. \n\nThen compiling e-antic fails with \n\n\n\n```\nconfigure: WARNING: arb.h: present but cannot be compiled\nconfigure: WARNING: arb.h:     check for missing prerequisite headers?\nconfigure: WARNING: arb.h: see the Autoconf documentation\nconfigure: WARNING: arb.h:     section \"Present But Cannot Be Compiled\"\nconfigure: WARNING: arb.h: proceeding with the compiler's result\nconfigure: WARNING:     ## --------------------------------------------- ##\nconfigure: WARNING:     ## Report this to vincent.delecroix@math.cnrs.fr ##\nconfigure: WARNING:     ## --------------------------------------------- ##\n```\n\n\n\nO.K. So we try to rebuild arb 2.17. This fails with\n\n\n\n```\nIn file included from /home/winfried/Dropbox/git_normaliz/nmz_opt_lib/ARB_source/arb-2.17.0/fmpr.h:26:0,\n                 from add_naive.c:12:\n/home/winfried/Dropbox/git_normaliz/nmz_opt_lib/ARB_source/arb-2.17.0/fmpz_extras.h:47:1: error: redefinition of \u2018fmpz_add_si\u2019\n fmpz_add_si(fmpz_t z, const fmpz_t x, slong y)\n```\n",
    "created_at": "2020-06-08T11:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418087",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

I have tried to build Normaliz natively with Flint 2.6.0. 

Then compiling e-antic fails with 



```
configure: WARNING: arb.h: present but cannot be compiled
configure: WARNING: arb.h:     check for missing prerequisite headers?
configure: WARNING: arb.h: see the Autoconf documentation
configure: WARNING: arb.h:     section "Present But Cannot Be Compiled"
configure: WARNING: arb.h: proceeding with the compiler's result
configure: WARNING:     ## --------------------------------------------- ##
configure: WARNING:     ## Report this to vincent.delecroix@math.cnrs.fr ##
configure: WARNING:     ## --------------------------------------------- ##
```



O.K. So we try to rebuild arb 2.17. This fails with



```
In file included from /home/winfried/Dropbox/git_normaliz/nmz_opt_lib/ARB_source/arb-2.17.0/fmpr.h:26:0,
                 from add_naive.c:12:
/home/winfried/Dropbox/git_normaliz/nmz_opt_lib/ARB_source/arb-2.17.0/fmpz_extras.h:47:1: error: redefinition of ‘fmpz_add_si’
 fmpz_add_si(fmpz_t z, const fmpz_t x, slong y)
```




---

archive/issue_comments_418088.json:
```json
{
    "body": "Unpatched arb 2.16 and 2.17 do not work with flint 2.6.0. You need a patch - e.g. for arb 2.16 it is included in the branch of this ticket (IIRC the same patch will work for 2.17 too).",
    "created_at": "2020-06-08T12:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418088",
    "user": "https://github.com/dimpase"
}
```

Unpatched arb 2.16 and 2.17 do not work with flint 2.6.0. You need a patch - e.g. for arb 2.16 it is included in the branch of this ticket (IIRC the same patch will work for 2.17 too).



---

archive/issue_comments_418089.json:
```json
{
    "body": "Replying to [comment:46 mkoeppe]:\n> Here's a branch that should fix it. Please try:\n> https://github.com/mkoeppe/flint2/tree/v2.6.0-sage\n\nThis is now https://github.com/wbhart/flint2/pull/768",
    "created_at": "2020-06-08T14:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418089",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:46 mkoeppe]:
> Here's a branch that should fix it. Please try:
> https://github.com/mkoeppe/flint2/tree/v2.6.0-sage

This is now https://github.com/wbhart/flint2/pull/768



---

archive/issue_comments_418090.json:
```json
{
    "body": "Replying to [comment:56 mkoeppe]:\n> Replying to [comment:46 mkoeppe]:\n> > Here's a branch that should fix it. Please try:\n> > https://github.com/mkoeppe/flint2/tree/v2.6.0-sage\n> \n> This is now https://github.com/wbhart/flint2/pull/768\nIt has been merged upstream.",
    "created_at": "2020-06-09T03:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418090",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:56 mkoeppe]:
> Replying to [comment:46 mkoeppe]:
> > Here's a branch that should fix it. Please try:
> > https://github.com/mkoeppe/flint2/tree/v2.6.0-sage
> 
> This is now https://github.com/wbhart/flint2/pull/768
It has been merged upstream.



---

archive/issue_comments_418091.json:
```json
{
    "body": "I will update Normaliz to Flint 2.6.0 as soon as arb and e-antic are in complete harmony with it. I hope for some increase in performance, but that is not so urgent.",
    "created_at": "2020-06-09T07:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418091",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

I will update Normaliz to Flint 2.6.0 as soon as arb and e-antic are in complete harmony with it. I hope for some increase in performance, but that is not so urgent.



---

archive/issue_comments_418092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-10T20:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418093.json:
```json
{
    "body": "Another round of tests (this time just this ticket) at https://github.com/mkoeppe/sage/actions/runs/131411841",
    "created_at": "2020-06-10T20:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418093",
    "user": "https://github.com/mkoeppe"
}
```

Another round of tests (this time just this ticket) at https://github.com/mkoeppe/sage/actions/runs/131411841



---

archive/issue_comments_418094.json:
```json
{
    "body": "Looking good now. I'd be ready to set it to positive review, but we need another reviewer for the changes that I added.",
    "created_at": "2020-06-14T01:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418094",
    "user": "https://github.com/mkoeppe"
}
```

Looking good now. I'd be ready to set it to positive review, but we need another reviewer for the changes that I added.



---

archive/issue_comments_418095.json:
```json
{
    "body": "I have updated Normaliz on GitHub/master to Flint 2.6.0/arb 2.18.0/e-antic 0.1.7. This required no change in the Normaliz code, as expected. The only visible change in the tests is that the floating point approximations to number field elements have one more decimal digit.\n\nThe version number is now 3.8.6. Note that the source file structure has been changed considerably: every cpp file is now comiled in a translation unit of its own. Moreover, some small files have been merged and some cpp files have been inserted into h files.\n\nIf it should be helpful,  I can make a new Normaliz release the next days.",
    "created_at": "2020-06-14T15:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418095",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

I have updated Normaliz on GitHub/master to Flint 2.6.0/arb 2.18.0/e-antic 0.1.7. This required no change in the Normaliz code, as expected. The only visible change in the tests is that the floating point approximations to number field elements have one more decimal digit.

The version number is now 3.8.6. Note that the source file structure has been changed considerably: every cpp file is now comiled in a translation unit of its own. Moreover, some small files have been merged and some cpp files have been inserted into h files.

If it should be helpful,  I can make a new Normaliz release the next days.



---

archive/issue_comments_418096.json:
```json
{
    "body": "It seems that PyNormaliz has a problem with the new version. Therefore please wait until further notice.",
    "created_at": "2020-06-14T16:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418096",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

It seems that PyNormaliz has a problem with the new version. Therefore please wait until further notice.



---

archive/issue_comments_418097.json:
```json
{
    "body": "Arb update is #28623",
    "created_at": "2020-06-14T21:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418097",
    "user": "https://github.com/mkoeppe"
}
```

Arb update is #28623



---

archive/issue_comments_418098.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-14T22:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418098",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418099.json:
```json
{
    "body": "The problem was in Normaliz itself. Should be fixed now. The PyNormaliz tests go through. PyNormaliz 2.11 has not been changed.",
    "created_at": "2020-06-15T13:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418099",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

The problem was in Normaliz itself. Should be fixed now. The PyNormaliz tests go through. PyNormaliz 2.11 has not been changed.



---

archive/issue_comments_418100.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-16T07:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418101.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-16T07:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418101",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418102.json:
```json
{
    "body": "I did some computations yesterday. My impression: no performance gains or losses compared to the e-antic version based on Flint 2.5.2.",
    "created_at": "2020-06-16T07:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418102",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

I did some computations yesterday. My impression: no performance gains or losses compared to the e-antic version based on Flint 2.5.2.



---

archive/issue_comments_418103.json:
```json
{
    "body": "Replying to [comment:71 git]:\n> ||[e1d3d2a](https://git.sagemath.org/sage.git/commit/?id=e1d3d2a1b6ecc7de128f7c439919e042ca4503aa)||`Merge branch 'u/mkoeppe/upgrade_arb_to_2_18_0' of trac.sagemath.org:sage into flint260arb218`||\n\nIf you are running the CI on this already, please post the link",
    "created_at": "2020-06-16T11:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418103",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:71 git]:
> ||[e1d3d2a](https://git.sagemath.org/sage.git/commit/?id=e1d3d2a1b6ecc7de128f7c439919e042ca4503aa)||`Merge branch 'u/mkoeppe/upgrade_arb_to_2_18_0' of trac.sagemath.org:sage into flint260arb218`||

If you are running the CI on this already, please post the link



---

archive/issue_comments_418104.json:
```json
{
    "body": "The pill request has been merged, as you have see. Now action yet. Can I force it to happen?",
    "created_at": "2020-06-16T12:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418104",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

The pill request has been merged, as you have see. Now action yet. Can I force it to happen?



---

archive/issue_comments_418105.json:
```json
{
    "body": "Replying to [comment:74 mkoeppe]:\n> Replying to [comment:71 git]:\n> > ||[e1d3d2a](https://git.sagemath.org/sage.git/commit/?id=e1d3d2a1b6ecc7de128f7c439919e042ca4503aa)||`Merge branch 'u/mkoeppe/upgrade_arb_to_2_18_0' of trac.sagemath.org:sage into flint260arb218`||\n> \n> If you are running the CI on this already, please post the link\n\nno,I haven't started these yet, I was  waiting whether there are any more things to deal with here.",
    "created_at": "2020-06-16T12:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418105",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:74 mkoeppe]:
> Replying to [comment:71 git]:
> > ||[e1d3d2a](https://git.sagemath.org/sage.git/commit/?id=e1d3d2a1b6ecc7de128f7c439919e042ca4503aa)||`Merge branch 'u/mkoeppe/upgrade_arb_to_2_18_0' of trac.sagemath.org:sage into flint260arb218`||
> 
> If you are running the CI on this already, please post the link

no,I haven't started these yet, I was  waiting whether there are any more things to deal with here.



---

archive/issue_comments_418106.json:
```json
{
    "body": "Replying to [comment:75 Winfried]:\n> The pill request has been merged, as you have see. Now action yet. Can I force it to happen?\n\nI am not sure I undestand what PR you mean. Could you post a link?",
    "created_at": "2020-06-16T12:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418106",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:75 Winfried]:
> The pill request has been merged, as you have see. Now action yet. Can I force it to happen?

I am not sure I undestand what PR you mean. Could you post a link?



---

archive/issue_comments_418107.json:
```json
{
    "body": "Sorry, I meant the Normaliz pull request\n\nhttps://github.com/Normaliz/Normaliz/pull/336",
    "created_at": "2020-06-16T13:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418107",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

Sorry, I meant the Normaliz pull request

https://github.com/Normaliz/Normaliz/pull/336



---

archive/issue_comments_418108.json:
```json
{
    "body": "Replying to [comment:78 Winfried]:\n> Sorry, I meant the Normaliz pull request\n> \n> https://github.com/Normaliz/Normaliz/pull/336\n\nthis does not seem to be related to updating flint/arb/e_antic.\nDid you need to do any changes to accommodate these updates?",
    "created_at": "2020-06-16T17:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418108",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:78 Winfried]:
> Sorry, I meant the Normaliz pull request
> 
> https://github.com/Normaliz/Normaliz/pull/336

this does not seem to be related to updating flint/arb/e_antic.
Did you need to do any changes to accommodate these updates?



---

archive/issue_comments_418109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-18T10:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418110.json:
```json
{
    "body": "tests running on https://github.com/dimpase/sage/pull/12",
    "created_at": "2020-06-18T21:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418110",
    "user": "https://github.com/dimpase"
}
```

tests running on https://github.com/dimpase/sage/pull/12



---

archive/issue_comments_418111.json:
```json
{
    "body": "Replying to [comment:79 dimpase]:\n> Replying to [comment:78 Winfried]:\n> > Sorry, I meant the Normaliz pull request\n> > \n> > https://github.com/Normaliz/Normaliz/pull/336\n> \n> this does not seem to be related to updating flint/arb/e_antic.\n> Did you need to do any changes to accommodate these updates?\n\nSorry. The comment was misplaced. Too may threads to follow.",
    "created_at": "2020-06-19T12:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418111",
    "user": "https://trac.sagemath.org/admin/accounts/users/Winfried"
}
```

Replying to [comment:79 dimpase]:
> Replying to [comment:78 Winfried]:
> > Sorry, I meant the Normaliz pull request
> > 
> > https://github.com/Normaliz/Normaliz/pull/336
> 
> this does not seem to be related to updating flint/arb/e_antic.
> Did you need to do any changes to accommodate these updates?

Sorry. The comment was misplaced. Too may threads to follow.



---

archive/issue_comments_418112.json:
```json
{
    "body": "tests are being spoiled by the e_antic distro on LABRI server being inaccessible :-(",
    "created_at": "2020-06-20T19:23:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418112",
    "user": "https://github.com/dimpase"
}
```

tests are being spoiled by the e_antic distro on LABRI server being inaccessible :-(



---

archive/issue_comments_418113.json:
```json
{
    "body": "Volker just tried to pull #28623 which of course has doctest failures on its own. If everything is happening in this ticket, should we close #28623 as a duplicate?",
    "created_at": "2020-06-22T01:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418113",
    "user": "https://github.com/kiwifb"
}
```

Volker just tried to pull #28623 which of course has doctest failures on its own. If everything is happening in this ticket, should we close #28623 as a duplicate?



---

archive/issue_comments_418114.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-23T09:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418114",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418115.json:
```json
{
    "body": "I think this looks good.",
    "created_at": "2020-06-23T09:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418115",
    "user": "https://github.com/dimpase"
}
```

I think this looks good.



---

archive/issue_comments_418116.json:
```json
{
    "body": "I am seeing the same failures that gh-timokau reported in #28623#comment:9\n\nWith arb 2.17 (patched for flint 2.6 support) those tests pass.",
    "created_at": "2020-06-26T21:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418116",
    "user": "https://github.com/antonio-rojas"
}
```

I am seeing the same failures that gh-timokau reported in #28623#comment:9

With arb 2.17 (patched for flint 2.6 support) those tests pass.



---

archive/issue_comments_418117.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-06-26T21:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418117",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_418118.json:
```json
{
    "body": "Indeed, they can also be seen in the `archlinux-standard` run in https://github.com/dimpase/sage/pull/12/checks?check_run_id=785953750",
    "created_at": "2020-06-26T21:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418118",
    "user": "https://github.com/mkoeppe"
}
```

Indeed, they can also be seen in the `archlinux-standard` run in https://github.com/dimpase/sage/pull/12/checks?check_run_id=785953750



---

archive/issue_comments_418119.json:
```json
{
    "body": "Also in `fedora-31-standard` (https://github.com/dimpase/sage/pull/12/checks?check_run_id=785953613)",
    "created_at": "2020-06-26T21:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418119",
    "user": "https://github.com/mkoeppe"
}
```

Also in `fedora-31-standard` (https://github.com/dimpase/sage/pull/12/checks?check_run_id=785953613)



---

archive/issue_comments_418120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-26T22:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418121.json:
```json
{
    "body": "OK, backed out the arb upgrade.",
    "created_at": "2020-06-26T22:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418121",
    "user": "https://github.com/mkoeppe"
}
```

OK, backed out the arb upgrade.



---

archive/issue_comments_418122.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/149186528\n\nSorry for missing the failures in the previous runs!",
    "created_at": "2020-06-26T22:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418122",
    "user": "https://github.com/mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/149186528

Sorry for missing the failures in the previous runs!



---

archive/issue_comments_418123.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-26T22:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418123",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-04T16:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418125.json:
```json
{
    "body": "where are we here?",
    "created_at": "2020-07-05T08:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418125",
    "user": "https://github.com/dimpase"
}
```

where are we here?



---

archive/issue_comments_418126.json:
```json
{
    "body": "The `arb` ticket has been closed but this branch doesn't upgrade `arb`. It includes a patch for the current shipped `arb` but it doesn't revbump the `arb` package which means that the patch is only applied to fresh builds and not to incremental upgrades.\n\nAt the minimum I think this branch needs to include a revbump for `arb`, but since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.",
    "created_at": "2020-07-05T09:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418126",
    "user": "https://github.com/kiwifb"
}
```

The `arb` ticket has been closed but this branch doesn't upgrade `arb`. It includes a patch for the current shipped `arb` but it doesn't revbump the `arb` package which means that the patch is only applied to fresh builds and not to incremental upgrades.

At the minimum I think this branch needs to include a revbump for `arb`, but since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.



---

archive/issue_comments_418127.json:
```json
{
    "body": "Replying to [comment:97 fbissey]:\n> The `arb` ticket has been closed but this branch doesn't upgrade `arb`. It includes a patch for the current shipped `arb` but it doesn't revbump the `arb` package which means that the patch is only applied to fresh builds and not to incremental upgrades.\n> \n> At the minimum I think this branch needs to include a revbump for `arb`, but since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.\n\nAs this ticket updates a dependency of arb, it will rebuild arb regardless of the presense of revbump (or at least it should - it it doesn't it's a bug in the build system)",
    "created_at": "2020-07-05T11:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418127",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:97 fbissey]:
> The `arb` ticket has been closed but this branch doesn't upgrade `arb`. It includes a patch for the current shipped `arb` but it doesn't revbump the `arb` package which means that the patch is only applied to fresh builds and not to incremental upgrades.
> 
> At the minimum I think this branch needs to include a revbump for `arb`, but since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.

As this ticket updates a dependency of arb, it will rebuild arb regardless of the presense of revbump (or at least it should - it it doesn't it's a bug in the build system)



---

archive/issue_comments_418128.json:
```json
{
    "body": "Flint 2.6.1 seems to have been released on 2020-07-23.\n\n- https://github.com/wbhart/flint2/releases\n\nBut maybe that should be a new ticket if things are ready here.",
    "created_at": "2020-07-26T17:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418128",
    "user": "https://github.com/slel"
}
```

Flint 2.6.1 seems to have been released on 2020-07-23.

- https://github.com/wbhart/flint2/releases

But maybe that should be a new ticket if things are ready here.



---

archive/issue_comments_418129.json:
```json
{
    "body": "Replying to [comment:97 fbissey]:\n>  since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.\n\nThe arb ticket #28623 has been un-obsoleted.",
    "created_at": "2020-07-26T17:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418129",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:97 fbissey]:
>  since we obsoleted the `arb` ticket I would favor upgrade `arb` in this ticket too.

The arb ticket #28623 has been un-obsoleted.



---

archive/issue_comments_418130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-26T17:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418131.json:
```json
{
    "body": "Replying to [comment:97 fbissey]:\n> At the minimum I think this branch needs to include a revbump for `arb`\n\nDone",
    "created_at": "2020-07-26T17:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418131",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:97 fbissey]:
> At the minimum I think this branch needs to include a revbump for `arb`

Done



---

archive/issue_comments_418132.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-26T17:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418133.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/183335441",
    "created_at": "2020-07-26T18:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418133",
    "user": "https://github.com/mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/183335441



---

archive/issue_comments_418134.json:
```json
{
    "body": "Replying to [comment:105 mkoeppe]:\n> Tests run at https://github.com/mkoeppe/sage/actions/runs/183335441\n\n45 passed, 18 failed, 14 cancelled, 1 skipped",
    "created_at": "2020-07-29T11:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418134",
    "user": "https://github.com/slel"
}
```

Replying to [comment:105 mkoeppe]:
> Tests run at https://github.com/mkoeppe/sage/actions/runs/183335441

45 passed, 18 failed, 14 cancelled, 1 skipped



---

archive/issue_comments_418135.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade\".",
    "created_at": "2020-07-29T11:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418135",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade".



---

archive/issue_comments_418136.json:
```json
{
    "body": "These summary statistics don't mean much because they do not distinguish sporadic errors (from the unreliable computing platform) from actual failures - one needs to look at the details.\nIf you want, I can walk you through on how to read these runs...",
    "created_at": "2020-07-29T18:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418136",
    "user": "https://github.com/mkoeppe"
}
```

These summary statistics don't mean much because they do not distinguish sporadic errors (from the unreliable computing platform) from actual failures - one needs to look at the details.
If you want, I can walk you through on how to read these runs...



---

archive/issue_comments_418137.json:
```json
{
    "body": "e_antic needs a bump:\n\n```\n[e_antic-0.1.7] In file included from ./e-antic/poly_extra.h:15,\n[e_antic-0.1.7]                  from poly_extra/bisection_step_arb.c:12:\n[e_antic-0.1.7] ./e-antic/e-antic.h:24:2: error: #error FLINT 2.5.2 or 2.5.3 required\n[e_antic-0.1.7]  #error FLINT 2.5.2 or 2.5.3 required\n[e_antic-0.1.7]   ^~~~~\n[e_antic-0.1.7] In file included from poly_extra/bisection_step_arb.c:12:\n[e_antic-0.1.7] ./e-antic/poly_extra.h:267:8: error: static declaration of \u2018fmpq_get_d\u2019 follows non-static declaration\n[e_antic-0.1.7]  double fmpq_get_d(const fmpq_t q)\n[e_antic-0.1.7]         ^~~~~~~~~~\n[e_antic-0.1.7] In file included from /mnt/opt/Sage/sage-dev/local/include/flint/fmpz_poly.h:36,\n[e_antic-0.1.7]                  from ./e-antic/poly_extra.h:17,\n[e_antic-0.1.7]                  from poly_extra/bisection_step_arb.c:12:\n[e_antic-0.1.7] /mnt/opt/Sage/sage-dev/local/include/flint/fmpq.h:183:18: note: previous declaration of \u2018fmpq_get_d\u2019 was here\n[e_antic-0.1.7]  FLINT_DLL double fmpq_get_d(const fmpq_t a);\n[e_antic-0.1.7]                   ^~~~~~~~~~\n[e_antic-0.1.7] In file included from poly_extra/bisection_step_arb.c:12:\n[e_antic-0.1.7] ./e-antic/poly_extra.h:356:2: error: #error \"Invalid flint release: e-antic needs flint-2.5.2, flint-2.5.3 or flint-2.6.0\"\n[e_antic-0.1.7]  #error \"Invalid flint release: e-antic needs flint-2.5.2, flint-2.5.3 or flint-2.6.0\"\n[e_antic-0.1.7]   ^~~~~\n[e_antic-0.1.7] make[5]: *** [Makefile:2696: poly_extra/bisection_step_arb.lo] Error 1\n```\n",
    "created_at": "2020-07-31T14:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418137",
    "user": "https://github.com/dimpase"
}
```

e_antic needs a bump:

```
[e_antic-0.1.7] In file included from ./e-antic/poly_extra.h:15,
[e_antic-0.1.7]                  from poly_extra/bisection_step_arb.c:12:
[e_antic-0.1.7] ./e-antic/e-antic.h:24:2: error: #error FLINT 2.5.2 or 2.5.3 required
[e_antic-0.1.7]  #error FLINT 2.5.2 or 2.5.3 required
[e_antic-0.1.7]   ^~~~~
[e_antic-0.1.7] In file included from poly_extra/bisection_step_arb.c:12:
[e_antic-0.1.7] ./e-antic/poly_extra.h:267:8: error: static declaration of ‘fmpq_get_d’ follows non-static declaration
[e_antic-0.1.7]  double fmpq_get_d(const fmpq_t q)
[e_antic-0.1.7]         ^~~~~~~~~~
[e_antic-0.1.7] In file included from /mnt/opt/Sage/sage-dev/local/include/flint/fmpz_poly.h:36,
[e_antic-0.1.7]                  from ./e-antic/poly_extra.h:17,
[e_antic-0.1.7]                  from poly_extra/bisection_step_arb.c:12:
[e_antic-0.1.7] /mnt/opt/Sage/sage-dev/local/include/flint/fmpq.h:183:18: note: previous declaration of ‘fmpq_get_d’ was here
[e_antic-0.1.7]  FLINT_DLL double fmpq_get_d(const fmpq_t a);
[e_antic-0.1.7]                   ^~~~~~~~~~
[e_antic-0.1.7] In file included from poly_extra/bisection_step_arb.c:12:
[e_antic-0.1.7] ./e-antic/poly_extra.h:356:2: error: #error "Invalid flint release: e-antic needs flint-2.5.2, flint-2.5.3 or flint-2.6.0"
[e_antic-0.1.7]  #error "Invalid flint release: e-antic needs flint-2.5.2, flint-2.5.3 or flint-2.6.0"
[e_antic-0.1.7]   ^~~~~
[e_antic-0.1.7] make[5]: *** [Makefile:2696: poly_extra/bisection_step_arb.lo] Error 1
```




---

archive/issue_comments_418138.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-07-31T14:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418138",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418139.json:
```json
{
    "body": "Flint 2.6.2 was released.\n\n- [flint-devel: Flint 2.6.2 release announcement](https://groups.google.com/d/topic/flint-devel/3uB1hhQP6S4/discussion)",
    "created_at": "2020-07-31T20:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418139",
    "user": "https://github.com/slel"
}
```

Flint 2.6.2 was released.

- [flint-devel: Flint 2.6.2 release announcement](https://groups.google.com/d/topic/flint-devel/3uB1hhQP6S4/discussion)



---

archive/issue_comments_418140.json:
```json
{
    "body": "Replying to [comment:108 dimpase]:\n> e_antic needs a bump:\n\nDone in #30262, needs merging",
    "created_at": "2020-07-31T23:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418140",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:108 dimpase]:
> e_antic needs a bump:

Done in #30262, needs merging



---

archive/issue_comments_418141.json:
```json
{
    "body": "Flint 2.6.3 was released:\n\n- [flint-devel: Flint 2.6.3 release announcement](https://groups.google.com/d/msg/flint-devel/kos0KU-GdEA/aI3hFY9tAAAJ)",
    "created_at": "2020-08-12T15:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418141",
    "user": "https://github.com/slel"
}
```

Flint 2.6.3 was released:

- [flint-devel: Flint 2.6.3 release announcement](https://groups.google.com/d/msg/flint-devel/kos0KU-GdEA/aI3hFY9tAAAJ)



---

archive/issue_comments_418142.json:
```json
{
    "body": "I propose to do 2.6.3.",
    "created_at": "2020-08-12T15:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418142",
    "user": "https://github.com/dimpase"
}
```

I propose to do 2.6.3.



---

archive/issue_comments_418143.json:
```json
{
    "body": "I agree",
    "created_at": "2020-08-12T16:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418143",
    "user": "https://github.com/mkoeppe"
}
```

I agree



---

archive/issue_comments_418144.json:
```json
{
    "body": "I'm working on getting multi-variate polynomials running with the new flint code.\n\nI expect to be opening a dependent ticket for that soon.\n\nIn the meantime, every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.\n\nAny ideas why it keeps rebuilding pbori?",
    "created_at": "2020-08-16T05:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418144",
    "user": "https://github.com/BrentBaccala"
}
```

I'm working on getting multi-variate polynomials running with the new flint code.

I expect to be opening a dependent ticket for that soon.

In the meantime, every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.

Any ideas why it keeps rebuilding pbori?



---

archive/issue_comments_418145.json:
```json
{
    "body": "Replying to [comment:115 gh-BrentBaccala]:\n> every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.\n> \n> Any ideas why it keeps rebuilding pbori?\n\nSounds like there is something wrong with the Cython dependencies. You could investigate this by setting a breakpoint or printing data in `sage_setup.command.sage_build_cython.sage_build_cython.create_extension`",
    "created_at": "2020-08-16T17:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418145",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:115 gh-BrentBaccala]:
> every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.
> 
> Any ideas why it keeps rebuilding pbori?

Sounds like there is something wrong with the Cython dependencies. You could investigate this by setting a breakpoint or printing data in `sage_setup.command.sage_build_cython.sage_build_cython.create_extension`



---

archive/issue_comments_418146.json:
```json
{
    "body": "Replying to [comment:116 mkoeppe]:\n> Replying to [comment:115 gh-BrentBaccala]:\n> > every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.\n> > \n> > Any ideas why it keeps rebuilding pbori?\n> \n> Sounds like there is something wrong with the Cython dependencies. You could investigate this by setting a breakpoint or printing data in `sage_setup.command.sage_build_cython.sage_build_cython.create_extension`\n\nI think this problem has fixed itself in the latest beta.",
    "created_at": "2020-08-16T22:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418146",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:116 mkoeppe]:
> Replying to [comment:115 gh-BrentBaccala]:
> > every time I type 'make build' on this branch (without any local mods), it rebuilds sage.rings.polynomial.pbori.  Every time.  Takes about 60 seconds, too.
> > 
> > Any ideas why it keeps rebuilding pbori?
> 
> Sounds like there is something wrong with the Cython dependencies. You could investigate this by setting a breakpoint or printing data in `sage_setup.command.sage_build_cython.sage_build_cython.create_extension`

I think this problem has fixed itself in the latest beta.



---

archive/issue_comments_418147.json:
```json
{
    "body": "Rebase on 9.2.beta9?",
    "created_at": "2020-08-19T21:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418147",
    "user": "https://github.com/slel"
}
```

Rebase on 9.2.beta9?



---

archive/issue_comments_418148.json:
```json
{
    "body": "postpone till 9.3?",
    "created_at": "2020-08-22T12:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418148",
    "user": "https://github.com/dimpase"
}
```

postpone till 9.3?



---

archive/issue_comments_418149.json:
```json
{
    "body": "I agree",
    "created_at": "2020-08-22T15:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418149",
    "user": "https://github.com/mkoeppe"
}
```

I agree



---

archive/issue_comments_418150.json:
```json
{
    "body": "an experiment with flint 2.6.3, which is a package on Gentoo, built with cmake, reveals that this breaks its recognition, as `HAVE_GC` may be undefined (it is just not there if  GC is not \"found\" in some sense. \n\nI opened https://github.com/wbhart/flint2/issues/837",
    "created_at": "2020-09-08T19:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418150",
    "user": "https://github.com/dimpase"
}
```

an experiment with flint 2.6.3, which is a package on Gentoo, built with cmake, reveals that this breaks its recognition, as `HAVE_GC` may be undefined (it is just not there if  GC is not "found" in some sense. 

I opened https://github.com/wbhart/flint2/issues/837



---

archive/issue_comments_418151.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-09-16T22:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418152.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-23T08:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418152",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418153.json:
```json
{
    "body": "Replying to [comment:121 dimpase]:\n> an experiment with flint 2.6.3, which is a package on Gentoo, built with cmake, reveals that this breaks its recognition, as `HAVE_GC` may be undefined (it is just not there if  GC is not \"found\" in some sense. \n> \n> I opened https://github.com/wbhart/flint2/issues/837\n\nfixed by #30642",
    "created_at": "2020-09-23T12:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418153",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:121 dimpase]:
> an experiment with flint 2.6.3, which is a package on Gentoo, built with cmake, reveals that this breaks its recognition, as `HAVE_GC` may be undefined (it is just not there if  GC is not "found" in some sense. 
> 
> I opened https://github.com/wbhart/flint2/issues/837

fixed by #30642



---

archive/issue_comments_418154.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-23T16:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418154",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418155.json:
```json
{
    "body": "should we perhaps try getting this into 9.2?",
    "created_at": "2020-09-23T16:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418155",
    "user": "https://github.com/dimpase"
}
```

should we perhaps try getting this into 9.2?



---

archive/issue_comments_418156.json:
```json
{
    "body": "Is this update needed for supporting Xcode 12?",
    "created_at": "2020-09-23T21:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418156",
    "user": "https://github.com/mkoeppe"
}
```

Is this update needed for supporting Xcode 12?



---

archive/issue_comments_418157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-10-20T08:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418158.json:
```json
{
    "body": "rebased over 9.2.rc3",
    "created_at": "2020-10-20T08:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418158",
    "user": "https://github.com/dimpase"
}
```

rebased over 9.2.rc3



---

archive/issue_comments_418159.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-10-21T20:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418160.json:
```json
{
    "body": "rebased over #30805",
    "created_at": "2020-10-21T20:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418160",
    "user": "https://github.com/dimpase"
}
```

rebased over #30805



---

archive/issue_comments_418161.json:
```json
{
    "body": "To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.\n\nI don't think that's listed as a build requirement.",
    "created_at": "2020-10-29T00:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418161",
    "user": "https://github.com/BrentBaccala"
}
```

To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.

I don't think that's listed as a build requirement.



---

archive/issue_comments_418162.json:
```json
{
    "body": "Logs please",
    "created_at": "2020-10-29T00:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418162",
    "user": "https://github.com/mkoeppe"
}
```

Logs please



---

archive/issue_comments_418163.json:
```json
{
    "body": "Attachment [flint-2.6.3.log](tarball://root/attachments/some-uuid/ticket29719/flint-2.6.3.log) by @BrentBaccala created at 2020-10-29 01:29:28\n\nBuild attempt on commit 01271cb",
    "created_at": "2020-10-29T01:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418163",
    "user": "https://github.com/BrentBaccala"
}
```

Attachment [flint-2.6.3.log](tarball://root/attachments/some-uuid/ticket29719/flint-2.6.3.log) by @BrentBaccala created at 2020-10-29 01:29:28

Build attempt on commit 01271cb



---

archive/issue_comments_418164.json:
```json
{
    "body": "I attached a log file.\n\nThere's really not much to see - a bunch of failed downloads because flint 2.6.3 isn't in any of the Sage mirrors yet, then a compile failure because it couldn't find \"gmp.h\", which I resolved with `apt install libgmp-dev`.",
    "created_at": "2020-10-29T01:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418164",
    "user": "https://github.com/BrentBaccala"
}
```

I attached a log file.

There's really not much to see - a bunch of failed downloads because flint 2.6.3 isn't in any of the Sage mirrors yet, then a compile failure because it couldn't find "gmp.h", which I resolved with `apt install libgmp-dev`.



---

archive/issue_comments_418165.json:
```json
{
    "body": "Replying to [comment:135 gh-BrentBaccala]:\n> I attached a log file.\n> \n> There's really not much to see - a bunch of failed downloads because flint 2.6.3 isn't in any of the Sage mirrors yet, \n\n`./configure` has `--enable-download-from-upstream-url` option, which use would allow an automatic download from the url  in `checksums.ini`of the package.\n\n> then a compile failure because it couldn't find \"gmp.h\", which I resolved with `apt install libgmp-dev`.\n\nlook at what `./configure` tries to tell at the end of its run - there should be a list of system packages to install to make one's life easier.\nOn Debian like 90% of Sage's (non-python) libs, as well as Python itself, etc etc, are unvendored, see #27330",
    "created_at": "2020-10-29T19:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418165",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:135 gh-BrentBaccala]:
> I attached a log file.
> 
> There's really not much to see - a bunch of failed downloads because flint 2.6.3 isn't in any of the Sage mirrors yet, 

`./configure` has `--enable-download-from-upstream-url` option, which use would allow an automatic download from the url  in `checksums.ini`of the package.

> then a compile failure because it couldn't find "gmp.h", which I resolved with `apt install libgmp-dev`.

look at what `./configure` tries to tell at the end of its run - there should be a list of system packages to install to make one's life easier.
On Debian like 90% of Sage's (non-python) libs, as well as Python itself, etc etc, are unvendored, see #27330



---

archive/issue_comments_418166.json:
```json
{
    "body": "Replying to [comment:136 dimpase]:\n> \n> look at what `./configure` tries to tell at the end of its run - there should be a list of system packages to install to make one's life easier.\n> On Debian like 90% of Sage's (non-python) libs, as well as Python itself, etc etc, are unvendored, see #27330\n> \n\nI had to re-run configure after installing libgmp-dev, and I didn't keep the old log, but I don't remember any glaring complaints.  Furthermore, I found this in the (new) config.log:\n\n   configure:37965: result: gmp-6.1.2:                                   using system package; SPKG will not be installed\n\nI infer from this that a SPKG is available and should have been used by the original build.\n\nI don't know enough about Sage packaging to know how a SPKG gmp should be used by flint.",
    "created_at": "2020-10-29T19:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418166",
    "user": "https://github.com/BrentBaccala"
}
```

Replying to [comment:136 dimpase]:
> 
> look at what `./configure` tries to tell at the end of its run - there should be a list of system packages to install to make one's life easier.
> On Debian like 90% of Sage's (non-python) libs, as well as Python itself, etc etc, are unvendored, see #27330
> 

I had to re-run configure after installing libgmp-dev, and I didn't keep the old log, but I don't remember any glaring complaints.  Furthermore, I found this in the (new) config.log:

   configure:37965: result: gmp-6.1.2:                                   using system package; SPKG will not be installed

I infer from this that a SPKG is available and should have been used by the original build.

I don't know enough about Sage packaging to know how a SPKG gmp should be used by flint.



---

archive/issue_comments_418167.json:
```json
{
    "body": "Replying to [comment:133 gh-BrentBaccala]:\n> To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.\n> \n> I don't think that's listed as a build requirement.\nHow did you start the build?\n\nI only can see this happening on an unconfigured tree if one does not start by\nrunning `./configure`, but rather by doing something like `./sage -p flint` (which indeed does not check dependencies)",
    "created_at": "2020-10-30T07:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418167",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:133 gh-BrentBaccala]:
> To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.
> 
> I don't think that's listed as a build requirement.
How did you start the build?

I only can see this happening on an unconfigured tree if one does not start by
running `./configure`, but rather by doing something like `./sage -p flint` (which indeed does not check dependencies)



---

archive/issue_comments_418168.json:
```json
{
    "body": "Replying to [comment:138 dimpase]:\n> Replying to [comment:133 gh-BrentBaccala]:\n> > To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.\n> > \n> > I don't think that's listed as a build requirement.\n> How did you start the build?\n> \n> I only can see this happening on an unconfigured tree if one does not start by\n> running `./configure`, but rather by doing something like `./sage -p flint` (which indeed does not check dependencies)\n\nAfter `git checkout`, I ran `./bootstrap`, then `./configure`, then `MAKE=\"make -j8\" make`.",
    "created_at": "2020-10-30T13:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418168",
    "user": "https://github.com/BrentBaccala"
}
```

Replying to [comment:138 dimpase]:
> Replying to [comment:133 gh-BrentBaccala]:
> > To build the current version of this branch (commit 01271cb) on Ubuntu I had to `apt install libgmp-dev`.
> > 
> > I don't think that's listed as a build requirement.
> How did you start the build?
> 
> I only can see this happening on an unconfigured tree if one does not start by
> running `./configure`, but rather by doing something like `./sage -p flint` (which indeed does not check dependencies)

After `git checkout`, I ran `./bootstrap`, then `./configure`, then `MAKE="make -j8" make`.



---

archive/issue_comments_418169.json:
```json
{
    "body": "could be stale leftovers - how about `make bootstrap-clean && make distclean` ?\n(for the former possibly #30795 is needed)",
    "created_at": "2020-10-30T14:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418169",
    "user": "https://github.com/dimpase"
}
```

could be stale leftovers - how about `make bootstrap-clean && make distclean` ?
(for the former possibly #30795 is needed)



---

archive/issue_comments_418170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-06T12:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418171.json:
```json
{
    "body": "rebased over 9.3.beta0, squashed few things. Let us get this in please!\n\nIn particular, here are patches that need to fix doctest on distros that ship flint 2.6.3 already, e.g. Homebrew, Ubuntu 20.10.",
    "created_at": "2020-11-06T12:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418171",
    "user": "https://github.com/dimpase"
}
```

rebased over 9.3.beta0, squashed few things. Let us get this in please!

In particular, here are patches that need to fix doctest on distros that ship flint 2.6.3 already, e.g. Homebrew, Ubuntu 20.10.



---

archive/issue_comments_418172.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-06T19:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418172",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_027223.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2020-11-15T22:47:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29482#event-27223"
}
```



---

archive/issue_comments_418173.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-15T22:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29482#issuecomment-418173",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
