# Issue 32597: Race condition: Failed to build one or more wheels

archive/issues_032597.json:
```json
{
    "body": "CC:  @dimpase @jhpalmieri @mkoeppe\n\nApparently there is a race condition when building python wheels, I just had an incremental build fail with\n\n```\nUninstalling existing 'pyparsing'\nWarning: File '/home/release/Sage/local/var/lib/sage/wheels/pyparsing-2.4.7-py2.py3-none-any.whl' not found\nWarning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found\nRunning pip-uninstall script for 'pyparsing'\nWaiting for exclusive lock to run python3 -m pip uninstall --isolated --disable-pip-version-check --yes --no-input -r /home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/scripts/pyparsing/spkg-piprm-requirements.txt ... ok\nFound existing installation: pyparsing 2.4.7\nUninstalling pyparsing-2.4.7:\n  Successfully uninstalled pyparsing-2.4.7\nRemoving stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/installed/pyparsing-2.4.7'\nInstalling pyparsing-2.4.7\nProcessing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src\n    Running command python setup.py egg_info\n    running egg_info\n    creating /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info\n    writing /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/PKG-INFO\n    writing dependency_links to /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/dependency_links.txt\n    writing top-level names to /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/top_level.txt\n    writing manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'\n    reading manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'\n    reading manifest template 'MANIFEST.in'\n    warning: no files found matching 'HowToUsePyparsing.rst'\n    warning: no files found matching 'pyparsingClassDiagram.*'\n    warning: no files found matching 'README.md'\n    warning: no files found matching 'modules.rst'\n    no previously-included directories found matching 'docs/_build/*'\n    adding license file 'LICENSE'\n    writing manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'\nBuilding wheels for collected packages: pyparsing\n  Building wheel for pyparsing (setup.py): started\n  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"'; __file__='\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-frgg5xhi\n  Traceback (most recent call last):\n    File \"<string>\", line 1, in <module>\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py\", line 18, in <module>\n      setup(# Distribution meta-data\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/__init__.py\", line 153, in setup\n      return distutils.core.setup(**attrs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/core.py\", line 108, in setup\n      _setup_distribution = dist = klass(attrs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 453, in __init__\n      _Distribution.__init__(\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/dist.py\", line 293, in __init__\n      self.finalize_options()\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 830, in finalize_options\n      for ep in sorted(loaded, key=by_order):\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 829, in <lambda>\n      loaded = map(lambda e: e.load(), filtered)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 2449, in load\n      self.require(*args, **kwargs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 2472, in require\n      items = working_set.resolve(reqs, env, installer, extras=self.extras)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 772, in resolve\n      raise DistributionNotFound(req, requirers)\n  pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application\n  Building wheel for pyparsing (setup.py): finished with status 'error'\n  ERROR: Failed building wheel for pyparsing\n  Running setup.py clean for pyparsing\n  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"'; __file__='\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' clean --all\n  Traceback (most recent call last):\n    File \"<string>\", line 1, in <module>\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py\", line 18, in <module>\n      setup(# Distribution meta-data\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/__init__.py\", line 153, in setup\n      return distutils.core.setup(**attrs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/core.py\", line 108, in setup\n      _setup_distribution = dist = klass(attrs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 453, in __init__\n      _Distribution.__init__(\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/dist.py\", line 293, in __init__\n      self.finalize_options()\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 830, in finalize_options\n      for ep in sorted(loaded, key=by_order):\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py\", line 829, in <lambda>\n      loaded = map(lambda e: e.load(), filtered)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 2449, in load\n      self.require(*args, **kwargs)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 2472, in require\n      items = working_set.resolve(reqs, env, installer, extras=self.extras)\n    File \"/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py\", line 772, in resolve\n      raise DistributionNotFound(req, requirers)\n  pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application\n  ERROR: Failed cleaning build dir for pyparsing\nFailed to build pyparsing\nERROR: Failed to build one or more wheels\n***********************************************************************************************************************************************************************\nError building a wheel for pyparsing-2.4.7\n***********************************************************************************************************************************************************************\n```\n\nI re-ran make immediately after that, and this time it succeeded\n\n```\nPackage 'pyparsing' is currently not installed\nNo legacy uninstaller found for 'pyparsing'; nothing to do\nInstalling pyparsing-2.4.7\nProcessing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src\n    Running command python setup.py egg_info\n    running egg_info\n    creating /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info\n    writing /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/PKG-INFO\n    writing dependency_links to /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/dependency_links.txt\n    writing top-level names to /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/top_level.txt\n    writing manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'\n    reading manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'\n    reading manifest template 'MANIFEST.in'\n    warning: no files found matching 'HowToUsePyparsing.rst'\n    warning: no files found matching 'pyparsingClassDiagram.*'\n    warning: no files found matching 'README.md'\n    warning: no files found matching 'modules.rst'\n    no previously-included directories found matching 'docs/_build/*'\n    adding license file 'LICENSE'\n    writing manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'\nBuilding wheels for collected packages: pyparsing\n  Building wheel for pyparsing (setup.py): started\n  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"'; __file__='\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-ced0k8ps\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build/lib\n  copying pyparsing.py -> build/lib\n  installing to build/bdist.linux-x86_64/wheel\n  running install\n  running install_lib\n  creating build/bdist.linux-x86_64\n  creating build/bdist.linux-x86_64/wheel\n  copying build/lib/pyparsing.py -> build/bdist.linux-x86_64/wheel\n  running install_egg_info\n  running egg_info\n  writing pyparsing.egg-info/PKG-INFO\n  writing dependency_links to pyparsing.egg-info/dependency_links.txt\n  writing top-level names to pyparsing.egg-info/top_level.txt\n  reading manifest file 'pyparsing.egg-info/SOURCES.txt'\n  reading manifest template 'MANIFEST.in'\n  warning: no files found matching 'HowToUsePyparsing.rst'\n  warning: no files found matching 'pyparsingClassDiagram.*'\n  warning: no files found matching 'README.md'\n  warning: no files found matching 'modules.rst'\n  no previously-included directories found matching 'docs/_build/*'\n  adding license file 'LICENSE'\n  writing manifest file 'pyparsing.egg-info/SOURCES.txt'\n  Copying pyparsing.egg-info to build/bdist.linux-x86_64/wheel/pyparsing-2.4.7-py3.9.egg-info\n  running install_scripts\n  creating build/bdist.linux-x86_64/wheel/pyparsing-2.4.7.dist-info/WHEEL\n  creating '/tmp/pip-wheel-ced0k8ps/pyparsing-2.4.7-py2.py3-none-any.whl' and adding 'build/bdist.linux-x86_64/wheel' to it\n  adding 'pyparsing.py'\n  adding 'pyparsing-2.4.7.dist-info/LICENSE'\n  adding 'pyparsing-2.4.7.dist-info/METADATA'\n  adding 'pyparsing-2.4.7.dist-info/WHEEL'\n  adding 'pyparsing-2.4.7.dist-info/top_level.txt'\n  adding 'pyparsing-2.4.7.dist-info/RECORD'\n  removing build/bdist.linux-x86_64/wheel\n  Building wheel for pyparsing (setup.py): finished with status 'done'\n  Created wheel for pyparsing: filename=pyparsing-2.4.7-py2.py3-none-any.whl size=67860 sha256=c88885a6a25c4c1737289cd8c1ee303680d8a8db72e1315d1777c63d44e503fc\n  Stored in directory: /tmp/pip-ephem-wheel-cache-4bi3_ldy/wheels/b6/5a/0f/cae9b0c02cfec6032d9d40f419baad38877f7a0f9c1d9dcab2\nSuccessfully built pyparsing\nWARNING: Skipping pyparsing as it is not installed.\nUsing pip 21.2.4 from /home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pip (python 3.9)\nLooking in links: /home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels\nProcessing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/inst/home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/pyparsing-2.4.7-py2.py3-none-any.whl\nInstalling collected packages: pyparsing\nSuccessfully installed pyparsing-2.4.7\n\nreal\t0m5.165s\nuser\t0m5.376s\nsys\t0m0.768s\nCopying package files from temporary location /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/inst to /home/release/Sage/local/var/lib/sage/venv-python3.9\nSuccessfully installed pyparsing-2.4.7\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32834\n\n",
    "created_at": "2021-11-07T10:20:03Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Race condition: Failed to build one or more wheels",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32597",
    "user": "https://github.com/vbraun"
}
```
CC:  @dimpase @jhpalmieri @mkoeppe

Apparently there is a race condition when building python wheels, I just had an incremental build fail with

```
Uninstalling existing 'pyparsing'
Warning: File '/home/release/Sage/local/var/lib/sage/wheels/pyparsing-2.4.7-py2.py3-none-any.whl' not found
Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found
Running pip-uninstall script for 'pyparsing'
Waiting for exclusive lock to run python3 -m pip uninstall --isolated --disable-pip-version-check --yes --no-input -r /home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/scripts/pyparsing/spkg-piprm-requirements.txt ... ok
Found existing installation: pyparsing 2.4.7
Uninstalling pyparsing-2.4.7:
  Successfully uninstalled pyparsing-2.4.7
Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/installed/pyparsing-2.4.7'
Installing pyparsing-2.4.7
Processing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src
    Running command python setup.py egg_info
    running egg_info
    creating /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info
    writing /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/PKG-INFO
    writing dependency_links to /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/dependency_links.txt
    writing top-level names to /tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/top_level.txt
    writing manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'
    reading manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'
    reading manifest template 'MANIFEST.in'
    warning: no files found matching 'HowToUsePyparsing.rst'
    warning: no files found matching 'pyparsingClassDiagram.*'
    warning: no files found matching 'README.md'
    warning: no files found matching 'modules.rst'
    no previously-included directories found matching 'docs/_build/*'
    adding license file 'LICENSE'
    writing manifest file '/tmp/pip-pip-egg-info-b05xvbbp/pyparsing.egg-info/SOURCES.txt'
Building wheels for collected packages: pyparsing
  Building wheel for pyparsing (setup.py): started
  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"'; __file__='"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /tmp/pip-wheel-frgg5xhi
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py", line 18, in <module>
      setup(# Distribution meta-data
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/__init__.py", line 153, in setup
      return distutils.core.setup(**attrs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/core.py", line 108, in setup
      _setup_distribution = dist = klass(attrs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 453, in __init__
      _Distribution.__init__(
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/dist.py", line 293, in __init__
      self.finalize_options()
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 830, in finalize_options
      for ep in sorted(loaded, key=by_order):
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 829, in <lambda>
      loaded = map(lambda e: e.load(), filtered)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 2449, in load
      self.require(*args, **kwargs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 2472, in require
      items = working_set.resolve(reqs, env, installer, extras=self.extras)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 772, in resolve
      raise DistributionNotFound(req, requirers)
  pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application
  Building wheel for pyparsing (setup.py): finished with status 'error'
  ERROR: Failed building wheel for pyparsing
  Running setup.py clean for pyparsing
  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"'; __file__='"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' clean --all
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py", line 18, in <module>
      setup(# Distribution meta-data
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/__init__.py", line 153, in setup
      return distutils.core.setup(**attrs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/core.py", line 108, in setup
      _setup_distribution = dist = klass(attrs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 453, in __init__
      _Distribution.__init__(
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/_distutils/dist.py", line 293, in __init__
      self.finalize_options()
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 830, in finalize_options
      for ep in sorted(loaded, key=by_order):
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/setuptools/dist.py", line 829, in <lambda>
      loaded = map(lambda e: e.load(), filtered)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 2449, in load
      self.require(*args, **kwargs)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 2472, in require
      items = working_set.resolve(reqs, env, installer, extras=self.extras)
    File "/home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pkg_resources/__init__.py", line 772, in resolve
      raise DistributionNotFound(req, requirers)
  pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application
  ERROR: Failed cleaning build dir for pyparsing
Failed to build pyparsing
ERROR: Failed to build one or more wheels
***********************************************************************************************************************************************************************
Error building a wheel for pyparsing-2.4.7
***********************************************************************************************************************************************************************
```

I re-ran make immediately after that, and this time it succeeded

```
Package 'pyparsing' is currently not installed
No legacy uninstaller found for 'pyparsing'; nothing to do
Installing pyparsing-2.4.7
Processing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src
    Running command python setup.py egg_info
    running egg_info
    creating /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info
    writing /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/PKG-INFO
    writing dependency_links to /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/dependency_links.txt
    writing top-level names to /tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/top_level.txt
    writing manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'
    reading manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'
    reading manifest template 'MANIFEST.in'
    warning: no files found matching 'HowToUsePyparsing.rst'
    warning: no files found matching 'pyparsingClassDiagram.*'
    warning: no files found matching 'README.md'
    warning: no files found matching 'modules.rst'
    no previously-included directories found matching 'docs/_build/*'
    adding license file 'LICENSE'
    writing manifest file '/tmp/pip-pip-egg-info-z4wpuj02/pyparsing.egg-info/SOURCES.txt'
Building wheels for collected packages: pyparsing
  Building wheel for pyparsing (setup.py): started
  Running command /home/release/Sage/local/var/lib/sage/venv-python3.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"'; __file__='"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /tmp/pip-wheel-ced0k8ps
  running bdist_wheel
  running build
  running build_py
  creating build
  creating build/lib
  copying pyparsing.py -> build/lib
  installing to build/bdist.linux-x86_64/wheel
  running install
  running install_lib
  creating build/bdist.linux-x86_64
  creating build/bdist.linux-x86_64/wheel
  copying build/lib/pyparsing.py -> build/bdist.linux-x86_64/wheel
  running install_egg_info
  running egg_info
  writing pyparsing.egg-info/PKG-INFO
  writing dependency_links to pyparsing.egg-info/dependency_links.txt
  writing top-level names to pyparsing.egg-info/top_level.txt
  reading manifest file 'pyparsing.egg-info/SOURCES.txt'
  reading manifest template 'MANIFEST.in'
  warning: no files found matching 'HowToUsePyparsing.rst'
  warning: no files found matching 'pyparsingClassDiagram.*'
  warning: no files found matching 'README.md'
  warning: no files found matching 'modules.rst'
  no previously-included directories found matching 'docs/_build/*'
  adding license file 'LICENSE'
  writing manifest file 'pyparsing.egg-info/SOURCES.txt'
  Copying pyparsing.egg-info to build/bdist.linux-x86_64/wheel/pyparsing-2.4.7-py3.9.egg-info
  running install_scripts
  creating build/bdist.linux-x86_64/wheel/pyparsing-2.4.7.dist-info/WHEEL
  creating '/tmp/pip-wheel-ced0k8ps/pyparsing-2.4.7-py2.py3-none-any.whl' and adding 'build/bdist.linux-x86_64/wheel' to it
  adding 'pyparsing.py'
  adding 'pyparsing-2.4.7.dist-info/LICENSE'
  adding 'pyparsing-2.4.7.dist-info/METADATA'
  adding 'pyparsing-2.4.7.dist-info/WHEEL'
  adding 'pyparsing-2.4.7.dist-info/top_level.txt'
  adding 'pyparsing-2.4.7.dist-info/RECORD'
  removing build/bdist.linux-x86_64/wheel
  Building wheel for pyparsing (setup.py): finished with status 'done'
  Created wheel for pyparsing: filename=pyparsing-2.4.7-py2.py3-none-any.whl size=67860 sha256=c88885a6a25c4c1737289cd8c1ee303680d8a8db72e1315d1777c63d44e503fc
  Stored in directory: /tmp/pip-ephem-wheel-cache-4bi3_ldy/wheels/b6/5a/0f/cae9b0c02cfec6032d9d40f419baad38877f7a0f9c1d9dcab2
Successfully built pyparsing
WARNING: Skipping pyparsing as it is not installed.
Using pip 21.2.4 from /home/release/Sage/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/pip (python 3.9)
Looking in links: /home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels
Processing /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/inst/home/release/Sage/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels/pyparsing-2.4.7-py2.py3-none-any.whl
Installing collected packages: pyparsing
Successfully installed pyparsing-2.4.7

real	0m5.165s
user	0m5.376s
sys	0m0.768s
Copying package files from temporary location /home/release/Sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/pyparsing-2.4.7/inst to /home/release/Sage/local/var/lib/sage/venv-python3.9
Successfully installed pyparsing-2.4.7
```


Issue created by migration from https://trac.sagemath.org/ticket/32834





---

archive/issue_comments_464403.json:
```json
{
    "body": "This is still present, incremental builds can uninstall tomli while building pyparsing in parallel which then fails:\n\n```\n[singular-4.2.1p3] checking for string.h... (cached) yes\n[singular-4.2.1p3] checking for time.h... yes\n[singular-4.2.1p3] checking for math.h... yes\n[ecl-21.2.1] ;;; End of Pass 1.\n[singular-4.2.1p3] checking for cstdio... yes\n[tomli-1.2.1] Using cached file /home/release/Sage/upstream/tomli-1.2.1.tar.gz\n[singular-4.2.1p3] checking that generated files are newer than configure... done\n[singular-4.2.1p3] configure: creating ./config.status\n[tomli-1.2.1] tomli-1.2.1\n[tomli-1.2.1] ====================================================\n[tomli-1.2.1] Setting up build directory for tomli-1.2.1\n[tomli-1.2.1] Finished extraction\n[tomli-1.2.1] No patch files found in ../patches\n[tomli-1.2.1] ****************************************************\n[tomli-1.2.1] Host system:\n[tomli-1.2.1] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n[tomli-1.2.1] ****************************************************\n[tomli-1.2.1] C compiler: gcc\n[tomli-1.2.1] C compiler version:\n[tomli-1.2.1] Using built-in specs.\n[tomli-1.2.1] COLLECT_GCC=/usr/bin/gcc\n[tomli-1.2.1] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper\n[tomli-1.2.1] OFFLOAD_TARGET_NAMES=nvptx-none\n[tomli-1.2.1] OFFLOAD_TARGET_DEFAULT=1\n[tomli-1.2.1] Target: x86_64-redhat-linux\n[tomli-1.2.1] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1\n[tomli-1.2.1] Thread model: posix\n[tomli-1.2.1] Supported LTO compression algorithms: zlib zstd\n[tomli-1.2.1] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) \n[tomli-1.2.1] ****************************************************\n[tomli-1.2.1] Uninstalling existing 'tomli'\n[tomli-1.2.1] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found\n[tomli-1.2.1] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found\n[tomli-1.2.1] Running pip-uninstall script for 'tomli'\n[pyparsing-3.0.6]   reading manifest file '/tmp/pip-pip-egg-info-s8vm7an1/pyparsing.egg-info/SOURCES.txt'\n[pyparsing-3.0.6]   reading manifest template 'MANIFEST.in'\n[pyparsing-3.0.6]   no previously-included directories found matching 'docs/_build/*'\n[pyparsing-3.0.6]   no previously-included directories found matching 'tests/__pycache__'\n[pyparsing-3.0.6]   adding license file 'LICENSE'\n[pyparsing-3.0.6]   writing manifest file '/tmp/pip-pip-egg-info-s8vm7an1/pyparsing.egg-info/SOURCES.txt'\n[pyparsing-3.0.6]   Preparing metadata (setup.py): finished with status 'done'\n[pyparsing-3.0.6] Building wheels for collected packages: pyparsing\n[pyparsing-3.0.6]   Building wheel for pyparsing (setup.py): started\n[pyparsing-3.0.6]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'\"'\"'; __file__='\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-zr8kkbnr\n[gap-4.11.1] Successfully installed gap-4.11.1\n[gap-4.11.1] Deleting temporary build directory\n[gap-4.11.1] /home/release/Sage/local/var/tmp/sage/build/gap-4.11.1\n[singular-4.2.1p3] config.status: creating Makefile\n[singular-4.2.1p3] config.status: creating include/factory/Makefile\n[singular-4.2.1p3] config.status: creating factory.pc\n[singular-4.2.1p3] config.status: creating _config.h\n[singular-4.2.1p3] config.status: executing depfiles commands\n[singular-4.2.1p3] config.status: executing config.h commands\n[singular-4.2.1p3] config.status: creating 'config.h' - prefix '' for '_config.h' defines\n[singular-4.2.1p3] config.status: executing libtool commands\n[tomli-1.2.1] Found existing installation: tomli 1.2.1\n[tomli-1.2.1] Uninstalling tomli-1.2.1:\n[tomli-1.2.1]   Successfully uninstalled tomli-1.2.1\n[singular-4.2.1p3] === configuring in libpolys (/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/libpolys)\n[singular-4.2.1p3] configure: running /usr/bin/bash ./configure --disable-option-checking '--prefix=/home/release/Sage/local'  '--libdir=/home/release/Sage/local/lib' '--disable-maintainer-mode' '--disable-dependency-tracking' '--exec-prefix=/home/release/Sage/local' '--bindir=/home/release/Sage/local/bin' '--with-ntl=/home/release/Sage/local' '--with-flint=/home/release/Sage/local' '--enable-gfanlib' '--enable-Singular' '--enable-factory' '--disable-doc' '--disable-polymake' '--without-python' '--without-pythonmodule' '--disable-python' '--disable-python_module' '--disable-python-module' '--disable-static' '--with-libparse' 'CC=gcc' 'CFLAGS=-g -O2' 'LDFLAGS=-Wl,-rpath-link,/home/release/Sage/local/lib -L/home/release/Sage/local/lib -Wl,-rpath,/home/release/Sage/local/lib -Wl,-rpath-link,/home/release/Sage/local/lib -L/home/release/Sage/local/lib -Wl,-rpath,/home/release/Sage/local/lib ' 'CXX=g++ -std=gnu++11' 'CXXFLAGS=-g -O2' '--enable-omalloc' 'OMALLOC_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/omalloc/libomalloc.la' 'OMALLOC_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src' '--with-Singular' 'RESOURCES_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/resources/libsingular_resources.la' 'RESOURCES_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src ' 'FACTORY_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory/libfactory.la' 'FACTORY_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src -I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory -I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory/include' --cache-file=/dev/null --srcdir=.\n[pyparsing-3.0.6]   Traceback (most recent call last):\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 3030, in _dep_map\n[pyparsing-3.0.6]       return self.__dep_map\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2827, in __getattr__\n[pyparsing-3.0.6]       raise AttributeError(attr)\n[pyparsing-3.0.6]   AttributeError: _DistInfoDistribution__dep_map\n[pyparsing-3.0.6] \n[pyparsing-3.0.6]   During handling of the above exception, another exception occurred:\n[pyparsing-3.0.6] \n[pyparsing-3.0.6]   Traceback (most recent call last):\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 3021, in _parsed_pkg_info\n[pyparsing-3.0.6]       return self._pkg_info\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2827, in __getattr__\n[pyparsing-3.0.6]       raise AttributeError(attr)\n[pyparsing-3.0.6]   AttributeError: _pkg_info\n[pyparsing-3.0.6] \n[pyparsing-3.0.6]   During handling of the above exception, another exception occurred:\n[pyparsing-3.0.6] \n[pyparsing-3.0.6]   Traceback (most recent call last):\n[pyparsing-3.0.6]     File \"<string>\", line 1, in <module>\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py\", line 23, in <module>\n[pyparsing-3.0.6]       setup(  # Distribution meta-data\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/__init__.py\", line 153, in setup\n[pyparsing-3.0.6]       return distutils.core.setup(**attrs)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/core.py\", line 108, in setup\n[pyparsing-3.0.6]       _setup_distribution = dist = klass(attrs)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 453, in __init__\n[pyparsing-3.0.6]       _Distribution.__init__(\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/dist.py\", line 292, in __init__\n[pyparsing-3.0.6]       self.finalize_options()\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 830, in finalize_options\n[pyparsing-3.0.6]       for ep in sorted(loaded, key=by_order):\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 829, in <lambda>\n[pyparsing-3.0.6]       loaded = map(lambda e: e.load(), filtered)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2463, in load\n[pyparsing-3.0.6]       self.require(*args, **kwargs)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2486, in require\n[pyparsing-3.0.6]       items = working_set.resolve(reqs, env, installer, extras=self.extras)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 785, in resolve\n[pyparsing-3.0.6]       new_requirements = dist.requires(req.extras)[::-1]\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2748, in requires\n[pyparsing-3.0.6]       dm = self._dep_map\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 3032, in _dep_map\n[pyparsing-3.0.6]       self.__dep_map = self._compute_dependencies()\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 3041, in _compute_dependencies\n[pyparsing-3.0.6]       for req in self._parsed_pkg_info.get_all('Requires-Dist') or []:\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 3023, in _parsed_pkg_info\n[pyparsing-3.0.6]       metadata = self.get_metadata(self.PKG_INFO)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1412, in get_metadata\n[pyparsing-3.0.6]       value = self._get(path)\n[pyparsing-3.0.6]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1616, in _get\n[pyparsing-3.0.6]       with open(path, 'rb') as stream:\n[pyparsing-3.0.6]   FileNotFoundError: [Errno 2] No such file or directory: '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/tomli-1.2.1.dist-info/METADATA'\n[pyparsing-3.0.6]   Building wheel for pyparsing (setup.py): finished with status 'error'\n[pyparsing-3.0.6]   ERROR: Failed building wheel for pyparsing\n[pyparsing-3.0.6]   Running setup.py clean for pyparsing\n[pyparsing-3.0.6]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'\"'\"'; __file__='\"'\"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' clean --all\n[tomli-1.2.1] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/tomli-1.2.1'\n[tomli-1.2.1] Installing tomli-1.2.1\n```\n",
    "created_at": "2022-01-09T20:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464403",
    "user": "https://github.com/vbraun"
}
```

This is still present, incremental builds can uninstall tomli while building pyparsing in parallel which then fails:

```
[singular-4.2.1p3] checking for string.h... (cached) yes
[singular-4.2.1p3] checking for time.h... yes
[singular-4.2.1p3] checking for math.h... yes
[ecl-21.2.1] ;;; End of Pass 1.
[singular-4.2.1p3] checking for cstdio... yes
[tomli-1.2.1] Using cached file /home/release/Sage/upstream/tomli-1.2.1.tar.gz
[singular-4.2.1p3] checking that generated files are newer than configure... done
[singular-4.2.1p3] configure: creating ./config.status
[tomli-1.2.1] tomli-1.2.1
[tomli-1.2.1] ====================================================
[tomli-1.2.1] Setting up build directory for tomli-1.2.1
[tomli-1.2.1] Finished extraction
[tomli-1.2.1] No patch files found in ../patches
[tomli-1.2.1] ****************************************************
[tomli-1.2.1] Host system:
[tomli-1.2.1] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
[tomli-1.2.1] ****************************************************
[tomli-1.2.1] C compiler: gcc
[tomli-1.2.1] C compiler version:
[tomli-1.2.1] Using built-in specs.
[tomli-1.2.1] COLLECT_GCC=/usr/bin/gcc
[tomli-1.2.1] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper
[tomli-1.2.1] OFFLOAD_TARGET_NAMES=nvptx-none
[tomli-1.2.1] OFFLOAD_TARGET_DEFAULT=1
[tomli-1.2.1] Target: x86_64-redhat-linux
[tomli-1.2.1] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1
[tomli-1.2.1] Thread model: posix
[tomli-1.2.1] Supported LTO compression algorithms: zlib zstd
[tomli-1.2.1] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) 
[tomli-1.2.1] ****************************************************
[tomli-1.2.1] Uninstalling existing 'tomli'
[tomli-1.2.1] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found
[tomli-1.2.1] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found
[tomli-1.2.1] Running pip-uninstall script for 'tomli'
[pyparsing-3.0.6]   reading manifest file '/tmp/pip-pip-egg-info-s8vm7an1/pyparsing.egg-info/SOURCES.txt'
[pyparsing-3.0.6]   reading manifest template 'MANIFEST.in'
[pyparsing-3.0.6]   no previously-included directories found matching 'docs/_build/*'
[pyparsing-3.0.6]   no previously-included directories found matching 'tests/__pycache__'
[pyparsing-3.0.6]   adding license file 'LICENSE'
[pyparsing-3.0.6]   writing manifest file '/tmp/pip-pip-egg-info-s8vm7an1/pyparsing.egg-info/SOURCES.txt'
[pyparsing-3.0.6]   Preparing metadata (setup.py): finished with status 'done'
[pyparsing-3.0.6] Building wheels for collected packages: pyparsing
[pyparsing-3.0.6]   Building wheel for pyparsing (setup.py): started
[pyparsing-3.0.6]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'"'"'; __file__='"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /tmp/pip-wheel-zr8kkbnr
[gap-4.11.1] Successfully installed gap-4.11.1
[gap-4.11.1] Deleting temporary build directory
[gap-4.11.1] /home/release/Sage/local/var/tmp/sage/build/gap-4.11.1
[singular-4.2.1p3] config.status: creating Makefile
[singular-4.2.1p3] config.status: creating include/factory/Makefile
[singular-4.2.1p3] config.status: creating factory.pc
[singular-4.2.1p3] config.status: creating _config.h
[singular-4.2.1p3] config.status: executing depfiles commands
[singular-4.2.1p3] config.status: executing config.h commands
[singular-4.2.1p3] config.status: creating 'config.h' - prefix '' for '_config.h' defines
[singular-4.2.1p3] config.status: executing libtool commands
[tomli-1.2.1] Found existing installation: tomli 1.2.1
[tomli-1.2.1] Uninstalling tomli-1.2.1:
[tomli-1.2.1]   Successfully uninstalled tomli-1.2.1
[singular-4.2.1p3] === configuring in libpolys (/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/libpolys)
[singular-4.2.1p3] configure: running /usr/bin/bash ./configure --disable-option-checking '--prefix=/home/release/Sage/local'  '--libdir=/home/release/Sage/local/lib' '--disable-maintainer-mode' '--disable-dependency-tracking' '--exec-prefix=/home/release/Sage/local' '--bindir=/home/release/Sage/local/bin' '--with-ntl=/home/release/Sage/local' '--with-flint=/home/release/Sage/local' '--enable-gfanlib' '--enable-Singular' '--enable-factory' '--disable-doc' '--disable-polymake' '--without-python' '--without-pythonmodule' '--disable-python' '--disable-python_module' '--disable-python-module' '--disable-static' '--with-libparse' 'CC=gcc' 'CFLAGS=-g -O2' 'LDFLAGS=-Wl,-rpath-link,/home/release/Sage/local/lib -L/home/release/Sage/local/lib -Wl,-rpath,/home/release/Sage/local/lib -Wl,-rpath-link,/home/release/Sage/local/lib -L/home/release/Sage/local/lib -Wl,-rpath,/home/release/Sage/local/lib ' 'CXX=g++ -std=gnu++11' 'CXXFLAGS=-g -O2' '--enable-omalloc' 'OMALLOC_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/omalloc/libomalloc.la' 'OMALLOC_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src' '--with-Singular' 'RESOURCES_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/resources/libsingular_resources.la' 'RESOURCES_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src ' 'FACTORY_LIBS=/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory/libfactory.la' 'FACTORY_INCLUDES=-I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src -I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory -I/home/release/Sage/local/var/tmp/sage/build/singular-4.2.1p3/src/factory/include' --cache-file=/dev/null --srcdir=.
[pyparsing-3.0.6]   Traceback (most recent call last):
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 3030, in _dep_map
[pyparsing-3.0.6]       return self.__dep_map
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2827, in __getattr__
[pyparsing-3.0.6]       raise AttributeError(attr)
[pyparsing-3.0.6]   AttributeError: _DistInfoDistribution__dep_map
[pyparsing-3.0.6] 
[pyparsing-3.0.6]   During handling of the above exception, another exception occurred:
[pyparsing-3.0.6] 
[pyparsing-3.0.6]   Traceback (most recent call last):
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 3021, in _parsed_pkg_info
[pyparsing-3.0.6]       return self._pkg_info
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2827, in __getattr__
[pyparsing-3.0.6]       raise AttributeError(attr)
[pyparsing-3.0.6]   AttributeError: _pkg_info
[pyparsing-3.0.6] 
[pyparsing-3.0.6]   During handling of the above exception, another exception occurred:
[pyparsing-3.0.6] 
[pyparsing-3.0.6]   Traceback (most recent call last):
[pyparsing-3.0.6]     File "<string>", line 1, in <module>
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py", line 23, in <module>
[pyparsing-3.0.6]       setup(  # Distribution meta-data
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/__init__.py", line 153, in setup
[pyparsing-3.0.6]       return distutils.core.setup(**attrs)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/core.py", line 108, in setup
[pyparsing-3.0.6]       _setup_distribution = dist = klass(attrs)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 453, in __init__
[pyparsing-3.0.6]       _Distribution.__init__(
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/dist.py", line 292, in __init__
[pyparsing-3.0.6]       self.finalize_options()
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 830, in finalize_options
[pyparsing-3.0.6]       for ep in sorted(loaded, key=by_order):
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 829, in <lambda>
[pyparsing-3.0.6]       loaded = map(lambda e: e.load(), filtered)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2463, in load
[pyparsing-3.0.6]       self.require(*args, **kwargs)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2486, in require
[pyparsing-3.0.6]       items = working_set.resolve(reqs, env, installer, extras=self.extras)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 785, in resolve
[pyparsing-3.0.6]       new_requirements = dist.requires(req.extras)[::-1]
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2748, in requires
[pyparsing-3.0.6]       dm = self._dep_map
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 3032, in _dep_map
[pyparsing-3.0.6]       self.__dep_map = self._compute_dependencies()
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 3041, in _compute_dependencies
[pyparsing-3.0.6]       for req in self._parsed_pkg_info.get_all('Requires-Dist') or []:
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 3023, in _parsed_pkg_info
[pyparsing-3.0.6]       metadata = self.get_metadata(self.PKG_INFO)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 1412, in get_metadata
[pyparsing-3.0.6]       value = self._get(path)
[pyparsing-3.0.6]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 1616, in _get
[pyparsing-3.0.6]       with open(path, 'rb') as stream:
[pyparsing-3.0.6]   FileNotFoundError: [Errno 2] No such file or directory: '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/tomli-1.2.1.dist-info/METADATA'
[pyparsing-3.0.6]   Building wheel for pyparsing (setup.py): finished with status 'error'
[pyparsing-3.0.6]   ERROR: Failed building wheel for pyparsing
[pyparsing-3.0.6]   Running setup.py clean for pyparsing
[pyparsing-3.0.6]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'"'"'; __file__='"'"'/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' clean --all
[tomli-1.2.1] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/tomli-1.2.1'
[tomli-1.2.1] Installing tomli-1.2.1
```




---

archive/issue_comments_464404.json:
```json
{
    "body": "Incremental from what? \nThis installation was already broken:\n\n```\n[tomli-1.2.1] Uninstalling existing 'tomli'\n[tomli-1.2.1] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found\n[tomli-1.2.1] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found\n```\n",
    "created_at": "2022-01-09T20:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464404",
    "user": "https://github.com/mkoeppe"
}
```

Incremental from what? 
This installation was already broken:

```
[tomli-1.2.1] Uninstalling existing 'tomli'
[tomli-1.2.1] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found
[tomli-1.2.1] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found
```




---

archive/issue_comments_464405.json:
```json
{
    "body": "Incremental from a version that passed tests...",
    "created_at": "2022-01-09T21:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464405",
    "user": "https://github.com/vbraun"
}
```

Incremental from a version that passed tests...



---

archive/issue_comments_464406.json:
```json
{
    "body": "Nuke that old tree",
    "created_at": "2022-01-09T21:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464406",
    "user": "https://github.com/mkoeppe"
}
```

Nuke that old tree



---

archive/issue_comments_464407.json:
```json
{
    "body": "re-running make succeeded...",
    "created_at": "2022-01-09T23:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464407",
    "user": "https://github.com/vbraun"
}
```

re-running make succeeded...



---

archive/issue_comments_464408.json:
```json
{
    "body": "here is a repro, just do a simultaneous rebuild for tomli and pyparsing:\n\n```\n$ make   \n... build to completion ...\n$ sed -i 's/$/.p0/g' build/pkgs/tomli/package-version.txt\n$ sed -i 's/$/.p0/g' build/pkgs/pyparsing/package-version.txt\n$ make -j10 start\n[...]\nmake --no-print-directory all-sage\nmake --no-print-directory tomli-SAGE_VENV-no-deps\nmake --no-print-directory pyparsing-SAGE_VENV-no-deps\n[tomli-1.2.1.p0] Using cached file /home/release/Sage/upstream/tomli-1.2.1.tar.gz\n[pyparsing-3.0.6.p0] Using cached file /home/release/Sage/upstream/pyparsing-3.0.6.tar.gz\n[tomli-1.2.1.p0] tomli-1.2.1.p0\n[tomli-1.2.1.p0] ====================================================\n[tomli-1.2.1.p0] Setting up build directory for tomli-1.2.1.p0\n[pyparsing-3.0.6.p0] pyparsing-3.0.6.p0\n[pyparsing-3.0.6.p0] ====================================================\n[pyparsing-3.0.6.p0] Setting up build directory for pyparsing-3.0.6.p0\n[tomli-1.2.1.p0] Finished extraction\n[tomli-1.2.1.p0] No patch files found in ../patches\n[tomli-1.2.1.p0] ****************************************************\n[tomli-1.2.1.p0] Host system:\n[tomli-1.2.1.p0] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n[tomli-1.2.1.p0] ****************************************************\n[tomli-1.2.1.p0] C compiler: gcc\n[tomli-1.2.1.p0] C compiler version:\n[tomli-1.2.1.p0] Using built-in specs.\n[tomli-1.2.1.p0] COLLECT_GCC=/usr/bin/gcc\n[tomli-1.2.1.p0] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper\n[tomli-1.2.1.p0] OFFLOAD_TARGET_NAMES=nvptx-none\n[tomli-1.2.1.p0] OFFLOAD_TARGET_DEFAULT=1\n[tomli-1.2.1.p0] Target: x86_64-redhat-linux\n[tomli-1.2.1.p0] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1\n[tomli-1.2.1.p0] Thread model: posix\n[tomli-1.2.1.p0] Supported LTO compression algorithms: zlib zstd\n[tomli-1.2.1.p0] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) \n[tomli-1.2.1.p0] ****************************************************\n[pyparsing-3.0.6.p0] Finished extraction\n[pyparsing-3.0.6.p0] No patch files found in ../patches\n[tomli-1.2.1.p0] Uninstalling existing 'tomli'\n[tomli-1.2.1.p0] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found\n[tomli-1.2.1.p0] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found\n[tomli-1.2.1.p0] Running pip-uninstall script for 'tomli'\n[pyparsing-3.0.6.p0] ****************************************************\n[pyparsing-3.0.6.p0] Host system:\n[pyparsing-3.0.6.p0] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n[pyparsing-3.0.6.p0] ****************************************************\n[pyparsing-3.0.6.p0] C compiler: gcc\n[pyparsing-3.0.6.p0] C compiler version:\n[pyparsing-3.0.6.p0] Using built-in specs.\n[pyparsing-3.0.6.p0] COLLECT_GCC=/usr/bin/gcc\n[pyparsing-3.0.6.p0] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper\n[pyparsing-3.0.6.p0] OFFLOAD_TARGET_NAMES=nvptx-none\n[pyparsing-3.0.6.p0] OFFLOAD_TARGET_DEFAULT=1\n[pyparsing-3.0.6.p0] Target: x86_64-redhat-linux\n[pyparsing-3.0.6.p0] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1\n[pyparsing-3.0.6.p0] Thread model: posix\n[pyparsing-3.0.6.p0] Supported LTO compression algorithms: zlib zstd\n[pyparsing-3.0.6.p0] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) \n[pyparsing-3.0.6.p0] ****************************************************\n[pyparsing-3.0.6.p0] Uninstalling existing 'pyparsing'\n[pyparsing-3.0.6.p0] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/pyparsing-3.0.6-py3-none-any.whl' not found\n[pyparsing-3.0.6.p0] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found\n[pyparsing-3.0.6.p0] Running pip-uninstall script for 'pyparsing'\n[tomli-1.2.1.p0] Found existing installation: tomli 1.2.1\n[tomli-1.2.1.p0] Uninstalling tomli-1.2.1:\n[tomli-1.2.1.p0]   Successfully uninstalled tomli-1.2.1\n[pyparsing-3.0.6.p0] Waiting for exclusive lock to run python3 -m pip uninstall --isolated --disable-pip-version-check --yes --no-input -r /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/scripts/pyparsing/spkg-piprm-requirements.txt ... ok\n[tomli-1.2.1.p0] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/tomli-1.2.1'\n[tomli-1.2.1.p0] Installing tomli-1.2.1.p0\n[pyparsing-3.0.6.p0] Found existing installation: pyparsing 3.0.6\n[pyparsing-3.0.6.p0] Uninstalling pyparsing-3.0.6:\n[pyparsing-3.0.6.p0]   Successfully uninstalled pyparsing-3.0.6\n[tomli-1.2.1.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/src\n[tomli-1.2.1.p0]   Preparing metadata (pyproject.toml): started\n[tomli-1.2.1.p0]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py prepare_metadata_for_build_wheel /tmp/tmppyi2csa4\n[pyparsing-3.0.6.p0] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/pyparsing-3.0.6'\n[pyparsing-3.0.6.p0] Installing pyparsing-3.0.6.p0\n[tomli-1.2.1.p0]   Preparing metadata (pyproject.toml): finished with status 'done'\n[tomli-1.2.1.p0] Building wheels for collected packages: tomli\n[tomli-1.2.1.p0]   Building wheel for tomli (pyproject.toml): started\n[tomli-1.2.1.p0]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpqu_b_8bd\n[tomli-1.2.1.p0]   Building wheel for tomli (pyproject.toml): finished with status 'done'\n[tomli-1.2.1.p0]   Created wheel for tomli: filename=tomli-1.2.1-py3-none-any.whl size=11849 sha256=3a83352da82206a7e320a74d52c59c2eb9246cfee3d64475568135c060b29777\n[tomli-1.2.1.p0]   Stored in directory: /tmp/pip-ephem-wheel-cache-lpv8mfwg/wheels/f5/80/a3/e21b0a218ba3e80b0e2d9632545cf2b0d97f4c68c901ccefc6\n[tomli-1.2.1.p0] Successfully built tomli\n[pyparsing-3.0.6.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src\n[pyparsing-3.0.6.p0]   Preparing metadata (setup.py): started\n[pyparsing-3.0.6.p0]   Running command python setup.py egg_info\n[tomli-1.2.1.p0] WARNING: Skipping tomli as it is not installed.\n[pyparsing-3.0.6.p0]   Traceback (most recent call last):\n[pyparsing-3.0.6.p0]     File \"<string>\", line 1, in <module>\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src/setup.py\", line 23, in <module>\n[pyparsing-3.0.6.p0]       setup(  # Distribution meta-data\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/__init__.py\", line 153, in setup\n[pyparsing-3.0.6.p0]       return distutils.core.setup(**attrs)\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/core.py\", line 108, in setup\n[pyparsing-3.0.6.p0]       _setup_distribution = dist = klass(attrs)\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 453, in __init__\n[pyparsing-3.0.6.p0]       _Distribution.__init__(\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/dist.py\", line 292, in __init__\n[pyparsing-3.0.6.p0]       self.finalize_options()\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 830, in finalize_options\n[pyparsing-3.0.6.p0]       for ep in sorted(loaded, key=by_order):\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py\", line 829, in <lambda>\n[pyparsing-3.0.6.p0]       loaded = map(lambda e: e.load(), filtered)\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2463, in load\n[pyparsing-3.0.6.p0]       self.require(*args, **kwargs)\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 2486, in require\n[pyparsing-3.0.6.p0]       items = working_set.resolve(reqs, env, installer, extras=self.extras)\n[pyparsing-3.0.6.p0]     File \"/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 777, in resolve\n[pyparsing-3.0.6.p0]       raise DistributionNotFound(req, requirers)\n[pyparsing-3.0.6.p0]   pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application\n[pyparsing-3.0.6.p0]   Preparing metadata (setup.py): finished with status 'error'\n[pyparsing-3.0.6.p0] WARNING: Discarding file:///home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src. Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n[pyparsing-3.0.6.p0] ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n[pyparsing-3.0.6.p0] ******************************************************************************************************************************************************************************************************************************************\n[pyparsing-3.0.6.p0] Error building a wheel for pyparsing-3.0.6.p0\n[pyparsing-3.0.6.p0] ******************************************************************************************************************************************************************************************************************************************\n[pyparsing-3.0.6.p0] \n[pyparsing-3.0.6.p0] real\t0m0.614s\n[pyparsing-3.0.6.p0] user\t0m0.546s\n[pyparsing-3.0.6.p0] sys\t0m0.070s\n[pyparsing-3.0.6.p0] ************************************************************************\n[pyparsing-3.0.6.p0] Error installing package pyparsing-3.0.6.p0\n[pyparsing-3.0.6.p0] ************************************************************************\n[pyparsing-3.0.6.p0] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[pyparsing-3.0.6.p0] explaining the problem and including the log files\n[pyparsing-3.0.6.p0]   /home/release/Sage/logs/pkgs/pyparsing-3.0.6.p0.log\n[pyparsing-3.0.6.p0] and\n[pyparsing-3.0.6.p0]   /home/release/Sage/config.log\n[pyparsing-3.0.6.p0] Describe your computer, operating system, etc.\n[pyparsing-3.0.6.p0] If you want to try to fix the problem yourself, *don't* just cd to\n[pyparsing-3.0.6.p0] /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0 and type 'make' or whatever is appropriate.\n[pyparsing-3.0.6.p0] Instead, the following commands setup all environment variables\n[pyparsing-3.0.6.p0] correctly and load a subshell for you to debug the error:\n[pyparsing-3.0.6.p0]   (cd '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0' && '/home/release/Sage/sage' --buildsh)\n[pyparsing-3.0.6.p0] When you are done debugging, you can type \"exit\" to leave the subshell.\n[pyparsing-3.0.6.p0] ************************************************************************\nmake[4]: *** [Makefile:2724: pyparsing-SAGE_VENV-no-deps] Error 1\nmake[3]: *** [Makefile:2724: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/pyparsing-3.0.6.p0] Error 2\nmake[3]: *** Waiting for unfinished jobs....\n[tomli-1.2.1.p0] Using pip 21.3.1 from /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip (python 3.9)\n[tomli-1.2.1.p0] Looking in links: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/wheels\n[tomli-1.2.1.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/inst/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl\n[tomli-1.2.1.p0] Installing collected packages: tomli\n[tomli-1.2.1.p0] Successfully installed tomli-1.2.1\n[tomli-1.2.1.p0] \n[tomli-1.2.1.p0] real\t0m1.599s\n[tomli-1.2.1.p0] user\t0m1.403s\n[tomli-1.2.1.p0] sys\t0m0.189s\n[tomli-1.2.1.p0] Copying package files from temporary location /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/inst to /home/release/Sage/local/var/lib/sage/venv-python3.9.9\n[tomli-1.2.1.p0] Successfully installed tomli-1.2.1.p0\n[tomli-1.2.1.p0] Deleting temporary build directory\n[tomli-1.2.1.p0] /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0\n[tomli-1.2.1.p0] Finished installing tomli-1.2.1.p0\nmake[2]: *** [Makefile:2432: all-build] Error 2\nmake[2]: Leaving directory '/home/release/Sage/build/make'\n```\n",
    "created_at": "2022-01-12T21:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464408",
    "user": "https://github.com/vbraun"
}
```

here is a repro, just do a simultaneous rebuild for tomli and pyparsing:

```
$ make   
... build to completion ...
$ sed -i 's/$/.p0/g' build/pkgs/tomli/package-version.txt
$ sed -i 's/$/.p0/g' build/pkgs/pyparsing/package-version.txt
$ make -j10 start
[...]
make --no-print-directory all-sage
make --no-print-directory tomli-SAGE_VENV-no-deps
make --no-print-directory pyparsing-SAGE_VENV-no-deps
[tomli-1.2.1.p0] Using cached file /home/release/Sage/upstream/tomli-1.2.1.tar.gz
[pyparsing-3.0.6.p0] Using cached file /home/release/Sage/upstream/pyparsing-3.0.6.tar.gz
[tomli-1.2.1.p0] tomli-1.2.1.p0
[tomli-1.2.1.p0] ====================================================
[tomli-1.2.1.p0] Setting up build directory for tomli-1.2.1.p0
[pyparsing-3.0.6.p0] pyparsing-3.0.6.p0
[pyparsing-3.0.6.p0] ====================================================
[pyparsing-3.0.6.p0] Setting up build directory for pyparsing-3.0.6.p0
[tomli-1.2.1.p0] Finished extraction
[tomli-1.2.1.p0] No patch files found in ../patches
[tomli-1.2.1.p0] ****************************************************
[tomli-1.2.1.p0] Host system:
[tomli-1.2.1.p0] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
[tomli-1.2.1.p0] ****************************************************
[tomli-1.2.1.p0] C compiler: gcc
[tomli-1.2.1.p0] C compiler version:
[tomli-1.2.1.p0] Using built-in specs.
[tomli-1.2.1.p0] COLLECT_GCC=/usr/bin/gcc
[tomli-1.2.1.p0] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper
[tomli-1.2.1.p0] OFFLOAD_TARGET_NAMES=nvptx-none
[tomli-1.2.1.p0] OFFLOAD_TARGET_DEFAULT=1
[tomli-1.2.1.p0] Target: x86_64-redhat-linux
[tomli-1.2.1.p0] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1
[tomli-1.2.1.p0] Thread model: posix
[tomli-1.2.1.p0] Supported LTO compression algorithms: zlib zstd
[tomli-1.2.1.p0] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) 
[tomli-1.2.1.p0] ****************************************************
[pyparsing-3.0.6.p0] Finished extraction
[pyparsing-3.0.6.p0] No patch files found in ../patches
[tomli-1.2.1.p0] Uninstalling existing 'tomli'
[tomli-1.2.1.p0] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl' not found
[tomli-1.2.1.p0] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found
[tomli-1.2.1.p0] Running pip-uninstall script for 'tomli'
[pyparsing-3.0.6.p0] ****************************************************
[pyparsing-3.0.6.p0] Host system:
[pyparsing-3.0.6.p0] Linux zen 5.15.11-200.fc35.x86_64 #1 SMP Wed Dec 22 15:41:11 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
[pyparsing-3.0.6.p0] ****************************************************
[pyparsing-3.0.6.p0] C compiler: gcc
[pyparsing-3.0.6.p0] C compiler version:
[pyparsing-3.0.6.p0] Using built-in specs.
[pyparsing-3.0.6.p0] COLLECT_GCC=/usr/bin/gcc
[pyparsing-3.0.6.p0] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper
[pyparsing-3.0.6.p0] OFFLOAD_TARGET_NAMES=nvptx-none
[pyparsing-3.0.6.p0] OFFLOAD_TARGET_DEFAULT=1
[pyparsing-3.0.6.p0] Target: x86_64-redhat-linux
[pyparsing-3.0.6.p0] Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,objc,obj-c++,ada,go,d,lto --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20211203/obj-x86_64-redhat-linux/isl-install --enable-offload-targets=nvptx-none --without-cuda-driver --enable-gnu-indirect-function --enable-cet --with-tune=generic --with-arch_32=i686 --build=x86_64-redhat-linux --with-build-config=bootstrap-lto --enable-link-serialization=1
[pyparsing-3.0.6.p0] Thread model: posix
[pyparsing-3.0.6.p0] Supported LTO compression algorithms: zlib zstd
[pyparsing-3.0.6.p0] gcc version 11.2.1 20211203 (Red Hat 11.2.1-7) (GCC) 
[pyparsing-3.0.6.p0] ****************************************************
[pyparsing-3.0.6.p0] Uninstalling existing 'pyparsing'
[pyparsing-3.0.6.p0] Warning: File '/home/release/Sage/local/var/lib/sage/wheels/pyparsing-3.0.6-py3-none-any.whl' not found
[pyparsing-3.0.6.p0] Warning: Directory '/home/release/Sage/local/var/lib/sage/wheels' not found
[pyparsing-3.0.6.p0] Running pip-uninstall script for 'pyparsing'
[tomli-1.2.1.p0] Found existing installation: tomli 1.2.1
[tomli-1.2.1.p0] Uninstalling tomli-1.2.1:
[tomli-1.2.1.p0]   Successfully uninstalled tomli-1.2.1
[pyparsing-3.0.6.p0] Waiting for exclusive lock to run python3 -m pip uninstall --isolated --disable-pip-version-check --yes --no-input -r /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/scripts/pyparsing/spkg-piprm-requirements.txt ... ok
[tomli-1.2.1.p0] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/tomli-1.2.1'
[tomli-1.2.1.p0] Installing tomli-1.2.1.p0
[pyparsing-3.0.6.p0] Found existing installation: pyparsing 3.0.6
[pyparsing-3.0.6.p0] Uninstalling pyparsing-3.0.6:
[pyparsing-3.0.6.p0]   Successfully uninstalled pyparsing-3.0.6
[tomli-1.2.1.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/src
[tomli-1.2.1.p0]   Preparing metadata (pyproject.toml): started
[tomli-1.2.1.p0]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py prepare_metadata_for_build_wheel /tmp/tmppyi2csa4
[pyparsing-3.0.6.p0] Removing stamp file '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/pyparsing-3.0.6'
[pyparsing-3.0.6.p0] Installing pyparsing-3.0.6.p0
[tomli-1.2.1.p0]   Preparing metadata (pyproject.toml): finished with status 'done'
[tomli-1.2.1.p0] Building wheels for collected packages: tomli
[tomli-1.2.1.p0]   Building wheel for tomli (pyproject.toml): started
[tomli-1.2.1.p0]   Running command /home/release/Sage/local/var/lib/sage/venv-python3.9.9/bin/python3 /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpqu_b_8bd
[tomli-1.2.1.p0]   Building wheel for tomli (pyproject.toml): finished with status 'done'
[tomli-1.2.1.p0]   Created wheel for tomli: filename=tomli-1.2.1-py3-none-any.whl size=11849 sha256=3a83352da82206a7e320a74d52c59c2eb9246cfee3d64475568135c060b29777
[tomli-1.2.1.p0]   Stored in directory: /tmp/pip-ephem-wheel-cache-lpv8mfwg/wheels/f5/80/a3/e21b0a218ba3e80b0e2d9632545cf2b0d97f4c68c901ccefc6
[tomli-1.2.1.p0] Successfully built tomli
[pyparsing-3.0.6.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src
[pyparsing-3.0.6.p0]   Preparing metadata (setup.py): started
[pyparsing-3.0.6.p0]   Running command python setup.py egg_info
[tomli-1.2.1.p0] WARNING: Skipping tomli as it is not installed.
[pyparsing-3.0.6.p0]   Traceback (most recent call last):
[pyparsing-3.0.6.p0]     File "<string>", line 1, in <module>
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src/setup.py", line 23, in <module>
[pyparsing-3.0.6.p0]       setup(  # Distribution meta-data
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/__init__.py", line 153, in setup
[pyparsing-3.0.6.p0]       return distutils.core.setup(**attrs)
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/core.py", line 108, in setup
[pyparsing-3.0.6.p0]       _setup_distribution = dist = klass(attrs)
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 453, in __init__
[pyparsing-3.0.6.p0]       _Distribution.__init__(
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/distutils/dist.py", line 292, in __init__
[pyparsing-3.0.6.p0]       self.finalize_options()
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 830, in finalize_options
[pyparsing-3.0.6.p0]       for ep in sorted(loaded, key=by_order):
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/setuptools/dist.py", line 829, in <lambda>
[pyparsing-3.0.6.p0]       loaded = map(lambda e: e.load(), filtered)
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2463, in load
[pyparsing-3.0.6.p0]       self.require(*args, **kwargs)
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 2486, in require
[pyparsing-3.0.6.p0]       items = working_set.resolve(reqs, env, installer, extras=self.extras)
[pyparsing-3.0.6.p0]     File "/home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pkg_resources/__init__.py", line 777, in resolve
[pyparsing-3.0.6.p0]       raise DistributionNotFound(req, requirers)
[pyparsing-3.0.6.p0]   pkg_resources.DistributionNotFound: The 'tomli>=1.0.0' distribution was not found and is required by the application
[pyparsing-3.0.6.p0]   Preparing metadata (setup.py): finished with status 'error'
[pyparsing-3.0.6.p0] WARNING: Discarding file:///home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0/src. Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
[pyparsing-3.0.6.p0] ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
[pyparsing-3.0.6.p0] ******************************************************************************************************************************************************************************************************************************************
[pyparsing-3.0.6.p0] Error building a wheel for pyparsing-3.0.6.p0
[pyparsing-3.0.6.p0] ******************************************************************************************************************************************************************************************************************************************
[pyparsing-3.0.6.p0] 
[pyparsing-3.0.6.p0] real	0m0.614s
[pyparsing-3.0.6.p0] user	0m0.546s
[pyparsing-3.0.6.p0] sys	0m0.070s
[pyparsing-3.0.6.p0] ************************************************************************
[pyparsing-3.0.6.p0] Error installing package pyparsing-3.0.6.p0
[pyparsing-3.0.6.p0] ************************************************************************
[pyparsing-3.0.6.p0] Please email sage-devel (http://groups.google.com/group/sage-devel)
[pyparsing-3.0.6.p0] explaining the problem and including the log files
[pyparsing-3.0.6.p0]   /home/release/Sage/logs/pkgs/pyparsing-3.0.6.p0.log
[pyparsing-3.0.6.p0] and
[pyparsing-3.0.6.p0]   /home/release/Sage/config.log
[pyparsing-3.0.6.p0] Describe your computer, operating system, etc.
[pyparsing-3.0.6.p0] If you want to try to fix the problem yourself, *don't* just cd to
[pyparsing-3.0.6.p0] /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0 and type 'make' or whatever is appropriate.
[pyparsing-3.0.6.p0] Instead, the following commands setup all environment variables
[pyparsing-3.0.6.p0] correctly and load a subshell for you to debug the error:
[pyparsing-3.0.6.p0]   (cd '/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/pyparsing-3.0.6.p0' && '/home/release/Sage/sage' --buildsh)
[pyparsing-3.0.6.p0] When you are done debugging, you can type "exit" to leave the subshell.
[pyparsing-3.0.6.p0] ************************************************************************
make[4]: *** [Makefile:2724: pyparsing-SAGE_VENV-no-deps] Error 1
make[3]: *** [Makefile:2724: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/installed/pyparsing-3.0.6.p0] Error 2
make[3]: *** Waiting for unfinished jobs....
[tomli-1.2.1.p0] Using pip 21.3.1 from /home/release/Sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/pip (python 3.9)
[tomli-1.2.1.p0] Looking in links: /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/wheels
[tomli-1.2.1.p0] Processing /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/inst/home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/lib/sage/wheels/tomli-1.2.1-py3-none-any.whl
[tomli-1.2.1.p0] Installing collected packages: tomli
[tomli-1.2.1.p0] Successfully installed tomli-1.2.1
[tomli-1.2.1.p0] 
[tomli-1.2.1.p0] real	0m1.599s
[tomli-1.2.1.p0] user	0m1.403s
[tomli-1.2.1.p0] sys	0m0.189s
[tomli-1.2.1.p0] Copying package files from temporary location /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0/inst to /home/release/Sage/local/var/lib/sage/venv-python3.9.9
[tomli-1.2.1.p0] Successfully installed tomli-1.2.1.p0
[tomli-1.2.1.p0] Deleting temporary build directory
[tomli-1.2.1.p0] /home/release/Sage/local/var/lib/sage/venv-python3.9.9/var/tmp/sage/build/tomli-1.2.1.p0
[tomli-1.2.1.p0] Finished installing tomli-1.2.1.p0
make[2]: *** [Makefile:2432: all-build] Error 2
make[2]: Leaving directory '/home/release/Sage/build/make'
```




---

archive/issue_events_086832.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-13T06:12:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86832"
}
```



---

archive/issue_comments_464409.json:
```json
{
    "body": "Looks like we may have to upgrade the lock held during `pip install` from shared to exclusive and hold a shared lock during `pip wheel`. Sage 9.6 material, I'd say",
    "created_at": "2022-01-13T06:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464409",
    "user": "https://github.com/mkoeppe"
}
```

Looks like we may have to upgrade the lock held during `pip install` from shared to exclusive and hold a shared lock during `pip wheel`. Sage 9.6 material, I'd say



---

archive/issue_comments_464410.json:
```json
{
    "body": "Replying to [comment:7 mkoeppe]:\n> hold a shared lock during `pip wheel`\n\nor better switch to using build isolation - #33789.",
    "created_at": "2022-05-03T02:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464410",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:7 mkoeppe]:
> hold a shared lock during `pip wheel`

or better switch to using build isolation - #33789.



---

archive/issue_events_086833.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T02:45:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86833"
}
```



---

archive/issue_events_086834.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T02:45:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86834"
}
```



---

archive/issue_events_086835.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-01T20:35:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86835"
}
```



---

archive/issue_events_086836.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-01T20:35:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86836"
}
```



---

archive/issue_comments_464411.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-01T20:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464411",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464412.json:
```json
{
    "body": "I think we can close this as outdated",
    "created_at": "2022-08-01T20:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464412",
    "user": "https://github.com/mkoeppe"
}
```

I think we can close this as outdated



---

archive/issue_comments_464413.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-05T21:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464413",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_086837.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-01T02:30:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32597#event-86837"
}
```



---

archive/issue_comments_464414.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-09-01T02:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32597#issuecomment-464414",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
