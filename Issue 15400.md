# Issue 15400: TypeError: object of type 'listreverseiterator' has no len()

archive/issues_015400.json:
```json
{
    "body": "CC:  @ohanar\n\nKeywords: trac\n\n#### How to Reproduce\n\nWhile doing a POST operation on `/ticket/15576`, Trac issued an internal error.\n\n*(please provide additional details here)*\n\nRequest parameters:\n\n```\n{'__EDITOR__1': u'textarea',\n '__EDITOR__2': u'textarea',\n '__FORM_TOKEN': u'3dd5a53b3fddfbbb88a5a311',\n 'action': u'leave',\n 'comment': u'Attention: branch change!\\r\\n\\r\\nI\\'m a bit surprised that you changed the definite articles back to the indefinites, so I\\'m suggesting to change them back in my commit. (Also, \"the group of degree n over a ring R\" sounds better than \"the group over a ring R of degree n\" to my ears.)\\r\\n\\r\\nIf my edits are OK to you, please set this to positive_review. Thanks for your work!',\n 'field_author': u'',\n 'field_branch': u'public/ticket/15576',\n 'field_cc': u'tfeulner',\n 'field_commit': u'6155cf9ce606b77b6c70c84a106430e9068e15c2',\n 'field_component': u'group theory',\n 'field_dependencies': u'',\n 'field_description': u\"As detailed in #14885, it is not healthy for code to rely on the `__mul__` operation on permutations, since this operation depends on the `Permutations().global_options()['mul']` variable which can change at runtime. It is better to use the `left_action_product` and `right_action_product` methods introduced in #15174 (formerly known as `_left_to_right_multiply_on_left` and `_left_to_right_multiply_on_right`).\\r\\n\\r\\nMy tests show some dependence on the `__mul__` method in `sage/groups/semimonomial_transformations/semimonomial_transformation.pyx` and `sage/groups/semimonomial_transformations/semimonomial_transformation_group.py`, although it might be that only one of these files depends on it and the other depends on the first file. Unfortunately I don't have time to study this in detail, as I'd first have to read up on the definitions.\",\n 'field_keywords': u'permutation, semimonomial transformation, groups',\n 'field_merged': u'',\n 'field_milestone': u'sage-6.1',\n 'field_priority': u'major',\n 'field_reviewer': u'',\n 'field_stopgaps': u'',\n 'field_summary': u'Semimonomial transformation groups code is sensitive to Permutations global options',\n 'field_type': u'defect',\n 'field_upstream': u'N/A',\n 'field_work_issues': u'',\n 'id': u'15576',\n 'replyto': u'',\n 'start_time': u'1388826242393549',\n 'submit': u'Submit changes',\n 'view_time': u'1388826242393549'}\n```\n\n\nUser agent: `Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:26.0) Gecko/20100101 Firefox/26.0`\n\n#### System Information\n*System information not available*\n\n#### Enabled Plugins\n*Plugin information not available*\n\n#### Python Traceback\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py\", line 497, in _dispatch_request\n    dispatcher.dispatch(req)\n  File \"/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py\", line 214, in dispatch\n    resp = chosen_handler.process_request(req)\n  File \"/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py\", line 185, in process_request\n    return self._process_ticket_request(req)\n  File \"/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py\", line 623, in _process_ticket_request\n    valid = self._validate_ticket(req, ticket, not valid) and valid\n  File \"/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py\", line 1321, in _validate_ticket\n    for field, message in manipulator.validate_ticket(req, ticket):\n  File \"/srv/trac/sage_trac/plugins/ticket_branch.py\", line 288, in validate_ticket\n    return []\nTypeError: object of type 'listreverseiterator' has no len()\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15637\n\n",
    "created_at": "2014-01-06T14:43:24Z",
    "labels": [
        "website/wiki",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "TypeError: object of type 'listreverseiterator' has no len()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15400",
    "user": "@darijgr"
}
```
CC:  @ohanar

Keywords: trac

#### How to Reproduce

While doing a POST operation on `/ticket/15576`, Trac issued an internal error.

*(please provide additional details here)*

Request parameters:

```
{'__EDITOR__1': u'textarea',
 '__EDITOR__2': u'textarea',
 '__FORM_TOKEN': u'3dd5a53b3fddfbbb88a5a311',
 'action': u'leave',
 'comment': u'Attention: branch change!\r\n\r\nI\'m a bit surprised that you changed the definite articles back to the indefinites, so I\'m suggesting to change them back in my commit. (Also, "the group of degree n over a ring R" sounds better than "the group over a ring R of degree n" to my ears.)\r\n\r\nIf my edits are OK to you, please set this to positive_review. Thanks for your work!',
 'field_author': u'',
 'field_branch': u'public/ticket/15576',
 'field_cc': u'tfeulner',
 'field_commit': u'6155cf9ce606b77b6c70c84a106430e9068e15c2',
 'field_component': u'group theory',
 'field_dependencies': u'',
 'field_description': u"As detailed in #14885, it is not healthy for code to rely on the `__mul__` operation on permutations, since this operation depends on the `Permutations().global_options()['mul']` variable which can change at runtime. It is better to use the `left_action_product` and `right_action_product` methods introduced in #15174 (formerly known as `_left_to_right_multiply_on_left` and `_left_to_right_multiply_on_right`).\r\n\r\nMy tests show some dependence on the `__mul__` method in `sage/groups/semimonomial_transformations/semimonomial_transformation.pyx` and `sage/groups/semimonomial_transformations/semimonomial_transformation_group.py`, although it might be that only one of these files depends on it and the other depends on the first file. Unfortunately I don't have time to study this in detail, as I'd first have to read up on the definitions.",
 'field_keywords': u'permutation, semimonomial transformation, groups',
 'field_merged': u'',
 'field_milestone': u'sage-6.1',
 'field_priority': u'major',
 'field_reviewer': u'',
 'field_stopgaps': u'',
 'field_summary': u'Semimonomial transformation groups code is sensitive to Permutations global options',
 'field_type': u'defect',
 'field_upstream': u'N/A',
 'field_work_issues': u'',
 'id': u'15576',
 'replyto': u'',
 'start_time': u'1388826242393549',
 'submit': u'Submit changes',
 'view_time': u'1388826242393549'}
```


User agent: `Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:26.0) Gecko/20100101 Firefox/26.0`

#### System Information
*System information not available*

#### Enabled Plugins
*Plugin information not available*

#### Python Traceback

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py", line 497, in _dispatch_request
    dispatcher.dispatch(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py", line 214, in dispatch
    resp = chosen_handler.process_request(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 185, in process_request
    return self._process_ticket_request(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 623, in _process_ticket_request
    valid = self._validate_ticket(req, ticket, not valid) and valid
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 1321, in _validate_ticket
    for field, message in manipulator.validate_ticket(req, ticket):
  File "/srv/trac/sage_trac/plugins/ticket_branch.py", line 288, in validate_ticket
    return []
TypeError: object of type 'listreverseiterator' has no len()
```


Issue created by migration from https://trac.sagemath.org/ticket/15637





---

archive/issue_comments_198788.json:
```json
{
    "body": "That actually came from the attempt at changing the branch...",
    "created_at": "2014-01-06T14:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198788",
    "user": "@darijgr"
}
```

That actually came from the attempt at changing the branch...



---

archive/issue_comments_198789.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-01-06T18:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198789",
    "user": "@ohanar"
}
```

Last 10 new commits:



---

archive/issue_comments_198790.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-06T18:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198790",
    "user": "@ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_198791.json:
```json
{
    "body": "Ok, should be fixed.",
    "created_at": "2014-01-06T18:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198791",
    "user": "@ohanar"
}
```

Ok, should be fixed.



---

archive/issue_comments_198792.json:
```json
{
    "body": "I haven't had it come up again, so I believe it's fixed.",
    "created_at": "2014-01-08T00:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198792",
    "user": "@tscrim"
}
```

I haven't had it come up again, so I believe it's fixed.



---

archive/issue_comments_198793.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-08T00:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198793",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198794.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-10T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15400#issuecomment-198794",
    "user": "@vbraun"
}
```

Resolution: fixed
