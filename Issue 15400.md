# Issue 15400: TypeError: object of type 'listreverseiterator' has no len()

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2014-01-06 14:43:24

CC:  ohanar

Keywords: trac

#### How to Reproduce

While doing a POST operation on `/ticket/15576`, Trac issued an internal error.

_(please provide additional details here)_

Request parameters:

```
{'__EDITOR__1': u'textarea',
 '__EDITOR__2': u'textarea',
 '__FORM_TOKEN': u'3dd5a53b3fddfbbb88a5a311',
 'action': u'leave',
 'comment': u'Attention: branch change!\r\n\r\nI\'m a bit surprised that you changed the definite articles back to the indefinites, so I\'m suggesting to change them back in my commit. (Also, "the group of degree n over a ring R" sounds better than "the group over a ring R of degree n" to my ears.)\r\n\r\nIf my edits are OK to you, please set this to positive_review. Thanks for your work!',
 'field_author': u'',
 'field_branch': u'public/ticket/15576',
 'field_cc': u'tfeulner',
 'field_commit': u'6155cf9ce606b77b6c70c84a106430e9068e15c2',
 'field_component': u'group theory',
 'field_dependencies': u'',
 'field_description': u"As detailed in #14885, it is not healthy for code to rely on the `__mul__` operation on permutations, since this operation depends on the `Permutations().global_options()['mul']` variable which can change at runtime. It is better to use the `left_action_product` and `right_action_product` methods introduced in #15174 (formerly known as `_left_to_right_multiply_on_left` and `_left_to_right_multiply_on_right`).\r\n\r\nMy tests show some dependence on the `__mul__` method in `sage/groups/semimonomial_transformations/semimonomial_transformation.pyx` and `sage/groups/semimonomial_transformations/semimonomial_transformation_group.py`, although it might be that only one of these files depends on it and the other depends on the first file. Unfortunately I don't have time to study this in detail, as I'd first have to read up on the definitions.",
 'field_keywords': u'permutation, semimonomial transformation, groups',
 'field_merged': u'',
 'field_milestone': u'sage-6.1',
 'field_priority': u'major',
 'field_reviewer': u'',
 'field_stopgaps': u'',
 'field_summary': u'Semimonomial transformation groups code is sensitive to Permutations global options',
 'field_type': u'defect',
 'field_upstream': u'N/A',
 'field_work_issues': u'',
 'id': u'15576',
 'replyto': u'',
 'start_time': u'1388826242393549',
 'submit': u'Submit changes',
 'view_time': u'1388826242393549'}
```


User agent: `Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:26.0) Gecko/20100101 Firefox/26.0`

#### System Information
_System information not available_

#### Enabled Plugins
_Plugin information not available_

#### Python Traceback

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py", line 497, in _dispatch_request
    dispatcher.dispatch(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/web/main.py", line 214, in dispatch
    resp = chosen_handler.process_request(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 185, in process_request
    return self._process_ticket_request(req)
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 623, in _process_ticket_request
    valid = self._validate_ticket(req, ticket, not valid) and valid
  File "/usr/local/lib/python2.7/dist-packages/Trac-1.1.2dev-py2.7.egg/trac/ticket/web_ui.py", line 1321, in _validate_ticket
    for field, message in manipulator.validate_ticket(req, ticket):
  File "/srv/trac/sage_trac/plugins/ticket_branch.py", line 288, in validate_ticket
    return []
TypeError: object of type 'listreverseiterator' has no len()
```



---

Comment by darij created at 2014-01-06 14:46:15

That actually came from the attempt at changing the branch...


---

Comment by ohanar created at 2014-01-06 18:55:57

Last 10 new commits:


---

Comment by ohanar created at 2014-01-06 18:56:25

Changing status from new to needs_review.


---

Comment by ohanar created at 2014-01-06 18:56:25

Ok, should be fixed.


---

Comment by tscrim created at 2014-01-08 00:17:51

I haven't had it come up again, so I believe it's fixed.


---

Comment by tscrim created at 2014-01-08 00:17:51

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-01-10 08:48:40

Resolution: fixed
