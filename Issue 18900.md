# Issue 18900: Use inverse_series_trunc in power series

Issue created by migration from https://trac.sagemath.org/ticket/19137

Original creator: vdelecroix

Original creation time: 2015-09-04 20:36:45

CC:  â€‹mmezzarobba

Use the recently implemented `inverse_series_trunc` for polynomials (#19005) to inverse power series.

We also fix the following bug

```
sage: x = polygen(ZZ)
sage: (x-1).inverse_series_trunc(10)
Traceback (most recent call last):
...
ValueError: constant term -1 is not a unit
```



---

Comment by vdelecroix created at 2015-09-04 20:41:14

I am not sure about what should be the parent of `~s` if `s` is a power series over the integer ring. To follow the standard with integers, it should be the power series ring with coefficients in `QQ`... Right now we have

```
sage: R.<t> = PowerSeriesRing(ZZ)
sage: ~R(2)
Traceback (most recent call last):
...
ValueError: constant term is not a unit
```



---

Comment by vdelecroix created at 2015-09-04 20:41:14

Changing status from new to needs_review.


---

Comment by git created at 2015-09-04 20:41:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-09-10 13:38:54

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2015-09-10 13:38:54

4 failing doctests, see patchbot report


---

Comment by git created at 2015-09-10 22:25:59

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-09-10 22:26:13

Changing status from needs_work to needs_review.


---

Comment by bruno created at 2015-09-15 09:09:51

I have a silly question: The code for `__invert__` seems new (based on the `diff`), but there is a block `AUTHORS` that mentions David Harvey in 2006. Where does this code come from? Though this question has no real importance _per se_, I wonder if I correctly understand the changes.


---

Comment by mmezzarobba created at 2015-09-21 09:38:14

Changing status from needs_review to needs_info.


---

Comment by vdelecroix created at 2015-12-04 01:56:57

Changing status from needs_info to needs_review.


---

Comment by vdelecroix created at 2015-12-04 01:56:57

Right. It was a lot of copy paste. There actually was a method `__invert__` in the generic power series implemented by David Harvey. All the code is now in polynomial (because of #19005). I added some proper mention to him there. The generic code is now removed since it is of no use.


---

Comment by git created at 2015-12-04 01:58:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-07 20:26:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2015-12-10 02:30:52

ok, looks good to me


---

Comment by chapoton created at 2015-12-10 02:30:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-12-22 19:49:47

Resolution: fixed
