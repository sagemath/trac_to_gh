# Issue 15696: New version of graphviz

Issue created by migration from Trac.

Original creator: mmarco

Original creation time: 2014-03-13 15:09:20

CC:  nthiery rlm mhansen ncohen jdemeyer schilly

For some reason, i get a segfault when i try to system-wide graphviz from sage, and the current experimental spkg fails to install, so i updated it. It now installs on my systems and works ok.


---

Comment by ncohen created at 2014-03-13 16:51:24

Hello !

Well, the spkg works (even though I expected it to be a bzip2 file instead of a gzip file), but how exactly can this spkg be used through  Sage so that I may test it ?

Nathann


---

Comment by ncohen created at 2014-03-13 16:54:34

Changing status from new to needs_info.


---

Comment by mmarco created at 2014-03-13 19:14:28

The situation where i used it is in the singular interface.


```
$ sage -singular
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 3-1-6
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   Dec 2012
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
> LIB "all.lib";;

(all of output about the libraries loaded)

> ring r=0,(x,y),dp;
> ideal i=x2-y3;
> list L=resolve(i);
> ResTree(L,collectDiv(L)[1],"output");
Currently showing graphics in separate window
Press <Return> to continue
sh: /usr/bin/X11/xv: No such file or directory
pause>
> 

```


It creates a text file called output, and tries to call "dot" on it. But it fails, and creates an empty file output.jpg

With this new version, it creates the file output.jpg as expected.

Once you have the file output created, you can try to call dot manually on it:


```
$ sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/home/mmarco/sagedevel/sage
(sage-sh) mmarco`@`localhost:sage$ dot -Tjpg output -o output.jpg
segmentation fault
```



But with the spkg installed, it just creates the output.jpg file as expected.


---

Comment by ncohen created at 2014-03-14 08:25:37

Your message is badly formatted, it looks like you repeated the same thing three times. Could you clean it please ?


---

Comment by mmarco created at 2014-03-14 09:11:37

Yes, sorry, it is corrected now.


---

Comment by ncohen created at 2014-03-14 09:58:26

Changing status from needs_info to positive_review.


---

Comment by ncohen created at 2014-03-14 09:58:26

Okayyyyyy okay. Well, both work on my computer, but I guess it cannot hurt to update the spkg and it does solve your problem. Good ! `:-)`

Nathann


---

Comment by vbraun created at 2014-03-14 15:13:42

Harald, can you add this to the experimental spkgs?


---

Comment by schilly created at 2014-03-17 15:02:32

ok, done.

... and PS: and for the future, could we avoid sharing spkg files via such web based tools? it's kind of tedious to move them to the sever that way :-\


---

Comment by vbraun created at 2014-03-21 18:58:23

Resolution: fixed


---

Comment by mmezzarobba created at 2014-03-22 06:50:16

I don't remember changing the description of this ticket, though apparently I did. But I'm quite certain I didn't prepare the updated spkg!
