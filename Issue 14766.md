# Issue 14766: calling factorials of RIF

archive/issues_014766.json:
```json
{
    "body": "Keywords: factorial RIF RealIntervalField calling inconsistent beginner\n\nOne can calculate factorials of RIF-Elements with\n\n```\nsage: factorial(RIF(2.3,5.7))\n1.?e3\n```\n\nbut calling it by\n\n```\nsage: (RIF(2.3,5.7)).factorial()\nTraceback (click to the left of this block for traceback)\n...\nAttributeError: 'sage.rings.real_mpfi.RealIntervalFieldElement' object\nhas no attribute 'factorial'\n```\n\ndoes not work. This is in contrast to `.log()`, `.sqrt()`, etc., where it works.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15003\n\n",
    "created_at": "2013-08-06T07:00:09Z",
    "labels": [
        "numerical",
        "major",
        "bug"
    ],
    "title": "calling factorials of RIF",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14766",
    "user": "dkrenn"
}
```
Keywords: factorial RIF RealIntervalField calling inconsistent beginner

One can calculate factorials of RIF-Elements with

```
sage: factorial(RIF(2.3,5.7))
1.?e3
```

but calling it by

```
sage: (RIF(2.3,5.7)).factorial()
Traceback (click to the left of this block for traceback)
...
AttributeError: 'sage.rings.real_mpfi.RealIntervalFieldElement' object
has no attribute 'factorial'
```

does not work. This is in contrast to `.log()`, `.sqrt()`, etc., where it works.


Issue created by migration from https://trac.sagemath.org/ticket/15003





---

archive/issue_comments_188295.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2013-08-06T07:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188295",
    "user": "dkrenn"
}
```

Changing priority from major to minor.



---

archive/issue_comments_188296.json:
```json
{
    "body": "Okay I get it the implementation fails for  this \n\nsage: factorial(RIF(2.3))\n\n2.683437381955768?\n\nsage: gamma(RIF(2.3))\n\n1.166711905198161?\n\nso if the gamma is incremented that sets the factorial function.\n\nAny comments on this would be helpful.",
    "created_at": "2014-02-13T06:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188296",
    "user": "amitjamadagni"
}
```

Okay I get it the implementation fails for  this 

sage: factorial(RIF(2.3))

2.683437381955768?

sage: gamma(RIF(2.3))

1.166711905198161?

so if the gamma is incremented that sets the factorial function.

Any comments on this would be helpful.



---

archive/issue_comments_188297.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-15T01:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188297",
    "user": "amitjamadagni"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_188298.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-02-15T01:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188298",
    "user": "amitjamadagni"
}
```

New commits:



---

archive/issue_comments_188299.json:
```json
{
    "body": "Looking at your code, I have a question - why don't you simply return the gamma like this? It avoids creating yet another variable.\n\n```\ndef factorial(self):\n    return (self+1).gamma()\n```\n",
    "created_at": "2014-02-18T03:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188299",
    "user": "ppurka"
}
```

Looking at your code, I have a question - why don't you simply return the gamma like this? It avoids creating yet another variable.

```
def factorial(self):
    return (self+1).gamma()
```




---

archive/issue_comments_188300.json:
```json
{
    "body": "Did you mean only this without defining the other function , then would it work on intervals ?? I need to check that out",
    "created_at": "2014-02-18T05:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188300",
    "user": "amitjamadagni"
}
```

Did you mean only this without defining the other function , then would it work on intervals ?? I need to check that out



---

archive/issue_comments_188301.json:
```json
{
    "body": "It does work on intervals.\n\nBy doing what I wrote above, you can avoid doing new memory allocations. The addition operation `self+1` already does a new memory allocation. There is no need to do so yet again with defining `x` and doing `x._new()`.\n\nThis is just my understanding of the code in `RIF`. I have personally never used this field before.",
    "created_at": "2014-02-18T07:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188301",
    "user": "ppurka"
}
```

It does work on intervals.

By doing what I wrote above, you can avoid doing new memory allocations. The addition operation `self+1` already does a new memory allocation. There is no need to do so yet again with defining `x` and doing `x._new()`.

This is just my understanding of the code in `RIF`. I have personally never used this field before.



---

archive/issue_comments_188302.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-18T08:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188302",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_188303.json:
```json
{
    "body": "Yeah I get the explanation. I was just following the other methods defined. Please let me know if any other changes are required. Thanks.",
    "created_at": "2014-02-18T08:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188303",
    "user": "amitjamadagni"
}
```

Yeah I get the explanation. I was just following the other methods defined. Please let me know if any other changes are required. Thanks.



---

archive/issue_comments_188304.json:
```json
{
    "body": "Thanks for the changes! I have some reservations in giving this a positive review in its *current* form. This needs a review by someone who knows why the factorial function is implemented as it is currently -- it is implemented as a class. So, let's hope someone knowledgeable comes along and takes a look at this ticket. :)\n\nI have been looking at the different fields. Except for `ZZ` and `SR`, none of them have `factorial()` method defined. If indeed this method is introduced, it should be introduced in many places where it makes sense (e.g. `CC`, `RR`, `RDF`, `QQ`, etc), if only to redirect to the generic function call `factorial(self)`; like\n\n```\ndef factorial(self):\n    return sage.functions.other.factorial(self)\n```\n\n\nAbout your implementation: there is no need to call `RIF`. The addition already returns an element of RIF. I am saying this just for any future modifications you make to the functions; in some cases (but not this factorial function) it can make improvements :)\n\n```\nsage: a = RIF(2.5, 4.5)\nsage: a+1     \n1.?e1\nsage: %timeit RIF(a+1)\n100000 loops, best of 3: 7.54 us per loop\nsage: %timeit a+1     \n100000 loops, best of 3: 4.75 us per loop\n```\n\nFor the factorial function itself, speed wise there is no difference since the gamma function is much slower than this `RIF` call!\n\n```\nsage: %timeit (a+1).gamma()\n1000 loops, best of 3: 240 us per loop\nsage: %timeit RIF(a+1).gamma()\n1000 loops, best of 3: 243 us per loop\n```\n",
    "created_at": "2014-02-18T15:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188304",
    "user": "ppurka"
}
```

Thanks for the changes! I have some reservations in giving this a positive review in its *current* form. This needs a review by someone who knows why the factorial function is implemented as it is currently -- it is implemented as a class. So, let's hope someone knowledgeable comes along and takes a look at this ticket. :)

I have been looking at the different fields. Except for `ZZ` and `SR`, none of them have `factorial()` method defined. If indeed this method is introduced, it should be introduced in many places where it makes sense (e.g. `CC`, `RR`, `RDF`, `QQ`, etc), if only to redirect to the generic function call `factorial(self)`; like

```
def factorial(self):
    return sage.functions.other.factorial(self)
```


About your implementation: there is no need to call `RIF`. The addition already returns an element of RIF. I am saying this just for any future modifications you make to the functions; in some cases (but not this factorial function) it can make improvements :)

```
sage: a = RIF(2.5, 4.5)
sage: a+1     
1.?e1
sage: %timeit RIF(a+1)
100000 loops, best of 3: 7.54 us per loop
sage: %timeit a+1     
100000 loops, best of 3: 4.75 us per loop
```

For the factorial function itself, speed wise there is no difference since the gamma function is much slower than this `RIF` call!

```
sage: %timeit (a+1).gamma()
1000 loops, best of 3: 240 us per loop
sage: %timeit RIF(a+1).gamma()
1000 loops, best of 3: 243 us per loop
```




---

archive/issue_comments_188305.json:
```json
{
    "body": "Replying to [comment:11 ppurka]:\n> I have been looking at the different fields. Except for `ZZ` and `SR`, none of them have `factorial()` method defined. \n> If indeed this method is introduced, it should be introduced in many places where it makes sense (e.g. `CC`, `RR`, `RDF`, `QQ`, etc), if only to redirect to the generic function call `factorial(self)`; like\n> {{{\n> def factorial(self):\n>     return sage.functions.other.factorial(self)\n> }}}\n\nHmm...IMHO this is not ideal. It should be the other way around, i.e., the general `factorial`-function should check if the element has `.factorial` and executes it. Only if not, it comes up with solution on its own. (I have not checked the current implementations; its just came in my mind by thinking about it).",
    "created_at": "2014-02-18T16:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188305",
    "user": "dkrenn"
}
```

Replying to [comment:11 ppurka]:
> I have been looking at the different fields. Except for `ZZ` and `SR`, none of them have `factorial()` method defined. 
> If indeed this method is introduced, it should be introduced in many places where it makes sense (e.g. `CC`, `RR`, `RDF`, `QQ`, etc), if only to redirect to the generic function call `factorial(self)`; like
> {{{
> def factorial(self):
>     return sage.functions.other.factorial(self)
> }}}

Hmm...IMHO this is not ideal. It should be the other way around, i.e., the general `factorial`-function should check if the element has `.factorial` and executes it. Only if not, it comes up with solution on its own. (I have not checked the current implementations; its just came in my mind by thinking about it).



---

archive/issue_comments_188306.json:
```json
{
    "body": "Replying to [comment:12 dkrenn]:\n> Hmm...IMHO this is not ideal. It should be the other way around, i.e., the general `factorial`-function should check if the element has `.factorial` and executes it. Only if not, it comes up with solution on its own. (I have not checked the current implementations; its just came in my mind by thinking about it).\n\nI was thinking about that too, but it seems that the generic factorial function is in cython -- the one in `sage/functions/other.py` is just a shell function/class to use `ZZ.factorial()` if it is an integer.",
    "created_at": "2014-02-18T16:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188306",
    "user": "ppurka"
}
```

Replying to [comment:12 dkrenn]:
> Hmm...IMHO this is not ideal. It should be the other way around, i.e., the general `factorial`-function should check if the element has `.factorial` and executes it. Only if not, it comes up with solution on its own. (I have not checked the current implementations; its just came in my mind by thinking about it).

I was thinking about that too, but it seems that the generic factorial function is in cython -- the one in `sage/functions/other.py` is just a shell function/class to use `ZZ.factorial()` if it is an integer.



---

archive/issue_comments_188307.json:
```json
{
    "body": "This being my first patch I still do not have the in depth knowledge of placing of various methods and classes. I am still not getting the part that is being discussed , is it that the main factorial function should check for whether the element has .factorial and do the necessary and if not available it is left to its own. I may be completely wrong but if they could be some comments on my understanding it would be of great help. Thanks.",
    "created_at": "2014-02-18T17:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188307",
    "user": "amitjamadagni"
}
```

This being my first patch I still do not have the in depth knowledge of placing of various methods and classes. I am still not getting the part that is being discussed , is it that the main factorial function should check for whether the element has .factorial and do the necessary and if not available it is left to its own. I may be completely wrong but if they could be some comments on my understanding it would be of great help. Thanks.



---

archive/issue_comments_188308.json:
```json
{
    "body": "Replying to [comment:14 amitjamadagni]:\n> This being my first patch I still do not have the in depth knowledge of placing of various methods and classes. I am still not getting the part that is being discussed , is it that the main factorial function should check for whether the element has .factorial and do the necessary and if not available it is left to its own. I may be completely wrong but if they could be some comments on my understanding it would be of great help. Thanks.\nWhat dkrenn mentioned is to add the following to the `factorial()` call in `sage/functions/other.py`\n\n```\ntry:\n    number.factorial()\nexcept AttributeError:\n    <do the rest>\n```\n\ninstead of what I wrote in comment:11. But don't try to modify the main factorial function right now. It is unclear to me at least what is the right thing to do here.",
    "created_at": "2014-02-19T00:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188308",
    "user": "ppurka"
}
```

Replying to [comment:14 amitjamadagni]:
> This being my first patch I still do not have the in depth knowledge of placing of various methods and classes. I am still not getting the part that is being discussed , is it that the main factorial function should check for whether the element has .factorial and do the necessary and if not available it is left to its own. I may be completely wrong but if they could be some comments on my understanding it would be of great help. Thanks.
What dkrenn mentioned is to add the following to the `factorial()` call in `sage/functions/other.py`

```
try:
    number.factorial()
except AttributeError:
    <do the rest>
```

instead of what I wrote in comment:11. But don't try to modify the main factorial function right now. It is unclear to me at least what is the right thing to do here.



---

archive/issue_comments_188309.json:
```json
{
    "body": "Replying to [comment:15 ppurka]:\n> But don't try to modify the main factorial function right now. It is unclear to me at least what is the right thing to do here.\n\nWell, as that's still unclear it would not hurt to implement at least the `RIF` member function. I rebased the branch on 6.2.beta7.\n\nPlease open a ticket for the refactoring of `functions/other.py:factorial()` if you think it necessary.\n----\nNew commits:",
    "created_at": "2014-04-14T07:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188309",
    "user": "rws"
}
```

Replying to [comment:15 ppurka]:
> But don't try to modify the main factorial function right now. It is unclear to me at least what is the right thing to do here.

Well, as that's still unclear it would not hurt to implement at least the `RIF` member function. I rebased the branch on 6.2.beta7.

Please open a ticket for the refactoring of `functions/other.py:factorial()` if you think it necessary.
----
New commits:



---

archive/issue_comments_188310.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-14T07:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188310",
    "user": "rws"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188311.json:
```json
{
    "body": "Is amitjamadagni really your full name?",
    "created_at": "2014-04-14T19:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188311",
    "user": "vbraun"
}
```

Is amitjamadagni really your full name?



---

archive/issue_comments_188312.json:
```json
{
    "body": "`@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`. I was waiting for a reply from `@`dkrenn or someone familiar with the implementation of factorial before proceeding to give this a positive review. It will be helpful if you open such tickets as necessary before giving a positive review - otherwise it will remain lost in the discussion.\n\n`@`vbraun: I think the the full name should be \"Amit Jamadagni\", but I will let the author clarify.\n\n`@`amitjamadagni: Please add your name alphabetically to the page http://trac.sagemath.org That way we will not have to guess your full name in future tickets. It will also help if in the future you have your full name in the `Author` field of git commits.",
    "created_at": "2014-04-15T07:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188312",
    "user": "ppurka"
}
```

`@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`. I was waiting for a reply from `@`dkrenn or someone familiar with the implementation of factorial before proceeding to give this a positive review. It will be helpful if you open such tickets as necessary before giving a positive review - otherwise it will remain lost in the discussion.

`@`vbraun: I think the the full name should be "Amit Jamadagni", but I will let the author clarify.

`@`amitjamadagni: Please add your name alphabetically to the page http://trac.sagemath.org That way we will not have to guess your full name in future tickets. It will also help if in the future you have your full name in the `Author` field of git commits.



---

archive/issue_comments_188313.json:
```json
{
    "body": "Replying to [comment:19 ppurka]:\n> `@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`.\nBut that is an enhancement while this is a defect. And this is not only independent from that but the refactoring will also benefit from this ticket being separate and not waited on until eternity. \n\nPlease see #16166.",
    "created_at": "2014-04-15T08:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188313",
    "user": "rws"
}
```

Replying to [comment:19 ppurka]:
> `@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`.
But that is an enhancement while this is a defect. And this is not only independent from that but the refactoring will also benefit from this ticket being separate and not waited on until eternity. 

Please see #16166.



---

archive/issue_comments_188314.json:
```json
{
    "body": "Replying to [comment:20 rws]:\n> But that is an enhancement while this is a defect. And this is not only independent from that but the refactoring will also benefit from this ticket being separate and not waited on until eternity. \n> \n> Please see #16166.\n\nThanks for opening the new ticket. This ticket is also an enhancement to `RIF`. And the implementation here is not complete because the same change should happen to, for example, `CIF`. Even after the current ticket, we still have inconsistent behavior depending on whether the element is in `RIF` or `RR` or `ZZ`, etc.\n\nFor example, suppose you run a long program or sequence of functions where the output happens to become an element of `QQ`:\n\n```\nsage: a = QQ(2)  # suppose \"a\" is got as an output of a function\nsage: a.factorial()\n...\nAttributeError: 'sage.rings.rational.Rational' object has no attribute 'factorial'\n\nsage: a = ZZ(2)  # for another input to the function, output is an element of ZZ\nsage: a.factorial()\n2\n```\n\nFrom the end user point of view, the behavior is very inconsistent and depends on whether after all the computations you get back an element from `QQ` or `ZZ`. This needs to be fixed more generally, and this is why I said I wasn't ready to give it positive review in comment:11\n\nMy question was: should we fix all these different fields just by patching them one by one, OR is there a general way to fix all the fields at one go?",
    "created_at": "2014-04-15T08:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188314",
    "user": "ppurka"
}
```

Replying to [comment:20 rws]:
> But that is an enhancement while this is a defect. And this is not only independent from that but the refactoring will also benefit from this ticket being separate and not waited on until eternity. 
> 
> Please see #16166.

Thanks for opening the new ticket. This ticket is also an enhancement to `RIF`. And the implementation here is not complete because the same change should happen to, for example, `CIF`. Even after the current ticket, we still have inconsistent behavior depending on whether the element is in `RIF` or `RR` or `ZZ`, etc.

For example, suppose you run a long program or sequence of functions where the output happens to become an element of `QQ`:

```
sage: a = QQ(2)  # suppose "a" is got as an output of a function
sage: a.factorial()
...
AttributeError: 'sage.rings.rational.Rational' object has no attribute 'factorial'

sage: a = ZZ(2)  # for another input to the function, output is an element of ZZ
sage: a.factorial()
2
```

From the end user point of view, the behavior is very inconsistent and depends on whether after all the computations you get back an element from `QQ` or `ZZ`. This needs to be fixed more generally, and this is why I said I wasn't ready to give it positive review in comment:11

My question was: should we fix all these different fields just by patching them one by one, OR is there a general way to fix all the fields at one go?



---

archive/issue_comments_188315.json:
```json
{
    "body": "Replying to [comment:21 ppurka]:\n> From the end user point of view, the behavior is very inconsistent and depends on whether after all the computations you get back an element from `QQ` or `ZZ`. This needs to be fixed more generally, and this is why I said I wasn't ready to give it positive review in comment:11\nWell it's not the scope of this ticket, and warrants yet another ticket which I will happily open in your name.\n> My question was: should we fix all these different fields just by patching them one by one, OR is there a general way to fix all the fields at one go?\nThe author has resolved one of these and this deserves a positive review. It shows that there was a need for it in RIF. We don't know about the others. Many thanks for bringing up the big picture.\n\nLet me finally remind you of this note in the development manuals:\n\n\u201cThe perfect is the enemy of the good\u201d\n\nThe point of the review is to ensure that the Sage code guidelines are followed and that the the implementation is mathematically correct. Please refrain from aditional feature requests or open-ended discussion about alternative implementations. If you want the patch written differently, your suggestion should be a clear and actionable request.",
    "created_at": "2014-04-15T08:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188315",
    "user": "rws"
}
```

Replying to [comment:21 ppurka]:
> From the end user point of view, the behavior is very inconsistent and depends on whether after all the computations you get back an element from `QQ` or `ZZ`. This needs to be fixed more generally, and this is why I said I wasn't ready to give it positive review in comment:11
Well it's not the scope of this ticket, and warrants yet another ticket which I will happily open in your name.
> My question was: should we fix all these different fields just by patching them one by one, OR is there a general way to fix all the fields at one go?
The author has resolved one of these and this deserves a positive review. It shows that there was a need for it in RIF. We don't know about the others. Many thanks for bringing up the big picture.

Let me finally remind you of this note in the development manuals:

“The perfect is the enemy of the good”

The point of the review is to ensure that the Sage code guidelines are followed and that the the implementation is mathematically correct. Please refrain from aditional feature requests or open-ended discussion about alternative implementations. If you want the patch written differently, your suggestion should be a clear and actionable request.



---

archive/issue_comments_188316.json:
```json
{
    "body": "Replying to [comment:22 rws]:\n> \u201cThe perfect is the enemy of the good\u201d\n> Please refrain from aditional feature requests or open-ended discussion about alternative implementations.\n\nThe whole point of my argument was to highlight that we should not introduce more inconsistency, if possible. I agree that the ticket fixes this for `RIF`; primarily because the author happened to use it and discovered one place where it is inconsistent with the behavior of other functions.\n\nI have taught a course with Sage, and I have seen students struggle with the way things are implemented. The pain points were not whether something is slow or incorrect - it was mostly about the fact that the behavior varied wildly depending on what field the students were working on. Now, try to explain to non-computer science students why things work different in reals, integers, and rationals, what is the difference between a symbolic expression and a symbolic function, etc.\n\nAs developers, we have got used to the way certain things work, and we tend to automatically write code that behaves properly. If you really want to find more such inconsistencies, then ask a person who is unfamiliar with Sage and observe what they write, and how they expect some newly written code to behave.\n\n> If you want the patch written differently, your suggestion should be a clear and actionable request.\n\nI was quite clear in stating that I sought the opinion of someone knowledgeable about the `factorial` implementation. I didn't implement that function and I do not know why it is implemented the way it is.",
    "created_at": "2014-04-15T10:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188316",
    "user": "ppurka"
}
```

Replying to [comment:22 rws]:
> “The perfect is the enemy of the good”
> Please refrain from aditional feature requests or open-ended discussion about alternative implementations.

The whole point of my argument was to highlight that we should not introduce more inconsistency, if possible. I agree that the ticket fixes this for `RIF`; primarily because the author happened to use it and discovered one place where it is inconsistent with the behavior of other functions.

I have taught a course with Sage, and I have seen students struggle with the way things are implemented. The pain points were not whether something is slow or incorrect - it was mostly about the fact that the behavior varied wildly depending on what field the students were working on. Now, try to explain to non-computer science students why things work different in reals, integers, and rationals, what is the difference between a symbolic expression and a symbolic function, etc.

As developers, we have got used to the way certain things work, and we tend to automatically write code that behaves properly. If you really want to find more such inconsistencies, then ask a person who is unfamiliar with Sage and observe what they write, and how they expect some newly written code to behave.

> If you want the patch written differently, your suggestion should be a clear and actionable request.

I was quite clear in stating that I sought the opinion of someone knowledgeable about the `factorial` implementation. I didn't implement that function and I do not know why it is implemented the way it is.



---

archive/issue_comments_188317.json:
```json
{
    "body": "This patch is bad. Why the extra call to the `RIF` constructor? Simply `(self+1).gamma()` should work.\n\n\n```\nsage: x = RealIntervalField(100)(100).factorial()\nsage: parent(x)\nReal Interval Field with 53 bits of precision\n```\n",
    "created_at": "2014-04-15T11:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188317",
    "user": "jdemeyer"
}
```

This patch is bad. Why the extra call to the `RIF` constructor? Simply `(self+1).gamma()` should work.


```
sage: x = RealIntervalField(100)(100).factorial()
sage: parent(x)
Real Interval Field with 53 bits of precision
```




---

archive/issue_comments_188318.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-04-15T11:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188318",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_188319.json:
```json
{
    "body": "Replying to [comment:24 jdemeyer]:\n> This patch is bad. Why the extra call to the `RIF` constructor? Simply `(self+1).gamma()` should work.\n\nThat was already mentioned in the comment 11. The benchmarks were worked out. I will submit a patch with the edit. Thanks \n> \n> {{{\n> sage: x = RealIntervalField(100)(100).factorial()\n> sage: parent(x)\n> Real Interval Field with 53 bits of precision\n> }}}",
    "created_at": "2014-04-15T11:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188319",
    "user": "amitjamadagni"
}
```

Replying to [comment:24 jdemeyer]:
> This patch is bad. Why the extra call to the `RIF` constructor? Simply `(self+1).gamma()` should work.

That was already mentioned in the comment 11. The benchmarks were worked out. I will submit a patch with the edit. Thanks 
> 
> {{{
> sage: x = RealIntervalField(100)(100).factorial()
> sage: parent(x)
> Real Interval Field with 53 bits of precision
> }}}



---

archive/issue_comments_188320.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-15T12:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188320",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_188321.json:
```json
{
    "body": "Replying to [comment:25 amitjamadagni]:\n> That was already mentioned in the comment 11.\nIt's not just about speed, but also about different parents, as my example shows.",
    "created_at": "2014-04-15T12:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188321",
    "user": "jdemeyer"
}
```

Replying to [comment:25 amitjamadagni]:
> That was already mentioned in the comment 11.
It's not just about speed, but also about different parents, as my example shows.



---

archive/issue_comments_188322.json:
```json
{
    "body": "Anyway, this patch should fix it.",
    "created_at": "2014-04-15T12:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188322",
    "user": "jdemeyer"
}
```

Anyway, this patch should fix it.



---

archive/issue_comments_188323.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T12:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188323",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_188324.json:
```json
{
    "body": "That was my first attempt at fixing a bug for Sage. Thanks for all the comments, help and reviews. I hope I can contribute more to the project.",
    "created_at": "2014-04-15T12:21:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188324",
    "user": "amitjamadagni"
}
```

That was my first attempt at fixing a bug for Sage. Thanks for all the comments, help and reviews. I hope I can contribute more to the project.



---

archive/issue_comments_188325.json:
```json
{
    "body": "Replying to [comment:19 ppurka]:\n> `@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`. I was waiting for a reply from `@`dkrenn or someone familiar with the implementation of factorial before proceeding to give this a positive review. It will be helpful if you open such tickets as necessary before giving a positive review - otherwise it will remain lost in the discussion.\n> \n> `@`vbraun: I think the the full name should be \"Amit Jamadagni\", but I will let the author clarify.\n> \n> `@`amitjamadagni: Please add your name alphabetically to the page http://trac.sagemath.org That way we will not have to guess your full name in future tickets. It will also help if in the future you have your full name in the `Author` field of git commits.\n\n`@`ppurka\nI guess as jdemeyer has sent in the patch I am refraining myself from adding to the author list, as I did not solve it in a better way.",
    "created_at": "2014-04-15T13:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188325",
    "user": "amitjamadagni"
}
```

Replying to [comment:19 ppurka]:
> `@`rws: I think it is necessary to make the general change to `sage.functions.other.factorial`. I was waiting for a reply from `@`dkrenn or someone familiar with the implementation of factorial before proceeding to give this a positive review. It will be helpful if you open such tickets as necessary before giving a positive review - otherwise it will remain lost in the discussion.
> 
> `@`vbraun: I think the the full name should be "Amit Jamadagni", but I will let the author clarify.
> 
> `@`amitjamadagni: Please add your name alphabetically to the page http://trac.sagemath.org That way we will not have to guess your full name in future tickets. It will also help if in the future you have your full name in the `Author` field of git commits.

`@`ppurka
I guess as jdemeyer has sent in the patch I am refraining myself from adding to the author list, as I did not solve it in a better way.



---

archive/issue_comments_188326.json:
```json
{
    "body": "Replying to [comment:32 amitjamadagni]:\n> `@`ppurka\n> I guess as jdemeyer has sent in the patch I am refraining myself from adding to the author list, as I did not solve it in a better way.\nNo problem. Add yourself in. Just put in your real name and not your login.\n\nEdit: By \"Add yourself in\" I mean, to make the \"Author\" field look like \"<your name>, Jeroen Demeyer\".",
    "created_at": "2014-04-15T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188326",
    "user": "ppurka"
}
```

Replying to [comment:32 amitjamadagni]:
> `@`ppurka
> I guess as jdemeyer has sent in the patch I am refraining myself from adding to the author list, as I did not solve it in a better way.
No problem. Add yourself in. Just put in your real name and not your login.

Edit: By "Add yourself in" I mean, to make the "Author" field look like "<your name>, Jeroen Demeyer".



---

archive/issue_comments_188327.json:
```json
{
    "body": "Can anybody review my patch please?",
    "created_at": "2014-04-16T06:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188327",
    "user": "jdemeyer"
}
```

Can anybody review my patch please?



---

archive/issue_comments_188328.json:
```json
{
    "body": "Replying to [comment:35 jdemeyer]:\n> Can anybody review my patch please?\nLooks good to me. The other concerns can be addressed in #16166 that `@`rws created.",
    "created_at": "2014-04-16T08:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188328",
    "user": "ppurka"
}
```

Replying to [comment:35 jdemeyer]:
> Can anybody review my patch please?
Looks good to me. The other concerns can be addressed in #16166 that `@`rws created.



---

archive/issue_comments_188329.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-16T08:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188329",
    "user": "ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188330.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-20T23:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14766",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14766#issuecomment-188330",
    "user": "vbraun"
}
```

Resolution: fixed
