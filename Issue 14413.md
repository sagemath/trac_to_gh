# Issue 14413: Update scipy to 0.12

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2013-05-20 11:50:42

Assignee: jdemeyer

Keywords: scipy spkg

Scipy 0.12 has been released:
* http://sourceforge.net/projects/scipy/files/scipy/0.12.0/

This should hopefully fix a problem with updated ATLAS at #10508 as well.


---

Comment by jpflori created at 2013-05-20 11:56:02

This won't fix the problem with updated ATLAS as ARPACK-NG is not in 0.12 unfortunately, but in the git repo only:
https://github.com/scipy/scipy/pull/386


---

Comment by jpflori created at 2013-05-20 11:57:16

My, bad, it is.
I read the wrong README in the tarball and got a wrong feeling.


---

Comment by vbraun created at 2013-05-20 13:04:17

Added a trial spkg


---

Comment by jpflori created at 2013-05-20 13:07:07

There is one here as well:
* http://boxen.math.washington.edu/home/jpflori/spkg/scipy-0.12.0.p0.spkg

Testing it right now :)


---

Comment by vbraun created at 2013-05-20 13:18:17

The way I read it, scipy's arpack has been renamed to arpack-ng. Nothing has been replaced, but there are a bunch of bugfixes to arpack in the new release.


---

Comment by jpflori created at 2013-05-20 13:29:26

Hum, anyway arpack-ng is just a fork of arpack, so would basically fit with "rename and fix bugs" because upstream was not active anymore.
See:
* http://www.scilab.org/projects/thirdparty_project/arpackng


---

Comment by jpflori created at 2013-05-20 13:39:23

And my scipy spkg failed on top of 5.10.beta3 plus #10508.


---

Comment by jpflori created at 2013-05-20 13:51:39

I've reposted an spkg which now compiles (the only patch we used was now upstream).
I've not tested Volker's one, whence the change in the ticket description, but if anyone (including Volker :)) feels it is better, feel free to change it back.


---

Comment by vbraun created at 2013-05-20 13:53:04

I had removed the upsteamed patch, too. Doctests pass for me.


---

Comment by jpflori created at 2013-05-20 13:55:19

Great, so I'll have a look at your spkg and give it positive review when my tests finish.


---

Comment by vbraun created at 2013-05-20 14:09:04

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-05-20 14:09:12

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-05-21 16:09:33

On `hawk`, importing `scipy` fails with

```
sage -t --long devel/sage/sage/plot/plot3d/list_plot3d.py
**********************************************************************
File "devel/sage/sage/plot/plot3d/list_plot3d.py", line 87, in sage.plot.plot3d.list_plot3d.list_plot3d
Failed example:
    list_plot3d(m, texture='yellow', interpolation_type='nn',frame_aspect_ratio=[1,1,1/3])
Exception raised:
    Traceback (most recent call last):
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 466, in _run
        self.execute(example, compiled, test.globs)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 825, in execute
        exec compiled in globs
      File "<doctest sage.plot.plot3d.list_plot3d.list_plot3d[5]>", line 1, in <module>
        list_plot3d(m, texture='yellow', interpolation_type='nn',frame_aspect_ratio=[Integer(1),Integer(1),Integer(1)/Integer(3)])
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/plot/plot3d/list_plot3d.py", line 174, in list_plot3d
        return list_plot3d_tuples(l,interpolation_type,texture,**kwds)
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/sage/plot/plot3d/list_plot3d.py", line 356, in list_plot3d_tuples
        from scipy import interpolate
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/scipy/interpolate/__init__.py", line 160, in <module>
        from .ndgriddata import *
      File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/scipy/interpolate/ndgriddata.py", line 10, in <module>
        from .interpnd import LinearNDInterpolator, NDInterpolatorBase, \
    ImportError: ld.so.1: python2.7: fatal: relocation error: file /export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-5.10.beta5/local/lib/python2.7/site-packages/scipy/interpolate/interpnd.so: symbol __sync_fetch_and_add_4: referenced symbol not found
**********************************************************************
```


This seems to come from GCC, so I'll try again with Sage's GCC (the error above was with GCC-4.4.3)


---

Comment by jpflori created at 2013-05-21 16:29:23

Indeed.
Some pointers:
* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43980
and a bunch of similar ones on other systems alos closed as invalid,
or
* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47460
For GCC 4.4.x you should explicitely pass -march=something-that-works to get that function, whereas for more recent GCCs it seems to be implied automatically from the value of target.


---

Comment by jdemeyer created at 2013-05-26 19:48:56

Resolution: fixed
