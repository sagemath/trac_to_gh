# Issue 18194: Make new-style packages define their type and dependencies

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-05-16 19:30:41

CC:  vbraun

With this branch, it is not necssary anymore to copy/paste a package's name in four different places in order to make it standard.

This is done by adding two files in each folder:
- 'type': can contain either 'base', 'standard', 'optional', or 'experimental'
- 'dependencies': lists the dependencies of a package in "Make" notation.

I regret not having been able to make the 'dependencies' files clearer (they are a copy of the target dependencies form the Makefiles). Making it more human-readable is complicated, as we have to handle the "|" Make character (for order-only-prerequisite). Also, some standard packages depend on targets with are not packages themselves (i.e. prereq).

The commit are split in order to ease the review.

Nathann


---

Comment by ncohen created at 2015-05-16 19:31:43

Changing status from new to needs_review.


---

Comment by git created at 2015-05-16 19:31:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aapitzsch created at 2015-05-17 06:38:22

Changing status from needs_review to needs_work.


---

Comment by aapitzsch created at 2015-05-17 06:38:22

In *build/pkgs/conway_polynomials/dependencies*

```
CONWAY_POLYNOMIALS depends on depends on ...
```



---

Comment by git created at 2015-05-17 06:43:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-05-17 06:43:31

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2015-05-17 10:10:37

Can you replace the tabs by spaces in `build/install`. Apart from that, lgtm.


---

Comment by git created at 2015-05-17 10:14:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2015-05-17 10:17:56

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-05-17 10:18:34

Thanks !

Nathann


---

Comment by vbraun created at 2015-05-18 21:11:51

Resolution: fixed


---

Comment by vbraun created at 2015-05-18 21:41:52

Resolution changed from fixed to 


---

Comment by vbraun created at 2015-05-18 21:41:52

Changing status from closed to new.


---

Comment by vbraun created at 2015-05-18 21:41:52

PATCH is not defined in build/Makefile, so rebuilds from scratch fail


---

Comment by jdemeyer created at 2015-05-18 22:19:50

Last 10 new commits:


---

Comment by jdemeyer created at 2015-05-18 22:19:50

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-05-18 22:20:25

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2015-05-18 22:21:09

I made this ticket the union of #18431 and #18441, both positively reviewed.


---

Comment by vbraun created at 2015-05-18 22:44:02

So what am I supposed to merge? can you fix dependencies and milestones?


---

Comment by ncohen created at 2015-05-19 05:11:30

> I made this ticket the union of #18431 and #18441, both positively reviewed.

Why on earth did you di that? `O_o`

The two were reviewed, the two would have been merged together `O_o`


---

Comment by jdemeyer created at 2015-05-19 06:07:37

Replying to [comment:15 vbraun]:
> So what am I supposed to merge?
The branch on this ticket (which was formerly the branch of #18441 and which includes the commits of #18431).

> can you fix dependencies and milestones?
Well, there is no `sage-6.8` milestone but apart from that, it should be correct as-is.


---

Comment by jdemeyer created at 2015-05-19 06:09:22

Replying to [comment:16 ncohen]:
> > I made this ticket the union of #18431 and #18441, both positively reviewed.
> 
> Why on earth did you di that? `O_o`
Well, I didn't know the release manager's opinion on forcing tickets to be merged together and I didn't want to risk rejection.


---

Comment by vbraun created at 2015-05-19 22:07:35

Resolution: fixed
