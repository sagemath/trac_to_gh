# Issue 16024: Default behaviour of AdditiveAbelianGroup(a_tuple)

archive/issues_016024.json:
```json
{
    "body": "CC:  vbraun jhpalmieri simonking tscrim\n\nThis ticket follows the conversation on \nhttps://groups.google.com/forum/#!topic/sage-support/yexpjig9BSg\n\n\n```\nsage: H = AdditiveAbelianGroup([0,2])\nsage: H((2,0))\n(0, 0)\nsage: H(vector((2,0)))\n(2, 0)\n\nsage: H((1,0)).order()\n2\nsage: H(vector((1,0))).order()\n+Infinity\n```\n\n\nWith this branch there is no need to wrap a tuple into a vector to avoid the \"if isinstance(x,(tuple,list))\" and what should be the default behaviour IS the default behaviour. And it barely breaks doctests once one replaced the old `[G([1,2])` by `G.linear_combination_of_smith_form_gens([1,2])`\n\nIssue created by migration from https://trac.sagemath.org/ticket/16261\n\n",
    "created_at": "2014-04-28T16:06:48Z",
    "labels": [
        "group theory",
        "major",
        "enhancement"
    ],
    "title": "Default behaviour of AdditiveAbelianGroup(a_tuple)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16024",
    "user": "ncohen"
}
```
CC:  vbraun jhpalmieri simonking tscrim

This ticket follows the conversation on 
https://groups.google.com/forum/#!topic/sage-support/yexpjig9BSg


```
sage: H = AdditiveAbelianGroup([0,2])
sage: H((2,0))
(0, 0)
sage: H(vector((2,0)))
(2, 0)

sage: H((1,0)).order()
2
sage: H(vector((1,0))).order()
+Infinity
```


With this branch there is no need to wrap a tuple into a vector to avoid the "if isinstance(x,(tuple,list))" and what should be the default behaviour IS the default behaviour. And it barely breaks doctests once one replaced the old `[G([1,2])` by `G.linear_combination_of_smith_form_gens([1,2])`

Issue created by migration from https://trac.sagemath.org/ticket/16261





---

archive/issue_comments_208271.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-04-28T16:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208271",
    "user": "ncohen"
}
```

New commits:



---

archive/issue_comments_208272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-28T16:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208272",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208273.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-28T16:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208273",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208274.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-28T16:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208274",
    "user": "vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_208275.json:
```json
{
    "body": "You didn't implement `linear_combination_of_gens`, leaving no way to do that without tripping the warning. Also, you should obviously run the whole testsuite.",
    "created_at": "2014-04-28T16:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208275",
    "user": "vbraun"
}
```

You didn't implement `linear_combination_of_gens`, leaving no way to do that without tripping the warning. Also, you should obviously run the whole testsuite.



---

archive/issue_comments_208276.json:
```json
{
    "body": "I do not think it is bad to always generate this warning, and I find `linear_combination_of_gens` far too extreme. I am pretty sure that nobody who really uses this only had inputs in smith form, or he would have given  up already. \n\nI am running all the tests right now (it found something in ellipti curves already) but it takes times.. And well, we used to have patchbots for this `:-P`\n\nNathann",
    "created_at": "2014-04-28T16:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208276",
    "user": "ncohen"
}
```

I do not think it is bad to always generate this warning, and I find `linear_combination_of_gens` far too extreme. I am pretty sure that nobody who really uses this only had inputs in smith form, or he would have given  up already. 

I am running all the tests right now (it found something in ellipti curves already) but it takes times.. And well, we used to have patchbots for this `:-P`

Nathann



---

archive/issue_comments_208277.json:
```json
{
    "body": "by the way : anybody who used the syntax on purpose will move to `.linear_sum_of_smith_generators`, and those who wanted the normal sum wrapped everything with \"vectors\" and will not even see the warning `:-P`",
    "created_at": "2014-04-28T16:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208277",
    "user": "ncohen"
}
```

by the way : anybody who used the syntax on purpose will move to `.linear_sum_of_smith_generators`, and those who wanted the normal sum wrapped everything with "vectors" and will not even see the warning `:-P`



---

archive/issue_comments_208278.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-28T18:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208278",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208279.json:
```json
{
    "body": "Now passes all tests except one, see discussion on the sage-support thread.\n\nNathann",
    "created_at": "2014-04-28T18:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208279",
    "user": "ncohen"
}
```

Now passes all tests except one, see discussion on the sage-support thread.

Nathann



---

archive/issue_comments_208280.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-28T18:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208280",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208281.json:
```json
{
    "body": "(all doctests pass !)",
    "created_at": "2014-04-28T18:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208281",
    "user": "ncohen"
}
```

(all doctests pass !)



---

archive/issue_comments_208282.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-28T18:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208282",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_208283.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-28T18:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208283",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_208284.json:
```json
{
    "body": "The problem is not quite introduced by this change, but this change does make the problem a little more visible: Why are you singling out `Z/2Z x Z/3Z` as a group that can be explicitly represented and not\n`Z^2/ span( [1,1],[-1,5])`, with generators the classes of the standard basis?",
    "created_at": "2014-04-28T19:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208284",
    "user": "nbruin"
}
```

The problem is not quite introduced by this change, but this change does make the problem a little more visible: Why are you singling out `Z/2Z x Z/3Z` as a group that can be explicitly represented and not
`Z^2/ span( [1,1],[-1,5])`, with generators the classes of the standard basis?



---

archive/issue_comments_208285.json:
```json
{
    "body": "Yooooooooo !\n\n> The problem is not quite introduced by this change, but this change does make the problem a little more visible: Why are you singling out `Z/2Z x Z/3Z` as a group that can be explicitly represented and not\n> `Z^2/ span( [1,1],[-1,5])`, with generators the classes of the standard basis?\n\nDo I misunderstand your question or are you saying that you would like to use any base you like instead of (1,0),(0,1), or the smith form ?\n\nI just need this new form for a couple of things I am implementing... But I am afraid of having to touch these files myself, because I have a good idea of what I forgot about groups since I began a PhD in graph theory... and it scares me `:-D`\n\nNathann",
    "created_at": "2014-04-28T19:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208285",
    "user": "ncohen"
}
```

Yooooooooo !

> The problem is not quite introduced by this change, but this change does make the problem a little more visible: Why are you singling out `Z/2Z x Z/3Z` as a group that can be explicitly represented and not
> `Z^2/ span( [1,1],[-1,5])`, with generators the classes of the standard basis?

Do I misunderstand your question or are you saying that you would like to use any base you like instead of (1,0),(0,1), or the smith form ?

I just need this new form for a couple of things I am implementing... But I am afraid of having to touch these files myself, because I have a good idea of what I forgot about groups since I began a PhD in graph theory... and it scares me `:-D`

Nathann



---

archive/issue_comments_208286.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> Do I misunderstand your question or are you saying that you would like to use any base you like instead of (1,0),(0,1), or the smith form ?\n\nBasically, yes. The problem is that presently, AdditiveAbelianGroup is a little too lax in what it accepts as \"invariants\". In the classification of (finite) abelian groups, the \"invariants\" `[a1,a2,...,ar]` are subject to the additional condition that `ai` divides `a(i+1)`. Otherwise they aren't really invariants.\n\nIf you're going to allow abelian groups to be specified in forms different from smith normal form, I think it's a little strange to just limit to these \"diagonal\" forms. In general, you specify a finitely generated abelian group using generators and relations, i.e., `ZZ^r` modulo some submodule. Since the underlying machinery is that of ZZ-modules anyway, why not do it properly?",
    "created_at": "2014-04-29T00:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208286",
    "user": "nbruin"
}
```

Replying to [comment:14 ncohen]:
> Do I misunderstand your question or are you saying that you would like to use any base you like instead of (1,0),(0,1), or the smith form ?

Basically, yes. The problem is that presently, AdditiveAbelianGroup is a little too lax in what it accepts as "invariants". In the classification of (finite) abelian groups, the "invariants" `[a1,a2,...,ar]` are subject to the additional condition that `ai` divides `a(i+1)`. Otherwise they aren't really invariants.

If you're going to allow abelian groups to be specified in forms different from smith normal form, I think it's a little strange to just limit to these "diagonal" forms. In general, you specify a finitely generated abelian group using generators and relations, i.e., `ZZ^r` modulo some submodule. Since the underlying machinery is that of ZZ-modules anyway, why not do it properly?



---

archive/issue_comments_208287.json:
```json
{
    "body": "Yoooooooooooo !\n\n> If you're going to allow abelian groups to be specified in forms different from smith normal form, I think it's a little strange to just limit to these \"diagonal\" forms. In general, you specify a finitely generated abelian group using generators and relations, i.e., `ZZ^r` modulo some submodule. Since the underlying machinery is that of ZZ-modules anyway, why not do it properly?\n\nAhahaah. Very simple : I have no idea how. I already said that I didn't feel at ease editing group code, so if you want anything more general than what is in the branch, I'm sorry to say that you will have to write the code yourself `:-)`\n\nAnd I agree with you that more bases should be allowed indeed.\n\nOh, and if you have any idea of how to make Sage see `G = GF(8,'x').cartesian_product(GF(5))` as a group, it would be cool by the way.\n\n\n```\nsage: G([1,1])+G([1,1])\nTypeError: unsupported operand type(s) for +: 'CartesianProduct_with_category.element_class' and 'CartesianProduct_with_category.element_class'\n```\n\n\nGod.. These things are SO broken :\n\n```\nsage: list(G)          \nAttributeError: 'CartesianProduct_with_category' object has no attribute 'list'\n```\n\n\nPerhaps this is the problem :\n\n```\nsage: g=GF(8,'x')              \nsage: g.category()             \nCategory of finite fields\nsage: gg=g.cartesian_product(g)\nsage: gg.category()            \nCategory of Cartesian products of monoids\n```\n\n\nThis `gg` should be a product of groups I guess...\n\nNathann",
    "created_at": "2014-04-29T06:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208287",
    "user": "ncohen"
}
```

Yoooooooooooo !

> If you're going to allow abelian groups to be specified in forms different from smith normal form, I think it's a little strange to just limit to these "diagonal" forms. In general, you specify a finitely generated abelian group using generators and relations, i.e., `ZZ^r` modulo some submodule. Since the underlying machinery is that of ZZ-modules anyway, why not do it properly?

Ahahaah. Very simple : I have no idea how. I already said that I didn't feel at ease editing group code, so if you want anything more general than what is in the branch, I'm sorry to say that you will have to write the code yourself `:-)`

And I agree with you that more bases should be allowed indeed.

Oh, and if you have any idea of how to make Sage see `G = GF(8,'x').cartesian_product(GF(5))` as a group, it would be cool by the way.


```
sage: G([1,1])+G([1,1])
TypeError: unsupported operand type(s) for +: 'CartesianProduct_with_category.element_class' and 'CartesianProduct_with_category.element_class'
```


God.. These things are SO broken :

```
sage: list(G)          
AttributeError: 'CartesianProduct_with_category' object has no attribute 'list'
```


Perhaps this is the problem :

```
sage: g=GF(8,'x')              
sage: g.category()             
Category of finite fields
sage: gg=g.cartesian_product(g)
sage: gg.category()            
Category of Cartesian products of monoids
```


This `gg` should be a product of groups I guess...

Nathann



---

archive/issue_comments_208288.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-18T18:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208288",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208289.json:
```json
{
    "body": "Fixed.\n\nNathann",
    "created_at": "2014-05-18T18:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208289",
    "user": "ncohen"
}
```

Fixed.

Nathann



---

archive/issue_comments_208290.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/combinat/designs/database.py  # 4 doctests failed\nsage -t --long src/sage/combinat/designs/orthogonal_arrays.py  # 2 doctests failed\n```\n",
    "created_at": "2014-05-19T06:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208290",
    "user": "rws"
}
```


```
sage -t --long src/sage/combinat/designs/database.py  # 4 doctests failed
sage -t --long src/sage/combinat/designs/orthogonal_arrays.py  # 2 doctests failed
```




---

archive/issue_comments_208291.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-19T06:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208291",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_208292.json:
```json
{
    "body": "Not on my computer.... Can you tell me which doctests fail ?\n\nNathann",
    "created_at": "2014-05-19T07:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208292",
    "user": "ncohen"
}
```

Not on my computer.... Can you tell me which doctests fail ?

Nathann



---

archive/issue_comments_208293.json:
```json
{
    "body": "Attachment\n\nlog of doctest fails",
    "created_at": "2014-05-19T08:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208293",
    "user": "rws"
}
```

Attachment

log of doctest fails



---

archive/issue_comments_208294.json:
```json
{
    "body": "Log is attached. Hope you tested 6.3.beta1.",
    "created_at": "2014-05-19T08:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208294",
    "user": "rws"
}
```

Log is attached. Hope you tested 6.3.beta1.



---

archive/issue_comments_208295.json:
```json
{
    "body": "Sorry, the reason was more stupid than that : I had forgotten to recompile.\n\nBtw, do you plan on reviewing all the tickets you set to `needs_work` ?\n\nNathann",
    "created_at": "2014-05-19T09:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208295",
    "user": "ncohen"
}
```

Sorry, the reason was more stupid than that : I had forgotten to recompile.

Btw, do you plan on reviewing all the tickets you set to `needs_work` ?

Nathann



---

archive/issue_comments_208296.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-19T09:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208296",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_208297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-19T09:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208297",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208298.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> Btw, do you plan on reviewing all the tickets you set to `needs_work` ?\nNo.",
    "created_at": "2014-05-19T09:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208298",
    "user": "rws"
}
```

Replying to [comment:24 ncohen]:
> Btw, do you plan on reviewing all the tickets you set to `needs_work` ?
No.



---

archive/issue_comments_208299.json:
```json
{
    "body": "Yo Travis ! Now it is my turn `:-)`\n\nNathann",
    "created_at": "2014-08-16T13:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208299",
    "user": "ncohen"
}
```

Yo Travis ! Now it is my turn `:-)`

Nathann



---

archive/issue_comments_208300.json:
```json
{
    "body": "Hey Nathann,\n\nI gave the `short_repr` more functional-type and cleaner (IMO) implementation. I've also made some lines shorter and made line breaks at more logical positions.\n\nAs for finding the orders of the original cyclic groups in `short_repr`, I think the current implementation is okay for now. You could make this data into a (cached) method, but IDK if this is worthwhile or useful for anyone. A \"better\" fix would be to pass this data from the factory function to the class, but you should deal with handling old pickles which don't (a priori) contain this part of the class's input.\n\nSo in the end, if you're okay with my changes, then positive review.\n----\nNew commits:",
    "created_at": "2014-08-16T17:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208300",
    "user": "tscrim"
}
```

Hey Nathann,

I gave the `short_repr` more functional-type and cleaner (IMO) implementation. I've also made some lines shorter and made line breaks at more logical positions.

As for finding the orders of the original cyclic groups in `short_repr`, I think the current implementation is okay for now. You could make this data into a (cached) method, but IDK if this is worthwhile or useful for anyone. A "better" fix would be to pass this data from the factory function to the class, but you should deal with handling old pickles which don't (a priori) contain this part of the class's input.

So in the end, if you're okay with my changes, then positive review.
----
New commits:



---

archive/issue_comments_208301.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-16T19:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208301",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_208302.json:
```json
{
    "body": "Looks good ! Thank you for that. It is risky to touch combinat/designs/database.py these days but hopefully this won't conflict with anything as you only modify function at the middle of the code `:-P`\n\nThanks for your help !\n\nNathann",
    "created_at": "2014-08-16T19:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208302",
    "user": "ncohen"
}
```

Looks good ! Thank you for that. It is risky to touch combinat/designs/database.py these days but hopefully this won't conflict with anything as you only modify function at the middle of the code `:-P`

Thanks for your help !

Nathann



---

archive/issue_comments_208303.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-18T14:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208303",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_208304.json:
```json
{
    "body": "A question: with the old behavior, I could do\n\n```\nG = AdditiveAbelianGroup([0,0])\nG(a)\n```\n\nand have it return something sensible (and the *same* thing) whether `a` was a vector, a list, a tuple, or an element of `G`. This now gives a deprecation warning if `a` is a list or tuple. On the other hand\n\n```\nG.linear_combination_of_smith_form_gens(a)\n```\n\ngives an outright error if `a` is an element of `G`. Should I do\n\n```\nG(vector(a))\n```\n\nto recover this behavior?",
    "created_at": "2014-08-27T18:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208304",
    "user": "jhpalmieri"
}
```

A question: with the old behavior, I could do

```
G = AdditiveAbelianGroup([0,0])
G(a)
```

and have it return something sensible (and the *same* thing) whether `a` was a vector, a list, a tuple, or an element of `G`. This now gives a deprecation warning if `a` is a list or tuple. On the other hand

```
G.linear_combination_of_smith_form_gens(a)
```

gives an outright error if `a` is an element of `G`. Should I do

```
G(vector(a))
```

to recover this behavior?



---

archive/issue_comments_208305.json:
```json
{
    "body": "I think you only got the *same* thing by coincidence, the Smith form generators happened to be chosen equal to the given basis. But we didn't make any guarantees that this was so, and for more complicated groups you'd be in for a surprise.",
    "created_at": "2014-08-27T18:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208305",
    "user": "vbraun"
}
```

I think you only got the *same* thing by coincidence, the Smith form generators happened to be chosen equal to the given basis. But we didn't make any guarantees that this was so, and for more complicated groups you'd be in for a surprise.



---

archive/issue_comments_208306.json:
```json
{
    "body": "So if I'm working with free abelian groups, there is no way to guarantee that `G(a)` will return the same thing if `a` is the tuple (1,2), the list [1,2], the vector (1,2), or the group element (1,2)?",
    "created_at": "2014-08-27T18:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208306",
    "user": "jhpalmieri"
}
```

So if I'm working with free abelian groups, there is no way to guarantee that `G(a)` will return the same thing if `a` is the tuple (1,2), the list [1,2], the vector (1,2), or the group element (1,2)?



---

archive/issue_comments_208307.json:
```json
{
    "body": "`G(vector(a))` should work, I think. Do you want linear combinations of Smith form generators or linear combinations of given generators (if the group doesn't happen to be free)?",
    "created_at": "2014-08-27T19:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208307",
    "user": "vbraun"
}
```

`G(vector(a))` should work, I think. Do you want linear combinations of Smith form generators or linear combinations of given generators (if the group doesn't happen to be free)?



---

archive/issue_comments_208308.json:
```json
{
    "body": "For my particular uses, I only want to work with free groups. If I happened to have a non-free group, I think I would want linear combinations of given generators.",
    "created_at": "2014-08-27T19:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208308",
    "user": "jhpalmieri"
}
```

For my particular uses, I only want to work with free groups. If I happened to have a non-free group, I think I would want linear combinations of given generators.



---

archive/issue_comments_208309.json:
```json
{
    "body": "I bumped into this doctesting Judson's Abstract Algebra book.\n\n\n```\nG = AdditiveAbelianGroup([14])\nb = G([2])\n```\n\n\nwas fine for the novices, but `b = G(vector([2]))` looks more complicated than necessary.\n\nAnybody on this ticket have a better idea?  I mean besides me ever getting my act together on #9773.",
    "created_at": "2015-05-20T19:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208309",
    "user": "rbeezer"
}
```

I bumped into this doctesting Judson's Abstract Algebra book.


```
G = AdditiveAbelianGroup([14])
b = G([2])
```


was fine for the novices, but `b = G(vector([2]))` looks more complicated than necessary.

Anybody on this ticket have a better idea?  I mean besides me ever getting my act together on #9773.



---

archive/issue_comments_208310.json:
```json
{
    "body": "> was fine for the novices, but `b = G(vector([2]))` looks more complicated than necessary.\n\nWhat do you mean? `G([2])` works in the latest release, and it will stay this way: we will only remove the *warning* in several months.\n\nThe meaning of the command changed, but the command itsels will remain available.\n\nNathann",
    "created_at": "2015-05-20T20:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208310",
    "user": "ncohen"
}
```

> was fine for the novices, but `b = G(vector([2]))` looks more complicated than necessary.

What do you mean? `G([2])` works in the latest release, and it will stay this way: we will only remove the *warning* in several months.

The meaning of the command changed, but the command itsels will remain available.

Nathann



---

archive/issue_comments_208311.json:
```json
{
    "body": "OK, I understood the warning to mean behavior was changing and students were going to need to do some sort of linear combination drill.  (Yes, I did skim through this ticket.)  And of course the warning gets in the way for doctesting, but I know how to work around that cleanly.\n\nThanks very much for the quick and helpful reply, Nathann.\n\nRob",
    "created_at": "2015-05-20T21:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16024#issuecomment-208311",
    "user": "rbeezer"
}
```

OK, I understood the warning to mean behavior was changing and students were going to need to do some sort of linear combination drill.  (Yes, I did skim through this ticket.)  And of course the warning gets in the way for doctesting, but I know how to work around that cleanly.

Thanks very much for the quick and helpful reply, Nathann.

Rob
