# Issue 21519: Upgrade to PARI 2.8.1

archive/issues_021519.json:
```json
{
    "body": "CC:  pbruin cremona kedlaya jpflori\n\n**Tarball**: http://pari.math.u-bordeaux.fr/pub/pari/unstable/pari-2.8.1.beta.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/21756\n\n",
    "created_at": "2016-10-24T12:03:27Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Upgrade to PARI 2.8.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21519",
    "user": "jdemeyer"
}
```
CC:  pbruin cremona kedlaya jpflori

**Tarball**: http://pari.math.u-bordeaux.fr/pub/pari/unstable/pari-2.8.1.beta.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/21756





---

archive/issue_comments_298655.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-11-03T13:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298655",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_298656.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-03T16:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298656",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298657.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-04T11:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298657",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298658.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-04T11:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298658",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298659.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-04T12:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298659",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298660.json:
```json
{
    "body": "CC'ing random number theory people.\n\nGiven that the sum of the two result is of 3-torsion, the new point is still a generator, so should we really worry?\n`@`Jeroen: do you think the precision change is worrying?",
    "created_at": "2016-11-18T14:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298660",
    "user": "jpflori"
}
```

CC'ing random number theory people.

Given that the sum of the two result is of 3-torsion, the new point is still a generator, so should we really worry?
`@`Jeroen: do you think the precision change is worrying?



---

archive/issue_comments_298661.json:
```json
{
    "body": "Nothing to worry about (in answer to the first question).  The algorithm is computing E(Q)/2E(Q) anyway.",
    "created_at": "2016-11-18T14:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298661",
    "user": "cremona"
}
```

Nothing to worry about (in answer to the first question).  The algorithm is computing E(Q)/2E(Q) anyway.



---

archive/issue_comments_298662.json:
```json
{
    "body": "My worry is that PARI 2.8.0 found a point with the default settings of Simon's 2-descent, while PARI 2.9.0 does not find a point (it only finds a point after increasing some bound).",
    "created_at": "2016-11-18T16:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298662",
    "user": "jdemeyer"
}
```

My worry is that PARI 2.8.0 found a point with the default settings of Simon's 2-descent, while PARI 2.9.0 does not find a point (it only finds a point after increasing some bound).



---

archive/issue_comments_298663.json:
```json
{
    "body": "I am having trouble with the new stackwarn patch and a pristine pari-2.9.0 tarball.\n\n```\npatching file src/gp/gp.c\npatching file src/language/init.c\nHunk #1 succeeded at 740 (offset -34 lines).\nHunk #2 succeeded at 755 (offset -34 lines).\nHunk #3 FAILED at 804.\n1 out of 3 hunks FAILED -- saving rejects to file src/language/init.c.rej\n```\n\nAm I doing something wrong?",
    "created_at": "2016-11-22T08:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298663",
    "user": "fbissey"
}
```

I am having trouble with the new stackwarn patch and a pristine pari-2.9.0 tarball.

```
patching file src/gp/gp.c
patching file src/language/init.c
Hunk #1 succeeded at 740 (offset -34 lines).
Hunk #2 succeeded at 755 (offset -34 lines).
Hunk #3 FAILED at 804.
1 out of 3 hunks FAILED -- saving rejects to file src/language/init.c.rej
```

Am I doing something wrong?



---

archive/issue_comments_298664.json:
```json
{
    "body": "The two patches need to be applied in order.",
    "created_at": "2016-11-22T09:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298664",
    "user": "jdemeyer"
}
```

The two patches need to be applied in order.



---

archive/issue_comments_298665.json:
```json
{
    "body": "I see!",
    "created_at": "2016-11-22T09:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298665",
    "user": "fbissey"
}
```

I see!



---

archive/issue_comments_298666.json:
```json
{
    "body": "Did you ask about the prec issue on pari-devel?",
    "created_at": "2016-11-29T08:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298666",
    "user": "jpflori"
}
```

Did you ask about the prec issue on pari-devel?



---

archive/issue_comments_298667.json:
```json
{
    "body": "Replying to [comment:18 jpflori]:\n> Did you ask about the prec issue on pari-devel?\n\nNo. Do you think that I should? It's not really a PARI issue, but a potential issue with the 2-descent script.",
    "created_at": "2016-11-29T08:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298667",
    "user": "jdemeyer"
}
```

Replying to [comment:18 jpflori]:
> Did you ask about the prec issue on pari-devel?

No. Do you think that I should? It's not really a PARI issue, but a potential issue with the 2-descent script.



---

archive/issue_comments_298668.json:
```json
{
    "body": "Sure, but Karim or someone else there could be more knowledgeable than us.",
    "created_at": "2016-11-29T08:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298668",
    "user": "jpflori"
}
```

Sure, but Karim or someone else there could be more knowledgeable than us.



---

archive/issue_comments_298669.json:
```json
{
    "body": "Allow me to comment, since I know Simon's script quite well (he first wrote it at my suggestion in 1997 when he was Henri Cohen's grad student in Bordeaux and I was visiting).    In the algorithm, various auxiliary curves (\"homogeneous spaces\") are constructed on which one must find rational points (one on each such curve is enough).  The construction of these is dependent on some purely algebraic number field computations, of class groups and units, where the results are representatives of some equivalence classes, or generators of some group, and are not canonical.  As we well know, new versions of pari often result in such representatives and/or generators changing.  For Simon's code this means that the equations of the auxiliary curves  will change but the curves represented by those equations are equivalent (in a technical sense which is all that matters for the algorithm).  Now the new curves / equations will have rational points if and only if the old ones did, but they may be larger and harder to find, so as a side effect of a theoretically unimportant change in number fields code, one has to increase some search (*not* precision) bounds to get equally informative output.",
    "created_at": "2016-11-29T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298669",
    "user": "cremona"
}
```

Allow me to comment, since I know Simon's script quite well (he first wrote it at my suggestion in 1997 when he was Henri Cohen's grad student in Bordeaux and I was visiting).    In the algorithm, various auxiliary curves ("homogeneous spaces") are constructed on which one must find rational points (one on each such curve is enough).  The construction of these is dependent on some purely algebraic number field computations, of class groups and units, where the results are representatives of some equivalence classes, or generators of some group, and are not canonical.  As we well know, new versions of pari often result in such representatives and/or generators changing.  For Simon's code this means that the equations of the auxiliary curves  will change but the curves represented by those equations are equivalent (in a technical sense which is all that matters for the algorithm).  Now the new curves / equations will have rational points if and only if the old ones did, but they may be larger and harder to find, so as a side effect of a theoretically unimportant change in number fields code, one has to increase some search (*not* precision) bounds to get equally informative output.



---

archive/issue_comments_298670.json:
```json
{
    "body": "So, John, can I conclude that you consider the change to be harmless (even though it looks like a regression).",
    "created_at": "2016-11-30T12:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298670",
    "user": "jdemeyer"
}
```

So, John, can I conclude that you consider the change to be harmless (even though it looks like a regression).



---

archive/issue_comments_298671.json:
```json
{
    "body": "Yes, that's right!",
    "created_at": "2016-11-30T12:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298671",
    "user": "cremona"
}
```

Yes, that's right!



---

archive/issue_comments_298672.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-30T12:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298672",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298673.json:
```json
{
    "body": "Then LGTM.",
    "created_at": "2016-11-30T12:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298673",
    "user": "jpflori"
}
```

Then LGTM.



---

archive/issue_comments_298674.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-11-30T23:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298674",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_298675.json:
```json
{
    "body": "I'm getting\n\n```\n3348sage -t --long src/sage/interfaces/gp.py\n3349**********************************************************************\n3350File \"src/sage/interfaces/gp.py\", line 433, in sage.interfaces.gp.Gp._eval_line\n3351Failed example:\n3352    gp._eval_line('a='+str(list(range(2*10^5))))[:70]\n3353Exception raised:\n3354    Traceback (most recent call last):\n3355      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n3356        self.compile_and_execute(example, compiler, test.globs)\n3357      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n3358        exec(compiled, globs)\n3359      File \"<doctest sage.interfaces.gp.Gp._eval_line[1]>\", line 1, in <module>\n3360        gp._eval_line('a='+str(list(range(Integer(2)*Integer(10)**Integer(5)))))[:Integer(70)]\n3361      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py\", line 441, in _eval_line\n3362        wait_for_prompt=wait_for_prompt)\n3363      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 902, in _eval_line\n3364        return self._eval_line_using_file(line)\n3365      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 790, in _eval_line_using_file\n3366        raise RuntimeError('%s terminated unexpectedly while reading in a large line:\\n%s'%(self,msg[0]))\n3367    RuntimeError: PARI/GP interpreter terminated unexpectedly while reading in a large line:\n3368    PARI/GP interpreter terminated unexpectedly while reading in a large line\n3369**********************************************************************\n3370File \"src/sage/interfaces/gp.py\", line 628, in sage.interfaces.gp.Gp._next_var_name\n3371Failed example:\n3372    for n in [1..13000]:  # long time\n3373        a = g(n)          # long time\n3374Exception raised:\n3375    Traceback (most recent call last):\n3376      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n3377        self.compile_and_execute(example, compiler, test.globs)\n3378      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n3379        exec(compiled, globs)\n3380      File \"<doctest sage.interfaces.gp.Gp._next_var_name[5]>\", line 2, in <module>\n3381        a = g(n)          # long time\n3382      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 246, in __call__\n3383        return self._coerce_from_special_method(x)\n3384      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 272, in _coerce_from_special_method\n3385        return (x.__getattribute__(s))(self)\n3386      File \"sage/structure/sage_object.pyx\", line 715, in sage.structure.sage_object.SageObject._gp_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:7387)\n3387        return self._interface_(G)\n3388      File \"sage/structure/sage_object.pyx\", line 680, in sage.structure.sage_object.SageObject._interface_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:6554)\n3389        X = I(s)\n3390      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 244, in __call__\n3391        return cls(self, x, name=name)\n3392      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1380, in __init__\n3393        self._name = parent._create(value, name=name)\n3394      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 434, in _create\n3395        self.set(name, value)\n3396      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py\", line 557, in set\n3397        raise TypeError(\"Error executing code in GP:\\nCODE:\\n\\t%s\\nPARI/GP ERROR:\\n%s\"%(cmd, out))\n3398    TypeError: Error executing code in GP:\n3399    CODE:\n3400    \tsage[12001]=12001;\n3401    PARI/GP ERROR:\n3402      ***   at top-level: sage[12001]=12001\n3403      ***                     ^-------------\n3404      ***   non-existent component: index > 12000\n3405**********************************************************************\n34062 items had failures:\n3407   1 of   3 in sage.interfaces.gp.Gp._eval_line\n3408   1 of   8 in sage.interfaces.gp.Gp._next_var_name\n3409    [155 tests, 2 failures, 10.25 s]\n```\n",
    "created_at": "2016-11-30T23:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298675",
    "user": "vbraun"
}
```

I'm getting

```
3348sage -t --long src/sage/interfaces/gp.py
3349**********************************************************************
3350File "src/sage/interfaces/gp.py", line 433, in sage.interfaces.gp.Gp._eval_line
3351Failed example:
3352    gp._eval_line('a='+str(list(range(2*10^5))))[:70]
3353Exception raised:
3354    Traceback (most recent call last):
3355      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
3356        self.compile_and_execute(example, compiler, test.globs)
3357      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
3358        exec(compiled, globs)
3359      File "<doctest sage.interfaces.gp.Gp._eval_line[1]>", line 1, in <module>
3360        gp._eval_line('a='+str(list(range(Integer(2)*Integer(10)**Integer(5)))))[:Integer(70)]
3361      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py", line 441, in _eval_line
3362        wait_for_prompt=wait_for_prompt)
3363      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 902, in _eval_line
3364        return self._eval_line_using_file(line)
3365      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 790, in _eval_line_using_file
3366        raise RuntimeError('%s terminated unexpectedly while reading in a large line:\n%s'%(self,msg[0]))
3367    RuntimeError: PARI/GP interpreter terminated unexpectedly while reading in a large line:
3368    PARI/GP interpreter terminated unexpectedly while reading in a large line
3369**********************************************************************
3370File "src/sage/interfaces/gp.py", line 628, in sage.interfaces.gp.Gp._next_var_name
3371Failed example:
3372    for n in [1..13000]:  # long time
3373        a = g(n)          # long time
3374Exception raised:
3375    Traceback (most recent call last):
3376      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
3377        self.compile_and_execute(example, compiler, test.globs)
3378      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
3379        exec(compiled, globs)
3380      File "<doctest sage.interfaces.gp.Gp._next_var_name[5]>", line 2, in <module>
3381        a = g(n)          # long time
3382      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 246, in __call__
3383        return self._coerce_from_special_method(x)
3384      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 272, in _coerce_from_special_method
3385        return (x.__getattribute__(s))(self)
3386      File "sage/structure/sage_object.pyx", line 715, in sage.structure.sage_object.SageObject._gp_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:7387)
3387        return self._interface_(G)
3388      File "sage/structure/sage_object.pyx", line 680, in sage.structure.sage_object.SageObject._interface_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:6554)
3389        X = I(s)
3390      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 244, in __call__
3391        return cls(self, x, name=name)
3392      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1380, in __init__
3393        self._name = parent._create(value, name=name)
3394      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 434, in _create
3395        self.set(name, value)
3396      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py", line 557, in set
3397        raise TypeError("Error executing code in GP:\nCODE:\n\t%s\nPARI/GP ERROR:\n%s"%(cmd, out))
3398    TypeError: Error executing code in GP:
3399    CODE:
3400    	sage[12001]=12001;
3401    PARI/GP ERROR:
3402      ***   at top-level: sage[12001]=12001
3403      ***                     ^-------------
3404      ***   non-existent component: index > 12000
3405**********************************************************************
34062 items had failures:
3407   1 of   3 in sage.interfaces.gp.Gp._eval_line
3408   1 of   8 in sage.interfaces.gp.Gp._next_var_name
3409    [155 tests, 2 failures, 10.25 s]
```




---

archive/issue_comments_298676.json:
```json
{
    "body": "Since 2.9.1 was released today surely we might as well get that in rather than working more on 2.9.0?",
    "created_at": "2016-12-01T17:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298676",
    "user": "cremona"
}
```

Since 2.9.1 was released today surely we might as well get that in rather than working more on 2.9.0?



---

archive/issue_comments_298677.json:
```json
{
    "body": "They ignored my two reports to the \"maintainer\" issues list. It is minor but not cool.",
    "created_at": "2016-12-01T20:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298677",
    "user": "fbissey"
}
```

They ignored my two reports to the "maintainer" issues list. It is minor but not cool.



---

archive/issue_comments_298678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-02T15:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298678",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298679.json:
```json
{
    "body": "Replying to [comment:25 vbraun]:\n> I'm getting\n> {{{\n> 3348sage -t --long src/sage/interfaces/gp.py\n> 3349**********************************************************************\n> 3350File \"src/sage/interfaces/gp.py\", line 433, in sage.interfaces.gp.Gp._eval_line\n> 3351Failed example:\n> 3352    gp._eval_line('a='+str(list(range(2*10^5))))[:70]\n> 3353Exception raised:\n> 3354    Traceback (most recent call last):\n> 3355      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n> 3356        self.compile_and_execute(example, compiler, test.globs)\n> 3357      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n> 3358        exec(compiled, globs)\n> 3359      File \"<doctest sage.interfaces.gp.Gp._eval_line[1]>\", line 1, in <module>\n> 3360        gp._eval_line('a='+str(list(range(Integer(2)*Integer(10)**Integer(5)))))[:Integer(70)]\n> 3361      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py\", line 441, in _eval_line\n> 3362        wait_for_prompt=wait_for_prompt)\n> 3363      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 902, in _eval_line\n> 3364        return self._eval_line_using_file(line)\n> 3365      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 790, in _eval_line_using_file\n> 3366        raise RuntimeError('%s terminated unexpectedly while reading in a large line:\\n%s'%(self,msg[0]))\n> 3367    RuntimeError: PARI/GP interpreter terminated unexpectedly while reading in a large line:\n> 3368    PARI/GP interpreter terminated unexpectedly while reading in a large line\n> 3369**********************************************************************\n> 3370File \"src/sage/interfaces/gp.py\", line 628, in sage.interfaces.gp.Gp._next_var_name\n> 3371Failed example:\n> 3372    for n in [1..13000]:  # long time\n> 3373        a = g(n)          # long time\n> 3374Exception raised:\n> 3375    Traceback (most recent call last):\n> 3376      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n> 3377        self.compile_and_execute(example, compiler, test.globs)\n> 3378      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n> 3379        exec(compiled, globs)\n> 3380      File \"<doctest sage.interfaces.gp.Gp._next_var_name[5]>\", line 2, in <module>\n> 3381        a = g(n)          # long time\n> 3382      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 246, in __call__\n> 3383        return self._coerce_from_special_method(x)\n> 3384      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 272, in _coerce_from_special_method\n> 3385        return (x.__getattribute__(s))(self)\n> 3386      File \"sage/structure/sage_object.pyx\", line 715, in sage.structure.sage_object.SageObject._gp_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:7387)\n> 3387        return self._interface_(G)\n> 3388      File \"sage/structure/sage_object.pyx\", line 680, in sage.structure.sage_object.SageObject._interface_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:6554)\n> 3389        X = I(s)\n> 3390      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 244, in __call__\n> 3391        return cls(self, x, name=name)\n> 3392      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1380, in __init__\n> 3393        self._name = parent._create(value, name=name)\n> 3394      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 434, in _create\n> 3395        self.set(name, value)\n> 3396      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py\", line 557, in set\n> 3397        raise TypeError(\"Error executing code in GP:\\nCODE:\\n\\t%s\\nPARI/GP ERROR:\\n%s\"%(cmd, out))\n> 3398    TypeError: Error executing code in GP:\n> 3399    CODE:\n> 3400    \tsage[12001]=12001;\n> 3401    PARI/GP ERROR:\n> 3402      ***   at top-level: sage[12001]=12001\n> 3403      ***                     ^-------------\n> 3404      ***   non-existent component: index > 12000\n> 3405**********************************************************************\n> 34062 items had failures:\n> 3407   1 of   3 in sage.interfaces.gp.Gp._eval_line\n> 3408   1 of   8 in sage.interfaces.gp.Gp._next_var_name\n> 3409    [155 tests, 2 failures, 10.25 s]\n> }}}\n\nConfirmed (with PARI-2.9.1).",
    "created_at": "2017-01-02T15:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298679",
    "user": "jdemeyer"
}
```

Replying to [comment:25 vbraun]:
> I'm getting
> {{{
> 3348sage -t --long src/sage/interfaces/gp.py
> 3349**********************************************************************
> 3350File "src/sage/interfaces/gp.py", line 433, in sage.interfaces.gp.Gp._eval_line
> 3351Failed example:
> 3352    gp._eval_line('a='+str(list(range(2*10^5))))[:70]
> 3353Exception raised:
> 3354    Traceback (most recent call last):
> 3355      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
> 3356        self.compile_and_execute(example, compiler, test.globs)
> 3357      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
> 3358        exec(compiled, globs)
> 3359      File "<doctest sage.interfaces.gp.Gp._eval_line[1]>", line 1, in <module>
> 3360        gp._eval_line('a='+str(list(range(Integer(2)*Integer(10)**Integer(5)))))[:Integer(70)]
> 3361      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py", line 441, in _eval_line
> 3362        wait_for_prompt=wait_for_prompt)
> 3363      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 902, in _eval_line
> 3364        return self._eval_line_using_file(line)
> 3365      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 790, in _eval_line_using_file
> 3366        raise RuntimeError('%s terminated unexpectedly while reading in a large line:\n%s'%(self,msg[0]))
> 3367    RuntimeError: PARI/GP interpreter terminated unexpectedly while reading in a large line:
> 3368    PARI/GP interpreter terminated unexpectedly while reading in a large line
> 3369**********************************************************************
> 3370File "src/sage/interfaces/gp.py", line 628, in sage.interfaces.gp.Gp._next_var_name
> 3371Failed example:
> 3372    for n in [1..13000]:  # long time
> 3373        a = g(n)          # long time
> 3374Exception raised:
> 3375    Traceback (most recent call last):
> 3376      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
> 3377        self.compile_and_execute(example, compiler, test.globs)
> 3378      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
> 3379        exec(compiled, globs)
> 3380      File "<doctest sage.interfaces.gp.Gp._next_var_name[5]>", line 2, in <module>
> 3381        a = g(n)          # long time
> 3382      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 246, in __call__
> 3383        return self._coerce_from_special_method(x)
> 3384      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 272, in _coerce_from_special_method
> 3385        return (x.__getattribute__(s))(self)
> 3386      File "sage/structure/sage_object.pyx", line 715, in sage.structure.sage_object.SageObject._gp_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:7387)
> 3387        return self._interface_(G)
> 3388      File "sage/structure/sage_object.pyx", line 680, in sage.structure.sage_object.SageObject._interface_ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/structure/sage_object.c:6554)
> 3389        X = I(s)
> 3390      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 244, in __call__
> 3391        return cls(self, x, name=name)
> 3392      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1380, in __init__
> 3393        self._name = parent._create(value, name=name)
> 3394      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 434, in _create
> 3395        self.set(name, value)
> 3396      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/gp.py", line 557, in set
> 3397        raise TypeError("Error executing code in GP:\nCODE:\n\t%s\nPARI/GP ERROR:\n%s"%(cmd, out))
> 3398    TypeError: Error executing code in GP:
> 3399    CODE:
> 3400    	sage[12001]=12001;
> 3401    PARI/GP ERROR:
> 3402      ***   at top-level: sage[12001]=12001
> 3403      ***                     ^-------------
> 3404      ***   non-existent component: index > 12000
> 3405**********************************************************************
> 34062 items had failures:
> 3407   1 of   3 in sage.interfaces.gp.Gp._eval_line
> 3408   1 of   8 in sage.interfaces.gp.Gp._next_var_name
> 3409    [155 tests, 2 failures, 10.25 s]
> }}}

Confirmed (with PARI-2.9.1).



---

archive/issue_comments_298680.json:
```json
{
    "body": "Replying to [comment:26 cremona]:\n> Since 2.9.1 was released today surely we might as well get that in rather than working more on 2.9.0?\n\nDone. Since this is a minor change, I don't expect any new doctest failures.",
    "created_at": "2017-01-02T15:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298680",
    "user": "jdemeyer"
}
```

Replying to [comment:26 cremona]:
> Since 2.9.1 was released today surely we might as well get that in rather than working more on 2.9.0?

Done. Since this is a minor change, I don't expect any new doctest failures.



---

archive/issue_comments_298681.json:
```json
{
    "body": "Just ran `make ptestlong` and the only issue is indeed [comment:25].",
    "created_at": "2017-01-02T20:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298681",
    "user": "jdemeyer"
}
```

Just ran `make ptestlong` and the only issue is indeed [comment:25].



---

archive/issue_comments_298682.json:
```json
{
    "body": "[comment:25] is an upstream bug :-(",
    "created_at": "2017-01-03T16:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298682",
    "user": "jdemeyer"
}
```

[comment:25] is an upstream bug :-(



---

archive/issue_comments_298683.json:
```json
{
    "body": "It's not an upstream bug, it's fallout from `prot_none.patch`.",
    "created_at": "2017-01-03T17:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298683",
    "user": "jdemeyer"
}
```

It's not an upstream bug, it's fallout from `prot_none.patch`.



---

archive/issue_comments_298684.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-04T10:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298684",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-04T10:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298686.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-04T10:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298686",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298687.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-05T13:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298687",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298688.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-05T15:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298688",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298689.json:
```json
{
    "body": "This now passes all tests on 32-bit and 64-bit.",
    "created_at": "2017-01-05T15:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298689",
    "user": "jdemeyer"
}
```

This now passes all tests on 32-bit and 64-bit.



---

archive/issue_comments_298690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-01-08T09:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298690",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_298691.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-09T17:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298691",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298692.json:
```json
{
    "body": "Probably unrelated but I had one doctest failure running all tests in parallel\n\n```\nsage -t src/sage/libs/gap/assigned_names.py  # 1 doctest failed\n```\n\nI am not able to reproduce it.",
    "created_at": "2017-01-09T17:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298692",
    "user": "vdelecroix"
}
```

Probably unrelated but I had one doctest failure running all tests in parallel

```
sage -t src/sage/libs/gap/assigned_names.py  # 1 doctest failed
```

I am not able to reproduce it.



---

archive/issue_comments_298693.json:
```json
{
    "body": "Changing keywords from \"\" to \"atelierpari2017\".",
    "created_at": "2017-01-10T09:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298693",
    "user": "vdelecroix"
}
```

Changing keywords from "" to "atelierpari2017".



---

archive/issue_comments_298694.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21519#issuecomment-298694",
    "user": "vbraun"
}
```

Resolution: fixed
