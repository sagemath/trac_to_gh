# Issue 22579: py3 again some care for range

Issue created by migration from https://trac.sagemath.org/ticket/22816

Original creator: chapoton

Original creation time: 2017-04-15 21:26:38

CC:  jdemeyer tscrim

part of #16081


---

Comment by chapoton created at 2017-04-15 21:27:20

New commits:


---

Comment by chapoton created at 2017-04-15 21:27:20

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-04-16 04:51:34

The only change I am not sure about is this one:

```diff
diff --git a/src/sage/matrix/matrix0.pyx b/src/sage/matrix/matrix0.pyx
index c5959f0..50b5d00 100644
--- a/src/sage/matrix/matrix0.pyx
+++ b/src/sage/matrix/matrix0.pyx
@@ -5177,7 +5177,7 @@ cdef class Matrix(sage.structure.element.Matrix):
             if not B[self._nrows-1, self._ncols-1]:
                 raise ZeroDivisionError("input matrix must be nonsingular")
 
-        return B.matrix_from_columns(range(self._ncols, 2*self._ncols))
+        return B.matrix_from_columns(list(xrange(self._ncols, 2 * self._ncols)))
 
     def __pos__(self):
         """
```

I forget if Cython keeps the behavior that `range` will return a list in Python3. If it will, then I'm good with the change, otherwise, then I'd like to know if Cython optimizes this.


---

Comment by tscrim created at 2017-04-17 14:56:49

ping?


---

Comment by chapoton created at 2017-04-17 15:33:28

I have no idea..


---

Comment by chapoton created at 2017-04-17 19:16:55

There are already a few list(xrange(...)) in the very same file..


---

Comment by tscrim created at 2017-04-17 23:41:31

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-04-17 23:41:31

Fair point.


---

Comment by vbraun created at 2017-04-23 12:57:28

Resolution: fixed
