# Issue 32246: Add flit_core, poetry_core packages, remove workarounds for packages that uses them

archive/issues_032246.json:
```json
{
    "body": "\n```\n$ git grep -B 3 'rm.*pyproject'\nbuild/pkgs/entrypoints/spkg-install.in-# Make sure that modern pip uses the generated setup.py\nbuild/pkgs/entrypoints/spkg-install.in-# that is distributed with the PyPI tarball,\nbuild/pkgs/entrypoints/spkg-install.in-# so we do not have to have flit.  Trac #29803.\nbuild/pkgs/entrypoints/spkg-install.in:rm -f pyproject.toml\n--\nbuild/pkgs/pkgconfig/spkg-install.in-# Make sure that modern pip uses the generated setup.py\nbuild/pkgs/pkgconfig/spkg-install.in-# that is distributed with the PyPI tarball,\nbuild/pkgs/pkgconfig/spkg-install.in-# so we do not have to have poetry.  Trac #29803.\nbuild/pkgs/pkgconfig/spkg-install.in:rm -f pyproject.toml\n--\nbuild/pkgs/terminado/spkg-install.in-# Make sure that modern pip uses the generated setup.py\nbuild/pkgs/terminado/spkg-install.in-# that is distributed with the PyPI tarball,\nbuild/pkgs/terminado/spkg-install.in-# so we do not have to have flit.  Trac #29803.\nbuild/pkgs/terminado/spkg-install.in:rm -f pyproject.toml\n--\nbuild/pkgs/testpath/spkg-install.in-# Make sure that modern pip uses the generated setup.py\nbuild/pkgs/testpath/spkg-install.in-# that is distributed with the PyPI tarball,\nbuild/pkgs/testpath/spkg-install.in-# so we do not have to have flit.  Trac #29803.\nbuild/pkgs/testpath/spkg-install.in:rm -f pyproject.toml\n```\n\n\n`flit_core` is added in #31280\n\nIssue created by migration from https://trac.sagemath.org/ticket/32483\n\n",
    "created_at": "2021-09-06T21:42:35Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Add flit_core, poetry_core packages, remove workarounds for packages that uses them",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32246",
    "user": "https://github.com/mkoeppe"
}
```

```
$ git grep -B 3 'rm.*pyproject'
build/pkgs/entrypoints/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/entrypoints/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/entrypoints/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/entrypoints/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/pkgconfig/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/pkgconfig/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/pkgconfig/spkg-install.in-# so we do not have to have poetry.  Trac #29803.
build/pkgs/pkgconfig/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/terminado/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/terminado/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/terminado/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/terminado/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/testpath/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/testpath/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/testpath/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/testpath/spkg-install.in:rm -f pyproject.toml
```


`flit_core` is added in #31280

Issue created by migration from https://trac.sagemath.org/ticket/32483





---

archive/issue_comments_459916.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-04T02:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459916",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_459917.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2022-07-04T02:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459917",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_459918.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-09-24T01:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_459919.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-09-24T03:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_459920.json:
```json
{
    "body": "It works, but I'm confused by `terminado`: how did you know to make `hatchling` a dependency? I don't see any reference to `flit` or `hatchling` in the `terminado` tarball \u2014\u00a0`grep flit -R .` comes up empty, for example \u2014\u00a0and it only lists `ptyprocess` and `tornado` as requirements.",
    "created_at": "2022-09-28T19:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459920",
    "user": "https://github.com/jhpalmieri"
}
```

It works, but I'm confused by `terminado`: how did you know to make `hatchling` a dependency? I don't see any reference to `flit` or `hatchling` in the `terminado` tarball — `grep flit -R .` comes up empty, for example — and it only lists `ptyprocess` and `tornado` as requirements.



---

archive/issue_comments_459921.json:
```json
{
    "body": "Never mind, I was looking at the old tarball. I see `hatchling` in the new one.",
    "created_at": "2022-09-28T19:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459921",
    "user": "https://github.com/jhpalmieri"
}
```

Never mind, I was looking at the old tarball. I see `hatchling` in the new one.



---

archive/issue_comments_459922.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-28T19:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459922",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_459923.json:
```json
{
    "body": "Thanks! Yes, the build system changed in the update.",
    "created_at": "2022-09-28T19:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459923",
    "user": "https://github.com/mkoeppe"
}
```

Thanks! Yes, the build system changed in the update.



---

archive/issue_comments_459924.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-29T21:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32246#issuecomment-459924",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
