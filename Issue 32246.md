# Issue 32246: Add flit_core, poetry_core packages, remove workarounds for packages that uses them

Issue created by migration from https://trac.sagemath.org/ticket/32483

Original creator: mkoeppe

Original creation time: 2021-09-06 21:42:35


```
$ git grep -B 3 'rm.*pyproject'
build/pkgs/entrypoints/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/entrypoints/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/entrypoints/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/entrypoints/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/pkgconfig/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/pkgconfig/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/pkgconfig/spkg-install.in-# so we do not have to have poetry.  Trac #29803.
build/pkgs/pkgconfig/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/terminado/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/terminado/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/terminado/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/terminado/spkg-install.in:rm -f pyproject.toml
--
build/pkgs/testpath/spkg-install.in-# Make sure that modern pip uses the generated setup.py
build/pkgs/testpath/spkg-install.in-# that is distributed with the PyPI tarball,
build/pkgs/testpath/spkg-install.in-# so we do not have to have flit.  Trac #29803.
build/pkgs/testpath/spkg-install.in:rm -f pyproject.toml
```


`flit_core` is added in #31280


---

Comment by mkoeppe created at 2022-07-04 02:25:11

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-07-04 02:25:11

Last 10 new commits:


---

Comment by git created at 2022-09-24 01:22:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-09-24 03:01:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2022-09-28 19:03:12

It works, but I'm confused by `terminado`: how did you know to make `hatchling` a dependency? I don't see any reference to `flit` or `hatchling` in the `terminado` tarball — `grep flit -R .` comes up empty, for example — and it only lists `ptyprocess` and `tornado` as requirements.


---

Comment by jhpalmieri created at 2022-09-28 19:04:36

Never mind, I was looking at the old tarball. I see `hatchling` in the new one.


---

Comment by jhpalmieri created at 2022-09-28 19:04:36

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-09-28 19:10:04

Thanks! Yes, the build system changed in the update.


---

Comment by vbraun created at 2022-09-29 21:02:40

Resolution: fixed
