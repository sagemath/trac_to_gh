# Issue 26934: Move files used by sage at import time to live inside the package

Issue created by migration from https://trac.sagemath.org/ticket/27171

Original creator: embray

Original creation time: 2019-01-29 18:15:11

CC:  fbissey @timokau jhpalmieri chapoton

See e.g. Non-binary files that are part of the sage sources and needed by the sage package at import time should live in the package.  See e.g. #27040#comment:48


---

Comment by jdemeyer created at 2019-01-29 19:41:30

(edit: never mind)


---

Comment by jdemeyer created at 2019-01-30 09:20:57

Replying to [ticket:27040#comment:48 embray]:
> If it's needed by the sage Python package to work then it should just be installed inside the package (e.g. as `package_data` in `setup.py`)

Why _should_ it be installed like that?

I'm not against moving the specific file `sage-maxima.lisp`, but you seem to imply a more general rule here that Python packages should never access files outside of their own package (or something like that?).


---

Comment by embray created at 2019-01-31 13:09:13

Replying to [comment:4 jdemeyer]:
> Replying to [ticket:27040#comment:48 embray]:
> > If it's needed by the sage Python package to work then it should just be installed inside the package (e.g. as `package_data` in `setup.py`)
> 
> Why _should_ it be installed like that?
> 
> I'm not against moving the specific file `sage-maxima.lisp`, but you seem to imply a more general rule here that Python packages should never access files outside of their own package (or something like that?).

That's definitely not what I'm saying, though I can see where you get the implication.

This is definitely not a rule in case of files that are not part of Sage, which may come from other packages or be overridden in some way by downstream packagers or by users.  In those cases we want an option, with some reasonable default, for where to find that file.

In this case, if I understand correctly, it's just Maxima startup code very specific to Sage's Maxima interface.  So there's no reason for it to live anywhere else outside the sage package, and that also makes the question of "where to find it" much simpler, because it's just relative to the package's installation path.  And it _certainly_ doesn't belong in any `bin/`.

Did the same with `sage.gaprc` in `sage.libs.gap`.


---

Comment by embray created at 2019-03-25 10:44:36

Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.


---

Comment by mkoeppe created at 2020-07-04 06:28:33

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-07-04 06:28:33

1 commit on top of #21559.
----
Last 10 new commits:


---

Comment by fbissey created at 2020-07-04 06:40:32

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2020-07-04 06:40:32

This is sorely needed. I follows the model of other packages for which it was already done. I want this in. LGTM.


---

Comment by mkoeppe created at 2020-07-04 20:27:21

Thanks!


---

Comment by vbraun created at 2020-07-10 19:34:10

Resolution: fixed
