# Issue 14244: Bad sign in sign_mantissa_exponent() methods

Issue created by migration from Trac.

Original creator: tmonteil

Original creation time: 2013-04-14 22:05:14

Assignee: AlexGhitza

CC:  jason zimmerma

Keywords: mpfr, float

The `.sign_mantissa_exponent()` methods of the `RealNumber` and `RealDoubleElement` classes give a negative mantissa when the number is negative, which does not corresponds to the behaviour described in the documentation : 
http://www.sagemath.org/doc/reference/rings_numerical/sage/rings/real_mpfr.html
http://www.sagemath.org/doc/reference/rings_numerical/sage/rings/real_double.html

We propose here to fix it. 

By the way, the variable `mantissa` sometimes (always?) appears in the source with the meaning of a signed mantissa. I would suggest to renamed it `signed_mantissa` or `s_mantissa` to ease code reading (though i do not feel able to detect which one is signed or not along the code). See for example the `.exact_rational()` method in `real_mpfr.pyx`.


---

Attachment

Tested on sage 5.9.beta5


---

Comment by tmonteil created at 2013-04-14 22:16:36

Changing keywords from "mpfr, float" to "mpfr, RDF".


---

Comment by tscrim created at 2013-04-14 23:24:14

I'm guessing this is ready for review?

Looks good, but one small thing, could you change line 2930 in `real_mpfr.pyx` to:

```
The mantissa is always a nonnegative number (see :trac:`14448`)::
```

or something to this extent, noting the problem was fixed in this ticket?

Thanks,

Travis


---

Comment by jdemeyer created at 2013-04-15 07:21:16

I think it's a bug that the mantissa of 1 and -1 are different.


---

Comment by tmonteil created at 2013-04-15 09:31:23

Patch updated so that it quotes this trac ticket


---

Comment by tmonteil created at 2013-04-15 09:33:30

Changing status from new to needs_review.


---

Attachment

I added the reference to this trac ticket. I also put this ticket under review.


---

Comment by tscrim created at 2013-04-15 15:37:10

Looks good to me.


---

Comment by tscrim created at 2013-04-15 15:37:10

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-04-23 09:44:27

Resolution: fixed
