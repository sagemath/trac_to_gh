# Issue 34707: Bug in Clifford algebra multiplication

archive/issues_034470.json:
```json
{
    "body": "This is a really bad associativity failure:\n\n```\nsage: r = ZZ['r'].fraction_field().gen()\nsage: Q = QuadraticForm(r.parent(), 2, [0,r,0])\nsage: C.<p,q> = CliffordAlgebra(Q)\nsage: q * (p * q)\nr*q\nsage: (q * p) * q\n-r*p*q + r^2\n```\n\nCC:  @trevorkarn @fchapoton\n\nKeywords: Clifford\n\nBranch/Commit: 4d56288de56b4b90b5200c5a10f5536e87ce2c99\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34707\n\n",
    "closed_at": "2022-11-07T20:25:43Z",
    "created_at": "2022-10-31T07:42:32Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Bug in Clifford algebra multiplication",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34707",
    "user": "https://github.com/tscrim"
}
```
This is a really bad associativity failure:

```
sage: r = ZZ['r'].fraction_field().gen()
sage: Q = QuadraticForm(r.parent(), 2, [0,r,0])
sage: C.<p,q> = CliffordAlgebra(Q)
sage: q * (p * q)
r*q
sage: (q * p) * q
-r*p*q + r^2
```

CC:  @trevorkarn @fchapoton

Keywords: Clifford

Branch/Commit: 4d56288de56b4b90b5200c5a10f5536e87ce2c99

Reviewer: Frédéric Chapoton

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34707





---

archive/issue_comments_681811.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe first answer is the correct answer.",
    "created_at": "2022-10-31T08:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681811",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
The first answer is the correct answer.



---

archive/issue_comments_681812.json:
```json
{
    "body": "Changing author from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-10-31T08:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681812",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Travis Scrimshaw"



---

archive/issue_comments_681813.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-10-31T08:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681813",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_681814.json:
```json
{
    "body": "<a id='comment:2'></a>\nOkay, it is a very special case. It was checking that the first element of the LHS when the RHS was single monomial. In this example, the first returned term happened to be the constant term, so it thought it just needed to multiply the LHS by that scalar. So it actually is not so bad of a bug, just a special case.\n\n---\nNew commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[4d56288](https://github.com/sagemath/sagetrac-mirror/commit/4d56288de56b4b90b5200c5a10f5536e87ce2c99)|`Checking that the RHS is a scalar of 1, not the LHS.`|",
    "created_at": "2022-10-31T08:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681814",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Okay, it is a very special case. It was checking that the first element of the LHS when the RHS was single monomial. In this example, the first returned term happened to be the constant term, so it thought it just needed to multiply the LHS by that scalar. So it actually is not so bad of a bug, just a special case.

---
New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[4d56288](https://github.com/sagemath/sagetrac-mirror/commit/4d56288de56b4b90b5200c5a10f5536e87ce2c99)|`Checking that the RHS is a scalar of 1, not the LHS.`|



---

archive/issue_comments_681815.json:
```json
{
    "body": "Changing commit from \"\" to \"4d56288de56b4b90b5200c5a10f5536e87ce2c99\"",
    "created_at": "2022-10-31T08:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681815",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "4d56288de56b4b90b5200c5a10f5536e87ce2c99"



---

archive/issue_comments_681816.json:
```json
{
    "body": "Changing branch from \"\" to \"public/algebra/clifford_algebra_mult-34707\"",
    "created_at": "2022-10-31T08:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681816",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/algebra/clifford_algebra_mult-34707"



---

archive/issue_comments_681817.json:
```json
{
    "body": "<a id='comment:3'></a>\nok if the bot comes back green",
    "created_at": "2022-10-31T09:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681817",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
ok if the bot comes back green



---

archive/issue_comments_681818.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2022-10-31T09:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681818",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_681819.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-10-31T12:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681819",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_681820.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you! This has been around for a while and is a somewhat embarrassing bug from me...",
    "created_at": "2022-11-01T06:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681820",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Thank you! This has been around for a while and is a somewhat embarrassing bug from me...



---

archive/issue_events_109049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-11-07T20:25:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34707#event-109049"
}
```



---

archive/issue_comments_681821.json:
```json
{
    "body": "Changing branch from \"public/algebra/clifford_algebra_mult-34707\" to \"4d56288de56b4b90b5200c5a10f5536e87ce2c99\"",
    "created_at": "2022-11-07T20:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681821",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/algebra/clifford_algebra_mult-34707" to "4d56288de56b4b90b5200c5a10f5536e87ce2c99"



---

archive/issue_comments_681822.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-11-07T20:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34707",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34707#issuecomment-681822",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
