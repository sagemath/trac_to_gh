# Issue 34054: Update documentation for EnumeratedFamily

archive/issues_033817.json:
```json
{
    "body": "The current documentation implies that the index set must be finite. This is not the case:\n\n```\nsage: F = Family(ZZ)\nsage: type(F)\n<class 'sage.sets.family.EnumeratedFamily_with_category'>\n```\n\nCC:  @tscrim\n\nKeywords: gsoc2022 documentation family\n\nBranch/Commit: c777eca9975a5bf25902b5483d00853b8b4ce1f1\n\nReviewer: Matthias Koeppe\n\nAuthor: Trevor K. Karn\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34054\n\n",
    "closed_at": "2022-08-30T19:04:53Z",
    "created_at": "2022-06-22T19:32:51Z",
    "labels": [
        "component: documentation",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Update documentation for EnumeratedFamily",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34054",
    "user": "https://github.com/trevorkarn"
}
```
The current documentation implies that the index set must be finite. This is not the case:

```
sage: F = Family(ZZ)
sage: type(F)
<class 'sage.sets.family.EnumeratedFamily_with_category'>
```

CC:  @tscrim

Keywords: gsoc2022 documentation family

Branch/Commit: c777eca9975a5bf25902b5483d00853b8b4ce1f1

Reviewer: Matthias Koeppe

Author: Trevor K. Karn

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34054





---

archive/issue_comments_670010.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-22T19:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670010",
    "user": "https://github.com/trevorkarn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_670011.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-23T00:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670011",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_670012.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am not sure the documentation is wrong, but it might be a slight abuse of notation. In particular `|ZZ|` is aleph<sub>0</sub>, and aleph<sub>0</sub> - 1 = aleph<sub>0</sub> (well, this might make slightly more sense in terms of ordinals rather than cardinals). So it is saying it is indexed by `{0, 1, ...}`.\n\nNow your change definitely is wrong because it is not indexed by **Z** but by **N** (with 0) in the infinite case. Don't let this run for too long:\n\n```\nsage: F = Family(ZZ)\nsage: F[-1]\n```\nas the generic `unrank()` from the category doesn't protect against bad input (for infinite enuemrated sets, IMO, it should).",
    "created_at": "2022-06-23T00:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670012",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
I am not sure the documentation is wrong, but it might be a slight abuse of notation. In particular `|ZZ|` is aleph<sub>0</sub>, and aleph<sub>0</sub> - 1 = aleph<sub>0</sub> (well, this might make slightly more sense in terms of ordinals rather than cardinals). So it is saying it is indexed by `{0, 1, ...}`.

Now your change definitely is wrong because it is not indexed by **Z** but by **N** (with 0) in the infinite case. Don't let this run for too long:

```
sage: F = Family(ZZ)
sage: F[-1]
```
as the generic `unrank()` from the category doesn't protect against bad input (for infinite enuemrated sets, IMO, it should).



---

archive/issue_comments_670013.json:
```json
{
    "body": "Changing commit from \"d4dedf66a44196ae1bed571861d068f036888066\" to \"79250c604b58bf0832c3601010e9c4c5a69ad0e7\"",
    "created_at": "2022-08-10T00:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d4dedf66a44196ae1bed571861d068f036888066" to "79250c604b58bf0832c3601010e9c4c5a69ad0e7"



---

archive/issue_comments_670014.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[79250c6](https://github.com/sagemath/sagetrac-mirror/commit/79250c604b58bf0832c3601010e9c4c5a69ad0e7)|`Add documentation of Integer index`|",
    "created_at": "2022-08-10T00:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[79250c6](https://github.com/sagemath/sagetrac-mirror/commit/79250c604b58bf0832c3601010e9c4c5a69ad0e7)|`Add documentation of Integer index`|



---

archive/issue_comments_670015.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[f11c1a3](https://github.com/sagemath/sagetrac-mirror/commit/f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93)|`Add check for positivity of rank`|",
    "created_at": "2022-08-10T00:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[f11c1a3](https://github.com/sagemath/sagetrac-mirror/commit/f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93)|`Add check for positivity of rank`|



---

archive/issue_comments_670016.json:
```json
{
    "body": "Changing commit from \"79250c604b58bf0832c3601010e9c4c5a69ad0e7\" to \"f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93\"",
    "created_at": "2022-08-10T00:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "79250c604b58bf0832c3601010e9c4c5a69ad0e7" to "f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93"



---

archive/issue_comments_670017.json:
```json
{
    "body": "<a id='comment:5'></a>\nI changed this to reflect your comment about `ZZ[-1]`, and then saw that `_unrank_from_iterator` expects a positive rank, but does not check for it, so I added the check there.",
    "created_at": "2022-08-10T00:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670017",
    "user": "https://github.com/trevorkarn"
}
```

<a id='comment:5'></a>
I changed this to reflect your comment about `ZZ[-1]`, and then saw that `_unrank_from_iterator` expects a positive rank, but does not check for it, so I added the check there.



---

archive/issue_comments_670018.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-10T00:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670018",
    "user": "https://github.com/trevorkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_670019.json:
```json
{
    "body": "<a id='comment:7'></a>\nThere is no reason for a separate `TESTS::` block. I would also put the `ZZ` test below the `C` one to have better grouping of the tests.",
    "created_at": "2022-08-10T01:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670019",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
There is no reason for a separate `TESTS::` block. I would also put the `ZZ` test below the `C` one to have better grouping of the tests.



---

archive/issue_comments_670020.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[250ee34](https://github.com/sagemath/sagetrac-mirror/commit/250ee345fc32f6d1ad9590027d2563ee862630de)|`Remove TESTS block`|",
    "created_at": "2022-08-10T15:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670020",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[250ee34](https://github.com/sagemath/sagetrac-mirror/commit/250ee345fc32f6d1ad9590027d2563ee862630de)|`Remove TESTS block`|



---

archive/issue_comments_670021.json:
```json
{
    "body": "Changing commit from \"f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93\" to \"250ee345fc32f6d1ad9590027d2563ee862630de\"",
    "created_at": "2022-08-10T15:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670021",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f11c1a3bcb10ff99fd4ddc46f33140c3ed775c93" to "250ee345fc32f6d1ad9590027d2563ee862630de"



---

archive/issue_comments_670022.json:
```json
{
    "body": "<a id='comment:9'></a>\n\n```\n+            if r < 0:\n+                raise ValueError(\"the value must be greater than or equal to 0\")\n```\nI'd suggest to change from \"value\" to \"rank\" here.\n\nOtherwise LGTM",
    "created_at": "2022-08-16T17:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670022",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>

```
+            if r < 0:
+                raise ValueError("the value must be greater than or equal to 0")
```
I'd suggest to change from "value" to "rank" here.

Otherwise LGTM



---

archive/issue_comments_670023.json:
```json
{
    "body": "<a id='comment:10'></a>\nMaybe it would also be a good idea to check that it's an integer?",
    "created_at": "2022-08-16T17:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670023",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Maybe it would also be a good idea to check that it's an integer?



---

archive/issue_comments_670024.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[19f5820](https://github.com/sagemath/sagetrac-mirror/commit/19f582021bb6887ad45f824e1f3fcdf636e1cd77)|`value->rank and check for integer value`|",
    "created_at": "2022-08-17T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[19f5820](https://github.com/sagemath/sagetrac-mirror/commit/19f582021bb6887ad45f824e1f3fcdf636e1cd77)|`value->rank and check for integer value`|



---

archive/issue_comments_670025.json:
```json
{
    "body": "Changing commit from \"250ee345fc32f6d1ad9590027d2563ee862630de\" to \"19f582021bb6887ad45f824e1f3fcdf636e1cd77\"",
    "created_at": "2022-08-17T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "250ee345fc32f6d1ad9590027d2563ee862630de" to "19f582021bb6887ad45f824e1f3fcdf636e1cd77"



---

archive/issue_comments_670026.json:
```json
{
    "body": "<a id='comment:12'></a>\nI would rephrase \"must be between %s and %s inclusive\" -> \"must be in the range from %s to %s\"",
    "created_at": "2022-08-17T20:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
I would rephrase "must be between %s and %s inclusive" -> "must be in the range from %s to %s"



---

archive/issue_comments_670027.json:
```json
{
    "body": "<a id='comment:13'></a>\nI know that this is not from your ticket, but this:\n\n```\n             counter = 0\n             for u in self:\n                 if counter == r:\n                     return u\n                 counter += 1\n```\ncould be rewritten using `enumerate`",
    "created_at": "2022-08-17T20:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670027",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
I know that this is not from your ticket, but this:

```
             counter = 0
             for u in self:
                 if counter == r:
                     return u
                 counter += 1
```
could be rewritten using `enumerate`



---

archive/issue_comments_670028.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[cd816e6](https://github.com/sagemath/sagetrac-mirror/commit/cd816e6a007fdb1c1430ca6897acc364d596d155)|`Rephrase range`|",
    "created_at": "2022-08-17T20:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670028",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[cd816e6](https://github.com/sagemath/sagetrac-mirror/commit/cd816e6a007fdb1c1430ca6897acc364d596d155)|`Rephrase range`|



---

archive/issue_comments_670029.json:
```json
{
    "body": "Changing commit from \"19f582021bb6887ad45f824e1f3fcdf636e1cd77\" to \"cd816e6a007fdb1c1430ca6897acc364d596d155\"",
    "created_at": "2022-08-17T20:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "19f582021bb6887ad45f824e1f3fcdf636e1cd77" to "cd816e6a007fdb1c1430ca6897acc364d596d155"



---

archive/issue_comments_670030.json:
```json
{
    "body": "Changing commit from \"cd816e6a007fdb1c1430ca6897acc364d596d155\" to \"c777eca9975a5bf25902b5483d00853b8b4ce1f1\"",
    "created_at": "2022-08-17T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cd816e6a007fdb1c1430ca6897acc364d596d155" to "c777eca9975a5bf25902b5483d00853b8b4ce1f1"



---

archive/issue_comments_670031.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[c777eca](https://github.com/sagemath/sagetrac-mirror/commit/c777eca9975a5bf25902b5483d00853b8b4ce1f1)|`Rewrite using enumerate and fix doctests`|",
    "created_at": "2022-08-17T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[c777eca](https://github.com/sagemath/sagetrac-mirror/commit/c777eca9975a5bf25902b5483d00853b8b4ce1f1)|`Rewrite using enumerate and fix doctests`|



---

archive/issue_comments_670032.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-08-18T00:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670032",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_670033.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-18T00:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670033",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_670034.json:
```json
{
    "body": "Changing branch from \"u/tkarn/enumerated-family-ZZ-doc\" to \"c777eca9975a5bf25902b5483d00853b8b4ce1f1\"",
    "created_at": "2022-08-30T19:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670034",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/tkarn/enumerated-family-ZZ-doc" to "c777eca9975a5bf25902b5483d00853b8b4ce1f1"



---

archive/issue_events_108174.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-30T19:04:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34054#event-108174"
}
```



---

archive/issue_comments_670035.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-30T19:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34054#issuecomment-670035",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
