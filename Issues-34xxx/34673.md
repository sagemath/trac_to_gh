# Issue 34673: change iterator for ordered set partitions

archive/issues_034436.json:
```json
{
    "assignees": [],
    "body": "as suggested by\n\nhttps://gitlab.com/modulispaces/admcycles/-/issues/100\n\nCC:  @videlec @tscrim\n\nBranch/Commit: **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34673_\n\n",
    "closed_at": "2022-10-30T10:30:59Z",
    "created_at": "2022-10-17T16:02:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "change iterator for ordered set partitions",
    "type": "issue",
    "updated_at": "2022-10-30T10:30:59Z",
    "url": "https://github.com/sagemath/sage/issues/34673",
    "user": "https://github.com/fchapoton"
}
```
as suggested by

https://gitlab.com/modulispaces/admcycles/-/issues/100

CC:  @videlec @tscrim

Branch/Commit: **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/34673_





---

archive/issue_events_454353.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-10-17T16:02:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454353"
}
```



---

archive/issue_events_454354.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-10-17T16:02:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454354"
}
```



---

archive/issue_events_454355.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-10-17T16:02:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454355"
}
```



---

archive/issue_events_454356.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-10-17T16:02:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454356"
}
```



---

archive/issue_comments_562821.json:
```json
{
    "body": "Branch: **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)**",
    "created_at": "2022-10-17T16:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562821",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)**



---

archive/issue_comments_562822.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0\">576598e</a></td><td><code>change iterator for ordered set partitions</code></td></tr></table>\n",
    "created_at": "2022-10-17T16:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562822",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0">576598e</a></td><td><code>change iterator for ordered set partitions</code></td></tr></table>




---

archive/issue_events_454357.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-10-17T16:02:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454357"
}
```



---

archive/issue_comments_562823.json:
```json
{
    "body": "Commit: **[576598e](https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0)**",
    "created_at": "2022-10-17T16:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562823",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[576598e](https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0)**



---

archive/issue_comments_562824.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nhmm, in fact, it seems to make the timing even worse.. probably something bad happening in the element construction ?",
    "created_at": "2022-10-17T19:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562824",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">Comment 2</div>

hmm, in fact, it seems to make the timing even worse.. probably something bad happening in the element construction ?



---

archive/issue_comments_562825.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce\">b30b4c7</a></td><td><code>slightly better like this</code></td></tr></table>\n",
    "created_at": "2022-10-17T19:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562825",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce">b30b4c7</a></td><td><code>slightly better like this</code></td></tr></table>




---

archive/issue_comments_562826.json:
```json
{
    "body": "Changed commit from **[576598e](https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0)** to **[b30b4c7](https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce)**",
    "created_at": "2022-10-17T19:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562826",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[576598e](https://github.com/sagemath/sagetrac-mirror/commit/576598ed4c0fc3179ff5feb5dc285f4e0fa5e4b0)** to **[b30b4c7](https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce)**



---

archive/issue_comments_562827.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI think there are a number of ways to speed things up:\n\n1. We do not store the `_base_set` with the element. This is something that belongs the parent.\n2. Add a `check` argument to the `__init__` and pass that along; in particular, skip the check when iterating over elements.\n3. Cythonize `multiset_permutation_next_lex` and `multiset_permutation_to_ordered_set_partition`.\n4. Directly write the `convert` as Python code to avoid the extra Python function calls. Furthermore, already make the parts a `frozenset` or `Set` to avoid extra transient objects.",
    "created_at": "2022-10-18T00:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562827",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">Comment 4</div>

I think there are a number of ways to speed things up:

1. We do not store the `_base_set` with the element. This is something that belongs the parent.
2. Add a `check` argument to the `__init__` and pass that along; in particular, skip the check when iterating over elements.
3. Cythonize `multiset_permutation_next_lex` and `multiset_permutation_to_ordered_set_partition`.
4. Directly write the `convert` as Python code to avoid the extra Python function calls. Furthermore, already make the parts a `frozenset` or `Set` to avoid extra transient objects.



---

archive/issue_comments_562828.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f\">3958ebc</a></td><td><code>some tweaks, not working yet</code></td></tr></table>\n",
    "created_at": "2022-10-18T06:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562828",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f">3958ebc</a></td><td><code>some tweaks, not working yet</code></td></tr></table>




---

archive/issue_comments_562829.json:
```json
{
    "body": "Changed commit from **[b30b4c7](https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce)** to **[3958ebc](https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f)**",
    "created_at": "2022-10-18T06:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562829",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b30b4c7](https://github.com/sagemath/sagetrac-mirror/commit/b30b4c7e3bfd0e0bd38ca99cdbbc9f27e3be60ce)** to **[3958ebc](https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f)**



---

archive/issue_comments_562830.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThanks Travis for the suggestions.\n\nTrying to include the underlying set in the parent, I stumbled upon the \"element_constructor\" not doing the job of using the correct specific parent. This is not the first time I meet this kind of issue, but I am still unable to fix that.\n\nAlso, I would like to avoid using the sage `Set` at all, because it seems to be deadly slow.",
    "created_at": "2022-10-18T06:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562830",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

Thanks Travis for the suggestions.

Trying to include the underlying set in the parent, I stumbled upon the "element_constructor" not doing the job of using the correct specific parent. This is not the first time I meet this kind of issue, but I am still unable to fix that.

Also, I would like to avoid using the sage `Set` at all, because it seems to be deadly slow.



---

archive/issue_comments_562831.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a\">05413ee</a></td><td><code>minor details</code></td></tr></table>\n",
    "created_at": "2022-10-18T07:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a">05413ee</a></td><td><code>minor details</code></td></tr></table>




---

archive/issue_comments_562832.json:
```json
{
    "body": "Changed commit from **[3958ebc](https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f)** to **[05413ee](https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a)**",
    "created_at": "2022-10-18T07:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562832",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3958ebc](https://github.com/sagemath/sagetrac-mirror/commit/3958ebce64100d730189e0958bd729dd389a521f)** to **[05413ee](https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a)**



---

archive/issue_comments_562833.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf\">94c2ea5</a></td><td><code>more tweaks</code></td></tr></table>\n",
    "created_at": "2022-10-18T08:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562833",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf">94c2ea5</a></td><td><code>more tweaks</code></td></tr></table>




---

archive/issue_comments_562834.json:
```json
{
    "body": "Changed commit from **[05413ee](https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a)** to **[94c2ea5](https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf)**",
    "created_at": "2022-10-18T08:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562834",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[05413ee](https://github.com/sagemath/sagetrac-mirror/commit/05413eeb2e5915b627244fd3104b5f508899509a)** to **[94c2ea5](https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf)**



---

archive/issue_comments_562835.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI don't quite understand your problem with `element_constructor`. Can you give me a little more detail?\n\nI agree that we should avoid using `Set`, but we then require hashability for `frozenset`. This is desirable, and I don't see any real use-case otherwise. However, it is a slightly backwards incompatible change.\n\nWe will also need to special case the base set in `to_packed_word()` when the parent is `OrderedSetPartitions_all`. I also don't see a real use-case for such a parent.",
    "created_at": "2022-10-18T08:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562835",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

I don't quite understand your problem with `element_constructor`. Can you give me a little more detail?

I agree that we should avoid using `Set`, but we then require hashability for `frozenset`. This is desirable, and I don't see any real use-case otherwise. However, it is a slightly backwards incompatible change.

We will also need to special case the base set in `to_packed_word()` when the parent is `OrderedSetPartitions_all`. I also don't see a real use-case for such a parent.



---

archive/issue_comments_562836.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d\">4e9c186</a></td><td><code>more tweaks</code></td></tr></table>\n",
    "created_at": "2022-10-18T08:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562836",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d">4e9c186</a></td><td><code>more tweaks</code></td></tr></table>




---

archive/issue_comments_562837.json:
```json
{
    "body": "Changed commit from **[94c2ea5](https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf)** to **[4e9c186](https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d)**",
    "created_at": "2022-10-18T08:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562837",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[94c2ea5](https://github.com/sagemath/sagetrac-mirror/commit/94c2ea5d9f3e0257cca6ccc389baf35635357edf)** to **[4e9c186](https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d)**



---

archive/issue_comments_562838.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nMy problem is that currently\n\n```\n        sage: S = OrderedSetPartitions()\n        sage: x = S([[3,5], [2], [1,4,6]])\n        sage: x.parent()\n        Ordered set partitions\n```\nwhereas the parent should be `Ordered set partitions of {1,2,3,4,5,6`}",
    "created_at": "2022-10-18T08:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562838",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">Comment 11</div>

My problem is that currently

```
        sage: S = OrderedSetPartitions()
        sage: x = S([[3,5], [2], [1,4,6]])
        sage: x.parent()
        Ordered set partitions
```
whereas the parent should be `Ordered set partitions of {1,2,3,4,5,6`}



---

archive/issue_comments_562839.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nNo, that is the correct answer. We have a parent that is the set of all ordered set partitions, no matter the base set.\n\nActually, I know a use case (answering the last part of [comment:9](#comment%3A9)): We need the union of `OrderedSetPartitions(n)` over all `n` to index the basis of `FQSym`.",
    "created_at": "2022-10-18T08:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562839",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">Comment 12</div>

No, that is the correct answer. We have a parent that is the set of all ordered set partitions, no matter the base set.

Actually, I know a use case (answering the last part of [comment:9](#comment%3A9)): We need the union of `OrderedSetPartitions(n)` over all `n` to index the basis of `FQSym`.



---

archive/issue_comments_562840.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThe only issue is in `to_packed_word()`, right? Just check if the parent is `OrderedSetPartitions_all`, and in that case only, do we build the set as `frozenset(range(1, sum(len(p) for p in self)+1))`.",
    "created_at": "2022-10-18T08:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562840",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">Comment 13</div>

The only issue is in `to_packed_word()`, right? Just check if the parent is `OrderedSetPartitions_all`, and in that case only, do we build the set as `frozenset(range(1, sum(len(p) for p in self)+1))`.



---

archive/issue_comments_562841.json:
```json
{
    "body": "Changed commit from **[4e9c186](https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d)** to **[cd370cb](https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4)**",
    "created_at": "2022-10-18T08:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562841",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4e9c186](https://github.com/sagemath/sagetrac-mirror/commit/4e9c186fa76fcabb94b1e08a8311529665d5374d)** to **[cd370cb](https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4)**



---

archive/issue_comments_562842.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4\">cd370cb</a></td><td><code>change iterator for ordered set partitions</code></td></tr></table>\n",
    "created_at": "2022-10-18T08:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4">cd370cb</a></td><td><code>change iterator for ordered set partitions</code></td></tr></table>




---

archive/issue_comments_562843.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nthanks a lot. I have used a try-except in `base_set` method.\n\nNow passing the doctests, with a twice faster but still very slow iterator.",
    "created_at": "2022-10-18T08:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562843",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">Comment 15</div>

thanks a lot. I have used a try-except in `base_set` method.

Now passing the doctests, with a twice faster but still very slow iterator.



---

archive/issue_comments_562844.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-10-18T09:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562844",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_562845.json:
```json
{
    "body": "Changed commit from **[cd370cb](https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4)** to **[7efd468](https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944)**",
    "created_at": "2022-10-18T09:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562845",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[cd370cb](https://github.com/sagemath/sagetrac-mirror/commit/cd370cb74bc9ad49815be69d0d424bf2b02099d4)** to **[7efd468](https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944)**



---

archive/issue_comments_562846.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nOne micro-optimization: The change\n\n```diff\n-        par = parent(self)\n+        par = self.parent()\n```\nis slightly slower because the first is a Cython function call (that accesses the Cython slot) versus a Python method call:\n\n```\nsage: O = OrderedSetPartition()\nsage: %timeit parent(O)\n28 ns \u00b1 0.415 ns per loop (mean \u00b1 std. dev. of 7 runs, 10,000,000 loops each)\nsage: %timeit O.parent()\n55.6 ns \u00b1 0.234 ns per loop (mean \u00b1 std. dev. of 7 runs, 10,000,000 loops each)\n```\nUp to you if you want to revert it.\n\nI just pushed another >2x speedup by avoiding the useless check (comment:4 point 2).\n\nI do think it would be nice to get rid of the `Set`. I highly doubt anyone will be affected by that change. If anyone is affected, then we can just apologize to them and tell them to make their objects immutable. Iterating over `OrderedSetPartitions(7)` now, over 80% of the time is spent in `Set.__init__`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944\">7efd468</a></td><td><code>Reviewer change by introducing a check argument.</code></td></tr></table>\n",
    "created_at": "2022-10-18T09:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562846",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">Comment 16</div>

One micro-optimization: The change

```diff
-        par = parent(self)
+        par = self.parent()
```
is slightly slower because the first is a Cython function call (that accesses the Cython slot) versus a Python method call:

```
sage: O = OrderedSetPartition()
sage: %timeit parent(O)
28 ns ± 0.415 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)
sage: %timeit O.parent()
55.6 ns ± 0.234 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)
```
Up to you if you want to revert it.

I just pushed another >2x speedup by avoiding the useless check (comment:4 point 2).

I do think it would be nice to get rid of the `Set`. I highly doubt anyone will be affected by that change. If anyone is affected, then we can just apologize to them and tell them to make their objects immutable. Iterating over `OrderedSetPartitions(7)` now, over 80% of the time is spent in `Set.__init__`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944">7efd468</a></td><td><code>Reviewer change by introducing a check argument.</code></td></tr></table>




---

archive/issue_comments_562847.json:
```json
{
    "body": "Changed branch from **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)** to **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)**",
    "created_at": "2022-10-18T09:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562847",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)** to **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)**



---

archive/issue_comments_562848.json:
```json
{
    "body": "Changed commit from **[7efd468](https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944)** to **[64c3482](https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9)**",
    "created_at": "2022-10-18T14:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562848",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[7efd468](https://github.com/sagemath/sagetrac-mirror/commit/7efd468620c0f78a195d0a501841915360f0e944)** to **[64c3482](https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9)**



---

archive/issue_comments_562849.json:
```json
{
    "body": "Changed branch from **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)** to **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)**",
    "created_at": "2022-10-18T14:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562849",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)** to **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)**



---

archive/issue_comments_562850.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nnow using `parent(self)` again\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9\">64c3482</a></td><td><code>re-using parent(self)</code></td></tr></table>\n",
    "created_at": "2022-10-18T14:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562850",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">Comment 17</div>

now using `parent(self)` again

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9">64c3482</a></td><td><code>re-using parent(self)</code></td></tr></table>




---

archive/issue_comments_562851.json:
```json
{
    "body": "Changed commit from **[64c3482](https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9)** to **[023f37f](https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba)**",
    "created_at": "2022-10-18T19:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562851",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[64c3482](https://github.com/sagemath/sagetrac-mirror/commit/64c3482f88e43dd67d2c43b5eecb26843bc89ce9)** to **[023f37f](https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba)**



---

archive/issue_comments_562852.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba\">023f37f</a></td><td><code>using set and frozenset</code></td></tr></table>\n",
    "created_at": "2022-10-18T19:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562852",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba">023f37f</a></td><td><code>using set and frozenset</code></td></tr></table>




---

archive/issue_comments_562853.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nnow using `set` and `frozenset`, and so really much faster in iteration. :)\n\nSome doctests are failing because of a modified order in the doctests. It is ok to change the doctests ?",
    "created_at": "2022-10-18T19:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562853",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">Comment 19</div>

now using `set` and `frozenset`, and so really much faster in iteration. :)

Some doctests are failing because of a modified order in the doctests. It is ok to change the doctests ?



---

archive/issue_comments_562854.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [Fr\u00e9d\u00e9ric Chapoton](#comment%3A19):\n> now using `set` and `frozenset`, and so really much faster in iteration. :)\n\nYay!\n\n> Some doctests are failing because of a modified order in the doctests. It is ok to change the doctests ?\n\nOf course.",
    "created_at": "2022-10-19T00:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562854",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [Frédéric Chapoton](#comment%3A19):
> now using `set` and `frozenset`, and so really much faster in iteration. :)

Yay!

> Some doctests are failing because of a modified order in the doctests. It is ok to change the doctests ?

Of course.



---

archive/issue_comments_562855.json:
```json
{
    "body": "Changed commit from **[023f37f](https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba)** to **[63ee91e](https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d)**",
    "created_at": "2022-10-19T06:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562855",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[023f37f](https://github.com/sagemath/sagetrac-mirror/commit/023f37f0ae06ab31381eb627153e93fcce6662ba)** to **[63ee91e](https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d)**



---

archive/issue_comments_562856.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d\">63ee91e</a></td><td><code>fixing the doctests</code></td></tr></table>\n",
    "created_at": "2022-10-19T06:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562856",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d">63ee91e</a></td><td><code>fixing the doctests</code></td></tr></table>




---

archive/issue_comments_562857.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\ndoctests now fixed, also in wqsym",
    "created_at": "2022-10-19T06:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562857",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">Comment 22</div>

doctests now fixed, also in wqsym



---

archive/issue_comments_562858.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6\">64cae73</a></td><td><code>little detail</code></td></tr></table>\n",
    "created_at": "2022-10-19T13:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6">64cae73</a></td><td><code>little detail</code></td></tr></table>




---

archive/issue_comments_562859.json:
```json
{
    "body": "Changed commit from **[63ee91e](https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d)** to **[64cae73](https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6)**",
    "created_at": "2022-10-19T13:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562859",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[63ee91e](https://github.com/sagemath/sagetrac-mirror/commit/63ee91ee7314aec60c2d32d7d12a23b8813e7c4d)** to **[64cae73](https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6)**



---

archive/issue_comments_562860.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nWe have to be a little more careful about the parent in `from_finite_word()` as it can lead to pollution of the `WQSym` elements having indices in different parents (which are not comparable).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d\">362d8f1</a></td><td><code>Being more careful with the parent in from_finite_word().</code></td></tr></table>\n",
    "created_at": "2022-10-20T00:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562860",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">Comment 24</div>

We have to be a little more careful about the parent in `from_finite_word()` as it can lead to pollution of the `WQSym` elements having indices in different parents (which are not comparable).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d">362d8f1</a></td><td><code>Being more careful with the parent in from_finite_word().</code></td></tr></table>




---

archive/issue_comments_562861.json:
```json
{
    "body": "Changed commit from **[64cae73](https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6)** to **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**",
    "created_at": "2022-10-20T00:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562861",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[64cae73](https://github.com/sagemath/sagetrac-mirror/commit/64cae731f9ce71c2c945d70263fefe62481329e6)** to **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**



---

archive/issue_comments_562862.json:
```json
{
    "body": "Changed branch from **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)** to **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)**",
    "created_at": "2022-10-20T00:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562862",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/chapoton/34673](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34673)** to **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)**



---

archive/issue_comments_562863.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nok, if you say so. Looks good to me\n\nVincent suggested to check if the original code in sage could be made more efficient than our current proposal, once no longer using Set. This seems unlikely to me.",
    "created_at": "2022-10-21T06:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562863",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">Comment 25</div>

ok, if you say so. Looks good to me

Vincent suggested to check if the original code in sage could be made more efficient than our current proposal, once no longer using Set. This seems unlikely to me.



---

archive/issue_events_454358.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-10-21T06:41:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454358"
}
```



---

archive/issue_events_454359.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-10-21T06:41:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454359"
}
```



---

archive/issue_comments_562864.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nNo, you already had an improvement even while using `Set` as I understood it.\n\nWe don't want to mix different parents for `WQSym` basis indices because then `<=` doesn't work. So, e.g., `leading_support()` fails.",
    "created_at": "2022-10-21T06:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562864",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">Comment 26</div>

No, you already had an improvement even while using `Set` as I understood it.

We don't want to mix different parents for `WQSym` basis indices because then `<=` doesn't work. So, e.g., `leading_support()` fails.



---

archive/issue_events_454360.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-30T10:30:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454360"
}
```



---

archive/issue_events_454361.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9aef18a26c2f442bc0d9c766bca432df7b29ceb0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-10-30T10:30:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34673#event-454361"
}
```



---

archive/issue_comments_562865.json:
```json
{
    "body": "Changed branch from **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)** to **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**",
    "created_at": "2022-10-30T10:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34673#issuecomment-562865",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/ordered_set_partition_iter-34673](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/ordered_set_partition_iter-34673)** to **[362d8f1](https://github.com/sagemath/sagetrac-mirror/commit/362d8f14e7d214e79ec8d597c71ea2ad79f01a1d)**
