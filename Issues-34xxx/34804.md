# Issue 34804: Deprecate sage.interfaces is_...Element functions

archive/issues_034567.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nIntroducing a module `sage.interfaces.abc` with abstract base classes for `isinstance` testing (see https://doc.sagemath.org/html/en/developer/packaging_sage_library.html#module-level-runtime-dependencies)\n\nPart of #32414\n\nDepends on #34770\nDepends on #34823\n\nCC:  @dimpase @kwankyu\n\nComponent: **refactoring**\n\nAuthor: **Matthias Koeppe, Dima Pasechnik**\n\nBranch/Commit: **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34804_\n\n",
    "closed_at": "2023-01-05T23:16:46Z",
    "created_at": "2022-11-28T18:56:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Deprecate sage.interfaces is_...Element functions",
    "type": "issue",
    "updated_at": "2023-01-05T23:16:46Z",
    "url": "https://github.com/sagemath/sage/issues/34804",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

Introducing a module `sage.interfaces.abc` with abstract base classes for `isinstance` testing (see https://doc.sagemath.org/html/en/developer/packaging_sage_library.html#module-level-runtime-dependencies)

Part of #32414

Depends on #34770
Depends on #34823

CC:  @dimpase @kwankyu

Component: **refactoring**

Author: **Matthias Koeppe, Dima Pasechnik**

Branch/Commit: **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/34804_





---

archive/issue_events_470493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-28T18:56:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470493"
}
```



---

archive/issue_events_470494.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-28T18:56:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470494"
}
```



---

archive/issue_events_470495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-28T18:56:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470495"
}
```



---

archive/issue_events_470496.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-28T18:56:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470496"
}
```



---

archive/issue_comments_561109.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n Introducing a module `sage.interfaces.abc` with abstract base classes for `isinstance` testing (see https://doc.sagemath.org/html/en/developer/packaging_sage_library.html#module-level-runtime-dependencies)\n \n+Part of #32414\n``````\n",
    "created_at": "2022-11-28T19:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561109",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 Introducing a module `sage.interfaces.abc` with abstract base classes for `isinstance` testing (see https://doc.sagemath.org/html/en/developer/packaging_sage_library.html#module-level-runtime-dependencies)
 
+Part of #32414
``````




---

archive/issue_comments_561110.json:
```json
{
    "body": "Branch: **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)**",
    "created_at": "2022-11-29T18:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561110",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)**



---

archive/issue_comments_561111.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\n```diff\n--- a/src/sage/interfaces/gap.py\n+++ b/src/sage/interfaces/gap.py\n@@ -211,6 +211,9 @@ import platform\n import string\n import warnings\n \n+import sage.rings.abc\n+\n+\n WORKSPACE = gap_workspace_file()\n \n first_try = True\n@@ -1524,7 +1527,7 @@ def gap_reset_workspace(max_workspace_size=None, verbose=False):\n \n \n @instancedoc\n-class GapElement(GapElement_generic):\n+class GapElement(GapElement_generic, sage.rings.abc.GapElement):\n     def __getitem__(self, n):\n         \"\"\"\n         EXAMPLES::\n```\n\nthis is weird - do you mean `sage.interfaces...` there, not `sage.rings...` ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559\"><code>6031878</code></a></td><td><code>sage.interfaces.abc.GapElement: New, use it instead of sage.interfaces.gap.is_GapElement</code></td></tr></table>\n",
    "created_at": "2022-11-29T20:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561111",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>


```diff
--- a/src/sage/interfaces/gap.py
+++ b/src/sage/interfaces/gap.py
@@ -211,6 +211,9 @@ import platform
 import string
 import warnings
 
+import sage.rings.abc
+
+
 WORKSPACE = gap_workspace_file()
 
 first_try = True
@@ -1524,7 +1527,7 @@ def gap_reset_workspace(max_workspace_size=None, verbose=False):
 
 
 @instancedoc
-class GapElement(GapElement_generic):
+class GapElement(GapElement_generic, sage.rings.abc.GapElement):
     def __getitem__(self, n):
         """
         EXAMPLES::
```

this is weird - do you mean `sage.interfaces...` there, not `sage.rings...` ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559"><code>6031878</code></a></td><td><code>sage.interfaces.abc.GapElement: New, use it instead of sage.interfaces.gap.is_GapElement</code></td></tr></table>




---

archive/issue_comments_561112.json:
```json
{
    "body": "Commit: **[`6031878`](https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559)**",
    "created_at": "2022-11-29T20:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561112",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`6031878`](https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559)**



---

archive/issue_comments_561113.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYes, sorry, it should be `sage.interfaces...` of course",
    "created_at": "2022-11-29T20:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561113",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Yes, sorry, it should be `sage.interfaces...` of course



---

archive/issue_comments_561114.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI took (corrected) pieces of this branch to #34770. So this ought to be based on the branch there.",
    "created_at": "2022-11-29T21:26:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561114",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

I took (corrected) pieces of this branch to #34770. So this ought to be based on the branch there.



---

archive/issue_comments_561115.json:
```json
{
    "body": "Dependencies: **#34770**",
    "created_at": "2022-11-29T22:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561115",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34770**



---

archive/issue_comments_561116.json:
```json
{
    "body": "Work Issues: **rebase on #34770**",
    "created_at": "2022-11-29T22:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561116",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase on #34770**



---

archive/issue_comments_561117.json:
```json
{
    "body": "Changed commit from **[`6031878`](https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559)** to **[`8572f15`](https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518)**",
    "created_at": "2022-12-04T21:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6031878`](https://github.com/sagemath/sagetrac-mirror/commit/60318787933917af6759d86f02859d302b4cd559)** to **[`8572f15`](https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518)**



---

archive/issue_comments_561118.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21e38a73fa41698d02ec4c00597e35b5dbd0eda6\"><code>21e38a7</code></a></td><td><code>fix coersion of libgap FFelements; switch to libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4bde80f350975b30e5795aa5ffc7333f5c80911\"><code>d4bde80</code></a></td><td><code>make imports of is_GapEelment uniform across files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb72ef050d94dd32cbb1499243af5de4e9eec22c\"><code>eb72ef0</code></a></td><td><code>avoid is_GapElement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c4a69fdfee7ccf9aebb40bbc29b4453852cacb1\"><code>1c4a69f</code></a></td><td><code>use GapElement from an abstract superclass</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e5ea791a3d846cfd70d9b361f168f6c2fa66a2b\"><code>6e5ea79</code></a></td><td><code>move import of libgap into a function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518\"><code>8572f15</code></a></td><td><code>sage.interfaces.abc.GapElement: New, use it instead of sage.interfaces.gap.is_GapElement</code></td></tr></table>\n",
    "created_at": "2022-12-04T21:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561118",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21e38a73fa41698d02ec4c00597e35b5dbd0eda6"><code>21e38a7</code></a></td><td><code>fix coersion of libgap FFelements; switch to libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4bde80f350975b30e5795aa5ffc7333f5c80911"><code>d4bde80</code></a></td><td><code>make imports of is_GapEelment uniform across files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb72ef050d94dd32cbb1499243af5de4e9eec22c"><code>eb72ef0</code></a></td><td><code>avoid is_GapElement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c4a69fdfee7ccf9aebb40bbc29b4453852cacb1"><code>1c4a69f</code></a></td><td><code>use GapElement from an abstract superclass</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e5ea791a3d846cfd70d9b361f168f6c2fa66a2b"><code>6e5ea79</code></a></td><td><code>move import of libgap into a function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518"><code>8572f15</code></a></td><td><code>sage.interfaces.abc.GapElement: New, use it instead of sage.interfaces.gap.is_GapElement</code></td></tr></table>




---

archive/issue_comments_561119.json:
```json
{
    "body": "Changed dependencies from **#34770** to **#34770, #34823**",
    "created_at": "2022-12-04T22:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561119",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#34770** to **#34770, #34823**



---

archive/issue_comments_561120.json:
```json
{
    "body": "Changed work issues from **rebase on #34770** to none",
    "created_at": "2022-12-04T22:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561120",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rebase on #34770** to none



---

archive/issue_comments_561121.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adc231ef98032f86f42167a98dd86f3800f1ee9f\"><code>adc231e</code></a></td><td><code>remove is_GapElement from number fields code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c67a1089852beca7b5e0b80ad3cb2a319f0ceef\"><code>7c67a10</code></a></td><td><code>deprecating is_GapElement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c75e9b0cc5679ee9ea5773ca1586eacf438e378\"><code>6c75e9b</code></a></td><td><code>better rst, point at sage.interfaces.abc to use</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e99db3af3a814e9accdd10a915f651aabe9faa91\"><code>e99db3a</code></a></td><td><code>src/sage/interfaces/gap.py: Reviewer edits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8024150aa19c47fb893eca9fccb00bcc7c3fd54\"><code>b802415</code></a></td><td><code>Merge #34823</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f\"><code>27c8788</code></a></td><td><code>src/sage/interfaces/abc.py (GpElement): New, use it for isinstance testing</code></td></tr></table>\n",
    "created_at": "2022-12-04T22:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adc231ef98032f86f42167a98dd86f3800f1ee9f"><code>adc231e</code></a></td><td><code>remove is_GapElement from number fields code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c67a1089852beca7b5e0b80ad3cb2a319f0ceef"><code>7c67a10</code></a></td><td><code>deprecating is_GapElement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c75e9b0cc5679ee9ea5773ca1586eacf438e378"><code>6c75e9b</code></a></td><td><code>better rst, point at sage.interfaces.abc to use</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e99db3af3a814e9accdd10a915f651aabe9faa91"><code>e99db3a</code></a></td><td><code>src/sage/interfaces/gap.py: Reviewer edits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8024150aa19c47fb893eca9fccb00bcc7c3fd54"><code>b802415</code></a></td><td><code>Merge #34823</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f"><code>27c8788</code></a></td><td><code>src/sage/interfaces/abc.py (GpElement): New, use it for isinstance testing</code></td></tr></table>




---

archive/issue_comments_561122.json:
```json
{
    "body": "Changed commit from **[`8572f15`](https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518)** to **[`27c8788`](https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f)**",
    "created_at": "2022-12-04T22:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8572f15`](https://github.com/sagemath/sagetrac-mirror/commit/8572f1576a544ac533507cbfe09811d47943b518)** to **[`27c8788`](https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f)**



---

archive/issue_comments_561123.json:
```json
{
    "body": "Author: **Matthias Koeppe, ...**",
    "created_at": "2022-12-04T22:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561123",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe, ...**



---

archive/issue_comments_561124.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26\"><code>106a85b</code></a></td><td><code>src/sage/interfaces/abc.py (SingularElement, Macaulay2Element): New, use for isinstance testing</code></td></tr></table>\n",
    "created_at": "2022-12-04T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561124",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26"><code>106a85b</code></a></td><td><code>src/sage/interfaces/abc.py (SingularElement, Macaulay2Element): New, use for isinstance testing</code></td></tr></table>




---

archive/issue_comments_561125.json:
```json
{
    "body": "Changed commit from **[`27c8788`](https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f)** to **[`106a85b`](https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26)**",
    "created_at": "2022-12-04T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`27c8788`](https://github.com/sagemath/sagetrac-mirror/commit/27c8788aaea7e9e8fd3d4540ce4e56b5242d884f)** to **[`106a85b`](https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26)**



---

archive/issue_events_470497.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-04T22:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470497"
}
```



---

archive/issue_comments_561126.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**",
    "created_at": "2022-12-04T22:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561126",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**



---

archive/issue_comments_561127.json:
```json
{
    "body": "Changed commit from **[`106a85b`](https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26)** to **[`2604174`](https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96)**",
    "created_at": "2022-12-04T23:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561127",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`106a85b`](https://github.com/sagemath/sagetrac-mirror/commit/106a85b699eb16eb328451fa23c2dee133362a26)** to **[`2604174`](https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96)**



---

archive/issue_comments_561128.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96\"><code>2604174</code></a></td><td><code>src/sage/interfaces/abc.py: Add doc</code></td></tr></table>\n",
    "created_at": "2022-12-04T23:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561128",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96"><code>2604174</code></a></td><td><code>src/sage/interfaces/abc.py: Add doc</code></td></tr></table>




---

archive/issue_comments_561129.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)** to **[u/dimpase/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/deprecate_sage_interfaces_is____element_functions)**",
    "created_at": "2022-12-05T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561129",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)** to **[u/dimpase/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/deprecate_sage_interfaces_is____element_functions)**



---

archive/issue_comments_561130.json:
```json
{
    "body": "Changed commit from **[`2604174`](https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96)** to **[`b4d5d5b`](https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f)**",
    "created_at": "2022-12-05T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561130",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`2604174`](https://github.com/sagemath/sagetrac-mirror/commit/2604174d0ad2a7825d356ce8c219033cbf96eb96)** to **[`b4d5d5b`](https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f)**



---

archive/issue_comments_561131.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-12-05T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561131",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_561132.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f\"><code>b4d5d5b</code></a></td><td><code>deprecate is_GpElement</code></td></tr></table>\n",
    "created_at": "2022-12-05T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561132",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f"><code>b4d5d5b</code></a></td><td><code>deprecate is_GpElement</code></td></tr></table>




---

archive/issue_comments_561133.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nwe have still only a fraction done:\n\n```\nAxiom            ?\nExpect           ?\nFriCAS           ?\nGap              done\nGp               done\nInterface        ?\nKash             ?\nLiE              ?\nLisp             ?\nMacaulay2        done\nMagma            ?\nMaxima           ?\nMaximaLib        ?\nR                ?\nSingular         done\n```",
    "created_at": "2022-12-05T10:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561133",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

we have still only a fraction done:

```
Axiom            ?
Expect           ?
FriCAS           ?
Gap              done
Gp               done
Interface        ?
Kash             ?
LiE              ?
Lisp             ?
Macaulay2        done
Magma            ?
Maxima           ?
MaximaLib        ?
R                ?
Singular         done
```



---

archive/issue_comments_561134.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHow about an implementation with a decorator:\n\n```python\nr\"\"\"\nAbstract base classes for interface elements\n\"\"\"\ndef _add_doc():\n    def wrapped(c):\n        c.__doc__ = \"\\n Abstract base class for :class:`~sage.interfaces.gap.\" + c.__name__\n        c.__doc__ += \"\"\"\n    \n  This class is defined for the purpose of ``isinstance`` tests.  It should not be\n  instantiated.\n\n  EXAMPLES:\n\n  By design, there is a unique direct subclass::\n\n  \"\"\"\n        c.__doc__ += \"    sage: len(sage.interfaces.abc.\"+c.__name__+\".__subclasses__()) <= 1\\n      True\"\n        return c\n    return wrapped\n\n\n@_add_doc()\nclass GapElement: pass\n\n\n@_add_doc()\nclass GpElement: pass\n\n...\n```\n\nNeedless to say, docstrings etc work as they should this way. Decorator overhead - very small, if at all, IMHO.",
    "created_at": "2022-12-05T12:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561134",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

How about an implementation with a decorator:

```python
r"""
Abstract base classes for interface elements
"""
def _add_doc():
    def wrapped(c):
        c.__doc__ = "\n Abstract base class for :class:`~sage.interfaces.gap." + c.__name__
        c.__doc__ += """
    
  This class is defined for the purpose of ``isinstance`` tests.  It should not be
  instantiated.

  EXAMPLES:

  By design, there is a unique direct subclass::

  """
        c.__doc__ += "    sage: len(sage.interfaces.abc."+c.__name__+".__subclasses__()) <= 1\n      True"
        return c
    return wrapped


@_add_doc()
class GapElement: pass


@_add_doc()
class GpElement: pass

...
```

Needless to say, docstrings etc work as they should this way. Decorator overhead - very small, if at all, IMHO.



---

archive/issue_comments_561135.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nDoctests are discovered by parsing files; they cannot be supplied by decorators.",
    "created_at": "2022-12-05T17:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561135",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Doctests are discovered by parsing files; they cannot be supplied by decorators.



---

archive/issue_comments_561136.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, Dima Pasechnik**",
    "created_at": "2022-12-05T17:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561136",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, Dima Pasechnik**



---

archive/issue_comments_561137.json:
```json
{
    "body": "Changed branch from **[u/dimpase/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/deprecate_sage_interfaces_is____element_functions)** to **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)**",
    "created_at": "2022-12-05T17:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561137",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/dimpase/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/deprecate_sage_interfaces_is____element_functions)** to **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)**



---

archive/issue_comments_561138.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d\"><code>31128ee</code></a></td><td><code>sage.interfaces.abc: Add MagmaElement, deprecate is_MagmaElement</code></td></tr></table>\n",
    "created_at": "2022-12-05T17:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561138",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d"><code>31128ee</code></a></td><td><code>sage.interfaces.abc: Add MagmaElement, deprecate is_MagmaElement</code></td></tr></table>




---

archive/issue_comments_561139.json:
```json
{
    "body": "Changed commit from **[`b4d5d5b`](https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f)** to **[`31128ee`](https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d)**",
    "created_at": "2022-12-05T17:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561139",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4d5d5b`](https://github.com/sagemath/sagetrac-mirror/commit/b4d5d5b94f175a8171abe0bc0cc5c3e6fe69df2f)** to **[`31128ee`](https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d)**



---

archive/issue_comments_561140.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe remaining is_... functions are not used anywhere",
    "created_at": "2022-12-05T17:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561140",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

The remaining is_... functions are not used anywhere



---

archive/issue_comments_561141.json:
```json
{
    "body": "Changed commit from **[`31128ee`](https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d)** to **[`56b8bf6`](https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376)**",
    "created_at": "2022-12-05T18:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561141",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31128ee`](https://github.com/sagemath/sagetrac-mirror/commit/31128eedbd44371856f5062e0a46cd3de5852a7d)** to **[`56b8bf6`](https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376)**



---

archive/issue_comments_561142.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376\"><code>56b8bf6</code></a></td><td><code>sage.interfaces.abc: Add AxiomElement, deprecate is_AxiomElement</code></td></tr></table>\n",
    "created_at": "2022-12-05T18:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561142",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376"><code>56b8bf6</code></a></td><td><code>sage.interfaces.abc: Add AxiomElement, deprecate is_AxiomElement</code></td></tr></table>




---

archive/issue_comments_561143.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/381aaf9d04096b7a3feeb8824fda4368d8af975b\"><code>381aaf9</code></a></td><td><code>src/sage/interfaces/axiom.py: Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd\"><code>4cd6a82</code></a></td><td><code>src/sage/interfaces/magma.py: Fix up</code></td></tr></table>\n",
    "created_at": "2022-12-05T18:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561143",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/381aaf9d04096b7a3feeb8824fda4368d8af975b"><code>381aaf9</code></a></td><td><code>src/sage/interfaces/axiom.py: Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd"><code>4cd6a82</code></a></td><td><code>src/sage/interfaces/magma.py: Fix up</code></td></tr></table>




---

archive/issue_comments_561144.json:
```json
{
    "body": "Changed commit from **[`56b8bf6`](https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376)** to **[`4cd6a82`](https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd)**",
    "created_at": "2022-12-05T18:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`56b8bf6`](https://github.com/sagemath/sagetrac-mirror/commit/56b8bf6829e797a03f95bb0e4bca44fc81484376)** to **[`4cd6a82`](https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd)**



---

archive/issue_comments_561145.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a\"><code>e957fc9</code></a></td><td><code>sage.interfaces.abc: Add FriCASElement, deprecate is_FriCASElement</code></td></tr></table>\n",
    "created_at": "2022-12-05T18:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561145",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a"><code>e957fc9</code></a></td><td><code>sage.interfaces.abc: Add FriCASElement, deprecate is_FriCASElement</code></td></tr></table>




---

archive/issue_comments_561146.json:
```json
{
    "body": "Changed commit from **[`4cd6a82`](https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd)** to **[`e957fc9`](https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a)**",
    "created_at": "2022-12-05T18:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561146",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4cd6a82`](https://github.com/sagemath/sagetrac-mirror/commit/4cd6a826dc7207ac7d5dcdb11ddf9776ada4e5dd)** to **[`e957fc9`](https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a)**



---

archive/issue_comments_561147.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3\"><code>b9eac04</code></a></td><td><code>sage.interface: Deprecate unused is_*Element functions, but do not introduce ABCs for them</code></td></tr></table>\n",
    "created_at": "2022-12-05T18:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561147",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3"><code>b9eac04</code></a></td><td><code>sage.interface: Deprecate unused is_*Element functions, but do not introduce ABCs for them</code></td></tr></table>




---

archive/issue_comments_561148.json:
```json
{
    "body": "Changed commit from **[`e957fc9`](https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a)** to **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**",
    "created_at": "2022-12-05T18:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561148",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e957fc9`](https://github.com/sagemath/sagetrac-mirror/commit/e957fc9292401d99e4b1cf0a5636c3599a0f436a)** to **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**



---

archive/issue_comments_561149.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nGreen checks, ready for review",
    "created_at": "2022-12-05T22:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561149",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Green checks, ready for review



---

archive/issue_comments_561150.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A17):\n> Doctests are discovered by parsing files; they cannot be supplied by decorators.\n\nYes, they can. In fact, very easy to amend and doctest the docstring of a function:\n\n```\n$ cat d.py \ndef docstr(f):\n    \"\"\"\n    amends the docstring\n    \"\"\"\n    f.__doc__ += \"\"\"\n    >>> tst(1)\n    42\n    \"\"\"\n    return f\n\n@docstr\ndef tst(x):\n    '''adds 1 to x\n    >>> tst(0)\n    1\n    >>> tst(42)\n    42 \n    '''\n    return x+1\n\nif __name__ == '__main__':\n    import doctest\n    doctest.testmod()\n$\n$ python3 d.py \n**********************************************************************\nFile \"/tmp/d.py\", line 16, in __main__.tst\nFailed example:\n    tst(42)\nExpected:\n    42 \nGot:\n    43\n**********************************************************************\nFile \"/tmp/d.py\", line 19, in __main__.tst\nFailed example:\n    tst(1)\nExpected:\n    42\nGot:\n    2\n**********************************************************************\n1 items had failures:\n   2 of   3 in __main__.tst\n```\n\nSee, the original `tst()` had 2 doctests, one was added by `@docstr` - and 3 were tested.\nSo it's perfectly doable for functions.\n\nAs a sanity check:\n\n```\n$ ipython3 \nPython 3.9.2 (default, Feb 28 2021, 17:03:44) \nType 'copyright', 'credits' or 'license' for more information\nIPython 7.20.0 -- An enhanced Interactive Python. Type '?' for help.\n\nIn [1]: from d import  *\n\nIn [2]: tst?\nDocstring:\nadds 1 to x\n>>> tst(0)\n1\n>>> tst(42)\n42 \n\n>>> tst(1)\n42\nFile:      /tmp/d.py\nType:      function\n```\n\n---\n\nAs we see, doctests are run on `__doc__` attributes of functions, not by scraping the text of the file.",
    "created_at": "2022-12-06T09:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561150",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [Matthias KÃ¶ppe](#comment%3A17):
> Doctests are discovered by parsing files; they cannot be supplied by decorators.

Yes, they can. In fact, very easy to amend and doctest the docstring of a function:

```
$ cat d.py 
def docstr(f):
    """
    amends the docstring
    """
    f.__doc__ += """
    >>> tst(1)
    42
    """
    return f

@docstr
def tst(x):
    '''adds 1 to x
    >>> tst(0)
    1
    >>> tst(42)
    42 
    '''
    return x+1

if __name__ == '__main__':
    import doctest
    doctest.testmod()
$
$ python3 d.py 
**********************************************************************
File "/tmp/d.py", line 16, in __main__.tst
Failed example:
    tst(42)
Expected:
    42 
Got:
    43
**********************************************************************
File "/tmp/d.py", line 19, in __main__.tst
Failed example:
    tst(1)
Expected:
    42
Got:
    2
**********************************************************************
1 items had failures:
   2 of   3 in __main__.tst
```

See, the original `tst()` had 2 doctests, one was added by `@docstr` - and 3 were tested.
So it's perfectly doable for functions.

As a sanity check:

```
$ ipython3 
Python 3.9.2 (default, Feb 28 2021, 17:03:44) 
Type 'copyright', 'credits' or 'license' for more information
IPython 7.20.0 -- An enhanced Interactive Python. Type '?' for help.

In [1]: from d import  *

In [2]: tst?
Docstring:
adds 1 to x
>>> tst(0)
1
>>> tst(42)
42 

>>> tst(1)
42
File:      /tmp/d.py
Type:      function
```

---

As we see, doctests are run on `__doc__` attributes of functions, not by scraping the text of the file.



---

archive/issue_comments_561151.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAnd it works, in vanilla Python 3.9, with classes too:\n\n```python\ndef docstr(f):\n    \"\"\"\n    amends the docstring\n    \"\"\"\n    f.__doc__ += \"\"\"\n    >>> len(tst.__subclasses__()) > 0\n    True\n    \"\"\"\n    return f\n\n@docstr\nclass tst:\n    '''testing\n    >>> len(tst.__subclasses__()) <= 1\n    True\n    '''\n    pass\n\nif __name__ == '__main__':\n    import doctest\n    doctest.testmod()\n```\nand so we see 2 doctests being run, one from the class body, one added by the decorator.\n\n```\n$ python3 c.py \n**********************************************************************\nFile \"/tmp/c.py\", line 17, in __main__.tst\nFailed example:\n    len(tst.__subclasses__()) > 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 items had failures:\n   1 of   2 in __main__.tst\n***Test Failed*** 1 failures.\n```\n(You can easily modify this so that the class has empty `__doc__`, then one can create it in the decorator, so it's all sane here in vanilla Python).\n\n\nI can only conclude that Sage's doctest system is borked at this point,and somehow\ndoes a non-vanilla thing. \nIndeed,  `sage -t c.py` does not see the doctests added by the decorator.",
    "created_at": "2022-12-06T10:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561151",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

And it works, in vanilla Python 3.9, with classes too:

```python
def docstr(f):
    """
    amends the docstring
    """
    f.__doc__ += """
    >>> len(tst.__subclasses__()) > 0
    True
    """
    return f

@docstr
class tst:
    '''testing
    >>> len(tst.__subclasses__()) <= 1
    True
    '''
    pass

if __name__ == '__main__':
    import doctest
    doctest.testmod()
```
and so we see 2 doctests being run, one from the class body, one added by the decorator.

```
$ python3 c.py 
**********************************************************************
File "/tmp/c.py", line 17, in __main__.tst
Failed example:
    len(tst.__subclasses__()) > 0
Expected:
    True
Got:
    False
**********************************************************************
1 items had failures:
   1 of   2 in __main__.tst
***Test Failed*** 1 failures.
```
(You can easily modify this so that the class has empty `__doc__`, then one can create it in the decorator, so it's all sane here in vanilla Python).


I can only conclude that Sage's doctest system is borked at this point,and somehow
does a non-vanilla thing. 
Indeed,  `sage -t c.py` does not see the doctests added by the decorator.



---

archive/issue_comments_561152.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI've opened #34828 to fix the doctest issue in [comment:28](#comment%3A28)",
    "created_at": "2022-12-06T11:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561152",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

I've opened #34828 to fix the doctest issue in [comment:28](#comment%3A28)



---

archive/issue_comments_561153.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nLet's not wait for that to be fixed",
    "created_at": "2022-12-06T18:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561153",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Let's not wait for that to be fixed



---

archive/issue_comments_561154.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nlgtm",
    "created_at": "2022-12-06T21:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561154",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

lgtm



---

archive/issue_events_470498.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-06T21:20:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470498"
}
```



---

archive/issue_events_470499.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-06T21:20:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470499"
}
```



---

archive/issue_comments_561155.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThank you!",
    "created_at": "2022-12-06T21:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561155",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Thank you!



---

archive/issue_events_470500.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2023-01-05T23:16:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470500"
}
```



---

archive/issue_events_470501.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2023-01-05T23:16:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34804#event-470501"
}
```



---

archive/issue_comments_561156.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)** to **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**",
    "created_at": "2023-01-05T23:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34804#issuecomment-561156",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/deprecate_sage_interfaces_is____element_functions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecate_sage_interfaces_is____element_functions)** to **[`b9eac04`](https://github.com/sagemath/sagetrac-mirror/commit/b9eac04c741264d2731d6d0b83b43a7fdeef98a3)**
