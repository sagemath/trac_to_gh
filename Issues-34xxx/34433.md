# Issue 34433: Upgrade pillow to 9.2.0, update spkg-install to use --config-settings

archive/issues_034196.json:
```json
{
    "body": "We upgrade `pillow` to 9.2.0 \n\nWe modernize how we pass build options to the package, using the PEP 517 `--config-settings` mechanism. This is the same as in #34421, where it was needed as a critical bug fix. (For `pillow` there is no bug because the analysis in #33138 is still true for our current version of `pillow`.)\n\n\nCC:  @dimpase @isuruf\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/upgrade_pillow_to_9_2_0__fix_spkg_install_to_use___config_settings\n\nStatus: needs_work\n\nDependencies: #34344\n\nCommit: 36ece20617918e1e18bb81f02bf9424c25b13db7\n\nIssue created by migration from https://trac.sagemath.org/ticket/34433\n\n",
    "created_at": "2022-08-25T17:42:12Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Upgrade pillow to 9.2.0, update spkg-install to use --config-settings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34433",
    "user": "https://github.com/mkoeppe"
}
```
We upgrade `pillow` to 9.2.0 

We modernize how we pass build options to the package, using the PEP 517 `--config-settings` mechanism. This is the same as in #34421, where it was needed as a critical bug fix. (For `pillow` there is no bug because the analysis in #33138 is still true for our current version of `pillow`.)


CC:  @dimpase @isuruf

Author: Matthias Koeppe

Branch: u/mkoeppe/upgrade_pillow_to_9_2_0__fix_spkg_install_to_use___config_settings

Status: needs_work

Dependencies: #34344

Commit: 36ece20617918e1e18bb81f02bf9424c25b13db7

Issue created by migration from https://trac.sagemath.org/ticket/34433





---

archive/issue_comments_677417.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/upgrade_pillow_to_9_2_0__fix_spkg_install_to_use___config_settings\"",
    "created_at": "2022-08-25T17:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677417",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/upgrade_pillow_to_9_2_0__fix_spkg_install_to_use___config_settings"



---

archive/issue_comments_677418.json:
```json
{
    "body": "Changing commit from \"\" to \"36ece20617918e1e18bb81f02bf9424c25b13db7\"",
    "created_at": "2022-08-25T17:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677418",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "36ece20617918e1e18bb81f02bf9424c25b13db7"



---

archive/issue_comments_677419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-25T17:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677419",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_677420.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[418001e](https://github.com/sagemath/sagetrac-mirror/commit/418001e025f0a513755349de6e926e04895a3690)|`build/pkgs/pillow: Update to 9.2.0`|\n|[24baa5c](https://github.com/sagemath/sagetrac-mirror/commit/24baa5c4f263eaf945e8eb92cc33ae193085131d)|`build/pkgs/pillow/spkg-install.in: Remove ancient workarounds, outdated comment`|\n|[2a76bc1](https://github.com/sagemath/sagetrac-mirror/commit/2a76bc190eedf13eff9f62998971c3c1e118c97a)|`build/pkgs/pillow/spkg-install.in: Do not pass -I and -L to build_ext; setup.py no longer handles them`|\n|[f42e830](https://github.com/sagemath/sagetrac-mirror/commit/f42e830a6bb7981acae83681d24b41f4e6d95387)|`build/bin/sage-dist-helpers (sdh_prefix_args_equals_unquoted): New`|\n|[36ece20](https://github.com/sagemath/sagetrac-mirror/commit/36ece20617918e1e18bb81f02bf9424c25b13db7)|`build/pkgs/pillow/spkg-install.in: Use pip --config-settings`|",
    "created_at": "2022-08-25T17:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677420",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[418001e](https://github.com/sagemath/sagetrac-mirror/commit/418001e025f0a513755349de6e926e04895a3690)|`build/pkgs/pillow: Update to 9.2.0`|
|[24baa5c](https://github.com/sagemath/sagetrac-mirror/commit/24baa5c4f263eaf945e8eb92cc33ae193085131d)|`build/pkgs/pillow/spkg-install.in: Remove ancient workarounds, outdated comment`|
|[2a76bc1](https://github.com/sagemath/sagetrac-mirror/commit/2a76bc190eedf13eff9f62998971c3c1e118c97a)|`build/pkgs/pillow/spkg-install.in: Do not pass -I and -L to build_ext; setup.py no longer handles them`|
|[f42e830](https://github.com/sagemath/sagetrac-mirror/commit/f42e830a6bb7981acae83681d24b41f4e6d95387)|`build/bin/sage-dist-helpers (sdh_prefix_args_equals_unquoted): New`|
|[36ece20](https://github.com/sagemath/sagetrac-mirror/commit/36ece20617918e1e18bb81f02bf9424c25b13db7)|`build/pkgs/pillow/spkg-install.in: Use pip --config-settings`|



---

archive/issue_comments_677421.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-08-25T17:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677421",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_677422.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-08-25T19:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677422",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_108743.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "rename": {
        "from": "Upgrade pillow to 9.2.0, fix spkg-install to use --config-settings",
        "to": "Upgrade pillow to 9.2.0, update spkg-install to use --config-settings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34433#event-108743"
}
```



---

archive/issue_comments_677423.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+We upgrade `pillow` to 9.2.0 \n \n+We modernize how we pass build options to the package, using the PEP 517 `--config-settings` mechanism. This is the same as in #34421, where it was needed as a critical bug fix. (For `pillow` there is no bug because the analysis in #33138 is still true for our current version of `pillow`.)\n+\n``````\n",
    "created_at": "2022-08-25T19:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677423",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+We upgrade `pillow` to 9.2.0 
 
+We modernize how we pass build options to the package, using the PEP 517 `--config-settings` mechanism. This is the same as in #34421, where it was needed as a critical bug fix. (For `pillow` there is no bug because the analysis in #33138 is still true for our current version of `pillow`.)
+
``````




---

archive/issue_events_108744.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T19:32:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34433#event-108744"
}
```



---

archive/issue_comments_677424.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis will have to wait for the setuptools upgrade (#34344) because of limitations of our current setuptools version; see the comments added on the branch of #34430.",
    "created_at": "2022-08-25T19:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677424",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
This will have to wait for the setuptools upgrade (#34344) because of limitations of our current setuptools version; see the comments added on the branch of #34430.



---

archive/issue_comments_677425.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#34344\"",
    "created_at": "2022-08-25T19:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34433#issuecomment-677425",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#34344"
