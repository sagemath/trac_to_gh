# Issue 34615: Update to sphinx 5.2

archive/issues_034378.json:
```json
{
    "assignees": [],
    "body": "New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.\n\nTherefore we think it is time to upgrade sphinx in sage.\n\nThe ticket update \n* sphinx to 5.2.3 \n* sphinxcontrib_websupport to 1.2.4 (no other sphinxcontrib package seem out of date)\n* imagesize to 1.4.1 (required dependency)\n\nCC:  @kiwifb\n\nBranch: **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**\n\nReviewer: **Kwankyu Lee**\n\nAuthor: **Antonio Rojas, Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34615_\n\n",
    "closed_at": "2022-10-16T22:15:42Z",
    "created_at": "2022-09-29T19:24:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update to sphinx 5.2",
    "type": "issue",
    "updated_at": "2022-10-31T04:57:22Z",
    "url": "https://github.com/sagemath/sage/issues/34615",
    "user": "https://github.com/antonio-rojas"
}
```
New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.

Therefore we think it is time to upgrade sphinx in sage.

The ticket update 
* sphinx to 5.2.3 
* sphinxcontrib_websupport to 1.2.4 (no other sphinxcontrib package seem out of date)
* imagesize to 1.4.1 (required dependency)

CC:  @kiwifb

Branch: **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**

Reviewer: **Kwankyu Lee**

Author: **Antonio Rojas, François Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/34615_





---

archive/issue_events_439167.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T19:24:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439167"
}
```



---

archive/issue_events_439168.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T19:24:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439168"
}
```



---

archive/issue_comments_562104.json:
```json
{
    "body": "Branch: **[u/arojas/fix_build_with_sphinx_5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/fix_build_with_sphinx_5_2)**",
    "created_at": "2022-09-29T19:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562104",
    "user": "https://github.com/antonio-rojas"
}
```

Branch: **[u/arojas/fix_build_with_sphinx_5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/fix_build_with_sphinx_5_2)**



---

archive/issue_comments_562105.json:
```json
{
    "body": "Commit: **[c2e610c](https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb)**",
    "created_at": "2022-09-29T19:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562105",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[c2e610c](https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb)**



---

archive/issue_comments_562106.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb\">c2e610c</a></td><td><code>Fix build with sphinx 5.2</code></td></tr></table>\n",
    "created_at": "2022-09-29T19:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562106",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb">c2e610c</a></td><td><code>Fix build with sphinx 5.2</code></td></tr></table>




---

archive/issue_events_439169.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T19:31:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439169"
}
```



---

archive/issue_comments_562107.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Still works with older sphinx (surprisingly)\n``````\n",
    "created_at": "2022-09-29T19:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562107",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Still works with older sphinx (surprisingly)
``````




---

archive/issue_comments_562108.json:
```json
{
    "body": "Author: **Antonio Rojas**",
    "created_at": "2022-09-29T19:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562108",
    "user": "https://github.com/antonio-rojas"
}
```

Author: **Antonio Rojas**



---

archive/issue_events_439170.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T19:31:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439170"
}
```



---

archive/issue_events_439171.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T19:31:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439171"
}
```



---

archive/issue_comments_562109.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI haven't been pushed to 5.2 yet, so I haven't seen it. Although I could have had reports. This is quite different from the previous fix we pushed. Was it supposed to be implicit in older version of sphinx.",
    "created_at": "2022-09-29T19:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562109",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'>Comment 4:</a>
I haven't been pushed to 5.2 yet, so I haven't seen it. Although I could have had reports. This is quite different from the previous fix we pushed. Was it supposed to be implicit in older version of sphinx.



---

archive/issue_comments_562110.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nNo, this is a new attribute in 5.2. That's why I was surprised this still works with older sphinx\n\nhttps://github.com/sphinx-doc/sphinx/commit/7da60f23539bd5d1a79bdbcf67cd5164311182b7",
    "created_at": "2022-09-29T19:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562110",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:5'>Comment 5:</a>
No, this is a new attribute in 5.2. That's why I was surprised this still works with older sphinx

https://github.com/sphinx-doc/sphinx/commit/7da60f23539bd5d1a79bdbcf67cd5164311182b7



---

archive/issue_events_439172.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T20:03:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439172"
}
```



---

archive/issue_events_439173.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-29T20:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439173"
}
```



---

archive/issue_comments_562111.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAh, no. It does throw errors with older sphinx, although docs still seem to build fine.",
    "created_at": "2022-09-29T20:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562111",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:6'>Comment 6:</a>
Ah, no. It does throw errors with older sphinx, although docs still seem to build fine.



---

archive/issue_comments_562112.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI suggest we take the opportunity to upgrade sphinx in sage itself then. I didn't do it for 5.1 and that may have been lazy on my part :)",
    "created_at": "2022-09-29T20:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562112",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
I suggest we take the opportunity to upgrade sphinx in sage itself then. I didn't do it for 5.1 and that may have been lazy on my part :)



---

archive/issue_comments_562113.json:
```json
{
    "body": "Changed commit from **[c2e610c](https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb)** to **[0be8a8f](https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062)**",
    "created_at": "2022-09-29T21:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562113",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c2e610c](https://github.com/sagemath/sagetrac-mirror/commit/c2e610cfba02a8cb4db7d7691bfc8210be8a1ffb)** to **[0be8a8f](https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062)**



---

archive/issue_comments_562114.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062\">0be8a8f</a></td><td><code>Update sphinx to 5.2</code></td></tr></table>\n",
    "created_at": "2022-09-29T21:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562114",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062">0be8a8f</a></td><td><code>Update sphinx to 5.2</code></td></tr></table>




---

archive/issue_events_439174.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-09-29T21:15:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "title_is": "Update to sphinx 5.2",
    "title_was": "Fix build with sphinx 5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439174"
}
```



---

archive/issue_comments_562115.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-Still works with older sphinx (surprisingly)\n+New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.\n+\n+Therefore we think it is time to upgrade sphinx in sage.\n``````\n",
    "created_at": "2022-09-29T21:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562115",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-Still works with older sphinx (surprisingly)
+New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.
+
+Therefore we think it is time to upgrade sphinx in sage.
``````




---

archive/issue_comments_562116.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI am busy this morning but if you don't do more, I'll look at the sphinx contribution packages that may need updating or- be added to sage.",
    "created_at": "2022-09-29T21:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562116",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'>Comment 9:</a>
I am busy this morning but if you don't do more, I'll look at the sphinx contribution packages that may need updating or- be added to sage.



---

archive/issue_comments_562117.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nEverything builds fine and docs look OK",
    "created_at": "2022-09-30T06:00:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562117",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:10'>Comment 10:</a>
Everything builds fine and docs look OK



---

archive/issue_events_439175.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T06:00:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439175"
}
```



---

archive/issue_events_439176.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T06:00:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439176"
}
```



---

archive/issue_comments_562118.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAfter looking more closely, only sphinxcontrib_websupport would need a version bump.",
    "created_at": "2022-10-05T09:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562118",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'>Comment 11:</a>
After looking more closely, only sphinxcontrib_websupport would need a version bump.



---

archive/issue_comments_562119.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.\n \n Therefore we think it is time to upgrade sphinx in sage.\n+\n+The ticket update sphinx to 5.2.0 and sphinxcontrib_websupport to 1.2.4 (no other sphinx package need updating).\n``````\n",
    "created_at": "2022-10-05T09:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562119",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 New changes in sphinx requires new attributes to be defined. Supporting this change introduces non fatal error and warnings when building with older version of sphinx.
 
 Therefore we think it is time to upgrade sphinx in sage.
+
+The ticket update sphinx to 5.2.0 and sphinxcontrib_websupport to 1.2.4 (no other sphinx package need updating).
``````




---

archive/issue_comments_562120.json:
```json
{
    "body": "Changed commit from **[0be8a8f](https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062)** to **[4a8c2b2](https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1)**",
    "created_at": "2022-10-05T09:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562120",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[0be8a8f](https://github.com/sagemath/sagetrac-mirror/commit/0be8a8fa6ccea5c8514828913757be9c4da86062)** to **[4a8c2b2](https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1)**



---

archive/issue_comments_562121.json:
```json
{
    "body": "Changed author from **Antonio Rojas** to **Antonio Rojas, Fran\u00e7ois Bissey**",
    "created_at": "2022-10-05T09:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562121",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Antonio Rojas** to **Antonio Rojas, François Bissey**



---

archive/issue_comments_562122.json:
```json
{
    "body": "Changed branch from **[u/arojas/fix_build_with_sphinx_5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/fix_build_with_sphinx_5_2)** to **[u/fbissey/sphinx5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx5_2)**",
    "created_at": "2022-10-05T09:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562122",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/arojas/fix_build_with_sphinx_5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/fix_build_with_sphinx_5_2)** to **[u/fbissey/sphinx5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx5_2)**



---

archive/issue_comments_562123.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1\">4a8c2b2</a></td><td><code>update sphinxcontrib_websupport to latest</code></td></tr></table>\n",
    "created_at": "2022-10-05T09:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562123",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'>Comment 12:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1">4a8c2b2</a></td><td><code>update sphinxcontrib_websupport to latest</code></td></tr></table>




---

archive/issue_comments_562124.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nOn macos, with the ticket branch merged to the develop branch, I encountered\n\n```\n[sagemath_doc_html-none]     raise DistributionNotFound(req, requirers)\n[sagemath_doc_html-none] pkg_resources.DistributionNotFound: The 'imagesize>=1.3'\n distribution was not found and is required by sphinx\n```",
    "created_at": "2022-10-07T13:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562124",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'>Comment 13:</a>
On macos, with the ticket branch merged to the develop branch, I encountered

```
[sagemath_doc_html-none]     raise DistributionNotFound(req, requirers)
[sagemath_doc_html-none] pkg_resources.DistributionNotFound: The 'imagesize>=1.3'
 distribution was not found and is required by sphinx
```



---

archive/issue_comments_562125.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nUpgrading to `imagesize-1.4.1` the latest gets it rolling.",
    "created_at": "2022-10-07T13:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562125",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'>Comment 14:</a>
Upgrading to `imagesize-1.4.1` the latest gets it rolling.



---

archive/issue_comments_562126.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [Kwankyu Lee](#comment%3A14):\n> Upgrading to `imagesize-1.4.1` the latest gets it rolling.\n\nIt ended up successfully, and the built documents look good.",
    "created_at": "2022-10-07T20:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562126",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [Kwankyu Lee](#comment%3A14):
> Upgrading to `imagesize-1.4.1` the latest gets it rolling.

It ended up successfully, and the built documents look good.



---

archive/issue_comments_562127.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nYou are right, the version of imagesize was way to low in sage (1.2). Updating now.",
    "created_at": "2022-10-09T21:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562127",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>Comment 17:</a>
You are right, the version of imagesize was way to low in sage (1.2). Updating now.



---

archive/issue_comments_562128.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cf583646a4d990d3e5d3163ba7c620a1712f141\">5cf5836</a></td><td><code>update imagesize to 1.4.1. Minimum required for sphinx 5.2 is 1.3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f\">8f8af65</a></td><td><code>update sphinx to 5.2.3</code></td></tr></table>\n",
    "created_at": "2022-10-09T21:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562128",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cf583646a4d990d3e5d3163ba7c620a1712f141">5cf5836</a></td><td><code>update imagesize to 1.4.1. Minimum required for sphinx 5.2 is 1.3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f">8f8af65</a></td><td><code>update sphinx to 5.2.3</code></td></tr></table>




---

archive/issue_comments_562129.json:
```json
{
    "body": "Changed commit from **[4a8c2b2](https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1)** to **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**",
    "created_at": "2022-10-09T21:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562129",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4a8c2b2](https://github.com/sagemath/sagetrac-mirror/commit/4a8c2b2dd933b82ce3ecc2953dcc5347ed7dd2c1)** to **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**



---

archive/issue_comments_562130.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nUpdated imagesize and pushed sphinx to 5.2.3.",
    "created_at": "2022-10-09T22:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562130",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'>Comment 19:</a>
Updated imagesize and pushed sphinx to 5.2.3.



---

archive/issue_comments_562131.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,7 @@\n \n Therefore we think it is time to upgrade sphinx in sage.\n \n-The ticket update sphinx to 5.2.0 and sphinxcontrib_websupport to 1.2.4 (no other sphinx package need updating).\n+The ticket update \n+* sphinx to 5.2.3 \n+* sphinxcontrib_websupport to 1.2.4 (no other sphinxcontrib package seem out of date)\n+* imagesize to 1.4.1 (required dependency)\n``````\n",
    "created_at": "2022-10-09T22:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562131",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,7 @@
 
 Therefore we think it is time to upgrade sphinx in sage.
 
-The ticket update sphinx to 5.2.0 and sphinxcontrib_websupport to 1.2.4 (no other sphinx package need updating).
+The ticket update 
+* sphinx to 5.2.3 
+* sphinxcontrib_websupport to 1.2.4 (no other sphinxcontrib package seem out of date)
+* imagesize to 1.4.1 (required dependency)
``````




---

archive/issue_comments_562132.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThanks.\n\nIt works well and looks good to me.",
    "created_at": "2022-10-10T02:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562132",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:20'>Comment 20:</a>
Thanks.

It works well and looks good to me.



---

archive/issue_comments_562133.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-10-10T02:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562133",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_events_439177.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-10-10T02:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439177"
}
```



---

archive/issue_events_439178.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-10-10T02:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439178"
}
```



---

archive/issue_events_439179.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-16T22:15:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439179"
}
```



---

archive/issue_events_439180.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "75636756b8f9d9909cb69c30ea8bb3167e422989",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-10-16T22:15:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34615#event-439180"
}
```



---

archive/issue_comments_562134.json:
```json
{
    "body": "Changed branch from **[u/fbissey/sphinx5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx5_2)** to **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**",
    "created_at": "2022-10-16T22:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562134",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/sphinx5_2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx5_2)** to **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)**



---

archive/issue_comments_562135.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThis upgrade seems to have introduced an unpleasant change of doc appearance. Compare\n\nhttps://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/index.html\n\nwith\n\nhttps://doc.sagemath.org/html/en/reference/curves/index.html\n\nSee all the second-level headings. Those weren't before.",
    "created_at": "2022-10-24T06:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562135",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'>Comment 22:</a>
This upgrade seems to have introduced an unpleasant change of doc appearance. Compare

https://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/index.html

with

https://doc.sagemath.org/html/en/reference/curves/index.html

See all the second-level headings. Those weren't before.



---

archive/issue_comments_562136.json:
```json
{
    "body": "Changed commit from **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)** to none",
    "created_at": "2022-10-24T06:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562136",
    "user": "https://github.com/kwankyu"
}
```

Changed commit from **[8f8af65](https://github.com/sagemath/sagetrac-mirror/commit/8f8af65e54d3a9962cfab40f15dc23f4e955b43f)** to none



---

archive/issue_comments_562137.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nI suspect that the upgrade does not work well with sage's custom `autodoc`.",
    "created_at": "2022-10-25T01:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562137",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'>Comment 23:</a>
I suspect that the upgrade does not work well with sage's custom `autodoc`.



---

archive/issue_comments_562138.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nPossibly, it is hardly news that we should get rid of it as quickly as we can. I wanted to ask whether you had an idea why there are subsection for say \"plane conics\" but not \"curves\"? When I tried to post yesterday, trac was in maintenance :(",
    "created_at": "2022-10-25T01:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562138",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'>Comment 24:</a>
Possibly, it is hardly news that we should get rid of it as quickly as we can. I wanted to ask whether you had an idea why there are subsection for say "plane conics" but not "curves"? When I tried to post yesterday, trac was in maintenance :(



---

archive/issue_comments_562139.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [Fran\u00e7ois Bissey](#comment%3A24):\n> Possibly, it is hardly news that we should get rid of it as quickly as we can. \n\nI agree! But that seems a formidable task (unless we just leave the consequential \"broken doc\" at it is).\n\n> I wanted to ask whether you had an idea why there are subsection for say \"plane conics\" but not \"curves\"?\n\nIt is because of the `maxdepth: 2`. See \n\n```\nPlane conics\n============\n\n.. toctree::\n   :maxdepth: 2 \n```\nHence it is normal. The real problem seems that definitions doc is regarded as content headings. I don't know if this is a feature of the upgraded sphinx or a problem of `sage_autodoc`...",
    "created_at": "2022-10-25T02:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562139",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [François Bissey](#comment%3A24):
> Possibly, it is hardly news that we should get rid of it as quickly as we can. 

I agree! But that seems a formidable task (unless we just leave the consequential "broken doc" at it is).

> I wanted to ask whether you had an idea why there are subsection for say "plane conics" but not "curves"?

It is because of the `maxdepth: 2`. See 

```
Plane conics
============

.. toctree::
   :maxdepth: 2 
```
Hence it is normal. The real problem seems that definitions doc is regarded as content headings. I don't know if this is a feature of the upgraded sphinx or a problem of `sage_autodoc`...



---

archive/issue_comments_562140.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nA simple and laborious solution would be to change all affected `maxdepth: 2` to `maxdepth: 1`. This seems also a correct solution. Then we can avoid touching `sage_autodoc` :)",
    "created_at": "2022-10-25T04:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562140",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'>Comment 26:</a>
A simple and laborious solution would be to change all affected `maxdepth: 2` to `maxdepth: 1`. This seems also a correct solution. Then we can avoid touching `sage_autodoc` :)



---

archive/issue_comments_562141.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [Kwankyu Lee](#comment%3A26):\n> A simple and laborious solution would be to change all affected `maxdepth: 2` to `maxdepth: 1`. This seems also a correct solution. Then we can avoid touching `sage_autodoc` :)\n\nThis certainly does not solve all problems. See the \"Contents\" on the right\n\nhttps://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/sage/schemes/plane_conics/constructor.html",
    "created_at": "2022-10-25T08:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562141",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [Kwankyu Lee](#comment%3A26):
> A simple and laborious solution would be to change all affected `maxdepth: 2` to `maxdepth: 1`. This seems also a correct solution. Then we can avoid touching `sage_autodoc` :)

This certainly does not solve all problems. See the "Contents" on the right

https://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/sage/schemes/plane_conics/constructor.html



---

archive/issue_comments_562142.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI don't think that's bad. It is on a static right space while the content is just in a middle frame. This really looks like a standard template. One I have seen in other places.\n\nOf course, if it is inconsistent with other pages, we have a problem.",
    "created_at": "2022-10-25T08:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562142",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'>Comment 28:</a>
I don't think that's bad. It is on a static right space while the content is just in a middle frame. This really looks like a standard template. One I have seen in other places.

Of course, if it is inconsistent with other pages, we have a problem.



---

archive/issue_comments_562143.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [Fran\u00e7ois Bissey](#comment%3A28):\n> I don't think that's bad. It is on a static right space while the content is just in a middle frame. This really looks like a standard template. One I have seen in other places.\n\nObject definitions in TOC is a new standard feature of the upgraded Sphinx. But this changes our doc in an unintended way. This is fixed now in #34706. Needs review.",
    "created_at": "2022-10-31T04:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34615#issuecomment-562143",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [François Bissey](#comment%3A28):
> I don't think that's bad. It is on a static right space while the content is just in a middle frame. This really looks like a standard template. One I have seen in other places.

Object definitions in TOC is a new standard feature of the upgraded Sphinx. But this changes our doc in an unintended way. This is fixed now in #34706. Needs review.
