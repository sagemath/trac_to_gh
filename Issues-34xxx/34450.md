# Issue 34450: Standard wheel packages

archive/issues_034213.json:
```json
{
    "body": "CC:  @dimpase @kwankyu @jhpalmieri\n\nWe add a mechanism to install Python packages from (platform-independent) wheels instead of from source distributions.\n\nThis will allow us to make packages such as `furo` and `jupyterlab` standard. Currently they are `pip` packages, as they need internet connectivity to get Javascript packages (via `nodeenv`).\n\nHere we make `furo` a standard wheel package. This is for #33833.\n\nIssue created by migration from https://trac.sagemath.org/ticket/34450\n\n",
    "closed_at": "2022-09-07T23:10:38Z",
    "created_at": "2022-08-29T04:59:04Z",
    "labels": [
        "component: build",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Standard wheel packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34450",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @kwankyu @jhpalmieri

We add a mechanism to install Python packages from (platform-independent) wheels instead of from source distributions.

This will allow us to make packages such as `furo` and `jupyterlab` standard. Currently they are `pip` packages, as they need internet connectivity to get Javascript packages (via `nodeenv`).

Here we make `furo` a standard wheel package. This is for #33833.

Issue created by migration from https://trac.sagemath.org/ticket/34450





---

archive/issue_comments_484743.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-29T05:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484743",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_484744.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-08-29T05:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484744",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_484745.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T05:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484746.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T05:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T05:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484748.json:
```json
{
    "body": "If `non-platform` is not already a standard term, then I suggest `platform-independent`, which is longer but easier to understand and reads well than `non-platform`",
    "created_at": "2022-08-29T06:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484748",
    "user": "https://github.com/kwankyu"
}
```

If `non-platform` is not already a standard term, then I suggest `platform-independent`, which is longer but easier to understand and reads well than `non-platform`



---

archive/issue_comments_484749.json:
```json
{
    "body": "Please feel free to push improvements to the documentation to the ticket. I have to stop here for tonight.\n\nI don't see \"platform-independent\" in https://peps.python.org/pep-0425/; it uses the terminology \"pure Python\". There might be other places to look at",
    "created_at": "2022-08-29T06:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484749",
    "user": "https://github.com/mkoeppe"
}
```

Please feel free to push improvements to the documentation to the ticket. I have to stop here for tonight.

I don't see "platform-independent" in https://peps.python.org/pep-0425/; it uses the terminology "pure Python". There might be other places to look at



---

archive/issue_comments_484750.json:
```json
{
    "body": "This failure seems related:\n\n```\nInstalling jupyter_jsmol-2022.1.0\nWARNING: Disabling all use of wheels due to the use of --build-option / --global-option / --install-option.\nLooking in links: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels\nProcessing /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src\n  Installing build dependencies: started\n  Running command pip subprocess to install build dependencies\n  Looking in links: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels\n  ERROR: Could not find a version that satisfies the requirement jupyter_packaging~=0.7.9 (from versions: none)\n  ERROR: No matching distribution found for jupyter_packaging~=0.7.9\n  error: subprocess-exited-with-error\n  \n  \u00d7 pip subprocess to install build dependencies did not run successfully.\n  \u2502 exit code: 1\n  \u2570\u2500> See above for output.\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\n  full command: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin/python3 /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-standalone-pip-lw2mb0lw/__env_pip__.zip/pip install --ignore-installed --no-user --prefix /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-build-env-l0gj_p8c/overlay --no-warn-script-location --no-binary :all: --only-binary :none: --no-index --find-links /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels -- 'jupyter_packaging~=0.7.9' 'jupyterlab>=3.0.0,==3.*' 'setuptools>=40.8.0' wheel\n  cwd: [inherit]\n  Installing build dependencies: finished with status 'error'\nerror: subprocess-exited-with-error\n\n\u00d7 pip subprocess to install build dependencies did not run successfully.\n\u2502 exit code: 1\n\u2570\u2500> See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\nWarning: building with \"python3 -m pip wheel --wheel-dir=dist --verbose --no-deps --no-index --isolated --ignore-requires-python --find-links=/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels\" failed.\nRetrying with \"python3 -m pip wheel --wheel-dir=dist --verbose --no-deps --no-index --isolated --ignore-requires-python --no-build-isolation --no-binary :all:\".\nWARNING: Disabling all use of wheels due to the use of --build-option / --global-option / --install-option.\nProcessing /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src\n  Preparing metadata (pyproject.toml): started\n  Running command Preparing metadata (pyproject.toml)\n  setup.py entered\n  $PATH=/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/src/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/usr/local/opt/polymake/bin:/usr/local/opt/texinfo/bin:/usr/local/opt/gettext/bin:/Applications/google-cloud-sdk/bin:.:/Users/kwankyu/Workplace/bin:/usr/local/bin:/usr/local/sbin:/usr/texbin:/Applications/Macaulay2-1.20/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Library/TeX/texbin:/Library/Apple/usr/bin:/Applications/Magma\n  <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. \"\n  Use `wrap_installers` to handle prebuild steps in cmdclass.\n  Use `get_data_files` to handle data files.\n  Use `include_package_data=True` and `MANIFEST.in` for package data.\n\n  <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`\n  running dist_info\n  creating /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info\n  writing /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/PKG-INFO\n  writing dependency_links to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/dependency_links.txt\n  writing requirements to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/requires.txt\n  writing top-level names to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/top_level.txt\n  writing manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'\n  reading manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'\n  reading manifest template 'MANIFEST.in'\n  no previously-included directories found matching 'examples'\n  no previously-included directories found matching 'tests/build'\n  no previously-included directories found matching '**/node_modules'\n  warning: no previously-included files matching '*~' found anywhere in distribution\n  warning: no previously-included files matching '*.pyc' found anywhere in distribution\n  warning: no previously-included files matching '*.pyo' found anywhere in distribution\n  warning: no previously-included files matching '.git' found anywhere in distribution\n  warning: no previously-included files matching '.ipynb_checkpoints' found anywhere in distribution\n  warning: no previously-included files matching '*.map' found anywhere in distribution\n  adding license file 'LICENSE'\n  writing manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'\n  creating '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol-2022.1.0.dist-info'\n  adding license file \"LICENSE\" (matched pattern \"LICEN[CS]E*\")\n  Preparing metadata (pyproject.toml): finished with status 'done'\nBuilding wheels for collected packages: jupyter-jsmol\n  WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517\n  Building wheel for jupyter-jsmol (pyproject.toml): started\n  Running command Building wheel for jupyter-jsmol (pyproject.toml)\n  setup.py entered\n  $PATH=/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/src/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/usr/local/opt/polymake/bin:/usr/local/opt/texinfo/bin:/usr/local/opt/gettext/bin:/Applications/google-cloud-sdk/bin:.:/Users/kwankyu/Workplace/bin:/usr/local/bin:/usr/local/sbin:/usr/texbin:/Applications/Macaulay2-1.20/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Library/TeX/texbin:/Library/Apple/usr/bin:/Applications/Magma\n  <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. \"\n  Use `wrap_installers` to handle prebuild steps in cmdclass.\n  Use `get_data_files` to handle data files.\n  Use `include_package_data=True` and `MANIFEST.in` for package data.\n\n  <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`\n  running bdist_wheel\n  running jsdeps\n  Installing build dependencies with npm.  This may take a while...\n  > yarn install\n  yarn install v1.22.19\n  warning package.json: No license field\n  warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n  warning jupyter-jsmol@2022.1.0: No license field\n  [1/4] Resolving packages...\n  [2/4] Fetching packages...\n  info There appears to be trouble with your network connection. Retrying...\n  info There appears to be trouble with your network connection. Retrying...\n  info There appears to be trouble with your network connection. Retrying...\n  info There appears to be trouble with your network connection. Retrying...\n  error An unexpected error occurred: \"https://registry.yarnpkg.com/@jupyterlab/nbformat/-/nbformat-3.1.18.tgz: tunneling socket could not be established, cause=connect ETIMEDOUT 192.0.2.0:5187\".\n  info If you think this is a bug, please open a bug report with the information provided in \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src/js/yarn-error.log\".\n  info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.\n  Traceback (most recent call last):\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 363, in <module>\n      main()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 345, in main\n      json_out['return_val'] = hook(**hook_input['kwargs'])\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 261, in build_wheel\n      return _build_backend().build_wheel(wheel_directory, config_settings,\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py\", line 244, in build_wheel\n      return self._build_with_temp_dir(['bdist_wheel'], '.whl',\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py\", line 229, in _build_with_temp_dir\n      self.run_setup()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py\", line 174, in run_setup\n      exec(code, locals())\n    File \"<string>\", line 95, in <module>\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/__init__.py\", line 87, in setup\n      return distutils.core.setup(**attrs)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/core.py\", line 177, in setup\n      return run_commands(dist)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/core.py\", line 193, in run_commands\n      dist.run_commands()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py\", line 968, in run_commands\n      self.run_command(cmd)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/dist.py\", line 1217, in run_command\n      super().run_command(command)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\n      cmd_obj.run()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 725, in run\n      [self.run_command(cmd) for cmd in cmds]\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 725, in <listcomp>\n      [self.run_command(cmd) for cmd in cmds]\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/cmd.py\", line 317, in run_command\n      self.distribution.run_command(command)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/dist.py\", line 1217, in run_command\n      super().run_command(command)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\n      cmd_obj.run()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 344, in run\n      c.run()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 694, in run\n      builder()\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 230, in builder\n      run(npm_cmd + [\"install\"], cwd=node_package)\n    File \"/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py\", line 296, in run\n      return subprocess.check_call(cmd, **kwargs)\n    File \"/usr/local/Cellar/python@3.9/3.9.13_2/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 373, in check_call\n      raise CalledProcessError(retcode, cmd)\n  subprocess.CalledProcessError: Command '['/usr/local/bin/yarn', 'install']' returned non-zero exit status 1.\n  error: subprocess-exited-with-error\n  \n  \u00d7 Building wheel for jupyter-jsmol (pyproject.toml) did not run successfully.\n  \u2502 exit code: 1\n  \u2570\u2500> See above for output.\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\n  full command: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin/python3 /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/tmp1q2r7ekk\n  cwd: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src\n  Building wheel for jupyter-jsmol (pyproject.toml): finished with status 'error'\n  ERROR: Failed building wheel for jupyter-jsmol\nFailed to build jupyter-jsmol\nERROR: Failed to build one or more wheels\n********************************************************************************\nError building a wheel for jupyter_jsmol-2022.1.0\n******************************************************************************** \n```",
    "created_at": "2022-08-29T11:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484750",
    "user": "https://github.com/kwankyu"
}
```

This failure seems related:

```
Installing jupyter_jsmol-2022.1.0
WARNING: Disabling all use of wheels due to the use of --build-option / --global-option / --install-option.
Looking in links: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels
Processing /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src
  Installing build dependencies: started
  Running command pip subprocess to install build dependencies
  Looking in links: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels
  ERROR: Could not find a version that satisfies the requirement jupyter_packaging~=0.7.9 (from versions: none)
  ERROR: No matching distribution found for jupyter_packaging~=0.7.9
  error: subprocess-exited-with-error
  
  × pip subprocess to install build dependencies did not run successfully.
  │ exit code: 1
  ╰─> See above for output.
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  full command: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin/python3 /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-standalone-pip-lw2mb0lw/__env_pip__.zip/pip install --ignore-installed --no-user --prefix /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-build-env-l0gj_p8c/overlay --no-warn-script-location --no-binary :all: --only-binary :none: --no-index --find-links /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels -- 'jupyter_packaging~=0.7.9' 'jupyterlab>=3.0.0,==3.*' 'setuptools>=40.8.0' wheel
  cwd: [inherit]
  Installing build dependencies: finished with status 'error'
error: subprocess-exited-with-error

× pip subprocess to install build dependencies did not run successfully.
│ exit code: 1
╰─> See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip.
Warning: building with "python3 -m pip wheel --wheel-dir=dist --verbose --no-deps --no-index --isolated --ignore-requires-python --find-links=/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/lib/sage/wheels" failed.
Retrying with "python3 -m pip wheel --wheel-dir=dist --verbose --no-deps --no-index --isolated --ignore-requires-python --no-build-isolation --no-binary :all:".
WARNING: Disabling all use of wheels due to the use of --build-option / --global-option / --install-option.
Processing /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src
  Preparing metadata (pyproject.toml): started
  Running command Preparing metadata (pyproject.toml)
  setup.py entered
  $PATH=/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/src/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/usr/local/opt/polymake/bin:/usr/local/opt/texinfo/bin:/usr/local/opt/gettext/bin:/Applications/google-cloud-sdk/bin:.:/Users/kwankyu/Workplace/bin:/usr/local/bin:/usr/local/sbin:/usr/texbin:/Applications/Macaulay2-1.20/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Library/TeX/texbin:/Library/Apple/usr/bin:/Applications/Magma
  <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. "
  Use `wrap_installers` to handle prebuild steps in cmdclass.
  Use `get_data_files` to handle data files.
  Use `include_package_data=True` and `MANIFEST.in` for package data.

  <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`
  running dist_info
  creating /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info
  writing /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/PKG-INFO
  writing dependency_links to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/dependency_links.txt
  writing requirements to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/requires.txt
  writing top-level names to /private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/top_level.txt
  writing manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'
  reading manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'
  reading manifest template 'MANIFEST.in'
  no previously-included directories found matching 'examples'
  no previously-included directories found matching 'tests/build'
  no previously-included directories found matching '**/node_modules'
  warning: no previously-included files matching '*~' found anywhere in distribution
  warning: no previously-included files matching '*.pyc' found anywhere in distribution
  warning: no previously-included files matching '*.pyo' found anywhere in distribution
  warning: no previously-included files matching '.git' found anywhere in distribution
  warning: no previously-included files matching '.ipynb_checkpoints' found anywhere in distribution
  warning: no previously-included files matching '*.map' found anywhere in distribution
  adding license file 'LICENSE'
  writing manifest file '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol.egg-info/SOURCES.txt'
  creating '/private/var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/pip-modern-metadata-_nd6zlfl/jupyter_jsmol-2022.1.0.dist-info'
  adding license file "LICENSE" (matched pattern "LICEN[CS]E*")
  Preparing metadata (pyproject.toml): finished with status 'done'
Building wheels for collected packages: jupyter-jsmol
  WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517
  Building wheel for jupyter-jsmol (pyproject.toml): started
  Running command Building wheel for jupyter-jsmol (pyproject.toml)
  setup.py entered
  $PATH=/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin:/Users/kwankyu/GitHub/sage-temp/build/bin:/Users/kwankyu/GitHub/sage-temp/src/bin:/Users/kwankyu/GitHub/sage-temp/local/bin:/usr/local/opt/polymake/bin:/usr/local/opt/texinfo/bin:/usr/local/opt/gettext/bin:/Applications/google-cloud-sdk/bin:.:/Users/kwankyu/Workplace/bin:/usr/local/bin:/usr/local/sbin:/usr/texbin:/Applications/Macaulay2-1.20/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Library/TeX/texbin:/Library/Apple/usr/bin:/Applications/Magma
  <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. "
  Use `wrap_installers` to handle prebuild steps in cmdclass.
  Use `get_data_files` to handle data files.
  Use `include_package_data=True` and `MANIFEST.in` for package data.

  <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`
  running bdist_wheel
  running jsdeps
  Installing build dependencies with npm.  This may take a while...
  > yarn install
  yarn install v1.22.19
  warning package.json: No license field
  warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
  warning jupyter-jsmol@2022.1.0: No license field
  [1/4] Resolving packages...
  [2/4] Fetching packages...
  info There appears to be trouble with your network connection. Retrying...
  info There appears to be trouble with your network connection. Retrying...
  info There appears to be trouble with your network connection. Retrying...
  info There appears to be trouble with your network connection. Retrying...
  error An unexpected error occurred: "https://registry.yarnpkg.com/@jupyterlab/nbformat/-/nbformat-3.1.18.tgz: tunneling socket could not be established, cause=connect ETIMEDOUT 192.0.2.0:5187".
  info If you think this is a bug, please open a bug report with the information provided in "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src/js/yarn-error.log".
  info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
  Traceback (most recent call last):
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py", line 363, in <module>
      main()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py", line 345, in main
      json_out['return_val'] = hook(**hook_input['kwargs'])
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py", line 261, in build_wheel
      return _build_backend().build_wheel(wheel_directory, config_settings,
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py", line 244, in build_wheel
      return self._build_with_temp_dir(['bdist_wheel'], '.whl',
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py", line 229, in _build_with_temp_dir
      self.run_setup()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/build_meta.py", line 174, in run_setup
      exec(code, locals())
    File "<string>", line 95, in <module>
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/__init__.py", line 87, in setup
      return distutils.core.setup(**attrs)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/core.py", line 177, in setup
      return run_commands(dist)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/core.py", line 193, in run_commands
      dist.run_commands()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py", line 968, in run_commands
      self.run_command(cmd)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/dist.py", line 1217, in run_command
      super().run_command(command)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py", line 987, in run_command
      cmd_obj.run()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 725, in run
      [self.run_command(cmd) for cmd in cmds]
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 725, in <listcomp>
      [self.run_command(cmd) for cmd in cmds]
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/cmd.py", line 317, in run_command
      self.distribution.run_command(command)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/dist.py", line 1217, in run_command
      super().run_command(command)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/setuptools/_distutils/dist.py", line 987, in run_command
      cmd_obj.run()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 344, in run
      c.run()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 694, in run
      builder()
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 230, in builder
      run(npm_cmd + ["install"], cwd=node_package)
    File "/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_packaging/setupbase.py", line 296, in run
      return subprocess.check_call(cmd, **kwargs)
    File "/usr/local/Cellar/python@3.9/3.9.13_2/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py", line 373, in check_call
      raise CalledProcessError(retcode, cmd)
  subprocess.CalledProcessError: Command '['/usr/local/bin/yarn', 'install']' returned non-zero exit status 1.
  error: subprocess-exited-with-error
  
  × Building wheel for jupyter-jsmol (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─> See above for output.
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  full command: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/bin/python3 /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /var/folders/td/fw1q9ljs311ggyph77rs53_40000gn/T/tmp1q2r7ekk
  cwd: /Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/jupyter_jsmol-2022.1.0/src
  Building wheel for jupyter-jsmol (pyproject.toml): finished with status 'error'
  ERROR: Failed building wheel for jupyter-jsmol
Failed to build jupyter-jsmol
ERROR: Failed to build one or more wheels
********************************************************************************
Error building a wheel for jupyter_jsmol-2022.1.0
******************************************************************************** 
```



---

archive/issue_comments_484751.json:
```json
{
    "body": "Replying to [comment:9 mkoeppe]:\n> I don't see \"platform-independent\" in https://peps.python.org/pep-0425/; it uses the terminology \"pure Python\". There might be other places to look at\n\n\nJust from internet search, I see no \"non-platform\" and a couple of \"platform independent\". As far as I understand, \"pure Python\" is not quite right.\n\n---\nNew commits:",
    "created_at": "2022-08-29T12:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484751",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:9 mkoeppe]:
> I don't see "platform-independent" in https://peps.python.org/pep-0425/; it uses the terminology "pure Python". There might be other places to look at


Just from internet search, I see no "non-platform" and a couple of "platform independent". As far as I understand, "pure Python" is not quite right.

---
New commits:



---

archive/issue_comments_484752.json:
```json
{
    "body": "You need #34421, where this jsmol issue was fixed. (Volker just merged it, but it's not yet in a beta)\n\n---\nNew commits:",
    "created_at": "2022-08-29T12:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484752",
    "user": "https://github.com/dimpase"
}
```

You need #34421, where this jsmol issue was fixed. (Volker just merged it, but it's not yet in a beta)

---
New commits:



---

archive/issue_comments_484753.json:
```json
{
    "body": "With #34421 and this ticket, #33833 works well!",
    "created_at": "2022-08-29T13:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484753",
    "user": "https://github.com/kwankyu"
}
```

With #34421 and this ticket, #33833 works well!



---

archive/issue_comments_484754.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-29T14:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484755.json:
```json
{
    "body": "LGTM.",
    "created_at": "2022-08-29T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484755",
    "user": "https://github.com/kwankyu"
}
```

LGTM.



---

archive/issue_comments_484756.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-08-29T15:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484756",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_484757.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-29T15:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484757",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_484758.json:
```json
{
    "body": "Do you know why the github actions failed?",
    "created_at": "2022-08-29T18:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484758",
    "user": "https://github.com/kwankyu"
}
```

Do you know why the github actions failed?



---

archive/issue_comments_484759.json:
```json
{
    "body": "```\n[sphinx_basic_ng-0.0.1a12] cat: /sage/build/pkgs/sphinx_basic_ng/type: No such file or directory\n```\nMaybe I forgot to check in a file?",
    "created_at": "2022-08-29T18:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484759",
    "user": "https://github.com/mkoeppe"
}
```

```
[sphinx_basic_ng-0.0.1a12] cat: /sage/build/pkgs/sphinx_basic_ng/type: No such file or directory
```
Maybe I forgot to check in a file?



---

archive/issue_comments_484760.json:
```json
{
    "body": "The file is there.",
    "created_at": "2022-08-29T18:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484760",
    "user": "https://github.com/kwankyu"
}
```

The file is there.



---

archive/issue_comments_484761.json:
```json
{
    "body": "It's a defect of the type of incremental build with a changed `SAGE_ROOT`, specific to the GH Actions workflow. Nothing wrong with this ticket.",
    "created_at": "2022-08-29T19:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484761",
    "user": "https://github.com/mkoeppe"
}
```

It's a defect of the type of incremental build with a changed `SAGE_ROOT`, specific to the GH Actions workflow. Nothing wrong with this ticket.



---

archive/issue_comments_484762.json:
```json
{
    "body": "I've opened #34452 for it",
    "created_at": "2022-08-29T19:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484762",
    "user": "https://github.com/mkoeppe"
}
```

I've opened #34452 for it



---

archive/issue_comments_484763.json:
```json
{
    "body": "Replying to [comment:23 mkoeppe]:\n> I've opened #34452 for it\n\n\nThanks. \n\nSage development is like mathematics research: if you solved a problem, you see a new problem from it. It never ends :)",
    "created_at": "2022-08-29T23:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484763",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:23 mkoeppe]:
> I've opened #34452 for it


Thanks. 

Sage development is like mathematics research: if you solved a problem, you see a new problem from it. It never ends :)



---

archive/issue_comments_484764.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2022-08-31T01:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484764",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_484765.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-07T23:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34450#issuecomment-484765",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089536.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-07T23:10:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34450",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34450#event-89536"
}
```
