# Issue 34878: MixedIntegerLinearProgram.add_constraint: Option to return row indices, fix handling of empty constraints

archive/issues_034641.json:
```json
{
    "assignees": [],
    "body": "(from [#21003 comment:136](https://github.com/sagemath/sage/issues/21003#comment:136))\n\n... for use with methods that take row indices as input, such as `row`, `row_bounds`, `remove_constraint`.\n\nIf a backend does not map a constraint to a unique new row (or `check_redundant=True` and the constraint is discarded by the frontend), the method may return `None`.\n\nWe also fix a longstanding bug in how empty constraints are handled in `add_constraint`. \n\nThe changed interface (an optional return value) is backward-compatible with user code.\n\nWe also add a Feature CVXOPT so that the backend gets tested again.\n\nCC:  @mantepse @dimpase\n\nBranch/Commit: **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**\n\nReviewer: **Martin Rubey, Matthias Koeppe**\n\nAuthor: **Matthias Koeppe, Martin Rubey**\n\nComponent: **linear programming**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34878_\n\n",
    "closed_at": "2023-01-12T22:11:41Z",
    "created_at": "2022-12-23T22:44:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "MixedIntegerLinearProgram.add_constraint: Option to return row indices, fix handling of empty constraints",
    "type": "issue",
    "updated_at": "2023-01-12T22:11:41Z",
    "url": "https://github.com/sagemath/sage/issues/34878",
    "user": "https://github.com/mkoeppe"
}
```
(from [#21003 comment:136](https://github.com/sagemath/sage/issues/21003#comment:136))

... for use with methods that take row indices as input, such as `row`, `row_bounds`, `remove_constraint`.

If a backend does not map a constraint to a unique new row (or `check_redundant=True` and the constraint is discarded by the frontend), the method may return `None`.

We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. 

The changed interface (an optional return value) is backward-compatible with user code.

We also add a Feature CVXOPT so that the backend gets tested again.

CC:  @mantepse @dimpase

Branch/Commit: **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**

Reviewer: **Martin Rubey, Matthias Koeppe**

Author: **Matthias Koeppe, Martin Rubey**

Component: **linear programming**

_Issue created by migration from https://trac.sagemath.org/ticket/34878_





---

archive/issue_events_474485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-23T22:44:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474485"
}
```



---

archive/issue_events_474486.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-23T22:44:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "c: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474486"
}
```



---

archive/issue_events_474487.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-23T22:44:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474487"
}
```



---

archive/issue_events_474488.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-23T22:44:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474488"
}
```



---

archive/issue_comments_562024.json:
```json
{
    "body": "Branch: **[u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index)**",
    "created_at": "2022-12-27T06:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562024",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index)**



---

archive/issue_comments_562025.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-12-27T06:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562025",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_562026.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDoctests need adjusting because of the extra output\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e\">7ad324f</a></td><td><code>MixedIntegerLinearProgram.add_constraint: Return row index</code></td></tr></table>\n",
    "created_at": "2022-12-27T06:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562026",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Doctests need adjusting because of the extra output

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e">7ad324f</a></td><td><code>MixedIntegerLinearProgram.add_constraint: Return row index</code></td></tr></table>




---

archive/issue_comments_562027.json:
```json
{
    "body": "Commit: **[7ad324f](https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e)**",
    "created_at": "2022-12-27T06:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562027",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[7ad324f](https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e)**



---

archive/issue_comments_562028.json:
```json
{
    "body": "Changed commit from **[7ad324f](https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e)** to **[9daa44c](https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825)**",
    "created_at": "2022-12-28T00:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562028",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ad324f](https://github.com/sagemath/sagetrac-mirror/commit/7ad324ffec72c9310e8bf51df84438512c7f895e)** to **[9daa44c](https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825)**



---

archive/issue_comments_562029.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825\">9daa44c</a></td><td><code>src/sage/numerical/mip.pyx: Update doctests for .add_constraint returning the row index</code></td></tr></table>\n",
    "created_at": "2022-12-28T00:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562029",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825">9daa44c</a></td><td><code>src/sage/numerical/mip.pyx: Update doctests for .add_constraint returning the row index</code></td></tr></table>




---

archive/issue_comments_562030.json:
```json
{
    "body": "Changed commit from **[9daa44c](https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825)** to **[e154d29](https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66)**",
    "created_at": "2022-12-28T01:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9daa44c](https://github.com/sagemath/sagetrac-mirror/commit/9daa44cbebde11538ce6da624887fa74c14e7825)** to **[e154d29](https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66)**



---

archive/issue_comments_562031.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc01716f6774bd433b30babd322a9f0db521b7e0\">bc01716</a></td><td><code>MixedIntegerLinearProgram.add_constraint: Do not refuse to add empty constraints; they could be infeasible or we may need their row index for later</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66\">e154d29</a></td><td><code>src/sage/numerical/backends: Update doctests</code></td></tr></table>\n",
    "created_at": "2022-12-28T01:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562031",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc01716f6774bd433b30babd322a9f0db521b7e0">bc01716</a></td><td><code>MixedIntegerLinearProgram.add_constraint: Do not refuse to add empty constraints; they could be infeasible or we may need their row index for later</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66">e154d29</a></td><td><code>src/sage/numerical/backends: Update doctests</code></td></tr></table>




---

archive/issue_comments_562032.json:
```json
{
    "body": "Changed commit from **[e154d29](https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66)** to **[8adca04](https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa)**",
    "created_at": "2022-12-28T02:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562032",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e154d29](https://github.com/sagemath/sagetrac-mirror/commit/e154d2999bef790a92b69524e967cd5feb8d4b66)** to **[8adca04](https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa)**



---

archive/issue_comments_562033.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/166b1d3a0d4471a866281bac0a6fa5b56f0f4c4b\">166b1d3</a></td><td><code>src/sage/numerical/backends/cvxopt_backend.pyx: Update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa\">8adca04</a></td><td><code>src/sage/features/mip_backends.py: Add CVXOPT feature</code></td></tr></table>\n",
    "created_at": "2022-12-28T02:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562033",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/166b1d3a0d4471a866281bac0a6fa5b56f0f4c4b">166b1d3</a></td><td><code>src/sage/numerical/backends/cvxopt_backend.pyx: Update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa">8adca04</a></td><td><code>src/sage/features/mip_backends.py: Add CVXOPT feature</code></td></tr></table>




---

archive/issue_events_474489.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T02:24:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "title_is": "MixedIntegerLinearProgram.add_constraint: Return row index, fix handing of empty constraints",
    "title_was": "MixedIntegerLinearProgram.add_constraint: Return row index",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474489"
}
```



---

archive/issue_comments_562034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,7 @@\n \n If a backend does not map a constraint to a unique new row (or `check_redundant=True` and the constraint is discarded by the frontend), the method may return `None`.\n \n+We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. \n+\n+The changed interface (a return value) is backward-compatible with user code, but lots of doctests need to be changed. To make sure that also CVXOPT backend is tested when cvxopt is installed, we add it as a Feature.\n+\n``````\n",
    "created_at": "2022-12-28T02:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562034",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,7 @@
 
 If a backend does not map a constraint to a unique new row (or `check_redundant=True` and the constraint is discarded by the frontend), the method may return `None`.
 
+We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. 
+
+The changed interface (a return value) is backward-compatible with user code, but lots of doctests need to be changed. To make sure that also CVXOPT backend is tested when cvxopt is installed, we add it as a Feature.
+
``````




---

archive/issue_events_474490.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T02:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474490"
}
```



---

archive/issue_events_474491.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T02:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474491"
}
```



---

archive/issue_events_474492.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T02:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474492"
}
```



---

archive/issue_events_474493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T02:24:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "title_is": "MixedIntegerLinearProgram.add_constraint: Return row index, fix handling of empty constraints",
    "title_was": "MixedIntegerLinearProgram.add_constraint: Return row index, fix handing of empty constraints",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474493"
}
```



---

archive/issue_comments_562035.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm sorry to comment late.  I have two (quite orthogonal) suggestions:\n\n* I think that `add_constraint` should return a list of constraints added, or `None`.\n    * `None` should be returned if and only if the backend does not provide a means to remove this constraint again.  \n    * The empty list should be returned if and only if the constraint was redundant.\n    * Otherwise, removing the constraints using `remove_constraint` yields the original MILP.\n* possibly, it would make sense to return this list only on demand, eg., have a flag `return_indices`.  I am guessing that this would be better for interactive use, and it also means that only very few doctests would have to be modified.",
    "created_at": "2022-12-28T06:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562035",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm sorry to comment late.  I have two (quite orthogonal) suggestions:

* I think that `add_constraint` should return a list of constraints added, or `None`.
    * `None` should be returned if and only if the backend does not provide a means to remove this constraint again.  
    * The empty list should be returned if and only if the constraint was redundant.
    * Otherwise, removing the constraints using `remove_constraint` yields the original MILP.
* possibly, it would make sense to return this list only on demand, eg., have a flag `return_indices`.  I am guessing that this would be better for interactive use, and it also means that only very few doctests would have to be modified.



---

archive/issue_comments_562036.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat would be fine with me. Do you want to push a branch that does this?",
    "created_at": "2022-12-28T07:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562036",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

That would be fine with me. Do you want to push a branch that does this?



---

archive/issue_comments_562037.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYes, I can do this.",
    "created_at": "2022-12-28T07:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562037",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:10" align="right">comment:10</div>

Yes, I can do this.



---

archive/issue_comments_562038.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index)** to **[u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index)**",
    "created_at": "2022-12-28T09:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562038",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_add_constraint__return_row_index)** to **[u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index)**



---

archive/issue_comments_562039.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31\">cfe24fe</a></td><td><code>add a doctest for adding and removing constraints</code></td></tr></table>\n",
    "created_at": "2022-12-28T10:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562039",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31">cfe24fe</a></td><td><code>add a doctest for adding and removing constraints</code></td></tr></table>




---

archive/issue_comments_562040.json:
```json
{
    "body": "Changed commit from **[8adca04](https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa)** to **[cfe24fe](https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31)**",
    "created_at": "2022-12-28T10:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562040",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8adca04](https://github.com/sagemath/sagetrac-mirror/commit/8adca04fcff46fbbd3bfe357e8d1955081b671aa)** to **[cfe24fe](https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31)**



---

archive/issue_comments_562041.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7\">6c34bc3</a></td><td><code>make linter happy</code></td></tr></table>\n",
    "created_at": "2022-12-28T10:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562041",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7">6c34bc3</a></td><td><code>make linter happy</code></td></tr></table>




---

archive/issue_comments_562042.json:
```json
{
    "body": "Changed commit from **[cfe24fe](https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31)** to **[6c34bc3](https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7)**",
    "created_at": "2022-12-28T10:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562042",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cfe24fe](https://github.com/sagemath/sagetrac-mirror/commit/cfe24fe41656e678df6014c11eed35e4cdf6da31)** to **[6c34bc3](https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7)**



---

archive/issue_comments_562043.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca\">3b929f8</a></td><td><code>forgot newline in docstring</code></td></tr></table>\n",
    "created_at": "2022-12-28T10:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562043",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca">3b929f8</a></td><td><code>forgot newline in docstring</code></td></tr></table>




---

archive/issue_comments_562044.json:
```json
{
    "body": "Changed commit from **[6c34bc3](https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7)** to **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**",
    "created_at": "2022-12-28T10:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6c34bc3](https://github.com/sagemath/sagetrac-mirror/commit/6c34bc3273b821304b9d8403bf936a5f9add88a7)** to **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**



---

archive/issue_comments_562045.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPlease review!\n\nIn particular, whether\n\n```\n        The row indices of the constraints added, if\n        ``return_indices`` is true and the backend guarantees that\n        removing them again yields the original MIP, ``None``\n        otherwise.\n```\nis correct, i.e., there are currently no backends that do anything bad.",
    "created_at": "2022-12-28T10:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562045",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:15" align="right">comment:15</div>

Please review!

In particular, whether

```
        The row indices of the constraints added, if
        ``return_indices`` is true and the backend guarantees that
        removing them again yields the original MIP, ``None``
        otherwise.
```
is correct, i.e., there are currently no backends that do anything bad.



---

archive/issue_comments_562046.json:
```json
{
    "body": "Reviewer: **Martin Rubey, Matthias Koeppe**",
    "created_at": "2022-12-28T10:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562046",
    "user": "https://github.com/mantepse"
}
```

Reviewer: **Martin Rubey, Matthias Koeppe**



---

archive/issue_comments_562047.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, Martin Rubey**",
    "created_at": "2022-12-28T10:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562047",
    "user": "https://github.com/mantepse"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, Martin Rubey**



---

archive/issue_comments_562048.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLGTM, thanks!",
    "created_at": "2022-12-28T18:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562048",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

LGTM, thanks!



---

archive/issue_events_474494.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T18:27:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474494"
}
```



---

archive/issue_events_474495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T18:27:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474495"
}
```



---

archive/issue_comments_562049.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n \n We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. \n \n-The changed interface (a return value) is backward-compatible with user code, but lots of doctests need to be changed. To make sure that also CVXOPT backend is tested when cvxopt is installed, we add it as a Feature.\n+The changed interface (a return value) is backward-compatible with user code.\n \n``````\n",
    "created_at": "2022-12-28T18:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562049",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 
 We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. 
 
-The changed interface (a return value) is backward-compatible with user code, but lots of doctests need to be changed. To make sure that also CVXOPT backend is tested when cvxopt is installed, we add it as a Feature.
+The changed interface (a return value) is backward-compatible with user code.
 
``````




---

archive/issue_events_474496.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-28T18:28:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "title_is": "MixedIntegerLinearProgram.add_constraint: Option to return row indices, fix handling of empty constraints",
    "title_was": "MixedIntegerLinearProgram.add_constraint: Return row index, fix handling of empty constraints",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474496"
}
```



---

archive/issue_comments_562050.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,6 @@\n \n We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. \n \n-The changed interface (a return value) is backward-compatible with user code.\n+The changed interface (an optional return value) is backward-compatible with user code.\n \n+We also add a Feature CVXOPT so that the backend gets tested again.\n``````\n",
    "created_at": "2022-12-28T18:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562050",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,6 @@
 
 We also fix a longstanding bug in how empty constraints are handled in `add_constraint`. 
 
-The changed interface (a return value) is backward-compatible with user code.
+The changed interface (an optional return value) is backward-compatible with user code.
 
+We also add a Feature CVXOPT so that the backend gets tested again.
``````




---

archive/issue_comments_562051.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThank you!\n\nActually, it would be practical if the following too would also work, don't you think  (Ideally also with `False`, or `True` as argument)?\n\nIf you agree, it won't be hard to fix.  I don't know whether one can add these as constraints to all backends, but we could simply ignore the first and raise a `MIPSolverException` for the second.\n\nThis would make (my) user code much more readable.\n\n```\nsage: p = MixedIntegerLinearProgram(solver='GLPK')\nsage: p.add_constraint(p.linear_functions_parent()(0 <= 0))\nValueError                                Traceback (most recent call last)\n...\nValueError: at least one of \"max\" or \"min\" must be set\n\nsage: p.add_constraint(p.linear_functions_parent()(1 <= 0))\nValueError                                Traceback (most recent call last)\n...\nValueError: at least one of \"max\" or \"min\" must be set\n```",
    "created_at": "2022-12-28T19:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562051",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:20" align="right">comment:20</div>

Thank you!

Actually, it would be practical if the following too would also work, don't you think  (Ideally also with `False`, or `True` as argument)?

If you agree, it won't be hard to fix.  I don't know whether one can add these as constraints to all backends, but we could simply ignore the first and raise a `MIPSolverException` for the second.

This would make (my) user code much more readable.

```
sage: p = MixedIntegerLinearProgram(solver='GLPK')
sage: p.add_constraint(p.linear_functions_parent()(0 <= 0))
ValueError                                Traceback (most recent call last)
...
ValueError: at least one of "max" or "min" must be set

sage: p.add_constraint(p.linear_functions_parent()(1 <= 0))
ValueError                                Traceback (most recent call last)
...
ValueError: at least one of "max" or "min" must be set
```



---

archive/issue_comments_562052.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYou probably mean `linear_constraints_parent` here",
    "created_at": "2022-12-28T19:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562052",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

You probably mean `linear_constraints_parent` here



---

archive/issue_comments_562053.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIt would be OK with me for\n- p.add_constraint(True) to add the trivial constraint \"0 <= 0\"\n- p.add_constraint(False) to add the infeasible constraint \"0 <= -1\"",
    "created_at": "2022-12-28T19:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562053",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

It would be OK with me for
- p.add_constraint(True) to add the trivial constraint "0 <= 0"
- p.add_constraint(False) to add the infeasible constraint "0 <= -1"



---

archive/issue_comments_562054.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOh, thanks, yes, you are right.  Here we currently have\n\n```\nsage: p.add_constraint(p.linear_constraints_parent()(1 <= 0))\nsage: p\nMixed Integer Program (no objective, 0 variables, 0 constraints)\nsage: p.show()\nMaximization:\n  \n\nConstraints:\nVariables:\nsage: p.linear_constraints_parent()(1 <= 0)\ntrivial constraint starting with 0\nsage: p.linear_constraints_parent()(0 <= 0)\ntrivial constraint starting with 1\n```",
    "created_at": "2022-12-28T19:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562054",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:23" align="right">comment:23</div>

Oh, thanks, yes, you are right.  Here we currently have

```
sage: p.add_constraint(p.linear_constraints_parent()(1 <= 0))
sage: p
Mixed Integer Program (no objective, 0 variables, 0 constraints)
sage: p.show()
Maximization:
  

Constraints:
Variables:
sage: p.linear_constraints_parent()(1 <= 0)
trivial constraint starting with 0
sage: p.linear_constraints_parent()(0 <= 0)
trivial constraint starting with 1
```



---

archive/issue_comments_562055.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n\"trivial constraint starting with\" is, of course, ridiculous wording. We should revise this.",
    "created_at": "2022-12-28T19:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562055",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

"trivial constraint starting with" is, of course, ridiculous wording. We should revise this.



---

archive/issue_comments_562056.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI am away for a few hours now :-)",
    "created_at": "2022-12-28T19:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562056",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:25" align="right">comment:25</div>

I am away for a few hours now :-)



---

archive/issue_comments_562057.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI've opened #34882 for this.",
    "created_at": "2022-12-28T20:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562057",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

I've opened #34882 for this.



---

archive/issue_comments_562058.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks! However, I think the other two are bugs and should be fixed here.",
    "created_at": "2022-12-28T22:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562058",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks! However, I think the other two are bugs and should be fixed here.



---

archive/issue_comments_562059.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWhich two?",
    "created_at": "2022-12-28T23:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562059",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Which two?



---

archive/issue_comments_562060.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNote that there's the coercion route bool -> int -> ZZ",
    "created_at": "2022-12-28T23:09:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562060",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Note that there's the coercion route bool -> int -> ZZ



---

archive/issue_comments_562061.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n\n```\nsage: p = MixedIntegerLinearProgram(solver='GLPK')\nsage: p.add_constraint(p.linear_constraints_parent()(1 <= 0))\nsage: p.solve()\n0.0\n```\nbecause it is actually not adding a constraint.",
    "created_at": "2022-12-28T23:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562061",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:30" align="right">comment:30</div>


```
sage: p = MixedIntegerLinearProgram(solver='GLPK')
sage: p.add_constraint(p.linear_constraints_parent()(1 <= 0))
sage: p.solve()
0.0
```
because it is actually not adding a constraint.



---

archive/issue_comments_562062.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nthat's bool -> int -> ZZ -> linear_function_parent -> linear_constraints_parent, not a bug",
    "created_at": "2022-12-28T23:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562062",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

that's bool -> int -> ZZ -> linear_function_parent -> linear_constraints_parent, not a bug



---

archive/issue_comments_562063.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n-> #34882",
    "created_at": "2022-12-28T23:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562063",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

-> #34882



---

archive/issue_comments_562064.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe problem is that for `f = p.linear_constraints_parent()(1 <= 0)` we have neither have `f.equations()` nor `f.inequalities()`.\n\nThe following does work (also for GLPK):\n\n```\nsage: p = MixedIntegerLinearProgram(solver='SCIP')\nsage: f = p.linear_functions_parent()(1 - 0)\nsage: p.add_constraint(f, max=0, return_indices=True)\n[0]\nsage: p.show()\nMaximization:\n  \n\nConstraints:\n  c1: <= -1.0\nVariables:\n```\nI am not sure how reliable this is.  Also, shouldn't the max be shown?",
    "created_at": "2022-12-28T23:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562064",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:33" align="right">comment:33</div>

The problem is that for `f = p.linear_constraints_parent()(1 <= 0)` we have neither have `f.equations()` nor `f.inequalities()`.

The following does work (also for GLPK):

```
sage: p = MixedIntegerLinearProgram(solver='SCIP')
sage: f = p.linear_functions_parent()(1 - 0)
sage: p.add_constraint(f, max=0, return_indices=True)
[0]
sage: p.show()
Maximization:
  

Constraints:
  c1: <= -1.0
Variables:
```
I am not sure how reliable this is.  Also, shouldn't the max be shown?



---

archive/issue_comments_562065.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAh, sorry, now I see.  Sorry.",
    "created_at": "2022-12-28T23:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562065",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:34" align="right">comment:34</div>

Ah, sorry, now I see.  Sorry.



---

archive/issue_comments_562066.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI agree that changing the display of the empty linear form in \" <= -1.0\" to 0 would be an improvement",
    "created_at": "2022-12-28T23:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562066",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

I agree that changing the display of the empty linear form in " <= -1.0" to 0 would be an improvement



---

archive/issue_comments_562067.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nSo actually we should also try to do something sensible with `p.linear_constraints_parent()(False)`.",
    "created_at": "2022-12-28T23:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562067",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:36" align="right">comment:36</div>

So actually we should also try to do something sensible with `p.linear_constraints_parent()(False)`.



---

archive/issue_comments_562068.json:
```json
{
    "body": "Changed branch from **[u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index)** to **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**",
    "created_at": "2023-01-12T22:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34878#issuecomment-562068",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/mixedintegerlinearprogram_add_constraint__return_row_index)** to **[3b929f8](https://github.com/sagemath/sagetrac-mirror/commit/3b929f89b56dd1347df6a125460262cfaae62eca)**



---

archive/issue_events_474497.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2023-01-12T22:11:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474497"
}
```



---

archive/issue_events_474498.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2023-01-12T22:11:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34878",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34878#event-474498"
}
```
