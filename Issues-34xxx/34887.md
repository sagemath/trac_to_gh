# Issue 34887: zero coefficients of linear functions are not discarded

archive/issues_034650.json:
```json
{
    "assignees": [],
    "body": "When creating linear functions, 0 coefficients are currently kept:\n\n```\nsage: M = MixedIntegerLinearProgram(check_redundant=True)\nsage: x = M.new_variable()\nsage: c1 = x[0] <= x[0] + x[1]\nsage: c2 = 0 <= x[1]\nsage: c3 = 0 <= x[1] + 0*x[2]\nsage: M.add_constraint(c1, return_indices=True)\n[0]\nsage: M.add_constraint(c2, return_indices=True)\n[1]\nsage: M.add_constraint(c3, return_indices=True)\n[2]\nsage: M.show()\nMaximization:\n  \n\nConstraints:\n  c1: - x2 <= 0.0\n  c2: - x2 <= 0.0\n  c3: - x2 <= 0.0\nVariables:\n  x1 = x_0 is a continuous variable (min=-oo, max=+oo)\n  x2 = x_1 is a continuous variable (min=-oo, max=+oo)\n  x3 = x_2 is a continuous variable (min=-oo, max=+oo)\n```\nThe proposed fix is to eliminate zero coefficients only in `_is_redundant_constraint`.\n\nI am not sure whether this is a good idea, however, `LinearFunction.is_zero` and `equals` check all the coefficients, so this was a conscious choice by the original developers.\n\nCC:  @mkoeppe\n\nBranch/Commit: **[u/mantepse/discard_zero_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/discard_zero_coefficients) @ [81e33a8](https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e)**\n\nAuthor: **Martin Rubey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34887_\n\n",
    "created_at": "2023-01-02T16:33:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "zero coefficients of linear functions are not discarded",
    "type": "issue",
    "updated_at": "2023-01-02T19:45:02Z",
    "url": "https://github.com/sagemath/sage/issues/34887",
    "user": "https://github.com/mantepse"
}
```
When creating linear functions, 0 coefficients are currently kept:

```
sage: M = MixedIntegerLinearProgram(check_redundant=True)
sage: x = M.new_variable()
sage: c1 = x[0] <= x[0] + x[1]
sage: c2 = 0 <= x[1]
sage: c3 = 0 <= x[1] + 0*x[2]
sage: M.add_constraint(c1, return_indices=True)
[0]
sage: M.add_constraint(c2, return_indices=True)
[1]
sage: M.add_constraint(c3, return_indices=True)
[2]
sage: M.show()
Maximization:
  

Constraints:
  c1: - x2 <= 0.0
  c2: - x2 <= 0.0
  c3: - x2 <= 0.0
Variables:
  x1 = x_0 is a continuous variable (min=-oo, max=+oo)
  x2 = x_1 is a continuous variable (min=-oo, max=+oo)
  x3 = x_2 is a continuous variable (min=-oo, max=+oo)
```
The proposed fix is to eliminate zero coefficients only in `_is_redundant_constraint`.

I am not sure whether this is a good idea, however, `LinearFunction.is_zero` and `equals` check all the coefficients, so this was a conscious choice by the original developers.

CC:  @mkoeppe

Branch/Commit: **[u/mantepse/discard_zero_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/discard_zero_coefficients) @ [81e33a8](https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e)**

Author: **Martin Rubey**

_Issue created by migration from https://trac.sagemath.org/ticket/34887_





---

archive/issue_events_441500.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2023-01-02T16:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34887#event-441500"
}
```



---

archive/issue_events_441501.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2023-01-02T16:33:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34887#event-441501"
}
```



---

archive/issue_comments_565107.json:
```json
{
    "body": "Branch: **[u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded)**",
    "created_at": "2023-01-02T16:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565107",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded)**



---

archive/issue_events_441502.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2023-01-02T16:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "component: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34887#event-441502"
}
```



---

archive/issue_comments_565108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,30 @@\n+When creating linear functions, 0 coefficients are currently kept:\n \n+```\n+sage: M = MixedIntegerLinearProgram(check_redundant=True)\n+sage: x = M.new_variable()\n+sage: c1 = x[0] <= x[0] + x[1]\n+sage: c2 = 0 <= x[1]\n+sage: c3 = 0 <= x[1] + 0*x[2]\n+sage: M.add_constraint(c1, return_indices=True)\n+[0]\n+sage: M.add_constraint(c2, return_indices=True)\n+[1]\n+sage: M.add_constraint(c3, return_indices=True)\n+[2]\n+sage: M.show()\n+Maximization:\n+  \n+\n+Constraints:\n+  c1: - x2 <= 0.0\n+  c2: - x2 <= 0.0\n+  c3: - x2 <= 0.0\n+Variables:\n+  x1 = x_0 is a continuous variable (min=-oo, max=+oo)\n+  x2 = x_1 is a continuous variable (min=-oo, max=+oo)\n+  x3 = x_2 is a continuous variable (min=-oo, max=+oo)\n+```\n+The proposed fix is to eliminate zero coefficients only in `_is_redundant_constraint`.\n+\n+I am not sure whether this is a good idea, however, `LinearFunction.is_zero` and `equals` check all the coefficients, so this was a conscious choice by the original developers.\n``````\n",
    "created_at": "2023-01-02T16:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565108",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,30 @@
+When creating linear functions, 0 coefficients are currently kept:
 
+```
+sage: M = MixedIntegerLinearProgram(check_redundant=True)
+sage: x = M.new_variable()
+sage: c1 = x[0] <= x[0] + x[1]
+sage: c2 = 0 <= x[1]
+sage: c3 = 0 <= x[1] + 0*x[2]
+sage: M.add_constraint(c1, return_indices=True)
+[0]
+sage: M.add_constraint(c2, return_indices=True)
+[1]
+sage: M.add_constraint(c3, return_indices=True)
+[2]
+sage: M.show()
+Maximization:
+  
+
+Constraints:
+  c1: - x2 <= 0.0
+  c2: - x2 <= 0.0
+  c3: - x2 <= 0.0
+Variables:
+  x1 = x_0 is a continuous variable (min=-oo, max=+oo)
+  x2 = x_1 is a continuous variable (min=-oo, max=+oo)
+  x3 = x_2 is a continuous variable (min=-oo, max=+oo)
+```
+The proposed fix is to eliminate zero coefficients only in `_is_redundant_constraint`.
+
+I am not sure whether this is a good idea, however, `LinearFunction.is_zero` and `equals` check all the coefficients, so this was a conscious choice by the original developers.
``````




---

archive/issue_comments_565109.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e\">0753ecc</a></td><td><code>discard 0 coefficients of linear functions</code></td></tr></table>\n",
    "created_at": "2023-01-02T16:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565109",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e">0753ecc</a></td><td><code>discard 0 coefficients of linear functions</code></td></tr></table>




---

archive/issue_comments_565110.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2023-01-02T16:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565110",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_comments_565111.json:
```json
{
    "body": "Commit: **[0753ecc](https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e)**",
    "created_at": "2023-01-02T16:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565111",
    "user": "https://github.com/mantepse"
}
```

Commit: **[0753ecc](https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e)**



---

archive/issue_events_441503.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2023-01-02T16:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34887#event-441503"
}
```



---

archive/issue_comments_565112.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e\">0753ecc</a></td><td><code>discard 0 coefficients of linear functions</code></td></tr></table>\n",
    "created_at": "2023-01-02T16:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565112",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'>Comment 3:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e">0753ecc</a></td><td><code>discard 0 coefficients of linear functions</code></td></tr></table>




---

archive/issue_comments_565113.json:
```json
{
    "body": "Changed commit from **[0753ecc](https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e)** to none",
    "created_at": "2023-01-02T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565113",
    "user": "https://github.com/mantepse"
}
```

Changed commit from **[0753ecc](https://github.com/sagemath/sagetrac-mirror/commit/0753eccad673e2c461904548342f835f35e56b6e)** to none



---

archive/issue_comments_565114.json:
```json
{
    "body": "Changed branch from **[u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded)** to none",
    "created_at": "2023-01-02T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565114",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/zero_coefficients_of_linear_functions_are_not_discarded)** to none



---

archive/issue_comments_565115.json:
```json
{
    "body": "Branch: **[u/mantepse/discard_zero_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/discard_zero_coefficients)**",
    "created_at": "2023-01-02T17:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565115",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/discard_zero_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/discard_zero_coefficients)**



---

archive/issue_comments_565116.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e\">81e33a8</a></td><td><code>ignore 0 coefficients in _is_redundant_constraint</code></td></tr></table>\n",
    "created_at": "2023-01-02T18:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565116",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:6'>Comment 6:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e">81e33a8</a></td><td><code>ignore 0 coefficients in _is_redundant_constraint</code></td></tr></table>




---

archive/issue_comments_565117.json:
```json
{
    "body": "Commit: **[81e33a8](https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e)**",
    "created_at": "2023-01-02T18:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34887#issuecomment-565117",
    "user": "https://github.com/mantepse"
}
```

Commit: **[81e33a8](https://github.com/sagemath/sagetrac-mirror/commit/81e33a84116d011bbfa12df0cd08d1938d196d7e)**



---

archive/issue_events_441504.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2023-01-02T18:23:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34887",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34887#event-441504"
}
```
