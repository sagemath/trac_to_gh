# Issue 34235: Error in comparing two Symbolic Ring elements

archive/issues_033998.json:
```json
{
    "body": "It seems a bug:\n\n```\nsage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)\nTypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n```\nThe following comparison is fine, though.\n\n```\nsage: bool(AA(sqrt(2)) == sqrt(2))\nTrue\n```\n\nTo fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that \n- handles the case of elements for which Sage can find a radical expression and \n- raises an error in all other cases. \nThis is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.\n\n\nCC:  @mkoeppe @davewittemorris @videlec @tscrim\n\nBranch/Commit: 58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34235\n\n",
    "closed_at": "2022-09-22T22:35:39Z",
    "created_at": "2022-07-28T18:45:19Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Error in comparing two Symbolic Ring elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34235",
    "user": "https://github.com/yuan-zhou"
}
```
It seems a bug:

```
sage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)
TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
```
The following comparison is fine, though.

```
sage: bool(AA(sqrt(2)) == sqrt(2))
True
```

To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that 
- handles the case of elements for which Sage can find a radical expression and 
- raises an error in all other cases. 
This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.


CC:  @mkoeppe @davewittemorris @videlec @tscrim

Branch/Commit: 58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34235





---

archive/issue_comments_681939.json:
```json
{
    "body": "<a id='comment:2'></a>Confirmed in 9.7.beta5",
    "created_at": "2022-07-28T23:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681939",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Confirmed in 9.7.beta5



---

archive/issue_comments_681940.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/error_in_comparing_two_symbolic_ring_elements\"",
    "created_at": "2022-07-29T02:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681940",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/error_in_comparing_two_symbolic_ring_elements"



---

archive/issue_comments_681941.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,9 @@\n True\n ```\n \n+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that handles the easiest cases (rationals, square roots of rationals) and raises an error in all other cases. This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.\n+\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/34235\n``````\n",
    "created_at": "2022-07-29T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681941",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,9 @@
 True
 ```
 
+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that handles the easiest cases (rationals, square roots of rationals) and raises an error in all other cases. This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.
+
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/34235
``````




---

archive/issue_comments_681942.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2022-07-29T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681942",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_681943.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-29T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681943",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_681944.json:
```json
{
    "body": "Changing commit from \"\" to \"a627ce685f4ac30ba9660f66b24fae246209c5d1\"",
    "created_at": "2022-07-29T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681944",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "a627ce685f4ac30ba9660f66b24fae246209c5d1"



---

archive/issue_comments_681945.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-07-29T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681945",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_681946.json:
```json
{
    "body": "Changing commit from \"a627ce685f4ac30ba9660f66b24fae246209c5d1\" to \"6204a76d0ec2cbc3cd350cd82f77b2b3ec8088c0\"",
    "created_at": "2022-07-29T04:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a627ce685f4ac30ba9660f66b24fae246209c5d1" to "6204a76d0ec2cbc3cd350cd82f77b2b3ec8088c0"



---

archive/issue_comments_681947.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-29T04:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_681948.json:
```json
{
    "body": "Changing commit from \"6204a76d0ec2cbc3cd350cd82f77b2b3ec8088c0\" to \"3e560cf5b30377da9d3122427f81f9b0ef93c5c4\"",
    "created_at": "2022-07-29T04:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6204a76d0ec2cbc3cd350cd82f77b2b3ec8088c0" to "3e560cf5b30377da9d3122427f81f9b0ef93c5c4"



---

archive/issue_comments_681949.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-29T04:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_681950.json:
```json
{
    "body": "<a id='comment:7'></a>Instead of defining `_maxima_init_`, perhaps it's better to define `_symbolic_`",
    "created_at": "2022-07-29T05:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681950",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Instead of defining `_maxima_init_`, perhaps it's better to define `_symbolic_`



---

archive/issue_comments_681951.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-29T05:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_681952.json:
```json
{
    "body": "Changing commit from \"3e560cf5b30377da9d3122427f81f9b0ef93c5c4\" to \"58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061\"",
    "created_at": "2022-07-29T05:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e560cf5b30377da9d3122427f81f9b0ef93c5c4" to "58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061"



---

archive/issue_comments_681953.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+It seems a bug:\n+\n+```\n+sage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)\n+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n+```\n+The following comparison is fine, though.\n+\n+```\n+sage: bool(AA(sqrt(2)) == sqrt(2))\n+True\n+```\n+\n+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that handles the case of elements for which Sage can find a radical expression and raises an error in all other cases. This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.\n \n \n Comment: 1\n``````\n",
    "created_at": "2022-07-29T22:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681953",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+It seems a bug:
+
+```
+sage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)
+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
+```
+The following comparison is fine, though.
+
+```
+sage: bool(AA(sqrt(2)) == sqrt(2))
+True
+```
+
+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that handles the case of elements for which Sage can find a radical expression and raises an error in all other cases. This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.
 
 
 Comment: 1
``````




---

archive/issue_comments_681954.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+It seems a bug:\n+\n+```\n+sage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)\n+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n+```\n+The following comparison is fine, though.\n+\n+```\n+sage: bool(AA(sqrt(2)) == sqrt(2))\n+True\n+```\n+\n+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that \n+- handles the case of elements for which Sage can find a radical expression and \n+- raises an error in all other cases. \n+This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.\n \n \n Comment: 1\n``````\n",
    "created_at": "2022-07-29T22:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681954",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,20 @@
+It seems a bug:
+
+```
+sage: bool(AA(sqrt(2))/pi == sqrt(2)/pi)
+TypeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
+```
+The following comparison is fine, though.
+
+```
+sage: bool(AA(sqrt(2)) == sqrt(2))
+True
+```
+
+To fix this, we provide elements of `AA` and `QQbar` with a `_maxima_init_` method that 
+- handles the case of elements for which Sage can find a radical expression and 
+- raises an error in all other cases. 
+This is better than sending the unusable print representation of algebraic numbers (including `?`) to Maxima.
 
 
 Comment: 1
``````




---

archive/issue_comments_681955.json:
```json
{
    "body": "<a id='comment:13'></a>LGTM.",
    "created_at": "2022-08-31T02:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681955",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>LGTM.



---

archive/issue_comments_681956.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-08-31T02:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681956",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_681957.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-31T02:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681957",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_681958.json:
```json
{
    "body": "<a id='comment:14'></a>Thanks!",
    "created_at": "2022-08-31T02:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681958",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Thanks!



---

archive/issue_events_089275.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34235#event-89275"
}
```



---

archive/issue_comments_681959.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-22T22:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681959",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_681960.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/error_in_comparing_two_symbolic_ring_elements\" to \"58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061\"",
    "created_at": "2022-09-22T22:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34235#issuecomment-681960",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/error_in_comparing_two_symbolic_ring_elements" to "58f4cd1c63b7d7a8aee04de5d8c53a7fac27d061"



---

archive/issue_events_089276.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-22T22:35:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34235",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34235#event-89276"
}
```
