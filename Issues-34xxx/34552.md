# Issue 34552: more testsuites for lazy series rings

archive/issues_034315.json:
```json
{
    "assignees": [],
    "body": "In this ticket we implement systematic tests for operations on lazy series.\n\nDepends on #34470\n\nCC:  @tscrim\n\nKeywords: **LazyPowerSeries**\n\nBranch/Commit: **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**\n\nReviewer: **Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Martin Rubey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34552_\n\n",
    "closed_at": "2022-10-16T22:15:51Z",
    "created_at": "2022-09-18T10:57:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "more testsuites for lazy series rings",
    "type": "issue",
    "updated_at": "2022-10-16T22:15:51Z",
    "url": "https://github.com/sagemath/sage/issues/34552",
    "user": "https://github.com/mantepse"
}
```
In this ticket we implement systematic tests for operations on lazy series.

Depends on #34470

CC:  @tscrim

Keywords: **LazyPowerSeries**

Branch/Commit: **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**

Reviewer: **Travis Scrimshaw, Frédéric Chapoton**

Author: **Martin Rubey**

_Issue created by migration from https://trac.sagemath.org/ticket/34552_





---

archive/issue_events_453273.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-18T10:57:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453273"
}
```



---

archive/issue_events_453274.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-18T10:57:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453274"
}
```



---

archive/issue_comments_561276.json:
```json
{
    "body": "Branch: **[u/mantepse/more_testsuites_for_lazy_series_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/more_testsuites_for_lazy_series_rings)**",
    "created_at": "2022-09-18T10:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561276",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/more_testsuites_for_lazy_series_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/more_testsuites_for_lazy_series_rings)**



---

archive/issue_events_453275.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-18T11:01:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453275"
}
```



---

archive/issue_comments_561277.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+In this ticket we implement systematic tests for operations on lazy series.\n``````\n",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561277",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+In this ticket we implement systematic tests for operations on lazy series.
``````




---

archive/issue_comments_561278.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561278",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_comments_561279.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3e331c49b9a464abd3d37b03e72a3a6dfdf8f51\">e3e331c</a></td><td><code>add and correct some_elements for all rings, run all tests in the TestSuite (many fail)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00aaca080f0be83e5cede0970a035dc084923596\">00aaca0</a></td><td><code>introduce halting precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9dd62e7b9db93db213eb4d8b10e7e1f77920a5d\">f9dd62e</a></td><td><code>fix equality of exact series, do not produce coefficients of polynomials by iterating over them</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9a66bed5b72672327ad1335461fe0833f11a0b5\">b9a66be</a></td><td><code>implement missing required method lift_to_precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88109cc334038473f7ef9d6318a64fea4a8e5456\">88109cc</a></td><td><code>fix precision also in species directory, do not forget to switch it off after doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08baf9a88210fee39bb5dd84064adddf7d1365e6\">08baf9a</a></td><td><code>fix punctuation in docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bd0331f4210eb4c76eca6bc8b28331931443117\">5bd0331</a></td><td><code>correct an_element and some_elements, implement is_unit, _test_invert</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1722eca9a24029683fd137eda0fbc063cd044fad\">1722eca</a></td><td><code>fix is_unit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdf821a895d6c4ed46992d209cb5cdfbb6ae6d39\">cdf821a</a></td><td><code>improve equality, raise errors when trying to invert series which are known not to be invertible, be more careful not to compute terms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf\">cc48d4e</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>\n",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561279",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:2" align="right">Comment 2</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3e331c49b9a464abd3d37b03e72a3a6dfdf8f51">e3e331c</a></td><td><code>add and correct some_elements for all rings, run all tests in the TestSuite (many fail)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00aaca080f0be83e5cede0970a035dc084923596">00aaca0</a></td><td><code>introduce halting precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9dd62e7b9db93db213eb4d8b10e7e1f77920a5d">f9dd62e</a></td><td><code>fix equality of exact series, do not produce coefficients of polynomials by iterating over them</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9a66bed5b72672327ad1335461fe0833f11a0b5">b9a66be</a></td><td><code>implement missing required method lift_to_precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88109cc334038473f7ef9d6318a64fea4a8e5456">88109cc</a></td><td><code>fix precision also in species directory, do not forget to switch it off after doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08baf9a88210fee39bb5dd84064adddf7d1365e6">08baf9a</a></td><td><code>fix punctuation in docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bd0331f4210eb4c76eca6bc8b28331931443117">5bd0331</a></td><td><code>correct an_element and some_elements, implement is_unit, _test_invert</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1722eca9a24029683fd137eda0fbc063cd044fad">1722eca</a></td><td><code>fix is_unit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdf821a895d6c4ed46992d209cb5cdfbb6ae6d39">cdf821a</a></td><td><code>improve equality, raise errors when trying to invert series which are known not to be invertible, be more careful not to compute terms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf">cc48d4e</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>




---

archive/issue_comments_561280.json:
```json
{
    "body": "Changed keywords from none to **LazyPowerSeries**",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561280",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **LazyPowerSeries**



---

archive/issue_events_453276.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-18T11:01:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453276"
}
```



---

archive/issue_comments_561281.json:
```json
{
    "body": "Dependencies: **#34470**",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561281",
    "user": "https://github.com/mantepse"
}
```

Dependencies: **#34470**



---

archive/issue_comments_561282.json:
```json
{
    "body": "Commit: **[cc48d4e](https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf)**",
    "created_at": "2022-09-18T11:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561282",
    "user": "https://github.com/mantepse"
}
```

Commit: **[cc48d4e](https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf)**



---

archive/issue_comments_561283.json:
```json
{
    "body": "Changed commit from **[cc48d4e](https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf)** to **[54bb1d8](https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60)**",
    "created_at": "2022-09-18T11:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561283",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cc48d4e](https://github.com/sagemath/sagetrac-mirror/commit/cc48d4eb585ef0ef865e83d540796a93f9b91daf)** to **[54bb1d8](https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60)**



---

archive/issue_comments_561284.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60\">54bb1d8</a></td><td><code>add _test_revert and add more rings to test</code></td></tr></table>\n",
    "created_at": "2022-09-18T11:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561284",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60">54bb1d8</a></td><td><code>add _test_revert and add more rings to test</code></td></tr></table>




---

archive/issue_comments_561285.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373\">60f0664</a></td><td><code>fix more _an_element and some_element with incorrect coefficients</code></td></tr></table>\n",
    "created_at": "2022-09-18T12:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561285",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373">60f0664</a></td><td><code>fix more _an_element and some_element with incorrect coefficients</code></td></tr></table>




---

archive/issue_comments_561286.json:
```json
{
    "body": "Changed commit from **[54bb1d8](https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60)** to **[60f0664](https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373)**",
    "created_at": "2022-09-18T12:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561286",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[54bb1d8](https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60)** to **[60f0664](https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373)**



---

archive/issue_comments_561287.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nApparently, reversion of symmetric functions with linear coefficient different from `1` is completely broken:\n\n```\nsage: g = L(2*s[1]+s[2])\nsage: g\n2*p[1] + (1/2*p[1,1]+1/2*p[2])\nsage: g.revert()(g)\np[1] + (-1/4*p[1,1]-1/4*p[2]) + (1/4*p[1,1,1]+1/4*p[2,1]) + (-9/32*p[1,1,1,1]-5/16*p[2,1,1]+3/32*p[2,2]+1/8*p[4]) + (11/32*p[1,1,1,1,1]+7/16*p[2,1,1,1]-1/32*p[2,2,1]-1/8*p[4,1]) + (-57/128*p[1,1,1,1,1,1]-83/128*p[2,1,1,1,1]-7/128*p[2,2,1,1]-13/128*p[2,2,2]+5/32*p[4,1,1]-3/32*p[4,2]) + (77/128*p[1,1,1,1,1,1,1]+127/128*p[2,1,1,1,1,1]+27/128*p[2,2,1,1,1]+9/128*p[2,2,2,1]-7/32*p[4,1,1,1]+1/32*p[4,2,1]) + O^8\n```",
    "created_at": "2022-09-18T15:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561287",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">Comment 5</div>

Apparently, reversion of symmetric functions with linear coefficient different from `1` is completely broken:

```
sage: g = L(2*s[1]+s[2])
sage: g
2*p[1] + (1/2*p[1,1]+1/2*p[2])
sage: g.revert()(g)
p[1] + (-1/4*p[1,1]-1/4*p[2]) + (1/4*p[1,1,1]+1/4*p[2,1]) + (-9/32*p[1,1,1,1]-5/16*p[2,1,1]+3/32*p[2,2]+1/8*p[4]) + (11/32*p[1,1,1,1,1]+7/16*p[2,1,1,1]-1/32*p[2,2,1]-1/8*p[4,1]) + (-57/128*p[1,1,1,1,1,1]-83/128*p[2,1,1,1,1]-7/128*p[2,2,1,1]-13/128*p[2,2,2]+5/32*p[4,1,1]-3/32*p[4,2]) + (77/128*p[1,1,1,1,1,1,1]+127/128*p[2,1,1,1,1,1]+27/128*p[2,2,1,1,1]+9/128*p[2,2,2,1]-7/32*p[4,1,1,1]+1/32*p[4,2,1]) + O^8
```



---

archive/issue_comments_561288.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nObviously, there was a parenthesis missing.  I thought I changed that already once.",
    "created_at": "2022-09-18T16:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561288",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:6" align="right">Comment 6</div>

Obviously, there was a parenthesis missing.  I thought I changed that already once.



---

archive/issue_comments_561289.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbccb39ebef9bf107463c9955c8f254aa1dfe685\">fbccb39</a></td><td><code>normalize degree in Stream_exact for correct equality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b20eabff984c78737702af46dab811895b291db1\">b20eabf</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea\">7cbde49</a></td><td><code>fix reversion of symmetric functions, improve some_elements and tests</code></td></tr></table>\n",
    "created_at": "2022-09-18T16:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbccb39ebef9bf107463c9955c8f254aa1dfe685">fbccb39</a></td><td><code>normalize degree in Stream_exact for correct equality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b20eabff984c78737702af46dab811895b291db1">b20eabf</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea">7cbde49</a></td><td><code>fix reversion of symmetric functions, improve some_elements and tests</code></td></tr></table>




---

archive/issue_comments_561290.json:
```json
{
    "body": "Changed commit from **[60f0664](https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373)** to **[7cbde49](https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea)**",
    "created_at": "2022-09-18T16:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561290",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[60f0664](https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373)** to **[7cbde49](https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea)**



---

archive/issue_comments_561291.json:
```json
{
    "body": "Changed commit from **[7cbde49](https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea)** to **[6a46183](https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e)**",
    "created_at": "2022-09-18T23:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561291",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7cbde49](https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea)** to **[6a46183](https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e)**



---

archive/issue_comments_561292.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d5b8cf4c836ceb8813aa6311fe18b1f5fbffc6a\">3d5b8cf</a></td><td><code>Last little things from the patchbot.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa593b547bcc609b02209f355c6f4eb24b3a2e01\">aa593b5</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/840539d33b8cefc94844f4790765564da8604cc6\">840539d</a></td><td><code>More tests, more bugs fixed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b930f58d4fcece6371e14d2aba6fc53e653c24b1\">b930f58</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e\">6a46183</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>\n",
    "created_at": "2022-09-18T23:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561292",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d5b8cf4c836ceb8813aa6311fe18b1f5fbffc6a">3d5b8cf</a></td><td><code>Last little things from the patchbot.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa593b547bcc609b02209f355c6f4eb24b3a2e01">aa593b5</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/840539d33b8cefc94844f4790765564da8604cc6">840539d</a></td><td><code>More tests, more bugs fixed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b930f58d4fcece6371e14d2aba6fc53e653c24b1">b930f58</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e">6a46183</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>




---

archive/issue_comments_561293.json:
```json
{
    "body": "Changed commit from **[6a46183](https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e)** to **[b15e36d](https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46)**",
    "created_at": "2022-09-18T23:38:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561293",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a46183](https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e)** to **[b15e36d](https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46)**



---

archive/issue_comments_561294.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46\">b15e36d</a></td><td><code>skip test_revert when base ring is not a field</code></td></tr></table>\n",
    "created_at": "2022-09-18T23:38:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561294",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46">b15e36d</a></td><td><code>skip test_revert when base ring is not a field</code></td></tr></table>




---

archive/issue_comments_561295.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d\">8e7b76d</a></td><td><code>fix and simplify wrong doctest</code></td></tr></table>\n",
    "created_at": "2022-09-18T23:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561295",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d">8e7b76d</a></td><td><code>fix and simplify wrong doctest</code></td></tr></table>




---

archive/issue_comments_561296.json:
```json
{
    "body": "Changed commit from **[b15e36d](https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46)** to **[8e7b76d](https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d)**",
    "created_at": "2022-09-18T23:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561296",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b15e36d](https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46)** to **[8e7b76d](https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d)**



---

archive/issue_comments_561297.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b47407b38c76f7cc6f58777bf8d6cf5feb19d4f5\">b47407b</a></td><td><code>Implementing `_floordiv_`, Stream._true_order to boolean, first fraction field, more tests, marking long tests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e077b6655df290286c71404f4756babc97965f24\">e077b66</a></td><td><code>Using dynamic classes for FPS gcd.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21\">f8ea81b</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>\n",
    "created_at": "2022-09-19T10:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561297",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b47407b38c76f7cc6f58777bf8d6cf5feb19d4f5">b47407b</a></td><td><code>Implementing `_floordiv_`, Stream._true_order to boolean, first fraction field, more tests, marking long tests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e077b6655df290286c71404f4756babc97965f24">e077b66</a></td><td><code>Using dynamic classes for FPS gcd.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21">f8ea81b</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr></table>




---

archive/issue_comments_561298.json:
```json
{
    "body": "Changed commit from **[8e7b76d](https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d)** to **[f8ea81b](https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21)**",
    "created_at": "2022-09-19T10:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561298",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8e7b76d](https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d)** to **[f8ea81b](https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21)**



---

archive/issue_comments_561299.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThe following should work, but doesn't, because reversion is not lazy enough:\n\n```\nsage: L.<t> = LazyPowerSeriesRing(QQ)\nsage: f = L.undefined()\nsage: f.define(1+(t*f).revert())\n```\nIn this case, `f` should have the coefficients of https://oeis.org/A067145.",
    "created_at": "2022-09-19T13:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561299",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:13" align="right">Comment 13</div>

The following should work, but doesn't, because reversion is not lazy enough:

```
sage: L.<t> = LazyPowerSeriesRing(QQ)
sage: f = L.undefined()
sage: f.define(1+(t*f).revert())
```
In this case, `f` should have the coefficients of https://oeis.org/A067145.



---

archive/issue_comments_561300.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [Martin Rubey](#comment%3A13):\n> The following should work, but doesn't, because reversion is not lazy enough:\n> \n> ```\n> sage: L.<t> = LazyPowerSeriesRing(QQ)\n> sage: f = L.undefined()\n> sage: f.define(1+(t*f).revert())\n> ```\n> In this case, `f` should have the coefficients of https://oeis.org/A067145.\n\nThis one is harder because of the nature of the tests being done. Nothing can be promised about the coefficients of the undefined series. It comes down to how much we want to promise that the code will not break on bad input. I am thinking we can change\n\n```diff\n-        if not coeff_stream[1]:\n+        if coeff_stream._approximate_order > 1:\n             raise ValueError(\"compositional inverse does not exist\")\n-\n-        if coeff_stream[0]:\n-            raise ValueError(\"cannot determine whether the compositional inverse exists\")\n```\nThen we run into an issue with computing the exact order in `Stream_cauchy_invert`. So we are doing too many things not lazily enough. (For the invert, we can make `_ainv` a `@lazy_attribute` to fix this easily.)",
    "created_at": "2022-09-20T05:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561300",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [Martin Rubey](#comment%3A13):
> The following should work, but doesn't, because reversion is not lazy enough:
> 
> ```
> sage: L.<t> = LazyPowerSeriesRing(QQ)
> sage: f = L.undefined()
> sage: f.define(1+(t*f).revert())
> ```
> In this case, `f` should have the coefficients of https://oeis.org/A067145.

This one is harder because of the nature of the tests being done. Nothing can be promised about the coefficients of the undefined series. It comes down to how much we want to promise that the code will not break on bad input. I am thinking we can change

```diff
-        if not coeff_stream[1]:
+        if coeff_stream._approximate_order > 1:
             raise ValueError("compositional inverse does not exist")
-
-        if coeff_stream[0]:
-            raise ValueError("cannot determine whether the compositional inverse exists")
```
Then we run into an issue with computing the exact order in `Stream_cauchy_invert`. So we are doing too many things not lazily enough. (For the invert, we can make `_ainv` a `@lazy_attribute` to fix this easily.)



---

archive/issue_comments_561301.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nIn principle, I think it is more important that `define` works reliably when the input is valid than having helpful error messages.  However, silently wrong output is probably equally bad as failures on good input.\n\nFor the issue at hand, I think we can rewrite\n\n```diff\n-        # TODO: shift instead of (self / z) should be more efficient\n-        g.define(z / ((self / z)(g)))\n+        # the following is mathematically equivalent to\n+        # z / ((self / z)(g))\n+        # but more efficient and more lazy\n+        g.define((~self.shift(-1)(g)).shift(1))\n```\n\nHere is my thinking:\n\n* in `__invert__`, and `shift(-1)` it is correct to fail on `LazyPowerSeries` with positive valuation (in contrast to `_div_`).  In particular, `f * ~ z` is actually bad input for `LazyPowerSeries`\n\n* I don't see how we can (without great effor) avoid the order computation in `Stream_cauchy_invert.__init__`, when we have no upper bound on the valuation of the input, because it's negative is passed to `super().__init__`.  In our Aldor implementation, Ralf and I created a new domain which allowed computation with \"unknowns\".  I am not sure whether we want this.",
    "created_at": "2022-09-20T13:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561301",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:15" align="right">Comment 15</div>

In principle, I think it is more important that `define` works reliably when the input is valid than having helpful error messages.  However, silently wrong output is probably equally bad as failures on good input.

For the issue at hand, I think we can rewrite

```diff
-        # TODO: shift instead of (self / z) should be more efficient
-        g.define(z / ((self / z)(g)))
+        # the following is mathematically equivalent to
+        # z / ((self / z)(g))
+        # but more efficient and more lazy
+        g.define((~self.shift(-1)(g)).shift(1))
```

Here is my thinking:

* in `__invert__`, and `shift(-1)` it is correct to fail on `LazyPowerSeries` with positive valuation (in contrast to `_div_`).  In particular, `f * ~ z` is actually bad input for `LazyPowerSeries`

* I don't see how we can (without great effor) avoid the order computation in `Stream_cauchy_invert.__init__`, when we have no upper bound on the valuation of the input, because it's negative is passed to `super().__init__`.  In our Aldor implementation, Ralf and I created a new domain which allowed computation with "unknowns".  I am not sure whether we want this.



---

archive/issue_comments_561302.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI think we can make it so that we only check the order for invert (and division) when we actually try to get a coefficient. As such, we should not be returning silently wrong answers (on invalid input). I am not sure for `revert()` if weakening the check will allow this to happen.\n\nI can implement this tomorrow as I have a rough plan if you don't do it beforehand.",
    "created_at": "2022-09-20T15:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561302",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">Comment 16</div>

I think we can make it so that we only check the order for invert (and division) when we actually try to get a coefficient. As such, we should not be returning silently wrong answers (on invalid input). I am not sure for `revert()` if weakening the check will allow this to happen.

I can implement this tomorrow as I have a rough plan if you don't do it beforehand.



---

archive/issue_comments_561303.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWhat time zone are you in right now? :-)    \n\nGreat!\n\nPlease do, I don't see how!  (Other than also delaying the `_approximate_order` computations in all the other `Stream_XXX.__init__` methods, which looks a bit scary.  But maybe it isn't, actually.)",
    "created_at": "2022-09-20T15:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561303",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:17" align="right">Comment 17</div>

What time zone are you in right now? :-)    

Great!

Please do, I don't see how!  (Other than also delaying the `_approximate_order` computations in all the other `Stream_XXX.__init__` methods, which looks a bit scary.  But maybe it isn't, actually.)



---

archive/issue_comments_561304.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI just added a naive `_test_div`, and found the following gem:\n\n```\nsage: s = SymmetricFunctions(ZZ).s()\nsage: S = LazySymmetricFunctions(s)\nsage: x = S.some_elements()[1]; x\ns[]\nsage: x / x * x == x\nFalse\nsage: y = S(s[0])\nsage: x == y\nTrue\nsage: y / y * y == y\nTrue\n```\n\n(there are many other failures, related to missing fraction field, so I am not pushing yet)",
    "created_at": "2022-09-20T20:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561304",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:18" align="right">Comment 18</div>

I just added a naive `_test_div`, and found the following gem:

```
sage: s = SymmetricFunctions(ZZ).s()
sage: S = LazySymmetricFunctions(s)
sage: x = S.some_elements()[1]; x
s[]
sage: x / x * x == x
False
sage: y = S(s[0])
sage: x == y
True
sage: y / y * y == y
True
```

(there are many other failures, related to missing fraction field, so I am not pushing yet)



---

archive/issue_comments_561305.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI am in the Japanese timezone of got-writing-late-and-wanted-to-respond-to-Martin. `^^;;`\n\nThat is an interesting bug. I will have to explore it further. My guess is we are not being careful enough with something.",
    "created_at": "2022-09-21T01:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561305",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">Comment 19</div>

I am in the Japanese timezone of got-writing-late-and-wanted-to-respond-to-Martin. `^^;;`

That is an interesting bug. I will have to explore it further. My guess is we are not being careful enough with something.



---

archive/issue_comments_561306.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nHi Travis! Shall we have a video call maybe? I am extremely interested in your idea to solve the approximate order problem. I'd be available starting from about 15:30 Japan time.",
    "created_at": "2022-09-21T04:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561306",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:20" align="right">Comment 20</div>

Hi Travis! Shall we have a video call maybe? I am extremely interested in your idea to solve the approximate order problem. I'd be available starting from about 15:30 Japan time.



---

archive/issue_comments_561307.json:
```json
{
    "body": "Changed commit from **[f8ea81b](https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21)** to none",
    "created_at": "2022-09-21T06:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561307",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[f8ea81b](https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21)** to none



---

archive/issue_comments_561308.json:
```json
{
    "body": "Changed branch from **[u/mantepse/more_testsuites_for_lazy_series_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/more_testsuites_for_lazy_series_rings)** to **[u/tscrim/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lazy_series_test_suite-34552)**",
    "created_at": "2022-09-21T06:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561308",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/mantepse/more_testsuites_for_lazy_series_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/more_testsuites_for_lazy_series_rings)** to **[u/tscrim/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lazy_series_test_suite-34552)**



---

archive/issue_comments_561309.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60\">54bb1d8</a></td><td><code>add _test_revert and add more rings to test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373\">60f0664</a></td><td><code>fix more _an_element and some_element with incorrect coefficients</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b20eabff984c78737702af46dab811895b291db1\">b20eabf</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea\">7cbde49</a></td><td><code>fix reversion of symmetric functions, improve some_elements and tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e\">6a46183</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46\">b15e36d</a></td><td><code>skip test_revert when base ring is not a field</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d\">8e7b76d</a></td><td><code>fix and simplify wrong doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21\">f8ea81b</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17dd10f17b64589316e16210cf67e7b7e608f894\">17dd10f</a></td><td><code>Merge branch 'u/mantepse/more_testsuites_for_lazy_series_rings' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/lazy_series_test_suite-34552</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95\">86bb4bf</a></td><td><code>Making things more lazy with invert.</code></td></tr></table>\n",
    "created_at": "2022-09-21T06:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561309",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54bb1d846a2d67bac36bbadc658d5e9fce574d60">54bb1d8</a></td><td><code>add _test_revert and add more rings to test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60f0664c21b596ef0bd539cdfe61f3552ac75373">60f0664</a></td><td><code>fix more _an_element and some_element with incorrect coefficients</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b20eabff984c78737702af46dab811895b291db1">b20eabf</a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cbde499aaf0914108b9880549bd817f5f30c3ea">7cbde49</a></td><td><code>fix reversion of symmetric functions, improve some_elements and tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a46183c07162af51f6f2a8c50f0487a5ac7cf0e">6a46183</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b15e36dff297148e3c68836f83a8ca6aaafd6c46">b15e36d</a></td><td><code>skip test_revert when base ring is not a field</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e7b76de63876e8ab5fcbcdfb7b049de2e087e0d">8e7b76d</a></td><td><code>fix and simplify wrong doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8ea81b789124d7064bea3c13198bd93b5c96f21">f8ea81b</a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/more_testsuites_for_lazy_series_rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17dd10f17b64589316e16210cf67e7b7e608f894">17dd10f</a></td><td><code>Merge branch 'u/mantepse/more_testsuites_for_lazy_series_rings' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/lazy_series_test_suite-34552</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95">86bb4bf</a></td><td><code>Making things more lazy with invert.</code></td></tr></table>




---

archive/issue_comments_561310.json:
```json
{
    "body": "Commit: **[86bb4bf](https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95)**",
    "created_at": "2022-09-21T06:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561310",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[86bb4bf](https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95)**



---

archive/issue_comments_561311.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nThis now works:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: f = L.undefined(valuation=0)\nsage: f.define(1+(z*f).revert())\nsage: f\n1 + z - z^2 + 3*z^3 - 13*z^4 + 69*z^5 - 419*z^6 + O(z^7)\n```",
    "created_at": "2022-09-21T06:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561311",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">Comment 23</div>

This now works:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: f = L.undefined(valuation=0)
sage: f.define(1+(z*f).revert())
sage: f
1 + z - z^2 + 3*z^3 - 13*z^4 + 69*z^5 - 419*z^6 + O(z^7)
```



---

archive/issue_comments_561312.json:
```json
{
    "body": "Changed branch from **[u/tscrim/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lazy_series_test_suite-34552)** to **[u/mantepse/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/lazy_series_test_suite-34552)**",
    "created_at": "2022-09-21T13:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561312",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/tscrim/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lazy_series_test_suite-34552)** to **[u/mantepse/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/lazy_series_test_suite-34552)**



---

archive/issue_comments_561313.json:
```json
{
    "body": "Changed commit from **[86bb4bf](https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95)** to **[6f10ccb](https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1)**",
    "created_at": "2022-09-21T20:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561313",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[86bb4bf](https://github.com/sagemath/sagetrac-mirror/commit/86bb4bf346761997c86983ef2669f8f68361bc95)** to **[6f10ccb](https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1)**



---

archive/issue_comments_561314.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1\">6f10ccb</a></td><td><code>add a (currently failing) test for an implicit definition of a symmetric function involving reversion</code></td></tr></table>\n",
    "created_at": "2022-09-21T20:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561314",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1">6f10ccb</a></td><td><code>add a (currently failing) test for an implicit definition of a symmetric function involving reversion</code></td></tr></table>




---

archive/issue_comments_561315.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI think that, to make\n\n```\n        X = R(Partition([1]))\n        b = coeff_stream[1][Partition([1])]\n        b_inv = R.base_ring()(~b)\n        g = P.undefined(valuation=1)\n        g.define(b_inv * (X - (self - b * X)(g)))\n```\nlazy, we have to move it into a new class `Stream_revert`.  I was too lazy to do this today.",
    "created_at": "2022-09-21T20:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561315",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:26" align="right">Comment 26</div>

I think that, to make

```
        X = R(Partition([1]))
        b = coeff_stream[1][Partition([1])]
        b_inv = R.base_ring()(~b)
        g = P.undefined(valuation=1)
        g.define(b_inv * (X - (self - b * X)(g)))
```
lazy, we have to move it into a new class `Stream_revert`.  I was too lazy to do this today.



---

archive/issue_comments_561316.json:
```json
{
    "body": "Changed commit from **[6f10ccb](https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1)** to **[7f0728b](https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87)**",
    "created_at": "2022-09-21T20:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561316",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f10ccb](https://github.com/sagemath/sagetrac-mirror/commit/6f10ccb315d36d1828694c248b534d875e7dc0b1)** to **[7f0728b](https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87)**



---

archive/issue_comments_561317.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87\">7f0728b</a></td><td><code>remove useless line - _approximate_order is called by __getitem__.</code></td></tr></table>\n",
    "created_at": "2022-09-21T20:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561317",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87">7f0728b</a></td><td><code>remove useless line - _approximate_order is called by __getitem__.</code></td></tr></table>




---

archive/issue_comments_561318.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820\">43a7804</a></td><td><code>make revert lazy enough</code></td></tr></table>\n",
    "created_at": "2022-09-23T11:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561318",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820">43a7804</a></td><td><code>make revert lazy enough</code></td></tr></table>




---

archive/issue_comments_561319.json:
```json
{
    "body": "Changed commit from **[7f0728b](https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87)** to **[43a7804](https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820)**",
    "created_at": "2022-09-23T11:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f0728b](https://github.com/sagemath/sagetrac-mirror/commit/7f0728b0bc59c9b90556c626c7d8e77756eb1b87)** to **[43a7804](https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820)**



---

archive/issue_comments_561320.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179\">a3681d7</a></td><td><code>fix doctests in Stream_cauchy_compose</code></td></tr></table>\n",
    "created_at": "2022-09-23T15:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561320",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29" align="right">Comment 29</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179">a3681d7</a></td><td><code>fix doctests in Stream_cauchy_compose</code></td></tr></table>




---

archive/issue_comments_561321.json:
```json
{
    "body": "Changed commit from **[43a7804](https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820)** to **[a3681d7](https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179)**",
    "created_at": "2022-09-23T15:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561321",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[43a7804](https://github.com/sagemath/sagetrac-mirror/commit/43a78040cb126b088bdc2b9767dc4f3482e56820)** to **[a3681d7](https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179)**



---

archive/issue_comments_561322.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910\">498c043</a></td><td><code>fix division by 1 and by itself</code></td></tr></table>\n",
    "created_at": "2022-09-23T16:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561322",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910">498c043</a></td><td><code>fix division by 1 and by itself</code></td></tr></table>




---

archive/issue_comments_561323.json:
```json
{
    "body": "Changed commit from **[a3681d7](https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179)** to **[498c043](https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910)**",
    "created_at": "2022-09-23T16:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561323",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a3681d7](https://github.com/sagemath/sagetrac-mirror/commit/a3681d7722fb332da9f111e2ca2709550d4b0179)** to **[498c043](https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910)**



---

archive/issue_comments_561324.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d\">2913169</a></td><td><code>include _test_div</code></td></tr></table>\n",
    "created_at": "2022-09-23T21:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561324",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31" align="right">Comment 31</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d">2913169</a></td><td><code>include _test_div</code></td></tr></table>




---

archive/issue_comments_561325.json:
```json
{
    "body": "Changed commit from **[498c043](https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910)** to **[2913169](https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d)**",
    "created_at": "2022-09-23T21:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561325",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[498c043](https://github.com/sagemath/sagetrac-mirror/commit/498c0436a0b6aebb1760a2860484f3aa39105910)** to **[2913169](https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d)**



---

archive/issue_comments_561326.json:
```json
{
    "body": "Changed commit from **[2913169](https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d)** to **[d578d8b](https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688)**",
    "created_at": "2022-09-23T21:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561326",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2913169](https://github.com/sagemath/sagetrac-mirror/commit/291316946bf628b46830e3cf80922d8e3c8ef73d)** to **[d578d8b](https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688)**



---

archive/issue_comments_561327.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688\">d578d8b</a></td><td><code>better error handling in _test_div</code></td></tr></table>\n",
    "created_at": "2022-09-23T21:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561327",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688">d578d8b</a></td><td><code>better error handling in _test_div</code></td></tr></table>




---

archive/issue_comments_561328.json:
```json
{
    "body": "Changed commit from **[d578d8b](https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688)** to **[4ce10c7](https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3)**",
    "created_at": "2022-09-23T23:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561328",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d578d8b](https://github.com/sagemath/sagetrac-mirror/commit/d578d8b9b55979e9b9d31464674be2d5aed7f688)** to **[4ce10c7](https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3)**



---

archive/issue_comments_561329.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3\">4ce10c7</a></td><td><code>make TestSuite.run pass</code></td></tr></table>\n",
    "created_at": "2022-09-23T23:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561329",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3">4ce10c7</a></td><td><code>make TestSuite.run pass</code></td></tr></table>




---

archive/issue_comments_561330.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nThis is now almost done.  What I need next is a proof or a counterexample that I can or cannot do\n\n```diff\ndiff --git a/src/sage/rings/lazy_series.py b/src/sage/rings/lazy_series.py\nindex e332f8cf033..b902b223237 100644\n--- a/src/sage/rings/lazy_series.py\n+++ b/src/sage/rings/lazy_series.py\n@@ -3776,8 +3776,8 @@ class LazyLaurentSeries(LazyCauchyProductSeries):\n         #if not coeff_stream[1]:\n         #    raise ValueError(\"compositional inverse does not exist\")\n \n-        #if coeff_stream[0]:\n-        #    raise ValueError(\"cannot determine whether the compositional inverse exists\")\n+        if coeff_stream[0]:\n+            raise ValueError(\"cannot determine whether the compositional inverse exists\")\n \n         z = P.gen()\n         g = P.undefined(valuation=1)\n```\nI am too tired for this right now.\n\nIt might be OK, because we cannot compute the reversion of `a + b z + O(z^2)` anyway.  But could it be that we trigger a computation we should not trigger when asking for `coeff_stream[0]`?",
    "created_at": "2022-09-23T23:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561330",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:34" align="right">Comment 34</div>

This is now almost done.  What I need next is a proof or a counterexample that I can or cannot do

```diff
diff --git a/src/sage/rings/lazy_series.py b/src/sage/rings/lazy_series.py
index e332f8cf033..b902b223237 100644
--- a/src/sage/rings/lazy_series.py
+++ b/src/sage/rings/lazy_series.py
@@ -3776,8 +3776,8 @@ class LazyLaurentSeries(LazyCauchyProductSeries):
         #if not coeff_stream[1]:
         #    raise ValueError("compositional inverse does not exist")
 
-        #if coeff_stream[0]:
-        #    raise ValueError("cannot determine whether the compositional inverse exists")
+        if coeff_stream[0]:
+            raise ValueError("cannot determine whether the compositional inverse exists")
 
         z = P.gen()
         g = P.undefined(valuation=1)
```
I am too tired for this right now.

It might be OK, because we cannot compute the reversion of `a + b z + O(z^2)` anyway.  But could it be that we trigger a computation we should not trigger when asking for `coeff_stream[0]`?



---

archive/issue_comments_561331.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nIn fact, I don't even have proof that we are allowed to check `_approximate_order` in `revert`, `invert`, etc. - unless the stream is 'exact', of course.",
    "created_at": "2022-09-23T23:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561331",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:35" align="right">Comment 35</div>

In fact, I don't even have proof that we are allowed to check `_approximate_order` in `revert`, `invert`, etc. - unless the stream is 'exact', of course.



---

archive/issue_comments_561332.json:
```json
{
    "body": "Changed commit from **[4ce10c7](https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3)** to **[af1c0cb](https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd)**",
    "created_at": "2022-09-23T23:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561332",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4ce10c7](https://github.com/sagemath/sagetrac-mirror/commit/4ce10c7f4810180964e2925596aaae6448186de3)** to **[af1c0cb](https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd)**



---

archive/issue_comments_561333.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd\">af1c0cb</a></td><td><code>make remaining doctests pass</code></td></tr></table>\n",
    "created_at": "2022-09-23T23:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561333",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36" align="right">Comment 36</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd">af1c0cb</a></td><td><code>make remaining doctests pass</code></td></tr></table>




---

archive/issue_comments_561334.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI \"forced\" the doctests to pass, but the challenge remains:\n\n* find an implicit definition (possibly involving several unknowns) that fails even though it shouldn't, or\n\n* prove that our code works.",
    "created_at": "2022-09-23T23:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561334",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:37" align="right">Comment 37</div>

I "forced" the doctests to pass, but the challenge remains:

* find an implicit definition (possibly involving several unknowns) that fails even though it shouldn't, or

* prove that our code works.



---

archive/issue_comments_561335.json:
```json
{
    "body": "Changed commit from **[af1c0cb](https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd)** to **[b8443aa](https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961)**",
    "created_at": "2022-09-24T09:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561335",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af1c0cb](https://github.com/sagemath/sagetrac-mirror/commit/af1c0cb96649310235774ba7ad9f270b7b85abcd)** to **[b8443aa](https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961)**



---

archive/issue_comments_561336.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961\">b8443aa</a></td><td><code>add test, remove bad checks that prevent test from passing</code></td></tr></table>\n",
    "created_at": "2022-09-24T09:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561336",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38" align="right">Comment 38</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961">b8443aa</a></td><td><code>add test, remove bad checks that prevent test from passing</code></td></tr></table>




---

archive/issue_comments_561337.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThat challenge was easy.",
    "created_at": "2022-09-24T09:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561337",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:39" align="right">Comment 39</div>

That challenge was easy.



---

archive/issue_comments_561338.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a\">aa646eb</a></td><td><code>add currently failing test</code></td></tr></table>\n",
    "created_at": "2022-09-24T10:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40" align="right">Comment 40</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a">aa646eb</a></td><td><code>add currently failing test</code></td></tr></table>




---

archive/issue_comments_561339.json:
```json
{
    "body": "Changed commit from **[b8443aa](https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961)** to **[aa646eb](https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a)**",
    "created_at": "2022-09-24T10:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561339",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b8443aa](https://github.com/sagemath/sagetrac-mirror/commit/b8443aa31535487f03e56574b4ec60b5bab63961)** to **[aa646eb](https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a)**



---

archive/issue_comments_561340.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e\">912d5b2</a></td><td><code>correct bad test</code></td></tr></table>\n",
    "created_at": "2022-09-24T10:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561340",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e">912d5b2</a></td><td><code>correct bad test</code></td></tr></table>




---

archive/issue_comments_561341.json:
```json
{
    "body": "Changed commit from **[aa646eb](https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a)** to **[912d5b2](https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e)**",
    "created_at": "2022-09-24T10:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561341",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa646eb](https://github.com/sagemath/sagetrac-mirror/commit/aa646eb8567e68a4328cafdd007786895472384a)** to **[912d5b2](https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e)**



---

archive/issue_events_453277.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-24T10:27:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453277"
}
```



---

archive/issue_comments_561342.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nI think that this is now ready for review.  In principle, I know how things should work now, and if we find any further failing examples, it should be straightforward to fix them.\n\nI would prefer to leave better error handling for a different ticket, so that this branch (which fixes **several** evil bugs) is in the development branch soon.",
    "created_at": "2022-09-24T10:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561342",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:43" align="right">Comment 43</div>

I think that this is now ready for review.  In principle, I know how things should work now, and if we find any further failing examples, it should be straightforward to fix them.

I would prefer to leave better error handling for a different ticket, so that this branch (which fixes **several** evil bugs) is in the development branch soon.



---

archive/issue_comments_561343.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nIn general, it does not work to access `_approximate_order` in `lazy_series`.  For example, in `LazyLaurentSeries.revert` in line 3790, we had (now commented out)\n\n```\n        if coeff_stream._approximate_order > 1:\n            raise ValueError(\"compositional inverse does not exist\")\n```\nThis does not work, for example, for\n\n```\nsage: L.<t> = LazyLaurentSeriesRing(QQ)\nsage: f = L.undefined(valuation=0)\nsage: f.define(1+(t*~f).revert())\n```\nMore precisely: the above mentioned access to `_approximate_order` eventually triggers the computation of `(~f)._approximate_order`.  Since `f` is a lazy Laurent series, this triggers the computation of `f.order()`, which fails at this point.\n\nThere are two occurrences, in `LazyCauchyProductSeries.__invert__`, `LazyCauchyProductSeries._div_` which I cannot exploit for a failing example, yet.\n\nThis is at the beginning of `__invert__`, line 2826-2829:\n\n```\n        P = self.parent()\n        coeff_stream = self._coeff_stream\n        if P._minimal_valuation is not None and coeff_stream._approximate_order > 0:\n            raise ZeroDivisionError(\"cannot divide by a series of positive valuation\")\n```\nand when checking whether to construct a fraction field in `_div_`, line 2988-2994::\n\n```\n        if (P._minimal_valuation is not None\n            and left._true_order\n            and left._approximate_order < right._approximate_order):\n            F = P.fraction_field()\n            num = F.element_class(F, left)\n            den = F.element_class(F, right)\n            return num / den\n```\n\nI can imagine that both of these are actually OK, but I'd like to see a stringent argument.",
    "created_at": "2022-09-25T21:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561343",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:44" align="right">Comment 44</div>

In general, it does not work to access `_approximate_order` in `lazy_series`.  For example, in `LazyLaurentSeries.revert` in line 3790, we had (now commented out)

```
        if coeff_stream._approximate_order > 1:
            raise ValueError("compositional inverse does not exist")
```
This does not work, for example, for

```
sage: L.<t> = LazyLaurentSeriesRing(QQ)
sage: f = L.undefined(valuation=0)
sage: f.define(1+(t*~f).revert())
```
More precisely: the above mentioned access to `_approximate_order` eventually triggers the computation of `(~f)._approximate_order`.  Since `f` is a lazy Laurent series, this triggers the computation of `f.order()`, which fails at this point.

There are two occurrences, in `LazyCauchyProductSeries.__invert__`, `LazyCauchyProductSeries._div_` which I cannot exploit for a failing example, yet.

This is at the beginning of `__invert__`, line 2826-2829:

```
        P = self.parent()
        coeff_stream = self._coeff_stream
        if P._minimal_valuation is not None and coeff_stream._approximate_order > 0:
            raise ZeroDivisionError("cannot divide by a series of positive valuation")
```
and when checking whether to construct a fraction field in `_div_`, line 2988-2994::

```
        if (P._minimal_valuation is not None
            and left._true_order
            and left._approximate_order < right._approximate_order):
            F = P.fraction_field()
            num = F.element_class(F, left)
            den = F.element_class(F, right)
            return num / den
```

I can imagine that both of these are actually OK, but I'd like to see a stringent argument.



---

archive/issue_comments_561344.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nIt is not entirely clear to me, why we have a failure here:\n\n```\nsage: P.<x> = LazyPowerSeriesRing(QQ)\nsage: f = P.undefined(); f.define(1 - ~f*x); f\n1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)\nsage: f = P.undefined(); f.define(1 - x * ~f); f\n1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)\nsage: f = P.undefined(); f.define(1 - x / f); f\n<repr(<sage.rings.lazy_series_ring.LazyPowerSeriesRing_with_category.element_class at 0x7f319f4b2000>) failed: RecursionError: maximum recursion depth exceeded>\n```",
    "created_at": "2022-09-25T21:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561344",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:45" align="right">Comment 45</div>

It is not entirely clear to me, why we have a failure here:

```
sage: P.<x> = LazyPowerSeriesRing(QQ)
sage: f = P.undefined(); f.define(1 - ~f*x); f
1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)
sage: f = P.undefined(); f.define(1 - x * ~f); f
1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)
sage: f = P.undefined(); f.define(1 - x / f); f
<repr(<sage.rings.lazy_series_ring.LazyPowerSeriesRing_with_category.element_class at 0x7f319f4b2000>) failed: RecursionError: maximum recursion depth exceeded>
```



---

archive/issue_comments_561345.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nThe last one was easy (we have merge failures all over the place currently, so I am not pushing this)\n\n```diff\ndiff --git a/src/sage/rings/lazy_series.py b/src/sage/rings/lazy_series.py\nindex 5a21dbe7425..4ef8c42e03b 100644\n--- a/src/sage/rings/lazy_series.py\n+++ b/src/sage/rings/lazy_series.py\n@@ -962,7 +962,8 @@ class LazyModuleElement(Element):\n         return any(self[i] for i in range(v, v + prec))\n \n     def define(self, s):\n-        r\"\"\"Define an equation by ``self = s``.\n+        r\"\"\"\n+        Define an equation by ``self = s``.\n \n         INPUT:\n \n@@ -1136,6 +1137,13 @@ class LazyModuleElement(Element):\n             sage: f\n             1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)\n \n+        Check that this also works using division::\n+\n+            sage: f = P.undefined()\n+            sage: f.define(1 - x / f)\n+            sage: f\n+            1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)\n+\n             sage: D = LazyDirichletSeriesRing(QQ, \"s\")\n             sage: g = D([0, 1])\n             sage: f = D.undefined()\n@@ -3057,9 +3065,8 @@ class LazyCauchyProductSeries(LazyModuleElement):\n \n         # if P._minimal_valuation == 0, then this is the true order\n         # of coeff_stream, otherwise P._minimal_valuation is None\n-        # right_inverse = Stream_cauchy_invert(right,\n-        #                                     approximate_order=P._minimal_valuation)\n-        right_inverse = Stream_cauchy_invert(right)\n+        right_inverse = Stream_cauchy_invert(right,\n+                                             approximate_order_upper_bound=P._minimal_valuation)\n         return P.element_class(P, Stream_cauchy_mul(left, right_inverse))\n\n```",
    "created_at": "2022-09-25T21:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561345",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:46" align="right">Comment 46</div>

The last one was easy (we have merge failures all over the place currently, so I am not pushing this)

```diff
diff --git a/src/sage/rings/lazy_series.py b/src/sage/rings/lazy_series.py
index 5a21dbe7425..4ef8c42e03b 100644
--- a/src/sage/rings/lazy_series.py
+++ b/src/sage/rings/lazy_series.py
@@ -962,7 +962,8 @@ class LazyModuleElement(Element):
         return any(self[i] for i in range(v, v + prec))
 
     def define(self, s):
-        r"""Define an equation by ``self = s``.
+        r"""
+        Define an equation by ``self = s``.
 
         INPUT:
 
@@ -1136,6 +1137,13 @@ class LazyModuleElement(Element):
             sage: f
             1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)
 
+        Check that this also works using division::
+
+            sage: f = P.undefined()
+            sage: f.define(1 - x / f)
+            sage: f
+            1 - x - x^2 - 2*x^3 - 5*x^4 - 14*x^5 - 42*x^6 + O(x^7)
+
             sage: D = LazyDirichletSeriesRing(QQ, "s")
             sage: g = D([0, 1])
             sage: f = D.undefined()
@@ -3057,9 +3065,8 @@ class LazyCauchyProductSeries(LazyModuleElement):
 
         # if P._minimal_valuation == 0, then this is the true order
         # of coeff_stream, otherwise P._minimal_valuation is None
-        # right_inverse = Stream_cauchy_invert(right,
-        #                                     approximate_order=P._minimal_valuation)
-        right_inverse = Stream_cauchy_invert(right)
+        right_inverse = Stream_cauchy_invert(right,
+                                             approximate_order_upper_bound=P._minimal_valuation)
         return P.element_class(P, Stream_cauchy_mul(left, right_inverse))

```



---

archive/issue_comments_561346.json:
```json
{
    "body": "Changed commit from **[912d5b2](https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e)** to **[2e7eec1](https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd)**",
    "created_at": "2022-09-25T22:43:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561346",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[912d5b2](https://github.com/sagemath/sagetrac-mirror/commit/912d5b28c6dca27235caa013f0289e54b9fd605e)** to **[2e7eec1](https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd)**



---

archive/issue_comments_561347.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97cfbcf66a536e0653ec9de397ba9223b42793d4\">97cfbcf</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd\">2e7eec1</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>\n",
    "created_at": "2022-09-25T22:43:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561347",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47" align="right">Comment 47</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97cfbcf66a536e0653ec9de397ba9223b42793d4">97cfbcf</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd">2e7eec1</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>




---

archive/issue_comments_561348.json:
```json
{
    "body": "Changed commit from **[2e7eec1](https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd)** to **[0574b09](https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1)**",
    "created_at": "2022-09-25T22:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561348",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2e7eec1](https://github.com/sagemath/sagetrac-mirror/commit/2e7eec12a2a97e948e51929ba635d565eba3eacd)** to **[0574b09](https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1)**



---

archive/issue_comments_561349.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1\">0574b09</a></td><td><code>fix _div_</code></td></tr></table>\n",
    "created_at": "2022-09-25T22:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561349",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48" align="right">Comment 48</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1">0574b09</a></td><td><code>fix _div_</code></td></tr></table>




---

archive/issue_events_453278.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-25T23:06:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453278"
}
```



---

archive/issue_events_453279.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-25T23:06:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453279"
}
```



---

archive/issue_comments_561350.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nsomething broke, there are many failing tests now.",
    "created_at": "2022-09-25T23:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561350",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:49" align="right">Comment 49</div>

something broke, there are many failing tests now.



---

archive/issue_comments_561351.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nOh, the commit in [comment:48](#comment%3A48) is bad!\n\n```\n        right_inverse = Stream_cauchy_invert(right,\n                                             approximate_order_upper_bound=P._minimal_valuation)\n```\n\ndoes not work, when `left` and `right` are both divisible by the generator.",
    "created_at": "2022-09-25T23:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561351",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:50" align="right">Comment 50</div>

Oh, the commit in [comment:48](#comment%3A48) is bad!

```
        right_inverse = Stream_cauchy_invert(right,
                                             approximate_order_upper_bound=P._minimal_valuation)
```

does not work, when `left` and `right` are both divisible by the generator.



---

archive/issue_comments_561352.json:
```json
{
    "body": "Changed commit from **[0574b09](https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1)** to **[3789d84](https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee)**",
    "created_at": "2022-09-26T09:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561352",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0574b09](https://github.com/sagemath/sagetrac-mirror/commit/0574b095d08c571f6c509bf0a6f4cd5e85f896f1)** to **[3789d84](https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee)**



---

archive/issue_comments_561353.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee\">3789d84</a></td><td><code>slightly simplify logic, explain why f.define(1 - x / f) cannot work</code></td></tr></table>\n",
    "created_at": "2022-09-26T09:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561353",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee">3789d84</a></td><td><code>slightly simplify logic, explain why f.define(1 - x / f) cannot work</code></td></tr></table>




---

archive/issue_comments_561354.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8\">3ced5ec</a></td><td><code>attempt a better error message</code></td></tr></table>\n",
    "created_at": "2022-09-26T11:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561354",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52" align="right">Comment 52</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8">3ced5ec</a></td><td><code>attempt a better error message</code></td></tr></table>




---

archive/issue_comments_561355.json:
```json
{
    "body": "Changed commit from **[3789d84](https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee)** to **[3ced5ec](https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8)**",
    "created_at": "2022-09-26T11:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561355",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3789d84](https://github.com/sagemath/sagetrac-mirror/commit/3789d84c75be0d60d7b6aba59c486fa624accdee)** to **[3ced5ec](https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8)**



---

archive/issue_events_453280.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-26T11:30:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453280"
}
```



---

archive/issue_events_453281.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-26T11:30:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453281"
}
```



---

archive/issue_comments_561356.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nI am catching the recursion error now where it first occurs (in `Stream_cauchy_invert`).\n\nThis is certainly not optimal, because it will only be triggered when accessing the degree 1 part:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: s = L(lambda n: 2 if n == 0 else 3 if n == 1 else 0, valuation=0); s\n2 + 3*z + O(z^7)\nsage: f = s.revert()\nsage: f[0]\n0\n```\nHowever, I don't see how to make this much better.",
    "created_at": "2022-09-26T11:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561356",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:53" align="right">Comment 53</div>

I am catching the recursion error now where it first occurs (in `Stream_cauchy_invert`).

This is certainly not optimal, because it will only be triggered when accessing the degree 1 part:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: s = L(lambda n: 2 if n == 0 else 3 if n == 1 else 0, valuation=0); s
2 + 3*z + O(z^7)
sage: f = s.revert()
sage: f[0]
0
```
However, I don't see how to make this much better.



---

archive/issue_comments_561357.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6\">52ac7af</a></td><td><code>pyflakes observations</code></td></tr></table>\n",
    "created_at": "2022-09-26T13:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561357",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54" align="right">Comment 54</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6">52ac7af</a></td><td><code>pyflakes observations</code></td></tr></table>




---

archive/issue_comments_561358.json:
```json
{
    "body": "Changed commit from **[3ced5ec](https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8)** to **[52ac7af](https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6)**",
    "created_at": "2022-09-26T13:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561358",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3ced5ec](https://github.com/sagemath/sagetrac-mirror/commit/3ced5ec8328449e51cd48342557dd021d2db73c8)** to **[52ac7af](https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6)**



---

archive/issue_comments_561359.json:
```json
{
    "body": "Changed commit from **[52ac7af](https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6)** to **[fb3a5cd](https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a)**",
    "created_at": "2022-09-26T13:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561359",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[52ac7af](https://github.com/sagemath/sagetrac-mirror/commit/52ac7af1b63854d9905bbf81e73acbbd854f51d6)** to **[fb3a5cd](https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a)**



---

archive/issue_comments_561360.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1388b8ab43afcc9b8c7bbef50a9586277580af8e\">1388b8a</a></td><td><code>Merge branch 'u/chapoton/34494' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bfe5f79361e2ecec4b72bb3746714c419e4542f\">7bfe5f7</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2\">2039990</a></td><td><code>Updating doctest due to changes from #34494.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdea82086b729509648bd306a04346ecead00cb1\">cdea820</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/derivatives_lazy_series-34413</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7f04edc591b9cc009d2b663098f95650dde3398\">b7f04ed</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34413/derivatives_lazy_series-34413</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2325826800eff4c209d64fa33c09d5dfa4ce78a3\">2325826</a></td><td><code>Merge branch 'u/mantepse/derivatives_lazy_series-34413' of trac.sagemath.org:sage into t/34422/implement_functorial_composition_of_lazy_symmetric_functiosn</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebcf5c3b4cb3d238d8957d06ee96421cca939a4b\">ebcf5c3</a></td><td><code>Merge branch 'u/mantepse/implement_functorial_composition_of_lazy_symmetric_functiosn' of trac.sagemath.org:sage into t/34423/implement_arithmetic_product_of_lazy_symmetric_functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4172688e381f6b8e617bcd1a7583aec50f346307\">4172688</a></td><td><code>Merge branch 'u/mantepse/implement_arithmetic_product_of_lazy_symmetric_functions' of trac.sagemath.org:sage into t/32367/replace_lazy_power_series-32367</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41ca99b7bfee0c11c4ece0bffa0b9230a7b4f67b\">41ca99b</a></td><td><code>Merge branch 'u/mantepse/replace_lazy_power_series-32367' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a\">fb3a5cd</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>\n",
    "created_at": "2022-09-26T13:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561360",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55" align="right">Comment 55</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1388b8ab43afcc9b8c7bbef50a9586277580af8e">1388b8a</a></td><td><code>Merge branch 'u/chapoton/34494' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bfe5f79361e2ecec4b72bb3746714c419e4542f">7bfe5f7</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2">2039990</a></td><td><code>Updating doctest due to changes from #34494.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdea82086b729509648bd306a04346ecead00cb1">cdea820</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/derivatives_lazy_series-34413</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7f04edc591b9cc009d2b663098f95650dde3398">b7f04ed</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34413/derivatives_lazy_series-34413</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2325826800eff4c209d64fa33c09d5dfa4ce78a3">2325826</a></td><td><code>Merge branch 'u/mantepse/derivatives_lazy_series-34413' of trac.sagemath.org:sage into t/34422/implement_functorial_composition_of_lazy_symmetric_functiosn</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebcf5c3b4cb3d238d8957d06ee96421cca939a4b">ebcf5c3</a></td><td><code>Merge branch 'u/mantepse/implement_functorial_composition_of_lazy_symmetric_functiosn' of trac.sagemath.org:sage into t/34423/implement_arithmetic_product_of_lazy_symmetric_functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4172688e381f6b8e617bcd1a7583aec50f346307">4172688</a></td><td><code>Merge branch 'u/mantepse/implement_arithmetic_product_of_lazy_symmetric_functions' of trac.sagemath.org:sage into t/32367/replace_lazy_power_series-32367</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41ca99b7bfee0c11c4ece0bffa0b9230a7b4f67b">41ca99b</a></td><td><code>Merge branch 'u/mantepse/replace_lazy_power_series-32367' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a">fb3a5cd</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>




---

archive/issue_comments_561361.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f\">855d2bf</a></td><td><code>remove unused variable</code></td></tr></table>\n",
    "created_at": "2022-09-26T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56" align="right">Comment 56</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f">855d2bf</a></td><td><code>remove unused variable</code></td></tr></table>




---

archive/issue_comments_561362.json:
```json
{
    "body": "Changed commit from **[fb3a5cd](https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a)** to **[855d2bf](https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f)**",
    "created_at": "2022-09-26T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561362",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb3a5cd](https://github.com/sagemath/sagetrac-mirror/commit/fb3a5cdb6745cb78983f6bf5fc88bef93f21040a)** to **[855d2bf](https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f)**



---

archive/issue_comments_561363.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f\">75c275c</a></td><td><code>add documentation and doctests for _approximate_order</code></td></tr></table>\n",
    "created_at": "2022-09-26T17:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561363",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57" align="right">Comment 57</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f">75c275c</a></td><td><code>add documentation and doctests for _approximate_order</code></td></tr></table>




---

archive/issue_comments_561364.json:
```json
{
    "body": "Changed commit from **[855d2bf](https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f)** to **[75c275c](https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f)**",
    "created_at": "2022-09-26T17:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561364",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[855d2bf](https://github.com/sagemath/sagetrac-mirror/commit/855d2bf04aaebfc1696e34664b48521bffd6a79f)** to **[75c275c](https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f)**



---

archive/issue_comments_561365.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nEssentially green bot.\n\nThe pyflakes warnings `local variable 'res' is assigned to but never used` are from #34345.  Should I fix them here or elsewhere?",
    "created_at": "2022-09-27T08:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561365",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:58" align="right">Comment 58</div>

Essentially green bot.

The pyflakes warnings `local variable 'res' is assigned to but never used` are from #34345.  Should I fix them here or elsewhere?



---

archive/issue_comments_561366.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nThe codestylecheck warnings are as follows:\n\n```\nsage/rings/lazy_series.py:843:21: E711 comparison to None should be 'if cond is None:'\nsage/rings/lazy_series.py:961:17: E711 comparison to None should be 'if cond is None:'\nsage/rings/lazy_series.py:5452:9: E306 expected 1 blank line before a nested definition, found 0\n```\nThe first two wouldn't work with `is`, because an option only compares equal to `None`:\n\n```\n            prec = self.parent().options.halting_precision\n            if prec == None:\n                raise ValueError(\"undecidable\")\n```\nThe `E306` I disagree with, I am setting the \"local\" variables for the local function definition.  (`X` is used later, but looks best at this spot) \n\n```\n        la = Partition([1])\n        X = R(la)\n        def coefficient(n):\n            if n:\n                return 0\n            c = coeff_stream[1][la]\n            if c.is_unit():\n                return ~c\n            raise ValueError(\"compositional inverse does not exist\")\n```",
    "created_at": "2022-09-27T08:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561366",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:59" align="right">Comment 59</div>

The codestylecheck warnings are as follows:

```
sage/rings/lazy_series.py:843:21: E711 comparison to None should be 'if cond is None:'
sage/rings/lazy_series.py:961:17: E711 comparison to None should be 'if cond is None:'
sage/rings/lazy_series.py:5452:9: E306 expected 1 blank line before a nested definition, found 0
```
The first two wouldn't work with `is`, because an option only compares equal to `None`:

```
            prec = self.parent().options.halting_precision
            if prec == None:
                raise ValueError("undecidable")
```
The `E306` I disagree with, I am setting the "local" variables for the local function definition.  (`X` is used later, but looks best at this spot) 

```
        la = Partition([1])
        X = R(la)
        def coefficient(n):
            if n:
                return 0
            c = coeff_stream[1][la]
            if c.is_unit():
                return ~c
            raise ValueError("compositional inverse does not exist")
```



---

archive/issue_comments_561367.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nIt is interesting that the github bots will not detect the unused variables.",
    "created_at": "2022-09-27T08:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561367",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:60" align="right">Comment 60</div>

It is interesting that the github bots will not detect the unused variables.



---

archive/issue_comments_561368.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nSorry, but the linter must pass, no choice. Even if E306 is in some sense a matter of taste, it is currently required. Your def without empty line before would be the only one in the whole sage code base.\n\nAbout the comparison to None, this is very strange. Could you use \"if not prec\" instead ? or some isinstance ? What is the type of \"prec\" that is equal but not `None` ?",
    "created_at": "2022-09-29T10:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561368",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:61" align="right">Comment 61</div>

Sorry, but the linter must pass, no choice. Even if E306 is in some sense a matter of taste, it is currently required. Your def without empty line before would be the only one in the whole sage code base.

About the comparison to None, this is very strange. Could you use "if not prec" instead ? or some isinstance ? What is the type of "prec" that is equal but not `None` ?



---

archive/issue_comments_561369.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nHi Fr\u00e9d\u00e9ric!\n\nConcerning the second question:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: L.options.halting_precision\nNone\nsage: type(L.options.halting_precision)\n<class 'sage.structure.global_options.Option'>\nsage: L.options.halting_precision == None\nTrue\nsage: L.options.halting_precision is None\nFalse\n```",
    "created_at": "2022-09-29T10:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561369",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:62" align="right">Comment 62</div>

Hi Frédéric!

Concerning the second question:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: L.options.halting_precision
None
sage: type(L.options.halting_precision)
<class 'sage.structure.global_options.Option'>
sage: L.options.halting_precision == None
True
sage: L.options.halting_precision is None
False
```



---

archive/issue_comments_561370.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nI'll add the missing line.\n\nCould you please also respond to [comment:58](#comment%3A58)?\n\n(these pyflakes warnings were missed in a completely unrelated ticket)",
    "created_at": "2022-09-29T10:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561370",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:63" align="right">Comment 63</div>

I'll add the missing line.

Could you please also respond to [comment:58](#comment%3A58)?

(these pyflakes warnings were missed in a completely unrelated ticket)



---

archive/issue_comments_561371.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nthe pyflakes warning are not your responsability, but you can fix them if you want\n\n\nFor the comparison to None, maybe this could fixed using the complicated syntax\n\n```\nsage: op = L.options.constant_length\nsage: op._options[op._name]\n3\nsage: type(_)\n<class 'int'>\n```\nor by adding in general a way to extract the bare value of an option somehow.",
    "created_at": "2022-09-29T11:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561371",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:64" align="right">Comment 64</div>

the pyflakes warning are not your responsability, but you can fix them if you want


For the comparison to None, maybe this could fixed using the complicated syntax

```
sage: op = L.options.constant_length
sage: op._options[op._name]
3
sage: type(_)
<class 'int'>
```
or by adding in general a way to extract the bare value of an option somehow.



---

archive/issue_comments_561372.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nsimpler:\n\n```\nsage: Q=L.options\nsage: type(Q['constant_length'])\n<class 'int'>\n```",
    "created_at": "2022-09-29T12:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561372",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:65" align="right">Comment 65</div>

simpler:

```
sage: Q=L.options
sage: type(Q['constant_length'])
<class 'int'>
```



---

archive/issue_comments_561373.json:
```json
{
    "body": "Changed commit from **[75c275c](https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f)** to **[5393242](https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a)**",
    "created_at": "2022-09-29T13:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561373",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[75c275c](https://github.com/sagemath/sagetrac-mirror/commit/75c275cf989059c02bf5bd11ad7ed0ba76b3ca5f)** to **[5393242](https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a)**



---

archive/issue_comments_561374.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a\">5393242</a></td><td><code>fixes for pycodestyle and pyflakes</code></td></tr></table>\n",
    "created_at": "2022-09-29T13:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561374",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66" align="right">Comment 66</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a">5393242</a></td><td><code>fixes for pycodestyle and pyflakes</code></td></tr></table>




---

archive/issue_comments_561375.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nCool, thank you!",
    "created_at": "2022-09-29T13:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561375",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:67" align="right">Comment 67</div>

Cool, thank you!



---

archive/issue_comments_561376.json:
```json
{
    "body": "Changed commit from **[5393242](https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a)** to **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**",
    "created_at": "2022-10-05T15:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561376",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5393242](https://github.com/sagemath/sagetrac-mirror/commit/539324204ae876de4292c469eed336d8b6ee0f4a)** to **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**



---

archive/issue_comments_561377.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67dff95676c5e40b6311785db4db3e53347b11c5\">67dff95</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/32367/replace_lazy_power_series-32367</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fc981b458f8d628684decf221618911ace06333\">4fc981b</a></td><td><code>fix for pyflakes and blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56cef070ebee69841f1ead61344557d10d0b56a0\">56cef07</a></td><td><code>Merge branch 'u/mantepse/replace_lazy_power_series-32367' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc\">3e84c90</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>\n",
    "created_at": "2022-10-05T15:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561377",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68" align="right">Comment 68</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67dff95676c5e40b6311785db4db3e53347b11c5">67dff95</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/32367/replace_lazy_power_series-32367</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fc981b458f8d628684decf221618911ace06333">4fc981b</a></td><td><code>fix for pyflakes and blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56cef070ebee69841f1ead61344557d10d0b56a0">56cef07</a></td><td><code>Merge branch 'u/mantepse/replace_lazy_power_series-32367' of trac.sagemath.org:sage into t/34470/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc">3e84c90</a></td><td><code>Merge branch 'u/mantepse/categories_lazy_series-34470' of trac.sagemath.org:sage into t/34552/lazy_series_test_suite-34552</code></td></tr></table>




---

archive/issue_comments_561378.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2022-10-11T00:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561378",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw, Frédéric Chapoton**



---

archive/issue_comments_561379.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nI am assuming Fr\u00e9d\u00e9ric is now happy. LGTM. We can do more on further tickets.",
    "created_at": "2022-10-11T00:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561379",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:69" align="right">Comment 69</div>

I am assuming Frédéric is now happy. LGTM. We can do more on further tickets.



---

archive/issue_events_453282.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-10-11T00:03:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453282"
}
```



---

archive/issue_events_453283.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-10-11T00:03:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453283"
}
```



---

archive/issue_events_453284.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-16T22:15:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453284"
}
```



---

archive/issue_events_453285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "321f97084f9cd694327709e1d875ce05f7fa4685",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-10-16T22:15:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34552#event-453285"
}
```



---

archive/issue_comments_561380.json:
```json
{
    "body": "Changed branch from **[u/mantepse/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/lazy_series_test_suite-34552)** to **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**",
    "created_at": "2022-10-16T22:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34552#issuecomment-561380",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/lazy_series_test_suite-34552](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/lazy_series_test_suite-34552)** to **[3e84c90](https://github.com/sagemath/sagetrac-mirror/commit/3e84c90c8c9c3d74c8dd2b6b328029d74144b7bc)**
