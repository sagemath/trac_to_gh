# Issue 34178: Sirocco improvements: discriminant and braid monodromy of arrangements

archive/issues_034178.json:
```json
{
    "body": "CC:  @miguelmarco\n\nGiven a polynomial `f(x, y)`, the method `braid_monodromy` starts with changes of variables of the type `x: x + y` till the global degree of `f` coincides with its `y`-degree. Next step is to compute its discriminant with respect to `y`.\n\nApplying it to an example of a polynomial of degree 18 with coefficients in a number field of index 12 yields to more that 30 minutes of computation time. This polynomial has three factors. The computation of the discriminant of each factor and the resultant of the three pairs of factors is done in 15 seconds.\n\nNow `Sirocco` takes into account the factors, so computing the discriminant via the factorization would reduce the time of computation. \n\nIn the same ideas, it is useful for arrangements of curves to know to which irreducible component each strand of the braids correspond. A new function is define, `braid_monodromy_arrangement` which yields both the braid monodromy and the information of the strands.\n\nFinally, a way to obtain a Puiseux presentation of the fundamental group is given.\n\nIssue created by migration from https://trac.sagemath.org/ticket/34415\n\n",
    "created_at": "2022-08-23T13:15:03Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Sirocco improvements: discriminant and braid monodromy of arrangements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34178",
    "user": "https://github.com/enriqueartal"
}
```
CC:  @miguelmarco

Given a polynomial `f(x, y)`, the method `braid_monodromy` starts with changes of variables of the type `x: x + y` till the global degree of `f` coincides with its `y`-degree. Next step is to compute its discriminant with respect to `y`.

Applying it to an example of a polynomial of degree 18 with coefficients in a number field of index 12 yields to more that 30 minutes of computation time. This polynomial has three factors. The computation of the discriminant of each factor and the resultant of the three pairs of factors is done in 15 seconds.

Now `Sirocco` takes into account the factors, so computing the discriminant via the factorization would reduce the time of computation. 

In the same ideas, it is useful for arrangements of curves to know to which irreducible component each strand of the braids correspond. A new function is define, `braid_monodromy_arrangement` which yields both the braid monodromy and the information of the strands.

Finally, a way to obtain a Puiseux presentation of the fundamental group is given.

Issue created by migration from https://trac.sagemath.org/ticket/34415





---

archive/issue_comments_484380.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T15:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484380",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484381.json:
```json
{
    "body": "The definition of `discrim` takes into account factorization. The optional information has been added. A new variable  `change_info` has been added to method `braid_monodromy`. The default value is `False` and in this case it behaves as previously, the output is a list of braids; if the value is `True` then a tuple with three items is returned:\n\n- List of braids\n- Number of changes of variables `x : x + y` to have the same degree and `y`-degree\n- A vector with components the real and imaginary parts of the `x`-coordinate of the base point.",
    "created_at": "2022-08-23T15:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484381",
    "user": "https://github.com/enriqueartal"
}
```

The definition of `discrim` takes into account factorization. The optional information has been added. A new variable  `change_info` has been added to method `braid_monodromy`. The default value is `False` and in this case it behaves as previously, the output is a list of braids; if the value is `True` then a tuple with three items is returned:

- List of braids
- Number of changes of variables `x : x + y` to have the same degree and `y`-degree
- A vector with components the real and imaginary parts of the `x`-coordinate of the base point.



---

archive/issue_comments_484382.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-31T14:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484383.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T11:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484384.json:
```json
{
    "body": "After this change, the computation of `braid_monodromy` and `braid_monodromy_arrangement` gives an error if `sage` runs with `SAGE_NUM_THREADS>1`,\n\n```\nFile /usr/local/sage310/src/sage/schemes/curves/affine_curve.py:1769, in AffinePlaneCurve_field.braid_monodromy(self)\n   1766     raise NotImplementedError(\"the base field must have an embedding\"\n   1767                               \" to the algebraic field\")\n   1768 f = self.defining_polynomial()\n-> 1769 return braid_monodromy(f)\n\nFile /usr/local/sage310/src/sage/schemes/curves/zariski_vankampen.py:980, in braid_monodromy(f, arrangement)\n    977     braidscomputed = (braid_in_segment([(gfac, seg[0], seg[1])\n    978                                         for seg in segs]))\n    979 segsbraids = {}\n--> 980 for braidcomputed in braidscomputed:\n    981     seg = (braidcomputed[0][0][1], braidcomputed[0][0][2])\n    982     beginseg = (QQ(seg[0].real()), QQ(seg[0].imag()))\n\nFile /usr/local/sage310/src/sage/parallel/use_fork.py:191, in p_iter_fork.__call__(self, f, inputs)\n    188     alarm(max(timeout - (T - oldest), 0.1))\n    190 try:\n--> 191     pid = os.wait()[0]\n    192     cancel_alarm()\n    193     W = workers.pop(pid)\n\nChildProcessError: [Errno 10] No child processes\n```\nbut if it is executed twice it works",
    "created_at": "2022-09-01T11:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484384",
    "user": "https://github.com/enriqueartal"
}
```

After this change, the computation of `braid_monodromy` and `braid_monodromy_arrangement` gives an error if `sage` runs with `SAGE_NUM_THREADS>1`,

```
File /usr/local/sage310/src/sage/schemes/curves/affine_curve.py:1769, in AffinePlaneCurve_field.braid_monodromy(self)
   1766     raise NotImplementedError("the base field must have an embedding"
   1767                               " to the algebraic field")
   1768 f = self.defining_polynomial()
-> 1769 return braid_monodromy(f)

File /usr/local/sage310/src/sage/schemes/curves/zariski_vankampen.py:980, in braid_monodromy(f, arrangement)
    977     braidscomputed = (braid_in_segment([(gfac, seg[0], seg[1])
    978                                         for seg in segs]))
    979 segsbraids = {}
--> 980 for braidcomputed in braidscomputed:
    981     seg = (braidcomputed[0][0][1], braidcomputed[0][0][2])
    982     beginseg = (QQ(seg[0].real()), QQ(seg[0].imag()))

File /usr/local/sage310/src/sage/parallel/use_fork.py:191, in p_iter_fork.__call__(self, f, inputs)
    188     alarm(max(timeout - (T - oldest), 0.1))
    190 try:
--> 191     pid = os.wait()[0]
    192     cancel_alarm()
    193     W = workers.pop(pid)

ChildProcessError: [Errno 10] No child processes
```
but if it is executed twice it works



---

archive/issue_comments_484385.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T19:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484386.json:
```json
{
    "body": "I think the parallelism problem has disappeared. If an object `CurveArrangement` could be defined as a list of curves, almost any method of `Curve` could be associated and some of them could be adapted as `braid_monodromy_arrangement`.",
    "created_at": "2022-09-01T19:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484386",
    "user": "https://github.com/enriqueartal"
}
```

I think the parallelism problem has disappeared. If an object `CurveArrangement` could be defined as a list of curves, almost any method of `Curve` could be associated and some of them could be adapted as `braid_monodromy_arrangement`.



---

archive/issue_comments_484387.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T10:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484388.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-03T16:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484389.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-03T16:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484390.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2022-09-05T09:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_484391.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-06T21:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484392.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-13T15:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_089493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34178#event-89493"
}
```



---

archive/issue_comments_484393.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-24T15:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484394.json:
```json
{
    "body": "This version passess the tests. At some point the description will be updated since more tasks have been done to shorten times of execution by replacing at some places `QQbar` by some number fields embedded in `QQbar`. Besides typos corrctions and more serious improvements there are a couple of things that could be done:\n- Create classes of arrangement of affine or projective curves; besides braid monodromy of fundamental group, other methods could be created, e.g. for singular points assignment of branches to components.\n- For the computation of `braid_monodromy`, there is an intermediate step consisting in the computation of a *geometric basis* of the fundamental group of a punctured plane. Sometimes it gives an error stopping the computations; we (`@`mmarco and me) analyzed the problem and he found out how to correct it.",
    "created_at": "2022-09-25T08:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484394",
    "user": "https://github.com/enriqueartal"
}
```

This version passess the tests. At some point the description will be updated since more tasks have been done to shorten times of execution by replacing at some places `QQbar` by some number fields embedded in `QQbar`. Besides typos corrctions and more serious improvements there are a couple of things that could be done:
- Create classes of arrangement of affine or projective curves; besides braid monodromy of fundamental group, other methods could be created, e.g. for singular points assignment of branches to components.
- For the computation of `braid_monodromy`, there is an intermediate step consisting in the computation of a *geometric basis* of the fundamental group of a punctured plane. Sometimes it gives an error stopping the computations; we (`@`mmarco and me) analyzed the problem and he found out how to correct it.



---

archive/issue_comments_484395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-01T11:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484396.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-02T21:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484397.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-03T05:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_484398.json:
```json
{
    "body": "no space around `=` signs inside the arguments of functions, please (pep8)",
    "created_at": "2022-10-03T06:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484398",
    "user": "https://github.com/fchapoton"
}
```

no space around `=` signs inside the arguments of functions, please (pep8)



---

archive/issue_comments_484399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-03T18:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34178",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34178#issuecomment-484399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
