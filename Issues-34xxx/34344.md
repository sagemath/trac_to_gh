# Issue 34344: Update setuptools 63.4.3, setuptools_wheel 65.x, tomlkit 0.11.4, importlib_resources 5.9.0, importlib_metadata 4.12.0, distlib 0.3.6, hatchling 1.10.0, pathspec 0.10.1

archive/issues_034107.json:
```json
{
    "body": "Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3\n\nFor PEP 517 builds, we provide the latest setuptools (65.x) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0\n\nThe update to 65.3 brings PEP 660 editable installs.\nHere on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n\nWe also update a few more build system related packages.\n- tomlkit: Update to 0.11.4\n- importlib_resources: Update to 5.9.0\n- importlib_metadata: Update to 4.12.0\n- distlib: Update to 0.3.6\n- hatchling: Update to 1.10.0\n- pathspec: Update to 0.10.1\n\n\nCC:  @kiwifb @antonio-rojas @saraedum @jhpalmieri\n\nBranch/Commit: 664e98ca7aa321327a3af7901f34c1c35936c745\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nDependencies: #34442\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34344\n\n",
    "closed_at": "2022-09-28T23:04:20Z",
    "created_at": "2022-08-11T19:11:24Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Update setuptools 63.4.3, setuptools_wheel 65.x, tomlkit 0.11.4, importlib_resources 5.9.0, importlib_metadata 4.12.0, distlib 0.3.6, hatchling 1.10.0, pathspec 0.10.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34344",
    "user": "https://github.com/mkoeppe"
}
```
Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3

For PEP 517 builds, we provide the latest setuptools (65.x) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0

The update to 65.3 brings PEP 660 editable installs.
Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.

We also update a few more build system related packages.
- tomlkit: Update to 0.11.4
- importlib_resources: Update to 5.9.0
- importlib_metadata: Update to 4.12.0
- distlib: Update to 0.3.6
- hatchling: Update to 1.10.0
- pathspec: Update to 0.10.1


CC:  @kiwifb @antonio-rojas @saraedum @jhpalmieri

Branch/Commit: 664e98ca7aa321327a3af7901f34c1c35936c745

Reviewer: John Palmieri

Author: Matthias Koeppe

Dependencies: #34442

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34344





---

archive/issue_comments_683936.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/update_setuptools_to_64_0_0\"",
    "created_at": "2022-08-11T19:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683936",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/update_setuptools_to_64_0_0"



---

archive/issue_comments_683937.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2022-08-11T19:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683937",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_683938.json:
```json
{
    "body": "Changing commit from \"\" to \"a2920136d2859ef26ad42258b1c07eae60ffeff5\"",
    "created_at": "2022-08-11T19:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683938",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "a2920136d2859ef26ad42258b1c07eae60ffeff5"



---

archive/issue_comments_683939.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n+https://setuptools.pypa.io/en/latest/history.html#v64-0-0\n+\n This brings PEP 660 editable installs.\n \n Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n+\n \n Author: Matthias Koeppe\n \n``````\n",
    "created_at": "2022-08-11T19:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683939",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
+https://setuptools.pypa.io/en/latest/history.html#v64-0-0
+
 This brings PEP 660 editable installs.
 
 Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
+
 
 Author: Matthias Koeppe
 
``````




---

archive/issue_comments_683940.json:
```json
{
    "body": "<a id='comment:3'></a>This version of setuptools breaks the build of our numpy-1.22.4 package\n\n```\n    File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/Cython/Distutils/old_build_ext.py\", line 157, in __getattr__\n      return _build_ext.build_ext.__getattr__(self, name)\n    File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/setuptools/_distutils/cmd.py\", line 105, in __getattr__\n      raise AttributeError(attr)\n  AttributeError: fcompiler\n  error: subprocess-exited-with-error\n  \n  \u00d7 python setup.py egg_info did not run successfully.\n  \u2502 exit code: 1\n\n```",
    "created_at": "2022-08-11T19:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683940",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>This version of setuptools breaks the build of our numpy-1.22.4 package

```
    File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/Cython/Distutils/old_build_ext.py", line 157, in __getattr__
      return _build_ext.build_ext.__getattr__(self, name)
    File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/setuptools/_distutils/cmd.py", line 105, in __getattr__
      raise AttributeError(attr)
  AttributeError: fcompiler
  error: subprocess-exited-with-error
  
  × python setup.py egg_info did not run successfully.
  │ exit code: 1

```



---

archive/issue_comments_683941.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#34110\"",
    "created_at": "2022-08-11T19:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683941",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#34110"



---

archive/issue_comments_683942.json:
```json
{
    "body": "<a id='comment:5'></a>Actually it needs to be `SETUPTOOLS_ENABLE_FEATURES` (plural) https://github.com/pypa/setuptools/pull/3538",
    "created_at": "2022-08-26T15:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683942",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Actually it needs to be `SETUPTOOLS_ENABLE_FEATURES` (plural) https://github.com/pypa/setuptools/pull/3538



---

archive/issue_comments_683943.json:
```json
{
    "body": "Changing commit from \"a2920136d2859ef26ad42258b1c07eae60ffeff5\" to \"08f18ebd0580522020ded189cc649537689becf2\"",
    "created_at": "2022-08-26T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a2920136d2859ef26ad42258b1c07eae60ffeff5" to "08f18ebd0580522020ded189cc649537689becf2"



---

archive/issue_comments_683944.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683945.json:
```json
{
    "body": "Changing commit from \"08f18ebd0580522020ded189cc649537689becf2\" to \"71f8681917445bb976003183cce4c9b85b7467bf\"",
    "created_at": "2022-08-26T15:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "08f18ebd0580522020ded189cc649537689becf2" to "71f8681917445bb976003183cce4c9b85b7467bf"



---

archive/issue_comments_683946.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T15:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683947.json:
```json
{
    "body": "<a id='comment:8'></a>The updated `setuptools` still causes the same build failure with our numpy 1.22.4.",
    "created_at": "2022-08-26T18:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683947",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>The updated `setuptools` still causes the same build failure with our numpy 1.22.4.



---

archive/issue_comments_683948.json:
```json
{
    "body": "Changing dependencies from \"#34110\" to \"#34110, #34442\"",
    "created_at": "2022-08-26T18:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683948",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#34110" to "#34110, #34442"



---

archive/issue_comments_683949.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Revert #34442\"",
    "created_at": "2022-08-26T18:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683949",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "Revert #34442"



---

archive/issue_comments_683950.json:
```json
{
    "body": "Changing work_issues from \"Revert #34442\" to \"Revert #34442's install-requires (but keep pin in conda.txt)\"",
    "created_at": "2022-08-26T18:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683950",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Revert #34442" to "Revert #34442's install-requires (but keep pin in conda.txt)"



---

archive/issue_comments_683951.json:
```json
{
    "body": "<a id='comment:12'></a>The upgrade to numpy 1.23.3 (#34110) does not help.\n\nIn fact, upstream numpy is moving away from `numpy.distutils` and does not intend to keep it working with newer setuptools - https://github.com/numpy/numpy/pull/22154\n\nBreaking the numpy build system has been raised as  https://github.com/pypa/setuptools/issues/3549 - no solution as of 2022-09-23",
    "created_at": "2022-09-23T23:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683951",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>The upgrade to numpy 1.23.3 (#34110) does not help.

In fact, upstream numpy is moving away from `numpy.distutils` and does not intend to keep it working with newer setuptools - https://github.com/numpy/numpy/pull/22154

Breaking the numpy build system has been raised as  https://github.com/pypa/setuptools/issues/3549 - no solution as of 2022-09-23



---

archive/issue_comments_683952.json:
```json
{
    "body": "Changing dependencies from \"#34110, #34442\" to \"#34442\"",
    "created_at": "2022-09-24T00:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683952",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#34110, #34442" to "#34442"



---

archive/issue_comments_683953.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+https://setuptools.pypa.io/en/latest/history.html#v64-0-0\n \n+The update to 65.3 brings PEP 660 editable installs.\n+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n+\n+Numpy needs setuptools < 64. We add a new package providing a wheel, which is then used in numpy's isolated build environment\n \n Author: Matthias Koeppe\n \n``````\n",
    "created_at": "2022-09-24T00:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683953",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
+https://setuptools.pypa.io/en/latest/history.html#v64-0-0
 
+The update to 65.3 brings PEP 660 editable installs.
+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
+
+Numpy needs setuptools < 64. We add a new package providing a wheel, which is then used in numpy's isolated build environment
 
 Author: Matthias Koeppe
 
``````




---

archive/issue_comments_683954.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3\n+\n+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0\n+\n+The update to 65.3 brings PEP 660 editable installs.\n+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n \n \n Author: Matthias Koeppe\n``````\n",
    "created_at": "2022-09-24T00:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683954",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3
+
+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0
+
+The update to 65.3 brings PEP 660 editable installs.
+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
 
 
 Author: Matthias Koeppe
``````




---

archive/issue_comments_683955.json:
```json
{
    "body": "Changing commit from \"71f8681917445bb976003183cce4c9b85b7467bf\" to \"34dee19a191153c64f62f4bc84a8a898a4539334\"",
    "created_at": "2022-09-24T01:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "71f8681917445bb976003183cce4c9b85b7467bf" to "34dee19a191153c64f62f4bc84a8a898a4539334"



---

archive/issue_comments_683956.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-09-24T01:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_683957.json:
```json
{
    "body": "Changing work_issues from \"Revert #34442's install-requires (but keep pin in conda.txt)\" to \"\"",
    "created_at": "2022-09-24T01:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683957",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Revert #34442's install-requires (but keep pin in conda.txt)" to ""



---

archive/issue_comments_683958.json:
```json
{
    "body": "Changing commit from \"34dee19a191153c64f62f4bc84a8a898a4539334\" to \"ab0e195764735aa99ff60f113229bd8721c485a6\"",
    "created_at": "2022-09-24T01:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "34dee19a191153c64f62f4bc84a8a898a4539334" to "ab0e195764735aa99ff60f113229bd8721c485a6"



---

archive/issue_comments_683959.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-24T01:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3\n+\n+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0\n+\n+The update to 65.3 brings PEP 660 editable installs.\n+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n+\n+We also update a few more build system related packages.\n+- tomlkit: Update to 0.11.4\n+- importlib_resources: Update to 5.9.0\n+- importlib_metadata: Update to 4.12.0\n+- distlib: Update to 0.3.6\n+- hatchling: Update to 1.10.0\n+\n \n \n Author: Matthias Koeppe\n``````\n",
    "created_at": "2022-09-24T01:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683960",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3
+
+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0
+
+The update to 65.3 brings PEP 660 editable installs.
+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
+
+We also update a few more build system related packages.
+- tomlkit: Update to 0.11.4
+- importlib_resources: Update to 5.9.0
+- importlib_metadata: Update to 4.12.0
+- distlib: Update to 0.3.6
+- hatchling: Update to 1.10.0
+
 
 
 Author: Matthias Koeppe
``````




---

archive/issue_comments_683961.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-09-24T01:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683961",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_683962.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-24T02:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683963.json:
```json
{
    "body": "Changing commit from \"ab0e195764735aa99ff60f113229bd8721c485a6\" to \"c7d9032af08a3972d7a6a227acf620e7024a0cc5\"",
    "created_at": "2022-09-24T02:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ab0e195764735aa99ff60f113229bd8721c485a6" to "c7d9032af08a3972d7a6a227acf620e7024a0cc5"



---

archive/issue_comments_683964.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3\n+\n+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0\n+\n+The update to 65.3 brings PEP 660 editable installs.\n+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n+\n+We also update a few more build system related packages.\n+- tomlkit: Update to 0.11.4\n+- importlib_resources: Update to 5.9.0\n+- importlib_metadata: Update to 4.12.0\n+- distlib: Update to 0.3.6\n+- hatchling: Update to 1.10.0\n+- pathspec: Update to 0.10.1\n \n \n Author: Matthias Koeppe\n``````\n",
    "created_at": "2022-09-24T03:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683964",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3
+
+For PEP 517 builds, we provide the latest setuptools (65.3) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0
+
+The update to 65.3 brings PEP 660 editable installs.
+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
+
+We also update a few more build system related packages.
+- tomlkit: Update to 0.11.4
+- importlib_resources: Update to 5.9.0
+- importlib_metadata: Update to 4.12.0
+- distlib: Update to 0.3.6
+- hatchling: Update to 1.10.0
+- pathspec: Update to 0.10.1
 
 
 Author: Matthias Koeppe
``````




---

archive/issue_comments_683965.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-24T23:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683966.json:
```json
{
    "body": "Changing commit from \"c7d9032af08a3972d7a6a227acf620e7024a0cc5\" to \"bda724dc57e1389f4f36db54278fea7cb592a5f2\"",
    "created_at": "2022-09-24T23:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c7d9032af08a3972d7a6a227acf620e7024a0cc5" to "bda724dc57e1389f4f36db54278fea7cb592a5f2"



---

archive/issue_comments_683967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3\n+\n+For PEP 517 builds, we provide the latest setuptools (65.x) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0\n+\n+The update to 65.3 brings PEP 660 editable installs.\n+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.\n+\n+We also update a few more build system related packages.\n+- tomlkit: Update to 0.11.4\n+- importlib_resources: Update to 5.9.0\n+- importlib_metadata: Update to 4.12.0\n+- distlib: Update to 0.3.6\n+- hatchling: Update to 1.10.0\n+- pathspec: Update to 0.10.1\n \n \n Author: Matthias Koeppe\n``````\n",
    "created_at": "2022-09-24T23:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683967",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Numpy's distutils-based build system needs setuptools < 64. We upgrade to the latest suitable version, 63.4.3, which will be used in non-PEP-517 builds. https://setuptools.pypa.io/en/latest/history.html#v63-4-3
+
+For PEP 517 builds, we provide the latest setuptools (65.x) as a wheel, which will be used in the isolated build environments of PEP 517 packages. https://setuptools.pypa.io/en/latest/history.html#v65-3-0
+
+The update to 65.3 brings PEP 660 editable installs.
+Here on this ticket, we disable them. The follow-up ticket #34209 will switch editable builds to this new technology.
+
+We also update a few more build system related packages.
+- tomlkit: Update to 0.11.4
+- importlib_resources: Update to 5.9.0
+- importlib_metadata: Update to 4.12.0
+- distlib: Update to 0.3.6
+- hatchling: Update to 1.10.0
+- pathspec: Update to 0.10.1
 
 
 Author: Matthias Koeppe
``````




---

archive/issue_comments_683968.json:
```json
{
    "body": "<a id='comment:23'></a>This almost looks like a straightforward upgrade. My only questions are about `setuptools` vs. `setuptools_wheel`: how does `numpy` (and maybe that's the only relevant package) know not to use `setuptools_wheel`? And could there be there an issue with having mismatched versions of `setuptools` and `setuptools_wheel`?",
    "created_at": "2022-09-25T03:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683968",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>This almost looks like a straightforward upgrade. My only questions are about `setuptools` vs. `setuptools_wheel`: how does `numpy` (and maybe that's the only relevant package) know not to use `setuptools_wheel`? And could there be there an issue with having mismatched versions of `setuptools` and `setuptools_wheel`?



---

archive/issue_comments_683969.json:
```json
{
    "body": "<a id='comment:24'></a>Since #33789, we use build isolation for all Python packages that use `sdh_pip_install` - except for those that we invoke with `--no-use-pep517` or `--no-build-isolation`.\nWhen build isolation is in use, it does not matter what is installed in `site-packages`, as it creates a fresh build environment using the wheels in `venv/var/lib/sage/wheels/`; this includes the setuptools wheel, which is provided by our `setuptools_wheel` SPKG.\nThe versions don't need to be synchronized - a setuptools-based package uses exactly one of the two.",
    "created_at": "2022-09-25T03:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683969",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Since #33789, we use build isolation for all Python packages that use `sdh_pip_install` - except for those that we invoke with `--no-use-pep517` or `--no-build-isolation`.
When build isolation is in use, it does not matter what is installed in `site-packages`, as it creates a fresh build environment using the wheels in `venv/var/lib/sage/wheels/`; this includes the setuptools wheel, which is provided by our `setuptools_wheel` SPKG.
The versions don't need to be synchronized - a setuptools-based package uses exactly one of the two.



---

archive/issue_comments_683970.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-25T04:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_683971.json:
```json
{
    "body": "Changing commit from \"bda724dc57e1389f4f36db54278fea7cb592a5f2\" to \"664e98ca7aa321327a3af7901f34c1c35936c745\"",
    "created_at": "2022-09-25T04:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bda724dc57e1389f4f36db54278fea7cb592a5f2" to "664e98ca7aa321327a3af7901f34c1c35936c745"



---

archive/issue_comments_683972.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-26T19:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683972",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_683973.json:
```json
{
    "body": "<a id='comment:26'></a>Okay, let's merge it.",
    "created_at": "2022-09-26T19:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683973",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>Okay, let's merge it.



---

archive/issue_comments_683974.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2022-09-26T19:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683974",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_683975.json:
```json
{
    "body": "<a id='comment:27'></a>Thanks!",
    "created_at": "2022-09-26T20:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683975",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Thanks!



---

archive/issue_comments_683976.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-28T23:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683976",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_683977.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_setuptools_to_64_0_0\" to \"664e98ca7aa321327a3af7901f34c1c35936c745\"",
    "created_at": "2022-09-28T23:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34344#issuecomment-683977",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/update_setuptools_to_64_0_0" to "664e98ca7aa321327a3af7901f34c1c35936c745"



---

archive/issue_events_089399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-28T23:04:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34344",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34344#event-89399"
}
```
