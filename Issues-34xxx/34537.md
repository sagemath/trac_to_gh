# Issue 34537: Upgrade to pari 2.15.2

archive/issues_034300.json:
```json
{
    "assignees": [],
    "body": "PARI/GP 2.15 is out, and homebrew, gentoo, arch, debian-unstable already have the new version.\n\n- giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)\n\nCC:  @antonio-rojas @collares @JohnCremona\n\nBranch/Commit: **[u/dimpase/packages/pari/2.15.2](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari/2.15.2) @ [`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)**\n\nUpstream: **Workaround found; Bug reported upstream.**\n\nReviewer: **Dima Pasechnik, John Cremona**\n\nAuthor: **Bill Allombert, Vincent Delecroix, Antonio Rojas**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34537_\n\n",
    "created_at": "2022-09-15T08:21:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/positive%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to pari 2.15.2",
    "type": "issue",
    "updated_at": "2023-01-09T02:06:44Z",
    "url": "https://github.com/sagemath/sage/issues/34537",
    "user": "https://github.com/videlec"
}
```
PARI/GP 2.15 is out, and homebrew, gentoo, arch, debian-unstable already have the new version.

- giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)

CC:  @antonio-rojas @collares @JohnCremona

Branch/Commit: **[u/dimpase/packages/pari/2.15.2](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari/2.15.2) @ [`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)**

Upstream: **Workaround found; Bug reported upstream.**

Reviewer: **Dima Pasechnik, John Cremona**

Author: **Bill Allombert, Vincent Delecroix, Antonio Rojas**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/34537_





---

archive/issue_events_468024.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-15T08:21:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468024"
}
```



---

archive/issue_events_468025.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-15T08:21:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468025"
}
```



---

archive/issue_events_468026.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-15T08:21:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468026"
}
```



---

archive/issue_events_468027.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-15T08:21:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468027"
}
```



---

archive/issue_comments_557787.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n PARI/GP is about to release a new version\n+\n+- giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)\n``````\n",
    "created_at": "2022-09-15T09:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557787",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 PARI/GP is about to release a new version
+
+- giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)
``````




---

archive/issue_comments_557788.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[giac-1.9.0.15p0.log](https://github.com/sagemath/sage/files/ticket34537/giac-1.9.0.15p0.log)**",
    "created_at": "2022-09-15T09:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557788",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[giac-1.9.0.15p0.log](https://github.com/sagemath/sage/files/ticket34537/giac-1.9.0.15p0.log)**



---

archive/issue_comments_557789.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIndeed, according to Bill Allombert `ANYARG` is gone in PARI/GP 2.15.0.",
    "created_at": "2022-09-15T09:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557789",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

Indeed, according to Bill Allombert `ANYARG` is gone in PARI/GP 2.15.0.



---

archive/issue_comments_557790.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\na solution\n\n```\n#ifdef __cplusplus\n#  define ANYARG ...\n#else\n#  define ANYARG\n#endif\n```",
    "created_at": "2022-09-15T09:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557790",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

a solution

```
#ifdef __cplusplus
#  define ANYARG ...
#else
#  define ANYARG
#endif
```



---

archive/issue_comments_557791.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3058fea03409f44fb76417453ad70f4ec338aeb\"><code>d3058fe</code></a></td><td><code>change pari version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5\"><code>c9fec46</code></a></td><td><code>ANYARG giac patch</code></td></tr></table>\n",
    "created_at": "2022-09-15T10:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557791",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3058fea03409f44fb76417453ad70f4ec338aeb"><code>d3058fe</code></a></td><td><code>change pari version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5"><code>c9fec46</code></a></td><td><code>ANYARG giac patch</code></td></tr></table>




---

archive/issue_comments_557792.json:
```json
{
    "body": "Branch: **[u/vdelecroix/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/34537)**",
    "created_at": "2022-09-15T10:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557792",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/34537)**



---

archive/issue_comments_557793.json:
```json
{
    "body": "Commit: **[`c9fec46`](https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5)**",
    "created_at": "2022-09-15T10:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557793",
    "user": "https://github.com/videlec"
}
```

Commit: **[`c9fec46`](https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5)**



---

archive/issue_comments_557794.json:
```json
{
    "body": "Author: **Bill Allombert, Vincent Delecroix**",
    "created_at": "2022-09-15T10:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557794",
    "user": "https://github.com/videlec"
}
```

Author: **Bill Allombert, Vincent Delecroix**



---

archive/issue_comments_557795.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[testall.log](https://github.com/sagemath/sage/files/ticket34537/testall.log)**\n\nFor the complete log, see [testall.log](https://trac.sagemath.org/raw-attachment/ticket/34537/testall.log)\n\n```\ngeometry/polyhedron/backend_normaliz.py  # 1 doctest failed\ngeometry/polyhedron/backend_field.py  # 2 doctests failed\ndynamics/arithmetic_dynamics/projective_ds.py  # 1 doctest failed\narith/misc.py  # 4 doctests failed\nlibs/pari/tests.py  # 2 doctests failed\ndoctest/forker.py  # 1 doctest failed\ndoctest/sources.py  # 1 doctest failed\nmodular/cusps_nf.py  # 1 doctest failed\nmodular/modform/l_series_gross_zagier.py  # 1 doctest failed\nmodular/modsym/p1list_nf.py  # 3 doctests failed\nmodular/modform_hecketriangle/hecke_triangle_group_element.py  # 1 doctest failed\ninterfaces/genus2reduction.py  # 15 doctests failed\nplot/plot3d/index_face_set.pyx  # Timed out\nmodules/free_quadratic_module_integer_symmetric.py  # 6 doctests failed\nlfunctions/pari.py  # 1 doctest failed\nlfunctions/dokchitser.py  # 4 doctests failed\nrings/qqbar.py  # 28 doctests failed\nrings/function_field/function_field.py  # 1 doctest failed\nrings/number_field/selmer_group.py  # 1 doctest failed\nrings/number_field/class_group.py  # 3 doctests failed\nrings/number_field/number_field_ideal_rel.py  # 3 doctests failed\nrings/number_field/bdd_height.py  # 1 doctest failed\nrings/number_field/order.py  # 1 doctest failed\nrings/number_field/S_unit_solver.py  # 4 doctests failed\nrings/number_field/number_field.py  # 20 doctests failed\nrings/number_field/number_field_rel.py  # 2 doctests failed\nrings/number_field/number_field_ideal.py  # 1 doctest failed\nrings/number_field/number_field_element.pyx  # 3 doctests failed\nrings/number_field/galois_group.py  # 1 doctest failed\nrings/finite_rings/finite_field_prime_modn.py  # 1 doctest failed\nrings/finite_rings/residue_field.pyx  # 12 doctests failed\nrings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed\nrings/polynomial/polynomial_element.pyx  # 2 doctests failed\nrings/polynomial/polynomial_number_field.pyx  # 1 doctest failed\ngroups/fqf_orthogonal.py  # 1 doctest failed\ngroups/matrix_gps/isometries.py  # 1 doctest failed\nschemes/curves/affine_curve.py  # 3 doctests failed\nschemes/plane_conics/con_rational_function_field.py  # 3 doctests failed\nschemes/elliptic_curves/gal_reps_number_field.py  # 2 doctests failed\nschemes/elliptic_curves/ell_rational_field.py  # 17 doctests failed\nschemes/elliptic_curves/isogeny_small_degree.py  # 1 doctest failed\nschemes/elliptic_curves/gp_simon.py  # 1 doctest failed\nschemes/elliptic_curves/modular_parametrization.py  # 3 doctests failed\nschemes/elliptic_curves/BSD.py  # 3 doctests failed\nschemes/elliptic_curves/ell_generic.py  # 1 doctest failed\nschemes/elliptic_curves/heegner.py  # 181 doctests failed\nschemes/elliptic_curves/ell_field.py  # 1 doctest failed\nschemes/elliptic_curves/ell_number_field.py  # 6 doctests failed\nschemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed\nschemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed\nschemes/affine/affine_morphism.py  # 1 doctest failed\nquadratic_forms/binary_qf.py  # 25 doctests failed\nquadratic_forms/quadratic_form__automorphisms.py  # 1 doctest failed\nquadratic_forms/qfsolve.py  # 1 doctest failed\nquadratic_forms/genera/genus.py  # 5 doctests failed\n```",
    "created_at": "2022-09-15T18:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557795",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[testall.log](https://github.com/sagemath/sage/files/ticket34537/testall.log)**

For the complete log, see [testall.log](https://trac.sagemath.org/raw-attachment/ticket/34537/testall.log)

```
geometry/polyhedron/backend_normaliz.py  # 1 doctest failed
geometry/polyhedron/backend_field.py  # 2 doctests failed
dynamics/arithmetic_dynamics/projective_ds.py  # 1 doctest failed
arith/misc.py  # 4 doctests failed
libs/pari/tests.py  # 2 doctests failed
doctest/forker.py  # 1 doctest failed
doctest/sources.py  # 1 doctest failed
modular/cusps_nf.py  # 1 doctest failed
modular/modform/l_series_gross_zagier.py  # 1 doctest failed
modular/modsym/p1list_nf.py  # 3 doctests failed
modular/modform_hecketriangle/hecke_triangle_group_element.py  # 1 doctest failed
interfaces/genus2reduction.py  # 15 doctests failed
plot/plot3d/index_face_set.pyx  # Timed out
modules/free_quadratic_module_integer_symmetric.py  # 6 doctests failed
lfunctions/pari.py  # 1 doctest failed
lfunctions/dokchitser.py  # 4 doctests failed
rings/qqbar.py  # 28 doctests failed
rings/function_field/function_field.py  # 1 doctest failed
rings/number_field/selmer_group.py  # 1 doctest failed
rings/number_field/class_group.py  # 3 doctests failed
rings/number_field/number_field_ideal_rel.py  # 3 doctests failed
rings/number_field/bdd_height.py  # 1 doctest failed
rings/number_field/order.py  # 1 doctest failed
rings/number_field/S_unit_solver.py  # 4 doctests failed
rings/number_field/number_field.py  # 20 doctests failed
rings/number_field/number_field_rel.py  # 2 doctests failed
rings/number_field/number_field_ideal.py  # 1 doctest failed
rings/number_field/number_field_element.pyx  # 3 doctests failed
rings/number_field/galois_group.py  # 1 doctest failed
rings/finite_rings/finite_field_prime_modn.py  # 1 doctest failed
rings/finite_rings/residue_field.pyx  # 12 doctests failed
rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed
rings/polynomial/polynomial_element.pyx  # 2 doctests failed
rings/polynomial/polynomial_number_field.pyx  # 1 doctest failed
groups/fqf_orthogonal.py  # 1 doctest failed
groups/matrix_gps/isometries.py  # 1 doctest failed
schemes/curves/affine_curve.py  # 3 doctests failed
schemes/plane_conics/con_rational_function_field.py  # 3 doctests failed
schemes/elliptic_curves/gal_reps_number_field.py  # 2 doctests failed
schemes/elliptic_curves/ell_rational_field.py  # 17 doctests failed
schemes/elliptic_curves/isogeny_small_degree.py  # 1 doctest failed
schemes/elliptic_curves/gp_simon.py  # 1 doctest failed
schemes/elliptic_curves/modular_parametrization.py  # 3 doctests failed
schemes/elliptic_curves/BSD.py  # 3 doctests failed
schemes/elliptic_curves/ell_generic.py  # 1 doctest failed
schemes/elliptic_curves/heegner.py  # 181 doctests failed
schemes/elliptic_curves/ell_field.py  # 1 doctest failed
schemes/elliptic_curves/ell_number_field.py  # 6 doctests failed
schemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed
schemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed
schemes/affine/affine_morphism.py  # 1 doctest failed
quadratic_forms/binary_qf.py  # 25 doctests failed
quadratic_forms/quadratic_form__automorphisms.py  # 1 doctest failed
quadratic_forms/qfsolve.py  # 1 doctest failed
quadratic_forms/genera/genus.py  # 5 doctests failed
```



---

archive/issue_comments_557796.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/34537)** to **[u/arojas/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/34537)**",
    "created_at": "2022-09-20T19:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557796",
    "user": "https://github.com/antonio-rojas"
}
```

Changed branch from **[u/vdelecroix/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/34537)** to **[u/arojas/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/34537)**



---

archive/issue_comments_557797.json:
```json
{
    "body": "Changed commit from **[`c9fec46`](https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5)** to **[`6a83955`](https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6)**",
    "created_at": "2022-09-20T19:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557797",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[`c9fec46`](https://github.com/sagemath/sagetrac-mirror/commit/c9fec46d5a07aa12d37937a6193261e96558c1c5)** to **[`6a83955`](https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6)**



---

archive/issue_comments_557798.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPushed fixes for test failures caused by different choice of generators and syntax changes so we have a clear picture of the actual issues. Remaining failures:\n\n```\nsage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/qfsolve.py  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/binary_qf.py  # 25 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/genera/genus.py  # 4 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/modular/modform/l_series_gross_zagier.py  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/plane_conics/con_rational_function_field.py  # 3 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/curves/affine_curve.py  # 3 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/heegner.py  # 181 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py  # 17 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/BSD.py  # 3 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/modular_parametrization.py  # 3 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/gp_simon.py  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/modules/free_quadratic_module_integer_symmetric.py  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/lfunctions/dokchitser.py  # 4 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/groups/fqf_orthogonal.py  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/rings/number_field/number_field.py  # 11 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/rings/polynomial/polynomial_element.pyx  # 2 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/rings/polynomial/polynomial_number_field.pyx  # 1 doctest failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/rings/function_field/function_field.py  # 1 doctest failed\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6\"><code>6a83955</code></a></td><td><code>Adjust tests for pari 2.15</code></td></tr></table>\n",
    "created_at": "2022-09-20T19:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557798",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:7" align="right">comment:7</div>

Pushed fixes for test failures caused by different choice of generators and syntax changes so we have a clear picture of the actual issues. Remaining failures:

```
sage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/qfsolve.py  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/binary_qf.py  # 25 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/quadratic_forms/genera/genus.py  # 4 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/modular/modform/l_series_gross_zagier.py  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/plane_conics/con_rational_function_field.py  # 3 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/curves/affine_curve.py  # 3 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/heegner.py  # 181 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py  # 17 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/BSD.py  # 3 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/modular_parametrization.py  # 3 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/gp_simon.py  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/modules/free_quadratic_module_integer_symmetric.py  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/lfunctions/dokchitser.py  # 4 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/groups/fqf_orthogonal.py  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/rings/number_field/number_field.py  # 11 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/rings/polynomial/polynomial_element.pyx  # 2 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/rings/polynomial/polynomial_number_field.pyx  # 1 doctest failed
sage -t --long /usr/lib/python3.10/site-packages/sage/rings/function_field/function_field.py  # 1 doctest failed
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6"><code>6a83955</code></a></td><td><code>Adjust tests for pari 2.15</code></td></tr></table>




---

archive/issue_comments_557799.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c\"><code>24e9e51</code></a></td><td><code>Binary quadratic forms are of t_QFB type in pari 2.15</code></td></tr></table>\n",
    "created_at": "2022-09-20T20:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557799",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c"><code>24e9e51</code></a></td><td><code>Binary quadratic forms are of t_QFB type in pari 2.15</code></td></tr></table>




---

archive/issue_comments_557800.json:
```json
{
    "body": "Changed commit from **[`6a83955`](https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6)** to **[`24e9e51`](https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c)**",
    "created_at": "2022-09-20T20:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557800",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a83955`](https://github.com/sagemath/sagetrac-mirror/commit/6a83955cd1c55ddac45539888df233a3c1a885c6)** to **[`24e9e51`](https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c)**



---

archive/issue_comments_557801.json:
```json
{
    "body": "Changed commit from **[`24e9e51`](https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c)** to **[`e9f6662`](https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7)**",
    "created_at": "2022-09-20T21:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557801",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`24e9e51`](https://github.com/sagemath/sagetrac-mirror/commit/24e9e51b1a8c4f0c08bc6bc675ec12aca19d705c)** to **[`e9f6662`](https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7)**



---

archive/issue_comments_557802.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7\"><code>e9f6662</code></a></td><td><code>Remove qfminimize function from qfsolve.gp, it is unused and conflicts with the builtin qfminimize in gp 2.15</code></td></tr></table>\n",
    "created_at": "2022-09-20T21:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557802",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7"><code>e9f6662</code></a></td><td><code>Remove qfminimize function from qfsolve.gp, it is unused and conflicts with the builtin qfminimize in gp 2.15</code></td></tr></table>




---

archive/issue_comments_557803.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b\"><code>72ff826</code></a></td><td><code>Rename custom ellrank function as it conflicts with a native ellrank from gp 2.15</code></td></tr></table>\n",
    "created_at": "2022-09-21T06:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557803",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b"><code>72ff826</code></a></td><td><code>Rename custom ellrank function as it conflicts with a native ellrank from gp 2.15</code></td></tr></table>




---

archive/issue_comments_557804.json:
```json
{
    "body": "Changed commit from **[`e9f6662`](https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7)** to **[`72ff826`](https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b)**",
    "created_at": "2022-09-21T06:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557804",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e9f6662`](https://github.com/sagemath/sagetrac-mirror/commit/e9f6662798a513759747e46be5aacd064cd93ab7)** to **[`72ff826`](https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b)**



---

archive/issue_comments_557805.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2022-09-21T08:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557805",
    "user": "https://github.com/antonio-rojas"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_557806.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nUpstream report for the failures in `schemes.curves.affine_curve` and `rings.number_field.number_field`:\n\nhttps://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2414",
    "created_at": "2022-09-21T08:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557806",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:11" align="right">comment:11</div>

Upstream report for the failures in `schemes.curves.affine_curve` and `rings.number_field.number_field`:

https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2414



---

archive/issue_comments_557807.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e44b62a1e5057fc85eabd13cef401c249ea5705\"><code>0e44b62</code></a></td><td><code>Another test fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff\"><code>330e7d7</code></a></td><td><code>Update test in gp_simon.py</code></td></tr></table>\n",
    "created_at": "2022-09-21T08:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557807",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e44b62a1e5057fc85eabd13cef401c249ea5705"><code>0e44b62</code></a></td><td><code>Another test fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff"><code>330e7d7</code></a></td><td><code>Update test in gp_simon.py</code></td></tr></table>




---

archive/issue_comments_557808.json:
```json
{
    "body": "Changed commit from **[`72ff826`](https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b)** to **[`330e7d7`](https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff)**",
    "created_at": "2022-09-21T08:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557808",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72ff826`](https://github.com/sagemath/sagetrac-mirror/commit/72ff8265647ee235dd13abfa4d849af477e1387b)** to **[`330e7d7`](https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff)**



---

archive/issue_comments_557809.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2\"><code>b1e9677</code></a></td><td><code>Update to 2.15.0 final</code></td></tr></table>\n",
    "created_at": "2022-09-21T08:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557809",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2"><code>b1e9677</code></a></td><td><code>Update to 2.15.0 final</code></td></tr></table>




---

archive/issue_comments_557810.json:
```json
{
    "body": "Changed commit from **[`330e7d7`](https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff)** to **[`b1e9677`](https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2)**",
    "created_at": "2022-09-21T08:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557810",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`330e7d7`](https://github.com/sagemath/sagetrac-mirror/commit/330e7d7e4da66abb7249f8e91a3e36dced209cff)** to **[`b1e9677`](https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2)**



---

archive/issue_comments_557811.json:
```json
{
    "body": "Changed commit from **[`b1e9677`](https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2)** to **[`da87326`](https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db)**",
    "created_at": "2022-09-22T15:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557811",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b1e9677`](https://github.com/sagemath/sagetrac-mirror/commit/b1e967798b77a62b7ca926016ec1eee1b41937f2)** to **[`da87326`](https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db)**



---

archive/issue_comments_557812.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07020f0f05b62210e44d7dd857745bb617d207cd\"><code>07020f0</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/34537/34537</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db\"><code>da87326</code></a></td><td><code>Add workaround for PARI bug#2414</code></td></tr></table>\n",
    "created_at": "2022-09-22T15:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557812",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07020f0f05b62210e44d7dd857745bb617d207cd"><code>07020f0</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/34537/34537</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db"><code>da87326</code></a></td><td><code>Add workaround for PARI bug#2414</code></td></tr></table>




---

archive/issue_comments_557813.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd0cac60991766a080d10112f4620a1f9a332892\"><code>cd0cac6</code></a></td><td><code>Another workaround for PARI bug#2414</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239\"><code>9fbb886</code></a></td><td><code>Filter out gp warnings that break parsing output in dokchitser.py</code></td></tr></table>\n",
    "created_at": "2022-09-22T18:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd0cac60991766a080d10112f4620a1f9a332892"><code>cd0cac6</code></a></td><td><code>Another workaround for PARI bug#2414</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239"><code>9fbb886</code></a></td><td><code>Filter out gp warnings that break parsing output in dokchitser.py</code></td></tr></table>




---

archive/issue_comments_557814.json:
```json
{
    "body": "Changed commit from **[`da87326`](https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db)** to **[`9fbb886`](https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239)**",
    "created_at": "2022-09-22T18:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557814",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da87326`](https://github.com/sagemath/sagetrac-mirror/commit/da873261689a2dc05ccc8ddd0ed45f56f55962db)** to **[`9fbb886`](https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239)**



---

archive/issue_events_468028.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-22T18:15:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "title_is": "Upgrade to pari 2.15",
    "title_was": "Prepare for pari 2.15",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468028"
}
```



---

archive/issue_comments_557815.json:
```json
{
    "body": "Changed author from **Bill Allombert, Vincent Delecroix** to **Bill Allombert, Vincent Delecroix, Antonio Rojas**",
    "created_at": "2022-09-22T18:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557815",
    "user": "https://github.com/antonio-rojas"
}
```

Changed author from **Bill Allombert, Vincent Delecroix** to **Bill Allombert, Vincent Delecroix, Antonio Rojas**



---

archive/issue_comments_557816.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOnly two remaining issues that are going to need more help from experts:\n\n```\nsage -t --long /usr/lib/python3.10/site-packages/sage/interfaces/genus2reduction.py  # 15 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed\nsage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed\n```\nThese are caused by the changes in gp's `genus2red` output from https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commitdiff;h=a41e4fa95925eae42830217313583efc80628763\n\nSage's `genus2reduction.py` needs to be adapted to those changes.\n\n```\nsage -t --long /usr/lib/python3.10/site-packages/sage/groups/fqf_orthogonal.py  # 1 doctest failed\n```\n\nThis is a weird issue that involves pari and gap code. Needs further investigation.",
    "created_at": "2022-09-22T18:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557816",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:16" align="right">comment:16</div>

Only two remaining issues that are going to need more help from experts:

```
sage -t --long /usr/lib/python3.10/site-packages/sage/interfaces/genus2reduction.py  # 15 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_generic.py  # 10 doctests failed
sage -t --long /usr/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/jacobian_endomorphism_utils.py  # 4 doctests failed
```
These are caused by the changes in gp's `genus2red` output from https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commitdiff;h=a41e4fa95925eae42830217313583efc80628763

Sage's `genus2reduction.py` needs to be adapted to those changes.

```
sage -t --long /usr/lib/python3.10/site-packages/sage/groups/fqf_orthogonal.py  # 1 doctest failed
```

This is a weird issue that involves pari and gap code. Needs further investigation.



---

archive/issue_comments_557817.json:
```json
{
    "body": "Changed commit from **[`9fbb886`](https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239)** to **[`328f043`](https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f)**",
    "created_at": "2022-09-23T14:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557817",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9fbb886`](https://github.com/sagemath/sagetrac-mirror/commit/9fbb8864ffef60eac5a8df28a365811c544fd239)** to **[`328f043`](https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f)**



---

archive/issue_comments_557818.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f\"><code>328f043</code></a></td><td><code>Fix one more test in docs</code></td></tr></table>\n",
    "created_at": "2022-09-23T14:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557818",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f"><code>328f043</code></a></td><td><code>Fix one more test in docs</code></td></tr></table>




---

archive/issue_comments_557819.json:
```json
{
    "body": "Changed commit from **[`328f043`](https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f)** to **[`a019adc`](https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d)**",
    "created_at": "2022-09-23T17:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557819",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`328f043`](https://github.com/sagemath/sagetrac-mirror/commit/328f04347598556e018ff8a861af1841c4ed294f)** to **[`a019adc`](https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d)**



---

archive/issue_comments_557820.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d\"><code>a019adc</code></a></td><td><code>Revert \"Fix one more test in docs\"</code></td></tr></table>\n",
    "created_at": "2022-09-23T17:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557820",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d"><code>a019adc</code></a></td><td><code>Revert "Fix one more test in docs"</code></td></tr></table>




---

archive/issue_comments_557821.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [Antonio Rojas](#comment%3A11):\n> Upstream report for the failures in `schemes.curves.affine_curve` and `rings.number_field.number_field`:\n> \n> https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2414\n\nThe bug was fixed upstream, but we may want to keep the workaround. It's not particularly hackish and will allow to use an unpatched system pari 2.15.0",
    "created_at": "2022-09-24T21:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557821",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [Antonio Rojas](#comment%3A11):
> Upstream report for the failures in `schemes.curves.affine_curve` and `rings.number_field.number_field`:
> 
> https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2414

The bug was fixed upstream, but we may want to keep the workaround. It's not particularly hackish and will allow to use an unpatched system pari 2.15.0



---

archive/issue_events_468029.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T01:49:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468029"
}
```



---

archive/issue_events_468030.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T01:49:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468030"
}
```



---

archive/issue_comments_557822.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-PARI/GP is about to release a new version\n+PARI/GP 2.15 is out, and homebrew, gentoo, arch, debian-unstable already have the new version.\n \n - giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)\n``````\n",
    "created_at": "2022-09-25T01:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557822",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-PARI/GP is about to release a new version
+PARI/GP 2.15 is out, and homebrew, gentoo, arch, debian-unstable already have the new version.
 
 - giac does not build, see [giac-1.9.0.15p0.log](https://trac.sagemath.org/raw-attachment/ticket/34537/giac-1.9.0.15p0.log)
``````




---

archive/issue_comments_557823.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIs this ready to go, or should we put the giac build fix on a separate ticket?",
    "created_at": "2022-09-25T01:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557823",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Is this ready to go, or should we put the giac build fix on a separate ticket?



---

archive/issue_comments_557824.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIt's not ready, see [comment:16](#comment%3A16)",
    "created_at": "2022-09-25T06:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557824",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:22" align="right">comment:22</div>

It's not ready, see [comment:16](#comment%3A16)



---

archive/issue_comments_557825.json:
```json
{
    "body": "Dependencies: **#34586**",
    "created_at": "2022-09-25T19:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557825",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34586**



---

archive/issue_comments_557826.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThat's now #34586",
    "created_at": "2022-09-25T19:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557826",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

That's now #34586



---

archive/issue_comments_557827.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nInstead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.",
    "created_at": "2022-09-29T09:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557827",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Instead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.



---

archive/issue_comments_557828.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [Vincent Delecroix](#comment%3A25):\n> Instead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.\n\nThat should go in a follow-up ticket, I think. The branch is already big enough.",
    "created_at": "2022-09-29T09:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557828",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [Vincent Delecroix](#comment%3A25):
> Instead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.

That should go in a follow-up ticket, I think. The branch is already big enough.



---

archive/issue_comments_557829.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [Antonio Rojas](#comment%3A26):\n> Replying to [Vincent Delecroix](#comment%3A25):\n> > Instead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.\n\n> \n> That should go in a follow-up ticket, I think. The branch is already big enough.\n\nSure: #34608",
    "created_at": "2022-09-29T09:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557829",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [Antonio Rojas](#comment%3A26):
> Replying to [Vincent Delecroix](#comment%3A25):
> > Instead of using the `ellQ_ellrank` from Denis Simon script we should be using the `ellrank` from PARI/GP (available from version 2.15). Though, the latter only works over rational numbers.

> 
> That should go in a follow-up ticket, I think. The branch is already big enough.

Sure: #34608



---

archive/issue_comments_557830.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am with Bill. I will push a fix for the genus 2 reduction.",
    "created_at": "2022-09-29T09:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557830",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

I am with Bill. I will push a fix for the genus 2 reduction.



---

archive/issue_comments_557831.json:
```json
{
    "body": "Changed branch from **[u/arojas/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/34537)** to **[public/34537](https://github.com/sagemath/sagetrac-mirror/tree/public/34537)**",
    "created_at": "2022-09-29T10:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557831",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/arojas/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/34537)** to **[public/34537](https://github.com/sagemath/sagetrac-mirror/tree/public/34537)**



---

archive/issue_comments_557832.json:
```json
{
    "body": "Changed commit from **[`a019adc`](https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d)** to **[`eb7db0d`](https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff)**",
    "created_at": "2022-09-29T10:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557832",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`a019adc`](https://github.com/sagemath/sagetrac-mirror/commit/a019adcdf47f92e66ff85863ff3f5674f0ca6f9d)** to **[`eb7db0d`](https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff)**



---

archive/issue_comments_557833.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c7d626f9c251a20ecf3924ac4f043e488a176b9\"><code>7c7d626</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff\"><code>eb7db0d</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr></table>\n",
    "created_at": "2022-09-29T10:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557833",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c7d626f9c251a20ecf3924ac4f043e488a176b9"><code>7c7d626</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff"><code>eb7db0d</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr></table>




---

archive/issue_comments_557834.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe modifications I have done are incompatible with PARI < 2.15. I think it would be simpler to enforce PARI >= 2.15 in the next sage version.",
    "created_at": "2022-09-29T10:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557834",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

The modifications I have done are incompatible with PARI < 2.15. I think it would be simpler to enforce PARI >= 2.15 in the next sage version.



---

archive/issue_comments_557835.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320\"><code>6b250d3</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/34537/public/34537</code></td></tr></table>\n",
    "created_at": "2022-09-30T06:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557835",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320"><code>6b250d3</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/34537/public/34537</code></td></tr></table>




---

archive/issue_comments_557836.json:
```json
{
    "body": "Changed commit from **[`eb7db0d`](https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff)** to **[`6b250d3`](https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320)**",
    "created_at": "2022-09-30T06:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eb7db0d`](https://github.com/sagemath/sagetrac-mirror/commit/eb7db0d7db18cdc6fb0ef3671e99e8bf9fc1f3ff)** to **[`6b250d3`](https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320)**



---

archive/issue_comments_557837.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [Vincent Delecroix](#comment%3A30):\n> I think it would be simpler to enforce PARI >= 2.15 in the next sage version.\n\nIf done, this would simplify the patch at #33360, which currently chooses from two distinct implementations depending on the PARI version.",
    "created_at": "2022-09-30T07:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557837",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [Vincent Delecroix](#comment%3A30):
> I think it would be simpler to enforce PARI >= 2.15 in the next sage version.

If done, this would simplify the patch at #33360, which currently chooses from two distinct implementations depending on the PARI version.



---

archive/issue_comments_557838.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nMeanwhile, please see #34496 - to forbid system Pari 2.15 and newer, until we're done here.",
    "created_at": "2022-09-30T12:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557838",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

Meanwhile, please see #34496 - to forbid system Pari 2.15 and newer, until we're done here.



---

archive/issue_comments_557839.json:
```json
{
    "body": "Changed commit from **[`6b250d3`](https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320)** to **[`96efc90`](https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785)**",
    "created_at": "2022-09-30T13:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557839",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b250d3`](https://github.com/sagemath/sagetrac-mirror/commit/6b250d389f6eb7e13a1c3baa34cedcd12512a320)** to **[`96efc90`](https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785)**



---

archive/issue_comments_557840.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785\"><code>96efc90</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr></table>\n",
    "created_at": "2022-09-30T13:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557840",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785"><code>96efc90</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr></table>




---

archive/issue_comments_557841.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThis is almost ready, just needs someone to figure out the failure in `sage/groups/fqf_orthogonal.py`",
    "created_at": "2022-09-30T13:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557841",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:35" align="right">comment:35</div>

This is almost ready, just needs someone to figure out the failure in `sage/groups/fqf_orthogonal.py`



---

archive/issue_comments_557842.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe test in `fqf_orthogonal.py` does not make much sense as `Oq` and `OL` are different groups.",
    "created_at": "2022-09-30T14:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557842",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

The test in `fqf_orthogonal.py` does not make much sense as `Oq` and `OL` are different groups.



---

archive/issue_comments_557843.json:
```json
{
    "body": "Changed commit from **[`96efc90`](https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785)** to **[`48ea610`](https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2)**",
    "created_at": "2022-09-30T14:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96efc90`](https://github.com/sagemath/sagetrac-mirror/commit/96efc900c50423bc37dad84c6da4e2afe9712785)** to **[`48ea610`](https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2)**



---

archive/issue_comments_557844.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2\"><code>48ea610</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr></table>\n",
    "created_at": "2022-09-30T14:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2"><code>48ea610</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr></table>




---

archive/issue_comments_557845.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [Antonio Rojas](#comment%3A35):\n> This is almost ready, just needs someone to figure out the failure in `sage/groups/fqf_orthogonal.py`\n\nOK, from a closer look it looks like this is just caused by a different choice of generators for the orthogonal group. Replacing\n\n```\nsage: assert Oq(OL.0) == Oq(OL.0.matrix())\n```\nwith\n\n```\nsage: assert Oq(OL.1) == Oq(OL.1.matrix())\n```\ngives the same failure with pari 2.13. So, even though this looks like an actual issue, it is not a regression from the pari update, it just happened to work by chance before due to a different matrix being tested. I think we should just flag this as known bug and proceed with this.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2\"><code>48ea610</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr></table>\n",
    "created_at": "2022-09-30T14:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557845",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [Antonio Rojas](#comment%3A35):
> This is almost ready, just needs someone to figure out the failure in `sage/groups/fqf_orthogonal.py`

OK, from a closer look it looks like this is just caused by a different choice of generators for the orthogonal group. Replacing

```
sage: assert Oq(OL.0) == Oq(OL.0.matrix())
```
with

```
sage: assert Oq(OL.1) == Oq(OL.1.matrix())
```
gives the same failure with pari 2.13. So, even though this looks like an actual issue, it is not a regression from the pari update, it just happened to work by chance before due to a different matrix being tested. I think we should just flag this as known bug and proceed with this.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2"><code>48ea610</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr></table>




---

archive/issue_comments_557846.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI pushed a \"fix\" in 48ea610. I do not think there is anything deep about generators that is tested here. Otherwise this should have been documented!",
    "created_at": "2022-09-30T14:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557846",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

I pushed a "fix" in 48ea610. I do not think there is anything deep about generators that is tested here. Otherwise this should have been documented!



---

archive/issue_events_468031.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-30T14:35:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468031"
}
```



---

archive/issue_comments_557847.json:
```json
{
    "body": "Changed dependencies from **#34586** to none",
    "created_at": "2022-09-30T14:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557847",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#34586** to none



---

archive/issue_comments_557848.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAntonio, if you don't like my last commit feel free to replace with \"known bug\".",
    "created_at": "2022-09-30T14:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557848",
    "user": "https://github.com/videlec"
}
```

<div id="comment:41" align="right">comment:41</div>

Antonio, if you don't like my last commit feel free to replace with "known bug".



---

archive/issue_comments_557849.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nShould we enforce pari 2.15 at configure step?",
    "created_at": "2022-09-30T14:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557849",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Should we enforce pari 2.15 at configure step?



---

archive/issue_events_468032.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-30T14:36:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468032"
}
```



---

archive/issue_events_468033.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2022-09-30T14:36:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468033"
}
```



---

archive/issue_comments_557850.json:
```json
{
    "body": "Changed commit from **[`48ea610`](https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2)** to **[`b38f588`](https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776)**",
    "created_at": "2022-09-30T14:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`48ea610`](https://github.com/sagemath/sagetrac-mirror/commit/48ea610d2f4fca63dbeccd0ba575d458097267e2)** to **[`b38f588`](https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776)**



---

archive/issue_comments_557851.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776\"><code>b38f588</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr></table>\n",
    "created_at": "2022-09-30T14:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776"><code>b38f588</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr></table>




---

archive/issue_events_468034.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T14:44:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468034"
}
```



---

archive/issue_events_468035.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T14:44:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468035"
}
```



---

archive/issue_comments_557852.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [Vincent Delecroix](#comment%3A42):\n> Should we enforce pari 2.15 at configure step?\n\nWas just doing that. Since there are backwards-incompatible changes, we should",
    "created_at": "2022-09-30T14:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557852",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [Vincent Delecroix](#comment%3A42):
> Should we enforce pari 2.15 at configure step?

Was just doing that. Since there are backwards-incompatible changes, we should



---

archive/issue_comments_557853.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Workaround found; Bug reported upstream.**",
    "created_at": "2022-09-30T14:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557853",
    "user": "https://github.com/antonio-rojas"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Workaround found; Bug reported upstream.**



---

archive/issue_comments_557854.json:
```json
{
    "body": "Dependencies: **#34496**",
    "created_at": "2022-09-30T15:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557854",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#34496**



---

archive/issue_comments_557855.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nsee the rationale for putting #34496 into dependencies in #34496",
    "created_at": "2022-09-30T15:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557855",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

see the rationale for putting #34496 into dependencies in #34496



---

archive/issue_comments_557856.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAlso `m4_pushdef([SAGE_PARI_MINVER],[\"134912\"])` is not right. This is pari 2.15.0, but without a patch it won't work. So this has to be a bigger value.",
    "created_at": "2022-09-30T15:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557856",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

Also `m4_pushdef([SAGE_PARI_MINVER],["134912"])` is not right. This is pari 2.15.0, but without a patch it won't work. So this has to be a bigger value.



---

archive/issue_comments_557857.json:
```json
{
    "body": "Changed commit from **[`b38f588`](https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776)** to **[`b8ef29c`](https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42)**",
    "created_at": "2022-09-30T15:23:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557857",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b38f588`](https://github.com/sagemath/sagetrac-mirror/commit/b38f58826ab47308d6cf581ec16ec871439ea776)** to **[`b8ef29c`](https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42)**



---

archive/issue_comments_557858.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8641cfee6afb10bde234cd03102e2f5cca6b9eb5\"><code>8641cfe</code></a></td><td><code>Add workaround for PARI bug#2414</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/074848cfaf69f3f488d914650487e98a07f5bd28\"><code>074848c</code></a></td><td><code>Another workaround for PARI bug#2414</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc534877defc5fbfc7b21e4ef357b032c9b60846\"><code>fc53487</code></a></td><td><code>Filter out gp warnings that break parsing output in dokchitser.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6be84313ee09564c9e8716fdb49b299459cb06d0\"><code>6be8431</code></a></td><td><code>Fix one more test in docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/281cf7b1fe044e2800780f5a8e965a6e28762981\"><code>281cf7b</code></a></td><td><code>Revert \"Fix one more test in docs\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51ea7c352a6c06a6084b865f16973ad8ce045936\"><code>51ea7c3</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2112c7e8512a43a929cd6c443000ec451a4e6531\"><code>2112c7e</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04a1730bef9dd05db5f3081030d0e4d1ceac694b\"><code>04a1730</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0365f30834b6890313790b3845c647d0160fa6a\"><code>f0365f3</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42\"><code>b8ef29c</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr></table>\n",
    "created_at": "2022-09-30T15:23:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8641cfee6afb10bde234cd03102e2f5cca6b9eb5"><code>8641cfe</code></a></td><td><code>Add workaround for PARI bug#2414</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/074848cfaf69f3f488d914650487e98a07f5bd28"><code>074848c</code></a></td><td><code>Another workaround for PARI bug#2414</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc534877defc5fbfc7b21e4ef357b032c9b60846"><code>fc53487</code></a></td><td><code>Filter out gp warnings that break parsing output in dokchitser.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6be84313ee09564c9e8716fdb49b299459cb06d0"><code>6be8431</code></a></td><td><code>Fix one more test in docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/281cf7b1fe044e2800780f5a8e965a6e28762981"><code>281cf7b</code></a></td><td><code>Revert "Fix one more test in docs"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51ea7c352a6c06a6084b865f16973ad8ce045936"><code>51ea7c3</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2112c7e8512a43a929cd6c443000ec451a4e6531"><code>2112c7e</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04a1730bef9dd05db5f3081030d0e4d1ceac694b"><code>04a1730</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0365f30834b6890313790b3845c647d0160fa6a"><code>f0365f3</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42"><code>b8ef29c</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr></table>




---

archive/issue_comments_557859.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI've rebased over the branch of #34496 and bumped SAGE_PARI_MIN/MAXVER accordingly.",
    "created_at": "2022-09-30T15:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557859",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

I've rebased over the branch of #34496 and bumped SAGE_PARI_MIN/MAXVER accordingly.



---

archive/issue_comments_557860.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [Dima Pasechnik](#comment%3A46):\n> Also `m4_pushdef([SAGE_PARI_MINVER],[\"134912\"])` is not right. This is pari 2.15.0, but without a patch it won't work. So this has to be a bigger value.\n\nWhich patch? This works fine with plain 2.15.0",
    "created_at": "2022-09-30T15:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557860",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [Dima Pasechnik](#comment%3A46):
> Also `m4_pushdef([SAGE_PARI_MINVER],["134912"])` is not right. This is pari 2.15.0, but without a patch it won't work. So this has to be a bigger value.

Which patch? This works fine with plain 2.15.0



---

archive/issue_comments_557861.json:
```json
{
    "body": "Changed commit from **[`b8ef29c`](https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42)** to **[`2823bff`](https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc)**",
    "created_at": "2022-09-30T15:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8ef29c`](https://github.com/sagemath/sagetrac-mirror/commit/b8ef29c1dd8f6e005e575d32bae4e58229cf3e42)** to **[`2823bff`](https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc)**



---

archive/issue_comments_557862.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc\"><code>2823bff</code></a></td><td><code>correct minimal version of pari</code></td></tr></table>\n",
    "created_at": "2022-09-30T15:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc"><code>2823bff</code></a></td><td><code>correct minimal version of pari</code></td></tr></table>




---

archive/issue_comments_557863.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nOK, right, I didn't pay attention. It's giac's patch, not pari's. Fixed.",
    "created_at": "2022-09-30T15:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557863",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">comment:51</div>

OK, right, I didn't pay attention. It's giac's patch, not pari's. Fixed.



---

archive/issue_comments_557864.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nLooks like the force push reverted part of the 9.8.beta1 rebase. The changes in `sage/geometry/polyhedron/backend_normaliz.py` shouldn't be there, and the pycodestyle changes from #34522 in `src/sage/lfunctions/pari.py` are missing.",
    "created_at": "2022-09-30T16:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557864",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:52" align="right">comment:52</div>

Looks like the force push reverted part of the 9.8.beta1 rebase. The changes in `sage/geometry/polyhedron/backend_normaliz.py` shouldn't be there, and the pycodestyle changes from #34522 in `src/sage/lfunctions/pari.py` are missing.



---

archive/issue_events_468036.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T16:01:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468036"
}
```



---

archive/issue_events_468037.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T16:01:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468037"
}
```



---

archive/issue_comments_557865.json:
```json
{
    "body": "Changed commit from **[`2823bff`](https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc)** to **[`1e86aa2`](https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a)**",
    "created_at": "2022-09-30T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2823bff`](https://github.com/sagemath/sagetrac-mirror/commit/2823bff46e12d48226db0326e270f02336c005bc)** to **[`1e86aa2`](https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a)**



---

archive/issue_comments_557866.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a\"><code>1e86aa2</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr></table>\n",
    "created_at": "2022-09-30T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557866",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a"><code>1e86aa2</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr></table>




---

archive/issue_events_468038.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T16:10:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468038"
}
```



---

archive/issue_events_468039.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-09-30T16:10:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468039"
}
```



---

archive/issue_comments_557867.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\ntests good on macOS with Homebrew's pari 2.15.0",
    "created_at": "2022-10-01T07:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557867",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:55" align="right">comment:55</div>

tests good on macOS with Homebrew's pari 2.15.0



---

archive/issue_comments_557868.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-10-01T07:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557868",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_557869.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI suppose this needs a round of testing on GH Actions.",
    "created_at": "2022-10-01T07:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557869",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

I suppose this needs a round of testing on GH Actions.



---

archive/issue_comments_557870.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI've started https://github.com/sagemath/sagetrac-mirror/actions/runs/3164081241\nI see the CI has been refactored, not sure how to run more tests.",
    "created_at": "2022-10-01T09:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557870",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:57" align="right">comment:57</div>

I've started https://github.com/sagemath/sagetrac-mirror/actions/runs/3164081241
I see the CI has been refactored, not sure how to run more tests.



---

archive/issue_comments_557871.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [Dima Pasechnik](#comment%3A57):\n> I've started https://github.com/sagemath/sagetrac-mirror/actions/runs/3164081241\n> I see the CI has been refactored, not sure how to run more tests.\n\nUse https://github.com/sagemath/sagetrac-mirror/actions/workflows/ci-linux.yml?query=branch%3Apublic%2F34537 and push \"Run workflow\"\n\nor https://github.com/sagemath/sagetrac-mirror/actions/workflows/ci-macos.yml?query=branch%3Apublic%2F34537 and push \"Run workflow\"",
    "created_at": "2022-10-01T16:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557871",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [Dima Pasechnik](#comment%3A57):
> I've started https://github.com/sagemath/sagetrac-mirror/actions/runs/3164081241
> I see the CI has been refactored, not sure how to run more tests.

Use https://github.com/sagemath/sagetrac-mirror/actions/workflows/ci-linux.yml?query=branch%3Apublic%2F34537 and push "Run workflow"

or https://github.com/sagemath/sagetrac-mirror/actions/workflows/ci-macos.yml?query=branch%3Apublic%2F34537 and push "Run workflow"



---

archive/issue_comments_557872.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nstarted \n\nhttps://github.com/sagemath/sagetrac-mirror/actions/runs/3167926282\n\nand \n\nhttps://github.com/sagemath/sagetrac-mirror/actions/runs/3167930205\n\nBy the way, with such urls as you provided, it's not sufficent to just push \"Run workflow\", as this widget still has \"develop\" as a branch to run - so the branch still had to manually selected.",
    "created_at": "2022-10-02T08:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557872",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

started 

https://github.com/sagemath/sagetrac-mirror/actions/runs/3167926282

and 

https://github.com/sagemath/sagetrac-mirror/actions/runs/3167930205

By the way, with such urls as you provided, it's not sufficent to just push "Run workflow", as this widget still has "develop" as a branch to run - so the branch still had to manually selected.



---

archive/issue_comments_557873.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nworks on M1 mac with Homebrew, too.",
    "created_at": "2022-10-03T07:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557873",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:60" align="right">comment:60</div>

works on M1 mac with Homebrew, too.



---

archive/issue_events_468040.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-03T15:01:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468040"
}
```



---

archive/issue_events_468041.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-03T15:01:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468041"
}
```



---

archive/issue_comments_557874.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nthere were errors with many CI runs on macOS, but I think it's not because of this. LGTM",
    "created_at": "2022-10-03T15:01:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557874",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:61" align="right">comment:61</div>

there were errors with many CI runs on macOS, but I think it's not because of this. LGTM



---

archive/issue_comments_557875.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI spoke too soon. While Sage tests all pass, some of giac's selftests fail (this is on macOS M1 machine)\n\n```\n[giac-1.9.0.15p0] make  check-TESTS\n[giac-1.9.0.15p0] PASS: chk_partfrac\n[giac-1.9.0.15p0] PASS: chk_factor\n[giac-1.9.0.15p0] PASS: chk_integrate\n[giac-1.9.0.15p0] PASS: chk_geo\n[giac-1.9.0.15p0] FAIL: chk_fhan2\n[giac-1.9.0.15p0] PASS: chk_cas\n[giac-1.9.0.15p0] PASS: chk_fhan3\n[giac-1.9.0.15p0] FAIL: chk_fhan4\n[giac-1.9.0.15p0] PASS: chk_xavier\n[giac-1.9.0.15p0] PASS: chk_morley_demo\n[giac-1.9.0.15p0] FAIL: chk_fhan6\n[giac-1.9.0.15p0] PASS: chk_limit\n[giac-1.9.0.15p0] FAIL: chk_fhan8\n[giac-1.9.0.15p0] PASS: chk_fhan5\n[giac-1.9.0.15p0] PASS: chk_fhan0\n[giac-1.9.0.15p0] PASS: chk_normalize\n[giac-1.9.0.15p0] FAIL: chk_fhan13\n[giac-1.9.0.15p0] FAIL: chk_fhan12\n[giac-1.9.0.15p0] PASS: chk_fhan14\n[giac-1.9.0.15p0] PASS: chk_fhan1\n[giac-1.9.0.15p0] PASS: chk_fhan15\n[giac-1.9.0.15p0] FAIL: chk_fhan11\n[giac-1.9.0.15p0] PASS: chk_fhan17\n[giac-1.9.0.15p0] PASS: chk_fhan16\n[giac-1.9.0.15p0] PASS: chk_fhan20\n[giac-1.9.0.15p0] PASS: chk_fhan19\n[giac-1.9.0.15p0] PASS: chk_fhan21\n[giac-1.9.0.15p0] FAIL: chk_fhan9\n[giac-1.9.0.15p0] PASS: chk_fhan18\n[giac-1.9.0.15p0] PASS: chk_fhan7\n[giac-1.9.0.15p0] ============================================================================\n[giac-1.9.0.15p0] Testsuite summary for giac 1.9.0\n[giac-1.9.0.15p0] ============================================================================\n[giac-1.9.0.15p0] # TOTAL: 30\n[giac-1.9.0.15p0] # PASS:  22\n[giac-1.9.0.15p0] # SKIP:  0\n[giac-1.9.0.15p0] # XFAIL: 0\n[giac-1.9.0.15p0] # FAIL:  8\n[giac-1.9.0.15p0] # XPASS: 0\n```\n\nhopefully it's just formatting, but needs investigation",
    "created_at": "2022-10-04T10:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557875",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:62" align="right">comment:62</div>

I spoke too soon. While Sage tests all pass, some of giac's selftests fail (this is on macOS M1 machine)

```
[giac-1.9.0.15p0] make  check-TESTS
[giac-1.9.0.15p0] PASS: chk_partfrac
[giac-1.9.0.15p0] PASS: chk_factor
[giac-1.9.0.15p0] PASS: chk_integrate
[giac-1.9.0.15p0] PASS: chk_geo
[giac-1.9.0.15p0] FAIL: chk_fhan2
[giac-1.9.0.15p0] PASS: chk_cas
[giac-1.9.0.15p0] PASS: chk_fhan3
[giac-1.9.0.15p0] FAIL: chk_fhan4
[giac-1.9.0.15p0] PASS: chk_xavier
[giac-1.9.0.15p0] PASS: chk_morley_demo
[giac-1.9.0.15p0] FAIL: chk_fhan6
[giac-1.9.0.15p0] PASS: chk_limit
[giac-1.9.0.15p0] FAIL: chk_fhan8
[giac-1.9.0.15p0] PASS: chk_fhan5
[giac-1.9.0.15p0] PASS: chk_fhan0
[giac-1.9.0.15p0] PASS: chk_normalize
[giac-1.9.0.15p0] FAIL: chk_fhan13
[giac-1.9.0.15p0] FAIL: chk_fhan12
[giac-1.9.0.15p0] PASS: chk_fhan14
[giac-1.9.0.15p0] PASS: chk_fhan1
[giac-1.9.0.15p0] PASS: chk_fhan15
[giac-1.9.0.15p0] FAIL: chk_fhan11
[giac-1.9.0.15p0] PASS: chk_fhan17
[giac-1.9.0.15p0] PASS: chk_fhan16
[giac-1.9.0.15p0] PASS: chk_fhan20
[giac-1.9.0.15p0] PASS: chk_fhan19
[giac-1.9.0.15p0] PASS: chk_fhan21
[giac-1.9.0.15p0] FAIL: chk_fhan9
[giac-1.9.0.15p0] PASS: chk_fhan18
[giac-1.9.0.15p0] PASS: chk_fhan7
[giac-1.9.0.15p0] ============================================================================
[giac-1.9.0.15p0] Testsuite summary for giac 1.9.0
[giac-1.9.0.15p0] ============================================================================
[giac-1.9.0.15p0] # TOTAL: 30
[giac-1.9.0.15p0] # PASS:  22
[giac-1.9.0.15p0] # SKIP:  0
[giac-1.9.0.15p0] # XFAIL: 0
[giac-1.9.0.15p0] # FAIL:  8
[giac-1.9.0.15p0] # XPASS: 0
```

hopefully it's just formatting, but needs investigation



---

archive/issue_events_468042.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-04T10:12:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468042"
}
```



---

archive/issue_events_468043.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-04T10:12:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468043"
}
```



---

archive/issue_comments_557876.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI'm seeing just one failure, which is a segfault\n\n```\n  ***   the thread stack overflows !\n  current stack size: 1024000 (0.977 Mbytes)\n  [hint] set 'threadsizemax' to a nonzero value in your GPRC\n  *** matdet: Warning: increasing stack size to 2048000.\n  ***   at top-level: matdet([-10,-7,6,-7,1,4,-1,-2,-2,-5,1,7,-6,7,-\n  ***                 ^----------------------------------------------\n  *** matdet: the thread stack overflows !\n  current stack size: 1024000 (0.977 Mbytes)\n  [hint] set 'threadsizemax' to a nonzero value in your GPRC\nError in PARI subsystem\n./chk_fhan4: line 3: 21708 Segmentation fault      (core dumped) ../src/icas TP04-sol.cas > TP04.tst\n```\ncaused by the garbage collection changes in https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commitdiff;h=259f62c17c101c380cfed56d303304a13e21ec1e",
    "created_at": "2022-10-04T21:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557876",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:63" align="right">comment:63</div>

I'm seeing just one failure, which is a segfault

```
  ***   the thread stack overflows !
  current stack size: 1024000 (0.977 Mbytes)
  [hint] set 'threadsizemax' to a nonzero value in your GPRC
  *** matdet: Warning: increasing stack size to 2048000.
  ***   at top-level: matdet([-10,-7,6,-7,1,4,-1,-2,-2,-5,1,7,-6,7,-
  ***                 ^----------------------------------------------
  *** matdet: the thread stack overflows !
  current stack size: 1024000 (0.977 Mbytes)
  [hint] set 'threadsizemax' to a nonzero value in your GPRC
Error in PARI subsystem
./chk_fhan4: line 3: 21708 Segmentation fault      (core dumped) ../src/icas TP04-sol.cas > TP04.tst
```
caused by the garbage collection changes in https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commitdiff;h=259f62c17c101c380cfed56d303304a13e21ec1e



---

archive/issue_comments_557877.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI see this segfault too. Does setting `threadsizemax` in `~/.gprc` help?",
    "created_at": "2022-10-04T21:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557877",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

I see this segfault too. Does setting `threadsizemax` in `~/.gprc` help?



---

archive/issue_comments_557878.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nDima, as noted at [#32785 comment:7](https://github.com/sagemath/sage/issues/32785#comment:7), it is not new that `giac` fails its test suite, at least on OS X machines. On Intel (old version of `giac` and `pari`):\n\n```\nPASS: chk_partfrac\nPASS: chk_fhan3\nPASS: chk_factor\nFAIL: chk_fhan2\nPASS: chk_geo\nPASS: chk_integrate\nPASS: chk_fhan0\nPASS: chk_cas\nPASS: chk_fhan5\nPASS: chk_fhan13\nPASS: chk_fhan12\nPASS: chk_fhan14\nPASS: chk_fhan15\nPASS: chk_fhan17\nPASS: chk_fhan6\nPASS: chk_fhan19\nPASS: chk_fhan16\nPASS: chk_fhan20\nPASS: chk_fhan21\nFAIL: chk_fhan9\nPASS: chk_fhan18\nPASS: chk_fhan7\nPASS: chk_xavier\nPASS: chk_morley_demo\nPASS: chk_limit\nPASS: chk_fhan11\nPASS: chk_fhan8\nPASS: chk_fhan4\nPASS: chk_fhan1\nPASS: chk_normalize\n```\nI'll try on an m2 machine later, to see what failures I get.",
    "created_at": "2022-10-04T21:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557878",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:65" align="right">comment:65</div>

Dima, as noted at [#32785 comment:7](https://github.com/sagemath/sage/issues/32785#comment:7), it is not new that `giac` fails its test suite, at least on OS X machines. On Intel (old version of `giac` and `pari`):

```
PASS: chk_partfrac
PASS: chk_fhan3
PASS: chk_factor
FAIL: chk_fhan2
PASS: chk_geo
PASS: chk_integrate
PASS: chk_fhan0
PASS: chk_cas
PASS: chk_fhan5
PASS: chk_fhan13
PASS: chk_fhan12
PASS: chk_fhan14
PASS: chk_fhan15
PASS: chk_fhan17
PASS: chk_fhan6
PASS: chk_fhan19
PASS: chk_fhan16
PASS: chk_fhan20
PASS: chk_fhan21
FAIL: chk_fhan9
PASS: chk_fhan18
PASS: chk_fhan7
PASS: chk_xavier
PASS: chk_morley_demo
PASS: chk_limit
PASS: chk_fhan11
PASS: chk_fhan8
PASS: chk_fhan4
PASS: chk_fhan1
PASS: chk_normalize
```
I'll try on an m2 machine later, to see what failures I get.



---

archive/issue_comments_557879.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nok, thus it is not much of a regression.",
    "created_at": "2022-10-04T22:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557879",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">comment:66</div>

ok, thus it is not much of a regression.



---

archive/issue_comments_557880.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nBy the way, should #34496 really be a dependency, or is the point of this ticket to be able to bypass the problem of building with the newest `pari`?",
    "created_at": "2022-10-04T23:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557880",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:67" align="right">comment:67</div>

By the way, should #34496 really be a dependency, or is the point of this ticket to be able to bypass the problem of building with the newest `pari`?



---

archive/issue_comments_557881.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [John Palmieri](#comment%3A67):\n> By the way, should #34496 really be a dependency, or is the point of this ticket to be able to bypass the problem of building with the newest `pari`?\n\n#34496 added a useful tweak to spkg-configure of pari, and so we build up on it.",
    "created_at": "2022-10-05T10:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557881",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [John Palmieri](#comment%3A67):
> By the way, should #34496 really be a dependency, or is the point of this ticket to be able to bypass the problem of building with the newest `pari`?

#34496 added a useful tweak to spkg-configure of pari, and so we build up on it.



---

archive/issue_comments_557882.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI'm not going to be able to check test suite failures with the old `pari`/`giac` on Apple M2 until Friday.",
    "created_at": "2022-10-05T15:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557882",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:69" align="right">comment:69</div>

I'm not going to be able to check test suite failures with the old `pari`/`giac` on Apple M2 until Friday.



---

archive/issue_comments_557883.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nOn Apple M2, the old pari and the old giac give these results in giac's test suite:\n\n```\nmake  check-TESTS\nPASS: chk_partfrac\nPASS: chk_factor\nPASS: chk_integrate\nPASS: chk_geo\nPASS: chk_cas\nPASS: chk_limit\nFAIL: chk_fhan2\nPASS: chk_xavier\nPASS: chk_morley_demo\nPASS: chk_fhan3\nPASS: chk_normalize\nFAIL: chk_fhan4\nFAIL: chk_fhan6\nFAIL: chk_fhan8\nPASS: chk_fhan5\nPASS: chk_fhan0\nFAIL: chk_fhan13\nFAIL: chk_fhan12\nPASS: chk_fhan1\nPASS: chk_fhan14\nPASS: chk_fhan15\nFAIL: chk_fhan11\nPASS: chk_fhan17\nPASS: chk_fhan16\nPASS: chk_fhan20\nPASS: chk_fhan19\nPASS: chk_fhan21\nFAIL: chk_fhan9\nPASS: chk_fhan18\nPASS: chk_fhan7\n```",
    "created_at": "2022-10-07T21:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557883",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:71" align="right">comment:71</div>

On Apple M2, the old pari and the old giac give these results in giac's test suite:

```
make  check-TESTS
PASS: chk_partfrac
PASS: chk_factor
PASS: chk_integrate
PASS: chk_geo
PASS: chk_cas
PASS: chk_limit
FAIL: chk_fhan2
PASS: chk_xavier
PASS: chk_morley_demo
PASS: chk_fhan3
PASS: chk_normalize
FAIL: chk_fhan4
FAIL: chk_fhan6
FAIL: chk_fhan8
PASS: chk_fhan5
PASS: chk_fhan0
FAIL: chk_fhan13
FAIL: chk_fhan12
PASS: chk_fhan1
PASS: chk_fhan14
PASS: chk_fhan15
FAIL: chk_fhan11
PASS: chk_fhan17
PASS: chk_fhan16
PASS: chk_fhan20
PASS: chk_fhan19
PASS: chk_fhan21
FAIL: chk_fhan9
PASS: chk_fhan18
PASS: chk_fhan7
```



---

archive/issue_comments_557884.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nLooks like the same failures that Dima saw, so not a regression. I don't think it should be an obstacle to this ticket.",
    "created_at": "2022-10-07T21:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557884",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:72" align="right">comment:72</div>

Looks like the same failures that Dima saw, so not a regression. I don't think it should be an obstacle to this ticket.



---

archive/issue_comments_557885.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nOK, thanks. Back to positive.",
    "created_at": "2022-10-08T20:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557885",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:73" align="right">comment:73</div>

OK, thanks. Back to positive.



---

archive/issue_events_468044.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-08T20:28:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468044"
}
```



---

archive/issue_events_468045.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-08T20:28:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468045"
}
```



---

archive/issue_events_468046.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-10T22:17:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468046"
}
```



---

archive/issue_events_468047.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-10T22:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468047"
}
```



---

archive/issue_comments_557886.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThe cypari testsuite fails on OSX (intel), worked before\n\n```\nSuccessfully installed cypari2-2.1.2\n\nreal    1m45.872s\nuser    1m35.524s\nsys     0m9.197s\nCopying package files from temporary location /Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/var/tmp/sage/build/cypari-2.1.2/inst to /Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5\nRunning the test suite for cypari-2.1.2...\nulimit -s 8192; python3 -u tests/rundoctest.py\n================================================================================\nTesting cypari2.closure\n**********************************************************************\nFile \"/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/site-packages/cypari2/closure.cpython-310-darwin.so\", line ?, in cypari2.closure.__test__.objtoclosure (line 145)\nFailed example:\n    mul([1], [2])\nDifferences (ndiff with -expected +actual):\n      Traceback (most recent call last):\n    - ...\n    - PariError: call_python: forbidden multiplication t_VEC (1 elts) * t_VEC (1 elts)\n    +   File \"/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/doctest.py\", line 1350, in __run\n    +     exec(compile(example.source, filename, \"single\",\n    +   File \"<doctest cypari2.closure.__test__.objtoclosure (line 145)[18]>\", line 1, in <module>\n    +     mul([1], [2])\n    +   File \"cypari2/gen.pyx\", line 4110, in cypari2.gen.Gen.__call__\n    +     sig_on()\n    +   File \"cypari2/handle_error.pyx\", line 213, in cypari2.handle_error._pari_err_handle\n    +     raise PariError(errnum, pari_error_string, clone_gen_noclear(E))\n    + PariError: call_python: incorrect type in qfbcomp (t_VEC)\n**********************************************************************\nFile \"/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/site-packages/cypari2/closure.cpython-310-darwin.so\", line ?, in cypari2.closure.objtoclosure\nFailed example:\n    mul([1], [2])\nDifferences (ndiff with -expected +actual):\n      Traceback (most recent call last):\n    - ...\n    - PariError: call_python: forbidden multiplication t_VEC (1 elts) * t_VEC (1 elts)\n    +   File \"/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/doctest.py\", line 1350, in __run\n    +     exec(compile(example.source, filename, \"single\",\n    +   File \"<doctest cypari2.closure.objtoclosure[18]>\", line 1, in <module>\n    +     mul([1], [2])\n    +   File \"cypari2/gen.pyx\", line 4110, in cypari2.gen.Gen.__call__\n    +     sig_on()\n    +   File \"cypari2/handle_error.pyx\", line 213, in cypari2.handle_error._pari_err_handle\n    +     raise PariError(errnum, pari_error_string, clone_gen_noclear(E))\n    + PariError: call_python: incorrect type in qfbcomp (t_VEC)\n**********************************************************************\n```",
    "created_at": "2022-10-10T22:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557886",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:74" align="right">comment:74</div>

The cypari testsuite fails on OSX (intel), worked before

```
Successfully installed cypari2-2.1.2

real    1m45.872s
user    1m35.524s
sys     0m9.197s
Copying package files from temporary location /Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/var/tmp/sage/build/cypari-2.1.2/inst to /Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5
Running the test suite for cypari-2.1.2...
ulimit -s 8192; python3 -u tests/rundoctest.py
================================================================================
Testing cypari2.closure
**********************************************************************
File "/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/site-packages/cypari2/closure.cpython-310-darwin.so", line ?, in cypari2.closure.__test__.objtoclosure (line 145)
Failed example:
    mul([1], [2])
Differences (ndiff with -expected +actual):
      Traceback (most recent call last):
    - ...
    - PariError: call_python: forbidden multiplication t_VEC (1 elts) * t_VEC (1 elts)
    +   File "/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/doctest.py", line 1350, in __run
    +     exec(compile(example.source, filename, "single",
    +   File "<doctest cypari2.closure.__test__.objtoclosure (line 145)[18]>", line 1, in <module>
    +     mul([1], [2])
    +   File "cypari2/gen.pyx", line 4110, in cypari2.gen.Gen.__call__
    +     sig_on()
    +   File "cypari2/handle_error.pyx", line 213, in cypari2.handle_error._pari_err_handle
    +     raise PariError(errnum, pari_error_string, clone_gen_noclear(E))
    + PariError: call_python: incorrect type in qfbcomp (t_VEC)
**********************************************************************
File "/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/site-packages/cypari2/closure.cpython-310-darwin.so", line ?, in cypari2.closure.objtoclosure
Failed example:
    mul([1], [2])
Differences (ndiff with -expected +actual):
      Traceback (most recent call last):
    - ...
    - PariError: call_python: forbidden multiplication t_VEC (1 elts) * t_VEC (1 elts)
    +   File "/Users/buildbot-sage/worker/sage_git/build/local/var/lib/sage/venv-python3.10.5/lib/python3.10/doctest.py", line 1350, in __run
    +     exec(compile(example.source, filename, "single",
    +   File "<doctest cypari2.closure.objtoclosure[18]>", line 1, in <module>
    +     mul([1], [2])
    +   File "cypari2/gen.pyx", line 4110, in cypari2.gen.Gen.__call__
    +     sig_on()
    +   File "cypari2/handle_error.pyx", line 213, in cypari2.handle_error._pari_err_handle
    +     raise PariError(errnum, pari_error_string, clone_gen_noclear(E))
    + PariError: call_python: incorrect type in qfbcomp (t_VEC)
**********************************************************************
```



---

archive/issue_comments_557887.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [Volker Braun](#comment%3A74):\n> The cypari testsuite fails on OSX (intel), worked before\n> \n> ```\n> ...\n> ```\n\nThe error message indeed changed in PARI 2.15. Should that really block this ticket? Otherwise, we do have to upgrade cypari2 at the same time.",
    "created_at": "2022-10-10T22:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557887",
    "user": "https://github.com/videlec"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [Volker Braun](#comment%3A74):
> The cypari testsuite fails on OSX (intel), worked before
> 
> ```
> ...
> ```

The error message indeed changed in PARI 2.15. Should that really block this ticket? Otherwise, we do have to upgrade cypari2 at the same time.



---

archive/issue_comments_557888.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThe (cy)pari testsuite is generally pretty solid so I'd hate to have to permanently disable it on the buildbot",
    "created_at": "2022-10-11T09:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557888",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:76" align="right">comment:76</div>

The (cy)pari testsuite is generally pretty solid so I'd hate to have to permanently disable it on the buildbot



---

archive/issue_comments_557889.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nHere is an explanation for the cypari error:\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1020456#10",
    "created_at": "2022-10-14T17:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557889",
    "user": "https://github.com/tobihan"
}
```

<div id="comment:77" align="right">comment:77</div>

Here is an explanation for the cypari error:
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1020456#10



---

archive/issue_comments_557890.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [Tobias Hansen](#comment%3A77):\n> Here is an explanation for the cypari error:\n> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1020456#10\n\nreport to upstream:  https://github.com/sagemath/cypari2/issues/122",
    "created_at": "2022-10-17T10:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557890",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [Tobias Hansen](#comment%3A77):
> Here is an explanation for the cypari error:
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1020456#10

report to upstream:  https://github.com/sagemath/cypari2/issues/122



---

archive/issue_comments_557891.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI have cypari2 pass all tests on pari-2.15 using\n- patch on pari: https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commit;h=9c4bcd3f497f30f757c8eecadc9b45b33754a540 (just remove the first hunk patching the file `CHANGES` since it will not apply otherwise)\n- patch on cypari2: https://github.com/sagemath/cypari2/pull/123",
    "created_at": "2022-10-30T21:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557891",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:79" align="right">comment:79</div>

I have cypari2 pass all tests on pari-2.15 using
- patch on pari: https://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commit;h=9c4bcd3f497f30f757c8eecadc9b45b33754a540 (just remove the first hunk patching the file `CHANGES` since it will not apply otherwise)
- patch on cypari2: https://github.com/sagemath/cypari2/pull/123



---

archive/issue_comments_557892.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\npari 2.15.1 is out, see https://pari.math.u-bordeaux.fr/archives/pari-announce-22/msg00002.html",
    "created_at": "2022-11-10T23:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557892",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:80" align="right">comment:80</div>

pari 2.15.1 is out, see https://pari.math.u-bordeaux.fr/archives/pari-announce-22/msg00002.html



---

archive/issue_events_468048.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-11-10T23:31:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "title_is": "Upgrade to pari 2.15.1",
    "title_was": "Upgrade to pari 2.15",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468048"
}
```



---

archive/issue_comments_557893.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [Dima Pasechnik](#comment%3A80):\n> pari 2.15.1 is out, see https://pari.math.u-bordeaux.fr/archives/pari-announce-22/msg00002.html\n\nPari 2.15.1 includes the fix I cherry picked in my last comment.\n\nThe current HEAD of cypari2 already fied testsuite passes on pari 2.15, and Vincent said he will do a release soon.\n\nIt would be very nice if this can be merged for 9.8.",
    "created_at": "2022-11-10T23:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557893",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [Dima Pasechnik](#comment%3A80):
> pari 2.15.1 is out, see https://pari.math.u-bordeaux.fr/archives/pari-announce-22/msg00002.html

Pari 2.15.1 includes the fix I cherry picked in my last comment.

The current HEAD of cypari2 already fied testsuite passes on pari 2.15, and Vincent said he will do a release soon.

It would be very nice if this can be merged for 9.8.



---

archive/issue_comments_557894.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nAlso, giac 1.9.0.29 builds fine against 2.15 without patching.",
    "created_at": "2022-11-11T06:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557894",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:82" align="right">comment:82</div>

Also, giac 1.9.0.29 builds fine against 2.15 without patching.



---

archive/issue_comments_557895.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [Antonio Rojas](#comment%3A82):\n> Also, giac 1.9.0.29 builds fine against 2.15 without patching.\n\ndo you want giac updated here, or on another ticket?",
    "created_at": "2022-11-11T15:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557895",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [Antonio Rojas](#comment%3A82):
> Also, giac 1.9.0.29 builds fine against 2.15 without patching.

do you want giac updated here, or on another ticket?



---

archive/issue_comments_557896.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\ncypari2 upgrade in #33878",
    "created_at": "2022-11-11T18:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557896",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

cypari2 upgrade in #33878



---

archive/issue_comments_557897.json:
```json
{
    "body": "Changed dependencies from **#34496** to **#34496, #33878**",
    "created_at": "2022-11-11T18:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557897",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#34496** to **#34496, #33878**



---

archive/issue_comments_557898.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [Dima Pasechnik](#comment%3A83):\n> do you want giac updated here, or on another ticket?\n\nI don't personally mind, was just pointing out the possibility of updating giac instead of patching. Can this go back to needs_review now?",
    "created_at": "2022-11-24T21:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557898",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [Dima Pasechnik](#comment%3A83):
> do you want giac updated here, or on another ticket?

I don't personally mind, was just pointing out the possibility of updating giac instead of patching. Can this go back to needs_review now?



---

archive/issue_events_468049.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-11-24T21:33:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468049"
}
```



---

archive/issue_events_468050.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-11-24T21:33:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468050"
}
```



---

archive/issue_comments_557899.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nThe title of the ticket says that we're upgrading to 2.15.1, but the branch only goes to 2.15.0.",
    "created_at": "2022-11-29T19:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557899",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:87" align="right">comment:87</div>

The title of the ticket says that we're upgrading to 2.15.1, but the branch only goes to 2.15.0.



---

archive/issue_comments_557900.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nOh, right, I tested with Homebrew's pari, and Gentoo's pari (they are both 2.15.1), and forgot to bump this branch.",
    "created_at": "2022-11-29T20:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557900",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">comment:88</div>

Oh, right, I tested with Homebrew's pari, and Gentoo's pari (they are both 2.15.1), and forgot to bump this branch.



---

archive/issue_comments_557901.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nOK, readly now\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c90180252309183cea24d0803e24d167ccba043c\"><code>c901802</code></a></td><td><code>Fix one more test in docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eea5ce7faccc81f846958b8f7fdb643a68c70131\"><code>eea5ce7</code></a></td><td><code>Revert \"Fix one more test in docs\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3898bbf5185b79d822d9f39637d76e5c8c323319\"><code>3898bbf</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42a21a1815aabd0a2b9a84226ac5290418edb24d\"><code>42a21a1</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d656b23ce87ae0b514024cddc11d0d1b736777c1\"><code>d656b23</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9c283e791410dc6906644f9306dc42c6255fcfa\"><code>d9c283e</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29c80f67a24b77869ee46221a777051e5a3d9733\"><code>29c80f6</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9aa2be67191de48eaa5e56faaa4d6bfeac7fc863\"><code>9aa2be6</code></a></td><td><code>correct minimal version of pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ff502c50f2e511fe87b67c91b279d322532819\"><code>69ff502</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441\"><code>364f6d1</code></a></td><td><code>bump version to 2.15.1</code></td></tr></table>\n",
    "created_at": "2022-11-29T20:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557901",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:89" align="right">comment:89</div>

OK, readly now

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c90180252309183cea24d0803e24d167ccba043c"><code>c901802</code></a></td><td><code>Fix one more test in docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eea5ce7faccc81f846958b8f7fdb643a68c70131"><code>eea5ce7</code></a></td><td><code>Revert "Fix one more test in docs"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3898bbf5185b79d822d9f39637d76e5c8c323319"><code>3898bbf</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42a21a1815aabd0a2b9a84226ac5290418edb24d"><code>42a21a1</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d656b23ce87ae0b514024cddc11d0d1b736777c1"><code>d656b23</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9c283e791410dc6906644f9306dc42c6255fcfa"><code>d9c283e</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29c80f67a24b77869ee46221a777051e5a3d9733"><code>29c80f6</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9aa2be67191de48eaa5e56faaa4d6bfeac7fc863"><code>9aa2be6</code></a></td><td><code>correct minimal version of pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ff502c50f2e511fe87b67c91b279d322532819"><code>69ff502</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441"><code>364f6d1</code></a></td><td><code>bump version to 2.15.1</code></td></tr></table>




---

archive/issue_comments_557902.json:
```json
{
    "body": "Changed dependencies from **#34496, #33878** to none",
    "created_at": "2022-11-29T20:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557902",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#34496, #33878** to none



---

archive/issue_comments_557903.json:
```json
{
    "body": "Changed commit from **[`1e86aa2`](https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a)** to **[`364f6d1`](https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441)**",
    "created_at": "2022-11-29T20:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557903",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`1e86aa2`](https://github.com/sagemath/sagetrac-mirror/commit/1e86aa26790d84bf066eca67f98a60a8aa3d4d3a)** to **[`364f6d1`](https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441)**



---

archive/issue_comments_557904.json:
```json
{
    "body": "Changed branch from **[public/34537](https://github.com/sagemath/sagetrac-mirror/tree/public/34537)** to **[u/dimpase/packages/pari2151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari2151)**",
    "created_at": "2022-11-29T20:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557904",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[public/34537](https://github.com/sagemath/sagetrac-mirror/tree/public/34537)** to **[u/dimpase/packages/pari2151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari2151)**



---

archive/issue_comments_557905.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nrebased over 9.8.beta4",
    "created_at": "2022-11-29T20:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557905",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:90" align="right">comment:90</div>

rebased over 9.8.beta4



---

archive/issue_comments_557906.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nOn OS X Intel, the basic functionality is there (i.e., Sage builds and `make ptestlong` works), but the test suite for pari hangs. I see this in the log file, with no changes in more than an hour:\n\n```\n: gp-sta\n* Testing addprimes        gp-sta..TIME=    8   gp-dyn..TIME=    8   \n* Testing agm              gp-sta..TIME=   65   gp-dyn..TIME=   59   \n* Testing algebras         gp-sta..TIME= 1490   gp-dyn..TIME= 1481   \n* Testing alggroup         gp-sta..TIME=  661   gp-dyn..TIME=  651   \n* Testing alghasse         gp-sta..TIME= 2701   gp-dyn..TIME= 2523   \n* Testing alglattices      gp-sta..TIME= 1153   gp-dyn..TIME= 1150   \n* Testing algsplit         gp-sta..TIME=  946   gp-dyn..TIME= 1139   \n* Testing analyz           gp-sta..TIME=   22   gp-dyn..TIME=   20   \n* Testing apply            gp-sta..TIME=    1   gp-dyn..TIME=    1   \n* Testing arith            gp-sta..TIME=    0   gp-dyn..TIME=    0   \n* Testing asymp            gp-sta..TIME=  129   gp-dyn..TIME=  117   \n* Testing aurifeuille      gp-sta..TIME=    1   gp-dyn..TIME=    1   \n* Testing bbhnf            gp-sta..TIME=  959   gp-dyn..TIME=  918   \n* Testing bern             gp-sta..TIME=13627   gp-dyn..TIME=13270   \n* Testing bessel           gp-sta..TIME=  177   gp-dyn..TIME=  170   \n* Testing bestappr         gp-sta..TIME=    1   gp-dyn..TIME=    1   \n* Testing binomial         gp-sta..TIME=  240   gp-dyn..TIME=  243   \n* Testing bit              gp-sta..TIME=    1   gp-dyn..TIME=    1   \n* Testing bnf              gp-sta..TIME=31168   gp-dyn..TIME=31762   \n* Testing bnfisintnorm     gp-sta..TIME=  504   gp-dyn..TIME=  506   \n* Testing bnflog           \n```\nThis is after running `export SAGE_CHECK=yes` and `make pari`.",
    "created_at": "2022-11-30T00:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557906",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:91" align="right">comment:91</div>

On OS X Intel, the basic functionality is there (i.e., Sage builds and `make ptestlong` works), but the test suite for pari hangs. I see this in the log file, with no changes in more than an hour:

```
: gp-sta
* Testing addprimes        gp-sta..TIME=    8   gp-dyn..TIME=    8   
* Testing agm              gp-sta..TIME=   65   gp-dyn..TIME=   59   
* Testing algebras         gp-sta..TIME= 1490   gp-dyn..TIME= 1481   
* Testing alggroup         gp-sta..TIME=  661   gp-dyn..TIME=  651   
* Testing alghasse         gp-sta..TIME= 2701   gp-dyn..TIME= 2523   
* Testing alglattices      gp-sta..TIME= 1153   gp-dyn..TIME= 1150   
* Testing algsplit         gp-sta..TIME=  946   gp-dyn..TIME= 1139   
* Testing analyz           gp-sta..TIME=   22   gp-dyn..TIME=   20   
* Testing apply            gp-sta..TIME=    1   gp-dyn..TIME=    1   
* Testing arith            gp-sta..TIME=    0   gp-dyn..TIME=    0   
* Testing asymp            gp-sta..TIME=  129   gp-dyn..TIME=  117   
* Testing aurifeuille      gp-sta..TIME=    1   gp-dyn..TIME=    1   
* Testing bbhnf            gp-sta..TIME=  959   gp-dyn..TIME=  918   
* Testing bern             gp-sta..TIME=13627   gp-dyn..TIME=13270   
* Testing bessel           gp-sta..TIME=  177   gp-dyn..TIME=  170   
* Testing bestappr         gp-sta..TIME=    1   gp-dyn..TIME=    1   
* Testing binomial         gp-sta..TIME=  240   gp-dyn..TIME=  243   
* Testing bit              gp-sta..TIME=    1   gp-dyn..TIME=    1   
* Testing bnf              gp-sta..TIME=31168   gp-dyn..TIME=31762   
* Testing bnfisintnorm     gp-sta..TIME=  504   gp-dyn..TIME=  506   
* Testing bnflog           
```
This is after running `export SAGE_CHECK=yes` and `make pari`.



---

archive/issue_comments_557907.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nI seem to get the same thing with the previous version of `pari`. I'm trying again and I will update later.",
    "created_at": "2022-11-30T06:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557907",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:92" align="right">comment:92</div>

I seem to get the same thing with the previous version of `pari`. I'm trying again and I will update later.



---

archive/issue_comments_557908.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nperhaps upstream does not test with macOS at all, or perhaps only with old versions, and not 13.0 ?",
    "created_at": "2022-11-30T07:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557908",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:93" align="right">comment:93</div>

perhaps upstream does not test with macOS at all, or perhaps only with old versions, and not 13.0 ?



---

archive/issue_comments_557909.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nRight, I get the same with the previous version of `pari`, so this failure should not hold up this ticket.",
    "created_at": "2022-11-30T16:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557909",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:94" align="right">comment:94</div>

Right, I get the same with the previous version of `pari`, so this failure should not hold up this ticket.



---

archive/issue_comments_557910.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nOn Apple Silicon, both the old and new `pari` pass their test suites.",
    "created_at": "2022-11-30T17:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557910",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:95" align="right">comment:95</div>

On Apple Silicon, both the old and new `pari` pass their test suites.



---

archive/issue_comments_557911.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nMany of the changes in doctests look fine to me, but I can't vouch for all of them. Can other people check them? (One example is the change in sage/schemes/elliptic_curves/ell_field.py, although there are others. Looks plausible but I don't know the details.)",
    "created_at": "2022-11-30T19:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557911",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:96" align="right">comment:96</div>

Many of the changes in doctests look fine to me, but I can't vouch for all of them. Can other people check them? (One example is the change in sage/schemes/elliptic_curves/ell_field.py, although there are others. Looks plausible but I don't know the details.)



---

archive/issue_comments_557912.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nJohn C., can you have a look ?",
    "created_at": "2022-12-07T18:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557912",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:97" align="right">comment:97</div>

John C., can you have a look ?



---

archive/issue_comments_557913.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [Dima Pasechnik](#comment%3A97):\n> John C., can you have a look ?\n\nSorry, only jut noticed this -- will do today.",
    "created_at": "2022-12-09T11:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557913",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [Dima Pasechnik](#comment%3A97):
> John C., can you have a look ?

Sorry, only jut noticed this -- will do today.



---

archive/issue_comments_557914.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\ngenus2reduction: makes sense for our doctests to just have y^2 = ... since these reductions are not unique. The most important thing is for the minimal discriminant to be correct which we do check.\n\ncusps_nf: OK\n\nlfunctions/*: OK\n\nlibs/pari/tests: OK\n\nS_unit_solver: OK\n\nnumber_field/*: OK\n\npolynomial/*: OK\n\nQQbar: looks reasonable, would take ages to rigorously check everything\n\nelliptic_curves/\nell_field: OK (the two fields are isomorphic)\nell_generic: OK (0 is displayed differently)\n\nell_number_field: (1) the first simon_two_descent test in the diffs is strange as E is defined by EllipticCurve(K, '37') where K is a number field; the resulting curve is the one with label '37a1'.  Would you believe tat I had never noticed that the function parse_cremona_label() was happy both to have the curve number default to 1 (which I knew) and also the isogeny class letter code default to 'a'?  Fine, it is documented, but one day I'll change that '37' to '37a1' to be less obscure.\n(2) the different matrices are OK since the rows/cols will be permuted if the curves in the class are sorted differently; the docstring (written by me) says \"The curves in the class are sorted first by CM discriminant (then lexicographically using\na-invariants)\" which can lead to differences, either because the field generator changes or because the choice of minimal reduced model (and hence the a-invariants) is not deterministic.  One day I'll implement the LMFDB way of sorting curves in the class.\n\nThe rest of the elliptic curves stuff is fine.\n\nNote that we no longer need, and could deprecate, the simon_two_descent() method for curves over QQ, since the pari ellrank() function will always be better (being a C implementation with a lot of extra geatures of the same underlying theory).  But this is *not* the case for that methof for curves over number fields, at present.  And for a similar reason the rank() method for elliptic curves over Q (and related methods such as gens()) should definitely now have an 'algorithm=pari' option now which calls ellrank().  It's also probably true that it should be the default, for curves not in the database, as it is extremely good (=fast and good at finding generators).  But not on this ticket.\n\nI looked at mst of the files, and all the ones where I thought my expertise would be helpful.  Looks good!",
    "created_at": "2022-12-09T12:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557914",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:99" align="right">comment:99</div>

genus2reduction: makes sense for our doctests to just have y^2 = ... since these reductions are not unique. The most important thing is for the minimal discriminant to be correct which we do check.

cusps_nf: OK

lfunctions/*: OK

libs/pari/tests: OK

S_unit_solver: OK

number_field/*: OK

polynomial/*: OK

QQbar: looks reasonable, would take ages to rigorously check everything

elliptic_curves/
ell_field: OK (the two fields are isomorphic)
ell_generic: OK (0 is displayed differently)

ell_number_field: (1) the first simon_two_descent test in the diffs is strange as E is defined by EllipticCurve(K, '37') where K is a number field; the resulting curve is the one with label '37a1'.  Would you believe tat I had never noticed that the function parse_cremona_label() was happy both to have the curve number default to 1 (which I knew) and also the isogeny class letter code default to 'a'?  Fine, it is documented, but one day I'll change that '37' to '37a1' to be less obscure.
(2) the different matrices are OK since the rows/cols will be permuted if the curves in the class are sorted differently; the docstring (written by me) says "The curves in the class are sorted first by CM discriminant (then lexicographically using
a-invariants)" which can lead to differences, either because the field generator changes or because the choice of minimal reduced model (and hence the a-invariants) is not deterministic.  One day I'll implement the LMFDB way of sorting curves in the class.

The rest of the elliptic curves stuff is fine.

Note that we no longer need, and could deprecate, the simon_two_descent() method for curves over QQ, since the pari ellrank() function will always be better (being a C implementation with a lot of extra geatures of the same underlying theory).  But this is *not* the case for that methof for curves over number fields, at present.  And for a similar reason the rank() method for elliptic curves over Q (and related methods such as gens()) should definitely now have an 'algorithm=pari' option now which calls ellrank().  It's also probably true that it should be the default, for curves not in the database, as it is extremely good (=fast and good at finding generators).  But not on this ticket.

I looked at mst of the files, and all the ones where I thought my expertise would be helpful.  Looks good!



---

archive/issue_events_468051.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-09T13:00:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468051"
}
```



---

archive/issue_events_468052.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-09T13:00:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468052"
}
```



---

archive/issue_comments_557915.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nThanks John, I take your long review as OK.",
    "created_at": "2022-12-09T13:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557915",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:100" align="right">comment:100</div>

Thanks John, I take your long review as OK.



---

archive/issue_comments_557916.json:
```json
{
    "body": "Changed reviewer from **Dima Pasechnik** to **Dima Pasechnik, John Cremona**",
    "created_at": "2022-12-09T13:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557916",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Dima Pasechnik** to **Dima Pasechnik, John Cremona**



---

archive/issue_comments_557917.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [Dima Pasechnik](#comment%3A100):\n> Thanks John, I take your long review as OK.\n\nyes!",
    "created_at": "2022-12-09T14:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557917",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [Dima Pasechnik](#comment%3A100):
> Thanks John, I take your long review as OK.

yes!



---

archive/issue_events_468053.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-12-18T11:31:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468053"
}
```



---

archive/issue_events_468054.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-12-18T11:31:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468054"
}
```



---

archive/issue_comments_557918.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nThere are a bunch of numerical noise issues on 32-bit:\n\n```\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 242, in sage.calculus.calculus\nFailed example:\n    float(z)\nExpected:\n    4.646783762432936\nGot:\n    4.646783762432935\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 772, in sage.calculus.calculus.?\nFailed example:\n    float(f)\nExpected:\n    -480.0\nGot:\n    -2336.0\n**********************************************************************\nFile \"src/sage/calculus/calculus.py\", line 784, in sage.calculus.calculus.?\nFailed example:\n    f.nintegrate(x,0,1)\nExpected:\n    (-480.0000000000001, 5.32907051820075...e-12, 21, 0)\nGot:\n    (-831.9999999999999, 9.237055564881304e-12, 21, 0)\n**********************************************************************\n2 items had failures:\n   1 of 118 in sage.calculus.calculus\n   2 of  15 in sage.calculus.calculus.?\n    [457 tests, 3 failures, 19.44 s]\n**********************************************************************\nFile \"src/sage/calculus/wester.py\", line 283, in sage.calculus.wester\nFailed example:\n    float(a)\nExpected:\n    1.1368683772...e-13\nGot:\n    0.0\n**********************************************************************\n1 item had failures:\n   1 of 202 in sage.calculus.wester\n    [201 tests, 1 failure, 2.45 s]\n**********************************************************************\nFile \"src/sage/categories/finite_coxeter_groups.py\", line 705, in sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron\nFailed example:\n    W.permutahedron()\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron[1]>\", line 1, in <module>\n        W.permutahedron()\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/categories/finite_coxeter_groups.py\", line 755, in permutahedron\n        return Polyhedron(vertices=vertices, base_ring=base_ring)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/constructor.py\", line 759, in Polyhedron\n        return parent(Vrep, Hrep, convert=convert, verbose=verbose, mutable=mutable)\n      File \"sage/structure/parent.pyx\", line 898, in sage.structure.parent.Parent.__call__\n        return mor._call_with_args(x, args, kwds)\n      File \"sage/structure/coerce_maps.pyx\", line 180, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 175, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args\n        return C._element_constructor(x, *args, **kwds)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/parent.py\", line 684, in _element_constructor_\n        return self.element_class(self, Vrep, Hrep, **kwds)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd_rdf.py\", line 98, in __init__\n        Polyhedron_cdd.__init__(self, parent, Vrep, Hrep, **kwds)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/base0.py\", line 174, in __init__\n        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd.py\", line 65, in _init_from_Vrepresentation\n        s = self._run_cdd(s, '--repall', verbose=verbose)\n      File \"/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd.py\", line 172, in _run_cdd\n        raise ValueError(ans.strip())\n    ValueError: *Error: Numerical inconsistency is found.  Use the GMP exact arithmetic.\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron\n    [151 tests, 1 failure, 4.74 s]\n**********************************************************************\nFile \"src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx\", line 219, in sage.dynamics.complex_dynamics.mandel_julia_helper.?\nFailed example:\n    fast_external_ray(0,S=1,D=1)\nExpected:\n    [(100.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,\n      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),\n     (9.51254777713729174697578576623132297117784691109499464854806785133621315075854778426714908,\n      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)]\nGot:\n    [(100.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,\n      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),\n     (9.51254777713729032775694689466896914675974929808733306327787458869355202130788654602053071,\n      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)]\n**********************************************************************\nFile \"src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx\", line 229, in sage.dynamics.complex_dynamics.mandel_julia_helper.?\nFailed example:\n    fast_external_ray(1/3,S=1,D=1)\nExpected:\n    [(-49.9999999999999786837179271969944238662719726562500000000000000000000000000000000000000000,\n      86.6025403784438765342201804742217063903808593750000000000000000000000000000000000000000000),\n     (-5.50628047023173006234970878097113901879832542655926629309001652388544528575532346900138516,\n      8.64947510053972513843999918917106032664030380426885745306040284140385975750462108180377187)]\nGot:\n    [(-49.9999999999999786837179271969944238662719726562500000000000000000000000000000000000000000,\n      86.6025403784438765342201804742217063903808593750000000000000000000000000000000000000000000),\n     (-5.50628047023172980317558651097220813419960642675275525034690583138202683104446159128356526,\n      8.64947510053972416699388454766038069022656677613412868926274778156654918224636699020909555)]\n**********************************************************************\nFile \"src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx\", line 238, in sage.dynamics.complex_dynamics.mandel_julia_helper.?\nFailed example:\n    fast_external_ray(0.75234,S=1,D=1)\nExpected:\n    [(1.47021239172637052661229972727596759796142578125000000000000000000000000000000000000000000,\n      -99.9891917935294287644865107722580432891845703125000000000000000000000000000000000000000000),\n     (-0.352790406744857508500937144524776555433184352559852962308757189778284058275081335121601384,\n      -9.98646630765023514178761177926164047797465369576787921409326037870837930920646860774032363)]\nGot:\n    [(1.47021239172637052661229972727596759796142578125000000000000000000000000000000000000000000,\n      -99.9891917935294287644865107722580432891845703125000000000000000000000000000000000000000000),\n     (-0.352790406744857531982226711825539675074733886273844201352581335945053660908669195067107961,\n      -9.98646630765023371851343140849138176796542428333725755653082848714206880231557255794864137)]\n**********************************************************************\n1 item had failures:\n   3 of  42 in sage.dynamics.complex_dynamics.mandel_julia_helper.?\n    [43 tests, 3 failures, 5.81 s]\n**********************************************************************\nFile \"src/sage/functions/log.py\", line 45, in sage.functions.log.Function_exp\nFailed example:\n    exp(float(2.5))\nExpected:\n    12.182493960703473\nGot:\n    12.182493960703475\n**********************************************************************\nFile \"src/sage/functions/log.py\", line 47, in sage.functions.log.Function_exp\nFailed example:\n    exp(RDF('2.5'))\nExpected:\n    12.182493960703473\nGot:\n    12.182493960703475\n**********************************************************************\n1 item had failures:\n   2 of  41 in sage.functions.log.Function_exp\n    [281 tests, 2 failures, 4.10 s]\n**********************************************************************\nFile \"src/sage/functions/trig.py\", line 608, in sage.functions.trig.Function_arccos.__init__\nFailed example:\n    acos(complex(1,1))\nExpected:\n    (0.9045568943023814-1.0612750619050357j)\nGot:\n    (0.9045568943023815-1.0612750619050357j)\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.functions.trig.Function_arccos.__init__\n    [261 tests, 1 failure, 2.37 s]\n**********************************************************************\nFile \"src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py\", line 2384, in sage.geometry.hyperbolic_space.hyperbolic_geodesic.HyperbolicGeodesicHM._plot_vertices\nFailed example:\n    g._plot_vertices(5)\nExpected:\n    [(4.0, -4.0, 5.744562...),\n     (1.363213..., -1.637073..., 2.353372...),\n     (0.138568..., -0.969980..., 1.400022...),\n     (-0.942533..., -1.307681..., 1.896945...),\n     (-3.0, -3.0, 4.358898...)]\nGot:\n    [(4.0, -4.0, 5.744562646538029),\n     (1.3632131724692087, -1.6370738298435317, 2.3533722353151303),\n     (0.1385685838744788, -0.9699800871213657, 1.4000223647674161),\n     (-0.942533854284406, -1.3076813974501604, 1.8969450977056255),\n     (-3.0, -3.000000000000014, 4.35889894354068)]\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.geometry.hyperbolic_space.hyperbolic_geodesic.HyperbolicGeodesicHM._plot_vertices\n    [447 tests, 1 failure, 8.67 s]\n**********************************************************************\nFile \"src/sage/interacts/test_jupyter.rst\", line 120, in sage.interacts.test_jupyter\nFailed example:\n    test(interacts.calculus.newton_method)\nExpected:\n    ...Interactive function <function newton_method at ...> with 7 widgets\n      title: HTMLText(value='<h2>Newton method</h2>')\n      f: EvalText(value='x^2 - 2', description='f', layout=Layout(max_width='81em'))\n      c: IntSlider(value=6, description='Start ($x$)', max=10, min=-10)\n      d: IntSlider(value=3, description='$10^{-d}$ precision', max=16, min=1)\n      maxn: IntSlider(value=10, description='max iterations', max=15)\n      interval: IntRangeSlider(value=(0, 6), description='Interval', max=10, min=-10)\n      list_steps: Checkbox(value=False, description='List steps')\n    \\(\\text{Precision } 2h = 0.001\\)\n    \\({c = }1.4142141576301823\\)\n    \\({f(c) = }1.6836416460996873 \\times 10^{-06}\\)\n    \\(6 \\text{ iterations}\\)\nGot:\n    <CSI-2K>\n<CSI-2K>\n\\(\\text{Precision } 2h = 0.0010000000000000002\\)\n    \\({c = }1.4142141576301823\\)\n    \\({f(c) = }1.6836416460996873 \\times 10^{-06}\\)\n    \\(6 \\text{ iterations}\\)\n    Interactive function <function newton_method at 0xa6a181d8> with 7 widgets\n      title: HTMLText(value='<h2>Newton method</h2>')\n      f: EvalText(value='x^2 - 2', description='f', layout=Layout(max_width='81em'))\n      c: IntSlider(value=6, description='Start ($x$)', max=10, min=-10)\n      d: IntSlider(value=3, description='$10^{-d}$ precision', max=16, min=1)\n      maxn: IntSlider(value=10, description='max iterations', max=15)\n      interval: IntRangeSlider(value=(0, 6), description='Interval', max=10, min=-10)\n      list_steps: Checkbox(value=False, description='List steps')\n    \\(\\text{Precision } 2h = 0.0010000000000000002\\)\n    \\({c = }1.4142141576301823\\)\n    \\({f(c) = }1.6836416460996873 \\times 10^{-06}\\)\n    \\(6 \\text{ iterations}\\)\n**********************************************************************\n1 item had failures:\n   1 of  30 in sage.interacts.test_jupyter\n    [29 tests, 1 failure, 70.30 s]\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 1624, in sage.matrix.matrix_double_dense.Matrix_double_dense.right_eigenvectors\nFailed example:\n    spectrum[3]  # tol 1e-13\nExpected:\n    (-1.0, [(1.0, -0.5, 2.0, 0.5)], 1)\nGot:\n    (-1.0000000000000828,\n     [(1.0, -0.4999999999999238, 1.9999999999997218, 0.4999999999999161)],\n     1)\nTolerance exceeded in 3 of 6:\n    -0.5 vs -0.4999999999999238, tolerance 2e-13 > 1e-13\n    2.0 vs 1.9999999999997218, tolerance 2e-13 > 1e-13\n    0.5 vs 0.4999999999999161, tolerance 2e-13 > 1e-13\n**********************************************************************\n1 item had failures:\n   1 of  24 in sage.matrix.matrix_double_dense.Matrix_double_dense.right_eigenvectors\n    [611 tests, 1 failure, 0.92 s]\n**********************************************************************\nFile \"src/sage/matrix/matrix_symbolic_dense.pyx\", line 441, in sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp\nFailed example:\n    exp(matrix(SR, [[1.2, 5.6], [3,4]])).change_ring(RDF)  # rel tol 1e-15\nExpected:\n    [ 346.5574872980695  661.7345909344504]\n    [354.50067371488416  677.4247827652946]\nGot:\n    [346.55748729806896  661.7345909344492]\n    [354.50067371488353  677.4247827652937]\nTolerance exceeded in 4 of 4:\n    346.5574872980695 vs 346.55748729806896, tolerance 2e-15 > 1e-15\n    661.7345909344504 vs 661.7345909344492, tolerance 2e-15 > 1e-15\n    354.50067371488416 vs 354.50067371488353, tolerance 2e-15 > 1e-15\n    677.4247827652946 vs 677.4247827652937, tolerance 2e-15 > 1e-15\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp\n    [224 tests, 1 failure, 5.48 s]\n**********************************************************************\nFile \"src/sage/modules/free_module_element.pyx\", line 1687, in sage.modules.free_module_element.FreeModuleElement.norm\nFailed example:\n    v.norm(5)\nExpected:\n    3.077384885394063\nGot:\n    3.0773848853940633\n**********************************************************************\n1 item had failures:\n   1 of  24 in sage.modules.free_module_element.FreeModuleElement.norm\n    [1081 tests, 1 failure, 5.08 s]\n**********************************************************************\nFile \"src/sage/modules/vector_real_double_dense.pyx\", line 7, in sage.modules.vector_real_double_dense\nFailed example:\n    v\nExpected:\n    (1.0, 3.141592653589793, 1.414213562373095)\nGot:\n    (1.0, 3.141592653589793, 1.4142135623730951)\n**********************************************************************\nFile \"src/sage/modules/vector_real_double_dense.pyx\", line 14, in sage.modules.vector_real_double_dense\nFailed example:\n    v\nExpected:\n    (5.0, 3.141592653589793, 1.414213562373095)\nGot:\n    (5.0, 3.141592653589793, 1.4142135623730951)\n**********************************************************************\n1 item had failures:\n   2 of   8 in sage.modules.vector_real_double_dense\n    [19 tests, 2 failures, 10.89 s]\n**********************************************************************\nFile \"src/sage/rings/complex_double.pyx\", line 1136, in sage.rings.complex_double.ComplexDoubleElement._latex_\nFailed example:\n    z._latex_()\nExpected:\n    '-6.443164690985956 \\\\times 10^{34} - 6.113241307762409 \\\\times 10^{34}i'\nGot:\n    '-6.443164690985963 \\\\times 10^{34} - 6.113241307762415 \\\\times 10^{34}i'\n**********************************************************************\nFile \"src/sage/rings/complex_double.pyx\", line 1685, in sage.rings.complex_double.ComplexDoubleElement._pow_\nFailed example:\n    CDF(-0.26319743704743886) ^ -2\nExpected:\n    14.435661446561994\nGot:\n    14.435661446561992\n**********************************************************************\nFile \"src/sage/rings/complex_double.pyx\", line 1936, in sage.rings.complex_double.ComplexDoubleElement.arccos\nFailed example:\n    CDF(1,1).arccos()\nExpected:\n    0.9045568943023814 - 1.0612750619050357*I\nGot:\n    0.9045568943023815 - 1.0612750619050357*I\n**********************************************************************\nFile \"src/sage/rings/complex_double.pyx\", line 2115, in sage.rings.complex_double.ComplexDoubleElement.arccosh\nFailed example:\n    CDF(1,1).arccosh()\nExpected:\n    1.0612750619050357 + 0.9045568943023814*I\nGot:\n    1.0612750619050357 + 0.9045568943023815*I\n**********************************************************************\n4 items had failures:\n   1 of   4 in sage.rings.complex_double.ComplexDoubleElement._latex_\n   1 of  19 in sage.rings.complex_double.ComplexDoubleElement._pow_\n   1 of   2 in sage.rings.complex_double.ComplexDoubleElement.arccos\n   1 of   2 in sage.rings.complex_double.ComplexDoubleElement.arccosh\n    [341 tests, 4 failures, 0.27 s]\n**********************************************************************\nFile \"src/sage/rings/complex_mpc.pyx\", line 1524, in sage.rings.complex_mpc.MPComplexNumber.__abs__\nFailed example:\n    float(sqrt(2^2 + 1^1))\nExpected:\n    2.23606797749979\nGot:\n    2.2360679774997894\n**********************************************************************\n1 item had failures:\n   1 of  10 in sage.rings.complex_mpc.MPComplexNumber.__abs__\n    [410 tests, 1 failure, 0.21 s]\n**********************************************************************\nFile \"src/sage/rings/complex_mpfr.pyx\", line 1885, in sage.rings.complex_mpfr.ComplexNumber.__abs__\nFailed example:\n    float(sqrt(2^2 + 1^1))\nExpected:\n    2.23606797749979\nGot:\n    2.2360679774997894\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.rings.complex_mpfr.ComplexNumber.__abs__\n    [539 tests, 1 failure, 1.78 s]\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_element.pyx\", line 1640, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm\nFailed example:\n    t = (-a).is_norm(L, element=True); t\nExpected:\n    (True, -b^3 - 1)\nGot:\n    (True, b^3 - 1)\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_element.pyx\", line 1755, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\nFailed example:\n    t = (-a)._rnfisnorm(L); t\nExpected:\n    (-b^3 - 1, 1)\nGot:\n    (b^3 - 1, 1)\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_element.pyx\", line 1759, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\nFailed example:\n    t = K(3)._rnfisnorm(L); t\nExpected:\n    (b^3 + a*b^2 + a^2*b - 1, 3*a^2 - 3*a + 6)\nGot:\n    (-b^3 + a*b^2 - a^2*b - 1, 3*a^2 - 3*a + 6)\n**********************************************************************\n2 items had failures:\n   2 of  27 in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\n   1 of  28 in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm\n    [1168 tests, 3 failures, 14.02 s]\ndoctest:warning\n  File \"/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py\", line 973, in _bootstrap\n    self._bootstrap_inner()\n  File \"/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py\", line 1002, in _bootstrap_inner\n    self._set_tstate_lock()\n  File \"/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py\", line 991, in _set_tstate_lock\n    self._tstate_lock = _set_sentinel()\n  File \"/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/warnings.py\", line 109, in _showwarnmsg\n    sw(msg.message, msg.category, msg.filename, msg.lineno,\n:\nRuntimeWarning: cypari2 leaked 4032445012 bytes on the PARI stack\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 154, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int\nFailed example:\n    base._pow_int(2^57)\nExpected:\n    78962960182680.42\nGot:\n    78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 156, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int\nFailed example:\n    base._pow_int(2^57 + 1)\nExpected:\n    78962960182680.42\nGot:\n    78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 170, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int\nFailed example:\n    base._pow_int(2^57)\nExpected:\n    78962960182680.42\nGot:\n    78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 172, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int\nFailed example:\n    base._pow_int(2^57 + 1)\nExpected:\n    -78962960182680.42\nGot:\n    -78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 195, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long\nFailed example:\n    base ^ (2^57)\nExpected:\n    78962960182680.42\nGot:\n    78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 197, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long\nFailed example:\n    base ^ RDF(2^57)\nExpected:\n    78962960182680.42\nGot:\n    78962960182680.27\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 384, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp\nFailed example:\n    a = r.exp(); a\nExpected:\n    106588847274864.47\nGot:\n    106588847274864.22\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 392, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp\nFailed example:\n    r.exp()\nExpected:\n    9.381844588498685e-15\nGot:\n    9.381844588498707e-15\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 418, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2\nFailed example:\n    r.exp2()\nExpected:\n    4294967295.9999967\nGot:\n    4294967296.0\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 424, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2\nFailed example:\n    r.exp2()\nExpected:\n    1.8911724825302065e-10\nGot:\n    1.8911724825302072e-10\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 445, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10\nFailed example:\n    r.exp10()\nExpected:\n    1.0000000000000069e+32\nGot:\n    1.0000000000000062e+32\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 451, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10\nFailed example:\n    r.exp10()\nExpected:\n    5.011872336272702e-33\nGot:\n    5.011872336272695e-33\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 651, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.acosh\nFailed example:\n    i = q.cosh(); i\nExpected:\n    2.5091784786580567\nGot:\n    2.509178478658056\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 665, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arcsinh\nFailed example:\n    i = q.sinh(); i\nExpected:\n    2.3012989023072947\nGot:\n    2.3012989023072943\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 679, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh\nFailed example:\n    i = q.tanh(); i\nExpected:\n    0.9171523356672744\nGot:\n    0.9171523356672743\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 681, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh\nFailed example:\n    i.arctanh() - q  # rel tol 1\nExpected:\n    4.440892098500626e-16\nGot:\n    -4.440892098500626e-16\nTolerance exceeded:\n    4.440892098500626e-16 vs -4.440892098500626e-16, tolerance 3e0 > 1e0\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 692, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech\nFailed example:\n    RDF(pi).sech()\nExpected:\n    0.08626673833405443\nGot:\n    0.08626673833405446\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 694, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech\nFailed example:\n    CDF(pi).sech()\nExpected:\n    0.08626673833405443\nGot:\n    0.08626673833405446\n**********************************************************************\nFile \"src/sage/rings/real_double_element_gsl.pyx\", line 705, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.csch\nFailed example:\n    RDF(pi).csch()\nExpected:\n    0.08658953753004694\nGot:\n    0.08658953753004697\n**********************************************************************\n10 items had failures:\n   4 of  23 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int\n   2 of   8 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long\n   1 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.acosh\n   1 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arcsinh\n   2 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh\n   1 of   3 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.csch\n   2 of   9 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp\n   2 of   7 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10\n   2 of   7 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2\n   2 of   3 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech\n    [145 tests, 19 failures, 0.06 s]\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 596, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale\nFailed example:\n    m._forward_scale(stats.IntList([0,1]*10))\nExpected:\n    -14.378663512219454\nGot:\n    -14.378663512219456\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 601, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale\nFailed example:\n    m.log_likelihood(stats.IntList([0,1]*10))\nExpected:\n    -14.378663512219454\nGot:\n    -14.378663512219456\n**********************************************************************\n1 item had failures:\n   2 of   8 in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale\n    [121 tests, 2 failures, 0.67 s]\n**********************************************************************\nFile \"src/sage/structure/element.pyx\", line 2016, in sage.structure.element.Element.__pow__\nFailed example:\n    complex(1,2)**(1/2)\nExpected:\n    (1.272019649514069+0.786151377757423...j)\nGot:\n    (1.2720196495140692+0.7861513777574234j)\n**********************************************************************\n1 item had failures:\n   1 of  24 in sage.structure.element.Element.__pow__\n    [756 tests, 1 failure, 12.71 s]\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 1659, in sage.symbolic.expression.Expression._convert\nFailed example:\n    f._convert({'parent':RDF})\nExpected:\n    -1.40006081533995\nGot:\n    -1.4000608153399503\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 7581, in sage.symbolic.expression.Expression.polynomial\nFailed example:\n    f.polynomial(CDF)   # abs tol 5e-16\nExpected:\n    54.598150033144236*x^4 - 20.085536923187668*I*x^3 - 7.38905609893065*x^2 + 2.718281828459045*I*x + 1.0\nGot:\n    54.598150033144236*x^4 - 20.08553692318767*I*x^3 - 7.38905609893065*x^2 + 2.718281828459045*I*x + 1.0\nTolerance exceeded in 1 of 8:\n    - 20.085536923187668 vs - 20.08553692318767, tolerance 3e-15 > 5e-16\n**********************************************************************\n2 items had failures:\n   1 of  18 in sage.symbolic.expression.Expression._convert\n   1 of  31 in sage.symbolic.expression.Expression.polynomial\n    [3077 tests, 2 failures, 38.85 s]\n**********************************************************************\nFile \"src/sage_setup/autogen/interpreters/specs/cdf.py\", line 57, in sage_setup.autogen.interpreters.specs.cdf.CDFInterpreter.__init__\nFailed example:\n    f(CDF(1+2j))  # rel tol 4e-16\nExpected:\n    -10391778.999999996 + 3349659.499999962*I\nGot:\n    -10391779.000000013 + 3349659.4999999646*I\nTolerance exceeded in 2 of 2:\n    -10391778.999999996 vs -10391779.000000013, tolerance 2e-15 > 4e-16\n    + 3349659.499999962 vs + 3349659.4999999646, tolerance 8e-16 > 4e-16\n**********************************************************************\n1 item had failures:\n   1 of  20 in sage_setup.autogen.interpreters.specs.cdf.CDFInterpreter.__init__\n    [19 tests, 1 failure, 0.08 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/calculus/calculus.py  # 3 doctests failed\nsage -t --long --random-seed=0 src/sage/calculus/wester.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/categories/finite_coxeter_groups.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx  # 3 doctests failed\nsage -t --long --random-seed=0 src/sage/functions/log.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/functions/trig.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/interacts/test_jupyter.rst  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/matrix/matrix_double_dense.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/matrix/matrix_symbolic_dense.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/modules/free_module_element.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/modules/vector_real_double_dense.pyx  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/rings/complex_double.pyx  # 4 doctests failed\nsage -t --long --random-seed=0 src/sage/rings/complex_mpc.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/rings/complex_mpfr.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/rings/number_field/number_field_element.pyx  # 3 doctests failed\nsage -t --long --random-seed=0 src/sage/rings/real_double_element_gsl.pyx  # 19 doctests failed\nsage -t --long --random-seed=0 src/sage/stats/hmm/hmm.pyx  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/structure/element.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/symbolic/expression.pyx  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage_setup/autogen/interpreters/specs/cdf.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 7092.1 seconds\n    cpu time: 12138.2 seconds\n    cumulative wall time: 12442.3 seconds\n```\nFull log: http://build.sagemath.org/#/builders/47/builds/14/steps/14/logs/stdio",
    "created_at": "2022-12-18T11:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557918",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:102" align="right">comment:102</div>

There are a bunch of numerical noise issues on 32-bit:

```
**********************************************************************
File "src/sage/calculus/calculus.py", line 242, in sage.calculus.calculus
Failed example:
    float(z)
Expected:
    4.646783762432936
Got:
    4.646783762432935
**********************************************************************
File "src/sage/calculus/calculus.py", line 772, in sage.calculus.calculus.?
Failed example:
    float(f)
Expected:
    -480.0
Got:
    -2336.0
**********************************************************************
File "src/sage/calculus/calculus.py", line 784, in sage.calculus.calculus.?
Failed example:
    f.nintegrate(x,0,1)
Expected:
    (-480.0000000000001, 5.32907051820075...e-12, 21, 0)
Got:
    (-831.9999999999999, 9.237055564881304e-12, 21, 0)
**********************************************************************
2 items had failures:
   1 of 118 in sage.calculus.calculus
   2 of  15 in sage.calculus.calculus.?
    [457 tests, 3 failures, 19.44 s]
**********************************************************************
File "src/sage/calculus/wester.py", line 283, in sage.calculus.wester
Failed example:
    float(a)
Expected:
    1.1368683772...e-13
Got:
    0.0
**********************************************************************
1 item had failures:
   1 of 202 in sage.calculus.wester
    [201 tests, 1 failure, 2.45 s]
**********************************************************************
File "src/sage/categories/finite_coxeter_groups.py", line 705, in sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron
Failed example:
    W.permutahedron()
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron[1]>", line 1, in <module>
        W.permutahedron()
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/categories/finite_coxeter_groups.py", line 755, in permutahedron
        return Polyhedron(vertices=vertices, base_ring=base_ring)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/constructor.py", line 759, in Polyhedron
        return parent(Vrep, Hrep, convert=convert, verbose=verbose, mutable=mutable)
      File "sage/structure/parent.pyx", line 898, in sage.structure.parent.Parent.__call__
        return mor._call_with_args(x, args, kwds)
      File "sage/structure/coerce_maps.pyx", line 180, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args
        raise
      File "sage/structure/coerce_maps.pyx", line 175, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args
        return C._element_constructor(x, *args, **kwds)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/parent.py", line 684, in _element_constructor_
        return self.element_class(self, Vrep, Hrep, **kwds)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd_rdf.py", line 98, in __init__
        Polyhedron_cdd.__init__(self, parent, Vrep, Hrep, **kwds)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/base0.py", line 174, in __init__
        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd.py", line 65, in _init_from_Vrepresentation
        s = self._run_cdd(s, '--repall', verbose=verbose)
      File "/var/lib/buildbot/worker/sage_git/build/src/sage/geometry/polyhedron/backend_cdd.py", line 172, in _run_cdd
        raise ValueError(ans.strip())
    ValueError: *Error: Numerical inconsistency is found.  Use the GMP exact arithmetic.
**********************************************************************
1 item had failures:
   1 of   6 in sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron
    [151 tests, 1 failure, 4.74 s]
**********************************************************************
File "src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx", line 219, in sage.dynamics.complex_dynamics.mandel_julia_helper.?
Failed example:
    fast_external_ray(0,S=1,D=1)
Expected:
    [(100.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),
     (9.51254777713729174697578576623132297117784691109499464854806785133621315075854778426714908,
      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)]
Got:
    [(100.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,
      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),
     (9.51254777713729032775694689466896914675974929808733306327787458869355202130788654602053071,
      0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)]
**********************************************************************
File "src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx", line 229, in sage.dynamics.complex_dynamics.mandel_julia_helper.?
Failed example:
    fast_external_ray(1/3,S=1,D=1)
Expected:
    [(-49.9999999999999786837179271969944238662719726562500000000000000000000000000000000000000000,
      86.6025403784438765342201804742217063903808593750000000000000000000000000000000000000000000),
     (-5.50628047023173006234970878097113901879832542655926629309001652388544528575532346900138516,
      8.64947510053972513843999918917106032664030380426885745306040284140385975750462108180377187)]
Got:
    [(-49.9999999999999786837179271969944238662719726562500000000000000000000000000000000000000000,
      86.6025403784438765342201804742217063903808593750000000000000000000000000000000000000000000),
     (-5.50628047023172980317558651097220813419960642675275525034690583138202683104446159128356526,
      8.64947510053972416699388454766038069022656677613412868926274778156654918224636699020909555)]
**********************************************************************
File "src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx", line 238, in sage.dynamics.complex_dynamics.mandel_julia_helper.?
Failed example:
    fast_external_ray(0.75234,S=1,D=1)
Expected:
    [(1.47021239172637052661229972727596759796142578125000000000000000000000000000000000000000000,
      -99.9891917935294287644865107722580432891845703125000000000000000000000000000000000000000000),
     (-0.352790406744857508500937144524776555433184352559852962308757189778284058275081335121601384,
      -9.98646630765023514178761177926164047797465369576787921409326037870837930920646860774032363)]
Got:
    [(1.47021239172637052661229972727596759796142578125000000000000000000000000000000000000000000,
      -99.9891917935294287644865107722580432891845703125000000000000000000000000000000000000000000),
     (-0.352790406744857531982226711825539675074733886273844201352581335945053660908669195067107961,
      -9.98646630765023371851343140849138176796542428333725755653082848714206880231557255794864137)]
**********************************************************************
1 item had failures:
   3 of  42 in sage.dynamics.complex_dynamics.mandel_julia_helper.?
    [43 tests, 3 failures, 5.81 s]
**********************************************************************
File "src/sage/functions/log.py", line 45, in sage.functions.log.Function_exp
Failed example:
    exp(float(2.5))
Expected:
    12.182493960703473
Got:
    12.182493960703475
**********************************************************************
File "src/sage/functions/log.py", line 47, in sage.functions.log.Function_exp
Failed example:
    exp(RDF('2.5'))
Expected:
    12.182493960703473
Got:
    12.182493960703475
**********************************************************************
1 item had failures:
   2 of  41 in sage.functions.log.Function_exp
    [281 tests, 2 failures, 4.10 s]
**********************************************************************
File "src/sage/functions/trig.py", line 608, in sage.functions.trig.Function_arccos.__init__
Failed example:
    acos(complex(1,1))
Expected:
    (0.9045568943023814-1.0612750619050357j)
Got:
    (0.9045568943023815-1.0612750619050357j)
**********************************************************************
1 item had failures:
   1 of  18 in sage.functions.trig.Function_arccos.__init__
    [261 tests, 1 failure, 2.37 s]
**********************************************************************
File "src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py", line 2384, in sage.geometry.hyperbolic_space.hyperbolic_geodesic.HyperbolicGeodesicHM._plot_vertices
Failed example:
    g._plot_vertices(5)
Expected:
    [(4.0, -4.0, 5.744562...),
     (1.363213..., -1.637073..., 2.353372...),
     (0.138568..., -0.969980..., 1.400022...),
     (-0.942533..., -1.307681..., 1.896945...),
     (-3.0, -3.0, 4.358898...)]
Got:
    [(4.0, -4.0, 5.744562646538029),
     (1.3632131724692087, -1.6370738298435317, 2.3533722353151303),
     (0.1385685838744788, -0.9699800871213657, 1.4000223647674161),
     (-0.942533854284406, -1.3076813974501604, 1.8969450977056255),
     (-3.0, -3.000000000000014, 4.35889894354068)]
**********************************************************************
1 item had failures:
   1 of   6 in sage.geometry.hyperbolic_space.hyperbolic_geodesic.HyperbolicGeodesicHM._plot_vertices
    [447 tests, 1 failure, 8.67 s]
**********************************************************************
File "src/sage/interacts/test_jupyter.rst", line 120, in sage.interacts.test_jupyter
Failed example:
    test(interacts.calculus.newton_method)
Expected:
    ...Interactive function <function newton_method at ...> with 7 widgets
      title: HTMLText(value='<h2>Newton method</h2>')
      f: EvalText(value='x^2 - 2', description='f', layout=Layout(max_width='81em'))
      c: IntSlider(value=6, description='Start ($x$)', max=10, min=-10)
      d: IntSlider(value=3, description='$10^{-d}$ precision', max=16, min=1)
      maxn: IntSlider(value=10, description='max iterations', max=15)
      interval: IntRangeSlider(value=(0, 6), description='Interval', max=10, min=-10)
      list_steps: Checkbox(value=False, description='List steps')
    \(\text{Precision } 2h = 0.001\)
    \({c = }1.4142141576301823\)
    \({f(c) = }1.6836416460996873 \times 10^{-06}\)
    \(6 \text{ iterations}\)
Got:
    <CSI-2K>
<CSI-2K>
\(\text{Precision } 2h = 0.0010000000000000002\)
    \({c = }1.4142141576301823\)
    \({f(c) = }1.6836416460996873 \times 10^{-06}\)
    \(6 \text{ iterations}\)
    Interactive function <function newton_method at 0xa6a181d8> with 7 widgets
      title: HTMLText(value='<h2>Newton method</h2>')
      f: EvalText(value='x^2 - 2', description='f', layout=Layout(max_width='81em'))
      c: IntSlider(value=6, description='Start ($x$)', max=10, min=-10)
      d: IntSlider(value=3, description='$10^{-d}$ precision', max=16, min=1)
      maxn: IntSlider(value=10, description='max iterations', max=15)
      interval: IntRangeSlider(value=(0, 6), description='Interval', max=10, min=-10)
      list_steps: Checkbox(value=False, description='List steps')
    \(\text{Precision } 2h = 0.0010000000000000002\)
    \({c = }1.4142141576301823\)
    \({f(c) = }1.6836416460996873 \times 10^{-06}\)
    \(6 \text{ iterations}\)
**********************************************************************
1 item had failures:
   1 of  30 in sage.interacts.test_jupyter
    [29 tests, 1 failure, 70.30 s]
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 1624, in sage.matrix.matrix_double_dense.Matrix_double_dense.right_eigenvectors
Failed example:
    spectrum[3]  # tol 1e-13
Expected:
    (-1.0, [(1.0, -0.5, 2.0, 0.5)], 1)
Got:
    (-1.0000000000000828,
     [(1.0, -0.4999999999999238, 1.9999999999997218, 0.4999999999999161)],
     1)
Tolerance exceeded in 3 of 6:
    -0.5 vs -0.4999999999999238, tolerance 2e-13 > 1e-13
    2.0 vs 1.9999999999997218, tolerance 2e-13 > 1e-13
    0.5 vs 0.4999999999999161, tolerance 2e-13 > 1e-13
**********************************************************************
1 item had failures:
   1 of  24 in sage.matrix.matrix_double_dense.Matrix_double_dense.right_eigenvectors
    [611 tests, 1 failure, 0.92 s]
**********************************************************************
File "src/sage/matrix/matrix_symbolic_dense.pyx", line 441, in sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp
Failed example:
    exp(matrix(SR, [[1.2, 5.6], [3,4]])).change_ring(RDF)  # rel tol 1e-15
Expected:
    [ 346.5574872980695  661.7345909344504]
    [354.50067371488416  677.4247827652946]
Got:
    [346.55748729806896  661.7345909344492]
    [354.50067371488353  677.4247827652937]
Tolerance exceeded in 4 of 4:
    346.5574872980695 vs 346.55748729806896, tolerance 2e-15 > 1e-15
    661.7345909344504 vs 661.7345909344492, tolerance 2e-15 > 1e-15
    354.50067371488416 vs 354.50067371488353, tolerance 2e-15 > 1e-15
    677.4247827652946 vs 677.4247827652937, tolerance 2e-15 > 1e-15
**********************************************************************
1 item had failures:
   1 of  17 in sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp
    [224 tests, 1 failure, 5.48 s]
**********************************************************************
File "src/sage/modules/free_module_element.pyx", line 1687, in sage.modules.free_module_element.FreeModuleElement.norm
Failed example:
    v.norm(5)
Expected:
    3.077384885394063
Got:
    3.0773848853940633
**********************************************************************
1 item had failures:
   1 of  24 in sage.modules.free_module_element.FreeModuleElement.norm
    [1081 tests, 1 failure, 5.08 s]
**********************************************************************
File "src/sage/modules/vector_real_double_dense.pyx", line 7, in sage.modules.vector_real_double_dense
Failed example:
    v
Expected:
    (1.0, 3.141592653589793, 1.414213562373095)
Got:
    (1.0, 3.141592653589793, 1.4142135623730951)
**********************************************************************
File "src/sage/modules/vector_real_double_dense.pyx", line 14, in sage.modules.vector_real_double_dense
Failed example:
    v
Expected:
    (5.0, 3.141592653589793, 1.414213562373095)
Got:
    (5.0, 3.141592653589793, 1.4142135623730951)
**********************************************************************
1 item had failures:
   2 of   8 in sage.modules.vector_real_double_dense
    [19 tests, 2 failures, 10.89 s]
**********************************************************************
File "src/sage/rings/complex_double.pyx", line 1136, in sage.rings.complex_double.ComplexDoubleElement._latex_
Failed example:
    z._latex_()
Expected:
    '-6.443164690985956 \\times 10^{34} - 6.113241307762409 \\times 10^{34}i'
Got:
    '-6.443164690985963 \\times 10^{34} - 6.113241307762415 \\times 10^{34}i'
**********************************************************************
File "src/sage/rings/complex_double.pyx", line 1685, in sage.rings.complex_double.ComplexDoubleElement._pow_
Failed example:
    CDF(-0.26319743704743886) ^ -2
Expected:
    14.435661446561994
Got:
    14.435661446561992
**********************************************************************
File "src/sage/rings/complex_double.pyx", line 1936, in sage.rings.complex_double.ComplexDoubleElement.arccos
Failed example:
    CDF(1,1).arccos()
Expected:
    0.9045568943023814 - 1.0612750619050357*I
Got:
    0.9045568943023815 - 1.0612750619050357*I
**********************************************************************
File "src/sage/rings/complex_double.pyx", line 2115, in sage.rings.complex_double.ComplexDoubleElement.arccosh
Failed example:
    CDF(1,1).arccosh()
Expected:
    1.0612750619050357 + 0.9045568943023814*I
Got:
    1.0612750619050357 + 0.9045568943023815*I
**********************************************************************
4 items had failures:
   1 of   4 in sage.rings.complex_double.ComplexDoubleElement._latex_
   1 of  19 in sage.rings.complex_double.ComplexDoubleElement._pow_
   1 of   2 in sage.rings.complex_double.ComplexDoubleElement.arccos
   1 of   2 in sage.rings.complex_double.ComplexDoubleElement.arccosh
    [341 tests, 4 failures, 0.27 s]
**********************************************************************
File "src/sage/rings/complex_mpc.pyx", line 1524, in sage.rings.complex_mpc.MPComplexNumber.__abs__
Failed example:
    float(sqrt(2^2 + 1^1))
Expected:
    2.23606797749979
Got:
    2.2360679774997894
**********************************************************************
1 item had failures:
   1 of  10 in sage.rings.complex_mpc.MPComplexNumber.__abs__
    [410 tests, 1 failure, 0.21 s]
**********************************************************************
File "src/sage/rings/complex_mpfr.pyx", line 1885, in sage.rings.complex_mpfr.ComplexNumber.__abs__
Failed example:
    float(sqrt(2^2 + 1^1))
Expected:
    2.23606797749979
Got:
    2.2360679774997894
**********************************************************************
1 item had failures:
   1 of   9 in sage.rings.complex_mpfr.ComplexNumber.__abs__
    [539 tests, 1 failure, 1.78 s]
**********************************************************************
File "src/sage/rings/number_field/number_field_element.pyx", line 1640, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm
Failed example:
    t = (-a).is_norm(L, element=True); t
Expected:
    (True, -b^3 - 1)
Got:
    (True, b^3 - 1)
**********************************************************************
File "src/sage/rings/number_field/number_field_element.pyx", line 1755, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
Failed example:
    t = (-a)._rnfisnorm(L); t
Expected:
    (-b^3 - 1, 1)
Got:
    (b^3 - 1, 1)
**********************************************************************
File "src/sage/rings/number_field/number_field_element.pyx", line 1759, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
Failed example:
    t = K(3)._rnfisnorm(L); t
Expected:
    (b^3 + a*b^2 + a^2*b - 1, 3*a^2 - 3*a + 6)
Got:
    (-b^3 + a*b^2 - a^2*b - 1, 3*a^2 - 3*a + 6)
**********************************************************************
2 items had failures:
   2 of  27 in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
   1 of  28 in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm
    [1168 tests, 3 failures, 14.02 s]
doctest:warning
  File "/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py", line 973, in _bootstrap
    self._bootstrap_inner()
  File "/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py", line 1002, in _bootstrap_inner
    self._set_tstate_lock()
  File "/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/threading.py", line 991, in _set_tstate_lock
    self._tstate_lock = _set_sentinel()
  File "/var/lib/buildbot/worker/sage_git/build/local/var/lib/sage/venv-python3.10.8/lib/python3.10/warnings.py", line 109, in _showwarnmsg
    sw(msg.message, msg.category, msg.filename, msg.lineno,
:
RuntimeWarning: cypari2 leaked 4032445012 bytes on the PARI stack
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 154, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int
Failed example:
    base._pow_int(2^57)
Expected:
    78962960182680.42
Got:
    78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 156, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int
Failed example:
    base._pow_int(2^57 + 1)
Expected:
    78962960182680.42
Got:
    78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 170, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int
Failed example:
    base._pow_int(2^57)
Expected:
    78962960182680.42
Got:
    78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 172, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int
Failed example:
    base._pow_int(2^57 + 1)
Expected:
    -78962960182680.42
Got:
    -78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 195, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long
Failed example:
    base ^ (2^57)
Expected:
    78962960182680.42
Got:
    78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 197, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long
Failed example:
    base ^ RDF(2^57)
Expected:
    78962960182680.42
Got:
    78962960182680.27
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 384, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp
Failed example:
    a = r.exp(); a
Expected:
    106588847274864.47
Got:
    106588847274864.22
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 392, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp
Failed example:
    r.exp()
Expected:
    9.381844588498685e-15
Got:
    9.381844588498707e-15
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 418, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2
Failed example:
    r.exp2()
Expected:
    4294967295.9999967
Got:
    4294967296.0
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 424, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2
Failed example:
    r.exp2()
Expected:
    1.8911724825302065e-10
Got:
    1.8911724825302072e-10
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 445, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10
Failed example:
    r.exp10()
Expected:
    1.0000000000000069e+32
Got:
    1.0000000000000062e+32
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 451, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10
Failed example:
    r.exp10()
Expected:
    5.011872336272702e-33
Got:
    5.011872336272695e-33
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 651, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.acosh
Failed example:
    i = q.cosh(); i
Expected:
    2.5091784786580567
Got:
    2.509178478658056
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 665, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arcsinh
Failed example:
    i = q.sinh(); i
Expected:
    2.3012989023072947
Got:
    2.3012989023072943
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 679, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh
Failed example:
    i = q.tanh(); i
Expected:
    0.9171523356672744
Got:
    0.9171523356672743
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 681, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh
Failed example:
    i.arctanh() - q  # rel tol 1
Expected:
    4.440892098500626e-16
Got:
    -4.440892098500626e-16
Tolerance exceeded:
    4.440892098500626e-16 vs -4.440892098500626e-16, tolerance 3e0 > 1e0
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 692, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech
Failed example:
    RDF(pi).sech()
Expected:
    0.08626673833405443
Got:
    0.08626673833405446
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 694, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech
Failed example:
    CDF(pi).sech()
Expected:
    0.08626673833405443
Got:
    0.08626673833405446
**********************************************************************
File "src/sage/rings/real_double_element_gsl.pyx", line 705, in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.csch
Failed example:
    RDF(pi).csch()
Expected:
    0.08658953753004694
Got:
    0.08658953753004697
**********************************************************************
10 items had failures:
   4 of  23 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_int
   2 of   8 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl._pow_long
   1 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.acosh
   1 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arcsinh
   2 of   4 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.arctanh
   1 of   3 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.csch
   2 of   9 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp
   2 of   7 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp10
   2 of   7 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.exp2
   2 of   3 in sage.rings.real_double_element_gsl.RealDoubleElement_gsl.sech
    [145 tests, 19 failures, 0.06 s]
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 596, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale
Failed example:
    m._forward_scale(stats.IntList([0,1]*10))
Expected:
    -14.378663512219454
Got:
    -14.378663512219456
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 601, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale
Failed example:
    m.log_likelihood(stats.IntList([0,1]*10))
Expected:
    -14.378663512219454
Got:
    -14.378663512219456
**********************************************************************
1 item had failures:
   2 of   8 in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel._forward_scale
    [121 tests, 2 failures, 0.67 s]
**********************************************************************
File "src/sage/structure/element.pyx", line 2016, in sage.structure.element.Element.__pow__
Failed example:
    complex(1,2)**(1/2)
Expected:
    (1.272019649514069+0.786151377757423...j)
Got:
    (1.2720196495140692+0.7861513777574234j)
**********************************************************************
1 item had failures:
   1 of  24 in sage.structure.element.Element.__pow__
    [756 tests, 1 failure, 12.71 s]
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 1659, in sage.symbolic.expression.Expression._convert
Failed example:
    f._convert({'parent':RDF})
Expected:
    -1.40006081533995
Got:
    -1.4000608153399503
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 7581, in sage.symbolic.expression.Expression.polynomial
Failed example:
    f.polynomial(CDF)   # abs tol 5e-16
Expected:
    54.598150033144236*x^4 - 20.085536923187668*I*x^3 - 7.38905609893065*x^2 + 2.718281828459045*I*x + 1.0
Got:
    54.598150033144236*x^4 - 20.08553692318767*I*x^3 - 7.38905609893065*x^2 + 2.718281828459045*I*x + 1.0
Tolerance exceeded in 1 of 8:
    - 20.085536923187668 vs - 20.08553692318767, tolerance 3e-15 > 5e-16
**********************************************************************
2 items had failures:
   1 of  18 in sage.symbolic.expression.Expression._convert
   1 of  31 in sage.symbolic.expression.Expression.polynomial
    [3077 tests, 2 failures, 38.85 s]
**********************************************************************
File "src/sage_setup/autogen/interpreters/specs/cdf.py", line 57, in sage_setup.autogen.interpreters.specs.cdf.CDFInterpreter.__init__
Failed example:
    f(CDF(1+2j))  # rel tol 4e-16
Expected:
    -10391778.999999996 + 3349659.499999962*I
Got:
    -10391779.000000013 + 3349659.4999999646*I
Tolerance exceeded in 2 of 2:
    -10391778.999999996 vs -10391779.000000013, tolerance 2e-15 > 4e-16
    + 3349659.499999962 vs + 3349659.4999999646, tolerance 8e-16 > 4e-16
**********************************************************************
1 item had failures:
   1 of  20 in sage_setup.autogen.interpreters.specs.cdf.CDFInterpreter.__init__
    [19 tests, 1 failure, 0.08 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/calculus/calculus.py  # 3 doctests failed
sage -t --long --random-seed=0 src/sage/calculus/wester.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/categories/finite_coxeter_groups.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx  # 3 doctests failed
sage -t --long --random-seed=0 src/sage/functions/log.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/functions/trig.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/interacts/test_jupyter.rst  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/matrix/matrix_double_dense.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/matrix/matrix_symbolic_dense.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/modules/free_module_element.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/modules/vector_real_double_dense.pyx  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/rings/complex_double.pyx  # 4 doctests failed
sage -t --long --random-seed=0 src/sage/rings/complex_mpc.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/rings/complex_mpfr.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/rings/number_field/number_field_element.pyx  # 3 doctests failed
sage -t --long --random-seed=0 src/sage/rings/real_double_element_gsl.pyx  # 19 doctests failed
sage -t --long --random-seed=0 src/sage/stats/hmm/hmm.pyx  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/structure/element.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/symbolic/expression.pyx  # 2 doctests failed
sage -t --long --random-seed=0 src/sage_setup/autogen/interpreters/specs/cdf.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 7092.1 seconds
    cpu time: 12138.2 seconds
    cumulative wall time: 12442.3 seconds
```
Full log: http://build.sagemath.org/#/builders/47/builds/14/steps/14/logs/stdio



---

archive/issue_comments_557919.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nMany of these numerical noises do not involve PARI/GP at all!",
    "created_at": "2022-12-18T13:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557919",
    "user": "https://github.com/videlec"
}
```

<div id="comment:103" align="right">comment:103</div>

Many of these numerical noises do not involve PARI/GP at all!



---

archive/issue_comments_557920.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nIndeed, e.g.\n\n```\nFile \"src/sage/calculus/calculus.py\", line 772, in sage.calculus.calculus.?\nFailed example:\n    float(f)\nExpected:\n    -480.0\nGot:\n    -2336.0\n```\nand ensuing error in this file have nothing to do with Pari.\nAre we still supporting 32-bit seriously? \nIndeed, these 32-bit errors should have been caught elsewhere.\n\n\nI wonder whether Pari 2.15.1 passes its selftests on 32-bit, too.",
    "created_at": "2022-12-18T13:49:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557920",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:104" align="right">comment:104</div>

Indeed, e.g.

```
File "src/sage/calculus/calculus.py", line 772, in sage.calculus.calculus.?
Failed example:
    float(f)
Expected:
    -480.0
Got:
    -2336.0
```
and ensuing error in this file have nothing to do with Pari.
Are we still supporting 32-bit seriously? 
Indeed, these 32-bit errors should have been caught elsewhere.


I wonder whether Pari 2.15.1 passes its selftests on 32-bit, too.



---

archive/issue_comments_557921.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nFix:\nhttps://github.com/void-linux/void-packages/blob/master/srcpkgs/pari/patches/float32.patch\n\nAll tests pass on void linux i686 (using that patch on pari).",
    "created_at": "2022-12-18T14:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557921",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:105" align="right">comment:105</div>

Fix:
https://github.com/void-linux/void-packages/blob/master/srcpkgs/pari/patches/float32.patch

All tests pass on void linux i686 (using that patch on pari).



---

archive/issue_comments_557922.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nBTW, I've just submitted a report upstream to the pari bug tracker, which I had neglected to do before.",
    "created_at": "2022-12-18T14:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557922",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:106" align="right">comment:106</div>

BTW, I've just submitted a report upstream to the pari bug tracker, which I had neglected to do before.



---

archive/issue_comments_557923.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [Vincent Delecroix](#comment%3A103):\n> Many of these numerical noises do not involve PARI/GP at all!\n\ntests run fine without this ticket tho...",
    "created_at": "2022-12-18T16:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557923",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [Vincent Delecroix](#comment%3A103):
> Many of these numerical noises do not involve PARI/GP at all!

tests run fine without this ticket tho...



---

archive/issue_comments_557924.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [Volker Braun](#comment%3A107):\n> Replying to [Vincent Delecroix](#comment%3A103):\n> > Many of these numerical noises do not involve PARI/GP at all!\n\n> \n> tests run fine without this ticket tho...\n\nThe offending Pari commit, reverted by Gonzalo's patch, is not in 2.13.3, but is in 2.15.1.\nMaybe it flips FPU switches somewhere...",
    "created_at": "2022-12-18T18:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557924",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [Volker Braun](#comment%3A107):
> Replying to [Vincent Delecroix](#comment%3A103):
> > Many of these numerical noises do not involve PARI/GP at all!

> 
> tests run fine without this ticket tho...

The offending Pari commit, reverted by Gonzalo's patch, is not in 2.13.3, but is in 2.15.1.
Maybe it flips FPU switches somewhere...



---

archive/issue_comments_557925.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [Dima Pasechnik](#comment%3A108):\n> Replying to [Volker Braun](#comment%3A107):\n> > Replying to [Vincent Delecroix](#comment%3A103):\n> > > Many of these numerical noises do not involve PARI/GP at all!\n\n> > \n> > tests run fine without this ticket tho...\n\n> \n> The offending Pari commit, reverted by Gonzalo's patch, is not in 2.13.3, but is in 2.15.1.\n> Maybe it flips FPU switches somewhere...\n\nPrecisely. The 387 fpu has a switch to choose between 64-bit (double) and 80-bit (long double) arithmetic. The problem is that transcendental functions depend on 80 bit arithmetic to give accurate 64 bit results \ud83e\udd26\u200d\u2642\ufe0f\n\nJust linking to pari (without even initializing it) will affect a program, as demonstrated in the test program in my commit message (https://github.com/void-linux/void-packages/blob/master/srcpkgs/pari/patches/float32.patch).\n\nMaybe it is possible to override the -mpc64 setting in pari library by explicitly adding -mpc80 to the linking step of sage. Or adding code in sage init to explicitly initialize the FPU to a safe mode.\n\nBe warned that removing the `-mpc64` flag in pari might result in some numerical differences on pari itself due to 80 bit precission. In void linux we compile pari with `-ffloat-store` which avoids this issue.",
    "created_at": "2022-12-18T19:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557925",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [Dima Pasechnik](#comment%3A108):
> Replying to [Volker Braun](#comment%3A107):
> > Replying to [Vincent Delecroix](#comment%3A103):
> > > Many of these numerical noises do not involve PARI/GP at all!

> > 
> > tests run fine without this ticket tho...

> 
> The offending Pari commit, reverted by Gonzalo's patch, is not in 2.13.3, but is in 2.15.1.
> Maybe it flips FPU switches somewhere...

Precisely. The 387 fpu has a switch to choose between 64-bit (double) and 80-bit (long double) arithmetic. The problem is that transcendental functions depend on 80 bit arithmetic to give accurate 64 bit results 🤦‍♂️

Just linking to pari (without even initializing it) will affect a program, as demonstrated in the test program in my commit message (https://github.com/void-linux/void-packages/blob/master/srcpkgs/pari/patches/float32.patch).

Maybe it is possible to override the -mpc64 setting in pari library by explicitly adding -mpc80 to the linking step of sage. Or adding code in sage init to explicitly initialize the FPU to a safe mode.

Be warned that removing the `-mpc64` flag in pari might result in some numerical differences on pari itself due to 80 bit precission. In void linux we compile pari with `-ffloat-store` which avoids this issue.



---

archive/issue_comments_557926.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nhttps://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435",
    "created_at": "2022-12-18T19:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557926",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:110" align="right">comment:110</div>

https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435



---

archive/issue_comments_557927.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nshould we proceed with the Gonzalo's patch ? \n\nthe upstream is clearly wrong in applying this change unconditionally, IMHO",
    "created_at": "2022-12-21T09:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557927",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:111" align="right">comment:111</div>

should we proceed with the Gonzalo's patch ? 

the upstream is clearly wrong in applying this change unconditionally, IMHO



---

archive/issue_comments_557928.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nUpstream provided a fix on \u200bhttps://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435, let's test it.",
    "created_at": "2022-12-25T09:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557928",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:112" align="right">comment:112</div>

Upstream provided a fix on ​https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435, let's test it.



---

archive/issue_comments_557929.json:
```json
{
    "body": "<div id=\"comment:113\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79\"><code>847cc1a</code></a></td><td><code>try out 32-bit fix from upstream</code></td></tr></table>\n",
    "created_at": "2022-12-25T10:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557929",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:113"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79"><code>847cc1a</code></a></td><td><code>try out 32-bit fix from upstream</code></td></tr></table>




---

archive/issue_comments_557930.json:
```json
{
    "body": "Changed commit from **[`364f6d1`](https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441)** to **[`847cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79)**",
    "created_at": "2022-12-25T10:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`364f6d1`](https://github.com/sagemath/sagetrac-mirror/commit/364f6d1ae19d7cd620a4151e1a51d2e4223c1441)** to **[`847cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79)**



---

archive/issue_comments_557931.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\n32-bit-capable, please try this out",
    "created_at": "2022-12-25T10:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557931",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:114" align="right">comment:114</div>

32-bit-capable, please try this out



---

archive/issue_events_468055.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-25T10:10:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468055"
}
```



---

archive/issue_events_468056.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-25T10:10:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468056"
}
```



---

archive/issue_comments_557932.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [Dima Pasechnik](#comment%3A114):\n> 32-bit-capable, please try this out\n\nI found an old laptop, last seriously used in 2008, it has ubuntu 10.04 installed (!) and a working Sage 4.7.  Must be 32-bit.  I wonder how much work it would be to get it into a state in which I could try building a new Sage (for testing things like this)?",
    "created_at": "2022-12-30T12:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557932",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [Dima Pasechnik](#comment%3A114):
> 32-bit-capable, please try this out

I found an old laptop, last seriously used in 2008, it has ubuntu 10.04 installed (!) and a working Sage 4.7.  Must be 32-bit.  I wonder how much work it would be to get it into a state in which I could try building a new Sage (for testing things like this)?



---

archive/issue_comments_557933.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nprobably ubuntu 10 is way too old even for stand alone Pari - but you can try (building/testing Pari 2.15)",
    "created_at": "2022-12-30T15:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557933",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:116" align="right">comment:116</div>

probably ubuntu 10 is way too old even for stand alone Pari - but you can try (building/testing Pari 2.15)



---

archive/issue_comments_557934.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nReplying to [Dima Pasechnik](#comment%3A116):\n> probably ubuntu 10 is way too old even for stand alone Pari - but you can try (building/testing Pari 2.15)\n\nSorry, it kept on crashing when I tried to install anything.  I'm not sure it's worth it.",
    "created_at": "2022-12-30T16:26:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557934",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:117" align="right">comment:117</div>

Replying to [Dima Pasechnik](#comment%3A116):
> probably ubuntu 10 is way too old even for stand alone Pari - but you can try (building/testing Pari 2.15)

Sorry, it kept on crashing when I tried to install anything.  I'm not sure it's worth it.



---

archive/issue_comments_557935.json:
```json
{
    "body": "<div id=\"comment:118\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce306b23b1b5318d3bde27bc868658c3a8ffe75f\"><code>ce306b2</code></a></td><td><code>Revert \"Fix one more test in docs\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a795cf156478c5f381322a46604aa8aceb841874\"><code>a795cf1</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66d09f668e1d65530e159cb99bb866c113769a75\"><code>66d09f6</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9749991975da17c9827a272cf1bd356a062bba1\"><code>c974999</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d2dcd4c6ffa6b2293bbb36133f1da08b00717b3\"><code>9d2dcd4</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cb6ba974d79c0af9a80fb6356d5a415748a442a\"><code>0cb6ba9</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72d8024d147cea418bda748720a3a368e1a79257\"><code>72d8024</code></a></td><td><code>correct minimal version of pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21851db8373b296eb5c5defea7eb5329d3eafce7\"><code>21851db</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bfcb1e52749b55260c935c639018e5fd43932ef\"><code>0bfcb1e</code></a></td><td><code>bump version to 2.15.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859\"><code>e3e74ef</code></a></td><td><code>try out 32-bit fix from upstream</code></td></tr></table>\n",
    "created_at": "2023-01-02T10:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:118"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce306b23b1b5318d3bde27bc868658c3a8ffe75f"><code>ce306b2</code></a></td><td><code>Revert "Fix one more test in docs"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a795cf156478c5f381322a46604aa8aceb841874"><code>a795cf1</code></a></td><td><code>fix call to pari genus2red</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66d09f668e1d65530e159cb99bb866c113769a75"><code>66d09f6</code></a></td><td><code>fix doc associated to genus 2 reduction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9749991975da17c9827a272cf1bd356a062bba1"><code>c974999</code></a></td><td><code>Re-fix test that was moved to a different file in 9.8.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d2dcd4c6ffa6b2293bbb36133f1da08b00717b3"><code>9d2dcd4</code></a></td><td><code>fix doctest if fqf_orthogonal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cb6ba974d79c0af9a80fb6356d5a415748a442a"><code>0cb6ba9</code></a></td><td><code>Require pari>=2.15, remove old bug test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72d8024d147cea418bda748720a3a368e1a79257"><code>72d8024</code></a></td><td><code>correct minimal version of pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21851db8373b296eb5c5defea7eb5329d3eafce7"><code>21851db</code></a></td><td><code>Fix 9.8.beta1 rebase</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bfcb1e52749b55260c935c639018e5fd43932ef"><code>0bfcb1e</code></a></td><td><code>bump version to 2.15.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859"><code>e3e74ef</code></a></td><td><code>try out 32-bit fix from upstream</code></td></tr></table>




---

archive/issue_comments_557936.json:
```json
{
    "body": "Changed commit from **[`847cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79)** to **[`e3e74ef`](https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859)**",
    "created_at": "2023-01-02T10:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`847cc1a`](https://github.com/sagemath/sagetrac-mirror/commit/847cc1a8322ba4546a6e7ceeef6a8642c270bf79)** to **[`e3e74ef`](https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859)**



---

archive/issue_comments_557937.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nrebased over the latest beta",
    "created_at": "2023-01-02T10:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557937",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:119" align="right">comment:119</div>

rebased over the latest beta



---

archive/issue_comments_557938.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\n`debian-buster-i386-minimal` (https://github.com/mkoeppe/sage/actions/runs/3813720548/jobs/6501916887):\n\n```\nsage -t --random-seed=304199016987563679993262730039611175926 src/sage/parallel/decorate.py  # 1 doctest failed\nsage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_element.pyx  # 3 doctests failed\nsage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_ideal_rel.py  # 1 doctest failed\nsage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/qqbar.py  # 7 doctests failed\n```",
    "created_at": "2023-01-02T19:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557938",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:120" align="right">comment:120</div>

`debian-buster-i386-minimal` (https://github.com/mkoeppe/sage/actions/runs/3813720548/jobs/6501916887):

```
sage -t --random-seed=304199016987563679993262730039611175926 src/sage/parallel/decorate.py  # 1 doctest failed
sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_element.pyx  # 3 doctests failed
sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_ideal_rel.py  # 1 doctest failed
sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/qqbar.py  # 7 doctests failed
```



---

archive/issue_events_468057.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-02T19:14:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468057"
}
```



---

archive/issue_events_468058.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-02T19:14:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468058"
}
```



---

archive/issue_comments_557939.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nthese seem to be different failures than these from the previous try.\nThis one is a red herring, I think.\n\n```\n2023-01-02T17:09:28.9130459Z File \"src/sage/parallel/decorate.py\", line 560, in sage.parallel.decorate.fork\n2023-01-02T17:09:28.9130748Z Failed example:\n2023-01-02T17:09:28.9131128Z     print(\"this works\"); g()                                      # optional - sage.misc.cython\n2023-01-02T17:09:28.9131402Z Expected:\n2023-01-02T17:09:28.9131605Z     this works...\n2023-01-02T17:09:28.9131801Z     <BLANKLINE>\n2023-01-02T17:09:28.9132181Z     ------------------------------------------------------------------------\n2023-01-02T17:09:28.9132477Z     Unhandled SIG...\n2023-01-02T17:09:28.9132841Z     ------------------------------------------------------------------------\n2023-01-02T17:09:28.9133153Z     'NO DATA'\n2023-01-02T17:09:28.9133348Z Got:\n2023-01-02T17:09:28.9133525Z     this works\n2023-01-02T17:09:28.9133893Z     ------------------------------------------------------------------------\n2023-01-02T17:09:28.9134535Z     /sage/local/var/lib/sage/venv-python3.11.1/lib/python3.11/site-packages/cysignals/signals.cpython-311-i386-linux-gnu.so(+0x5bb2)[0xf6365bb2]\n...\n```\n\nbut the rest look as if something has changed with signs handling somewhere in Pari\n\n```\n2023-01-02T17:17:20.0394427Z sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_element.pyx\n2023-01-02T17:17:20.0394753Z **********************************************************************\n2023-01-02T17:17:20.0395167Z File \"src/sage/rings/number_field/number_field_element.pyx\", line 1640, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm\n2023-01-02T17:17:20.0395544Z Failed example:\n2023-01-02T17:17:20.0395830Z     t = (-a).is_norm(L, element=True); t\n2023-01-02T17:17:20.0396038Z Expected:\n2023-01-02T17:17:20.0396266Z     (True, -b^3 - 1)\n2023-01-02T17:17:20.0396463Z Got:\n2023-01-02T17:17:20.0396660Z     (True, b^3 - 1)\n2023-01-02T17:17:20.0396885Z **********************************************************************\n2023-01-02T17:17:20.0397311Z File \"src/sage/rings/number_field/number_field_element.pyx\", line 1755, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\n2023-01-02T17:17:20.0397686Z Failed example:\n2023-01-02T17:17:20.0397930Z     t = (-a)._rnfisnorm(L); t\n2023-01-02T17:17:20.0398136Z Expected:\n2023-01-02T17:17:20.0398350Z     (-b^3 - 1, 1)\n2023-01-02T17:17:20.0398518Z Got:\n2023-01-02T17:17:20.0398724Z     (b^3 - 1, 1)\n2023-01-02T17:17:20.0398951Z **********************************************************************\n2023-01-02T17:17:20.0399351Z File \"src/sage/rings/number_field/number_field_element.pyx\", line 1759, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\n2023-01-02T17:17:20.0399721Z Failed example:\n2023-01-02T17:17:20.0399929Z     t = K(3)._rnfisnorm(L); t\n2023-01-02T17:17:20.0400120Z Expected:\n2023-01-02T17:17:20.0400394Z     (b^3 + a*b^2 + a^2*b - 1, 3*a^2 - 3*a + 6)\n2023-01-02T17:17:20.0400605Z Got:\n2023-01-02T17:17:20.0400854Z     (-b^3 + a*b^2 - a^2*b - 1, 3*a^2 - 3*a + 6)\n2023-01-02T17:17:20.0401102Z **********************************************************************\n2023-01-02T17:17:20.0401331Z 2 items had failures:\n2023-01-02T17:17:20.0401638Z    2 of  27 in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm\n2023-01-02T17:17:20.0402059Z    1 of  28 in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm\n2023-01-02T17:17:20.0402383Z     [1167 tests, 3 failures, 20.14 s]\n```\n\nagain something with the norm of algebraic numbers:\n\n```\n2023-01-02T17:17:20.0407122Z File \"src/sage/rings/number_field/number_field_ideal_rel.py\", line 221, in sage.rings.number_field.number_field_ideal_rel.NumberFieldFractionalIdeal_rel._from_absolute_ideal\n2023-01-02T17:17:20.0407519Z Failed example:\n2023-01-02T17:17:20.0407730Z     J.absolute_ideal()\n2023-01-02T17:17:20.0407934Z Expected:\n2023-01-02T17:17:20.0408389Z     Fractional ideal (22584817, -1473/812911*a^5 + 8695/4877466*a^4 - 1308209/4877466*a^3 + 117415/443406*a^2 - 22963264/2438733*a - 13721081784272/2438733)\n2023-01-02T17:17:20.0408653Z Got:\n2023-01-02T17:17:20.0409104Z     Fractional ideal (22584817, -4417/2438733*a^5 - 2867/1625822*a^4 - 1307249/4877466*a^3 - 112151/443406*a^2 - 22904674/2438733*a - 13720435234111/2438733)\n2023-01-02T17:17:20.0409412Z **********************************************************************\n2023-01-02T17:17:20.0409620Z 1 item had failures:\n2023-01-02T17:17:20.0409977Z    1 of   9 in sage.rings.number_field.number_field_ideal_rel.NumberFieldFractionalIdeal_rel._from_absolute_ideal\n2023-01-02T17:17:20.0410331Z     [233 tests, 1 failure, 1.43 s]\n```\n\nno idea about these:\n\n```\n2023-01-02T17:21:09.2828507Z sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/qqbar.py\n2023-01-02T17:21:09.2828799Z **********************************************************************\n2023-01-02T17:21:09.2829146Z File \"src/sage/rings/qqbar.py\", line 2659, in sage.rings.qqbar.number_field_elements_from_algebraics\n2023-01-02T17:21:09.2829457Z Failed example:\n2023-01-02T17:21:09.2829646Z     nf\n2023-01-02T17:21:09.2829813Z Expected:\n2023-01-02T17:21:09.2830162Z     Number Field in a with defining polynomial y^24 - 6*y^23 ...- 9*y^2 + 1\n2023-01-02T17:21:09.2830444Z       with a = 0.2598679? + 0.0572892?*I\n2023-01-02T17:21:09.2830630Z Got:\n2023-01-02T17:21:09.2831197Z     Number Field in a with defining polynomial y^24 - 9*y^22 + 135*y^20 - 720*y^18 + 1821*y^16 - 3015*y^14 + 3974*y^12 - 3015*y^10 + 1821*y^8 - 720*y^6 + 135*y^4 - 9*y^2 + 1 with a = -0.2368370943? - 0.2078201084?*I\n2023-01-02T17:21:09.2831560Z **********************************************************************\n2023-01-02T17:21:09.2831903Z File \"src/sage/rings/qqbar.py\", line 7860, in sage.rings.qqbar.ANExtensionElement.neg\n2023-01-02T17:21:09.2832200Z Failed example:\n2023-01-02T17:21:09.2832395Z     b.neg(a)\n2023-01-02T17:21:09.2832582Z Expected:\n2023-01-02T17:21:09.2832974Z     -1/3*a^3 + 1/3*a^2 - a - 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I\n2023-01-02T17:21:09.2833232Z Got:\n2023-01-02T17:21:09.2833631Z     1/3*a^3 - 2/3*a^2 + 4/3*a - 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I\n2023-01-02T17:21:09.2833921Z **********************************************************************\n2023-01-02T17:21:09.2834264Z File \"src/sage/rings/qqbar.py\", line 7862, in sage.rings.qqbar.ANExtensionElement.neg\n2023-01-02T17:21:09.2834937Z Failed example:\n2023-01-02T17:21:09.2835139Z     b.neg(\"ham spam and eggs\")\n2023-01-02T17:21:09.2835348Z Expected:\n2023-01-02T17:21:09.2835750Z     -1/3*a^3 + 1/3*a^2 - a - 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I\n2023-01-02T17:21:09.2836007Z Got:\n2023-01-02T17:21:09.2836389Z     1/3*a^3 - 2/3*a^2 + 4/3*a - 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I\n2023-01-02T17:21:09.2836797Z **********************************************************************\n2023-01-02T17:21:09.2837156Z File \"src/sage/rings/qqbar.py\", line 7878, in sage.rings.qqbar.ANExtensionElement.invert\n2023-01-02T17:21:09.2837461Z Failed example:\n2023-01-02T17:21:09.2837663Z     b.invert(a)\n2023-01-02T17:21:09.2837853Z Expected:\n2023-01-02T17:21:09.2838246Z     -7/3*a^3 + 19/3*a^2 - 7*a - 9 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I\n2023-01-02T17:21:09.2838506Z Got:\n2023-01-02T17:21:09.2838904Z     7/3*a^3 - 2/3*a^2 + 4/3*a - 12 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I\n2023-01-02T17:21:09.2839200Z **********************************************************************\n2023-01-02T17:21:09.2839543Z File \"src/sage/rings/qqbar.py\", line 7880, in sage.rings.qqbar.ANExtensionElement.invert\n2023-01-02T17:21:09.2839859Z Failed example:\n2023-01-02T17:21:09.2840082Z     b.invert(\"ham spam and eggs\")\n2023-01-02T17:21:09.2840282Z Expected:\n2023-01-02T17:21:09.2840681Z     -7/3*a^3 + 19/3*a^2 - 7*a - 9 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I\n2023-01-02T17:21:09.2840934Z Got:\n2023-01-02T17:21:09.2841314Z     7/3*a^3 - 2/3*a^2 + 4/3*a - 12 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I\n2023-01-02T17:21:09.2841607Z **********************************************************************\n2023-01-02T17:21:09.2841966Z File \"src/sage/rings/qqbar.py\", line 7896, in sage.rings.qqbar.ANExtensionElement.conjugate\n2023-01-02T17:21:09.2842292Z Failed example:\n2023-01-02T17:21:09.2842477Z     b.conjugate(a)\n2023-01-02T17:21:09.2842672Z Expected:\n2023-01-02T17:21:09.2843064Z     1/3*a^3 - 1/3*a^2 + a + 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? - 1.573132184970987?*I\n2023-01-02T17:21:09.2843299Z Got:\n2023-01-02T17:21:09.2843696Z     -1/3*a^3 + 2/3*a^2 - 4/3*a + 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? + 1.573132184970987?*I\n2023-01-02T17:21:09.2843990Z **********************************************************************\n2023-01-02T17:21:27.9889948Z File \"src/sage/rings/qqbar.py\", line 7898, in sage.rings.qqbar.ANExtensionElement.conjugate\n2023-01-02T17:21:27.9890654Z Failed example:\n2023-01-02T17:21:28.0009431Z     b.conjugate(\"ham spam and eggs\")\n2023-01-02T17:21:28.0009680Z Expected:\n2023-01-02T17:21:28.0010307Z     1/3*a^3 - 1/3*a^2 + a + 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? - 1.573132184970987?*I\n2023-01-02T17:21:28.0010587Z Got:\n2023-01-02T17:21:28.0010978Z     -1/3*a^3 + 2/3*a^2 - 4/3*a + 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? + 1.573132184970987?*I\n2023-01-02T17:21:28.0011281Z **********************************************************************\n2023-01-02T17:21:28.0011508Z 4 items had failures:\n2023-01-02T17:21:28.0011797Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.conjugate\n2023-01-02T17:21:28.0012179Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.invert\n2023-01-02T17:21:28.0012532Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.neg\n2023-01-02T17:21:28.0012881Z    1 of  60 in sage.rings.qqbar.number_field_elements_from_algebraics\n2023-01-02T17:21:28.0013161Z     [1629 tests, 7 failures, 31.12 s]\n```",
    "created_at": "2023-01-03T10:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557939",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:122" align="right">comment:122</div>

these seem to be different failures than these from the previous try.
This one is a red herring, I think.

```
2023-01-02T17:09:28.9130459Z File "src/sage/parallel/decorate.py", line 560, in sage.parallel.decorate.fork
2023-01-02T17:09:28.9130748Z Failed example:
2023-01-02T17:09:28.9131128Z     print("this works"); g()                                      # optional - sage.misc.cython
2023-01-02T17:09:28.9131402Z Expected:
2023-01-02T17:09:28.9131605Z     this works...
2023-01-02T17:09:28.9131801Z     <BLANKLINE>
2023-01-02T17:09:28.9132181Z     ------------------------------------------------------------------------
2023-01-02T17:09:28.9132477Z     Unhandled SIG...
2023-01-02T17:09:28.9132841Z     ------------------------------------------------------------------------
2023-01-02T17:09:28.9133153Z     'NO DATA'
2023-01-02T17:09:28.9133348Z Got:
2023-01-02T17:09:28.9133525Z     this works
2023-01-02T17:09:28.9133893Z     ------------------------------------------------------------------------
2023-01-02T17:09:28.9134535Z     /sage/local/var/lib/sage/venv-python3.11.1/lib/python3.11/site-packages/cysignals/signals.cpython-311-i386-linux-gnu.so(+0x5bb2)[0xf6365bb2]
...
```

but the rest look as if something has changed with signs handling somewhere in Pari

```
2023-01-02T17:17:20.0394427Z sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/number_field/number_field_element.pyx
2023-01-02T17:17:20.0394753Z **********************************************************************
2023-01-02T17:17:20.0395167Z File "src/sage/rings/number_field/number_field_element.pyx", line 1640, in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm
2023-01-02T17:17:20.0395544Z Failed example:
2023-01-02T17:17:20.0395830Z     t = (-a).is_norm(L, element=True); t
2023-01-02T17:17:20.0396038Z Expected:
2023-01-02T17:17:20.0396266Z     (True, -b^3 - 1)
2023-01-02T17:17:20.0396463Z Got:
2023-01-02T17:17:20.0396660Z     (True, b^3 - 1)
2023-01-02T17:17:20.0396885Z **********************************************************************
2023-01-02T17:17:20.0397311Z File "src/sage/rings/number_field/number_field_element.pyx", line 1755, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
2023-01-02T17:17:20.0397686Z Failed example:
2023-01-02T17:17:20.0397930Z     t = (-a)._rnfisnorm(L); t
2023-01-02T17:17:20.0398136Z Expected:
2023-01-02T17:17:20.0398350Z     (-b^3 - 1, 1)
2023-01-02T17:17:20.0398518Z Got:
2023-01-02T17:17:20.0398724Z     (b^3 - 1, 1)
2023-01-02T17:17:20.0398951Z **********************************************************************
2023-01-02T17:17:20.0399351Z File "src/sage/rings/number_field/number_field_element.pyx", line 1759, in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
2023-01-02T17:17:20.0399721Z Failed example:
2023-01-02T17:17:20.0399929Z     t = K(3)._rnfisnorm(L); t
2023-01-02T17:17:20.0400120Z Expected:
2023-01-02T17:17:20.0400394Z     (b^3 + a*b^2 + a^2*b - 1, 3*a^2 - 3*a + 6)
2023-01-02T17:17:20.0400605Z Got:
2023-01-02T17:17:20.0400854Z     (-b^3 + a*b^2 - a^2*b - 1, 3*a^2 - 3*a + 6)
2023-01-02T17:17:20.0401102Z **********************************************************************
2023-01-02T17:17:20.0401331Z 2 items had failures:
2023-01-02T17:17:20.0401638Z    2 of  27 in sage.rings.number_field.number_field_element.NumberFieldElement._rnfisnorm
2023-01-02T17:17:20.0402059Z    1 of  28 in sage.rings.number_field.number_field_element.NumberFieldElement.is_norm
2023-01-02T17:17:20.0402383Z     [1167 tests, 3 failures, 20.14 s]
```

again something with the norm of algebraic numbers:

```
2023-01-02T17:17:20.0407122Z File "src/sage/rings/number_field/number_field_ideal_rel.py", line 221, in sage.rings.number_field.number_field_ideal_rel.NumberFieldFractionalIdeal_rel._from_absolute_ideal
2023-01-02T17:17:20.0407519Z Failed example:
2023-01-02T17:17:20.0407730Z     J.absolute_ideal()
2023-01-02T17:17:20.0407934Z Expected:
2023-01-02T17:17:20.0408389Z     Fractional ideal (22584817, -1473/812911*a^5 + 8695/4877466*a^4 - 1308209/4877466*a^3 + 117415/443406*a^2 - 22963264/2438733*a - 13721081784272/2438733)
2023-01-02T17:17:20.0408653Z Got:
2023-01-02T17:17:20.0409104Z     Fractional ideal (22584817, -4417/2438733*a^5 - 2867/1625822*a^4 - 1307249/4877466*a^3 - 112151/443406*a^2 - 22904674/2438733*a - 13720435234111/2438733)
2023-01-02T17:17:20.0409412Z **********************************************************************
2023-01-02T17:17:20.0409620Z 1 item had failures:
2023-01-02T17:17:20.0409977Z    1 of   9 in sage.rings.number_field.number_field_ideal_rel.NumberFieldFractionalIdeal_rel._from_absolute_ideal
2023-01-02T17:17:20.0410331Z     [233 tests, 1 failure, 1.43 s]
```

no idea about these:

```
2023-01-02T17:21:09.2828507Z sage -t --random-seed=304199016987563679993262730039611175926 src/sage/rings/qqbar.py
2023-01-02T17:21:09.2828799Z **********************************************************************
2023-01-02T17:21:09.2829146Z File "src/sage/rings/qqbar.py", line 2659, in sage.rings.qqbar.number_field_elements_from_algebraics
2023-01-02T17:21:09.2829457Z Failed example:
2023-01-02T17:21:09.2829646Z     nf
2023-01-02T17:21:09.2829813Z Expected:
2023-01-02T17:21:09.2830162Z     Number Field in a with defining polynomial y^24 - 6*y^23 ...- 9*y^2 + 1
2023-01-02T17:21:09.2830444Z       with a = 0.2598679? + 0.0572892?*I
2023-01-02T17:21:09.2830630Z Got:
2023-01-02T17:21:09.2831197Z     Number Field in a with defining polynomial y^24 - 9*y^22 + 135*y^20 - 720*y^18 + 1821*y^16 - 3015*y^14 + 3974*y^12 - 3015*y^10 + 1821*y^8 - 720*y^6 + 135*y^4 - 9*y^2 + 1 with a = -0.2368370943? - 0.2078201084?*I
2023-01-02T17:21:09.2831560Z **********************************************************************
2023-01-02T17:21:09.2831903Z File "src/sage/rings/qqbar.py", line 7860, in sage.rings.qqbar.ANExtensionElement.neg
2023-01-02T17:21:09.2832200Z Failed example:
2023-01-02T17:21:09.2832395Z     b.neg(a)
2023-01-02T17:21:09.2832582Z Expected:
2023-01-02T17:21:09.2832974Z     -1/3*a^3 + 1/3*a^2 - a - 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I
2023-01-02T17:21:09.2833232Z Got:
2023-01-02T17:21:09.2833631Z     1/3*a^3 - 2/3*a^2 + 4/3*a - 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I
2023-01-02T17:21:09.2833921Z **********************************************************************
2023-01-02T17:21:09.2834264Z File "src/sage/rings/qqbar.py", line 7862, in sage.rings.qqbar.ANExtensionElement.neg
2023-01-02T17:21:09.2834937Z Failed example:
2023-01-02T17:21:09.2835139Z     b.neg("ham spam and eggs")
2023-01-02T17:21:09.2835348Z Expected:
2023-01-02T17:21:09.2835750Z     -1/3*a^3 + 1/3*a^2 - a - 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I
2023-01-02T17:21:09.2836007Z Got:
2023-01-02T17:21:09.2836389Z     1/3*a^3 - 2/3*a^2 + 4/3*a - 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I
2023-01-02T17:21:09.2836797Z **********************************************************************
2023-01-02T17:21:09.2837156Z File "src/sage/rings/qqbar.py", line 7878, in sage.rings.qqbar.ANExtensionElement.invert
2023-01-02T17:21:09.2837461Z Failed example:
2023-01-02T17:21:09.2837663Z     b.invert(a)
2023-01-02T17:21:09.2837853Z Expected:
2023-01-02T17:21:09.2838246Z     -7/3*a^3 + 19/3*a^2 - 7*a - 9 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I
2023-01-02T17:21:09.2838506Z Got:
2023-01-02T17:21:09.2838904Z     7/3*a^3 - 2/3*a^2 + 4/3*a - 12 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I
2023-01-02T17:21:09.2839200Z **********************************************************************
2023-01-02T17:21:09.2839543Z File "src/sage/rings/qqbar.py", line 7880, in sage.rings.qqbar.ANExtensionElement.invert
2023-01-02T17:21:09.2839859Z Failed example:
2023-01-02T17:21:09.2840082Z     b.invert("ham spam and eggs")
2023-01-02T17:21:09.2840282Z Expected:
2023-01-02T17:21:09.2840681Z     -7/3*a^3 + 19/3*a^2 - 7*a - 9 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? + 1.573132184970987?*I
2023-01-02T17:21:09.2840934Z Got:
2023-01-02T17:21:09.2841314Z     7/3*a^3 - 2/3*a^2 + 4/3*a - 12 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? - 1.573132184970987?*I
2023-01-02T17:21:09.2841607Z **********************************************************************
2023-01-02T17:21:09.2841966Z File "src/sage/rings/qqbar.py", line 7896, in sage.rings.qqbar.ANExtensionElement.conjugate
2023-01-02T17:21:09.2842292Z Failed example:
2023-01-02T17:21:09.2842477Z     b.conjugate(a)
2023-01-02T17:21:09.2842672Z Expected:
2023-01-02T17:21:09.2843064Z     1/3*a^3 - 1/3*a^2 + a + 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? - 1.573132184970987?*I
2023-01-02T17:21:09.2843299Z Got:
2023-01-02T17:21:09.2843696Z     -1/3*a^3 + 2/3*a^2 - 4/3*a + 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? + 1.573132184970987?*I
2023-01-02T17:21:09.2843990Z **********************************************************************
2023-01-02T17:21:27.9889948Z File "src/sage/rings/qqbar.py", line 7898, in sage.rings.qqbar.ANExtensionElement.conjugate
2023-01-02T17:21:27.9890654Z Failed example:
2023-01-02T17:21:28.0009431Z     b.conjugate("ham spam and eggs")
2023-01-02T17:21:28.0009680Z Expected:
2023-01-02T17:21:28.0010307Z     1/3*a^3 - 1/3*a^2 + a + 1 where a^4 - 2*a^3 + a^2 + 6*a + 3 = 0 and a in 1.724744871391589? - 1.573132184970987?*I
2023-01-02T17:21:28.0010587Z Got:
2023-01-02T17:21:28.0010978Z     -1/3*a^3 + 2/3*a^2 - 4/3*a + 2 where a^4 - 2*a^3 + a^2 - 6*a + 9 = 0 and a in -0.7247448713915890? + 1.573132184970987?*I
2023-01-02T17:21:28.0011281Z **********************************************************************
2023-01-02T17:21:28.0011508Z 4 items had failures:
2023-01-02T17:21:28.0011797Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.conjugate
2023-01-02T17:21:28.0012179Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.invert
2023-01-02T17:21:28.0012532Z    2 of   7 in sage.rings.qqbar.ANExtensionElement.neg
2023-01-02T17:21:28.0012881Z    1 of  60 in sage.rings.qqbar.number_field_elements_from_algebraics
2023-01-02T17:21:28.0013161Z     [1629 tests, 7 failures, 31.12 s]
```



---

archive/issue_comments_557940.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nI will check the number field norms diffs (which are probably fine, the solution to Norm(x)=y is not unique, and if the relaive degree is even then Norm(-1)=1 so Norm(-x)=Norm(x)).\n\nI'll also ook at the QQbar ones.",
    "created_at": "2023-01-03T10:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557940",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:123" align="right">comment:123</div>

I will check the number field norms diffs (which are probably fine, the solution to Norm(x)=y is not unique, and if the relaive degree is even then Norm(-1)=1 so Norm(-x)=Norm(x)).

I'll also ook at the QQbar ones.



---

archive/issue_comments_557941.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nsrc/sage/rings/number_field/number_field_element.pyx: OK\n\nsrc/sage/rings/number_field/number_field_ideal_rel.py: it is a bad test.  The abolute ideal is an ideal in (the ring of integers of) the absolue field, whose generators are xepressed in terms of a generator of that field, whose name is displayed as 'a' as no names= paramater was given, but a has another meaning and this is confusing.  Also the absolute field does not have a unique generator.  I think it is simplest not to test how the abolute ideal looks at all.\n\nQQbar next...",
    "created_at": "2023-01-03T11:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557941",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:124" align="right">comment:124</div>

src/sage/rings/number_field/number_field_element.pyx: OK

src/sage/rings/number_field/number_field_ideal_rel.py: it is a bad test.  The abolute ideal is an ideal in (the ring of integers of) the absolue field, whose generators are xepressed in terms of a generator of that field, whose name is displayed as 'a' as no names= paramater was given, but a has another meaning and this is confusing.  Also the absolute field does not have a unique generator.  I think it is simplest not to test how the abolute ideal looks at all.

QQbar next...



---

archive/issue_comments_557942.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nsrc/sage/rings/qqbar.py:\n\nl.2659: I would not display the nf at all, the generator is not unique and each generator has 24 complex embeddings.  Or you could put\n\n```\nsage: nf.is_isomorphic(NumberField(x^24 + 27*x^22 + 291*x^20 + 1548*x^18 + 4893*x^16 + 9657*x^14 + 12110*x^12 + 9657*x^10 + 4893*x^8 + 1548*x^6 + 291*\n....: x^4 + 27*x^2 + 1,'b'))\nTrue\n```\n\nl.7860: a terrible test of a weird function. The method `neg()` takes a parameter n which is not used (but is not optional), in the test a is used for the parameter (confusing), and -- worse -- the a which appears in the putput has nothing to do with the identifier a, it is a name chosen internally for some generator.\n\nI think these three methods (neg, invert, conjugate) need attention.  The docstring for `conjugate()` wrongly says it returns the negation, a cut-and-paste error.\n\nYears ago I spent a while improving the doctests in this >8000-line file but gave up after doing quite a lot!\n\nI am willing to make a branch fixing all these except the first one (src/sage/parallel/decorate.py). Should I base that on u/dimpase/packages/pari2151 ?",
    "created_at": "2023-01-03T11:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557942",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:125" align="right">comment:125</div>

src/sage/rings/qqbar.py:

l.2659: I would not display the nf at all, the generator is not unique and each generator has 24 complex embeddings.  Or you could put

```
sage: nf.is_isomorphic(NumberField(x^24 + 27*x^22 + 291*x^20 + 1548*x^18 + 4893*x^16 + 9657*x^14 + 12110*x^12 + 9657*x^10 + 4893*x^8 + 1548*x^6 + 291*
....: x^4 + 27*x^2 + 1,'b'))
True
```

l.7860: a terrible test of a weird function. The method `neg()` takes a parameter n which is not used (but is not optional), in the test a is used for the parameter (confusing), and -- worse -- the a which appears in the putput has nothing to do with the identifier a, it is a name chosen internally for some generator.

I think these three methods (neg, invert, conjugate) need attention.  The docstring for `conjugate()` wrongly says it returns the negation, a cut-and-paste error.

Years ago I spent a while improving the doctests in this >8000-line file but gave up after doing quite a lot!

I am willing to make a branch fixing all these except the first one (src/sage/parallel/decorate.py). Should I base that on u/dimpase/packages/pari2151 ?



---

archive/issue_comments_557943.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nThanks for stepping in, John. Apparently Pari itself has not been changed in https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435 - besides dropping the questionable compiler switch.\n\nYes, please base your branch (much appreciated!) on the ticket branch.",
    "created_at": "2023-01-03T11:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557943",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:126" align="right">comment:126</div>

Thanks for stepping in, John. Apparently Pari itself has not been changed in https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435 - besides dropping the questionable compiler switch.

Yes, please base your branch (much appreciated!) on the ticket branch.



---

archive/issue_comments_557944.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [Dima Pasechnik](#comment%3A126):\n> Thanks for stepping in, John. Apparently Pari itself has not been changed in https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435 - besides dropping the questionable compiler switch.\n> \n> Yes, please base your branch (much appreciated!) on the ticket branch.\n\nOK, building now...",
    "created_at": "2023-01-03T12:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557944",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [Dima Pasechnik](#comment%3A126):
> Thanks for stepping in, John. Apparently Pari itself has not been changed in https://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=2435 - besides dropping the questionable compiler switch.
> 
> Yes, please base your branch (much appreciated!) on the ticket branch.

OK, building now...



---

archive/issue_comments_557945.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\n@dimpase, to avoid these errors:\n\n```\nmake --no-print-directory pari-SAGE_LOCAL-no-deps\n[pari-2.15.2-pre1] Attempting to download package pari-2.15.2-pre1.tar.gz from mirrors\n[pari-2.15.2-pre1] https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz\n[pari-2.15.2-pre1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n[pari-2.15.2-pre1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz'\n```\nwhat should I do?  Put that tarball into my local upstream/ ?",
    "created_at": "2023-01-03T12:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557945",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:128" align="right">comment:128</div>

@dimpase, to avoid these errors:

```
make --no-print-directory pari-SAGE_LOCAL-no-deps
[pari-2.15.2-pre1] Attempting to download package pari-2.15.2-pre1.tar.gz from mirrors
[pari-2.15.2-pre1] https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz
[pari-2.15.2-pre1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[pari-2.15.2-pre1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz'
```
what should I do?  Put that tarball into my local upstream/ ?



---

archive/issue_comments_557946.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [John Cremona](#comment%3A128):\n> @dimpase, to avoid these errors:\n> \n> ```\n> make --no-print-directory pari-SAGE_LOCAL-no-deps\n> [pari-2.15.2-pre1] Attempting to download package pari-2.15.2-pre1.tar.gz from mirrors\n> [pari-2.15.2-pre1] https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz\n> [pari-2.15.2-pre1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n> [pari-2.15.2-pre1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz'\n> ```\n> what should I do?  Put that tarball into my local upstream/ ?\n\nthese errors are OK - but indeed, you can put the tarball into upstream/ to avoid chasing it down.\n\nI also usually edit the mirror list to have just one entry - then these go quick\n\n```\n$ cat upstream/mirror_list\n['https://www.mirrorservice.org/sites/www.sagemath.org/']\n```",
    "created_at": "2023-01-03T12:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557946",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [John Cremona](#comment%3A128):
> @dimpase, to avoid these errors:
> 
> ```
> make --no-print-directory pari-SAGE_LOCAL-no-deps
> [pari-2.15.2-pre1] Attempting to download package pari-2.15.2-pre1.tar.gz from mirrors
> [pari-2.15.2-pre1] https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz
> [pari-2.15.2-pre1] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
> [pari-2.15.2-pre1] ERROR [transfer|run:135]: [Errno 404] Not Found: '//www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pari/pari-2.15.2-pre1.tar.gz'
> ```
> what should I do?  Put that tarball into my local upstream/ ?

these errors are OK - but indeed, you can put the tarball into upstream/ to avoid chasing it down.

I also usually edit the mirror list to have just one entry - then these go quick

```
$ cat upstream/mirror_list
['https://www.mirrorservice.org/sites/www.sagemath.org/']
```



---

archive/issue_comments_557947.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nThanks, that is working.  When I saw those errors I assumed that nothing would work, not realising that after these failures it somehow knew to get it from https://pari.math.u-bordeaux.fr/pub/pari/snapshots/pari-2.15.2-pre1.tar.gz",
    "created_at": "2023-01-03T13:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557947",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:130" align="right">comment:130</div>

Thanks, that is working.  When I saw those errors I assumed that nothing would work, not realising that after these failures it somehow knew to get it from https://pari.math.u-bordeaux.fr/pub/pari/snapshots/pari-2.15.2-pre1.tar.gz



---

archive/issue_comments_557948.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nchecksums.ini file has upstream-url field,used  to fetch upstream tarball, if it can't be found in the mirrors. This is the default since a recent beta, to always try doing so.",
    "created_at": "2023-01-03T13:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557948",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:131" align="right">comment:131</div>

checksums.ini file has upstream-url field,used  to fetch upstream tarball, if it can't be found in the mirrors. This is the default since a recent beta, to always try doing so.



---

archive/issue_comments_557949.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nWith Dima's branch I get no test failures in the 4 files listed above.  Were those test failures on a 32-bit machine?  Otherwise I'm not sure what to do now.",
    "created_at": "2023-01-03T14:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557949",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:132" align="right">comment:132</div>

With Dima's branch I get no test failures in the 4 files listed above.  Were those test failures on a 32-bit machine?  Otherwise I'm not sure what to do now.



---

archive/issue_comments_557950.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nplease change the ticket branch to your  branch, and set it to needs review. It will get tested by bots then.",
    "created_at": "2023-01-03T15:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557950",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:133" align="right">comment:133</div>

please change the ticket branch to your  branch, and set it to needs review. It will get tested by bots then.



---

archive/issue_comments_557951.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nyes, the errors are on a 32-bit machine.",
    "created_at": "2023-01-03T15:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557951",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:134" align="right">comment:134</div>

yes, the errors are on a 32-bit machine.



---

archive/issue_comments_557952.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nJohn, anyhow, if you post an improved as you outlined above branch, we can test it on [GitHub](../wiki/GitHub) actions.",
    "created_at": "2023-01-05T09:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557952",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:135" align="right">comment:135</div>

John, anyhow, if you post an improved as you outlined above branch, we can test it on [GitHub](../wiki/GitHub) actions.



---

archive/issue_comments_557953.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nReplying to [Dima Pasechnik](#comment%3A135):\n> John, anyhow, if you post an improved as you outlined above branch, we can test it on [GitHub](../wiki/GitHub) actions.\n\nOK -- so I will revise those tests which  fail on 32-bit to make them work better with regard to non-deterministic outputs.",
    "created_at": "2023-01-05T09:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557953",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:136" align="right">comment:136</div>

Replying to [Dima Pasechnik](#comment%3A135):
> John, anyhow, if you post an improved as you outlined above branch, we can test it on [GitHub](../wiki/GitHub) actions.

OK -- so I will revise those tests which  fail on 32-bit to make them work better with regard to non-deterministic outputs.



---

archive/issue_comments_557954.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/pari2151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari2151)** to **[u/cremona/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/34537)**",
    "created_at": "2023-01-05T11:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557954",
    "user": "https://github.com/JohnCremona"
}
```

Changed branch from **[u/dimpase/packages/pari2151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari2151)** to **[u/cremona/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/34537)**



---

archive/issue_events_468059.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2023-01-05T11:35:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468059"
}
```



---

archive/issue_events_468060.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2023-01-05T11:35:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468060"
}
```



---

archive/issue_comments_557955.json:
```json
{
    "body": "Changed commit from **[`e3e74ef`](https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859)** to **[`9364489`](https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce)**",
    "created_at": "2023-01-05T11:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557955",
    "user": "https://github.com/JohnCremona"
}
```

Changed commit from **[`e3e74ef`](https://github.com/sagemath/sagetrac-mirror/commit/e3e74ef7d2b54a96118a53427b43ef6515b72859)** to **[`9364489`](https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce)**



---

archive/issue_comments_557956.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nI changed all the problematic tests (except for the first one using `@`fork) in such a way that they test what they should without being affected by non-unique output.  I have only tested this on a 64-bit machine.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fe2fc931d7ff69d0bcdcbecba934c4b3c339fa7\"><code>7fe2fc9</code></a></td><td><code>#34537: make number_field_element tests more robust</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/852f3552f3f1bfad83f5e6735d66acbb3dcb2630\"><code>852f355</code></a></td><td><code>#34537: make number_field_ideal_rel tests more robust</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce\"><code>9364489</code></a></td><td><code>#34537: make qqbar tests more robust</code></td></tr></table>\n",
    "created_at": "2023-01-05T11:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557956",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:137" align="right">comment:137</div>

I changed all the problematic tests (except for the first one using `@`fork) in such a way that they test what they should without being affected by non-unique output.  I have only tested this on a 64-bit machine.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fe2fc931d7ff69d0bcdcbecba934c4b3c339fa7"><code>7fe2fc9</code></a></td><td><code>#34537: make number_field_element tests more robust</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/852f3552f3f1bfad83f5e6735d66acbb3dcb2630"><code>852f355</code></a></td><td><code>#34537: make number_field_ideal_rel tests more robust</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce"><code>9364489</code></a></td><td><code>#34537: make qqbar tests more robust</code></td></tr></table>




---

archive/issue_comments_557957.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nOn 32bit (using `FROM_DOCKER_REPOSITORY=ghcr.io/mkoeppe/sage/ FROM_DOCKER_TAG=9.5-107571-ga6e51e5bfe tox -e docker-debian-buster-i386-minimal-incremental`):\n\n```\n./sage -tp --long src/sage/rings\nAll tests passed!\n```",
    "created_at": "2023-01-05T20:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557957",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:138" align="right">comment:138</div>

On 32bit (using `FROM_DOCKER_REPOSITORY=ghcr.io/mkoeppe/sage/ FROM_DOCKER_TAG=9.5-107571-ga6e51e5bfe tox -e docker-debian-buster-i386-minimal-incremental`):

```
./sage -tp --long src/sage/rings
All tests passed!
```



---

archive/issue_comments_557958.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nCan I as a reviewer give this a positive review?  The changes I made we're almost all to do tests.",
    "created_at": "2023-01-07T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557958",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:139" align="right">comment:139</div>

Can I as a reviewer give this a positive review?  The changes I made we're almost all to do tests.



---

archive/issue_comments_557959.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\ndoctests",
    "created_at": "2023-01-07T08:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557959",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:140" align="right">comment:140</div>

doctests



---

archive/issue_events_468061.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T09:46:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468061"
}
```



---

archive/issue_events_468062.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T09:46:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468062"
}
```



---

archive/issue_comments_557960.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nyes, positive",
    "created_at": "2023-01-07T09:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557960",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:141" align="right">comment:141</div>

yes, positive



---

archive/issue_comments_557961.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\na bit too early - we need to set the URL for the tarball top the released 2.15.2, not to this snapshot (they should be equal though)",
    "created_at": "2023-01-07T21:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557961",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:142" align="right">comment:142</div>

a bit too early - we need to set the URL for the tarball top the released 2.15.2, not to this snapshot (they should be equal though)



---

archive/issue_events_468063.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T21:11:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468063"
}
```



---

archive/issue_events_468064.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T21:11:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468064"
}
```



---

archive/issue_events_468065.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T21:12:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "title_is": "Upgrade to pari 2.15.2",
    "title_was": "Upgrade to pari 2.15.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468065"
}
```



---

archive/issue_events_468066.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T22:35:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468066"
}
```



---

archive/issue_events_468067.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2023-01-07T22:35:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468067"
}
```



---

archive/issue_comments_557962.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\npurely mechanic change of the identical, but differently named, tarball\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa\"><code>9e858c3</code></a></td><td><code>use the released 2.15.2 tarball</code></td></tr></table>\n",
    "created_at": "2023-01-07T22:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557962",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:144" align="right">comment:144</div>

purely mechanic change of the identical, but differently named, tarball

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa"><code>9e858c3</code></a></td><td><code>use the released 2.15.2 tarball</code></td></tr></table>




---

archive/issue_comments_557963.json:
```json
{
    "body": "Changed branch from **[u/cremona/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/34537)** to **[u/dimpase/packages/pari/2.15.2](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari/2.15.2)**",
    "created_at": "2023-01-07T22:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557963",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/cremona/34537](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/34537)** to **[u/dimpase/packages/pari/2.15.2](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pari/2.15.2)**



---

archive/issue_comments_557964.json:
```json
{
    "body": "Changed commit from **[`9364489`](https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce)** to **[`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)**",
    "created_at": "2023-01-07T22:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557964",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`9364489`](https://github.com/sagemath/sagetrac-mirror/commit/936448968028539453d666e4811fa3e50bd29cce)** to **[`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)**



---

archive/issue_comments_557965.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nWith commit 9364489 (and some other tickets merged), I see the following on `fedora-37-minimal` (https://github.com/mkoeppe/sage/actions/runs/3853109922/jobs/6586249291)\n\n```\nsage -t --random-seed=307282812518142614549559529759942029026 src/sage/schemes/elliptic_curves/hom_frobenius.py\n**********************************************************************\nFile \"src/sage/schemes/elliptic_curves/hom_frobenius.py\", line 461, in sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual\nFailed example:\n    p in (2,3) or f.dual().dual() == f\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/sage/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual[17]>\", line 1, in <module>\n        p in (Integer(2),Integer(3)) or f.dual().dual() == f\n                                        ^^^^^^^^^^^^^^^^^^^^\n      File \"sage/structure/element.pyx\", line 1109, in sage.structure.element.Element.__richcmp__\n        return (<Element>self)._richcmp_(other, op)\n      File \"sage/categories/morphism.pyx\", line 341, in sage.categories.morphism.Morphism._richcmp_\n        cpdef _richcmp_(self, other, int op):\n      File \"/sage/src/sage/schemes/elliptic_curves/hom.py\", line 221, in _richcmp_\n        ret = self._comparison_impl(self, other, op)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n      File \"/sage/src/sage/schemes/elliptic_curves/hom_composite.py\", line 584, in _comparison_impl\n        return compare_via_evaluation(left, right)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n      File \"/sage/src/sage/schemes/elliptic_curves/hom.py\", line 779, in compare_via_evaluation\n        Ps = EE.gens()\n             ^^^^^^^^^\n      File \"sage/misc/cachefunc.pyx\", line 2297, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__\n        self.cache = f(self._instance)\n      File \"/sage/src/sage/schemes/elliptic_curves/ell_finite_field.py\", line 819, in gens\n        card, ords, pts = self.__pari__().ellgroup(flag=1)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n      File \"cypari2/auto_gen.pxi\", line 8027, in cypari2.gen.Gen_base.ellgroup\n      File \"cypari2/handle_error.pyx\", line 213, in cypari2.handle_error._pari_err_handle\n    cypari2.handle_error.PariError: impossible inverse in Fl_inv: Mod(31, 31)\n**********************************************************************\n1 item had failures:\n   1 of  19 in sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual\n    [117 tests, 1 failure, 13.47 s]\n```\nTo inspect: `docker run -it ghcr.io/mkoeppe/sage/sage-docker-fedora-37-minimal-with-targets-optional:9.5-107758-g45159d349c`",
    "created_at": "2023-01-08T00:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557965",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:145" align="right">comment:145</div>

With commit 9364489 (and some other tickets merged), I see the following on `fedora-37-minimal` (https://github.com/mkoeppe/sage/actions/runs/3853109922/jobs/6586249291)

```
sage -t --random-seed=307282812518142614549559529759942029026 src/sage/schemes/elliptic_curves/hom_frobenius.py
**********************************************************************
File "src/sage/schemes/elliptic_curves/hom_frobenius.py", line 461, in sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual
Failed example:
    p in (2,3) or f.dual().dual() == f
Exception raised:
    Traceback (most recent call last):
      File "/sage/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual[17]>", line 1, in <module>
        p in (Integer(2),Integer(3)) or f.dual().dual() == f
                                        ^^^^^^^^^^^^^^^^^^^^
      File "sage/structure/element.pyx", line 1109, in sage.structure.element.Element.__richcmp__
        return (<Element>self)._richcmp_(other, op)
      File "sage/categories/morphism.pyx", line 341, in sage.categories.morphism.Morphism._richcmp_
        cpdef _richcmp_(self, other, int op):
      File "/sage/src/sage/schemes/elliptic_curves/hom.py", line 221, in _richcmp_
        ret = self._comparison_impl(self, other, op)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File "/sage/src/sage/schemes/elliptic_curves/hom_composite.py", line 584, in _comparison_impl
        return compare_via_evaluation(left, right)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File "/sage/src/sage/schemes/elliptic_curves/hom.py", line 779, in compare_via_evaluation
        Ps = EE.gens()
             ^^^^^^^^^
      File "sage/misc/cachefunc.pyx", line 2297, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__
        self.cache = f(self._instance)
      File "/sage/src/sage/schemes/elliptic_curves/ell_finite_field.py", line 819, in gens
        card, ords, pts = self.__pari__().ellgroup(flag=1)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File "cypari2/auto_gen.pxi", line 8027, in cypari2.gen.Gen_base.ellgroup
      File "cypari2/handle_error.pyx", line 213, in cypari2.handle_error._pari_err_handle
    cypari2.handle_error.PariError: impossible inverse in Fl_inv: Mod(31, 31)
**********************************************************************
1 item had failures:
   1 of  19 in sage.schemes.elliptic_curves.hom_frobenius.EllipticCurveHom_frobenius.dual
    [117 tests, 1 failure, 13.47 s]
```
To inspect: `docker run -it ghcr.io/mkoeppe/sage/sage-docker-fedora-37-minimal-with-targets-optional:9.5-107758-g45159d349c`



---

archive/issue_comments_557966.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nThis error is caused by some other newly merged patch #33915. I think the author of that (Lorenz Penny) needs to look at this.\n\nIt will be a very great pity if the pari upgrade missed this release!",
    "created_at": "2023-01-08T14:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557966",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:146" align="right">comment:146</div>

This error is caused by some other newly merged patch #33915. I think the author of that (Lorenz Penny) needs to look at this.

It will be a very great pity if the pari upgrade missed this release!



---

archive/issue_comments_557967.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nThanks for the pointer! I've opened #34900 for this failure.",
    "created_at": "2023-01-08T23:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557967",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:147" align="right">comment:147</div>

Thanks for the pointer! I've opened #34900 for this failure.



---

archive/issue_comments_557968.json:
```json
{
    "body": "<div id=\"comment:148\" align=\"right\">comment:148</div>\n\nThe failure seems to be due to a PARI bug which is unrelated to both #33915 and this ticket. I added a minimal failing example to #34900.",
    "created_at": "2023-01-09T02:06:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557968",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:148" align="right">comment:148</div>

The failure seems to be due to a PARI bug which is unrelated to both #33915 and this ticket. I added a minimal failing example to #34900.



---

archive/issue_comments_557969.json:
```json
{
    "body": "<div id=\"comment:149\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee4094ff2719e5bec8792151f3847a7fcfe2430c\"><code>ee4094f</code></a></td><td><code>add patch for Pari bug #2441, cf trac 34900</code></td></tr></table>\n",
    "created_at": "2023-01-14T23:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:149"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee4094ff2719e5bec8792151f3847a7fcfe2430c"><code>ee4094f</code></a></td><td><code>add patch for Pari bug #2441, cf trac 34900</code></td></tr></table>




---

archive/issue_events_468068.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2023-01-14T23:56:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468068"
}
```



---

archive/issue_events_468069.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2023-01-14T23:56:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34537#event-468069"
}
```



---

archive/issue_comments_557970.json:
```json
{
    "body": "Changed commit from **[`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)** to **[`ee4094f`](https://github.com/sagemath/sagetrac-mirror/commit/ee4094ff2719e5bec8792151f3847a7fcfe2430c)**",
    "created_at": "2023-01-14T23:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557970",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e858c3`](https://github.com/sagemath/sagetrac-mirror/commit/9e858c38130e3a6dec8c3ebdee8af5a6e652e8aa)** to **[`ee4094f`](https://github.com/sagemath/sagetrac-mirror/commit/ee4094ff2719e5bec8792151f3847a7fcfe2430c)**



---

archive/issue_comments_557971.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nAdd a patch to fix #34900 - see also [comment:145](#comment%3A145)",
    "created_at": "2023-01-14T23:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34537#issuecomment-557971",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:150" align="right">comment:150</div>

Add a patch to fix #34900 - see also [comment:145](#comment%3A145)
