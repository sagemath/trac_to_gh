# Issue 34168: Fix docstring markup in sage/categories

archive/issues_033931.json:
```json
{
    "body": "Part of #34157:\n\n```\nsage/categories/unique_factorization_domains.py:74:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\nsage/categories/unique_factorization_domains.py:223:1: RST303 Unknown directive type \"seealso\".\nsage/categories/unique_factorization_domains.py:273:1: RST303 Unknown directive type \"seealso\".\nsage/categories/fields.py:76:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\nsage/categories/category.py:1394:1: RST303 Unknown directive type \"todo\".\nsage/categories/finite_coxeter_groups.py:204:1: RST303 Unknown directive type \"todo\".\nsage/categories/finite_coxeter_groups.py:466:1: RST303 Unknown directive type \"todo\".\nsage/categories/rings.py:388:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\nsage/categories/affine_weyl_groups.py:21:1: RST303 Unknown directive type \"todo\".\nsage/categories/integral_domains.py:58:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\nsage/categories/facade_sets.py:189:1: RST205 Explicit markup ends without a blank line; unexpected unindent.\nsage/categories/hecke_modules.py:111:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\nsage/categories/category_with_axiom.py:752:1: RST201 Block quote ends without a blank line; unexpected unindent.\n```\n\nCC:  @mkoeppe @tscrim\n\nBranch/Commit: 80d7f8f4047c999758a141ae2cea777c27d776f0\n\nReviewer: Matthias Koeppe\n\nAuthor: John Palmieri\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34168\n\n",
    "closed_at": "2022-07-28T19:09:56Z",
    "created_at": "2022-07-12T06:15:01Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix docstring markup in sage/categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34168",
    "user": "https://github.com/kwankyu"
}
```
Part of #34157:

```
sage/categories/unique_factorization_domains.py:74:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
sage/categories/unique_factorization_domains.py:223:1: RST303 Unknown directive type "seealso".
sage/categories/unique_factorization_domains.py:273:1: RST303 Unknown directive type "seealso".
sage/categories/fields.py:76:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
sage/categories/category.py:1394:1: RST303 Unknown directive type "todo".
sage/categories/finite_coxeter_groups.py:204:1: RST303 Unknown directive type "todo".
sage/categories/finite_coxeter_groups.py:466:1: RST303 Unknown directive type "todo".
sage/categories/rings.py:388:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
sage/categories/affine_weyl_groups.py:21:1: RST303 Unknown directive type "todo".
sage/categories/integral_domains.py:58:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
sage/categories/facade_sets.py:189:1: RST205 Explicit markup ends without a blank line; unexpected unindent.
sage/categories/hecke_modules.py:111:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
sage/categories/category_with_axiom.py:752:1: RST201 Block quote ends without a blank line; unexpected unindent.
```

CC:  @mkoeppe @tscrim

Branch/Commit: 80d7f8f4047c999758a141ae2cea777c27d776f0

Reviewer: Matthias Koeppe

Author: John Palmieri

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34168





---

archive/issue_comments_680731.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+Part of #34157:\n+\n ```\n sage/categories/unique_factorization_domains.py:74:1: RST215 Inline interpreted text or phrase reference start-string without end-string.\n sage/categories/unique_factorization_domains.py:223:1: RST303 Unknown directive type \"seealso\".\n``````\n",
    "created_at": "2022-07-12T07:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680731",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+Part of #34157:
+
 ```
 sage/categories/unique_factorization_domains.py:74:1: RST215 Inline interpreted text or phrase reference start-string without end-string.
 sage/categories/unique_factorization_domains.py:223:1: RST303 Unknown directive type "seealso".
``````




---

archive/issue_comments_680732.json:
```json
{
    "body": "<a id='comment:2'></a>I don't understand this one:\n\n```\nsage/categories/category_with_axiom.py:752:1: RST201 Block quote ends without a blank line; unexpected unindent.\n```\nThe relevant lines seem to be\n\n```\nAxioms defined upon other axioms\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n```\nbut I don't know what's wrong with that.",
    "created_at": "2022-07-12T21:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680732",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>I don't understand this one:

```
sage/categories/category_with_axiom.py:752:1: RST201 Block quote ends without a blank line; unexpected unindent.
```
The relevant lines seem to be

```
Axioms defined upon other axioms
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```
but I don't know what's wrong with that.



---

archive/issue_comments_680733.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/categories-docfixes\"",
    "created_at": "2022-07-12T21:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680733",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/categories-docfixes"



---

archive/issue_comments_680734.json:
```json
{
    "body": "Changing commit from \"\" to \"be5851f1975792161018cff63f15154fe600bcaf\"",
    "created_at": "2022-07-12T21:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680734",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "be5851f1975792161018cff63f15154fe600bcaf"



---

archive/issue_comments_680735.json:
```json
{
    "body": "<a id='comment:4'></a>So far this branch addresses the other issues, but not `category_with_axiom.py`.\n\n---\nNew commits:",
    "created_at": "2022-07-12T21:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680735",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>So far this branch addresses the other issues, but not `category_with_axiom.py`.

---
New commits:



---

archive/issue_comments_680736.json:
```json
{
    "body": "<a id='comment:5'></a>exact same issue for me, as I tried without seing that you did the job alreay",
    "created_at": "2022-07-13T09:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680736",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>exact same issue for me, as I tried without seing that you did the job alreay



---

archive/issue_comments_680737.json:
```json
{
    "body": "<a id='comment:7'></a>Not sure about this change (and similar changes) on the branch:\n\n```\ndiff --git a/src/sage/categories/hecke_modules.py b/src/sage/categories/hecke_modules.py\nindex 6590034..06dcb99 100644\n--- a/src/sage/categories/hecke_modules.py\n+++ b/src/sage/categories/hecke_modules.py\n@@ -109,7 +109,7 @@ class HeckeModules(Category_module):\n             INPUT:\n \n             - ``Y`` -- an Hecke module\n-            - ``category`` -- a subcategory of :class:`HeckeModules`() or None\n+            - ``category`` -- a subcategory of :class:`HeckeModules` or None\n \n             The sole purpose of this method is to construct the homset\n             as a :class:`~sage.modular.hecke.homspace.HeckeModuleHomspace`. If\n```\nI think we would want to keep the parentheses there.\nDoes something like\n\n```\n+            - ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``\n```\nwork?",
    "created_at": "2022-07-13T16:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680737",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Not sure about this change (and similar changes) on the branch:

```
diff --git a/src/sage/categories/hecke_modules.py b/src/sage/categories/hecke_modules.py
index 6590034..06dcb99 100644
--- a/src/sage/categories/hecke_modules.py
+++ b/src/sage/categories/hecke_modules.py
@@ -109,7 +109,7 @@ class HeckeModules(Category_module):
             INPUT:
 
             - ``Y`` -- an Hecke module
-            - ``category`` -- a subcategory of :class:`HeckeModules`() or None
+            - ``category`` -- a subcategory of :class:`HeckeModules` or None
 
             The sole purpose of this method is to construct the homset
             as a :class:`~sage.modular.hecke.homspace.HeckeModuleHomspace`. If
```
I think we would want to keep the parentheses there.
Does something like

```
+            - ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``
```
work?



---

archive/issue_comments_680738.json:
```json
{
    "body": "<a id='comment:8'></a>I'm not sure what you mean by \"work\". I believe that all of those changes are in underscore methods and so by default do not appear in the reference manual. If I use\n\n```\n- ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``\n```\nthen the output from `M._Hom_?` in the notebook looks ugly:\n\n```\n* \"category\" -- a subcategory of \"HeckeModules\" \"()\" or \"None\"\n```\nI can't successfully build the docs with underscore methods included, so it's hard to test more broadly.",
    "created_at": "2022-07-13T17:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680738",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>I'm not sure what you mean by "work". I believe that all of those changes are in underscore methods and so by default do not appear in the reference manual. If I use

```
- ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``
```
then the output from `M._Hom_?` in the notebook looks ugly:

```
* "category" -- a subcategory of "HeckeModules" "()" or "None"
```
I can't successfully build the docs with underscore methods included, so it's hard to test more broadly.



---

archive/issue_comments_680739.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-13T20:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_680740.json:
```json
{
    "body": "Changing commit from \"be5851f1975792161018cff63f15154fe600bcaf\" to \"80d7f8f4047c999758a141ae2cea777c27d776f0\"",
    "created_at": "2022-07-13T20:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "be5851f1975792161018cff63f15154fe600bcaf" to "80d7f8f4047c999758a141ae2cea777c27d776f0"



---

archive/issue_comments_680741.json:
```json
{
    "body": "<a id='comment:10'></a>Okay, here is markup that I hope will make everyone happy.",
    "created_at": "2022-07-13T20:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680741",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>Okay, here is markup that I hope will make everyone happy.



---

archive/issue_comments_680742.json:
```json
{
    "body": "<a id='comment:11'></a>Back to the `category_with_axioms.py` puzzle: if I make this change, the error goes away:\n\n```diff\ndiff --git a/src/sage/categories/category_with_axiom.py b/src/sage/categories/category_with_axiom.py\nindex 237ad5dfed..302902a5e5 100644\n--- a/src/sage/categories/category_with_axiom.py\n+++ b/src/sage/categories/category_with_axiom.py\n@@ -749,7 +749,7 @@ The infrastructure would then be in charge of building the appropriate\n arborescence under the hood. Or rely on some database (see discussion\n on :trac:`10963`, in particular at the end of comment 332).\n \n-Axioms defined upon other axioms\n+axioms defined upon other axioms\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n Sometimes an axiom can only be defined when some other axiom\n```\nCan anyone explain this? A bug in flake8?",
    "created_at": "2022-07-13T20:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680742",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>Back to the `category_with_axioms.py` puzzle: if I make this change, the error goes away:

```diff
diff --git a/src/sage/categories/category_with_axiom.py b/src/sage/categories/category_with_axiom.py
index 237ad5dfed..302902a5e5 100644
--- a/src/sage/categories/category_with_axiom.py
+++ b/src/sage/categories/category_with_axiom.py
@@ -749,7 +749,7 @@ The infrastructure would then be in charge of building the appropriate
 arborescence under the hood. Or rely on some database (see discussion
 on :trac:`10963`, in particular at the end of comment 332).
 
-Axioms defined upon other axioms
+axioms defined upon other axioms
 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 
 Sometimes an axiom can only be defined when some other axiom
```
Can anyone explain this? A bug in flake8?



---

archive/issue_comments_680743.json:
```json
{
    "body": "<a id='comment:12'></a>We could skip this file, but I would prefer if we could understand and solve the problem.",
    "created_at": "2022-07-13T20:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680743",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>We could skip this file, but I would prefer if we could understand and solve the problem.



---

archive/issue_comments_680744.json:
```json
{
    "body": "<a id='comment:13'></a>Maybe the issue is that \"Axioms\" is the title of the file: the file starts\n\n```\nr\"\"\"\nAxioms\n\nThis documentation covers how to implement axioms and proceeds with an\n...\n```\nIf I change that to \"Axiom\" or \"AXIOMS\", the problem goes away. Maybe `flake8` or its rst parser are (too?) aggressive in searching for duplicate headers? We could make this change, for example:\n\n```diff\ndiff --git a/src/sage/categories/category_with_axiom.py b/src/sage/categories/category_with_axiom.py\nindex 237ad5dfed..665a303166 100644\n--- a/src/sage/categories/category_with_axiom.py\n+++ b/src/sage/categories/category_with_axiom.py\n@@ -1,5 +1,5 @@\n r\"\"\"\n-Axioms\n+Axioms for categories\n \n This documentation covers how to implement axioms and proceeds with an\n overview of the implementation of the axiom infrastructure. It assumes\n```\nalthough I don't really like the idea of having to work around other people's bugs.",
    "created_at": "2022-07-13T20:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680744",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>Maybe the issue is that "Axioms" is the title of the file: the file starts

```
r"""
Axioms

This documentation covers how to implement axioms and proceeds with an
...
```
If I change that to "Axiom" or "AXIOMS", the problem goes away. Maybe `flake8` or its rst parser are (too?) aggressive in searching for duplicate headers? We could make this change, for example:

```diff
diff --git a/src/sage/categories/category_with_axiom.py b/src/sage/categories/category_with_axiom.py
index 237ad5dfed..665a303166 100644
--- a/src/sage/categories/category_with_axiom.py
+++ b/src/sage/categories/category_with_axiom.py
@@ -1,5 +1,5 @@
 r"""
-Axioms
+Axioms for categories
 
 This documentation covers how to implement axioms and proceeds with an
 overview of the implementation of the axiom infrastructure. It assumes
```
although I don't really like the idea of having to work around other people's bugs.



---

archive/issue_comments_680745.json:
```json
{
    "body": "<a id='comment:14'></a>This bug seems to strike whenever\n\n- the title of the file is a single word, and\n- that word begins another line in the file\n\nIt doesn't seem to mind if the title word appears by itself on another line. If the title is \"Axioms\", then a line starting \"Axioms are\" will cause an error but a line containing just \"Axioms\" is fine.",
    "created_at": "2022-07-13T21:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680745",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>This bug seems to strike whenever

- the title of the file is a single word, and
- that word begins another line in the file

It doesn't seem to mind if the title word appears by itself on another line. If the title is "Axioms", then a line starting "Axioms are" will cause an error but a line containing just "Axioms" is fine.



---

archive/issue_comments_680746.json:
```json
{
    "body": "<a id='comment:15'></a>A single-word first line seems to match the regex in\n https://github.com/peterjc/flake8-rst-docstrings/blob/master/flake8_rst_docstrings.py#L197",
    "created_at": "2022-07-13T23:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680746",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>A single-word first line seems to match the regex in
 https://github.com/peterjc/flake8-rst-docstrings/blob/master/flake8_rst_docstrings.py#L197



---

archive/issue_comments_680747.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:7 mkoeppe]:\n> Not sure about this change (and similar changes) on the branch:\n> \n> ```\n> diff --git a/src/sage/categories/hecke_modules.py b/src/sage/categories/hecke_modules.py\n> index 6590034..06dcb99 100644\n> --- a/src/sage/categories/hecke_modules.py\n> +++ b/src/sage/categories/hecke_modules.py\n> @@ -109,7 +109,7 @@ class HeckeModules(Category_module):\n>              INPUT:\n>  \n>              - ``Y`` -- an Hecke module\n> -            - ``category`` -- a subcategory of :class:`HeckeModules`() or None\n> +            - ``category`` -- a subcategory of :class:`HeckeModules` or None\n>  \n>              The sole purpose of this method is to construct the homset\n>              as a :class:`~sage.modular.hecke.homspace.HeckeModuleHomspace`. If\n> ```\n> I think we would want to keep the parentheses there.\n> Does something like\n> \n> ```\n> +            - ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``\n> ```\n> work?\n\n\nI am fairly opposed to those parentheses; they are unnatural to me. I think we should simply remove them. If we decided we want them to be there, we should use the `:class:`HeckeModules() <HeckeModules>`` syntax.",
    "created_at": "2022-07-14T00:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680747",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Replying to [comment:7 mkoeppe]:
> Not sure about this change (and similar changes) on the branch:
> 
> ```
> diff --git a/src/sage/categories/hecke_modules.py b/src/sage/categories/hecke_modules.py
> index 6590034..06dcb99 100644
> --- a/src/sage/categories/hecke_modules.py
> +++ b/src/sage/categories/hecke_modules.py
> @@ -109,7 +109,7 @@ class HeckeModules(Category_module):
>              INPUT:
>  
>              - ``Y`` -- an Hecke module
> -            - ``category`` -- a subcategory of :class:`HeckeModules`() or None
> +            - ``category`` -- a subcategory of :class:`HeckeModules` or None
>  
>              The sole purpose of this method is to construct the homset
>              as a :class:`~sage.modular.hecke.homspace.HeckeModuleHomspace`. If
> ```
> I think we would want to keep the parentheses there.
> Does something like
> 
> ```
> +            - ``category`` -- a subcategory of :class:`HeckeModules` ``()`` or ``None``
> ```
> work?


I am fairly opposed to those parentheses; they are unnatural to me. I think we should simply remove them. If we decided we want them to be there, we should use the `:class:`HeckeModules() <HeckeModules>`` syntax.



---

archive/issue_comments_680748.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 mkoeppe]:\n> A single-word first line seems to match the regex in\n>  https://github.com/peterjc/flake8-rst-docstrings/blob/master/flake8_rst_docstrings.py#L197\n\n\nSo they should perhaps make the change `docstring = docstring.replace(firstline, \"\") ->   docstring = docstring.replace(firstline, \"\", 1)` to just change the first occurrence.",
    "created_at": "2022-07-14T00:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680748",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>Replying to [comment:15 mkoeppe]:
> A single-word first line seems to match the regex in
>  https://github.com/peterjc/flake8-rst-docstrings/blob/master/flake8_rst_docstrings.py#L197


So they should perhaps make the change `docstring = docstring.replace(firstline, "") ->   docstring = docstring.replace(firstline, "", 1)` to just change the first occurrence.



---

archive/issue_comments_680749.json:
```json
{
    "body": "<a id='comment:18'></a>Yes, that would be a simple fix. I have isolated a testcase:\n\n```\nr\"\"\"\nAxioms\n\nThis documentation covers how to implement axioms and proceeds with an\n\nAxioms defined upon other axioms\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nConcretely, this is to be implemented by defining the new axiom in the\n\n\"\"\"\n```\n\ngets transformed to:\n\n```\n\n\nThis documentation covers how to implement axioms and proceeds with an\n\n defined upon other axioms\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nConcretely, this is to be implemented by defining the new axiom in the\nsage/categories/category_with_axiom.py:6:1: RST201 Block quote ends without a blank line; unexpected unindent.\n```\nwhich causes the error.",
    "created_at": "2022-07-14T00:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680749",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Yes, that would be a simple fix. I have isolated a testcase:

```
r"""
Axioms

This documentation covers how to implement axioms and proceeds with an

Axioms defined upon other axioms
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Concretely, this is to be implemented by defining the new axiom in the

"""
```

gets transformed to:

```


This documentation covers how to implement axioms and proceeds with an

 defined upon other axioms
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Concretely, this is to be implemented by defining the new axiom in the
sage/categories/category_with_axiom.py:6:1: RST201 Block quote ends without a blank line; unexpected unindent.
```
which causes the error.



---

archive/issue_comments_680750.json:
```json
{
    "body": "<a id='comment:19'></a>Yes, good catch, I think that's the problem. I've opened https://github.com/peterjc/flake8-rst-docstrings/issues/65. With the proposed change, `category_with_axioms.py` doesn't show this error, and neither does `misc/sagedoc.py` (with the removal of \"noreplace\" causing similar problems).",
    "created_at": "2022-07-14T00:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680750",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>Yes, good catch, I think that's the problem. I've opened https://github.com/peterjc/flake8-rst-docstrings/issues/65. With the proposed change, `category_with_axioms.py` doesn't show this error, and neither does `misc/sagedoc.py` (with the removal of "noreplace" causing similar problems).



---

archive/issue_comments_680751.json:
```json
{
    "body": "Changing author from \"\" to \"John Palmieri\"",
    "created_at": "2022-07-14T01:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680751",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "" to "John Palmieri"



---

archive/issue_comments_680752.json:
```json
{
    "body": "<a id='comment:20'></a>I'm leaving `category_with_axiom.py` as is.",
    "created_at": "2022-07-14T01:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680752",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>I'm leaving `category_with_axiom.py` as is.



---

archive/issue_comments_680753.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-14T01:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680753",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_680754.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:10 jhpalmieri]:\n> Okay, here is markup that I hope will make everyone happy.\n\n\nThanks, looking good.",
    "created_at": "2022-07-14T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Replying to [comment:10 jhpalmieri]:
> Okay, here is markup that I hope will make everyone happy.


Thanks, looking good.



---

archive/issue_comments_680755.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:16 tscrim]:\n> I am fairly opposed to those parentheses; they are unnatural to me. I think we should simply remove them. \n\n\nThe parentheses, indicating that it's talking about the unique instance, not the class, seem to be used very widely in this context, as `git grep 'subcategory of .*()'` shows.\n\n> If we decided we want them to be there, we should use the `:class:`HeckeModules() <HeckeModules>`` syntax.\n\n\nThat's what the current branch does.",
    "created_at": "2022-07-14T13:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680755",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Replying to [comment:16 tscrim]:
> I am fairly opposed to those parentheses; they are unnatural to me. I think we should simply remove them. 


The parentheses, indicating that it's talking about the unique instance, not the class, seem to be used very widely in this context, as `git grep 'subcategory of .*()'` shows.

> If we decided we want them to be there, we should use the `:class:`HeckeModules() <HeckeModules>`` syntax.


That's what the current branch does.



---

archive/issue_comments_680756.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-07-14T13:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680756",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_680757.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-14T13:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680757",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_680758.json:
```json
{
    "body": "<a id='comment:24'></a>Thanks!",
    "created_at": "2022-07-14T22:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680758",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>Thanks!



---

archive/issue_comments_680759.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-28T19:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680759",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_680760.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/categories-docfixes\" to \"80d7f8f4047c999758a141ae2cea777c27d776f0\"",
    "created_at": "2022-07-28T19:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34168#issuecomment-680760",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/categories-docfixes" to "80d7f8f4047c999758a141ae2cea777c27d776f0"



---

archive/issue_events_089193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-28T19:09:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34168",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34168#event-89193"
}
```
