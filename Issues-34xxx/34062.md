# Issue 34062: enhance our conversion system

archive/issues_033825.json:
```json
{
    "body": "Currently, we create the `symbol_table` to handle back-conversion from other systems. I will use \"giac\" as an example.\n\nFor example, we have `symbol_table[\"giac\"]`, which is a dictionary `string: func` where `string` is a function name in giac and `func` is the corresponding function in sage.\n\nProposal:\n\nEnrich the conversion dictionary as follows :\n`(string, number): func` where `number` is the number of arguments.\n\nThis allows to handle the conversion better when \"giac\" has one single function with various possible numbers of arguments and we have different functions.\n\nMore generally, this allows to be more precise in what we are doing.\n\n**Branch/Commit:** [ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)\n\n**Reviewer:** Emmanuel Charpentier\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/34062\n\n",
    "closed_at": "2022-07-09T22:32:54Z",
    "created_at": "2022-06-24T15:12:21Z",
    "labels": [
        "component: symbolics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "title": "enhance our conversion system",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/34062",
    "user": "https://github.com/fchapoton"
}
```
Currently, we create the `symbol_table` to handle back-conversion from other systems. I will use "giac" as an example.

For example, we have `symbol_table["giac"]`, which is a dictionary `string: func` where `string` is a function name in giac and `func` is the corresponding function in sage.

Proposal:

Enrich the conversion dictionary as follows :
`(string, number): func` where `number` is the number of arguments.

This allows to handle the conversion better when "giac" has one single function with various possible numbers of arguments and we have different functions.

More generally, this allows to be more precise in what we are doing.

**Branch/Commit:** [ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)

**Reviewer:** Emmanuel Charpentier

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/34062





---

archive/issue_comments_552665.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4\">71528ac</a></td><td><code>first try at enhanced conversion system</code></td></tr></table>\n",
    "created_at": "2022-06-24T15:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552665",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4">71528ac</a></td><td><code>first try at enhanced conversion system</code></td></tr></table>




---

archive/issue_comments_552666.json:
```json
{
    "body": "**Commit:** [71528ac46ef66be0879166b69562e132dd7397f4](https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4)",
    "created_at": "2022-06-24T15:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552666",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [71528ac46ef66be0879166b69562e132dd7397f4](https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4)



---

archive/issue_comments_552667.json:
```json
{
    "body": "**Branch:** [u/chapoton/34062](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34062)",
    "created_at": "2022-06-24T15:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552667",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/34062](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34062)



---

archive/issue_events_303684.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-06-24T15:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303684"
}
```



---

archive/issue_comments_552668.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n Currently, we create the `symbol_table` to handle back-conversion from other systems. I will use \"giac\" as an example.\n \n-For example, we have `symbol_table[\"giac\"]`, which is a dictionary ``string: func`` where ``string`` is a function name in giac and ``func`` is the corresponding function in sage.\n+For example, we have `symbol_table[\"giac\"]`, which is a dictionary `string: func` where `string` is a function name in giac and `func` is the corresponding function in sage.\n \n Proposal:\n \n Enrich the conversion dictionary as follows :\n-``(string, number): func`` where number is number of arguments.\n+`(string, number): func` where `number` is the number of arguments.\n \n-This allows to handle the conversion better when \"giac\" has one single function with various numbers of arguments and we have different functions.\n+This allows to handle the conversion better when \"giac\" has one single function with various possible numbers of arguments and we have different functions.\n \n More generally, this allows to be more precise in what we are doing.\n``````\n",
    "created_at": "2022-06-24T15:17:07Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552668",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
 Currently, we create the `symbol_table` to handle back-conversion from other systems. I will use "giac" as an example.
 
-For example, we have `symbol_table["giac"]`, which is a dictionary ``string: func`` where ``string`` is a function name in giac and ``func`` is the corresponding function in sage.
+For example, we have `symbol_table["giac"]`, which is a dictionary `string: func` where `string` is a function name in giac and `func` is the corresponding function in sage.
 
 Proposal:
 
 Enrich the conversion dictionary as follows :
-``(string, number): func`` where number is number of arguments.
+`(string, number): func` where `number` is the number of arguments.
 
-This allows to handle the conversion better when "giac" has one single function with various numbers of arguments and we have different functions.
+This allows to handle the conversion better when "giac" has one single function with various possible numbers of arguments and we have different functions.
 
 More generally, this allows to be more precise in what we are doing.
``````




---

archive/issue_comments_552669.json:
```json
{
    "body": "<a id='comment:3'></a>\nFor example, this happens in `Fricas` for `ellipticE` in\n\nhttps://fricas.github.io/api/SpecialFunctionCategory.html\n\nand something similar in `maple` for `Zeta` (more fishy) :\n\nhttps://fr.maplesoft.com/support/help/maple/view.aspx?path=Zeta\n\nand in `math...` for Gamma:\n\nhttps://reference.wolfram.com/language/ref/Gamma.html",
    "created_at": "2022-06-24T15:29:55Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552669",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
For example, this happens in `Fricas` for `ellipticE` in

https://fricas.github.io/api/SpecialFunctionCategory.html

and something similar in `maple` for `Zeta` (more fishy) :

https://fr.maplesoft.com/support/help/maple/view.aspx?path=Zeta

and in `math...` for Gamma:

https://reference.wolfram.com/language/ref/Gamma.html



---

archive/issue_comments_552670.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935\">b4a8566</a></td><td><code>adding wish of doctest</code></td></tr></table>\n",
    "created_at": "2022-06-24T15:37:01Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935">b4a8566</a></td><td><code>adding wish of doctest</code></td></tr></table>




---

archive/issue_comments_552671.json:
```json
{
    "body": "**Changing commit** from \"[71528ac46ef66be0879166b69562e132dd7397f4](https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4)\" to \"[b4a856604d37cdccd9081af8ef2e051f61802935](https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935)\".",
    "created_at": "2022-06-24T15:37:01Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[71528ac46ef66be0879166b69562e132dd7397f4](https://github.com/sagemath/sagetrac-mirror/commit/71528ac46ef66be0879166b69562e132dd7397f4)" to "[b4a856604d37cdccd9081af8ef2e051f61802935](https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935)".



---

archive/issue_comments_552672.json:
```json
{
    "body": "**Changing commit** from \"[b4a856604d37cdccd9081af8ef2e051f61802935](https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935)\" to \"[f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67](https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67)\".",
    "created_at": "2022-06-24T15:45:49Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b4a856604d37cdccd9081af8ef2e051f61802935](https://github.com/sagemath/sagetrac-mirror/commit/b4a856604d37cdccd9081af8ef2e051f61802935)" to "[f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67](https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67)".



---

archive/issue_comments_552673.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67\">f81a1cc</a></td><td><code>maple conversion of zeta derivatives</code></td></tr></table>\n",
    "created_at": "2022-06-24T15:45:49Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67">f81a1cc</a></td><td><code>maple conversion of zeta derivatives</code></td></tr></table>




---

archive/issue_comments_552674.json:
```json
{
    "body": "<a id='comment:6'></a>\nmaybe you could fix the typo in\n\n```\nregister_symbol(lambda: infinity, {'fricas': 'plusInfinity'}, 0) # %plusInfinity::INFORM is (minusInfinity)\n```\non the way? (\"minus\" should be \"plus\")",
    "created_at": "2022-06-24T20:51:38Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552674",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:6'></a>
maybe you could fix the typo in

```
register_symbol(lambda: infinity, {'fricas': 'plusInfinity'}, 0) # %plusInfinity::INFORM is (minusInfinity)
```
on the way? ("minus" should be "plus")



---

archive/issue_comments_552675.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b\">c76dbda</a></td><td><code>detail in fricas interface</code></td></tr></table>\n",
    "created_at": "2022-06-25T06:48:20Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b">c76dbda</a></td><td><code>detail in fricas interface</code></td></tr></table>




---

archive/issue_comments_552676.json:
```json
{
    "body": "**Changing commit** from \"[f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67](https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67)\" to \"[c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b](https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b)\".",
    "created_at": "2022-06-25T06:48:20Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67](https://github.com/sagemath/sagetrac-mirror/commit/f81a1cca7435cb65ad8bb3c1e96361d3f34ecc67)" to "[c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b](https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b)".



---

archive/issue_comments_552677.json:
```json
{
    "body": "<a id='comment:8'></a>\ndone, but the Fricas interface still breaks on hypergeometric functions, which use \"CONSTRUCT\" with an arbirary number of arguments.",
    "created_at": "2022-06-25T06:49:24Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552677",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
done, but the Fricas interface still breaks on hypergeometric functions, which use "CONSTRUCT" with an arbirary number of arguments.



---

archive/issue_comments_552678.json:
```json
{
    "body": "<a id='comment:9'></a>\nI am currently rebuilding sage with this ticket.\n\nI do not know (please take this literally, not as criticism) whether having to specify the number of arguments is the best approach.\n\nI guess it should be possible to allow for functions with an arbitrary number of arguments, eg. by specifying `None` instead.  However, FriCAS itself actually does not allow this.  I have to sort out whether `construct` is special, or whether it does fit into the usual scheme.",
    "created_at": "2022-06-25T07:22:18Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552678",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:9'></a>
I am currently rebuilding sage with this ticket.

I do not know (please take this literally, not as criticism) whether having to specify the number of arguments is the best approach.

I guess it should be possible to allow for functions with an arbitrary number of arguments, eg. by specifying `None` instead.  However, FriCAS itself actually does not allow this.  I have to sort out whether `construct` is special, or whether it does fit into the usual scheme.



---

archive/issue_comments_552679.json:
```json
{
    "body": "<a id='comment:10'></a>\nI guess the following is the easy fix.\n\n```diff\ndiff --git a/src/sage/interfaces/fricas.py b/src/sage/interfaces/fricas.py\nindex 19a56c062f4..671b4d2d085 100644\n--- a/src/sage/interfaces/fricas.py\n+++ b/src/sage/interfaces/fricas.py\n@@ -1367,7 +1367,10 @@ class FriCASElement(ExpectElement):\n         try:\n             fun = symbol_table[\"fricas\"][(fun_string, len(args))]\n         except KeyError:\n-            fun = function(fun_string)\n+            try:\n+                fun = symbol_table[\"fricas\"][(fun_string, -1)]\n+            except KeyError:\n+                fun = function(fun_string)\n         return fun(*args), a\n \n     @staticmethod\n```",
    "created_at": "2022-06-25T08:36:35Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552679",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:10'></a>
I guess the following is the easy fix.

```diff
diff --git a/src/sage/interfaces/fricas.py b/src/sage/interfaces/fricas.py
index 19a56c062f4..671b4d2d085 100644
--- a/src/sage/interfaces/fricas.py
+++ b/src/sage/interfaces/fricas.py
@@ -1367,7 +1367,10 @@ class FriCASElement(ExpectElement):
         try:
             fun = symbol_table["fricas"][(fun_string, len(args))]
         except KeyError:
-            fun = function(fun_string)
+            try:
+                fun = symbol_table["fricas"][(fun_string, -1)]
+            except KeyError:
+                fun = function(fun_string)
         return fun(*args), a
 
     @staticmethod
```



---

archive/issue_comments_552680.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2\">c0bbbe4</a></td><td><code>fix Fricas back conversion</code></td></tr></table>\n",
    "created_at": "2022-06-25T11:56:48Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2">c0bbbe4</a></td><td><code>fix Fricas back conversion</code></td></tr></table>




---

archive/issue_comments_552681.json:
```json
{
    "body": "**Changing commit** from \"[c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b](https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b)\" to \"[c0bbbe49fc41e1c841521628683c614d944e06e2](https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2)\".",
    "created_at": "2022-06-25T11:56:48Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b](https://github.com/sagemath/sagetrac-mirror/commit/c76dbda5a4ed50fb8f71b3af11e387c647c5bc6b)" to "[c0bbbe49fc41e1c841521628683c614d944e06e2](https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2)".



---

archive/issue_comments_552682.json:
```json
{
    "body": "<a id='comment:12'></a>\nnow maple interface needs to be repaired",
    "created_at": "2022-06-26T10:03:13Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552682",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
now maple interface needs to be repaired



---

archive/issue_comments_552683.json:
```json
{
    "body": "<a id='comment:13'></a>\nI don't have access to maple, sorry.",
    "created_at": "2022-06-26T10:23:35Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552683",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:13'></a>
I don't have access to maple, sorry.



---

archive/issue_comments_552684.json:
```json
{
    "body": "**Changing commit** from \"[c0bbbe49fc41e1c841521628683c614d944e06e2](https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2)\" to \"[895683e2f927d27524ff11f80e4ceaeb70cfaa69](https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69)\".",
    "created_at": "2022-06-26T10:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c0bbbe49fc41e1c841521628683c614d944e06e2](https://github.com/sagemath/sagetrac-mirror/commit/c0bbbe49fc41e1c841521628683c614d944e06e2)" to "[895683e2f927d27524ff11f80e4ceaeb70cfaa69](https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69)".



---

archive/issue_comments_552685.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69\">895683e</a></td><td><code>fix for maple interface</code></td></tr></table>\n",
    "created_at": "2022-06-26T10:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69">895683e</a></td><td><code>fix for maple interface</code></td></tr></table>




---

archive/issue_comments_552686.json:
```json
{
    "body": "<a id='comment:15'></a>\nmaple interface now fixed. Somebody needs to check the mathematica back-conversion, please.",
    "created_at": "2022-06-26T11:05:37Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552686",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
maple interface now fixed. Somebody needs to check the mathematica back-conversion, please.



---

archive/issue_comments_552687.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948\">ac8fbb1</a></td><td><code>try to fix math*** interface</code></td></tr></table>\n",
    "created_at": "2022-06-26T18:36:40Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948">ac8fbb1</a></td><td><code>try to fix math*** interface</code></td></tr></table>




---

archive/issue_comments_552688.json:
```json
{
    "body": "**Changing commit** from \"[895683e2f927d27524ff11f80e4ceaeb70cfaa69](https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69)\" to \"[ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)\".",
    "created_at": "2022-06-26T18:36:40Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[895683e2f927d27524ff11f80e4ceaeb70cfaa69](https://github.com/sagemath/sagetrac-mirror/commit/895683e2f927d27524ff11f80e4ceaeb70cfaa69)" to "[ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)".



---

archive/issue_events_303685.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-26T21:22:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303685"
}
```



---

archive/issue_events_303686.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-26T21:22:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303686"
}
```



---

archive/issue_comments_552689.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [chapoton](#comment%3A15):\n> maple interface now fixed. Somebody needs to check the mathematica back-conversion, please.\n\n\nWell...\n\n```\ncharpent@zen-book-flip:/usr/local/sage-9$ sage -t src/sage/interfaces/mathematica.py \nRunning doctests with ID 2022-06-26-23-17-49-22d13eec.\nGit branch: t/34062/34062\nGit ref: 9.7.beta3-7-gac8fbb128cd\nRunning with SAGE_LOCAL='/usr/local/sage-9/local' and SAGE_VENV='/usr/local/sage-9/local/var/lib/sage/venv-python3.10'\nUsing --optional=debian,dot2tex,fricas,gap_packages,libsemigroups,mathics,mathics_scanner,palettable,pint,pip,pysingular,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nTraceback (most recent call last):\n  File \"/usr/local/sage-9/src/bin/sage-runtests\", line 153, in <module>\n    err = DC.run()\n  File \"/usr/local/sage-9/src/sage/doctest/control.py\", line 1376, in run\n    self.run_doctests()\n  File \"/usr/local/sage-9/src/sage/doctest/control.py\", line 1052, in run_doctests\n    self.dispatcher = DocTestDispatcher(self)\n  File \"/usr/local/sage-9/src/sage/doctest/forker.py\", line 1626, in __init__\n    init_sage(controller)\n  File \"/usr/local/sage-9/src/sage/doctest/forker.py\", line 193, in init_sage\n    controller.load_environment()\n  File \"/usr/local/sage-9/src/sage/doctest/control.py\", line 589, in load_environment\n    return import_module(self.options.environment)\n  File \"/usr/lib/python3.10/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\n  File \"/usr/local/sage-9/src/sage/repl/ipython_kernel/all_jupyter.py\", line 5, in <module>\n    from sage.all_cmdline import *\n  File \"/usr/local/sage-9/src/sage/all_cmdline.py\", line 19, in <module>\n    from sage.all import *\n  File \"/usr/local/sage-9/src/sage/all.py\", line 135, in <module>\n    from sage.symbolic.all   import *\n  File \"/usr/local/sage-9/src/sage/symbolic/all.py\", line 10, in <module>\n    from .constants import (pi, e, NaN, golden_ratio, log2, euler_gamma, catalan,\n  File \"/usr/local/sage-9/src/sage/symbolic/constants.py\", line 231, in <module>\n    register_symbol(infinity, {'maxima':'inf'}, 0)\n  File \"sage/symbolic/pynac_impl.pxi\", line 2375, in sage.symbolic.expression.register_symbol\nTypeError: register_symbol() takes exactly 2 positional arguments (3 given)\n```\n\n==> `needs_work`",
    "created_at": "2022-06-26T21:22:50Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552689",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:17'></a>
Replying to [chapoton](#comment%3A15):
> maple interface now fixed. Somebody needs to check the mathematica back-conversion, please.


Well...

```
charpent@zen-book-flip:/usr/local/sage-9$ sage -t src/sage/interfaces/mathematica.py 
Running doctests with ID 2022-06-26-23-17-49-22d13eec.
Git branch: t/34062/34062
Git ref: 9.7.beta3-7-gac8fbb128cd
Running with SAGE_LOCAL='/usr/local/sage-9/local' and SAGE_VENV='/usr/local/sage-9/local/var/lib/sage/venv-python3.10'
Using --optional=debian,dot2tex,fricas,gap_packages,libsemigroups,mathics,mathics_scanner,palettable,pint,pip,pysingular,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
Traceback (most recent call last):
  File "/usr/local/sage-9/src/bin/sage-runtests", line 153, in <module>
    err = DC.run()
  File "/usr/local/sage-9/src/sage/doctest/control.py", line 1376, in run
    self.run_doctests()
  File "/usr/local/sage-9/src/sage/doctest/control.py", line 1052, in run_doctests
    self.dispatcher = DocTestDispatcher(self)
  File "/usr/local/sage-9/src/sage/doctest/forker.py", line 1626, in __init__
    init_sage(controller)
  File "/usr/local/sage-9/src/sage/doctest/forker.py", line 193, in init_sage
    controller.load_environment()
  File "/usr/local/sage-9/src/sage/doctest/control.py", line 589, in load_environment
    return import_module(self.options.environment)
  File "/usr/lib/python3.10/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/usr/local/sage-9/src/sage/repl/ipython_kernel/all_jupyter.py", line 5, in <module>
    from sage.all_cmdline import *
  File "/usr/local/sage-9/src/sage/all_cmdline.py", line 19, in <module>
    from sage.all import *
  File "/usr/local/sage-9/src/sage/all.py", line 135, in <module>
    from sage.symbolic.all   import *
  File "/usr/local/sage-9/src/sage/symbolic/all.py", line 10, in <module>
    from .constants import (pi, e, NaN, golden_ratio, log2, euler_gamma, catalan,
  File "/usr/local/sage-9/src/sage/symbolic/constants.py", line 231, in <module>
    register_symbol(infinity, {'maxima':'inf'}, 0)
  File "sage/symbolic/pynac_impl.pxi", line 2375, in sage.symbolic.expression.register_symbol
TypeError: register_symbol() takes exactly 2 positional arguments (3 given)
```

==> `needs_work`



---

archive/issue_comments_552690.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [charpent](#comment%3A17):\n> Replying to [chapoton](#comment%3A15):\n\n\n[ Snip... ]\n\n> ==> `needs_work`\n\n\nWell... `configure --enable-editable` wasn('t sufficint in this case. After re-`make`ing :\n\n```\ncharpent@zen-book-flip:/usr/local/sage-9$ sage -t src/sage/interfaces/mathematica.py \nRunning doctests with ID 2022-06-26-23-34-51-5fc132c3.\nGit branch: t/34062/34062\nGit ref: 9.7.beta3-7-gac8fbb128cd\nRunning with SAGE_LOCAL='/usr/local/sage-9/local' and SAGE_VENV='/usr/local/sage-9/local/var/lib/sage/venv-python3.10'\nUsing --optional=debian,dot2tex,fricas,gap_packages,libsemigroups,mathics,mathics_scanner,palettable,pint,pip,pysingular,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --warn-long 194.5 --random-seed=217146151663288597630828810215703796564 src/sage/interfaces/mathematica.py\n    [25 tests, 0.05 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.1 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\nFeatures detected for doctesting: \npytest is not installed in the venv, skip checking tests that rely on it\n```\n\n==> `needs_review`. Sorry for the noise...\n\n`ptestlong` underway. Stay tuned.",
    "created_at": "2022-06-26T21:40:03Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552690",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:18'></a>
Replying to [charpent](#comment%3A17):
> Replying to [chapoton](#comment%3A15):


[ Snip... ]

> ==> `needs_work`


Well... `configure --enable-editable` wasn('t sufficint in this case. After re-`make`ing :

```
charpent@zen-book-flip:/usr/local/sage-9$ sage -t src/sage/interfaces/mathematica.py 
Running doctests with ID 2022-06-26-23-34-51-5fc132c3.
Git branch: t/34062/34062
Git ref: 9.7.beta3-7-gac8fbb128cd
Running with SAGE_LOCAL='/usr/local/sage-9/local' and SAGE_VENV='/usr/local/sage-9/local/var/lib/sage/venv-python3.10'
Using --optional=debian,dot2tex,fricas,gap_packages,libsemigroups,mathics,mathics_scanner,palettable,pint,pip,pysingular,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --warn-long 194.5 --random-seed=217146151663288597630828810215703796564 src/sage/interfaces/mathematica.py
    [25 tests, 0.05 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.1 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds
Features detected for doctesting: 
pytest is not installed in the venv, skip checking tests that rely on it
```

==> `needs_review`. Sorry for the noise...

`ptestlong` underway. Stay tuned.



---

archive/issue_events_303687.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-26T21:40:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303687"
}
```



---

archive/issue_events_303688.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-26T21:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303688"
}
```



---

archive/issue_comments_552691.json:
```json
{
    "body": "<a id='comment:19'></a>\n`ptestlong` gets the same failures as it does on `develop`.\n\n==>`positive_review`.\n\nI suggest a further check against the Wolfram engine before proceeding, but can't do that for to days (at least).\n\nHTH,",
    "created_at": "2022-06-27T03:10:56Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552691",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:19'></a>
`ptestlong` gets the same failures as it does on `develop`.

==>`positive_review`.

I suggest a further check against the Wolfram engine before proceeding, but can't do that for to days (at least).

HTH,



---

archive/issue_events_303689.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-27T03:10:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303689"
}
```



---

archive/issue_events_303690.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2022-06-27T03:10:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303690"
}
```



---

archive/issue_comments_552692.json:
```json
{
    "body": "<a id='comment:20'></a>\nReviewer name",
    "created_at": "2022-06-27T03:21:38Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552692",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
Reviewer name



---

archive/issue_comments_552693.json:
```json
{
    "body": "**Reviewer:** Emmanuel Charpentier",
    "created_at": "2022-06-27T06:06:49Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552693",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Reviewer:** Emmanuel Charpentier



---

archive/issue_comments_552694.json:
```json
{
    "body": "<a id='comment:21'></a>\nWups !Again...",
    "created_at": "2022-06-27T06:06:49Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552694",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:21'></a>
Wups !Again...



---

archive/issue_comments_552695.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/34062](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34062)\" to \"[ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)\".",
    "created_at": "2022-07-09T22:32:54Z",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34062#issuecomment-552695",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/34062](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34062)" to "[ac8fbb128cdb9b63a1ead6ea30ea58873e943948](https://github.com/sagemath/sagetrac-mirror/commit/ac8fbb128cdb9b63a1ead6ea30ea58873e943948)".



---

archive/issue_events_303691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-09T22:32:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303691"
}
```



---

archive/issue_events_303692.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-09T22:32:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34062",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34062#event-303692"
}
```
