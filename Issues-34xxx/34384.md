# Issue 34384: Proper ForgetfulFunctor with codomain=Sets() or its full subcategories

archive/issues_034147.json:
```json
{
    "body": "part of Meta-ticket #31247: `ForgetfulFunctor` not working properly\n\nHere we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.\n\nWe also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n\nThe implementation constructs a `Set_object` wrapper.\n\nFollow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.\n\n\nCC:  @tscrim simonking\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories\n\nStatus: needs_review\n\nDependencies: #34376\n\nCommit: de46932ebef2c6d92e6bb3f07243764ffaac0829\n\nIssue created by migration from https://trac.sagemath.org/ticket/34384\n\n",
    "created_at": "2022-08-17T18:18:26Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Proper ForgetfulFunctor with codomain=Sets() or its full subcategories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34384",
    "user": "https://github.com/mkoeppe"
}
```
part of Meta-ticket #31247: `ForgetfulFunctor` not working properly

Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.

We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).

The implementation constructs a `Set_object` wrapper.

Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.


CC:  @tscrim simonking

Author: Matthias Koeppe

Branch: u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories

Status: needs_review

Dependencies: #34376

Commit: de46932ebef2c6d92e6bb3f07243764ffaac0829

Issue created by migration from https://trac.sagemath.org/ticket/34384





---

archive/issue_comments_684925.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#34376\"",
    "created_at": "2022-08-17T18:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684925",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#34376"



---

archive/issue_comments_684926.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,8 @@\n \n Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.\n \n+We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n \n+The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.\n+\n+\n``````\n",
    "created_at": "2022-08-17T18:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684926",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,8 @@
 
 Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.
 
+We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).
 
+The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.
+
+
``````




---

archive/issue_comments_684927.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories\"",
    "created_at": "2022-08-17T19:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684927",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories"



---

archive/issue_comments_684928.json:
```json
{
    "body": "Changing commit from \"\" to \"2a4e2e24c74708a7e38f0b0f14e649d8b6d67818\"",
    "created_at": "2022-08-17T20:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "2a4e2e24c74708a7e38f0b0f14e649d8b6d67818"



---

archive/issue_comments_684929.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-17T20:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_684930.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-17T20:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684930",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_684931.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-08-17T20:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684931",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_684932.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-18T01:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_684933.json:
```json
{
    "body": "Changing commit from \"2a4e2e24c74708a7e38f0b0f14e649d8b6d67818\" to \"c47147e891d5a502b53dfbd13ec0ab186f40efd9\"",
    "created_at": "2022-08-18T01:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684933",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a4e2e24c74708a7e38f0b0f14e649d8b6d67818" to "c47147e891d5a502b53dfbd13ec0ab186f40efd9"



---

archive/issue_comments_684934.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-18T05:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_684935.json:
```json
{
    "body": "Changing commit from \"c47147e891d5a502b53dfbd13ec0ab186f40efd9\" to \"9c21cca0d6cc1dab01249cc8591d15e7ccaaf205\"",
    "created_at": "2022-08-18T05:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c47147e891d5a502b53dfbd13ec0ab186f40efd9" to "9c21cca0d6cc1dab01249cc8591d15e7ccaaf205"



---

archive/issue_comments_684936.json:
```json
{
    "body": "Changing commit from \"9c21cca0d6cc1dab01249cc8591d15e7ccaaf205\" to \"808f0e616b85604f381779c7028c3e32613f09ba\"",
    "created_at": "2022-08-18T05:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9c21cca0d6cc1dab01249cc8591d15e7ccaaf205" to "808f0e616b85604f381779c7028c3e32613f09ba"



---

archive/issue_comments_684937.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-18T05:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_684938.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-18T18:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_684939.json:
```json
{
    "body": "Changing commit from \"808f0e616b85604f381779c7028c3e32613f09ba\" to \"de46932ebef2c6d92e6bb3f07243764ffaac0829\"",
    "created_at": "2022-08-18T18:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "808f0e616b85604f381779c7028c3e32613f09ba" to "de46932ebef2c6d92e6bb3f07243764ffaac0829"



---

archive/issue_comments_684940.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n \n-The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.\n+The implementation constructs a `Set_object` wrapper.\n \n+Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.\n \n``````\n",
    "created_at": "2022-08-19T16:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684940",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).
 
-The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.
+The implementation constructs a `Set_object` wrapper.
 
+Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.
 
``````




---

archive/issue_comments_684941.json:
```json
{
    "body": "<a id='comment:11'></a>Should the `Set_object` class be equipped with a `construction` method that returns the `ForgetfulFunctor`? Should `ForgetfulFunctor` become a `ConstructionFunctor`?",
    "created_at": "2022-08-19T17:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684941",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Should the `Set_object` class be equipped with a `construction` method that returns the `ForgetfulFunctor`? Should `ForgetfulFunctor` become a `ConstructionFunctor`?



---

archive/issue_events_089454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34384#event-89454"
}
```
