# Issue 34384: Proper ForgetfulFunctor with codomain=Sets() or its full subcategories

archive/issues_034147.json:
```json
{
    "body": "part of Meta-ticket #31247: `ForgetfulFunctor` not working properly\n\nHere we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.\n\nWe also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n\nThe implementation constructs a `Set_object` wrapper.\n\nFollow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.\n\n\nCC:  @tscrim simonking\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories\n\nStatus: needs_review\n\nDependencies: #34376\n\nCommit: de46932ebef2c6d92e6bb3f07243764ffaac0829\n\nIssue created by migration from https://trac.sagemath.org/ticket/34384\n\n",
    "created_at": "2022-08-17T18:18:26Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Proper ForgetfulFunctor with codomain=Sets() or its full subcategories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34384",
    "user": "https://github.com/mkoeppe"
}
```
part of Meta-ticket #31247: `ForgetfulFunctor` not working properly

Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.

We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).

The implementation constructs a `Set_object` wrapper.

Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.


CC:  @tscrim simonking

Author: Matthias Koeppe

Branch: u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories

Status: needs_review

Dependencies: #34376

Commit: de46932ebef2c6d92e6bb3f07243764ffaac0829

Issue created by migration from https://trac.sagemath.org/ticket/34384





---

archive/issue_comments_684502.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#34376\"",
    "created_at": "2022-08-17T18:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684502",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#34376"



---

archive/issue_comments_684503.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,8 @@\n \n Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.\n \n+We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n \n+The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.\n+\n+\n``````\n",
    "created_at": "2022-08-17T18:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684503",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,8 @@
 
 Here we fix it for `codomain=Sets()` and its full subcategories such as `codomain=FiniteEnumeratedSets()`.
 
+We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).
 
+The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.
+
+
``````




---

archive/issue_comments_684504.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories\"",
    "created_at": "2022-08-17T19:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684504",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/proper_forgetfulfunctor_with_codomain_sets___or_its_full_subcategories"



---

archive/issue_comments_684505.json:
```json
{
    "body": "Changing commit from \"\" to \"2a4e2e24c74708a7e38f0b0f14e649d8b6d67818\"",
    "created_at": "2022-08-17T20:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "2a4e2e24c74708a7e38f0b0f14e649d8b6d67818"



---

archive/issue_comments_684506.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[b19a1ff](https://github.com/sagemath/sagetrac-mirror/commit/b19a1ffe144f09f01aea3134630a2a8262c41c32)|`src/sage/sets/set.py: Accept and handle 'category' arguments`|\n|[e510e9e](https://github.com/sagemath/sagetrac-mirror/commit/e510e9eaf81c6db9a01267d2e5461a2c6146a000)|`Merge #34376`|\n|[2a4e2e2](https://github.com/sagemath/sagetrac-mirror/commit/2a4e2e24c74708a7e38f0b0f14e649d8b6d67818)|`ForgetfulFunctor_Sets: New`|",
    "created_at": "2022-08-17T20:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[b19a1ff](https://github.com/sagemath/sagetrac-mirror/commit/b19a1ffe144f09f01aea3134630a2a8262c41c32)|`src/sage/sets/set.py: Accept and handle 'category' arguments`|
|[e510e9e](https://github.com/sagemath/sagetrac-mirror/commit/e510e9eaf81c6db9a01267d2e5461a2c6146a000)|`Merge #34376`|
|[2a4e2e2](https://github.com/sagemath/sagetrac-mirror/commit/2a4e2e24c74708a7e38f0b0f14e649d8b6d67818)|`ForgetfulFunctor_Sets: New`|



---

archive/issue_comments_684507.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-17T20:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684507",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_684508.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-08-17T20:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684508",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_684509.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[c47147e](https://github.com/sagemath/sagetrac-mirror/commit/c47147e891d5a502b53dfbd13ec0ab186f40efd9)|`src/sage/categories/sets_cat.py: Mention ForgetfulFunctor`|",
    "created_at": "2022-08-18T01:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[c47147e](https://github.com/sagemath/sagetrac-mirror/commit/c47147e891d5a502b53dfbd13ec0ab186f40efd9)|`src/sage/categories/sets_cat.py: Mention ForgetfulFunctor`|



---

archive/issue_comments_684510.json:
```json
{
    "body": "Changing commit from \"2a4e2e24c74708a7e38f0b0f14e649d8b6d67818\" to \"c47147e891d5a502b53dfbd13ec0ab186f40efd9\"",
    "created_at": "2022-08-18T01:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a4e2e24c74708a7e38f0b0f14e649d8b6d67818" to "c47147e891d5a502b53dfbd13ec0ab186f40efd9"



---

archive/issue_comments_684511.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[d461411](https://github.com/sagemath/sagetrac-mirror/commit/d461411617f8bca18f3e9575daaa3adf3bed1551)|`Update doctest outputs`|\n|[df327b9](https://github.com/sagemath/sagetrac-mirror/commit/df327b9d5d76bc5b9807a937b7bb04ed334b60ae)|`src/sage/sets/set.py: Refine categories of unions, intersections, differences`|\n|[8a30493](https://github.com/sagemath/sagetrac-mirror/commit/8a304931879a0ce4292d284439c8e717540755cf)|`src/sage/sets/set.py: Simplify category checks as suggested`|\n|[141ebf1](https://github.com/sagemath/sagetrac-mirror/commit/141ebf14d80478128540f39ff1bac46e80eaca26)|`src/sage/categories/sets_cat.py: Update doctest output`|\n|[8aa274e](https://github.com/sagemath/sagetrac-mirror/commit/8aa274ef877e4c987daa7d20fa761d2e5af94567)|`src/sage/categories/sets_cat.py: Fix doctest`|\n|[9c21cca](https://github.com/sagemath/sagetrac-mirror/commit/9c21cca0d6cc1dab01249cc8591d15e7ccaaf205)|`Merge #34376`|",
    "created_at": "2022-08-18T05:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[d461411](https://github.com/sagemath/sagetrac-mirror/commit/d461411617f8bca18f3e9575daaa3adf3bed1551)|`Update doctest outputs`|
|[df327b9](https://github.com/sagemath/sagetrac-mirror/commit/df327b9d5d76bc5b9807a937b7bb04ed334b60ae)|`src/sage/sets/set.py: Refine categories of unions, intersections, differences`|
|[8a30493](https://github.com/sagemath/sagetrac-mirror/commit/8a304931879a0ce4292d284439c8e717540755cf)|`src/sage/sets/set.py: Simplify category checks as suggested`|
|[141ebf1](https://github.com/sagemath/sagetrac-mirror/commit/141ebf14d80478128540f39ff1bac46e80eaca26)|`src/sage/categories/sets_cat.py: Update doctest output`|
|[8aa274e](https://github.com/sagemath/sagetrac-mirror/commit/8aa274ef877e4c987daa7d20fa761d2e5af94567)|`src/sage/categories/sets_cat.py: Fix doctest`|
|[9c21cca](https://github.com/sagemath/sagetrac-mirror/commit/9c21cca0d6cc1dab01249cc8591d15e7ccaaf205)|`Merge #34376`|



---

archive/issue_comments_684512.json:
```json
{
    "body": "Changing commit from \"c47147e891d5a502b53dfbd13ec0ab186f40efd9\" to \"9c21cca0d6cc1dab01249cc8591d15e7ccaaf205\"",
    "created_at": "2022-08-18T05:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c47147e891d5a502b53dfbd13ec0ab186f40efd9" to "9c21cca0d6cc1dab01249cc8591d15e7ccaaf205"



---

archive/issue_comments_684513.json:
```json
{
    "body": "Changing commit from \"9c21cca0d6cc1dab01249cc8591d15e7ccaaf205\" to \"808f0e616b85604f381779c7028c3e32613f09ba\"",
    "created_at": "2022-08-18T05:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9c21cca0d6cc1dab01249cc8591d15e7ccaaf205" to "808f0e616b85604f381779c7028c3e32613f09ba"



---

archive/issue_comments_684514.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[d711a61](https://github.com/sagemath/sagetrac-mirror/commit/d711a61aeacde364b4ab76b59e55c2f01d8a90d7)|`src/sage/structure/parent.pyx: Update doctest output`|\n|[808f0e6](https://github.com/sagemath/sagetrac-mirror/commit/808f0e616b85604f381779c7028c3e32613f09ba)|`Merge #34376`|",
    "created_at": "2022-08-18T05:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[d711a61](https://github.com/sagemath/sagetrac-mirror/commit/d711a61aeacde364b4ab76b59e55c2f01d8a90d7)|`src/sage/structure/parent.pyx: Update doctest output`|
|[808f0e6](https://github.com/sagemath/sagetrac-mirror/commit/808f0e616b85604f381779c7028c3e32613f09ba)|`Merge #34376`|



---

archive/issue_comments_684515.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[de46932](https://github.com/sagemath/sagetrac-mirror/commit/de46932ebef2c6d92e6bb3f07243764ffaac0829)|`src/sage/categories/functor.pyx: Fix doc markup`|",
    "created_at": "2022-08-18T18:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[de46932](https://github.com/sagemath/sagetrac-mirror/commit/de46932ebef2c6d92e6bb3f07243764ffaac0829)|`src/sage/categories/functor.pyx: Fix doc markup`|



---

archive/issue_comments_684516.json:
```json
{
    "body": "Changing commit from \"808f0e616b85604f381779c7028c3e32613f09ba\" to \"de46932ebef2c6d92e6bb3f07243764ffaac0829\"",
    "created_at": "2022-08-18T18:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "808f0e616b85604f381779c7028c3e32613f09ba" to "de46932ebef2c6d92e6bb3f07243764ffaac0829"



---

archive/issue_comments_684517.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).\n \n-The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.\n+The implementation constructs a `Set_object` wrapper.\n \n+Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.\n \n``````\n",
    "created_at": "2022-08-19T16:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684517",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 We also add a warning for all other unimplemented cases (= when domain is not a full subcategory of codomain).
 
-The implementation constructs a `Set_object` wrapper, which needs a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets.
+The implementation constructs a `Set_object` wrapper.
 
+Follow-up ticket: `Set_object` etc. need a modification too: Currently equality testing (`Set_object.__richcmp__`) just delegates to the wrapped parents, so it does not take place on the level of sets, where equality of two sets means that they contain the same elements.
 
``````




---

archive/issue_comments_684518.json:
```json
{
    "body": "<a id='comment:11'></a>\nShould the `Set_object` class be equipped with a `construction` method that returns the `ForgetfulFunctor`? Should `ForgetfulFunctor` become a `ConstructionFunctor`?",
    "created_at": "2022-08-19T17:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34384#issuecomment-684518",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Should the `Set_object` class be equipped with a `construction` method that returns the `ForgetfulFunctor`? Should `ForgetfulFunctor` become a `ConstructionFunctor`?



---

archive/issue_events_100752.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34384",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34384#event-100752"
}
```
