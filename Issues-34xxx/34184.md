# Issue 34184: from_lehmer_cocode

archive/issues_033947.json:
```json
{
    "body": "New feature to make it possible to get a permutation from its Lehmer cocode. A function to get the Lehmer cocode of a given permutation already exists.\n\nCC:  @jessicapalencia @tscrim @mantepse\n\nKeywords: permutations\n\nBranch/Commit: 0158e181079e17d015ccb2b9330cf74de73c4ed6\n\nReviewer: Jessica Striker, Travis Scrimshaw\n\nAuthor: Nadia Lafreni\u00e8re\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34184\n\n",
    "closed_at": "2022-10-30T10:31:01Z",
    "created_at": "2022-07-14T17:46:06Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "from_lehmer_cocode",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34184",
    "user": "https://github.com/nadialafreniere"
}
```
New feature to make it possible to get a permutation from its Lehmer cocode. A function to get the Lehmer cocode of a given permutation already exists.

CC:  @jessicapalencia @tscrim @mantepse

Keywords: permutations

Branch/Commit: 0158e181079e17d015ccb2b9330cf74de73c4ed6

Reviewer: Jessica Striker, Travis Scrimshaw

Author: Nadia Lafreni√®re

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34184





---

archive/issue_comments_514987.json:
```json
{
    "body": "<a id='comment:1'></a>Looks good. You could add the following code that exists in the from_lehmer_code function to take care of the case where it's an empty permutation:\n\n    if parent is None:\n        parent = Permutations()\n    return parent(p)\n\nAfter you add that, you could move the status to 'needs review' and someone could review it. (I don't have a working development version of Sage at the moment, so I can't do a full review.)",
    "created_at": "2022-08-04T18:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514987",
    "user": "https://github.com/jessicapalencia"
}
```

<a id='comment:1'></a>Looks good. You could add the following code that exists in the from_lehmer_code function to take care of the case where it's an empty permutation:

    if parent is None:
        parent = Permutations()
    return parent(p)

After you add that, you could move the status to 'needs review' and someone could review it. (I don't have a working development version of Sage at the moment, so I can't do a full review.)



---

archive/issue_comments_514988.json:
```json
{
    "body": "<a id='comment:2'></a>Thanks, Jessica, for looking at it!\nI think that what you suggested is taken into account by the input of the function. In `from_lehmer_code`, the default for the parent is `None`, whereas I set the default for the parent to be `Permutations()` here. Isn't that doing the same?",
    "created_at": "2022-08-04T18:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514988",
    "user": "https://github.com/nadialafreniere"
}
```

<a id='comment:2'></a>Thanks, Jessica, for looking at it!
I think that what you suggested is taken into account by the input of the function. In `from_lehmer_code`, the default for the parent is `None`, whereas I set the default for the parent to be `Permutations()` here. Isn't that doing the same?



---

archive/issue_comments_514989.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-04T19:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514989",
    "user": "https://github.com/jessicapalencia"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_514990.json:
```json
{
    "body": "<a id='comment:3'></a>I didn't see that. Yes, then I think the function looks good as-is. I'll set it to 'needs review'.",
    "created_at": "2022-08-04T19:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514990",
    "user": "https://github.com/jessicapalencia"
}
```

<a id='comment:3'></a>I didn't see that. Yes, then I think the function looks good as-is. I'll set it to 'needs review'.



---

archive/issue_comments_514991.json:
```json
{
    "body": "<a id='comment:5'></a>I don't think you should assume that `lehmer` is a list. So I would replace\n\n```diff\n-    lehmer.reverse()\n-    open_spots = list(range(1,len(lehmer)+1))\n-    for ivi in lehmer:\n-        p.append(open_spots.pop(len(lehmer)-i-ivi))\n+    ell = len(lehmer)\n+    open_spots = list(range(1,ell+1))\n+    for ivi in reversed(lehmer):\n+        p.append(open_spots.pop(ell-i-ivi))\n         i += 1\n```\n(You could also limit the subtractions by doing `i = ell` and `i -= 1` instead.)",
    "created_at": "2022-08-08T06:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514991",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>I don't think you should assume that `lehmer` is a list. So I would replace

```diff
-    lehmer.reverse()
-    open_spots = list(range(1,len(lehmer)+1))
-    for ivi in lehmer:
-        p.append(open_spots.pop(len(lehmer)-i-ivi))
+    ell = len(lehmer)
+    open_spots = list(range(1,ell+1))
+    for ivi in reversed(lehmer):
+        p.append(open_spots.pop(ell-i-ivi))
         i += 1
```
(You could also limit the subtractions by doing `i = ell` and `i -= 1` instead.)



---

archive/issue_comments_514992.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-09T15:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514992",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_089210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34184#event-89210"
}
```



---

archive/issue_comments_514993.json:
```json
{
    "body": "<a id='comment:8'></a>so, good to go, maybe ? Travis, do you agree ?",
    "created_at": "2022-10-21T18:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514993",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>so, good to go, maybe ? Travis, do you agree ?



---

archive/issue_comments_514994.json:
```json
{
    "body": "<a id='comment:9'></a>Yes. Sorry for not noticing the update; I didn't get an email when the push was done.",
    "created_at": "2022-10-22T06:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514994",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>Yes. Sorry for not noticing the update; I didn't get an email when the push was done.



---

archive/issue_comments_514995.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-10-22T06:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514995",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_514996.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-10-30T10:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34184#issuecomment-514996",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-30T10:31:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34184",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34184#event-89211"
}
```
