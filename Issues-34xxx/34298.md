# Issue 34298: conda: 3d graphics do not show

archive/issues_034061.json:
```json
{
    "assignees": [],
    "body": "Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.\n\n```\nsage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\nLaunched html viewer for Graphics3d Object\n```\nThe file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.\nThere is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`\n\n```\n(base) yzh@Yuans-MacBook threejs $ ls\nLICENSE\u00a0 \u00a0 \u00a0 build\u00a0 \u00a0 \u00a0 \u00a0 package.json version\nREADME.md\u00a0 \u00a0 examples \u00a0 \u00a0 src\n```\n\nThe problem does not appear in Jupyter Notebook.\n\nThe problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.\n\n\nCC:  @mkoeppe @isuruf\n\nBranch/Commit: **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**\n\nReviewer: **Yuan Zhou, Matthias Koeppe**\n\nAuthor: **Isuru Fernando**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34298_\n\n",
    "closed_at": "2022-08-29T11:24:34Z",
    "created_at": "2022-08-07T06:46:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "conda: 3d graphics do not show",
    "type": "issue",
    "updated_at": "2022-08-29T11:24:34Z",
    "url": "https://github.com/sagemath/sage/issues/34298",
    "user": "https://github.com/yuan-zhou"
}
```
Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.

```
sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
Launched html viewer for Graphics3d Object
```
The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.
There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`

```
(base) yzh@Yuans-MacBook threejs $ ls
LICENSE      build        package.json version
README.md    examples     src
```

The problem does not appear in Jupyter Notebook.

The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.


CC:  @mkoeppe @isuruf

Branch/Commit: **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**

Reviewer: **Yuan Zhou, Matthias Koeppe**

Author: **Isuru Fernando**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/34298_





---

archive/issue_events_468895.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-07T06:46:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468895"
}
```



---

archive/issue_events_468896.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-07T06:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468896"
}
```



---

archive/issue_events_468897.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-07T06:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468897"
}
```



---

archive/issue_events_468898.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2022-08-07T06:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468898"
}
```



---

archive/issue_comments_553975.json:
```json
{
    "body": "Attachment: **[graphic.html.gz](https://github.com/sagemath/sage/files/ticket34298/graphic.html.gz)**",
    "created_at": "2022-08-07T06:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553975",
    "user": "https://github.com/yuan-zhou"
}
```

Attachment: **[graphic.html.gz](https://github.com/sagemath/sage/files/ticket34298/graphic.html.gz)**



---

archive/issue_comments_553976.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[graphic_online_true.html.gz](https://github.com/sagemath/sage/files/ticket34298/graphic_online_true.html.gz)**",
    "created_at": "2022-08-07T06:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553976",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[graphic_online_true.html.gz](https://github.com/sagemath/sage/files/ticket34298/graphic_online_true.html.gz)**



---

archive/issue_comments_553977.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,16 @@\n sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\n Launched html viewer for Graphics3d Object\n ```\n+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.\n+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`\n+\n+```\n+(base) yzh@Yuans-MacBook threejs $ ls\n+LICENSE\u00a0 \u00a0 \u00a0 build\u00a0 \u00a0 \u00a0 \u00a0 package.json version\n+README.md\u00a0 \u00a0 examples \u00a0 \u00a0 src\n+```\n \n The problem does not appear in Jupyter Notebook.\n+\n The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.\n \n``````\n",
    "created_at": "2022-08-07T17:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553977",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,16 @@
 sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
 Launched html viewer for Graphics3d Object
 ```
+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.
+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`
+
+```
+(base) yzh@Yuans-MacBook threejs $ ls
+LICENSE      build        package.json version
+README.md    examples     src
+```
 
 The problem does not appear in Jupyter Notebook.
+
 The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.
 
``````




---

archive/issue_events_468899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-07T17:24:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "title_is": "conda: 3d graphics do not show",
    "title_was": "3d graphics do not show",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468899"
}
```



---

archive/issue_comments_553978.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Using Conda and Chrome, the following gives an empty page. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.\n+Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.\n \n ```\n sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\n``````\n",
    "created_at": "2022-08-07T17:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553978",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Using Conda and Chrome, the following gives an empty page. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.
+Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.
 
 ```
 sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
``````




---

archive/issue_events_468900.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-07T17:27:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468900"
}
```



---

archive/issue_events_468901.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-07T17:27:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468901"
}
```



---

archive/issue_comments_553979.json:
```json
{
    "body": "Branch: **[u/isuruf/threejs-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/threejs-conda)**",
    "created_at": "2022-08-07T22:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553979",
    "user": "https://github.com/isuruf"
}
```

Branch: **[u/isuruf/threejs-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/threejs-conda)**



---

archive/issue_comments_553980.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9\"><code>0477269</code></a></td><td><code>Update threejs-sage conda package name</code></td></tr></table>\n",
    "created_at": "2022-08-07T22:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553980",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9"><code>0477269</code></a></td><td><code>Update threejs-sage conda package name</code></td></tr></table>




---

archive/issue_comments_553981.json:
```json
{
    "body": "Author: **Isuru Fernando**",
    "created_at": "2022-08-07T22:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553981",
    "user": "https://github.com/isuruf"
}
```

Author: **Isuru Fernando**



---

archive/issue_events_468902.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2022-08-07T22:45:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468902"
}
```



---

archive/issue_comments_553982.json:
```json
{
    "body": "Commit: **[`0477269`](https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9)**",
    "created_at": "2022-08-07T22:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553982",
    "user": "https://github.com/isuruf"
}
```

Commit: **[`0477269`](https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9)**



---

archive/issue_comments_553983.json:
```json
{
    "body": "Changed commit from **[`0477269`](https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9)** to **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**",
    "created_at": "2022-08-07T22:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0477269`](https://github.com/sagemath/sagetrac-mirror/commit/047726974d5296fc000573513c2864cb00f420e9)** to **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**



---

archive/issue_comments_553984.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431\"><code>cc5a551</code></a></td><td><code>Update threejs-sage conda package name</code></td></tr></table>\n",
    "created_at": "2022-08-07T22:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431"><code>cc5a551</code></a></td><td><code>Update threejs-sage conda package name</code></td></tr></table>




---

archive/issue_comments_553985.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n@yuan-zhou: To test this, merge this ticket and repeat the lines with `bootstrap` and `mamba env update` in https://doc.sagemath.org/html/en/installation/conda.html#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental",
    "created_at": "2022-08-07T22:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553985",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

@yuan-zhou: To test this, merge this ticket and repeat the lines with `bootstrap` and `mamba env update` in https://doc.sagemath.org/html/en/installation/conda.html#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental



---

archive/issue_events_468903.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-07T23:54:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468903"
}
```



---

archive/issue_events_468904.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-07T23:54:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468904"
}
```



---

archive/issue_comments_553986.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGreat! It works for me. Thank you!",
    "created_at": "2022-08-08T00:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553986",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:9" align="right">comment:9</div>

Great! It works for me. Thank you!



---

archive/issue_events_468905.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-08T00:48:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468905"
}
```



---

archive/issue_events_468906.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-08T00:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468906"
}
```



---

archive/issue_comments_553987.json:
```json
{
    "body": "Reviewer: **Yuan Zhou, Matthias Koeppe**",
    "created_at": "2022-08-08T00:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553987",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Yuan Zhou, Matthias Koeppe**



---

archive/issue_events_468907.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-29T11:24:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468907"
}
```



---

archive/issue_events_468908.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fb050b1204ec4774469e663dbe3e183d6eeef597",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-29T11:24:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34298#event-468908"
}
```



---

archive/issue_comments_553988.json:
```json
{
    "body": "Changed branch from **[u/isuruf/threejs-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/threejs-conda)** to **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**",
    "created_at": "2022-08-29T11:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34298#issuecomment-553988",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/isuruf/threejs-conda](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/threejs-conda)** to **[`cc5a551`](https://github.com/sagemath/sagetrac-mirror/commit/cc5a551ee786bf453bb1a879a09af50d8c781431)**
