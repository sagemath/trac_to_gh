# Issue 34298: conda: 3d graphics do not show

archive/issues_034061.json:
```json
{
    "body": "Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.\n\n```\nsage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\nLaunched html viewer for Graphics3d Object\n```\nThe file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.\nThere is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`\n\n```\n(base) yzh@Yuans-MacBook threejs $ ls\nLICENSE\u00a0 \u00a0 \u00a0 build\u00a0 \u00a0 \u00a0 \u00a0 package.json version\nREADME.md\u00a0 \u00a0 examples \u00a0 \u00a0 src\n```\n\nThe problem does not appear in Jupyter Notebook.\n\nThe problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.\n\n\nCC:  @mkoeppe @isuruf\n\nBranch/Commit: cc5a551ee786bf453bb1a879a09af50d8c781431\n\nReviewer: Yuan Zhou, Matthias Koeppe\n\nAuthor: Isuru Fernando\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34298\n\n",
    "closed_at": "2022-08-29T11:24:34Z",
    "created_at": "2022-08-07T06:46:37Z",
    "labels": [
        "component: graphics",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "conda: 3d graphics do not show",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34298",
    "user": "https://github.com/yuan-zhou"
}
```
Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.

```
sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
Launched html viewer for Graphics3d Object
```
The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.
There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`

```
(base) yzh@Yuans-MacBook threejs $ ls
LICENSE      build        package.json version
README.md    examples     src
```

The problem does not appear in Jupyter Notebook.

The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.


CC:  @mkoeppe @isuruf

Branch/Commit: cc5a551ee786bf453bb1a879a09af50d8c781431

Reviewer: Yuan Zhou, Matthias Koeppe

Author: Isuru Fernando

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34298





---

archive/issue_comments_683114.json:
```json
{
    "body": "Attachment [graphic.html](tarball://root/attachments/some-uuid/ticket34298/graphic.html) by @yuan-zhou created at 2022-08-07 06:47:07",
    "created_at": "2022-08-07T06:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683114",
    "user": "https://github.com/yuan-zhou"
}
```

Attachment [graphic.html](tarball://root/attachments/some-uuid/ticket34298/graphic.html) by @yuan-zhou created at 2022-08-07 06:47:07



---

archive/issue_comments_683115.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [graphic_online_true.html](tarball://root/attachments/some-uuid/ticket34298/graphic_online_true.html) by @yuan-zhou created at 2022-08-07 06:48:43",
    "created_at": "2022-08-07T06:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683115",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:1'></a>Attachment [graphic_online_true.html](tarball://root/attachments/some-uuid/ticket34298/graphic_online_true.html) by @yuan-zhou created at 2022-08-07 06:48:43



---

archive/issue_comments_683116.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,9 +4,19 @@\n sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\n Launched html viewer for Graphics3d Object\n ```\n+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.\n+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`\n+\n+```\n+(base) yzh@Yuans-MacBook threejs $ ls\n+LICENSE\u00a0 \u00a0 \u00a0 build\u00a0 \u00a0 \u00a0 \u00a0 package.json version\n+README.md\u00a0 \u00a0 examples \u00a0 \u00a0 src\n+```\n \n The problem does not appear in Jupyter Notebook.\n+\n The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.\n+\n \n Summary: 3d graphics do not show\n \n``````\n",
    "created_at": "2022-08-07T17:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683116",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,9 +4,19 @@
 sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
 Launched html viewer for Graphics3d Object
 ```
+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.
+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`
+
+```
+(base) yzh@Yuans-MacBook threejs $ ls
+LICENSE      build        package.json version
+README.md    examples     src
+```
 
 The problem does not appear in Jupyter Notebook.
+
 The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.
+
 
 Summary: 3d graphics do not show
 
``````




---

archive/issue_comments_683117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.\n+\n+```\n+sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()\n+Launched html viewer for Graphics3d Object\n+```\n+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.\n+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`\n+\n+```\n+(base) yzh@Yuans-MacBook threejs $ ls\n+LICENSE\u00a0 \u00a0 \u00a0 build\u00a0 \u00a0 \u00a0 \u00a0 package.json version\n+README.md\u00a0 \u00a0 examples \u00a0 \u00a0 src\n+```\n+\n+The problem does not appear in Jupyter Notebook.\n+\n+The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.\n \n \n Summary: 3d graphics do not show\n``````\n",
    "created_at": "2022-08-07T17:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683117",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,21 @@
+Using Sage on Conda (installed as in https://doc.sagemath.org/html/en/installation/conda.html#sec-installation-conda-develop), the following gives an empty page in Chrome. The same happens with the options `viewer='threejs'` or `viewer='jsmol'`. See attached file graphic.html.
+
+```
+sage: plot3d(lambda u,v:(u^2+v^2)/4-2,(-2,2),(-2,2)).show()
+Launched html viewer for Graphics3d Object
+```
+The file hardcodes the script as `/Users/yzh/mambaforge/envs/sage-build/share/threejs-sage/r122/three.min.js`, which does not exist.
+There is, however, a folder `/Users/yzh/mambaforge/envs/sage-build/share/threejs`
+
+```
+(base) yzh@Yuans-MacBook threejs $ ls
+LICENSE      build        package.json version
+README.md    examples     src
+```
+
+The problem does not appear in Jupyter Notebook.
+
+The problem does not appear either if the option `online=True` is provided. See attached file graphic_online_true.html.
 
 
 Summary: 3d graphics do not show
``````




---

archive/issue_comments_683118.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-08-07T17:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683118",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_683119.json:
```json
{
    "body": "Changing branch from \"\" to \"u/isuruf/threejs-conda\"",
    "created_at": "2022-08-07T22:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683119",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "" to "u/isuruf/threejs-conda"



---

archive/issue_comments_683120.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2022-08-07T22:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683120",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_683121.json:
```json
{
    "body": "Changing author from \"\" to \"Isuru Fernando\"",
    "created_at": "2022-08-07T22:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683121",
    "user": "https://github.com/isuruf"
}
```

Changing author from "" to "Isuru Fernando"



---

archive/issue_comments_683122.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-07T22:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683122",
    "user": "https://github.com/isuruf"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_683123.json:
```json
{
    "body": "Changing commit from \"\" to \"047726974d5296fc000573513c2864cb00f420e9\"",
    "created_at": "2022-08-07T22:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683123",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "" to "047726974d5296fc000573513c2864cb00f420e9"



---

archive/issue_comments_683124.json:
```json
{
    "body": "Changing commit from \"047726974d5296fc000573513c2864cb00f420e9\" to \"cc5a551ee786bf453bb1a879a09af50d8c781431\"",
    "created_at": "2022-08-07T22:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "047726974d5296fc000573513c2864cb00f420e9" to "cc5a551ee786bf453bb1a879a09af50d8c781431"



---

archive/issue_comments_683125.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-07T22:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_683126.json:
```json
{
    "body": "<a id='comment:7'></a>`@`yzh: To test this, merge this ticket and repeat the lines with `bootstrap` and `mamba env update` in https://doc.sagemath.org/html/en/installation/conda.html#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental",
    "created_at": "2022-08-07T22:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683126",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>`@`yzh: To test this, merge this ticket and repeat the lines with `bootstrap` and `mamba env update` in https://doc.sagemath.org/html/en/installation/conda.html#using-conda-to-provide-all-dependencies-for-the-sage-library-experimental



---

archive/issue_comments_683127.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2022-08-07T23:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683127",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_683128.json:
```json
{
    "body": "<a id='comment:9'></a>Great! It works for me. Thank you!",
    "created_at": "2022-08-08T00:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683128",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:9'></a>Great! It works for me. Thank you!



---

archive/issue_comments_683129.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-08T00:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683129",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_683130.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Yuan Zhou, Matthias Koeppe\"",
    "created_at": "2022-08-08T00:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683130",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Yuan Zhou, Matthias Koeppe"



---

archive/issue_comments_683131.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-29T11:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683131",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089348.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-29T11:24:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34298#event-89348"
}
```



---

archive/issue_comments_683132.json:
```json
{
    "body": "Changing branch from \"u/isuruf/threejs-conda\" to \"cc5a551ee786bf453bb1a879a09af50d8c781431\"",
    "created_at": "2022-08-29T11:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34298",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34298#issuecomment-683132",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/isuruf/threejs-conda" to "cc5a551ee786bf453bb1a879a09af50d8c781431"
