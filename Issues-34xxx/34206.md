# Issue 34206: suitesparse: Update to 6.0.1, fix DESTDIR bug

archive/issues_033969.json:
```json
{
    "assignees": [],
    "body": "(from [#34203 comment:34](https://github.com/sagemath/sage/issues/34203#comment:34))\n\n```\n[suitesparse-5.10.1] gcc -std=c99 -L/Users/mkoeppe/s/sage/sage-rebasing/local/lib -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/local/lib  -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib -dynamiclib -compatibility_version 1 -current_version 1.0.2 -Wl,-install_name -Wl,/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.dylib -shared -undefined dynamic_lookup slip_matrix_div.o slip_create_mpq_array.o SLIP_free.o SLIP_LU_factorize.o SLIP_realloc.o slip_matrix_mul.o slip_get_largest_pivot.o slip_ref_triangular_solve.o SLIP_backslash.o slip_create_mpz_array.o slip_get_nonzero_pivot.o SLIP_LU_solve.o slip_back_sub.o slip_cumsum.o slip_get_pivot.o SLIP_malloc.o slip_sparse_collapse.o SLIP_calloc.o slip_dfs.o slip_get_smallest_pivot.o SLIP_matrix_allocate.o slip_sparse_realloc.o slip_cast_array.o slip_expand_double_array.o SLIP_gmp.o SLIP_matrix_copy.o SLIP_matrix_check.o slip_cast_matrix.o slip_expand_mpfr_array.o SLIP_initialize.o SLIP_matrix_free.o slip_check_solution.o slip_expand_mpq_array.o SLIP_initialize_expert.o SLIP_matrix_nnz.o SLIP_create_default_options.o SLIP_finalize.o SLIP_LU_analysis_free.o slip_permute_x.o slip_permute_b.o slip_create_mpfr_array.o slip_forward_sub.o SLIP_LU_analyze.o slip_reach.o -o /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib -lm -rpath /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib -lsuitesparseconfig -lamd -lcolamd -lm -lgmp -lmpfr\n```\n\n`DESTDIR` is used twice in the `-o`.\n\n`DESTDIR` handling is coming from `build/pkgs/suitesparse/patches/03-buildflags.patch`\n\nWe upgrade to 5.12.0 and pick up a fresh set of patches from Debian or another distro\n\n\nDepends on #34746\nDepends on #34835\n\nCC:  @kiwifb\n\nBranch/Commit: **[u/mkoeppe/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse6.0.1) @ [`424cb49`](https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e)**\n\nAuthor: **Fran\u00e7ois Bissey**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34206_\n\n",
    "created_at": "2022-07-21T17:06:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "suitesparse: Update to 6.0.1, fix DESTDIR bug",
    "type": "issue",
    "updated_at": "2022-12-31T21:31:21Z",
    "url": "https://github.com/sagemath/sage/issues/34206",
    "user": "https://github.com/mkoeppe"
}
```
(from [#34203 comment:34](https://github.com/sagemath/sage/issues/34203#comment:34))

```
[suitesparse-5.10.1] gcc -std=c99 -L/Users/mkoeppe/s/sage/sage-rebasing/local/lib -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/local/lib  -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/lib -L/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib -dynamiclib -compatibility_version 1 -current_version 1.0.2 -Wl,-install_name -Wl,/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.dylib -shared -undefined dynamic_lookup slip_matrix_div.o slip_create_mpq_array.o SLIP_free.o SLIP_LU_factorize.o SLIP_realloc.o slip_matrix_mul.o slip_get_largest_pivot.o slip_ref_triangular_solve.o SLIP_backslash.o slip_create_mpz_array.o slip_get_nonzero_pivot.o SLIP_LU_solve.o slip_back_sub.o slip_cumsum.o slip_get_pivot.o SLIP_malloc.o slip_sparse_collapse.o SLIP_calloc.o slip_dfs.o slip_get_smallest_pivot.o SLIP_matrix_allocate.o slip_sparse_realloc.o slip_cast_array.o slip_expand_double_array.o SLIP_gmp.o SLIP_matrix_copy.o SLIP_matrix_check.o slip_cast_matrix.o slip_expand_mpfr_array.o SLIP_initialize.o SLIP_matrix_free.o slip_check_solution.o slip_expand_mpq_array.o SLIP_initialize_expert.o SLIP_matrix_nnz.o SLIP_create_default_options.o SLIP_finalize.o SLIP_LU_analysis_free.o slip_permute_x.o slip_permute_b.o slip_create_mpfr_array.o slip_forward_sub.o SLIP_LU_analyze.o slip_reach.o -o /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib -lm -rpath /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/inst/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib -lsuitesparseconfig -lamd -lcolamd -lm -lgmp -lmpfr
```

`DESTDIR` is used twice in the `-o`.

`DESTDIR` handling is coming from `build/pkgs/suitesparse/patches/03-buildflags.patch`

We upgrade to 5.12.0 and pick up a fresh set of patches from Debian or another distro


Depends on #34746
Depends on #34835

CC:  @kiwifb

Branch/Commit: **[u/mkoeppe/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse6.0.1) @ [`424cb49`](https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e)**

Author: **Fran√ßois Bissey**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/34206_





---

archive/issue_events_467887.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T17:06:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467887"
}
```



---

archive/issue_events_467888.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T17:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467888"
}
```



---

archive/issue_events_467889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T17:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467889"
}
```



---

archive/issue_events_467890.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T17:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467890"
}
```



---

archive/issue_comments_552563.json:
```json
{
    "body": "Branch: **[u/mkoeppe/suitesparse__fix_destdir_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse__fix_destdir_bug)**",
    "created_at": "2022-07-21T17:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552563",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/suitesparse__fix_destdir_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse__fix_destdir_bug)**



---

archive/issue_comments_552564.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bad180a32676aa37071f87d596c58ab94130e4e5\">bad180a</a></td><td><code>build/pkgs/suitesparse: Update to 5.12.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01\">abb0174</a></td><td><code>build/pkgs/suitesparse: Add cmake dependency, activate components that need cmake</code></td></tr></table>\n",
    "created_at": "2022-07-21T17:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552564",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bad180a32676aa37071f87d596c58ab94130e4e5">bad180a</a></td><td><code>build/pkgs/suitesparse: Update to 5.12.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01">abb0174</a></td><td><code>build/pkgs/suitesparse: Add cmake dependency, activate components that need cmake</code></td></tr></table>




---

archive/issue_comments_552565.json:
```json
{
    "body": "Commit: **[`abb0174`](https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01)**",
    "created_at": "2022-07-21T17:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552565",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`abb0174`](https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01)**



---

archive/issue_events_467891.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T17:28:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "title_is": "suitesparse: Update to 5.12.0, fix DESTDIR bug",
    "title_was": "suitesparse: Fix DESTDIR bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467891"
}
```



---

archive/issue_comments_552566.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,8 @@\n ```\n \n `DESTDIR` is used twice in the `-o`.\n+\n+`DESTDIR` handling is coming from `build/pkgs/suitesparse/patches/03-buildflags.patch`\n+\n+We upgrade to 5.12.0 and pick up a fresh set of patches from Debian or another distro\n+\n``````\n",
    "created_at": "2022-07-21T17:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552566",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,8 @@
 ```
 
 `DESTDIR` is used twice in the `-o`.
+
+`DESTDIR` handling is coming from `build/pkgs/suitesparse/patches/03-buildflags.patch`
+
+We upgrade to 5.12.0 and pick up a fresh set of patches from Debian or another distro
+
``````




---

archive/issue_comments_552567.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nhttps://github.com/DrTimothyAldenDavis/SuiteSparse/issues/86 - \"build system: Support staged installs via DESTDIR\"",
    "created_at": "2022-07-21T17:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552567",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

https://github.com/DrTimothyAldenDavis/SuiteSparse/issues/86 - "build system: Support staged installs via DESTDIR"



---

archive/issue_comments_552568.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMy original spkg was always a quick and dirty job. It shouldn't be a surprise that some bugs appear.",
    "created_at": "2022-07-21T21:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552568",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

My original spkg was always a quick and dirty job. It shouldn't be a surprise that some bugs appear.



---

archive/issue_events_467892.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467892"
}
```



---

archive/issue_events_467893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467893"
}
```



---

archive/issue_events_467894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-07T19:59:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "title_is": "suitesparse: Update to 6.0.1, fix DESTDIR bug",
    "title_was": "suitesparse: Update to 5.12.0, fix DESTDIR bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467894"
}
```



---

archive/issue_comments_552569.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI guess I should have a stab at this.",
    "created_at": "2022-12-07T20:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552569",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

I guess I should have a stab at this.



---

archive/issue_comments_552570.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWay too many things are built by default. We can split the package or at least not building the big stuff that we do not need like graphblas and mongoose which are very specialised stuff.",
    "created_at": "2022-12-07T20:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552570",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

Way too many things are built by default. We can split the package or at least not building the big stuff that we do not need like graphblas and mongoose which are very specialised stuff.



---

archive/issue_comments_552571.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI think our optional `igraph` package uses graphblas",
    "created_at": "2022-12-07T20:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552571",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

I think our optional `igraph` package uses graphblas



---

archive/issue_comments_552572.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThat's new and graphblas wasn't built before because I had removed all the subpackages using cmake at the time the initial suitesparse was included in sage. But if it can be used, why not.\n\nIn other news, `DESTDIR` works properly in 6.0.1 after some basic testing.",
    "created_at": "2022-12-07T20:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552572",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

That's new and graphblas wasn't built before because I had removed all the subpackages using cmake at the time the initial suitesparse was included in sage. But if it can be used, why not.

In other news, `DESTDIR` works properly in 6.0.1 after some basic testing.



---

archive/issue_comments_552573.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCannot see a dependency on GraphBLAS in igraph but if you can point to it, I'll certainly include it.",
    "created_at": "2022-12-07T21:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552573",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Cannot see a dependency on GraphBLAS in igraph but if you can point to it, I'll certainly include it.



---

archive/issue_comments_552574.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI am testing a first draft locally. The changes are big enough that none of the current patches actually apply or are meaningful. I will need your input for any tweaks you require for BLAS/LAPACK on OS X. It should be easy enough to figure out if something is needed.",
    "created_at": "2022-12-07T21:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552574",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

I am testing a first draft locally. The changes are big enough that none of the current patches actually apply or are meaningful. I will need your input for any tweaks you require for BLAS/LAPACK on OS X. It should be easy enough to figure out if something is needed.



---

archive/issue_comments_552575.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [Fran\u00e7ois Bissey](#comment:11):\n> Cannot see a dependency on GraphBLAS in igraph but if you can point to it, I'll certainly include it.\n\nSorry for the noise - looks like I misremembered",
    "created_at": "2022-12-07T22:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552575",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [Fran√ßois Bissey](#comment:11):
> Cannot see a dependency on GraphBLAS in igraph but if you can point to it, I'll certainly include it.

Sorry for the noise - looks like I misremembered



---

archive/issue_comments_552576.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDo we want to build and install static libraries?",
    "created_at": "2022-12-07T22:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552576",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Do we want to build and install static libraries?



---

archive/issue_comments_552577.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNo, only shared",
    "created_at": "2022-12-07T22:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552577",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

No, only shared



---

archive/issue_events_467895.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-12-07T22:49:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467895"
}
```



---

archive/issue_comments_552578.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/suitesparse__fix_destdir_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse__fix_destdir_bug)** to **[u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitsparse6.0.1)**",
    "created_at": "2022-12-07T22:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552578",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/mkoeppe/suitesparse__fix_destdir_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse__fix_destdir_bug)** to **[u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitsparse6.0.1)**



---

archive/issue_comments_552579.json:
```json
{
    "body": "Changed commit from **[`abb0174`](https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01)** to none",
    "created_at": "2022-12-07T22:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552579",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`abb0174`](https://github.com/sagemath/sagetrac-mirror/commit/abb01749d520003074d770d834328d88a4ba1b01)** to none



---

archive/issue_comments_552580.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2022-12-07T22:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552580",
    "user": "https://github.com/kiwifb"
}
```

Author: **Fran√ßois Bissey**



---

archive/issue_comments_552581.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReady for inspection.",
    "created_at": "2022-12-07T22:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552581",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Ready for inspection.



---

archive/issue_comments_552582.json:
```json
{
    "body": "Changed branch from **[u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitsparse6.0.1)** to **[trac/u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/fbissey/suitsparse6.0.1)**",
    "created_at": "2022-12-07T22:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552582",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitsparse6.0.1)** to **[trac/u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/fbissey/suitsparse6.0.1)**



---

archive/issue_comments_552583.json:
```json
{
    "body": "Changed branch from **[trac/u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/fbissey/suitsparse6.0.1)** to **[u/fbissey/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitesparse6.0.1)**",
    "created_at": "2022-12-07T22:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552583",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[trac/u/fbissey/suitsparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/fbissey/suitsparse6.0.1)** to **[u/fbissey/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitesparse6.0.1)**



---

archive/issue_comments_552584.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00\">57fc607</a></td><td><code>First draft of upgrade to suitesparse 6.0.1</code></td></tr></table>\n",
    "created_at": "2022-12-07T22:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552584",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00">57fc607</a></td><td><code>First draft of upgrade to suitesparse 6.0.1</code></td></tr></table>




---

archive/issue_comments_552585.json:
```json
{
    "body": "Commit: **[`57fc607`](https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00)**",
    "created_at": "2022-12-07T22:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552585",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[`57fc607`](https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00)**



---

archive/issue_comments_552586.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOK got the right branch name this time.",
    "created_at": "2022-12-07T22:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552586",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

OK got the right branch name this time.



---

archive/issue_comments_552587.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nBuilds OK on macOS",
    "created_at": "2022-12-09T19:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552587",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Builds OK on macOS



---

archive/issue_comments_552588.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHowever it builds against the Accelerate framework, not our openblas:\n\n```\n otool -L local/lib/libumfpack.dylib                                                                                                         git:t/34206/suitesparse6.0.1\nlocal/lib/libumfpack.dylib:\n        @rpath/libumfpack.6.dylib (compatibility version 6.0.0, current version 6.0.1)\n        @rpath/libsuitesparseconfig.6.dylib (compatibility version 6.0.0, current version 6.0.1)\n        /usr/local/opt/libomp/lib/libomp.dylib (compatibility version 5.0.0, current version 5.0.0)\n        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1311.100.3)\n        @rpath/libamd.3.dylib (compatibility version 3.0.0, current version 3.0.0)\n        /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate (compatibility version 1.0.0, current version 4.0.0)\n        @rpath/libcholmod.4.dylib (compatibility version 4.0.0, current version 4.0.1)\n```",
    "created_at": "2022-12-09T19:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552588",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

However it builds against the Accelerate framework, not our openblas:

```
 otool -L local/lib/libumfpack.dylib                                                                                                         git:t/34206/suitesparse6.0.1
local/lib/libumfpack.dylib:
        @rpath/libumfpack.6.dylib (compatibility version 6.0.0, current version 6.0.1)
        @rpath/libsuitesparseconfig.6.dylib (compatibility version 6.0.0, current version 6.0.1)
        /usr/local/opt/libomp/lib/libomp.dylib (compatibility version 5.0.0, current version 5.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1311.100.3)
        @rpath/libamd.3.dylib (compatibility version 3.0.0, current version 3.0.0)
        /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate (compatibility version 1.0.0, current version 4.0.0)
        @rpath/libcholmod.4.dylib (compatibility version 4.0.0, current version 4.0.1)
```



---

archive/issue_comments_552589.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThat's what I thought could happen. I think, I can make it go for openblas easily, I found the doc for it, the other day.\n\nThis is also a relatively stripped down build like boost_cropped. I probably should add a few more sub-packages if we want to really dignify it with the full \"suitesparse\" name. And I also should write a few comments.",
    "created_at": "2022-12-09T22:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552589",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

That's what I thought could happen. I think, I can make it go for openblas easily, I found the doc for it, the other day.

This is also a relatively stripped down build like boost_cropped. I probably should add a few more sub-packages if we want to really dignify it with the full "suitesparse" name. And I also should write a few comments.



---

archive/issue_comments_552590.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAnd upstream is preparing 6.0.2. But the bump would be trivial on this branch.",
    "created_at": "2022-12-09T22:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552590",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

And upstream is preparing 6.0.2. But the bump would be trivial on this branch.



---

archive/issue_comments_552591.json:
```json
{
    "body": "Changed commit from **[`57fc607`](https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00)** to **[`8b32e70`](https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc)**",
    "created_at": "2022-12-09T22:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552591",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57fc607`](https://github.com/sagemath/sagetrac-mirror/commit/57fc6072e842b41ddfe31a362866d6a29c0c3b00)** to **[`8b32e70`](https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc)**



---

archive/issue_comments_552592.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc\">8b32e70</a></td><td><code>Enforce the use of openblas. Add comments.</code></td></tr></table>\n",
    "created_at": "2022-12-09T22:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552592",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc">8b32e70</a></td><td><code>Enforce the use of openblas. Add comments.</code></td></tr></table>




---

archive/issue_comments_552593.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThis gets openblas but not the right one on my macOS system.\n\n```\n[suitesparse-6.0.1] -- BLAS libraries:      /opt/local/lib/libopenblas.dylib \n[suitesparse-6.0.1] -- BLAS linker flags:    \n[suitesparse-6.0.1] -- LAPACK libraries:    /opt/local/lib/libopenblas.dylib;/opt/local/lib/libopenblas.dylib \n[suitesparse-6.0.1] -- LAPACK linker flags:  \n```",
    "created_at": "2022-12-10T00:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552593",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

This gets openblas but not the right one on my macOS system.

```
[suitesparse-6.0.1] -- BLAS libraries:      /opt/local/lib/libopenblas.dylib 
[suitesparse-6.0.1] -- BLAS linker flags:    
[suitesparse-6.0.1] -- LAPACK libraries:    /opt/local/lib/libopenblas.dylib;/opt/local/lib/libopenblas.dylib 
[suitesparse-6.0.1] -- LAPACK linker flags:  
```



---

archive/issue_comments_552594.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe following change fixes it for me:\n\n```\ndiff --git a/build/pkgs/suitesparse/spkg-build.in b/build/pkgs/suitesparse/spkg-build.in\nindex b137a5ecb9..822519b078 100644\n--- a/build/pkgs/suitesparse/spkg-build.in\n+++ b/build/pkgs/suitesparse/spkg-build.in\n@@ -11,7 +11,10 @@ for pkg in ${pkg_list}; do\n \t# Enforce usage of OpenBlas\n \t# No static libraries\n \t# Verbose builds\n-\tsdh_cmake -DBLA_VENDOR=OpenBLAS -DNSTATIC=ON -DCMAKE_VERBOSE_MAKEFILE=1 ..\n+\tsdh_cmake -DBLA_VENDOR=OpenBLAS \\\n+                  -DBLAS_LIBRARIES=\"$(pkg-config --libs blas)\" \\\n+                  -DLAPACK_LIBRARIES=\"$(pkg-config --libs lapack)\" \\\n+                  -DNSTATIC=ON -DCMAKE_VERBOSE_MAKEFILE=1 ..\n \t# Build\n \tsdh_make\n \tpopd\n```",
    "created_at": "2022-12-10T00:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552594",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

The following change fixes it for me:

```
diff --git a/build/pkgs/suitesparse/spkg-build.in b/build/pkgs/suitesparse/spkg-build.in
index b137a5ecb9..822519b078 100644
--- a/build/pkgs/suitesparse/spkg-build.in
+++ b/build/pkgs/suitesparse/spkg-build.in
@@ -11,7 +11,10 @@ for pkg in ${pkg_list}; do
 	# Enforce usage of OpenBlas
 	# No static libraries
 	# Verbose builds
-	sdh_cmake -DBLA_VENDOR=OpenBLAS -DNSTATIC=ON -DCMAKE_VERBOSE_MAKEFILE=1 ..
+	sdh_cmake -DBLA_VENDOR=OpenBLAS \
+                  -DBLAS_LIBRARIES="$(pkg-config --libs blas)" \
+                  -DLAPACK_LIBRARIES="$(pkg-config --libs lapack)" \
+                  -DNSTATIC=ON -DCMAKE_VERBOSE_MAKEFILE=1 ..
 	# Build
 	sdh_make
 	popd
```



---

archive/issue_comments_552595.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nYes, system wide would be picked up first without a hint. Pushing shortly.",
    "created_at": "2022-12-10T01:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552595",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Yes, system wide would be picked up first without a hint. Pushing shortly.



---

archive/issue_comments_552596.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7\">b80a672</a></td><td><code>Add hint to locate openblas used by sage</code></td></tr></table>\n",
    "created_at": "2022-12-10T01:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552596",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7">b80a672</a></td><td><code>Add hint to locate openblas used by sage</code></td></tr></table>




---

archive/issue_comments_552597.json:
```json
{
    "body": "Changed commit from **[`8b32e70`](https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc)** to **[`b80a672`](https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7)**",
    "created_at": "2022-12-10T01:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552597",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8b32e70`](https://github.com/sagemath/sagetrac-mirror/commit/8b32e705554a781168f75997c3274429603b17fc)** to **[`b80a672`](https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7)**



---

archive/issue_events_467896.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-11T00:44:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467896"
}
```



---

archive/issue_events_467897.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-11T00:44:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467897"
}
```



---

archive/issue_comments_552598.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nFailing on `centos-stream-9-python3.9-standard` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6192051075)\n\n```\nCMake Error at CMakeLists.txt:14 (cmake_minimum_required):\n  CMake 3.22 or higher is required.  You are running version 3.20.2\n```\nThis will need an increased lower bound for system cmake - increased from #34746, which set 3.11)",
    "created_at": "2022-12-11T00:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552598",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Failing on `centos-stream-9-python3.9-standard` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6192051075)

```
CMake Error at CMakeLists.txt:14 (cmake_minimum_required):
  CMake 3.22 or higher is required.  You are running version 3.20.2
```
This will need an increased lower bound for system cmake - increased from #34746, which set 3.11)



---

archive/issue_comments_552599.json:
```json
{
    "body": "Dependencies: **#34746**",
    "created_at": "2022-12-11T00:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552599",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34746**



---

archive/issue_comments_552600.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOn `debian-sid-minimal` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6200588473):\n\n```\n[suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:643:65: error: expected ')' before ',' token\n  [suitesparse-6.0.1]     643 |     #define SUITESPARSE_BLAS(name,NAME) SUITESPARSE_FORTRAN(name,NAME)\n  [suitesparse-6.0.1]         |                                                                 ^\n  [suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:676:37: note: in expansion of macro 'SUITESPARSE_BLAS'\n  [suitesparse-6.0.1]     676 | #define SUITESPARSE_LAPACK_ZLARF    SUITESPARSE_BLAS ( zlarf  , ZLAR   )\n  [suitesparse-6.0.1]         |                                     ^~~~~~~~~~~~~~~~\n  [suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:1434:6: note: in expansion of macro 'SUITESPARSE_LAPACK_ZLARF'\n  [suitesparse-6.0.1]    1434 | void SUITESPARSE_LAPACK_ZLARF       // apply Householder reflector\n  [suitesparse-6.0.1]         |      ^~~~~~~~~~~~~~~~~~~~~~~~\n  [suitesparse-6.0.1]   make[5]: *** [CMakeFiles/cholmod.dir/build.make:1465: CMakeFiles/cholmod.dir/Supernodal/cholmod_super_solve.c.o] Error 1\n  [suitesparse-6.0.1]   make[5]: *** [CMakeFiles/cholmod.dir/build.make:1479: CMakeFiles/cholmod.dir/Supernodal/cholmod_super_symbolic.c.o] Error 1\n  [suitesparse-6.0.1]   make[5]: Target 'CMakeFiles/cholmod.dir/build' not remade because of errors.\n```",
    "created_at": "2022-12-11T09:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552600",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

On `debian-sid-minimal` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6200588473):

```
[suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:643:65: error: expected ')' before ',' token
  [suitesparse-6.0.1]     643 |     #define SUITESPARSE_BLAS(name,NAME) SUITESPARSE_FORTRAN(name,NAME)
  [suitesparse-6.0.1]         |                                                                 ^
  [suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:676:37: note: in expansion of macro 'SUITESPARSE_BLAS'
  [suitesparse-6.0.1]     676 | #define SUITESPARSE_LAPACK_ZLARF    SUITESPARSE_BLAS ( zlarf  , ZLAR   )
  [suitesparse-6.0.1]         |                                     ^~~~~~~~~~~~~~~~
  [suitesparse-6.0.1]   /sage/local/var/tmp/sage/build/suitesparse-6.0.1/src/SuiteSparse_config/SuiteSparse_config.h:1434:6: note: in expansion of macro 'SUITESPARSE_LAPACK_ZLARF'
  [suitesparse-6.0.1]    1434 | void SUITESPARSE_LAPACK_ZLARF       // apply Householder reflector
  [suitesparse-6.0.1]         |      ^~~~~~~~~~~~~~~~~~~~~~~~
  [suitesparse-6.0.1]   make[5]: *** [CMakeFiles/cholmod.dir/build.make:1465: CMakeFiles/cholmod.dir/Supernodal/cholmod_super_solve.c.o] Error 1
  [suitesparse-6.0.1]   make[5]: *** [CMakeFiles/cholmod.dir/build.make:1479: CMakeFiles/cholmod.dir/Supernodal/cholmod_super_symbolic.c.o] Error 1
  [suitesparse-6.0.1]   make[5]: Target 'CMakeFiles/cholmod.dir/build' not remade because of errors.
```



---

archive/issue_comments_552601.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nCan't seem to see the log from that run. What compiler is sid currently using?",
    "created_at": "2022-12-11T10:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552601",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

Can't seem to see the log from that run. What compiler is sid currently using?



---

archive/issue_comments_552602.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThat's gcc 12.2.0-9.1",
    "created_at": "2022-12-11T18:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552602",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

That's gcc 12.2.0-9.1



---

archive/issue_comments_552603.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nSame on `debian-bookworm-minimal` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6200588437, `docker run -it  ghcr.io/mkoeppe/sage/sage-docker-debian-bookworm-minimal-with-targets-pre:9.5-107209-g31c5448dc1-failed bash`)\nand on `ubuntu-kinetic-minimal` and `fedora-36-minimal`",
    "created_at": "2022-12-11T19:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552603",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Same on `debian-bookworm-minimal` (https://github.com/mkoeppe/sage/actions/runs/3662737597/jobs/6200588437, `docker run -it  ghcr.io/mkoeppe/sage/sage-docker-debian-bookworm-minimal-with-targets-pre:9.5-107209-g31c5448dc1-failed bash`)
and on `ubuntu-kinetic-minimal` and `fedora-36-minimal`



---

archive/issue_comments_552604.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI wonder if it has to do with \n\n```\n-- Detecting Fortran/C Interface\nFailed to compile\n```\nWhen cmake is run to configure cholmod. It looks like we are trying to mix C and Fortran and it is failing.",
    "created_at": "2022-12-11T21:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552604",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

I wonder if it has to do with 

```
-- Detecting Fortran/C Interface
Failed to compile
```
When cmake is run to configure cholmod. It looks like we are trying to mix C and Fortran and it is failing.



---

archive/issue_comments_552605.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWhile it is annoying, we could turn off the bits needing blas/lapack which seem to be the one involved here. But really I suspect there is something fishy in the compiler.",
    "created_at": "2022-12-11T21:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552605",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

While it is annoying, we could turn off the bits needing blas/lapack which seem to be the one involved here. But really I suspect there is something fishy in the compiler.



---

archive/issue_comments_552606.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a3f584fe023b69794704e064475784b55419662\">7a3f584</a></td><td><code>Merge branch 'develop' into suitesparse6.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e\">552fd83</a></td><td><code>Turn off suprenodal for cholmod to see if c/fortran mixing is causing failures on some debian instances.</code></td></tr></table>\n",
    "created_at": "2022-12-11T22:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552606",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a3f584fe023b69794704e064475784b55419662">7a3f584</a></td><td><code>Merge branch 'develop' into suitesparse6.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e">552fd83</a></td><td><code>Turn off suprenodal for cholmod to see if c/fortran mixing is causing failures on some debian instances.</code></td></tr></table>




---

archive/issue_comments_552607.json:
```json
{
    "body": "Changed commit from **[`b80a672`](https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7)** to **[`552fd83`](https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e)**",
    "created_at": "2022-12-11T22:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b80a672`](https://github.com/sagemath/sagetrac-mirror/commit/b80a67228c56671c937d4963c50670bf1743c4e7)** to **[`552fd83`](https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e)**



---

archive/issue_comments_552608.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\n`tox -e docker-debian-bookworm-minimal-incremental -- suitesparse` gives the same errors",
    "created_at": "2022-12-12T00:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552608",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

`tox -e docker-debian-bookworm-minimal-incremental -- suitesparse` gives the same errors



---

archive/issue_comments_552609.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI am running out of ideas on what can cause this. Some compiler setting is the most obvious culprit, but what would it be. Can you get access to the docker instance to fish stuff out of it?",
    "created_at": "2022-12-12T00:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552609",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

I am running out of ideas on what can cause this. Some compiler setting is the most obvious culprit, but what would it be. Can you get access to the docker instance to fish stuff out of it?



---

archive/issue_comments_552610.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n6.0.2 is just out, so I will bump that and we will see if it helps.",
    "created_at": "2022-12-12T02:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552610",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

6.0.2 is just out, so I will bump that and we will see if it helps.



---

archive/issue_comments_552611.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI've set up a separate GH Actions test at https://github.com/mkoeppe/SuiteSparse/actions/runs/3672968344",
    "created_at": "2022-12-12T03:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552611",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

I've set up a separate GH Actions test at https://github.com/mkoeppe/SuiteSparse/actions/runs/3672968344



---

archive/issue_comments_552612.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a\">2e7881d</a></td><td><code>move suitesparse to 6.0.2</code></td></tr></table>\n",
    "created_at": "2022-12-12T03:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552612",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a">2e7881d</a></td><td><code>move suitesparse to 6.0.2</code></td></tr></table>




---

archive/issue_comments_552613.json:
```json
{
    "body": "Changed commit from **[`552fd83`](https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e)** to **[`2e7881d`](https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a)**",
    "created_at": "2022-12-12T03:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552613",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`552fd83`](https://github.com/sagemath/sagetrac-mirror/commit/552fd83a941d86471952ee1f220c7b1b19c9595e)** to **[`2e7881d`](https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a)**



---

archive/issue_comments_552614.json:
```json
{
    "body": "Changed branch from **[u/fbissey/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitesparse6.0.1)** to **[u/mkoeppe/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse6.0.1)**",
    "created_at": "2022-12-12T05:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552614",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/fbissey/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/suitesparse6.0.1)** to **[u/mkoeppe/suitesparse6.0.1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/suitesparse6.0.1)**



---

archive/issue_comments_552615.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\npushed this commit to address [comment:29](#comment:29)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c\">6f4032e</a></td><td><code>build/pkgs/cmake/spkg-configure.m4: Require version >= 3.22</code></td></tr></table>\n",
    "created_at": "2022-12-12T05:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552615",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

pushed this commit to address [comment:29](#comment:29)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c">6f4032e</a></td><td><code>build/pkgs/cmake/spkg-configure.m4: Require version >= 3.22</code></td></tr></table>




---

archive/issue_comments_552616.json:
```json
{
    "body": "Changed commit from **[`2e7881d`](https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a)** to **[`6f4032e`](https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c)**",
    "created_at": "2022-12-12T05:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552616",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`2e7881d`](https://github.com/sagemath/sagetrac-mirror/commit/2e7881dce8ba55e2ff0065c506c31b94ea33fd3a)** to **[`6f4032e`](https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c)**



---

archive/issue_comments_552617.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nForgot about doing that thanks.",
    "created_at": "2022-12-12T06:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552617",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Forgot about doing that thanks.



---

archive/issue_comments_552618.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nAdding #34835 as it will make the test builds quicker",
    "created_at": "2022-12-12T07:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552618",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Adding #34835 as it will make the test builds quicker



---

archive/issue_comments_552619.json:
```json
{
    "body": "Changed dependencies from **#34746** to **#34746, #34835**",
    "created_at": "2022-12-12T07:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552619",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#34746** to **#34746, #34835**



---

archive/issue_comments_552620.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6bb8e6bae03cb7760ccf5674a08cbc59d7e25fd\">e6bb8e6</a></td><td><code>build/pkgs/openblas/dependencies: Remove python</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5\">41d66d5</a></td><td><code>Merge #34835</code></td></tr></table>\n",
    "created_at": "2022-12-12T07:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6bb8e6bae03cb7760ccf5674a08cbc59d7e25fd">e6bb8e6</a></td><td><code>build/pkgs/openblas/dependencies: Remove python</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5">41d66d5</a></td><td><code>Merge #34835</code></td></tr></table>




---

archive/issue_comments_552621.json:
```json
{
    "body": "Changed commit from **[`6f4032e`](https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c)** to **[`41d66d5`](https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5)**",
    "created_at": "2022-12-12T07:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f4032e`](https://github.com/sagemath/sagetrac-mirror/commit/6f4032e5d6392028e540fe67f9a91a75e5e93b4c)** to **[`41d66d5`](https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5)**



---

archive/issue_comments_552622.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [Fran\u00e7ois Bissey](#comment:34):\n> I wonder if it has to do with \n> \n> ```\n> -- Detecting Fortran/C Interface\n> Failed to compile\n> ```\n> When cmake is run to configure cholmod. It looks like we are trying to mix C and Fortran and it is failing.\n\nYes, I think that's the problem",
    "created_at": "2022-12-12T08:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552622",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [Fran√ßois Bissey](#comment:34):
> I wonder if it has to do with 
> 
> ```
> -- Detecting Fortran/C Interface
> Failed to compile
> ```
> When cmake is run to configure cholmod. It looks like we are trying to mix C and Fortran and it is failing.

Yes, I think that's the problem



---

archive/issue_comments_552623.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThe only thing I can think about is that openblas was compiled with a different gfortran but it feels far fetched.",
    "created_at": "2022-12-12T08:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552623",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

The only thing I can think about is that openblas was compiled with a different gfortran but it feels far fetched.



---

archive/issue_comments_552624.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nIn one of the failing builds, I see the following in `SuiteSparse_config/build/CMakeFiles/CMakeError.log`:\n\n```\n[100%] Linking Fortran executable FortranCInterface\nlto1: internal compiler error: compiler does not support ZSTD LTO compression\n0x9c311c lto_end_uncompression(lto_compression_stream*, lto_compression)\n\t../../src/gcc/lto-compress.cc:411\n0x9c1910 lto_get_section_data(lto_file_decl_data*, lto_section_type, char const*, int, unsigned long*, bool)\n\t../../src/gcc/lto-section-in.cc:168\n0x6929c5 lto_file_finalize\n\t../../src/gcc/lto/lto-common.cc:2264\n0x6929c5 lto_create_files_from_ids\n\t../../src/gcc/lto/lto-common.cc:2282\n0x6929c5 lto_file_read\n\t../../src/gcc/lto/lto-common.cc:2337\n0x6929c5 read_cgraph_and_symbols(unsigned int, char const**)\n\t../../src/gcc/lto/lto-common.cc:2785\n0x680312 lto_main()\n\t../../src/gcc/lto/lto.cc:626\nPlease submit a full bug report, with preprocessed source (by using -freport-bug).\nPlease include the complete backtrace with any bug report.\nSee <https://gcc.gnu.org/bugs/> for instructions.\nlto-wrapper: fatal error: /sage/local/bin/gfortran returned 1 exit status\ncompilation terminated.\n```",
    "created_at": "2022-12-12T08:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552624",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

In one of the failing builds, I see the following in `SuiteSparse_config/build/CMakeFiles/CMakeError.log`:

```
[100%] Linking Fortran executable FortranCInterface
lto1: internal compiler error: compiler does not support ZSTD LTO compression
0x9c311c lto_end_uncompression(lto_compression_stream*, lto_compression)
	../../src/gcc/lto-compress.cc:411
0x9c1910 lto_get_section_data(lto_file_decl_data*, lto_section_type, char const*, int, unsigned long*, bool)
	../../src/gcc/lto-section-in.cc:168
0x6929c5 lto_file_finalize
	../../src/gcc/lto/lto-common.cc:2264
0x6929c5 lto_create_files_from_ids
	../../src/gcc/lto/lto-common.cc:2282
0x6929c5 lto_file_read
	../../src/gcc/lto/lto-common.cc:2337
0x6929c5 read_cgraph_and_symbols(unsigned int, char const**)
	../../src/gcc/lto/lto-common.cc:2785
0x680312 lto_main()
	../../src/gcc/lto/lto.cc:626
Please submit a full bug report, with preprocessed source (by using -freport-bug).
Please include the complete backtrace with any bug report.
See <https://gcc.gnu.org/bugs/> for instructions.
lto-wrapper: fatal error: /sage/local/bin/gfortran returned 1 exit status
compilation terminated.
```



---

archive/issue_comments_552625.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIn the failing configurations, we are using system `gcc` but our own `gfortran`. This may be a mismatch between them regarding `zstd` support.",
    "created_at": "2022-12-12T08:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552625",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

In the failing configurations, we are using system `gcc` but our own `gfortran`. This may be a mismatch between them regarding `zstd` support.



---

archive/issue_comments_552626.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nYes, it starts making much more sense.",
    "created_at": "2022-12-12T08:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552626",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:51" align="right">comment:51</div>

Yes, it starts making much more sense.



---

archive/issue_comments_552627.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nBut there should be other similar failures potentially - at least you would think, since this is also tested in autoconf packages as soon blas/lapack is mixed with C code.",
    "created_at": "2022-12-12T08:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552627",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:52" align="right">comment:52</div>

But there should be other similar failures potentially - at least you would think, since this is also tested in autoconf packages as soon blas/lapack is mixed with C code.



---

archive/issue_comments_552628.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca\">d3544fe</a></td><td><code>build/pkgs/zstd: New (gcc/gfortran dependency)</code></td></tr></table>\n",
    "created_at": "2022-12-12T08:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552628",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca">d3544fe</a></td><td><code>build/pkgs/zstd: New (gcc/gfortran dependency)</code></td></tr></table>




---

archive/issue_comments_552629.json:
```json
{
    "body": "Changed commit from **[`41d66d5`](https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5)** to **[`d3544fe`](https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca)**",
    "created_at": "2022-12-12T08:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`41d66d5`](https://github.com/sagemath/sagetrac-mirror/commit/41d66d58e704dec0b258ef66b0fe293b6e0eaed5)** to **[`d3544fe`](https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca)**



---

archive/issue_comments_552630.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nLet's try this",
    "created_at": "2022-12-12T08:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552630",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

Let's try this



---

archive/issue_comments_552631.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nIf it works, I'll have to re-enable \"supernodal\" in cholmod.",
    "created_at": "2022-12-12T08:48:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552631",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">comment:55</div>

If it works, I'll have to re-enable "supernodal" in cholmod.



---

archive/issue_comments_552632.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nrunning at https://github.com/mkoeppe/SuiteSparse/actions/runs/3674049225",
    "created_at": "2022-12-12T08:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552632",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

running at https://github.com/mkoeppe/SuiteSparse/actions/runs/3674049225



---

archive/issue_comments_552633.json:
```json
{
    "body": "Changed commit from **[`d3544fe`](https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca)** to **[`63c0139`](https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8)**",
    "created_at": "2022-12-12T09:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552633",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3544fe`](https://github.com/sagemath/sagetrac-mirror/commit/d3544fedb43808ee39b1be6dec98d8ab35c390ca)** to **[`63c0139`](https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8)**



---

archive/issue_comments_552634.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8\">63c0139</a></td><td><code>build/pkgs/zstd: Only require zstd when gcc/gfortran are to be built</code></td></tr></table>\n",
    "created_at": "2022-12-12T09:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552634",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8">63c0139</a></td><td><code>build/pkgs/zstd: Only require zstd when gcc/gfortran are to be built</code></td></tr></table>




---

archive/issue_comments_552635.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nstill failing - https://github.com/mkoeppe/SuiteSparse/actions/runs/3674049225/jobs/6211825144",
    "created_at": "2022-12-12T09:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552635",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

still failing - https://github.com/mkoeppe/SuiteSparse/actions/runs/3674049225/jobs/6211825144



---

archive/issue_comments_552636.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nin the failing build, gfortran still does not list zstd as a supported compression algorithm:\n\n```\n/sage/local/bin/gfortran -v\nUsing built-in specs.\nCOLLECT_GCC=/sage/local/bin/gfortran\nCOLLECT_LTO_WRAPPER=/sage/local/libexec/gcc/x86_64-pc-linux-gnu/12.2.0/lto-wrapper\nTarget: x86_64-pc-linux-gnu\nConfigured with: ../src/configure --prefix=/sage/local --with-local-prefix=/sage/local --with-system-zlib --without-isl --disable-multilib --disable-nls --disable-libitm --disable-bootstrap --enable-languages=fortran --disable-darwin-at-rpath   CXX=g++\nThread model: posix\nSupported LTO compression algorithms: zlib\ngcc version 12.2.0 (GCC) \n```",
    "created_at": "2022-12-12T09:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

in the failing build, gfortran still does not list zstd as a supported compression algorithm:

```
/sage/local/bin/gfortran -v
Using built-in specs.
COLLECT_GCC=/sage/local/bin/gfortran
COLLECT_LTO_WRAPPER=/sage/local/libexec/gcc/x86_64-pc-linux-gnu/12.2.0/lto-wrapper
Target: x86_64-pc-linux-gnu
Configured with: ../src/configure --prefix=/sage/local --with-local-prefix=/sage/local --with-system-zlib --without-isl --disable-multilib --disable-nls --disable-libitm --disable-bootstrap --enable-languages=fortran --disable-darwin-at-rpath   CXX=g++
Thread model: posix
Supported LTO compression algorithms: zlib
gcc version 12.2.0 (GCC) 
```



---

archive/issue_comments_552637.json:
```json
{
    "body": "Changed commit from **[`63c0139`](https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8)** to **[`424cb49`](https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e)**",
    "created_at": "2022-12-12T09:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`63c0139`](https://github.com/sagemath/sagetrac-mirror/commit/63c0139dc552f443560e6f6ccb499ce1d69631e8)** to **[`424cb49`](https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e)**



---

archive/issue_comments_552638.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e\">424cb49</a></td><td><code>build/pkgs/zstd/spkg-install.in: Also install header</code></td></tr></table>\n",
    "created_at": "2022-12-12T09:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/424cb49cf28f1809d78014ea315bb4a301e4505e">424cb49</a></td><td><code>build/pkgs/zstd/spkg-install.in: Also install header</code></td></tr></table>




---

archive/issue_comments_552639.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nIn gentoo we just seem to do `make -C lib install`. Although there is also a `make -C lib libzstd.pc` during the build phase.",
    "created_at": "2022-12-12T09:42:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552639",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:61" align="right">comment:61</div>

In gentoo we just seem to do `make -C lib install`. Although there is also a `make -C lib libzstd.pc` during the build phase.



---

archive/issue_comments_552640.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nInstalling `zstd` may not be enough, you may have to tell gcc's configure to use it `--with-zstd`. But really, we want to match the support from the host gcc. So, it may be more complicated to achieve.",
    "created_at": "2022-12-12T09:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552640",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:62" align="right">comment:62</div>

Installing `zstd` may not be enough, you may have to tell gcc's configure to use it `--with-zstd`. But really, we want to match the support from the host gcc. So, it may be more complicated to achieve.



---

archive/issue_comments_552641.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\ngfortran is now configured correctly\n\n```\n# local/bin/gfortran -v\nUsing built-in specs.\nCOLLECT_GCC=local/bin/gfortran\nCOLLECT_LTO_WRAPPER=/sage/local/libexec/gcc/x86_64-pc-linux-gnu/12.2.0/lto-wrapper\nTarget: x86_64-pc-linux-gnu\nConfigured with: ../src/configure --prefix=/sage/local --with-local-prefix=/sage/local --with-system-zlib --without-isl --disable-multilib --disable-nls --disable-libitm --disable-bootstrap --enable-languages=fortran --disable-darwin-at-rpath   CXX=g++\nThread model: posix\nSupported LTO compression algorithms: zlib zstd\ngcc version 12.2.0 (GCC) \n```",
    "created_at": "2022-12-12T10:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552641",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

gfortran is now configured correctly

```
# local/bin/gfortran -v
Using built-in specs.
COLLECT_GCC=local/bin/gfortran
COLLECT_LTO_WRAPPER=/sage/local/libexec/gcc/x86_64-pc-linux-gnu/12.2.0/lto-wrapper
Target: x86_64-pc-linux-gnu
Configured with: ../src/configure --prefix=/sage/local --with-local-prefix=/sage/local --with-system-zlib --without-isl --disable-multilib --disable-nls --disable-libitm --disable-bootstrap --enable-languages=fortran --disable-darwin-at-rpath   CXX=g++
Thread model: posix
Supported LTO compression algorithms: zlib zstd
gcc version 12.2.0 (GCC) 
```



---

archive/issue_comments_552642.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [Fran\u00e7ois Bissey](#comment:62):\n> we want to match the support from the host gcc. So, it may be more complicated to achieve.\n\nQuite possible that this is needed, yes",
    "created_at": "2022-12-12T10:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552642",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [Fran√ßois Bissey](#comment:62):
> we want to match the support from the host gcc. So, it may be more complicated to achieve.

Quite possible that this is needed, yes



---

archive/issue_comments_552643.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nsuitesparse still fails to build.\n\ncomment:49 has changed - getting a different error now\n\n```\n# cat SuiteSparse_config/build/CMakeFiles/CMakeError.log\nmake[6]: Entering directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'\nmake[6]: Leaving directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'\nmake[6]: Entering directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'\n[ 92%] Building Fortran object CMakeFiles/FortranCInterface.dir/main.F.o\n[ 94%] Building Fortran object CMakeFiles/FortranCInterface.dir/call_sub.f.o\n[ 97%] Building Fortran object CMakeFiles/FortranCInterface.dir/call_mod.f90.o\n[100%] Linking Fortran executable FortranCInterface\nlto1: internal compiler error: bytecode stream: expected tag LTO_function instead of LTO_eh_table\n0x9b4cc1 lto_tag_check\n\t../../src/gcc/lto-streamer.h:1028\n0x9b4cc1 input_function\n\t../../src/gcc/lto-streamer-in.cc:1361\n0x9b4cc1 lto_read_body_or_constructor\n\t../../src/gcc/lto-streamer-in.cc:1621\n0x7020ce cgraph_node::get_untransformed_body()\n\t../../src/gcc/cgraph.cc:4011\n0x70c48d cgraph_node::expand()\n\t../../src/gcc/cgraphunit.cc:1806\n0x70c48d cgraph_node::expand()\n\t../../src/gcc/cgraphunit.cc:1788\n0x70da4e expand_all_functions\n\t../../src/gcc/cgraphunit.cc:1999\n0x70da4e symbol_table::compile()\n\t../../src/gcc/cgraphunit.cc:2349\n0x680901 lto_main()\n\t../../src/gcc/lto/lto.cc:657\nPlease submit a full bug report, with preprocessed source (by using -freport-bug).\nPlease include the complete backtrace with any bug report.\nSee <https://gcc.gnu.org/bugs/> for instructions.\nmake[7]: *** [/tmp/ccL3cCy7.mk:2: /tmp/cc63Hwwl.ltrans0.ltrans.o] Error 1\n```",
    "created_at": "2022-12-12T10:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552643",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

suitesparse still fails to build.

comment:49 has changed - getting a different error now

```
# cat SuiteSparse_config/build/CMakeFiles/CMakeError.log
make[6]: Entering directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'
make[6]: Leaving directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'
make[6]: Entering directory '/sage/local/var/tmp/sage/build/suitesparse-git/src/SuiteSparse_config/build/CMakeFiles/FortranCInterface'
[ 92%] Building Fortran object CMakeFiles/FortranCInterface.dir/main.F.o
[ 94%] Building Fortran object CMakeFiles/FortranCInterface.dir/call_sub.f.o
[ 97%] Building Fortran object CMakeFiles/FortranCInterface.dir/call_mod.f90.o
[100%] Linking Fortran executable FortranCInterface
lto1: internal compiler error: bytecode stream: expected tag LTO_function instead of LTO_eh_table
0x9b4cc1 lto_tag_check
	../../src/gcc/lto-streamer.h:1028
0x9b4cc1 input_function
	../../src/gcc/lto-streamer-in.cc:1361
0x9b4cc1 lto_read_body_or_constructor
	../../src/gcc/lto-streamer-in.cc:1621
0x7020ce cgraph_node::get_untransformed_body()
	../../src/gcc/cgraph.cc:4011
0x70c48d cgraph_node::expand()
	../../src/gcc/cgraphunit.cc:1806
0x70c48d cgraph_node::expand()
	../../src/gcc/cgraphunit.cc:1788
0x70da4e expand_all_functions
	../../src/gcc/cgraphunit.cc:1999
0x70da4e symbol_table::compile()
	../../src/gcc/cgraphunit.cc:2349
0x680901 lto_main()
	../../src/gcc/lto/lto.cc:657
Please submit a full bug report, with preprocessed source (by using -freport-bug).
Please include the complete backtrace with any bug report.
See <https://gcc.gnu.org/bugs/> for instructions.
make[7]: *** [/tmp/ccL3cCy7.mk:2: /tmp/cc63Hwwl.ltrans0.ltrans.o] Error 1
```



---

archive/issue_comments_552644.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nThis will need more work on another day",
    "created_at": "2022-12-12T10:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552644",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">comment:66</div>

This will need more work on another day



---

archive/issue_comments_552645.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nI have given it some thoughts. bookworm and sid are the only you report failing at this stage. It looks to me that they are both using gcc-12.2.0+patches - gentoo currently similarly ship gcc-12.2.1_pre20221210, some kind of pre-release. It seems it has incompatibilities with earlier gcc/gfortran releases, at least in debian. And our gcc/gfortran is an earlier and official release. I don't see a way out of this that doesn't forbid this version of the compiler unless there are both gcc and gfortran installed.",
    "created_at": "2022-12-14T19:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552645",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:68" align="right">comment:68</div>

I have given it some thoughts. bookworm and sid are the only you report failing at this stage. It looks to me that they are both using gcc-12.2.0+patches - gentoo currently similarly ship gcc-12.2.1_pre20221210, some kind of pre-release. It seems it has incompatibilities with earlier gcc/gfortran releases, at least in debian. And our gcc/gfortran is an earlier and official release. I don't see a way out of this that doesn't forbid this version of the compiler unless there are both gcc and gfortran installed.



---

archive/issue_comments_552646.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI agree, the Debian patches are likely the cause for the incompatibility. I think the LTO data comes with a version annotation, and Debian should probably have bumped the version along with their patches.\n\n(We also carry a patch, for macOS M1/M2 support, but I don't think it is the problem here.)",
    "created_at": "2022-12-14T20:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34206#issuecomment-552646",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

I agree, the Debian patches are likely the cause for the incompatibility. I think the LTO data comes with a version annotation, and Debian should probably have bumped the version along with their patches.

(We also carry a patch, for macOS M1/M2 support, but I don't think it is the problem here.)



---

archive/issue_events_467898.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467898"
}
```



---

archive/issue_events_467899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34206",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34206#event-467899"
}
```
