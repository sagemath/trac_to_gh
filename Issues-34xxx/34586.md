# Issue 34586: Fix giac build to work with pari 2.15

archive/issues_034349.json:
```json
{
    "assignees": [],
    "body": "split out from #34537\n\nA workaround is documented in https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#AvailabilityofSage9.7andinstallationhelp but we should get this in urgently.\n\nDepends on #34496\n\nCC:  @videlec @antonio-rojas @sagetrac-parisse\n\nBranch/Commit: **[u/mkoeppe/fix_giac_build_to_work_with_pari_2_15](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_giac_build_to_work_with_pari_2_15) @ [`041d16b`](https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c)**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Dima Pasechnik**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34586_\n\n",
    "closed_at": "2022-11-14T19:36:43Z",
    "created_at": "2022-09-25T19:53:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix giac build to work with pari 2.15",
    "type": "issue",
    "updated_at": "2022-11-14T19:36:43Z",
    "url": "https://github.com/sagemath/sage/issues/34586",
    "user": "https://github.com/mkoeppe"
}
```
split out from #34537

A workaround is documented in https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#AvailabilityofSage9.7andinstallationhelp but we should get this in urgently.

Depends on #34496

CC:  @videlec @antonio-rojas @sagetrac-parisse

Branch/Commit: **[u/mkoeppe/fix_giac_build_to_work_with_pari_2_15](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_giac_build_to_work_with_pari_2_15) @ [`041d16b`](https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c)**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Dima Pasechnik**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/34586_





---

archive/issue_events_471912.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:53:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471912"
}
```



---

archive/issue_events_471913.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:53:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471913"
}
```



---

archive/issue_events_471914.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:53:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471914"
}
```



---

archive/issue_events_471915.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:53:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471915"
}
```



---

archive/issue_comments_558805.json:
```json
{
    "body": "Branch: **[u/mkoeppe/fix_giac_build_to_work_with_pari_2_15](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_giac_build_to_work_with_pari_2_15)**",
    "created_at": "2022-09-25T19:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558805",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/fix_giac_build_to_work_with_pari_2_15](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_giac_build_to_work_with_pari_2_15)**



---

archive/issue_comments_558806.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-09-25T19:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558806",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_558807.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c\"><code>041d16b</code></a></td><td><code>ANYARG giac patch</code></td></tr></table>\n",
    "created_at": "2022-09-25T19:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558807",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c"><code>041d16b</code></a></td><td><code>ANYARG giac patch</code></td></tr></table>




---

archive/issue_comments_558808.json:
```json
{
    "body": "Commit: **[`041d16b`](https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c)**",
    "created_at": "2022-09-25T19:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558808",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`041d16b`](https://github.com/sagemath/sagetrac-mirror/commit/041d16b521d8231e5b441015f08bb386f9d2a51c)**



---

archive/issue_events_471916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:56:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471916"
}
```



---

archive/issue_events_471917.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:58:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471917"
}
```



---

archive/issue_events_471918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T19:58:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471918"
}
```



---

archive/issue_comments_558809.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'm not convinced that a broken build is worse than the build working and then having many things broken at runtime (all the test failures reported in #34537). If anything, system 2.15 should be rejected until #34537 is merged.",
    "created_at": "2022-09-25T20:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558809",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:5" align="right">comment:5</div>

I'm not convinced that a broken build is worse than the build working and then having many things broken at runtime (all the test failures reported in #34537). If anything, system 2.15 should be rejected until #34537 is merged.



---

archive/issue_events_471919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T20:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471919"
}
```



---

archive/issue_events_471920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-25T20:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471920"
}
```



---

archive/issue_comments_558810.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOK, that's probably better",
    "created_at": "2022-09-25T20:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558810",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

OK, that's probably better



---

archive/issue_comments_558811.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWe should disallow using of pari 2.15 from the system. I'll make patch - we already getting many reports on sage-devel etc due to this issus.",
    "created_at": "2022-09-30T10:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558811",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

We should disallow using of pari 2.15 from the system. I'll make patch - we already getting many reports on sage-devel etc due to this issus.



---

archive/issue_comments_558812.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [Dima Pasechnik](#comment:8):\n> We should disallow using of pari 2.15 from the system. I'll make patch - we already getting many reports on sage-devel etc due to this issus.\n> \n\nPlease see #34496 for the fix.",
    "created_at": "2022-09-30T12:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558812",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [Dima Pasechnik](#comment:8):
> We should disallow using of pari 2.15 from the system. I'll make patch - we already getting many reports on sage-devel etc due to this issus.
> 

Please see #34496 for the fix.



---

archive/issue_events_471921.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-30T19:55:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471921"
}
```



---

archive/issue_events_471922.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-30T19:55:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471922"
}
```



---

archive/issue_events_471923.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-30T19:55:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471923"
}
```



---

archive/issue_events_471924.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-30T19:55:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471924"
}
```



---

archive/issue_events_471925.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-30T19:55:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471925"
}
```



---

archive/issue_comments_558813.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to none",
    "created_at": "2022-09-30T19:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558813",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe** to none



---

archive/issue_comments_558814.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to none",
    "created_at": "2022-09-30T19:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558814",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Vincent Delecroix** to none



---

archive/issue_comments_558815.json:
```json
{
    "body": "Dependencies: **#34496**",
    "created_at": "2022-09-30T19:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558815",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34496**



---

archive/issue_comments_558816.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-09-30T22:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558816",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_471926.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-09-30T22:12:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471926"
}
```



---

archive/issue_events_471927.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-09-30T22:12:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471927"
}
```



---

archive/issue_comments_558817.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nupstream report: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2800",
    "created_at": "2022-10-04T09:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558817",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

upstream report: https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2800



---

archive/issue_comments_558818.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2022-10-04T09:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558818",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_558819.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nNot sure if relevant for Sage, but the giac test suite segfaults here with pari 2.15 (after applying the build fix).",
    "created_at": "2022-10-04T09:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558819",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:13" align="right">comment:13</div>

Not sure if relevant for Sage, but the giac test suite segfaults here with pari 2.15 (after applying the build fix).



---

archive/issue_comments_558820.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nshould be discussing on #34496, not here, sorry.",
    "created_at": "2022-10-04T10:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558820",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

should be discussing on #34496, not here, sorry.



---

archive/issue_comments_558821.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\noops, I meant #34537",
    "created_at": "2022-10-04T10:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34586#issuecomment-558821",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

oops, I meant #34537



---

archive/issue_events_471928.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-14T19:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471928"
}
```



---

archive/issue_events_471929.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-14T19:36:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34586",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34586#event-471929"
}
```
