# Issue 34025: Fix doctest in sage/modular/overconvergent/hecke_series.py

archive/issues_033788.json:
```json
{
    "assignees": [],
    "body": "The goal of this ticket is to fix the bug I inadvertently introduced in #33876: the test:\n\n```\nsage: hecke_series(5, 7, 10000, 5, modformsring=True) # long time (3.4s)\n```\nnever returns.\n\nCC:  @GMS103 @tscrim @vbraun\n\nBranch: **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**\n\nReviewer: **Volker Braun, Travis Scrimshaw, Guillermo Moreno-Soc\u00edas**\n\nAuthor: **David Ayotte**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34025_\n\n",
    "closed_at": "2022-06-21T23:22:53Z",
    "created_at": "2022-06-20T01:38:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix doctest in sage/modular/overconvergent/hecke_series.py",
    "type": "issue",
    "updated_at": "2022-06-30T01:12:51Z",
    "url": "https://github.com/sagemath/sage/issues/34025",
    "user": "https://github.com/DavidAyotte"
}
```
The goal of this ticket is to fix the bug I inadvertently introduced in #33876: the test:

```
sage: hecke_series(5, 7, 10000, 5, modformsring=True) # long time (3.4s)
```
never returns.

CC:  @GMS103 @tscrim @vbraun

Branch: **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**

Reviewer: **Volker Braun, Travis Scrimshaw, Guillermo Moreno-Socías**

Author: **David Ayotte**

_Issue created by migration from https://trac.sagemath.org/ticket/34025_





---

archive/issue_events_433128.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2022-06-20T01:38:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433128"
}
```



---

archive/issue_events_433129.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2022-06-20T01:38:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "component: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433129"
}
```



---

archive/issue_events_433130.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2022-06-20T01:38:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433130"
}
```



---

archive/issue_events_433131.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2022-06-20T01:38:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433131"
}
```



---

archive/issue_comments_552796.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nI now consistently get this. I wonder if it comes from the new `change_ring()`? This is strange.\n\nUpping the verbosity yields basically\n\n```\nverbose 1 (344: hecke_series.py, random_new_basis_modp) Calling echelonize mod 5.\nverbose 1 (344: hecke_series.py, random_new_basis_modp) done with echelonize (time = 8.000000001118224e-06)\n```\nrepeatedly.",
    "created_at": "2022-06-20T02:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552796",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
I now consistently get this. I wonder if it comes from the new `change_ring()`? This is strange.

Upping the verbosity yields basically

```
verbose 1 (344: hecke_series.py, random_new_basis_modp) Calling echelonize mod 5.
verbose 1 (344: hecke_series.py, random_new_basis_modp) done with echelonize (time = 8.000000001118224e-06)
```
repeatedly.



---

archive/issue_events_433132.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-06-20T09:30:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433132"
}
```



---

archive/issue_events_433133.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-06-20T09:30:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433133"
}
```



---

archive/issue_comments_552797.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [@tscrim](#comment%3A1):\n> I now consistently get this. I wonder if it comes from the new `change_ring()`? This is strange.\n> \n> Upping the verbosity yields basically\n> \n> ```\n> verbose 1 (344: hecke_series.py, random_new_basis_modp) Calling echelonize mod 5.\n> verbose 1 (344: hecke_series.py, random_new_basis_modp) done with echelonize (time = 8.000000001118224e-06)\n> ```\n> repeatedly.\n\nIt's indeed very strange. I was able to fix the problem on my machine by reverting the line 240 of the file`sage/modular/overconvergent/hecke_series.py`:\n\n```diff\n-        M = ModularFormsRing(N)\n+        M = ModularFormsRing(N, base_ring=Zmod(p))\n```\nI was under the impression that this `base_ring` parameter would not be important in the body of the method `low_weight_generators`, because in any case the `gen_forms` method returns a list of modular forms over Q.",
    "created_at": "2022-06-20T13:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552797",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [@tscrim](#comment%3A1):
> I now consistently get this. I wonder if it comes from the new `change_ring()`? This is strange.
> 
> Upping the verbosity yields basically
> 
> ```
> verbose 1 (344: hecke_series.py, random_new_basis_modp) Calling echelonize mod 5.
> verbose 1 (344: hecke_series.py, random_new_basis_modp) done with echelonize (time = 8.000000001118224e-06)
> ```
> repeatedly.

It's indeed very strange. I was able to fix the problem on my machine by reverting the line 240 of the file`sage/modular/overconvergent/hecke_series.py`:

```diff
-        M = ModularFormsRing(N)
+        M = ModularFormsRing(N, base_ring=Zmod(p))
```
I was under the impression that this `base_ring` parameter would not be important in the body of the method `low_weight_generators`, because in any case the `gen_forms` method returns a list of modular forms over Q.



---

archive/issue_comments_552798.json:
```json
{
    "body": "Branch: **[u/gh-DavidAyotte/fix_blocker_in_hecke_series](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/fix_blocker_in_hecke_series)**",
    "created_at": "2022-06-20T14:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552798",
    "user": "https://github.com/DavidAyotte"
}
```

Branch: **[u/gh-DavidAyotte/fix_blocker_in_hecke_series](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/fix_blocker_in_hecke_series)**



---

archive/issue_comments_552799.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2\">cef8bd2</a></td><td><code>src/sage/modular/modform/ring.py: revert a deleted line of an alias</code></td></tr></table>\n",
    "created_at": "2022-06-20T14:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552799",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2">cef8bd2</a></td><td><code>src/sage/modular/modform/ring.py: revert a deleted line of an alias</code></td></tr></table>




---

archive/issue_comments_552800.json:
```json
{
    "body": "Commit: **[cef8bd2](https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2)**",
    "created_at": "2022-06-20T14:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552800",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[cef8bd2](https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2)**



---

archive/issue_comments_552801.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI reverted some changes I did in #33876, in order to fix this blocker quickly. The command\n\n```\n    sage: hecke_series(5, 7, 10000, 5, modformsring=True) # long time (3.4s)\n```\nnow runs as intended.",
    "created_at": "2022-06-20T14:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552801",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:6'>Comment 6:</a>
I reverted some changes I did in #33876, in order to fix this blocker quickly. The command

```
    sage: hecke_series(5, 7, 10000, 5, modformsring=True) # long time (3.4s)
```
now runs as intended.



---

archive/issue_comments_552802.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9\">9e83123</a></td><td><code>src/sage/modular/overconvergent/hecke_series.py: fix failing doctest</code></td></tr></table>\n",
    "created_at": "2022-06-20T14:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552802",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9">9e83123</a></td><td><code>src/sage/modular/overconvergent/hecke_series.py: fix failing doctest</code></td></tr></table>




---

archive/issue_comments_552803.json:
```json
{
    "body": "Changed commit from **[cef8bd2](https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2)** to **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**",
    "created_at": "2022-06-20T14:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552803",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cef8bd2](https://github.com/sagemath/sagetrac-mirror/commit/cef8bd2da205bc88ff14de2560b284ae39442df2)** to **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**



---

archive/issue_events_433134.json:
```json
{
    "actor": "https://github.com/DavidAyotte",
    "created_at": "2022-06-20T14:55:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433134"
}
```



---

archive/issue_comments_552804.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI confirm that [SageMath](../wiki/SageMath) 9.7.beta3 plus #34025 passes ```make ptestlong``` without problems (apart from #33212 on macOS 11.6.7 with Xcode 13.2.1).",
    "created_at": "2022-06-20T15:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552804",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:9'>Comment 9:</a>
I confirm that [SageMath](../wiki/SageMath) 9.7.beta3 plus #34025 passes ```make ptestlong``` without problems (apart from #33212 on macOS 11.6.7 with Xcode 13.2.1).



---

archive/issue_comments_552805.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2022-06-20T22:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552805",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_433135.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-20T22:38:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433135"
}
```



---

archive/issue_events_433136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-20T22:38:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433136"
}
```



---

archive/issue_events_433137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-20T22:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433137"
}
```



---

archive/issue_events_433138.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-20T22:38:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433138"
}
```



---

archive/issue_comments_552806.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nMerge failure on top of:\n\nc0abe3f5ee Trac #33213: Replace SAGE_TMP by the system location in the sage library\n\n7ab174a70d Trac #32340: document behavior of .is_prime() for number fields\n\nc69f4af336 Trac #28263: Degree for Affine Morphism or Affine Dynamical System\n\ne516392523 Trac #34001: Add flag to avoid OrePolynomialRing cast to PolynomialRing\n\n01b8bcb85f Trac #33993: pep cleanup for words/morphism.py\n\n716c5ce262 Trac #33992: remove class inheritance of object in remaining places\n\nde375bce02 Trac #33990: Subset_s `_an_element_`\n\n0593e83957 Trac #33987: modernize super() in structure, symbolic, doctest, databases\n\nd9a45e29eb Trac #33985: modernize super() in monoids,modules,modular\n\n7ed404657b Trac #33984: modernize super() in schemes,libs,sets,quivers\n\n1df260e842 Trac #33979: .roots() does not always return elements of the base ring\n\nc6c2b85405 Trac #33974: Documentation addition for symmetric functions - Cauchy identity\n\nf92916e358 Trac #33840: bool(matrix) ignores exceptions raised while comparing entries\n\nf8df80820d Updated [SageMath](../wiki/SageMath) version to 9.7.beta3\n\n\n\nauthor '' does not look right",
    "created_at": "2022-06-20T22:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552806",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'>Comment 11:</a>
Merge failure on top of:

c0abe3f5ee Trac #33213: Replace SAGE_TMP by the system location in the sage library

7ab174a70d Trac #32340: document behavior of .is_prime() for number fields

c69f4af336 Trac #28263: Degree for Affine Morphism or Affine Dynamical System

e516392523 Trac #34001: Add flag to avoid OrePolynomialRing cast to PolynomialRing

01b8bcb85f Trac #33993: pep cleanup for words/morphism.py

716c5ce262 Trac #33992: remove class inheritance of object in remaining places

de375bce02 Trac #33990: Subset_s `_an_element_`

0593e83957 Trac #33987: modernize super() in structure, symbolic, doctest, databases

d9a45e29eb Trac #33985: modernize super() in monoids,modules,modular

7ed404657b Trac #33984: modernize super() in schemes,libs,sets,quivers

1df260e842 Trac #33979: .roots() does not always return elements of the base ring

c6c2b85405 Trac #33974: Documentation addition for symmetric functions - Cauchy identity

f92916e358 Trac #33840: bool(matrix) ignores exceptions raised while comparing entries

f8df80820d Updated [SageMath](../wiki/SageMath) version to 9.7.beta3



author '' does not look right



---

archive/issue_comments_552807.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nMerge failure on top of:\n\nc0abe3f5ee Trac #33213: Replace SAGE_TMP by the system location in the sage library\n\n7ab174a70d Trac #32340: document behavior of .is_prime() for number fields\n\nc69f4af336 Trac #28263: Degree for Affine Morphism or Affine Dynamical System\n\ne516392523 Trac #34001: Add flag to avoid OrePolynomialRing cast to PolynomialRing\n\n01b8bcb85f Trac #33993: pep cleanup for words/morphism.py\n\n716c5ce262 Trac #33992: remove class inheritance of object in remaining places\n\nde375bce02 Trac #33990: Subset_s `_an_element_`\n\n0593e83957 Trac #33987: modernize super() in structure, symbolic, doctest, databases\n\nd9a45e29eb Trac #33985: modernize super() in monoids,modules,modular\n\n7ed404657b Trac #33984: modernize super() in schemes,libs,sets,quivers\n\n1df260e842 Trac #33979: .roots() does not always return elements of the base ring\n\nc6c2b85405 Trac #33974: Documentation addition for symmetric functions - Cauchy identity\n\nf92916e358 Trac #33840: bool(matrix) ignores exceptions raised while comparing entries\n\nf8df80820d Updated [SageMath](../wiki/SageMath) version to 9.7.beta3\n\n\n\nauthor '' does not look right",
    "created_at": "2022-06-20T22:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552807",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'>Comment 12:</a>
Merge failure on top of:

c0abe3f5ee Trac #33213: Replace SAGE_TMP by the system location in the sage library

7ab174a70d Trac #32340: document behavior of .is_prime() for number fields

c69f4af336 Trac #28263: Degree for Affine Morphism or Affine Dynamical System

e516392523 Trac #34001: Add flag to avoid OrePolynomialRing cast to PolynomialRing

01b8bcb85f Trac #33993: pep cleanup for words/morphism.py

716c5ce262 Trac #33992: remove class inheritance of object in remaining places

de375bce02 Trac #33990: Subset_s `_an_element_`

0593e83957 Trac #33987: modernize super() in structure, symbolic, doctest, databases

d9a45e29eb Trac #33985: modernize super() in monoids,modules,modular

7ed404657b Trac #33984: modernize super() in schemes,libs,sets,quivers

1df260e842 Trac #33979: .roots() does not always return elements of the base ring

c6c2b85405 Trac #33974: Documentation addition for symmetric functions - Cauchy identity

f92916e358 Trac #33840: bool(matrix) ignores exceptions raised while comparing entries

f8df80820d Updated [SageMath](../wiki/SageMath) version to 9.7.beta3



author '' does not look right



---

archive/issue_comments_552808.json:
```json
{
    "body": "Author: **David Ayotte**",
    "created_at": "2022-06-20T22:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552808",
    "user": "https://github.com/vbraun"
}
```

Author: **David Ayotte**



---

archive/issue_comments_552809.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHello, where can I look for the merge failure? On my machine, I was able to merge the develop branch (v. 9.7.beta3) into my branch without any merge failure. I upgraded [SageMath](../wiki/SageMath) to version 9.7.beta3 and I'm currently building it.",
    "created_at": "2022-06-20T22:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552809",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:14'>Comment 14:</a>
Hello, where can I look for the merge failure? On my machine, I was able to merge the develop branch (v. 9.7.beta3) into my branch without any merge failure. I upgraded [SageMath](../wiki/SageMath) to version 9.7.beta3 and I'm currently building it.



---

archive/issue_comments_552810.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nIs this failure OS dependent?\n\nOn Apple Silicon, in an empty directory I did\n\n```\ngit clone -c core.symlinks=true --branch develop --tags https://github.com/sagemath/sage.git\ncd sage\ngit-trac-merge 34025 33213 32340 28263 34001 33993 33992 33990 33987 33985 33984 33979 33974 33840\nmake configure\n./configure\nsource .homebrew-build-env\nmake\nmake pytest\nmake ptestlong\n```\nwithout any problems (apart from #33212 on macOS 11.6.7 with Xcode 13.2.1).\n\nOutput of merge attached.",
    "created_at": "2022-06-20T23:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552810",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:15'>Comment 15:</a>
Is this failure OS dependent?

On Apple Silicon, in an empty directory I did

```
git clone -c core.symlinks=true --branch develop --tags https://github.com/sagemath/sage.git
cd sage
git-trac-merge 34025 33213 32340 28263 34001 33993 33992 33990 33987 33985 33984 33979 33974 33840
make configure
./configure
source .homebrew-build-env
make
make pytest
make ptestlong
```
without any problems (apart from #33212 on macOS 11.6.7 with Xcode 13.2.1).

Output of merge attached.



---

archive/issue_comments_552811.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nAttachment: **[git-trac-merge 34025 33213 32340 28263 34001 33993 33992 33990 33987 33985 33984 33979 33974 33840.txt](https://github.com/sagemath/sage/files/ticket34025/2d6cfcc24f419e85546a5ab7be79269c.txt)**\n\nVolker is saying there is a merge failure with one of those tickets. I am pretty sure it is #33985 with a trivial failure.",
    "created_at": "2022-06-20T23:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552811",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'>Comment 16:</a>
Attachment: **[git-trac-merge 34025 33213 32340 28263 34001 33993 33992 33990 33987 33985 33984 33979 33974 33840.txt](https://github.com/sagemath/sage/files/ticket34025/2d6cfcc24f419e85546a5ab7be79269c.txt)**

Volker is saying there is a merge failure with one of those tickets. I am pretty sure it is #33985 with a trivial failure.



---

archive/issue_comments_552812.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSo I would just merge #33985 in, which perhaps your git merging is slightly smarter than what Volker is using (potentially to prevent any unintended changes from creeping in).",
    "created_at": "2022-06-20T23:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552812",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>Comment 17:</a>
So I would just merge #33985 in, which perhaps your git merging is slightly smarter than what Volker is using (potentially to prevent any unintended changes from creeping in).



---

archive/issue_comments_552813.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI am sorry, Travis, I am afraid I do not understand you.\n\nMy ```git-trac-merge``` is just\n\n```\n#!/bin/zsh\ngit remote add trac git://trac.sagemath.org/sage.git\nfor a in $*; do echo && echo '#'\"$a\" && git trac fetch $a && git merge --no-ff -m \"Merge #$a\" FETCH_HEAD; done\n```\nDo you mean merging only #34025 and #33985 should fail?",
    "created_at": "2022-06-20T23:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552813",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:18'>Comment 18:</a>
I am sorry, Travis, I am afraid I do not understand you.

My ```git-trac-merge``` is just

```
#!/bin/zsh
git remote add trac git://trac.sagemath.org/sage.git
for a in $*; do echo && echo '#'"$a" && git trac fetch $a && git merge --no-ff -m "Merge #$a" FETCH_HEAD; done
```
Do you mean merging only #34025 and #33985 should fail?



---

archive/issue_comments_552814.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThis is what I get:\n\n```\n% git-trac-merge 34025 33985\n\n#34025\nremote branch: u/gh-DavidAyotte/fix_blocker_in_hecke_series\n\nFrom git://trac.sagemath.org/sage\n * branch                  u/gh-DavidAyotte/fix_blocker_in_hecke_series -> FETCH_HEAD\n * [new branch]            u/gh-DavidAyotte/fix_blocker_in_hecke_series -> trac/u/gh-DavidAyotte/fix_blocker_in_hecke_series\n\nMerge made by the 'recursive' strategy.\n src/sage/modular/modform/ring.py                | 27 ++++++++++++++-------------\n src/sage/modular/overconvergent/hecke_series.py |  5 ++---\n 2 files changed, 16 insertions(+), 16 deletions(-)\n\n#33985\nremote branch: u/chapoton/33985\n\nFrom git://trac.sagemath.org/sage\n * branch                  u/chapoton/33985 -> FETCH_HEAD\n * [new branch]            u/chapoton/33985 -> trac/u/chapoton/33985\n\nAuto-merging src/sage/monoids/indexed_free_monoid.py\nAuto-merging src/sage/modules/tensor_operations.py\nAuto-merging src/sage/modules/multi_filtered_vector_space.py\nAuto-merging src/sage/modules/filtered_vector_space.py\nAuto-merging src/sage/modular/modform_hecketriangle/graded_ring_element.py\nMerge made by the 'recursive' strategy.\n src/sage/modular/arithgroup/arithgroup_generic.py               |  2 +-\n src/sage/modular/btquotients/btquotient.py                      |  6 +++---\n src/sage/modular/btquotients/pautomorphicform.py                | 12 ++++++------\n src/sage/modular/dirichlet.py                                   |  5 ++---\n src/sage/modular/hecke/algebra.py                               |  4 +---\n src/sage/modular/modform_hecketriangle/abstract_ring.py         |  2 +-\n src/sage/modular/modform_hecketriangle/abstract_space.py        |  5 ++---\n src/sage/modular/modform_hecketriangle/analytic_type.py         | 18 +++++++-----------\n src/sage/modular/modform_hecketriangle/element.py               |  6 +++---\n src/sage/modular/modform_hecketriangle/graded_ring_element.py   | 13 +++++--------\n src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py |  4 ++--\n src/sage/modular/modform_hecketriangle/series_constructor.py    |  7 +++----\n src/sage/modular/modform_hecketriangle/subspace.py              | 15 +++++----------\n src/sage/modules/fg_pid/fgp_module.py                           |  2 +-\n src/sage/modules/filtered_vector_space.py                       |  2 +-\n src/sage/modules/fp_graded/free_module.py                       |  8 ++++----\n src/sage/modules/fp_graded/module.py                            |  4 ++--\n src/sage/modules/free_module.py                                 | 12 ++++++------\n src/sage/modules/multi_filtered_vector_space.py                 |  2 +-\n src/sage/modules/tensor_operations.py                           |  4 ++--\n src/sage/modules/torsion_quadratic_module.py                    |  2 +-\n src/sage/modules/vector_numpy_dense.pyx                         |  3 +--\n src/sage/modules/with_basis/cell_module.py                      |  4 ++--\n src/sage/modules/with_basis/invariant.py                        |  6 +++---\n src/sage/modules/with_basis/representation.py                   |  3 ++-\n src/sage/modules/with_basis/subquotient.py                      |  5 ++---\n src/sage/monoids/automatic_semigroup.py                         |  3 ++-\n src/sage/monoids/free_monoid.py                                 |  2 +-\n src/sage/monoids/indexed_free_monoid.py                         |  4 ++--\n src/sage/monoids/trace_monoid.py                                |  2 +-\n 30 files changed, 75 insertions(+), 92 deletions(-)\n% \n```",
    "created_at": "2022-06-21T00:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552814",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:19'>Comment 19:</a>
This is what I get:

```
% git-trac-merge 34025 33985

#34025
remote branch: u/gh-DavidAyotte/fix_blocker_in_hecke_series

From git://trac.sagemath.org/sage
 * branch                  u/gh-DavidAyotte/fix_blocker_in_hecke_series -> FETCH_HEAD
 * [new branch]            u/gh-DavidAyotte/fix_blocker_in_hecke_series -> trac/u/gh-DavidAyotte/fix_blocker_in_hecke_series

Merge made by the 'recursive' strategy.
 src/sage/modular/modform/ring.py                | 27 ++++++++++++++-------------
 src/sage/modular/overconvergent/hecke_series.py |  5 ++---
 2 files changed, 16 insertions(+), 16 deletions(-)

#33985
remote branch: u/chapoton/33985

From git://trac.sagemath.org/sage
 * branch                  u/chapoton/33985 -> FETCH_HEAD
 * [new branch]            u/chapoton/33985 -> trac/u/chapoton/33985

Auto-merging src/sage/monoids/indexed_free_monoid.py
Auto-merging src/sage/modules/tensor_operations.py
Auto-merging src/sage/modules/multi_filtered_vector_space.py
Auto-merging src/sage/modules/filtered_vector_space.py
Auto-merging src/sage/modular/modform_hecketriangle/graded_ring_element.py
Merge made by the 'recursive' strategy.
 src/sage/modular/arithgroup/arithgroup_generic.py               |  2 +-
 src/sage/modular/btquotients/btquotient.py                      |  6 +++---
 src/sage/modular/btquotients/pautomorphicform.py                | 12 ++++++------
 src/sage/modular/dirichlet.py                                   |  5 ++---
 src/sage/modular/hecke/algebra.py                               |  4 +---
 src/sage/modular/modform_hecketriangle/abstract_ring.py         |  2 +-
 src/sage/modular/modform_hecketriangle/abstract_space.py        |  5 ++---
 src/sage/modular/modform_hecketriangle/analytic_type.py         | 18 +++++++-----------
 src/sage/modular/modform_hecketriangle/element.py               |  6 +++---
 src/sage/modular/modform_hecketriangle/graded_ring_element.py   | 13 +++++--------
 src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py |  4 ++--
 src/sage/modular/modform_hecketriangle/series_constructor.py    |  7 +++----
 src/sage/modular/modform_hecketriangle/subspace.py              | 15 +++++----------
 src/sage/modules/fg_pid/fgp_module.py                           |  2 +-
 src/sage/modules/filtered_vector_space.py                       |  2 +-
 src/sage/modules/fp_graded/free_module.py                       |  8 ++++----
 src/sage/modules/fp_graded/module.py                            |  4 ++--
 src/sage/modules/free_module.py                                 | 12 ++++++------
 src/sage/modules/multi_filtered_vector_space.py                 |  2 +-
 src/sage/modules/tensor_operations.py                           |  4 ++--
 src/sage/modules/torsion_quadratic_module.py                    |  2 +-
 src/sage/modules/vector_numpy_dense.pyx                         |  3 +--
 src/sage/modules/with_basis/cell_module.py                      |  4 ++--
 src/sage/modules/with_basis/invariant.py                        |  6 +++---
 src/sage/modules/with_basis/representation.py                   |  3 ++-
 src/sage/modules/with_basis/subquotient.py                      |  5 ++---
 src/sage/monoids/automatic_semigroup.py                         |  3 ++-
 src/sage/monoids/free_monoid.py                                 |  2 +-
 src/sage/monoids/indexed_free_monoid.py                         |  4 ++--
 src/sage/monoids/trace_monoid.py                                |  2 +-
 30 files changed, 75 insertions(+), 92 deletions(-)
% 
```



---

archive/issue_events_433139.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-06-21T00:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433139"
}
```



---

archive/issue_events_433140.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-06-21T00:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433140"
}
```



---

archive/issue_comments_552815.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@GMS103](#comment%3A18):\n> I am sorry, Travis, I am afraid I do not understand you.\n\nActually, I was wrong. #33985 touches different files than #34025. I didn't look closely enough. I think the secret to the \"merge failure\" is actually the last line\n\n> author *does not look right*\n\nWhich did not have David listed as the author at the time. So the message Volker copied in is slightly misleading in that regard. I think we can just set this back to a positive review (especially given that you checked it merged cleaning and none of the other tickets touch the same files).",
    "created_at": "2022-06-21T00:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552815",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@GMS103](#comment%3A18):
> I am sorry, Travis, I am afraid I do not understand you.

Actually, I was wrong. #33985 touches different files than #34025. I didn't look closely enough. I think the secret to the "merge failure" is actually the last line

> author *does not look right*

Which did not have David listed as the author at the time. So the message Volker copied in is slightly misleading in that regard. I think we can just set this back to a positive review (especially given that you checked it merged cleaning and none of the other tickets touch the same files).



---

archive/issue_comments_552816.json:
```json
{
    "body": "Changed reviewer from **Volker Braun** to **Volker Braun, Travis Scrimshaw, Guillermo Moreno-Soc\u00edas**",
    "created_at": "2022-06-21T00:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552816",
    "user": "https://github.com/GMS103"
}
```

Changed reviewer from **Volker Braun** to **Volker Braun, Travis Scrimshaw, Guillermo Moreno-Socías**



---

archive/issue_comments_552817.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThank you all for investigating this, I was a little bit confused about this and my [SageMath](../wiki/SageMath) was currently building.",
    "created_at": "2022-06-21T00:12:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552817",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:22'>Comment 22:</a>
Thank you all for investigating this, I was a little bit confused about this and my [SageMath](../wiki/SageMath) was currently building.



---

archive/issue_comments_552818.json:
```json
{
    "body": "Changed branch from **[u/gh-DavidAyotte/fix_blocker_in_hecke_series](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/fix_blocker_in_hecke_series)** to **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**",
    "created_at": "2022-06-21T23:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552818",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-DavidAyotte/fix_blocker_in_hecke_series](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DavidAyotte/fix_blocker_in_hecke_series)** to **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)**



---

archive/issue_events_433141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-21T23:22:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433141"
}
```



---

archive/issue_events_433142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2b36879ae1dade764e0b9e8d07457397181e58b2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-06-21T23:22:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34025#event-433142"
}
```



---

archive/issue_comments_552819.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThis is perhaps a stupid question, but do closed tickets get merged in the develop branch?\n\nI ask because with the current develop branch as is, the test fixed by this ticket fails in exactly the same way.",
    "created_at": "2022-06-30T00:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552819",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:24'>Comment 24:</a>
This is perhaps a stupid question, but do closed tickets get merged in the develop branch?

I ask because with the current develop branch as is, the test fixed by this ticket fails in exactly the same way.



---

archive/issue_comments_552820.json:
```json
{
    "body": "Changed commit from **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)** to none",
    "created_at": "2022-06-30T00:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552820",
    "user": "https://github.com/GMS103"
}
```

Changed commit from **[9e83123](https://github.com/sagemath/sagetrac-mirror/commit/9e83123124a21b55bd7cb7a0be9d1957882dc9d9)** to none



---

archive/issue_comments_552821.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nYes, but only when the next beta is released (note the top commit in `develop` is always a beta).",
    "created_at": "2022-06-30T01:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552821",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'>Comment 25:</a>
Yes, but only when the next beta is released (note the top commit in `develop` is always a beta).



---

archive/issue_comments_552822.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThanks, Travis.",
    "created_at": "2022-06-30T01:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34025#issuecomment-552822",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:26'>Comment 26:</a>
Thanks, Travis.
