# Issue 34092: Docbuild workflow broken because furo is too new

archive/issues_033855.json:
```json
{
    "assignees": [],
    "body": "As seen for example in \nhttps://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/\n\n```\nERROR: This page was generated by inheriting from \"layout.html\".\n\nFuro (the documentation theme that this site is generated with) does not support this, and has generated this page. If you are the author of this documentation, please look into why this page was generated using the \"layout.html\" template and fix the root cause.\n\nDebugging information, if you need to report this error somewhere:\nSphinx: 4.4.0\nFuro: 2022.06.21\n\npagename: index\n```\n\nAs a workaround, we back out the use of furo on the docbuild CI.\n\n\nCC:  @tobiasdiez @kwankyu\n\nBranch/Commit: **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**\n\nReviewer: **Kwankyu Lee**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **documentation**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34092_\n\n",
    "closed_at": "2022-07-09T22:33:54Z",
    "created_at": "2022-06-27T01:26:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Docbuild workflow broken because furo is too new",
    "type": "issue",
    "updated_at": "2022-07-09T22:33:54Z",
    "url": "https://github.com/sagemath/sage/issues/34092",
    "user": "https://github.com/mkoeppe"
}
```
As seen for example in 
https://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/

```
ERROR: This page was generated by inheriting from "layout.html".

Furo (the documentation theme that this site is generated with) does not support this, and has generated this page. If you are the author of this documentation, please look into why this page was generated using the "layout.html" template and fix the root cause.

Debugging information, if you need to report this error somewhere:
Sphinx: 4.4.0
Furo: 2022.06.21

pagename: index
```

As a workaround, we back out the use of furo on the docbuild CI.


CC:  @tobiasdiez @kwankyu

Branch/Commit: **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**

Reviewer: **Kwankyu Lee**

Author: **Matthias Koeppe**

Component: **documentation**

_Issue created by migration from https://trac.sagemath.org/ticket/34092_





---

archive/issue_events_466719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-27T01:26:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466719"
}
```



---

archive/issue_events_466720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-27T01:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466720"
}
```



---

archive/issue_events_466721.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-27T01:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466721"
}
```



---

archive/issue_events_466722.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-27T01:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466722"
}
```



---

archive/issue_comments_550635.json:
```json
{
    "body": "Branch: **[u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new)**",
    "created_at": "2022-06-27T01:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550635",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new)**



---

archive/issue_comments_550636.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00\">256ca4b</a></td><td><code>build/pkgs/furo/requirements.txt: Set an upper bound</code></td></tr></table>\n",
    "created_at": "2022-06-27T01:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00">256ca4b</a></td><td><code>build/pkgs/furo/requirements.txt: Set an upper bound</code></td></tr></table>




---

archive/issue_comments_550637.json:
```json
{
    "body": "Commit: **[256ca4b](https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00)**",
    "created_at": "2022-06-27T01:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550637",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[256ca4b](https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00)**



---

archive/issue_comments_550638.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n pagename: index\n ```\n \n+As a workaround, we set a version constraint.\n+\n``````\n",
    "created_at": "2022-06-27T01:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550638",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 pagename: index
 ```
 
+As a workaround, we set a version constraint.
+
``````




---

archive/issue_comments_550639.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-06-27T01:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550639",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_550640.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAlso fails with Furo: 2022.04.07 - https://256ca4be1c5defc9de1f43a18a475258c5b19a00--sagemath-tobias.netlify.app/",
    "created_at": "2022-06-27T04:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550640",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Also fails with Furo: 2022.04.07 - https://256ca4be1c5defc9de1f43a18a475258c5b19a00--sagemath-tobias.netlify.app/



---

archive/issue_comments_550641.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOr perhaps something else changed on our side since #33601?",
    "created_at": "2022-06-27T17:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550641",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Or perhaps something else changed on our side since #33601?



---

archive/issue_comments_550642.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e\">889fcc1</a></td><td><code>Revert \"Use furo on ci\"</code></td></tr></table>\n",
    "created_at": "2022-06-30T20:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550642",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e">889fcc1</a></td><td><code>Revert "Use furo on ci"</code></td></tr></table>




---

archive/issue_comments_550643.json:
```json
{
    "body": "Changed commit from **[256ca4b](https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00)** to **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**",
    "created_at": "2022-06-30T20:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550643",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[256ca4b](https://github.com/sagemath/sagetrac-mirror/commit/256ca4be1c5defc9de1f43a18a475258c5b19a00)** to **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**



---

archive/issue_events_466723.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-06-30T20:40:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466723"
}
```



---

archive/issue_comments_550644.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,5 +13,5 @@\n pagename: index\n ```\n \n-As a workaround, we set a version constraint.\n+As a workaround, we back out the use of furo on the docbuild CI.\n \n``````\n",
    "created_at": "2022-06-30T20:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550644",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,5 +13,5 @@
 pagename: index
 ```
 
-As a workaround, we set a version constraint.
+As a workaround, we back out the use of furo on the docbuild CI.
 
``````




---

archive/issue_comments_550645.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOkay. I have no idea either. It works locally well.",
    "created_at": "2022-07-01T01:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550645",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

Okay. I have no idea either. It works locally well.



---

archive/issue_comments_550646.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-07-01T01:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550646",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_events_466724.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-07-01T01:48:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466724"
}
```



---

archive/issue_events_466725.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-07-01T01:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466725"
}
```



---

archive/issue_comments_550647.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks!",
    "created_at": "2022-07-01T01:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550647",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks!



---

archive/issue_comments_550648.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis seems to only affect the index page, eg https://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/reference/ is working. How is the starting page generated?",
    "created_at": "2022-07-02T13:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550648",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

This seems to only affect the index page, eg https://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/reference/ is working. How is the starting page generated?



---

archive/issue_comments_550649.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@tobiasdiez](#comment:9):\n> This seems to only affect the index page, eg https://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/reference/ is working. How is the starting page generated? \n\nIndeed. It is generated by `sage_docbuild.WebsiteBuilder` using the template `src/doc/en/website/templates/index.html`, which has the first line `{% extends \"layout.html\" %}`! It seems this line conflicts with the furo theme.",
    "created_at": "2022-07-02T13:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550649",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@tobiasdiez](#comment:9):
> This seems to only affect the index page, eg https://8f7574169b6743890bc32b58d9d2afcb4a5d6375--sagemath-tobias.netlify.app/reference/ is working. How is the starting page generated? 

Indeed. It is generated by `sage_docbuild.WebsiteBuilder` using the template `src/doc/en/website/templates/index.html`, which has the first line `{% extends "layout.html" %}`! It seems this line conflicts with the furo theme.



---

archive/issue_events_466726.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-09T22:33:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466726"
}
```



---

archive/issue_events_466727.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "23e4bbe7d577659f19af18d75161ba49156b5316",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-07-09T22:33:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34092#event-466727"
}
```



---

archive/issue_comments_550650.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new)** to **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**",
    "created_at": "2022-07-09T22:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34092",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34092#issuecomment-550650",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/docbuild_workflow_broken_because_furo_is_too_new)** to **[889fcc1](https://github.com/sagemath/sagetrac-mirror/commit/889fcc122d18b7b081daa910bd4cac878e048f2e)**
