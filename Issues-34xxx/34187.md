# Issue 34187: Remove src/sage/__init__.py

archive/issues_033950.json:
```json
{
    "assignees": [],
    "body": "Follow-up from #33011.\n\nBecause of the complication described in #33011, we not only remove the file from the source tree but also remove it from site-packages before building sagelib.\n\nFollow-up: \n- make sagemath-standard, sage-setup depend on sagemath-environment\n\n\nDepends on #33011\n\nCC:  @kwankyu @videlec\n\nBranch: **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**\n\nReviewer: **Kwankyu Lee**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34187_\n\n",
    "closed_at": "2022-08-01T20:23:01Z",
    "created_at": "2022-07-15T14:25:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove src/sage/__init__.py",
    "type": "issue",
    "updated_at": "2022-10-07T21:50:16Z",
    "url": "https://github.com/sagemath/sage/issues/34187",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #33011.

Because of the complication described in #33011, we not only remove the file from the source tree but also remove it from site-packages before building sagelib.

Follow-up: 
- make sagemath-standard, sage-setup depend on sagemath-environment


Depends on #33011

CC:  @kwankyu @videlec

Branch: **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**

Reviewer: **Kwankyu Lee**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/34187_





---

archive/issue_events_434769.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-15T14:25:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434769"
}
```



---

archive/issue_events_434770.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-15T14:25:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434770"
}
```



---

archive/issue_events_434771.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-15T14:25:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434771"
}
```



---

archive/issue_events_434772.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-15T14:25:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434772"
}
```



---

archive/issue_comments_555238.json:
```json
{
    "body": "Dependencies: **#33011**",
    "created_at": "2022-07-15T14:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555238",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33011**



---

archive/issue_comments_555239.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nIf I remove `__init__.py` from `src/sage` and `pkgs/sagemath-standard/build/lib.macosx-12-x86_64-cpython-39/sage`, then sage is built without problem, but doctest fails. Is this expected?",
    "created_at": "2022-07-15T15:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555239",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'>Comment 2:</a>
If I remove `__init__.py` from `src/sage` and `pkgs/sagemath-standard/build/lib.macosx-12-x86_64-cpython-39/sage`, then sage is built without problem, but doctest fails. Is this expected?



---

archive/issue_comments_555240.json:
```json
{
    "body": "Branch: **[u/mkoeppe/remove_src_sage___init___py](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_src_sage___init___py)**",
    "created_at": "2022-07-15T15:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555240",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/remove_src_sage___init___py](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_src_sage___init___py)**



---

archive/issue_comments_555241.json:
```json
{
    "body": "Commit: **[f447a11](https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380)**",
    "created_at": "2022-07-15T16:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555241",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[f447a11](https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380)**



---

archive/issue_comments_555242.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI'm getting\n\n```\nsage -t --random-seed=29572225487268684535188462271558972615 src/sage/misc/sageinspect.py  # 1 doctest failed\nsage -t --random-seed=29572225487268684535188462271558972615 src/sage_setup/find.py  # 13 doctests failed\nsage -t --random-seed=29572225487268684535188462271558972615 src/sage_setup/clean.py  # 4 doctests failed\nsage -t --random-seed=29572225487268684535188462271558972615 src/sage/misc/edit_module.py  # 1 doctest failed\n```\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1326e173dfd625a3c65c763e213413f59e9c85cc\">1326e17</a></td><td><code>src/sage/numerical/__init__.py: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5aebcf338fb09db6dcc876cfd9048e8af218db61\">5aebcf3</a></td><td><code>src/sage_docbuild/builders.py: Handle namespace packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bba52849ad01f2977e1cc6b7a33342771a8671e0\">bba5284</a></td><td><code>src/sage_setup/find.py: Update doctest output</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56e9123118b11e7ada5c8d12b39f1dc811b6b015\">56e9123</a></td><td><code>Merge #28925</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a7677998edc094a2dc12dfda5dfbbce904941aa\">6a76779</a></td><td><code>Merge #28925</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd185b51fef28748a9c11d3c8941503db35717d4\">bd185b5</a></td><td><code>Merge tag '9.7.beta5' into t/33011/remove___init___py_files_for_packages_designated_to_be_namespace_packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39aa2f1ea4432291c4e5920971d6f10e175a838b\">39aa2f1</a></td><td><code>src/sage_setup/command/sage_install.py (sage_clean): Clean __init__.py when installed package was ordinary, source package is namespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3bdb464d9b57a2c67198b2a954814bb3632d7e4\">d3bdb46</a></td><td><code>Merge #33011</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7336e9d1513009d36f64734f4137808dfe84e5fb\">7336e9d</a></td><td><code>build/pkgs/sagelib/spkg-install: Remove installed sage/__init__.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380\">f447a11</a></td><td><code>src/sage/__init__.py: Remove</code></td></tr></table>\n",
    "created_at": "2022-07-15T16:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555242",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
I'm getting

```
sage -t --random-seed=29572225487268684535188462271558972615 src/sage/misc/sageinspect.py  # 1 doctest failed
sage -t --random-seed=29572225487268684535188462271558972615 src/sage_setup/find.py  # 13 doctests failed
sage -t --random-seed=29572225487268684535188462271558972615 src/sage_setup/clean.py  # 4 doctests failed
sage -t --random-seed=29572225487268684535188462271558972615 src/sage/misc/edit_module.py  # 1 doctest failed
```

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1326e173dfd625a3c65c763e213413f59e9c85cc">1326e17</a></td><td><code>src/sage/numerical/__init__.py: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5aebcf338fb09db6dcc876cfd9048e8af218db61">5aebcf3</a></td><td><code>src/sage_docbuild/builders.py: Handle namespace packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bba52849ad01f2977e1cc6b7a33342771a8671e0">bba5284</a></td><td><code>src/sage_setup/find.py: Update doctest output</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56e9123118b11e7ada5c8d12b39f1dc811b6b015">56e9123</a></td><td><code>Merge #28925</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a7677998edc094a2dc12dfda5dfbbce904941aa">6a76779</a></td><td><code>Merge #28925</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd185b51fef28748a9c11d3c8941503db35717d4">bd185b5</a></td><td><code>Merge tag '9.7.beta5' into t/33011/remove___init___py_files_for_packages_designated_to_be_namespace_packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39aa2f1ea4432291c4e5920971d6f10e175a838b">39aa2f1</a></td><td><code>src/sage_setup/command/sage_install.py (sage_clean): Clean __init__.py when installed package was ordinary, source package is namespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3bdb464d9b57a2c67198b2a954814bb3632d7e4">d3bdb46</a></td><td><code>Merge #33011</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7336e9d1513009d36f64734f4137808dfe84e5fb">7336e9d</a></td><td><code>build/pkgs/sagelib/spkg-install: Remove installed sage/__init__.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380">f447a11</a></td><td><code>src/sage/__init__.py: Remove</code></td></tr></table>




---

archive/issue_comments_555243.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\n\n```\n> /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage_setup/find.py(278)_cythonized_dir()\n    276         src_dir = Path(src_dir)\n    277         sage = import_module('sage')\n--> 278         d = Path(sage.__file__).resolve().parent.parent\n    279         editable_install = d == src_dir.resolve()\n    280     if editable_install:\n```\nthis use of `sage.__file__` now needs to be changed",
    "created_at": "2022-07-15T16:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555243",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>

```
> /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage_setup/find.py(278)_cythonized_dir()
    276         src_dir = Path(src_dir)
    277         sage = import_module('sage')
--> 278         d = Path(sage.__file__).resolve().parent.parent
    279         editable_install = d == src_dir.resolve()
    280     if editable_install:
```
this use of `sage.__file__` now needs to be changed



---

archive/issue_comments_555244.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239\">01f9143</a></td><td><code>src/sage_setup: Fix for namespace package sage</code></td></tr></table>\n",
    "created_at": "2022-07-15T16:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555244",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239">01f9143</a></td><td><code>src/sage_setup: Fix for namespace package sage</code></td></tr></table>




---

archive/issue_comments_555245.json:
```json
{
    "body": "Changed commit from **[f447a11](https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380)** to **[01f9143](https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239)**",
    "created_at": "2022-07-15T16:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555245",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f447a11](https://github.com/sagemath/sagetrac-mirror/commit/f447a11cd0b3aad3b5b638902a345a92c7723380)** to **[01f9143](https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239)**



---

archive/issue_comments_555246.json:
```json
{
    "body": "Changed commit from **[01f9143](https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239)** to **[9627219](https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe)**",
    "created_at": "2022-07-15T16:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555246",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[01f9143](https://github.com/sagemath/sagetrac-mirror/commit/01f914312302f1ca01aa90a4438e1eb51fdbc239)** to **[9627219](https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe)**



---

archive/issue_comments_555247.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe\">9627219</a></td><td><code>src/sage/misc/edit_module.py: Update doctest</code></td></tr></table>\n",
    "created_at": "2022-07-15T16:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555247",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe">9627219</a></td><td><code>src/sage/misc/edit_module.py: Update doctest</code></td></tr></table>




---

archive/issue_comments_555248.json:
```json
{
    "body": "Changed commit from **[9627219](https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe)** to **[e884c9e](https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf)**",
    "created_at": "2022-07-15T16:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555248",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9627219](https://github.com/sagemath/sagetrac-mirror/commit/9627219b021d4f23ef044091dc7e8115da6dfafe)** to **[e884c9e](https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf)**



---

archive/issue_comments_555249.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf\">e884c9e</a></td><td><code>src/sage/misc/sageinspect.py: Update doctest</code></td></tr></table>\n",
    "created_at": "2022-07-15T16:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555249",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf">e884c9e</a></td><td><code>src/sage/misc/sageinspect.py: Update doctest</code></td></tr></table>




---

archive/issue_events_434773.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-15T16:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434773"
}
```



---

archive/issue_comments_555250.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-07-15T16:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555250",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_555251.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nPerhaps we have to respect the deprecation period of `isfunction()` defined in `sage` and deprecated by #32479. It ends after two months from now.",
    "created_at": "2022-07-15T22:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555251",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'>Comment 10:</a>
Perhaps we have to respect the deprecation period of `isfunction()` defined in `sage` and deprecated by #32479. It ends after two months from now.



---

archive/issue_events_434774.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-16T00:12:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434774"
}
```



---

archive/issue_events_434775.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-16T00:12:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434775"
}
```



---

archive/issue_comments_555252.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515\">7a0ff3f</a></td><td><code>src/sage/all.py: Restore sage.isfunction as a LazyImport</code></td></tr></table>\n",
    "created_at": "2022-07-16T15:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555252",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515">7a0ff3f</a></td><td><code>src/sage/all.py: Restore sage.isfunction as a LazyImport</code></td></tr></table>




---

archive/issue_comments_555253.json:
```json
{
    "body": "Changed commit from **[e884c9e](https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf)** to **[7a0ff3f](https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515)**",
    "created_at": "2022-07-16T15:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e884c9e](https://github.com/sagemath/sagetrac-mirror/commit/e884c9efe7c88d07c76e3614d68a647a5d0053cf)** to **[7a0ff3f](https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515)**



---

archive/issue_events_434776.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-16T15:15:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434776"
}
```



---

archive/issue_events_434777.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-16T15:15:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434777"
}
```



---

archive/issue_comments_555254.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nSorry for pointing to a minor thing, but the deprecation message is somewhat misleading as the function in `sage.misc.sageinspect` is `is_function_or_cython_function`. \n\n```\nsage: isfunction(f)\n<ipython-input-3-631f9d828a9a>:1: DeprecationWarning: \nImporting isfunction from here is deprecated. If you need to use it, please import\n it directly from sage.misc.sageinspect\nSee https://trac.sagemath.org/32479 for details.\n  isfunction(f)\nTrue\nsage: from sage.misc.sageinspect import isfunction\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-4-53c0fed64cdc> in <module>\n----> 1 from sage.misc.sageinspect import isfunction\n\nImportError: cannot import name 'isfunction' from 'sage.misc.sageinspect' (/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/sageinspect.py)\n```",
    "created_at": "2022-07-18T11:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555254",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'>Comment 14:</a>
Sorry for pointing to a minor thing, but the deprecation message is somewhat misleading as the function in `sage.misc.sageinspect` is `is_function_or_cython_function`. 

```
sage: isfunction(f)
<ipython-input-3-631f9d828a9a>:1: DeprecationWarning: 
Importing isfunction from here is deprecated. If you need to use it, please import
 it directly from sage.misc.sageinspect
See https://trac.sagemath.org/32479 for details.
  isfunction(f)
True
sage: from sage.misc.sageinspect import isfunction
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-4-53c0fed64cdc> in <module>
----> 1 from sage.misc.sageinspect import isfunction

ImportError: cannot import name 'isfunction' from 'sage.misc.sageinspect' (/Users/kwankyu/GitHub/sage-temp/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/sageinspect.py)
```



---

archive/issue_comments_555255.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nPerhaps moving `isfunction` in `sage.__init__.py` to `sage.all` is a solution?",
    "created_at": "2022-07-18T11:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555255",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'>Comment 15:</a>
Perhaps moving `isfunction` in `sage.__init__.py` to `sage.all` is a solution?



---

archive/issue_comments_555256.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138\">dc2ddb5</a></td><td><code>src/sage/misc/lazy_import.pyx: Improve deprecation message when as_ is in use</code></td></tr></table>\n",
    "created_at": "2022-07-18T17:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555256",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138">dc2ddb5</a></td><td><code>src/sage/misc/lazy_import.pyx: Improve deprecation message when as_ is in use</code></td></tr></table>




---

archive/issue_comments_555257.json:
```json
{
    "body": "Changed commit from **[7a0ff3f](https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515)** to **[dc2ddb5](https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138)**",
    "created_at": "2022-07-18T17:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555257",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7a0ff3f](https://github.com/sagemath/sagetrac-mirror/commit/7a0ff3f91909d6ca2645497a6af856093650b515)** to **[dc2ddb5](https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138)**



---

archive/issue_comments_555258.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f\">adb89ff</a></td><td><code>src/sage/misc/lazy_import.pyx: Improve deprecation message when as_ is in use</code></td></tr></table>\n",
    "created_at": "2022-07-18T17:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555258",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f">adb89ff</a></td><td><code>src/sage/misc/lazy_import.pyx: Improve deprecation message when as_ is in use</code></td></tr></table>




---

archive/issue_comments_555259.json:
```json
{
    "body": "Changed commit from **[dc2ddb5](https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138)** to **[adb89ff](https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f)**",
    "created_at": "2022-07-18T17:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555259",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dc2ddb5](https://github.com/sagemath/sagetrac-mirror/commit/dc2ddb5a759628bab508ae6354e1d8eceaadd138)** to **[adb89ff](https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f)**



---

archive/issue_comments_555260.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI've implemented a more general solution:\n\n```\nsage: from sage import isfunction\nsage: isfunction\n/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/repl/display/fancy_repr.py:272: DeprecationWarning: \nImporting isfunction from here is deprecated; please use \"from sage.misc.sageinspect import is_function_or_cython_function as isfunction\" instead.\nSee https://trac.sagemath.org/32479 for details.\n  output = repr(obj)\n<function is_function_or_cython_function at 0x10f957ee0>\n```",
    "created_at": "2022-07-18T17:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555260",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'>Comment 18:</a>
I've implemented a more general solution:

```
sage: from sage import isfunction
sage: isfunction
/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/repl/display/fancy_repr.py:272: DeprecationWarning: 
Importing isfunction from here is deprecated; please use "from sage.misc.sageinspect import is_function_or_cython_function as isfunction" instead.
See https://trac.sagemath.org/32479 for details.
  output = repr(obj)
<function is_function_or_cython_function at 0x10f957ee0>
```



---

archive/issue_comments_555261.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThat is a right solution. Thanks.\n\nAs a side remark, it seems to me that the `lazy_import` with deprecation capability is misnamed since \"lazy import\" itself has nothing to do with deprecation. Perhaps `LazyImport` object can just have a hook to a function, which is called when import happens, and we may have `deprecated_import` that issues the deprecation warning when import happens. Thus we have `deprecated_import` separate from the plain `lazy_import`.",
    "created_at": "2022-07-18T22:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555261",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:19'>Comment 19:</a>
That is a right solution. Thanks.

As a side remark, it seems to me that the `lazy_import` with deprecation capability is misnamed since "lazy import" itself has nothing to do with deprecation. Perhaps `LazyImport` object can just have a hook to a function, which is called when import happens, and we may have `deprecated_import` that issues the deprecation warning when import happens. Thus we have `deprecated_import` separate from the plain `lazy_import`.



---

archive/issue_comments_555262.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI don't know, I think it's just an extra feature of `lazy_import` that is activated by a keyword. I don't see anything wrong with that",
    "created_at": "2022-07-18T22:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555262",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
I don't know, I think it's just an extra feature of `lazy_import` that is activated by a keyword. I don't see anything wrong with that



---

archive/issue_comments_555263.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@mkoeppe](#comment%3A20):\n> I don't know, I think it's just an extra feature of `lazy_import` that is activated by a keyword. I don't see anything wrong with that.\n\na `lazy_import` with `deprecation` keyword is to be removed after the deprecation period while a plain `lazy_import` is to remain. What seems wrong to me is that this distinction is implicitly made by the mere presence of a keyword argument.\n\nAnyway, this ticket looks good to me.",
    "created_at": "2022-07-19T00:33:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555263",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@mkoeppe](#comment%3A20):
> I don't know, I think it's just an extra feature of `lazy_import` that is activated by a keyword. I don't see anything wrong with that.

a `lazy_import` with `deprecation` keyword is to be removed after the deprecation period while a plain `lazy_import` is to remain. What seems wrong to me is that this distinction is implicitly made by the mere presence of a keyword argument.

Anyway, this ticket looks good to me.



---

archive/issue_comments_555264.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\ndoctest failures due to the changed deprecation message:\n\n```\nsage -t src/sage/functions/other.py  # 1 doctest failed\nsage -t src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py  # 1 doctest failed\nsage -t src/sage/modular/modform/find_generators.py  # 2 doctests failed\nsage -t src/sage/groups/matrix_gps/homset.py  # 1 doctest failed\nsage -t src/sage/schemes/hyperelliptic_curves/all.py  # 4 doctests failed\nsage -t src/sage/rings/all.py  # 3 doctests failed\n```",
    "created_at": "2022-07-19T03:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555264",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'>Comment 22:</a>
doctest failures due to the changed deprecation message:

```
sage -t src/sage/functions/other.py  # 1 doctest failed
sage -t src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py  # 1 doctest failed
sage -t src/sage/modular/modform/find_generators.py  # 2 doctests failed
sage -t src/sage/groups/matrix_gps/homset.py  # 1 doctest failed
sage -t src/sage/schemes/hyperelliptic_curves/all.py  # 4 doctests failed
sage -t src/sage/rings/all.py  # 3 doctests failed
```



---

archive/issue_comments_555265.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAh, I forgot about that",
    "created_at": "2022-07-19T03:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555265",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Ah, I forgot about that



---

archive/issue_comments_555266.json:
```json
{
    "body": "Changed commit from **[adb89ff](https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f)** to **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**",
    "created_at": "2022-07-19T04:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555266",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[adb89ff](https://github.com/sagemath/sagetrac-mirror/commit/adb89ffc5793d8491a3915ddb9a4b09b43c4958f)** to **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**



---

archive/issue_comments_555267.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223\">a77b971</a></td><td><code>Update doctest output for changed lazy_import deprecation warnings</code></td></tr></table>\n",
    "created_at": "2022-07-19T04:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555267",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223">a77b971</a></td><td><code>Update doctest output for changed lazy_import deprecation warnings</code></td></tr></table>




---

archive/issue_comments_555268.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-07-19T05:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555268",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_events_434778.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-07-19T05:45:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434778"
}
```



---

archive/issue_events_434779.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-07-19T05:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434779"
}
```



---

archive/issue_comments_555269.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nLGTM.",
    "created_at": "2022-07-19T05:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555269",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:25'>Comment 25:</a>
LGTM.



---

archive/issue_comments_555270.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThank you!",
    "created_at": "2022-07-19T05:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555270",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'>Comment 26:</a>
Thank you!



---

archive/issue_events_434780.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-01T20:23:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434780"
}
```



---

archive/issue_events_434781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "aae8d2dd337b873df0dc04b1b6e4e2326e8fc7d9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-01T20:23:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34187#event-434781"
}
```



---

archive/issue_comments_555271.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/remove_src_sage___init___py](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_src_sage___init___py)** to **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**",
    "created_at": "2022-08-01T20:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555271",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/remove_src_sage___init___py](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_src_sage___init___py)** to **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)**



---

archive/issue_comments_555272.json:
```json
{
    "body": "Changed commit from **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)** to none",
    "created_at": "2022-10-07T10:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555272",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[a77b971](https://github.com/sagemath/sagetrac-mirror/commit/a77b97142827021e5a21d0b1c2b87865c3e24223)** to none



---

archive/issue_comments_555273.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nWhen building surface-dynamics (a Cython project that builds against sagelib) we are getting\n\n```\n  surface_dynamics/flat_surfaces/origamis/origami_dense.pyx:39:8: 'sage/structure/element.pxd' not found\n```\n\nIt seems to me that Cython does not find the .pxd file anymore because the `__init__.py` in the base directory is missing now.",
    "created_at": "2022-10-07T10:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555273",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:28'>Comment 28:</a>
When building surface-dynamics (a Cython project that builds against sagelib) we are getting

```
  surface_dynamics/flat_surfaces/origamis/origami_dense.pyx:39:8: 'sage/structure/element.pxd' not found
```

It seems to me that Cython does not find the .pxd file anymore because the `__init__.py` in the base directory is missing now.



---

archive/issue_comments_555274.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThis seems to be https://github.com/cython/cython/issues/2918 essentially.",
    "created_at": "2022-10-07T10:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555274",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:29'>Comment 29:</a>
This seems to be https://github.com/cython/cython/issues/2918 essentially.



---

archive/issue_comments_555275.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nWe could patch the cython packaged in conda-forge with https://github.com/cython/cython/pull/4918 but maybe there is some way to fix this that works for unpatched Cythons?",
    "created_at": "2022-10-07T10:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555275",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:30'>Comment 30:</a>
We could patch the cython packaged in conda-forge with https://github.com/cython/cython/pull/4918 but maybe there is some way to fix this that works for unpatched Cythons?



---

archive/issue_comments_555276.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nhttps://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Packagessagesage.rings...arenownamespaces",
    "created_at": "2022-10-07T21:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34187#issuecomment-555276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'>Comment 31:</a>
https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Packagessagesage.rings...arenownamespaces
