# Issue 34791: move ProductTree and prod_with_derivative() to sage.rings.generic

archive/issues_034554.json:
```json
{
    "assignees": [],
    "body": "The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.\n\nWe should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it.\n\n\nCC:  @jhpalmieri\n\nBranch/Commit: **[public/move_product_tree_and_prod_with_derivatives](https://github.com/sagemath/sagetrac-mirror/tree/public/move_product_tree_and_prod_with_derivatives) @ [`c3dcb9b`](https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0)**\n\nReviewer: **Kwankyu Lee**\n\nAuthor: **Lorenz Panny**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34791_\n\n",
    "created_at": "2022-11-25T15:31:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/positive%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "move ProductTree and prod_with_derivative() to sage.rings.generic",
    "type": "issue",
    "updated_at": "2022-12-19T07:23:47Z",
    "url": "https://github.com/sagemath/sage/issues/34791",
    "user": "https://github.com/yyyyx4"
}
```
The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.

We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it.


CC:  @jhpalmieri

Branch/Commit: **[public/move_product_tree_and_prod_with_derivatives](https://github.com/sagemath/sagetrac-mirror/tree/public/move_product_tree_and_prod_with_derivatives) @ [`c3dcb9b`](https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0)**

Reviewer: **Kwankyu Lee**

Author: **Lorenz Panny**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/34791_





---

archive/issue_events_476015.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T15:31:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476015"
}
```



---

archive/issue_events_476016.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T15:31:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476016"
}
```



---

archive/issue_events_476017.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T15:31:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476017"
}
```



---

archive/issue_events_476018.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T15:31:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476018"
}
```



---

archive/issue_events_476019.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T18:21:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476019"
}
```



---

archive/issue_events_476020.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-11-25T18:21:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "title_is": "move ProductTree and prod_with_derivative() to sage.arith.misc",
    "title_was": "move ProductTree and prod_with_derivative to sage.arith.misc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476020"
}
```



---

archive/issue_comments_560981.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they were included in `hom_velusqrt.py` in the heat of the moment.\n+The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.\n \n-We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. While we're at it, slight tweaks to `ProductTree`, and I believe importing it by default is a good idea to increase visibility and ease of use.\n+We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.\n \n``````\n",
    "created_at": "2022-11-25T18:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560981",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they were included in `hom_velusqrt.py` in the heat of the moment.
+The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.
 
-We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. While we're at it, slight tweaks to `ProductTree`, and I believe importing it by default is a good idea to increase visibility and ease of use.
+We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.
 
``````




---

archive/issue_comments_560982.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think `ProductTree` could even go to its own file, since it may well be extended or ported to cython. Also, most of `misc.py` has a more number-theoretic flavor. (But that's just a suggestion and I'm fine with `misc.py` too.)",
    "created_at": "2022-12-07T17:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560982",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:2" align="right">comment:2</div>

I think `ProductTree` could even go to its own file, since it may well be extended or ported to cython. Also, most of `misc.py` has a more number-theoretic flavor. (But that's just a suggestion and I'm fine with `misc.py` too.)



---

archive/issue_comments_560983.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nCurrently `sage.misc.misc_c` contains the highly related `prod()` function. I think this could also be in a location such as `sage.rings.generic` (which doesn't currently exist), similar to how `sage.groups.generic` contains generic-group algorithms. Personally I don't have a preference.",
    "created_at": "2022-12-08T01:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560983",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:3" align="right">comment:3</div>

Currently `sage.misc.misc_c` contains the highly related `prod()` function. I think this could also be in a location such as `sage.rings.generic` (which doesn't currently exist), similar to how `sage.groups.generic` contains generic-group algorithms. Personally I don't have a preference.



---

archive/issue_comments_560984.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n> I believe importing it by default is a good idea to increase visibility and ease of use.\n\n-1. I don't think it has so general use. But I would hear John.",
    "created_at": "2022-12-10T08:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560984",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:4" align="right">comment:4</div>

> I believe importing it by default is a good idea to increase visibility and ease of use.

-1. I don't think it has so general use. But I would hear John.



---

archive/issue_comments_560985.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFirst, especially if there might be expansions to `ProductTree`, it might very well make sense to put it in its own file. Second, regarding increased visibility, I would say no right now. For example I look at the documentation and I can't tell what it does. (There is one line of description, \"A simple product tree,\" there is one line saying what the inputs are, and that's pretty much the extent of the documentation. I think it should have much more.) You should make sure it's in the reference manual, and if you think it's particularly useful, write a thematic tutorial about it and add that to the documentation \u2014\u00a0that's a good way to increase visibility.",
    "created_at": "2022-12-10T18:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560985",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

First, especially if there might be expansions to `ProductTree`, it might very well make sense to put it in its own file. Second, regarding increased visibility, I would say no right now. For example I look at the documentation and I can't tell what it does. (There is one line of description, "A simple product tree," there is one line saying what the inputs are, and that's pretty much the extent of the documentation. I think it should have much more.) You should make sure it's in the reference manual, and if you think it's particularly useful, write a thematic tutorial about it and add that to the documentation — that's a good way to increase visibility.



---

archive/issue_comments_560986.json:
```json
{
    "body": "Changed commit from **[`3ff3cdf`](https://github.com/sagemath/sagetrac-mirror/commit/3ff3cdf572d96d4541c0246216e034ccbc053de3)** to **[`8e6d94c`](https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0)**",
    "created_at": "2022-12-11T06:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560986",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ff3cdf`](https://github.com/sagemath/sagetrac-mirror/commit/3ff3cdf572d96d4541c0246216e034ccbc053de3)** to **[`8e6d94c`](https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0)**



---

archive/issue_comments_560987.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0\"><code>8e6d94c</code></a></td><td><code>Revert \"import ProductTree with sage.arith.all\"</code></td></tr></table>\n",
    "created_at": "2022-12-11T06:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560987",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0"><code>8e6d94c</code></a></td><td><code>Revert "import ProductTree with sage.arith.all"</code></td></tr></table>




---

archive/issue_comments_560988.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [John Palmieri](#comment:5):\n> For example I look at the documentation and I can't tell what it does. (There is one line of description, \"A simple product tree,\" there is one line saying what the inputs are, and that's pretty much the extent of the documentation. I think it should have much more.) \n\n+1. In the `ProductTree` class docstring, there is no description about a product tree. It may be described in terms of leaves, layers, and the root in a couple of sentences.\n\nInstead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.\n\nThe `ALGORITHM` section of `prod_with_derivative` just describes the source code. Thus it is too much detailed but useless for a user. I suggest to remove it.\n\nThe paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.",
    "created_at": "2022-12-17T05:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560988",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [John Palmieri](#comment:5):
> For example I look at the documentation and I can't tell what it does. (There is one line of description, "A simple product tree," there is one line saying what the inputs are, and that's pretty much the extent of the documentation. I think it should have much more.) 

+1. In the `ProductTree` class docstring, there is no description about a product tree. It may be described in terms of leaves, layers, and the root in a couple of sentences.

Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.

The `ALGORITHM` section of `prod_with_derivative` just describes the source code. Thus it is too much detailed but useless for a user. I suggest to remove it.

The paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.



---

archive/issue_comments_560989.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks for the feedback, everyone. I'll work on the documentation.\n\nReplying to [Kwankyu Lee](#comment:7):\n> Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.\n\nBut in Python \"a list\" is much more specific than \"a sequence\"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of \"sequence\": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\n\n> The paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.\n\nAre you suggesting to move it outside of the`EXAMPLES` block? Or just swap the two examples?",
    "created_at": "2022-12-18T04:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560989",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks for the feedback, everyone. I'll work on the documentation.

Replying to [Kwankyu Lee](#comment:7):
> Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.

But in Python "a list" is much more specific than "a sequence"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of "sequence": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range

> The paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.

Are you suggesting to move it outside of the`EXAMPLES` block? Or just swap the two examples?



---

archive/issue_events_476021.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-18T04:01:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476021"
}
```



---

archive/issue_events_476022.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-18T04:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476022"
}
```



---

archive/issue_comments_560990.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [Lorenz Panny](#comment:8):\n> Thanks for the feedback, everyone. I'll work on the documentation.\n> \n> Replying to [Kwankyu Lee](#comment:7):\n> > Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.\n\n> \n> But in Python \"a list\" is much more specific than \"a sequence\"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of \"sequence\": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\n\nStrictly speaking, you are right. But it is usual to say \"a tuple of\" or \"a list of\" when an input of any sequence type is allowed. I think it is rather unusual to say \"a sequence of\" for an input of a sequence type (it makes one to think twice).\n\nAgain this is not a rule, but a suggestion of a style for uniformity.\n\n> > The paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.\n\n> \n> Are you suggesting to move it outside of the`EXAMPLES` block? Or just swap the two examples?\n\nTo move it to the place of `ALGORITHM` (perhaps removing `alpha`). If you do not, please write a new paragraph to explain the purpose (or usage) of the function at the place of the removed `ALGORITHM`.",
    "created_at": "2022-12-18T05:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560990",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [Lorenz Panny](#comment:8):
> Thanks for the feedback, everyone. I'll work on the documentation.
> 
> Replying to [Kwankyu Lee](#comment:7):
> > Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.

> 
> But in Python "a list" is much more specific than "a sequence"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of "sequence": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range

Strictly speaking, you are right. But it is usual to say "a tuple of" or "a list of" when an input of any sequence type is allowed. I think it is rather unusual to say "a sequence of" for an input of a sequence type (it makes one to think twice).

Again this is not a rule, but a suggestion of a style for uniformity.

> > The paragraph `The main reason for this function ...` may be moved up and replace the aforementioned `ALGORITHM` section.

> 
> Are you suggesting to move it outside of the`EXAMPLES` block? Or just swap the two examples?

To move it to the place of `ALGORITHM` (perhaps removing `alpha`). If you do not, please write a new paragraph to explain the purpose (or usage) of the function at the place of the removed `ALGORITHM`.



---

archive/issue_comments_560991.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-12-18T05:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560991",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_comments_560992.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [Kwankyu Lee](#comment:9):\n> Replying to [Lorenz Panny](#comment:8):\n> > Thanks for the feedback, everyone. I'll work on the documentation.\n> > \n> > Replying to [Kwankyu Lee](#comment:7):\n> > > Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.\n\n> > \n> > But in Python \"a list\" is much more specific than \"a sequence\"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of \"sequence\": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\n\n> \n> Strictly speaking, you are right. But it is usual to say \"a tuple of\" or \"a list of\" when an input of any sequence type is allowed. I think it is rather unusual to say \"a sequence of\" for an input of a sequence type (it makes one to think twice).\n> \n> Again this is not a rule, but a suggestion of a style for uniformity.\n\nI've seen \"an iterable\" used in documentation. That would be another option.",
    "created_at": "2022-12-18T07:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560992",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [Kwankyu Lee](#comment:9):
> Replying to [Lorenz Panny](#comment:8):
> > Thanks for the feedback, everyone. I'll work on the documentation.
> > 
> > Replying to [Kwankyu Lee](#comment:7):
> > > Instead of `a sequence of` (which sounds mathematical), `a list of` would be pythonic, and avoid an unnecessary confusion.

> > 
> > But in Python "a list" is much more specific than "a sequence"! For example, a tuple is a sequence but not a list. Indeed, the Python documentation does have a concept of "sequence": https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range

> 
> Strictly speaking, you are right. But it is usual to say "a tuple of" or "a list of" when an input of any sequence type is allowed. I think it is rather unusual to say "a sequence of" for an input of a sequence type (it makes one to think twice).
> 
> Again this is not a rule, but a suggestion of a style for uniformity.

I've seen "an iterable" used in documentation. That would be another option.



---

archive/issue_comments_560993.json:
```json
{
    "body": "Changed commit from **[`8e6d94c`](https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0)** to **[`9ad5848`](https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f)**",
    "created_at": "2022-12-18T14:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560993",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8e6d94c`](https://github.com/sagemath/sagetrac-mirror/commit/8e6d94ca3aae8944524870e03c8ce26112a0cec0)** to **[`9ad5848`](https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f)**



---

archive/issue_comments_560994.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ff8acf01c44fa29a64ff1f7ccaa3752df33ad80\"><code>6ff8acf</code></a></td><td><code>Merge tag '9.8.beta5' into public/move_product_tree_and_prod_with_derivatives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fffd92c03dab44798b4071cdd1c311ec5fdc304\"><code>6fffd92</code></a></td><td><code>more detailed documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd1a78268b52657e66f99125a80f9b985e6be692\"><code>cd1a782</code></a></td><td><code>move ProductTree and prod_with_derivative() to sage.rings.generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77a75eae9ab68a7f53790475dd426bcc0169a50d\"><code>77a75ea</code></a></td><td><code>sequence -> iterable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f\"><code>9ad5848</code></a></td><td><code>illustrate correctness of DFT example</code></td></tr></table>\n",
    "created_at": "2022-12-18T14:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560994",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ff8acf01c44fa29a64ff1f7ccaa3752df33ad80"><code>6ff8acf</code></a></td><td><code>Merge tag '9.8.beta5' into public/move_product_tree_and_prod_with_derivatives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fffd92c03dab44798b4071cdd1c311ec5fdc304"><code>6fffd92</code></a></td><td><code>more detailed documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd1a78268b52657e66f99125a80f9b985e6be692"><code>cd1a782</code></a></td><td><code>move ProductTree and prod_with_derivative() to sage.rings.generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77a75eae9ab68a7f53790475dd426bcc0169a50d"><code>77a75ea</code></a></td><td><code>sequence -> iterable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f"><code>9ad5848</code></a></td><td><code>illustrate correctness of DFT example</code></td></tr></table>




---

archive/issue_events_476023.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-18T15:00:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476023"
}
```



---

archive/issue_events_476024.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-18T15:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476024"
}
```



---

archive/issue_comments_560995.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nTweaked documentation according to your suggestions, and moved the code in question to a new file `sage.rings.generic`. Some other functions from `sage.arith.misc` should probably also end up there, but perhaps not in this ticket.\n\n(I didn't remove the `ALGORITHM:` block entirely, only reduced detail, and I clarified the text in the main docstring that was already alluding to the example instead of moving the example. Hopefully that'll make everyone happy.)",
    "created_at": "2022-12-18T15:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560995",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:13" align="right">comment:13</div>

Tweaked documentation according to your suggestions, and moved the code in question to a new file `sage.rings.generic`. Some other functions from `sage.arith.misc` should probably also end up there, but perhaps not in this ticket.

(I didn't remove the `ALGORITHM:` block entirely, only reduced detail, and I clarified the text in the main docstring that was already alluding to the example instead of moving the example. Hopefully that'll make everyone happy.)



---

archive/issue_comments_560996.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [Lorenz Panny](#comment:13):\n> ...Hopefully that'll make everyone happy.\n\nThanks. LGTM, though I am not completely happy with the overuse of `iterable` where common and simple `list` is enough. It's hard to make everyone happy :)\n\nOne last thing. Please insert spaces around `//` in\n\n```diff\n+            X = [X[i//2] % V[i] for i in range(len(V))]\n```\n\nYou can set positive review for me. Thanks!",
    "created_at": "2022-12-19T04:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560996",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [Lorenz Panny](#comment:13):
> ...Hopefully that'll make everyone happy.

Thanks. LGTM, though I am not completely happy with the overuse of `iterable` where common and simple `list` is enough. It's hard to make everyone happy :)

One last thing. Please insert spaces around `//` in

```diff
+            X = [X[i//2] % V[i] for i in range(len(V))]
```

You can set positive review for me. Thanks!



---

archive/issue_comments_560997.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.\n \n-We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.\n+We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.\n \n``````\n",
    "created_at": "2022-12-19T04:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560997",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.
 
-We should move them to a more suitable place; it seems `sage.arith.misc` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.
+We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.
 
``````




---

archive/issue_comments_560998.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0\"><code>c3dcb9b</code></a></td><td><code>style tweak</code></td></tr></table>\n",
    "created_at": "2022-12-19T06:37:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560998",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0"><code>c3dcb9b</code></a></td><td><code>style tweak</code></td></tr></table>




---

archive/issue_comments_560999.json:
```json
{
    "body": "Changed commit from **[`9ad5848`](https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f)** to **[`c3dcb9b`](https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0)**",
    "created_at": "2022-12-19T06:37:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-560999",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ad5848`](https://github.com/sagemath/sagetrac-mirror/commit/9ad584887556a199b79abe79b182cd0d3d5c065f)** to **[`c3dcb9b`](https://github.com/sagemath/sagetrac-mirror/commit/c3dcb9b011463d2c0ece76ac9382fac1d9e9ced0)**



---

archive/issue_comments_561000.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you!\n\n(By the way, regarding the \"list\" vs. \"iterable\" question, writing `list` has the opposite effect on me. It's the one that makes *me* think twice: Will passing a tuple or a generator work as well, and can I rely on it to keep working in the future? That's why I prefer specifying the correct technical requirement, even if such details are currently indeed rather non-uniform in the Sage codebase.)",
    "created_at": "2022-12-19T06:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-561000",
    "user": "https://github.com/yyyyx4"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you!

(By the way, regarding the "list" vs. "iterable" question, writing `list` has the opposite effect on me. It's the one that makes *me* think twice: Will passing a tuple or a generator work as well, and can I rely on it to keep working in the future? That's why I prefer specifying the correct technical requirement, even if such details are currently indeed rather non-uniform in the Sage codebase.)



---

archive/issue_events_476025.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-19T06:46:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476025"
}
```



---

archive/issue_events_476026.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-12-19T06:46:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476026"
}
```



---

archive/issue_comments_561001.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.\n \n-We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.\n+We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it.\n \n``````\n",
    "created_at": "2022-12-19T06:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-561001",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The class `ProductTree` and the function `prod_with_derivative()` were introduced in #34303. Both are fully generic in principle, but they remained in `hom_velusqrt.py` in the heat of the moment.
 
-We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it, and I believe importing it by default is a good idea to increase visibility and ease of use.
+We should move them to a more suitable place; it seems `sage.rings.generic` is an appropriate choice. Slight tweaks to `ProductTree` while we're at it.
 
``````




---

archive/issue_comments_561002.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [Lorenz Panny](#comment:17):\n> ... writing `list` has the opposite effect on me. It's the one that makes *me* think twice: Will passing a tuple or a generator work as well, and can I rely on it to keep working in the future? That's why I prefer specifying the correct technical requirement, even if such details are currently indeed rather non-uniform in the Sage codebase.)\n\nThat is a good reason. Okay!",
    "created_at": "2022-12-19T06:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34791#issuecomment-561002",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [Lorenz Panny](#comment:17):
> ... writing `list` has the opposite effect on me. It's the one that makes *me* think twice: Will passing a tuple or a generator work as well, and can I rely on it to keep working in the future? That's why I prefer specifying the correct technical requirement, even if such details are currently indeed rather non-uniform in the Sage codebase.)

That is a good reason. Okay!



---

archive/issue_events_476027.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-12-19T07:23:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34791",
    "title_is": "move ProductTree and prod_with_derivative() to sage.rings.generic",
    "title_was": "move ProductTree and prod_with_derivative() to sage.arith.misc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34791#event-476027"
}
```
