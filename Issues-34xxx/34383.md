# Issue 34383: revert for LazyTaylorSeries and LazySymmetricFunction is missing

archive/issues_034146.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: L.<z> = LazyTaylorSeriesRing(ZZ)\nsage: (z-z^2).revert()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n...\nAttributeError: 'LazyTaylorSeriesRing_with_category.element_class' object has no attribute 'revert'\n```\n\nSame for `LazySymmetricFunctions`.  `compositional_inverse` might be a good alias.\n\nDepends on #32324\nDepends on #34453\nDepends on #34494\n\nCC:  @tscrim\n\nKeywords: **LazyPowerSeries**\n\nBranch/Commit: **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Martin Rubey**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34383_\n\n",
    "closed_at": "2022-09-28T23:04:18Z",
    "created_at": "2022-08-17T12:17:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "revert for LazyTaylorSeries and LazySymmetricFunction is missing",
    "type": "issue",
    "updated_at": "2022-09-28T23:04:18Z",
    "url": "https://github.com/sagemath/sage/issues/34383",
    "user": "https://github.com/mantepse"
}
```

```
sage: L.<z> = LazyTaylorSeriesRing(ZZ)
sage: (z-z^2).revert()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'LazyTaylorSeriesRing_with_category.element_class' object has no attribute 'revert'
```

Same for `LazySymmetricFunctions`.  `compositional_inverse` might be a good alias.

Depends on #32324
Depends on #34453
Depends on #34494

CC:  @tscrim

Keywords: **LazyPowerSeries**

Branch/Commit: **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**

Reviewer: **Travis Scrimshaw**

Author: **Martin Rubey**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/34383_





---

archive/issue_events_469814.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-17T12:17:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469814"
}
```



---

archive/issue_events_469815.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-17T12:17:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469815"
}
```



---

archive/issue_events_469816.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-17T12:17:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469816"
}
```



---

archive/issue_events_469817.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-17T12:17:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469817"
}
```



---

archive/issue_events_469818.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-17T12:46:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "title_is": "revert for LazyTaylorSeries and LazySymmetricFunction is missing",
    "title_was": "revert for LazyTaylorSeries is missing",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469818"
}
```



---

archive/issue_comments_555391.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nUnfortunately, there seems to be an inaccuracy in `Stream_plethysm`:\n\n```\nsage: h = SymmetricFunctions(QQ).h()\nsage: p = SymmetricFunctions(QQ).p()\nsage: L = LazySymmetricFunctions(p)\nsage: X = L(p[1])\nsage: e = L(lambda n: h[n]) - 1 - X\nsage: g = L(None, valuation=1)\nsage: g.define(X - e(g))\nsage: g[0]\n0\nsage: g[1]\np[1]\nsage: g[2]\n...booooom... (max recursion error)\n```",
    "created_at": "2022-08-17T12:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555391",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:1" align="right">comment:1</div>

Unfortunately, there seems to be an inaccuracy in `Stream_plethysm`:

```
sage: h = SymmetricFunctions(QQ).h()
sage: p = SymmetricFunctions(QQ).p()
sage: L = LazySymmetricFunctions(p)
sage: X = L(p[1])
sage: e = L(lambda n: h[n]) - 1 - X
sage: g = L(None, valuation=1)
sage: g.define(X - e(g))
sage: g[0]
0
sage: g[1]
p[1]
sage: g[2]
...booooom... (max recursion error)
```



---

archive/issue_comments_555392.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIn the example, `h` has valuation 2, so to compute the degree 2 piece of `h(g)` we only should be accessing the degree 1 piece of `g`.  But in `Stream_plethysm.get_coefficient`, we compute `self._compute_product(2, [1, 1], 1/2)`, which in turn accesses `self._right[2]`.",
    "created_at": "2022-08-17T13:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555392",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:2" align="right">comment:2</div>

In the example, `h` has valuation 2, so to compute the degree 2 piece of `h(g)` we only should be accessing the degree 1 piece of `g`.  But in `Stream_plethysm.get_coefficient`, we compute `self._compute_product(2, [1, 1], 1/2)`, which in turn accesses `self._right[2]`.



---

archive/issue_comments_555393.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAn easy fix is as follows:\n\n```diff\ndiff --git a/src/sage/data_structures/stream.py b/src/sage/data_structures/stream.py\nindex e54a90b8b88..b61d29544c2 100644\n--- a/src/sage/data_structures/stream.py\n+++ b/src/sage/data_structures/stream.py\n@@ -1763,6 +1763,14 @@ class Stream_plethysm(Stream_binary):\n         p = self._p\n         ret = p.zero()\n         for mu in wt_int_vec_iter(n, la):\n+            if any(j < self._gv for j in mu):\n+                continue\n             temp = c\n             for i, j in zip(la, mu):\n                 gs = self._right[j]\n                 if not gs:\n                     temp = p.zero()\n                     break\n                 temp *= p[i](gs)\n             ret += temp\n         return ret\n```\nHowever, it would probably be better not to generate these integer vectors in the first place.  Moreover, it is possibly a waste to compute `p[i](gs)` for each `i` in `la` separately, if `la` has many parts repeated.",
    "created_at": "2022-08-17T14:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555393",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:3" align="right">comment:3</div>

An easy fix is as follows:

```diff
diff --git a/src/sage/data_structures/stream.py b/src/sage/data_structures/stream.py
index e54a90b8b88..b61d29544c2 100644
--- a/src/sage/data_structures/stream.py
+++ b/src/sage/data_structures/stream.py
@@ -1763,6 +1763,14 @@ class Stream_plethysm(Stream_binary):
         p = self._p
         ret = p.zero()
         for mu in wt_int_vec_iter(n, la):
+            if any(j < self._gv for j in mu):
+                continue
             temp = c
             for i, j in zip(la, mu):
                 gs = self._right[j]
                 if not gs:
                     temp = p.zero()
                     break
                 temp *= p[i](gs)
             ret += temp
         return ret
```
However, it would probably be better not to generate these integer vectors in the first place.  Moreover, it is possibly a waste to compute `p[i](gs)` for each `i` in `la` separately, if `la` has many parts repeated.



---

archive/issue_comments_555394.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI have to leave now, but I just saw that possibly the implementation of plethysm in the species directory is more efficient.",
    "created_at": "2022-08-17T15:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555394",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:4" align="right">comment:4</div>

I have to leave now, but I just saw that possibly the implementation of plethysm in the species directory is more efficient.



---

archive/issue_comments_555395.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI slightly improved the implementation.  In particular, we can now specify degree one elements in the same way as for plethysm, and it is (slightly :-) faster now:\n\n```\nsage: from sage.data_structures.stream import Stream_function, Stream_plethysm, Stream_plethysm_old\nsage: s = SymmetricFunctions(QQ).s()\nsage: p = SymmetricFunctions(QQ).p()\nsage: f = Stream_function(lambda n: s[n], s, True, 1)\nsage: g = Stream_function(lambda n: s[[1]*n], s, True, 1)\nsage: h = Stream_plethysm(f, g, p)\nsage: %time _ = h[10]\nCPU times: user 122 ms, sys: 6 \u00b5s, total: 122 ms\nWall time: 122 ms\nsage: h2 = Stream_plethysm_old(f, g, p)\nsage: %time _ = h2[10]\nCPU times: user 2.13 s, sys: 0 ns, total: 2.13 s\nWall time: 2.13 s\n```",
    "created_at": "2022-08-22T14:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555395",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">comment:5</div>

I slightly improved the implementation.  In particular, we can now specify degree one elements in the same way as for plethysm, and it is (slightly :-) faster now:

```
sage: from sage.data_structures.stream import Stream_function, Stream_plethysm, Stream_plethysm_old
sage: s = SymmetricFunctions(QQ).s()
sage: p = SymmetricFunctions(QQ).p()
sage: f = Stream_function(lambda n: s[n], s, True, 1)
sage: g = Stream_function(lambda n: s[[1]*n], s, True, 1)
sage: h = Stream_plethysm(f, g, p)
sage: %time _ = h[10]
CPU times: user 122 ms, sys: 6 µs, total: 122 ms
Wall time: 122 ms
sage: h2 = Stream_plethysm_old(f, g, p)
sage: %time _ = h2[10]
CPU times: user 2.13 s, sys: 0 ns, total: 2.13 s
Wall time: 2.13 s
```



---

archive/issue_comments_555396.json:
```json
{
    "body": "Branch: **[u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing)**",
    "created_at": "2022-08-22T17:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555396",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing)**



---

archive/issue_comments_555397.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d6579ba5e4545140d9d74b3cb9f70f232109872\">9d6579b</a></td><td><code>improve documentation, move zero, one, characteristic, etc. to ABC</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feba6b8997b7d11a11f252b1ee957e68cfdf1bc5\">feba6b8</a></td><td><code>Working more on `__call__` for LazySymFunc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f3e0f2048c702daa48cde9edea574458abcf8f0\">3f3e0f2</a></td><td><code>Merge branch 'public/rings/lazy_talyor_series-32324' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_talyor_series-32324</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67272285ace598162cbd1de50fa4f1c9fe74b0dd\">6727228</a></td><td><code>Merge branch 'public/rings/lazy_talyor_series-32324' of trac.sagemath.org:sage into t/32324/public/rings/lazy_talyor_series-32324</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/028796d47eedb24a730258ae18e89b95bda24639\">028796d</a></td><td><code>Fixing numerous issues with `__call__` and expanding its functionality. Moving plethysm to a Stream_plethysm.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fb155f4502d54f0ea8dc2b15745804b000d694a\">9fb155f</a></td><td><code>Removing unused code from previous version.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f9dbb186459922ba90b5a9326ebf6b5dcaa1ba8\">7f9dbb1</a></td><td><code>Some last doc fixes and tweaks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e03fee27f1ebff2741eb57fb0de4d7d80043636\">4e03fee</a></td><td><code>remove unused local variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e78047258774176c6e8271e29c9b5825cc12aa11\">e780472</a></td><td><code>Addressing the linter complaint.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb\">d5b86a8</a></td><td><code>implement revert, improve plethysm</code></td></tr></table>\n",
    "created_at": "2022-08-22T17:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555397",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:7" align="right">comment:7</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d6579ba5e4545140d9d74b3cb9f70f232109872">9d6579b</a></td><td><code>improve documentation, move zero, one, characteristic, etc. to ABC</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feba6b8997b7d11a11f252b1ee957e68cfdf1bc5">feba6b8</a></td><td><code>Working more on `__call__` for LazySymFunc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f3e0f2048c702daa48cde9edea574458abcf8f0">3f3e0f2</a></td><td><code>Merge branch 'public/rings/lazy_talyor_series-32324' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_talyor_series-32324</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67272285ace598162cbd1de50fa4f1c9fe74b0dd">6727228</a></td><td><code>Merge branch 'public/rings/lazy_talyor_series-32324' of trac.sagemath.org:sage into t/32324/public/rings/lazy_talyor_series-32324</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/028796d47eedb24a730258ae18e89b95bda24639">028796d</a></td><td><code>Fixing numerous issues with `__call__` and expanding its functionality. Moving plethysm to a Stream_plethysm.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fb155f4502d54f0ea8dc2b15745804b000d694a">9fb155f</a></td><td><code>Removing unused code from previous version.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f9dbb186459922ba90b5a9326ebf6b5dcaa1ba8">7f9dbb1</a></td><td><code>Some last doc fixes and tweaks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e03fee27f1ebff2741eb57fb0de4d7d80043636">4e03fee</a></td><td><code>remove unused local variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e78047258774176c6e8271e29c9b5825cc12aa11">e780472</a></td><td><code>Addressing the linter complaint.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb">d5b86a8</a></td><td><code>implement revert, improve plethysm</code></td></tr></table>




---

archive/issue_comments_555398.json:
```json
{
    "body": "Changed keywords from none to **LazyPowerSeries**",
    "created_at": "2022-08-22T17:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555398",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **LazyPowerSeries**



---

archive/issue_comments_555399.json:
```json
{
    "body": "Commit: **[`d5b86a8`](https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb)**",
    "created_at": "2022-08-22T17:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555399",
    "user": "https://github.com/mantepse"
}
```

Commit: **[`d5b86a8`](https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb)**



---

archive/issue_comments_555400.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2022-08-22T17:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555400",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_comments_555401.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNext I'd like to implement revert for TaylorSeries, derivative, derivative_with_respect_to_p1.\n\nStill missing: functorial_composition, arithmetic_product, logarithm for SymmetricFunctions.\n\nAll of these are needed for #32367.",
    "created_at": "2022-08-22T17:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555401",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">comment:8</div>

Next I'd like to implement revert for TaylorSeries, derivative, derivative_with_respect_to_p1.

Still missing: functorial_composition, arithmetic_product, logarithm for SymmetricFunctions.

All of these are needed for #32367.



---

archive/issue_comments_555402.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nShould we `def plethysm` and make `__call__` an alias instead?  This is the way it is done in `combinat/sf/sfa.py`.",
    "created_at": "2022-08-22T20:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555402",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:9" align="right">comment:9</div>

Should we `def plethysm` and make `__call__` an alias instead?  This is the way it is done in `combinat/sf/sfa.py`.



---

archive/issue_comments_555403.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI agree that we should throw out integer vectors that are asking for things less than the valuation. Actually, this is simple to modify with the current code. Just subtract `valuation * len(la)` from `n`. Then you just add back in the valuation to each component of the integer vector.\n\nIt sure looks like you have just essentially duplicated the plethysm code, which I don't think we should do, especially for marginal speed gains. I think you are better off improving the symmetric functions code directly.\n\nAnother micro-optimization that can be done is to store `len(l)` in the `integer_vector_weighted.iterator_fast` code since this never changes (it can be surprising how much this extra little function call can affect speed).",
    "created_at": "2022-08-23T00:13:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555403",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

I agree that we should throw out integer vectors that are asking for things less than the valuation. Actually, this is simple to modify with the current code. Just subtract `valuation * len(la)` from `n`. Then you just add back in the valuation to each component of the integer vector.

It sure looks like you have just essentially duplicated the plethysm code, which I don't think we should do, especially for marginal speed gains. I think you are better off improving the symmetric functions code directly.

Another micro-optimization that can be done is to store `len(l)` in the `integer_vector_weighted.iterator_fast` code since this never changes (it can be surprising how much this extra little function call can affect speed).



---

archive/issue_comments_555404.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mantepse](#comment:9):\n> Should we `def plethysm` and make `__call__` an alias instead?  This is the way it is done in `combinat/sf/sfa.py`.\n\nIt doesn't make any difference to me.",
    "created_at": "2022-08-23T00:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555404",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mantepse](#comment:9):
> Should we `def plethysm` and make `__call__` an alias instead?  This is the way it is done in `combinat/sf/sfa.py`.

It doesn't make any difference to me.



---

archive/issue_comments_555405.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI don't understand. My code is quite different, and I gain a factor 20 on the original example.",
    "created_at": "2022-08-23T04:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555405",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:12" align="right">comment:12</div>

I don't understand. My code is quite different, and I gain a factor 20 on the original example.



---

archive/issue_comments_555406.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSorry, I just read what you wrote and took it at face value rather than actually reading the example. Indeed, that is quite an impressive speedup. I think my comment still holds about integrating it directly into the symmetric functions code. Superficially it still looks generally like the symmetric functions code. What have you changed to get that improvement?",
    "created_at": "2022-08-23T05:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555406",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Sorry, I just read what you wrote and took it at face value rather than actually reading the example. Indeed, that is quite an impressive speedup. I think my comment still holds about integrating it directly into the symmetric functions code. Superficially it still looks generally like the symmetric functions code. What have you changed to get that improvement?



---

archive/issue_comments_555407.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOh, i am sorry, that teaches me a lesson! Could we perhaps do a zoom meeting today? Maybe at 5pm Japan time?",
    "created_at": "2022-08-23T06:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555407",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:14" align="right">comment:14</div>

Oh, i am sorry, that teaches me a lesson! Could we perhaps do a zoom meeting today? Maybe at 5pm Japan time?



---

archive/issue_comments_555408.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSounds good. I responded via email as well.",
    "created_at": "2022-08-23T06:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555408",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Sounds good. I responded via email as well.



---

archive/issue_comments_555409.json:
```json
{
    "body": "Changed commit from **[`d5b86a8`](https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb)** to **[`6eebb35`](https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6)**",
    "created_at": "2022-08-23T08:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555409",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5b86a8`](https://github.com/sagemath/sagetrac-mirror/commit/d5b86a820b8ff27c2832ad27eb4f1f8ecb6f54cb)** to **[`6eebb35`](https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6)**



---

archive/issue_comments_555410.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6\">6eebb35</a></td><td><code>do not assume that the approximate valuation will not change over time</code></td></tr></table>\n",
    "created_at": "2022-08-23T08:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555410",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6">6eebb35</a></td><td><code>do not assume that the approximate valuation will not change over time</code></td></tr></table>




---

archive/issue_comments_555411.json:
```json
{
    "body": "Dependencies: **#32324**",
    "created_at": "2022-08-24T21:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555411",
    "user": "https://github.com/mantepse"
}
```

Dependencies: **#32324**



---

archive/issue_events_469819.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-24T21:25:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469819"
}
```



---

archive/issue_comments_555412.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNB: the new implementation of plethysm appears to be faster than the one in sage.combinat.sf.sfa!",
    "created_at": "2022-08-24T21:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555412",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:18" align="right">comment:18</div>

NB: the new implementation of plethysm appears to be faster than the one in sage.combinat.sf.sfa!



---

archive/issue_comments_555413.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSome things that should be fixed:\n\n- `_scale_part` and `_scale_c` need doctests. I might just inline the code however as they are such small and simple functions (they are needs for the symmetric functions implementation, but I think that could be improved).\n- I would explain the algorithm for `revert` in terms of (lazy) symmetric functions rather than species.\n- Instead of `sum_of_terms()`, I would just directly create a dictionary and go through `p._from_dict()` to avoid the redirection.\n- Even though its cached, I would make this change:\n\n  ```diff\n  -        if power[d]:\n  -            terms = [(self._scale_part(m, i), self._raise_c(c, i)) for m, c in power[d]]\n  +        val = power[d]:\n  +        if val:\n  +            terms = {self._scale_part(m, i): coeff for m, c in val if (coeff := self._raise_c(c, i)))}\n           else:\n  -            terms = []\n  +            return self._p.zero()\n   \n  -        return self._p.sum_of_terms(terms, distinct = True)\n  +        return self._p._from_dict(terms, remove_zeros=False)\n  ```\n  (I only very recently learned of the `:=` syntax. it is so great to have a way to assign equality in a statement in Python. It makes writing code like the above so much easier.)\n\nHowever, there is also a decent part of me that would like to see the code duplication with `sfa.plethysm()` reduced, in particular with the logic around the include/exclude. Although the same could be said for `_scale_part` and `_scale_c`, which are (essentially) the same as in the symmetric functions.\n\nLastly, shouldn't the compositional inverse also be implemented for lazy Laurent and Taylor series?",
    "created_at": "2022-08-25T00:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555413",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Some things that should be fixed:

- `_scale_part` and `_scale_c` need doctests. I might just inline the code however as they are such small and simple functions (they are needs for the symmetric functions implementation, but I think that could be improved).
- I would explain the algorithm for `revert` in terms of (lazy) symmetric functions rather than species.
- Instead of `sum_of_terms()`, I would just directly create a dictionary and go through `p._from_dict()` to avoid the redirection.
- Even though its cached, I would make this change:

  ```diff
  -        if power[d]:
  -            terms = [(self._scale_part(m, i), self._raise_c(c, i)) for m, c in power[d]]
  +        val = power[d]:
  +        if val:
  +            terms = {self._scale_part(m, i): coeff for m, c in val if (coeff := self._raise_c(c, i)))}
           else:
  -            terms = []
  +            return self._p.zero()
   
  -        return self._p.sum_of_terms(terms, distinct = True)
  +        return self._p._from_dict(terms, remove_zeros=False)
  ```
  (I only very recently learned of the `:=` syntax. it is so great to have a way to assign equality in a statement in Python. It makes writing code like the above so much easier.)

However, there is also a decent part of me that would like to see the code duplication with `sfa.plethysm()` reduced, in particular with the logic around the include/exclude. Although the same could be said for `_scale_part` and `_scale_c`, which are (essentially) the same as in the symmetric functions.

Lastly, shouldn't the compositional inverse also be implemented for lazy Laurent and Taylor series?



---

archive/issue_comments_555414.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc33cd4fa19f650b1e6c44b753f2db9b23ef86b0\">fc33cd4</a></td><td><code>add test for degree one elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16\">3958757</a></td><td><code>microoptimizations in stretched_power_restrict_degree</code></td></tr></table>\n",
    "created_at": "2022-08-25T10:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc33cd4fa19f650b1e6c44b753f2db9b23ef86b0">fc33cd4</a></td><td><code>add test for degree one elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16">3958757</a></td><td><code>microoptimizations in stretched_power_restrict_degree</code></td></tr></table>




---

archive/issue_comments_555415.json:
```json
{
    "body": "Changed commit from **[`6eebb35`](https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6)** to **[`3958757`](https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16)**",
    "created_at": "2022-08-25T10:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555415",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6eebb35`](https://github.com/sagemath/sagetrac-mirror/commit/6eebb35c5f30a0a68d0d5f0152929c60b2cdebc6)** to **[`3958757`](https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16)**



---

archive/issue_comments_555416.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256\">eabb0cb</a></td><td><code>add some (currently failing) doctests</code></td></tr></table>\n",
    "created_at": "2022-08-25T14:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555416",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256">eabb0cb</a></td><td><code>add some (currently failing) doctests</code></td></tr></table>




---

archive/issue_comments_555417.json:
```json
{
    "body": "Changed commit from **[`3958757`](https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16)** to **[`eabb0cb`](https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256)**",
    "created_at": "2022-08-25T14:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555417",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3958757`](https://github.com/sagemath/sagetrac-mirror/commit/39587572789aecc68ba649585d7ad41c7c027c16)** to **[`eabb0cb`](https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256)**



---

archive/issue_comments_555418.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6\">84547ca</a></td><td><code>more doctests</code></td></tr></table>\n",
    "created_at": "2022-08-25T19:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555418",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6">84547ca</a></td><td><code>more doctests</code></td></tr></table>




---

archive/issue_comments_555419.json:
```json
{
    "body": "Changed commit from **[`eabb0cb`](https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256)** to **[`84547ca`](https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6)**",
    "created_at": "2022-08-25T19:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555419",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eabb0cb`](https://github.com/sagemath/sagetrac-mirror/commit/eabb0cb6f6f93e39c657e38131b299af53b48256)** to **[`84547ca`](https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6)**



---

archive/issue_comments_555420.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00\">634edfa</a></td><td><code>fix bug in LazyCauchyProductSeries._mul_, be more exact in LazyLaurentSeries.revert</code></td></tr></table>\n",
    "created_at": "2022-08-25T21:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555420",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00">634edfa</a></td><td><code>fix bug in LazyCauchyProductSeries._mul_, be more exact in LazyLaurentSeries.revert</code></td></tr></table>




---

archive/issue_comments_555421.json:
```json
{
    "body": "Changed commit from **[`84547ca`](https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6)** to **[`634edfa`](https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00)**",
    "created_at": "2022-08-25T21:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555421",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84547ca`](https://github.com/sagemath/sagetrac-mirror/commit/84547caf6707feaca274b85c0db166bbc557f8a6)** to **[`634edfa`](https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00)**



---

archive/issue_events_469820.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-25T21:11:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469820"
}
```



---

archive/issue_events_469821.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-25T21:11:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469821"
}
```



---

archive/issue_comments_555422.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nrevert for Taylor is still missing (possibly I can simply redirect to Laurent), and revert for SymmetricFunctions still needs some care.",
    "created_at": "2022-08-25T21:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555422",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:24" align="right">comment:24</div>

revert for Taylor is still missing (possibly I can simply redirect to Laurent), and revert for SymmetricFunctions still needs some care.



---

archive/issue_comments_555423.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d\">74841c0</a></td><td><code>improve revert of LazySymmetricFunction</code></td></tr></table>\n",
    "created_at": "2022-08-25T21:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555423",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d">74841c0</a></td><td><code>improve revert of LazySymmetricFunction</code></td></tr></table>




---

archive/issue_comments_555424.json:
```json
{
    "body": "Changed commit from **[`634edfa`](https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00)** to **[`74841c0`](https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d)**",
    "created_at": "2022-08-25T21:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555424",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`634edfa`](https://github.com/sagemath/sagetrac-mirror/commit/634edfaef274d214a69e9ffdf34d3b9b8bedab00)** to **[`74841c0`](https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d)**



---

archive/issue_comments_555425.json:
```json
{
    "body": "Changed commit from **[`74841c0`](https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d)** to **[`a8e663a`](https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff)**",
    "created_at": "2022-08-26T07:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555425",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74841c0`](https://github.com/sagemath/sagetrac-mirror/commit/74841c0b88efdea40a48b96aa310d17284d0417d)** to **[`a8e663a`](https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff)**



---

archive/issue_comments_555426.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff\">a8e663a</a></td><td><code>final fixes for LazySymmetricFunction.revert</code></td></tr></table>\n",
    "created_at": "2022-08-26T07:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff">a8e663a</a></td><td><code>final fixes for LazySymmetricFunction.revert</code></td></tr></table>




---

archive/issue_comments_555427.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5\">5436995</a></td><td><code>final fixes for LazySymmetricFunction.revert, part 2</code></td></tr></table>\n",
    "created_at": "2022-08-26T07:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555427",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5">5436995</a></td><td><code>final fixes for LazySymmetricFunction.revert, part 2</code></td></tr></table>




---

archive/issue_comments_555428.json:
```json
{
    "body": "Changed commit from **[`a8e663a`](https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff)** to **[`5436995`](https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5)**",
    "created_at": "2022-08-26T07:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555428",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a8e663a`](https://github.com/sagemath/sagetrac-mirror/commit/a8e663aede8d6c9d609cd57226f370e87edfa8ff)** to **[`5436995`](https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5)**



---

archive/issue_comments_555429.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nConcerning code duplication:\n\n* scale_part might be a useful action on partitions.  Can this be made fast?\n\n* the handling of degree one elements could go into a separate top-level function, but I have no idea where to place it.  Possibly sfa.py?  Alternatively it could be a method on rings.  It might look as follows:\n\n```\ndef _degree_one_elements(R, include=None, exclude=None):\n    \"\"\"\nReturn variables in the ring `R`.\n\n    INPUT:\n\n    - ``R`` -- a :class:`Ring`\n    - ``include``, ``exclude`` (optional, default ``None``) --\n      iterables of variables in ``R``\n\n    OUTPUT:\n    \n    - If ``include`` is specified, only these variables are returned\n      as elements of ``R``.  Otherwise, all variables in ``R``\n      (recursively) with the exception of those in ``exclude`` are\n      returned.\n\n    \"\"\"\n    if include is not None and exclude is not None:\n        raise RuntimeError(\"include and exclude cannot both be specified\")\n\n    if include is not None:\n        degree_one = [R(g) for g in include]\n    else:\n        try:\n            degree_one = [R(g) for g in R.variable_names_recursive()]\n        except AttributeError:\n            try:\n                degree_one = R.gens()\n            except NotImplementedError:\n                degree_one = []\n        if exclude is not None:\n            degree_one = [g for g in degree_one if g not in exclude]\n\n    return [g for g in degree_one if g != R.one()]\n```\n\nBesides, is the following a bug?\n\n```\nsage: ZZ.variable_names()\n('x',)\nsage: ZZ\nInteger Ring\n```",
    "created_at": "2022-08-26T07:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555429",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:28" align="right">comment:28</div>

Concerning code duplication:

* scale_part might be a useful action on partitions.  Can this be made fast?

* the handling of degree one elements could go into a separate top-level function, but I have no idea where to place it.  Possibly sfa.py?  Alternatively it could be a method on rings.  It might look as follows:

```
def _degree_one_elements(R, include=None, exclude=None):
    """
Return variables in the ring `R`.

    INPUT:

    - ``R`` -- a :class:`Ring`
    - ``include``, ``exclude`` (optional, default ``None``) --
      iterables of variables in ``R``

    OUTPUT:
    
    - If ``include`` is specified, only these variables are returned
      as elements of ``R``.  Otherwise, all variables in ``R``
      (recursively) with the exception of those in ``exclude`` are
      returned.

    """
    if include is not None and exclude is not None:
        raise RuntimeError("include and exclude cannot both be specified")

    if include is not None:
        degree_one = [R(g) for g in include]
    else:
        try:
            degree_one = [R(g) for g in R.variable_names_recursive()]
        except AttributeError:
            try:
                degree_one = R.gens()
            except NotImplementedError:
                degree_one = []
        if exclude is not None:
            degree_one = [g for g in degree_one if g not in exclude]

    return [g for g in degree_one if g != R.one()]
```

Besides, is the following a bug?

```
sage: ZZ.variable_names()
('x',)
sage: ZZ
Integer Ring
```



---

archive/issue_comments_555430.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI hope to implement implement multivariate plethysm and reversion for Taylor today, and fix the remaining (few) issues in #32367.  Wish me good luck.",
    "created_at": "2022-08-26T07:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555430",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:29" align="right">comment:29</div>

I hope to implement implement multivariate plethysm and reversion for Taylor today, and fix the remaining (few) issues in #32367.  Wish me good luck.



---

archive/issue_comments_555431.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@mantepse](#comment:28):\n> * scale_part might be a useful action on partitions.  Can this be made fast?\n\nNo faster than the current implementation I think. However, +1 for making it a method of partitions. (Note that it should return an element of `_Partitions`, not the parent of itself.)\n\n> * the handling of degree one elements could go into a separate top-level function, but I have no idea where to place it.  Possibly sfa.py?  Alternatively it could be a method on rings.  It might look as follows:\n> \n> ```\n> def _degree_one_elements(R, include=None, exclude=None):\n>     \"\"\"\n>     Return variables in the ring `R`.\n> \n>     INPUT:\n> \n>     - ``R`` -- a :class:`Ring`\n>     - ``include``, ``exclude`` (optional, default ``None``) --\n>       iterables of variables in ``R``\n> \n>     OUTPUT:\n>     \n>     - If ``include`` is specified, only these variables are returned\n>       as elements of ``R``.  Otherwise, all variables in ``R``\n>       (recursively) with the exception of those in ``exclude`` are\n>       returned.\n> \n>     \"\"\"\n>     if include is not None and exclude is not None:\n>         raise RuntimeError(\"include and exclude cannot both be specified\")\n> \n>     if include is not None:\n>         degree_one = [R(g) for g in include]\n>     else:\n>         try:\n>             degree_one = [R(g) for g in R.variable_names_recursive()]\n>         except AttributeError:\n>             try:\n>                 degree_one = R.gens()\n>             except NotImplementedError:\n>                 degree_one = []\n>         if exclude is not None:\n>             degree_one = [g for g in degree_one if g not in exclude]\n> \n>     return [g for g in degree_one if g != R.one()]\n> ```\n\n+1 as a top-level function in `sfa.py`. I would call it `_parse_degree_one_elements` and maybe tweak the one-line doc to be a little more precise about what it does. However, those are fairly trivial comments.\n\n> Besides, is the following a bug?\n> \n> ```\n> sage: ZZ.variable_names()\n> ('x',)\n> sage: ZZ\n> Integer Ring\n> ```\n\nI think it is the result of very legacy code with it being a subclass of `sage.structure.parent_gens.ParentWithGens` and likely a requirement of the names being non-empty. See also\n\n```\nsage: QQ.variable_names()\n('x',)\n```\nI would like to call it a bug, but that is perhaps slightly unfair.\n\nGood luck!",
    "created_at": "2022-08-26T07:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555431",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@mantepse](#comment:28):
> * scale_part might be a useful action on partitions.  Can this be made fast?

No faster than the current implementation I think. However, +1 for making it a method of partitions. (Note that it should return an element of `_Partitions`, not the parent of itself.)

> * the handling of degree one elements could go into a separate top-level function, but I have no idea where to place it.  Possibly sfa.py?  Alternatively it could be a method on rings.  It might look as follows:
> 
> ```
> def _degree_one_elements(R, include=None, exclude=None):
>     """
>     Return variables in the ring `R`.
> 
>     INPUT:
> 
>     - ``R`` -- a :class:`Ring`
>     - ``include``, ``exclude`` (optional, default ``None``) --
>       iterables of variables in ``R``
> 
>     OUTPUT:
>     
>     - If ``include`` is specified, only these variables are returned
>       as elements of ``R``.  Otherwise, all variables in ``R``
>       (recursively) with the exception of those in ``exclude`` are
>       returned.
> 
>     """
>     if include is not None and exclude is not None:
>         raise RuntimeError("include and exclude cannot both be specified")
> 
>     if include is not None:
>         degree_one = [R(g) for g in include]
>     else:
>         try:
>             degree_one = [R(g) for g in R.variable_names_recursive()]
>         except AttributeError:
>             try:
>                 degree_one = R.gens()
>             except NotImplementedError:
>                 degree_one = []
>         if exclude is not None:
>             degree_one = [g for g in degree_one if g not in exclude]
> 
>     return [g for g in degree_one if g != R.one()]
> ```

+1 as a top-level function in `sfa.py`. I would call it `_parse_degree_one_elements` and maybe tweak the one-line doc to be a little more precise about what it does. However, those are fairly trivial comments.

> Besides, is the following a bug?
> 
> ```
> sage: ZZ.variable_names()
> ('x',)
> sage: ZZ
> Integer Ring
> ```

I think it is the result of very legacy code with it being a subclass of `sage.structure.parent_gens.ParentWithGens` and likely a requirement of the names being non-empty. See also

```
sage: QQ.variable_names()
('x',)
```
I would like to call it a bug, but that is perhaps slightly unfair.

Good luck!



---

archive/issue_comments_555432.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tscrim](#comment:30):\n> Replying to [@mantepse](#comment:28):\n> > * scale_part might be a useful action on partitions.  Can this be made fast?\n\n> \n> No faster than the current implementation I think. However, +1 for making it a method of partitions. (Note that it should return an element of `_Partitions`, not the parent of itself.)\n\nThus, it should *not* be `_acted_upon_`, but rather `scale`, right?",
    "created_at": "2022-08-26T08:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555432",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tscrim](#comment:30):
> Replying to [@mantepse](#comment:28):
> > * scale_part might be a useful action on partitions.  Can this be made fast?

> 
> No faster than the current implementation I think. However, +1 for making it a method of partitions. (Note that it should return an element of `_Partitions`, not the parent of itself.)

Thus, it should *not* be `_acted_upon_`, but rather `scale`, right?



---

archive/issue_comments_555433.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIt could be an action of `NN` on partitions, but I think that is a much broader change than what is needed. If we wanted to do that, it would definitely need to be another ticket.\n\nSo yes, I would call it something like `stretch()`.",
    "created_at": "2022-08-26T08:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555433",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

It could be an action of `NN` on partitions, but I think that is a much broader change than what is needed. If we wanted to do that, it would definitely need to be another ticket.

So yes, I would call it something like `stretch()`.



---

archive/issue_comments_555434.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nConcerning the naming of the new function in `sfa.py`: it seems to me that this might be useful in other contexts, too.\n\nIt has actually very little to do with `degree_one_elements`.  Rather, it provides a safe way to get all variables in a ring, possibly excluding some (and, rarely, only including some).  (With the minor annoyance that it doesn't always work.  For example, fraction fields over iterated polynomial rings will not give the correct answer.)\n\nI'd thus like to call it for what it does, rather than what it is used for, eg. `_variable_names_recursive`.",
    "created_at": "2022-08-26T08:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555434",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:33" align="right">comment:33</div>

Concerning the naming of the new function in `sfa.py`: it seems to me that this might be useful in other contexts, too.

It has actually very little to do with `degree_one_elements`.  Rather, it provides a safe way to get all variables in a ring, possibly excluding some (and, rarely, only including some).  (With the minor annoyance that it doesn't always work.  For example, fraction fields over iterated polynomial rings will not give the correct answer.)

I'd thus like to call it for what it does, rather than what it is used for, eg. `_variable_names_recursive`.



---

archive/issue_comments_555435.json:
```json
{
    "body": "Changed commit from **[`5436995`](https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5)** to **[`af347b2`](https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7)**",
    "created_at": "2022-08-26T10:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555435",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5436995`](https://github.com/sagemath/sagetrac-mirror/commit/5436995676cf798189202f582ba283c3d95402f5)** to **[`af347b2`](https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7)**



---

archive/issue_comments_555436.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7\">af347b2</a></td><td><code>refactor and doctest</code></td></tr></table>\n",
    "created_at": "2022-08-26T10:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555436",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7">af347b2</a></td><td><code>refactor and doctest</code></td></tr></table>




---

archive/issue_comments_555437.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mantepse](#comment:33):\n> I'd thus like to call it for what it does, rather than what it is used for, eg. `_variable_names_recursive`.\n\nThat's fine by me.",
    "created_at": "2022-08-26T10:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555437",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mantepse](#comment:33):
> I'd thus like to call it for what it does, rather than what it is used for, eg. `_variable_names_recursive`.

That's fine by me.



---

archive/issue_comments_555438.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787\">0d9f02f</a></td><td><code>leftover</code></td></tr></table>\n",
    "created_at": "2022-08-26T12:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787">0d9f02f</a></td><td><code>leftover</code></td></tr></table>




---

archive/issue_comments_555439.json:
```json
{
    "body": "Changed commit from **[`af347b2`](https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7)** to **[`0d9f02f`](https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787)**",
    "created_at": "2022-08-26T12:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555439",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af347b2`](https://github.com/sagemath/sagetrac-mirror/commit/af347b2de7608315242ca53b1b8b03a4d6ccfbb7)** to **[`0d9f02f`](https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787)**



---

archive/issue_comments_555440.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d\">ae99175</a></td><td><code>plethysm with tensor products, part 1</code></td></tr></table>\n",
    "created_at": "2022-08-26T17:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555440",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d">ae99175</a></td><td><code>plethysm with tensor products, part 1</code></td></tr></table>




---

archive/issue_comments_555441.json:
```json
{
    "body": "Changed commit from **[`0d9f02f`](https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787)** to **[`ae99175`](https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d)**",
    "created_at": "2022-08-26T17:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d9f02f`](https://github.com/sagemath/sagetrac-mirror/commit/0d9f02f91f7ed204c1ce3dfde5b1df42a9e5e787)** to **[`ae99175`](https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d)**



---

archive/issue_comments_555442.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI created #34441 for the issue about `ZZ.variable_names()` that was mentioned in [comment:28](#comment:28) and [comment:30](#comment:30). IMHO it's a bug.",
    "created_at": "2022-08-26T18:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555442",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:38" align="right">comment:38</div>

I created #34441 for the issue about `ZZ.variable_names()` that was mentioned in [comment:28](#comment:28) and [comment:30](#comment:30). IMHO it's a bug.



---

archive/issue_comments_555443.json:
```json
{
    "body": "Changed commit from **[`ae99175`](https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d)** to **[`baff215`](https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422)**",
    "created_at": "2022-08-27T09:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555443",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ae99175`](https://github.com/sagemath/sagetrac-mirror/commit/ae991754875bedbac56b99424daef033ba05dd4d)** to **[`baff215`](https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422)**



---

archive/issue_comments_555444.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422\">baff215</a></td><td><code>plethysm with tensor products, part 2 of 2</code></td></tr></table>\n",
    "created_at": "2022-08-27T09:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555444",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422">baff215</a></td><td><code>plethysm with tensor products, part 2 of 2</code></td></tr></table>




---

archive/issue_comments_555445.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThe only missing method is reversion for Taylor series now.",
    "created_at": "2022-08-27T09:13:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555445",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:40" align="right">comment:40</div>

The only missing method is reversion for Taylor series now.



---

archive/issue_comments_555446.json:
```json
{
    "body": "Changed commit from **[`baff215`](https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422)** to **[`9f200b4`](https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3)**",
    "created_at": "2022-08-27T16:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555446",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`baff215`](https://github.com/sagemath/sagetrac-mirror/commit/baff2153edf95ad14180bd9ca29155b9b6648422)** to **[`9f200b4`](https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3)**



---

archive/issue_comments_555447.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dff4fc4b7ecd86b9b8556867b490126ebc8d089f\">dff4fc4</a></td><td><code>Adding a completion of graded algebras by formal series.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dd1217169ef2b6302a381b7789356bcebd71a49\">4dd1217</a></td><td><code>Merge branch 'public/rings/lazy_graded_algebras-34407' of trac.sagemath.org:sage into t/34383/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3\">9f200b4</a></td><td><code>fix oversights</code></td></tr></table>\n",
    "created_at": "2022-08-27T16:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555447",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dff4fc4b7ecd86b9b8556867b490126ebc8d089f">dff4fc4</a></td><td><code>Adding a completion of graded algebras by formal series.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dd1217169ef2b6302a381b7789356bcebd71a49">4dd1217</a></td><td><code>Merge branch 'public/rings/lazy_graded_algebras-34407' of trac.sagemath.org:sage into t/34383/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3">9f200b4</a></td><td><code>fix oversights</code></td></tr></table>




---

archive/issue_comments_555448.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927\">43adfff</a></td><td><code>fix bug in LazyTaylorSeries.polynomial, add revert</code></td></tr></table>\n",
    "created_at": "2022-08-28T08:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555448",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927">43adfff</a></td><td><code>fix bug in LazyTaylorSeries.polynomial, add revert</code></td></tr></table>




---

archive/issue_comments_555449.json:
```json
{
    "body": "Changed commit from **[`9f200b4`](https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3)** to **[`43adfff`](https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927)**",
    "created_at": "2022-08-28T08:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555449",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f200b4`](https://github.com/sagemath/sagetrac-mirror/commit/9f200b47270e2f7ad4cc492ad4f173760f5e3cf3)** to **[`43adfff`](https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927)**



---

archive/issue_comments_555450.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThere remains a bug in `LazyTaylorSeries.__call__`:\n\nAt the very beginning, we deal with the case where f is a polynomial:\n\n```\n        # f has finite length\n        if isinstance(self._coeff_stream, Stream_exact) and not self._coeff_stream._constant:\n            # constant polynomial\n            poly = self.polynomial()\n            if poly.is_constant():\n                return P(poly)\n            return P(poly(g))\n```\nHowever, this is too eager.  In the example below, we would like to compute `g.define(z / ((1-z)(g)))`, which fails, whereas `g.define(z / (1-g))` works.  Also, if we compute in the `LazyLaurentSeriesRing` instead, there is no problem.\n\nIt would be great if `LazyLaurentSeries.__call__` and `LazyTaylorSeries.__call__` and perhaps even `LazySymmetricFunction.__call__` could share some code, to avoid these inconsistencies.\n\n\nExample:\n\n```\nsage: L.<z> = LazyTaylorSeriesRing(QQ)\nsage: f = 1 - z\nsage: g = L(None, valuation=1)\nsage: g.define(z / (1 - g))\nsage: g\nz + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)\n\nsage: g = L(None, valuation=1)\nsage: g.define(z / f(g))\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\nFile ~/sage-develop/src/sage/data_structures/stream.py:329, in Stream_inexact.__getitem__(self, n)\n    328 try:\n--> 329     c = self._cache[n]\n    330 except KeyError:\n\nKeyError: 1\n\nDuring handling of the above exception, another exception occurred:\n\nTypeError                                 Traceback (most recent call last)\nInput In [10], in <cell line: 1>()\n----> 1 g.define(z / f(g))\n\nFile ~/sage-develop/src/sage/rings/lazy_series.py:3508, in LazyTaylorSeries.__call__(self, check, *g)\n   3506     if poly.is_constant():\n   3507         return P(poly)\n-> 3508     return P(poly(g))\n   3510 # f now has (potentially) infinitely many terms\n   3511 # Lift the resulting parent to a lazy series (if possible)\n   3512 # Also make sure each element of g is a LazyModuleElement\n   3513 from sage.rings.polynomial.polynomial_ring import PolynomialRing_general\n\nFile ~/sage-develop/src/sage/rings/polynomial/polynomial_rational_flint.pyx:552, in sage.rings.polynomial.polynomial_rational_flint.Polynomial_rational_flint.__call__()\n    550             return acb_z\n    551 \n--> 552     return Polynomial.__call__(self, *x, **kwds)\n    553 \n    554 cpdef Polynomial truncate(self, long n):\n\nFile ~/sage-develop/src/sage/rings/polynomial/polynomial_element.pyx:881, in sage.rings.polynomial.polynomial_element.Polynomial.__call__()\n    879 d = pol.degree()\n    880 \n--> 881 if d <= 0 or (isinstance(a, Element) and R.is_exact() and a.is_zero()):\n    882     return cst # with the right parent thanks to the above coercion\n    883 elif pol._parent is R and a.is_gen():\n\nFile ~/sage-develop/src/sage/structure/element.pyx:1064, in sage.structure.element.Element.is_zero()\n   1062         implement ``__bool__`` instead.\n   1063     \"\"\"\n-> 1064     return not self\n   1065 \n   1066 def _cache_key(self):\n\nFile ~/sage-develop/src/sage/rings/lazy_series.py:618, in LazyModuleElement.__bool__(self)\n    616     if any(a for a in self._coeff_stream._cache):\n    617         return True\n--> 618 if self[self._coeff_stream._approximate_order]:\n    619     return True\n    620 raise ValueError(\"undecidable as lazy Laurent series\")\n\nFile ~/sage-develop/src/sage/rings/lazy_series.py:254, in LazyModuleElement.__getitem__(self, n)\n    252     step = n.step if n.step is not None else 1\n    253     return [R(self._coeff_stream[k]) for k in range(start, n.stop, step)]\n--> 254 return R(self._coeff_stream[n])\n\nFile ~/sage-develop/src/sage/data_structures/stream.py:331, in Stream_inexact.__getitem__(self, n)\n    329         c = self._cache[n]\n    330     except KeyError:\n--> 331         c = self.get_coefficient(n)\n    332         self._cache[n] = c\n    333 else:\n\nFile ~/sage-develop/src/sage/data_structures/stream.py:876, in Stream_uninitialized.get_coefficient(self, n)\n    857 def get_coefficient(self, n):\n    858     \"\"\"\n    859     Return the ``n``-th coefficient of ``self``.\n    860 \n   (...)\n    874         1\n    875     \"\"\"\n--> 876     return self._target[n]\n\nTypeError: 'NoneType' object is not subscriptable\n```",
    "created_at": "2022-08-28T09:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555450",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:43" align="right">comment:43</div>

There remains a bug in `LazyTaylorSeries.__call__`:

At the very beginning, we deal with the case where f is a polynomial:

```
        # f has finite length
        if isinstance(self._coeff_stream, Stream_exact) and not self._coeff_stream._constant:
            # constant polynomial
            poly = self.polynomial()
            if poly.is_constant():
                return P(poly)
            return P(poly(g))
```
However, this is too eager.  In the example below, we would like to compute `g.define(z / ((1-z)(g)))`, which fails, whereas `g.define(z / (1-g))` works.  Also, if we compute in the `LazyLaurentSeriesRing` instead, there is no problem.

It would be great if `LazyLaurentSeries.__call__` and `LazyTaylorSeries.__call__` and perhaps even `LazySymmetricFunction.__call__` could share some code, to avoid these inconsistencies.


Example:

```
sage: L.<z> = LazyTaylorSeriesRing(QQ)
sage: f = 1 - z
sage: g = L(None, valuation=1)
sage: g.define(z / (1 - g))
sage: g
z + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)

sage: g = L(None, valuation=1)
sage: g.define(z / f(g))
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
File ~/sage-develop/src/sage/data_structures/stream.py:329, in Stream_inexact.__getitem__(self, n)
    328 try:
--> 329     c = self._cache[n]
    330 except KeyError:

KeyError: 1

During handling of the above exception, another exception occurred:

TypeError                                 Traceback (most recent call last)
Input In [10], in <cell line: 1>()
----> 1 g.define(z / f(g))

File ~/sage-develop/src/sage/rings/lazy_series.py:3508, in LazyTaylorSeries.__call__(self, check, *g)
   3506     if poly.is_constant():
   3507         return P(poly)
-> 3508     return P(poly(g))
   3510 # f now has (potentially) infinitely many terms
   3511 # Lift the resulting parent to a lazy series (if possible)
   3512 # Also make sure each element of g is a LazyModuleElement
   3513 from sage.rings.polynomial.polynomial_ring import PolynomialRing_general

File ~/sage-develop/src/sage/rings/polynomial/polynomial_rational_flint.pyx:552, in sage.rings.polynomial.polynomial_rational_flint.Polynomial_rational_flint.__call__()
    550             return acb_z
    551 
--> 552     return Polynomial.__call__(self, *x, **kwds)
    553 
    554 cpdef Polynomial truncate(self, long n):

File ~/sage-develop/src/sage/rings/polynomial/polynomial_element.pyx:881, in sage.rings.polynomial.polynomial_element.Polynomial.__call__()
    879 d = pol.degree()
    880 
--> 881 if d <= 0 or (isinstance(a, Element) and R.is_exact() and a.is_zero()):
    882     return cst # with the right parent thanks to the above coercion
    883 elif pol._parent is R and a.is_gen():

File ~/sage-develop/src/sage/structure/element.pyx:1064, in sage.structure.element.Element.is_zero()
   1062         implement ``__bool__`` instead.
   1063     """
-> 1064     return not self
   1065 
   1066 def _cache_key(self):

File ~/sage-develop/src/sage/rings/lazy_series.py:618, in LazyModuleElement.__bool__(self)
    616     if any(a for a in self._coeff_stream._cache):
    617         return True
--> 618 if self[self._coeff_stream._approximate_order]:
    619     return True
    620 raise ValueError("undecidable as lazy Laurent series")

File ~/sage-develop/src/sage/rings/lazy_series.py:254, in LazyModuleElement.__getitem__(self, n)
    252     step = n.step if n.step is not None else 1
    253     return [R(self._coeff_stream[k]) for k in range(start, n.stop, step)]
--> 254 return R(self._coeff_stream[n])

File ~/sage-develop/src/sage/data_structures/stream.py:331, in Stream_inexact.__getitem__(self, n)
    329         c = self._cache[n]
    330     except KeyError:
--> 331         c = self.get_coefficient(n)
    332         self._cache[n] = c
    333 else:

File ~/sage-develop/src/sage/data_structures/stream.py:876, in Stream_uninitialized.get_coefficient(self, n)
    857 def get_coefficient(self, n):
    858     """
    859     Return the ``n``-th coefficient of ``self``.
    860 
   (...)
    874         1
    875     """
--> 876     return self._target[n]

TypeError: 'NoneType' object is not subscriptable
```



---

archive/issue_comments_555451.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nActually, it is not a bug in the lazy Taylor series code. In fact, it i working \u201ccorrectly\u201d because it is trying a very basic test to see if it is zero or not, the test of which is out of our hands, which at the time it does not know. I would actually expect the same problem in the `LazyLaurentSeriesRing`.\n\nTo fix this, the quick-n-dirty fix would be to have an uninitialized series have `__bool__()` simply return `True` as it represents a variable that has yet to be specialized . This would make it consistent with variables of a polynomial ring or symbolic variables. )Plus, in nearly all use cases, this will end up defining a non-zero series anyways.) Actually, because of that, I would even say this is the correct thing to do, and not simply a hack solution.\n\nA more broader change to fix the problem would be to have some kind of lazily-evaluated version of composition. Not only would it increase the code complexity when there is arguably a valid solution, it also would not be compatible with polynomials that can be evaluated at elements of the lazy series ring `R` with the result being coerced into `R`. Note that the polynomial itself does \u2018\u2019not\u2019\u2019 even need to convert (much less coerce) into `R`. So this would just sweep this problem under the rug (this includes even the extreme change of removing the exact implementation or feeding off to the polynomial code).\n\nHaving written all of this down, I am fully convinced we should just make it work by saying an uninitialized series is considered to be non-zero by having `__bool__()` return `True` in that case.",
    "created_at": "2022-08-28T13:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555451",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

Actually, it is not a bug in the lazy Taylor series code. In fact, it i working “correctly” because it is trying a very basic test to see if it is zero or not, the test of which is out of our hands, which at the time it does not know. I would actually expect the same problem in the `LazyLaurentSeriesRing`.

To fix this, the quick-n-dirty fix would be to have an uninitialized series have `__bool__()` simply return `True` as it represents a variable that has yet to be specialized . This would make it consistent with variables of a polynomial ring or symbolic variables. )Plus, in nearly all use cases, this will end up defining a non-zero series anyways.) Actually, because of that, I would even say this is the correct thing to do, and not simply a hack solution.

A more broader change to fix the problem would be to have some kind of lazily-evaluated version of composition. Not only would it increase the code complexity when there is arguably a valid solution, it also would not be compatible with polynomials that can be evaluated at elements of the lazy series ring `R` with the result being coerced into `R`. Note that the polynomial itself does ‘’not’’ even need to convert (much less coerce) into `R`. So this would just sweep this problem under the rug (this includes even the extreme change of removing the exact implementation or feeding off to the polynomial code).

Having written all of this down, I am fully convinced we should just make it work by saying an uninitialized series is considered to be non-zero by having `__bool__()` return `True` in that case.



---

archive/issue_comments_555452.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI'm afraid I simply do not understand your argument.  You say that you \"would actually expect the same problem in the `LazyLaurentSeriesRing`, but I don't see the problem there:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: f = 1-z\nsage: g = L(None, valuation=1)\nsage: g.define(z / f(g))\nsage: g\nz + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)\n```\nIn fact, this is (essentially) a doctest.\n\nIn `LazyLaurentSeries.__call__`, if `f` is a polynomial, we use the following test before composing the polynomial with `g`:\n* if `g` is not a `LazyModuleElement`, we compose\n* otherwise, if `g` is a `LazyCauchyProductSeries` and `g._coeff_stream` is `Stream_exact` and `not g._coeff_stream._constant`, we also do a special case\n* finally, if none of the above applies, we use the generic algorithm.\n\nI don't see where `g.__bool__` would come into play here.",
    "created_at": "2022-08-28T19:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555452",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:45" align="right">comment:45</div>

I'm afraid I simply do not understand your argument.  You say that you "would actually expect the same problem in the `LazyLaurentSeriesRing`, but I don't see the problem there:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: f = 1-z
sage: g = L(None, valuation=1)
sage: g.define(z / f(g))
sage: g
z + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)
```
In fact, this is (essentially) a doctest.

In `LazyLaurentSeries.__call__`, if `f` is a polynomial, we use the following test before composing the polynomial with `g`:
* if `g` is not a `LazyModuleElement`, we compose
* otherwise, if `g` is a `LazyCauchyProductSeries` and `g._coeff_stream` is `Stream_exact` and `not g._coeff_stream._constant`, we also do a special case
* finally, if none of the above applies, we use the generic algorithm.

I don't see where `g.__bool__` would come into play here.



---

archive/issue_comments_555453.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI tried to do a consistency check.  I'm sure it could be improved.\n\n```\n    sage: def check(L, z, verbose=False):\n    ....:     # division\n    ....:     lf = [0, L(0), 1, L(1), z, 1 + z, 2 + z + z^2]\n    ....:     lg = [3, L(3), 1 + z, 2 + z + z^2]\n    ....:     for f in lf:\n    ....:         for g in lg:\n    ....:             try:\n    ....:                 h = f / g\n    ....:                 if verbose: print(\"(%s) / (%s) = %s\" % (f, g, h))\n    ....:             except Exception as e:\n    ....:                 print(\"%s in (%s) / (%s)\" % (e, f, g))\n    ....:     # composition\n    ....:     f = 2 + z + z^2\n    ....:     l = [(f, 0), (f, L(0)), (f, 2 + z + z^2), (f, L(3)/(1 - 2*z))]\n    ....:     f = L(3)/(2 - 3*z)\n    ....:     l.extend([(f, 0), (f, L(0)), (f, 3*z/(1 - 2*z))])\n    ....:     for f, g in l:\n    ....:         try:\n    ....:             h = f(g)\n    ....:             if verbose: print(\"(%s)(%s) = %s\" % (f, g, h))\n    ....:         except Exception as e:\n    ....:             print(\"%s in (%s)(%s)\" % (e, f, g))\n    ....:     # reversion\n    ....:     l = [2 + 3*z, 3*z + 2*z^2, 3*z/(1 - 2*z - 3*z^2)]\n    ....:     for f in l:\n    ....:         try:\n    ....:             h = f.revert()\n    ....:             if verbose: print(\"(%s)^{(-1)} = %s\" % (f, h))\n    ....:         except Exception as e:\n    ....:             print(\"%s in (%s).revert()\" % (e, f))\n```\n\nThe current results are as follows:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: check(L, z)\n\nsage: L.<z> = LazyTaylorSeriesRing(QQ)\nsage: check(L, z)\nunable to evaluate the series at (0,) in (3/2 + 9/4*z + 27/8*z^2 + 81/16*z^3 + 243/32*z^4 + 729/64*z^5 + 2187/128*z^6 + O(z^7))(0)\n'NoneType' object is not subscriptable in (3*z + 2*z^2).revert()\n\nsage: p = SymmetricFunctions(QQ).p()\nsage: L = LazySymmetricFunctions(p)\nsage: check(L, L(p[1]))\ncan only compose with a positive valuation series in (2*p[] + p[1] + (p[1,1]))(3*p[] + 6*p[1] + (12*p[1,1]) + (24*p[1,1,1]) + (48*p[1,1,1,1]) + (96*p[1,1,1,1,1]) + (192*p[1,1,1,1,1,1]) + O^7)\nno conversion of this rational to integer in (3/2*p[] + 9/4*p[1] + (27/8*p[1,1]) + (81/16*p[1,1,1]) + (243/32*p[1,1,1,1]) + (729/64*p[1,1,1,1,1]) + (2187/128*p[1,1,1,1,1,1]) + O^7)(0)\n```",
    "created_at": "2022-08-28T20:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555453",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:46" align="right">comment:46</div>

I tried to do a consistency check.  I'm sure it could be improved.

```
    sage: def check(L, z, verbose=False):
    ....:     # division
    ....:     lf = [0, L(0), 1, L(1), z, 1 + z, 2 + z + z^2]
    ....:     lg = [3, L(3), 1 + z, 2 + z + z^2]
    ....:     for f in lf:
    ....:         for g in lg:
    ....:             try:
    ....:                 h = f / g
    ....:                 if verbose: print("(%s) / (%s) = %s" % (f, g, h))
    ....:             except Exception as e:
    ....:                 print("%s in (%s) / (%s)" % (e, f, g))
    ....:     # composition
    ....:     f = 2 + z + z^2
    ....:     l = [(f, 0), (f, L(0)), (f, 2 + z + z^2), (f, L(3)/(1 - 2*z))]
    ....:     f = L(3)/(2 - 3*z)
    ....:     l.extend([(f, 0), (f, L(0)), (f, 3*z/(1 - 2*z))])
    ....:     for f, g in l:
    ....:         try:
    ....:             h = f(g)
    ....:             if verbose: print("(%s)(%s) = %s" % (f, g, h))
    ....:         except Exception as e:
    ....:             print("%s in (%s)(%s)" % (e, f, g))
    ....:     # reversion
    ....:     l = [2 + 3*z, 3*z + 2*z^2, 3*z/(1 - 2*z - 3*z^2)]
    ....:     for f in l:
    ....:         try:
    ....:             h = f.revert()
    ....:             if verbose: print("(%s)^{(-1)} = %s" % (f, h))
    ....:         except Exception as e:
    ....:             print("%s in (%s).revert()" % (e, f))
```

The current results are as follows:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: check(L, z)

sage: L.<z> = LazyTaylorSeriesRing(QQ)
sage: check(L, z)
unable to evaluate the series at (0,) in (3/2 + 9/4*z + 27/8*z^2 + 81/16*z^3 + 243/32*z^4 + 729/64*z^5 + 2187/128*z^6 + O(z^7))(0)
'NoneType' object is not subscriptable in (3*z + 2*z^2).revert()

sage: p = SymmetricFunctions(QQ).p()
sage: L = LazySymmetricFunctions(p)
sage: check(L, L(p[1]))
can only compose with a positive valuation series in (2*p[] + p[1] + (p[1,1]))(3*p[] + 6*p[1] + (12*p[1,1]) + (24*p[1,1,1]) + (48*p[1,1,1,1]) + (96*p[1,1,1,1,1]) + (192*p[1,1,1,1,1,1]) + O^7)
no conversion of this rational to integer in (3/2*p[] + 9/4*p[1] + (27/8*p[1,1]) + (81/16*p[1,1,1]) + (243/32*p[1,1,1,1]) + (729/64*p[1,1,1,1,1]) + (2187/128*p[1,1,1,1,1,1]) + O^7)(0)
```



---

archive/issue_comments_555454.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@mantepse](#comment:45):\n> I'm afraid I simply do not understand your argument.  You say that you \"would actually expect the same problem in the `LazyLaurentSeriesRing`, but I don't see the problem there:\n> \n> ```\n> sage: L.<z> = LazyLaurentSeriesRing(QQ)\n> sage: f = 1-z\n> sage: g = L(None, valuation=1)\n> sage: g.define(z / f(g))\n> sage: g\n> z + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)\n> ```\n> In fact, this is (essentially) a doctest.\n> \n> In `LazyLaurentSeries.__call__`, if `f` is a polynomial, we use the following test before composing the polynomial with `g`:\n> * if `g` is not a `LazyModuleElement`, we compose\n> * otherwise, if `g` is a `LazyCauchyProductSeries` and `g._coeff_stream` is `Stream_exact` and `not g._coeff_stream._constant`, we also do a special case\n> * finally, if none of the above applies, we use the generic algorithm.\n\nIn some respects, we get lucky here. I would expect the following to work:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: f = 1 - z\nsage: g = L(None, valuation=1)\nsage: f(g) == f.polynomial()(g)\n```\nIn particular, the `f.polynomial()(g)` fails in exactly the same way as above.\n\nThe only reason we need to do anything special is for the negative exponents when `g` is exact. Everything else is just an optimization (as the comment there indicates, it should be replaceable by `return poly(g)`) to take advantage of caching (it could also benefit by reducing the number of multiplications too).\n\n> I don't see where `g.__bool__` would come into play here.\n\nIt is there in the error message as there is a call to `is_zero()`.",
    "created_at": "2022-08-28T23:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555454",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@mantepse](#comment:45):
> I'm afraid I simply do not understand your argument.  You say that you "would actually expect the same problem in the `LazyLaurentSeriesRing`, but I don't see the problem there:
> 
> ```
> sage: L.<z> = LazyLaurentSeriesRing(QQ)
> sage: f = 1-z
> sage: g = L(None, valuation=1)
> sage: g.define(z / f(g))
> sage: g
> z + z^2 + 2*z^3 + 5*z^4 + 14*z^5 + 42*z^6 + 132*z^7 + O(z^8)
> ```
> In fact, this is (essentially) a doctest.
> 
> In `LazyLaurentSeries.__call__`, if `f` is a polynomial, we use the following test before composing the polynomial with `g`:
> * if `g` is not a `LazyModuleElement`, we compose
> * otherwise, if `g` is a `LazyCauchyProductSeries` and `g._coeff_stream` is `Stream_exact` and `not g._coeff_stream._constant`, we also do a special case
> * finally, if none of the above applies, we use the generic algorithm.

In some respects, we get lucky here. I would expect the following to work:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: f = 1 - z
sage: g = L(None, valuation=1)
sage: f(g) == f.polynomial()(g)
```
In particular, the `f.polynomial()(g)` fails in exactly the same way as above.

The only reason we need to do anything special is for the negative exponents when `g` is exact. Everything else is just an optimization (as the comment there indicates, it should be replaceable by `return poly(g)`) to take advantage of caching (it could also benefit by reducing the number of multiplications too).

> I don't see where `g.__bool__` would come into play here.

It is there in the error message as there is a call to `is_zero()`.



---

archive/issue_comments_555455.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI am a bit happy as it seems on a simple example that my optimization is faster:\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: f = z^-1 + 2 + z + z^2 + 2*z^3\nsage: g = z^-2 / (1 - z)\n\nsage: %time (f(g))[300]\nCPU times: user 25.6 ms, sys: 10 \u00b5s, total: 25.6 ms\nWall time: 25.2 ms\n94862\nsage: %time (f.polynomial()(g))[300]\nCPU times: user 92.1 ms, sys: 0 ns, total: 92.1 ms\nWall time: 91.8 ms\n94862\n\nsage: %time (f(g))[3000]\nCPU times: user 2.22 s, sys: 0 ns, total: 2.22 s\nWall time: 2.22 s\n9048062\nsage: %time (f.polynomial()(g))[3000]\nCPU times: user 8.2 s, sys: 0 ns, total: 8.2 s\nWall time: 8.2 s\n9048062\n```\nAll come behold the power of the cache and rejoice. `:P`",
    "created_at": "2022-08-29T00:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555455",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

I am a bit happy as it seems on a simple example that my optimization is faster:

```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: f = z^-1 + 2 + z + z^2 + 2*z^3
sage: g = z^-2 / (1 - z)

sage: %time (f(g))[300]
CPU times: user 25.6 ms, sys: 10 µs, total: 25.6 ms
Wall time: 25.2 ms
94862
sage: %time (f.polynomial()(g))[300]
CPU times: user 92.1 ms, sys: 0 ns, total: 92.1 ms
Wall time: 91.8 ms
94862

sage: %time (f(g))[3000]
CPU times: user 2.22 s, sys: 0 ns, total: 2.22 s
Wall time: 2.22 s
9048062
sage: %time (f.polynomial()(g))[3000]
CPU times: user 8.2 s, sys: 0 ns, total: 8.2 s
Wall time: 8.2 s
9048062
```
All come behold the power of the cache and rejoice. `:P`



---

archive/issue_comments_555456.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nHere is the fix with doctests added.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f\">cfec1e0</a></td><td><code>Making uninitialized series g have bool(g) == True. Better define() semantic with exact and non lazy series elements.</code></td></tr></table>\n",
    "created_at": "2022-08-29T00:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555456",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:49" align="right">comment:49</div>

Here is the fix with doctests added.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f">cfec1e0</a></td><td><code>Making uninitialized series g have bool(g) == True. Better define() semantic with exact and non lazy series elements.</code></td></tr></table>




---

archive/issue_comments_555457.json:
```json
{
    "body": "Changed branch from **[u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing)** to **[public/rings/lazy_series_revert-34383](https://github.com/sagemath/sagetrac-mirror/tree/public/rings/lazy_series_revert-34383)**",
    "created_at": "2022-08-29T00:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555457",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/revert_for_lazytaylorseries_and_lazysymmetricfunction_is_missing)** to **[public/rings/lazy_series_revert-34383](https://github.com/sagemath/sagetrac-mirror/tree/public/rings/lazy_series_revert-34383)**



---

archive/issue_comments_555458.json:
```json
{
    "body": "Changed commit from **[`43adfff`](https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927)** to **[`cfec1e0`](https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f)**",
    "created_at": "2022-08-29T00:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555458",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`43adfff`](https://github.com/sagemath/sagetrac-mirror/commit/43adfff83bea7dda1e09ba4f28b29c405dd64927)** to **[`cfec1e0`](https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f)**



---

archive/issue_comments_555459.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-08-29T00:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555459",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_555460.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nCool, and thank you for the explanation!  I missed the fact that composing a polynomial with an uninitialised series actually makes sense even when using the generic polynomial code.",
    "created_at": "2022-08-29T06:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555460",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:50" align="right">comment:50</div>

Cool, and thank you for the explanation!  I missed the fact that composing a polynomial with an uninitialised series actually makes sense even when using the generic polynomial code.



---

archive/issue_comments_555461.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c\">bdc4537</a></td><td><code>make the linter happier</code></td></tr></table>\n",
    "created_at": "2022-08-29T07:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555461",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c">bdc4537</a></td><td><code>make the linter happier</code></td></tr></table>




---

archive/issue_comments_555462.json:
```json
{
    "body": "Changed commit from **[`cfec1e0`](https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f)** to **[`bdc4537`](https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c)**",
    "created_at": "2022-08-29T07:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555462",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cfec1e0`](https://github.com/sagemath/sagetrac-mirror/commit/cfec1e0f0ba419e838338bccd684bb511a0d843f)** to **[`bdc4537`](https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c)**



---

archive/issue_comments_555463.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5\">07ca029</a></td><td><code>add a consistency check</code></td></tr></table>\n",
    "created_at": "2022-08-29T07:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555463",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5">07ca029</a></td><td><code>add a consistency check</code></td></tr></table>




---

archive/issue_comments_555464.json:
```json
{
    "body": "Changed commit from **[`bdc4537`](https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c)** to **[`07ca029`](https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5)**",
    "created_at": "2022-08-29T07:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555464",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bdc4537`](https://github.com/sagemath/sagetrac-mirror/commit/bdc45376b64dfb472781caecf8fab6c30f1fc92c)** to **[`07ca029`](https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5)**



---

archive/issue_comments_555465.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThere are still some tests which (trivially) fail.  I am going to work on them for the next 2 hours or so.",
    "created_at": "2022-08-29T07:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555465",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:53" align="right">comment:53</div>

There are still some tests which (trivially) fail.  I am going to work on them for the next 2 hours or so.



---

archive/issue_comments_555466.json:
```json
{
    "body": "Changed commit from **[`07ca029`](https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5)** to **[`1d559cc`](https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5)**",
    "created_at": "2022-08-29T14:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555466",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`07ca029`](https://github.com/sagemath/sagetrac-mirror/commit/07ca0294601f7cf25577e67e025818f8df5bc9e5)** to **[`1d559cc`](https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5)**



---

archive/issue_comments_555467.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5\">1d559cc</a></td><td><code>improve composing Taylor series, start making plethysm more general</code></td></tr></table>\n",
    "created_at": "2022-08-29T14:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555467",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5">1d559cc</a></td><td><code>improve composing Taylor series, start making plethysm more general</code></td></tr></table>




---

archive/issue_comments_555468.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nTaylor series should be OK now.\n\nThere are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:\n\n```\nsage: p = SymmetricFunctions(QQ).p()\nsage: p[2,2,1](3)\n...\nTypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions\n```\nHowever, I am not completely sure who should handle plethysms of the form `f o g` where `f` is an ordinary symmetric function and `g` is a lazy symmetric function.  The situation is similar to the case of polynomials, but not the same.  Essentially, we need to be able to express `g` as a (possibly constant, possibly lazy) symmetric function in the power sum basis.\n\nOne possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the \"exact\" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.",
    "created_at": "2022-08-29T14:15:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555468",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:55" align="right">comment:55</div>

Taylor series should be OK now.

There are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:

```
sage: p = SymmetricFunctions(QQ).p()
sage: p[2,2,1](3)
...
TypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions
```
However, I am not completely sure who should handle plethysms of the form `f o g` where `f` is an ordinary symmetric function and `g` is a lazy symmetric function.  The situation is similar to the case of polynomials, but not the same.  Essentially, we need to be able to express `g` as a (possibly constant, possibly lazy) symmetric function in the power sum basis.

One possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the "exact" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.



---

archive/issue_comments_555469.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@mantepse](#comment:55):\n> Taylor series should be OK now.\n\nGreat!\n\n> There are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:\n> \n> ```\n> sage: p = SymmetricFunctions(QQ).p()\n> sage: p[2,2,1](3)\n> ...\n> TypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions\n> ```\n\nYea, this one annoys me from time to time that it doesn't at least try to coerce the element into a symmetric functions. This is for a separate ticket, but +1 for trying the coercion (or at least handling elements from the base ring)\n\n> However, I am not completely sure who should handle plethysms of the form `f o g` where `f` is an ordinary symmetric function and `g` is a lazy symmetric function.  The situation is similar to the case of polynomials, but not the same.  Essentially, we need to be able to express `g` as a (possibly constant, possibly lazy) symmetric function in the power sum basis.\n\nThe symmetric function `f` definitely should. There is no mechanism within Python (or within the coercion framework) to automatically pass control over to `g`.\n\n> One possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the \"exact\" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.\n\nI don't know how `Stream_plethysm` could even get control of this without having `f` actually handle the object. At which point, there is an easy solution: convert `f` to a `LazySymmetricFunction` and run `__call__` on that. I will push a fix in just a minute.",
    "created_at": "2022-08-30T00:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555469",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@mantepse](#comment:55):
> Taylor series should be OK now.

Great!

> There are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:
> 
> ```
> sage: p = SymmetricFunctions(QQ).p()
> sage: p[2,2,1](3)
> ...
> TypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions
> ```

Yea, this one annoys me from time to time that it doesn't at least try to coerce the element into a symmetric functions. This is for a separate ticket, but +1 for trying the coercion (or at least handling elements from the base ring)

> However, I am not completely sure who should handle plethysms of the form `f o g` where `f` is an ordinary symmetric function and `g` is a lazy symmetric function.  The situation is similar to the case of polynomials, but not the same.  Essentially, we need to be able to express `g` as a (possibly constant, possibly lazy) symmetric function in the power sum basis.

The symmetric function `f` definitely should. There is no mechanism within Python (or within the coercion framework) to automatically pass control over to `g`.

> One possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the "exact" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.

I don't know how `Stream_plethysm` could even get control of this without having `f` actually handle the object. At which point, there is an easy solution: convert `f` to a `LazySymmetricFunction` and run `__call__` on that. I will push a fix in just a minute.



---

archive/issue_comments_555470.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58\">c47b060</a></td><td><code>Doing some changes to normal symmetric functions plethysm to support coefficients and lazy symmetric functions.</code></td></tr></table>\n",
    "created_at": "2022-08-30T00:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555470",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58">c47b060</a></td><td><code>Doing some changes to normal symmetric functions plethysm to support coefficients and lazy symmetric functions.</code></td></tr></table>




---

archive/issue_comments_555471.json:
```json
{
    "body": "Changed commit from **[`1d559cc`](https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5)** to **[`c47b060`](https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58)**",
    "created_at": "2022-08-30T00:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555471",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d559cc`](https://github.com/sagemath/sagetrac-mirror/commit/1d559cc8e2a9d2c79c29c0adbb0e6e19e4baead5)** to **[`c47b060`](https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58)**



---

archive/issue_comments_555472.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5776c6172a683ef8f8f9d4fdb7c99eee994ccc52\">5776c61</a></td><td><code>Adding the category of commutative rings to the category of tensor products of commutative algebras.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f21f3d80e7ec3a99e5da20635bff1db5b70cc42\">5f21f3d</a></td><td><code>Merge branch 'public/categories/tensor_commutative_rings-34453' into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c\">a2e9ed7</a></td><td><code>Making the test for coercion of plethysms wrt tesnor products more robust.</code></td></tr></table>\n",
    "created_at": "2022-08-30T01:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555472",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5776c6172a683ef8f8f9d4fdb7c99eee994ccc52">5776c61</a></td><td><code>Adding the category of commutative rings to the category of tensor products of commutative algebras.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f21f3d80e7ec3a99e5da20635bff1db5b70cc42">5f21f3d</a></td><td><code>Merge branch 'public/categories/tensor_commutative_rings-34453' into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c">a2e9ed7</a></td><td><code>Making the test for coercion of plethysms wrt tesnor products more robust.</code></td></tr></table>




---

archive/issue_comments_555473.json:
```json
{
    "body": "Changed commit from **[`c47b060`](https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58)** to **[`a2e9ed7`](https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c)**",
    "created_at": "2022-08-30T01:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555473",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c47b060`](https://github.com/sagemath/sagetrac-mirror/commit/c47b060895cdf8c492d2dc78f222e0e2f8927e58)** to **[`a2e9ed7`](https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c)**



---

archive/issue_comments_555474.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@tscrim](#comment:56):\n> Replying to [@mantepse](#comment:55):\n\n> > There are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:\n> > \n> > ```\n> > sage: p = SymmetricFunctions(QQ).p()\n> > sage: p[2,2,1](3)\n> > ...\n> > TypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions\n> > ```\n\n> \n> Yea, this one annoys me from time to time that it doesn't at least try to coerce the element into a symmetric functions. This is for a separate ticket, but +1 for trying the coercion (or at least handling elements from the base ring)\n\nI ended up fixing this here as it was basically part of the changes I needed to make for the lazy series. We will not be able to return an element in the original parent for \"constants\" (broadly interpreted) without doing some cumbersome (and well-definedness is another issue too).\n\nThe check for tensor products is a bit brittle, so I've tried to make it a bit more robust (say, if the commutative ring is also a tensor product).\n\nIn trying to find a doctest for this, I found out that tensor products of commutative algebras do not know they are commutative rings:\n\n```\nsage: X = algebras.Shuffle(QQ, 'ab')\nsage: Y = algebras.Shuffle(QQ, 'bc')\nsage: X in CommutativeRings()\nTrue\nsage: Y in CommutativeRings()\nTrue\nsage: T = tensor([X,Y])\nsage: T in CommutativeRings()\nFalse\n```\nThis is now #34453. While not a strict dependency for this ticket, it means I get to write the doctest I wanted.\n\n> > One possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the \"exact\" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.\n\n> \n> I don't know how `Stream_plethysm` could even get control of this without having `f` actually handle the object. At which point, there is an easy solution: convert `f` to a `LazySymmetricFunction` and run `__call__` on that. I will push a fix in just a minute.\n\nI have now done this.",
    "created_at": "2022-08-30T01:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555474",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@tscrim](#comment:56):
> Replying to [@mantepse](#comment:55):

> > There are still slight problems with plethysm.  Some of them might be best fixed in the implementation of ordinary symmetric functions:
> > 
> > ```
> > sage: p = SymmetricFunctions(QQ).p()
> > sage: p[2,2,1](3)
> > ...
> > TypeError: only know how to compute plethysms between symmetric functions or tensors of symmetric functions
> > ```

> 
> Yea, this one annoys me from time to time that it doesn't at least try to coerce the element into a symmetric functions. This is for a separate ticket, but +1 for trying the coercion (or at least handling elements from the base ring)

I ended up fixing this here as it was basically part of the changes I needed to make for the lazy series. We will not be able to return an element in the original parent for "constants" (broadly interpreted) without doing some cumbersome (and well-definedness is another issue too).

The check for tensor products is a bit brittle, so I've tried to make it a bit more robust (say, if the commutative ring is also a tensor product).

In trying to find a doctest for this, I found out that tensor products of commutative algebras do not know they are commutative rings:

```
sage: X = algebras.Shuffle(QQ, 'ab')
sage: Y = algebras.Shuffle(QQ, 'bc')
sage: X in CommutativeRings()
True
sage: Y in CommutativeRings()
True
sage: T = tensor([X,Y])
sage: T in CommutativeRings()
False
```
This is now #34453. While not a strict dependency for this ticket, it means I get to write the doctest I wanted.

> > One possibility would be to handle this in `Stream_plethysm`.  However, this goes against the general philosophy that the "exact" case is handled in `lazy_series.py`.  On the other hand, implementing yet another version of plethysm in `LazySymmetricFunction.__call__` seems like a lot of code duplication to me.

> 
> I don't know how `Stream_plethysm` could even get control of this without having `f` actually handle the object. At which point, there is an easy solution: convert `f` to a `LazySymmetricFunction` and run `__call__` on that. I will push a fix in just a minute.

I have now done this.



---

archive/issue_comments_555475.json:
```json
{
    "body": "Changed dependencies from **#32324** to **#32324, #34453**",
    "created_at": "2022-08-30T01:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555475",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#32324** to **#32324, #34453**



---

archive/issue_comments_555476.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nSo, the idea is now to make `Stream_plethysm` handle the plethysm of a symmetric function with finite support and lazy symmetric functions of valuation 0?\n\n(That's fine with me, I just want confirmation.)\n\n(sorry for being short, I just woke up :-)",
    "created_at": "2022-08-30T05:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555476",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:60" align="right">comment:60</div>

So, the idea is now to make `Stream_plethysm` handle the plethysm of a symmetric function with finite support and lazy symmetric functions of valuation 0?

(That's fine with me, I just want confirmation.)

(sorry for being short, I just woke up :-)



---

archive/issue_comments_555477.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@mantepse](#comment:60):\n> So, the idea is now to make `Stream_plethysm` handle the plethysm of a symmetric function with finite support and lazy symmetric functions of valuation 0?\n\nEssentially yes because it already must do so.\n\n> (sorry for being short, I just woke up :-)\n\nNo problem.",
    "created_at": "2022-08-30T05:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555477",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@mantepse](#comment:60):
> So, the idea is now to make `Stream_plethysm` handle the plethysm of a symmetric function with finite support and lazy symmetric functions of valuation 0?

Essentially yes because it already must do so.

> (sorry for being short, I just woke up :-)

No problem.



---

archive/issue_comments_555478.json:
```json
{
    "body": "Changed commit from **[`a2e9ed7`](https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c)** to **[`94219d4`](https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c)**",
    "created_at": "2022-08-30T08:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a2e9ed7`](https://github.com/sagemath/sagetrac-mirror/commit/a2e9ed7c483e13980dd2849ca25c59e6995ca72c)** to **[`94219d4`](https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c)**



---

archive/issue_comments_555479.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c\">94219d4</a></td><td><code>fix plethysm with f having finite support</code></td></tr></table>\n",
    "created_at": "2022-08-30T08:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555479",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c">94219d4</a></td><td><code>fix plethysm with f having finite support</code></td></tr></table>




---

archive/issue_comments_555480.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nIt seems that we are done for now!\n\nI am sure that code and especially tests and documentation could and should be polished, but maybe it would be good to move forward now.  At least concerning functionality, the code is a huge improvement over what we had before this ticket!\n\nPerhaps it would make sense to make more tests systematic, and also check which tests are now redundant.\n\nI am very grateful for all your help and expertise, Travis!",
    "created_at": "2022-08-30T08:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555480",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:63" align="right">comment:63</div>

It seems that we are done for now!

I am sure that code and especially tests and documentation could and should be polished, but maybe it would be good to move forward now.  At least concerning functionality, the code is a huge improvement over what we had before this ticket!

Perhaps it would make sense to make more tests systematic, and also check which tests are now redundant.

I am very grateful for all your help and expertise, Travis!



---

archive/issue_events_469822.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T08:45:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469822"
}
```



---

archive/issue_events_469823.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469823"
}
```



---

archive/issue_comments_555481.json:
```json
{
    "body": "Changed commit from **[`94219d4`](https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c)** to **[`6745cf1`](https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7)**",
    "created_at": "2022-08-30T09:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555481",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`94219d4`](https://github.com/sagemath/sagetrac-mirror/commit/94219d42cd8be4a910d09f9c2e2b3e89081cc64c)** to **[`6745cf1`](https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7)**



---

archive/issue_comments_555482.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7\">6745cf1</a></td><td><code>Some last details and optimizations to Stream_plethysm.</code></td></tr></table>\n",
    "created_at": "2022-08-30T09:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555482",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7">6745cf1</a></td><td><code>Some last details and optimizations to Stream_plethysm.</code></td></tr></table>




---

archive/issue_comments_555483.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nThank you for the changes and all your hard work.\n\nSome comments about my changes:\n\n- I would avoid variable names of `prod` to not cause possible confusion with the function `prod` (it isn't currently imported, but it could be and even used here).\n- I am very worried about breaking the assumption of the `wt_int_vec_iter`. By not following it, the plethysm could break in a subtle way. I just reversed everything.\n\nIsn't the `:=` syntax great? I had been missing that so much.\n\nIf my changes are good, then I we can set a positive review and move on to the next thing. We can do more polishing of the documentation and tests later.",
    "created_at": "2022-08-30T09:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555483",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:65" align="right">comment:65</div>

Thank you for the changes and all your hard work.

Some comments about my changes:

- I would avoid variable names of `prod` to not cause possible confusion with the function `prod` (it isn't currently imported, but it could be and even used here).
- I am very worried about breaking the assumption of the `wt_int_vec_iter`. By not following it, the plethysm could break in a subtle way. I just reversed everything.

Isn't the `:=` syntax great? I had been missing that so much.

If my changes are good, then I we can set a positive review and move on to the next thing. We can do more polishing of the documentation and tests later.



---

archive/issue_comments_555484.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf\">3d6d39f</a></td><td><code>fix typo in comment</code></td></tr></table>\n",
    "created_at": "2022-08-30T10:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf">3d6d39f</a></td><td><code>fix typo in comment</code></td></tr></table>




---

archive/issue_comments_555485.json:
```json
{
    "body": "Changed commit from **[`6745cf1`](https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7)** to **[`3d6d39f`](https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf)**",
    "created_at": "2022-08-30T10:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555485",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6745cf1`](https://github.com/sagemath/sagetrac-mirror/commit/6745cf1ac7ea98faa4f1b3da63143f4e87b5e7e7)** to **[`3d6d39f`](https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf)**



---

archive/issue_comments_555486.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nPerfect, thanks!",
    "created_at": "2022-08-30T10:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555486",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:67" align="right">comment:67</div>

Perfect, thanks!



---

archive/issue_events_469824.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T10:53:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469824"
}
```



---

archive/issue_events_469825.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T10:53:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469825"
}
```



---

archive/issue_events_469826.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-08-30T14:51:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469826"
}
```



---

archive/issue_events_469827.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-08-30T14:51:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469827"
}
```



---

archive/issue_comments_555487.json:
```json
{
    "body": "Changed commit from **[`3d6d39f`](https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf)** to **[`dafdcb4`](https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb)**",
    "created_at": "2022-08-30T14:51:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555487",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d6d39f`](https://github.com/sagemath/sagetrac-mirror/commit/3d6d39f43ce16eb4a606f49671c236cddd25cdbf)** to **[`dafdcb4`](https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb)**



---

archive/issue_comments_555488.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb\">dafdcb4</a></td><td><code>fix doctests</code></td></tr></table>\n",
    "created_at": "2022-08-30T14:51:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555488",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb">dafdcb4</a></td><td><code>fix doctests</code></td></tr></table>




---

archive/issue_events_469828.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T18:50:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469828"
}
```



---

archive/issue_events_469829.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-30T18:50:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469829"
}
```



---

archive/issue_events_469830.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-08-31T20:22:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469830"
}
```



---

archive/issue_events_469831.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-08-31T20:22:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469831"
}
```



---

archive/issue_comments_555489.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda\">731072a</a></td><td><code>remove unnecessary code leftover from merge, and remove unneccesary import detected by pyflakes</code></td></tr></table>\n",
    "created_at": "2022-08-31T20:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555489",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda">731072a</a></td><td><code>remove unnecessary code leftover from merge, and remove unneccesary import detected by pyflakes</code></td></tr></table>




---

archive/issue_comments_555490.json:
```json
{
    "body": "Changed commit from **[`dafdcb4`](https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb)** to **[`731072a`](https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda)**",
    "created_at": "2022-08-31T20:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555490",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dafdcb4`](https://github.com/sagemath/sagetrac-mirror/commit/dafdcb4df69656b8f363d8825b06ccd7f524edfb)** to **[`731072a`](https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda)**



---

archive/issue_comments_555491.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nBack to positive review, these are only trivial modifications.  Please excuse the noise.",
    "created_at": "2022-08-31T20:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555491",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:72" align="right">comment:72</div>

Back to positive review, these are only trivial modifications.  Please excuse the noise.



---

archive/issue_events_469832.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-31T20:23:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469832"
}
```



---

archive/issue_events_469833.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-08-31T20:23:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469833"
}
```



---

archive/issue_events_469834.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469834"
}
```



---

archive/issue_events_469835.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469835"
}
```



---

archive/issue_events_469836.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-22T22:34:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469836"
}
```



---

archive/issue_events_469837.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-22T22:34:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469837"
}
```



---

archive/issue_comments_555492.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\n\n```\nsage -t --long --warn-long 48.0 --random-seed=123 src/sage/combinat/sf/sfa.py\n**********************************************************************\nFile \"src/sage/combinat/sf/sfa.py\", line 3139, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.plethysm\nFailed example:\n    s(2*T.one())\nExpected:\n    (2*B[word:]#B[word:])*s[]\nGot:\n    (2*B[]#B[])*s[]\n**********************************************************************\n1 item had failures:\n   1 of  48 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.plethysm\n    [1238 tests, 1 failure, 18.82 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 48.0 --random-seed=123 src/sage/combinat/sf/sfa.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2022-09-22T22:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555492",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:74" align="right">comment:74</div>


```
sage -t --long --warn-long 48.0 --random-seed=123 src/sage/combinat/sf/sfa.py
**********************************************************************
File "src/sage/combinat/sf/sfa.py", line 3139, in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.plethysm
Failed example:
    s(2*T.one())
Expected:
    (2*B[word:]#B[word:])*s[]
Got:
    (2*B[]#B[])*s[]
**********************************************************************
1 item had failures:
   1 of  48 in sage.combinat.sf.sfa.SymmetricFunctionAlgebra_generic_Element.plethysm
    [1238 tests, 1 failure, 18.82 s]
----------------------------------------------------------------------
sage -t --long --warn-long 48.0 --random-seed=123 src/sage/combinat/sf/sfa.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_555493.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab98f2e2b1c0f1f25db0a3dbc6f53b2438f65cf7\">ab98f2e</a></td><td><code>less verbose monomials in shuffle algebras</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1388b8ab43afcc9b8c7bbef50a9586277580af8e\">1388b8a</a></td><td><code>Merge branch 'u/chapoton/34494' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bfe5f79361e2ecec4b72bb3746714c419e4542f\">7bfe5f7</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2\">2039990</a></td><td><code>Updating doctest due to changes from #34494.</code></td></tr></table>\n",
    "created_at": "2022-09-22T22:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555493",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab98f2e2b1c0f1f25db0a3dbc6f53b2438f65cf7">ab98f2e</a></td><td><code>less verbose monomials in shuffle algebras</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1388b8ab43afcc9b8c7bbef50a9586277580af8e">1388b8a</a></td><td><code>Merge branch 'u/chapoton/34494' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bfe5f79361e2ecec4b72bb3746714c419e4542f">7bfe5f7</a></td><td><code>Merge branch 'public/rings/lazy_series_revert-34383' of https://github.com/sagemath/sagetrac-mirror into public/rings/lazy_series_revert-34383</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2">2039990</a></td><td><code>Updating doctest due to changes from #34494.</code></td></tr></table>




---

archive/issue_comments_555494.json:
```json
{
    "body": "Changed commit from **[`731072a`](https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda)** to **[`2039990`](https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2)**",
    "created_at": "2022-09-22T22:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555494",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`731072a`](https://github.com/sagemath/sagetrac-mirror/commit/731072a3bfc860f744f1b702708258cb2bc67fda)** to **[`2039990`](https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2)**



---

archive/issue_events_469838.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-22T22:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469838"
}
```



---

archive/issue_events_469839.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-22T22:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469839"
}
```



---

archive/issue_comments_555495.json:
```json
{
    "body": "Changed dependencies from **#32324, #34453** to **#32324, #34453, #34494**",
    "created_at": "2022-09-22T22:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555495",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#32324, #34453** to **#32324, #34453, #34494**



---

archive/issue_comments_555496.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nSame trivial fix that ended up on the later ticket #34413.",
    "created_at": "2022-09-22T22:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555496",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:76" align="right">comment:76</div>

Same trivial fix that ended up on the later ticket #34413.



---

archive/issue_comments_555497.json:
```json
{
    "body": "Changed commit from **[`2039990`](https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2)** to **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**",
    "created_at": "2022-09-25T22:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555497",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2039990`](https://github.com/sagemath/sagetrac-mirror/commit/20399901b09f6f7fbc49bc6d9856a5e6a56694c2)** to **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**



---

archive/issue_events_469840.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-09-25T22:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469840"
}
```



---

archive/issue_events_469841.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-09-25T22:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469841"
}
```



---

archive/issue_comments_555498.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346\">f3f011f</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34383/public/rings/lazy_series_revert-34383</code></td></tr></table>\n",
    "created_at": "2022-09-25T22:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555498",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346">f3f011f</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/34383/public/rings/lazy_series_revert-34383</code></td></tr></table>




---

archive/issue_comments_555499.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nTrivial merge, hence setting back to positive review.",
    "created_at": "2022-09-25T22:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555499",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:78" align="right">comment:78</div>

Trivial merge, hence setting back to positive review.



---

archive/issue_events_469842.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-25T22:30:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469842"
}
```



---

archive/issue_events_469843.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-09-25T22:30:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469843"
}
```



---

archive/issue_events_469844.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-28T23:04:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469844"
}
```



---

archive/issue_events_469845.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6c47984400bb56f7be07e352a2b5b1c42126922b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-09-28T23:04:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34383#event-469845"
}
```



---

archive/issue_comments_555500.json:
```json
{
    "body": "Changed branch from **[public/rings/lazy_series_revert-34383](https://github.com/sagemath/sagetrac-mirror/tree/public/rings/lazy_series_revert-34383)** to **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**",
    "created_at": "2022-09-28T23:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34383#issuecomment-555500",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/rings/lazy_series_revert-34383](https://github.com/sagemath/sagetrac-mirror/tree/public/rings/lazy_series_revert-34383)** to **[`f3f011f`](https://github.com/sagemath/sagetrac-mirror/commit/f3f011f19056fa1444f04a39cba9d3593ffa7346)**
