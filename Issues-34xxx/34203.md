# Issue 34203: Find and uninstall broken installed SPKGs and wheels

archive/issues_033966.json:
```json
{
    "assignees": [],
    "body": "When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken. This is a common problem, reported for example in https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ\n\nTo avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.\n\nThe new command `make -j list-broken-packages` assists the user with this:\n\n```\n$ make -j list-broken-packages\nmake --no-print-directory auditwheel_or_delocate-no-deps\nsage-logger -p 'sage --pip install -r \"/Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt\"' '/Users/mkoeppe/s/sage/sage-rebasing/logs/pkgs/auditwheel_or_delocate.log'\n[auditwheel_or_delocate] Ignoring auditwheel: markers 'sys_platform != \"darwin\"' don't match your environment\n[auditwheel_or_delocate] Requirement already satisfied: delocate in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from -r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.10.2)\n[auditwheel_or_delocate] Requirement already satisfied: wheel>=0.32.0 in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.37.1)\n[auditwheel_or_delocate] Requirement already satisfied: typing-extensions in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (3.10.0.0)\nmake[2]: warning: -jN forced in submake: disabling jobserver mode.\n# Checking /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/installed/bliss-0.73+debian-1+sage-2016-08-02.p0\n...\nChecking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libumfpack.dylib'\nChecking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'\nError during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib\nUninstall broken packages by typing:\n\n\n    make antic-SAGE_LOCAL-uninstall;\n    make e_antic-SAGE_LOCAL-uninstall;\n    make lcalc-SAGE_LOCAL-uninstall;\n    make ratpoints-SAGE_LOCAL-uninstall;\n    make normaliz-SAGE_LOCAL-uninstall;\n    make r-SAGE_LOCAL-uninstall;\n    make backports_zoneinfo-SAGE_VENV-uninstall;\n    make fastjsonschema-SAGE_VENV-uninstall;\n    make pytz_deprecation_shim-SAGE_VENV-uninstall;\n    make stack_data-SAGE_VENV-uninstall;\n    make tinycss2-SAGE_VENV-uninstall;\n    make tzdata-SAGE_VENV-uninstall;\n    make suitesparse-SAGE_LOCAL-uninstall;\n\nreal\t2m25.787s\nuser\t4m54.270s\nsys\t4m0.796s\n```\n\nThe core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n\n```\n$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose givaro'\nChecking shared library file 'lib/libgivaro.9.dylib'\nChecking shared library file 'lib/libgivaro.dylib'\n$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'\nChecking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'\n$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose e_antic'\nChecking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib'\nERROR [libsana|get_dependencies:137]: \n/usr/local/opt/flint/lib/libflint-16.dylib not found:\n  Needed by: /Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib\nError during installcheck of 'e_antic': Could not find all dependencies.\n```\n\nIt inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries and platform wheels listed there. \n\n\n\nOn macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n\nOn Linux, instead of using `ldd` directly, we use `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py)\n\n(Both packages are also used by cibuildwheel)\n\nSee also: #34205 Optionally run auditwheel/delocate on wheels before installing them\n\nDepends on #29097\n\nCC:  @dimpase @jhpalmieri @nbruin @EmmanuelCharpentier\n\nBranch/Commit: **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34203_\n\n",
    "closed_at": "2022-09-20T20:22:59Z",
    "created_at": "2022-07-20T22:20:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Find and uninstall broken installed SPKGs and wheels",
    "type": "issue",
    "updated_at": "2022-09-20T20:22:59Z",
    "url": "https://github.com/sagemath/sage/issues/34203",
    "user": "https://github.com/mkoeppe"
}
```
When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken. This is a common problem, reported for example in https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ

To avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.

The new command `make -j list-broken-packages` assists the user with this:

```
$ make -j list-broken-packages
make --no-print-directory auditwheel_or_delocate-no-deps
sage-logger -p 'sage --pip install -r "/Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt"' '/Users/mkoeppe/s/sage/sage-rebasing/logs/pkgs/auditwheel_or_delocate.log'
[auditwheel_or_delocate] Ignoring auditwheel: markers 'sys_platform != "darwin"' don't match your environment
[auditwheel_or_delocate] Requirement already satisfied: delocate in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from -r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.10.2)
[auditwheel_or_delocate] Requirement already satisfied: wheel>=0.32.0 in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.37.1)
[auditwheel_or_delocate] Requirement already satisfied: typing-extensions in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (3.10.0.0)
make[2]: warning: -jN forced in submake: disabling jobserver mode.
# Checking /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/installed/bliss-0.73+debian-1+sage-2016-08-02.p0
...
Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libumfpack.dylib'
Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'
Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib
Uninstall broken packages by typing:


    make antic-SAGE_LOCAL-uninstall;
    make e_antic-SAGE_LOCAL-uninstall;
    make lcalc-SAGE_LOCAL-uninstall;
    make ratpoints-SAGE_LOCAL-uninstall;
    make normaliz-SAGE_LOCAL-uninstall;
    make r-SAGE_LOCAL-uninstall;
    make backports_zoneinfo-SAGE_VENV-uninstall;
    make fastjsonschema-SAGE_VENV-uninstall;
    make pytz_deprecation_shim-SAGE_VENV-uninstall;
    make stack_data-SAGE_VENV-uninstall;
    make tinycss2-SAGE_VENV-uninstall;
    make tzdata-SAGE_VENV-uninstall;
    make suitesparse-SAGE_LOCAL-uninstall;

real	2m25.787s
user	4m54.270s
sys	4m0.796s
```

The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):

```
$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose givaro'
Checking shared library file 'lib/libgivaro.9.dylib'
Checking shared library file 'lib/libgivaro.dylib'
$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'
Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'
$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose e_antic'
Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib'
ERROR [libsana|get_dependencies:137]: 
/usr/local/opt/flint/lib/libflint-16.dylib not found:
  Needed by: /Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib
Error during installcheck of 'e_antic': Could not find all dependencies.
```

It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries and platform wheels listed there. 



On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/

On Linux, instead of using `ldd` directly, we use `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py)

(Both packages are also used by cibuildwheel)

See also: #34205 Optionally run auditwheel/delocate on wheels before installing them

Depends on #29097

CC:  @dimpase @jhpalmieri @nbruin @EmmanuelCharpentier

Branch/Commit: **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/34203_





---

archive/issue_events_434932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-20T22:20:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434932"
}
```



---

archive/issue_events_434933.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-20T22:20:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434933"
}
```



---

archive/issue_events_434934.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-20T22:20:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434934"
}
```



---

archive/issue_events_434935.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-20T22:20:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434935"
}
```



---

archive/issue_comments_555445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n+The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)\n \n``````\n",
    "created_at": "2022-07-20T23:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555445",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
+The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)
 
``````




---

archive/issue_comments_555446.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,10 @@\n \n The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)\n \n+On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n+\n+On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/\n+\n+(Both packages are also used by cibuildwheel)\n+\n+\n``````\n",
    "created_at": "2022-07-20T23:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555446",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,10 @@
 
 The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)
 
+On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
+
+On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/
+
+(Both packages are also used by cibuildwheel)
+
+
``````




---

archive/issue_comments_555447.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n-The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)\n+The core functionality is implemented by the new command `sage -package installcheck` (implemented in sage_bootstrap)\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n``````\n",
    "created_at": "2022-07-20T23:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555447",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
-The core functionality is implemented by the new command `build/bin/sage-spkg-installcheck` (implemented in sage_bootstrap)
+The core functionality is implemented by the new command `sage -package installcheck` (implemented in sage_bootstrap)
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
``````




---

archive/issue_comments_555448.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n-The core functionality is implemented by the new command `sage -package installcheck` (implemented in sage_bootstrap)\n+The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap)\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n``````\n",
    "created_at": "2022-07-20T23:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555448",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
-The core functionality is implemented by the new command `sage -package installcheck` (implemented in sage_bootstrap)
+The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap)
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
``````




---

archive/issue_comments_555449.json:
```json
{
    "body": "Branch: **[u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels)**",
    "created_at": "2022-07-20T23:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555449",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels)**



---

archive/issue_comments_555450.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79\">562fcab</a></td><td><code>build/bin/sage-spkg-installcheck, build/sage_bootstrap/installcheck.py: New</code></td></tr></table>\n",
    "created_at": "2022-07-21T00:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555450",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79">562fcab</a></td><td><code>build/bin/sage-spkg-installcheck, build/sage_bootstrap/installcheck.py: New</code></td></tr></table>




---

archive/issue_comments_555451.json:
```json
{
    "body": "Commit: **[562fcab](https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79)**",
    "created_at": "2022-07-21T00:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555451",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[562fcab](https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79)**



---

archive/issue_comments_555452.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,14 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n-The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap)\n+The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n+\n+```\n+$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose givaro'\n+Checking shared library file 'lib/libgivaro.9.dylib'\n+Checking shared library file 'lib/libgivaro.dylib'\n+$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'\n+Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'\n+```\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n``````\n",
    "created_at": "2022-07-21T00:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555452",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,14 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
-The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap)
+The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
+
+```
+$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose givaro'
+Checking shared library file 'lib/libgivaro.9.dylib'
+Checking shared library file 'lib/libgivaro.dylib'
+$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'
+Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'
+```
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
``````




---

archive/issue_comments_555453.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de\">5faa8cb</a></td><td><code>build/pkgs/auditwheel_or_delocate: New</code></td></tr></table>\n",
    "created_at": "2022-07-21T00:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555453",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de">5faa8cb</a></td><td><code>build/pkgs/auditwheel_or_delocate: New</code></td></tr></table>




---

archive/issue_comments_555454.json:
```json
{
    "body": "Changed commit from **[562fcab](https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79)** to **[5faa8cb](https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de)**",
    "created_at": "2022-07-21T00:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555454",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[562fcab](https://github.com/sagemath/sagetrac-mirror/commit/562fcabd8dd959a08f5578d1cab088bbbfe05d79)** to **[5faa8cb](https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de)**



---

archive/issue_comments_555455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,10 +3,10 @@\n The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n \n ```\n-$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose givaro'\n+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose givaro'\n Checking shared library file 'lib/libgivaro.9.dylib'\n Checking shared library file 'lib/libgivaro.dylib'\n-$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'\n+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'\n Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'\n ```\n \n``````\n",
    "created_at": "2022-07-21T00:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555455",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,10 +3,10 @@
 The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
 
 ```
-$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose givaro'
+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose givaro'
 Checking shared library file 'lib/libgivaro.9.dylib'
 Checking shared library file 'lib/libgivaro.dylib'
-$ ./sage -sh -c 'build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'
+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'
 Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'
 ```
 
``````




---

archive/issue_comments_555456.json:
```json
{
    "body": "Changed commit from **[5faa8cb](https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de)** to **[9265416](https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76)**",
    "created_at": "2022-07-21T00:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555456",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5faa8cb](https://github.com/sagemath/sagetrac-mirror/commit/5faa8cb70b1d864b97acea0c6333a7ab29a038de)** to **[9265416](https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76)**



---

archive/issue_comments_555457.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76\">9265416</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr></table>\n",
    "created_at": "2022-07-21T00:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555457",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76">9265416</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr></table>




---

archive/issue_comments_555458.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,12 @@\n Checking shared library file 'lib/libgivaro.dylib'\n $ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'\n Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'\n+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose e_antic'\n+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib'\n+ERROR [libsana|get_dependencies:137]: \n+/usr/local/opt/flint/lib/libflint-16.dylib not found:\n+  Needed by: /Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib\n+Error during installcheck of 'e_antic': Could not find all dependencies.\n ```\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n``````\n",
    "created_at": "2022-07-21T00:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555458",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,12 @@
 Checking shared library file 'lib/libgivaro.dylib'
 $ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose matplotlib $SAGE_VENV'
 Checking wheel file 'var/lib/sage/wheels/matplotlib-3.5.1-cp310-cp310-macosx_12_0_x86_64.whl'
+$ ./sage -sh -c 'python3 build/bin/sage-spkg-installcheck --verbose e_antic'
+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib'
+ERROR [libsana|get_dependencies:137]: 
+/usr/local/opt/flint/lib/libflint-16.dylib not found:
+  Needed by: /Users/mkoeppe/s/sage/sage-rebasing/local/lib/libeantic.0.dylib
+Error during installcheck of 'e_antic': Could not find all dependencies.
 ```
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
``````




---

archive/issue_comments_555459.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a18b205038bb194afacdb13da4812814cc92e413\">a18b205</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad92af4deca4217533384e095baaf130f4e704b0\">ad92af4</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941\">c4e3371</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr></table>\n",
    "created_at": "2022-07-21T01:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555459",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a18b205038bb194afacdb13da4812814cc92e413">a18b205</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad92af4deca4217533384e095baaf130f4e704b0">ad92af4</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941">c4e3371</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr></table>




---

archive/issue_comments_555460.json:
```json
{
    "body": "Changed commit from **[9265416](https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76)** to **[c4e3371](https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941)**",
    "created_at": "2022-07-21T01:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555460",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9265416](https://github.com/sagemath/sagetrac-mirror/commit/92654161d6d22b1f057c468a3939ea69b4322a76)** to **[c4e3371](https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941)**



---

archive/issue_comments_555461.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-07-21T01:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555461",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_555462.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n+We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n \n``````\n",
    "created_at": "2022-07-21T01:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555462",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd` on any shared libraries and uninstall them if they refer to nonexisting libraries.
+We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
 The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
 
``````




---

archive/issue_comments_555463.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n+\n+The new command `make list-broken-packages` does this.\n \n The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n \n``````\n",
    "created_at": "2022-07-21T01:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555463",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.
+
+The new command `make list-broken-packages` does this.
 
 The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
 
``````




---

archive/issue_comments_555464.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbdf33b5142cc911dcec3757809aea6e9c993e58\">dbdf33b</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3\">08388f7</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr></table>\n",
    "created_at": "2022-07-21T02:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555464",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbdf33b5142cc911dcec3757809aea6e9c993e58">dbdf33b</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3">08388f7</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr></table>




---

archive/issue_comments_555465.json:
```json
{
    "body": "Changed commit from **[c4e3371](https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941)** to **[08388f7](https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3)**",
    "created_at": "2022-07-21T02:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555465",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c4e3371](https://github.com/sagemath/sagetrac-mirror/commit/c4e33715dc092f8fcd6323f7066e3db8dcf8e941)** to **[08388f7](https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3)**



---

archive/issue_comments_555466.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,28 @@\n We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n \n-The new command `make list-broken-packages` does this.\n+The new command `make -j list-broken-packages` does this:\n+\n+```\n+$ make -j list-broken-packages\n+make --no-print-directory auditwheel_or_delocate-no-deps\n+sage-logger -p 'sage --pip install -r \"/Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt\"' '/Users/mkoeppe/s/sage/sage-rebasing/logs/pkgs/auditwheel_or_delocate.log'\n+[auditwheel_or_delocate] Ignoring auditwheel: markers 'sys_platform != \"darwin\"' don't match your environment\n+[auditwheel_or_delocate] Requirement already satisfied: delocate in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from -r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.10.2)\n+[auditwheel_or_delocate] Requirement already satisfied: wheel>=0.32.0 in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.37.1)\n+[auditwheel_or_delocate] Requirement already satisfied: typing-extensions in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (3.10.0.0)\n+make[2]: warning: -jN forced in submake: disabling jobserver mode.\n+# Checking /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/installed/bliss-0.73+debian-1+sage-2016-08-02.p0\n+...\n+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libumfpack.dylib'\n+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'\n+Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib\n+Uninstall broken packages by typing:\n+    make -k antic-clean e_antic-clean lcalc-clean ratpoints-clean normaliz-clean r-clean thebe-clean asttokens-clean backports_zoneinfo-clean executing-clean fastjsonschema-clean pure_eval-clean pytz_deprecation_shim-clean stack_data-clean tinycss2-clean tzdata-clean suitesparse-clean\n+\n+real\t0m6.671s\n+user\t0m33.285s\n+sys\t0m10.636s\n+```\n \n The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n \n``````\n",
    "created_at": "2022-07-21T02:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555466",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,28 @@
 We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.
 
-The new command `make list-broken-packages` does this.
+The new command `make -j list-broken-packages` does this:
+
+```
+$ make -j list-broken-packages
+make --no-print-directory auditwheel_or_delocate-no-deps
+sage-logger -p 'sage --pip install -r "/Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt"' '/Users/mkoeppe/s/sage/sage-rebasing/logs/pkgs/auditwheel_or_delocate.log'
+[auditwheel_or_delocate] Ignoring auditwheel: markers 'sys_platform != "darwin"' don't match your environment
+[auditwheel_or_delocate] Requirement already satisfied: delocate in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from -r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.10.2)
+[auditwheel_or_delocate] Requirement already satisfied: wheel>=0.32.0 in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (0.37.1)
+[auditwheel_or_delocate] Requirement already satisfied: typing-extensions in /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages (from delocate->-r /Users/mkoeppe/s/sage/sage-rebasing/build/pkgs/auditwheel_or_delocate/requirements.txt (line 1)) (3.10.0.0)
+make[2]: warning: -jN forced in submake: disabling jobserver mode.
+# Checking /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/installed/bliss-0.73+debian-1+sage-2016-08-02.p0
+...
+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/lib/libumfpack.dylib'
+Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'
+Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib
+Uninstall broken packages by typing:
+    make -k antic-clean e_antic-clean lcalc-clean ratpoints-clean normaliz-clean r-clean thebe-clean asttokens-clean backports_zoneinfo-clean executing-clean fastjsonschema-clean pure_eval-clean pytz_deprecation_shim-clean stack_data-clean tinycss2-clean tzdata-clean suitesparse-clean
+
+real	0m6.671s
+user	0m33.285s
+sys	0m10.636s
+```
 
 The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
 
``````




---

archive/issue_comments_555467.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReady for testing on macOS.",
    "created_at": "2022-07-21T02:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
Ready for testing on macOS.



---

archive/issue_comments_555468.json:
```json
{
    "body": "Changed commit from **[08388f7](https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3)** to **[f2dba63](https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097)**",
    "created_at": "2022-07-21T02:19:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555468",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[08388f7](https://github.com/sagemath/sagetrac-mirror/commit/08388f7e218fb2be22bc9f3c1ab8ab0313a3cde3)** to **[f2dba63](https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097)**



---

archive/issue_comments_555469.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097\">f2dba63</a></td><td><code>build/sage_bootstrap/uninstall.py: Do not refuse to uninstall packages that do not exist in the source tree</code></td></tr></table>\n",
    "created_at": "2022-07-21T02:19:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555469",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097">f2dba63</a></td><td><code>build/sage_bootstrap/uninstall.py: Do not refuse to uninstall packages that do not exist in the source tree</code></td></tr></table>




---

archive/issue_comments_555470.json:
```json
{
    "body": "Changed commit from **[f2dba63](https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097)** to **[b439429](https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795)**",
    "created_at": "2022-07-21T03:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f2dba63](https://github.com/sagemath/sagetrac-mirror/commit/f2dba639703f4e1bc27dc5d4c6c21813abd0a097)** to **[b439429](https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795)**



---

archive/issue_comments_555471.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2437fc4d013a6da181d51876975975d7bd7b616\">a2437fc</a></td><td><code>build/sage_bootstrap/uninstall.py: Do not override the stamp file location from environment variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795\">b439429</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr></table>\n",
    "created_at": "2022-07-21T03:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555471",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2437fc4d013a6da181d51876975975d7bd7b616">a2437fc</a></td><td><code>build/sage_bootstrap/uninstall.py: Do not override the stamp file location from environment variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795">b439429</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr></table>




---

archive/issue_comments_555472.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,7 +17,22 @@\n Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'\n Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib\n Uninstall broken packages by typing:\n-    make -k antic-clean e_antic-clean lcalc-clean ratpoints-clean normaliz-clean r-clean thebe-clean asttokens-clean backports_zoneinfo-clean executing-clean fastjsonschema-clean pure_eval-clean pytz_deprecation_shim-clean stack_data-clean tinycss2-clean tzdata-clean suitesparse-clean\n+\n+    ./sage --buildsh -c \"sage-spkg-uninstall antic \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall e_antic \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall lcalc \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall ratpoints \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall normaliz \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall r \";\n+    ./sage --buildsh -c \"sage-spkg-uninstall asttokens \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall backports_zoneinfo \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall executing \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall fastjsonschema \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall pytz_deprecation_shim \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall stack_data \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall tinycss2 \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall tzdata \\$SAGE_VENV\";\n+    ./sage --buildsh -c \"sage-spkg-uninstall suitesparse \";\n \n real\t0m6.671s\n user\t0m33.285s\n``````\n",
    "created_at": "2022-07-21T03:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555472",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,7 +17,22 @@
 Checking shared library file '/Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib'
 Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib
 Uninstall broken packages by typing:
-    make -k antic-clean e_antic-clean lcalc-clean ratpoints-clean normaliz-clean r-clean thebe-clean asttokens-clean backports_zoneinfo-clean executing-clean fastjsonschema-clean pure_eval-clean pytz_deprecation_shim-clean stack_data-clean tinycss2-clean tzdata-clean suitesparse-clean
+
+    ./sage --buildsh -c "sage-spkg-uninstall antic ";
+    ./sage --buildsh -c "sage-spkg-uninstall e_antic ";
+    ./sage --buildsh -c "sage-spkg-uninstall lcalc ";
+    ./sage --buildsh -c "sage-spkg-uninstall ratpoints ";
+    ./sage --buildsh -c "sage-spkg-uninstall normaliz ";
+    ./sage --buildsh -c "sage-spkg-uninstall r ";
+    ./sage --buildsh -c "sage-spkg-uninstall asttokens \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall backports_zoneinfo \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall executing \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall fastjsonschema \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall pytz_deprecation_shim \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall stack_data \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall tinycss2 \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall tzdata \$SAGE_VENV";
+    ./sage --buildsh -c "sage-spkg-uninstall suitesparse ";
 
 real	0m6.671s
 user	0m33.285s
``````




---

archive/issue_comments_555473.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd7312cca3f3aff434016be9d189842f3c51053a\">cd7312c</a></td><td><code>build/make/Makefile.in: New implicit targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32\">5c104aa</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr></table>\n",
    "created_at": "2022-07-21T03:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555473",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd7312cca3f3aff434016be9d189842f3c51053a">cd7312c</a></td><td><code>build/make/Makefile.in: New implicit targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32">5c104aa</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr></table>




---

archive/issue_comments_555474.json:
```json
{
    "body": "Changed commit from **[b439429](https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795)** to **[5c104aa](https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32)**",
    "created_at": "2022-07-21T03:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b439429](https://github.com/sagemath/sagetrac-mirror/commit/b4394290c965ff06d7f498fa9812591fcc80e795)** to **[5c104aa](https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32)**



---

archive/issue_comments_555475.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,21 +18,20 @@\n Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib\n Uninstall broken packages by typing:\n \n-    ./sage --buildsh -c \"sage-spkg-uninstall antic \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall e_antic \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall lcalc \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall ratpoints \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall normaliz \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall r \";\n-    ./sage --buildsh -c \"sage-spkg-uninstall asttokens \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall backports_zoneinfo \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall executing \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall fastjsonschema \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall pytz_deprecation_shim \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall stack_data \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall tinycss2 \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall tzdata \\$SAGE_VENV\";\n-    ./sage --buildsh -c \"sage-spkg-uninstall suitesparse \";\n+\n+    make antic-SAGE_LOCAL-uninstall;\n+    make e_antic-SAGE_LOCAL-uninstall;\n+    make lcalc-SAGE_LOCAL-uninstall;\n+    make ratpoints-SAGE_LOCAL-uninstall;\n+    make normaliz-SAGE_LOCAL-uninstall;\n+    make r-SAGE_LOCAL-uninstall;\n+    make backports_zoneinfo-SAGE_VENV-uninstall;\n+    make fastjsonschema-SAGE_VENV-uninstall;\n+    make pytz_deprecation_shim-SAGE_VENV-uninstall;\n+    make stack_data-SAGE_VENV-uninstall;\n+    make tinycss2-SAGE_VENV-uninstall;\n+    make tzdata-SAGE_VENV-uninstall;\n+    make suitesparse-SAGE_LOCAL-uninstall;\n \n real\t0m6.671s\n user\t0m33.285s\n``````\n",
    "created_at": "2022-07-21T03:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555475",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,21 +18,20 @@
 Error during installcheck of 'suitesparse': /Users/mkoeppe/s/sage/sage-rebasing/local/var/tmp/sage/build/suitesparse-5.10.1/src/lib/libsliplu.1.0.2.dylib
 Uninstall broken packages by typing:
 
-    ./sage --buildsh -c "sage-spkg-uninstall antic ";
-    ./sage --buildsh -c "sage-spkg-uninstall e_antic ";
-    ./sage --buildsh -c "sage-spkg-uninstall lcalc ";
-    ./sage --buildsh -c "sage-spkg-uninstall ratpoints ";
-    ./sage --buildsh -c "sage-spkg-uninstall normaliz ";
-    ./sage --buildsh -c "sage-spkg-uninstall r ";
-    ./sage --buildsh -c "sage-spkg-uninstall asttokens \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall backports_zoneinfo \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall executing \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall fastjsonschema \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall pytz_deprecation_shim \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall stack_data \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall tinycss2 \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall tzdata \$SAGE_VENV";
-    ./sage --buildsh -c "sage-spkg-uninstall suitesparse ";
+
+    make antic-SAGE_LOCAL-uninstall;
+    make e_antic-SAGE_LOCAL-uninstall;
+    make lcalc-SAGE_LOCAL-uninstall;
+    make ratpoints-SAGE_LOCAL-uninstall;
+    make normaliz-SAGE_LOCAL-uninstall;
+    make r-SAGE_LOCAL-uninstall;
+    make backports_zoneinfo-SAGE_VENV-uninstall;
+    make fastjsonschema-SAGE_VENV-uninstall;
+    make pytz_deprecation_shim-SAGE_VENV-uninstall;
+    make stack_data-SAGE_VENV-uninstall;
+    make tinycss2-SAGE_VENV-uninstall;
+    make tzdata-SAGE_VENV-uninstall;
+    make suitesparse-SAGE_LOCAL-uninstall;
 
 real	0m6.671s
 user	0m33.285s
``````




---

archive/issue_comments_555476.json:
```json
{
    "body": "Changed commit from **[5c104aa](https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32)** to **[1d95bbb](https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad)**",
    "created_at": "2022-07-21T03:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555476",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c104aa](https://github.com/sagemath/sagetrac-mirror/commit/5c104aab7a4747c1f8b1b5a49eddecfc73fdbf32)** to **[1d95bbb](https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad)**



---

archive/issue_comments_555477.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad\">1d95bbb</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr></table>\n",
    "created_at": "2022-07-21T03:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555477",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad">1d95bbb</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr></table>




---

archive/issue_comments_555478.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,9 +33,9 @@\n     make tzdata-SAGE_VENV-uninstall;\n     make suitesparse-SAGE_LOCAL-uninstall;\n \n-real\t0m6.671s\n-user\t0m33.285s\n-sys\t0m10.636s\n+real\t2m25.787s\n+user\t4m54.270s\n+sys\t4m0.796s\n ```\n \n The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):\n``````\n",
    "created_at": "2022-07-21T03:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555478",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,9 +33,9 @@
     make tzdata-SAGE_VENV-uninstall;
     make suitesparse-SAGE_LOCAL-uninstall;
 
-real	0m6.671s
-user	0m33.285s
-sys	0m10.636s
+real	2m25.787s
+user	4m54.270s
+sys	4m0.796s
 ```
 
 The core functionality is implemented by the new command `sage-spkg-installcheck` (implemented in sage_bootstrap):
``````




---

archive/issue_comments_555479.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n-We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.\n+When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken.\n \n-The new command `make -j list-broken-packages` does this:\n+To avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.\n+\n+The new command `make -j list-broken-packages` assists the user with this:\n \n ```\n $ make -j list-broken-packages\n@@ -54,6 +56,10 @@\n Error during installcheck of 'e_antic': Could not find all dependencies.\n ```\n \n+It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries. \n+\n+\n+\n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/\n``````\n",
    "created_at": "2022-07-21T04:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555479",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
-We can inspect the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` by running `ldd`/`otool` on any shared libraries and uninstall them if they refer to nonexisting libraries.
+When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken.
 
-The new command `make -j list-broken-packages` does this:
+To avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.
+
+The new command `make -j list-broken-packages` assists the user with this:
 
 ```
 $ make -j list-broken-packages
@@ -54,6 +56,10 @@
 Error during installcheck of 'e_antic': Could not find all dependencies.
 ```
 
+It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries. 
+
+
+
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
 On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/
``````




---

archive/issue_events_434936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T04:33:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434936"
}
```



---

archive/issue_comments_555480.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -62,7 +62,7 @@\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n-On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/\n+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ -- follow-up ticket.\n \n (Both packages are also used by cibuildwheel)\n \n``````\n",
    "created_at": "2022-07-21T04:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555480",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -62,7 +62,7 @@
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
-On Linux, instead of using `ldd` directly, we use `auditwheel show` from https://pypi.org/project/auditwheel/
+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ -- follow-up ticket.
 
 (Both packages are also used by cibuildwheel)
 
``````




---

archive/issue_comments_555481.json:
```json
{
    "body": "Changed commit from **[1d95bbb](https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad)** to **[37eaa92](https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe)**",
    "created_at": "2022-07-21T06:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555481",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1d95bbb](https://github.com/sagemath/sagetrac-mirror/commit/1d95bbb039683c3f2068006e59401147d0d3b9ad)** to **[37eaa92](https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe)**



---

archive/issue_comments_555482.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe\">37eaa92</a></td><td><code>trac 29097: change \"make SPKG-clean\" to \"make SPKG-uninstall\".</code></td></tr></table>\n",
    "created_at": "2022-07-21T06:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555482",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe">37eaa92</a></td><td><code>trac 29097: change "make SPKG-clean" to "make SPKG-uninstall".</code></td></tr></table>




---

archive/issue_comments_555483.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nCherry-picked / updated the commit from #29097.",
    "created_at": "2022-07-21T06:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'>Comment 29:</a>
Cherry-picked / updated the commit from #29097.



---

archive/issue_comments_555484.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**",
    "created_at": "2022-07-21T06:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555484",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**



---

archive/issue_comments_555485.json:
```json
{
    "body": "Dependencies: **#29097**",
    "created_at": "2022-07-21T06:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555485",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29097**



---

archive/issue_comments_555486.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, John Palmieri** to **Matthias Koeppe**",
    "created_at": "2022-07-21T06:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555486",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe, John Palmieri** to **Matthias Koeppe**



---

archive/issue_comments_555487.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1458ee457a35f70ace58cc2a0d6aedb1a4fd3eec\">1458ee4</a></td><td><code>build/pkgs/auditwheel_or_delocate: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d1c6a4e6076bfee05eeeef3bc0d423287788ab1\">8d1c6a4</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/320a29034ceca3f2335ce6bb34fb6fe4cde2a096\">320a290</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f19ff62141b04bcda23f155eb85ffe6e59bea44e\">f19ff62</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53a98fda457c3d41c1fae67ea96d56c516c1444e\">53a98fd</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52bd73c96aeae24eb1d0a4722f0e0361aabd83fa\">52bd73c</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bca243e24e41333aa01239d55dafcd3d5f661d1\">3bca243</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e00a06428f5c0f6a0cde47ed433d333ac59c46a2\">e00a064</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/980bbdb9bf66dc19f004a5b5d3bde8a06648c7ce\">980bbdb</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877\">1c24771</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr></table>\n",
    "created_at": "2022-07-21T06:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555487",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>Comment 31:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1458ee457a35f70ace58cc2a0d6aedb1a4fd3eec">1458ee4</a></td><td><code>build/pkgs/auditwheel_or_delocate: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d1c6a4e6076bfee05eeeef3bc0d423287788ab1">8d1c6a4</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/320a29034ceca3f2335ce6bb34fb6fe4cde2a096">320a290</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f19ff62141b04bcda23f155eb85ffe6e59bea44e">f19ff62</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53a98fda457c3d41c1fae67ea96d56c516c1444e">53a98fd</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52bd73c96aeae24eb1d0a4722f0e0361aabd83fa">52bd73c</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bca243e24e41333aa01239d55dafcd3d5f661d1">3bca243</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e00a06428f5c0f6a0cde47ed433d333ac59c46a2">e00a064</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/980bbdb9bf66dc19f004a5b5d3bde8a06648c7ce">980bbdb</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877">1c24771</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr></table>




---

archive/issue_comments_555488.json:
```json
{
    "body": "Changed commit from **[37eaa92](https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe)** to **[1c24771](https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877)**",
    "created_at": "2022-07-21T06:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37eaa92](https://github.com/sagemath/sagetrac-mirror/commit/37eaa92eb303529f8896333c5a0e1209afd777fe)** to **[1c24771](https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877)**



---

archive/issue_comments_555489.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -62,7 +62,7 @@\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ -- follow-up ticket.\n+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) -- follow-up ticket.\n \n (Both packages are also used by cibuildwheel)\n \n``````\n",
    "created_at": "2022-07-21T08:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555489",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -62,7 +62,7 @@
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ -- follow-up ticket.
+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) -- follow-up ticket.
 
 (Both packages are also used by cibuildwheel)
 
``````




---

archive/issue_comments_555490.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken.\n+When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken. This is a common problem, reported for example in https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ\n \n To avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.\n \n``````\n",
    "created_at": "2022-07-21T16:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555490",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken.
+When system packages are upgraded, shared libraries that a Sage installation links to can disappear, rendering the Sage installation broken. This is a common problem, reported for example in https://groups.google.com/g/sage-devel/c/Iz8ZsmQM3Pg/m/CPl9CbHmBgAJ
 
 To avoid a full rebuild (`make distclean && make build`), we can try to find the specific broken packages.
 
``````




---

archive/issue_comments_555491.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nThis also finds a strange bug in our `suitesparse` installation on macOS:\nThe installation record (`local/var/lib/sage/installed/suitesparse-5.10.1`) contains paths in the temporary build directory (`var/tmp/sage/build/suitesparse-5.10.1`).\nI've opened #34206 for this",
    "created_at": "2022-07-21T16:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555491",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'>Comment 34:</a>
This also finds a strange bug in our `suitesparse` installation on macOS:
The installation record (`local/var/lib/sage/installed/suitesparse-5.10.1`) contains paths in the temporary build directory (`var/tmp/sage/build/suitesparse-5.10.1`).
I've opened #34206 for this



---

archive/issue_comments_555492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -66,4 +66,4 @@\n \n (Both packages are also used by cibuildwheel)\n \n-\n+See also: #34205 Optionally run auditwheel/delocate on wheels before installing them\n``````\n",
    "created_at": "2022-07-21T18:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555492",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -66,4 +66,4 @@
 
 (Both packages are also used by cibuildwheel)
 
-
+See also: #34205 Optionally run auditwheel/delocate on wheels before installing them
``````




---

archive/issue_comments_555493.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24fb9ff3fcff8a5afe0ddd0c937c5dfab5d9c960\">24fb9ff</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a4d2ed7bd5522e19473c36569556b33b2371ce5\">3a4d2ed</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e36a56bb041caa0fd927f30bddbf8e3c67429f70\">e36a56b</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bebc78293e6bf93b30831eea5773087b7901d321\">bebc782</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0924cf18b410d36ae65a969b85079f83edded3b2\">0924cf1</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5473ecc1a4c0c83374f3a46e682341545392902\">d5473ec</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75b1d9658ed3cb4c5706a6bc80981e9bc90a5086\">75b1d96</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9418c08fc27f8eee2dcef5f5632c926f1e2a8b8c\">9418c08</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51d2d56098cee1dbf54361fab4e21291058d5f51\">51d2d56</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c\">9d449bd</a></td><td><code>build/sage_bootstrap/installclean.py: Clarify that the sage_local argument is SAGE_LOCAL or SAGE_VENV</code></td></tr></table>\n",
    "created_at": "2022-07-21T23:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555493",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'>Comment 36:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24fb9ff3fcff8a5afe0ddd0c937c5dfab5d9c960">24fb9ff</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a4d2ed7bd5522e19473c36569556b33b2371ce5">3a4d2ed</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e36a56bb041caa0fd927f30bddbf8e3c67429f70">e36a56b</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bebc78293e6bf93b30831eea5773087b7901d321">bebc782</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0924cf18b410d36ae65a969b85079f83edded3b2">0924cf1</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5473ecc1a4c0c83374f3a46e682341545392902">d5473ec</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75b1d9658ed3cb4c5706a6bc80981e9bc90a5086">75b1d96</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9418c08fc27f8eee2dcef5f5632c926f1e2a8b8c">9418c08</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51d2d56098cee1dbf54361fab4e21291058d5f51">51d2d56</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c">9d449bd</a></td><td><code>build/sage_bootstrap/installclean.py: Clarify that the sage_local argument is SAGE_LOCAL or SAGE_VENV</code></td></tr></table>




---

archive/issue_comments_555494.json:
```json
{
    "body": "Changed commit from **[1c24771](https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877)** to **[9d449bd](https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c)**",
    "created_at": "2022-07-21T23:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555494",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c24771](https://github.com/sagemath/sagetrac-mirror/commit/1c24771c2cfa1d80c1571b5cfbc901c698fcb877)** to **[9d449bd](https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c)**



---

archive/issue_comments_555495.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00ec17bfe4dab2e710f942c00e8a706de7f57d57\">00ec17b</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2033b96d9d92258c74add5acb75f1007a319feb\">b2033b9</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb4778041ca6529078a0455a1c575a2bf4cdb7b1\">eb47780</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30d9b5ff2523d19340db166e86faf3b48a6863a9\">30d9b5f</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6679a7ccd91afec50ba25feb29c41b8a673d3ec\">e6679a7</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d9448863b0cdfc5847d0aeb8ae675ccebc00b95\">3d94488</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6881409206960ce37a2e1e29450a9c29fe61c1ec\">6881409</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5a7d05fd49da94e179b5b9c7e8ed00ff7c903a1\">b5a7d05</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a73497b7a8d5148627643589921ca2549b4ea9b\">6a73497</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22\">400eaee</a></td><td><code>build/sage_bootstrap/installclean.py: Clarify that the sage_local argument is SAGE_LOCAL or SAGE_VENV</code></td></tr></table>\n",
    "created_at": "2022-07-21T23:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555495",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>Comment 37:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00ec17bfe4dab2e710f942c00e8a706de7f57d57">00ec17b</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for macOS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2033b96d9d92258c74add5acb75f1007a319feb">b2033b9</a></td><td><code>build/sage_bootstrap/installcheck.py: Do not warn if there are no files to check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb4778041ca6529078a0455a1c575a2bf4cdb7b1">eb47780</a></td><td><code>build/sage_bootstrap/installcheck.py: Skip pure Python wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30d9b5ff2523d19340db166e86faf3b48a6863a9">30d9b5f</a></td><td><code>build/make/Makefile.in (list-broken-packages): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6679a7ccd91afec50ba25feb29c41b8a673d3ec">e6679a7</a></td><td><code>build/sage_bootstrap/installcheck.py: Only warn when delocate is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d9448863b0cdfc5847d0aeb8ae675ccebc00b95">3d94488</a></td><td><code>build/make/Makefile.in (list-broken-packages): Parallelize it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6881409206960ce37a2e1e29450a9c29fe61c1ec">6881409</a></td><td><code>build/make/Makefile.in (list-broken-packages): Show uninstallation commands that actually work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5a7d05fd49da94e179b5b9c7e8ed00ff7c903a1">b5a7d05</a></td><td><code>build/make/Makefile.in (list-broken-packages): Use targets %-SAGE_LOCAL-uninstall, %-SAGE_VENV-uninstall when possible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a73497b7a8d5148627643589921ca2549b4ea9b">6a73497</a></td><td><code>build/make/Makefile.in (list-broken-packages): Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22">400eaee</a></td><td><code>build/sage_bootstrap/installclean.py: Clarify that the sage_local argument is SAGE_LOCAL or SAGE_VENV</code></td></tr></table>




---

archive/issue_comments_555496.json:
```json
{
    "body": "Changed commit from **[9d449bd](https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c)** to **[400eaee](https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22)**",
    "created_at": "2022-07-21T23:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555496",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9d449bd](https://github.com/sagemath/sagetrac-mirror/commit/9d449bdf4237c0dfa4173515b0a164317fb0eb4c)** to **[400eaee](https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22)**



---

archive/issue_comments_555497.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -56,7 +56,7 @@\n Error during installcheck of 'e_antic': Could not find all dependencies.\n ```\n \n-It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries. \n+It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries and platform wheels listed there. \n \n \n \n``````\n",
    "created_at": "2022-07-21T23:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555497",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -56,7 +56,7 @@
 Error during installcheck of 'e_antic': Could not find all dependencies.
 ```
 
-It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries. 
+It inspects the installation records in `$SAGE_LOCAL/var/lib/sage/installed/` and all shared libraries and platform wheels listed there. 
 
 
 
``````




---

archive/issue_comments_555498.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -62,7 +62,7 @@\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) -- follow-up ticket.\n+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) or `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py) -- follow-up ticket.\n \n (Both packages are also used by cibuildwheel)\n \n``````\n",
    "created_at": "2022-07-23T19:33:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555498",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -62,7 +62,7 @@
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) -- follow-up ticket.
+On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) or `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py) -- follow-up ticket.
 
 (Both packages are also used by cibuildwheel)
 
``````




---

archive/issue_comments_555499.json:
```json
{
    "body": "Changed commit from **[400eaee](https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22)** to **[ef9226b](https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516)**",
    "created_at": "2022-07-23T21:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555499",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[400eaee](https://github.com/sagemath/sagetrac-mirror/commit/400eaee762e33cdc28c46ef7587d6f889c5cda22)** to **[ef9226b](https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516)**



---

archive/issue_comments_555500.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516\">ef9226b</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for Linux</code></td></tr></table>\n",
    "created_at": "2022-07-23T21:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555500",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516">ef9226b</a></td><td><code>build/sage_bootstrap/installcheck.py: Implement for Linux</code></td></tr></table>




---

archive/issue_comments_555501.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -62,7 +62,7 @@\n \n On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/\n \n-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) or `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py) -- follow-up ticket.\n+On Linux, instead of using `ldd` directly, we use `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py)\n \n (Both packages are also used by cibuildwheel)\n \n``````\n",
    "created_at": "2022-07-23T21:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555501",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -62,7 +62,7 @@
 
 On macOS, instead of using `otool` directly, we use `delocate-listdeps` from https://pypi.org/project/delocate/
 
-On Linux, instead of using `ldd` directly, we can use `auditwheel show` from https://pypi.org/project/auditwheel/ (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/main_show.py) or `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py) -- follow-up ticket.
+On Linux, instead of using `ldd` directly, we use `auditwheel.lddtree.lddtree` (https://github.com/pypa/auditwheel/blob/main/src/auditwheel/lddtree.py)
 
 (Both packages are also used by cibuildwheel)
 
``````




---

archive/issue_comments_555502.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nHi Nils, I developed this ticket as a solution for last time that you complained about people breaking your build. Care to review?",
    "created_at": "2022-08-22T23:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555502",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'>Comment 42:</a>
Hi Nils, I developed this ticket as a solution for last time that you complained about people breaking your build. Care to review?



---

archive/issue_comments_555503.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nCan you explain what \"package\" means in `list-broken-packages`? I ran the command and saw\n\n```\nusage: sage-spkg-installcheck [-h] [-v] spkg [sage_local]\nsage-spkg-installcheck: error: argument spkg: 'stack_data' is not a known spkg\n```\nfollowed by the suggestion to run `make stack_data-SAGE_VENV-uninstall`. Is `stack_data` actually broken, or is the \"usage\" message indication of something else going wrong? And what is `stack_data`, since it's not an spkg?",
    "created_at": "2022-09-12T22:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555503",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:44'>Comment 44:</a>
Can you explain what "package" means in `list-broken-packages`? I ran the command and saw

```
usage: sage-spkg-installcheck [-h] [-v] spkg [sage_local]
sage-spkg-installcheck: error: argument spkg: 'stack_data' is not a known spkg
```
followed by the suggestion to run `make stack_data-SAGE_VENV-uninstall`. Is `stack_data` actually broken, or is the "usage" message indication of something else going wrong? And what is `stack_data`, since it's not an spkg?



---

archive/issue_comments_555504.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nReplying to [John Palmieri](#comment%3A44):\n> Can you explain what \"package\" means in `list-broken-packages`? \n\nAn SPKG",
    "created_at": "2022-09-12T22:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555504",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'>Comment 45:</a>
Replying to [John Palmieri](#comment%3A44):
> Can you explain what "package" means in `list-broken-packages`? 

An SPKG



---

archive/issue_comments_555505.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nReplying to [John Palmieri](#comment%3A44):\n>  Is `stack_data` actually broken, or is the \"usage\" message indication of something else going wrong? And what is `stack_data`, since it's not an spkg?\n\nIt's broken as follows: You have an installation of it (from some other branch), but it's not (per what is currently in `build/pkgs`) an SPKG.",
    "created_at": "2022-09-12T23:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555505",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'>Comment 46:</a>
Replying to [John Palmieri](#comment%3A44):
>  Is `stack_data` actually broken, or is the "usage" message indication of something else going wrong? And what is `stack_data`, since it's not an spkg?

It's broken as follows: You have an installation of it (from some other branch), but it's not (per what is currently in `build/pkgs`) an SPKG.



---

archive/issue_comments_555506.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nIn 9.7.rc1, `stack_data` of course is a package, so after merging 9.7.rc1, this will no longer be reported as \"broken\".",
    "created_at": "2022-09-12T23:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555506",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'>Comment 47:</a>
In 9.7.rc1, `stack_data` of course is a package, so after merging 9.7.rc1, this will no longer be reported as "broken".



---

archive/issue_comments_555507.json:
```json
{
    "body": "Changed commit from **[ef9226b](https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516)** to **[0bbba44](https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3)**",
    "created_at": "2022-09-12T23:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555507",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ef9226b](https://github.com/sagemath/sagetrac-mirror/commit/ef9226bc1717bc579bdeddfb84f77c158a6ce516)** to **[0bbba44](https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3)**



---

archive/issue_comments_555508.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3\">0bbba44</a></td><td><code>Merge tag '9.7.rc1' into t/34203/find_and_uninstall_broken_installed_spkgs_and_wheels</code></td></tr></table>\n",
    "created_at": "2022-09-12T23:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555508",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3">0bbba44</a></td><td><code>Merge tag '9.7.rc1' into t/34203/find_and_uninstall_broken_installed_spkgs_and_wheels</code></td></tr></table>




---

archive/issue_comments_555509.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nAnd here's that merge commit.",
    "created_at": "2022-09-12T23:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555509",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'>Comment 49:</a>
And here's that merge commit.



---

archive/issue_comments_555510.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1\">9a03d7f</a></td><td><code>build/sage_bootstrap/installcheck.py: Make error message more specific</code></td></tr></table>\n",
    "created_at": "2022-09-13T00:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555510",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'>Comment 50:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1">9a03d7f</a></td><td><code>build/sage_bootstrap/installcheck.py: Make error message more specific</code></td></tr></table>




---

archive/issue_comments_555511.json:
```json
{
    "body": "Changed commit from **[0bbba44](https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3)** to **[9a03d7f](https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1)**",
    "created_at": "2022-09-13T00:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555511",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bbba44](https://github.com/sagemath/sagetrac-mirror/commit/0bbba440e3342d12e6b705011ea27874e7b0e9a3)** to **[9a03d7f](https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1)**



---

archive/issue_comments_555512.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nShould this have a nonzero return code if some packages are broken?",
    "created_at": "2022-09-14T21:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555512",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:51'>Comment 51:</a>
Should this have a nonzero return code if some packages are broken?



---

archive/issue_comments_555513.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nFrom its name `list-broken-packages`, I tend to say that it should not indicate a failure like that",
    "created_at": "2022-09-14T21:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555513",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'>Comment 52:</a>
From its name `list-broken-packages`, I tend to say that it should not indicate a failure like that



---

archive/issue_comments_555514.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nI think I agree but I wanted to ask.",
    "created_at": "2022-09-14T21:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555514",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:53'>Comment 53:</a>
I think I agree but I wanted to ask.



---

archive/issue_comments_555515.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nIt is possible that some could want to do `make -j list-broken-packages && do something else`, but I don't see a concrete example.",
    "created_at": "2022-09-14T21:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555515",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:54'>Comment 54:</a>
It is possible that some could want to do `make -j list-broken-packages && do something else`, but I don't see a concrete example.



---

archive/issue_comments_555516.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nYes, I thought about this, but I'd say that this whole thing is a strictly manual operation, which doesn't lend itself to scripting.",
    "created_at": "2022-09-14T21:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555516",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'>Comment 55:</a>
Yes, I thought about this, but I'd say that this whole thing is a strictly manual operation, which doesn't lend itself to scripting.



---

archive/issue_comments_555517.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nFor the new package `auditwheel_or_delocate`, it seems that potentially both are used on Linux, only `delocate` on OS X. If that's right, then the `SPKG.rst` should be modified. \n\nInstalling `auditwheel` via pip also installs `pyelftools`, and `patchelf` is listed as a dependency on the PyPI page. Do we need to create a new package `pyelftools`, too? Is `patchelf` really required, or is it only necessary if one is trying to fix files, not just detect whether they're broken?",
    "created_at": "2022-09-14T21:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555517",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:56'>Comment 56:</a>
For the new package `auditwheel_or_delocate`, it seems that potentially both are used on Linux, only `delocate` on OS X. If that's right, then the `SPKG.rst` should be modified. 

Installing `auditwheel` via pip also installs `pyelftools`, and `patchelf` is listed as a dependency on the PyPI page. Do we need to create a new package `pyelftools`, too? Is `patchelf` really required, or is it only necessary if one is trying to fix files, not just detect whether they're broken?



---

archive/issue_comments_555518.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nThe comment \"and delete the rest\" does not seem to be accurate (and I think it's fine not to delete the old stamp files here).",
    "created_at": "2022-09-14T22:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555518",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:57'>Comment 57:</a>
The comment "and delete the rest" does not seem to be accurate (and I think it's fine not to delete the old stamp files here).



---

archive/issue_comments_555519.json:
```json
{
    "body": "Changed commit from **[9a03d7f](https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1)** to **[6ceb44e](https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c)**",
    "created_at": "2022-09-14T22:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9a03d7f](https://github.com/sagemath/sagetrac-mirror/commit/9a03d7fe7beb1bae71415938f7cb3ef9417c9fb1)** to **[6ceb44e](https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c)**



---

archive/issue_comments_555520.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c\">6ceb44e</a></td><td><code>build/pkgs/auditwheel_or_delocate/SPKG.rst: Explain that we use delocate also on Linux</code></td></tr></table>\n",
    "created_at": "2022-09-14T22:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555520",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:58'>Comment 58:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c">6ceb44e</a></td><td><code>build/pkgs/auditwheel_or_delocate/SPKG.rst: Explain that we use delocate also on Linux</code></td></tr></table>




---

archive/issue_comments_555521.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nReplying to [John Palmieri](#comment%3A56):\n> Installing `auditwheel` via pip also installs `pyelftools`, and `patchelf` is listed as a dependency on the PyPI page. Do we need to create a new package `pyelftools`, too?\n\nNot needed - that's what makes optional \"pip\" packages so convenient.\n\n> Is `patchelf` really required, or is it only necessary if one is trying to fix files, not just detect whether they're broken?\n\nRight, it's only needed for repairing wheels. But it's best not try to circumvent the declared dependencies. \n\nThe scipy upgrade (#34081) will bring a patchelf, by the way.",
    "created_at": "2022-09-14T22:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'>Comment 59:</a>
Replying to [John Palmieri](#comment%3A56):
> Installing `auditwheel` via pip also installs `pyelftools`, and `patchelf` is listed as a dependency on the PyPI page. Do we need to create a new package `pyelftools`, too?

Not needed - that's what makes optional "pip" packages so convenient.

> Is `patchelf` really required, or is it only necessary if one is trying to fix files, not just detect whether they're broken?

Right, it's only needed for repairing wheels. But it's best not try to circumvent the declared dependencies. 

The scipy upgrade (#34081) will bring a patchelf, by the way.



---

archive/issue_comments_555522.json:
```json
{
    "body": "Changed commit from **[6ceb44e](https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c)** to **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**",
    "created_at": "2022-09-14T22:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555522",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6ceb44e](https://github.com/sagemath/sagetrac-mirror/commit/6ceb44edbd932b7c772d3844c74103e2e3d6732c)** to **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**



---

archive/issue_comments_555523.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1\">3c70a38</a></td><td><code>build/sage_bootstrap/installcheck.py: Update comment on stamp files</code></td></tr></table>\n",
    "created_at": "2022-09-14T22:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555523",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:60'>Comment 60:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1">3c70a38</a></td><td><code>build/sage_bootstrap/installcheck.py: Update comment on stamp files</code></td></tr></table>




---

archive/issue_events_434937.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-14T22:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434937"
}
```



---

archive/issue_events_434938.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-14T22:30:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434938"
}
```



---

archive/issue_comments_555524.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nGreat, I think this is ready to go now.",
    "created_at": "2022-09-14T22:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555524",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:61'>Comment 61:</a>
Great, I think this is ready to go now.



---

archive/issue_comments_555525.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2022-09-14T22:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555525",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_555526.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nThank you!",
    "created_at": "2022-09-14T22:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555526",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'>Comment 62:</a>
Thank you!



---

archive/issue_events_434939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434939"
}
```



---

archive/issue_events_434940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434940"
}
```



---

archive/issue_events_434941.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-20T20:22:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434941"
}
```



---

archive/issue_events_434942.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "527891674e868304c852914a28a45bd6ca075dc8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-09-20T20:22:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34203#event-434942"
}
```



---

archive/issue_comments_555527.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels)** to **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**",
    "created_at": "2022-09-20T20:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34203",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34203#issuecomment-555527",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/find_and_uninstall_broken_installed_spkgs_and_wheels)** to **[3c70a38](https://github.com/sagemath/sagetrac-mirror/commit/3c70a38483a15327118ccfcaeabf154e5d9f2af1)**
