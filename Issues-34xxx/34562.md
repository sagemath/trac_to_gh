# Issue 34562: refactor multiple zeta values

archive/issues_034325.json:
```json
{
    "body": "This ticket mainly aims to separate the auxiliary F-algebra in another file.\n\nThis file implements a better custom-made F-algebra, with additional useful methods.\n\n\n\n**CC:**  @videlec @tscrim\n\n**Branch/Commit:** [8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/34562\n\n",
    "closed_at": "2022-09-27T22:27:54Z",
    "created_at": "2022-09-20T09:42:46Z",
    "labels": [
        "component: number theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "refactor multiple zeta values",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34562",
    "user": "https://github.com/fchapoton"
}
```
This ticket mainly aims to separate the auxiliary F-algebra in another file.

This file implements a better custom-made F-algebra, with additional useful methods.



**CC:**  @videlec @tscrim

**Branch/Commit:** [8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)

**Reviewer:** Travis Scrimshaw

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/34562





---

archive/issue_events_311725.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:43:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34562#event-311725"
}
```



---

archive/issue_comments_562471.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869\">f8a5eea</a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>\n",
    "created_at": "2022-09-20T09:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562471",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869">f8a5eea</a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>




---

archive/issue_comments_562472.json:
```json
{
    "body": "**Commit:** [f8a5eea2cf1d80bc00e442a824498a7c77468869](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)",
    "created_at": "2022-09-20T09:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562472",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [f8a5eea2cf1d80bc00e442a824498a7c77468869](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)



---

archive/issue_comments_562473.json:
```json
{
    "body": "**Branch:** [u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)",
    "created_at": "2022-09-20T09:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562473",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)



---

archive/issue_comments_562474.json:
```json
{
    "body": "<a id='comment:2'></a>\nSome quick comments about the `F_algebra`:\n\n- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.",
    "created_at": "2022-09-20T10:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562474",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Some quick comments about the `F_algebra`:

- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.
- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.
- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.
- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).
- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.
- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.



---

archive/issue_comments_562475.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34\">3b06406</a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>\n",
    "created_at": "2022-09-20T11:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34">3b06406</a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>




---

archive/issue_comments_562476.json:
```json
{
    "body": "**Changing commit** from \"[f8a5eea2cf1d80bc00e442a824498a7c77468869](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)\" to \"[3b06406df5cf16582b125245f5adc03d221f9d34](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)\".",
    "created_at": "2022-09-20T11:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f8a5eea2cf1d80bc00e442a824498a7c77468869](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)" to "[3b06406df5cf16582b125245f5adc03d221f9d34](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)".



---

archive/issue_comments_562477.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4\">c447fc2</a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b\">c7b3fee</a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4">c447fc2</a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b">c7b3fee</a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>




---

archive/issue_comments_562478.json:
```json
{
    "body": "**Changing commit** from \"[3b06406df5cf16582b125245f5adc03d221f9d34](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)\" to \"[c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)\".",
    "created_at": "2022-09-21T07:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3b06406df5cf16582b125245f5adc03d221f9d34](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)" to "[c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)".



---

archive/issue_comments_562479.json:
```json
{
    "body": "<a id='comment:5'></a>\nHello,\n\nthanks a lot for the suggestions !\n\n> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n\n\nok, done by removing the wrong alias that I had added.\n\n> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n\n\nwell, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\n> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n\n\nI substituted that for NN and it works fine.\n\n> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n\n\nI would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\n> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n\n\nNot sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\n> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n\n\nI have not yet checked that last suggestion.",
    "created_at": "2022-09-21T07:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562479",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
Hello,

thanks a lot for the suggestions !

> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.


ok, done by removing the wrong alias that I had added.

> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.


well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input

> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.


I substituted that for NN and it works fine.

> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).


I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..

> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.


Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.

> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.


I have not yet checked that last suggestion.



---

archive/issue_comments_562480.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3\">0a56256</a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3">0a56256</a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>




---

archive/issue_comments_562481.json:
```json
{
    "body": "**Changing commit** from \"[c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)\" to \"[0a56256f45417f9047f05d14926c2dfc3e22b8b3](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)\".",
    "created_at": "2022-09-21T07:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)" to "[0a56256f45417f9047f05d14926c2dfc3e22b8b3](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)".



---

archive/issue_comments_562482.json:
```json
{
    "body": "**Changing commit** from \"[0a56256f45417f9047f05d14926c2dfc3e22b8b3](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)\" to \"[6f110595865af941c7b1afeba01ff0f536c1b556](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)\".",
    "created_at": "2022-09-21T07:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0a56256f45417f9047f05d14926c2dfc3e22b8b3](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)" to "[6f110595865af941c7b1afeba01ff0f536c1b556](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)".



---

archive/issue_comments_562483.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556\">6f11059</a></td><td><code>using sum_of_monomials</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556">6f11059</a></td><td><code>using sum_of_monomials</code></td></tr></table>




---

archive/issue_comments_562484.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [Fr\u00e9d\u00e9ric Chapoton](#comment%3A5):\n> thanks a lot for the suggestions !\n\n\nThank you for all your work on Sage.\n\n> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n \n> \n> well, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\n\nI see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?\n\n> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n \n> \n> I would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\n\nSubsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.\n\nAlso, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.\n\n> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n \n> \n> Not sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\n\nIf speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.\n\nPerhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like\n\n```python\n    def shuffle(t1, t2):\n        n1 = len(t1)\n        n2 = len(t2)\n        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter\n            it1 = iter(t1)\n            it2 = iter(t2)\n            yield tuple([next(it1) if v else next(it2) for v in iv])\n```\n\n> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n \n> \n> I have not yet checked that last suggestion.\n\n\nYour changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.",
    "created_at": "2022-09-21T09:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562484",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Replying to [Frédéric Chapoton](#comment%3A5):
> thanks a lot for the suggestions !


Thank you for all your work on Sage.

> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.
 
> 
> well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input


I see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?

> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).
 
> 
> I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..


Subsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.

Also, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.

> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.
 
> 
> Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.


If speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.

Perhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like

```python
    def shuffle(t1, t2):
        n1 = len(t1)
        n2 = len(t2)
        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter
            it1 = iter(t1)
            it2 = iter(t2)
            yield tuple([next(it1) if v else next(it2) for v in iv])
```

> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.
 
> 
> I have not yet checked that last suggestion.


Your changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.



---

archive/issue_comments_562485.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0\">d5ee67d</a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>\n",
    "created_at": "2022-09-21T11:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0">d5ee67d</a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>




---

archive/issue_comments_562486.json:
```json
{
    "body": "**Changing commit** from \"[6f110595865af941c7b1afeba01ff0f536c1b556](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)\" to \"[d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)\".",
    "created_at": "2022-09-21T11:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6f110595865af941c7b1afeba01ff0f536c1b556](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)" to "[d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)".



---

archive/issue_comments_562487.json:
```json
{
    "body": "**Changing commit** from \"[d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)\" to \"[5df08cb7dd7bffd732d6143a7d38244c30946e88](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)\".",
    "created_at": "2022-09-21T13:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)" to "[5df08cb7dd7bffd732d6143a7d38244c30946e88](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)".



---

archive/issue_comments_562488.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f\">7d395b5</a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88\">5df08cb</a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-21T13:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f">7d395b5</a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88">5df08cb</a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>




---

archive/issue_comments_562489.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da\">4bdced9</a></td><td><code>small detail in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da">4bdced9</a></td><td><code>small detail in MZV</code></td></tr></table>




---

archive/issue_comments_562490.json:
```json
{
    "body": "**Changing commit** from \"[5df08cb7dd7bffd732d6143a7d38244c30946e88](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)\" to \"[4bdced9c9f14129d69bd409db0660987d17221da](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)\".",
    "created_at": "2022-09-22T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5df08cb7dd7bffd732d6143a7d38244c30946e88](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)" to "[4bdced9c9f14129d69bd409db0660987d17221da](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)".



---

archive/issue_comments_562491.json:
```json
{
    "body": "**Changing commit** from \"[4bdced9c9f14129d69bd409db0660987d17221da](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)\" to \"[7661288224be017f92be37698032eb89fccb0622](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)\".",
    "created_at": "2022-09-22T12:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4bdced9c9f14129d69bd409db0660987d17221da](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)" to "[7661288224be017f92be37698032eb89fccb0622](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)".



---

archive/issue_comments_562492.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622\">7661288</a></td><td><code>a few more details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622">7661288</a></td><td><code>a few more details in MZV</code></td></tr></table>




---

archive/issue_comments_562493.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8\">63695d7</a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8">63695d7</a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>




---

archive/issue_comments_562494.json:
```json
{
    "body": "**Changing commit** from \"[7661288224be017f92be37698032eb89fccb0622](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)\" to \"[63695d79d12e7822f0539968fcac1ecb87f398a8](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)\".",
    "created_at": "2022-09-22T12:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7661288224be017f92be37698032eb89fccb0622](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)" to "[63695d79d12e7822f0539968fcac1ecb87f398a8](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)".



---

archive/issue_comments_562495.json:
```json
{
    "body": "<a id='comment:14'></a>\nI guess it is now ready for review again.",
    "created_at": "2022-09-22T18:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562495",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
I guess it is now ready for review again.



---

archive/issue_comments_562496.json:
```json
{
    "body": "<a id='comment:15'></a>\nmaybe one should simplify (in F_algebra) the double method \"gen\" versus \"custom_gen\" ?",
    "created_at": "2022-09-22T19:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562496",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
maybe one should simplify (in F_algebra) the double method "gen" versus "custom_gen" ?



---

archive/issue_comments_562497.json:
```json
{
    "body": "<a id='comment:16'></a>\nIt does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.",
    "created_at": "2022-09-23T07:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562497",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
It does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.



---

archive/issue_comments_562498.json:
```json
{
    "body": "**Changing commit** from \"[63695d79d12e7822f0539968fcac1ecb87f398a8](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)\" to \"[6b80c50d028c46ef48bc2cc9bac53446aa170958](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)\".",
    "created_at": "2022-09-23T08:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[63695d79d12e7822f0539968fcac1ecb87f398a8](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)" to "[6b80c50d028c46ef48bc2cc9bac53446aa170958](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)".



---

archive/issue_comments_562499.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958\">6b80c50</a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>\n",
    "created_at": "2022-09-23T08:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958">6b80c50</a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>




---

archive/issue_comments_562500.json:
```json
{
    "body": "<a id='comment:18'></a>\nSo I have removed the previous method \"gen\" (rather useless and not natural) and renamed \"custom_gen\" to \"gen\".",
    "created_at": "2022-09-23T08:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562500",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>
So I have removed the previous method "gen" (rather useless and not natural) and renamed "custom_gen" to "gen".



---

archive/issue_comments_562501.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6\">cac2291</a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>\n",
    "created_at": "2022-09-23T10:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6">cac2291</a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>




---

archive/issue_comments_562502.json:
```json
{
    "body": "**Changing commit** from \"[6b80c50d028c46ef48bc2cc9bac53446aa170958](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)\" to \"[cac22914d83cc3d4e1b0a69de0c309af0fd552c6](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)\".",
    "created_at": "2022-09-23T10:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6b80c50d028c46ef48bc2cc9bac53446aa170958](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)" to "[cac22914d83cc3d4e1b0a69de0c309af0fd552c6](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)".



---

archive/issue_comments_562503.json:
```json
{
    "body": "<a id='comment:20'></a>\nThank you.\n\nDo we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).\n\nI think other than that, I would be happy to set a positive review (unless there are other changes you want to make).",
    "created_at": "2022-09-23T10:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562503",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
Thank you.

Do we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).

I think other than that, I would be happy to set a positive review (unless there are other changes you want to make).



---

archive/issue_comments_562504.json:
```json
{
    "body": "<a id='comment:21'></a>\nWell, I want to exclude 0. No idea what nonnegative means, as always.",
    "created_at": "2022-09-23T11:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562504",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
Well, I want to exclude 0. No idea what nonnegative means, as always.



---

archive/issue_comments_562505.json:
```json
{
    "body": "<a id='comment:22'></a>\nAh, right. Duh. Then how about `PositiveIntegers()`?",
    "created_at": "2022-09-23T11:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562505",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Ah, right. Duh. Then how about `PositiveIntegers()`?



---

archive/issue_comments_562506.json:
```json
{
    "body": "**Changing commit** from \"[cac22914d83cc3d4e1b0a69de0c309af0fd552c6](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)\" to \"[8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)\".",
    "created_at": "2022-09-23T12:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cac22914d83cc3d4e1b0a69de0c309af0fd552c6](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)" to "[8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)".



---

archive/issue_comments_562507.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f\">8a8cdf3</a></td><td><code>using PositiveIntegers</code></td></tr></table>\n",
    "created_at": "2022-09-23T12:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f">8a8cdf3</a></td><td><code>using PositiveIntegers</code></td></tr></table>




---

archive/issue_comments_562508.json:
```json
{
    "body": "<a id='comment:24'></a>\nIndeed, now using `PositiveIntegers`.\n\nI think I have no further changes to make.",
    "created_at": "2022-09-23T12:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562508",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
Indeed, now using `PositiveIntegers`.

I think I have no further changes to make.



---

archive/issue_events_311726.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34562#event-311726"
}
```



---

archive/issue_events_311727.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34562#event-311727"
}
```



---

archive/issue_comments_562509.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2022-09-23T12:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562509",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_562510.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks. LGTM.",
    "created_at": "2022-09-23T12:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562510",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
Thanks. LGTM.



---

archive/issue_events_311728.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34562#event-311728"
}
```



---

archive/issue_events_311729.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34562#event-311729"
}
```



---

archive/issue_comments_562511.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)\" to \"[8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)\".",
    "created_at": "2022-09-27T22:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34562#issuecomment-562511",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)" to "[8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)".
