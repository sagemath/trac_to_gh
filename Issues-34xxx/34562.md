# Issue 34562: refactor multiple zeta values

archive/issues_034325.json:
```json
{
    "assignees": [],
    "body": "This ticket mainly aims to separate the auxiliary F-algebra in another file.\n\nThis file implements a better custom-made F-algebra, with additional useful methods.\n\n\n\nCC:  @videlec @tscrim\n\nBranch/Commit: **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34562_\n\n",
    "closed_at": "2022-09-27T22:27:54Z",
    "created_at": "2022-09-20T09:42:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "refactor multiple zeta values",
    "type": "issue",
    "updated_at": "2022-09-27T22:27:54Z",
    "url": "https://github.com/sagemath/sage/issues/34562",
    "user": "https://github.com/fchapoton"
}
```
This ticket mainly aims to separate the auxiliary F-algebra in another file.

This file implements a better custom-made F-algebra, with additional useful methods.



CC:  @videlec @tscrim

Branch/Commit: **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/34562_





---

archive/issue_events_438702.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438702"
}
```



---

archive/issue_events_438703.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "component: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438703"
}
```



---

archive/issue_events_438704.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438704"
}
```



---

archive/issue_events_438705.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438705"
}
```



---

archive/issue_events_438706.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:43:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438706"
}
```



---

archive/issue_comments_561451.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869\">f8a5eea</a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>\n",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561451",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869">f8a5eea</a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>




---

archive/issue_comments_561452.json:
```json
{
    "body": "Commit: **[f8a5eea](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)**",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561452",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[f8a5eea](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)**



---

archive/issue_comments_561453.json:
```json
{
    "body": "Branch: **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)**",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561453",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)**



---

archive/issue_comments_561454.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nSome quick comments about the `F_algebra`:\n\n- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.",
    "created_at": "2022-09-20T10:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561454",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'>Comment 2:</a>
Some quick comments about the `F_algebra`:

- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.
- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.
- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.
- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).
- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.
- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.



---

archive/issue_comments_561455.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34\">3b06406</a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>\n",
    "created_at": "2022-09-20T11:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561455",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34">3b06406</a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>




---

archive/issue_comments_561456.json:
```json
{
    "body": "Changed commit from **[f8a5eea](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)** to **[3b06406](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)**",
    "created_at": "2022-09-20T11:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561456",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f8a5eea](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)** to **[3b06406](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)**



---

archive/issue_comments_561457.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4\">c447fc2</a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b\">c7b3fee</a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561457",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4">c447fc2</a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b">c7b3fee</a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>




---

archive/issue_comments_561458.json:
```json
{
    "body": "Changed commit from **[3b06406](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)** to **[c7b3fee](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)**",
    "created_at": "2022-09-21T07:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561458",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3b06406](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)** to **[c7b3fee](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)**



---

archive/issue_comments_561459.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHello,\n\nthanks a lot for the suggestions !\n\n> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n\nok, done by removing the wrong alias that I had added.\n\n> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n\nwell, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\n> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n\nI substituted that for NN and it works fine.\n\n> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n\nI would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\n> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n\nNot sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\n> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n\nI have not yet checked that last suggestion.",
    "created_at": "2022-09-21T07:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561459",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'>Comment 5:</a>
Hello,

thanks a lot for the suggestions !

> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.

ok, done by removing the wrong alias that I had added.

> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.

well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input

> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.

I substituted that for NN and it works fine.

> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).

I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..

> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.

Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.

> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.

I have not yet checked that last suggestion.



---

archive/issue_comments_561460.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3\">0a56256</a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561460",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3">0a56256</a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>




---

archive/issue_comments_561461.json:
```json
{
    "body": "Changed commit from **[c7b3fee](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)** to **[0a56256](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)**",
    "created_at": "2022-09-21T07:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561461",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c7b3fee](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)** to **[0a56256](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)**



---

archive/issue_comments_561462.json:
```json
{
    "body": "Changed commit from **[0a56256](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)** to **[6f11059](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)**",
    "created_at": "2022-09-21T07:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561462",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0a56256](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)** to **[6f11059](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)**



---

archive/issue_comments_561463.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556\">6f11059</a></td><td><code>using sum_of_monomials</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561463",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556">6f11059</a></td><td><code>using sum_of_monomials</code></td></tr></table>




---

archive/issue_comments_561464.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [Fr\u00e9d\u00e9ric Chapoton](#comment%3A5):\n> thanks a lot for the suggestions !\n\nThank you for all your work on Sage.\n\n> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n\n> \n> well, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\nI see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?\n\n> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n\n> \n> I would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\nSubsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.\n\nAlso, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.\n\n> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n\n> \n> Not sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\nIf speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.\n\nPerhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like\n\n```python\n    def shuffle(t1, t2):\n        n1 = len(t1)\n        n2 = len(t2)\n        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter\n            it1 = iter(t1)\n            it2 = iter(t2)\n            yield tuple([next(it1) if v else next(it2) for v in iv])\n```\n\n> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n\n> \n> I have not yet checked that last suggestion.\n\nYour changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.",
    "created_at": "2022-09-21T09:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561464",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [Frédéric Chapoton](#comment%3A5):
> thanks a lot for the suggestions !

Thank you for all your work on Sage.

> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.

> 
> well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input

I see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?

> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).

> 
> I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..

Subsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.

Also, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.

> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.

> 
> Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.

If speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.

Perhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like

```python
    def shuffle(t1, t2):
        n1 = len(t1)
        n2 = len(t2)
        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter
            it1 = iter(t1)
            it2 = iter(t2)
            yield tuple([next(it1) if v else next(it2) for v in iv])
```

> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.

> 
> I have not yet checked that last suggestion.

Your changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.



---

archive/issue_comments_561465.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0\">d5ee67d</a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>\n",
    "created_at": "2022-09-21T11:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561465",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0">d5ee67d</a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>




---

archive/issue_comments_561466.json:
```json
{
    "body": "Changed commit from **[6f11059](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)** to **[d5ee67d](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)**",
    "created_at": "2022-09-21T11:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561466",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f11059](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)** to **[d5ee67d](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)**



---

archive/issue_comments_561467.json:
```json
{
    "body": "Changed commit from **[d5ee67d](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)** to **[5df08cb](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)**",
    "created_at": "2022-09-21T13:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561467",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d5ee67d](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)** to **[5df08cb](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)**



---

archive/issue_comments_561468.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f\">7d395b5</a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88\">5df08cb</a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-21T13:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561468",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f">7d395b5</a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88">5df08cb</a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>




---

archive/issue_comments_561469.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da\">4bdced9</a></td><td><code>small detail in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561469",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da">4bdced9</a></td><td><code>small detail in MZV</code></td></tr></table>




---

archive/issue_comments_561470.json:
```json
{
    "body": "Changed commit from **[5df08cb](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)** to **[4bdced9](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)**",
    "created_at": "2022-09-22T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5df08cb](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)** to **[4bdced9](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)**



---

archive/issue_comments_561471.json:
```json
{
    "body": "Changed commit from **[4bdced9](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)** to **[7661288](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)**",
    "created_at": "2022-09-22T12:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561471",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4bdced9](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)** to **[7661288](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)**



---

archive/issue_comments_561472.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622\">7661288</a></td><td><code>a few more details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561472",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622">7661288</a></td><td><code>a few more details in MZV</code></td></tr></table>




---

archive/issue_comments_561473.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8\">63695d7</a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561473",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8">63695d7</a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>




---

archive/issue_comments_561474.json:
```json
{
    "body": "Changed commit from **[7661288](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)** to **[63695d7](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)**",
    "created_at": "2022-09-22T12:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7661288](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)** to **[63695d7](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)**



---

archive/issue_comments_561475.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI guess it is now ready for review again.",
    "created_at": "2022-09-22T18:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561475",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'>Comment 14:</a>
I guess it is now ready for review again.



---

archive/issue_comments_561476.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nmaybe one should simplify (in F_algebra) the double method \"gen\" versus \"custom_gen\" ?",
    "created_at": "2022-09-22T19:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561476",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'>Comment 15:</a>
maybe one should simplify (in F_algebra) the double method "gen" versus "custom_gen" ?



---

archive/issue_comments_561477.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nIt does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.",
    "created_at": "2022-09-23T07:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561477",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'>Comment 16:</a>
It does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.



---

archive/issue_comments_561478.json:
```json
{
    "body": "Changed commit from **[63695d7](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)** to **[6b80c50](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)**",
    "created_at": "2022-09-23T08:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[63695d7](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)** to **[6b80c50](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)**



---

archive/issue_comments_561479.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958\">6b80c50</a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>\n",
    "created_at": "2022-09-23T08:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561479",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958">6b80c50</a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>




---

archive/issue_comments_561480.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nSo I have removed the previous method \"gen\" (rather useless and not natural) and renamed \"custom_gen\" to \"gen\".",
    "created_at": "2022-09-23T08:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561480",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'>Comment 18:</a>
So I have removed the previous method "gen" (rather useless and not natural) and renamed "custom_gen" to "gen".



---

archive/issue_comments_561481.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6\">cac2291</a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>\n",
    "created_at": "2022-09-23T10:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561481",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6">cac2291</a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>




---

archive/issue_comments_561482.json:
```json
{
    "body": "Changed commit from **[6b80c50](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)** to **[cac2291](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)**",
    "created_at": "2022-09-23T10:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561482",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6b80c50](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)** to **[cac2291](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)**



---

archive/issue_comments_561483.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThank you.\n\nDo we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).\n\nI think other than that, I would be happy to set a positive review (unless there are other changes you want to make).",
    "created_at": "2022-09-23T10:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561483",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
Thank you.

Do we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).

I think other than that, I would be happy to set a positive review (unless there are other changes you want to make).



---

archive/issue_comments_561484.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nWell, I want to exclude 0. No idea what nonnegative means, as always.",
    "created_at": "2022-09-23T11:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561484",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'>Comment 21:</a>
Well, I want to exclude 0. No idea what nonnegative means, as always.



---

archive/issue_comments_561485.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nAh, right. Duh. Then how about `PositiveIntegers()`?",
    "created_at": "2022-09-23T11:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561485",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'>Comment 22:</a>
Ah, right. Duh. Then how about `PositiveIntegers()`?



---

archive/issue_comments_561486.json:
```json
{
    "body": "Changed commit from **[cac2291](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)** to **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**",
    "created_at": "2022-09-23T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561486",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cac2291](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)** to **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**



---

archive/issue_comments_561487.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f\">8a8cdf3</a></td><td><code>using PositiveIntegers</code></td></tr></table>\n",
    "created_at": "2022-09-23T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561487",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f">8a8cdf3</a></td><td><code>using PositiveIntegers</code></td></tr></table>




---

archive/issue_comments_561488.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nIndeed, now using `PositiveIntegers`.\n\nI think I have no further changes to make.",
    "created_at": "2022-09-23T12:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561488",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'>Comment 24:</a>
Indeed, now using `PositiveIntegers`.

I think I have no further changes to make.



---

archive/issue_events_438707.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438707"
}
```



---

archive/issue_events_438708.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438708"
}
```



---

archive/issue_comments_561489.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-09-23T12:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561489",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_561490.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThanks. LGTM.",
    "created_at": "2022-09-23T12:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561490",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'>Comment 25:</a>
Thanks. LGTM.



---

archive/issue_events_438709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438709"
}
```



---

archive/issue_events_438710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b836c6c85db0604ad196e2fe72468ef4ac84aa44",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-438710"
}
```



---

archive/issue_comments_561491.json:
```json
{
    "body": "Changed branch from **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)** to **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**",
    "created_at": "2022-09-27T22:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-561491",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)** to **[8a8cdf3](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**
