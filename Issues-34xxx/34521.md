# Issue 34521: Bernoulli(1) = +1/2

archive/issues_034284.json:
```json
{
    "assignees": [
        "https://github.com/dimpase"
    ],
    "body": "Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of \"Concrete Mathematics\") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n\nWell not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make the `+1/2` behaviour default later on, so as to give time for end-users to update their code.\n\nThis is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.\n\nCC:  @fredrik-johansson @DavidAyotte @PeterLuschny @edgarcosta @asmeurer\n\nKeywords: **bernoulli numbers**\n\nBranch/Commit: **[u/gh-Parcly-Taxel/bern1](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Parcly-Taxel/bern1) @ [b5ce7de](https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd)**\n\nAuthor: **Jeremy Tan Jie Rui**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34521_\n\n",
    "closed_at": "2022-09-12T08:10:24Z",
    "created_at": "2022-09-11T21:18:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bernoulli(1) = +1/2",
    "type": "issue",
    "updated_at": "2022-09-16T01:13:34Z",
    "url": "https://github.com/sagemath/sage/issues/34521",
    "user": "https://github.com/Parcly-Taxel"
}
```
Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of "Concrete Mathematics") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.

Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make the `+1/2` behaviour default later on, so as to give time for end-users to update their code.

This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.

CC:  @fredrik-johansson @DavidAyotte @PeterLuschny @edgarcosta @asmeurer

Keywords: **bernoulli numbers**

Branch/Commit: **[u/gh-Parcly-Taxel/bern1](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Parcly-Taxel/bern1) @ [b5ce7de](https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd)**

Author: **Jeremy Tan Jie Rui**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/34521_





---

archive/issue_events_471274.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-11T21:18:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471274"
}
```



---

archive/issue_events_471275.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-11T21:18:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471275"
}
```



---

archive/issue_events_471276.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-11T21:18:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471276"
}
```



---

archive/issue_events_471277.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-11T21:18:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471277"
}
```



---

archive/issue_comments_557675.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n \n-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the default behaviour permanent later on, so as to give time for end-users to update their code.\n+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the `+1/2` behaviour permanent later on, so as to give time for end-users to update their code.\n \n This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.\n``````\n",
    "created_at": "2022-09-11T21:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557675",
    "user": "https://github.com/Parcly-Taxel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.
 
-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the default behaviour permanent later on, so as to give time for end-users to update their code.
+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the `+1/2` behaviour permanent later on, so as to give time for end-users to update their code.
 
 This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.
``````




---

archive/issue_comments_557676.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhat I think would be a good way to go in this ticket would be to follow the [one year deprecation policy](https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation) of Sage. Therefore, the default value of the parameter `plus` would be `False` so that `Bernoulli(1)` still returns `-1/2`, but this option would return a warning message saying that this default value will change to `True` in a subsequent release of [SageMath](../wiki/SageMath). This will give time to the user to adapt their code accordingly.\n\nAlso, if `plus=False` I would make the code return `Bernoulli(1)=-1/2` (instead of letting the algorithm decides). In my opinion, this would give the user the choice of its prefered value and avoid some possible confusions.\n\nHere's a list of all the files with failed doctests:\n\n```\nsage -t --random-seed=261341029976424338880876638067744409976 doc/en/thematic_tutorials/explicit_methods_in_number_theory/generators_for_rings.rst  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/combinat/q_bernoulli.pyx  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/dirichlet.py  # 3 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ambient.py  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/constructor.py  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ambient_g1.py  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/eisenstein_submodule.py  # 4 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/element.py  # 11 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ring.py  # 3 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/overconvergent/genus0.py  # 28 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/overconvergent/weightspace.py  # 5 doctests failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/quasimodform/element.py  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/modular/quasimodform/ring.py  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/rings/bernmm.pyx  # 1 doctest failed\nsage -t --random-seed=261341029976424338880876638067744409976 sage/tests/book_stein_modform.py  # 1 doctest failed\n```",
    "created_at": "2022-09-12T01:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557676",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:3" align="right">comment:3</div>

What I think would be a good way to go in this ticket would be to follow the [one year deprecation policy](https://doc.sagemath.org/html/en/developer/coding_in_python.html#deprecation) of Sage. Therefore, the default value of the parameter `plus` would be `False` so that `Bernoulli(1)` still returns `-1/2`, but this option would return a warning message saying that this default value will change to `True` in a subsequent release of [SageMath](../wiki/SageMath). This will give time to the user to adapt their code accordingly.

Also, if `plus=False` I would make the code return `Bernoulli(1)=-1/2` (instead of letting the algorithm decides). In my opinion, this would give the user the choice of its prefered value and avoid some possible confusions.

Here's a list of all the files with failed doctests:

```
sage -t --random-seed=261341029976424338880876638067744409976 doc/en/thematic_tutorials/explicit_methods_in_number_theory/generators_for_rings.rst  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/combinat/q_bernoulli.pyx  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/dirichlet.py  # 3 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ambient.py  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/constructor.py  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ambient_g1.py  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/eisenstein_submodule.py  # 4 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/element.py  # 11 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/modform/ring.py  # 3 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/overconvergent/genus0.py  # 28 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/overconvergent/weightspace.py  # 5 doctests failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/quasimodform/element.py  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/modular/quasimodform/ring.py  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/rings/bernmm.pyx  # 1 doctest failed
sage -t --random-seed=261341029976424338880876638067744409976 sage/tests/book_stein_modform.py  # 1 doctest failed
```



---

archive/issue_comments_557677.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc\">2965357</a></td><td><code>It is a deprecation after all</code></td></tr></table>\n",
    "created_at": "2022-09-12T02:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557677",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc">2965357</a></td><td><code>It is a deprecation after all</code></td></tr></table>




---

archive/issue_comments_557678.json:
```json
{
    "body": "Changed commit from **[db023fa](https://github.com/sagemath/sagetrac-mirror/commit/db023fafd879417326e22e1c99439dc3ae5675f3)** to **[2965357](https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc)**",
    "created_at": "2022-09-12T02:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557678",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[db023fa](https://github.com/sagemath/sagetrac-mirror/commit/db023fafd879417326e22e1c99439dc3ae5675f3)** to **[2965357](https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc)**



---

archive/issue_comments_557679.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n**NO**.\n\nWe are not going to change this convention, which is the standard one. Live with it.",
    "created_at": "2022-09-12T06:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557679",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

**NO**.

We are not going to change this convention, which is the standard one. Live with it.



---

archive/issue_comments_557680.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385\">85e7c97</a></td><td><code>Fix all doctests</code></td></tr></table>\n",
    "created_at": "2022-09-12T07:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557680",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385">85e7c97</a></td><td><code>Fix all doctests</code></td></tr></table>




---

archive/issue_comments_557681.json:
```json
{
    "body": "Changed commit from **[2965357](https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc)** to **[85e7c97](https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385)**",
    "created_at": "2022-09-12T07:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557681",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2965357](https://github.com/sagemath/sagetrac-mirror/commit/296535745b6cd3a818b6f2dad9a9f1569bec95cc)** to **[85e7c97](https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385)**



---

archive/issue_comments_557682.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHow can you say `B_1 = -1/2` is standard when Knuth uses `B_1 = +1/2`?\n\nHow can you say `B_1 = -1/2` is even a \"convention\" when Luschny has analysed the historical development of the Bernoulli numbers and found that Bernoulli himself and virtually all mathematicians before the 20th century used `B_1 = +1/2`?\n\nHave you read the manifesto? Luschny's argument has two main thrusts: the historical side as above, and the simplification of many formulae with `B_1 = +1/2`, including Euler\u2013Maclaurin. He eventually finds that the Hasse\u2013Worpitzky representation of the generalised Bernoulli function frees the numbers from all conventions \u2013 `B_1 = +1/2` is not another convention, it is the only logical value.",
    "created_at": "2022-09-12T08:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557682",
    "user": "https://github.com/Parcly-Taxel"
}
```

<div id="comment:8" align="right">comment:8</div>

How can you say `B_1 = -1/2` is standard when Knuth uses `B_1 = +1/2`?

How can you say `B_1 = -1/2` is even a "convention" when Luschny has analysed the historical development of the Bernoulli numbers and found that Bernoulli himself and virtually all mathematicians before the 20th century used `B_1 = +1/2`?

Have you read the manifesto? Luschny's argument has two main thrusts: the historical side as above, and the simplification of many formulae with `B_1 = +1/2`, including Euler–Maclaurin. He eventually finds that the Hasse–Worpitzky representation of the generalised Bernoulli function frees the numbers from all conventions – `B_1 = +1/2` is not another convention, it is the only logical value.



---

archive/issue_comments_557683.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nMr Luschny has not published any mathematical article. We have more serious things to do, so I will now close this ticket.",
    "created_at": "2022-09-12T08:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557683",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Mr Luschny has not published any mathematical article. We have more serious things to do, so I will now close this ticket.



---

archive/issue_events_471278.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-12T08:10:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471278"
}
```



---

archive/issue_events_471279.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-12T08:10:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471279"
}
```



---

archive/issue_events_471280.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-12T08:10:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471280"
}
```



---

archive/issue_events_471281.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-12T08:12:41Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "subject": "https://github.com/Parcly-Taxel",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471281"
}
```



---

archive/issue_comments_557684.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [Fr\u00e9d\u00e9ric Chapoton](#comment:9):\n> Mr Luschny has not published any mathematical article. We have more serious things to do, so I will now close this ticket.\n\nFrederic, really? Knuth (does this name rings a bell :-)), mentioned in the ticket description, has published maths articles, and books, and if he uses +1/2 then this should have a merit.\n\nAnd there was a tentative agreement on sage-devel that this change can go forward.",
    "created_at": "2022-09-12T13:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557684",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [Frédéric Chapoton](#comment:9):
> Mr Luschny has not published any mathematical article. We have more serious things to do, so I will now close this ticket.

Frederic, really? Knuth (does this name rings a bell :-)), mentioned in the ticket description, has published maths articles, and books, and if he uses +1/2 then this should have a merit.

And there was a tentative agreement on sage-devel that this change can go forward.



---

archive/issue_events_471282.json:
```json
{
    "actor": "https://github.com/Parcly-Taxel",
    "created_at": "2022-09-12T13:44:52Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "subject": "https://github.com/dimpase",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471282"
}
```



---

archive/issue_events_471283.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-09-12T13:44:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "subject": "https://github.com/dimpase",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471283"
}
```



---

archive/issue_comments_557685.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nDon't create extra work for other people by closing tickets without a review.",
    "created_at": "2022-09-12T13:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557685",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

Don't create extra work for other people by closing tickets without a review.



---

archive/issue_comments_557686.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHello Fr\u00e9d\u00e9ric, you clearly did not read the thread on [sage-devel](https://groups.google.com/g/sage-devel/c/G4sbKoibXK4/m/nruZdm9xBwAJ). I **strongly** think that something should be done about this in someway because FLINT is the default system for computing small Bernoulli numbers, otherwise we are just waiting for many bugs to appear once this system gets updated (see [comment:3](#comment:3)).\n\nI'm sorry Jeremy that you had to undergo this authoritarian outcome.",
    "created_at": "2022-09-12T14:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557686",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:13" align="right">comment:13</div>

Hello Frédéric, you clearly did not read the thread on [sage-devel](https://groups.google.com/g/sage-devel/c/G4sbKoibXK4/m/nruZdm9xBwAJ). I **strongly** think that something should be done about this in someway because FLINT is the default system for computing small Bernoulli numbers, otherwise we are just waiting for many bugs to appear once this system gets updated (see [comment:3](#comment:3)).

I'm sorry Jeremy that you had to undergo this authoritarian outcome.



---

archive/issue_comments_557687.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'm re-opening this.  I have no opinion on which definition we settle on (having not read the cited paper), and according to the test suite this change mainly impacts code that I wrote.    That said, I am definitely OK with making the change following the 1-year deprecation policy, in order to avoid breaking code out there in the wild that depends on this.",
    "created_at": "2022-09-12T18:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557687",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:14" align="right">comment:14</div>

I'm re-opening this.  I have no opinion on which definition we settle on (having not read the cited paper), and according to the test suite this change mainly impacts code that I wrote.    That said, I am definitely OK with making the change following the 1-year deprecation policy, in order to avoid breaking code out there in the wild that depends on this.



---

archive/issue_events_471284.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2022-09-12T18:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34521#event-471284"
}
```



---

archive/issue_comments_557688.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [Dima Pasechnik](#comment:11):\n> And there was a tentative agreement on sage-devel that this change can go forward.\n\nI don't think so. Most people said if to be done, would need to be done with 1 year deprecation warning.\nApart from the OP, I don't think anyone is excited about this change. Including me.\n\nReplying to [David Ayotte](#comment:13):\n> I **strongly** think that something should be done about this in someway because FLINT is the default system for computing small Bernoulli numbers, otherwise we are just waiting for many bugs to appear once this system gets updated (see [comment:3](#comment:3)).\n\nWhy do you think the PR will be merged?",
    "created_at": "2022-09-13T02:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557688",
    "user": "https://github.com/edgarcosta"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [Dima Pasechnik](#comment:11):
> And there was a tentative agreement on sage-devel that this change can go forward.

I don't think so. Most people said if to be done, would need to be done with 1 year deprecation warning.
Apart from the OP, I don't think anyone is excited about this change. Including me.

Replying to [David Ayotte](#comment:13):
> I **strongly** think that something should be done about this in someway because FLINT is the default system for computing small Bernoulli numbers, otherwise we are just waiting for many bugs to appear once this system gets updated (see [comment:3](#comment:3)).

Why do you think the PR will be merged?



---

archive/issue_comments_557689.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [Edgar Costa](#comment:15):\n> Why do you think the PR will be merged?\n\nSomeone indeed pointed this out on sage-devel. This is a mistake from my part as I thougth that is was already closed. Sorry! It can indeed never be merged...",
    "created_at": "2022-09-13T02:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557689",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [Edgar Costa](#comment:15):
> Why do you think the PR will be merged?

Someone indeed pointed this out on sage-devel. This is a mistake from my part as I thougth that is was already closed. Sorry! It can indeed never be merged...



---

archive/issue_comments_557690.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n>  Apart from the OP, I don't think anyone is excited about this change. \n\nI personally am.  And, I think all code in Sage that is broken by this is code that I wrote, so I'm not just a completely random opinion.   I also like that it fixes that annoying special cases regarding generalized Bernoulli numbers.  I also find Knuth's opinion compelling.",
    "created_at": "2022-09-13T02:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557690",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:17" align="right">comment:17</div>

>  Apart from the OP, I don't think anyone is excited about this change. 

I personally am.  And, I think all code in Sage that is broken by this is code that I wrote, so I'm not just a completely random opinion.   I also like that it fixes that annoying special cases regarding generalized Bernoulli numbers.  I also find Knuth's opinion compelling.



---

archive/issue_comments_557691.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n>  It can indeed never be merged...\n\nIt might or might not be merged.  We have a voting policy for contentious changes to Sage, which we carefully thought through and designed many years ago.  The weird thing is that I would link to the policy, but I just did some google searches and can't even find it!",
    "created_at": "2022-09-13T02:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557691",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:18" align="right">comment:18</div>

>  It can indeed never be merged...

It might or might not be merged.  We have a voting policy for contentious changes to Sage, which we carefully thought through and designed many years ago.  The weird thing is that I would link to the policy, but I just did some google searches and can't even find it!



---

archive/issue_comments_557692.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n \n-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the `+1/2` behaviour permanent later on, so as to give time for end-users to update their code.\n+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.\n \n This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.\n``````\n",
    "created_at": "2022-09-13T03:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557692",
    "user": "https://github.com/Parcly-Taxel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.
 
-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour by default. The intention is to make the `+1/2` behaviour permanent later on, so as to give time for end-users to update their code.
+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.
 
 This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.
``````




---

archive/issue_comments_557693.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n+Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of \"Concrete Mathematics\") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n \n Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.\n \n``````\n",
    "created_at": "2022-09-15T13:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557693",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.
+Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of "Concrete Mathematics") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.
 
 Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.
 
``````




---

archive/issue_comments_557694.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI added a link to Knuth's take on it, e.g. https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf (replacement pages for CM), see also https://www-cs-faculty.stanford.edu/~knuth/news22.html",
    "created_at": "2022-09-15T13:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557694",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

I added a link to Knuth's take on it, e.g. https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf (replacement pages for CM), see also https://www-cs-faculty.stanford.edu/~knuth/news22.html



---

archive/issue_comments_557695.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHello Jeremy, thank you for working on this ticket and fixing the failing doctests.\n\nA small suggestion:\n\n```diff\n+    - ``plus`` (Boolean) - ``bernoulli(1)`` gives `1/2` if this is ``True`` and `-1/2` otherwise\n-    - ``plus`` - bernoulli(1) gives +1/2 if this is True and -1/2 otherwise\n```\nAlso, I think that a more descriptive depreciation message could be useful for the user:\n\n```diff\n         else:\n+            deprecation(34521, (\"bernoulli(1) will return +1/2 by default in\" +\n+            \"the future. In order to keep the original behavior, please set\" +\n+            \"the option ``plus`` to ``False`` (bernoulli(n, plus=False))\"))\n-            deprecation(34521, \"bernoulli(1) will always return +1/2 in the future\")\n```\n(or something else)\n\nI still support this change and I don't understand the convention argument against it.",
    "created_at": "2022-09-16T00:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557695",
    "user": "https://github.com/DavidAyotte"
}
```

<div id="comment:22" align="right">comment:22</div>

Hello Jeremy, thank you for working on this ticket and fixing the failing doctests.

A small suggestion:

```diff
+    - ``plus`` (Boolean) - ``bernoulli(1)`` gives `1/2` if this is ``True`` and `-1/2` otherwise
-    - ``plus`` - bernoulli(1) gives +1/2 if this is True and -1/2 otherwise
```
Also, I think that a more descriptive depreciation message could be useful for the user:

```diff
         else:
+            deprecation(34521, ("bernoulli(1) will return +1/2 by default in" +
+            "the future. In order to keep the original behavior, please set" +
+            "the option ``plus`` to ``False`` (bernoulli(n, plus=False))"))
-            deprecation(34521, "bernoulli(1) will always return +1/2 in the future")
```
(or something else)

I still support this change and I don't understand the convention argument against it.



---

archive/issue_comments_557696.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd\">b5ce7de</a></td><td><code>More informative strings from David Ayotte</code></td></tr></table>\n",
    "created_at": "2022-09-16T00:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557696",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd">b5ce7de</a></td><td><code>More informative strings from David Ayotte</code></td></tr></table>




---

archive/issue_comments_557697.json:
```json
{
    "body": "Changed commit from **[85e7c97](https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385)** to **[b5ce7de](https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd)**",
    "created_at": "2022-09-16T00:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557697",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[85e7c97](https://github.com/sagemath/sagetrac-mirror/commit/85e7c975e26b5e6b1d085d51cd9011d098bbd385)** to **[b5ce7de](https://github.com/sagemath/sagetrac-mirror/commit/b5ce7de42ad148dc4f04413daa98d799bf266bdd)**



---

archive/issue_comments_557698.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of \"Concrete Mathematics\") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.\n \n-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.\n+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make the `+1/2` behaviour default later on, so as to give time for end-users to update their code.\n \n This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.\n``````\n",
    "created_at": "2022-09-16T01:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34521",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34521#issuecomment-557698",
    "user": "https://github.com/Parcly-Taxel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Peter Luschny's Bernoulli Manifesto (http://luschny.de/math/zeta/The-Bernoulli-Manifesto.html) makes a very convincing argument that `bernoulli(1)` should be `+1/2`, not `-1/2`. Knuth's books (e.g. here are his [replacement pages](https://www-cs-faculty.stanford.edu/~knuth/gkp34.pdf)  for earlier that 34th editions of "Concrete Mathematics") now use `+1/2`, SymPy now uses `+1/2` (and I made the PRs implementing that, see https://github.com/sympy/sympy/pull/23926), and so this ticket sets `bernoulli(1) = +1/2` here too.
 
-Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make such behaviour permanent later on, so as to give time for end-users to update their code.
+Well not quite; this ticket merely *deprecates* `bernoulli(1) = -1/2` by providing a flag enforcing `+1/2` behaviour. The intention is to make the `+1/2` behaviour default later on, so as to give time for end-users to update their code.
 
 This is a continuation of the sage-devel thread at https://groups.google.com/g/sage-devel/c/G4sbKoibXK4.
``````

