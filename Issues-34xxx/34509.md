# Issue 34509: Make IndexedFreeModuleElement compatible with collections.abc, change method support to return a SupportView

archive/issues_034272.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis is the element class of a `CombinatorialFreeModule`.\n\nIts implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols. Specifically, \n\n```\nsage: F = CombinatorialFreeModule(QQ, ['a','b','c'])\nsage: B = F.basis()\nsage: f = B['a'] + 3*B['c']; f\nsage: import collections.abc\nsage: isinstance(f, collections.abc.Collection)\nTrue\n```\nbut `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.\n\nTo improve interoperability, we propose to make the following changes: \n- Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n- As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.\n\n\n(Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n\nPart of Meta-ticket #30309: Unify free module elements API: methods dict, monomial_coefficients, etc.\n\nDepends on #34505\n\nCC:  @fchapoton @tscrim @mwageringel @nthiery @anneschilling\n\nComponent: **linear algebra**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34509_\n\n",
    "closed_at": "2022-09-22T22:35:05Z",
    "created_at": "2022-09-08T20:01:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make IndexedFreeModuleElement compatible with collections.abc, change method support to return a SupportView",
    "type": "issue",
    "updated_at": "2022-09-22T22:35:05Z",
    "url": "https://github.com/sagemath/sage/issues/34509",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

This is the element class of a `CombinatorialFreeModule`.

Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols. Specifically, 

```
sage: F = CombinatorialFreeModule(QQ, ['a','b','c'])
sage: B = F.basis()
sage: f = B['a'] + 3*B['c']; f
sage: import collections.abc
sage: isinstance(f, collections.abc.Collection)
True
```
but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.

To improve interoperability, we propose to make the following changes: 
- Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
- As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.


(Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)

Part of Meta-ticket #30309: Unify free module elements API: methods dict, monomial_coefficients, etc.

Depends on #34505

CC:  @fchapoton @tscrim @mwageringel @nthiery @anneschilling

Component: **linear algebra**

Author: **Matthias Koeppe**

Branch/Commit: **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/34509_





---

archive/issue_events_467729.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-08T20:01:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467729"
}
```



---

archive/issue_events_467730.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-08T20:01:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467730"
}
```



---

archive/issue_events_467731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-08T20:01:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467731"
}
```



---

archive/issue_events_467732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-08T20:01:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467732"
}
```



---

archive/issue_comments_557236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n+This is the element class of a `CombinatorialFreeModule`.\n+\n Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols.\n \n To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):\n - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)\n - Add methods `keys`, `items`, `values` with the semantics familiar from `dict`.\n \n-(In #24815, it was proposed to make it a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n+(Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n``````\n",
    "created_at": "2022-09-08T20:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557236",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
+This is the element class of a `CombinatorialFreeModule`.
+
 Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols.
 
 To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):
 - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)
 - Add methods `keys`, `items`, `values` with the semantics familiar from `dict`.
 
-(In #24815, it was proposed to make it a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
+(Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
``````




---

archive/issue_comments_557237.json:
```json
{
    "body": "Dependencies: **#34505**",
    "created_at": "2022-09-08T20:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557237",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34505**



---

archive/issue_comments_557238.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):\n - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)\n-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`.\n+- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If ``self`` is a submodule, they refer to the ambient module.\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n``````\n",
    "created_at": "2022-09-08T20:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557238",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):
 - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)
-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`.
+- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If ``self`` is a submodule, they refer to the ambient module.
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
``````




---

archive/issue_comments_557239.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):\n - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)\n-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If ``self`` is a submodule, they refer to the ambient module.\n+- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If `self` is a submodule, they refer to the ambient module (see #34455).\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n``````\n",
    "created_at": "2022-09-08T20:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557239",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):
 - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)
-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If ``self`` is a submodule, they refer to the ambient module.
+- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If `self` is a submodule, they refer to the ambient module (see #34455).
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
``````




---

archive/issue_comments_557240.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI am against this change. They are vectors and only on their backend are implemented as a `dict`, but they are not dictionaries, nor mappings. Likewise, I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors. The reason we iterate over both is because there is no natural way to order the basis so the sequence of coefficients occurs in a particular order (which will unfortunately be a source of incompatibility). Hence, most of the time when iterating we want to use both the support index and the coefficient. Being vectors, they don\u2019t have `keys` and `values`, but `support` and `coefficients`. Nor do they have a reasonable notion of containment.\n\nContrast this to the \u201cusual\u201d free modules, where they have a natural compatibility with `sequence` as elements in R<sup>n</sup>, which are also how we think of finite sequences.",
    "created_at": "2022-09-08T23:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557240",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

I am against this change. They are vectors and only on their backend are implemented as a `dict`, but they are not dictionaries, nor mappings. Likewise, I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors. The reason we iterate over both is because there is no natural way to order the basis so the sequence of coefficients occurs in a particular order (which will unfortunately be a source of incompatibility). Hence, most of the time when iterating we want to use both the support index and the coefficient. Being vectors, they don’t have `keys` and `values`, but `support` and `coefficients`. Nor do they have a reasonable notion of containment.

Contrast this to the “usual” free modules, where they have a natural compatibility with `sequence` as elements in R<sup>n</sup>, which are also how we think of finite sequences.



---

archive/issue_comments_557241.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [Travis Scrimshaw](#comment%3A5):\n> Being vectors, they don\u2019t have `keys` and `values`, but `support` and `coefficients`. Nor do they have a reasonable notion of containment.\n\nIt does define `__contains__` currently; no change to that is proposed.\n\n```\n    def __contains__(self, x):\n        \"\"\"\n        Returns whether or not a combinatorial object x indexing a basis\n        element is in the support of self.\n    ...\n```",
    "created_at": "2022-09-08T23:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557241",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [Travis Scrimshaw](#comment%3A5):
> Being vectors, they don’t have `keys` and `values`, but `support` and `coefficients`. Nor do they have a reasonable notion of containment.

It does define `__contains__` currently; no change to that is proposed.

```
    def __contains__(self, x):
        """
        Returns whether or not a combinatorial object x indexing a basis
        element is in the support of self.
    ...
```



---

archive/issue_comments_557242.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [Travis Scrimshaw](#comment%3A5):\n> I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors.\n\nThis makes no sense.",
    "created_at": "2022-09-08T23:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557242",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [Travis Scrimshaw](#comment%3A5):
> I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors.

This makes no sense.



---

archive/issue_comments_557243.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [Travis Scrimshaw](#comment%3A5):\n> most of the time when iterating we want to use both the support index and the coefficient.\n\nYes, and there are two interpretations of this when the parent is a submodule.\n\n- one is `monomial_coefficients`, which refers to the basis of the submodule\n- one is the proposed new `items`, which will refer to the ambient. (This will be compatible with sparse vectors in `sage.modules`.)",
    "created_at": "2022-09-08T23:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557243",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [Travis Scrimshaw](#comment%3A5):
> most of the time when iterating we want to use both the support index and the coefficient.

Yes, and there are two interpretations of this when the parent is a submodule.

- one is `monomial_coefficients`, which refers to the basis of the submodule
- one is the proposed new `items`, which will refer to the ambient. (This will be compatible with sparse vectors in `sage.modules`.)



---

archive/issue_comments_557244.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,4 @@\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n+Part of Meta-ticket #30309: Unify free module elements API: methods dict, monomial_coefficients, etc.\n``````\n",
    "created_at": "2022-09-08T23:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557244",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,4 @@
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
+Part of Meta-ticket #30309: Unify free module elements API: methods dict, monomial_coefficients, etc.
``````




---

archive/issue_comments_557245.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A7):\n> Replying to [Travis Scrimshaw](#comment%3A5):\n> > I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors.\n> \n> \n> This makes no sense.\n\nWe want the two implementations to have the same API as much as possible. R<sup>n</sup> vectors iterate over coefficients, but iterating over keys/supports here would be the exact opposite of that behavior.",
    "created_at": "2022-09-08T23:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557245",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [Matthias Köppe](#comment%3A7):
> Replying to [Travis Scrimshaw](#comment%3A5):
> > I strongly oppose changing them to iterating over keys. This brings their implementation further from the other free module vectors.
> 
> 
> This makes no sense.

We want the two implementations to have the same API as much as possible. R<sup>n</sup> vectors iterate over coefficients, but iterating over keys/supports here would be the exact opposite of that behavior.



---

archive/issue_comments_557246.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYes, it makes no sense to say that returning `(key,value)` pairs is closer to being the \"same API\" as returning `value`s.",
    "created_at": "2022-09-09T00:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Yes, it makes no sense to say that returning `(key,value)` pairs is closer to being the "same API" as returning `value`s.



---

archive/issue_comments_557247.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,16 @@\n This is the element class of a `CombinatorialFreeModule`.\n \n-Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols.\n+Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols. Specifically, \n+\n+```\n+sage: F = CombinatorialFreeModule(QQ, ['a','b','c'])\n+sage: B = F.basis()\n+sage: f = B['a'] + 3*B['c']; f\n+sage: import collections.abc\n+sage: isinstance(f, collections.abc.Collection)\n+True\n+```\n+but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.\n \n To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):\n - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)\n``````\n",
    "created_at": "2022-09-09T00:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557247",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,16 @@
 This is the element class of a `CombinatorialFreeModule`.
 
-Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols.
+Its implementation of `__iter__`, `__contains__`, `__len__` are not compatible with anything in the [collections.abc](https://docs.python.org/3/library/collections.abc.html) protocols. Specifically, 
+
+```
+sage: F = CombinatorialFreeModule(QQ, ['a','b','c'])
+sage: B = F.basis()
+sage: f = B['a'] + 3*B['c']; f
+sage: import collections.abc
+sage: isinstance(f, collections.abc.Collection)
+True
+```
+but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.
 
 To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):
 - Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)
``````




---

archive/issue_comments_557248.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A11):\n> Yes, it makes no sense to say that returning `(key,value)` pairs is closer to being the \"same API\" as returning `value`s.\n\nSo actually returning the coefficient as part of the iterator instead of saying you should access it by a completely different method is exactly the same by your logic. You wouldn\u2019t agree that it is a much smaller change to have R<sup>n</sup> vector iterators change to return the pairs?",
    "created_at": "2022-09-09T01:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557248",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [Matthias Köppe](#comment%3A11):
> Yes, it makes no sense to say that returning `(key,value)` pairs is closer to being the "same API" as returning `value`s.

So actually returning the coefficient as part of the iterator instead of saying you should access it by a completely different method is exactly the same by your logic. You wouldn’t agree that it is a much smaller change to have R<sup>n</sup> vector iterators change to return the pairs?



---

archive/issue_comments_557249.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [Travis Scrimshaw](#comment%3A13):\n> change to have R<sup>n</sup> vector iterators change to return the pairs?\n\nThat would be a really bad change for dense vectors, which clearly want to be a `collections.abc.Sequence`",
    "created_at": "2022-09-09T01:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557249",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [Travis Scrimshaw](#comment%3A13):
> change to have R<sup>n</sup> vector iterators change to return the pairs?

That would be a really bad change for dense vectors, which clearly want to be a `collections.abc.Sequence`



---

archive/issue_comments_557250.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A8):\n> Replying to [Travis Scrimshaw](#comment%3A5):\n> > most of the time when iterating we want to use both the support index and the coefficient.\n> \n> \n> Yes, and there are two interpretations of this when the parent is a submodule.\n> \n> - one is `monomial_coefficients`, which refers to the basis of the submodule\n> - one is the proposed new `items`, which will refer to the ambient. (This will be compatible with sparse vectors in `sage.modules`.)\n\nUnfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything. I would rather all vectors follow what CFM vectors do from a more abstract mathematical point of view, but we have to make trade-offs. This one is here very clear-cut.\n\nAlso, it isn\u2019t just limited to sparse vectors, right?",
    "created_at": "2022-09-09T01:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557250",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [Matthias Köppe](#comment%3A8):
> Replying to [Travis Scrimshaw](#comment%3A5):
> > most of the time when iterating we want to use both the support index and the coefficient.
> 
> 
> Yes, and there are two interpretations of this when the parent is a submodule.
> 
> - one is `monomial_coefficients`, which refers to the basis of the submodule
> - one is the proposed new `items`, which will refer to the ambient. (This will be compatible with sparse vectors in `sage.modules`.)

Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything. I would rather all vectors follow what CFM vectors do from a more abstract mathematical point of view, but we have to make trade-offs. This one is here very clear-cut.

Also, it isn’t just limited to sparse vectors, right?



---

archive/issue_comments_557251.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A14):\n> Replying to [Travis Scrimshaw](#comment%3A13):\n> > change to have R<sup>n</sup> vector iterators change to return the pairs?\n> \n> \n> That would be a really bad change for dense vectors, which clearly want to be a `collections.abc.Sequence`\n\nI am not saying we should change it (see [comment:15](#comment%3A15)), but if we did, it would be smaller.",
    "created_at": "2022-09-09T01:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557251",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [Matthias Köppe](#comment%3A14):
> Replying to [Travis Scrimshaw](#comment%3A13):
> > change to have R<sup>n</sup> vector iterators change to return the pairs?
> 
> 
> That would be a really bad change for dense vectors, which clearly want to be a `collections.abc.Sequence`

I am not saying we should change it (see [comment:15](#comment%3A15)), but if we did, it would be smaller.



---

archive/issue_comments_557252.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [Travis Scrimshaw](#comment%3A15):\n> Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.\n\nYou'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.",
    "created_at": "2022-09-09T01:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557252",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [Travis Scrimshaw](#comment%3A15):
> Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.

You'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.



---

archive/issue_comments_557253.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.\n\nSo maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`",
    "created_at": "2022-09-09T03:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557253",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

I do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.

So maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`



---

archive/issue_comments_557254.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A17):\n> Replying to [Travis Scrimshaw](#comment%3A15):\n> > Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.\n> \n> \n> You'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.\n\nIf we change the iterator for R<sup>n</sup> modules to make it compatible with what `IndexedFreeModuleElement` does, then this would lead to slow downs because the R<sup>n</sup> module elements are fairly likely to be used in time-critical code sections (where extra indirections can matter).",
    "created_at": "2022-09-09T03:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557254",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [Matthias Köppe](#comment%3A17):
> Replying to [Travis Scrimshaw](#comment%3A15):
> > Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.
> 
> 
> You'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.

If we change the iterator for R<sup>n</sup> modules to make it compatible with what `IndexedFreeModuleElement` does, then this would lead to slow downs because the R<sup>n</sup> module elements are fairly likely to be used in time-critical code sections (where extra indirections can matter).



---

archive/issue_comments_557255.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A18):\n> I do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.\n> \n> So maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`\n\n+1 on this basically. I doubt anyone is using the support containment check where speed really matters, but that is my only slight hesitancy because that change would make it much slower (via the additional temporary object from `support()`). Perhaps a `self.index_in_support(i)` method instead?",
    "created_at": "2022-09-09T03:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557255",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [Matthias Köppe](#comment%3A18):
> I do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.
> 
> So maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`

+1 on this basically. I doubt anyone is using the support containment check where speed really matters, but that is my only slight hesitancy because that change would make it much slower (via the additional temporary object from `support()`). Perhaps a `self.index_in_support(i)` method instead?



---

archive/issue_comments_557256.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [Travis Scrimshaw](#comment%3A19):\n> Replying to [Matthias K\u00f6ppe](#comment%3A17):\n> > Replying to [Travis Scrimshaw](#comment%3A15):\n> > > Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.\n> > \n> > \n> > You'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.\n> \n> \n> If we change the iterator for R<sup>n</sup> modules to make it compatible with what `IndexedFreeModuleElement` does\n\nOK, yes, that's just one of several reasons why this change would be bad. It's not being proposed here.",
    "created_at": "2022-09-09T04:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557256",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [Travis Scrimshaw](#comment%3A19):
> Replying to [Matthias Köppe](#comment%3A17):
> > Replying to [Travis Scrimshaw](#comment%3A15):
> > > Unfortunately because of different implementation goals (mainly the speed that is needed for the R<sup>n</sup> modules), we cannot enforce compatibility for everything.
> > 
> > 
> > You'll have to be more concrete than that. There's nothing in the proposed change that has anything to do with performance.
> 
> 
> If we change the iterator for R<sup>n</sup> modules to make it compatible with what `IndexedFreeModuleElement` does

OK, yes, that's just one of several reasons why this change would be bad. It's not being proposed here.



---

archive/issue_comments_557257.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [Travis Scrimshaw](#comment%3A20):\n> Replying to [Matthias K\u00f6ppe](#comment%3A18):\n> > I do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.\n> > \n> > So maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`\n> \n> \n> +1 on this basically. I doubt anyone is using the support containment check where speed really matters, but that is my only slight hesitancy because that change would make it much slower (via the additional temporary object from `support()`). Perhaps a `self.index_in_support(i)` method instead?\n\nYes, of course the current implementation of `support()` is bad. It's another Python2-ish leftover of returning lists all the time.",
    "created_at": "2022-09-09T04:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557257",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [Travis Scrimshaw](#comment%3A20):
> Replying to [Matthias Köppe](#comment%3A18):
> > I do see lots of uses of the idiom `... for (i, c) in self` in `sage.combinat`.
> > 
> > So maybe an easier change would be to get rid of the `__contains__` method (with deprecation, of course) to resolve this incompatibility. Then only uses of `if i in self` would have to be changed to `if i in self.support()`
> 
> 
> +1 on this basically. I doubt anyone is using the support containment check where speed really matters, but that is my only slight hesitancy because that change would make it much slower (via the additional temporary object from `support()`). Perhaps a `self.index_in_support(i)` method instead?

Yes, of course the current implementation of `support()` is bad. It's another Python2-ish leftover of returning lists all the time.



---

archive/issue_comments_557258.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nBy the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros",
    "created_at": "2022-09-09T04:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557258",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros



---

archive/issue_comments_557259.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIf there's no zero value in `_monomial_coefficients`, then `support` can just return the `_monomial_coefficients.keys()` view.",
    "created_at": "2022-09-09T04:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557259",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

If there's no zero value in `_monomial_coefficients`, then `support` can just return the `_monomial_coefficients.keys()` view.



---

archive/issue_comments_557260.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nEither way instead of inventing a new name such as `index_in_support`, we should just have `support` return a suitable object with a `__contains__` method.",
    "created_at": "2022-09-09T04:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557260",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Either way instead of inventing a new name such as `index_in_support`, we should just have `support` return a suitable object with a `__contains__` method.



---

archive/issue_comments_557261.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,9 +12,9 @@\n ```\n but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.\n \n-To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):\n-- Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)\n-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If `self` is a submodule, they refer to the ambient module (see #34455).\n+To improve interoperability, we propose to make the following changes: \n+- Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n+- Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n``````\n",
    "created_at": "2022-09-10T05:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557261",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,9 +12,9 @@
 ```
 but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.
 
-To improve interoperability, we propose to make changes to make it a [collections.abc.Mapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping) (= supporting the operations of a `dict` but without mutability):
-- Because a `Mapping` is a `Collection`, we change the `__iter__` method from yielding (key, value) items to yielding keys only. (Thus it will be compatible with the existing `__contains__` method which check for the presence of a key)
-- Add methods `keys`, `items`, `values` with the semantics familiar from `dict`. If `self` is a submodule, they refer to the ambient module (see #34455).
+To improve interoperability, we propose to make the following changes: 
+- Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
+- Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
``````




---

archive/issue_events_467733.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-10T05:41:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "title_is": "Make IndexedFreeModuleElement compatible with collections.abc, add method items",
    "title_was": "Make IndexedFreeModuleElement a collections.abc.Mapping",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467733"
}
```



---

archive/issue_comments_557262.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,7 @@\n \n To improve interoperability, we propose to make the following changes: \n - Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n+- As a replacement for this functionality, revise the method `support` to return an object with a fast `__contains__` method instead of a list.\n - Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n``````\n",
    "created_at": "2022-09-10T05:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557262",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,7 @@
 
 To improve interoperability, we propose to make the following changes: 
 - Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
+- As a replacement for this functionality, revise the method `support` to return an object with a fast `__contains__` method instead of a list.
 - Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
``````




---

archive/issue_comments_557263.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI've updated the ticket description to reflect this revised plan",
    "created_at": "2022-09-10T05:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557263",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

I've updated the ticket description to reflect this revised plan



---

archive/issue_comments_557264.json:
```json
{
    "body": "Branch: **[u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping)**",
    "created_at": "2022-09-10T22:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557264",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping)**



---

archive/issue_comments_557265.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35b8b6ec6dcbd3dcf25e54937aec668322e5ad1c\"><code>35b8b6e</code></a></td><td><code>ModulesWithBasis.ElementMethod.support: Return a SupportView</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ae8f09538745e3388340d9307e2b661eae0148a\"><code>8ae8f09</code></a></td><td><code>src/sage/combinat/crystals, src/sage/categories/*crystals*: Use collections.abc for isinstance</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242\"><code>c5857f8</code></a></td><td><code>Convert result of support() to list or tuple in two places</code></td></tr></table>\n",
    "created_at": "2022-09-10T22:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557265",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35b8b6ec6dcbd3dcf25e54937aec668322e5ad1c"><code>35b8b6e</code></a></td><td><code>ModulesWithBasis.ElementMethod.support: Return a SupportView</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ae8f09538745e3388340d9307e2b661eae0148a"><code>8ae8f09</code></a></td><td><code>src/sage/combinat/crystals, src/sage/categories/*crystals*: Use collections.abc for isinstance</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242"><code>c5857f8</code></a></td><td><code>Convert result of support() to list or tuple in two places</code></td></tr></table>




---

archive/issue_comments_557266.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,8 +13,8 @@\n but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.\n \n To improve interoperability, we propose to make the following changes: \n-- Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n-- As a replacement for this functionality, revise the method `support` to return an object with a fast `__contains__` method instead of a list.\n+- Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n+- As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.\n - Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n``````\n",
    "created_at": "2022-09-10T22:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557266",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,8 +13,8 @@
 but `__iter__`ating over this collection gives objects that are not `__contain__`ed in it.
 
 To improve interoperability, we propose to make the following changes: 
-- Deprecate the `__contains__` method (currently testing whether a given index is in the suppport). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
-- As a replacement for this functionality, revise the method `support` to return an object with a fast `__contains__` method instead of a list.
+- Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
+- As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.
 - Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
``````




---

archive/issue_comments_557267.json:
```json
{
    "body": "Commit: **[`c5857f8`](https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242)**",
    "created_at": "2022-09-10T22:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557267",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`c5857f8`](https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242)**



---

archive/issue_comments_557268.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347\"><code>12da4ed</code></a></td><td><code>ModulesWithBasis.ElementMethod.len: Use support</code></td></tr></table>\n",
    "created_at": "2022-09-10T22:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557268",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347"><code>12da4ed</code></a></td><td><code>ModulesWithBasis.ElementMethod.len: Use support</code></td></tr></table>




---

archive/issue_comments_557269.json:
```json
{
    "body": "Changed commit from **[`c5857f8`](https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242)** to **[`12da4ed`](https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347)**",
    "created_at": "2022-09-10T22:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557269",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c5857f8`](https://github.com/sagemath/sagetrac-mirror/commit/c5857f82c435f706ddce6ff496949cb3fb9fd242)** to **[`12da4ed`](https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347)**



---

archive/issue_comments_557270.json:
```json
{
    "body": "Changed commit from **[`12da4ed`](https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347)** to **[`31559b2`](https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead)**",
    "created_at": "2022-09-10T22:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557270",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`12da4ed`](https://github.com/sagemath/sagetrac-mirror/commit/12da4ed7451883da43371a0296f0f29a3b9af347)** to **[`31559b2`](https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead)**



---

archive/issue_comments_557271.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ddb29bcae0394d86153231bf2c4e6090bccd757\"><code>1ddb29b</code></a></td><td><code>src/sage/structure/support_view.py: Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead\"><code>31559b2</code></a></td><td><code>IndexedFreeModuleElement.__contains__: Deprecate</code></td></tr></table>\n",
    "created_at": "2022-09-10T22:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557271",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ddb29bcae0394d86153231bf2c4e6090bccd757"><code>1ddb29b</code></a></td><td><code>src/sage/structure/support_view.py: Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead"><code>31559b2</code></a></td><td><code>IndexedFreeModuleElement.__contains__: Deprecate</code></td></tr></table>




---

archive/issue_comments_557272.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb2c92d58022493a6b005e4fcca6e982e41f95ad\"><code>eb2c92d</code></a></td><td><code>ModulesWithBasis.support: Try to cache the SupportView object</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf91ea48ff7409cc2de2fecd236808bb1abd1a06\"><code>bf91ea4</code></a></td><td><code>src/sage/combinat/ncsf_qsym/generic_basis_code.py: Replace deprecated 'index in vector'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d\"><code>b3abc6c</code></a></td><td><code>src/sage/combinat/sf/sfa.py: Replace deprecated 'index in vector'</code></td></tr></table>\n",
    "created_at": "2022-09-10T23:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb2c92d58022493a6b005e4fcca6e982e41f95ad"><code>eb2c92d</code></a></td><td><code>ModulesWithBasis.support: Try to cache the SupportView object</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf91ea48ff7409cc2de2fecd236808bb1abd1a06"><code>bf91ea4</code></a></td><td><code>src/sage/combinat/ncsf_qsym/generic_basis_code.py: Replace deprecated 'index in vector'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d"><code>b3abc6c</code></a></td><td><code>src/sage/combinat/sf/sfa.py: Replace deprecated 'index in vector'</code></td></tr></table>




---

archive/issue_comments_557273.json:
```json
{
    "body": "Changed commit from **[`31559b2`](https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead)** to **[`b3abc6c`](https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d)**",
    "created_at": "2022-09-10T23:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557273",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31559b2`](https://github.com/sagemath/sagetrac-mirror/commit/31559b26eacad4c2d1591bd8212d3b4e4f3fcead)** to **[`b3abc6c`](https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d)**



---

archive/issue_comments_557274.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-09-10T23:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557274",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_467734.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-10T23:18:55Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "title_is": "Make IndexedFreeModuleElement compatible with collections.abc, change method support to return a SupportView",
    "title_was": "Make IndexedFreeModuleElement compatible with collections.abc, add method items",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467734"
}
```



---

archive/issue_comments_557275.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n To improve interoperability, we propose to make the following changes: \n - Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. \n - As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.\n-- Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).\n+\n \n (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)\n \n``````\n",
    "created_at": "2022-09-10T23:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557275",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 To improve interoperability, we propose to make the following changes: 
 - Deprecate the `__contains__` method (currently testing whether a given index is in the support). After its removal, the class would no longer be considered by Python to be a subclass of `collections.abc.Collection`, but merely a `Sized` `Iterable`. 
 - As a replacement for this functionality, revise the method `support` to return an instance of a new class `SupportView`, which provides a fast `__contains__` method, instead of a list.
-- Add a method `items`, with the same semantics as for sparse vectors from `sage.modules`, and matrices and tensor components after #29619. If `self` is a submodule, they refer to the ambient module (see #34455).
+
 
 (Similarly, in #24815, it was proposed to make the elements of free modules from `sage.modules` a [collections.abc.Sequence](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence).)
 
``````




---

archive/issue_comments_557276.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe proposed method `items` will be added in #34511",
    "created_at": "2022-09-10T23:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557276",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

The proposed method `items` will be added in #34511



---

archive/issue_comments_557277.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A23):\n> By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros\n\nWe have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper, although checking containment could still be slow as it might be `list`-like checking rather than `set`-like. Anyways, I doubt it is used in much time critical code, but it is still good to keep similar performance in mind.",
    "created_at": "2022-09-10T23:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557277",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [Matthias Köppe](#comment%3A23):
> By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros

We have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper, although checking containment could still be slow as it might be `list`-like checking rather than `set`-like. Anyways, I doubt it is used in much time critical code, but it is still good to keep similar performance in mind.



---

archive/issue_comments_557278.json:
```json
{
    "body": "Changed commit from **[`b3abc6c`](https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d)** to **[`82d8b62`](https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f)**",
    "created_at": "2022-09-10T23:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557278",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3abc6c`](https://github.com/sagemath/sagetrac-mirror/commit/b3abc6c4094959e0ab6b75a67c06c8ce1acb004d)** to **[`82d8b62`](https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f)**



---

archive/issue_comments_557279.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f\"><code>82d8b62</code></a></td><td><code>src/sage/structure/support_view.py: Add tests</code></td></tr></table>\n",
    "created_at": "2022-09-10T23:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557279",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f"><code>82d8b62</code></a></td><td><code>src/sage/structure/support_view.py: Add tests</code></td></tr></table>




---

archive/issue_comments_557280.json:
```json
{
    "body": "Changed commit from **[`82d8b62`](https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f)** to **[`1f48aa0`](https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc)**",
    "created_at": "2022-09-10T23:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557280",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82d8b62`](https://github.com/sagemath/sagetrac-mirror/commit/82d8b62091f58f3ff68a8287be7e30515000f61f)** to **[`1f48aa0`](https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc)**



---

archive/issue_comments_557281.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc\"><code>1f48aa0</code></a></td><td><code>src/sage/structure/support_view.py: Add more tests</code></td></tr></table>\n",
    "created_at": "2022-09-10T23:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557281",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc"><code>1f48aa0</code></a></td><td><code>src/sage/structure/support_view.py: Add more tests</code></td></tr></table>




---

archive/issue_comments_557282.json:
```json
{
    "body": "Changed commit from **[`1f48aa0`](https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc)** to **[`2583a37`](https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d)**",
    "created_at": "2022-09-11T00:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557282",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f48aa0`](https://github.com/sagemath/sagetrac-mirror/commit/1f48aa0a04db254a63ad3eb953d64f167a2295cc)** to **[`2583a37`](https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d)**



---

archive/issue_comments_557283.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d\"><code>2583a37</code></a></td><td><code>IndexedFreeModuleElement: Add doc</code></td></tr></table>\n",
    "created_at": "2022-09-11T00:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d"><code>2583a37</code></a></td><td><code>IndexedFreeModuleElement: Add doc</code></td></tr></table>




---

archive/issue_comments_557284.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [Travis Scrimshaw](#comment%3A37):\n> Replying to [Matthias K\u00f6ppe](#comment%3A23):\n> > By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros\n> \n> \n> We have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper\n\nOn the level of `CombinatorialFreeModule`, not the category, right? We can do that in a follow-up ticket. (The tensor modules don't enforce the sparsity, I think.)",
    "created_at": "2022-09-11T00:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557284",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [Travis Scrimshaw](#comment%3A37):
> Replying to [Matthias Köppe](#comment%3A23):
> > By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros
> 
> 
> We have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper

On the level of `CombinatorialFreeModule`, not the category, right? We can do that in a follow-up ticket. (The tensor modules don't enforce the sparsity, I think.)



---

archive/issue_events_467735.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-11T00:08:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467735"
}
```



---

archive/issue_comments_557285.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThis could of course be rewritten to avoid forming all these lists, but I don't know if it's worth it. Question for the author\n\n```\nindex aa96f2b..e065b7e 100644\n--- a/src/sage/categories/loop_crystals.py\n+++ b/src/sage/categories/loop_crystals.py\n@@ -456,7 +456,7 @@ class KirillovReshetikhinCrystals(Category_singleton):\n             bsharp = None\n             for b in self:\n                 phi = b.Phi()\n-                if phi.support() == [0] and phi[0] < ell:\n+                if list(phi.support()) == [0] and phi[0] < ell:\n                     bsharp = b\n```",
    "created_at": "2022-09-11T00:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557285",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

This could of course be rewritten to avoid forming all these lists, but I don't know if it's worth it. Question for the author

```
index aa96f2b..e065b7e 100644
--- a/src/sage/categories/loop_crystals.py
+++ b/src/sage/categories/loop_crystals.py
@@ -456,7 +456,7 @@ class KirillovReshetikhinCrystals(Category_singleton):
             bsharp = None
             for b in self:
                 phi = b.Phi()
-                if phi.support() == [0] and phi[0] < ell:
+                if list(phi.support()) == [0] and phi[0] < ell:
                     bsharp = b
```



---

archive/issue_comments_557286.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900\"><code>88fe278</code></a></td><td><code>src/sage/structure/support_view.py: Fix doctest output</code></td></tr></table>\n",
    "created_at": "2022-09-11T00:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900"><code>88fe278</code></a></td><td><code>src/sage/structure/support_view.py: Fix doctest output</code></td></tr></table>




---

archive/issue_comments_557287.json:
```json
{
    "body": "Changed commit from **[`2583a37`](https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d)** to **[`88fe278`](https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900)**",
    "created_at": "2022-09-11T00:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557287",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2583a37`](https://github.com/sagemath/sagetrac-mirror/commit/2583a37c57bf2ea04c48eec6cc65a45b02c4938d)** to **[`88fe278`](https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900)**



---

archive/issue_comments_557288.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A41):\n> Replying to [Travis Scrimshaw](#comment%3A37):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A23):\n> > > By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros\n> > \n> > \n> > We have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper\n> \n> \n> On the level of `CombinatorialFreeModule`, not the category, right? We can do that in a follow-up ticket. (The tensor modules don't enforce the sparsity, I think.)\n\nI was thinking more for any `Parent` that uses the element class, but basically, yes.",
    "created_at": "2022-09-11T00:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557288",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [Matthias Köppe](#comment%3A41):
> Replying to [Travis Scrimshaw](#comment%3A37):
> > Replying to [Matthias Köppe](#comment%3A23):
> > > By the way, can `_monomial_coefficients` really contain keys that have a zero value? I looked briefly and it seemed that for example arithmetic would always remove the zeros
> > 
> > 
> > We have somewhat allowed for the possibility that it can hold zero coefficients, but we almost always in practice just remove them. We probably should just enforce this. This would make the `support()` call much cheaper
> 
> 
> On the level of `CombinatorialFreeModule`, not the category, right? We can do that in a follow-up ticket. (The tensor modules don't enforce the sparsity, I think.)

I was thinking more for any `Parent` that uses the element class, but basically, yes.



---

archive/issue_comments_557289.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nSure, yes, that's what I meant.",
    "created_at": "2022-09-11T00:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557289",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Sure, yes, that's what I meant.



---

archive/issue_comments_557290.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A43):\n> This could of course be rewritten to avoid forming all these lists, but I don't know if it's worth it. Question for the author\n> \n> ```\n> index aa96f2b..e065b7e 100644\n> --- a/src/sage/categories/loop_crystals.py\n> +++ b/src/sage/categories/loop_crystals.py\n> @@ -456,7 +456,7 @@ class KirillovReshetikhinCrystals(Category_singleton):\n>              bsharp = None\n>              for b in self:\n>                  phi = b.Phi()\n> -                if phi.support() == [0] and phi[0] < ell:\n> +                if list(phi.support()) == [0] and phi[0] < ell:\n>                      bsharp = b\n> ```\n\nI don\u2019t think it is necessarily worth it as it won\u2019t be run in tight loops. Although it would just become `if len(phi.support()) == 1 and 0 in phi.support() and phi[0] < ell:` I guess.",
    "created_at": "2022-09-11T00:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557290",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [Matthias Köppe](#comment%3A43):
> This could of course be rewritten to avoid forming all these lists, but I don't know if it's worth it. Question for the author
> 
> ```
> index aa96f2b..e065b7e 100644
> --- a/src/sage/categories/loop_crystals.py
> +++ b/src/sage/categories/loop_crystals.py
> @@ -456,7 +456,7 @@ class KirillovReshetikhinCrystals(Category_singleton):
>              bsharp = None
>              for b in self:
>                  phi = b.Phi()
> -                if phi.support() == [0] and phi[0] < ell:
> +                if list(phi.support()) == [0] and phi[0] < ell:
>                      bsharp = b
> ```

I don’t think it is necessarily worth it as it won’t be run in tight loops. Although it would just become `if len(phi.support()) == 1 and 0 in phi.support() and phi[0] < ell:` I guess.



---

archive/issue_comments_557291.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?",
    "created_at": "2022-09-11T00:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557291",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

I guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?



---

archive/issue_comments_557292.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nWell, using `len(phi.support())` wouldn't be much better because `len` has to iterate through the whole thing. \nFaster would be to do \n\n```\n  i = iter(phi)\n  next(i)\n  try: next(i) except ...\n```",
    "created_at": "2022-09-11T00:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557292",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Well, using `len(phi.support())` wouldn't be much better because `len` has to iterate through the whole thing. 
Faster would be to do 

```
  i = iter(phi)
  next(i)
  try: next(i) except ...
```



---

archive/issue_comments_557293.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [Travis Scrimshaw](#comment%3A48):\n> I guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?\n\nWell, I think that's problematic because we don't even have `[1, 2] == (1, 2)`",
    "created_at": "2022-09-11T00:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557293",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [Travis Scrimshaw](#comment%3A48):
> I guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?

Well, I think that's problematic because we don't even have `[1, 2] == (1, 2)`



---

archive/issue_comments_557294.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A49):\n> Well, using `len(phi.support())` wouldn't be much better because `len` has to iterate through the whole thing. \n> Faster would be to do \n> \n> ```\n>   i = iter(phi)\n>   next(i)\n>   try: next(i) except ...\n> ```\n\nTrue, and that is complicated in an `if` statement.",
    "created_at": "2022-09-11T00:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557294",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [Matthias Köppe](#comment%3A49):
> Well, using `len(phi.support())` wouldn't be much better because `len` has to iterate through the whole thing. 
> Faster would be to do 
> 
> ```
>   i = iter(phi)
>   next(i)
>   try: next(i) except ...
> ```

True, and that is complicated in an `if` statement.



---

archive/issue_comments_557295.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nClear use case for https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.take",
    "created_at": "2022-09-11T00:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557295",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Clear use case for https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.take



---

archive/issue_comments_557296.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nor https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.strictly_n",
    "created_at": "2022-09-11T00:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557296",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

or https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.strictly_n



---

archive/issue_comments_557297.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nor https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.only",
    "created_at": "2022-09-11T00:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557297",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

or https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.only



---

archive/issue_comments_557298.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A50):\n> Replying to [Travis Scrimshaw](#comment%3A48):\n> > I guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?\n> \n> \n> Well, I think that's problematic because we don't even have `[1, 2] == (1, 2)`\n\nTransitivity of `==` is indeed good to have. Well, maybe just comparisons with a list then? Or at least temporarily with a deprecation?",
    "created_at": "2022-09-11T00:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557298",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [Matthias Köppe](#comment%3A50):
> Replying to [Travis Scrimshaw](#comment%3A48):
> > I guess one other option would be the `SupportView` to support comparisons with lists (and/or tuple)?
> 
> 
> Well, I think that's problematic because we don't even have `[1, 2] == (1, 2)`

Transitivity of `==` is indeed good to have. Well, maybe just comparisons with a list then? Or at least temporarily with a deprecation?



---

archive/issue_comments_557299.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nThat would be doable but I think it's overkill.\n\nI think the license to break functions like this, from the Python 2 to 3 transition, is not expired yet",
    "created_at": "2022-09-11T00:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557299",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

That would be doable but I think it's overkill.

I think the license to break functions like this, from the Python 2 to 3 transition, is not expired yet



---

archive/issue_comments_557300.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThis is a little different as it was the support of a vector, not the keys of a `dict`.",
    "created_at": "2022-09-11T00:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557300",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:57" align="right">comment:57</div>

This is a little different as it was the support of a vector, not the keys of a `dict`.



---

archive/issue_comments_557301.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI'm referring to the general change in the Python library from explicit lists as return values to iterators",
    "created_at": "2022-09-11T00:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557301",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

I'm referring to the general change in the Python library from explicit lists as return values to iterators



---

archive/issue_comments_557302.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI think that would need a more general policy agreement discussed on sage-devel (as much as I would like to freely do this to a number of functions).",
    "created_at": "2022-09-11T00:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557302",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:59" align="right">comment:59</div>

I think that would need a more general policy agreement discussed on sage-devel (as much as I would like to freely do this to a number of functions).



---

archive/issue_comments_557303.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e\"><code>026d8a5</code></a></td><td><code>src/sage/algebras/steenrod/steenrod_algebra.py: Use key=...tuple(....support()) for sorting by lex support</code></td></tr></table>\n",
    "created_at": "2022-09-11T00:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557303",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e"><code>026d8a5</code></a></td><td><code>src/sage/algebras/steenrod/steenrod_algebra.py: Use key=...tuple(....support()) for sorting by lex support</code></td></tr></table>




---

archive/issue_comments_557304.json:
```json
{
    "body": "Changed commit from **[`88fe278`](https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900)** to **[`026d8a5`](https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e)**",
    "created_at": "2022-09-11T00:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557304",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88fe278`](https://github.com/sagemath/sagetrac-mirror/commit/88fe278795354296ad74dcc41b61b2aeb301d900)** to **[`026d8a5`](https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e)**



---

archive/issue_comments_557305.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nOK, OK, I'll write an `__eq__` method with deprecation",
    "created_at": "2022-09-11T00:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557305",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

OK, OK, I'll write an `__eq__` method with deprecation



---

archive/issue_comments_557306.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThank you. (So many things that return lists in `combinat` that would be better as iterators\u2026)",
    "created_at": "2022-09-11T01:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557306",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:62" align="right">comment:62</div>

Thank you. (So many things that return lists in `combinat` that would be better as iterators…)



---

archive/issue_comments_557307.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nHa, this does catch a few places that do such comparisons",
    "created_at": "2022-09-11T01:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557307",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

Ha, this does catch a few places that do such comparisons



---

archive/issue_comments_557308.json:
```json
{
    "body": "Changed commit from **[`026d8a5`](https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e)** to **[`a417411`](https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e)**",
    "created_at": "2022-09-11T01:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557308",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`026d8a5`](https://github.com/sagemath/sagetrac-mirror/commit/026d8a5061f8d7de5e6366679f7047e4a83f541e)** to **[`a417411`](https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e)**



---

archive/issue_comments_557309.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e\"><code>a417411</code></a></td><td><code>SupportView.__eq__, __ne__: New</code></td></tr></table>\n",
    "created_at": "2022-09-11T01:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557309",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e"><code>a417411</code></a></td><td><code>SupportView.__eq__, __ne__: New</code></td></tr></table>




---

archive/issue_comments_557310.json:
```json
{
    "body": "Changed commit from **[`a417411`](https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e)** to **[`b80989f`](https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498)**",
    "created_at": "2022-09-11T01:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557310",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a417411`](https://github.com/sagemath/sagetrac-mirror/commit/a4174115ef0899344ecfb301c42f032de5b1950e)** to **[`b80989f`](https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498)**



---

archive/issue_comments_557311.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498\"><code>b80989f</code></a></td><td><code>src/sage/combinat/sf/character.py: Use list(....support())</code></td></tr></table>\n",
    "created_at": "2022-09-11T01:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557311",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498"><code>b80989f</code></a></td><td><code>src/sage/combinat/sf/character.py: Use list(....support())</code></td></tr></table>




---

archive/issue_comments_557312.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nok, done",
    "created_at": "2022-09-11T01:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">comment:66</div>

ok, done



---

archive/issue_comments_557313.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nShould we also do comparisons with different `SupportView` objects, following python?\n\n```\nsage: d = {1:1, 2:2}\nsage: dp = {1:-1, 2:-2}\nsage: d.keys() == dp.keys()\nTrue\n```\nSorry if this was something you were planning to support and hadn\u2019t gotten to that stage yet.",
    "created_at": "2022-09-11T01:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557313",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:67" align="right">comment:67</div>

Should we also do comparisons with different `SupportView` objects, following python?

```
sage: d = {1:1, 2:2}
sage: dp = {1:-1, 2:-2}
sage: d.keys() == dp.keys()
True
```
Sorry if this was something you were planning to support and hadn’t gotten to that stage yet.



---

archive/issue_comments_557314.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A66):\n> ok, done\n\nThank you.",
    "created_at": "2022-09-11T01:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557314",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [Matthias Köppe](#comment%3A66):
> ok, done

Thank you.



---

archive/issue_comments_557315.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [Travis Scrimshaw](#comment%3A67):\n> Should we also do comparisons with different `SupportView` objects, following python?\n> \n> ```\n> sage: d = {1:1, 2:2}\n> sage: dp = {1:-1, 2:-2}\n> sage: d.keys() == dp.keys()\n> True\n> ```\n> Sorry if this was something you were planning to support and hadn\u2019t gotten to that stage yet.\n\nI'm unsure about this, and I think I would defer it to a follow-up ticket.\n\nIt could get full `collections.abc.Set` semantics actually, including `<=` as subset test etc. But that's a bit more work",
    "created_at": "2022-09-11T01:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557315",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [Travis Scrimshaw](#comment%3A67):
> Should we also do comparisons with different `SupportView` objects, following python?
> 
> ```
> sage: d = {1:1, 2:2}
> sage: dp = {1:-1, 2:-2}
> sage: d.keys() == dp.keys()
> True
> ```
> Sorry if this was something you were planning to support and hadn’t gotten to that stage yet.

I'm unsure about this, and I think I would defer it to a follow-up ticket.

It could get full `collections.abc.Set` semantics actually, including `<=` as subset test etc. But that's a bit more work



---

archive/issue_comments_557316.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nIn view of #29218, I would also move `__iter__` from `IndexedFreeModuleElement` to the category, next to `__len__`. Together they merely provide a default implementation of the `Sized` `Iterable` protocols. (Dense modules necessarily override both.)\n\nThe `length` method, on the other hand, is full specified and would be changed to not go through `__len__`.",
    "created_at": "2022-09-11T02:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557316",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

In view of #29218, I would also move `__iter__` from `IndexedFreeModuleElement` to the category, next to `__len__`. Together they merely provide a default implementation of the `Sized` `Iterable` protocols. (Dense modules necessarily override both.)

The `length` method, on the other hand, is full specified and would be changed to not go through `__len__`.



---

archive/issue_comments_557317.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nBut that will go to #29218.",
    "created_at": "2022-09-11T02:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557317",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:71" align="right">comment:71</div>

But that will go to #29218.



---

archive/issue_events_467736.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-11T04:10:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467736"
}
```



---

archive/issue_events_467737.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-11T04:10:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467737"
}
```



---

archive/issue_comments_557318.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\n\n```\nsage -t --random-seed=124699541928353137721504742146487601068 doc/en/thematic_tutorials/lie/weyl_character_ring.rst  # 3 doctests failed\nsage -t --random-seed=124699541928353137721504742146487601068 sage/algebras/quantum_groups/fock_space.py  # 80 doctests failed\nsage -t --random-seed=124699541928353137721504742146487601068 sage/graphs/generators/random.py  # 1 doctest failed\nsage -t --random-seed=124699541928353137721504742146487601068 sage/modules/tutorial_free_modules.py  # 1 doctest failed\n```",
    "created_at": "2022-09-11T04:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557318",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>


```
sage -t --random-seed=124699541928353137721504742146487601068 doc/en/thematic_tutorials/lie/weyl_character_ring.rst  # 3 doctests failed
sage -t --random-seed=124699541928353137721504742146487601068 sage/algebras/quantum_groups/fock_space.py  # 80 doctests failed
sage -t --random-seed=124699541928353137721504742146487601068 sage/graphs/generators/random.py  # 1 doctest failed
sage -t --random-seed=124699541928353137721504742146487601068 sage/modules/tutorial_free_modules.py  # 1 doctest failed
```



---

archive/issue_comments_557319.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da\"><code>57273ea</code></a></td><td><code>src/doc/en/thematic_tutorials/lie/weyl_character_ring.rst: Use key=...tuple(....support()) for sorting by lex support</code></td></tr></table>\n",
    "created_at": "2022-09-11T04:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557319",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da"><code>57273ea</code></a></td><td><code>src/doc/en/thematic_tutorials/lie/weyl_character_ring.rst: Use key=...tuple(....support()) for sorting by lex support</code></td></tr></table>




---

archive/issue_comments_557320.json:
```json
{
    "body": "Changed commit from **[`b80989f`](https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498)** to **[`57273ea`](https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da)**",
    "created_at": "2022-09-11T04:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557320",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b80989f`](https://github.com/sagemath/sagetrac-mirror/commit/b80989ff00667e5578f04a28a3d7ec6ff679c498)** to **[`57273ea`](https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da)**



---

archive/issue_comments_557321.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ce669c687776a781f01c86439fc8739a25eb4cc\"><code>6ce669c</code></a></td><td><code>src/sage/modules/tutorial_free_modules.py: Fix doctest output</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede\"><code>2fe3b98</code></a></td><td><code>src/sage/algebras/quantum_groups/fock_space.py: Use sorted() with support, not sort</code></td></tr></table>\n",
    "created_at": "2022-09-11T04:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557321",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ce669c687776a781f01c86439fc8739a25eb4cc"><code>6ce669c</code></a></td><td><code>src/sage/modules/tutorial_free_modules.py: Fix doctest output</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede"><code>2fe3b98</code></a></td><td><code>src/sage/algebras/quantum_groups/fock_space.py: Use sorted() with support, not sort</code></td></tr></table>




---

archive/issue_comments_557322.json:
```json
{
    "body": "Changed commit from **[`57273ea`](https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da)** to **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**",
    "created_at": "2022-09-11T04:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557322",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57273ea`](https://github.com/sagemath/sagetrac-mirror/commit/57273ea3262a27501953d1af04f6d8f35110b0da)** to **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**



---

archive/issue_comments_557323.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThe failure in `sage/graphs/generators/random.py` is an unrelated random failure, I've added it to #32544.",
    "created_at": "2022-09-11T04:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557323",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:75" align="right">comment:75</div>

The failure in `sage/graphs/generators/random.py` is an unrelated random failure, I've added it to #32544.



---

archive/issue_events_467738.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-11T04:23:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467738"
}
```



---

archive/issue_events_467739.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-11T04:23:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467739"
}
```



---

archive/issue_comments_557324.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nAll morally green, ready for review\n\n(The Build&Test failure is another well-known random failure, in `sage/schemes/toric/sheaf/klyachko.py`, and Lint failures are known and unrelated.)",
    "created_at": "2022-09-11T17:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557324",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">comment:77</div>

All morally green, ready for review

(The Build&Test failure is another well-known random failure, in `sage/schemes/toric/sheaf/klyachko.py`, and Lint failures are known and unrelated.)



---

archive/issue_events_467740.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-20T07:57:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467740"
}
```



---

archive/issue_events_467741.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-20T07:57:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467741"
}
```



---

archive/issue_comments_557325.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-09-20T07:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557325",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_557326.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nSorry, lost track of this. LGTM.",
    "created_at": "2022-09-20T07:57:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557326",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:78" align="right">comment:78</div>

Sorry, lost track of this. LGTM.



---

archive/issue_comments_557327.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nThank you!",
    "created_at": "2022-09-20T16:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557327",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

Thank you!



---

archive/issue_events_467742.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-22T22:35:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467742"
}
```



---

archive/issue_events_467743.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4db51ba832e77886c9f42c2ada4be83106191261",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-09-22T22:35:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34509#event-467743"
}
```



---

archive/issue_comments_557328.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping)** to **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**",
    "created_at": "2022-09-22T22:35:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34509",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34509#issuecomment-557328",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_indexedfreemoduleelement_a_collections_abc_mapping)** to **[`2fe3b98`](https://github.com/sagemath/sagetrac-mirror/commit/2fe3b981c7ebf07dfe8992d5f591b3bb73841ede)**
