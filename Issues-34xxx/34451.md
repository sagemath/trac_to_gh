# Issue 34451: sage.tensor: Canonicalize sym, antisym

archive/issues_034214.json:
```json
{
    "body": "for #30229.\n\nThe new static method `CompWithSym._canonicalize_sym_antisym` brings `sym` and `antisym` into a canonical form as sorted tuples of sorted tuples, with trivial symmetries and antisymmetries dropped.\n\nUsing it also removes some code duplication.\n\n\nCC:  @egourgoulhon\n\nBranch/Commit: 66009e7700f8fc0610dc494a09089070bb6f609a\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/34451\n\n",
    "closed_at": "2022-09-22T22:35:26Z",
    "created_at": "2022-08-29T17:21:32Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "sage.tensor: Canonicalize sym, antisym",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34451",
    "user": "https://github.com/mkoeppe"
}
```
for #30229.

The new static method `CompWithSym._canonicalize_sym_antisym` brings `sym` and `antisym` into a canonical form as sorted tuples of sorted tuples, with trivial symmetries and antisymmetries dropped.

Using it also removes some code duplication.


CC:  @egourgoulhon

Branch/Commit: 66009e7700f8fc0610dc494a09089070bb6f609a

Reviewer: Eric Gourgoulhon

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/34451





---

archive/issue_comments_686214.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-08-29T18:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686214",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_686215.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/sage_tensor__canonicalize_sym__antisym\"",
    "created_at": "2022-08-29T19:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686215",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/sage_tensor__canonicalize_sym__antisym"



---

archive/issue_comments_686216.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2022-08-29T19:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686216",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_686217.json:
```json
{
    "body": "Changing commit from \"\" to \"9f15e00a4396a993fe412b41993cd542d4f177a0\"",
    "created_at": "2022-08-29T19:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686217",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9f15e00a4396a993fe412b41993cd542d4f177a0"



---

archive/issue_comments_686218.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-for #30229\n+for #30229.\n+\n+The new static method `CompWithSym._canonicalize_sym_antisym` brings `sym` and `antisym` into a canonical form as sorted tuples of sorted tuples, with trivial symmetries and antisymmetries dropped.\n+\n+Using it also removes some code duplication.\n+\n``````\n",
    "created_at": "2022-08-29T19:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686218",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-for #30229
+for #30229.
+
+The new static method `CompWithSym._canonicalize_sym_antisym` brings `sym` and `antisym` into a canonical form as sorted tuples of sorted tuples, with trivial symmetries and antisymmetries dropped.
+
+Using it also removes some code duplication.
+
``````




---

archive/issue_comments_686219.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-29T19:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686219",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_686220.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks for introducing this and removing the code duplication!\n\nIt would useful to add `INPUT` and `OUTPUT` fields in the docstring of `_canonicalize_sym_antisym`. \nBesides, I don't understand this change:\n\n```diff\n-                if len(isym) < 2:\n-                    raise IndexError(\"at least two index positions must be \" +\n-                                     \"provided to define a symmetry\")\n+                if len(isym) < 2:\n+                    # Drop trivial symmetry\n+                    continue\n```\nShouldn't an error be raised if the input pretends to define a symmetry/antisymmetry with less than  2 index positions?",
    "created_at": "2022-09-01T08:20:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686220",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:4'></a>Thanks for introducing this and removing the code duplication!

It would useful to add `INPUT` and `OUTPUT` fields in the docstring of `_canonicalize_sym_antisym`. 
Besides, I don't understand this change:

```diff
-                if len(isym) < 2:
-                    raise IndexError("at least two index positions must be " +
-                                     "provided to define a symmetry")
+                if len(isym) < 2:
+                    # Drop trivial symmetry
+                    continue
```
Shouldn't an error be raised if the input pretends to define a symmetry/antisymmetry with less than  2 index positions?



---

archive/issue_comments_686221.json:
```json
{
    "body": "<a id='comment:5'></a>In this version of this code:\n\n```\ndiff --git a/src/sage/tensor/modules/free_module_tensor.py b/src/sage/tensor/modules/free_module_tensor.py\nindex bbcc1ec..4d6d05c 100644\n--- a/src/sage/tensor/modules/free_module_tensor.py\n+++ b/src/sage/tensor/modules/free_module_tensor.py\n@@ -309,41 +309,8 @@ class FreeModuleTensor(ModuleElementWithMutability):\n                               # bases, with the bases as keys (initially empty)\n \n         # Treatment of symmetry declarations:\n-        self._sym = []\n-        if sym is not None and sym != []:\n-            if isinstance(sym[0], (int, Integer)):\n-                # a single symmetry is provided as a tuple -> 1-item list:\n-                sym = [tuple(sym)]\n-            for isym in sym:\n-                if len(isym) > 1:\n-                    for i in isym:\n```\n... the trivial symmetries were dropped silently.\n\nI suppose I can add a parameter `trivial_symmetries='error'` for the cases where you'd like to see the errors.",
    "created_at": "2022-09-01T14:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686221",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>In this version of this code:

```
diff --git a/src/sage/tensor/modules/free_module_tensor.py b/src/sage/tensor/modules/free_module_tensor.py
index bbcc1ec..4d6d05c 100644
--- a/src/sage/tensor/modules/free_module_tensor.py
+++ b/src/sage/tensor/modules/free_module_tensor.py
@@ -309,41 +309,8 @@ class FreeModuleTensor(ModuleElementWithMutability):
                               # bases, with the bases as keys (initially empty)
 
         # Treatment of symmetry declarations:
-        self._sym = []
-        if sym is not None and sym != []:
-            if isinstance(sym[0], (int, Integer)):
-                # a single symmetry is provided as a tuple -> 1-item list:
-                sym = [tuple(sym)]
-            for isym in sym:
-                if len(isym) > 1:
-                    for i in isym:
```
... the trivial symmetries were dropped silently.

I suppose I can add a parameter `trivial_symmetries='error'` for the cases where you'd like to see the errors.



---

archive/issue_comments_686222.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T16:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686223.json:
```json
{
    "body": "Changing commit from \"9f15e00a4396a993fe412b41993cd542d4f177a0\" to \"ffea896b41332047c9f6594358b8706873023c2e\"",
    "created_at": "2022-09-01T16:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686223",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9f15e00a4396a993fe412b41993cd542d4f177a0" to "ffea896b41332047c9f6594358b8706873023c2e"



---

archive/issue_comments_686224.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T16:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686224",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686225.json:
```json
{
    "body": "Changing commit from \"ffea896b41332047c9f6594358b8706873023c2e\" to \"fed09d56502962e93ee9f1981a3eb6af70dbe42f\"",
    "created_at": "2022-09-01T16:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ffea896b41332047c9f6594358b8706873023c2e" to "fed09d56502962e93ee9f1981a3eb6af70dbe42f"



---

archive/issue_comments_686226.json:
```json
{
    "body": "Changing commit from \"fed09d56502962e93ee9f1981a3eb6af70dbe42f\" to \"421c660af21de39acfcf53dc895d51064024fd6e\"",
    "created_at": "2022-09-01T16:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fed09d56502962e93ee9f1981a3eb6af70dbe42f" to "421c660af21de39acfcf53dc895d51064024fd6e"



---

archive/issue_comments_686227.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T16:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686228.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:5 mkoeppe]:\n> In this version of this code:\n\n>\n> ... the trivial symmetries were dropped silently.\n\n\nTrue...\n\n> I suppose I can add a parameter `trivial_symmetries='error'` for the cases where you'd like to see the errors.\n\n\nI am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? \n\n---\nNew commits:",
    "created_at": "2022-09-01T16:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686228",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:9'></a>Replying to [comment:5 mkoeppe]:
> In this version of this code:

>
> ... the trivial symmetries were dropped silently.


True...

> I suppose I can add a parameter `trivial_symmetries='error'` for the cases where you'd like to see the errors.


I am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? 

---
New commits:



---

archive/issue_comments_686229.json:
```json
{
    "body": "Changing commit from \"421c660af21de39acfcf53dc895d51064024fd6e\" to \"a1a3f364657633f837a59022e85f0a4ba72c2512\"",
    "created_at": "2022-09-01T16:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "421c660af21de39acfcf53dc895d51064024fd6e" to "a1a3f364657633f837a59022e85f0a4ba72c2512"



---

archive/issue_comments_686230.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T16:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686231.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T16:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686232.json:
```json
{
    "body": "Changing commit from \"a1a3f364657633f837a59022e85f0a4ba72c2512\" to \"8a2c71a6d56ca08d8fb5793ec0cd3faa4682850f\"",
    "created_at": "2022-09-01T16:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a1a3f364657633f837a59022e85f0a4ba72c2512" to "8a2c71a6d56ca08d8fb5793ec0cd3faa4682850f"



---

archive/issue_comments_686233.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 egourgoulhon]:\n> I am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? \n\n\nOne index (whether symmetry or antisymmetry) just means that there's a symmetry group of 1 element acting. This element is the identity",
    "created_at": "2022-09-01T17:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686233",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:9 egourgoulhon]:
> I am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? 


One index (whether symmetry or antisymmetry) just means that there's a symmetry group of 1 element acting. This element is the identity



---

archive/issue_comments_686234.json:
```json
{
    "body": "<a id='comment:13'></a>I ran into this, by the way, using `dual_ext_power` of order 1: It is passing `antisym=range(1)`.",
    "created_at": "2022-09-01T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686234",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>I ran into this, by the way, using `dual_ext_power` of order 1: It is passing `antisym=range(1)`.



---

archive/issue_comments_686235.json:
```json
{
    "body": "<a id='comment:14'></a>I've worked a bit more on the branch and have removed some more code duplication. Ready for another look",
    "created_at": "2022-09-01T17:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686235",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>I've worked a bit more on the branch and have removed some more code duplication. Ready for another look



---

archive/issue_comments_686236.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:12 mkoeppe]:\n> Replying to [comment:9 egourgoulhon]:\n> > I am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? \n\n> \n> One index (whether symmetry or antisymmetry) just means that there's a symmetry group of 1 element acting. This element is the identity\n\n\nThanks for the explanation. I see now: since the signature of the identity is +1, this makes sense. \nThen, I would vote for reverting to the original version, i.e. that without the extra argument `trivial_symmetries`: this adds an extra test and we might want a rather fast method here; moreover, I don't see any use case of `trivial_symmetries='error'`. Sorry for the noise... Anyway, I leave it to you...",
    "created_at": "2022-09-01T18:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686236",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:15'></a>Replying to [comment:12 mkoeppe]:
> Replying to [comment:9 egourgoulhon]:
> > I am wondering about what should be meant by *trivial symmetry*, especially for an antisymmetry: if only a single index position is provided, is there any meaning in stating that the components are antisymmetric with respect to this position? 

> 
> One index (whether symmetry or antisymmetry) just means that there's a symmetry group of 1 element acting. This element is the identity


Thanks for the explanation. I see now: since the signature of the identity is +1, this makes sense. 
Then, I would vote for reverting to the original version, i.e. that without the extra argument `trivial_symmetries`: this adds an extra test and we might want a rather fast method here; moreover, I don't see any use case of `trivial_symmetries='error'`. Sorry for the noise... Anyway, I leave it to you...



---

archive/issue_comments_686237.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 mkoeppe]:\n> I ran into this, by the way, using `dual_ext_power` of order 1: It is passing `antisym=range(1)`. \n\nIndeed!",
    "created_at": "2022-09-01T19:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686237",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>Replying to [comment:13 mkoeppe]:
> I ran into this, by the way, using `dual_ext_power` of order 1: It is passing `antisym=range(1)`. 

Indeed!



---

archive/issue_comments_686238.json:
```json
{
    "body": "<a id='comment:17'></a>OK, I'll revert it",
    "created_at": "2022-09-01T19:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686238",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>OK, I'll revert it



---

archive/issue_comments_686239.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-01T19:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686240.json:
```json
{
    "body": "Changing commit from \"8a2c71a6d56ca08d8fb5793ec0cd3faa4682850f\" to \"c6b6b2ed6ddc44044b8e0915d768cd22672f0dab\"",
    "created_at": "2022-09-01T19:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8a2c71a6d56ca08d8fb5793ec0cd3faa4682850f" to "c6b6b2ed6ddc44044b8e0915d768cd22672f0dab"



---

archive/issue_comments_686241.json:
```json
{
    "body": "<a id='comment:19'></a>Done",
    "created_at": "2022-09-01T19:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686241",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Done



---

archive/issue_comments_686242.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 mkoeppe]:\n> Done\n\nThanks!",
    "created_at": "2022-09-02T08:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686242",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>Replying to [comment:19 mkoeppe]:
> Done

Thanks!



---

archive/issue_comments_686243.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-02T08:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686243",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_686244.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2022-09-02T08:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686244",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_686245.json:
```json
{
    "body": "<a id='comment:21'></a>There is actually an error (sequel of an old piece of code) in `_canonicalize_sym_antisym`, which is revealed by the pyflakes plugin of the patchbot running on #30229 (unfortunately, the patchbot did not visit this ticket after the last commit): the name `i` in \n\n```\n                if isym[0] < 0 or isym[-1] > nb_indices - 1:\n                    raise IndexError(\"invalid index position: \" + str(i) +\n                                     \" not in [0,\" + str(nb_indices-1) + \"]\")\n```\nis undefined. Same issue a few lines lower.",
    "created_at": "2022-09-02T09:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686245",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:21'></a>There is actually an error (sequel of an old piece of code) in `_canonicalize_sym_antisym`, which is revealed by the pyflakes plugin of the patchbot running on #30229 (unfortunately, the patchbot did not visit this ticket after the last commit): the name `i` in 

```
                if isym[0] < 0 or isym[-1] > nb_indices - 1:
                    raise IndexError("invalid index position: " + str(i) +
                                     " not in [0," + str(nb_indices-1) + "]")
```
is undefined. Same issue a few lines lower.



---

archive/issue_comments_686246.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-09-02T09:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686246",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_686247.json:
```json
{
    "body": "Changing commit from \"c6b6b2ed6ddc44044b8e0915d768cd22672f0dab\" to \"bec2f6540e63cca9b1c192ceb9ea1c15b7aee762\"",
    "created_at": "2022-09-02T16:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c6b6b2ed6ddc44044b8e0915d768cd22672f0dab" to "bec2f6540e63cca9b1c192ceb9ea1c15b7aee762"



---

archive/issue_comments_686248.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T16:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686249.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-09-02T16:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686249",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_686250.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-09-02T16:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_686251.json:
```json
{
    "body": "Changing commit from \"bec2f6540e63cca9b1c192ceb9ea1c15b7aee762\" to \"66009e7700f8fc0610dc494a09089070bb6f609a\"",
    "created_at": "2022-09-02T16:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686251",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bec2f6540e63cca9b1c192ceb9ea1c15b7aee762" to "66009e7700f8fc0610dc494a09089070bb6f609a"



---

archive/issue_comments_686252.json:
```json
{
    "body": "<a id='comment:25'></a>Nice refactoring!",
    "created_at": "2022-09-02T21:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686252",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:25'></a>Nice refactoring!



---

archive/issue_comments_686253.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-09-02T21:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686253",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_686254.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks!",
    "created_at": "2022-09-02T21:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686254",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Thanks!



---

archive/issue_events_089537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34451#event-89537"
}
```



---

archive/issue_comments_686255.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-09-22T22:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686255",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_686256.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/sage_tensor__canonicalize_sym__antisym\" to \"66009e7700f8fc0610dc494a09089070bb6f609a\"",
    "created_at": "2022-09-22T22:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34451#issuecomment-686256",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/sage_tensor__canonicalize_sym__antisym" to "66009e7700f8fc0610dc494a09089070bb6f609a"



---

archive/issue_events_089538.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-22T22:35:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34451#event-89538"
}
```
