# Issue 34251: Add optional package cvxpy, update cylp, add CVXPY MIP backend

archive/issues_034014.json:
```json
{
    "assignees": [],
    "body": "(split out from #31962)\n\nWe add `cvxpy` for disciplined convex programming and extensions as an optional package.\n\n- cvxpy ([home](https://www.cvxpy.org/)\n  \u00b7 [repo](https://github.com/cvxpy/cvxpy)\n  \u00b7 [releases](https://github.com/cvxpy/cvxpy/releases)\n  \u00b7 [PyPI](https://pypi.org/project/cvxpy/))\n- It can call [many backend solvers](https://www.cvxpy.org/tutorial/advanced/index.html#choosing-a-solver) -- including most that we currently have as MIP backends, so it may be suitable as a replacement for our homegrown backend code\n- Promising route to [add support for the HiGHS LP/MIP solvers](https://github.com/cvxpy/cvxpy/issues/1443) via the [scipy cython interface to their vendored HiGHS](https://github.com/scipy/scipy/issues/14455)\n- supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)\n- PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection\n\nWe add a new MIP backend `solver=\"CVXPY\"`. Using `solver=\"CVXPY/ECOS\"`, `solver=\"CVXPY/GLPK\"`, etc., CVXPY can be asked to use a specific solver.\n\nWhen also `cylp` is installed (from #33487, upgraded here), the new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available), thus replacing the similar functionality of the CBC backend provided by `sage_numerical_backend_coin`.\n\n\nDetails about dependencies: Requirements listed in\ncvxpy's [setup.py](https://github.com/cvxpy/cvxpy/blob/master/setup.py):\n\n```\npython_requires='>=3.6',\ninstall_requires=[\"osqp >= 0.4.1\",\n                  \"ecos >= 2\",\n                  \"scs >= 1.1.6\",\n                  \"numpy >= 1.15\",\n                  \"scipy >= 1.1.0\"],\n```\n\nSo the new dependencies are:\n\n- osqp (operator splitting quadratic program)\n  ([home](https://osqp.org/)\n  \u00b7 [repo](https://github.com/osqp/osqp-python)\n  \u00b7 [PyPI](https://pypi.org/project/osqp/))\n- ecos (embedded conic solver)\n  ([repo](https://github.com/embotech/ecos-python)\n  \u00b7 [PyPI](https://pypi.org/project/ecos/))\n- SCS (splitting conic solver)\n  ([repo](https://github.com/bodono/scs-python)\n  \u00b7 [PyPI](https://pypi.org/project/scs/))\n\nIn addition, osqp's [requirements.txt](https://github.com/osqp/osqp-python/blob/master/requirements.txt) lists:\n`numpy >= 1.7`, `scipy >= 0.13.2`, `qdldl`\n\nwhich adds:\n\n- qldl-python (interface\n  to [QDLDL](https://github.com/osqp/qdldl), to factor quasi-definite linear systems)\n  ([repo](https://github.com/osqp/qdldl-python)\n  \u00b7 [PyPI](https://pypi.org/project/qdldl/))\n\nFinally, qldl-python depends on pybind11 (already an SPKG)\n\nSee also:\n- #26511 Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n- #33493 package ortools - provides some more backends\n\nFollow-ups:\n- #30644 Remove `sage_numerical_backends_coin`, Upgrade optional package cbc to 2.10.7\n\n\nDepends on #34228\n\nCC:  @dimpase @yuan-zhou @sheerluck @dcoudert @seblabbe @maxale @kiwifb @isuruf @tkralphs\n\nComponent: **packages: optional**\n\nAuthor: **Matthias Koeppe, Andrey Belgorodski**\n\nBranch/Commit: **[u/mkoeppe/add_optional_package_cvxpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_optional_package_cvxpy) @ [`7346fd1`](https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5)**\n\nReviewer: **Martin P\u00e9pin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34251_\n\n",
    "created_at": "2022-07-30T17:48:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add optional package cvxpy, update cylp, add CVXPY MIP backend",
    "type": "issue",
    "updated_at": "2022-12-31T21:31:21Z",
    "url": "https://github.com/sagemath/sage/issues/34251",
    "user": "https://github.com/mkoeppe"
}
```
(split out from #31962)

We add `cvxpy` for disciplined convex programming and extensions as an optional package.

- cvxpy ([home](https://www.cvxpy.org/)
  · [repo](https://github.com/cvxpy/cvxpy)
  · [releases](https://github.com/cvxpy/cvxpy/releases)
  · [PyPI](https://pypi.org/project/cvxpy/))
- It can call [many backend solvers](https://www.cvxpy.org/tutorial/advanced/index.html#choosing-a-solver) -- including most that we currently have as MIP backends, so it may be suitable as a replacement for our homegrown backend code
- Promising route to [add support for the HiGHS LP/MIP solvers](https://github.com/cvxpy/cvxpy/issues/1443) via the [scipy cython interface to their vendored HiGHS](https://github.com/scipy/scipy/issues/14455)
- supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)
- PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection

We add a new MIP backend `solver="CVXPY"`. Using `solver="CVXPY/ECOS"`, `solver="CVXPY/GLPK"`, etc., CVXPY can be asked to use a specific solver.

When also `cylp` is installed (from #33487, upgraded here), the new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available), thus replacing the similar functionality of the CBC backend provided by `sage_numerical_backend_coin`.


Details about dependencies: Requirements listed in
cvxpy's [setup.py](https://github.com/cvxpy/cvxpy/blob/master/setup.py):

```
python_requires='>=3.6',
install_requires=["osqp >= 0.4.1",
                  "ecos >= 2",
                  "scs >= 1.1.6",
                  "numpy >= 1.15",
                  "scipy >= 1.1.0"],
```

So the new dependencies are:

- osqp (operator splitting quadratic program)
  ([home](https://osqp.org/)
  · [repo](https://github.com/osqp/osqp-python)
  · [PyPI](https://pypi.org/project/osqp/))
- ecos (embedded conic solver)
  ([repo](https://github.com/embotech/ecos-python)
  · [PyPI](https://pypi.org/project/ecos/))
- SCS (splitting conic solver)
  ([repo](https://github.com/bodono/scs-python)
  · [PyPI](https://pypi.org/project/scs/))

In addition, osqp's [requirements.txt](https://github.com/osqp/osqp-python/blob/master/requirements.txt) lists:
`numpy >= 1.7`, `scipy >= 0.13.2`, `qdldl`

which adds:

- qldl-python (interface
  to [QDLDL](https://github.com/osqp/qdldl), to factor quasi-definite linear systems)
  ([repo](https://github.com/osqp/qdldl-python)
  · [PyPI](https://pypi.org/project/qdldl/))

Finally, qldl-python depends on pybind11 (already an SPKG)

See also:
- #26511 Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
- #33493 package ortools - provides some more backends

Follow-ups:
- #30644 Remove `sage_numerical_backends_coin`, Upgrade optional package cbc to 2.10.7


Depends on #34228

CC:  @dimpase @yuan-zhou @sheerluck @dcoudert @seblabbe @maxale @kiwifb @isuruf @tkralphs

Component: **packages: optional**

Author: **Matthias Koeppe, Andrey Belgorodski**

Branch/Commit: **[u/mkoeppe/add_optional_package_cvxpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_optional_package_cvxpy) @ [`7346fd1`](https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5)**

Reviewer: **Martin Pépin**

_Issue created by migration from https://trac.sagemath.org/ticket/34251_





---

archive/issue_events_464927.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:48:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464927"
}
```



---

archive/issue_events_464928.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464928"
}
```



---

archive/issue_events_464929.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464929"
}
```



---

archive/issue_events_464930.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464930"
}
```



---

archive/issue_events_464931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:51:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "title_is": "Add optional package cvxpy, update cylp",
    "title_was": "Add optional package cvxpy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464931"
}
```



---

archive/issue_comments_552993.json:
```json
{
    "body": "Branch: **[u/mkoeppe/add_optional_package_cvxpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_optional_package_cvxpy)**",
    "created_at": "2022-07-30T17:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552993",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/add_optional_package_cvxpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_optional_package_cvxpy)**



---

archive/issue_comments_552994.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, Andrey Belgorodski**",
    "created_at": "2022-07-30T17:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552994",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, Andrey Belgorodski**



---

archive/issue_comments_552995.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nLast 10 new commits:\n<table><tr><td><code>[cff440e](https://github.com/sagemath/sagetrac-mirror/commit/cff440eeb181c90d5c36dca1b4322fbc8d836df5)</code></td><td><code>`adding some code from ppl_backend.pyx to cvxpy_backend.{pyx,pxd`}</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c6f3232232dcce21e003138a3b55405d33103db\"><code>8c6f323</code></a></td><td><code>CVXPYBackend.is_variable_{boolean,integer,continuous}: Implement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b497afc18ebf8e101712b6a87449f6394c8031de\"><code>b497afc</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Fix up some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/942d2ed0c409e22e2a3108909f5e094e27115235\"><code>942d2ed</code></a></td><td><code>CVXPYBackend.objective_coefficient: Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a5ab691273fba6c1fde9fe62a14fdac46b80a96\"><code>5a5ab69</code></a></td><td><code>build/pkgs/cylp: Add patch from https://github.com/coin-or/CyLP/pull/150</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75f867da1376e43c7020e1f1852bafd53e0a3015\"><code>75f867d</code></a></td><td><code>build/pkgs/cvxpy: Use https://github.com/cvxpy/cvxpy/pull/1707</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fb29262f32e3ea310da22749e4101c09a4bd30b\"><code>1fb2926</code></a></td><td><code>build/pkgs/cylp: Add another commit from https://github.com/coin-or/CyLP/pull/150</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fd763a3a58d67b064346d8a69a5c4f52defbc14\"><code>4fd763a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend_test.py: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e482be69eabfe150f622ef18ef256b1711fc21d\"><code>8e482be</code></a></td><td><code>build/pkgs/cylp: Update to 0.91.5, remove patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8\"><code>76d1208</code></a></td><td><code>build/pkgs/cvxpy/requirements.txt: Update git ref</code></td></tr></table>\n",
    "created_at": "2022-07-30T17:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552995",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3"></div>

Last 10 new commits:
<table><tr><td><code>[cff440e](https://github.com/sagemath/sagetrac-mirror/commit/cff440eeb181c90d5c36dca1b4322fbc8d836df5)</code></td><td><code>`adding some code from ppl_backend.pyx to cvxpy_backend.{pyx,pxd`}</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c6f3232232dcce21e003138a3b55405d33103db"><code>8c6f323</code></a></td><td><code>CVXPYBackend.is_variable_{boolean,integer,continuous}: Implement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b497afc18ebf8e101712b6a87449f6394c8031de"><code>b497afc</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Fix up some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/942d2ed0c409e22e2a3108909f5e094e27115235"><code>942d2ed</code></a></td><td><code>CVXPYBackend.objective_coefficient: Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a5ab691273fba6c1fde9fe62a14fdac46b80a96"><code>5a5ab69</code></a></td><td><code>build/pkgs/cylp: Add patch from https://github.com/coin-or/CyLP/pull/150</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75f867da1376e43c7020e1f1852bafd53e0a3015"><code>75f867d</code></a></td><td><code>build/pkgs/cvxpy: Use https://github.com/cvxpy/cvxpy/pull/1707</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fb29262f32e3ea310da22749e4101c09a4bd30b"><code>1fb2926</code></a></td><td><code>build/pkgs/cylp: Add another commit from https://github.com/coin-or/CyLP/pull/150</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fd763a3a58d67b064346d8a69a5c4f52defbc14"><code>4fd763a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend_test.py: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e482be69eabfe150f622ef18ef256b1711fc21d"><code>8e482be</code></a></td><td><code>build/pkgs/cylp: Update to 0.91.5, remove patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8"><code>76d1208</code></a></td><td><code>build/pkgs/cvxpy/requirements.txt: Update git ref</code></td></tr></table>




---

archive/issue_comments_552996.json:
```json
{
    "body": "Commit: **[`76d1208`](https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8)**",
    "created_at": "2022-07-30T17:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552996",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`76d1208`](https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8)**



---

archive/issue_comments_552997.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n (split out from #31962)\n+\n``````\n",
    "created_at": "2022-07-30T17:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552997",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
 (split out from #31962)
+
``````




---

archive/issue_events_464932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T17:56:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "title_is": "Add optional package cvxpy, update cylp, add CVXPY MIP backend",
    "title_was": "Add optional package cvxpy, update cylp",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464932"
}
```



---

archive/issue_comments_552998.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,60 @@\n (split out from #31962)\n \n+We add `cvxpy` for disciplined convex programming and extensions as an optional package.\n+\n+- cvxpy ([home](https://www.cvxpy.org/)\n+  \u00b7 [repo](https://github.com/cvxpy/cvxpy)\n+  \u00b7 [releases](https://github.com/cvxpy/cvxpy/releases)\n+  \u00b7 [PyPI](https://pypi.org/project/cvxpy/))\n+- It can call [many backend solvers](https://www.cvxpy.org/tutorial/advanced/index.html#choosing-a-solver) -- including most that we currently have as MIP backends, so it may be suitable as a replacement for our homegrown backend code\n+- Promising route to [add support for the HiGHS LP/MIP solvers](https://github.com/cvxpy/cvxpy/issues/1443) via the [scipy cython interface to their vendored HiGHS](https://github.com/scipy/scipy/issues/14455)\n+- supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)\n+- PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection\n+\n+When `cylp` is installed (from #33487, upgraded here), a new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available). This replaces \n+\n+\n+Details about dependencies: Requirements listed in\n+cvxpy's [setup.py](https://github.com/cvxpy/cvxpy/blob/master/setup.py):\n+\n+```\n+python_requires='>=3.6',\n+install_requires=[\"osqp >= 0.4.1\",\n+                  \"ecos >= 2\",\n+                  \"scs >= 1.1.6\",\n+                  \"numpy >= 1.15\",\n+                  \"scipy >= 1.1.0\"],\n+```\n+\n+So the new dependencies are:\n+\n+- osqp (operator splitting quadratic program)\n+  ([home](https://osqp.org/)\n+  \u00b7 [repo](https://github.com/osqp/osqp-python)\n+  \u00b7 [PyPI](https://pypi.org/project/osqp/))\n+- ecos (embedded conic solver)\n+  ([repo](https://github.com/embotech/ecos-python)\n+  \u00b7 [PyPI](https://pypi.org/project/ecos/))\n+- SCS (splitting conic solver)\n+  ([repo](https://github.com/bodono/scs-python)\n+  \u00b7 [PyPI](https://pypi.org/project/scs/))\n+\n+In addition, osqp's [requirements.txt](https://github.com/osqp/osqp-python/blob/master/requirements.txt) lists:\n+`numpy >= 1.7`, `scipy >= 0.13.2`, `qdldl`\n+\n+which adds:\n+\n+- qldl-python (interface\n+  to [QDLDL](https://github.com/osqp/qdldl), to factor quasi-definite linear systems)\n+  ([repo](https://github.com/osqp/qdldl-python)\n+  \u00b7 [PyPI](https://pypi.org/project/qdldl/))\n+\n+Finally, qldl-python depends on pybind11 (already an SPKG)\n+\n+See also:\n+- #26511 Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- #33493 package ortools - provides some more backends\n+\n+Follow-ups:\n+- #30644 Remove `sage_numerical_backends_coin`, Upgrade optional package cbc to 2.10.7\n+\n``````\n",
    "created_at": "2022-07-30T18:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552998",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,60 @@
 (split out from #31962)
 
+We add `cvxpy` for disciplined convex programming and extensions as an optional package.
+
+- cvxpy ([home](https://www.cvxpy.org/)
+  · [repo](https://github.com/cvxpy/cvxpy)
+  · [releases](https://github.com/cvxpy/cvxpy/releases)
+  · [PyPI](https://pypi.org/project/cvxpy/))
+- It can call [many backend solvers](https://www.cvxpy.org/tutorial/advanced/index.html#choosing-a-solver) -- including most that we currently have as MIP backends, so it may be suitable as a replacement for our homegrown backend code
+- Promising route to [add support for the HiGHS LP/MIP solvers](https://github.com/cvxpy/cvxpy/issues/1443) via the [scipy cython interface to their vendored HiGHS](https://github.com/scipy/scipy/issues/14455)
+- supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)
+- PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection
+
+When `cylp` is installed (from #33487, upgraded here), a new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available). This replaces 
+
+
+Details about dependencies: Requirements listed in
+cvxpy's [setup.py](https://github.com/cvxpy/cvxpy/blob/master/setup.py):
+
+```
+python_requires='>=3.6',
+install_requires=["osqp >= 0.4.1",
+                  "ecos >= 2",
+                  "scs >= 1.1.6",
+                  "numpy >= 1.15",
+                  "scipy >= 1.1.0"],
+```
+
+So the new dependencies are:
+
+- osqp (operator splitting quadratic program)
+  ([home](https://osqp.org/)
+  · [repo](https://github.com/osqp/osqp-python)
+  · [PyPI](https://pypi.org/project/osqp/))
+- ecos (embedded conic solver)
+  ([repo](https://github.com/embotech/ecos-python)
+  · [PyPI](https://pypi.org/project/ecos/))
+- SCS (splitting conic solver)
+  ([repo](https://github.com/bodono/scs-python)
+  · [PyPI](https://pypi.org/project/scs/))
+
+In addition, osqp's [requirements.txt](https://github.com/osqp/osqp-python/blob/master/requirements.txt) lists:
+`numpy >= 1.7`, `scipy >= 0.13.2`, `qdldl`
+
+which adds:
+
+- qldl-python (interface
+  to [QDLDL](https://github.com/osqp/qdldl), to factor quasi-definite linear systems)
+  ([repo](https://github.com/osqp/qdldl-python)
+  · [PyPI](https://pypi.org/project/qdldl/))
+
+Finally, qldl-python depends on pybind11 (already an SPKG)
+
+See also:
+- #26511 Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- #33493 package ortools - provides some more backends
+
+Follow-ups:
+- #30644 Remove `sage_numerical_backends_coin`, Upgrade optional package cbc to 2.10.7
+
``````




---

archive/issue_comments_552999.json:
```json
{
    "body": "Changed commit from **[`76d1208`](https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8)** to **[`7d4dccb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd)**",
    "created_at": "2022-07-30T18:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-552999",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`76d1208`](https://github.com/sagemath/sagetrac-mirror/commit/76d1208c253c26736aef7a0ddc55e3e454f8b1f8)** to **[`7d4dccb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd)**



---

archive/issue_comments_553000.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd\"><code>7d4dccb</code></a></td><td><code>build/pkgs/cvxpy: Make it a normal package, add dependencies qdldl_python, osqp, scs, ecos</code></td></tr></table>\n",
    "created_at": "2022-07-30T18:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553000",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd"><code>7d4dccb</code></a></td><td><code>build/pkgs/cvxpy: Make it a normal package, add dependencies qdldl_python, osqp, scs, ecos</code></td></tr></table>




---

archive/issue_comments_553001.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n - supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)\n - PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection\n \n-When `cylp` is installed (from #33487, upgraded here), a new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available). This replaces \n+When `cylp` is installed (from #33487, upgraded here), a new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available). This replaces the backend provided by `sage_numerical_backend_coin`\n \n \n Details about dependencies: Requirements listed in\n``````\n",
    "created_at": "2022-07-30T18:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553001",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 - supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)
 - PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection
 
-When `cylp` is installed (from #33487, upgraded here), a new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available). This replaces 
+When `cylp` is installed (from #33487, upgraded here), a new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available). This replaces the backend provided by `sage_numerical_backend_coin`
 
 
 Details about dependencies: Requirements listed in
``````




---

archive/issue_comments_553002.json:
```json
{
    "body": "Changed commit from **[`7d4dccb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd)** to **[`aab359f`](https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda)**",
    "created_at": "2022-07-30T19:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553002",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d4dccb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4dccb43f0051bfc0ed504df4034f0828b634dd)** to **[`aab359f`](https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda)**



---

archive/issue_comments_553003.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda\"><code>aab359f</code></a></td><td><code>build/pkgs/{ecos,osqp}_python: Renamed from ecos, osqp</code></td></tr></table>\n",
    "created_at": "2022-07-30T19:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553003",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda"><code>aab359f</code></a></td><td><code>build/pkgs/{ecos,osqp}_python: Renamed from ecos, osqp</code></td></tr></table>




---

archive/issue_comments_553004.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/468b2c5e4d76406d92bfcab5272d147a0c27ac2d\"><code>468b2c5</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Add suitesparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd\"><code>6d039ae</code></a></td><td><code>build/pkgs/{ecos,osqp}_python: Use --no-build-isolation</code></td></tr></table>\n",
    "created_at": "2022-07-30T19:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553004",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/468b2c5e4d76406d92bfcab5272d147a0c27ac2d"><code>468b2c5</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Add suitesparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd"><code>6d039ae</code></a></td><td><code>build/pkgs/{ecos,osqp}_python: Use --no-build-isolation</code></td></tr></table>




---

archive/issue_comments_553005.json:
```json
{
    "body": "Changed commit from **[`aab359f`](https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda)** to **[`6d039ae`](https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd)**",
    "created_at": "2022-07-30T19:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553005",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aab359f`](https://github.com/sagemath/sagetrac-mirror/commit/aab359f210f6497a9006dd46e806e59501a1eeda)** to **[`6d039ae`](https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd)**



---

archive/issue_comments_553006.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2\"><code>763985d</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Make doctests pass</code></td></tr></table>\n",
    "created_at": "2022-07-30T20:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2"><code>763985d</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Make doctests pass</code></td></tr></table>




---

archive/issue_comments_553007.json:
```json
{
    "body": "Changed commit from **[`6d039ae`](https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd)** to **[`763985d`](https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2)**",
    "created_at": "2022-07-30T20:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d039ae`](https://github.com/sagemath/sagetrac-mirror/commit/6d039ae073594a134d48a55b75028ef0911375cd)** to **[`763985d`](https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2)**



---

archive/issue_events_464933.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-30T20:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464933"
}
```



---

archive/issue_comments_553008.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,9 @@\n - supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)\n - PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection\n \n-When `cylp` is installed (from #33487, upgraded here), a new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available). This replaces the backend provided by `sage_numerical_backend_coin`\n+We add a new MIP backend `solver=\"CVXPY\"`. Using `solver=\"CVXPY/ECOS\"`, `solver=\"CVXPY/GLPK\"`, etc., CVXPY can be asked to use a specific solver.\n+\n+When also `cylp` is installed (from #33487, upgraded here), the new solver backend `\"CVXPY/CBC\"` becomes the default (unless Gurobi or CPLEX are available), thus replacing the similar functionality of the CBC backend provided by `sage_numerical_backend_coin`.\n \n \n Details about dependencies: Requirements listed in\n``````\n",
    "created_at": "2022-07-30T20:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553008",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,9 @@
 - supports [differentiable programming](https://www.cvxpy.org/tutorial/advanced/index.html#sensitivity-analysis-and-gradients)
 - PR: https://github.com/cvxpy/cvxpy/pull/1703 - Work around broken CyLP infeasibility detection
 
-When `cylp` is installed (from #33487, upgraded here), a new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available). This replaces the backend provided by `sage_numerical_backend_coin`
+We add a new MIP backend `solver="CVXPY"`. Using `solver="CVXPY/ECOS"`, `solver="CVXPY/GLPK"`, etc., CVXPY can be asked to use a specific solver.
+
+When also `cylp` is installed (from #33487, upgraded here), the new solver backend `"CVXPY/CBC"` becomes the default (unless Gurobi or CPLEX are available), thus replacing the similar functionality of the CBC backend provided by `sage_numerical_backend_coin`.
 
 
 Details about dependencies: Requirements listed in
``````




---

archive/issue_comments_553009.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7\"><code>a079e6e</code></a></td><td><code>build/pkgs/cylp/spkg-install.in: Use --no-build-isolation</code></td></tr></table>\n",
    "created_at": "2022-07-30T20:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553009",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7"><code>a079e6e</code></a></td><td><code>build/pkgs/cylp/spkg-install.in: Use --no-build-isolation</code></td></tr></table>




---

archive/issue_comments_553010.json:
```json
{
    "body": "Changed commit from **[`763985d`](https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2)** to **[`a079e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7)**",
    "created_at": "2022-07-30T20:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`763985d`](https://github.com/sagemath/sagetrac-mirror/commit/763985d815af1c531e04cb1e34f8be4b407ff3a2)** to **[`a079e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7)**



---

archive/issue_comments_553011.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9207a1b22d78b0b5395c91d5230fc67c4f4dc1\"><code>9f9207a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Store constraint names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b1ee3f84b1ffaab60352a5b53f97d2d46725b9c\"><code>7b1ee3f</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Use our column names when no name is given</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbc6ab6565b05abc4b936e99b25ccd86b1659b2\"><code>cbbc6ab</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Convert lower, upper variable bounds to float</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91\"><code>9f9b346</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible</code></td></tr></table>\n",
    "created_at": "2022-07-30T21:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9207a1b22d78b0b5395c91d5230fc67c4f4dc1"><code>9f9207a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Store constraint names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b1ee3f84b1ffaab60352a5b53f97d2d46725b9c"><code>7b1ee3f</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Use our column names when no name is given</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbc6ab6565b05abc4b936e99b25ccd86b1659b2"><code>cbbc6ab</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Convert lower, upper variable bounds to float</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91"><code>9f9b346</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible</code></td></tr></table>




---

archive/issue_comments_553012.json:
```json
{
    "body": "Changed commit from **[`a079e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7)** to **[`9f9b346`](https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91)**",
    "created_at": "2022-07-30T21:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553012",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a079e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a079e6ec338d7126b51d6fbc39b62d8b9271dcc7)** to **[`9f9b346`](https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91)**



---

archive/issue_comments_553013.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI am not sure, but it feels like if `default_sdp_solver()` is 'Cvxopt' then the tests in `cvxpy_sdp_backend.py` are broken. And if `default_sdp_solver()` is 'Cvxpy' then the tests in `cvxopt_backend.pyx` are broken. Sorry if that is irrelevant to this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9207a1b22d78b0b5395c91d5230fc67c4f4dc1\"><code>9f9207a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Store constraint names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b1ee3f84b1ffaab60352a5b53f97d2d46725b9c\"><code>7b1ee3f</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Use our column names when no name is given</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbc6ab6565b05abc4b936e99b25ccd86b1659b2\"><code>cbbc6ab</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Convert lower, upper variable bounds to float</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91\"><code>9f9b346</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible</code></td></tr></table>\n",
    "created_at": "2022-07-30T21:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553013",
    "user": "https://github.com/sheerluck"
}
```

<div id="comment:16" align="right">comment:16</div>

I am not sure, but it feels like if `default_sdp_solver()` is 'Cvxopt' then the tests in `cvxpy_sdp_backend.py` are broken. And if `default_sdp_solver()` is 'Cvxpy' then the tests in `cvxopt_backend.pyx` are broken. Sorry if that is irrelevant to this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9207a1b22d78b0b5395c91d5230fc67c4f4dc1"><code>9f9207a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Store constraint names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b1ee3f84b1ffaab60352a5b53f97d2d46725b9c"><code>7b1ee3f</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Use our column names when no name is given</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbc6ab6565b05abc4b936e99b25ccd86b1659b2"><code>cbbc6ab</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Convert lower, upper variable bounds to float</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91"><code>9f9b346</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible</code></td></tr></table>




---

archive/issue_comments_553014.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHere on this ticket, there's no SDP solver backend",
    "created_at": "2022-07-30T21:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553014",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Here on this ticket, there's no SDP solver backend



---

archive/issue_comments_553015.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWe had that on #31962, but I have split out the present ticket",
    "created_at": "2022-07-30T21:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553015",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

We had that on #31962, but I have split out the present ticket



---

archive/issue_comments_553016.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9eaae57c9cf70c8bc0ed2968beb584906134927\"><code>a9eaae5</code></a></td><td><code>tox.ini, build/bin/write-dockerfile.sh: Add 'tox -e docker-...-incremental'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9bfbf9f0ae96f79d514cd665c46b182337dd711\"><code>b9bfbf9</code></a></td><td><code>tox.ini: Add comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c0d7f50b18f78ce561eccfc3a6c1196887dc226\"><code>4c0d7f5</code></a></td><td><code>tox.ini: Use FROM_DOCKER_REPOSITORY</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a07874d2f2443785cc0a295d2d8989ab380d79d2\"><code>a07874d</code></a></td><td><code>build/bin/write-dockerfile.sh: In incremental build, keep logs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae269d17726a4ac6383b9645995d8c1f4c9b3f6d\"><code>ae269d1</code></a></td><td><code>tox.ini (docker-incremental): Do not include '-incremental' in the Docker image name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b23439dec03a8722c5c866e870d5fb47fd79f6dd\"><code>b23439d</code></a></td><td><code>Merge #34228</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602\"><code>2c8373e</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible (fixup)</code></td></tr></table>\n",
    "created_at": "2022-07-31T02:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553016",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9eaae57c9cf70c8bc0ed2968beb584906134927"><code>a9eaae5</code></a></td><td><code>tox.ini, build/bin/write-dockerfile.sh: Add 'tox -e docker-...-incremental'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9bfbf9f0ae96f79d514cd665c46b182337dd711"><code>b9bfbf9</code></a></td><td><code>tox.ini: Add comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c0d7f50b18f78ce561eccfc3a6c1196887dc226"><code>4c0d7f5</code></a></td><td><code>tox.ini: Use FROM_DOCKER_REPOSITORY</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a07874d2f2443785cc0a295d2d8989ab380d79d2"><code>a07874d</code></a></td><td><code>build/bin/write-dockerfile.sh: In incremental build, keep logs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae269d17726a4ac6383b9645995d8c1f4c9b3f6d"><code>ae269d1</code></a></td><td><code>tox.ini (docker-incremental): Do not include '-incremental' in the Docker image name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b23439dec03a8722c5c866e870d5fb47fd79f6dd"><code>b23439d</code></a></td><td><code>Merge #34228</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602"><code>2c8373e</code></a></td><td><code>src/sage/combinat/matrices/dancing_links.pyx: Make doctest more flexible (fixup)</code></td></tr></table>




---

archive/issue_comments_553017.json:
```json
{
    "body": "Changed commit from **[`9f9b346`](https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91)** to **[`2c8373e`](https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602)**",
    "created_at": "2022-07-31T02:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553017",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f9b346`](https://github.com/sagemath/sagetrac-mirror/commit/9f9b346d7c85dc7a445807e029e2903848e8ae91)** to **[`2c8373e`](https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602)**



---

archive/issue_comments_553018.json:
```json
{
    "body": "Dependencies: **#34228**",
    "created_at": "2022-07-31T02:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553018",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34228**



---

archive/issue_comments_553019.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI have yet to package this stuff for Gentoo (I already did cylp). I am going to have a closer look for obvious mistakes shortly.",
    "created_at": "2022-07-31T02:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553019",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

I have yet to package this stuff for Gentoo (I already did cylp). I am going to have a closer look for obvious mistakes shortly.



---

archive/issue_comments_553020.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI was wondering about the dependency of qdldl on cmake. It vendors amd from suitesparse and build it with cmake. Lovely, but unvendoring it is out of scope of the ticket.\n\nThat's the only remark on the package added. They all look good, I'll have to test the sage bits later.",
    "created_at": "2022-07-31T03:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553020",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

I was wondering about the dependency of qdldl on cmake. It vendors amd from suitesparse and build it with cmake. Lovely, but unvendoring it is out of scope of the ticket.

That's the only remark on the package added. They all look good, I'll have to test the sage bits later.



---

archive/issue_comments_553021.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616\"><code>eeec3e9</code></a></td><td><code>build/pkgs/{cvxpy,scs,osqp_python,ecos_python,qdldl_python}: Add distros/conda.txt</code></td></tr></table>\n",
    "created_at": "2022-08-05T22:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616"><code>eeec3e9</code></a></td><td><code>build/pkgs/{cvxpy,scs,osqp_python,ecos_python,qdldl_python}: Add distros/conda.txt</code></td></tr></table>




---

archive/issue_comments_553022.json:
```json
{
    "body": "Changed commit from **[`2c8373e`](https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602)** to **[`eeec3e9`](https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616)**",
    "created_at": "2022-08-05T22:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2c8373e`](https://github.com/sagemath/sagetrac-mirror/commit/2c8373e406bb48cf0ee51cba8283dced0d424602)** to **[`eeec3e9`](https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616)**



---

archive/issue_comments_553023.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAdded conda distro information. There doesn't appear to be a conda-forge package for cylp, so that will have to be taken via pip (#33613, needs review)",
    "created_at": "2022-08-05T22:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Added conda distro information. There doesn't appear to be a conda-forge package for cylp, so that will have to be taken via pip (#33613, needs review)



---

archive/issue_comments_553024.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nNote for other packagers: qdldl-python include suitesparse's amd sources and qdldl's c sources. The vendored amd source are customised to use the vendored qdldl. I don't recommend trying to unvendor. osqp-python similarly vendor osqp but it looks like it could be unvendored but I am not going to try that just yet.",
    "created_at": "2022-08-06T09:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553024",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Note for other packagers: qdldl-python include suitesparse's amd sources and qdldl's c sources. The vendored amd source are customised to use the vendored qdldl. I don't recommend trying to unvendor. osqp-python similarly vendor osqp but it looks like it could be unvendored but I am not going to try that just yet.



---

archive/issue_comments_553025.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nosqp-python needs cmake, just like qdldl-python https://github.com/osqp/osqp-python/blob/master/setup.py#L222 so it must be added to the `dependencies` file.",
    "created_at": "2022-08-06T09:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553025",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

osqp-python needs cmake, just like qdldl-python https://github.com/osqp/osqp-python/blob/master/setup.py#L222 so it must be added to the `dependencies` file.



---

archive/issue_events_464934.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-08-06T09:47:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464934"
}
```



---

archive/issue_events_464935.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-08-06T09:47:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464935"
}
```



---

archive/issue_comments_553026.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI very much doubt that ecos_python depend on suitesparse. It vendors its own copies of amd, ldl and suitesparse_config. And by the look of it there may be some customisation by macro definition and the copies themselves are ancient (more than 4 years old, possibly forked more than 8 years ago). \n\nosqp also has its bits of suitesparse (amd+suitesparse_config) and so does scs (amd+suitesparse_config again). All at various stage of ageing. And the c version of qdldl shows up everywhere.",
    "created_at": "2022-08-06T11:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553026",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

I very much doubt that ecos_python depend on suitesparse. It vendors its own copies of amd, ldl and suitesparse_config. And by the look of it there may be some customisation by macro definition and the copies themselves are ancient (more than 4 years old, possibly forked more than 8 years ago). 

osqp also has its bits of suitesparse (amd+suitesparse_config) and so does scs (amd+suitesparse_config again). All at various stage of ageing. And the c version of qdldl shows up everywhere.



---

archive/issue_comments_553027.json:
```json
{
    "body": "Changed commit from **[`eeec3e9`](https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616)** to **[`7c05f49`](https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea)**",
    "created_at": "2022-08-06T12:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553027",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eeec3e9`](https://github.com/sagemath/sagetrac-mirror/commit/eeec3e9356e821120c7c4d13874b45b4d3799616)** to **[`7c05f49`](https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea)**



---

archive/issue_comments_553028.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3424e0dc6a39dfa8a7ed145ae1d6314f1e8a5466\"><code>3424e0d</code></a></td><td><code>build/pkgs/osqp_python/dependencies: Add cmake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea\"><code>7c05f49</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Remove suitesparse</code></td></tr></table>\n",
    "created_at": "2022-08-06T12:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553028",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3424e0dc6a39dfa8a7ed145ae1d6314f1e8a5466"><code>3424e0d</code></a></td><td><code>build/pkgs/osqp_python/dependencies: Add cmake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea"><code>7c05f49</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Remove suitesparse</code></td></tr></table>




---

archive/issue_comments_553029.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI agree with your analysis. I've made these changes",
    "created_at": "2022-08-06T12:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553029",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

I agree with your analysis. I've made these changes



---

archive/issue_events_464936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T12:41:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464936"
}
```



---

archive/issue_events_464937.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T12:41:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464937"
}
```



---

archive/issue_events_464938.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T06:38:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464938"
}
```



---

archive/issue_events_464939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T06:38:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464939"
}
```



---

archive/issue_events_464940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T17:32:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464940"
}
```



---

archive/issue_events_464941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T17:32:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464941"
}
```



---

archive/issue_comments_553030.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWaiting for review",
    "created_at": "2022-09-19T17:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553030",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Waiting for review



---

archive/issue_comments_553031.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nSome test do not pass, most notably: \n\n```\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx\n    Killed due to segmentation fault\n**********************************************************************\nTests run before process (pid=287829) failed:\nsage: import cvxpy ## line 42 ##\nsage: cvxpy.installed_solvers()                                                # random ## line 43 ##\n['CVXOPT', 'ECOS', 'ECOS_BB', 'GLPK', 'GLPK_MI', 'OSQP', 'SCIPY', 'SCS']\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY\"); p.solve() ## line 47 ##\n0.0\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY/OSQP\"); p.solve() ## line 52 ##\n0.0\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY/ECOS\"); p.solve() ## line 54 ##\n0.0\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY/SCS\"); p.solve() ## line 56 ##\n0.0\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY/SciPy/HiGHS\"); p.solve() ## line 58 ##\n0.0\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 90 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 98 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 99 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 100 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 141 ##\nsage: p = MixedIntegerLinearProgram(solver=\"CVXPY\") ## line 142 ##\nsage: b = p.new_variable() ## line 143 ##\nsage: p.add_constraint(b[1] + b[2] <= 6) ## line 144 ##\nsage: p.set_objective(b[1] + b[2]) ## line 145 ##\nsage: cp = copy(p.get_backend()) ## line 146 ##\nsage: cp.solve() ## line 147 ##\n0\nsage: cp.get_objective_value()  # abs tol 1e-7 ## line 149 ##\n5.999999982049109\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 151 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 206 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 207 ##\nsage: p.ncols() ## line 208 ##\n0\nsage: p.add_variable() ## line 210 ##\n0\nsage: p.ncols() ## line 212 ##\n1\nsage: p.add_variable(continuous=True, integer=True) ## line 214 ##\nsage: p.add_variable(name='x',obj=1) ## line 218 ##\n1\nsage: p.col_name(1) ## line 220 ##\n'x'\nsage: p.objective_coefficient(1) ## line 222 ##\n1.0\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 224 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 287 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 288 ##\nsage: p.set_verbosity(2) ## line 289 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 290 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 313 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 314 ##\nsage: p.add_variables(5) ## line 315 ##\n4\nsage: index = p.nrows() ## line 317 ##\nsage: p.add_linear_constraint( zip(range(5), range(5)), 2, 2) ## line 318 ##\nsage: p.row(index) ## line 319 ##\n([1, 2, 3, 4], [1, 2, 3, 4])\nsage: p.row_bounds(index) ## line 321 ##\n(2, 2)\nsage: p.add_linear_constraint( zip(range(5), range(5)), 1, 1, name='foo') ## line 323 ##\nsage: p.row_name(1) ## line 324 ##\n'constraint_1'\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 326 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 375 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 376 ##\nsage: p.ncols() ## line 377 ##\n0\nsage: p.nrows() ## line 379 ##\n0\nsage: p.add_linear_constraints(5, 0, None) ## line 381 ##\nsage: p.add_col(list(range(5)), list(range(5))) ## line 382 ##\nsage: p.nrows() ## line 386 ##\n5\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 388 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 412 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 413 ##\nsage: p.add_variables(5) ## line 414 ##\n4\nsage: p.set_objective([1, 1, 2, 1, 3]) ## line 416 ##\nsage: [p.objective_coefficient(x) for x in range(5)] ## line 417 ##\n[1.0, 1.0, 2.0, 1.0, 3.0]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 419 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 444 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 445 ##\nsage: p.is_maximization() ## line 446 ##\nTrue\nsage: p.set_sense(-1) ## line 448 ##\nsage: p.is_maximization() ## line 449 ##\nFalse\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 451 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 472 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 473 ##\nsage: p.add_variable() ## line 474 ##\n0\nsage: p.objective_coefficient(0) ## line 476 ##\n0.0\nsage: p.objective_coefficient(0, 2) ## line 478 ##\nsage: p.objective_coefficient(0) ## line 479 ##\n2\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 481 ##\n0\nsage: from sage.numerical.backends.generic_backend import get_solver ## line 506 ##\nsage: p = get_solver(solver=\"CVXPY\") ## line 507 ##\nsage: p.add_linear_constraints(5, 0, None) ## line 508 ##\nsage: p.add_col(list(range(5)), list(range(5))) ## line 509 ##\nsage: p.solve() ## line 513 ##\n0\nsage: p.objective_coefficient(0,1) ## line 515 ##\nsage: p.solve() ## line 516 ##\n```\n\nBut also some seemingly unrelated stuff:\n\n```\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/doctest/test.py  # 2 doctests failed\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/interfaces/octave.py  # 1 doctest failed\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx  # Killed due to segmentation fault\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/plot/plot3d/tachyon.py  # 2 doctests failed\nsage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/rings/integer.pyx  # 1 doctest failed\n```\n\nThe GH CI also reports coverage-related issues, which I think will be fixed by rebasing the branch on `develop`",
    "created_at": "2022-09-20T08:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553031",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:36" align="right">comment:36</div>

Some test do not pass, most notably: 

```
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx
    Killed due to segmentation fault
**********************************************************************
Tests run before process (pid=287829) failed:
sage: import cvxpy ## line 42 ##
sage: cvxpy.installed_solvers()                                                # random ## line 43 ##
['CVXOPT', 'ECOS', 'ECOS_BB', 'GLPK', 'GLPK_MI', 'OSQP', 'SCIPY', 'SCS']
sage: p = MixedIntegerLinearProgram(solver="CVXPY"); p.solve() ## line 47 ##
0.0
sage: p = MixedIntegerLinearProgram(solver="CVXPY/OSQP"); p.solve() ## line 52 ##
0.0
sage: p = MixedIntegerLinearProgram(solver="CVXPY/ECOS"); p.solve() ## line 54 ##
0.0
sage: p = MixedIntegerLinearProgram(solver="CVXPY/SCS"); p.solve() ## line 56 ##
0.0
sage: p = MixedIntegerLinearProgram(solver="CVXPY/SciPy/HiGHS"); p.solve() ## line 58 ##
0.0
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 90 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 98 ##
sage: p = get_solver(solver="CVXPY") ## line 99 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 100 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 141 ##
sage: p = MixedIntegerLinearProgram(solver="CVXPY") ## line 142 ##
sage: b = p.new_variable() ## line 143 ##
sage: p.add_constraint(b[1] + b[2] <= 6) ## line 144 ##
sage: p.set_objective(b[1] + b[2]) ## line 145 ##
sage: cp = copy(p.get_backend()) ## line 146 ##
sage: cp.solve() ## line 147 ##
0
sage: cp.get_objective_value()  # abs tol 1e-7 ## line 149 ##
5.999999982049109
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 151 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 206 ##
sage: p = get_solver(solver="CVXPY") ## line 207 ##
sage: p.ncols() ## line 208 ##
0
sage: p.add_variable() ## line 210 ##
0
sage: p.ncols() ## line 212 ##
1
sage: p.add_variable(continuous=True, integer=True) ## line 214 ##
sage: p.add_variable(name='x',obj=1) ## line 218 ##
1
sage: p.col_name(1) ## line 220 ##
'x'
sage: p.objective_coefficient(1) ## line 222 ##
1.0
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 224 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 287 ##
sage: p = get_solver(solver="CVXPY") ## line 288 ##
sage: p.set_verbosity(2) ## line 289 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 290 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 313 ##
sage: p = get_solver(solver="CVXPY") ## line 314 ##
sage: p.add_variables(5) ## line 315 ##
4
sage: index = p.nrows() ## line 317 ##
sage: p.add_linear_constraint( zip(range(5), range(5)), 2, 2) ## line 318 ##
sage: p.row(index) ## line 319 ##
([1, 2, 3, 4], [1, 2, 3, 4])
sage: p.row_bounds(index) ## line 321 ##
(2, 2)
sage: p.add_linear_constraint( zip(range(5), range(5)), 1, 1, name='foo') ## line 323 ##
sage: p.row_name(1) ## line 324 ##
'constraint_1'
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 326 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 375 ##
sage: p = get_solver(solver="CVXPY") ## line 376 ##
sage: p.ncols() ## line 377 ##
0
sage: p.nrows() ## line 379 ##
0
sage: p.add_linear_constraints(5, 0, None) ## line 381 ##
sage: p.add_col(list(range(5)), list(range(5))) ## line 382 ##
sage: p.nrows() ## line 386 ##
5
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 388 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 412 ##
sage: p = get_solver(solver="CVXPY") ## line 413 ##
sage: p.add_variables(5) ## line 414 ##
4
sage: p.set_objective([1, 1, 2, 1, 3]) ## line 416 ##
sage: [p.objective_coefficient(x) for x in range(5)] ## line 417 ##
[1.0, 1.0, 2.0, 1.0, 3.0]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 419 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 444 ##
sage: p = get_solver(solver="CVXPY") ## line 445 ##
sage: p.is_maximization() ## line 446 ##
True
sage: p.set_sense(-1) ## line 448 ##
sage: p.is_maximization() ## line 449 ##
False
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 451 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 472 ##
sage: p = get_solver(solver="CVXPY") ## line 473 ##
sage: p.add_variable() ## line 474 ##
0
sage: p.objective_coefficient(0) ## line 476 ##
0.0
sage: p.objective_coefficient(0, 2) ## line 478 ##
sage: p.objective_coefficient(0) ## line 479 ##
2
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 481 ##
0
sage: from sage.numerical.backends.generic_backend import get_solver ## line 506 ##
sage: p = get_solver(solver="CVXPY") ## line 507 ##
sage: p.add_linear_constraints(5, 0, None) ## line 508 ##
sage: p.add_col(list(range(5)), list(range(5))) ## line 509 ##
sage: p.solve() ## line 513 ##
0
sage: p.objective_coefficient(0,1) ## line 515 ##
sage: p.solve() ## line 516 ##
```

But also some seemingly unrelated stuff:

```
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/doctest/test.py  # 2 doctests failed
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/interfaces/octave.py  # 1 doctest failed
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx  # Killed due to segmentation fault
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/plot/plot3d/tachyon.py  # 2 doctests failed
sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/rings/integer.pyx  # 1 doctest failed
```

The GH CI also reports coverage-related issues, which I think will be fixed by rebasing the branch on `develop`



---

archive/issue_comments_553032.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI'm not familiar with the numerical backend logic yet, so it will take a bit more time to review.\nHere are few first remarks on the new packages:\n\n- cvxpy requires numpy to run, but also to build, shouldn't numpy be an order dependency as well?\n\n- Same question for ecos and scs.\n\n- The pyproject.toml file for cvxpy 1.2.1 specifies an upper bound for numpy that we don't comply with. I saw your comment in spkg-install.in about this. Are you sure it's okay to ignore it? What are the implication of setting `--no-build-isolation` there?\n\n- Also, why adding this flag in osqp's `spkg-install.in` file as well? And ecos?\n\n- qdldl requires pybind11 at build time, shouldn't it be an order dependency?\n\n- cylp is released under EPL version 2 (not just EPL)\n- More importantly, EPL (version 1 and 2) are incompatible with GPLv3 according to https://www.gnu.org/licenses/license-list.html#EPL2 . Cylp should be should explicitly double-licenced to be compatible with GPL.",
    "created_at": "2022-09-20T10:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553032",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:37" align="right">comment:37</div>

I'm not familiar with the numerical backend logic yet, so it will take a bit more time to review.
Here are few first remarks on the new packages:

- cvxpy requires numpy to run, but also to build, shouldn't numpy be an order dependency as well?

- Same question for ecos and scs.

- The pyproject.toml file for cvxpy 1.2.1 specifies an upper bound for numpy that we don't comply with. I saw your comment in spkg-install.in about this. Are you sure it's okay to ignore it? What are the implication of setting `--no-build-isolation` there?

- Also, why adding this flag in osqp's `spkg-install.in` file as well? And ecos?

- qdldl requires pybind11 at build time, shouldn't it be an order dependency?

- cylp is released under EPL version 2 (not just EPL)
- More importantly, EPL (version 1 and 2) are incompatible with GPLv3 according to https://www.gnu.org/licenses/license-list.html#EPL2 . Cylp should be should explicitly double-licenced to be compatible with GPL.



---

archive/issue_events_464942.json:
```json
{
    "actor": "https://github.com/Kerl13",
    "created_at": "2022-09-20T10:41:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464942"
}
```



---

archive/issue_events_464943.json:
```json
{
    "actor": "https://github.com/Kerl13",
    "created_at": "2022-09-20T10:41:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464943"
}
```



---

archive/issue_comments_553033.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI'm not an expert of the numerical backend stuff, but here are a few remarks on the code.\n\nAside from that, I've been able to run some examples from https://doc.sagemath.org/html/en/thematic_tutorials/linear_programming.html without an issue. So I guess it looks good!\n\n---\n\n**file generic_backend.pyx, line 1650:**\n\n```\nfrom sage.numerical.backends.cvxpy_backend import CVXPYBackend\n```\nIt is possible to avoid the `Unused entry 'CVXPYBackend'` cython warning using:\n\n```\n__import__(\"sage.numerical.backends.cvxpy_backend.CVXPYBackend\")\n```\n\n**file generic_backend.pyx, line 1824:** the `partial` function is imported but unused\n\n**In CVXPYBackend.__cinit__**: the arguments of the `__cinit__` method of CVXPYBackend are not documented. In particular, I have no idea what `cvxpy_solver_args` might be. Also I don't get why `base_ring` is an argument if the only legal value for it is `RDF`.\n\n**file cvxpy_backend.pyx, line 114:**\n\n```\nimport cvxpy as cp\ncvxpy_solver = getattr(cp, cvxpy_solver)\n```\ncvxpy is already imported at the top of the module, you could replace these two lines by:\n\n```\ncvxpy_solver = getattr(cvxpy, cvxpy_solver)\n```\n\n**file cvxpy_backend.pyx, line 152, in `__copy__`:**\nwhy `type(self)(base_ring=...)` and not simply `CVXPYBackend(base_ring=...)`.\n\n**In cvxpy_backend.pyx**\nI get the following cython warning:\n\n```\n[cython] FutureWarning: Cython directive 'language_level' not set, using 2 for now\n(Py2). This will change in a later release!\n```\nShouldn't we write `# cython: language_level = 3` at the top of every new cython file?\n\n**file cvxpy_backend.pyx, line 188:**\n\n```\n- ``binary`` - ``True`` if the variable is binary (default: ``False``).\n\n- ``continuous`` - ``True`` if the variable is binary (default: ``True``).\n\n- ``integer`` - ``True`` if the variable is binary (default: ``False``).\n```\nThis looks like the same docstring have been copy-pasted but not modified. This problem seems present in all the backends, I guess because it comes from the generic backend.\n\n**CVXPYBackend.set_verbosity**: maybe the docstring for `set_verbosity` should state that this method is only here for compatibility and ignores its argument?\n\n**CVXPYBackend.solve**: the `.solve` method in CVXPYBackend only has examples where solving fails, maybe it would be nice to have an example of normal usage of the function, where it succeeds?",
    "created_at": "2022-09-20T15:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553033",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:39" align="right">comment:39</div>

I'm not an expert of the numerical backend stuff, but here are a few remarks on the code.

Aside from that, I've been able to run some examples from https://doc.sagemath.org/html/en/thematic_tutorials/linear_programming.html without an issue. So I guess it looks good!

---

**file generic_backend.pyx, line 1650:**

```
from sage.numerical.backends.cvxpy_backend import CVXPYBackend
```
It is possible to avoid the `Unused entry 'CVXPYBackend'` cython warning using:

```
__import__("sage.numerical.backends.cvxpy_backend.CVXPYBackend")
```

**file generic_backend.pyx, line 1824:** the `partial` function is imported but unused

**In CVXPYBackend.__cinit__**: the arguments of the `__cinit__` method of CVXPYBackend are not documented. In particular, I have no idea what `cvxpy_solver_args` might be. Also I don't get why `base_ring` is an argument if the only legal value for it is `RDF`.

**file cvxpy_backend.pyx, line 114:**

```
import cvxpy as cp
cvxpy_solver = getattr(cp, cvxpy_solver)
```
cvxpy is already imported at the top of the module, you could replace these two lines by:

```
cvxpy_solver = getattr(cvxpy, cvxpy_solver)
```

**file cvxpy_backend.pyx, line 152, in `__copy__`:**
why `type(self)(base_ring=...)` and not simply `CVXPYBackend(base_ring=...)`.

**In cvxpy_backend.pyx**
I get the following cython warning:

```
[cython] FutureWarning: Cython directive 'language_level' not set, using 2 for now
(Py2). This will change in a later release!
```
Shouldn't we write `# cython: language_level = 3` at the top of every new cython file?

**file cvxpy_backend.pyx, line 188:**

```
- ``binary`` - ``True`` if the variable is binary (default: ``False``).

- ``continuous`` - ``True`` if the variable is binary (default: ``True``).

- ``integer`` - ``True`` if the variable is binary (default: ``False``).
```
This looks like the same docstring have been copy-pasted but not modified. This problem seems present in all the backends, I guess because it comes from the generic backend.

**CVXPYBackend.set_verbosity**: maybe the docstring for `set_verbosity` should state that this method is only here for compatibility and ignores its argument?

**CVXPYBackend.solve**: the `.solve` method in CVXPYBackend only has examples where solving fails, maybe it would be nice to have an example of normal usage of the function, where it succeeds?



---

archive/issue_comments_553034.json:
```json
{
    "body": "Reviewer: **MartinPepin**",
    "created_at": "2022-09-20T15:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553034",
    "user": "https://github.com/Kerl13"
}
```

Reviewer: **MartinPepin**



---

archive/issue_comments_553035.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A37):\n> I'm not familiar with the numerical backend logic yet, so it will take a bit more time to review.\n> Here are few first remarks on the new packages:\n> \n> - cvxpy requires numpy to run, but also to build, shouldn't numpy be an order dependency as well?\n\n\"order-only prerequisites\" are strictly weaker than normal prerequisites, so one does not have to declare both. https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html",
    "created_at": "2022-09-20T19:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553035",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [Martin Pépin](#comment%3A37):
> I'm not familiar with the numerical backend logic yet, so it will take a bit more time to review.
> Here are few first remarks on the new packages:
> 
> - cvxpy requires numpy to run, but also to build, shouldn't numpy be an order dependency as well?

"order-only prerequisites" are strictly weaker than normal prerequisites, so one does not have to declare both. https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html



---

archive/issue_comments_553036.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/effa9dbeabf42cfd34757f05b8b2ce5176523258\"><code>effa9db</code></a></td><td><code>Merge tag '9.7' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62\"><code>0bb4309</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr></table>\n",
    "created_at": "2022-09-20T19:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/effa9dbeabf42cfd34757f05b8b2ce5176523258"><code>effa9db</code></a></td><td><code>Merge tag '9.7' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62"><code>0bb4309</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr></table>




---

archive/issue_comments_553037.json:
```json
{
    "body": "Changed commit from **[`7c05f49`](https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea)** to **[`0bb4309`](https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62)**",
    "created_at": "2022-09-20T19:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553037",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7c05f49`](https://github.com/sagemath/sagetrac-mirror/commit/7c05f49ca0776b68edcad0b8277b4511b37d9eea)** to **[`0bb4309`](https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62)**



---

archive/issue_comments_553038.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A37):\n> - cylp is released under EPL version 2 (not just EPL)\n> - More importantly, EPL (version 1 and 2) are incompatible with GPLv3 according to https://www.gnu.org/licenses/license-list.html#EPL2 . Cylp should be should explicitly double-licenced to be compatible with GPL.\n\nThanks, I've added something along these lines. We actually had a discussion on this problematic situation in #26511 not too long ago.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/effa9dbeabf42cfd34757f05b8b2ce5176523258\"><code>effa9db</code></a></td><td><code>Merge tag '9.7' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62\"><code>0bb4309</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr></table>\n",
    "created_at": "2022-09-20T19:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553038",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [Martin Pépin](#comment%3A37):
> - cylp is released under EPL version 2 (not just EPL)
> - More importantly, EPL (version 1 and 2) are incompatible with GPLv3 according to https://www.gnu.org/licenses/license-list.html#EPL2 . Cylp should be should explicitly double-licenced to be compatible with GPL.

Thanks, I've added something along these lines. We actually had a discussion on this problematic situation in #26511 not too long ago.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/effa9dbeabf42cfd34757f05b8b2ce5176523258"><code>effa9db</code></a></td><td><code>Merge tag '9.7' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62"><code>0bb4309</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr></table>




---

archive/issue_comments_553039.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A37):\n> - The pyproject.toml file for cvxpy 1.2.1 specifies an upper bound for numpy that we don't comply with. I saw your comment in spkg-install.in about this. Are you sure it's okay to ignore it?\n\nNote that the documentation https://github.com/cvxpy/cvxpy#installation does not mention such upper bounds.\n\nIn https://github.com/cvxpy/cvxpy/blob/master/pyproject.toml, they are following numpy's recommendations, which are (to my understanding) motivated by setting a standard for compatibility of wheels, by building platform wheels against the minimum supported numpy version for each Python version (and platform). This is irrelevant for the Sage distribution.\n\n> What are the implication of setting `--no-build-isolation` there?\n\nWe sacrifice a small bit of build robustness that comes with the build isolation.\nUsing `--no-build-isolation` used to be the default for all packages in Sage until I changed it in #33789 (in the Sage 9.7 cycle).",
    "created_at": "2022-09-20T19:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553039",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [Martin Pépin](#comment%3A37):
> - The pyproject.toml file for cvxpy 1.2.1 specifies an upper bound for numpy that we don't comply with. I saw your comment in spkg-install.in about this. Are you sure it's okay to ignore it?

Note that the documentation https://github.com/cvxpy/cvxpy#installation does not mention such upper bounds.

In https://github.com/cvxpy/cvxpy/blob/master/pyproject.toml, they are following numpy's recommendations, which are (to my understanding) motivated by setting a standard for compatibility of wheels, by building platform wheels against the minimum supported numpy version for each Python version (and platform). This is irrelevant for the Sage distribution.

> What are the implication of setting `--no-build-isolation` there?

We sacrifice a small bit of build robustness that comes with the build isolation.
Using `--no-build-isolation` used to be the default for all packages in Sage until I changed it in #33789 (in the Sage 9.7 cycle).



---

archive/issue_comments_553040.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThanks for the careful reading of the docstrings! I'll make changes later today.",
    "created_at": "2022-09-20T19:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553040",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Thanks for the careful reading of the docstrings! I'll make changes later today.



---

archive/issue_comments_553041.json:
```json
{
    "body": "Changed reviewer from **MartinPepin** to **Martin P\u00e9pin**",
    "created_at": "2022-09-20T19:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553041",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **MartinPepin** to **Martin Pépin**



---

archive/issue_comments_553042.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A39):\n> **In cvxpy_backend.pyx**\n> I get the following cython warning:\n> \n> ```\n> [cython] FutureWarning: Cython directive 'language_level' not set, using 2 for now\n> (Py2). This will change in a later release!\n> ```\n> Shouldn't we write `# cython: language_level = 3` at the top of every new cython file?\n\nSince #33544, we set this globally (in `src/sage_setup/cython_options.py`).",
    "created_at": "2022-09-24T22:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553042",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [Martin Pépin](#comment%3A39):
> **In cvxpy_backend.pyx**
> I get the following cython warning:
> 
> ```
> [cython] FutureWarning: Cython directive 'language_level' not set, using 2 for now
> (Py2). This will change in a later release!
> ```
> Shouldn't we write `# cython: language_level = 3` at the top of every new cython file?

Since #33544, we set this globally (in `src/sage_setup/cython_options.py`).



---

archive/issue_comments_553043.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A39):\n> **file cvxpy_backend.pyx, line 152, in `__copy__`:**\n> why `type(self)(base_ring=...)` and not simply `CVXPYBackend(base_ring=...)`.\n\nThat's for the benefit of possible user-defined subclasses",
    "created_at": "2022-09-24T22:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553043",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [Martin Pépin](#comment%3A39):
> **file cvxpy_backend.pyx, line 152, in `__copy__`:**
> why `type(self)(base_ring=...)` and not simply `CVXPYBackend(base_ring=...)`.

That's for the benefit of possible user-defined subclasses



---

archive/issue_comments_553044.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/944d112c2b036bccd7c878862a94d07288991721\"><code>944d112</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add doc for init args</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e\"><code>0bd13b1</code></a></td><td><code>src/sage/numerical/backends: Remove unnecessary imports, muffle unused variable warnings</code></td></tr></table>\n",
    "created_at": "2022-09-24T22:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553044",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/944d112c2b036bccd7c878862a94d07288991721"><code>944d112</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add doc for init args</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e"><code>0bd13b1</code></a></td><td><code>src/sage/numerical/backends: Remove unnecessary imports, muffle unused variable warnings</code></td></tr></table>




---

archive/issue_comments_553045.json:
```json
{
    "body": "Changed commit from **[`0bb4309`](https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62)** to **[`0bd13b1`](https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e)**",
    "created_at": "2022-09-24T22:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553045",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0bb4309`](https://github.com/sagemath/sagetrac-mirror/commit/0bb4309013e34701fe773c9e44cdd2d5dd213a62)** to **[`0bd13b1`](https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e)**



---

archive/issue_comments_553046.json:
```json
{
    "body": "Changed commit from **[`0bd13b1`](https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e)** to **[`52d3f46`](https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639)**",
    "created_at": "2022-09-24T22:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0bd13b1`](https://github.com/sagemath/sagetrac-mirror/commit/0bd13b165ad18a14b3761dc4a6404c88aee7b92e)** to **[`52d3f46`](https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639)**



---

archive/issue_comments_553047.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639\"><code>52d3f46</code></a></td><td><code>src/sage/numerical/backends: Fix copy-pasted typos in documentation (binary/continuous/integer)</code></td></tr></table>\n",
    "created_at": "2022-09-24T22:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553047",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639"><code>52d3f46</code></a></td><td><code>src/sage/numerical/backends: Fix copy-pasted typos in documentation (binary/continuous/integer)</code></td></tr></table>




---

archive/issue_comments_553048.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A39):\n> **In CVXPYBackend.__cinit__**: the arguments of the `__cinit__` method of CVXPYBackend are not documented. In particular, I have no idea what `cvxpy_solver_args` might be.\n\nThanks, I've added some documentation now.\n\n> Also I don't get why `base_ring` is an argument if the only legal value for it is `RDF`.\n\nJust an argument that all backend classes must support because `MixedIntegerLinearProgram` passes it.",
    "created_at": "2022-09-24T22:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553048",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [Martin Pépin](#comment%3A39):
> **In CVXPYBackend.__cinit__**: the arguments of the `__cinit__` method of CVXPYBackend are not documented. In particular, I have no idea what `cvxpy_solver_args` might be.

Thanks, I've added some documentation now.

> Also I don't get why `base_ring` is an argument if the only legal value for it is `RDF`.

Just an argument that all backend classes must support because `MixedIntegerLinearProgram` passes it.



---

archive/issue_comments_553049.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785\"><code>b70559a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add to doc</code></td></tr></table>\n",
    "created_at": "2022-09-24T23:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553049",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785"><code>b70559a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add to doc</code></td></tr></table>




---

archive/issue_comments_553050.json:
```json
{
    "body": "Changed commit from **[`52d3f46`](https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639)** to **[`b70559a`](https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785)**",
    "created_at": "2022-09-24T23:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553050",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`52d3f46`](https://github.com/sagemath/sagetrac-mirror/commit/52d3f46ce49607da6516f7f06e37ad0f6e558639)** to **[`b70559a`](https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785)**



---

archive/issue_comments_553051.json:
```json
{
    "body": "Changed commit from **[`b70559a`](https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785)** to **[`c9f0b39`](https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f)**",
    "created_at": "2022-09-25T03:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553051",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b70559a`](https://github.com/sagemath/sagetrac-mirror/commit/b70559aa949ef0b7a2c6f28ffc71fd3f31fb1785)** to **[`c9f0b39`](https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f)**



---

archive/issue_comments_553052.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63b84c31702f74d0263a5e3e0cec3add027f8421\"><code>63b84c3</code></a></td><td><code>build/pkgs/scs/spkg-install.in: Use --no-build-isolation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f\"><code>c9f0b39</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Update doctest output for bounds methods</code></td></tr></table>\n",
    "created_at": "2022-09-25T03:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63b84c31702f74d0263a5e3e0cec3add027f8421"><code>63b84c3</code></a></td><td><code>build/pkgs/scs/spkg-install.in: Use --no-build-isolation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f"><code>c9f0b39</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Update doctest output for bounds methods</code></td></tr></table>




---

archive/issue_comments_553053.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [Martin P\u00e9pin](#comment%3A36):\n> Some test do not pass, most notably: \n> \n> ```\n> sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx\n>     Killed due to segmentation fault\n> ```\n\nOK, I can reproduce this now, using ubuntu-jammy",
    "created_at": "2022-09-25T04:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553053",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [Martin Pépin](#comment%3A36):
> Some test do not pass, most notably: 
> 
> ```
> sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx
>     Killed due to segmentation fault
> ```

OK, I can reproduce this now, using ubuntu-jammy



---

archive/issue_comments_553054.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A41):\n> \"order-only prerequisites\" are strictly weaker than normal prerequisites, so one does not have to declare both. https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html\n\nOh I ignored it was actually a GNU make feature. Thanks for the pointer.",
    "created_at": "2022-09-26T16:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553054",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [Matthias Köppe](#comment%3A41):
> "order-only prerequisites" are strictly weaker than normal prerequisites, so one does not have to declare both. https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html

Oh I ignored it was actually a GNU make feature. Thanks for the pointer.



---

archive/issue_comments_553055.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A43):\n> We actually had a discussion on this problematic situation in #26511 not too long ago.\n\nSo the conclusion of the discussion is that it's okay to package EPL code as long as it's only provided as an alternative to another tool and thus is not used by default by sage?",
    "created_at": "2022-09-26T16:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553055",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [Matthias Köppe](#comment%3A43):
> We actually had a discussion on this problematic situation in #26511 not too long ago.

So the conclusion of the discussion is that it's okay to package EPL code as long as it's only provided as an alternative to another tool and thus is not used by default by sage?



---

archive/issue_comments_553056.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nYes, Sage-the-distribution has the same role as a Linux distribution like Debian.",
    "created_at": "2022-09-26T16:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553056",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Yes, Sage-the-distribution has the same role as a Linux distribution like Debian.



---

archive/issue_comments_553057.json:
```json
{
    "body": "Attachment: **[cvxpy.log](https://github.com/sagemath/sage/files/ticket34251/cvxpy.log)**",
    "created_at": "2022-10-02T16:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553057",
    "user": "https://github.com/Kerl13"
}
```

Attachment: **[cvxpy.log](https://github.com/sagemath/sage/files/ticket34251/cvxpy.log)**



---

archive/issue_comments_553058.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nAfter rebasing on develop, I now get the attached errors when running `sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx`\n\nDon't know why the segfault occurred before but the new errors look minor now",
    "created_at": "2022-10-02T16:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553058",
    "user": "https://github.com/Kerl13"
}
```

<div id="comment:58" align="right">comment:58</div>

After rebasing on develop, I now get the attached errors when running `sage -t --long --random-seed=262306895609334379547192037378099413502 src/sage/numerical/backends/cvxpy_backend.pyx`

Don't know why the segfault occurred before but the new errors look minor now



---

archive/issue_comments_553059.json:
```json
{
    "body": "Changed commit from **[`c9f0b39`](https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f)** to **[`539c970`](https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48)**",
    "created_at": "2022-10-02T22:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553059",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9f0b39`](https://github.com/sagemath/sagetrac-mirror/commit/c9f0b39aec965730bfae1fd4a0f1997423c7619f)** to **[`539c970`](https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48)**



---

archive/issue_comments_553060.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55fc4fbbcbaf437977a87b55829c406c7a6ffd02\"><code>55fc4fb</code></a></td><td><code>build/pkgs/{cvxpy,scs,osqp_python,ecos_python,qdldl_python}: Add distros/conda.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18e7434763226568a693d0702924bd47ab7c8b60\"><code>18e7434</code></a></td><td><code>build/pkgs/osqp_python/dependencies: Add cmake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11e4de8d045ee27cfdb8439fe84f5a5de67d1fd9\"><code>11e4de8</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Remove suitesparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a1eeec2c8cef1f1e7daf41e7b1f21aff92591e7\"><code>9a1eeec</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9c92aec7237099e0b31120cc06bb3335c4e523c\"><code>b9c92ae</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add doc for init args</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b840bddd970e89247a6f17625cdd59c959a2c69\"><code>5b840bd</code></a></td><td><code>src/sage/numerical/backends: Remove unnecessary imports, muffle unused variable warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7132302e349532f02a7eb174114c3dcac5808250\"><code>7132302</code></a></td><td><code>src/sage/numerical/backends: Fix copy-pasted typos in documentation (binary/continuous/integer)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5cbc5acda3505f8aa31b53052d6b21391a35498\"><code>b5cbc5a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add to doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83ce468ea3d852f4f3b1131c512d3380a82ab27b\"><code>83ce468</code></a></td><td><code>build/pkgs/scs/spkg-install.in: Use --no-build-isolation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48\"><code>539c970</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Update doctest output for bounds methods</code></td></tr></table>\n",
    "created_at": "2022-10-02T22:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553060",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55fc4fbbcbaf437977a87b55829c406c7a6ffd02"><code>55fc4fb</code></a></td><td><code>build/pkgs/{cvxpy,scs,osqp_python,ecos_python,qdldl_python}: Add distros/conda.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18e7434763226568a693d0702924bd47ab7c8b60"><code>18e7434</code></a></td><td><code>build/pkgs/osqp_python/dependencies: Add cmake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11e4de8d045ee27cfdb8439fe84f5a5de67d1fd9"><code>11e4de8</code></a></td><td><code>build/pkgs/ecos_python/dependencies: Remove suitesparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a1eeec2c8cef1f1e7daf41e7b1f21aff92591e7"><code>9a1eeec</code></a></td><td><code>build/pkgs/cylp/SPKG.rst: Add more detailed license info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9c92aec7237099e0b31120cc06bb3335c4e523c"><code>b9c92ae</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add doc for init args</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b840bddd970e89247a6f17625cdd59c959a2c69"><code>5b840bd</code></a></td><td><code>src/sage/numerical/backends: Remove unnecessary imports, muffle unused variable warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7132302e349532f02a7eb174114c3dcac5808250"><code>7132302</code></a></td><td><code>src/sage/numerical/backends: Fix copy-pasted typos in documentation (binary/continuous/integer)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5cbc5acda3505f8aa31b53052d6b21391a35498"><code>b5cbc5a</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Add to doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83ce468ea3d852f4f3b1131c512d3380a82ab27b"><code>83ce468</code></a></td><td><code>build/pkgs/scs/spkg-install.in: Use --no-build-isolation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48"><code>539c970</code></a></td><td><code>src/sage/numerical/backends/cvxpy_backend.pyx: Update doctest output for bounds methods</code></td></tr></table>




---

archive/issue_comments_553061.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98c38c1743d3477628b76d27a15b64389e698dc8\"><code>98c38c1</code></a></td><td><code>Merge tag '9.8.beta3' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7211f4208965f7dd2c775be7fbf89e589f21fecd\"><code>7211f42</code></a></td><td><code>build/pkgs/cvxpy: Update to 1.2.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5\"><code>7346fd1</code></a></td><td><code>build/pkgs/scs: Update to 3.2.2</code></td></tr></table>\n",
    "created_at": "2022-11-15T08:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553061",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98c38c1743d3477628b76d27a15b64389e698dc8"><code>98c38c1</code></a></td><td><code>Merge tag '9.8.beta3' into t/34251/add_optional_package_cvxpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7211f4208965f7dd2c775be7fbf89e589f21fecd"><code>7211f42</code></a></td><td><code>build/pkgs/cvxpy: Update to 1.2.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5"><code>7346fd1</code></a></td><td><code>build/pkgs/scs: Update to 3.2.2</code></td></tr></table>




---

archive/issue_comments_553062.json:
```json
{
    "body": "Changed commit from **[`539c970`](https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48)** to **[`7346fd1`](https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5)**",
    "created_at": "2022-11-15T08:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553062",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`539c970`](https://github.com/sagemath/sagetrac-mirror/commit/539c9705baef065d773f8a5349096679e6248e48)** to **[`7346fd1`](https://github.com/sagemath/sagetrac-mirror/commit/7346fd1e3c2f7ebf4c6b01090dd14bc87b1641c5)**



---

archive/issue_comments_553063.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nTests at https://github.com/mkoeppe/sage/actions/runs/3476460100, https://github.com/mkoeppe/sage/actions/runs/3476460090",
    "created_at": "2022-11-16T04:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34251#issuecomment-553063",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Tests at https://github.com/mkoeppe/sage/actions/runs/3476460100, https://github.com/mkoeppe/sage/actions/runs/3476460090



---

archive/issue_events_464944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464944"
}
```



---

archive/issue_events_464945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34251",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34251#event-464945"
}
```
