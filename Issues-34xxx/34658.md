# Issue 34658: Update numpy to 1.23.5, scipy 1.9.3, networkx 2.8.8, meson_python 0.11.0

archive/issues_034421.json:
```json
{
    "assignees": [],
    "body": "https://github.com/numpy/numpy/releases/tag/v1.23.4\n\nhttps://docs.scipy.org/doc/scipy/release.1.9.3.html\n\nhttps://meson-python.readthedocs.io/en/latest/changelog.html#changelog\n\n\nDepends on #34081\n\nCC:  @dimpase @dcoudert @kiwifb @orlitzky @jhpalmieri\n\nBranch/Commit: **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34658_\n\n",
    "closed_at": "2022-12-11T11:11:52Z",
    "created_at": "2022-10-14T06:29:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update numpy to 1.23.5, scipy 1.9.3, networkx 2.8.8, meson_python 0.11.0",
    "type": "issue",
    "updated_at": "2022-12-11T11:11:52Z",
    "url": "https://github.com/sagemath/sage/issues/34658",
    "user": "https://github.com/mkoeppe"
}
```
https://github.com/numpy/numpy/releases/tag/v1.23.4

https://docs.scipy.org/doc/scipy/release.1.9.3.html

https://meson-python.readthedocs.io/en/latest/changelog.html#changelog


Depends on #34081

CC:  @dimpase @dcoudert @kiwifb @orlitzky @jhpalmieri

Branch/Commit: **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/34658_





---

archive/issue_events_454214.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-14T06:29:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454214"
}
```



---

archive/issue_events_454215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-14T06:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454215"
}
```



---

archive/issue_events_454216.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-14T06:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454216"
}
```



---

archive/issue_events_454217.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-14T06:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454217"
}
```



---

archive/issue_comments_562599.json:
```json
{
    "body": "Branch: **[u/mkoeppe/update_numpy_to_1_23_4](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_numpy_to_1_23_4)**",
    "created_at": "2022-10-14T06:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562599",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/update_numpy_to_1_23_4](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_numpy_to_1_23_4)**



---

archive/issue_comments_562600.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-10-14T06:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562600",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_454218.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-14T06:37:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454218"
}
```



---

archive/issue_comments_562601.json:
```json
{
    "body": "Commit: **[0d18405](https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb)**",
    "created_at": "2022-10-14T06:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562601",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[0d18405](https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb)**



---

archive/issue_comments_562602.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb\">0d18405</a></td><td><code>build/pkgs/numpy: Update to 1.23.4</code></td></tr></table>\n",
    "created_at": "2022-10-14T06:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562602",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb">0d18405</a></td><td><code>build/pkgs/numpy: Update to 1.23.4</code></td></tr></table>




---

archive/issue_comments_562603.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/3251926884**",
    "created_at": "2022-10-16T02:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562603",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/3251926884**



---

archive/issue_comments_562604.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n https://github.com/numpy/numpy/releases/tag/v1.23.4\n \n+https://docs.scipy.org/doc/scipy/release.1.9.3.html\n``````\n",
    "created_at": "2022-10-22T06:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562604",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 https://github.com/numpy/numpy/releases/tag/v1.23.4
 
+https://docs.scipy.org/doc/scipy/release.1.9.3.html
``````




---

archive/issue_events_454219.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-22T06:13:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "title_is": "Update numpy to 1.23.4, scipy 1.9.3, networkx 2.8.7",
    "title_was": "Update numpy to 1.23.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454219"
}
```



---

archive/issue_comments_562605.json:
```json
{
    "body": "Dependencies: **#34081**",
    "created_at": "2022-10-22T06:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562605",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34081**



---

archive/issue_comments_562606.json:
```json
{
    "body": "Changed commit from **[0d18405](https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb)** to **[ba5c196](https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b)**",
    "created_at": "2022-10-22T06:49:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562606",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0d18405](https://github.com/sagemath/sagetrac-mirror/commit/0d18405deace7965182ad0f1d87b07c744b256fb)** to **[ba5c196](https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b)**



---

archive/issue_comments_562607.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d36ed98544ee0e74941dbdffe021798124e4c176\">d36ed98</a></td><td><code>tox.ini (python3.*-minimal): Provide system liblzma so that system python can be accepted; not system xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f62b625ec6ef271e87e6a26deeb816387d5543c0\">f62b625</a></td><td><code>Merge #32182</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8990d53f335631f4926cfb1c1e18bfa9ecda5689\">8990d53</a></td><td><code>.github/workflows/docker.yml: Add option free_disk_space</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09244b05468c5b7b407074a60cbd3452eebd60a7\">09244b0</a></td><td><code>tox.ini (python3.x): Do not clobber user-provided EXTRA_SAGE_PACKAGES</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fb4eac6f4a87fa73fa79a1b173cd09e590ab2fa\">9fb4eac</a></td><td><code>.github/workflows/docker.yml: Add option extra_sage_packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3897adb6aa1c59f4410315ea813e4ccc08cc3df0\">3897adb</a></td><td><code>tox.ini (manylinux-minimal): Provide system liblzma so that system python can be accepted; not system xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b7f679a57c034c7dba6ae5fcd92505574122bc8\">4b7f679</a></td><td><code>Merge #34081</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcc7087f16fd9c7f3015d5a40c51089b934f3834\">fcc7087</a></td><td><code>build/pkgs/scipy: Update to 1.9.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2b5da4528b59fbbbc74bcaeee3acead6e7cd654\">a2b5da4</a></td><td><code>build/pkgs/networkx: Update to 2.8.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b\">ba5c196</a></td><td><code>build/pkgs/pythran: Update to 0.12.0</code></td></tr></table>\n",
    "created_at": "2022-10-22T06:49:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d36ed98544ee0e74941dbdffe021798124e4c176">d36ed98</a></td><td><code>tox.ini (python3.*-minimal): Provide system liblzma so that system python can be accepted; not system xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f62b625ec6ef271e87e6a26deeb816387d5543c0">f62b625</a></td><td><code>Merge #32182</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8990d53f335631f4926cfb1c1e18bfa9ecda5689">8990d53</a></td><td><code>.github/workflows/docker.yml: Add option free_disk_space</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09244b05468c5b7b407074a60cbd3452eebd60a7">09244b0</a></td><td><code>tox.ini (python3.x): Do not clobber user-provided EXTRA_SAGE_PACKAGES</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fb4eac6f4a87fa73fa79a1b173cd09e590ab2fa">9fb4eac</a></td><td><code>.github/workflows/docker.yml: Add option extra_sage_packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3897adb6aa1c59f4410315ea813e4ccc08cc3df0">3897adb</a></td><td><code>tox.ini (manylinux-minimal): Provide system liblzma so that system python can be accepted; not system xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b7f679a57c034c7dba6ae5fcd92505574122bc8">4b7f679</a></td><td><code>Merge #34081</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcc7087f16fd9c7f3015d5a40c51089b934f3834">fcc7087</a></td><td><code>build/pkgs/scipy: Update to 1.9.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2b5da4528b59fbbbc74bcaeee3acead6e7cd654">a2b5da4</a></td><td><code>build/pkgs/networkx: Update to 2.8.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b">ba5c196</a></td><td><code>build/pkgs/pythran: Update to 0.12.0</code></td></tr></table>




---

archive/issue_comments_562608.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI get test errors in `matrix2.pyx`, line 6935 which calls scipy on these tasks:\n\n```\nA = matrix(RDF, [[1, -2], [3, 4]])\nB = matrix(RDF, [[0, 7], [2, -3]])\nD, P = A.eigenmatrix_left(B)\n(P * A - D * P * B).norm() < 1e-14\n```\n(and a similar at line 7151 (for _right rather than _left).\n\nAnd it's not just numerical noise:\n\n```\nsage: (P * A - D * P * B).norm()\n12.951156314021555\nsage: P * A - D * P * B\n[ 1.1102230246251565e-16     -12.951156314021551]\n[-2.7755575615628914e-17 -3.1086244689504383e-15]\n```",
    "created_at": "2022-10-31T09:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562608",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

I get test errors in `matrix2.pyx`, line 6935 which calls scipy on these tasks:

```
A = matrix(RDF, [[1, -2], [3, 4]])
B = matrix(RDF, [[0, 7], [2, -3]])
D, P = A.eigenmatrix_left(B)
(P * A - D * P * B).norm() < 1e-14
```
(and a similar at line 7151 (for _right rather than _left).

And it's not just numerical noise:

```
sage: (P * A - D * P * B).norm()
12.951156314021555
sage: P * A - D * P * B
[ 1.1102230246251565e-16     -12.951156314021551]
[-2.7755575615628914e-17 -3.1086244689504383e-15]
```



---

archive/issue_events_454220.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-31T09:09:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454220"
}
```



---

archive/issue_events_454221.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-10-31T09:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454221"
}
```



---

archive/issue_comments_562609.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nthe 1st of two gen. eigenvectors is wrong.\n\n```\nsage: A.eigenvectors_left(B)\n[(-2.1075759441619084, [(-0.9905315991237724, 0.1372849268394109)], 1),\n (-0.3922809560592623, [(-0.9668186179746967, 0.2554638133620835)], 1)]\n```\nvs. the previous version (1.8.1), correct one:\n\n```\nsage: A.eigenvectors_left(B)\n[(1.8208523846306908, [(-0.5400711566794881, -0.8416193591659354)], 1),\n (-0.39228095605926194, [(-0.9668186179746967, 0.2554638133620835)], 1)]\n```\n\nThis can be traced down to scipy call:\n\n```\nsage:         v, eig = scipy.linalg.eig(A.numpy(),\n....:                                   B.numpy(),\n....:                                   right=False, left=True,\n....:                                   homogeneous_eigvals=False)\nsage: v\narray([-2.10757594+0.j, -0.39228096+0.j])\nsage: eig\narray([[-0.9905316 , -1.        ],\n       [ 0.13728493,  0.26423138]])\n```\nvs, correct, previous version:\n\n```\nsage: v\narray([ 1.82085238+0.j, -0.39228096+0.j])\nsage: eig\narray([[-0.54007116, -1.        ],\n       [-0.84161936,  0.26423138]])\n```",
    "created_at": "2022-10-31T09:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562609",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

the 1st of two gen. eigenvectors is wrong.

```
sage: A.eigenvectors_left(B)
[(-2.1075759441619084, [(-0.9905315991237724, 0.1372849268394109)], 1),
 (-0.3922809560592623, [(-0.9668186179746967, 0.2554638133620835)], 1)]
```
vs. the previous version (1.8.1), correct one:

```
sage: A.eigenvectors_left(B)
[(1.8208523846306908, [(-0.5400711566794881, -0.8416193591659354)], 1),
 (-0.39228095605926194, [(-0.9668186179746967, 0.2554638133620835)], 1)]
```

This can be traced down to scipy call:

```
sage:         v, eig = scipy.linalg.eig(A.numpy(),
....:                                   B.numpy(),
....:                                   right=False, left=True,
....:                                   homogeneous_eigvals=False)
sage: v
array([-2.10757594+0.j, -0.39228096+0.j])
sage: eig
array([[-0.9905316 , -1.        ],
       [ 0.13728493,  0.26423138]])
```
vs, correct, previous version:

```
sage: v
array([ 1.82085238+0.j, -0.39228096+0.j])
sage: eig
array([[-0.54007116, -1.        ],
       [-0.84161936,  0.26423138]])
```



---

archive/issue_comments_562610.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2022-10-31T10:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562610",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_562611.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI can reproduce this with \"plain\" scipy on Gentoo (installed as system Gentoo package)",
    "created_at": "2022-10-31T10:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562611",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">Comment 9</div>

I can reproduce this with "plain" scipy on Gentoo (installed as system Gentoo package)



---

archive/issue_comments_562612.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThis is !Gentoo/Sage-specific. If instead of system- (or Sage-)built scipy I use binary wheels from pypi, everything is fine.\n\nThe next test will be to try building Sage's scipy on a non-Gentoo system.",
    "created_at": "2022-10-31T10:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562612",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">Comment 10</div>

This is !Gentoo/Sage-specific. If instead of system- (or Sage-)built scipy I use binary wheels from pypi, everything is fine.

The next test will be to try building Sage's scipy on a non-Gentoo system.



---

archive/issue_comments_562613.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\ncc-ing Gentoo people. On Gentoo-built scipy 1.9.3, one gets incorrect generalised eigenvectors.\n\n```\n$ python3\nPython 3.10.7 (main, Oct 10 2022, 13:00:40) [GCC 11.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import scipy, numpy\n>>> A=numpy.array([[ 1., -2.],[ 3.,  4.]])\n>>> B=numpy.array([[ 0.,  7.],[ 2., -3.]])\n>>> scipy.linalg.eig(A,B,right=False, left=True, homogeneous_eigvals=False)\n(array([-2.10757594+0.j, -0.39228096+0.j]), array([[-0.9905316 , -1.        ],\n       [ 0.13728493,  0.26423138]]))\n```\ninstead of correct\n\n```\n(array([ 1.82085238+0.j, -0.39228096+0.j]), array([[-0.54007116, -1.        ],\n       [-0.84161936,  0.26423138]]))\n```\n\npip-installing binary wheels for numpy ans scipy from PyPI (same versions) produces correct results.",
    "created_at": "2022-10-31T11:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562613",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">Comment 11</div>

cc-ing Gentoo people. On Gentoo-built scipy 1.9.3, one gets incorrect generalised eigenvectors.

```
$ python3
Python 3.10.7 (main, Oct 10 2022, 13:00:40) [GCC 11.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy, numpy
>>> A=numpy.array([[ 1., -2.],[ 3.,  4.]])
>>> B=numpy.array([[ 0.,  7.],[ 2., -3.]])
>>> scipy.linalg.eig(A,B,right=False, left=True, homogeneous_eigvals=False)
(array([-2.10757594+0.j, -0.39228096+0.j]), array([[-0.9905316 , -1.        ],
       [ 0.13728493,  0.26423138]]))
```
instead of correct

```
(array([ 1.82085238+0.j, -0.39228096+0.j]), array([[-0.54007116, -1.        ],
       [-0.84161936,  0.26423138]]))
```

pip-installing binary wheels for numpy ans scipy from PyPI (same versions) produces correct results.



---

archive/issue_comments_562614.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nOn Fedora 34, everything is fine (with openblas 0.3.19, not sure whether it matters)",
    "created_at": "2022-10-31T12:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562614",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">Comment 12</div>

On Fedora 34, everything is fine (with openblas 0.3.19, not sure whether it matters)



---

archive/issue_comments_562615.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBuilding Sage's OpenBLAS (Gentoo provides an older OpenBLAS, 0.3.20) appears to fix the problem.\nShould we ban 0.3.20 ? Anyhow, Gentoo has to fix it.",
    "created_at": "2022-10-31T13:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562615",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

Building Sage's OpenBLAS (Gentoo provides an older OpenBLAS, 0.3.20) appears to fix the problem.
Should we ban 0.3.20 ? Anyhow, Gentoo has to fix it.



---

archive/issue_comments_562616.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nSubmitted https://bugs.gentoo.org/878883",
    "created_at": "2022-10-31T13:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562616",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

Submitted https://bugs.gentoo.org/878883



---

archive/issue_comments_562617.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**",
    "created_at": "2022-10-31T13:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562617",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_562618.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2022-10-31T14:05:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562618",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_562619.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nFurther on arm64 (Apple M1) one gets\n\n```\n...\n[scipy-1.9.3]   [1224/1224] scipy/io/_harwell_boeing/tests/test_hb.py\n[scipy-1.9.3]   Preparing metadata (pyproject.toml): finished with status 'done'\n[scipy-1.9.3] Building wheels for collected packages: scipy\n[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): started\n[scipy-1.9.3]   Running command Building wheel for scipy (pyproject.toml)\n[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): finished with status 'done'\n[scipy-1.9.3]   Created wheel for scipy: filename=scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl size=21560240 sha256=7f146f5c01cacccb1f543dd03f7852c9fa69832ac83e3438a3054b07ddadf986\n[scipy-1.9.3]   Stored in directory: /private/var/folders/81/vt06lnj17rj0cpc9gdshy4q00000gr/T/pip-ephem-wheel-cache-u972yyp0/wheels/07/68/a7/3970e07638c02f51cea93e74047bd18f05b865d87665dddaa5\n[scipy-1.9.3] Successfully built scipy\n[scipy-1.9.3] WARNING: Skipping scipy as it is not installed.\n[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)\n[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels\n[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.\n[scipy-1.9.3] Warning: installing with \"python3 -m pip install --verbose --no-index --find-links=/Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels --disable-pip-version-check --isolated --no-cache-dir\" failed. Retrying, adding \"--no-deps --ignore-installed --ignore-requires-python\"\n[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)\n[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels\n[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.\n[scipy-1.9.3] Error: installing with pip  failed\n```",
    "created_at": "2022-10-31T18:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562619",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">Comment 17</div>

Further on arm64 (Apple M1) one gets

```
...
[scipy-1.9.3]   [1224/1224] scipy/io/_harwell_boeing/tests/test_hb.py
[scipy-1.9.3]   Preparing metadata (pyproject.toml): finished with status 'done'
[scipy-1.9.3] Building wheels for collected packages: scipy
[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): started
[scipy-1.9.3]   Running command Building wheel for scipy (pyproject.toml)
[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): finished with status 'done'
[scipy-1.9.3]   Created wheel for scipy: filename=scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl size=21560240 sha256=7f146f5c01cacccb1f543dd03f7852c9fa69832ac83e3438a3054b07ddadf986
[scipy-1.9.3]   Stored in directory: /private/var/folders/81/vt06lnj17rj0cpc9gdshy4q00000gr/T/pip-ephem-wheel-cache-u972yyp0/wheels/07/68/a7/3970e07638c02f51cea93e74047bd18f05b865d87665dddaa5
[scipy-1.9.3] Successfully built scipy
[scipy-1.9.3] WARNING: Skipping scipy as it is not installed.
[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)
[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels
[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.
[scipy-1.9.3] Warning: installing with "python3 -m pip install --verbose --no-index --find-links=/Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels --disable-pip-version-check --isolated --no-cache-dir" failed. Retrying, adding "--no-deps --ignore-installed --ignore-requires-python"
[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)
[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels
[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.
[scipy-1.9.3] Error: installing with pip  failed
```



---

archive/issue_comments_562620.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nupgrading to pip 22.3 does not help",
    "created_at": "2022-10-31T18:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562620",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">Comment 18</div>

upgrading to pip 22.3 does not help



---

archive/issue_comments_562621.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReported in https://github.com/mesonbuild/meson-python/issues/160#issuecomment-1297972659",
    "created_at": "2022-11-01T03:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562621",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">Comment 19</div>

Reported in https://github.com/mesonbuild/meson-python/issues/160#issuecomment-1297972659



---

archive/issue_comments_562622.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\non intel macOS 13 with Homebrew, I get meson complaining about perfectly OK `gfortran`.\n\n---\n\nupdate - in fact, Apple's command line tools didn't update themselves, and that was the reason for this error. Sorry for noise.",
    "created_at": "2022-11-02T16:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562622",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

on intel macOS 13 with Homebrew, I get meson complaining about perfectly OK `gfortran`.

---

update - in fact, Apple's command line tools didn't update themselves, and that was the reason for this error. Sorry for noise.



---

archive/issue_comments_562623.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fc95bdf1c57de290a993be8a7a7f0328f5e5032\">5fc95bd</a></td><td><code>Merge tag '9.8.beta3' into t/34658/update_numpy_to_1_23_4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/313d0fdf8e25e3799df87840e2efc5852acb750c\">313d0fd</a></td><td><code>build/pkgs/networkx: Update to 2.8.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac\">3706d5d</a></td><td><code>build/pkgs/meson_python/patches: Add https://github.com/mesonbuild/meson-python/pull/202</code></td></tr></table>\n",
    "created_at": "2022-11-17T00:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562623",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fc95bdf1c57de290a993be8a7a7f0328f5e5032">5fc95bd</a></td><td><code>Merge tag '9.8.beta3' into t/34658/update_numpy_to_1_23_4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/313d0fdf8e25e3799df87840e2efc5852acb750c">313d0fd</a></td><td><code>build/pkgs/networkx: Update to 2.8.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac">3706d5d</a></td><td><code>build/pkgs/meson_python/patches: Add https://github.com/mesonbuild/meson-python/pull/202</code></td></tr></table>




---

archive/issue_comments_562624.json:
```json
{
    "body": "Changed commit from **[ba5c196](https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b)** to **[3706d5d](https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac)**",
    "created_at": "2022-11-17T00:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ba5c196](https://github.com/sagemath/sagetrac-mirror/commit/ba5c196223aa96014e0e138711f26d8238f3841b)** to **[3706d5d](https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac)**



---

archive/issue_events_454222.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-17T00:15:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454222"
}
```



---

archive/issue_events_454223.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-17T00:15:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454223"
}
```



---

archive/issue_events_454224.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-17T00:15:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "title_is": "Update numpy to 1.23.4, scipy 1.9.3, networkx 2.8.8",
    "title_was": "Update numpy to 1.23.4, scipy 1.9.3, networkx 2.8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454224"
}
```



---

archive/issue_events_454225.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-17T00:23:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454225"
}
```



---

archive/issue_events_454226.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-17T00:23:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454226"
}
```



---

archive/issue_comments_562625.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9590f5c24b32e2c69dcd29553ae522d37bbfdcb\">e9590f5</a></td><td><code>build/pkgs/meson_python: Update to 0.11.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575\">bbf5f95</a></td><td><code>build/pkgs/numpy: Update to 1.23.5</code></td></tr></table>\n",
    "created_at": "2022-11-21T20:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562625",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9590f5c24b32e2c69dcd29553ae522d37bbfdcb">e9590f5</a></td><td><code>build/pkgs/meson_python: Update to 0.11.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575">bbf5f95</a></td><td><code>build/pkgs/numpy: Update to 1.23.5</code></td></tr></table>




---

archive/issue_comments_562626.json:
```json
{
    "body": "Changed commit from **[3706d5d](https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac)** to **[bbf5f95](https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575)**",
    "created_at": "2022-11-21T20:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562626",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3706d5d](https://github.com/sagemath/sagetrac-mirror/commit/3706d5dcc8a0f9de4d635d2fc9b7f2b6814d91ac)** to **[bbf5f95](https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575)**



---

archive/issue_comments_562627.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9590f5c24b32e2c69dcd29553ae522d37bbfdcb\">e9590f5</a></td><td><code>build/pkgs/meson_python: Update to 0.11.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575\">bbf5f95</a></td><td><code>build/pkgs/numpy: Update to 1.23.5</code></td></tr></table>\n",
    "created_at": "2022-11-21T21:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562627",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">Comment 26</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9590f5c24b32e2c69dcd29553ae522d37bbfdcb">e9590f5</a></td><td><code>build/pkgs/meson_python: Update to 0.11.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575">bbf5f95</a></td><td><code>build/pkgs/numpy: Update to 1.23.5</code></td></tr></table>




---

archive/issue_events_454227.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-21T21:05:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454227"
}
```



---

archive/issue_events_454228.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-21T21:05:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454228"
}
```



---

archive/issue_comments_562628.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2022-11-21T21:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562628",
    "user": "https://github.com/mkoeppe"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_562629.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n https://github.com/numpy/numpy/releases/tag/v1.23.4\n \n https://docs.scipy.org/doc/scipy/release.1.9.3.html\n+\n+https://meson-python.readthedocs.io/en/latest/changelog.html#changelog\n+\n``````\n",
    "created_at": "2022-11-21T21:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562629",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 https://github.com/numpy/numpy/releases/tag/v1.23.4
 
 https://docs.scipy.org/doc/scipy/release.1.9.3.html
+
+https://meson-python.readthedocs.io/en/latest/changelog.html#changelog
+
``````




---

archive/issue_events_454229.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-21T21:05:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "title_is": "Update numpy to 1.23.5, scipy 1.9.3, networkx 2.8.8, meson_python 0.11.0",
    "title_was": "Update numpy to 1.23.4, scipy 1.9.3, networkx 2.8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454229"
}
```



---

archive/issue_comments_562630.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7\">d74528c</a></td><td><code>Merge tag '9.8.beta4' into t/34658/update_numpy_to_1_23_4</code></td></tr></table>\n",
    "created_at": "2022-11-21T23:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562630",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7">d74528c</a></td><td><code>Merge tag '9.8.beta4' into t/34658/update_numpy_to_1_23_4</code></td></tr></table>




---

archive/issue_comments_562631.json:
```json
{
    "body": "Changed commit from **[bbf5f95](https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575)** to **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**",
    "created_at": "2022-11-21T23:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bbf5f95](https://github.com/sagemath/sagetrac-mirror/commit/bbf5f95fc58782b544514959c9199ffb68060575)** to **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**



---

archive/issue_comments_562632.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nOn OS X M2, `scipy` fails some tests in its test suite, but installation succeeds anyway, not sure why.\n\n```\n=========================== short test summary info ============================\nFAILED linalg/tests/test_solvers.py::test_solve_discrete_are - AssertionError: \nFAILED optimize/tests/test_linprog.py::TestLinprogIPSparse::test_bug_6139 - A...\nFAILED optimize/tests/test_linprog.py::TestLinprogIPSparsePresolve::test_bug_6139\nFAILED sparse/linalg/_isolve/tests/test_iterative.py::test_maxiter_worsening[gmres]\n= 4 failed, 37207 passed, 3314 skipped, 12061 deselected, 136 xfailed, 12 xpassed, 326 warnings in 515.97s (0:08:35) =\n```",
    "created_at": "2022-11-22T21:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562632",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">Comment 29</div>

On OS X M2, `scipy` fails some tests in its test suite, but installation succeeds anyway, not sure why.

```
=========================== short test summary info ============================
FAILED linalg/tests/test_solvers.py::test_solve_discrete_are - AssertionError: 
FAILED optimize/tests/test_linprog.py::TestLinprogIPSparse::test_bug_6139 - A...
FAILED optimize/tests/test_linprog.py::TestLinprogIPSparsePresolve::test_bug_6139
FAILED sparse/linalg/_isolve/tests/test_iterative.py::test_maxiter_worsening[gmres]
= 4 failed, 37207 passed, 3314 skipped, 12061 deselected, 136 xfailed, 12 xpassed, 326 warnings in 515.97s (0:08:35) =
```



---

archive/issue_comments_562633.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nTest suite passes on OS X Intel.",
    "created_at": "2022-11-22T21:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562633",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">Comment 30</div>

Test suite passes on OS X Intel.



---

archive/issue_comments_562634.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nOne of them may be https://github.com/scipy/scipy/issues/16926",
    "created_at": "2022-11-22T23:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562634",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

One of them may be https://github.com/scipy/scipy/issues/16926



---

archive/issue_comments_562635.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nI would prefer that a failing test suite meant a failed installation, but maybe `python3 -c 'import scipy; scipy.test()'` doesn't return a nonzero code if it fails.",
    "created_at": "2022-11-22T23:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562635",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">Comment 32</div>

I would prefer that a failing test suite meant a failed installation, but maybe `python3 -c 'import scipy; scipy.test()'` doesn't return a nonzero code if it fails.



---

archive/issue_comments_562636.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI agree, we should fix this.",
    "created_at": "2022-11-22T23:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>

I agree, we should fix this.



---

archive/issue_comments_562637.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nMaybe we should merge this now and patch things up in follow-up tickets, since I (for one) can't build the most recent beta without this. Are there other issues that should be addressed on this ticket?",
    "created_at": "2022-11-22T23:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562637",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">Comment 34</div>

Maybe we should merge this now and patch things up in follow-up tickets, since I (for one) can't build the most recent beta without this. Are there other issues that should be addressed on this ticket?



---

archive/issue_comments_562638.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\n(I took a quick glance at the `scipy` code, and it looks like it's trying to return different exit codes. It was only a very quick glance, though.)",
    "created_at": "2022-11-22T23:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562638",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">Comment 35</div>

(I took a quick glance at the `scipy` code, and it looks like it's trying to return different exit codes. It was only a very quick glance, though.)



---

archive/issue_comments_562639.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nTests for Linux are still running at https://github.com/mkoeppe/sage/actions/runs/3519527763",
    "created_at": "2022-11-22T23:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562639",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">Comment 36</div>

Tests for Linux are still running at https://github.com/mkoeppe/sage/actions/runs/3519527763



---

archive/issue_events_454230.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-23T02:41:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454230"
}
```



---

archive/issue_events_454231.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-11-23T02:41:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454231"
}
```



---

archive/issue_comments_562640.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nThere is a problem on `archlinux-standard` related to scipy; that is unchanged by this upgrade. That's #34779",
    "created_at": "2022-11-23T04:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562640",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">Comment 38</div>

There is a problem on `archlinux-standard` related to scipy; that is unchanged by this upgrade. That's #34779



---

archive/issue_comments_562641.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThe other Linux platforms look fine.",
    "created_at": "2022-11-23T07:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562641",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

The other Linux platforms look fine.



---

archive/issue_events_454232.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-11-23T18:10:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454232"
}
```



---

archive/issue_events_454233.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-11-23T18:10:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454233"
}
```



---

archive/issue_comments_562642.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3251926884** to **John Palmieri**",
    "created_at": "2022-11-23T18:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562642",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3251926884** to **John Palmieri**



---

archive/issue_comments_562643.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nOkay, then let's proceed here.",
    "created_at": "2022-11-23T18:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562643",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">Comment 40</div>

Okay, then let's proceed here.



---

archive/issue_comments_562644.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThanks!",
    "created_at": "2022-11-23T19:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562644",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">Comment 41</div>

Thanks!



---

archive/issue_comments_562645.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nblocker, as on a recent macOS one cannot build scipy (1.9.20.",
    "created_at": "2022-12-08T14:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562645",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">Comment 42</div>

blocker, as on a recent macOS one cannot build scipy (1.9.20.



---

archive/issue_events_454234.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-08T14:10:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454234"
}
```



---

archive/issue_events_454235.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-12-08T14:10:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454235"
}
```



---

archive/issue_comments_562646.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/update_numpy_to_1_23_4](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_numpy_to_1_23_4)** to **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**",
    "created_at": "2022-12-11T11:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34658#issuecomment-562646",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/update_numpy_to_1_23_4](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_numpy_to_1_23_4)** to **[d74528c](https://github.com/sagemath/sagetrac-mirror/commit/d74528c0c41e6368c14274817337d011ae24a6f7)**



---

archive/issue_events_454236.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-12-11T11:11:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454236"
}
```



---

archive/issue_events_454237.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7064a32556ca569ea597d47c925d591d600d698c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-12-11T11:11:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34658",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34658#event-454237"
}
```
