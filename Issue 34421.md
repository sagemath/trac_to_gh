# Issue 34421: Update numpy to 1.23.4

archive/issues_034421.json:
```json
{
    "body": "CC:  dimpase dcoudert fbissey mjo jhpalmieri\n\nhttps://github.com/numpy/numpy/releases/tag/v1.23.4\n\nIssue created by migration from https://trac.sagemath.org/ticket/34658\n\n",
    "created_at": "2022-10-14T06:29:56Z",
    "labels": [
        "packages: standard",
        "minor",
        "enhancement"
    ],
    "title": "Update numpy to 1.23.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34421",
    "user": "mkoeppe"
}
```
CC:  dimpase dcoudert fbissey mjo jhpalmieri

https://github.com/numpy/numpy/releases/tag/v1.23.4

Issue created by migration from https://trac.sagemath.org/ticket/34658





---

archive/issue_comments_487669.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-10-14T06:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487669",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487670.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-10-14T06:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487670",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_487671.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-10-22T06:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487671",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_487672.json:
```json
{
    "body": "I get test errors in `matrix2.pyx`, line 6935 which calls scipy on these tasks:\n\n```\nA = matrix(RDF, [[1, -2], [3, 4]])\nB = matrix(RDF, [[0, 7], [2, -3]])\nD, P = A.eigenmatrix_left(B)\n(P * A - D * P * B).norm() < 1e-14\n```\n\n(and a similar at line 7151 (for _right rather than _left).\n\nAnd it's not just numerical noise:\n\n```\nsage: (P * A - D * P * B).norm()\n12.951156314021555\nsage: P * A - D * P * B\n[ 1.1102230246251565e-16     -12.951156314021551]\n[-2.7755575615628914e-17 -3.1086244689504383e-15]\n```\n",
    "created_at": "2022-10-31T09:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487672",
    "user": "dimpase"
}
```

I get test errors in `matrix2.pyx`, line 6935 which calls scipy on these tasks:

```
A = matrix(RDF, [[1, -2], [3, 4]])
B = matrix(RDF, [[0, 7], [2, -3]])
D, P = A.eigenmatrix_left(B)
(P * A - D * P * B).norm() < 1e-14
```

(and a similar at line 7151 (for _right rather than _left).

And it's not just numerical noise:

```
sage: (P * A - D * P * B).norm()
12.951156314021555
sage: P * A - D * P * B
[ 1.1102230246251565e-16     -12.951156314021551]
[-2.7755575615628914e-17 -3.1086244689504383e-15]
```




---

archive/issue_comments_487673.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-10-31T09:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487673",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_487674.json:
```json
{
    "body": "the 1st of two gen. eigenvectors is wrong.\n\n```\nsage: A.eigenvectors_left(B)\n[(-2.1075759441619084, [(-0.9905315991237724, 0.1372849268394109)], 1),\n (-0.3922809560592623, [(-0.9668186179746967, 0.2554638133620835)], 1)]\n```\n\nvs. the previous version (1.8.1), correct one:\n\n```\nsage: A.eigenvectors_left(B)\n[(1.8208523846306908, [(-0.5400711566794881, -0.8416193591659354)], 1),\n (-0.39228095605926194, [(-0.9668186179746967, 0.2554638133620835)], 1)]\n```\n\n\nThis can be traced down to scipy call:\n\n```\nsage:         v, eig = scipy.linalg.eig(A.numpy(),\n....:                                   B.numpy(),\n....:                                   right=False, left=True,\n....:                                   homogeneous_eigvals=False)\nsage: v\narray([-2.10757594+0.j, -0.39228096+0.j])\nsage: eig\narray([[-0.9905316 , -1.        ],\n       [ 0.13728493,  0.26423138]])\n```\n\nvs, correct, previous version:\n\n```\nsage: v\narray([ 1.82085238+0.j, -0.39228096+0.j])\nsage: eig\narray([[-0.54007116, -1.        ],\n       [-0.84161936,  0.26423138]])\n```\n",
    "created_at": "2022-10-31T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487674",
    "user": "dimpase"
}
```

the 1st of two gen. eigenvectors is wrong.

```
sage: A.eigenvectors_left(B)
[(-2.1075759441619084, [(-0.9905315991237724, 0.1372849268394109)], 1),
 (-0.3922809560592623, [(-0.9668186179746967, 0.2554638133620835)], 1)]
```

vs. the previous version (1.8.1), correct one:

```
sage: A.eigenvectors_left(B)
[(1.8208523846306908, [(-0.5400711566794881, -0.8416193591659354)], 1),
 (-0.39228095605926194, [(-0.9668186179746967, 0.2554638133620835)], 1)]
```


This can be traced down to scipy call:

```
sage:         v, eig = scipy.linalg.eig(A.numpy(),
....:                                   B.numpy(),
....:                                   right=False, left=True,
....:                                   homogeneous_eigvals=False)
sage: v
array([-2.10757594+0.j, -0.39228096+0.j])
sage: eig
array([[-0.9905316 , -1.        ],
       [ 0.13728493,  0.26423138]])
```

vs, correct, previous version:

```
sage: v
array([ 1.82085238+0.j, -0.39228096+0.j])
sage: eig
array([[-0.54007116, -1.        ],
       [-0.84161936,  0.26423138]])
```




---

archive/issue_comments_487675.json:
```json
{
    "body": "I can reproduce this with \"plain\" scipy on Gentoo (installed as system Gentoo package)",
    "created_at": "2022-10-31T10:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487675",
    "user": "dimpase"
}
```

I can reproduce this with "plain" scipy on Gentoo (installed as system Gentoo package)



---

archive/issue_comments_487676.json:
```json
{
    "body": "This is !Gentoo/Sage-specific. If instead of system- (or Sage-)built scipy I use binary wheels from pypi, everything is fine.\n\nThe next test will be to try building Sage's scipy on a non-Gentoo system.",
    "created_at": "2022-10-31T10:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487676",
    "user": "dimpase"
}
```

This is !Gentoo/Sage-specific. If instead of system- (or Sage-)built scipy I use binary wheels from pypi, everything is fine.

The next test will be to try building Sage's scipy on a non-Gentoo system.



---

archive/issue_comments_487677.json:
```json
{
    "body": "cc-ing Gentoo people. On Gentoo-built scipy 1.9.3, one gets incorrect generalised eigenvectors.\n\n\n```\n$ python3\nPython 3.10.7 (main, Oct 10 2022, 13:00:40) [GCC 11.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import scipy, numpy\n>>> A=numpy.array([[ 1., -2.],[ 3.,  4.]])\n>>> B=numpy.array([[ 0.,  7.],[ 2., -3.]])\n>>> scipy.linalg.eig(A,B,right=False, left=True, homogeneous_eigvals=False)\n(array([-2.10757594+0.j, -0.39228096+0.j]), array([[-0.9905316 , -1.        ],\n       [ 0.13728493,  0.26423138]]))\n```\n\ninstead of correct\n\n```\n(array([ 1.82085238+0.j, -0.39228096+0.j]), array([[-0.54007116, -1.        ],\n       [-0.84161936,  0.26423138]]))\n```\n\n\npip-installing binary wheels for numpy ans scipy from PyPI (same versions) produces correct results.",
    "created_at": "2022-10-31T11:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487677",
    "user": "dimpase"
}
```

cc-ing Gentoo people. On Gentoo-built scipy 1.9.3, one gets incorrect generalised eigenvectors.


```
$ python3
Python 3.10.7 (main, Oct 10 2022, 13:00:40) [GCC 11.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy, numpy
>>> A=numpy.array([[ 1., -2.],[ 3.,  4.]])
>>> B=numpy.array([[ 0.,  7.],[ 2., -3.]])
>>> scipy.linalg.eig(A,B,right=False, left=True, homogeneous_eigvals=False)
(array([-2.10757594+0.j, -0.39228096+0.j]), array([[-0.9905316 , -1.        ],
       [ 0.13728493,  0.26423138]]))
```

instead of correct

```
(array([ 1.82085238+0.j, -0.39228096+0.j]), array([[-0.54007116, -1.        ],
       [-0.84161936,  0.26423138]]))
```


pip-installing binary wheels for numpy ans scipy from PyPI (same versions) produces correct results.



---

archive/issue_comments_487678.json:
```json
{
    "body": "On Fedora 34, everything is fine (with openblas 0.3.19, not sure whether it matters)",
    "created_at": "2022-10-31T12:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487678",
    "user": "dimpase"
}
```

On Fedora 34, everything is fine (with openblas 0.3.19, not sure whether it matters)



---

archive/issue_comments_487679.json:
```json
{
    "body": "Building Sage's OpenBLAS (Gentoo provides an older OpenBLAS, 0.3.20) appears to fix the problem.\nShould we ban 0.3.20 ? Anyhow, Gentoo has to fix it.",
    "created_at": "2022-10-31T13:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487679",
    "user": "dimpase"
}
```

Building Sage's OpenBLAS (Gentoo provides an older OpenBLAS, 0.3.20) appears to fix the problem.
Should we ban 0.3.20 ? Anyhow, Gentoo has to fix it.



---

archive/issue_comments_487680.json:
```json
{
    "body": "Submitted https://bugs.gentoo.org/878883",
    "created_at": "2022-10-31T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487680",
    "user": "dimpase"
}
```

Submitted https://bugs.gentoo.org/878883



---

archive/issue_comments_487681.json:
```json
{
    "body": "Further on arm64 (Apple M1) one gets\n\n```\n...\n[scipy-1.9.3]   [1224/1224] scipy/io/_harwell_boeing/tests/test_hb.py\n[scipy-1.9.3]   Preparing metadata (pyproject.toml): finished with status 'done'\n[scipy-1.9.3] Building wheels for collected packages: scipy\n[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): started\n[scipy-1.9.3]   Running command Building wheel for scipy (pyproject.toml)\n[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): finished with status 'done'\n[scipy-1.9.3]   Created wheel for scipy: filename=scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl size=21560240 sha256=7f146f5c01cacccb1f543dd03f7852c9fa69832ac83e3438a3054b07ddadf986\n[scipy-1.9.3]   Stored in directory: /private/var/folders/81/vt06lnj17rj0cpc9gdshy4q00000gr/T/pip-ephem-wheel-cache-u972yyp0/wheels/07/68/a7/3970e07638c02f51cea93e74047bd18f05b865d87665dddaa5\n[scipy-1.9.3] Successfully built scipy\n[scipy-1.9.3] WARNING: Skipping scipy as it is not installed.\n[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)\n[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels\n[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.\n[scipy-1.9.3] Warning: installing with \"python3 -m pip install --verbose --no-index --find-links=/Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels --disable-pip-version-check --isolated --no-cache-dir\" failed. Retrying, adding \"--no-deps --ignore-installed --ignore-requires-python\"\n[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)\n[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels\n[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.\n[scipy-1.9.3] Error: installing with pip  failed\n```\n",
    "created_at": "2022-10-31T18:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487681",
    "user": "dimpase"
}
```

Further on arm64 (Apple M1) one gets

```
...
[scipy-1.9.3]   [1224/1224] scipy/io/_harwell_boeing/tests/test_hb.py
[scipy-1.9.3]   Preparing metadata (pyproject.toml): finished with status 'done'
[scipy-1.9.3] Building wheels for collected packages: scipy
[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): started
[scipy-1.9.3]   Running command Building wheel for scipy (pyproject.toml)
[scipy-1.9.3]   Building wheel for scipy (pyproject.toml): finished with status 'done'
[scipy-1.9.3]   Created wheel for scipy: filename=scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl size=21560240 sha256=7f146f5c01cacccb1f543dd03f7852c9fa69832ac83e3438a3054b07ddadf986
[scipy-1.9.3]   Stored in directory: /private/var/folders/81/vt06lnj17rj0cpc9gdshy4q00000gr/T/pip-ephem-wheel-cache-u972yyp0/wheels/07/68/a7/3970e07638c02f51cea93e74047bd18f05b865d87665dddaa5
[scipy-1.9.3] Successfully built scipy
[scipy-1.9.3] WARNING: Skipping scipy as it is not installed.
[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)
[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels
[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.
[scipy-1.9.3] Warning: installing with "python3 -m pip install --verbose --no-index --find-links=/Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels --disable-pip-version-check --isolated --no-cache-dir" failed. Retrying, adding "--no-deps --ignore-installed --ignore-requires-python"
[scipy-1.9.3] Using pip 22.2.2 from /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/pip (python 3.10)
[scipy-1.9.3] Looking in links: /Volumes/dima/sage/local/var/lib/sage/venv-python3.10/var/lib/sage/wheels
[scipy-1.9.3] ERROR: scipy-1.9.3-cp310-cp310-macosx_13_arm64.whl is not a supported wheel on this platform.
[scipy-1.9.3] Error: installing with pip  failed
```




---

archive/issue_comments_487682.json:
```json
{
    "body": "upgrading to pip 22.3 does not help",
    "created_at": "2022-10-31T18:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487682",
    "user": "dimpase"
}
```

upgrading to pip 22.3 does not help



---

archive/issue_comments_487683.json:
```json
{
    "body": "Reported in https://github.com/mesonbuild/meson-python/issues/160#issuecomment-1297972659",
    "created_at": "2022-11-01T03:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487683",
    "user": "mkoeppe"
}
```

Reported in https://github.com/mesonbuild/meson-python/issues/160#issuecomment-1297972659



---

archive/issue_comments_487684.json:
```json
{
    "body": "on intel macOS 13 with Homebrew, I get meson complaining about perfectly OK `gfortran`.\n\n------\n\nupdate - in fact, Apple's command line tools didn't update themselves, and that was the reason for this error. Sorry for noise.",
    "created_at": "2022-11-02T16:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487684",
    "user": "dimpase"
}
```

on intel macOS 13 with Homebrew, I get meson complaining about perfectly OK `gfortran`.

------

update - in fact, Apple's command line tools didn't update themselves, and that was the reason for this error. Sorry for noise.



---

archive/issue_comments_487685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-17T00:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487686.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-11-17T00:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487686",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_487687.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-11-17T00:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487687",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_487688.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-11-21T20:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487688",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_487689.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-11-21T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487689",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_487690.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-11-21T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487690",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_487691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-21T23:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487691",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487692.json:
```json
{
    "body": "On OS X M2, `scipy` fails some tests in its test suite, but installation succeeds anyway, not sure why.\n\n```\n=========================== short test summary info ============================\nFAILED linalg/tests/test_solvers.py::test_solve_discrete_are - AssertionError: \nFAILED optimize/tests/test_linprog.py::TestLinprogIPSparse::test_bug_6139 - A...\nFAILED optimize/tests/test_linprog.py::TestLinprogIPSparsePresolve::test_bug_6139\nFAILED sparse/linalg/_isolve/tests/test_iterative.py::test_maxiter_worsening[gmres]\n# 4 failed, 37207 passed, 3314 skipped, 12061 deselected, 136 xfailed, 12 xpassed, 326 warnings in 515.97s (0:08:35)\n```\n",
    "created_at": "2022-11-22T21:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487692",
    "user": "jhpalmieri"
}
```

On OS X M2, `scipy` fails some tests in its test suite, but installation succeeds anyway, not sure why.

```
=========================== short test summary info ============================
FAILED linalg/tests/test_solvers.py::test_solve_discrete_are - AssertionError: 
FAILED optimize/tests/test_linprog.py::TestLinprogIPSparse::test_bug_6139 - A...
FAILED optimize/tests/test_linprog.py::TestLinprogIPSparsePresolve::test_bug_6139
FAILED sparse/linalg/_isolve/tests/test_iterative.py::test_maxiter_worsening[gmres]
# 4 failed, 37207 passed, 3314 skipped, 12061 deselected, 136 xfailed, 12 xpassed, 326 warnings in 515.97s (0:08:35)
```




---

archive/issue_comments_487693.json:
```json
{
    "body": "Test suite passes on OS X Intel.",
    "created_at": "2022-11-22T21:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487693",
    "user": "jhpalmieri"
}
```

Test suite passes on OS X Intel.



---

archive/issue_comments_487694.json:
```json
{
    "body": "One of them may be https://github.com/scipy/scipy/issues/16926",
    "created_at": "2022-11-22T23:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487694",
    "user": "mkoeppe"
}
```

One of them may be https://github.com/scipy/scipy/issues/16926



---

archive/issue_comments_487695.json:
```json
{
    "body": "I would prefer that a failing test suite meant a failed installation, but maybe `python3 -c 'import scipy; scipy.test()'` doesn't return a nonzero code if it fails.",
    "created_at": "2022-11-22T23:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487695",
    "user": "jhpalmieri"
}
```

I would prefer that a failing test suite meant a failed installation, but maybe `python3 -c 'import scipy; scipy.test()'` doesn't return a nonzero code if it fails.



---

archive/issue_comments_487696.json:
```json
{
    "body": "I agree, we should fix this.",
    "created_at": "2022-11-22T23:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487696",
    "user": "mkoeppe"
}
```

I agree, we should fix this.



---

archive/issue_comments_487697.json:
```json
{
    "body": "Maybe we should merge this now and patch things up in follow-up tickets, since I (for one) can't build the most recent beta without this. Are there other issues that should be addressed on this ticket?",
    "created_at": "2022-11-22T23:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487697",
    "user": "jhpalmieri"
}
```

Maybe we should merge this now and patch things up in follow-up tickets, since I (for one) can't build the most recent beta without this. Are there other issues that should be addressed on this ticket?



---

archive/issue_comments_487698.json:
```json
{
    "body": "(I took a quick glance at the `scipy` code, and it looks like it's trying to return different exit codes. It was only a very quick glance, though.)",
    "created_at": "2022-11-22T23:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487698",
    "user": "jhpalmieri"
}
```

(I took a quick glance at the `scipy` code, and it looks like it's trying to return different exit codes. It was only a very quick glance, though.)



---

archive/issue_comments_487699.json:
```json
{
    "body": "Tests for Linux are still running at https://github.com/mkoeppe/sage/actions/runs/3519527763",
    "created_at": "2022-11-22T23:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487699",
    "user": "mkoeppe"
}
```

Tests for Linux are still running at https://github.com/mkoeppe/sage/actions/runs/3519527763



---

archive/issue_comments_487700.json:
```json
{
    "body": "Changing priority from minor to critical.",
    "created_at": "2022-11-23T02:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487700",
    "user": "mkoeppe"
}
```

Changing priority from minor to critical.



---

archive/issue_comments_487701.json:
```json
{
    "body": "There is a problem on `archlinux-standard` related to scipy; that is unchanged by this upgrade. That's #34779",
    "created_at": "2022-11-23T04:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487701",
    "user": "mkoeppe"
}
```

There is a problem on `archlinux-standard` related to scipy; that is unchanged by this upgrade. That's #34779



---

archive/issue_comments_487702.json:
```json
{
    "body": "The other Linux platforms look fine.",
    "created_at": "2022-11-23T07:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487702",
    "user": "mkoeppe"
}
```

The other Linux platforms look fine.



---

archive/issue_comments_487703.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-23T18:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487703",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487704.json:
```json
{
    "body": "Okay, then let's proceed here.",
    "created_at": "2022-11-23T18:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487704",
    "user": "jhpalmieri"
}
```

Okay, then let's proceed here.



---

archive/issue_comments_487705.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-11-23T19:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487705",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_487706.json:
```json
{
    "body": "blocker, as on a recent macOS one cannot build scipy (1.9.20.",
    "created_at": "2022-12-08T14:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487706",
    "user": "dimpase"
}
```

blocker, as on a recent macOS one cannot build scipy (1.9.20.



---

archive/issue_comments_487707.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2022-12-08T14:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487707",
    "user": "dimpase"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_487708.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-12-11T11:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34421#issuecomment-487708",
    "user": "vbraun"
}
```

Resolution: fixed
