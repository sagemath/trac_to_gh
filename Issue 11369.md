# Issue 11369: Add example with solution_dict and substituting in a matrix

Issue created by migration from https://trac.sagemath.org/ticket/11541

Original creator: kcrisman

Original creation time: 2011-06-24 13:49:56

Assignee: mvngu

Keywords: beginner matrix solve symbolic

See [this ask.sagemath.org question](http://ask.sagemath.org/question/614/how-to-properly-substitute-in-a-matrix).  The poster wants an example something like

```
f(x,y)=x^2*y+y^2+y
solutions=solve(list(f.diff()),[x,y])
the_solution=solutions[2]
H=f.diff(2);  # Hessian matrix
```

but showing this.

```
sage: solutions=solve(list(f.diff()),[x,y],solution_dict=True)
sage: solutions
[{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]
sage: H.subs(solutions[2])
[(x, y) |--> -1  (x, y) |--> 0]
[ (x, y) |--> 0  (x, y) |--> 2]
sage: H(x,y).subs(solutions[2])
[-1  0]
[ 0  2]
```

This seems like a reasonable request.


---

Comment by tscholl2 created at 2015-05-26 00:56:34

Changing status from new to needs_review.


---

Comment by tscholl2 created at 2015-05-26 00:56:34

Added two examples in symbolic expressions on:

http://doc.sagemath.org/html/en/reference/calculus/sage/symbolic/relation.html

One is substituting variables into matrices of symbolic functions and the other is solving a multivariate equation and substituting the solution into a matrix.
----
New commits:


---

Comment by vdelecroix created at 2015-09-12 22:16:38

Hello,

Could you use `A = B` instead of `A=B`? You did it in the first example but not the second. Something like

```
sage: solutions = solve(list(f.diff()), [x,y], solution_dict=True)
```

is much easier to read.

Vincent


---

Comment by vdelecroix created at 2015-09-12 22:16:38

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-09-13 16:46:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscholl2 created at 2015-09-13 16:48:31

Thanks for pointing that out!

I added some spacing. Is there anything else you noticed?


---

Comment by tscholl2 created at 2015-09-13 16:48:31

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2015-09-13 17:33:44

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2015-09-13 17:33:44

That was all!


---

Comment by vbraun created at 2015-09-14 08:17:30

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-09-14 08:17:30

Doctest depends on dictionary order of symbolic variables:

```
sage -t --long src/sage/symbolic/relation.py
**********************************************************************
File "src/sage/symbolic/relation.py", line 158, in sage.symbolic.relation
Failed example:
    solutions
Expected:
    [{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]
Got:
    [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]
**********************************************************************
1 item had failures:
   1 of 131 in sage.symbolic.relation
    [295 tests, 1 failure, 7.50 s]
```



---

Comment by git created at 2015-09-22 18:43:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscholl2 created at 2015-09-22 18:46:25

I didn't get that error when I tested the file. I merged in the latest release and I still don't get the error. Do you think it could be my Sage installation? It's a pretty clean version except for an optional package for another branch I was working on. Are other people getting this error?


---

Comment by vbraun created at 2015-09-22 19:05:15

The doctest sorts dictionaries, but the sort order of symbolic variables is random (and depends strongly on memory locations / the OS). Just rewrite the test as something that doesn't depend on random orders, e.g.

```
solutions == [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]
```



---

Comment by git created at 2015-09-22 19:12:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscholl2 created at 2015-09-22 19:15:34

Interesting, I had no idea the order of symbolic variables was that random.

I updated the doc test using the equality check instead and it seems to work great. Thanks for the fix!

I noticed there was some other tests not using equality checks like this on lines 136 and 143 (and probably more), which is probably where I copied my test from. Should this be a separate ticket or should I modify it on this branch as well?


---

Comment by git created at 2017-10-07 22:03:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscholl2 created at 2017-10-07 22:06:51

I found that the other tests did not rely on multiple variables, so they are fine.

I also brought this branch up to date and checked that the docs still build.


---

Comment by tscholl2 created at 2017-10-07 22:07:16

Changing status from needs_work to needs_review.


---

Comment by aly.deines created at 2017-10-23 23:32:22

The doctests pass and the documentation builds and looks good.


---

Comment by aly.deines created at 2017-10-23 23:32:22

Changing status from needs_review to positive_review.


---

Comment by aly.deines created at 2017-10-23 23:32:22

Changing keywords from "beginner matrix solve symbolic" to "beginner matrix solve symbolic sd90".


---

Comment by vbraun created at 2017-11-01 18:07:12

Resolution: fixed
