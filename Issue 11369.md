# Issue 11369: Add example with solution_dict and substituting in a matrix

archive/issues_011369.json:
```json
{
    "body": "Assignee: mvngu\n\nKeywords: beginner matrix solve symbolic\n\nSee [this ask.sagemath.org question](http://ask.sagemath.org/question/614/how-to-properly-substitute-in-a-matrix).  The poster wants an example something like\n\n```\nf(x,y)=x^2*y+y^2+y\nsolutions=solve(list(f.diff()),[x,y])\nthe_solution=solutions[2]\nH=f.diff(2);  # Hessian matrix\n```\n\nbut showing this.\n\n```\nsage: solutions=solve(list(f.diff()),[x,y],solution_dict=True)\nsage: solutions\n[{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]\nsage: H.subs(solutions[2])\n[(x, y) |--> -1  (x, y) |--> 0]\n[ (x, y) |--> 0  (x, y) |--> 2]\nsage: H(x,y).subs(solutions[2])\n[-1  0]\n[ 0  2]\n```\n\nThis seems like a reasonable request.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11541\n\n",
    "created_at": "2011-06-24T13:49:56Z",
    "labels": [
        "documentation",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Add example with solution_dict and substituting in a matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11369",
    "user": "@kcrisman"
}
```
Assignee: mvngu

Keywords: beginner matrix solve symbolic

See [this ask.sagemath.org question](http://ask.sagemath.org/question/614/how-to-properly-substitute-in-a-matrix).  The poster wants an example something like

```
f(x,y)=x^2*y+y^2+y
solutions=solve(list(f.diff()),[x,y])
the_solution=solutions[2]
H=f.diff(2);  # Hessian matrix
```

but showing this.

```
sage: solutions=solve(list(f.diff()),[x,y],solution_dict=True)
sage: solutions
[{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]
sage: H.subs(solutions[2])
[(x, y) |--> -1  (x, y) |--> 0]
[ (x, y) |--> 0  (x, y) |--> 2]
sage: H(x,y).subs(solutions[2])
[-1  0]
[ 0  2]
```

This seems like a reasonable request.

Issue created by migration from https://trac.sagemath.org/ticket/11541





---

archive/issue_comments_125999.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-26T00:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-125999",
    "user": "@tscholl2"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126000.json:
```json
{
    "body": "Added two examples in symbolic expressions on:\n\nhttp://doc.sagemath.org/html/en/reference/calculus/sage/symbolic/relation.html\n\nOne is substituting variables into matrices of symbolic functions and the other is solving a multivariate equation and substituting the solution into a matrix.\n----\nNew commits:",
    "created_at": "2015-05-26T00:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126000",
    "user": "@tscholl2"
}
```

Added two examples in symbolic expressions on:

http://doc.sagemath.org/html/en/reference/calculus/sage/symbolic/relation.html

One is substituting variables into matrices of symbolic functions and the other is solving a multivariate equation and substituting the solution into a matrix.
----
New commits:



---

archive/issue_comments_126001.json:
```json
{
    "body": "Hello,\n\nCould you use `A = B` instead of `A=B`? You did it in the first example but not the second. Something like\n\n```\nsage: solutions = solve(list(f.diff()), [x,y], solution_dict=True)\n```\n\nis much easier to read.\n\nVincent",
    "created_at": "2015-09-12T22:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126001",
    "user": "@videlec"
}
```

Hello,

Could you use `A = B` instead of `A=B`? You did it in the first example but not the second. Something like

```
sage: solutions = solve(list(f.diff()), [x,y], solution_dict=True)
```

is much easier to read.

Vincent



---

archive/issue_comments_126002.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-12T22:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126002",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_126003.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-13T16:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126003",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_126004.json:
```json
{
    "body": "Thanks for pointing that out!\n\nI added some spacing. Is there anything else you noticed?",
    "created_at": "2015-09-13T16:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126004",
    "user": "@tscholl2"
}
```

Thanks for pointing that out!

I added some spacing. Is there anything else you noticed?



---

archive/issue_comments_126005.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-13T16:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126005",
    "user": "@tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126006.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-09-13T17:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126006",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126007.json:
```json
{
    "body": "That was all!",
    "created_at": "2015-09-13T17:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126007",
    "user": "@videlec"
}
```

That was all!



---

archive/issue_comments_126008.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-09-14T08:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126008",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_126009.json:
```json
{
    "body": "Doctest depends on dictionary order of symbolic variables:\n\n```\nsage -t --long src/sage/symbolic/relation.py\n**********************************************************************\nFile \"src/sage/symbolic/relation.py\", line 158, in sage.symbolic.relation\nFailed example:\n    solutions\nExpected:\n    [{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]\nGot:\n    [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]\n**********************************************************************\n1 item had failures:\n   1 of 131 in sage.symbolic.relation\n    [295 tests, 1 failure, 7.50 s]\n```\n",
    "created_at": "2015-09-14T08:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126009",
    "user": "@vbraun"
}
```

Doctest depends on dictionary order of symbolic variables:

```
sage -t --long src/sage/symbolic/relation.py
**********************************************************************
File "src/sage/symbolic/relation.py", line 158, in sage.symbolic.relation
Failed example:
    solutions
Expected:
    [{y: 0, x: -I}, {y: 0, x: I}, {y: -1/2, x: 0}]
Got:
    [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]
**********************************************************************
1 item had failures:
   1 of 131 in sage.symbolic.relation
    [295 tests, 1 failure, 7.50 s]
```




---

archive/issue_comments_126010.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-22T18:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126010",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_126011.json:
```json
{
    "body": "I didn't get that error when I tested the file. I merged in the latest release and I still don't get the error. Do you think it could be my Sage installation? It's a pretty clean version except for an optional package for another branch I was working on. Are other people getting this error?",
    "created_at": "2015-09-22T18:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126011",
    "user": "@tscholl2"
}
```

I didn't get that error when I tested the file. I merged in the latest release and I still don't get the error. Do you think it could be my Sage installation? It's a pretty clean version except for an optional package for another branch I was working on. Are other people getting this error?



---

archive/issue_comments_126012.json:
```json
{
    "body": "The doctest sorts dictionaries, but the sort order of symbolic variables is random (and depends strongly on memory locations / the OS). Just rewrite the test as something that doesn't depend on random orders, e.g.\n\n```\nsolutions == [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]\n```\n",
    "created_at": "2015-09-22T19:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126012",
    "user": "@vbraun"
}
```

The doctest sorts dictionaries, but the sort order of symbolic variables is random (and depends strongly on memory locations / the OS). Just rewrite the test as something that doesn't depend on random orders, e.g.

```
solutions == [{x: -I, y: 0}, {x: I, y: 0}, {x: 0, y: -1/2}]
```




---

archive/issue_comments_126013.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-22T19:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126013",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_126014.json:
```json
{
    "body": "Interesting, I had no idea the order of symbolic variables was that random.\n\nI updated the doc test using the equality check instead and it seems to work great. Thanks for the fix!\n\nI noticed there was some other tests not using equality checks like this on lines 136 and 143 (and probably more), which is probably where I copied my test from. Should this be a separate ticket or should I modify it on this branch as well?",
    "created_at": "2015-09-22T19:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126014",
    "user": "@tscholl2"
}
```

Interesting, I had no idea the order of symbolic variables was that random.

I updated the doc test using the equality check instead and it seems to work great. Thanks for the fix!

I noticed there was some other tests not using equality checks like this on lines 136 and 143 (and probably more), which is probably where I copied my test from. Should this be a separate ticket or should I modify it on this branch as well?



---

archive/issue_comments_126015.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-07T22:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126015",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_126016.json:
```json
{
    "body": "I found that the other tests did not rely on multiple variables, so they are fine.\n\nI also brought this branch up to date and checked that the docs still build.",
    "created_at": "2017-10-07T22:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126016",
    "user": "@tscholl2"
}
```

I found that the other tests did not rely on multiple variables, so they are fine.

I also brought this branch up to date and checked that the docs still build.



---

archive/issue_comments_126017.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-07T22:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126017",
    "user": "@tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_126018.json:
```json
{
    "body": "The doctests pass and the documentation builds and looks good.",
    "created_at": "2017-10-23T23:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126018",
    "user": "@adeines"
}
```

The doctests pass and the documentation builds and looks good.



---

archive/issue_comments_126019.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-23T23:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126019",
    "user": "@adeines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126020.json:
```json
{
    "body": "Changing keywords from \"beginner matrix solve symbolic\" to \"beginner matrix solve symbolic sd90\".",
    "created_at": "2017-10-23T23:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126020",
    "user": "@adeines"
}
```

Changing keywords from "beginner matrix solve symbolic" to "beginner matrix solve symbolic sd90".



---

archive/issue_comments_126021.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-11-01T18:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11369#issuecomment-126021",
    "user": "@vbraun"
}
```

Resolution: fixed
