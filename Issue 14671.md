# Issue 14671: Remove CombinatorialClass from DyckWords

Issue created by migration from https://trac.sagemath.org/ticket/14875

Original creator: tscrim

Original creation time: 2013-07-10 08:40:30

Assignee: sage-combinat

CC:  sage-combinat nthiery

And general reorganization thereof.

Part of #12913.


---

Comment by darij created at 2013-07-12 18:11:57


```
Use the bijection [Knu1973]_ to send ``self`` to a `321`-avoiding
permutation.
```


This reference (to TAOCP III without any further pointer) might not be very helpful. It should specify pp. 60-61. Better, add a reference to 3.1 of http://arxiv.org/abs/0805.1325 which defines it explicitly.


---

Comment by tscrim created at 2013-07-19 12:54:57

The dependency on #12453 is due to `doctest/sources.py`.


---

Comment by tscrim created at 2013-07-19 12:54:57

Changing status from new to needs_review.


---

Comment by darij created at 2013-08-28 12:16:53

Uploading some modifications, yet far from an actual review. One thing I'm doing is eliminating the dependency on the order of multiplication of permutations.

I don't understand what the aliases here are for (copypasta?):

```
    display=dict(default="list",
                 description='Specifies how Dyck words should be printed',
                 values=dict(list='displayed as a list',
                             lattice='displayed on the lattice defined by ``diagram_style``'),
                 alias=dict(exp="exp_low", compact="compact_low", array="diagram",
                           ferrers_diagram="diagram", young_diagram="diagram"),
                 case_sensitive=False),
```



---

Comment by tscrim created at 2013-08-30 00:47:42

Hey Darij,

That whole latex option is a copy/paste (copypasta) error and should be removed since there are (currently) no other latex output types.

Also if we review this before #12453, I can easily commute the patches.

Thanks,

Travis


---

Comment by darij created at 2013-08-30 23:45:31

Uploaded my review patch. Please look over it as I'm not 100% sure I always caught your correct intentions.

I took the freedom to remove `def is_a_prefix` (and replace all reference to it by ones to `is_a`), since it was doing precisely the same thing as `def is_a`. This might theoretically have caused some issues in other places, but at least the sage/combinat/*.py files doctest correctly (I have only done `./sage -bt devel/sage-main/sage/combinat`; for doctesting the whole library I don't have the time right now).

Why did you remove the `an_element()` doctests?

Yes, please commute this ante #12453, as I don't feel I have very much to say about Cython structs.


---

Comment by tscrim created at 2013-09-01 19:30:39

Hey Darij,

Thanks for doing the full review. I commuted it past #12453, folded in your review patch so I could make one small change of making `is_a_prefix` a deprecated function alias of `is_a`.

Thanks,

Travis


---

Attachment

For patchbot:

Apply: trac_14875-remove_cc_dyck_word-ts.patch


---

Comment by darij created at 2013-09-02 13:23:52

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-09-02 16:10:07

Thank you again Darij.


---

Comment by jdemeyer created at 2013-09-30 06:29:45

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-09-30 06:29:45


```
**********************************************************************
File "devel/sage/sage/doctest/sources.py", line 666, in sage.doctest.sources.FileDocTestSource._test_enough_doctests
Failed example:
    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time
        path = os.path.relpath(path)
        dirs.sort(); files.sort()
        for F in files:
            _, ext = os.path.splitext(F)
            if ext in ('.py', '.pyx', '.sage', '.spyx', '.rst'):
                filename = os.path.join(path, F)
                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))
                FDS._test_enough_doctests(verbose=False)
Expected:
    There are 6 tests in sage/combinat/dyck_word.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 2 tests in sage/server/notebook/worksheet.py that are not being run
Got:
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 9 tests in sage/graphs/graph_plot.py that are not being run
    There are 2 tests in sage/server/notebook/worksheet.py that are not being run
**********************************************************************
```



---

Attachment

updated version with edited doctest result on sources.py


---

Comment by darij created at 2013-10-02 00:11:22

That said, I have no idea what doctests aren't run in the first place... (and why).


---

Comment by tscrim created at 2013-10-02 01:36:37

It's because they are in dynamic docstrings (i.e. set via a `__doc__` attribute), not static to a class or function. This is a known issue #14272.

For patchbot:

Apply: trac_14875-remove_cc_dyck_word-ts-upd.patch
â€‹


---

Comment by tscrim created at 2013-10-02 01:37:43

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2013-10-02 01:37:43

Also thanks for making the quick change (I was just about to do it :P).


---

Comment by jdemeyer created at 2013-10-07 06:49:35

Resolution: fixed
