# Issue 18007: mysterious doctest failure on dyck_word.py

archive/issues_018007.json:
```json
{
    "body": "CC:  behackl nthiery\n\nSeveral times and on different computers `make ptestlong` produces this single error\n\n```\nsage -t --long --warn-long 81.8 src/sage/combinat/dyck_word.py \n********************************************************************** \nFile \"src/sage/combinat/dyck_word.py\", line 3501, in \nsage.combinat.dyck_word.DyckWords_size.__init__ \nFailed example: \n      TestSuite(DyckWords(4,2)).run() \nExpected nothing \nGot: \n      ... \n      tester.assert_(isinstance(card, Integer)) \n      ... \n      ------------------------------------------------------------ \n      The following tests failed: _test_enumerated_set_iter_cardinality \n********************************************************************** \n1 item had failures: \n```\n\n\nsee: [this thread](https://groups.google.com/forum/#!topic/sage-devel/7BQPmEgfA8M) on sage-devel\n\nIssue created by migration from https://trac.sagemath.org/ticket/18244\n\n",
    "created_at": "2015-04-17T22:13:38Z",
    "labels": [
        "documentation",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "mysterious doctest failure on dyck_word.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18007",
    "user": "vdelecroix"
}
```
CC:  behackl nthiery

Several times and on different computers `make ptestlong` produces this single error

```
sage -t --long --warn-long 81.8 src/sage/combinat/dyck_word.py 
********************************************************************** 
File "src/sage/combinat/dyck_word.py", line 3501, in 
sage.combinat.dyck_word.DyckWords_size.__init__ 
Failed example: 
      TestSuite(DyckWords(4,2)).run() 
Expected nothing 
Got: 
      ... 
      tester.assert_(isinstance(card, Integer)) 
      ... 
      ------------------------------------------------------------ 
      The following tests failed: _test_enumerated_set_iter_cardinality 
********************************************************************** 
1 item had failures: 
```


see: [this thread](https://groups.google.com/forum/#!topic/sage-devel/7BQPmEgfA8M) on sage-devel

Issue created by migration from https://trac.sagemath.org/ticket/18244





---

archive/issue_comments_242238.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-17T22:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242238",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_242239.json:
```json
{
    "body": "And here is what can be found, based on the more verbose output:\n\n`./sage -bt src/sage/combinat/dyck_word.py` gives\n\n```\nsage -t --warn-long 78.6 src/sage/combinat/dyck_word.py\n**********************************************************************\nFile \"src/sage/combinat/dyck_word.py\", line 3501, in sage.combinat.dyck_word.DyckWords_size.__init__\nFailed example:\n    TestSuite(DyckWords(4,2)).run()\nExpected nothing\nGot:\n    Failure in _test_enumerated_set_iter_cardinality:\n    Traceback (most recent call last):\n      File \"/home/behackl/Programming/sage-6.7.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 282, in run\n        test_method(tester = tester)\n      File \"/home/behackl/Programming/sage-6.7.beta1/local/lib/python2.7/site-packages/sage/categories/finite_enumerated_sets.py\", line 463, in _test_enumerated_set_iter_cardinality\n        \"expected a Sage Integer and got {} of type {}\".format(card,type(card)))\n      File \"/home/behackl/Programming/sage-6.7.beta1/local/lib/python/unittest/case.py\", line 422, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: expected a Sage Integer and got 9 of type <type 'int'>\n    ------------------------------------------------------------\n    The following tests failed: _test_enumerated_set_iter_cardinality\n**********************************************************************\n```\n\n\nOn the other hand, just testing without building (`./sage -t src/sage/combinat/dyck_word.py`) yields\n\n\n```\nsage -t --warn-long 78.6 src/sage/combinat/dyck_word.py\n    [574 tests, 0.95 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n\n\nIt looks like a Python integer kills us directly after building sage, but not if we are just testing.",
    "created_at": "2015-04-17T23:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242239",
    "user": "behackl"
}
```

And here is what can be found, based on the more verbose output:

`./sage -bt src/sage/combinat/dyck_word.py` gives

```
sage -t --warn-long 78.6 src/sage/combinat/dyck_word.py
**********************************************************************
File "src/sage/combinat/dyck_word.py", line 3501, in sage.combinat.dyck_word.DyckWords_size.__init__
Failed example:
    TestSuite(DyckWords(4,2)).run()
Expected nothing
Got:
    Failure in _test_enumerated_set_iter_cardinality:
    Traceback (most recent call last):
      File "/home/behackl/Programming/sage-6.7.beta1/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "/home/behackl/Programming/sage-6.7.beta1/local/lib/python2.7/site-packages/sage/categories/finite_enumerated_sets.py", line 463, in _test_enumerated_set_iter_cardinality
        "expected a Sage Integer and got {} of type {}".format(card,type(card)))
      File "/home/behackl/Programming/sage-6.7.beta1/local/lib/python/unittest/case.py", line 422, in assertTrue
        raise self.failureException(msg)
    AssertionError: expected a Sage Integer and got 9 of type <type 'int'>
    ------------------------------------------------------------
    The following tests failed: _test_enumerated_set_iter_cardinality
**********************************************************************
```


On the other hand, just testing without building (`./sage -t src/sage/combinat/dyck_word.py`) yields


```
sage -t --warn-long 78.6 src/sage/combinat/dyck_word.py
    [574 tests, 0.95 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```


It looks like a Python integer kills us directly after building sage, but not if we are just testing.



---

archive/issue_comments_242240.json:
```json
{
    "body": "Yes indeed. Very strange. Note that in a console\n\n```\nsage: DyckWords(4r, 2r).cardinality()\n9\nsage: type(_)\n<type 'int'>\n```\n\nwhich is the expected behavior after #17852.",
    "created_at": "2015-04-17T23:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242240",
    "user": "vdelecroix"
}
```

Yes indeed. Very strange. Note that in a console

```
sage: DyckWords(4r, 2r).cardinality()
9
sage: type(_)
<type 'int'>
```

which is the expected behavior after #17852.



---

archive/issue_comments_242241.json:
```json
{
    "body": "Got it... it is because of unique representation! There is a cache of computed values of `DyckWords(4,2)`. Hence\n\n```\nsage: D1 = DyckWords(4r, 2r)  # init with Python int\nsage: D2 = DyckWords(4, 2)    # init with Sage integer\nsage: D2.cardinality()\n9\nsage: type(_)\n<type 'int'>\n```\n\nSo if the block at lines 3583-3585\n\n```\nsage: all(all(DyckWords(p, q).cardinality()\n....:           == len(DyckWords(p, q).list()) for q in range(p + 1))\n....:      for p in range(7))\n```\n\nis ran before the `TestSuite(DyckWords(4,2)).run()` **and** the weak cache is still present we got the failure!",
    "created_at": "2015-04-17T23:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242241",
    "user": "vdelecroix"
}
```

Got it... it is because of unique representation! There is a cache of computed values of `DyckWords(4,2)`. Hence

```
sage: D1 = DyckWords(4r, 2r)  # init with Python int
sage: D2 = DyckWords(4, 2)    # init with Sage integer
sage: D2.cardinality()
9
sage: type(_)
<type 'int'>
```

So if the block at lines 3583-3585

```
sage: all(all(DyckWords(p, q).cardinality()
....:           == len(DyckWords(p, q).list()) for q in range(p + 1))
....:      for p in range(7))
```

is ran before the `TestSuite(DyckWords(4,2)).run()` **and** the weak cache is still present we got the failure!



---

archive/issue_comments_242242.json:
```json
{
    "body": "Nice work, caching is definitely the problem! :-)\n\nHowever, replacing `range` with `srange` at lines 3583-3585 does not seem to solve the problem for me quite yet; building and testing still yields an error. But I guess now its only a matter of finding the right `range`. ;-)",
    "created_at": "2015-04-17T23:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242242",
    "user": "behackl"
}
```

Nice work, caching is definitely the problem! :-)

However, replacing `range` with `srange` at lines 3583-3585 does not seem to solve the problem for me quite yet; building and testing still yields an error. But I guess now its only a matter of finding the right `range`. ;-)



---

archive/issue_comments_242243.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-17T23:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242243",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_242244.json:
```json
{
    "body": "Replying to [comment:5 behackl]:\n> However, replacing `range` with `srange` at lines 3583-3585 does not seem to solve the problem for me quite yet; building and testing still yields an error. But I guess now its only a matter of finding the right `range`. ;-)\n\nArgh. I was sure this was the one! I do not want to go through the file again.",
    "created_at": "2015-04-17T23:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242244",
    "user": "vdelecroix"
}
```

Replying to [comment:5 behackl]:
> However, replacing `range` with `srange` at lines 3583-3585 does not seem to solve the problem for me quite yet; building and testing still yields an error. But I guess now its only a matter of finding the right `range`. ;-)

Argh. I was sure this was the one! I do not want to go through the file again.



---

archive/issue_comments_242245.json:
```json
{
    "body": "Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.\n\nHowever, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.",
    "created_at": "2015-04-18T00:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242245",
    "user": "behackl"
}
```

Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.

However, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.



---

archive/issue_comments_242246.json:
```json
{
    "body": "The magical appearance of the Python integers is still a mystery, but as your last commit kills all of those, it resolves the bug.\n\nAs soon as you set the ticket to `needs_review`, I'd be happy to finish this. :-)",
    "created_at": "2015-04-18T01:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242246",
    "user": "behackl"
}
```

The magical appearance of the Python integers is still a mystery, but as your last commit kills all of those, it resolves the bug.

As soon as you set the ticket to `needs_review`, I'd be happy to finish this. :-)



---

archive/issue_comments_242247.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-18T09:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242247",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_242248.json:
```json
{
    "body": "Replying to [comment:8 behackl]:\n> Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.\n> \n> However, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.\n\nI somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.\n\nHence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?",
    "created_at": "2015-04-18T09:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242248",
    "user": "SimonKing"
}
```

Replying to [comment:8 behackl]:
> Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.
> 
> However, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.

I somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.

Hence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?



---

archive/issue_comments_242249.json:
```json
{
    "body": "Replying to [comment:11 SimonKing]:\n> Replying to [comment:8 behackl]:\n> > Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.\n> > \n> > However, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.\n> \n> I somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.\n\nI like this to be restrictive. See also #18159. I often write things like\n\n```\n    return S1.cardinality().factorial()\n```\n\nwhich would break if it was a Python integer. Your suggestion implies that I need to do\n\n```\n    from sage.rings.integer_ring import ZZ\n    return ZZ(S1.cardinality()).factorial()\n```\n\n\nMoreover, in that particular case, I dislike the behavior of the example in [comment:4 comment:4]. Depending on the execution you got a Python int or a Sage integer! This is very bad.\n\n> Hence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?\n\nThis has to be discussed (maybe on #18159). And which infinity?\n\nVincent",
    "created_at": "2015-04-18T09:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242249",
    "user": "vdelecroix"
}
```

Replying to [comment:11 SimonKing]:
> Replying to [comment:8 behackl]:
> > Some more information: the problem **definitely** is, that `cardinality` may return a Python integer. For testing purposes, I converted the output to a sage `Integer`, and as a result building and testing works.
> > 
> > However, even if I delete the example at lines 3583-3585, the error remains. I haven't really figured out yet where the Python integers magically appear.
> 
> I somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.

I like this to be restrictive. See also #18159. I often write things like

```
    return S1.cardinality().factorial()
```

which would break if it was a Python integer. Your suggestion implies that I need to do

```
    from sage.rings.integer_ring import ZZ
    return ZZ(S1.cardinality()).factorial()
```


Moreover, in that particular case, I dislike the behavior of the example in [comment:4 comment:4]. Depending on the execution you got a Python int or a Sage integer! This is very bad.

> Hence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?

This has to be discussed (maybe on #18159). And which infinity?

Vincent



---

archive/issue_comments_242250.json:
```json
{
    "body": "That said, changing the code of Dyck words so that Sage integers are used is a good idea. Nonetheless I think that `isinstance(card, Integer)` is a bad idea. Instead, it should test `card in NN`.",
    "created_at": "2015-04-18T09:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242250",
    "user": "SimonKing"
}
```

That said, changing the code of Dyck words so that Sage integers are used is a good idea. Nonetheless I think that `isinstance(card, Integer)` is a bad idea. Instead, it should test `card in NN`.



---

archive/issue_comments_242251.json:
```json
{
    "body": "Replying to [comment:12 vdelecroix]:\n> I like this to be restrictive. See also #18159. I often write things like\n> {{{\n>     return S1.cardinality().factorial()\n> }}}\n> which would break if it was a Python integer.\n\nOK, fair point.\n\n> And which infinity?\n\nIs there not a corresponding test for infinite enumerated sets?",
    "created_at": "2015-04-18T09:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242251",
    "user": "SimonKing"
}
```

Replying to [comment:12 vdelecroix]:
> I like this to be restrictive. See also #18159. I often write things like
> {{{
>     return S1.cardinality().factorial()
> }}}
> which would break if it was a Python integer.

OK, fair point.

> And which infinity?

Is there not a corresponding test for infinite enumerated sets?



---

archive/issue_comments_242252.json:
```json
{
    "body": "Replying to [comment:11 SimonKing]:\n> I somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.\n> \n> Hence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?\n\n'Problem' meant that it is/was the reason for the failing doctest. Nevertheless, I'm also in favour of `cardinality` returning Integers. I also agree that we should change `isinstance(card, Integer)`. But I'm not sure about returning `infinity`: within the category `FiniteEnumeratedSets` I don't think that `cardinality` should return `infinity`. Or should it?\n\nIn any case, should this be still part of this ticket?",
    "created_at": "2015-04-18T10:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242252",
    "user": "behackl"
}
```

Replying to [comment:11 SimonKing]:
> I somehow disagree with that analysis that it is a **problem** that `cardinality` returns a Python integer. Yes, the category test suite verifies that `cardinality` returns a Sage integer. However (and that's why I Cc Nicolas) I don't think that the test should be so restrictive.
> 
> Hence, would it not be a better solution to modify the test so that it accepts both sage and python integers (and infinity)?

'Problem' meant that it is/was the reason for the failing doctest. Nevertheless, I'm also in favour of `cardinality` returning Integers. I also agree that we should change `isinstance(card, Integer)`. But I'm not sure about returning `infinity`: within the category `FiniteEnumeratedSets` I don't think that `cardinality` should return `infinity`. Or should it?

In any case, should this be still part of this ticket?



---

archive/issue_comments_242253.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-20T08:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242253",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_242254.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-20T08:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242254",
    "user": "behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_242255.json:
```json
{
    "body": "I think it's best to open a separate ticket for the `isinstance`-issue (and that is what I also take from the silence here). I reviewed this and fixed a typo (`TESTS::` --> `TESTS:` on one line). \n\nThis ticket fixes the issue with the (mysteriously) failing doctest in `dyck_word.py`: the changes pass `make ptestlong` on machines affected with the bug as well as on those not affected. Thus: `positive_review`.",
    "created_at": "2015-04-20T08:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242255",
    "user": "behackl"
}
```

I think it's best to open a separate ticket for the `isinstance`-issue (and that is what I also take from the silence here). I reviewed this and fixed a typo (`TESTS::` --> `TESTS:` on one line). 

This ticket fixes the issue with the (mysteriously) failing doctest in `dyck_word.py`: the changes pass `make ptestlong` on machines affected with the bug as well as on those not affected. Thus: `positive_review`.



---

archive/issue_comments_242256.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-20T18:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242256",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_242257.json:
```json
{
    "body": "Author name missing",
    "created_at": "2015-04-20T18:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242257",
    "user": "vbraun"
}
```

Author name missing



---

archive/issue_comments_242258.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-04-20T19:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242258",
    "user": "vdelecroix"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_242259.json:
```json
{
    "body": "Sorry!",
    "created_at": "2015-04-20T19:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242259",
    "user": "vdelecroix"
}
```

Sorry!



---

archive/issue_comments_242260.json:
```json
{
    "body": "Thanks for the fix!\n\nWhile you are at it, you may consider making the assertion error even more explicit:\n\n```\nexpected a Sage Integer and got {} of type {}\n```\n\n->\n\n```\n.cardinality() should return an Integer, and not {} of type {}\n```\n\nI let you decide whether you want to stick this in this ticket. If you do, you can reset a positive review on my behalf after the change (and running the tests).",
    "created_at": "2015-04-20T19:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242260",
    "user": "nthiery"
}
```

Thanks for the fix!

While you are at it, you may consider making the assertion error even more explicit:

```
expected a Sage Integer and got {} of type {}
```

->

```
.cardinality() should return an Integer, and not {} of type {}
```

I let you decide whether you want to stick this in this ticket. If you do, you can reset a positive review on my behalf after the change (and running the tests).



---

archive/issue_comments_242261.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-21T01:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18007#issuecomment-242261",
    "user": "vbraun"
}
```

Resolution: fixed
