# Issue 23638: py3 richcmp for number fields morphism

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-09-17 15:13:14

as a step to py3


---

Comment by chapoton created at 2017-09-17 15:13:42

New commits:


---

Comment by chapoton created at 2017-09-17 15:13:42

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-09-17 17:00:46

Shouldn't the function be changed `_cmp_` -> `_richcmp_`?


---

Comment by chapoton created at 2017-09-17 18:27:38

indeed


---

Comment by git created at 2017-09-17 18:28:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-09-17 18:29:10

then it fails because of #23647
----
New commits:


---

Comment by tscrim created at 2017-09-17 18:35:51

We could just revert the last commit as a temporary fix if we do not have a fix for #23647 (at least IMO the bigger thing is removing calls to `cmp`).


---

Comment by chapoton created at 2017-09-18 07:20:37

well, no. it does not make any sense to call `richcmp` from `_cmp_`.


---

Comment by chapoton created at 2017-09-18 08:32:37

this seems to be fixed by the latest branch in #23647


---

Comment by jdemeyer created at 2017-09-19 09:31:27

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-09-19 09:31:27

Doctest failure, see patchbot.


---

Comment by chapoton created at 2017-09-19 09:35:23

sure enough, because this depends on #23647. I should have added the dependency, but I was waiting for somebody reviewing it.


---

Comment by chapoton created at 2017-09-19 09:35:23

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-09-19 15:27:03

Replying to [comment:7 chapoton]:
> well, no. it does not make any sense to call `richcmp` from `_cmp_`.

*facepalm*...right...

If this also passes the one failing test for you, Frédéric, with #23647, then positive review.


---

Comment by chapoton created at 2017-09-19 18:03:30

The failing doctest does pass with #23647 + the branch here.

I am therefore setting to positive.


---

Comment by chapoton created at 2017-09-19 18:03:30

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-09-20 22:26:07

Resolution: fixed
