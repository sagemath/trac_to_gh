# Issue 30913: refresh riemann_surface.py

Issue created by migration from https://trac.sagemath.org/ticket/31150

Original creator: chapoton

Original creation time: 2021-01-02 12:59:03

CC:  tscrim slelievre dcoudert

* fix some lgtm warnings
* rather large set of pep8 changes
* some other code details


---

Comment by chapoton created at 2021-01-02 12:59:39

Changing status from new to needs_review.


---

Comment by git created at 2021-01-02 12:59:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-01-04 13:39:19

green bot, please review


---

Comment by dcoudert created at 2021-01-04 14:31:07

I know this ticket is about coding style and not optimizing the code, but in `return [(c.real_part(), c.imag_part()) for c in cpoints + extra_points]`:
 - Why using `(c.real_part(), c.imag_part())` and not directly `tuple(c)` which gives the same result (I think) ?
 - could be good to use `itertools.chain` to avoid `cpoints + extra_points` ?


This block is not align on 80 columns

```diff
+    # we check that the singularities lie at (1:0:0),(0:1:0),(0:0:1)
+    # by checking that the eliminations of x, y, z result in (principal) ideals
+    # generated by a monomial. This is a sufficient condition, but not completely necessary.
+    # It's cheap to check, though.
```



In `normalize_pairs`, you missed some corrections ;)

```diff
-            R=[]
-            for i in range(len(L)-1):
+            R = []
+            for i in range(len(L) - 1):
                 if L[i][0]<L[i+1][0]:
-                    R.append((L[i],L[i+1]))
+                    R.append((L[i], L[i+1]))
                 else:
                     R.append((L[i+1],L[i]))
             return R
```


Why not using `R.nrows()` and `R.ncols()` in

```diff
+        if not(len(R.rows()) == 2 * g == len(R.columns())):
```



---

Comment by git created at 2021-01-04 16:19:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-01-04 16:22:54

voila. ca ira comme ca ?

Je suis pas trop fan de itertools.


---

Comment by dcoudert created at 2021-01-04 16:36:16

LGTM.

Pour itertools, je pousse pas. Si les 2 listes sont longues, ca vaut le cout de faire un chainage ou tout autre solution pour éviter le merge, mais sinon, c'est assez négligeable.


---

Comment by dcoudert created at 2021-01-04 16:36:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-01-17 13:45:53

Resolution: fixed
