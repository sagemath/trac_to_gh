# Issue 13071: new methods for compositions

archive/issues_013071.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  chrisjamesberg sage-combinat zabrocki\n\nKeywords: compositions, ncsf, sd40\n\nnew functionality for the composition constructor:\n\n- construct a composition from a subset\n\n\nnew functionality for compositions:\n\n- parent -- returns Compositions()\n- reversed - reverses\n- refinement_splitting\n- refinement_splitting_lengths(self, J):\n- partial_sums(self, final=True):\n- to_subset(self, final=False):\n- to_partition(self):\n- shuffle_product(self, other, overlap=False):\n\n\nnew functionality for the set of all compositions:\n\n- put it in the category of `GradedEnumeratedSets`\n- subset method to extract subsets of composition (by size)\n\nIssue created by migration from https://trac.sagemath.org/ticket/13243\n\n",
    "created_at": "2012-07-12T19:36:54Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "new methods for compositions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13071",
    "user": "saliola"
}
```
Assignee: sage-combinat

CC:  chrisjamesberg sage-combinat zabrocki

Keywords: compositions, ncsf, sd40

new functionality for the composition constructor:

- construct a composition from a subset


new functionality for compositions:

- parent -- returns Compositions()
- reversed - reverses
- refinement_splitting
- refinement_splitting_lengths(self, J):
- partial_sums(self, final=True):
- to_subset(self, final=False):
- to_partition(self):
- shuffle_product(self, other, overlap=False):


new functionality for the set of all compositions:

- put it in the category of `GradedEnumeratedSets`
- subset method to extract subsets of composition (by size)

Issue created by migration from https://trac.sagemath.org/ticket/13243





---

archive/issue_comments_158794.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-12T20:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158794",
    "user": "saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_158795.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-12T20:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158795",
    "user": "chrisjamesberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_158796.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-07-13T19:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158796",
    "user": "saliola"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_158797.json:
```json
{
    "body": "Need to fix a dependency error. Patch coming 'soon'.",
    "created_at": "2012-07-13T19:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158797",
    "user": "saliola"
}
```

Need to fix a dependency error. Patch coming 'soon'.



---

archive/issue_comments_158798.json:
```json
{
    "body": "only apply this one",
    "created_at": "2012-07-15T02:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158798",
    "user": "saliola"
}
```

only apply this one



---

archive/issue_comments_158799.json:
```json
{
    "body": "Attachment [trac_13243-new_methods_for_compositions-fs.2.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-new_methods_for_compositions-fs.2.patch) by saliola created at 2012-07-15 02:12:20\n\nempty patch (this can be deleted)",
    "created_at": "2012-07-15T02:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158799",
    "user": "saliola"
}
```

Attachment [trac_13243-new_methods_for_compositions-fs.2.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-new_methods_for_compositions-fs.2.patch) by saliola created at 2012-07-15 02:12:20

empty patch (this can be deleted)



---

archive/issue_comments_158800.json:
```json
{
    "body": "The errors were mainly due to the fact that the new category of *graded* enumerated sets does not yet exist (it exists on the sage-combinat queue, which is why tests passed on my machine). So I removed the two lines related to that.\n\nI also modified a couple of doctests in `permutation.py`, which was caused by the change  the descents method.",
    "created_at": "2012-07-15T02:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158800",
    "user": "saliola"
}
```

The errors were mainly due to the fact that the new category of *graded* enumerated sets does not yet exist (it exists on the sage-combinat queue, which is why tests passed on my machine). So I removed the two lines related to that.

I also modified a couple of doctests in `permutation.py`, which was caused by the change  the descents method.



---

archive/issue_comments_158801.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-15T02:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158801",
    "user": "saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_158802.json:
```json
{
    "body": "Apply: trac_13243-new_methods_for_compositions-fs.patch",
    "created_at": "2012-07-15T12:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158802",
    "user": "saliola"
}
```

Apply: trac_13243-new_methods_for_compositions-fs.patch



---

archive/issue_comments_158803.json:
```json
{
    "body": "Attachment [trac_13243-rebased_deprecated_function_alias-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-rebased_deprecated_function_alias-fs.patch) by saliola created at 2012-07-18 11:55:18\n\nneeded for 5.2.rc0 (updated the call to deprecated_function_alias)",
    "created_at": "2012-07-18T11:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158803",
    "user": "saliola"
}
```

Attachment [trac_13243-rebased_deprecated_function_alias-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-rebased_deprecated_function_alias-fs.patch) by saliola created at 2012-07-18 11:55:18

needed for 5.2.rc0 (updated the call to deprecated_function_alias)



---

archive/issue_comments_158804.json:
```json
{
    "body": "Apply: trac_13243-new_methods_for_compositions-fs.patch,  trac_13243-rebased_deprecated_function_alias-fs.patch\n\n(for the patchbot)",
    "created_at": "2012-07-18T11:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158804",
    "user": "saliola"
}
```

Apply: trac_13243-new_methods_for_compositions-fs.patch,  trac_13243-rebased_deprecated_function_alias-fs.patch

(for the patchbot)



---

archive/issue_comments_158805.json:
```json
{
    "body": "**Note that the patches attached to this ticket are newer than the patches on the sage-combinat queue.**\n\nAlso, I'm in the process of updating this patch with improvements suggested by Mike. New version will be available soon.",
    "created_at": "2012-07-20T14:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158805",
    "user": "saliola"
}
```

**Note that the patches attached to this ticket are newer than the patches on the sage-combinat queue.**

Also, I'm in the process of updating this patch with improvements suggested by Mike. New version will be available soon.



---

archive/issue_comments_158806.json:
```json
{
    "body": "Attachment [trac_13243-review_changes-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-review_changes-fs.patch) by saliola created at 2012-07-21 01:08:17\n\nchanges based on Mike's review",
    "created_at": "2012-07-21T01:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158806",
    "user": "saliola"
}
```

Attachment [trac_13243-review_changes-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-review_changes-fs.patch) by saliola created at 2012-07-21 01:08:17

changes based on Mike's review



---

archive/issue_comments_158807.json:
```json
{
    "body": "Here is a patch (trac_13243-review_changes-fs.patch), which should be applied on top of the earlier patch, that includes improvements suggested by Mike.\n\nPatchbot:\n\nApply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch",
    "created_at": "2012-07-21T01:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158807",
    "user": "saliola"
}
```

Here is a patch (trac_13243-review_changes-fs.patch), which should be applied on top of the earlier patch, that includes improvements suggested by Mike.

Patchbot:

Apply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch



---

archive/issue_comments_158808.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-07-21T02:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158808",
    "user": "saliola"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_158809.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-21T02:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158809",
    "user": "saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_158810.json:
```json
{
    "body": "(more) documentation improvements based on first review",
    "created_at": "2012-07-21T04:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158810",
    "user": "saliola"
}
```

(more) documentation improvements based on first review



---

archive/issue_comments_158811.json:
```json
{
    "body": "Attachment [trac_13243-documentation_fixes-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-documentation_fixes-fs.patch) by saliola created at 2012-07-21 04:19:08\n\nHello Mike,\n\nHere is a final patch fixing some the issues with the documentation. The documentation now builds and renders nicely. Thanks for your suggestions.\n\nI made separate patches so that it is easier for you to look at my recent changes (but if you prefer, I can post one patch). You only need to look at the following two files to see the changes I made after your review of the first patch:\n\n- trac_13243-review_changes-fs.patch\n- trac_13243-documentation_fixes-fs.patch\n\nFranco",
    "created_at": "2012-07-21T04:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158811",
    "user": "saliola"
}
```

Attachment [trac_13243-documentation_fixes-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-documentation_fixes-fs.patch) by saliola created at 2012-07-21 04:19:08

Hello Mike,

Here is a final patch fixing some the issues with the documentation. The documentation now builds and renders nicely. Thanks for your suggestions.

I made separate patches so that it is easier for you to look at my recent changes (but if you prefer, I can post one patch). You only need to look at the following two files to see the changes I made after your review of the first patch:

- trac_13243-review_changes-fs.patch
- trac_13243-documentation_fixes-fs.patch

Franco



---

archive/issue_comments_158812.json:
```json
{
    "body": "Mike suggested some more documentation improvements. New patch on the way.",
    "created_at": "2012-07-21T15:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158812",
    "user": "saliola"
}
```

Mike suggested some more documentation improvements. New patch on the way.



---

archive/issue_comments_158813.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-07-21T15:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158813",
    "user": "saliola"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_158814.json:
```json
{
    "body": "improvements to documentation for shuffle_product",
    "created_at": "2012-07-21T16:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158814",
    "user": "saliola"
}
```

improvements to documentation for shuffle_product



---

archive/issue_comments_158815.json:
```json
{
    "body": "Attachment [trac_13243-documentation_fixes_2-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-documentation_fixes_2-fs.patch) by saliola created at 2012-07-21 16:44:13\n\nHere is a patch with improvements to the documentation of shuffle product.\n\nPatchbot:\n\nApply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch, trac_13243-documentation_fixes_2-fs.patch",
    "created_at": "2012-07-21T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158815",
    "user": "saliola"
}
```

Attachment [trac_13243-documentation_fixes_2-fs.patch](tarball://root/attachments/some-uuid/ticket13243/trac_13243-documentation_fixes_2-fs.patch) by saliola created at 2012-07-21 16:44:13

Here is a patch with improvements to the documentation of shuffle product.

Patchbot:

Apply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch, trac_13243-documentation_fixes_2-fs.patch



---

archive/issue_comments_158816.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-21T16:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158816",
    "user": "saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_158817.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-21T18:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158817",
    "user": "zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_158818.json:
```json
{
    "body": "Hi Franco,\n\nYou promised to import these patches also to the sage-combinat queue, since the current patch there completely breaks sage-5.2.rc0. I am confused as to which patches are supposed to be applied. For example trac_13243-rebased_deprecated_function_alias-fs.patch also has a newer version trac_13243-rebased_deprecated_function_alias-fs.2.patch, but this is not the one listed in your list.\n\nThanks,\n\nAnne",
    "created_at": "2012-07-23T21:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158818",
    "user": "aschilling"
}
```

Hi Franco,

You promised to import these patches also to the sage-combinat queue, since the current patch there completely breaks sage-5.2.rc0. I am confused as to which patches are supposed to be applied. For example trac_13243-rebased_deprecated_function_alias-fs.patch also has a newer version trac_13243-rebased_deprecated_function_alias-fs.2.patch, but this is not the one listed in your list.

Thanks,

Anne



---

archive/issue_comments_158819.json:
```json
{
    "body": "Please clarify which patches have to be applied.",
    "created_at": "2012-07-27T20:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158819",
    "user": "jdemeyer"
}
```

Please clarify which patches have to be applied.



---

archive/issue_comments_158820.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2012-07-27T20:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158820",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_158821.json:
```json
{
    "body": "Replying to [comment:19 jdemeyer]:\n> Please clarify which patches have to be applied.\n\nIf I understand correctly, the patchbot doesn't look at the description for the \"apply\" directive, so I put it in the comments. Should I also include the directive in the description? Is there a preferred syntax for this?\n\nApply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch, trac_13243-documentation_fixes_2-fs.patch\n\nFor humans:\n\n- attachment:trac_13243-new_methods_for_compositions-fs.patch\n- attachment:trac_13243-rebased_deprecated_function_alias-fs.patch\n- attachment:trac_13243-review_changes-fs.patch\n- attachment:trac_13243-documentation_fixes-fs.patch\n- attachment:trac_13243-documentation_fixes_2-fs.patch",
    "created_at": "2012-07-27T21:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158821",
    "user": "saliola"
}
```

Replying to [comment:19 jdemeyer]:
> Please clarify which patches have to be applied.

If I understand correctly, the patchbot doesn't look at the description for the "apply" directive, so I put it in the comments. Should I also include the directive in the description? Is there a preferred syntax for this?

Apply: trac_13243-new_methods_for_compositions-fs.patch, trac_13243-rebased_deprecated_function_alias-fs.patch, trac_13243-review_changes-fs.patch, trac_13243-documentation_fixes-fs.patch, trac_13243-documentation_fixes_2-fs.patch

For humans:

- attachment:trac_13243-new_methods_for_compositions-fs.patch
- attachment:trac_13243-rebased_deprecated_function_alias-fs.patch
- attachment:trac_13243-review_changes-fs.patch
- attachment:trac_13243-documentation_fixes-fs.patch
- attachment:trac_13243-documentation_fixes_2-fs.patch



---

archive/issue_comments_158822.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-07-27T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158822",
    "user": "saliola"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_158823.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-27T21:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158823",
    "user": "saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_158824.json:
```json
{
    "body": "Replying to [comment:21 saliola]:\n> If I understand correctly, the patchbot doesn't look at the description for the \"apply\" directive, so I put it in the comments.\nI think that's correct yes.\n\n> Should I also include the directive in the description?\nYes please!",
    "created_at": "2012-07-27T21:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158824",
    "user": "jdemeyer"
}
```

Replying to [comment:21 saliola]:
> If I understand correctly, the patchbot doesn't look at the description for the "apply" directive, so I put it in the comments.
I think that's correct yes.

> Should I also include the directive in the description?
Yes please!



---

archive/issue_comments_158825.json:
```json
{
    "body": "Replying to [comment:25 jdemeyer]:\n> Replying to [comment:21 saliola]:\n> > If I understand correctly, the patchbot doesn't look at the description for the \"apply\" directive, so I put it in the comments.\n> I think that's correct yes.\n> \n> > Should I also include the directive in the description?\n> Yes please!\n\nThank you. I'll make sure to do this from now on!",
    "created_at": "2012-07-27T21:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158825",
    "user": "saliola"
}
```

Replying to [comment:25 jdemeyer]:
> Replying to [comment:21 saliola]:
> > If I understand correctly, the patchbot doesn't look at the description for the "apply" directive, so I put it in the comments.
> I think that's correct yes.
> 
> > Should I also include the directive in the description?
> Yes please!

Thank you. I'll make sure to do this from now on!



---

archive/issue_comments_158826.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-01T12:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13071#issuecomment-158826",
    "user": "jdemeyer"
}
```

Resolution: fixed
