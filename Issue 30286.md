# Issue 30286: polynomial_element.pyx: roots: SR: Fix if determinant is not real

archive/issues_030286.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/30523\n\n",
    "created_at": "2020-09-07T16:00:48Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "polynomial_element.pyx: roots: SR: Fix if determinant is not real",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30286",
    "user": "@shak-mar"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/30523





---

archive/issue_comments_431813.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2020-09-07T16:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431813",
    "user": "@shak-mar"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_431814.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-09-07T16:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431814",
    "user": "@shak-mar"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_431815.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-09-07T16:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431815",
    "user": "@shak-mar"
}
```

New commits:



---

archive/issue_comments_431816.json:
```json
{
    "body": "The branch I added is based on the one attached to #30522, hence the unrelated commit.",
    "created_at": "2020-09-07T16:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431816",
    "user": "@shak-mar"
}
```

The branch I added is based on the one attached to #30522, hence the unrelated commit.



---

archive/issue_comments_431817.json:
```json
{
    "body": "If this ticket depends on #30522 then add `#30522`\nto the \"Dependencies\" field of this ticket.\n\nPlease add your full name to the \"Authors\" field.\n\nOnce the ticket is ready for review, set it to `needs_review`.",
    "created_at": "2020-09-07T19:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431817",
    "user": "slelievre"
}
```

If this ticket depends on #30522 then add `#30522`
to the "Dependencies" field of this ticket.

Please add your full name to the "Authors" field.

Once the ticket is ready for review, set it to `needs_review`.



---

archive/issue_comments_431818.json:
```json
{
    "body": "Changing component from algebra to commutative algebra.",
    "created_at": "2020-09-08T17:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431818",
    "user": "@shak-mar"
}
```

Changing component from algebra to commutative algebra.



---

archive/issue_comments_431819.json:
```json
{
    "body": "Hmm, since `git trac push` doesn't have a `-f` flag, I suppose force-pushing to feature branches is not wanted?  I locally rebased this on top of the branch for #30522, but I can also make it a merge instead.  What is the preferred option?  (Force-pushing using the raw git method vs. making it a merge and doing a normal push)",
    "created_at": "2020-09-08T17:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431819",
    "user": "@shak-mar"
}
```

Hmm, since `git trac push` doesn't have a `-f` flag, I suppose force-pushing to feature branches is not wanted?  I locally rebased this on top of the branch for #30522, but I can also make it a merge instead.  What is the preferred option?  (Force-pushing using the raw git method vs. making it a merge and doing a normal push)



---

archive/issue_comments_431820.json:
```json
{
    "body": "You can do `git trac push --force`. I don't know what is the best practice.",
    "created_at": "2020-09-08T18:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431820",
    "user": "slelievre"
}
```

You can do `git trac push --force`. I don't know what is the best practice.



---

archive/issue_comments_431821.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-09-08T18:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431821",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_431822.json:
```json
{
    "body": "Ah I looked at the output of `git trac -h` instead of `git trac push -h`, my bad :)  I think force pushing is very much OK if nobody uses the commits yet which I simply assume is the case.  (Nobody uses the commits yet for unreviewed feature branches usually, but in principle your process could forbid force-pushes on the ground that other feature branches might already depend on my branch without me being notified.)  I went ahead and force-pushed the rebased version;  this also adds another regression test to the EXAMPLES block.",
    "created_at": "2020-09-08T18:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431822",
    "user": "@shak-mar"
}
```

Ah I looked at the output of `git trac -h` instead of `git trac push -h`, my bad :)  I think force pushing is very much OK if nobody uses the commits yet which I simply assume is the case.  (Nobody uses the commits yet for unreviewed feature branches usually, but in principle your process could forbid force-pushes on the ground that other feature branches might already depend on my branch without me being notified.)  I went ahead and force-pushed the rebased version;  this also adds another regression test to the EXAMPLES block.



---

archive/issue_comments_431823.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-08T18:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431823",
    "user": "@shak-mar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_431824.json:
```json
{
    "body": "Lgtm, but I am missing something, or would something like\n\n```\nif D == 0:\n    l = [(-coeffs[1]/2/coeffs[2]), 2]\nelif D < 0:\n    l = [((-coeffs[1]-I*sqrt(-D))/2/coeffs[2], 1),\n            ((-coeffs[1]+I*sqrt(-D))/2/coeffs[2], 1)]\nelse:\n    l = [((-coeffs[1]-sqrt(D))/2/coeffs[2], 1),\n            ((-coeffs[1]+sqrt(D))/2/coeffs[2], 1)]\n```\n\nbe even better? (As it would bypass Maxima for non-real D too.)",
    "created_at": "2020-09-10T15:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431824",
    "user": "mmezzarobba"
}
```

Lgtm, but I am missing something, or would something like

```
if D == 0:
    l = [(-coeffs[1]/2/coeffs[2]), 2]
elif D < 0:
    l = [((-coeffs[1]-I*sqrt(-D))/2/coeffs[2], 1),
            ((-coeffs[1]+I*sqrt(-D))/2/coeffs[2], 1)]
else:
    l = [((-coeffs[1]-sqrt(D))/2/coeffs[2], 1),
            ((-coeffs[1]+sqrt(D))/2/coeffs[2], 1)]
```

be even better? (As it would bypass Maxima for non-real D too.)



---

archive/issue_comments_431825.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-23T07:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431825",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_431826.json:
```json
{
    "body": "No sense waiting for the next release cycle.",
    "created_at": "2020-09-23T07:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431826",
    "user": "mmezzarobba"
}
```

No sense waiting for the next release cycle.



---

archive/issue_comments_431827.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-27T09:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30286",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30286#issuecomment-431827",
    "user": "vbraun"
}
```

Resolution: fixed
