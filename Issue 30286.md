# Issue 30286: polynomial_element.pyx: roots: SR: Fix if determinant is not real

Issue created by migration from https://trac.sagemath.org/ticket/30523

Original creator: @shak-mar

Original creation time: 2020-09-07 16:00:48




---

Comment by @shak-mar created at 2020-09-07 16:02:34

Changing component from PLEASE CHANGE to algebra.


---

Comment by @shak-mar created at 2020-09-07 16:02:34

Changing type from PLEASE CHANGE to defect.


---

Comment by @shak-mar created at 2020-09-07 16:02:34

New commits:


---

Comment by @shak-mar created at 2020-09-07 16:04:14

The branch I added is based on the one attached to #30522, hence the unrelated commit.


---

Comment by slelievre created at 2020-09-07 19:23:32

If this ticket depends on #30522 then add `#30522`
to the "Dependencies" field of this ticket.

Please add your full name to the "Authors" field.

Once the ticket is ready for review, set it to `needs_review`.


---

Comment by @shak-mar created at 2020-09-08 17:18:36

Changing component from algebra to commutative algebra.


---

Comment by @shak-mar created at 2020-09-08 17:41:35

Hmm, since `git trac push` doesn't have a `-f` flag, I suppose force-pushing to feature branches is not wanted?  I locally rebased this on top of the branch for #30522, but I can also make it a merge instead.  What is the preferred option?  (Force-pushing using the raw git method vs. making it a merge and doing a normal push)


---

Comment by slelievre created at 2020-09-08 18:09:29

You can do `git trac push --force`. I don't know what is the best practice.


---

Comment by git created at 2020-09-08 18:19:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @shak-mar created at 2020-09-08 18:22:41

Ah I looked at the output of `git trac -h` instead of `git trac push -h`, my bad :)  I think force pushing is very much OK if nobody uses the commits yet which I simply assume is the case.  (Nobody uses the commits yet for unreviewed feature branches usually, but in principle your process could forbid force-pushes on the ground that other feature branches might already depend on my branch without me being notified.)  I went ahead and force-pushed the rebased version;  this also adds another regression test to the EXAMPLES block.


---

Comment by @shak-mar created at 2020-09-08 18:23:51

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2020-09-10 15:57:02

Lgtm, but I am missing something, or would something like

```
if D == 0:
    l = [(-coeffs[1]/2/coeffs[2]), 2]
elif D < 0:
    l = [((-coeffs[1]-I*sqrt(-D))/2/coeffs[2], 1),
            ((-coeffs[1]+I*sqrt(-D))/2/coeffs[2], 1)]
else:
    l = [((-coeffs[1]-sqrt(D))/2/coeffs[2], 1),
            ((-coeffs[1]+sqrt(D))/2/coeffs[2], 1)]
```

be even better? (As it would bypass Maxima for non-real D too.)


---

Comment by mmezzarobba created at 2020-09-23 07:20:45

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2020-09-23 07:20:45

No sense waiting for the next release cycle.


---

Comment by vbraun created at 2020-09-27 09:09:44

Resolution: fixed
