# Issue 34400: pep8 and code details for ribbon_tableau

Issue created by migration from https://trac.sagemath.org/ticket/34637

Original creator: chapoton

Original creation time: 2022-10-08 20:02:44

CC:  tscrim klee @kliem slelievre

including one change about super


---

Comment by chapoton created at 2022-10-08 20:03:10

New commits:


---

Comment by chapoton created at 2022-10-08 20:03:10

Changing status from new to needs_review.


---

Comment by chapoton created at 2022-10-09 06:42:44

lights and bot are morally green, so please review


---

Comment by git created at 2022-10-09 07:49:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-10-09 16:44:40

Not sure if this change for the nested loops is an improvement.

```
-    ## Test if the current nodes drive us to new solutions
+    # Test if the current nodes drive us to new solutions
     if nexts:
-        res = []
-        for i in range(len(current)):
-            for j in range(len(nexts[i])):
-                res.append( insertion_tableau(part, current[i][1], len(weight), nexts[i][j], length) )
-        return res
-    else:
-        ## The current nodes are at the bottom of the tree
-        res = []
-        for i in range(len(current)):
-            res.append( insertion_tableau(part, current[i][1], len(weight), [[],[]], length) )
-        return res
+        return [insertion_tableau(part, curr_i[1], len(weight),
+                                  nexts_ij, length)
+                for nexts_i, curr_i in zip(nexts, current)
+                for nexts_ij in nexts_i]
+
+    # The current nodes are at the bottom of the tree
+    return [insertion_tableau(part, curr_i[1],
+                              len(weight), [[], []], length)
+            for curr_i in current]
```



---

Comment by mkoeppe created at 2022-10-09 16:48:12

I'd think that rewriting it either as 

```
        res = []
        for i in range(len(current)):
            res.extend(.... for ....)
```

or using `yield` would be better


---

Comment by chapoton created at 2022-10-09 18:34:30

Replying to [comment:4 Matthias Köppe]:
> Not sure if this change for the nested loops is an improvement.

Why not ? This seems more pythonic to me.


---

Comment by mkoeppe created at 2022-10-09 18:50:29

Maybe it's just me, but I always have to look twice to see which is the inner loop in such as list comprehension with multiple `for` clauses


---

Comment by tscrim created at 2022-10-09 23:58:54

It took me a moment to get used to nested loops. Then I realized (and because I got errors) that languages are iterative, so it is always first-come-first-loop. I agree with Frédéric that it is more Pythonic; it is also faster too.

That method also explicitly has `list`, so it cannot be an iterator (although having something that returns an iterator would be nice, but doesn’t need to be done here).

I also find this change (and similar) looks weird:

```diff
-#####################
-# Ribbon Tableaux   #
-#####################
+# ####################
+# Ribbon Tableaux    #
+# ####################
```

Could we make an exception here?


---

Comment by chapoton created at 2022-10-10 09:21:01

Well, this stuff about not starting comments with `##` is part of the pep8 standard. As we are currently not checking this with our linters, I can undo if you insist,


---

Comment by tscrim created at 2022-10-10 23:55:46

It just looks really weird here, that's all. The `###` line isn't really a comment, just boxing an identifier. PEP8 doesn't make any statement regarding dividers/boxing/etc.


---

Comment by klee created at 2022-10-14 00:35:48

Replying to [comment:10 Travis Scrimshaw]:
> It just looks really weird here, that's all. The `###` line isn't really a comment, just boxing an identifier. PEP8 doesn't make any statement regarding dividers/boxing/etc.

I agree. We should leave it as it is.

On the other hand, I hope that we adopt an official style on the "boxing". Different authors are using different styles on those "title comments". I would suggest

```
#
# Ribbon Tableaux
#
```

But again this would be another issue for a vote (or no vote)...


---

Comment by git created at 2022-10-14 06:28:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-14 06:31:26

ok, guys. Is my last commit nice enough for you ?

Otherwise, I can do unicode boxes

```
# ┏━━━━━━━━━━━━━━━━━━━┓
# ┃  Ribbon Tableaux  ┃
# ┗━━━━━━━━━━━━━━━━━━━┛
```



---

Comment by tscrim created at 2022-10-14 06:40:21

I prefer this over unicode (which doesn't always display properly on my editor).

Thank you.


---

Comment by tscrim created at 2022-10-14 06:40:21

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-10-17 22:43:36

Resolution: fixed
