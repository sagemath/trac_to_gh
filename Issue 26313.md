# Issue 26313: Upgrade to SymPy 1.3

Issue created by migration from https://trac.sagemath.org/ticket/26550

Original creator: slelievre

Original creation time: 2018-10-24 23:47:29

CC:  arojas fbissey @timokau jdemeyer rws saraedum

Keywords: upgrade, sympy

Sympy 1.3 was released on 2018-09-14.

- *Tarball*: https://files.pythonhosted.org/packages/dd/f6/ed485ff22efdd7b371d0dbbf6d77ad61c3b3b7e0815a83c89cbb38ce35de/sympy-1.3.tar.gz

Our last upgrade was to Sympy 1.2 in #26117.


---

Comment by fbissey created at 2018-10-25 01:30:32

Sadly this release still doesn't include sage's patch defining and using `UndefSage`. I am guessing it is still necessary.


---

Comment by fbissey created at 2018-10-29 21:34:57

Replying to [comment:1 fbissey]:
> Sadly this release still doesn't include sage's patch defining and using `UndefSage`. I am guessing it is still necessary.

And that's the only thing failing if you stick to plain unpatched sympy-1.3

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/sympy.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/interfaces/sympy.py", line 859, in sage.interfaces.sympy.test_all
Failed example:
    test_all()
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.sympy.test_all[1]>", line 1, in <module>
        test_all()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/sympy.py", line 969, in test_all
        test_undefined_function()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/sympy.py", line 958, in test_undefined_function
        assert f == sf._sage_()
    TypeError: unbound method _sympysage_function() must be called with f instance as first argument (got nothing instead)
**********************************************************************
```

which is of course what the patch fixes.


---

Comment by fbissey created at 2018-10-29 23:44:26

Changing status from new to needs_review.


---

Comment by fbissey created at 2018-10-29 23:44:26

Ready for review.
----
New commits:


---

Comment by fbissey created at 2018-11-13 07:14:18

Ping?


---

Comment by jdemeyer created at 2018-11-13 11:12:53

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-11-15 22:57:32

Resolution: fixed
