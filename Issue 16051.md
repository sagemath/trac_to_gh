# Issue 16051: Optimize sage.sets.cartesian_product.CartesianProduct._cartesian_product_of_elements

archive/issues_016051.json:
```json
{
    "body": "CC:  sage-combinat @nathanncohen\n\nThis fixed `_cartesian_product_of_elements` to bypass `_element_constructor` and other checks, and documented it; this is particularly relevant after #16269 which introduces more checks and coercion in `_element_constructor`. Timing difference:\n\n```\nsage: S1 = Sets().example()\nsage: S2 = InfiniteEnumeratedSets().example()\nsage: C = cartesian_product([S2, S1, S2])\nsage: l = tuple([S2.an_element(), S1.an_element(), S2.an_element()])\n```\n\nWithout the optimization:\n\n```\nsage: %timeit C._cartesian_product_of_elements(l)\n10000 loops, best of 3: 22 \u00b5s per loop\n```\n\nWith the optimization:\n\n```\nsage: %timeit C._cartesian_product_of_elements(lt)\n1000000 loops, best of 3: 922 ns per loop\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16288\n\n",
    "created_at": "2014-05-04T21:20:59Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Optimize sage.sets.cartesian_product.CartesianProduct._cartesian_product_of_elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16051",
    "user": "https://github.com/nthiery"
}
```
CC:  sage-combinat @nathanncohen

This fixed `_cartesian_product_of_elements` to bypass `_element_constructor` and other checks, and documented it; this is particularly relevant after #16269 which introduces more checks and coercion in `_element_constructor`. Timing difference:

```
sage: S1 = Sets().example()
sage: S2 = InfiniteEnumeratedSets().example()
sage: C = cartesian_product([S2, S1, S2])
sage: l = tuple([S2.an_element(), S1.an_element(), S2.an_element()])
```

Without the optimization:

```
sage: %timeit C._cartesian_product_of_elements(l)
10000 loops, best of 3: 22 Âµs per loop
```

With the optimization:

```
sage: %timeit C._cartesian_product_of_elements(lt)
1000000 loops, best of 3: 922 ns per loop
```



Issue created by migration from https://trac.sagemath.org/ticket/16288





---

archive/issue_comments_208619.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-05-04T21:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208619",
    "user": "https://github.com/nthiery"
}
```

Last 10 new commits:



---

archive/issue_comments_208620.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-04T21:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208620",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208621.json:
```json
{
    "body": "For the record: all long tests passed.",
    "created_at": "2014-05-04T21:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208621",
    "user": "https://github.com/nthiery"
}
```

For the record: all long tests passed.



---

archive/issue_comments_208622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-04T23:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208623.json:
```json
{
    "body": "The top commit of the branch here is \"#16289: Fix ZZ.cartesian_product(...)\", and this ticket's number never appears in the branch's commits `O_o`\n\nNathann",
    "created_at": "2014-05-05T07:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208623",
    "user": "https://github.com/nathanncohen"
}
```

The top commit of the branch here is "#16289: Fix ZZ.cartesian_product(...)", and this ticket's number never appears in the branch's commits `O_o`

Nathann



---

archive/issue_comments_208624.json:
```json
{
    "body": "(by the way we are on rc2 now)",
    "created_at": "2014-05-05T07:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208624",
    "user": "https://github.com/nathanncohen"
}
```

(by the way we are on rc2 now)



---

archive/issue_comments_208625.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n> The top commit of the branch here is \"#16289: Fix ZZ.cartesian_product(...)\".\n\nFixed. Damned reference effect :-)\n\n>  and this ticket's number never appears in the branch's commits `O_o`.\n\nWell, yes, at the time I wrote the commit, I did not know whether you wanted a new ticket or not.\n----\nLast 10 new commits:",
    "created_at": "2014-05-05T09:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208625",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:4 ncohen]:
> The top commit of the branch here is "#16289: Fix ZZ.cartesian_product(...)".

Fixed. Damned reference effect :-)

>  and this ticket's number never appears in the branch's commits `O_o`.

Well, yes, at the time I wrote the commit, I did not know whether you wanted a new ticket or not.
----
Last 10 new commits:



---

archive/issue_comments_208626.json:
```json
{
    "body": "Hello !\n\nTwo questions :\n\n1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that \"sets\" does not exist.\n\n   a) If it does not, should it be added (in another patch) ?\n\n   b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?\n\n2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by \"self\" where it is  used ?\n\n3) Shouldn't this method be removed and the two lines\n\n```\n          elements = tuple(elements)\n          assert len(elements) == len(self._sets)\n```\n\nmoved to `element_class` (I do not know where `element_class` is defined) ?\n\nNathann\n\nNathann",
    "created_at": "2014-05-05T09:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208626",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

Two questions :

1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that "sets" does not exist.

   a) If it does not, should it be added (in another patch) ?

   b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?

2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by "self" where it is  used ?

3) Shouldn't this method be removed and the two lines

```
          elements = tuple(elements)
          assert len(elements) == len(self._sets)
```

moved to `element_class` (I do not know where `element_class` is defined) ?

Nathann

Nathann



---

archive/issue_comments_208627.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-05-05T09:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208627",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_208628.json:
```json
{
    "body": "> Two questions :\n> 1) \n> 2) \n> 3) \n\nI know ....",
    "created_at": "2014-05-05T09:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208628",
    "user": "https://github.com/nathanncohen"
}
```

> Two questions :
> 1) 
> 2) 
> 3) 

I know ....



---

archive/issue_comments_208629.json:
```json
{
    "body": "Hi Nathann,\n\nThanks for looking at this!\n\nReplying to [comment:10 ncohen]:\n> 1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that \"sets\" does not exist.\n\nOh, right. Well from grepping around, it's referenced from\n`src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a\ndocument of its own at some point.\n\n>    b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?\n\nThat you ask the question raises another one: should this method be\nprivate in the first place? When I created it, I did not know how much\nI wanted it to be exposed, hence I started with a private method as\nit's easier to change this way than the other. I added a note about\nthis in #15425.\n\nIn the mean time, if you remember from the top of your head how to add\na private method do the doc, and cares, go ahead!\n\n> 2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by \"self\" where it is  used ?\n\nPre #16269, there was no coercion involved. So this is just reverting\nback to the old behavior, isn't it?\n\n> 3) Shouldn't this method be removed and the two lines\n> {{{\n>           elements = tuple(elements)\n>           assert len(elements) == len(self._sets)\n> }}}\n> moved to `element_class`?\n\nYes, the two lines could possibly be moved down to the constructor of\nelement_class. However the method can't be removed. Its purpose is to\nencapsulate how one can construct quickly an element of the cartesian\nproduct from its components (which is different for naive cartesian\nproducts and for cartesian product of modules), so that we can write\ngeneric code on top of it (typically in the categories).\n\n> I do not know where `element_class` is defined?\n\n\n```\nsage: C = Sets().CartesianProducts().example()\nsage: C\nThe cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})\nsage: C.element_class\n<class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\nsage: C.element_class.__base__\n<class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n```\n\n\nCheers,",
    "created_at": "2014-05-05T10:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208629",
    "user": "https://github.com/nthiery"
}
```

Hi Nathann,

Thanks for looking at this!

Replying to [comment:10 ncohen]:
> 1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that "sets" does not exist.

Oh, right. Well from grepping around, it's referenced from
`src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a
document of its own at some point.

>    b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?

That you ask the question raises another one: should this method be
private in the first place? When I created it, I did not know how much
I wanted it to be exposed, hence I started with a private method as
it's easier to change this way than the other. I added a note about
this in #15425.

In the mean time, if you remember from the top of your head how to add
a private method do the doc, and cares, go ahead!

> 2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by "self" where it is  used ?

Pre #16269, there was no coercion involved. So this is just reverting
back to the old behavior, isn't it?

> 3) Shouldn't this method be removed and the two lines
> {{{
>           elements = tuple(elements)
>           assert len(elements) == len(self._sets)
> }}}
> moved to `element_class`?

Yes, the two lines could possibly be moved down to the constructor of
element_class. However the method can't be removed. Its purpose is to
encapsulate how one can construct quickly an element of the cartesian
product from its components (which is different for naive cartesian
products and for cartesian product of modules), so that we can write
generic code on top of it (typically in the categories).

> I do not know where `element_class` is defined?


```
sage: C = Sets().CartesianProducts().example()
sage: C
The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})
sage: C.element_class
<class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
sage: C.element_class.__base__
<class 'sage.sets.cartesian_product.CartesianProduct.Element'>
```


Cheers,



---

archive/issue_comments_208630.json:
```json
{
    "body": "Yoooooooo !\n\n> Oh, right. Well from grepping around, it's referenced from\n> `src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a\n> document of its own at some point.\n\nHmmmmm... Probably. To be honest I always hated the \"structure\" folder, because for me \"structure\" means \"data structure\". By the way the index of the \"structure\" document could also be reorganized.\n\n> That you ask the question raises another one: should this method be\n> private in the first place? When I created it, I did not know how much\n> I wanted it to be exposed, hence I started with a private method as\n> it's easier to change this way than the other. I added a note about\n> this in #15425.\n> \n> In the mean time, if you remember from the top of your head how to add\n> a private method do the doc, and cares, go ahead!\n\nI think that I will if I can find its entry in the structure document !\n\n> Pre #16269, there was no coercion involved. So this is just reverting\n> back to the old behavior, isn't it?\n\nTrue... God, I really can't remember which functions call which others... `element_class`, `_element_constructor_`, `self()`... How many ways to do (almost) the same thing ? `T_T`\n\n> {{{\n> sage: C = Sets().CartesianProducts().example()\n> sage: C\n> The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})\n> sage: C.element_class\n> <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\n> sage: C.element_class.__base__\n> <class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n> }}}\n\n\n```\n~/sage/sets$ grep element_class cartesian_product.py \n        return self.element_class(self, x)\n        return self.element_class(self, elements)\n```\n\n\nSo I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.\n\nNathann",
    "created_at": "2014-05-05T10:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208630",
    "user": "https://github.com/nathanncohen"
}
```

Yoooooooo !

> Oh, right. Well from grepping around, it's referenced from
> `src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a
> document of its own at some point.

Hmmmmm... Probably. To be honest I always hated the "structure" folder, because for me "structure" means "data structure". By the way the index of the "structure" document could also be reorganized.

> That you ask the question raises another one: should this method be
> private in the first place? When I created it, I did not know how much
> I wanted it to be exposed, hence I started with a private method as
> it's easier to change this way than the other. I added a note about
> this in #15425.
> 
> In the mean time, if you remember from the top of your head how to add
> a private method do the doc, and cares, go ahead!

I think that I will if I can find its entry in the structure document !

> Pre #16269, there was no coercion involved. So this is just reverting
> back to the old behavior, isn't it?

True... God, I really can't remember which functions call which others... `element_class`, `_element_constructor_`, `self()`... How many ways to do (almost) the same thing ? `T_T`

> {{{
> sage: C = Sets().CartesianProducts().example()
> sage: C
> The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})
> sage: C.element_class
> <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
> sage: C.element_class.__base__
> <class 'sage.sets.cartesian_product.CartesianProduct.Element'>
> }}}


```
~/sage/sets$ grep element_class cartesian_product.py 
        return self.element_class(self, x)
        return self.element_class(self, elements)
```


So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.

Nathann



---

archive/issue_comments_208631.json:
```json
{
    "body": "I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n\nIf you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n\nNathann",
    "created_at": "2014-05-05T10:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208631",
    "user": "https://github.com/nathanncohen"
}
```

I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.

If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.

Nathann



---

archive/issue_comments_208632.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> Hmmmmm... Probably. To be honest I always hated the \"structure\" folder, because for me \"structure\" means \"data structure\".\n\nWhich it is up to some point: it's also about basic data structures\nfor parents, elements, ...\n\n> By the way the index of the \"structure\" document could also be reorganized.\n\n+1\n\n> > Pre #16269, there was no coercion involved. So this is just reverting\n> > back to the old behavior, isn't it?\n> \n> How many ways to do (almost) the same thing ? `T_T`\n\nI know ...\n\n> > {{{\n> > sage: C.element_class\n> > <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\n> > sage: C.element_class.__base__\n> > <class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n> > }}}\n> \n> {{{\n> ~/sage/sets$ grep element_class cartesian_product.py \n>         return self.element_class(self, x)\n>         return self.element_class(self, elements)\n> }}}\n> \n> So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.\n\nAs shown above, it is\n`sage.sets.cartesian_product.CartesianProduct.Element`, with just the\nabstract class from categories plugged in.\n\nWhich by the way it does not have an `__init__` of its own, so we\ncould not really move the `tuple/len` checks down there.\n\nCheers,\n                            Nicolas",
    "created_at": "2014-05-05T10:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208632",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:13 ncohen]:
> Hmmmmm... Probably. To be honest I always hated the "structure" folder, because for me "structure" means "data structure".

Which it is up to some point: it's also about basic data structures
for parents, elements, ...

> By the way the index of the "structure" document could also be reorganized.

+1

> > Pre #16269, there was no coercion involved. So this is just reverting
> > back to the old behavior, isn't it?
> 
> How many ways to do (almost) the same thing ? `T_T`

I know ...

> > {{{
> > sage: C.element_class
> > <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
> > sage: C.element_class.__base__
> > <class 'sage.sets.cartesian_product.CartesianProduct.Element'>
> > }}}
> 
> {{{
> ~/sage/sets$ grep element_class cartesian_product.py 
>         return self.element_class(self, x)
>         return self.element_class(self, elements)
> }}}
> 
> So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.

As shown above, it is
`sage.sets.cartesian_product.CartesianProduct.Element`, with just the
abstract class from categories plugged in.

Which by the way it does not have an `__init__` of its own, so we
could not really move the `tuple/len` checks down there.

Cheers,
                            Nicolas



---

archive/issue_comments_208633.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n> \n> If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n\nOk. I'll have a look after lunch.",
    "created_at": "2014-05-05T10:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208633",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:14 ncohen]:
> I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.
> 
> If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.

Ok. I'll have a look after lunch.



---

archive/issue_comments_208634.json:
```json
{
    "body": "> Which it is up to some point: it's also about basic data structures\n> for parents, elements, ...\n\nHmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.\n\n> As shown above, it is\n> `sage.sets.cartesian_product.CartesianProduct.Element`, with just the\n> abstract class from categories plugged in.\n> \n> Which by the way it does not have an `__init__` of its own, so we\n> could not really move the `tuple/len` checks down there.\n\nYou lost me `:-P`\n\nNathann",
    "created_at": "2014-05-05T10:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208634",
    "user": "https://github.com/nathanncohen"
}
```

> Which it is up to some point: it's also about basic data structures
> for parents, elements, ...

Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.

> As shown above, it is
> `sage.sets.cartesian_product.CartesianProduct.Element`, with just the
> abstract class from categories plugged in.
> 
> Which by the way it does not have an `__init__` of its own, so we
> could not really move the `tuple/len` checks down there.

You lost me `:-P`

Nathann



---

archive/issue_comments_208635.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-05T13:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208636.json:
```json
{
    "body": "Replying to [comment:16 nthiery]:\n> Replying to [comment:14 ncohen]:\n> > I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n> > \n> > If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n> \n> Ok. I'll have a look after lunch.\n\nI fixed one link. The other links like `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` should start working once #9107 will be merged.\n\nThe doc could take some tidying, but that will be for later; enough conflicts with #10963! I'll just leave a note about this in #15425.\n\nFor me this is a positive review if you are fine with my last commit.",
    "created_at": "2014-05-05T13:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208636",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:16 nthiery]:
> Replying to [comment:14 ncohen]:
> > I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.
> > 
> > If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.
> 
> Ok. I'll have a look after lunch.

I fixed one link. The other links like `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` should start working once #9107 will be merged.

The doc could take some tidying, but that will be for later; enough conflicts with #10963! I'll just leave a note about this in #15425.

For me this is a positive review if you are fine with my last commit.



---

archive/issue_comments_208637.json:
```json
{
    "body": "Okay okay, good to go then. Thanks !\n\nNathann",
    "created_at": "2014-05-05T13:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208637",
    "user": "https://github.com/nathanncohen"
}
```

Okay okay, good to go then. Thanks !

Nathann



---

archive/issue_comments_208638.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2014-05-05T13:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208638",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_208639.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2014-05-05T13:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208639",
    "user": "https://github.com/nthiery"
}
```

Thanks for the review!



---

archive/issue_comments_208640.json:
```json
{
    "body": "Replying to [comment:17 ncohen]:\n> Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.\n\nThis would make sense indeed! And to start with add a ref from there.\n\n> > As shown above, it is\n> > `sage.sets.cartesian_product.CartesianProduct.Element`, with just the\n> > abstract class from categories plugged in.\n> > \n> > Which by the way it does not have an `__init__` of its own, so we\n> > could not really move the `tuple/len` checks down there.\n> \n> You lost me `:-P`\n\nSorry :-)\n\nI meant: we thought about moving the convertion to tuple and length checks from `CartesianProduct._cartesian_product_of_elements` to the `__init__` method of the element class, that is `CartesianProduct.Element`. But this class does not have an `__init__` of its own; instead it just inherits that of its base `ElementWrapper`.\n\nNo big deal anyway.",
    "created_at": "2014-05-05T13:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208640",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:17 ncohen]:
> Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.

This would make sense indeed! And to start with add a ref from there.

> > As shown above, it is
> > `sage.sets.cartesian_product.CartesianProduct.Element`, with just the
> > abstract class from categories plugged in.
> > 
> > Which by the way it does not have an `__init__` of its own, so we
> > could not really move the `tuple/len` checks down there.
> 
> You lost me `:-P`

Sorry :-)

I meant: we thought about moving the convertion to tuple and length checks from `CartesianProduct._cartesian_product_of_elements` to the `__init__` method of the element class, that is `CartesianProduct.Element`. But this class does not have an `__init__` of its own; instead it just inherits that of its base `ElementWrapper`.

No big deal anyway.



---

archive/issue_events_048016.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16051#event-48016"
}
```



---

archive/issue_events_048017.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-06T18:03:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16051#event-48017"
}
```



---

archive/issue_comments_208641.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-06T18:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16051",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16051#issuecomment-208641",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
