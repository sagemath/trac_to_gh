# Issue 25586: maxima segfaults on integral computation

archive/issues_025586.json:
```json
{
    "body": "CC:  slelievre\n\nAs reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):\n\n\n```\nintegrate(log(sin(x))*sin(x)^2,x)\n\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25823\n\n",
    "created_at": "2018-07-11T11:07:43Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "title": "maxima segfaults on integral computation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25586",
    "user": "tmonteil"
}
```
CC:  slelievre

As reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):


```
integrate(log(sin(x))*sin(x)^2,x)

;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;
```


Issue created by migration from https://trac.sagemath.org/ticket/25823





---

archive/issue_comments_360664.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-11T15:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360664",
    "user": "nbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_360665.json:
```json
{
    "body": "duplicate? see #25636#comment:17",
    "created_at": "2018-07-11T15:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360665",
    "user": "nbruin"
}
```

duplicate? see #25636#comment:17



---

archive/issue_comments_360666.json:
```json
{
    "body": "Maybe it's best if #25636 just tracks the issue with `integrate(x^m/sqrt(a + b*x^(2 - m)), x)`\nand the present ticket tracks the issue with `integrate(log(sin(x))*sin(x)^2, x)`.\nUnless they come from the same underlying bug in Maxima?",
    "created_at": "2018-07-11T16:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360666",
    "user": "slelievre"
}
```

Maybe it's best if #25636 just tracks the issue with `integrate(x^m/sqrt(a + b*x^(2 - m)), x)`
and the present ticket tracks the issue with `integrate(log(sin(x))*sin(x)^2, x)`.
Unless they come from the same underlying bug in Maxima?



---

archive/issue_comments_360667.json:
```json
{
    "body": "Changing keywords from \"\" to \"integrate, Maxima\".",
    "created_at": "2018-07-11T16:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360667",
    "user": "slelievre"
}
```

Changing keywords from "" to "integrate, Maxima".



---

archive/issue_comments_360668.json:
```json
{
    "body": "Is there a reference for the upstream bug report on Maxima's issue tracker?",
    "created_at": "2018-07-11T16:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360668",
    "user": "slelievre"
}
```

Is there a reference for the upstream bug report on Maxima's issue tracker?



---

archive/issue_comments_360669.json:
```json
{
    "body": "Changing keywords from \"integrate, Maxima\" to \"integrate, Maxima, segfault\".",
    "created_at": "2018-07-11T16:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360669",
    "user": "slelievre"
}
```

Changing keywords from "integrate, Maxima" to "integrate, Maxima, segfault".



---

archive/issue_comments_360670.json:
```json
{
    "body": "There's a good chance that the underlying issue is the same because all these integrals succeed on maxima with default setting and fail with sage's setting due to an infinite recursion (and hence a stack overflow). But the number of open tickets on sage is already so high that it wouldn't hurt if you prefer to track this particular issue with a separate one. Perhaps some blog decides to measure open source project activity by number of open issues and then we'll win a prize :-).",
    "created_at": "2018-07-11T17:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360670",
    "user": "nbruin"
}
```

There's a good chance that the underlying issue is the same because all these integrals succeed on maxima with default setting and fail with sage's setting due to an infinite recursion (and hence a stack overflow). But the number of open tickets on sage is already so high that it wouldn't hurt if you prefer to track this particular issue with a separate one. Perhaps some blog decides to measure open source project activity by number of open issues and then we'll win a prize :-).



---

archive/issue_comments_360671.json:
```json
{
    "body": "Replying to [comment:3 slelievre]:\n> Is there a reference for the upstream bug report on Maxima's issue tracker?\nI see you're reporting this example as \"reported upstream\". I don't think the particular example is there. You could post it as well, either on a separate maxima ticket or on the maxima ticket that is tracking one of these other failing integrals.",
    "created_at": "2018-07-11T17:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360671",
    "user": "nbruin"
}
```

Replying to [comment:3 slelievre]:
> Is there a reference for the upstream bug report on Maxima's issue tracker?
I see you're reporting this example as "reported upstream". I don't think the particular example is there. You could post it as well, either on a separate maxima ticket or on the maxima ticket that is tracking one of these other failing integrals.



---

archive/issue_comments_360672.json:
```json
{
    "body": "tmonteil, did you set the upstream field to \"Reported upstream\" when you opened the ticket?\nDid you have a reference in mind for the upstream bug report?",
    "created_at": "2018-07-18T11:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360672",
    "user": "slelievre"
}
```

tmonteil, did you set the upstream field to "Reported upstream" when you opened the ticket?
Did you have a reference in mind for the upstream bug report?



---

archive/issue_comments_360673.json:
```json
{
    "body": "Works in 8.9.beta7 with py3.",
    "created_at": "2019-08-24T08:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360673",
    "user": "chapoton"
}
```

Works in 8.9.beta7 with py3.



---

archive/issue_comments_360674.json:
```json
{
    "body": "Thanks for noticing, here is a branch with a doctest.\n\nBy the way, note that we get an example where `full_simplify()` is not idempotent.\n----\nNew commits:",
    "created_at": "2019-08-24T18:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360674",
    "user": "tmonteil"
}
```

Thanks for noticing, here is a branch with a doctest.

By the way, note that we get an example where `full_simplify()` is not idempotent.
----
New commits:



---

archive/issue_comments_360675.json:
```json
{
    "body": "maybe break the long line ?",
    "created_at": "2019-08-24T19:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360675",
    "user": "chapoton"
}
```

maybe break the long line ?



---

archive/issue_comments_360676.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-24T20:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360676",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_360677.json:
```json
{
    "body": "Done.",
    "created_at": "2019-08-24T20:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360677",
    "user": "tmonteil"
}
```

Done.



---

archive/issue_comments_360678.json:
```json
{
    "body": "Merci.",
    "created_at": "2019-08-25T05:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360678",
    "user": "chapoton"
}
```

Merci.



---

archive/issue_comments_360679.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-25T05:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360679",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_360680.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-26T22:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25586#issuecomment-360680",
    "user": "vbraun"
}
```

Resolution: fixed
