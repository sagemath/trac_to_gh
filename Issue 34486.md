# Issue 34486: elliptic_curves/hom_velusqrt.py: random test failure

Issue created by migration from https://trac.sagemath.org/ticket/34723

Original creator: @collares

Original creation time: 2022-11-04 21:03:34

CC:  lorenz

Sage 9.7 on x86_64:

```
sage -t --long --random-seed=190440690778015682984135421278300846991 /nix/store/jv3l7isa1hf4bjvf40lmrflzmyd696kz-sage-src-9.7/src/sage/schemes/elliptic_curves/hom_velusqrt.py
**********************************************************************
File "/nix/store/jv3l7isa1hf4bjvf40lmrflzmyd696kz-sage-src-9.7/src/sage/schemes/elliptic_curves/hom_velusqrt.py", line 1089, in sage.schemes.elliptic_curves.hom_velusqrt.EllipticCurveHom_velusqrt._eval
Failed example:
    E, K = _random_example_for_testing()
Exception raised:
    Traceback (most recent call last):
      File "/nix/store/g4h4aagj23nf3br90zn0545s8aqgbvxd-python3-3.10.8-env/lib/python3.10/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/nix/store/g4h4aagj23nf3br90zn0545s8aqgbvxd-python3-3.10.8-env/lib/python3.10/site-packages/sage/doctest/forker.py", line 1101, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.hom_velusqrt.EllipticCurveHom_velusqrt._eval[16]>", line 1, in <module>
        E, K = _random_example_for_testing()
      File "/nix/store/g4h4aagj23nf3br90zn0545s8aqgbvxd-python3-3.10.8-env/lib/python3.10/site-packages/sage/schemes/elliptic_curves/hom_velusqrt.py", line 1225, in _random_example_for_testing
        assert K.order() == deg
    AssertionError
```



---

Comment by chapoton created at 2022-11-08 09:06:47

Changing status from new to needs_review.


---

Comment by chapoton created at 2022-11-08 09:06:47

duplicate of #34467 ?


---

Comment by lorenz created at 2022-11-08 09:24:42

Changing status from needs_review to needs_work.


---

Comment by lorenz created at 2022-11-08 09:24:42

Nope, this is different and it can still happen on the latest beta, just not with this specific random seed. I'll work on a fix, thanks for the bug report!


---

Comment by lorenz created at 2022-11-08 09:24:42

Changing priority from major to minor.


---

Comment by lorenz created at 2022-11-08 09:39:37

Here you go, just a silly group theory mistake. I'm not sure how one would write a doctest for this.


---

Comment by lorenz created at 2022-11-08 09:39:37

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2022-11-09 11:02:51

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2022-11-09 11:02:51

setting to positive, assuming you understand your own code


---

Comment by vbraun created at 2022-11-20 12:13:18

Resolution: fixed
