# Issue 31089: homebrew-macos-11.0-xcode-minimal: scipy build fails

archive/issues_031089.json:
```json
{
    "body": "CC:  @jhpalmieri @zlscherr @dimpase @kliem @isuruf\n\n(from #31227)\n\nIssue created by migration from https://trac.sagemath.org/ticket/31326\n\n",
    "created_at": "2021-02-02T17:32:25Z",
    "labels": [
        "component: porting",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "homebrew-macos-11.0-xcode-minimal: scipy build fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31089",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jhpalmieri @zlscherr @dimpase @kliem @isuruf

(from #31227)

Issue created by migration from https://trac.sagemath.org/ticket/31326





---

archive/issue_comments_443534.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2021-03-14T23:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443534",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_443535.json:
```json
{
    "body": "It seems like `numpy.distutils` gets confused by extra whitespace in the result of `gfortran -dumpversion`. This might be related to the use of `zsh` as the shell. \n\nThis will need investigation by someone who has already made the switch to Big Sur...",
    "created_at": "2021-03-15T00:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443535",
    "user": "https://github.com/mkoeppe"
}
```

It seems like `numpy.distutils` gets confused by extra whitespace in the result of `gfortran -dumpversion`. This might be related to the use of `zsh` as the shell. 

This will need investigation by someone who has already made the switch to Big Sur...



---

archive/issue_comments_443536.json:
```json
{
    "body": "just want to point out that this problem exists on bash as well.  For anyone wanting to test you can, after configuring, do:\n\n\n\n```\nmake toolchain\nmake gfortran\nFC=\"local/bin/gfortran\" make numpy\n```\n\n\nto see the error.",
    "created_at": "2021-03-15T02:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443536",
    "user": "https://github.com/zlscherr"
}
```

just want to point out that this problem exists on bash as well.  For anyone wanting to test you can, after configuring, do:



```
make toolchain
make gfortran
FC="local/bin/gfortran" make numpy
```


to see the error.



---

archive/issue_comments_443537.json:
```json
{
    "body": "I haven't tested the full homebrew-macos-11.0-xcode-minimal build, but I'm guessing it's related to MACOSX_DEPLOYMENT_TARGET.\n\nAs I noted above, I can recreate the error with numpy by using sage's gfortran 9.2.0 on my machine with homebrew.  As per usual I think this is because python was built with MACOSX_DEPLOYMENT_TARGET 11.0 and gfortran 9.2.0 can't recognize this value.\n\nNow I know that at some point scipy's spkg-install.in file was changed to contain the lines:\n\n\n\n```\nif [ $MACOSX_VERSION -ge 20 ]; then\n     export MACOSX_DEPLOYMENT_TARGET=11.0\nfi\n```\n\n\nI'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran and its own python using a different MACOSX_DEPLOYMENT_TARGET then I would guess that this line might be causing the problems.\n\nIt's been a while since I've thought about this problem, but it's possible that the above export might not be needed anymore since homebrew patched GCC.",
    "created_at": "2021-03-15T03:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443537",
    "user": "https://github.com/zlscherr"
}
```

I haven't tested the full homebrew-macos-11.0-xcode-minimal build, but I'm guessing it's related to MACOSX_DEPLOYMENT_TARGET.

As I noted above, I can recreate the error with numpy by using sage's gfortran 9.2.0 on my machine with homebrew.  As per usual I think this is because python was built with MACOSX_DEPLOYMENT_TARGET 11.0 and gfortran 9.2.0 can't recognize this value.

Now I know that at some point scipy's spkg-install.in file was changed to contain the lines:



```
if [ $MACOSX_VERSION -ge 20 ]; then
     export MACOSX_DEPLOYMENT_TARGET=11.0
fi
```


I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran and its own python using a different MACOSX_DEPLOYMENT_TARGET then I would guess that this line might be causing the problems.

It's been a while since I've thought about this problem, but it's possible that the above export might not be needed anymore since homebrew patched GCC.



---

archive/issue_comments_443538.json:
```json
{
    "body": "Actually it probably shouldn't matter whether or not sage is building its own python.  gfortran 9.2.0 just can't recognize MACOSX_DEPLOYMENT_TARGET=11.0.",
    "created_at": "2021-03-15T03:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443538",
    "user": "https://github.com/zlscherr"
}
```

Actually it probably shouldn't matter whether or not sage is building its own python.  gfortran 9.2.0 just can't recognize MACOSX_DEPLOYMENT_TARGET=11.0.



---

archive/issue_comments_443539.json:
```json
{
    "body": "Sorry for the spam, but the ticket that introduced that if statement is #31183",
    "created_at": "2021-03-15T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443539",
    "user": "https://github.com/zlscherr"
}
```

Sorry for the spam, but the ticket that introduced that if statement is #31183



---

archive/issue_comments_443540.json:
```json
{
    "body": "Could you check if the gcc upgrade in #29827 fixes this issue?",
    "created_at": "2021-03-15T03:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443540",
    "user": "https://github.com/mkoeppe"
}
```

Could you check if the gcc upgrade in #29827 fixes this issue?



---

archive/issue_comments_443541.json:
```json
{
    "body": "Replying to [comment:5 gh-zlscherr]:\n> I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran \n\nYes, that's right. This configuration uses a minimal installation of homebrew, plus the packages listed in `build/pkgs/_bootstrap/distros/homebrew.txt`, namely `gettext autoconf automake libtool pkg-config`",
    "created_at": "2021-03-15T03:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443541",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 gh-zlscherr]:
> I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran 

Yes, that's right. This configuration uses a minimal installation of homebrew, plus the packages listed in `build/pkgs/_bootstrap/distros/homebrew.txt`, namely `gettext autoconf automake libtool pkg-config`



---

archive/issue_comments_443542.json:
```json
{
    "body": "I also just saw that the error reported on top is in numpy and not in scipy.  I'll take a look at #29827 when I get a chance, but I know that homebrew had to specifically patch GCC to avoid this sort of problem.  A viable solution might be to track the legacy option to see if sage is building its own Fortran, and if so we set MACOSX_DEPLOYMENT_TARGET to 10.something",
    "created_at": "2021-03-15T03:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443542",
    "user": "https://github.com/zlscherr"
}
```

I also just saw that the error reported on top is in numpy and not in scipy.  I'll take a look at #29827 when I get a chance, but I know that homebrew had to specifically patch GCC to avoid this sort of problem.  A viable solution might be to track the legacy option to see if sage is building its own Fortran, and if so we set MACOSX_DEPLOYMENT_TARGET to 10.something



---

archive/issue_comments_443543.json:
```json
{
    "body": "No, it's an error building scipy -- which uses numpy.distutils, which you see in the lines of the log",
    "created_at": "2021-03-15T03:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443543",
    "user": "https://github.com/mkoeppe"
}
```

No, it's an error building scipy -- which uses numpy.distutils, which you see in the lines of the log



---

archive/issue_comments_443544.json:
```json
{
    "body": "Ah okay. Also, do you know if the homebrew minimal test uses system for python? That might be responsible for why the deployment Target is set to 11, whereas when sage builds it's own python the deployment Target is set lower.",
    "created_at": "2021-03-15T04:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443544",
    "user": "https://github.com/zlscherr"
}
```

Ah okay. Also, do you know if the homebrew minimal test uses system for python? That might be responsible for why the deployment Target is set to 11, whereas when sage builds it's own python the deployment Target is set lower.



---

archive/issue_comments_443545.json:
```json
{
    "body": "From https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ: Runs in which scipy fails to build:\n\n- local-macos (homebrew-macos, minimal, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg\n\n- local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n\n- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg",
    "created_at": "2021-03-15T04:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443545",
    "user": "https://github.com/mkoeppe"
}
```

From https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ: Runs in which scipy fails to build:

- local-macos (homebrew-macos, minimal, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg

- local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda

- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg



---

archive/issue_comments_443546.json:
```json
{
    "body": "For what it's worth, if I do\n\n```\n% make distclean && ./configure --with-system-gfortran=no && make\n```\n\nthen the build fails on `numpy`, not `scipy`, but with the same sort of error:\n\n```\nValueError: A valid Fortran version was not found in this string:\n\n9.2.0\n```\n",
    "created_at": "2021-03-15T04:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443546",
    "user": "https://github.com/jhpalmieri"
}
```

For what it's worth, if I do

```
% make distclean && ./configure --with-system-gfortran=no && make
```

then the build fails on `numpy`, not `scipy`, but with the same sort of error:

```
ValueError: A valid Fortran version was not found in this string:

9.2.0
```




---

archive/issue_comments_443547.json:
```json
{
    "body": "I think there are extra newlines in this version string, which confuses the numpy.distutils code",
    "created_at": "2021-03-15T04:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443547",
    "user": "https://github.com/mkoeppe"
}
```

I think there are extra newlines in this version string, which confuses the numpy.distutils code



---

archive/issue_comments_443548.json:
```json
{
    "body": "It's actually worse than just extra newlines.  I tried manually patching to strip all whitespace from both ends, but that didn't solve the problem.  I dumped the contents of the version_string which is causing numpy to fail into a text file and it turned out to be\n\n\"gfortran: warning: couldn't understand version 11\n\n9.3.0\"\n\n(I tested with gcc 9.3, but the same happens with 9.2)\n\nI can get numpy and scipy to build by manually forcing MACOSX_DEPLOYMENT_TARGET to be 10.16 but it seems that 11 and 11.0 both cause problems.\n\nHere is a proposal for how to deal with this:\n\n1.  Remove the if statements from scipy's spkg-install to set MACOSX_DEPLOYMENT_TARGET to 11.0.  I don't think this is needed anymore since Homebrew patched GCC 10 but I can do some testing on that.\n\n2.  At some point in the build process we take a look at MACOSX_DEPLOYMENT_TARGET, which can be easily done with something like\n\n\n\n```\npython3 -c \"import sysconfig; print(sysconfig.get_config_var('MACOSX_DEPLOYMENT_TARGET'))\"\n```\n\n\nif we get back a value of 11 and yet the version of gfortran we are using is less than 10.2.0 then we change MACOSX_DEPLOYMENT_TARGET to 10.16 or something like that.",
    "created_at": "2021-03-16T02:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443548",
    "user": "https://github.com/zlscherr"
}
```

It's actually worse than just extra newlines.  I tried manually patching to strip all whitespace from both ends, but that didn't solve the problem.  I dumped the contents of the version_string which is causing numpy to fail into a text file and it turned out to be

"gfortran: warning: couldn't understand version 11

9.3.0"

(I tested with gcc 9.3, but the same happens with 9.2)

I can get numpy and scipy to build by manually forcing MACOSX_DEPLOYMENT_TARGET to be 10.16 but it seems that 11 and 11.0 both cause problems.

Here is a proposal for how to deal with this:

1.  Remove the if statements from scipy's spkg-install to set MACOSX_DEPLOYMENT_TARGET to 11.0.  I don't think this is needed anymore since Homebrew patched GCC 10 but I can do some testing on that.

2.  At some point in the build process we take a look at MACOSX_DEPLOYMENT_TARGET, which can be easily done with something like



```
python3 -c "import sysconfig; print(sysconfig.get_config_var('MACOSX_DEPLOYMENT_TARGET'))"
```


if we get back a value of 11 and yet the version of gfortran we are using is less than 10.2.0 then we change MACOSX_DEPLOYMENT_TARGET to 10.16 or something like that.



---

archive/issue_comments_443549.json:
```json
{
    "body": "But probably the second step is not necessary, it would only be needed if the user has python3 from Homebrew and yet gfortran from sage.  I think just fixing up scipy's spkg-install should fix everything.",
    "created_at": "2021-03-16T02:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443549",
    "user": "https://github.com/zlscherr"
}
```

But probably the second step is not necessary, it would only be needed if the user has python3 from Homebrew and yet gfortran from sage.  I think just fixing up scipy's spkg-install should fix everything.



---

archive/issue_comments_443550.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-16T02:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443551.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-16T02:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443551",
    "user": "https://github.com/zlscherr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443552.json:
```json
{
    "body": "Thanks for investigating! \n\nTo test this in various configurations, it would be enough to merge the branch of #31492 and then push a tag to your github fork of sage.",
    "created_at": "2021-03-16T02:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443552",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for investigating! 

To test this in various configurations, it would be enough to merge the branch of #31492 and then push a tag to your github fork of sage.



---

archive/issue_comments_443553.json:
```json
{
    "body": "I think I did that correctly.  I'll report on what happens in the CI on my repo.",
    "created_at": "2021-03-16T02:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443553",
    "user": "https://github.com/zlscherr"
}
```

I think I did that correctly.  I'll report on what happens in the CI on my repo.



---

archive/issue_comments_443554.json:
```json
{
    "body": "I'm not sure if there is something I need to do to get the CI working, but some of the homebrew's are already failing because of an error like:\n\ncurl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to homebrew.bintray.com:443\n\nIs there something I need to do to avoid this?",
    "created_at": "2021-03-16T03:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443554",
    "user": "https://github.com/zlscherr"
}
```

I'm not sure if there is something I need to do to get the CI working, but some of the homebrew's are already failing because of an error like:

curl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to homebrew.bintray.com:443

Is there something I need to do to avoid this?



---

archive/issue_comments_443555.json:
```json
{
    "body": "There are various ways how these CI runs can intermittently fail. It's nothing that we can fix on our side as far as I can tell. \n\nBy the way, if you want, you can remove the unnecessary runs (for linux, cygwin) by editing files in `.github/workflows/`. Also `max-parallel` can be edited so that more macOS jobs are run in parallel.",
    "created_at": "2021-03-16T03:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443555",
    "user": "https://github.com/mkoeppe"
}
```

There are various ways how these CI runs can intermittently fail. It's nothing that we can fix on our side as far as I can tell. 

By the way, if you want, you can remove the unnecessary runs (for linux, cygwin) by editing files in `.github/workflows/`. Also `max-parallel` can be edited so that more macOS jobs are run in parallel.



---

archive/issue_comments_443556.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> - local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n\n`@`isuruf: Also this build using conda-forge is affected",
    "created_at": "2021-03-16T07:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443556",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:13 mkoeppe]:
> - local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda

`@`isuruf: Also this build using conda-forge is affected



---

archive/issue_comments_443557.json:
```json
{
    "body": "yes, my student also reports getting\n\n```\n[scipy-1.5.4]     clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11.0'\n```\n",
    "created_at": "2021-03-20T20:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443557",
    "user": "https://github.com/dimpase"
}
```

yes, my student also reports getting

```
[scipy-1.5.4]     clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11.0'
```




---

archive/issue_comments_443558.json:
```json
{
    "body": "I tried running on github CI, but it quit after a few days and only got through 10.15.  I just took out 10.15 and am trying again...",
    "created_at": "2021-03-20T21:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443558",
    "user": "https://github.com/zlscherr"
}
```

I tried running on github CI, but it quit after a few days and only got through 10.15.  I just took out 10.15 and am trying again...



---

archive/issue_comments_443559.json:
```json
{
    "body": "I tried to run the CI tests on 11.0 but I got the following error message:\n\n\"No runner matching the specified labels was found: macos-11.0\"\n\nIs there a different way I should get the tests to run on Big Sur?",
    "created_at": "2021-03-21T19:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443559",
    "user": "https://github.com/zlscherr"
}
```

I tried to run the CI tests on 11.0 but I got the following error message:

"No runner matching the specified labels was found: macos-11.0"

Is there a different way I should get the tests to run on Big Sur?



---

archive/issue_comments_443560.json:
```json
{
    "body": "https://github.com/actions/virtual-environments/issues/2486\n\"macOS 11.0 pools will be transited to private preview\"",
    "created_at": "2021-03-21T19:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443560",
    "user": "https://github.com/mkoeppe"
}
```

https://github.com/actions/virtual-environments/issues/2486
"macOS 11.0 pools will be transited to private preview"



---

archive/issue_comments_443561.json:
```json
{
    "body": "gotcha.  I've tried some local testing and the reversion seems to be fine, but I'll leave it to others to do more extensive testing.",
    "created_at": "2021-03-21T19:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443561",
    "user": "https://github.com/zlscherr"
}
```

gotcha.  I've tried some local testing and the reversion seems to be fine, but I'll leave it to others to do more extensive testing.



---

archive/issue_comments_443562.json:
```json
{
    "body": "Some of my recent runs in https://github.com/mkoeppe/sage/actions/workflows/tox.yml have used branches that merged this ticket and may contain some useful results for 11.0",
    "created_at": "2021-03-21T19:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443562",
    "user": "https://github.com/mkoeppe"
}
```

Some of my recent runs in https://github.com/mkoeppe/sage/actions/workflows/tox.yml have used branches that merged this ticket and may contain some useful results for 11.0



---

archive/issue_comments_443563.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-21T21:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443563",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443564.json:
```json
{
    "body": "- local-macos (homebrew-macos, minimal, default, macos-11.0) - \n  https://github.com/mkoeppe/sage/runs/2156548349 - OK\n\n- local-macos (homebrew-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2156548388 - OK",
    "created_at": "2021-03-21T21:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443564",
    "user": "https://github.com/mkoeppe"
}
```

- local-macos (homebrew-macos, minimal, default, macos-11.0) - 
  https://github.com/mkoeppe/sage/runs/2156548349 - OK

- local-macos (homebrew-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2156548388 - OK



---

archive/issue_comments_443565.json:
```json
{
    "body": "Also \n\n- local-macos (conda-forge-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2135024636 - OK (except for an unrelated error in docbuild)",
    "created_at": "2021-03-21T21:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443565",
    "user": "https://github.com/mkoeppe"
}
```

Also 

- local-macos (conda-forge-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2135024636 - OK (except for an unrelated error in docbuild)



---

archive/issue_comments_443566.json:
```json
{
    "body": "I agree it works with various Pythons on OS X 11. comment:14 has not been addressed, but I guess that's not for this ticket.",
    "created_at": "2021-03-22T02:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443566",
    "user": "https://github.com/jhpalmieri"
}
```

I agree it works with various Pythons on OS X 11. comment:14 has not been addressed, but I guess that's not for this ticket.



---

archive/issue_comments_443567.json:
```json
{
    "body": "Replying to [comment:35 jhpalmieri]:\n> comment:14 has not been addressed, but I guess that's not for this ticket.\nYes, to fix that we need to upgrade our gcc/gfortran - that's #29703.",
    "created_at": "2021-03-22T03:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443567",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:35 jhpalmieri]:
> comment:14 has not been addressed, but I guess that's not for this ticket.
Yes, to fix that we need to upgrade our gcc/gfortran - that's #29703.



---

archive/issue_events_028476.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-23T23:49:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31089#event-28476"
}
```



---

archive/issue_comments_443568.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-23T23:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31089#issuecomment-443568",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
