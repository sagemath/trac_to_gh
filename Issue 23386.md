# Issue 23386: Add is_trivial_zero() to coordinate functions and scalar fields on manifolds

Issue created by migration from https://trac.sagemath.org/ticket/23623

Original creator: egourgoulhon

Original creation time: 2017-08-15 15:52:40

CC:  roed tscrim

Keywords: coordinate function, scalar field, tensor calculus

This ticket implements the fast method `is_trivial_zero` in coordinate functions (classes `sage.manifolds.coord_func.CoordFunction` and `sage.manifolds.coord_func_symb.CoordFunctionSymb`) and scalar fields (class `sage.manifolds.scalarfield.ScalarField`). The method `is_trivial_zero` is then used instead of `== 0` in tensor calculus, especially in tensor assignement, where the check for zero is performed because only nonzero components of a tensor are stored. This avoids the call to Maxima, which can be problematic in some cases, as reported in 
this [sage-devel post](https://groups.google.com/forum/#!topic/sage-devel/teLBaNipBDM). Moreover, this results in a significant speed-up factor. For instance, the computation time of the coefficients of the Levi-Civita connection of the Kerr-Newman metric, as performed in cell 20 of this [example notebook](http://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/v1.0/SM_Kerr_Newman.ipynb), is reduced from 5.37 s to  4.11 s (this is on a Intel Core i7-6700HQ computer).


---

Comment by egourgoulhon created at 2017-08-15 15:54:03

New commits:


---

Comment by egourgoulhon created at 2017-08-15 15:54:03

Changing status from new to needs_review.


---

Comment by rllozes created at 2017-08-25 17:00:21

Built against 8.1 beta 3. No test failures, including the original sage-devel post and other, more elaborate tests.


---

Comment by rllozes created at 2017-08-25 17:00:21

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2017-08-25 21:08:07

Thank you for the review!


---

Comment by vbraun created at 2017-09-04 06:10:44

Resolution: fixed
