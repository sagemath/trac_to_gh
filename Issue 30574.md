# Issue 30574: Speed up truncation of polynomials

archive/issues_030574.json:
```json
{
    "body": "Keywords: polynomials\n\nTruncation of polynomials over finite fields are currently implemented by calling on the Euclidean division function of FLINT and NTL. However FLINT and NTL provide special functions for truncation, which are much faster.\n\nIn this ticket, we implement an interface to the truncation functions of FLINT ant NTL and use it in the `truncate` method.\n\nNotably, this improvement highly speeds up computations in the ring of formal series.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30811\n\n",
    "created_at": "2020-10-22T13:51:13Z",
    "labels": [
        "performance",
        "major",
        "enhancement"
    ],
    "title": "Speed up truncation of polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30574",
    "user": "caruso"
}
```
Keywords: polynomials

Truncation of polynomials over finite fields are currently implemented by calling on the Euclidean division function of FLINT and NTL. However FLINT and NTL provide special functions for truncation, which are much faster.

In this ticket, we implement an interface to the truncation functions of FLINT ant NTL and use it in the `truncate` method.

Notably, this improvement highly speeds up computations in the ring of formal series.


Issue created by migration from https://trac.sagemath.org/ticket/30811





---

archive/issue_comments_436890.json:
```json
{
    "body": "Here is an example of speed up.\n\n\n```\nsage: k = GF(7)\nsage: S.<x> = k[[]]\nsage: M = random_matrix(S, 20, 20, prec=500)\n```\n\n\nBefore the patch:\n\n\n```\nsage: %time _ = M.charpoly()\nCPU times: user 5.19 s, sys: 3.52 ms, total: 5.2 s\nWall time: 5.2 s\n```\n\n\nAfter the patch:\n\n\n```\nsage: %time _ = M.charpoly()\nCPU times: user 1.71 s, sys: 2.95 ms, total: 1.71 s\nWall time: 1.71 s\n```\n\n----\nNew commits:",
    "created_at": "2020-10-22T14:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436890",
    "user": "caruso"
}
```

Here is an example of speed up.


```
sage: k = GF(7)
sage: S.<x> = k[[]]
sage: M = random_matrix(S, 20, 20, prec=500)
```


Before the patch:


```
sage: %time _ = M.charpoly()
CPU times: user 5.19 s, sys: 3.52 ms, total: 5.2 s
Wall time: 5.2 s
```


After the patch:


```
sage: %time _ = M.charpoly()
CPU times: user 1.71 s, sys: 2.95 ms, total: 1.71 s
Wall time: 1.71 s
```

----
New commits:



---

archive/issue_comments_436891.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-22T14:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436891",
    "user": "caruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_436892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-22T14:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436892",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_436893.json:
```json
{
    "body": "ok, ca semble bien",
    "created_at": "2020-10-22T19:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436893",
    "user": "chapoton"
}
```

ok, ca semble bien



---

archive/issue_comments_436894.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-22T19:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436894",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_436895.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-07T16:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30574#issuecomment-436895",
    "user": "vbraun"
}
```

Resolution: fixed
