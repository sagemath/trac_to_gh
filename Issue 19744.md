# Issue 19744: asymptotic expansions: minor improvements

archive/issues_019744.json:
```json
{
    "body": "CC:  @cheuberg @dkrenn\n\nOn this ticket several minor improvements for asymptotic expansions shall be implemented.\n\n- `is_exact`: check whether all terms of an expansion are exact.\n- `_latex_`: return a LaTeX-representation of the expansion.\n- ???\n\nIssue created by migration from https://trac.sagemath.org/ticket/19981\n\n",
    "created_at": "2016-01-28T23:18:39Z",
    "labels": [
        "asymptotic expansions",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "asymptotic expansions: minor improvements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19744",
    "user": "@behackl"
}
```
CC:  @cheuberg @dkrenn

On this ticket several minor improvements for asymptotic expansions shall be implemented.

- `is_exact`: check whether all terms of an expansion are exact.
- `_latex_`: return a LaTeX-representation of the expansion.
- ???

Issue created by migration from https://trac.sagemath.org/ticket/19981





---

archive/issue_comments_271391.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-29T00:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271391",
    "user": "@behackl"
}
```

New commits:



---

archive/issue_comments_271392.json:
```json
{
    "body": "Note: this is on top of `7.1.beta1`.\n\nAny more suggestions for practical improvements?",
    "created_at": "2016-01-29T00:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271392",
    "user": "@behackl"
}
```

Note: this is on top of `7.1.beta1`.

Any more suggestions for practical improvements?



---

archive/issue_comments_271393.json:
```json
{
    "body": "Replying to [comment:2 behackl]:\n> Note: this is on top of `7.1.beta1`.\n> \n> Any more suggestions for practical improvements?\nno; they could go into a separate ticket anyway.",
    "created_at": "2016-01-29T04:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271393",
    "user": "@cheuberg"
}
```

Replying to [comment:2 behackl]:
> Note: this is on top of `7.1.beta1`.
> 
> Any more suggestions for practical improvements?
no; they could go into a separate ticket anyway.



---

archive/issue_comments_271394.json:
```json
{
    "body": "Replying to [comment:3 cheuberg]:\n> they could go into a separate ticket anyway.\n\n+1 for separate tickets.",
    "created_at": "2016-01-29T18:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271394",
    "user": "@dkrenn"
}
```

Replying to [comment:3 cheuberg]:
> they could go into a separate ticket anyway.

+1 for separate tickets.



---

archive/issue_comments_271395.json:
```json
{
    "body": "I had a quick look at the code:\n\n> ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||\n\nIMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.\n\n> ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||\n\n`SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.",
    "created_at": "2016-01-29T18:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271395",
    "user": "@dkrenn"
}
```

I had a quick look at the code:

> ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||

IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.

> ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||

`SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.



---

archive/issue_comments_271396.json:
```json
{
    "body": "Replying to [comment:5 dkrenn]:\n> I had a quick look at the code:\n> \n> > ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||\n> \n> IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.\n\nI'd even use `_has_same_summands_`, the parent is certainly the same so this is even more efficient. Will change later.\n\n> \n> > ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||\n> \n> `SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.\n\nThat was/is my original plan, and this is also the reason why I didn't set this to `needs_review`. ;-) However, I wanted to have nice (growth-ordered) latex-output quickly in order to check the output of the singularity analysis generator; and this was the simplest implementation I could think of. The code is just dumped here.\n\nI'll also split this ticket into two.",
    "created_at": "2016-01-29T19:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271396",
    "user": "@behackl"
}
```

Replying to [comment:5 dkrenn]:
> I had a quick look at the code:
> 
> > ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||
> 
> IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.

I'd even use `_has_same_summands_`, the parent is certainly the same so this is even more efficient. Will change later.

> 
> > ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||
> 
> `SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.

That was/is my original plan, and this is also the reason why I didn't set this to `needs_review`. ;-) However, I wanted to have nice (growth-ordered) latex-output quickly in order to check the output of the singularity analysis generator; and this was the simplest implementation I could think of. The code is just dumped here.

I'll also split this ticket into two.



---

archive/issue_comments_271397.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-30T15:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271397",
    "user": "@behackl"
}
```

New commits:



---

archive/issue_comments_271398.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-30T15:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271398",
    "user": "@behackl"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271399.json:
```json
{
    "body": "Typo: \"Nothin.\", but you could remove the INPUT-block completely. Otherwise looks good. Still have to wait until I have a working 7.1.beta1.\n\nPS: Author missing",
    "created_at": "2016-01-30T16:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271399",
    "user": "@dkrenn"
}
```

Typo: "Nothin.", but you could remove the INPUT-block completely. Otherwise looks good. Still have to wait until I have a working 7.1.beta1.

PS: Author missing



---

archive/issue_comments_271400.json:
```json
{
    "body": "Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.",
    "created_at": "2016-01-30T17:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271400",
    "user": "@cheuberg"
}
```

Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.



---

archive/issue_comments_271401.json:
```json
{
    "body": "Replying to [comment:9 cheuberg]:\n> Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.\n\nTrue. Maybe something like `all(T.is_exact() for T in self.summands)`...",
    "created_at": "2016-01-30T17:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271401",
    "user": "@dkrenn"
}
```

Replying to [comment:9 cheuberg]:
> Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.

True. Maybe something like `all(T.is_exact() for T in self.summands)`...



---

archive/issue_comments_271402.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-31T09:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271402",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_271403.json:
```json
{
    "body": "Replying to [comment:10 dkrenn]:\n> True. Maybe something like `all(T.is_exact() for T in self.summands)`...\n\nThat's what I meant.",
    "created_at": "2016-01-31T13:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271403",
    "user": "@cheuberg"
}
```

Replying to [comment:10 dkrenn]:
> True. Maybe something like `all(T.is_exact() for T in self.summands)`...

That's what I meant.



---

archive/issue_comments_271404.json:
```json
{
    "body": "I'm not a very big fan of having a method `is_exact` for terms, where this would just return `isinstance(self, ExactTerm)`. I think that this would just add an unneccessary layer of function calls.\n\nAre you against something like `all(isinstance(T, ExactTerm) for T in self.summands)`?",
    "created_at": "2016-01-31T22:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271404",
    "user": "@behackl"
}
```

I'm not a very big fan of having a method `is_exact` for terms, where this would just return `isinstance(self, ExactTerm)`. I think that this would just add an unneccessary layer of function calls.

Are you against something like `all(isinstance(T, ExactTerm) for T in self.summands)`?



---

archive/issue_comments_271405.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T12:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271405",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271406.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-02T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271406",
    "user": "@behackl"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_271407.json:
```json
{
    "body": "I've changed my mind: to keep our style of programming consistent, I have implemented an `is_exact`-method for terms and replaced all `isinstance(term, ExactTerm)`-statements by `term.is_exact()`.\n\nBack to `needs_review`.",
    "created_at": "2016-02-02T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271407",
    "user": "@behackl"
}
```

I've changed my mind: to keep our style of programming consistent, I have implemented an `is_exact`-method for terms and replaced all `isinstance(term, ExactTerm)`-statements by `term.is_exact()`.

Back to `needs_review`.



---

archive/issue_comments_271408.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-02T12:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271408",
    "user": "@dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271409.json:
```json
{
    "body": "Seems to be fine now.",
    "created_at": "2016-02-02T12:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271409",
    "user": "@dkrenn"
}
```

Seems to be fine now.



---

archive/issue_comments_271410.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-02T23:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19744#issuecomment-271410",
    "user": "@vbraun"
}
```

Resolution: fixed
