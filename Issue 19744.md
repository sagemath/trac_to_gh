# Issue 19744: asymptotic expansions: minor improvements

Issue created by migration from https://trac.sagemath.org/ticket/19981

Original creator: behackl

Original creation time: 2016-01-28 23:18:39

CC:  cheuberg dkrenn

On this ticket several minor improvements for asymptotic expansions shall be implemented.

- `is_exact`: check whether all terms of an expansion are exact.
- `_latex_`: return a LaTeX-representation of the expansion.
- ???


---

Comment by behackl created at 2016-01-29 00:03:24

New commits:


---

Comment by behackl created at 2016-01-29 00:04:22

Note: this is on top of `7.1.beta1`.

Any more suggestions for practical improvements?


---

Comment by cheuberg created at 2016-01-29 04:26:26

Replying to [comment:2 behackl]:
> Note: this is on top of `7.1.beta1`.
> 
> Any more suggestions for practical improvements?
no; they could go into a separate ticket anyway.


---

Comment by dkrenn created at 2016-01-29 18:25:02

Replying to [comment:3 cheuberg]:
> they could go into a separate ticket anyway.

+1 for separate tickets.


---

Comment by dkrenn created at 2016-01-29 18:27:55

I had a quick look at the code:

> ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||

IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.

> ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||

`SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.


---

Comment by behackl created at 2016-01-29 19:31:07

Replying to [comment:5 dkrenn]:
> I had a quick look at the code:
> 
> > ||[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)||`implement is_exact`||
> 
> IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.

I'd even use `_has_same_summands_`, the parent is certainly the same so this is even more efficient. Will change later.

> 
> > ||[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)||`implement _latex_`||
> 
> `SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.

That was/is my original plan, and this is also the reason why I didn't set this to `needs_review`. ;-) However, I wanted to have nice (growth-ordered) latex-output quickly in order to check the output of the singularity analysis generator; and this was the simplest implementation I could think of. The code is just dumped here.

I'll also split this ticket into two.


---

Comment by behackl created at 2016-01-30 15:44:41

New commits:


---

Comment by behackl created at 2016-01-30 15:44:41

Changing status from new to needs_review.


---

Comment by dkrenn created at 2016-01-30 16:04:50

Typo: "Nothin.", but you could remove the INPUT-block completely. Otherwise looks good. Still have to wait until I have a working 7.1.beta1.

PS: Author missing


---

Comment by cheuberg created at 2016-01-30 17:34:22

Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.


---

Comment by dkrenn created at 2016-01-30 17:44:50

Replying to [comment:9 cheuberg]:
> Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.

True. Maybe something like `all(T.is_exact() for T in self.summands)`...


---

Comment by dkrenn created at 2016-01-31 09:15:27

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2016-01-31 13:27:16

Replying to [comment:10 dkrenn]:
> True. Maybe something like `all(T.is_exact() for T in self.summands)`...

That's what I meant.


---

Comment by behackl created at 2016-01-31 22:41:56

I'm not a very big fan of having a method `is_exact` for terms, where this would just return `isinstance(self, ExactTerm)`. I think that this would just add an unneccessary layer of function calls.

Are you against something like `all(isinstance(T, ExactTerm) for T in self.summands)`?


---

Comment by git created at 2016-02-02 12:01:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by behackl created at 2016-02-02 12:05:06

Changing status from needs_work to needs_review.


---

Comment by behackl created at 2016-02-02 12:05:06

I've changed my mind: to keep our style of programming consistent, I have implemented an `is_exact`-method for terms and replaced all `isinstance(term, ExactTerm)`-statements by `term.is_exact()`.

Back to `needs_review`.


---

Comment by dkrenn created at 2016-02-02 12:32:54

Changing status from needs_review to positive_review.


---

Comment by dkrenn created at 2016-02-02 12:32:54

Seems to be fine now.


---

Comment by vbraun created at 2016-02-02 23:06:35

Resolution: fixed
