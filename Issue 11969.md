# Issue 11969: Implement finite algebras

archive/issues_011969.json:
```json
{
    "body": "Assignee: @aghitza\n\nCC:  @koffie\n\nFinite algebras over fields should be implemented.  A finite algebra `A`\u00a0is simply given by means of a basis and for each basis element\u00a0`e`\u00a0a matrix that describes (right) multiplication of `A` by `e`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12141\n\n",
    "created_at": "2011-12-10T22:12:41Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Implement finite algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11969",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```
Assignee: @aghitza

CC:  @koffie

Finite algebras over fields should be implemented.  A finite algebra `A` is simply given by means of a basis and for each basis element `e` a matrix that describes (right) multiplication of `A` by `e`.

Issue created by migration from https://trac.sagemath.org/ticket/12141





---

archive/issue_comments_137477.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd35\".",
    "created_at": "2011-12-20T13:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137477",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing keywords from "" to "sd35".



---

archive/issue_comments_137478.json:
```json
{
    "body": "Attachment [12141_basic_setup.patch](tarball://root/attachments/some-uuid/ticket12141/12141_basic_setup.patch) by johanbosman created at 2011-12-20 15:50:10\n\nLots of things to do still:\n* Properly put it in a Category.\n* Implement ideals and morphisms.",
    "created_at": "2011-12-20T15:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137478",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_basic_setup.patch](tarball://root/attachments/some-uuid/ticket12141/12141_basic_setup.patch) by johanbosman created at 2011-12-20 15:50:10

Lots of things to do still:
* Properly put it in a Category.
* Implement ideals and morphisms.



---

archive/issue_comments_137479.json:
```json
{
    "body": "Attachment [12141_2_basic_setup.patch](tarball://root/attachments/some-uuid/ticket12141/12141_2_basic_setup.patch) by mkosters created at 2011-12-20 22:33:09\n\nAdded an associativity check.",
    "created_at": "2011-12-20T22:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137479",
    "user": "https://trac.sagemath.org/admin/accounts/users/mkosters"
}
```

Attachment [12141_2_basic_setup.patch](tarball://root/attachments/some-uuid/ticket12141/12141_2_basic_setup.patch) by mkosters created at 2011-12-20 22:33:09

Added an associativity check.



---

archive/issue_comments_137480.json:
```json
{
    "body": "Attachment [12141_improve_repr.patch](tarball://root/attachments/some-uuid/ticket12141/12141_improve_repr.patch) by johanbosman created at 2011-12-21 10:46:09",
    "created_at": "2011-12-21T10:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137480",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_improve_repr.patch](tarball://root/attachments/some-uuid/ticket12141/12141_improve_repr.patch) by johanbosman created at 2011-12-21 10:46:09



---

archive/issue_comments_137481.json:
```json
{
    "body": "Many new functions",
    "created_at": "2011-12-21T16:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137481",
    "user": "https://trac.sagemath.org/admin/accounts/users/mkosters"
}
```

Many new functions



---

archive/issue_comments_137482.json:
```json
{
    "body": "Attachment [12141_4.patch](tarball://root/attachments/some-uuid/ticket12141/12141_4.patch) by johanbosman created at 2011-12-21 17:20:57",
    "created_at": "2011-12-21T17:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137482",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_4.patch](tarball://root/attachments/some-uuid/ticket12141/12141_4.patch) by johanbosman created at 2011-12-21 17:20:57



---

archive/issue_comments_137483.json:
```json
{
    "body": "Attachment [12141_improve_associativity.patch](tarball://root/attachments/some-uuid/ticket12141/12141_improve_associativity.patch) by johanbosman created at 2011-12-21 17:22:12\n\nI've uploaded an improvement of the associativity check, but it does need further improvement.",
    "created_at": "2011-12-21T17:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137483",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_improve_associativity.patch](tarball://root/attachments/some-uuid/ticket12141/12141_improve_associativity.patch) by johanbosman created at 2011-12-21 17:22:12

I've uploaded an improvement of the associativity check, but it does need further improvement.



---

archive/issue_comments_137484.json:
```json
{
    "body": "Attachment [12141_fix_random_docstring.patch](tarball://root/attachments/some-uuid/ticket12141/12141_fix_random_docstring.patch) by johanbosman created at 2011-12-23 21:53:44",
    "created_at": "2011-12-23T21:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137484",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_fix_random_docstring.patch](tarball://root/attachments/some-uuid/ticket12141/12141_fix_random_docstring.patch) by johanbosman created at 2011-12-23 21:53:44



---

archive/issue_comments_137485.json:
```json
{
    "body": "Don't apply this yet; it contains bugs, but I messed up my hg.",
    "created_at": "2011-12-23T23:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137485",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Don't apply this yet; it contains bugs, but I messed up my hg.



---

archive/issue_comments_137486.json:
```json
{
    "body": "Attachment [12141_ideal_blabla.patch](tarball://root/attachments/some-uuid/ticket12141/12141_ideal_blabla.patch) by johanbosman created at 2011-12-24 00:08:09\n\nNow both ideal patches can be applied, together with #11068",
    "created_at": "2011-12-24T00:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137486",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141_ideal_blabla.patch](tarball://root/attachments/some-uuid/ticket12141/12141_ideal_blabla.patch) by johanbosman created at 2011-12-24 00:08:09

Now both ideal patches can be applied, together with #11068



---

archive/issue_comments_137487.json:
```json
{
    "body": "Basic ideal stuff has also been uploaded now.  Still to add: more doctests and support for sidedness in the non-commutative case.",
    "created_at": "2011-12-24T00:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137487",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Basic ideal stuff has also been uploaded now.  Still to add: more doctests and support for sidedness in the non-commutative case.



---

archive/issue_comments_137488.json:
```json
{
    "body": "Adds some functionality. Apply 12141,  improve_ass and fix_random...",
    "created_at": "2011-12-25T20:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137488",
    "user": "https://trac.sagemath.org/admin/accounts/users/mkosters"
}
```

Adds some functionality. Apply 12141,  improve_ass and fix_random...



---

archive/issue_comments_137489.json:
```json
{
    "body": "Attachment [12141_zero.patch](tarball://root/attachments/some-uuid/ticket12141/12141_zero.patch) by mkosters created at 2011-12-25 20:36:27\n\nIn the new patch you can check if an element is a zero divisor, do a base change and check if an element is nilpotent (it also fixes the power function if there is no one etc).\n\n`@`Johanbosman: Can you merge the files? Is my nilpotent check the easiest one?",
    "created_at": "2011-12-25T20:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137489",
    "user": "https://trac.sagemath.org/admin/accounts/users/mkosters"
}
```

Attachment [12141_zero.patch](tarball://root/attachments/some-uuid/ticket12141/12141_zero.patch) by mkosters created at 2011-12-25 20:36:27

In the new patch you can check if an element is a zero divisor, do a base change and check if an element is nilpotent (it also fixes the power function if there is no one etc).

`@`Johanbosman: Can you merge the files? Is my nilpotent check the easiest one?



---

archive/issue_comments_137490.json:
```json
{
    "body": "Contains #11068 and all its dependencies, for convenience",
    "created_at": "2011-12-26T19:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137490",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Contains #11068 and all its dependencies, for convenience



---

archive/issue_comments_137491.json:
```json
{
    "body": "Attachment [12141.2.patch](tarball://root/attachments/some-uuid/ticket12141/12141.2.patch) by johanbosman created at 2011-12-26 19:56:10\n\nReplaces all previous patches on this ticket",
    "created_at": "2011-12-26T19:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137491",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141.2.patch](tarball://root/attachments/some-uuid/ticket12141/12141.2.patch) by johanbosman created at 2011-12-26 19:56:10

Replaces all previous patches on this ticket



---

archive/issue_comments_137492.json:
```json
{
    "body": "Replying to [comment:6 mkosters]:\n> In the new patch you can check if an element is a zero divisor, do a base change and check if an element is nilpotent (it also fixes the power function if there is no one etc).\n> \n> `@`Johanbosman: Can you merge the files? Is my nilpotent check the easiest one?\n\nI've uploaded a combined patch.  A few remarks about documentation:\n\n* Please be more precise:  Is your inverse a left or right inverse?  Same question about zero divisors, etc.\n* In the first line of a docstring, put the verb in the imperative (not extremely important, but more direct and grammatically better than \"Returns blabla\" without a subject).\n* Put a blank line between the double colon and the doctests (used for html generation of documentation).",
    "created_at": "2011-12-26T19:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137492",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Replying to [comment:6 mkosters]:
> In the new patch you can check if an element is a zero divisor, do a base change and check if an element is nilpotent (it also fixes the power function if there is no one etc).
> 
> `@`Johanbosman: Can you merge the files? Is my nilpotent check the easiest one?

I've uploaded a combined patch.  A few remarks about documentation:

* Please be more precise:  Is your inverse a left or right inverse?  Same question about zero divisors, etc.
* In the first line of a docstring, put the verb in the imperative (not extremely important, but more direct and grammatically better than "Returns blabla" without a subject).
* Put a blank line between the double colon and the doctests (used for html generation of documentation).



---

archive/issue_comments_137493.json:
```json
{
    "body": "Attachment [12141.patch](tarball://root/attachments/some-uuid/ticket12141/12141.patch) by johanbosman created at 2011-12-26 20:00:08\n\nreplaces all previous patches",
    "created_at": "2011-12-26T20:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137493",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Attachment [12141.patch](tarball://root/attachments/some-uuid/ticket12141/12141.patch) by johanbosman created at 2011-12-26 20:00:08

replaces all previous patches



---

archive/issue_comments_137494.json:
```json
{
    "body": "Could you change\n\n```\nraise *Error, \"...\"\n```\nto\n\n```\nraise *Error(\"...\")\n```\nso we don't have to do it when switching to Python 3.",
    "created_at": "2011-12-28T22:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137494",
    "user": "https://github.com/a-andre"
}
```

Could you change

```
raise *Error, "..."
```
to

```
raise *Error("...")
```
so we don't have to do it when switching to Python 3.



---

archive/issue_comments_137495.json:
```json
{
    "body": "based on 5.10.rc2; revised most of the code",
    "created_at": "2013-06-20T11:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137495",
    "user": "https://github.com/pjbruin"
}
```

based on 5.10.rc2; revised most of the code



---

archive/issue_comments_137496.json:
```json
{
    "body": "Changing keywords from \"sd35\" to \"\".",
    "created_at": "2013-06-20T11:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137496",
    "user": "https://github.com/pjbruin"
}
```

Changing keywords from "sd35" to "".



---

archive/issue_comments_137497.json:
```json
{
    "body": "Attachment [trac_12141_finite_algebras.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141_finite_algebras.patch) by @pjbruin created at 2013-06-20 11:17:30\n\nTo be done: morphisms, more things related to ideals",
    "created_at": "2013-06-20T11:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137497",
    "user": "https://github.com/pjbruin"
}
```

Attachment [trac_12141_finite_algebras.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141_finite_algebras.patch) by @pjbruin created at 2013-06-20 11:17:30

To be done: morphisms, more things related to ideals



---

archive/issue_comments_137498.json:
```json
{
    "body": "Attachment [trac_12141_categorify.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141_categorify.patch) by @pjbruin created at 2013-06-21 10:00:59\n\nmorphisms, categorification, doctests",
    "created_at": "2013-06-21T10:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137498",
    "user": "https://github.com/pjbruin"
}
```

Attachment [trac_12141_categorify.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141_categorify.patch) by @pjbruin created at 2013-06-21 10:00:59

morphisms, categorification, doctests



---

archive/issue_comments_137499.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-21T10:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137499",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137500.json:
```json
{
    "body": "I added the class FiniteAlgebraMorphism and functionality for primary decomposition, mostly written by Johan Bosman.  FiniteAlgebras over a field *k* are now members of the (existing) category FiniteDimensionalAlgebrasWithBasis(*k*).  The code is fully doctest-covered.",
    "created_at": "2013-06-21T10:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137500",
    "user": "https://github.com/pjbruin"
}
```

I added the class FiniteAlgebraMorphism and functionality for primary decomposition, mostly written by Johan Bosman.  FiniteAlgebras over a field *k* are now members of the (existing) category FiniteDimensionalAlgebrasWithBasis(*k*).  The code is fully doctest-covered.



---

archive/issue_comments_137501.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-21T21:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137501",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_137502.json:
```json
{
    "body": "I haven't tested any of this yet, but in the code there seem to be a few things that could be improved:\n* Checking associativity is time-consuming.  Since most algebras we'll be applying this to are associative anyway, it may be wise to be able to set a flag indicating the algebra is associative without explicit verification.\n* Validity check for homomorphisms seems not very fast either.  Code that constructs homomorphisms, like `quotient_map`, can probably be sped up by putting `check=False` in there.\n* Does primary decomposition depend on assumptions like associativity and commutativity?  Perhaps an error should be raised if these conditions aren't met.  Also check this for other functions.",
    "created_at": "2013-06-21T21:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137502",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

I haven't tested any of this yet, but in the code there seem to be a few things that could be improved:
* Checking associativity is time-consuming.  Since most algebras we'll be applying this to are associative anyway, it may be wise to be able to set a flag indicating the algebra is associative without explicit verification.
* Validity check for homomorphisms seems not very fast either.  Code that constructs homomorphisms, like `quotient_map`, can probably be sped up by putting `check=False` in there.
* Does primary decomposition depend on assumptions like associativity and commutativity?  Perhaps an error should be raised if these conditions aren't met.  Also check this for other functions.



---

archive/issue_comments_137503.json:
```json
{
    "body": "Replying to [comment:12 johanbosman]:\n> I haven't tested any of this yet, but in the code there seem to be a few things that could be improved:\n\n\nThanks for your suggestions.  I should probably have let you look at it *before* asking for a review. :-)\n\nI thought about including some of these things, but decided that having a usable framework was the first priority.  But you are certainly right that these improvements should be made.  They shouldn't take a lot of work.",
    "created_at": "2013-06-22T11:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137503",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:12 johanbosman]:
> I haven't tested any of this yet, but in the code there seem to be a few things that could be improved:


Thanks for your suggestions.  I should probably have let you look at it *before* asking for a review. :-)

I thought about including some of these things, but decided that having a usable framework was the first priority.  But you are certainly right that these improvements should be made.  They shouldn't take a lot of work.



---

archive/issue_comments_137504.json:
```json
{
    "body": "based on 5.11.beta3",
    "created_at": "2013-06-29T22:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137504",
    "user": "https://github.com/pjbruin"
}
```

based on 5.11.beta3



---

archive/issue_comments_137505.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-29T22:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137505",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137506.json:
```json
{
    "body": "Attachment [trac_12141-FiniteAlgebra.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141-FiniteAlgebra.patch) by @pjbruin created at 2013-06-29 22:16:32\n\nThe above things should be fixed now.  Everything is in [attachment:trac_12141-FiniteAlgebra.patch].",
    "created_at": "2013-06-29T22:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137506",
    "user": "https://github.com/pjbruin"
}
```

Attachment [trac_12141-FiniteAlgebra.patch](tarball://root/attachments/some-uuid/ticket12141/trac_12141-FiniteAlgebra.patch) by @pjbruin created at 2013-06-29 22:16:32

The above things should be fixed now.  Everything is in [attachment:trac_12141-FiniteAlgebra.patch].



---

archive/issue_comments_137507.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd51\".",
    "created_at": "2013-07-02T18:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137507",
    "user": "https://github.com/koffie"
}
```

Changing keywords from "" to "sd51".



---

archive/issue_comments_137508.json:
```json
{
    "body": "For patchbot:\n\nApply trac_12141-FiniteAlgebra.patch",
    "created_at": "2013-07-15T21:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137508",
    "user": "https://github.com/pjbruin"
}
```

For patchbot:

Apply trac_12141-FiniteAlgebra.patch



---

archive/issue_comments_137509.json:
```json
{
    "body": "```\nApply trac_12141-FiniteAlgebra.patch \n```",
    "created_at": "2013-07-17T07:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137509",
    "user": "https://github.com/pjbruin"
}
```

```
Apply trac_12141-FiniteAlgebra.patch 
```



---

archive/issue_events_032278.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11969#event-32278"
}
```



---

archive/issue_comments_137510.json:
```json
{
    "body": "No actual changes, just converted the patch to a Git branch.",
    "created_at": "2014-01-17T22:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137510",
    "user": "https://github.com/pjbruin"
}
```

No actual changes, just converted the patch to a Git branch.



---

archive/issue_events_032279.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11969#event-32279"
}
```



---

archive/issue_events_032280.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11969#event-32280"
}
```



---

archive/issue_comments_137511.json:
```json
{
    "body": "Okay, I've done a review and it looks good overall. However when running some of the test suites, I realized that the morphisms weren't setup like the others in Sage, so I've reworked them in my review. It's not perfect, but IMO morphisms in general need some work. Other than that, it's some documentation and minor code tweaks. If you're happy with my changes, then it's a positive review.\n\n---\nNew commits:",
    "created_at": "2014-02-03T20:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137511",
    "user": "https://github.com/tscrim"
}
```

Okay, I've done a review and it looks good overall. However when running some of the test suites, I realized that the morphisms weren't setup like the others in Sage, so I've reworked them in my review. It's not perfect, but IMO morphisms in general need some work. Other than that, it's some documentation and minor code tweaks. If you're happy with my changes, then it's a positive review.

---
New commits:



---

archive/issue_comments_137512.json:
```json
{
    "body": "I think that the phrase \"finite algebra\" is possibly ambiguous. For example, there is a book *Structure of Finite Algebras* by Hobby and McKenzie in which a finite algebra is actually finite as a set. Maybe \"finite-dimensional algebra\" would be better in your situation.",
    "created_at": "2014-02-03T22:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137512",
    "user": "https://github.com/jhpalmieri"
}
```

I think that the phrase "finite algebra" is possibly ambiguous. For example, there is a book *Structure of Finite Algebras* by Hobby and McKenzie in which a finite algebra is actually finite as a set. Maybe "finite-dimensional algebra" would be better in your situation.



---

archive/issue_comments_137513.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-04T01:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_137514.json:
```json
{
    "body": "Good point. Done.",
    "created_at": "2014-02-04T01:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137514",
    "user": "https://github.com/tscrim"
}
```

Good point. Done.



---

archive/issue_comments_137515.json:
```json
{
    "body": "Hi Travis,\n> Okay, I've done a review and it looks good overall. However when running some of the test suites, I realized that the morphisms weren't setup like the others in Sage, so I've reworked them in my review. It's not perfect, but IMO morphisms in general need some work. Other than that, it's some documentation and minor code tweaks. If you're happy with my changes, then it's a positive review.\n\nThanks for looking at this.  To me, changing \"finite\" to \"finite-dimensional\" is OK; in commutative algebra and algebraic geometry it is very common to say \"finite *A*-algebra\" for an algebra that is finitely generated as an *A*-module, but in a general setting like Sage, it is possibly ambiguous.  Since the base ring is (at least currently) always a field, \"finite-dimensional\" is an acceptable way of clarifying this.\n\nI haven't had the time to review your changes in detail, but here are a few things I noticed:\n- you changed \"EXAMPLE::\" to \"EXAMPLES::\" in many places where there is only one example; do you have a reason for this?\n- I think it should be \"finite-dimensional algebra\", not \"finite dimensional algebra\", since \"finite-dimensional\" is used as a single adjective.\n- Are you sure that the inverse of an element should be cached?  This looks like it could waste a lot of memory.  My impression is that in general only properties of parents should be cached.  If any inverse should be cached at all, why not just that of the underlying matrix?",
    "created_at": "2014-02-10T14:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137515",
    "user": "https://github.com/pjbruin"
}
```

Hi Travis,
> Okay, I've done a review and it looks good overall. However when running some of the test suites, I realized that the morphisms weren't setup like the others in Sage, so I've reworked them in my review. It's not perfect, but IMO morphisms in general need some work. Other than that, it's some documentation and minor code tweaks. If you're happy with my changes, then it's a positive review.

Thanks for looking at this.  To me, changing "finite" to "finite-dimensional" is OK; in commutative algebra and algebraic geometry it is very common to say "finite *A*-algebra" for an algebra that is finitely generated as an *A*-module, but in a general setting like Sage, it is possibly ambiguous.  Since the base ring is (at least currently) always a field, "finite-dimensional" is an acceptable way of clarifying this.

I haven't had the time to review your changes in detail, but here are a few things I noticed:
- you changed "EXAMPLE::" to "EXAMPLES::" in many places where there is only one example; do you have a reason for this?
- I think it should be "finite-dimensional algebra", not "finite dimensional algebra", since "finite-dimensional" is used as a single adjective.
- Are you sure that the inverse of an element should be cached?  This looks like it could waste a lot of memory.  My impression is that in general only properties of parents should be cached.  If any inverse should be cached at all, why not just that of the underlying matrix?



---

archive/issue_comments_137516.json:
```json
{
    "body": "Hey Peter,\n\nReplying to [comment:25 pbruin]:\n> I haven't had the time to review your changes in detail, but here are a few things I noticed:\n> - you changed \"EXAMPLE::\" to \"EXAMPLES::\" in many places where there is only one example; do you have a reason for this?\n\n\nAs I understand it, `EXAMPLES::` (and `TESTS::`) is the standard idiom, not the singular version even if there is only one such example. Although I seem to have missed some that I should also change to be consistent, unless you feel that I should change them back (I don't hold a strong opinion on this).\n\n> - I think it should be \"finite-dimensional algebra\", not \"finite dimensional algebra\", since \"finite-dimensional\" is used as a single adjective.\n\n\nWill change.\n\n> - Are you sure that the inverse of an element should be cached?  This looks like it could waste a lot of memory.  My impression is that in general only properties of parents should be cached.  If any inverse should be cached at all, why not just that of the underlying matrix?\n\n\nIt depends. Things that are very memory/computationally intensive to compute but not to store are candidates for a cache, especially when it's likely to be a bottleneck.\n\nAlso it's not using much more memory by caching the element as opposed to the matrix (nor does it generate a memory leak). So let's say `x^-1 = y`, then `x` has `y` stored in its cache. So once you delete `x`, you also delete the cache containing `y`. Perhaps what we should do is have a ``@`lazy_attribute` called `_inverse` which will point to `y`, and then if we construct `x^-1`, we can set `y._inverse = x`.\n\nThe other option if you're worried about memory usage is to make it a ``@`weak_cached_function`, which allows it to be garbage collected if there is no strong reference to `x^-1` and memory is needed elsewhere.",
    "created_at": "2014-02-10T16:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137516",
    "user": "https://github.com/tscrim"
}
```

Hey Peter,

Replying to [comment:25 pbruin]:
> I haven't had the time to review your changes in detail, but here are a few things I noticed:
> - you changed "EXAMPLE::" to "EXAMPLES::" in many places where there is only one example; do you have a reason for this?


As I understand it, `EXAMPLES::` (and `TESTS::`) is the standard idiom, not the singular version even if there is only one such example. Although I seem to have missed some that I should also change to be consistent, unless you feel that I should change them back (I don't hold a strong opinion on this).

> - I think it should be "finite-dimensional algebra", not "finite dimensional algebra", since "finite-dimensional" is used as a single adjective.


Will change.

> - Are you sure that the inverse of an element should be cached?  This looks like it could waste a lot of memory.  My impression is that in general only properties of parents should be cached.  If any inverse should be cached at all, why not just that of the underlying matrix?


It depends. Things that are very memory/computationally intensive to compute but not to store are candidates for a cache, especially when it's likely to be a bottleneck.

Also it's not using much more memory by caching the element as opposed to the matrix (nor does it generate a memory leak). So let's say `x^-1 = y`, then `x` has `y` stored in its cache. So once you delete `x`, you also delete the cache containing `y`. Perhaps what we should do is have a ``@`lazy_attribute` called `_inverse` which will point to `y`, and then if we construct `x^-1`, we can set `y._inverse = x`.

The other option if you're worried about memory usage is to make it a ``@`weak_cached_function`, which allows it to be garbage collected if there is no strong reference to `x^-1` and memory is needed elsewhere.



---

archive/issue_comments_137517.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-10T18:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_137518.json:
```json
{
    "body": "I've changed the inverses to use the ``@`lazy_attribute` and so `y._inverse` is automatically set when calling `x._inverse`. Everything is now `EXAMPLES::` and \"finite-dimensional\".",
    "created_at": "2014-02-10T18:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137518",
    "user": "https://github.com/tscrim"
}
```

I've changed the inverses to use the ``@`lazy_attribute` and so `y._inverse` is automatically set when calling `x._inverse`. Everything is now `EXAMPLES::` and "finite-dimensional".



---

archive/issue_comments_137519.json:
```json
{
    "body": "Replying to [comment:28 tscrim]:\n> I've changed the inverses to use the ``@`lazy_attribute` and so `y._inverse` is automatically set when calling `x._inverse`. Everything is now `EXAMPLES::` and \"finite-dimensional\".\n\nActually I had forgotten that the inverse was already cached in the first place thanks to `_inverse`...  Anyway, I do like your idea of using ``@`lazy_attribute` for this.\n\nAs for `EXAMPLE[S]` and `TEST[S]`, it is true that the documentation only mentions the plural and this is used predominantly in the Sage library, but I don't see any reason for preferring the plural regardless of the actual number of examples/tests.  I don't feel too strongly about it either, but in general I wouldn't recommend to a reviewer to make such changes when it comes to matters of taste.  (Although this only applies here if `EXAMPLE[S]` is indeed a matter of taste.)\n\nI will try to do a final check soon, unless someone else does it first.",
    "created_at": "2014-02-10T19:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137519",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:28 tscrim]:
> I've changed the inverses to use the ``@`lazy_attribute` and so `y._inverse` is automatically set when calling `x._inverse`. Everything is now `EXAMPLES::` and "finite-dimensional".

Actually I had forgotten that the inverse was already cached in the first place thanks to `_inverse`...  Anyway, I do like your idea of using ``@`lazy_attribute` for this.

As for `EXAMPLE[S]` and `TEST[S]`, it is true that the documentation only mentions the plural and this is used predominantly in the Sage library, but I don't see any reason for preferring the plural regardless of the actual number of examples/tests.  I don't feel too strongly about it either, but in general I wouldn't recommend to a reviewer to make such changes when it comes to matters of taste.  (Although this only applies here if `EXAMPLE[S]` is indeed a matter of taste.)

I will try to do a final check soon, unless someone else does it first.



---

archive/issue_comments_137520.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-11T21:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_137521.json:
```json
{
    "body": "OK, I'm happy with the state of this ticket.  All test pass; I also ran some existing external code that uses this ticket and it still works fine after the various changes that were made here.",
    "created_at": "2014-02-22T13:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137521",
    "user": "https://github.com/pjbruin"
}
```

OK, I'm happy with the state of this ticket.  All test pass; I also ran some existing external code that uses this ticket and it still works fine after the various changes that were made here.



---

archive/issue_comments_137522.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-22T13:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137522",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_032281.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-01T08:48:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11969#event-32281"
}
```



---

archive/issue_comments_137523.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-01T08:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11969#issuecomment-137523",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
