# Issue 16299: Python 3 preparation: cmp parameter of sorted() function and L.sort() method are gone

archive/issues_016299.json:
```json
{
    "body": "CC:  tscrim embray jdemeyer\n\nKeywords: python3\n\nIn Py2 the standard function [sorted()](https://docs.python.org/2/library/functions.html#sorted) and the mutable list method [sort()](https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types) both have an optional parameter `cmp=` that takes a custom comparison function of two arguments.\n\nThe parameter is no more available in Py3. \n\nThe recommended way is to use the `key=` which specifies a function of one argument that is used to extract a comparison key from each list element. This has also better performance.\n\nWhile there is a function [functools.cmp_to_key()](https://docs.python.org/2/library/functools.html#functools.cmp_to_key) to convert an old-style cmp function to a key function, it is preferable to directly use an appropriate key function.\n\nThis ticket is tracked as a dependency of meta-ticket ticket:15980.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16536\n\n",
    "created_at": "2014-06-25T13:17:43Z",
    "labels": [
        "distribution",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Python 3 preparation: cmp parameter of sorted() function and L.sort() method are gone",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16299",
    "user": "wluebbe"
}
```
CC:  tscrim embray jdemeyer

Keywords: python3

In Py2 the standard function [sorted()](https://docs.python.org/2/library/functions.html#sorted) and the mutable list method [sort()](https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types) both have an optional parameter `cmp=` that takes a custom comparison function of two arguments.

The parameter is no more available in Py3. 

The recommended way is to use the `key=` which specifies a function of one argument that is used to extract a comparison key from each list element. This has also better performance.

While there is a function [functools.cmp_to_key()](https://docs.python.org/2/library/functools.html#functools.cmp_to_key) to convert an old-style cmp function to a key function, it is preferable to directly use an appropriate key function.

This ticket is tracked as a dependency of meta-ticket ticket:15980.

Issue created by migration from https://trac.sagemath.org/ticket/16536





---

archive/issue_comments_213382.json:
```json
{
    "body": "Demonstrate behavior of cmp= and key= in Py2 and Py3",
    "created_at": "2014-06-27T14:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213382",
    "user": "wluebbe"
}
```

Demonstrate behavior of cmp= and key= in Py2 and Py3



---

archive/issue_comments_213383.json:
```json
{
    "body": "Attachment\n\nThe workings of `functools.cmp_to_key` is nicely explained in [stackoverflow](http://stackoverflow.com/questions/16362744/how-does-pythons-cmp-to-key-function-work).\n\nThis is also demonstrated in the attached script.\n\nIt is also shown that it is not a good idea the use \"cmp=\" and \"key=\" together even in Py2!",
    "created_at": "2014-06-27T14:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213383",
    "user": "wluebbe"
}
```

Attachment

The workings of `functools.cmp_to_key` is nicely explained in [stackoverflow](http://stackoverflow.com/questions/16362744/how-does-pythons-cmp-to-key-function-work).

This is also demonstrated in the attached script.

It is also shown that it is not a good idea the use "cmp=" and "key=" together even in Py2!



---

archive/issue_comments_213384.json:
```json
{
    "body": "Changing component from distribution to python3.",
    "created_at": "2016-05-02T13:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213384",
    "user": "jdemeyer"
}
```

Changing component from distribution to python3.



---

archive/issue_comments_213385.json:
```json
{
    "body": "see #21035 for a step in that direction",
    "created_at": "2016-07-17T12:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213385",
    "user": "chapoton"
}
```

see #21035 for a step in that direction



---

archive/issue_comments_213386.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-09-23T06:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213386",
    "user": "chapoton"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_213387.json:
```json
{
    "body": "This is now mostly done. In some places, cmp was only deprecated.",
    "created_at": "2016-11-12T17:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213387",
    "user": "chapoton"
}
```

This is now mostly done. In some places, cmp was only deprecated.



---

archive/issue_comments_213388.json:
```json
{
    "body": "another step in #23698",
    "created_at": "2017-08-24T13:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213388",
    "user": "chapoton"
}
```

another step in #23698



---

archive/issue_comments_213389.json:
```json
{
    "body": "One should soon take care of removing what was deprecated in #21766.\n\nSee #24409 for that",
    "created_at": "2017-11-16T19:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213389",
    "user": "chapoton"
}
```

One should soon take care of removing what was deprecated in #21766.

See #24409 for that



---

archive/issue_comments_213390.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-04T10:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213390",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213391.json:
```json
{
    "body": "Maybe we could now close this one ?",
    "created_at": "2018-01-04T10:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213391",
    "user": "chapoton"
}
```

Maybe we could now close this one ?



---

archive/issue_comments_213392.json:
```json
{
    "body": "ping ? any objection to close as invalid ?",
    "created_at": "2018-01-10T13:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213392",
    "user": "chapoton"
}
```

ping ? any objection to close as invalid ?



---

archive/issue_comments_213393.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2018-01-10T13:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16299",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16299#issuecomment-213393",
    "user": "embray"
}
```

Resolution: wontfix
