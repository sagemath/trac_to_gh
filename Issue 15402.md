# Issue 15402: Random failure in integer_vector

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-01-07 02:39:50

CC:  f.poloni ncohen wdj

Got this once on skynet/eno:

```
sage -t --long src/sage/combinat/integer_vector.py
**********************************************************************
File "src/sage/combinat/integer_vector.py", line 347, in sage.combinat.integer_vector._slider01.range.gale_ryser_theorem
Failed example:
    for algorithm in ["gale", "ryser"]:                            # long time
         for i in range(50):                                         # long time
            if not test_algorithm(algorithm, 3, 10):                 # long time
                print "Something wrong with algorithm ", algorithm   # long time
                break                                                # long time
Expected nothing
Got:
    Something wrong with algorithm  ryser
```

Likely due to #15609.

Common Python pitfalls are that the sort order of sets / dict entries can be dependent on memory locations.


---

Comment by f.poloni created at 2014-01-07 13:25:09

I don't think that the two bugs are related. #15609 only adds a function `IntegerVectors_nk.rank()` which is never called by the test that fails (I checked by adding a `print` in it and seeing if it appears in the output --- not the most elegant way, but it works).

I might be biased as I am the author of the patch that closed #15609, but my guess is that the bug was present before. It is difficult to tell because the test that fails is randomized and so it generates different matrices every time it is run.


---

Comment by ncohen created at 2014-01-07 13:26:52

I would also find it weird that the two tickets may be related `^^;`

Nathann


---

Comment by f.poloni created at 2014-06-15 08:52:21

I have changed the output of the test so that when it fails again we get the (random) input values that caused failure. In this way, when it fails again it will be much easier to debug.

This does not fix the issue, there must still be a bug in the `ryser` algorithm, but I think that we can close the bug nevertheless until a new test failure report comes.


---

Comment by f.poloni created at 2014-06-15 08:52:21

Changing status from new to needs_review.


---

Comment by git created at 2014-06-15 09:03:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-06-15 12:20:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-06-15 12:20:56

lgtm


---

Comment by vbraun created at 2014-06-18 12:00:29

Resolution: fixed
