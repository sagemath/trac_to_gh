# Issue 21089: Prevent creation of code with length 0

archive/issues_021089.json:
```json
{
    "body": "CC:  dlucas @jlavauzelle erousseau\n\nKeywords: sd75\n\nWe are going to modify `AbstractLinearCode` constructor to prevent creation of code with length 0.\nSame with `PuncturedCode` method.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21326\n\n",
    "created_at": "2016-08-24T14:38:02Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Prevent creation of code with length 0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21089",
    "user": "https://trac.sagemath.org/admin/accounts/users/fdosso48"
}
```
CC:  dlucas @jlavauzelle erousseau

Keywords: sd75

We are going to modify `AbstractLinearCode` constructor to prevent creation of code with length 0.
Same with `PuncturedCode` method.

Issue created by migration from https://trac.sagemath.org/ticket/21326





---

archive/issue_comments_291871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T21:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291872.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-24T21:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291872",
    "user": "https://trac.sagemath.org/admin/accounts/users/fdosso48"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_291873.json:
```json
{
    "body": "Hi,\n\nI just changed the indentation in the file, that didn't fit with Sage conventions. I think it's fine but it needs review.\n\nBest, \u00c9douard\n----\nNew commits:",
    "created_at": "2016-08-25T11:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291873",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

Hi,

I just changed the indentation in the file, that didn't fit with Sage conventions. I think it's fine but it needs review.

Best, Édouard
----
New commits:



---

archive/issue_comments_291874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-25T12:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_291875.json:
```json
{
    "body": "Sorry, I did an error, I just fixed my error, not the original fix I did, you can see the diff in 25c0758 just above, just ignore the rest of it...\n\nBest, \u00c9douard",
    "created_at": "2016-08-25T12:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291875",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

Sorry, I did an error, I just fixed my error, not the original fix I did, you can see the diff in 25c0758 just above, just ignore the rest of it...

Best, Édouard



---

archive/issue_comments_291876.json:
```json
{
    "body": "Hello \u00c9douard,\n\nAs you just fixed an error related to the indentation level, \nI think it's fine if you complete the review process yourself.\nIt's not a fundamental change, so it's fine `:)`\n\nDavid",
    "created_at": "2016-08-25T12:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291876",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello Édouard,

As you just fixed an error related to the indentation level, 
I think it's fine if you complete the review process yourself.
It's not a fundamental change, so it's fine `:)`

David



---

archive/issue_comments_291877.json:
```json
{
    "body": "Hi Fangan,\n\nIt might be good to add a doctest that explains that the length 0 is not available anymore, and to mention this ticket !\n\nBest, \u00c9douard",
    "created_at": "2016-08-26T07:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291877",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

Hi Fangan,

It might be good to add a doctest that explains that the length 0 is not available anymore, and to mention this ticket !

Best, Édouard



---

archive/issue_comments_291878.json:
```json
{
    "body": "Hi,\n\nI agree, it is a good idea.\n\nBest, hoping you are doing it :)",
    "created_at": "2016-08-26T08:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291878",
    "user": "https://trac.sagemath.org/admin/accounts/users/fdosso48"
}
```

Hi,

I agree, it is a good idea.

Best, hoping you are doing it :)



---

archive/issue_comments_291879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291880.json:
```json
{
    "body": "I added a doctest, just as I suggested above. It's open for review.\n\nBest,\n\u00c9douard",
    "created_at": "2016-08-26T12:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291880",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

I added a doctest, just as I suggested above. It's open for review.

Best,
Édouard



---

archive/issue_comments_291881.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T13:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291882.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-26T19:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291882",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_291883.json:
```json
{
    "body": "Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!",
    "created_at": "2016-08-26T19:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291883",
    "user": "https://github.com/bgrenet"
}
```

Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!



---

archive/issue_comments_291884.json:
```json
{
    "body": "Replying to [comment:16 bruno]:\n> Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!\n\nYou are totally right, should I just remove those doctests then ?",
    "created_at": "2016-08-26T20:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291884",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

Replying to [comment:16 bruno]:
> Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!

You are totally right, should I just remove those doctests then ?



---

archive/issue_comments_291885.json:
```json
{
    "body": "Replying to [comment:17 erousseau]:\n> Replying to [comment:16 bruno]:\n> > Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!\n> \n> You are totally right, should I just remove those doctests then ?\n\nThat may be the right thing to do yes. You may replace the whole block of doctests by something like\n\n```python\nNote that since ticket :trac:`21326`, codes cannot be of length zero::\n\n    sage: G = Matrix(GF(17),[])\n    sage: C = LinearCode(G)\n    Traceback (most recent call last):\n    ...\n    ValueError: length must be a non-zero positive integer\n```\n\n\nMy only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.",
    "created_at": "2016-08-26T20:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291885",
    "user": "https://github.com/bgrenet"
}
```

Replying to [comment:17 erousseau]:
> Replying to [comment:16 bruno]:
> > Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!
> 
> You are totally right, should I just remove those doctests then ?

That may be the right thing to do yes. You may replace the whole block of doctests by something like

```python
Note that since ticket :trac:`21326`, codes cannot be of length zero::

    sage: G = Matrix(GF(17),[])
    sage: C = LinearCode(G)
    Traceback (most recent call last):
    ...
    ValueError: length must be a non-zero positive integer
```


My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.



---

archive/issue_comments_291886.json:
```json
{
    "body": "> My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.\n\nActually, I asked David and Johan before doing this method.\nSo, it's ok, the block of doctests can be replaced by what you propose.",
    "created_at": "2016-08-26T21:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291886",
    "user": "https://trac.sagemath.org/admin/accounts/users/fdosso48"
}
```

> My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.

Actually, I asked David and Johan before doing this method.
So, it's ok, the block of doctests can be replaced by what you propose.



---

archive/issue_comments_291887.json:
```json
{
    "body": "Replying to [comment:19 fdosso48]:\n>  \n> > My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.\n> \n> Actually, I asked David and Johan before doing this method.\n> So, it's ok, the block of doctests can be replaced by what you propose.\n\nOK, I let you doing so. I guess I'll be able to positively review the ticket once this is done.",
    "created_at": "2016-08-26T21:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291887",
    "user": "https://github.com/bgrenet"
}
```

Replying to [comment:19 fdosso48]:
>  
> > My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.
> 
> Actually, I asked David and Johan before doing this method.
> So, it's ok, the block of doctests can be replaced by what you propose.

OK, I let you doing so. I guess I'll be able to positively review the ticket once this is done.



---

archive/issue_comments_291888.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T21:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_291889.json:
```json
{
    "body": "I changed the doctest by the one suggested by Bruno.\n\n\u00c9douard",
    "created_at": "2016-08-26T21:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291889",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

I changed the doctest by the one suggested by Bruno.

Édouard



---

archive/issue_comments_291890.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-26T21:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291890",
    "user": "https://trac.sagemath.org/admin/accounts/users/erousseau"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_291891.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-27T10:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291891",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_291892.json:
```json
{
    "body": "Everything's OK, documentation successfully builds. I add a commit to remove some trailing spaces in the two modified files. \n----\nNew commits:",
    "created_at": "2016-08-27T10:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291892",
    "user": "https://github.com/bgrenet"
}
```

Everything's OK, documentation successfully builds. I add a commit to remove some trailing spaces in the two modified files. 
----
New commits:



---

archive/issue_comments_291893.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-29T16:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21089#issuecomment-291893",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_019981.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2016-08-29T16:56:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21089",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21089#event-19981"
}
```
