# Issue 21089: Prevent creation of code with length 0

Issue created by migration from Trac.

Original creator: fdosso48

Original creation time: 2016-08-24 14:38:02

CC:  dlucas jlavauzelle erousseau

Keywords: sd75

We are going to modify `AbstractLinearCode` constructor to prevent creation of code with length 0.
Same with `PuncturedCode` method.


---

Comment by git created at 2016-08-24 21:38:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fdosso48 created at 2016-08-24 21:44:32

Changing status from new to needs_review.


---

Comment by erousseau created at 2016-08-25 11:53:10

Hi,

I just changed the indentation in the file, that didn't fit with Sage conventions. I think it's fine but it needs review.

Best, Édouard
----
New commits:


---

Comment by git created at 2016-08-25 12:15:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by erousseau created at 2016-08-25 12:18:33

Sorry, I did an error, I just fixed my error, not the original fix I did, you can see the diff in 25c0758 just above, just ignore the rest of it...

Best, Édouard


---

Comment by dlucas created at 2016-08-25 12:43:28

Hello Édouard,

As you just fixed an error related to the indentation level, 
I think it's fine if you complete the review process yourself.
It's not a fundamental change, so it's fine `:)`

David


---

Comment by erousseau created at 2016-08-26 07:54:09

Hi Fangan,

It might be good to add a doctest that explains that the length 0 is not available anymore, and to mention this ticket !

Best, Édouard


---

Comment by fdosso48 created at 2016-08-26 08:00:00

Hi,

I agree, it is a good idea.

Best, hoping you are doing it :)


---

Comment by git created at 2016-08-26 11:58:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by erousseau created at 2016-08-26 12:00:16

I added a doctest, just as I suggested above. It's open for review.

Best,
Édouard


---

Comment by git created at 2016-08-26 13:11:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bruno created at 2016-08-26 19:57:20

Changing status from needs_review to needs_work.


---

Comment by bruno created at 2016-08-26 19:57:20

Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!


---

Comment by erousseau created at 2016-08-26 20:08:25

Replying to [comment:16 bruno]:
> Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!

You are totally right, should I just remove those doctests then ?


---

Comment by bruno created at 2016-08-26 20:51:06

Replying to [comment:17 erousseau]:
> Replying to [comment:16 bruno]:
> > Two doctests are broken in `src/sage/coding/encoder.py` (lines 204 & 207). Actually, these doctests are specifically for the behavior of encoders with length equal to 0!
> 
> You are totally right, should I just remove those doctests then ?

That may be the right thing to do yes. You may replace the whole block of doctests by something like

```python
Note that since ticket :trac:`21326`, codes cannot be of length zero::

    sage: G = Matrix(GF(17),[])
    sage: C = LinearCode(G)
    Traceback (most recent call last):
    ...
    ValueError: length must be a non-zero positive integer
```


My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.


---

Comment by fdosso48 created at 2016-08-26 21:02:29

> My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.

Actually, I asked David and Johan before doing this method.
So, it's ok, the block of doctests can be replaced by what you propose.


---

Comment by bruno created at 2016-08-26 21:23:19

Replying to [comment:19 fdosso48]:
>  
> > My only hesitation is whether the presence of these doctests in `src/sage/coding/encoder.py` are a indication that codes of length zero may be useful to have. I really have no idea what this should be, but you may asked David or Johan just to be sure.
> 
> Actually, I asked David and Johan before doing this method.
> So, it's ok, the block of doctests can be replaced by what you propose.

OK, I let you doing so. I guess I'll be able to positively review the ticket once this is done.


---

Comment by git created at 2016-08-26 21:50:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by erousseau created at 2016-08-26 21:52:56

I changed the doctest by the one suggested by Bruno.

Édouard


---

Comment by erousseau created at 2016-08-26 21:53:53

Changing status from needs_work to needs_review.


---

Comment by bruno created at 2016-08-27 10:16:27

Changing status from needs_review to positive_review.


---

Comment by bruno created at 2016-08-27 10:16:27

Everything's OK, documentation successfully builds. I add a commit to remove some trailing spaces in the two modified files. 
----
New commits:


---

Comment by vbraun created at 2016-08-29 16:56:16

Resolution: fixed
