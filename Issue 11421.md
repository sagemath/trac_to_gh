# Issue 11421: `quo_rem` for divisor of leading unit coefficient

archive/issues_011421.json:
```json
{
    "body": "Assignee: @aghitza\n\n`quo_rem` does not work for divisors of unit leading coefficients, though the quotient and the remainder are defined mathematically. \n\n```\nsage: R.<y> = QQ[x][]\nsage: f = R.random_element(200)\nsage: g = y^100+R.random_element(99)\nsage: q, r = f.quo_rem(g)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n...\nAttributeError: 'sage.rings.polynomial.polynomial_element.Polynomial_generic_dense' object has no attribute 'quo_rem'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11593\n\n",
    "created_at": "2011-07-13T09:14:08Z",
    "labels": [
        "component: basic arithmetic",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "`quo_rem` for divisor of leading unit coefficient",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11421",
    "user": "https://github.com/kwankyu"
}
```
Assignee: @aghitza

`quo_rem` does not work for divisors of unit leading coefficients, though the quotient and the remainder are defined mathematically. 

```
sage: R.<y> = QQ[x][]
sage: f = R.random_element(200)
sage: g = y^100+R.random_element(99)
sage: q, r = f.quo_rem(g)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'sage.rings.polynomial.polynomial_element.Polynomial_generic_dense' object has no attribute 'quo_rem'
```


Issue created by migration from https://trac.sagemath.org/ticket/11593





---

archive/issue_events_030405.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2011-07-13T09:21:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30405"
}
```



---

archive/issue_comments_127039.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-13T09:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127039",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127040.json:
```json
{
    "body": "The patch allows one to compute the quotient and the remainder for divisors of unit leading coefficient. The `quo_rem` added to `Polynomial_generic_dense` is slightly faster than `quo_rem` defined in `Polynomial_generic_field`.",
    "created_at": "2011-07-13T09:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127040",
    "user": "https://github.com/kwankyu"
}
```

The patch allows one to compute the quotient and the remainder for divisors of unit leading coefficient. The `quo_rem` added to `Polynomial_generic_dense` is slightly faster than `quo_rem` defined in `Polynomial_generic_field`.



---

archive/issue_comments_127041.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-12-16T20:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127041",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_127042.json:
```json
{
    "body": "In the  case where self is 0 should it not be self, other returned?  Not self, self?",
    "created_at": "2011-12-16T20:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127042",
    "user": "https://github.com/JohnCremona"
}
```

In the  case where self is 0 should it not be self, other returned?  Not self, self?



---

archive/issue_comments_127043.json:
```json
{
    "body": "The quotient and the remainder of 0(=self) divided by other is 0 and 0. So self, self is correct.\n\nBy the way, I did not care for this patch for a while. It needs to be rebased for the current Sage beta. I can't do it right away. I would appreciate if you do it.",
    "created_at": "2011-12-18T02:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127043",
    "user": "https://github.com/kwankyu"
}
```

The quotient and the remainder of 0(=self) divided by other is 0 and 0. So self, self is correct.

By the way, I did not care for this patch for a while. It needs to be rebased for the current Sage beta. I can't do it right away. I would appreciate if you do it.



---

archive/issue_comments_127044.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-12-18T09:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127044",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_127045.json:
```json
{
    "body": "Replying to [comment:5 klee]:\n> The quotient and the remainder of 0(=self) divided by other is 0 and 0. So self, self is correct.\n\n\nOK, I was being stupid.\n\n> \n> By the way, I did not care for this patch for a while. It needs to be rebased for the current Sage beta. I can't do it right away. I would appreciate if you do it.   \n\n\nWell, I have many other things to do -- especially as at present I am running Sage Days 35.",
    "created_at": "2011-12-18T09:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127045",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:5 klee]:
> The quotient and the remainder of 0(=self) divided by other is 0 and 0. So self, self is correct.


OK, I was being stupid.

> 
> By the way, I did not care for this patch for a while. It needs to be rebased for the current Sage beta. I can't do it right away. I would appreciate if you do it.   


Well, I have many other things to do -- especially as at present I am running Sage Days 35.



---

archive/issue_comments_127046.json:
```json
{
    "body": "Replying to [comment:6 cremona]:\n  \n> Well, I have many other things to do -- especially as at present I am running Sage Days 35.\n\n\nSorry for the suggestion. You are now the busiest man in the Sage community. :-) Good wish for Sage Days 35.",
    "created_at": "2011-12-18T11:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127046",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:6 cremona]:
  
> Well, I have many other things to do -- especially as at present I am running Sage Days 35.


Sorry for the suggestion. You are now the busiest man in the Sage community. :-) Good wish for Sage Days 35.



---

archive/issue_comments_127047.json:
```json
{
    "body": "I see no doctest failures on my own Ubuntu 11.10 and Mac. I don't know what to do with the patchbot results.",
    "created_at": "2012-01-14T01:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127047",
    "user": "https://github.com/kwankyu"
}
```

I see no doctest failures on my own Ubuntu 11.10 and Mac. I don't know what to do with the patchbot results.



---

archive/issue_comments_127048.json:
```json
{
    "body": "Removing spaces does not help. :-(",
    "created_at": "2012-01-20T01:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127048",
    "user": "https://github.com/kwankyu"
}
```

Removing spaces does not help. :-(



---

archive/issue_comments_127049.json:
```json
{
    "body": "Looking forward to Python3,\nuse the \"new\" syntax to raise errors, i.e.\n\n```\nraise ZeroDivisionError(\"division by zero polynomial\")\n```",
    "created_at": "2012-02-09T21:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127049",
    "user": "https://github.com/a-andre"
}
```

Looking forward to Python3,
use the "new" syntax to raise errors, i.e.

```
raise ZeroDivisionError("division by zero polynomial")
```



---

archive/issue_comments_127050.json:
```json
{
    "body": "Replying to [comment:10 aapitzsch]:\n> Looking forward to Python3,\n> use the \"new\" syntax to raise errors, i.e.\n> \n> ```\n> raise ZeroDivisionError(\"division by zero polynomial\")\n> ```\n\n\nDone.",
    "created_at": "2012-02-13T00:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127050",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:10 aapitzsch]:
> Looking forward to Python3,
> use the "new" syntax to raise errors, i.e.
> 
> ```
> raise ZeroDivisionError("division by zero polynomial")
> ```


Done.



---

archive/issue_comments_127051.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-17T13:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127051",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_127052.json:
```json
{
    "body": "According to the patchbot, some doctests are fail with this patch on the current beta (5.0.beta8):\n\n```\nsage -t  -force_lib devel/sage-11593/sage/rings/function_field/function_field_element.pyx\n**********************************************************************\nFile \"/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx\", line 423:\n    sage: a = ~(2*y + 1/x); a                           # indirect doctest\nExpected:\n    (-x^2/(8*x^5 + x^2 + 1/2))*y + (2*x^3 + x)/(16*x^5 + 2*x^2 + 1)\nGot:\n    (-1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4))*y + (1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4)\n**********************************************************************\nFile \"/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx\", line 443:\n    sage: a = ~(2*y + 1/x); a\nExpected:\n    (-x^2/(8*x^5 + x^2 + 1/2))*y + (2*x^3 + x)/(16*x^5 + 2*x^2 + 1)\nGot:\n    (-1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4))*y + (1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4)\n**********************************************************************\nFile \"/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx\", line 445:\n    sage: a.list()\nExpected:\n    [(2*x^3 + x)/(16*x^5 + 2*x^2 + 1), -x^2/(8*x^5 + x^2 + 1/2)]\nGot:\n    [(1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4), -1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4)]\n**********************************************************************\n```",
    "created_at": "2012-03-17T13:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127052",
    "user": "https://github.com/loefflerd"
}
```

According to the patchbot, some doctests are fail with this patch on the current beta (5.0.beta8):

```
sage -t  -force_lib devel/sage-11593/sage/rings/function_field/function_field_element.pyx
**********************************************************************
File "/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx", line 423:
    sage: a = ~(2*y + 1/x); a                           # indirect doctest
Expected:
    (-x^2/(8*x^5 + x^2 + 1/2))*y + (2*x^3 + x)/(16*x^5 + 2*x^2 + 1)
Got:
    (-1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4))*y + (1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4)
**********************************************************************
File "/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx", line 443:
    sage: a = ~(2*y + 1/x); a
Expected:
    (-x^2/(8*x^5 + x^2 + 1/2))*y + (2*x^3 + x)/(16*x^5 + 2*x^2 + 1)
Got:
    (-1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4))*y + (1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4)
**********************************************************************
File "/storage/masiao/sage-5.0.beta8-patchbot/devel/sage-11593/sage/rings/function_field/function_field_element.pyx", line 445:
    sage: a.list()
Expected:
    [(2*x^3 + x)/(16*x^5 + 2*x^2 + 1), -x^2/(8*x^5 + x^2 + 1/2)]
Got:
    [(1/2*x^3 + 1/4*x)/(4*x^5 + 1/2*x^2 + 1/4), -1/2*x^2/(4*x^5 + 1/2*x^2 + 1/4)]
**********************************************************************
```



---

archive/issue_comments_127053.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-11T07:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127053",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_127054.json:
```json
{
    "body": "The new code also speeds up things. See below\n\nBefore the patch,\n\n```\nsage: sage: S.<x>=QQ[]\nsage: sage: fS=FractionField(S)\nsage: sage: R.<y>=fS[]\nsage: sage: f=y^20\nsage: sage: g=y^5+1/x*y^4\nsage: sage: timeit(\"f.quo_rem(g)\") \n125 loops, best of 3: 3.25 ms per loop\n```\nAfter the patch,\n\n```\nsage: sage: S.<x>=QQ[]\nsage: sage: fS=FractionField(S)\nsage: sage: R.<y>=fS[]\nsage: sage: f=y^20\nsage: sage: g=y^5+1/x*y^4\nsage: sage: timeit(\"f.quo_rem(g)\") \n125 loops, best of 3: 1.75 ms per loop\n```",
    "created_at": "2012-07-11T07:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127054",
    "user": "https://github.com/kwankyu"
}
```

The new code also speeds up things. See below

Before the patch,

```
sage: sage: S.<x>=QQ[]
sage: sage: fS=FractionField(S)
sage: sage: R.<y>=fS[]
sage: sage: f=y^20
sage: sage: g=y^5+1/x*y^4
sage: sage: timeit("f.quo_rem(g)") 
125 loops, best of 3: 3.25 ms per loop
```
After the patch,

```
sage: sage: S.<x>=QQ[]
sage: sage: fS=FractionField(S)
sage: sage: R.<y>=fS[]
sage: sage: f=y^20
sage: sage: g=y^5+1/x*y^4
sage: sage: timeit("f.quo_rem(g)") 
125 loops, best of 3: 1.75 ms per loop
```



---

archive/issue_comments_127055.json:
```json
{
    "body": "Fixed the doctest failure issues.",
    "created_at": "2012-07-11T07:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127055",
    "user": "https://github.com/kwankyu"
}
```

Fixed the doctest failure issues.



---

archive/issue_comments_127056.json:
```json
{
    "body": "Maybe one could consider adding documentation for the procedure cdef _inplace_truncate ? \n\nYou are changing something inside this procedure, so the correct behaviour should be tested.",
    "created_at": "2012-09-27T13:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127056",
    "user": "https://github.com/fchapoton"
}
```

Maybe one could consider adding documentation for the procedure cdef _inplace_truncate ? 

You are changing something inside this procedure, so the correct behaviour should be tested.



---

archive/issue_comments_127057.json:
```json
{
    "body": "Replying to [comment:15 chapoton]:\n> Maybe one could consider adding documentation for the procedure cdef _inplace_truncate ? \n> \n> You are changing something inside this procedure, so the correct behaviour should be tested.\n\n\nI corrected a bug in _inplace_truncate, which is of only internal use, unlike the truncate method defined just above it. It's correct behaviour is indirectly checked by other methods that use it in various places.\n \nOn the other hand, the procedure is quite self-explanatory by its name and the short code, and I doubt the value of a documentation for it.",
    "created_at": "2012-09-28T00:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127057",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:15 chapoton]:
> Maybe one could consider adding documentation for the procedure cdef _inplace_truncate ? 
> 
> You are changing something inside this procedure, so the correct behaviour should be tested.


I corrected a bug in _inplace_truncate, which is of only internal use, unlike the truncate method defined just above it. It's correct behaviour is indirectly checked by other methods that use it in various places.
 
On the other hand, the procedure is quite self-explanatory by its name and the short code, and I doubt the value of a documentation for it.



---

archive/issue_comments_127058.json:
```json
{
    "body": "Well, I understand. But it would have been one little step towards the official goal of 100% doctesting. The question is not so much the value of the documentation, that its mere existence, even if it is not very useful..",
    "created_at": "2012-09-28T07:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127058",
    "user": "https://github.com/fchapoton"
}
```

Well, I understand. But it would have been one little step towards the official goal of 100% doctesting. The question is not so much the value of the documentation, that its mere existence, even if it is not very useful..



---

archive/issue_comments_127059.json:
```json
{
    "body": "Replying to [comment:17 chapoton]:\n> Well, I understand. But it would have been one little step towards the official goal of 100% doctesting. The question is not so much the value of the documentation, that its mere existence, even if it is not very useful..\n\n\nI found out that as `_inplace_truncate` is only a `cdef` method, that is not even counted for the doctest coverage. See the result of\n\n```\nsage -coverage sage/rings/polynomial/polynomial_element.pyx \n```",
    "created_at": "2012-10-05T14:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127059",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:17 chapoton]:
> Well, I understand. But it would have been one little step towards the official goal of 100% doctesting. The question is not so much the value of the documentation, that its mere existence, even if it is not very useful..


I found out that as `_inplace_truncate` is only a `cdef` method, that is not even counted for the doctest coverage. See the result of

```
sage -coverage sage/rings/polynomial/polynomial_element.pyx 
```



---

archive/issue_comments_127060.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-26T14:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127060",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127061.json:
```json
{
    "body": "ok for me, positive review",
    "created_at": "2012-10-26T14:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127061",
    "user": "https://github.com/fchapoton"
}
```

ok for me, positive review



---

archive/issue_events_030406.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-29T21:28:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "milestone": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30406"
}
```



---

archive/issue_events_030407.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-29T21:28:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30407"
}
```



---

archive/issue_events_030408.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-01T12:01:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30408"
}
```



---

archive/issue_comments_127062.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-01T12:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127062",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_127063.json:
```json
{
    "body": "sage-5.5.beta0 + #11593 gives\n\n```\nsage -t --long \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\nThe doctested process was killed by signal 11\n         [166.4 s]\n```\non OS X 10.4 PPC (not on other systems as far as I know).\n\nI think the real issue is with #715+#11521, not this ticket.",
    "created_at": "2012-11-05T07:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127063",
    "user": "https://github.com/jdemeyer"
}
```

sage-5.5.beta0 + #11593 gives

```
sage -t --long "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
The doctested process was killed by signal 11
         [166.4 s]
```
on OS X 10.4 PPC (not on other systems as far as I know).

I think the real issue is with #715+#11521, not this ticket.



---

archive/issue_comments_127064.json:
```json
{
    "body": "Besides, why `TypeError` when dividing by a non-unit?  It seems to me that `TypeError` is not the right exception for this, I believe `ArithmeticError` suits better.",
    "created_at": "2012-11-05T07:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127064",
    "user": "https://github.com/jdemeyer"
}
```

Besides, why `TypeError` when dividing by a non-unit?  It seems to me that `TypeError` is not the right exception for this, I believe `ArithmeticError` suits better.



---

archive/issue_comments_127065.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2012-11-05T07:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127065",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_127066.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2012-11-05T07:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127066",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_030409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-05T07:56:33Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30409"
}
```



---

archive/issue_comments_127067.json:
```json
{
    "body": "And exceptions should be doctested too.",
    "created_at": "2012-11-05T07:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127067",
    "user": "https://github.com/jdemeyer"
}
```

And exceptions should be doctested too.



---

archive/issue_comments_127068.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-05T07:56:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127068",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_127069.json:
```json
{
    "body": "Changing keywords from \"\" to \"fix and doctest exceptions\".",
    "created_at": "2012-11-05T07:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127069",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "" to "fix and doctest exceptions".



---

archive/issue_comments_127070.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-05T07:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127070",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_127071.json:
```json
{
    "body": "Replying to [comment:23 jdemeyer]:\n> Besides, why `TypeError` when dividing by a non-unit?  It seems to me that `TypeError` is not the right exception for this, I believe `ArithmeticError` suits better.\n\n\n`TypeError` was my inevitable choice to avoid triggering doctest failures in other parts of Sage, which depend on `TypeError` exception for normal operation. I need to remind myself of the details how and where that happens.",
    "created_at": "2012-11-05T08:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127071",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:23 jdemeyer]:
> Besides, why `TypeError` when dividing by a non-unit?  It seems to me that `TypeError` is not the right exception for this, I believe `ArithmeticError` suits better.


`TypeError` was my inevitable choice to avoid triggering doctest failures in other parts of Sage, which depend on `TypeError` exception for normal operation. I need to remind myself of the details how and where that happens.



---

archive/issue_comments_127072.json:
```json
{
    "body": "The new patch raises `ArithmeticError` for nonunit divisor",
    "created_at": "2012-11-05T09:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127072",
    "user": "https://github.com/kwankyu"
}
```

The new patch raises `ArithmeticError` for nonunit divisor



---

archive/issue_comments_127073.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-05T15:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127073",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_127074.json:
```json
{
    "body": "maybe the second and third tests at the beginning should rather be swapped ? What do we expect when we divide 0 by something which does not have an invertible leading coefficient ?",
    "created_at": "2012-11-07T10:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127074",
    "user": "https://github.com/fchapoton"
}
```

maybe the second and third tests at the beginning should rather be swapped ? What do we expect when we divide 0 by something which does not have an invertible leading coefficient ?



---

archive/issue_comments_127075.json:
```json
{
    "body": "Replying to [comment:30 chapoton]:\n> maybe the second and third tests at the beginning should rather be swapped ? What do we expect when we divide 0 by something which does not have an invertible leading coefficient ?\n\n\nGood point! The tests are swapped in a new patch.",
    "created_at": "2012-11-07T14:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127075",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:30 chapoton]:
> maybe the second and third tests at the beginning should rather be swapped ? What do we expect when we divide 0 by something which does not have an invertible leading coefficient ?


Good point! The tests are swapped in a new patch.



---

archive/issue_comments_127076.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-08T21:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127076",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127077.json:
```json
{
    "body": "well, let me give again a positive review. Maybe the long-test problem is still there, but it does not appear on 5.4rc3.",
    "created_at": "2012-11-08T21:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127077",
    "user": "https://github.com/fchapoton"
}
```

well, let me give again a positive review. Maybe the long-test problem is still there, but it does not appear on 5.4rc3.



---

archive/issue_events_030410.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T21:58:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30410"
}
```



---

archive/issue_events_030411.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T21:58:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30411"
}
```



---

archive/issue_comments_127078.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-17T12:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127078",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_127079.json:
```json
{
    "body": "With #8992, I get\n\n```\n**********************************************************************\nFile \"/release/merger/sage-5.6.beta0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py\", line 407:\n    sage: Q3(Q1.gen())\nException raised:\n    Traceback (most recent call last):\n      File \"/release/merger/sage-5.6.beta0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/merger/sage-5.6.beta0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/merger/sage-5.6.beta0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[28]>\", line 1, in <module>\n        Q3(Q1.gen())###line 407:\n    sage: Q3(Q1.gen())\n      File \"parent.pyx\", line 800, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7268)\n      File \"parent.pyx\", line 2153, in sage.structure.parent.Parent.convert_map_from (sage/structure/parent.c:15082)\n      File \"parent.pyx\", line 2165, in sage.structure.parent.Parent.discover_convert_map_from (sage/structure/parent.c:15301)\n      File \"parent.pyx\", line 1903, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:14051)\n      File \"parent.pyx\", line 1974, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:13804)\n      File \"parent.pyx\", line 2068, in sage.structure.parent.Parent.discover_coerce_map_from (sage/structure/parent.c:14231)\n      File \"parent_old.pyx\", line 507, in sage.structure.parent_old.Parent._coerce_map_from_ (sage/structure/parent_old.c:6428)\n      File \"/release/merger/sage-5.6.beta0/local/lib/python/site-packages/sage/rings/polynomial/polynomial_quotient_ring.py\", line 485, in _coerce_map_from_\n        if not self.__polynomial.divides(R.modulus()):\n      File \"element.pyx\", line 2027, in sage.structure.element.CommutativeRingElement.divides (sage/structure/element.c:16725)\n      File \"element.pyx\", line 2021, in sage.structure.element.CommutativeRingElement.divides (sage/structure/element.c:16636)\n      File \"polynomial_element.pyx\", line 1724, in sage.rings.polynomial.polynomial_element.Polynomial.__mod__ (sage/rings/polynomial/polynomial_element.c:16751)\n        _, R = self.quo_rem(other)\n      File \"element.pyx\", line 3223, in sage.structure.element.NamedBinopMethod.__call__ (sage/structure/element.c:24763)\n      File \"polynomial_element.pyx\", line 6478, in sage.rings.polynomial.polynomial_element.Polynomial_generic_dense.quo_rem (sage/rings/polynomial/polynomial_element.c:47106)\n        raise ArithmeticError(\"Nonunit leading coefficient\")\n    ArithmeticError: Nonunit leading coefficient\n**********************************************************************\n```",
    "created_at": "2012-12-17T12:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127079",
    "user": "https://github.com/jdemeyer"
}
```

With #8992, I get

```
**********************************************************************
File "/release/merger/sage-5.6.beta0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py", line 407:
    sage: Q3(Q1.gen())
Exception raised:
    Traceback (most recent call last):
      File "/release/merger/sage-5.6.beta0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/merger/sage-5.6.beta0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/merger/sage-5.6.beta0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[28]>", line 1, in <module>
        Q3(Q1.gen())###line 407:
    sage: Q3(Q1.gen())
      File "parent.pyx", line 800, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7268)
      File "parent.pyx", line 2153, in sage.structure.parent.Parent.convert_map_from (sage/structure/parent.c:15082)
      File "parent.pyx", line 2165, in sage.structure.parent.Parent.discover_convert_map_from (sage/structure/parent.c:15301)
      File "parent.pyx", line 1903, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:14051)
      File "parent.pyx", line 1974, in sage.structure.parent.Parent.coerce_map_from (sage/structure/parent.c:13804)
      File "parent.pyx", line 2068, in sage.structure.parent.Parent.discover_coerce_map_from (sage/structure/parent.c:14231)
      File "parent_old.pyx", line 507, in sage.structure.parent_old.Parent._coerce_map_from_ (sage/structure/parent_old.c:6428)
      File "/release/merger/sage-5.6.beta0/local/lib/python/site-packages/sage/rings/polynomial/polynomial_quotient_ring.py", line 485, in _coerce_map_from_
        if not self.__polynomial.divides(R.modulus()):
      File "element.pyx", line 2027, in sage.structure.element.CommutativeRingElement.divides (sage/structure/element.c:16725)
      File "element.pyx", line 2021, in sage.structure.element.CommutativeRingElement.divides (sage/structure/element.c:16636)
      File "polynomial_element.pyx", line 1724, in sage.rings.polynomial.polynomial_element.Polynomial.__mod__ (sage/rings/polynomial/polynomial_element.c:16751)
        _, R = self.quo_rem(other)
      File "element.pyx", line 3223, in sage.structure.element.NamedBinopMethod.__call__ (sage/structure/element.c:24763)
      File "polynomial_element.pyx", line 6478, in sage.rings.polynomial.polynomial_element.Polynomial_generic_dense.quo_rem (sage/rings/polynomial/polynomial_element.c:47106)
        raise ArithmeticError("Nonunit leading coefficient")
    ArithmeticError: Nonunit leading coefficient
**********************************************************************
```



---

archive/issue_comments_127080.json:
```json
{
    "body": "Well, this failing test does not make sense to me. Why on earth should we be able to convert\n\n```\nx as element of the ring Q[x]/(x^6 - x^4 - 5*x^2 - 3)\n\nto\n\nx as element of the ring Q[x][y]/(y^2+1)\n```\n\nI propose to remove this test. Anybody else has an opinion ?",
    "created_at": "2012-12-30T19:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127080",
    "user": "https://github.com/fchapoton"
}
```

Well, this failing test does not make sense to me. Why on earth should we be able to convert

```
x as element of the ring Q[x]/(x^6 - x^4 - 5*x^2 - 3)

to

x as element of the ring Q[x][y]/(y^2+1)
```

I propose to remove this test. Anybody else has an opinion ?



---

archive/issue_comments_127081.json:
```json
{
    "body": "I think the doctest explains it pretty well: it is a conversion from `Q[x]/(x^6 - x^4 - 5*x^2 - 3)` to `Q[x]` which matters.\n\nYou can ask questions at #8992, where this test was introduced.",
    "created_at": "2012-12-31T09:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127081",
    "user": "https://github.com/jdemeyer"
}
```

I think the doctest explains it pretty well: it is a conversion from `Q[x]/(x^6 - x^4 - 5*x^2 - 3)` to `Q[x]` which matters.

You can ask questions at #8992, where this test was introduced.



---

archive/issue_comments_127082.json:
```json
{
    "body": "Attachment [trac_11593.patch](tarball://root/attachments/some-uuid/ticket11593/trac_11593.patch) by @kwankyu created at 2013-02-07 04:39:49\n\nrebased for Sage 5.6",
    "created_at": "2013-02-07T04:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127082",
    "user": "https://github.com/kwankyu"
}
```

Attachment [trac_11593.patch](tarball://root/attachments/some-uuid/ticket11593/trac_11593.patch) by @kwankyu created at 2013-02-07 04:39:49

rebased for Sage 5.6



---

archive/issue_comments_127083.json:
```json
{
    "body": "Actually the fault was with #8992. There is now no need to take off the problematic doctest of #8992.",
    "created_at": "2013-02-07T04:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127083",
    "user": "https://github.com/kwankyu"
}
```

Actually the fault was with #8992. There is now no need to take off the problematic doctest of #8992.



---

archive/issue_comments_127084.json:
```json
{
    "body": "The faulty part of #8992 is now remedied and included in the current patch for this ticket.",
    "created_at": "2013-02-07T04:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127084",
    "user": "https://github.com/kwankyu"
}
```

The faulty part of #8992 is now remedied and included in the current patch for this ticket.



---

archive/issue_comments_127085.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-20T00:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127085",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_127086.json:
```json
{
    "body": "ok for me, positive review",
    "created_at": "2013-02-26T19:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127086",
    "user": "https://github.com/fchapoton"
}
```

ok for me, positive review



---

archive/issue_comments_127087.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-26T19:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127087",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_127088.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-28T10:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11421#issuecomment-127088",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_030412.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-28T10:30:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11421",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11421#event-30412"
}
```
