# Issue 14332: Random tournaments, a misnamed method and a segfault

archive/issues_014332.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\n`digraphs.Tournament` use to return a transitive tournament. I have no idea why I named it \"tournament\", as there is a wealth of tournaments on `n` vertices. Hence I rename it in this patch. I think that it does not need to be deprecated first, because the former name really is ill-adapted, and because the patch that added it was merged three months ago only. Let's not keep this bad name for another year.\n\nThe segfault is rather shameful... `:-P`\n\n\n```\nsage: Graph(-1)\n------------------------------------------------------------------------\n/home/ncohen/.Sage/sage: line 135:  5163 Segmentation fault \"$SAGE_ROOT/spkg/bin/sage\" \"$@\"\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14536\n\n",
    "created_at": "2013-05-06T10:26:57Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Random tournaments, a misnamed method and a segfault",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14332",
    "user": "ncohen"
}
```
Assignee: jason, ncohen, rlm

`digraphs.Tournament` use to return a transitive tournament. I have no idea why I named it "tournament", as there is a wealth of tournaments on `n` vertices. Hence I rename it in this patch. I think that it does not need to be deprecated first, because the former name really is ill-adapted, and because the patch that added it was merged three months ago only. Let's not keep this bad name for another year.

The segfault is rather shameful... `:-P`


```
sage: Graph(-1)
------------------------------------------------------------------------
/home/ncohen/.Sage/sage: line 135:  5163 Segmentation fault "$SAGE_ROOT/spkg/bin/sage" "$@"
```


Issue created by migration from https://trac.sagemath.org/ticket/14536





---

archive/issue_comments_181034.json:
```json
{
    "body": "I also implemented an iterator over all tournaments with Nauty. \n\nNathann",
    "created_at": "2013-05-06T11:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181034",
    "user": "ncohen"
}
```

I also implemented an iterator over all tournaments with Nauty. 

Nathann



---

archive/issue_comments_181035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-06T11:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181035",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_181036.json:
```json
{
    "body": "Yo,\n\nI just had a look, and it sounds very reasonnable.\n\nThree details:\n\n- Why not displaying anymore the number of vertices in the name method of TransitiveTournament? Since other graphs do the same that would be consistent.\n\n- A potential alternative name would be \"chain\"\n\n- In the tournament generator using Nauty, once the nauty command is constructed, it seems that all the rest is generic (calling Nauty, parsing the output, building and yielding the graphs). What about extracting this into a generic function?\n\nIn the long run, it would be nice to have a uniform interface for generating graphs using either Sage's engine or nauty (say with an algo=nauty/Sage optional switch, which would default to Sage, unless nauty become a standard package some day.).\n\nCheers,\n                                       Nicolas",
    "created_at": "2013-05-06T13:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181036",
    "user": "nthiery"
}
```

Yo,

I just had a look, and it sounds very reasonnable.

Three details:

- Why not displaying anymore the number of vertices in the name method of TransitiveTournament? Since other graphs do the same that would be consistent.

- A potential alternative name would be "chain"

- In the tournament generator using Nauty, once the nauty command is constructed, it seems that all the rest is generic (calling Nauty, parsing the output, building and yielding the graphs). What about extracting this into a generic function?

In the long run, it would be nice to have a uniform interface for generating graphs using either Sage's engine or nauty (say with an algo=nauty/Sage optional switch, which would default to Sage, unless nauty become a standard package some day.).

Cheers,
                                       Nicolas



---

archive/issue_comments_181037.json:
```json
{
    "body": "Hellooooooo !!\n\n> - Why not displaying anymore the number of vertices in the name method of TransitiveTournament? Since other graphs do the same that would be consistent.\n\nWell. This is the result with the patch as it is :\n\n\n```\nsage: digraphs.TransitiveTournament(5)\nTransitive Tournament: Digraph on 5 vertices\n```\n\n\nIf the number of vertices is included in the name, you get \"Transitive Tournament on 5 vertices: Digraph on 5 vertices\".\n\n> - A potential alternative name would be \"chain\"\n\nFor what ? Transitive tournament ? `O_o`\n\nHey, it's not a Poset ! It's a digraph ! `:-P`\n\nPlus it would really make people think of this :\n\n\n```\nsage: digraphs.Path(5)\nPath on 5 vertices: Digraph on 5 vertices\n```\n\n\nOh, by the way the name contains the number of vertices in this case. What do you think ?\n\n> - In the tournament generator using Nauty, once the nauty command is constructed, it seems that all the rest is generic (calling Nauty, parsing the output, building and yielding the graphs). What about extracting this into a generic function?\n\nHMmmmmm. Most of it is, yes. Building the string that Nauty received as input is not, and parsing the graph is not either.. Usually Nauty returns a sparse6_string but Sage does not understand sparse6 string for digraphs yet. And there was a small difference in #14474 too.\n\nWell, you are right a large part of it could be made automatic. It would also be the occasion to create a Nauty module, and so a documentation page about the Nauty spkg (how it is to be installed, which Demigod first wrote it.\n\nLet's say another patch ? We still do not have the interface from Sage to Nauty's digraph generation. It's not that bad because we have Robert Miller's version in Sage, but I will probably do it someday. So I'll do both then `:-)`\n\n> In the long run, it would be nice to have a uniform interface for generating graphs using either Sage's engine or nauty (say with an algo=nauty/Sage optional switch, which would default to Sage, unless nauty become a standard package some \n\nNauty is not a part of Sage because of license problems... And it knows how to enumerate things that are not implemented in Sage yet (like hypergraphs `:-PPP`).\n\nIt goes in both directions, though. It is easy to enumerate through Sage the list of graphs satisfying some specific property, and the property is actually tested *during* the enumeration. No way to do this with Nauty, unless we *REALLY* rewrite the interface and call Nauty's C functions directly `:-P`\n\nNathann",
    "created_at": "2013-05-06T13:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181037",
    "user": "ncohen"
}
```

Hellooooooo !!

> - Why not displaying anymore the number of vertices in the name method of TransitiveTournament? Since other graphs do the same that would be consistent.

Well. This is the result with the patch as it is :


```
sage: digraphs.TransitiveTournament(5)
Transitive Tournament: Digraph on 5 vertices
```


If the number of vertices is included in the name, you get "Transitive Tournament on 5 vertices: Digraph on 5 vertices".

> - A potential alternative name would be "chain"

For what ? Transitive tournament ? `O_o`

Hey, it's not a Poset ! It's a digraph ! `:-P`

Plus it would really make people think of this :


```
sage: digraphs.Path(5)
Path on 5 vertices: Digraph on 5 vertices
```


Oh, by the way the name contains the number of vertices in this case. What do you think ?

> - In the tournament generator using Nauty, once the nauty command is constructed, it seems that all the rest is generic (calling Nauty, parsing the output, building and yielding the graphs). What about extracting this into a generic function?

HMmmmmm. Most of it is, yes. Building the string that Nauty received as input is not, and parsing the graph is not either.. Usually Nauty returns a sparse6_string but Sage does not understand sparse6 string for digraphs yet. And there was a small difference in #14474 too.

Well, you are right a large part of it could be made automatic. It would also be the occasion to create a Nauty module, and so a documentation page about the Nauty spkg (how it is to be installed, which Demigod first wrote it.

Let's say another patch ? We still do not have the interface from Sage to Nauty's digraph generation. It's not that bad because we have Robert Miller's version in Sage, but I will probably do it someday. So I'll do both then `:-)`

> In the long run, it would be nice to have a uniform interface for generating graphs using either Sage's engine or nauty (say with an algo=nauty/Sage optional switch, which would default to Sage, unless nauty become a standard package some 

Nauty is not a part of Sage because of license problems... And it knows how to enumerate things that are not implemented in Sage yet (like hypergraphs `:-PPP`).

It goes in both directions, though. It is easy to enumerate through Sage the list of graphs satisfying some specific property, and the property is actually tested *during* the enumeration. No way to do this with Nauty, unless we *REALLY* rewrite the interface and call Nauty's C functions directly `:-P`

Nathann



---

archive/issue_comments_181038.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n> If the number of vertices is included in the name, you get \"Transitive Tournament on 5 vertices: Digraph on 5 vertices\".\n\nI see. It would be consistent to fix Circuit then:\n\n```\n\tsage: digraphs.Circuit(5)\n\tCircuit on 5 vertices: Digraph on 5 vertices\n```\n\n\nBut that can be for later.\n\n> Hey, it's not a Poset ! It's a digraph !\n\nFair enough :-)\n\n> Well, you are right a large part of it could be made automatic. It would also be the occasion to create a Nauty module, and so a documentation page about the Nauty spkg (how it is to be installed, which Demigod first wrote it.\n> \n> Let's say another patch ?\n\nYup.\n\n> Nauty is not a part of Sage because of license problems...\n\nI know. Maybe we should chat to Brendan about this someday.\n\n> And it knows how to enumerate things that are not implemented in Sage yet (like hypergraphs `:-PPP`).\n>\n> It goes in both directions, though. It is easy to enumerate through\n> Sage the list of graphs satisfying some specific property, and the\n> property is actually tested *during* the enumeration. No way to do\n> this with Nauty, unless we *REALLY* rewrite the interface and call\n> Nauty's C functions directly `:-P`\n\nYup. Still it would be nice if there was a single entry point for\nboth generators, even if some features only work in one case.\n\nCheers,\n                            Nicolas",
    "created_at": "2013-05-06T13:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181038",
    "user": "nthiery"
}
```

Replying to [comment:3 ncohen]:
> If the number of vertices is included in the name, you get "Transitive Tournament on 5 vertices: Digraph on 5 vertices".

I see. It would be consistent to fix Circuit then:

```
	sage: digraphs.Circuit(5)
	Circuit on 5 vertices: Digraph on 5 vertices
```


But that can be for later.

> Hey, it's not a Poset ! It's a digraph !

Fair enough :-)

> Well, you are right a large part of it could be made automatic. It would also be the occasion to create a Nauty module, and so a documentation page about the Nauty spkg (how it is to be installed, which Demigod first wrote it.
> 
> Let's say another patch ?

Yup.

> Nauty is not a part of Sage because of license problems...

I know. Maybe we should chat to Brendan about this someday.

> And it knows how to enumerate things that are not implemented in Sage yet (like hypergraphs `:-PPP`).
>
> It goes in both directions, though. It is easy to enumerate through
> Sage the list of graphs satisfying some specific property, and the
> property is actually tested *during* the enumeration. No way to do
> this with Nauty, unless we *REALLY* rewrite the interface and call
> Nauty's C functions directly `:-P`

Yup. Still it would be nice if there was a single entry point for
both generators, even if some features only work in one case.

Cheers,
                            Nicolas



---

archive/issue_comments_181039.json:
```json
{
    "body": "Yoooooooooo !\n\n> I see. It would be consistent to fix Circuit then:\n\nDone !\n\n> > Nauty is not a part of Sage because of license problems...\n> \n> I know. Maybe we should chat to Brendan about this someday.\n\nBrendan McKay is like MY own personnal Chuck Nurris.\nHe is right.\nBut perhaps he can decide that licensing his software under the GPL would be even greater. We would not convince him to do that, of course, but he could decide it by himself. And this would not be related in any way with our emails.\nOf course.\n\n> Yup. Still it would be nice if there was a single entry point for\n> both generators, even if some features only work in one case.\n\nYepyep. Will do !\n\nNathann",
    "created_at": "2013-05-06T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181039",
    "user": "ncohen"
}
```

Yoooooooooo !

> I see. It would be consistent to fix Circuit then:

Done !

> > Nauty is not a part of Sage because of license problems...
> 
> I know. Maybe we should chat to Brendan about this someday.

Brendan McKay is like MY own personnal Chuck Nurris.
He is right.
But perhaps he can decide that licensing his software under the GPL would be even greater. We would not convince him to do that, of course, but he could decide it by himself. And this would not be related in any way with our emails.
Of course.

> Yup. Still it would be nice if there was a single entry point for
> both generators, even if some features only work in one case.

Yepyep. Will do !

Nathann



---

archive/issue_comments_181040.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Brendan McKay is like MY own personnal Chuck Nurris.\n> He is right.\n\n+1\n\n> But perhaps he can decide that licensing his software under the GPL\n> would be even greater. We would not convince him to do that, of\n> course, but he could decide it by himself. And this would not be\n> related in any way with our emails.\n\nHe chose the license for Nauty a while ago. In the mean time the world\nof software as evolved quite some. It can be useful to him to have\nfeedback on what can be helpful to us and to the math open source\ncommunity at large nowadays. And then he can take whatever informed decision he wants. He is the author anyway.\n\nCheers,\n                             Nicolas",
    "created_at": "2013-05-06T14:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181040",
    "user": "nthiery"
}
```

Replying to [comment:5 ncohen]:
> Brendan McKay is like MY own personnal Chuck Nurris.
> He is right.

+1

> But perhaps he can decide that licensing his software under the GPL
> would be even greater. We would not convince him to do that, of
> course, but he could decide it by himself. And this would not be
> related in any way with our emails.

He chose the license for Nauty a while ago. In the mean time the world
of software as evolved quite some. It can be useful to him to have
feedback on what can be helpful to us and to the math open source
community at large nowadays. And then he can take whatever informed decision he wants. He is the author anyway.

Cheers,
                             Nicolas



---

archive/issue_comments_181041.json:
```json
{
    "body": "Changing keywords from \"\" to \"digraph, tournament\".",
    "created_at": "2013-05-17T08:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181041",
    "user": "chapoton"
}
```

Changing keywords from "" to "digraph, tournament".



---

archive/issue_comments_181042.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-17T08:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181042",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_181043.json:
```json
{
    "body": "3 failing doctests need to be corrected",
    "created_at": "2013-05-17T08:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181043",
    "user": "chapoton"
}
```

3 failing doctests need to be corrected



---

archive/issue_comments_181044.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-17T08:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181044",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_181045.json:
```json
{
    "body": "Glooooooops. Sorry. I just fixed them `:-/`\n\nNathann",
    "created_at": "2013-05-17T08:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181045",
    "user": "ncohen"
}
```

Glooooooops. Sorry. I just fixed them `:-/`

Nathann



---

archive/issue_comments_181046.json:
```json
{
    "body": "Attachment [trac_14536.patch](tarball://root/attachments/some-uuid/ticket14536/trac_14536.patch) by ncohen created at 2013-05-17 08:13:31",
    "created_at": "2013-05-17T08:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181046",
    "user": "ncohen"
}
```

Attachment [trac_14536.patch](tarball://root/attachments/some-uuid/ticket14536/trac_14536.patch) by ncohen created at 2013-05-17 08:13:31



---

archive/issue_comments_181047.json:
```json
{
    "body": "Attachment [trac_14536_review1.patch](tarball://root/attachments/some-uuid/ticket14536/trac_14536_review1.patch) by chapoton created at 2013-05-23 19:24:46\n\nhello,\n\nhere is a review patch. If you are happy with it, you can set a positive review on my behalf.",
    "created_at": "2013-05-23T19:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181047",
    "user": "chapoton"
}
```

Attachment [trac_14536_review1.patch](tarball://root/attachments/some-uuid/ticket14536/trac_14536_review1.patch) by chapoton created at 2013-05-23 19:24:46

hello,

here is a review patch. If you are happy with it, you can set a positive review on my behalf.



---

archive/issue_comments_181048.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-24T08:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181048",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_181049.json:
```json
{
    "body": "Ahh..... Old PEP8 `:-P`\n\nThank you for this patch and the review `:-)`\n\nNathann",
    "created_at": "2013-05-24T08:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181049",
    "user": "ncohen"
}
```

Ahh..... Old PEP8 `:-P`

Thank you for this patch and the review `:-)`

Nathann



---

archive/issue_comments_181050.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-29T07:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14332#issuecomment-181050",
    "user": "jdemeyer"
}
```

Resolution: fixed
