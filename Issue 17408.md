# Issue 17408: load("object.sobj") is broken in the new sagenb

Issue created by migration from https://trac.sagemath.org/ticket/17645

Original creator: novoselt

Original creation time: 2015-01-16 21:11:52

See [https://github.com/sagemath/sagenb/issues/336](https://github.com/sagemath/sagenb/issues/336)


---

Comment by novoselt created at 2015-01-16 21:12:21

Changing component from PLEASE CHANGE to notebook.


---

Comment by jdemeyer created at 2015-01-19 11:08:23

I believe this commit is responsible:

```diff
commit 2ea8adb1158ffb5048610552ad36df55fd7ee417
Author: kcrisman <kcrisman@gmail.com>
Date:   Wed Dec 3 14:29:38 2014 -0500

    Make init.sage work
    
    Ideally, this would later be changed to use `attach` again.

diff --git a/sagenb/notebook/worksheet.py b/sagenb/notebook/worksheet.py
index 53048a1..6507341 100644
--- a/sagenb/notebook/worksheet.py
+++ b/sagenb/notebook/worksheet.py
@@ -3044,7 +3044,8 @@ sage.misc.latex.EMBEDDED_MODE=True
 # gets removed from the sage library.
 from sagenb.notebook.all import *
 try:
-    attach(os.path.join(os.environ['DOT_SAGE'], 'init.sage'))
+    from sage.misc.preparser import load
+    load(os.path.join(os.environ['DOT_SAGE'], 'init.sage'), globals(),attach=True)
 except (KeyError, IOError):
     pass
     """ % (os.path.join(os.path.abspath(self.data_directory()),''), misc.DIR)
```


I guess it suffices to remove the added `import` line.


---

Comment by kcrisman created at 2015-01-19 20:33:14

This needs a new sagenb package, coming within a few days.


---

Comment by kcrisman created at 2015-01-22 03:27:40

Setting mutual dependency because this sagenb upgrade contains a very minor change in canvas3d that needs #12212.


---

Comment by kcrisman created at 2015-01-22 03:31:06

Changing status from new to needs_review.


---

Comment by kcrisman created at 2015-01-22 03:31:06

Upstream package at http://sage.math.washington.edu/home/kcrisman/sagenb-0.11.3.tar
----
New commits:


---

Comment by jdemeyer created at 2015-01-22 14:55:26

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2015-01-27 11:02:14

Hang on, [https://github.com/sagemath/sagenb/pull/120](https://github.com/sagemath/sagenb/pull/120) needs more testing.


---

Comment by jdemeyer created at 2015-01-27 11:02:14

Changing status from positive_review to needs_work.


---

Comment by kcrisman created at 2015-01-29 02:28:33

https://github.com/sagemath/sagenb/pull/338 has been positively reviewed, so 0.11.3.1 will probably come out tomorrow.


---

Comment by jdemeyer created at 2015-01-29 06:28:02

Replying to [comment:13 kcrisman]:
> 0.11.3.1 will probably come out tomorrow.
Can we just make it 0.11.4 instead?


---

Comment by kcrisman created at 2015-01-29 14:43:25

That works too.  Did you see my comment there, by the way?
> Only issue I see is that if someone had the beta version it would remember the previous config and still send to root`@`localhost, but for anyone just upgrading normally should be fine; I don't think there is a way to prevent that.

If you agree that is not something worth dealing with, I will make the package today.


---

Comment by git created at 2015-01-29 15:35:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kcrisman created at 2015-01-29 15:39:03

Upstream package at â€‹http://sage.math.washington.edu/home/kcrisman/sagenb-0.11.4.tar

Note I _intentionally_ kept the same branch to keep the history of having 0.11.3 release upstream, but no need to place 0.11.3 in upstream, obviously.


---

Comment by kcrisman created at 2015-01-29 15:39:03

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2015-01-30 21:07:50

Looks good to me. Jeroen ?


---

Comment by jdemeyer created at 2015-01-31 15:52:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-02-08 15:26:30

Resolution: fixed
