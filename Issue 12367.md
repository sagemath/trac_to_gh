# Issue 12367: graphs and digraphs distances distribution

Issue created by migration from https://trac.sagemath.org/ticket/12539

Original creator: dcoudert

Original creation time: 2012-02-19 14:43:18

Assignee: jason, ncohen, rlm

CC:  ncohen

This patch implements a simple function that returns the distances distribution of the (di)graph in a dictionary.


---

Comment by dcoudert created at 2012-02-19 14:48:18

Changing status from new to needs_review.


---

Comment by ncohen created at 2012-02-20 10:00:54

Helloooooo !!

Nice patch ! This can be useful indeed `:-)`

Two things, though.. Could you mention in the ``distances_distribution`` method of generic_graph.py that the method *ignores all edge labels* ? Our distance methods are usually built so that they can take it into account, depending on the input. It is not necessary to do the same for the function defined in distances_all_pairs as the whole module is built this way.

Also, what would you think of casting the answers to Sage integers before returning the values ? Right now you divide two C integer variables and so the answer is a float, but by doing something like Integer(4)/Integer(6) what the user would get is a pretty 2/3 instead of 0.66666666... At this level, it's not a very costly operation `:-)`

Nathann


---

Comment by dcoudert created at 2012-02-20 12:19:43

I have done all proposed improvements (and changed the outputs of the tests accordingly).
The Sage integer cast is quite nice and much more precise.

D.


---

Comment by ncohen created at 2012-02-20 19:53:42

Hellooooo !!!

Here are some modifications to the documentation, some sphinx typo (when there is no space between ".." and "note" Sphinx just ignores it), and details from the code. 

I give your patch a positive review, and you can do the same with mine (and so with the ticket) you like the changes `:-)`

Nathann


---

Comment by dcoudert created at 2012-02-20 22:06:19

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2012-02-20 22:06:19

Thanks for the corrections. 
Installation and tests OK.

I give a positive review to your additional patch ;-)

D.


---

Comment by jdemeyer created at 2012-02-21 11:04:38

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-02-21 11:04:38

This needs to be rebased to sage-5.0.beta5 (not yet released but essentially ready): [http://boxen.math.washington.edu/home/release/sage-5.0.beta5/](http://boxen.math.washington.edu/home/release/sage-5.0.beta5/)


---

Comment by ncohen created at 2012-02-21 11:06:41

> This needs to be rebased to sage-5.0.beta5 (not yet released but essentially ready): [http://boxen.math.washington.edu/home/release/sage-5.0.beta5/](http://boxen.math.washington.edu/home/release/sage-5.0.beta5/)

My GOD there is going to be so much new stuff in 5.0 `:-P`

Nathann


---

Attachment


---

Comment by dcoudert created at 2012-02-21 18:00:57

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2012-02-21 18:00:57

Hello,

I have 
* Installed sage-5.0.beta5
* Merge into trac_12539_distances_distribution_v2.patch the original patch AND the review patch of Nathann.
* Tested this new version on sage-5.0.beta5 (install, tests, docbuild, functionality)
* Change the description of this ticket

I hope it will now be acceptable, and accepted before next beta release ;-)

Nathann: If the new version is OK, could you please remove the now useless files ?

D.


---

Comment by ncohen created at 2012-02-22 20:02:45

Goooooooooood to go ! `:-)`

Nathann


---

Comment by ncohen created at 2012-02-22 20:02:45

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2012-02-22 20:37:40

Thanks !


---

Comment by jdemeyer created at 2012-02-27 11:23:17

Resolution: fixed
