# Issue 25424: Primecount failures on 32-bit systems

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-06-25 12:26:55

CC:  vdelecroix

There are various failures of the form

```
sage -t --long src/sage/interfaces/primecount.pyx
**********************************************************************
File "src/sage/interfaces/primecount.pyx", line 47, in sage.interfaces.primecount.prime_pi
Failed example:
    prime_pi(1000)                     # optional - primecount
Expected:
    168
Got:
    168L
**********************************************************************
```

if `int64_t` is larger than a `long`.


---

Comment by vklein created at 2018-06-28 07:19:51

Set assignee to vklein.


---

Comment by git created at 2018-06-28 12:12:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vklein created at 2018-06-28 12:46:12

Failing tests fixed.


---

Comment by vklein created at 2018-06-28 12:46:12

Changing status from new to needs_review.


---

Comment by vklein created at 2018-06-28 12:46:12

Changing keywords from "" to "thursdaysbdx".


---

Comment by vklein created at 2018-06-28 13:50:14

Remove assignee vklein.


---

Comment by chapoton created at 2018-07-01 08:00:40

ok, this will do the job, if not elegantly


---

Comment by chapoton created at 2018-07-01 08:00:40

Changing status from needs_review to positive_review.


---

Comment by tmonteil created at 2018-07-05 20:36:22

Why not using `# 64-bit` and `# 32-bit` keywords as done elsewhere (e.g. when testing hash methods) ?


---

Comment by vklein created at 2018-07-06 05:30:45

Changing status from positive_review to needs_work.


---

Comment by vklein created at 2018-07-06 05:30:45

Replying to [comment:7 tmonteil]:
> Why not using `# 64-bit` and `# 32-bit` keywords as done elsewhere (e.g. when testing hash methods) ?

Because i didn't remember/know these flags. Thanks.


---

Comment by vdelecroix created at 2018-07-06 11:25:34

Replying to [comment:7 tmonteil]:
> Why not using `# 64-bit` and `# 32-bit` keywords as done elsewhere (e.g. when testing hash methods) ?

To make the tests pass on both Python2 and Python3?


---

Comment by vklein created at 2018-07-06 12:20:07

Changing status from needs_work to positive_review.


---

Comment by vklein created at 2018-07-06 12:20:07

True ! 
Something like `168L # 32-bit` will fail with python3.


---

Comment by tmonteil created at 2018-07-06 12:30:53

Is the plan to turn every explicit doctest into an indirect one, just to have them pass simultaneously on python2 and python 3 ?


---

Comment by vdelecroix created at 2018-07-06 15:26:56

Replying to [comment:11 tmonteil]:
> Is the plan to turn every explicit doctest into an indirect one, just to have them pass simultaneously on python2 and python 3 ?

I hope not. But

- testing equality of integers is a better test than checking string representation
- I think that output flag should be avoided as much as possible


---

Comment by vbraun created at 2018-07-07 01:34:48

Resolution: fixed


---

Comment by tmonteil created at 2019-08-27 19:45:19

Changing keywords from "thursdaysbdx" to "thursdaysbdx, sdl".
