# Issue 16207: ipython notebook

Issue created by migration from Trac.

Original creator: elixyre

Original creation time: 2014-06-05 02:16:46

CC:  nthiery slabbe

The ipython notebook is really simple and ergonomic. 

To me the only problem is if we want plot something or show something like in the sage notebook... That is not easy... and I did find a deterministic way to plot what I want easily.

For example, if I want plot a tree, I can do that

```
from IPython.display import Image, display
file = "/blabla/myfiles/foo/img.png"
b = BinaryTree([[[],[]],[]])
latex.eval(latex(b), locals(), filename=file)
display(Image(filename=file))
```


Ok, that is really not sexy but that's work.

One problem is:

```
f = x^2 + x + 3
latex.eval(latex(b), locals(), filename=file)
display(Image(filename=file))
```

doesn't work!

One has to append `$`:

```
latex.eval("$" + latex(f) + "$", locals(), filename=file)
```

and ok...

So my questions are:

 - what is the good way to do that? (especially, I would like to (re)use the sage notebook technology)
 - Is it possible to add this feature in the ipython patch? I means something like :

```
class SageObject:
    ...

    def _repr_png_(self):
         return do_something_to_compute_img_of_self(self)
```

(Like in that tutorial: http://nbviewer.ipython.org/github/ipython/ipython/blob/1.x/examples/notebooks/Custom%20Display%20Logic.ipynb)

 - and obviously, how to lunch automatically the ipython notebook with the magic command `%load_ext sage`?

Thanks!
Jean-Baptiste Priez


---

Comment by tmonteil created at 2014-06-05 20:17:51

Hi,

you can be interested by [this wiki page](http://wiki.sagemath.org/IpythonNotebook). Also, i went to ipython IRC a few days ago and it seems (at least from their point of view) the best way is indeed to propose a _repr_html_ (and similar) method. So i guess (without being completely sure) this should be advocated within the Sage community.


---

Comment by elixyre created at 2014-06-05 20:53:16

Hi Thierry,

Replying to [comment:1 tmonteil]:
> you can be interested by [this wiki page](http://wiki.sagemath.org/IpythonNotebook). 

Thanks you ! That is a good idea!

Replying to [comment:1 tmonteil]:
> the best way is indeed to propose a _repr_html_ (and similar) method. 

Why not... Just there is lot of tikz code (particulary mine) in sage, so I expect you don't forget all the latex code which can't be interpreted by mathjax.

Now, I would like code a(n ugly) hack to use (quickly) ipython notebook... if someone understands the bowels of the sage-notebook, I would be grateful to show me the way.

In a second time, this ticket could be used and merged in your long project.


---

Comment by elixyre created at 2014-06-29 22:05:24

this hack could be usefull for anyone whoever want use nice display in the notebook...

Then to load sage lib ( `%load_ext sage` ), I create a ipy file in `.../.sage/ipython-x.xx/profile_**default**/startup/` with the content


```
%load_ext sage
sage.misc.latex.EMBEDDED_MODE = True
```


And tada!!! 
----
New commits:


---

Attachment


---

Attachment

The file in `.sage/ipython-x.xx/profile_**default**/startup/` is a ipython file (`toto.ipy`)...

The complete file must be some thing like that ...

```

%load_ext sage
sage.misc.latex.EMBEDDED_MODE = True

from sage.misc.latex import latex
latex.add_package_to_preamble_if_available("tikz")
latex.add_to_mathjax_avoid_list("tikz")
```


(I don't know why but we need the 3 last lines... with my hack...)


---

Comment by kcrisman created at 2014-09-17 03:02:07

Is #16270 a duplicate of this?  If so, we can close that one.


---

Comment by elixyre created at 2014-09-19 09:05:38

Yep, it's my fault for the duplicate! you can close this ticket.


---

Comment by elixyre created at 2014-09-19 09:07:23

No... sorry... you can close the other ticket... this one contains some code about how to display latex figure.


---

Comment by kcrisman created at 2014-09-19 12:36:18

> No... sorry... you can close the other ticket... this one contains some code about how to display latex figure.
Okay, if you are _sure_ about this then go to #16270 and set it to positive review.  Thanks!


---

Comment by slabbe created at 2014-09-21 00:05:21

I do not understand the goal of this ticket. The description looks like a question on ask.sagemath.org and mentions many things. Also, the ticket title does not contain any verb. Elixyre, can you reformat the description and the title of the ticket so that I can understand what should be done to achieve the task?


---

Comment by kcrisman created at 2014-11-03 13:37:33

Is this now a duplicate of #16996?  Or is there still the LaTeX-specific thing going on? In that case, the summary and description should really be changed.


---

Comment by kcrisman created at 2014-11-03 13:37:33

Changing status from new to needs_info.


---

Comment by novoselt created at 2014-11-18 00:59:45

I think it is a duplicate and originators don't seem to object.


---

Comment by novoselt created at 2014-11-18 00:59:45

Changing status from needs_info to positive_review.


---

Comment by vbraun created at 2014-11-28 20:58:14

Resolution: duplicate
