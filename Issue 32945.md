# Issue 32945: Symbolic expression .roots() can't solve a quadratic equation

archive/issues_032945.json:
```json
{
    "body": "The following throws a `TypeError`:\n\n```\nsage: z=var(\"z\")\nsage: g=z + 2/z + 3\nsage: g.roots(z,ring=ComplexField (prec=10), multiplicities=False)\nTypeError: fraction must have unit denominator\n```\n\nMeanwhile, this works:\n\n```\nsage: g=z^2 + 2 + 3*z\nsage: g.roots(z,ring=ComplexField (prec=10), multiplicities=False)\n[-2.0, -1.0]\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33182\n\n",
    "created_at": "2022-01-15T13:49:05Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Symbolic expression .roots() can't solve a quadratic equation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32945",
    "user": "@galashin"
}
```
The following throws a `TypeError`:

```
sage: z=var("z")
sage: g=z + 2/z + 3
sage: g.roots(z,ring=ComplexField (prec=10), multiplicities=False)
TypeError: fraction must have unit denominator
```

Meanwhile, this works:

```
sage: g=z^2 + 2 + 3*z
sage: g.roots(z,ring=ComplexField (prec=10), multiplicities=False)
[-2.0, -1.0]
```



Issue created by migration from https://trac.sagemath.org/ticket/33182





---

archive/issue_comments_469922.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2022-01-15T17:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-469922",
    "user": "@DaveWitteMorris"
}
```

Changing priority from major to minor.



---

archive/issue_comments_469923.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2022-01-15T17:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-469923",
    "user": "@DaveWitteMorris"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_469924.json:
```json
{
    "body": "This is user error. Specifying a ring tells the method to convert the expression to a polynomial over that ring:\n\n```\nINPUT: ...\n\n   * \"ring\" - a ring (default None): if not None, convert self to a\n     polynomial over ring and find roots over ring\n```\n\nThat is impossible in this case, so an exception is raised.  \n\nShould we improve the error message, or just close this ticket as invalid?  (Or does the method need enhancement?)\n\nPS The method works as expected if no ring is specified:\n\n```\nsage: z = var(\"z\")\nsage: g = z + 2/z + 3\nsage: g.roots(z, multiplicities=False)\n[-2, -1]\n```\n",
    "created_at": "2022-01-15T17:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-469924",
    "user": "@DaveWitteMorris"
}
```

This is user error. Specifying a ring tells the method to convert the expression to a polynomial over that ring:

```
INPUT: ...

   * "ring" - a ring (default None): if not None, convert self to a
     polynomial over ring and find roots over ring
```

That is impossible in this case, so an exception is raised.  

Should we improve the error message, or just close this ticket as invalid?  (Or does the method need enhancement?)

PS The method works as expected if no ring is specified:

```
sage: z = var("z")
sage: g = z + 2/z + 3
sage: g.roots(z, multiplicities=False)
[-2, -1]
```




---

archive/issue_comments_469925.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to symbolics.",
    "created_at": "2022-01-15T17:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-469925",
    "user": "@DaveWitteMorris"
}
```

Changing component from PLEASE CHANGE to symbolics.



---

archive/issue_comments_469926.json:
```json
{
    "body": "I think it is more predictable to (try to) convert to a rational function and compute the roots of the numerator. One could do this manually, sure, but asking for the zeroes of a rational function isn't too uncommon. And it already computes the roots of symbolic rational functions.",
    "created_at": "2022-01-16T02:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32945#issuecomment-469926",
    "user": "@trevorgunn"
}
```

I think it is more predictable to (try to) convert to a rational function and compute the roots of the numerator. One could do this manually, sure, but asking for the zeroes of a rational function isn't too uncommon. And it already computes the roots of symbolic rational functions.
