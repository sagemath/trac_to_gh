# Issue 21830: generating function of integer-valued polyhedra

archive/issues_021830.json:
```json
{
    "body": "CC:  cheuberg jipilab @braunmath slelievre\n\nImplement this using MacMahon's Omega operator (#22066)\n\nIssue created by migration from https://trac.sagemath.org/ticket/22067\n\n",
    "created_at": "2016-12-16T08:52:25Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "enhancement"
    ],
    "title": "generating function of integer-valued polyhedra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21830",
    "user": "dkrenn"
}
```
CC:  cheuberg jipilab @braunmath slelievre

Implement this using MacMahon's Omega operator (#22066)

Issue created by migration from https://trac.sagemath.org/ticket/22067





---

archive/issue_comments_302902.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2016-12-16T08:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302902",
    "user": "dkrenn"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_302903.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-12-16T08:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302903",
    "user": "dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_302904.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-12-16T10:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302904",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-12-17T11:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302905",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302906.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-17T11:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302906",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302907.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-17T11:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302907",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302908.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-17T11:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302908",
    "user": "dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302909.json:
```json
{
    "body": "\n```\nReturn the generating function of the integer points of\n+    the polyhedron's orthant with only nonnegative coordinates.\n```\n\nWhy only the integer points with nonnegative coordinates?",
    "created_at": "2016-12-22T02:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302909",
    "user": "mkoeppe"
}
```


```
Return the generating function of the integer points of
+    the polyhedron's orthant with only nonnegative coordinates.
```

Why only the integer points with nonnegative coordinates?



---

archive/issue_comments_302910.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-22T08:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302910",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302911.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-22T08:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302911",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302912.json:
```json
{
    "body": "Merged in changed dependencies.",
    "created_at": "2016-12-22T08:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302912",
    "user": "dkrenn"
}
```

Merged in changed dependencies.



---

archive/issue_comments_302913.json:
```json
{
    "body": "Hello,\n\nThis would be really useful.\n\n1) The name is too generic: `generating_function` could be anything (e.g. the number of lattice points in dilates). It should be something like `non_negative_lattice_points_generating_function`.\n\n2) What do you mean by \"generating function\"? Is it weighted by the sum of the vector?\n\n3) You should at least check that the number of integer partitions is correctly computed by your function with the polyhedron\n\n```\nx1 >= x2 >= x3 >= x4 >= x5 >= 1\n```\n\nversus\n\n```\nsage: [Partitions(k, length=5).cardinality() for k in range(5,20)]\n[1, 1, 2, 3, 5, 7, 10, 13, 18, 23, 30, 37, 47, 57, 70]\n```\n",
    "created_at": "2016-12-23T22:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302913",
    "user": "vdelecroix"
}
```

Hello,

This would be really useful.

1) The name is too generic: `generating_function` could be anything (e.g. the number of lattice points in dilates). It should be something like `non_negative_lattice_points_generating_function`.

2) What do you mean by "generating function"? Is it weighted by the sum of the vector?

3) You should at least check that the number of integer partitions is correctly computed by your function with the polyhedron

```
x1 >= x2 >= x3 >= x4 >= x5 >= 1
```

versus

```
sage: [Partitions(k, length=5).cardinality() for k in range(5,20)]
[1, 1, 2, 3, 5, 7, 10, 13, 18, 23, 30, 37, 47, 57, 70]
```




---

archive/issue_comments_302914.json:
```json
{
    "body": "I agree with Vincent that the name is too generic. This seems to compute what, for example, LattE would call the multivariate generating function (which can be computed by `count --multivariate-generating-function` after installing package `latte_int`) -- but not of the integer points of the given polyhedron but of its intersection with the positive orthant. This \"positive orthant\" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?",
    "created_at": "2016-12-24T07:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302914",
    "user": "mkoeppe"
}
```

I agree with Vincent that the name is too generic. This seems to compute what, for example, LattE would call the multivariate generating function (which can be computed by `count --multivariate-generating-function` after installing package `latte_int`) -- but not of the integer points of the given polyhedron but of its intersection with the positive orthant. This "positive orthant" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?



---

archive/issue_comments_302915.json:
```json
{
    "body": "Replying to [comment:14 mkoeppe]:\n> This \"positive orthant\" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?\n\n+1. The API would be much better (and allows extension in the future to count all points (that can already be done intersecting with the 2<sup>dim</sup> orthants and applying symmetries)).",
    "created_at": "2016-12-24T07:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302915",
    "user": "vdelecroix"
}
```

Replying to [comment:14 mkoeppe]:
> This "positive orthant" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?

+1. The API would be much better (and allows extension in the future to count all points (that can already be done intersecting with the 2<sup>dim</sup> orthants and applying symmetries)).



---

archive/issue_comments_302916.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-25T15:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302916",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302917.json:
```json
{
    "body": "Replying to [comment:13 vdelecroix]:\n> This would be really useful.\n\nGood :)\n\nThank you for your comments. Code updated.\n\n> 1) The name is too generic: `generating_function` could be anything (e.g. the number of lattice points in dilates). It should be something like `non_negative_lattice_points_generating_function`.\n\nIt seems that \"integral points\" is used in sage.geometry.polyhedron` a couple of times, thus,\nchanged to `generating_function_of_integral_points`.\n\n> 2) What do you mean by \"generating function\"? Is it weighted by the sum of the vector?\n\nInserted a formula to make this precise.\n\n> 3) You should at least check that the number of integer partitions is correctly computed by your function with the polyhedron\n> {{{\n> x1 >= x2 >= x3 >= x4 >= x5 >= 1\n> }}}\n> versus\n> {{{\n> sage: [Partitions(k, length=5).cardinality() for k in range(5,20)]\n> [1, 1, 2, 3, 5, 7, 10, 13, 18, 23, 30, 37, 47, 57, 70]\n> }}}\n\nIndeed; example added.",
    "created_at": "2016-12-25T15:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302917",
    "user": "dkrenn"
}
```

Replying to [comment:13 vdelecroix]:
> This would be really useful.

Good :)

Thank you for your comments. Code updated.

> 1) The name is too generic: `generating_function` could be anything (e.g. the number of lattice points in dilates). It should be something like `non_negative_lattice_points_generating_function`.

It seems that "integral points" is used in sage.geometry.polyhedron` a couple of times, thus,
changed to `generating_function_of_integral_points`.

> 2) What do you mean by "generating function"? Is it weighted by the sum of the vector?

Inserted a formula to make this precise.

> 3) You should at least check that the number of integer partitions is correctly computed by your function with the polyhedron
> {{{
> x1 >= x2 >= x3 >= x4 >= x5 >= 1
> }}}
> versus
> {{{
> sage: [Partitions(k, length=5).cardinality() for k in range(5,20)]
> [1, 1, 2, 3, 5, 7, 10, 13, 18, 23, 30, 37, 47, 57, 70]
> }}}

Indeed; example added.



---

archive/issue_comments_302918.json:
```json
{
    "body": "Replying to [comment:15 vdelecroix]:\n> Replying to [comment:14 mkoeppe]:\n> > This \"positive orthant\" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?\n> \n> +1. The API would be much better (and allows extension in the future to count all points (that can already be done intersecting with the 2<sup>dim</sup> orthants and applying symmetries)).\n\nI agree. Changed the documentation and added a few lines to check if polyhedron is in the nonnegative orthant; otherwise raise `NotImplementedError`. (Created a follow up ticket #22099 for the extension to arbitary corrdinates.)",
    "created_at": "2016-12-25T15:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302918",
    "user": "dkrenn"
}
```

Replying to [comment:15 vdelecroix]:
> Replying to [comment:14 mkoeppe]:
> > This "positive orthant" business, I think, is just a peculiarity of the Omega approach but I don't think it's makes sense to expose it to the user. Maybe raise a `NotImplementedError` instead if the given polytope is not contained in the positive orthant?
> 
> +1. The API would be much better (and allows extension in the future to count all points (that can already be done intersecting with the 2<sup>dim</sup> orthants and applying symmetries)).

I agree. Changed the documentation and added a few lines to check if polyhedron is in the nonnegative orthant; otherwise raise `NotImplementedError`. (Created a follow up ticket #22099 for the extension to arbitary corrdinates.)



---

archive/issue_comments_302919.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-27T10:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302919",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302920.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-29T02:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302920",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302921.json:
```json
{
    "body": "\n```\nsage: P = Polyhedron(vertices=[[1], [5]])\nsage: P.generating_function_of_integral_points()\nTypeError: unsupported operand type(s) for -: 'tuple' and 'tuple'\n```\n",
    "created_at": "2016-12-29T02:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302921",
    "user": "mkoeppe"
}
```


```
sage: P = Polyhedron(vertices=[[1], [5]])
sage: P.generating_function_of_integral_points()
TypeError: unsupported operand type(s) for -: 'tuple' and 'tuple'
```




---

archive/issue_comments_302922.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-29T08:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302922",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302923.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-29T08:34:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302923",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302924.json:
```json
{
    "body": "Replying to [comment:21 mkoeppe]:\n> {{{\n> sage: P = Polyhedron(vertices=[[1], [5]])\n> sage: P.generating_function_of_integral_points()\n> TypeError: unsupported operand type(s) for -: 'tuple' and 'tuple'\n> }}}\n\nFixed.",
    "created_at": "2016-12-29T08:34:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302924",
    "user": "dkrenn"
}
```

Replying to [comment:21 mkoeppe]:
> {{{
> sage: P = Polyhedron(vertices=[[1], [5]])
> sage: P.generating_function_of_integral_points()
> TypeError: unsupported operand type(s) for -: 'tuple' and 'tuple'
> }}}

Fixed.



---

archive/issue_comments_302925.json:
```json
{
    "body": "I think the name of the variables used in the generating function should be a user option",
    "created_at": "2016-12-29T17:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302925",
    "user": "mkoeppe"
}
```

I think the name of the variables used in the generating function should be a user option



---

archive/issue_comments_302926.json:
```json
{
    "body": "\n```\nsage: P = Polyhedron(rays=[(1, sqrt(2)), (0, 1)])\nsage: P.generating_function_of_integral_points()\n1 * (-y0 + 1)^-1 * (-y1 + 1)^-1\n```\n\nI had hoped for an error",
    "created_at": "2016-12-29T17:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302926",
    "user": "mkoeppe"
}
```


```
sage: P = Polyhedron(rays=[(1, sqrt(2)), (0, 1)])
sage: P.generating_function_of_integral_points()
1 * (-y0 + 1)^-1 * (-y1 + 1)^-1
```

I had hoped for an error



---

archive/issue_comments_302927.json:
```json
{
    "body": "Also I think the method `generating_function_of_integral_points` should have an `algorithm` keyword. For polytopes, could provide a naive algorithm that just collects the monomials corresponding to `integral_points`. And another algorithm would be to just call LattE. \n\nVarious algorithms options such as `result_as_tuple` are not sufficiently documented.\n\nFor the LattE algorithm, the best output format would be a sum of Factorizations. Is this what `result_as_tuple` can represent?",
    "created_at": "2016-12-29T18:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302927",
    "user": "mkoeppe"
}
```

Also I think the method `generating_function_of_integral_points` should have an `algorithm` keyword. For polytopes, could provide a naive algorithm that just collects the monomials corresponding to `integral_points`. And another algorithm would be to just call LattE. 

Various algorithms options such as `result_as_tuple` are not sufficiently documented.

For the LattE algorithm, the best output format would be a sum of Factorizations. Is this what `result_as_tuple` can represent?



---

archive/issue_comments_302928.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-29T18:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302928",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302929.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-30T17:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302929",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302930.json:
```json
{
    "body": "Replying to [comment:24 mkoeppe]:\n> I think the name of the variables used in the generating function should be a user option\n\nTrue; option is now available :)",
    "created_at": "2016-12-30T17:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302930",
    "user": "dkrenn"
}
```

Replying to [comment:24 mkoeppe]:
> I think the name of the variables used in the generating function should be a user option

True; option is now available :)



---

archive/issue_comments_302931.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> {{{\n> sage: P = Polyhedron(rays=[(1, sqrt(2)), (0, 1)])\n> sage: P.generating_function_of_integral_points()\n> 1 * (-y0 + 1)^-1 * (-y1 + 1)^-1\n> }}}\n> I had hoped for an error\n\nNow the base ring of the polyhedron is inspected.",
    "created_at": "2016-12-30T17:46:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302931",
    "user": "dkrenn"
}
```

Replying to [comment:25 mkoeppe]:
> {{{
> sage: P = Polyhedron(rays=[(1, sqrt(2)), (0, 1)])
> sage: P.generating_function_of_integral_points()
> 1 * (-y0 + 1)^-1 * (-y1 + 1)^-1
> }}}
> I had hoped for an error

Now the base ring of the polyhedron is inspected.



---

archive/issue_comments_302932.json:
```json
{
    "body": "Replying to [comment:26 mkoeppe]:\n> Various algorithms options such as `result_as_tuple` are not sufficiently documented.\n\nDocs extended.",
    "created_at": "2016-12-30T17:47:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302932",
    "user": "dkrenn"
}
```

Replying to [comment:26 mkoeppe]:
> Various algorithms options such as `result_as_tuple` are not sufficiently documented.

Docs extended.



---

archive/issue_comments_302933.json:
```json
{
    "body": "Replying to [comment:26 mkoeppe]:\n> Also I think the method `generating_function_of_integral_points` should have an `algorithm` keyword. For polytopes, could provide a naive algorithm that just collects the monomials corresponding to `integral_points`. And another algorithm would be to just call LattE. \n\nAs this does not change the interface, only extends it, I have put this on the follow--up enhancement ticket #22111.",
    "created_at": "2016-12-30T17:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302933",
    "user": "dkrenn"
}
```

Replying to [comment:26 mkoeppe]:
> Also I think the method `generating_function_of_integral_points` should have an `algorithm` keyword. For polytopes, could provide a naive algorithm that just collects the monomials corresponding to `integral_points`. And another algorithm would be to just call LattE. 

As this does not change the interface, only extends it, I have put this on the follow--up enhancement ticket #22111.



---

archive/issue_comments_302934.json:
```json
{
    "body": "Replying to [comment:26 mkoeppe]:\n> For the LattE algorithm, the best output format would be a sum of Factorizations. Is this what `result_as_tuple` can represent?\n\nYes, correct. (As mentioned, I've extended the docstring of this option.)",
    "created_at": "2016-12-30T17:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302934",
    "user": "dkrenn"
}
```

Replying to [comment:26 mkoeppe]:
> For the LattE algorithm, the best output format would be a sum of Factorizations. Is this what `result_as_tuple` can represent?

Yes, correct. (As mentioned, I've extended the docstring of this option.)



---

archive/issue_comments_302935.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-30T17:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302935",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302936.json:
```json
{
    "body": "Replying to [comment:31 dkrenn]:\n> Replying to [comment:26 mkoeppe]:\n> > Various algorithms options such as `result_as_tuple` are not sufficiently documented.\n> \n> Docs extended.\n\nWouldn't it be nicer to have a class to represent such sums, much like Factorization represents products?",
    "created_at": "2016-12-30T23:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302936",
    "user": "mkoeppe"
}
```

Replying to [comment:31 dkrenn]:
> Replying to [comment:26 mkoeppe]:
> > Various algorithms options such as `result_as_tuple` are not sufficiently documented.
> 
> Docs extended.

Wouldn't it be nicer to have a class to represent such sums, much like Factorization represents products?



---

archive/issue_comments_302937.json:
```json
{
    "body": "Replying to [comment:35 mkoeppe]:\n> Replying to [comment:31 dkrenn]:\n> > Replying to [comment:26 mkoeppe]:\n> > > Various algorithms options such as `result_as_tuple` are not sufficiently documented.\n> > \n> > Docs extended.\n> \n> Wouldn't it be nicer to have a class to represent such sums, much like Factorization represents products?\n\nYes, indeed. I had this (a class `Summandization` in some draft, but as it is nowhere else in [SageMath](SageMath) (e.g. `partial_fraction_decomposition`), I decided to keep it simple and consistent and use a tuple.",
    "created_at": "2017-01-02T12:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302937",
    "user": "dkrenn"
}
```

Replying to [comment:35 mkoeppe]:
> Replying to [comment:31 dkrenn]:
> > Replying to [comment:26 mkoeppe]:
> > > Various algorithms options such as `result_as_tuple` are not sufficiently documented.
> > 
> > Docs extended.
> 
> Wouldn't it be nicer to have a class to represent such sums, much like Factorization represents products?

Yes, indeed. I had this (a class `Summandization` in some draft, but as it is nowhere else in [SageMath](SageMath) (e.g. `partial_fraction_decomposition`), I decided to keep it simple and consistent and use a tuple.



---

archive/issue_comments_302938.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-02-09T09:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302938",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302939.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-24T19:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302939",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302940.json:
```json
{
    "body": "Replying to [comment:39 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[78c8278](https://git.sagemath.org/sage.git/commit/?id=78c82783934627a550c1189c743d361b1e86c903)||`precise description of input/output of helper functions`||\n\nI've written a better description of the helper functions to make reviewing easier.",
    "created_at": "2017-02-24T19:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302940",
    "user": "dkrenn"
}
```

Replying to [comment:39 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[78c8278](https://git.sagemath.org/sage.git/commit/?id=78c82783934627a550c1189c743d361b1e86c903)||`precise description of input/output of helper functions`||

I've written a better description of the helper functions to make reviewing easier.



---

archive/issue_comments_302941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-24T19:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302941",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302942.json:
```json
{
    "body": "needs rebasing",
    "created_at": "2017-03-02T11:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302942",
    "user": "mkoeppe"
}
```

needs rebasing



---

archive/issue_comments_302943.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-02T11:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302943",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T11:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302944",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302945.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-02T11:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302945",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302946.json:
```json
{
    "body": "Replying to [comment:42 mkoeppe]:\n> needs rebasing\n\nThis was because of a change in one of its dependencies. Merged in; should now work again.",
    "created_at": "2017-03-02T11:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302946",
    "user": "dkrenn"
}
```

Replying to [comment:42 mkoeppe]:
> needs rebasing

This was because of a change in one of its dependencies. Merged in; should now work again.



---

archive/issue_comments_302947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-10T12:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302947",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-04-13T11:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302948",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_302949.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-13T11:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302949",
    "user": "dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302950.json:
```json
{
    "body": "- Merged in 7.6, as some error messages concerning polynomial rings have changed and thus doctests failed.\n- Merged in #22803, which simplifies the some generating functions due to cancellations\n- Fixed a small bug.\n- Restructured/refactored some code to make testing the overall result easier.\n- Extended the existing doctests to see the correctness of the results.\n\n(Set it to needs work as some docstrings are not yet written.)",
    "created_at": "2017-04-13T11:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302950",
    "user": "dkrenn"
}
```

- Merged in 7.6, as some error messages concerning polynomial rings have changed and thus doctests failed.
- Merged in #22803, which simplifies the some generating functions due to cancellations
- Fixed a small bug.
- Restructured/refactored some code to make testing the overall result easier.
- Extended the existing doctests to see the correctness of the results.

(Set it to needs work as some docstrings are not yet written.)



---

archive/issue_comments_302951.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-13T11:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302951",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302952.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-13T11:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302952",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302953.json:
```json
{
    "body": "2 failing doctests, see patchbot report (wrong import)",
    "created_at": "2017-05-04T08:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302953",
    "user": "chapoton"
}
```

2 failing doctests, see patchbot report (wrong import)



---

archive/issue_comments_302954.json:
```json
{
    "body": "ping ? just 2 imports need to be changed..",
    "created_at": "2017-05-20T07:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302954",
    "user": "chapoton"
}
```

ping ? just 2 imports need to be changed..



---

archive/issue_comments_302955.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-20T07:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302955",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302956.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-20T09:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302956",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302957.json:
```json
{
    "body": "Replying to [comment:52 chapoton]:\n> ping ? just 2 imports need to be changed..\n\nSorry, I am currently some kind of busy. However, changed the import. Let's see what the patchbot says now ;)",
    "created_at": "2017-05-20T09:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302957",
    "user": "dkrenn"
}
```

Replying to [comment:52 chapoton]:
> ping ? just 2 imports need to be changed..

Sorry, I am currently some kind of busy. However, changed the import. Let's see what the patchbot says now ;)



---

archive/issue_comments_302958.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-20T09:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302958",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302959.json:
```json
{
    "body": "Trivial remark: some \"laurent\" are missing their capitals.",
    "created_at": "2017-05-22T20:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302959",
    "user": "chapoton"
}
```

Trivial remark: some "laurent" are missing their capitals.



---

archive/issue_comments_302960.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-24T08:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302960",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302961.json:
```json
{
    "body": "and one failing doctest",
    "created_at": "2017-11-24T08:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302961",
    "user": "chapoton"
}
```

and one failing doctest



---

archive/issue_comments_302962.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-27T13:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302962",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302963.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-27T13:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302963",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302964.json:
```json
{
    "body": "Replying to [comment:56 chapoton]:\n> Trivial remark: some \"laurent\" are missing their capitals.\n\nFixed in \u200b0f2d193",
    "created_at": "2018-08-27T13:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302964",
    "user": "dkrenn"
}
```

Replying to [comment:56 chapoton]:
> Trivial remark: some "laurent" are missing their capitals.

Fixed in ​0f2d193



---

archive/issue_comments_302965.json:
```json
{
    "body": "Replying to [comment:57 chapoton]:\n> and one failing doctest\n\nFixed.",
    "created_at": "2018-08-27T13:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302965",
    "user": "dkrenn"
}
```

Replying to [comment:57 chapoton]:
> and one failing doctest

Fixed.



---

archive/issue_comments_302966.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-27T13:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302966",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302967.json:
```json
{
    "body": "you can just remove the dependencies (empty this field), once closed",
    "created_at": "2018-08-27T13:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302967",
    "user": "chapoton"
}
```

you can just remove the dependencies (empty this field), once closed



---

archive/issue_comments_302968.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-27T13:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302968",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302969.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-28T11:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302969",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302970.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-10T08:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302970",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302971.json:
```json
{
    "body": "Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302971",
    "user": "embray"
}
```

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_302972.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-09-25T13:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302972",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302973.json:
```json
{
    "body": "one failing doctest.",
    "created_at": "2019-09-25T13:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302973",
    "user": "chapoton"
}
```

one failing doctest.



---

archive/issue_comments_302974.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302974",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_302975.json:
```json
{
    "body": "pushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302975",
    "user": "mkoeppe"
}
```

pushing these forward to 9.2



---

archive/issue_comments_302976.json:
```json
{
    "body": "Looks like some py3 issues need fixing",
    "created_at": "2020-08-27T04:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302976",
    "user": "mkoeppe"
}
```

Looks like some py3 issues need fixing



---

archive/issue_comments_302977.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302977",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_302978.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-28T08:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302978",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302979.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-28T08:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302979",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302980.json:
```json
{
    "body": "Actually, looked at this ticket just yesterday; now merged in 9.3, fixed the py3 issues and make it pass the tests again.",
    "created_at": "2021-06-28T08:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302980",
    "user": "dkrenn"
}
```

Actually, looked at this ticket just yesterday; now merged in 9.3, fixed the py3 issues and make it pass the tests again.



---

archive/issue_comments_302981.json:
```json
{
    "body": "I've skim read all the comments here; AFAICS, 3 to 4 years ago, the review seems to have completed but it hasn't made the step to a positive review. Anything that I missed?",
    "created_at": "2021-06-28T09:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302981",
    "user": "dkrenn"
}
```

I've skim read all the comments here; AFAICS, 3 to 4 years ago, the review seems to have completed but it hasn't made the step to a positive review. Anything that I missed?



---

archive/issue_comments_302982.json:
```json
{
    "body": "Replying to [comment:79 dkrenn]:\n> I've skim read all the comments here; AFAICS, 3 to 4 years ago, the review seems to have been completed but it hasn't made the step to a positive review. Anything that I missed?",
    "created_at": "2021-06-28T09:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302982",
    "user": "dkrenn"
}
```

Replying to [comment:79 dkrenn]:
> I've skim read all the comments here; AFAICS, 3 to 4 years ago, the review seems to have been completed but it hasn't made the step to a positive review. Anything that I missed?



---

archive/issue_comments_302983.json:
```json
{
    "body": "I think `prefix_variable_name` should be replaced by handling `name` and `names` arguments, like for example the `PolynomialRing` constructor does.",
    "created_at": "2021-06-28T15:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302983",
    "user": "mkoeppe"
}
```

I think `prefix_variable_name` should be replaced by handling `name` and `names` arguments, like for example the `PolynomialRing` constructor does.



---

archive/issue_comments_302984.json:
```json
{
    "body": "Also, codespell from `./sage -tox -- src/sage/geometry/polyhedron/generating_function.py` indicates the correction\n\n```\nsage/geometry/polyhedron/generating_function.py:110: handeled ==> handled, handheld\n```\n\n\nIn the same line where this typo appears, there is another one: polyhedon->polyhedron",
    "created_at": "2021-06-28T15:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302984",
    "user": "mkoeppe"
}
```

Also, codespell from `./sage -tox -- src/sage/geometry/polyhedron/generating_function.py` indicates the correction

```
sage/geometry/polyhedron/generating_function.py:110: handeled ==> handled, handheld
```


In the same line where this typo appears, there is another one: polyhedon->polyhedron



---

archive/issue_comments_302985.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T16:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302985",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302986.json:
```json
{
    "body": "Thank you for your fast replies. I've addressed both ticket:22067#comment:81 and ticket:22067#comment:82, need review.",
    "created_at": "2021-06-29T17:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302986",
    "user": "dkrenn"
}
```

Thank you for your fast replies. I've addressed both ticket:22067#comment:81 and ticket:22067#comment:82, need review.



---

archive/issue_comments_302987.json:
```json
{
    "body": "There is still a `prefix_variable_name` in a docstring",
    "created_at": "2021-06-29T17:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302987",
    "user": "mkoeppe"
}
```

There is still a `prefix_variable_name` in a docstring



---

archive/issue_comments_302988.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T17:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302988",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302989.json:
```json
{
    "body": "Replying to [comment:85 mkoeppe]:\n> There is still a `prefix_variable_name` in a docstring\n\nIndeed, thanks, fixed.",
    "created_at": "2021-06-29T17:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302989",
    "user": "dkrenn"
}
```

Replying to [comment:85 mkoeppe]:
> There is still a `prefix_variable_name` in a docstring

Indeed, thanks, fixed.



---

archive/issue_comments_302990.json:
```json
{
    "body": "Also this docstring needs work\n\n```\n+def compositions_mod(u, m, r=0, multidimensional=False):\n+    r\"\"\"\n+    Return an iterable of tuples `a` such that `a u^T \\equiv r \\mod m`.\n```\n\nIt should make clear that the items of `a` are elements of `Zmod(m)`.\nIs there are reason why you don't make the results vectors over Zmod(m)?\n\nAlso this:\n\n```\n+\n+    return _compositions_mod_(u, r)\n```\n\nI think should be using `yield from`.",
    "created_at": "2021-06-29T17:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302990",
    "user": "mkoeppe"
}
```

Also this docstring needs work

```
+def compositions_mod(u, m, r=0, multidimensional=False):
+    r"""
+    Return an iterable of tuples `a` such that `a u^T \equiv r \mod m`.
```

It should make clear that the items of `a` are elements of `Zmod(m)`.
Is there are reason why you don't make the results vectors over Zmod(m)?

Also this:

```
+
+    return _compositions_mod_(u, r)
```

I think should be using `yield from`.



---

archive/issue_comments_302991.json:
```json
{
    "body": "\n```\n+def _compositions_mod_(u, r):\n+    r\"\"\"\n+    Helper function to :func:`compositions_mod`.\n```\n\nshould still describe what it does and explain input and output",
    "created_at": "2021-06-29T17:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302991",
    "user": "mkoeppe"
}
```


```
+def _compositions_mod_(u, r):
+    r"""
+    Helper function to :func:`compositions_mod`.
```

should still describe what it does and explain input and output



---

archive/issue_comments_302992.json:
```json
{
    "body": "\n```\n+        split = iter((ph, ph.Hrepresentation_str(**Hrepresentation_str_options))\n+                     for ph in split)\n```\n\nthis is a \"useless use of iter\" -- the generator expression is already iterable.\n(similarly in several other places in the file)",
    "created_at": "2021-06-29T17:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302992",
    "user": "mkoeppe"
}
```


```
+        split = iter((ph, ph.Hrepresentation_str(**Hrepresentation_str_options))
+                     for ph in split)
```

this is a "useless use of iter" -- the generator expression is already iterable.
(similarly in several other places in the file)



---

archive/issue_comments_302993.json:
```json
{
    "body": "\n```\n+    v = u[0]\n+    m = max(vv.order() for vv in v)\n+    Z = Zmod(m)\n+    for j in srange(m):\n```\n\nI don't think max is correct here, shouldn't this be lcm?",
    "created_at": "2021-06-29T17:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302993",
    "user": "mkoeppe"
}
```


```
+    v = u[0]
+    m = max(vv.order() for vv in v)
+    Z = Zmod(m)
+    for j in srange(m):
```

I don't think max is correct here, shouldn't this be lcm?



---

archive/issue_comments_302994.json:
```json
{
    "body": "Also\n\n``` \n+    def _transform_(self):\n```\n\n... I think standard naming for internal functions would be `_transform`",
    "created_at": "2021-06-29T17:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302994",
    "user": "mkoeppe"
}
```

Also

``` 
+    def _transform_(self):
```

... I think standard naming for internal functions would be `_transform`



---

archive/issue_comments_302995.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T18:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302995",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302996.json:
```json
{
    "body": "Replying to [comment:89 mkoeppe]:\n> {{{\n> +def _compositions_mod_(u, r):\n> +    r\"\"\"\n> +    Helper function to :func:`compositions_mod`.\n> }}}\n> should still describe what it does and explain input and output\n\nReading this again, I think, this is not a good style, as `_composition_mod_` is basically needed/used as this function calles recursively itself. I've renamed it to `recursively_build_compositions` and moved it into the main function, so slightly refactored the code.",
    "created_at": "2021-06-29T18:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302996",
    "user": "dkrenn"
}
```

Replying to [comment:89 mkoeppe]:
> {{{
> +def _compositions_mod_(u, r):
> +    r"""
> +    Helper function to :func:`compositions_mod`.
> }}}
> should still describe what it does and explain input and output

Reading this again, I think, this is not a good style, as `_composition_mod_` is basically needed/used as this function calles recursively itself. I've renamed it to `recursively_build_compositions` and moved it into the main function, so slightly refactored the code.



---

archive/issue_comments_302997.json:
```json
{
    "body": "Replying to [comment:88 mkoeppe]:\n> Also this docstring needs work\n> {{{\n> +def compositions_mod(u, m, r=0, multidimensional=False):\n> +    r\"\"\"\n> +    Return an iterable of tuples `a` such that `a u^T \\equiv r \\mod m`.\n> }}}\n> It should make clear that the items of `a` are elements of `Zmod(m)`.\n\nDocstrings extended to state precisely what the items are.",
    "created_at": "2021-06-29T18:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302997",
    "user": "dkrenn"
}
```

Replying to [comment:88 mkoeppe]:
> Also this docstring needs work
> {{{
> +def compositions_mod(u, m, r=0, multidimensional=False):
> +    r"""
> +    Return an iterable of tuples `a` such that `a u^T \equiv r \mod m`.
> }}}
> It should make clear that the items of `a` are elements of `Zmod(m)`.

Docstrings extended to state precisely what the items are.



---

archive/issue_comments_302998.json:
```json
{
    "body": "Replying to [comment:88 mkoeppe]:\n> Is there are reason why you don't make the results vectors over Zmod(m)?\n\nYes. The elements do not have all neccessarily the same modulus; documented this now as well.",
    "created_at": "2021-06-29T18:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302998",
    "user": "dkrenn"
}
```

Replying to [comment:88 mkoeppe]:
> Is there are reason why you don't make the results vectors over Zmod(m)?

Yes. The elements do not have all neccessarily the same modulus; documented this now as well.



---

archive/issue_comments_302999.json:
```json
{
    "body": "Replying to [comment:88 mkoeppe]:\n> Also this:\n> {{{\n> +\n> +    return _compositions_mod_(u, r)\n> }}}\n> I think should be using `yield from`.\n\nThis does not change anything at all as `_compositions_mod_` is already a generator expression (and FWIW no for-loop is used anyways). What is the reason for doing this? A semantic reason maybe?\n(I've done the change, but it can be reverted easily if there is no reason for using `yield from`.)",
    "created_at": "2021-06-29T18:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-302999",
    "user": "dkrenn"
}
```

Replying to [comment:88 mkoeppe]:
> Also this:
> {{{
> +
> +    return _compositions_mod_(u, r)
> }}}
> I think should be using `yield from`.

This does not change anything at all as `_compositions_mod_` is already a generator expression (and FWIW no for-loop is used anyways). What is the reason for doing this? A semantic reason maybe?
(I've done the change, but it can be reverted easily if there is no reason for using `yield from`.)



---

archive/issue_comments_303000.json:
```json
{
    "body": "Replying to [comment:90 mkoeppe]:\n> {{{\n> +        split = iter((ph, ph.Hrepresentation_str(**Hrepresentation_str_options))\n> +                     for ph in split)\n> }}}\n> this is a \"useless use of iter\" -- the generator expression is already iterable.\n> (similarly in several other places in the file)\n\nIndeed; removed (all).",
    "created_at": "2021-06-29T18:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303000",
    "user": "dkrenn"
}
```

Replying to [comment:90 mkoeppe]:
> {{{
> +        split = iter((ph, ph.Hrepresentation_str(**Hrepresentation_str_options))
> +                     for ph in split)
> }}}
> this is a "useless use of iter" -- the generator expression is already iterable.
> (similarly in several other places in the file)

Indeed; removed (all).



---

archive/issue_comments_303001.json:
```json
{
    "body": "Replying to [comment:91 mkoeppe]:\n> {{{\n> +    v = u[0]\n> +    m = max(vv.order() for vv in v)\n> +    Z = Zmod(m)\n> +    for j in srange(m):\n> }}}\n> I don't think max is correct here, shouldn't this be lcm?\n\nOuch, yes, correct, it should definitely be `lcm`. How could I miss this? :) Changed.",
    "created_at": "2021-06-29T18:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303001",
    "user": "dkrenn"
}
```

Replying to [comment:91 mkoeppe]:
> {{{
> +    v = u[0]
> +    m = max(vv.order() for vv in v)
> +    Z = Zmod(m)
> +    for j in srange(m):
> }}}
> I don't think max is correct here, shouldn't this be lcm?

Ouch, yes, correct, it should definitely be `lcm`. How could I miss this? :) Changed.



---

archive/issue_comments_303002.json:
```json
{
    "body": "it would be good to add a doctest in which lcm is different from max.",
    "created_at": "2021-06-29T18:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303002",
    "user": "mkoeppe"
}
```

it would be good to add a doctest in which lcm is different from max.



---

archive/issue_comments_303003.json:
```json
{
    "body": "Replying to [comment:92 mkoeppe]:\n> Also\n> {{{ \n> +    def _transform_(self):\n> }}}\n> ... I think standard naming for internal functions would be `_transform` \n\nI do think both conventions are used\n\n```\ndakrenn@nops:/opt/sage/9.3$ ./sage -grep \"def _[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9](\" | wc -l\n5899\ndakrenn@nops:/opt/sage/9.3$ ./sage -grep \"def _[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9]_(\" | wc -l\n5908\n```\n\nAlso, `_..._` is used in methods like `_repr_`, therefore I'm in favor of keeping it.",
    "created_at": "2021-06-29T18:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303003",
    "user": "dkrenn"
}
```

Replying to [comment:92 mkoeppe]:
> Also
> {{{ 
> +    def _transform_(self):
> }}}
> ... I think standard naming for internal functions would be `_transform` 

I do think both conventions are used

```
dakrenn@nops:/opt/sage/9.3$ ./sage -grep "def _[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9](" | wc -l
5899
dakrenn@nops:/opt/sage/9.3$ ./sage -grep "def _[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9]_(" | wc -l
5908
```

Also, `_..._` is used in methods like `_repr_`, therefore I'm in favor of keeping it.



---

archive/issue_comments_303004.json:
```json
{
    "body": "Replying to [comment:100 mkoeppe]:\n> it would be good to add a doctest in which lcm is different from max.\n\nThis is already the case in the existing\n\n```\n        sage: list(compositions_mod([(1, 2), (2, 2), (3, 2)], 6,\n        ....:                       multidimensional=True))\n        [(0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 0, 3), (4, 1, 4), (5, 2, 5)]\n```\n\n(which changed after switching to `lcm`)",
    "created_at": "2021-06-29T18:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303004",
    "user": "dkrenn"
}
```

Replying to [comment:100 mkoeppe]:
> it would be good to add a doctest in which lcm is different from max.

This is already the case in the existing

```
        sage: list(compositions_mod([(1, 2), (2, 2), (3, 2)], 6,
        ....:                       multidimensional=True))
        [(0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 0, 3), (4, 1, 4), (5, 2, 5)]
```

(which changed after switching to `lcm`)



---

archive/issue_comments_303005.json:
```json
{
    "body": "Replying to [comment:101 dkrenn]:\n> `_..._` is used in methods like `_repr_`\n\nYes, but this specifically mimics the \"dunder\" method `__repr__` to which it is connected.",
    "created_at": "2021-06-29T18:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303005",
    "user": "mkoeppe"
}
```

Replying to [comment:101 dkrenn]:
> `_..._` is used in methods like `_repr_`

Yes, but this specifically mimics the "dunder" method `__repr__` to which it is connected.



---

archive/issue_comments_303006.json:
```json
{
    "body": "Replying to [comment:102 dkrenn]:\n> Replying to [comment:100 mkoeppe]:\n> > it would be good to add a doctest in which lcm is different from max.\n> \n> This is already the case in the existing\n> {{{\n>         sage: list(compositions_mod([(1, 2), (2, 2), (3, 2)], 6,\n>         ....:                       multidimensional=True))\n>         [(0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 0, 3), (4, 1, 4), (5, 2, 5)]\n> }}}\n> (which changed after switching to `lcm`)\nOK, thanks, I hadn't noticed that",
    "created_at": "2021-06-29T18:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303006",
    "user": "mkoeppe"
}
```

Replying to [comment:102 dkrenn]:
> Replying to [comment:100 mkoeppe]:
> > it would be good to add a doctest in which lcm is different from max.
> 
> This is already the case in the existing
> {{{
>         sage: list(compositions_mod([(1, 2), (2, 2), (3, 2)], 6,
>         ....:                       multidimensional=True))
>         [(0, 0, 0), (1, 1, 1), (2, 2, 2), (3, 0, 3), (4, 1, 4), (5, 2, 5)]
> }}}
> (which changed after switching to `lcm`)
OK, thanks, I hadn't noticed that



---

archive/issue_comments_303007.json:
```json
{
    "body": "Replying to [comment:97 dkrenn]:\n> Replying to [comment:88 mkoeppe]:\n> > Also this:\n> > {{{\n> > +\n> > +    return _compositions_mod_(u, r)\n> > }}}\n> > I think should be using `yield from`.\n> \n> This does not change anything at all as `_compositions_mod_` is already a generator expression (and FWIW no for-loop is used anyways). What is the reason for doing this? A semantic reason maybe?\n> (I've done the change, but it can be reverted easily if there is no reason for using `yield from`.)\n\nIt makes of course no practical difference in this example. \nBut it is the syntactic presence of `yield` in the body of a function that changes a function to a generator. Consider:\n\n```\nsage: def test():\n....:     if False: yield 1\n....: \nsage: test()\n<generator object test at 0x105434970>\n```\n\nSo it is good practice to use `yield from` to pass on another generator, instead of just returning the generator object.",
    "created_at": "2021-06-29T18:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303007",
    "user": "mkoeppe"
}
```

Replying to [comment:97 dkrenn]:
> Replying to [comment:88 mkoeppe]:
> > Also this:
> > {{{
> > +
> > +    return _compositions_mod_(u, r)
> > }}}
> > I think should be using `yield from`.
> 
> This does not change anything at all as `_compositions_mod_` is already a generator expression (and FWIW no for-loop is used anyways). What is the reason for doing this? A semantic reason maybe?
> (I've done the change, but it can be reverted easily if there is no reason for using `yield from`.)

It makes of course no practical difference in this example. 
But it is the syntactic presence of `yield` in the body of a function that changes a function to a generator. Consider:

```
sage: def test():
....:     if False: yield 1
....: 
sage: test()
<generator object test at 0x105434970>
```

So it is good practice to use `yield from` to pass on another generator, instead of just returning the generator object.



---

archive/issue_comments_303008.json:
```json
{
    "body": "Replying to [comment:103 mkoeppe]:\n> Replying to [comment:101 dkrenn]:\n> > `_..._` is used in methods like `_repr_`\n> \n> Yes, but this specifically mimics the \"dunder\" method `__repr__` to which it is connected.\n\nI see, thank you for this explanation. Anyways, the function discussed was renamed and refactored.",
    "created_at": "2021-06-29T18:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303008",
    "user": "dkrenn"
}
```

Replying to [comment:103 mkoeppe]:
> Replying to [comment:101 dkrenn]:
> > `_..._` is used in methods like `_repr_`
> 
> Yes, but this specifically mimics the "dunder" method `__repr__` to which it is connected.

I see, thank you for this explanation. Anyways, the function discussed was renamed and refactored.



---

archive/issue_comments_303009.json:
```json
{
    "body": "Replying to [comment:105 mkoeppe]:\n> But it is the syntactic presence of `yield` in the body of a function that changes a function to a generator. Consider:\n> {{{\n> sage: def test():\n> ....:     if False: yield 1\n> ....: \n> sage: test()\n> <generator object test at 0x105434970>\n> }}}\n> So it is good practice to use `yield from` to pass on another generator, instead of just returning the generator object.\n\nOk, thank you. Yes, we then should keep the `yields from`.",
    "created_at": "2021-06-29T18:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303009",
    "user": "dkrenn"
}
```

Replying to [comment:105 mkoeppe]:
> But it is the syntactic presence of `yield` in the body of a function that changes a function to a generator. Consider:
> {{{
> sage: def test():
> ....:     if False: yield 1
> ....: 
> sage: test()
> <generator object test at 0x105434970>
> }}}
> So it is good practice to use `yield from` to pass on another generator, instead of just returning the generator object.

Ok, thank you. Yes, we then should keep the `yields from`.



---

archive/issue_comments_303010.json:
```json
{
    "body": "\n```\n+    if split is True:\n+        split = (\n+            (Polyhedron(\n+                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)\n+                            for i in range(d+1))\n+                      for a, b in zip(pi[:-1], pi[1:])]),\n+             'b{}'.format(pi[0]-1) +\n+             ''.join((' <= ' if a < b else ' < ') +\n+                     'b{}'.format(b-1)\n+                     for a, b in zip(pi[:-1], pi[1:])))\n+            for pi in Permutations(d))\n+\n```\n\nThis part looks a bit magical, could you illustrate this with doctests somewhere?",
    "created_at": "2021-06-29T19:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303010",
    "user": "mkoeppe"
}
```


```
+    if split is True:
+        split = (
+            (Polyhedron(
+                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)
+                            for i in range(d+1))
+                      for a, b in zip(pi[:-1], pi[1:])]),
+             'b{}'.format(pi[0]-1) +
+             ''.join((' <= ' if a < b else ' < ') +
+                     'b{}'.format(b-1)
+                     for a, b in zip(pi[:-1], pi[1:])))
+            for pi in Permutations(d))
+
```

This part looks a bit magical, could you illustrate this with doctests somewhere?



---

archive/issue_comments_303011.json:
```json
{
    "body": "Also, the docstring of `compositions_mod` should probably use the word \"all\" somewhere. Are these ALL solutions to this modular equation? Is every solution returned exactly once? etc. \n\nAlso the examples should be revised because in the output the crucial choice of the modulus for each of the components is not visible.\n\nOverall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.",
    "created_at": "2021-06-29T19:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303011",
    "user": "mkoeppe"
}
```

Also, the docstring of `compositions_mod` should probably use the word "all" somewhere. Are these ALL solutions to this modular equation? Is every solution returned exactly once? etc. 

Also the examples should be revised because in the output the crucial choice of the modulus for each of the components is not visible.

Overall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.



---

archive/issue_comments_303012.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-30T17:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303012",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_303013.json:
```json
{
    "body": "Replying to [comment:109 mkoeppe]:\n> Also, the docstring of `compositions_mod` should probably use the word \"all\" somewhere. Are these ALL solutions to this modular equation? Is every solution returned exactly once? etc. \n\nDone.\n\n\n> Also the examples should be revised because in the output the crucial choice of the modulus for each of the components is not visible.\n\nDone.\n\n> Overall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.\n\nThe helper function `compositions_mod` returns the results exactly as needed in the class `TransformMod`. I suggest to do this \"upgrade\" of the function on a follow-up ticket.",
    "created_at": "2021-06-30T17:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303013",
    "user": "dkrenn"
}
```

Replying to [comment:109 mkoeppe]:
> Also, the docstring of `compositions_mod` should probably use the word "all" somewhere. Are these ALL solutions to this modular equation? Is every solution returned exactly once? etc. 

Done.


> Also the examples should be revised because in the output the crucial choice of the modulus for each of the components is not visible.

Done.

> Overall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.

The helper function `compositions_mod` returns the results exactly as needed in the class `TransformMod`. I suggest to do this "upgrade" of the function on a follow-up ticket.



---

archive/issue_comments_303014.json:
```json
{
    "body": "Replying to [comment:108 mkoeppe]:\n> This part looks a bit magical, could you illustrate this with doctests somewhere?\n\nNot that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.",
    "created_at": "2021-06-30T17:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303014",
    "user": "dkrenn"
}
```

Replying to [comment:108 mkoeppe]:
> This part looks a bit magical, could you illustrate this with doctests somewhere?

Not that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.



---

archive/issue_comments_303015.json:
```json
{
    "body": "typo: \"substitited\"",
    "created_at": "2021-06-30T18:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303015",
    "user": "mkoeppe"
}
```

typo: "substitited"



---

archive/issue_comments_303016.json:
```json
{
    "body": "Replying to [comment:111 dkrenn]:\n> > Overall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.\n> \n> The helper function `compositions_mod` returns the results exactly as needed in the class `TransformMod`. I suggest to do this \"upgrade\" of the function on a follow-up ticket.\n\nThanks for the changes you made. I agree, this part is sufficiently clear now",
    "created_at": "2021-06-30T18:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303016",
    "user": "mkoeppe"
}
```

Replying to [comment:111 dkrenn]:
> > Overall, I think I would be happier if this whole thing could be redone in the language of point lattices (`sage.modules.free_module_integer`) and their cosets --- but I have not looked at how you use the result.
> 
> The helper function `compositions_mod` returns the results exactly as needed in the class `TransformMod`. I suggest to do this "upgrade" of the function on a follow-up ticket.

Thanks for the changes you made. I agree, this part is sufficiently clear now



---

archive/issue_comments_303017.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-30T18:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303017",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_303018.json:
```json
{
    "body": "Replying to [comment:113 mkoeppe]:\n> typo: \"substitited\"\n\nFixed.",
    "created_at": "2021-06-30T18:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303018",
    "user": "dkrenn"
}
```

Replying to [comment:113 mkoeppe]:
> typo: "substitited"

Fixed.



---

archive/issue_comments_303019.json:
```json
{
    "body": "Replying to [comment:112 dkrenn]:\n> Replying to [comment:108 mkoeppe]:\n> > This part looks a bit magical, could you illustrate this with doctests somewhere?\n> \n> Not that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.\n\nThanks, this is an improvement. Now I understand that the strings that are assembled in this part of the code are just used for logging. \n\nI think both the description of the \"splitting\" in the documentation and the implementation can be made more transparent.\n\nPerhaps it should at least be said that if `split=True`, it uses the complement of the `hyperplane_arrangements.braid`.",
    "created_at": "2021-06-30T18:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303019",
    "user": "mkoeppe"
}
```

Replying to [comment:112 dkrenn]:
> Replying to [comment:108 mkoeppe]:
> > This part looks a bit magical, could you illustrate this with doctests somewhere?
> 
> Not that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.

Thanks, this is an improvement. Now I understand that the strings that are assembled in this part of the code are just used for logging. 

I think both the description of the "splitting" in the documentation and the implementation can be made more transparent.

Perhaps it should at least be said that if `split=True`, it uses the complement of the `hyperplane_arrangements.braid`.



---

archive/issue_comments_303020.json:
```json
{
    "body": "I was hoping to have something like `TransformHrepresentation` in more generality (related to #30198), but that's of course outside of the scope of this ticket",
    "created_at": "2021-06-30T19:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303020",
    "user": "mkoeppe"
}
```

I was hoping to have something like `TransformHrepresentation` in more generality (related to #30198), but that's of course outside of the scope of this ticket



---

archive/issue_comments_303021.json:
```json
{
    "body": "Maybe all of the helper classes in this file should be marked as internal somehow (can we use leading underscores for class names too?) so that if this is reworked for more generality, we don't have to go through deprecation.",
    "created_at": "2021-06-30T19:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303021",
    "user": "mkoeppe"
}
```

Maybe all of the helper classes in this file should be marked as internal somehow (can we use leading underscores for class names too?) so that if this is reworked for more generality, we don't have to go through deprecation.



---

archive/issue_comments_303022.json:
```json
{
    "body": "Likewise for `compositions_mod` - it shouldn't be a public interface",
    "created_at": "2021-06-30T19:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303022",
    "user": "mkoeppe"
}
```

Likewise for `compositions_mod` - it shouldn't be a public interface



---

archive/issue_comments_303023.json:
```json
{
    "body": "\n```\n+                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)\n+                            for i in range(d+1))\n```\n\nhow about splitting out the 0th position of this tuple here to make this more transparent.",
    "created_at": "2021-06-30T19:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303023",
    "user": "mkoeppe"
}
```


```
+                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)
+                            for i in range(d+1))
```

how about splitting out the 0th position of this tuple here to make this more transparent.



---

archive/issue_comments_303024.json:
```json
{
    "body": "There is a nontrivial algorithm in `SplitOffSimpleInequalities._transform_`, which probably needs some explanation",
    "created_at": "2021-06-30T19:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303024",
    "user": "mkoeppe"
}
```

There is a nontrivial algorithm in `SplitOffSimpleInequalities._transform_`, which probably needs some explanation



---

archive/issue_comments_303025.json:
```json
{
    "body": "Replying to [comment:87 dkrenn]:\n> Replying to [comment:85 mkoeppe]:\n> > There is still a `prefix_variable_name` in a docstring\n> \n> Indeed, thanks, fixed.\n\nFollowing up on `name`/`names`:\n\n```\n+        sage: generating_function_of_integral_points(P2[0],\n+        ....:     sort_factors=True, names=('a', 'b'))\n+        Traceback (most recent call last):\n+        ...\n+        ValueError: exactly one variable name has to be provided\n```\n\nI don't understand this restriction. Why would the user not be allowed to provide all the names for the variables?",
    "created_at": "2021-06-30T19:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303025",
    "user": "mkoeppe"
}
```

Replying to [comment:87 dkrenn]:
> Replying to [comment:85 mkoeppe]:
> > There is still a `prefix_variable_name` in a docstring
> 
> Indeed, thanks, fixed.

Following up on `name`/`names`:

```
+        sage: generating_function_of_integral_points(P2[0],
+        ....:     sort_factors=True, names=('a', 'b'))
+        Traceback (most recent call last):
+        ...
+        ValueError: exactly one variable name has to be provided
```

I don't understand this restriction. Why would the user not be allowed to provide all the names for the variables?



---

archive/issue_comments_303026.json:
```json
{
    "body": "`@`mkoeppe, thank you. I brievley looked over your comments and agree that these should be incorporated. I'll be off for some time now (maybe a week) and then continue to work on this.",
    "created_at": "2021-07-01T08:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303026",
    "user": "dkrenn"
}
```

`@`mkoeppe, thank you. I brievley looked over your comments and agree that these should be incorporated. I'll be off for some time now (maybe a week) and then continue to work on this.



---

archive/issue_comments_303027.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-17T21:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303027",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_303028.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-24T11:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303028",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_303029.json:
```json
{
    "body": "Replying to [comment:117 mkoeppe]:\n> Replying to [comment:112 dkrenn]:\n> > Replying to [comment:108 mkoeppe]:\n> > > This part looks a bit magical, could you illustrate this with doctests somewhere?\n> > \n> > Not that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.\n> \n> Thanks, this is an improvement. Now I understand that the strings that are assembled in this part of the code are just used for logging. \n> \n> I think both the description of the \"splitting\" in the documentation and the implementation can be made more transparent.\n\nDocumentation rewritten and extended.\n\n> Perhaps it should at least be said that if `split=True`, it uses the complement of the `hyperplane_arrangements.braid`.\n\nRephrased now anyways. (Not sure if bringing in two more concepts (\"braid\" and \"complement of\") would  makes things more clear.)",
    "created_at": "2021-07-24T11:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303029",
    "user": "dkrenn"
}
```

Replying to [comment:117 mkoeppe]:
> Replying to [comment:112 dkrenn]:
> > Replying to [comment:108 mkoeppe]:
> > > This part looks a bit magical, could you illustrate this with doctests somewhere?
> > 
> > Not that easy, but I somehow managed to write a doctest showing some details of this specific part of the code.
> 
> Thanks, this is an improvement. Now I understand that the strings that are assembled in this part of the code are just used for logging. 
> 
> I think both the description of the "splitting" in the documentation and the implementation can be made more transparent.

Documentation rewritten and extended.

> Perhaps it should at least be said that if `split=True`, it uses the complement of the `hyperplane_arrangements.braid`.

Rephrased now anyways. (Not sure if bringing in two more concepts ("braid" and "complement of") would  makes things more clear.)



---

archive/issue_comments_303030.json:
```json
{
    "body": "Replying to [comment:119 mkoeppe]:\n> Maybe all of the helper classes in this file should be marked as internal somehow (can we use leading underscores for class names too?) so that if this is reworked for more generality, we don't have to go through deprecation.\n\nNow they are internal (IMO this should have been also without the fear of a deprecation).",
    "created_at": "2021-07-24T11:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303030",
    "user": "dkrenn"
}
```

Replying to [comment:119 mkoeppe]:
> Maybe all of the helper classes in this file should be marked as internal somehow (can we use leading underscores for class names too?) so that if this is reworked for more generality, we don't have to go through deprecation.

Now they are internal (IMO this should have been also without the fear of a deprecation).



---

archive/issue_comments_303031.json:
```json
{
    "body": "Replying to [comment:120 mkoeppe]:\n> Likewise for `compositions_mod` - it shouldn't be a public interface\n\nDone.",
    "created_at": "2021-07-24T11:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303031",
    "user": "dkrenn"
}
```

Replying to [comment:120 mkoeppe]:
> Likewise for `compositions_mod` - it shouldn't be a public interface

Done.



---

archive/issue_comments_303032.json:
```json
{
    "body": "Replying to [comment:121 mkoeppe]:\n> {{{\n> +                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)\n> +                            for i in range(d+1))\n> }}}\n> how about splitting out the 0th position of this tuple here to make this more transparent.\n\nCode majorly rewritten with the hope that it is clearer now.",
    "created_at": "2021-07-24T11:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303032",
    "user": "dkrenn"
}
```

Replying to [comment:121 mkoeppe]:
> {{{
> +                ieqs=[tuple(1 if i==b else (-1 if i==a or i==0 and a > b else 0)
> +                            for i in range(d+1))
> }}}
> how about splitting out the 0th position of this tuple here to make this more transparent.

Code majorly rewritten with the hope that it is clearer now.



---

archive/issue_comments_303033.json:
```json
{
    "body": "Replying to [comment:123 mkoeppe]:\n> Replying to [comment:87 dkrenn]:\n> > Replying to [comment:85 mkoeppe]:\n> > > There is still a `prefix_variable_name` in a docstring\n> > \n> > Indeed, thanks, fixed.\n> \n> Following up on `name`/`names`:\n> {{{\n> +        sage: generating_function_of_integral_points(P2[0],\n> +        ....:     sort_factors=True, names=('a', 'b'))\n> +        Traceback (most recent call last):\n> +        ...\n> +        ValueError: exactly one variable name has to be provided\n> }}}\n> I don't understand this restriction. Why would the user not be allowed to provide all the names for the variables?\n\nCan be done on a follow up ticket; it raises a `NotImplementedError` now.",
    "created_at": "2021-07-24T11:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303033",
    "user": "dkrenn"
}
```

Replying to [comment:123 mkoeppe]:
> Replying to [comment:87 dkrenn]:
> > Replying to [comment:85 mkoeppe]:
> > > There is still a `prefix_variable_name` in a docstring
> > 
> > Indeed, thanks, fixed.
> 
> Following up on `name`/`names`:
> {{{
> +        sage: generating_function_of_integral_points(P2[0],
> +        ....:     sort_factors=True, names=('a', 'b'))
> +        Traceback (most recent call last):
> +        ...
> +        ValueError: exactly one variable name has to be provided
> }}}
> I don't understand this restriction. Why would the user not be allowed to provide all the names for the variables?

Can be done on a follow up ticket; it raises a `NotImplementedError` now.



---

archive/issue_comments_303034.json:
```json
{
    "body": "Replying to [comment:122 mkoeppe]:\n> There is a nontrivial algorithm in `SplitOffSimpleInequalities._transform_`, which probably needs some explanation\n\nThis is still open.",
    "created_at": "2021-07-24T11:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21830#issuecomment-303034",
    "user": "dkrenn"
}
```

Replying to [comment:122 mkoeppe]:
> There is a nontrivial algorithm in `SplitOffSimpleInequalities._transform_`, which probably needs some explanation

This is still open.
