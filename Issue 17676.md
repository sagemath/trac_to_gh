# Issue 17676: Out of memory reinstalling webassets

Issue created by migration from https://trac.sagemath.org/ticket/17913

Original creator: vbraun

Original creation time: 2015-03-08 12:33:04




---

Comment by vbraun created at 2015-03-08 12:37:11

Changing type from PLEASE CHANGE to defect.


---

Comment by vbraun created at 2015-03-08 12:37:11

Changing component from PLEASE CHANGE to packages: standard.


---

Comment by vbraun created at 2015-03-08 13:43:18

Changing status from new to needs_review.


---

Comment by vbraun created at 2015-03-08 13:43:18

New commits:


---

Comment by vbraun created at 2015-03-08 19:43:06

Changing priority from major to blocker.


---

Comment by git created at 2015-03-21 09:40:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-03-23 18:26:30

Do you have any idea how this happens? I cannot reproduce it...


---

Comment by vbraun created at 2015-03-23 18:39:14

I don't have a testcase that reliably triggers it. But even without this bug we shouldn't be relying on `easy_install` anyway.s


---

Comment by jdemeyer created at 2015-03-26 19:41:47

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-03-26 19:41:47

The installation directory changed from `site-packages/sagenb-version.egg` to `site-packages/sagenb`.


```
./spkg-install: line 50: cd: /usr/local/src/sage-config/local/lib/python/site-packages/sagenb-0.11.4-py2.7.egg/sagenb/data: No such file or directory
```



---

Comment by jdemeyer created at 2015-03-26 19:43:50

Is there a "force" option? Imagine somebody really wants to install `sagenb`, but even doing `./sage -f sagenb` just gives

```
Requirement already satisfied (use --upgrade to upgrade): sagenb in /usr/local/src/sage-config/local/lib/python2.7/site-packages
```



---

Comment by git created at 2015-03-26 21:17:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2015-03-26 21:21:00

The flat install (no egg) is a feature imho... the whole packing into an egg and then unpacking it again when you need something from it is crazy.

Pip has a switch for force-reinstalling but then it'll also want to force-reinstall the Jinja2 dependency. We should just move the packages out of the sagenb tarball, and install sagenb without deps... I've added a step to delete the old sagenb, that at least will ensure that it is reinstalled (though not the dependencies inside the sagenb tarball).


---

Comment by jdemeyer created at 2015-03-26 21:29:20

Replying to [comment:13 vbraun]:
> The flat install (no egg) is a feature imho...
I'm not complaining about this, just saying that the `cd` statement should be updated (like you did).

Please rebase to 6.6.rc0 (there is a conflict)


---

Comment by git created at 2015-03-26 22:21:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2015-03-26 22:23:10

Done!


---

Comment by vbraun created at 2015-03-26 22:23:10

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-03-27 09:31:03

Assuming you agree with my extra commit, positive review.
----
New commits:


---

Comment by jdemeyer created at 2015-03-27 09:31:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-03-28 09:06:26

Resolution: fixed
