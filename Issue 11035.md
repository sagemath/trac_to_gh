# Issue 11035: Doctest failure of groups/perm_gps/cubegroup.py on Ubuntu 10.10 system with 1 GB RAM (lack of RAM ??)

Issue created by migration from Trac.

Original creator: drkirkby

Original creation time: 2011-04-15 19:18:02

Assignee: mvngu

CC:  mkoeppe kcrisman

I got the following error on a system with an AMD Opteron 248 (2.2 GHz). The machine has only 1 GB RAM, but I've had success building and testing Sage on a Solaris system with less RAM. 



```
drkirkby`@`laptop:~$ cat cubegroup-error.log
sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/cubegroup.py"
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 893:
    sage: rubik.solve(state)
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_16[4]>", line 1, in <module>
        rubik.solve(state)###line 893:
    sage: rubik.solve(state)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 914, in solve
        return C.solve(algorithm)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 1107, in solve
        return solver.solve(self.facets(), timeout=timeout)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/rubik.py", line 254, in solve
        child.expect('Initialization done!')
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/pexpect.py", line 912, in expect
        return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/pexpect.py", line 978, in expect_list
        raise EOF (str(e) + '\n' + str(self))
    EOF: End Of File (EOF) in read_nonblocking(). Exception style platform.
    <pexpect.spawn instance at 0x5af65f0>
    version: 2.0 ($Revision: 1.151 $)
    command: /home/drkirkby/sage-4.7.alpha4/local/bin/dikcube
    args: ['/home/drkirkby/sage-4.7.alpha4/local/bin/dikcube', '-p']
    patterns:
        Initialization done!
    buffer (last 100 chars): 
    before (last 100 chars):  1 of   5 in __main__.example_7
      12 of  16 in __main__.example_8
    ***Test Failed*** 31 failures.

    after: <class 'pexpect.EOF'>
    match: None
    match_index: None
    exitstatus: None
    flag_eof: 1
    pid: 13702
    child_fd: 4
    timeout: 30
    delimiter: <class 'pexpect.EOF'>
    logfile: None
    maxread: 2000
    searchwindowsize: None
    delaybeforesend: 0.1
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 895:
    sage: state = rubik.faces("R*U")
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_16[5]>", line 1, in <module>
        state = rubik.faces("R*U")###line 895:
    sage: state = rubik.faces("R*U")
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 657, in faces
        fcts = self.facets(self.parse(mv))
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 587, in parse
        g = G(1)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 566, in __call__
        return self.identity()
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 802, in identity
        return self._element_class()([], self, check=True)
      File "permgroup_element.pyx", line 329, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (sage/groups/perm_gps/permgroup_element.c:2979)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1099, in __call__
        return cls(self, x, name=name)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1532, in __init__
        raise TypeError, x
    TypeError: Unexpected EOF from Gap executing $sage6:=PermList([1]);;
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 896:
    sage: rubik.solve(state, algorithm='gap')       # long time
Expected:
    'R*U'
Got:
    'Illegal or syntactically incorrect state. No solution.'
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 970:
    sage: C = RubiksCube().move("R U R'")
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[2]>", line 1, in <module>
        C = RubiksCube().move("R U R'")###line 970:
    sage: C = RubiksCube().move("R U R'")
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 1000, in __init__
        self._state = self._group(1)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 485, in __call__
        return self.parse(mv)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 621, in parse
        return G(mv)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 566, in __call__
        return self.identity()
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 802, in identity
        return self._element_class()([], self, check=True)
      File "permgroup_element.pyx", line 328, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (sage/groups/perm_gps/permgroup_element.c:2955)
      File "sage_object.pyx", line 463, in sage.structure.sage_object.SageObject._gap_ (sage/structure/sage_object.c:3982)
      File "sage_object.pyx", line 439, in sage.structure.sage_object.SageObject._interface_ (sage/structure/sage_object.c:3622)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1099, in __call__
        return cls(self, x, name=name)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1532, in __init__
        raise TypeError, x
    TypeError: Unexpected EOF from Gap executing Read("/home/drkirkby/.sage//temp/jay/13698//interface//tmp13699");
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 971:
    sage: C.show3d()
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[3]>", line 1, in <module>
        C.show3d()###line 971:
    sage: C.show3d()
    NameError: name 'C' is not defined
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 975:
    sage: C = RubiksCube("R*L"); C
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[4]>", line 1, in <module>
        C = RubiksCube("R*L"); C###line 975:
    sage: C = RubiksCube("R*L"); C
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 1003, in __init__
        state = self._group.faces(state)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 657, in faces
        fcts = self.facets(self.parse(mv))
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/cubegroup.py", line 587, in parse
        g = G(1)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 566, in __call__
        return self.identity()
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/groups/perm_gps/permgroup.py", line 802, in identity
        return self._element_class()([], self, check=True)
      File "permgroup_element.pyx", line 328, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (sage/groups/perm_gps/permgroup_element.c:2955)
      File "sage_object.pyx", line 463, in sage.structure.sage_object.SageObject._gap_ (sage/structure/sage_object.c:3982)
      File "sage_object.pyx", line 439, in sage.structure.sage_object.SageObject._interface_ (sage/structure/sage_object.c:3622)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1099, in __call__
        return cls(self, x, name=name)
      File "/home/drkirkby/sage-4.7.alpha4/local/lib/python/site-packages/sage/interfaces/expect.py", line 1532, in __init__
        raise TypeError, x
    TypeError: Unexpected EOF from Gap executing Read("/home/drkirkby/.sage//temp/jay/13698//interface//tmp13699");
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 989:
    sage: C.show()
Exception raised:
    Traceback (most recent call last):
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/drkirkby/sage-4.7.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[5]>", line 1, in <module>
        C.show()###line 989:
    sage: C.show()
    NameError: name 'C' is not defined
**********************************************************************
File "/home/drkirkby/sage-4.7.alpha4/devel/sage/sage/groups/perm_gps/cubegroup.py", line 990:
    sage: C.solve(algorithm='gap')  # long time
Exception raised:

<SNIP>

    TypeError: Unexpected EOF from Gap executing Read("/home/drkirkby/.sage//temp/jay/13698//interface//tmp13699");
**********************************************************************
7 items had failures:
   3 of   8 in __main__.example_16
   6 of   9 in __main__.example_18
   3 of   6 in __main__.example_19
   5 of   8 in __main__.example_20
   1 of   7 in __main__.example_6
   1 of   5 in __main__.example_7
  12 of  16 in __main__.example_8
***Test Failed*** 31 failures.
For whitespace errors, see the file /home/drkirkby/.sage//tmp/.doctest_cubegroup.py
	 [9.0 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/cubegroup.py"
Total time for all tests: 9.0 seconds
drkirkby`@`laptop:~$ 
```



Dave


---

Comment by drkirkby created at 2011-04-15 19:20:32

Complete doctest failure seen on an AMD Opteron 248 running Ubuntu 10.10


---

Attachment

Does this machine have adequate swap space?  I would guess that 1GB should be sufficient RAM provided there is some swap available.


---

Comment by drkirkby created at 2011-04-16 10:38:57

Replying to [comment:1 jdemeyer]:
> Does this machine have adequate swap space?  I would guess that 1GB should be sufficient RAM provided there is some swap available.

I don't know at this point and don't have access to the machine just now. 

I just did a standard installation, using almost all the defaults. The machine has a 300 GB hard disk, all of which has Linux on it, so I assume that installer would have picked a sensible amount of swap space, based on the fact there was 300 GB of disk space. But I'll check when I can get access. 

When testing this on Solaris, the amount of memory used by this test is minimal, so I very much doubt it is a memory issue. Some tests do use quite a bit of memory - but this does not appear to be one of them.


---

Comment by drkirkby created at 2011-04-16 19:01:38

Replying to [comment:1 jdemeyer]:
> Does this machine have adequate swap space?  I would guess that 1GB should be sufficient RAM provided there is some swap available.

I've checked it has 3 GB of swap. 


```
drkirkby`@`jay:~$ procinfo | head -4
Memory:        Total        Used        Free     Buffers                       
RAM:         1022088      940828       81260        4764                       
Swap:        2993148       56604     2936544                                   
```


Running the doctest shown no sign of any problems related to memory. So I don't know what this problem is. 

This is almost a fresh install, though some games were loaded. (I gave this PC to someone else, but are fed up reinstalling XP for them every time they log in with admin privilides and screw up the system. So I put linux on it, and have kept the root password to myself!)

Dave


---

Comment by chapoton created at 2020-10-13 11:21:05

maybe we can close this one as obsolete ?


---

Comment by chapoton created at 2020-10-13 11:21:05

Changing status from new to needs_review.


---

Comment by kcrisman created at 2020-10-13 11:23:12

I think so.  Dave did a lot of great testing for us so I am pretty sure this wasn't completely isolated, but without any further info and obviously with a 10.10 machine I think that saying it is obsolete makes sense.


---

Comment by chapoton created at 2020-10-13 13:16:35

ok, thanks. Closing now


---

Comment by chapoton created at 2020-10-13 13:16:35

Resolution: invalid
