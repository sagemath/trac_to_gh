# Issue 17630: Risk of confusion between LPProblem and MixedIntegerLinearProgram

archive/issues_017630.json:
```json
{
    "body": "CC:  dimpase vdelecroix tscrim novoselt\n\nTicket #14288 added a feature meant for educational purposes only which can *very easily* be confused with Sage's support of Linear Programming, as the two classes it creates are named LPProblem and LPProblemStandardForm *AND* imported in the global namespace.\n\nThat's suicidal.\n\nWith this branch, the two classes are renamed to something more meaningful, pointers are added toward MixedIntegerLinearProgram, and the old import are deprecated.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17867\n\n",
    "created_at": "2015-02-27T10:19:51Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Risk of confusion between LPProblem and MixedIntegerLinearProgram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17630",
    "user": "ncohen"
}
```
CC:  dimpase vdelecroix tscrim novoselt

Ticket #14288 added a feature meant for educational purposes only which can *very easily* be confused with Sage's support of Linear Programming, as the two classes it creates are named LPProblem and LPProblemStandardForm *AND* imported in the global namespace.

That's suicidal.

With this branch, the two classes are renamed to something more meaningful, pointers are added toward MixedIntegerLinearProgram, and the old import are deprecated.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17867





---

archive/issue_comments_235613.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-27T10:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235613",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_235614.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2015-02-27T10:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235614",
    "user": "ncohen"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_235615.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to linear programming.",
    "created_at": "2015-02-27T10:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235615",
    "user": "ncohen"
}
```

Changing component from PLEASE CHANGE to linear programming.



---

archive/issue_comments_235616.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-02-27T10:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235616",
    "user": "ncohen"
}
```

New commits:



---

archive/issue_comments_235617.json:
```json
{
    "body": "Good idea! No time for reviewing now...",
    "created_at": "2015-02-27T10:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235617",
    "user": "dimpase"
}
```

Good idea! No time for reviewing now...



---

archive/issue_comments_235618.json:
```json
{
    "body": "Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?\n\nAnd (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?\n\nAnd last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.\n\nVincent",
    "created_at": "2015-02-27T11:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235618",
    "user": "vdelecroix"
}
```

Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?

And (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?

And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.

Vincent



---

archive/issue_comments_235619.json:
```json
{
    "body": "Replying to [comment:5 vdelecroix]:\n> \n> And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.\n\n\nI mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...",
    "created_at": "2015-02-27T12:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235619",
    "user": "dimpase"
}
```

Replying to [comment:5 vdelecroix]:
> 
> And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.


I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...



---

archive/issue_comments_235620.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-27T12:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235620",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_235621.json:
```json
{
    "body": "Hello,\n\n> Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? \n\nDone.\n\n> People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?\n\nI expect.\n\n> And (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?\n\nPossibly. I never read the code of `interactive_simplex_method`.\n\nNathann",
    "created_at": "2015-02-27T12:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235621",
    "user": "ncohen"
}
```

Hello,

> Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? 

Done.

> People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?

I expect.

> And (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?

Possibly. I never read the code of `interactive_simplex_method`.

Nathann



---

archive/issue_comments_235622.json:
```json
{
    "body": "I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.\n\nRegarding parameters being the same or not - please don't do it here to avoid breaking anything, it will require careful changes in documentation. And in general the behaviour is different enough that sameness of input does not matter much, so I'd prefer to not touch it at all. What would be nice to have are conversion functions between regular and educational versions, but when I was working on them I was hitting corner cases bugs in MILP and never finished. Will add to my todo list, especially if I get to teach this course in May/June.\n\nRegarding types: the education version actually works best with exact rings like QQ. For floating point there is nothing to deal with degeneracy, which is actually nice for education:\nhttps://sage373.math.ualberta.ca/home/pub/31/\n(takes a while to process formulas)",
    "created_at": "2015-02-27T18:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235622",
    "user": "novoselt"
}
```

I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.

Regarding parameters being the same or not - please don't do it here to avoid breaking anything, it will require careful changes in documentation. And in general the behaviour is different enough that sameness of input does not matter much, so I'd prefer to not touch it at all. What would be nice to have are conversion functions between regular and educational versions, but when I was working on them I was hitting corner cases bugs in MILP and never finished. Will add to my todo list, especially if I get to teach this course in May/June.

Regarding types: the education version actually works best with exact rings like QQ. For floating point there is nothing to deal with degeneracy, which is actually nice for education:
https://sage373.math.ualberta.ca/home/pub/31/
(takes a while to process formulas)



---

archive/issue_comments_235623.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-27T19:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235623",
    "user": "novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_235624.json:
```json
{
    "body": "LGTM, thanks, Nathann!",
    "created_at": "2015-02-27T19:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235624",
    "user": "novoselt"
}
```

LGTM, thanks, Nathann!



---

archive/issue_comments_235625.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> Replying to [comment:5 vdelecroix]:\n> > \n> > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.\n> \n> \n> I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...\n\nDefinitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?",
    "created_at": "2015-02-27T19:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235625",
    "user": "novoselt"
}
```

Replying to [comment:6 dimpase]:
> Replying to [comment:5 vdelecroix]:
> > 
> > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.
> 
> 
> I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...

Definitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?



---

archive/issue_comments_235626.json:
```json
{
    "body": "Replying to [comment:11 novoselt]:\n> Replying to [comment:6 dimpase]:\n> > Replying to [comment:5 vdelecroix]:\n> > > \n> > > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.\n> > \n> > \n> > I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...\n> \n> Definitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?\n\nCommercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html\nApparently this is still the case, although the latter conversation took place in 2010.\n\nNot sure about PPL.",
    "created_at": "2015-02-27T20:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235626",
    "user": "dimpase"
}
```

Replying to [comment:11 novoselt]:
> Replying to [comment:6 dimpase]:
> > Replying to [comment:5 vdelecroix]:
> > > 
> > > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.
> > 
> > 
> > I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...
> 
> Definitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?

Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
Apparently this is still the case, although the latter conversation took place in 2010.

Not sure about PPL.



---

archive/issue_comments_235627.json:
```json
{
    "body": "Helloooooooooo !\n\n> I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.\n\nYesyes. I hope that this will not change too much on your side, and that nobody will get to one class when (s)he should be working with the other.\n\nThanks for the review,\n\nNathann",
    "created_at": "2015-02-28T06:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235627",
    "user": "ncohen"
}
```

Helloooooooooo !

> I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.

Yesyes. I hope that this will not change too much on your side, and that nobody will get to one class when (s)he should be working with the other.

Thanks for the review,

Nathann



---

archive/issue_comments_235628.json:
```json
{
    "body": "> Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html\n> Apparently this is still the case, although the latter conversation took place in 2010.\n\nWe can ask again. More importantly, how do you think that such certificates should be returned to the user ?\n\nNathann",
    "created_at": "2015-02-28T06:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235628",
    "user": "ncohen"
}
```

> Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
> Apparently this is still the case, although the latter conversation took place in 2010.

We can ask again. More importantly, how do you think that such certificates should be returned to the user ?

Nathann



---

archive/issue_comments_235629.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> > Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html\n> > Apparently this is still the case, although the latter conversation took place in 2010.\n> \n> We can ask again. More importantly, how do you think that such certificates should be returned to the user ?\n\ngiven the plethora of different formulations of LPs, it's a bit hard do say. If we talk about canonical primal-dual pair, i.e. `max c*x s.t. Ax<=b` and `min b*y s.t. yA=c`, then optimality is  the complementary slackness (http://en.wikipedia.org/wiki/Linear_programming#Complementary_slackness), so that one should give a primal and a dual optimal solution (so that the user can check that they satisfy it).\n\nfor ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear\ncombination of inequalities producing a contradiction) seems to be an obvious choice.",
    "created_at": "2015-02-28T10:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235629",
    "user": "dimpase"
}
```

Replying to [comment:14 ncohen]:
> > Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
> > Apparently this is still the case, although the latter conversation took place in 2010.
> 
> We can ask again. More importantly, how do you think that such certificates should be returned to the user ?

given the plethora of different formulations of LPs, it's a bit hard do say. If we talk about canonical primal-dual pair, i.e. `max c*x s.t. Ax<=b` and `min b*y s.t. yA=c`, then optimality is  the complementary slackness (http://en.wikipedia.org/wiki/Linear_programming#Complementary_slackness), so that one should give a primal and a dual optimal solution (so that the user can check that they satisfy it).

for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
combination of inequalities producing a contradiction) seems to be an obvious choice.



---

archive/issue_comments_235630.json:
```json
{
    "body": "> for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear\n> combination of inequalities producing a contradiction) seems to be an obvious choice.\n\nThis is what I am asking. How do we return that? As list of floats, and that's it?\n\nNathann",
    "created_at": "2015-02-28T10:29:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235630",
    "user": "ncohen"
}
```

> for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
> combination of inequalities producing a contradiction) seems to be an obvious choice.

This is what I am asking. How do we return that? As list of floats, and that's it?

Nathann



---

archive/issue_comments_235631.json:
```json
{
    "body": "Replying to [comment:16 ncohen]:\n> > for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear\n> > combination of inequalities producing a contradiction) seems to be an obvious choice.\n> \n> This is what I am asking. How do we return that? As list of floats, and that's it?\n> \nfloats, or the other appropriate base ring (e.g. rationals for PPL).\n\nAnything that maps correctly into the list of constraints would do.\n\n\n> Nathann",
    "created_at": "2015-02-28T20:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235631",
    "user": "dimpase"
}
```

Replying to [comment:16 ncohen]:
> > for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
> > combination of inequalities producing a contradiction) seems to be an obvious choice.
> 
> This is what I am asking. How do we return that? As list of floats, and that's it?
> 
floats, or the other appropriate base ring (e.g. rationals for PPL).

Anything that maps correctly into the list of constraints would do.


> Nathann



---

archive/issue_comments_235632.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-28T21:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17630#issuecomment-235632",
    "user": "vbraun"
}
```

Resolution: fixed
