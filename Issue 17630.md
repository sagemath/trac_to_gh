# Issue 17630: Risk of confusion between LPProblem and MixedIntegerLinearProgram

Issue created by migration from https://trac.sagemath.org/ticket/17867

Original creator: ncohen

Original creation time: 2015-02-27 10:19:51

CC:  dimpase vdelecroix tscrim novoselt

Ticket #14288 added a feature meant for educational purposes only which can *very easily* be confused with Sage's support of Linear Programming, as the two classes it creates are named LPProblem and LPProblemStandardForm *AND* imported in the global namespace.

That's suicidal.

With this branch, the two classes are renamed to something more meaningful, pointers are added toward MixedIntegerLinearProgram, and the old import are deprecated.

Nathann


---

Comment by ncohen created at 2015-02-27 10:49:55

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-02-27 10:49:55

Changing type from PLEASE CHANGE to defect.


---

Comment by ncohen created at 2015-02-27 10:49:55

Changing component from PLEASE CHANGE to linear programming.


---

Comment by ncohen created at 2015-02-27 10:49:55

New commits:


---

Comment by dimpase created at 2015-02-27 10:52:18

Good idea! No time for reviewing now...


---

Comment by vdelecroix created at 2015-02-27 11:28:22

Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?

And (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?

And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.

Vincent


---

Comment by dimpase created at 2015-02-27 12:09:52

Replying to [comment:5 vdelecroix]:
> 
> And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.


I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...


---

Comment by git created at 2015-02-27 12:34:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-02-27 12:36:56

Hello,

> Could you make a reference in the doc of `MixedIntegerLinearProgramming` toward `InteractiveLPProblem`? 

Done.

> People might be delighted to have an interactive object to learn more about the black box! Though it is only about float linear programming isn't it?

I expect.

> And (not for this ticket) it would be cool if the arguments were compatible: namely `variable_type` being either `<=`, `>=` or the empty string in `ILPP` versus the argument `nonnegative=True` in `MILP`. `problem_type` in `ILPP` versus `maximization=True` in `MILP`, etc. Wouldn't it?

Possibly. I never read the code of `interactive_simplex_method`.

Nathann


---

Comment by novoselt created at 2015-02-27 18:57:39

I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.

Regarding parameters being the same or not - please don't do it here to avoid breaking anything, it will require careful changes in documentation. And in general the behaviour is different enough that sameness of input does not matter much, so I'd prefer to not touch it at all. What would be nice to have are conversion functions between regular and educational versions, but when I was working on them I was hitting corner cases bugs in MILP and never finished. Will add to my todo list, especially if I get to teach this course in May/June.

Regarding types: the education version actually works best with exact rings like QQ. For floating point there is nothing to deal with degeneracy, which is actually nice for education:
https://sage373.math.ualberta.ca/home/pub/31/
(takes a while to process formulas)


---

Comment by novoselt created at 2015-02-27 19:05:33

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2015-02-27 19:05:33

LGTM, thanks, Nathann!


---

Comment by novoselt created at 2015-02-27 19:07:49

Replying to [comment:6 dimpase]:
> Replying to [comment:5 vdelecroix]:
> > 
> > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.
> 
> 
> I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...

Definitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?


---

Comment by dimpase created at 2015-02-27 20:45:45

Replying to [comment:11 novoselt]:
> Replying to [comment:6 dimpase]:
> > Replying to [comment:5 vdelecroix]:
> > > 
> > > And last but not the least: we can use the class `ILPP` to cross check the validity of (float) `MILP` and vice-versa.
> > 
> > 
> > I mentioned some time ago that there is a way to get proper certificates of optimality/infeasibility for LPs (cf Farkas lemma, etc), and it ought to be in Sage...
> 
> Definitely, and these certificates are produced for free when using simplex method, one should just get them out - do solvers interfaces from Sage support providing them?

Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
Apparently this is still the case, although the latter conversation took place in 2010.

Not sure about PPL.


---

Comment by ncohen created at 2015-02-28 06:24:19

Helloooooooooo !

> I would prefer a suffix, rather than prefix, but I guess for courses you tell the name to students anyway and with a cross-link it is easy to discover.

Yesyes. I hope that this will not change too much on your side, and that nobody will get to one class when (s)he should be working with the other.

Thanks for the review,

Nathann


---

Comment by ncohen created at 2015-02-28 06:26:22

> Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
> Apparently this is still the case, although the latter conversation took place in 2010.

We can ask again. More importantly, how do you think that such certificates should be returned to the user ?

Nathann


---

Comment by dimpase created at 2015-02-28 10:16:00

Replying to [comment:14 ncohen]:
> > Commercial solvers like CPLEX and GUROBI do provide these certs, as well as CVXOPT, but GLPK apparently not, cf https://lists.gnu.org/archive/html/help-glpk/2010-11/msg00062.html
> > Apparently this is still the case, although the latter conversation took place in 2010.
> 
> We can ask again. More importantly, how do you think that such certificates should be returned to the user ?

given the plethora of different formulations of LPs, it's a bit hard do say. If we talk about canonical primal-dual pair, i.e. `max c*x s.t. Ax<=b` and `min b*y s.t. yA=c`, then optimality is  the complementary slackness (http://en.wikipedia.org/wiki/Linear_programming#Complementary_slackness), so that one should give a primal and a dual optimal solution (so that the user can check that they satisfy it).

for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
combination of inequalities producing a contradiction) seems to be an obvious choice.


---

Comment by ncohen created at 2015-02-28 10:29:36

> for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
> combination of inequalities producing a contradiction) seems to be an obvious choice.

This is what I am asking. How do we return that? As list of floats, and that's it?

Nathann


---

Comment by dimpase created at 2015-02-28 20:09:58

Replying to [comment:16 ncohen]:
> > for ineasibility, a Farkas certificate (i.e. coefficients of a nonnegative linear
> > combination of inequalities producing a contradiction) seems to be an obvious choice.
> 
> This is what I am asking. How do we return that? As list of floats, and that's it?
> 
floats, or the other appropriate base ring (e.g. rationals for PPL).

Anything that maps correctly into the list of constraints would do.


> Nathann


---

Comment by vbraun created at 2015-02-28 21:24:10

Resolution: fixed
