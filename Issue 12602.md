# Issue 12602: various enhancements for Coxeter and Weyl groups

Issue created by migration from https://trac.sagemath.org/ticket/12774

Original creator: mshimo

Original creation time: 2012-03-28 20:13:41

Assignee: sage-combinat

CC:  nthiery aschilling

Keywords: coxeter group, weyl group

Various enhancements to Coxeter groups and Weyl groups.

1. Computes inversions for Coxeter/Weyl groups. They occur in three forms: reflections, roots, and coroots. 

New Coxeter group element methods:
categories/coxeter_groups.py

apply_conjugation_by_simple_reflection
length_decreasing_reflections_right
length_decreasing_reflections_left

New Weyl group element methods:
categories/weyl_groups.py

reflection_to_root
reflection_to_coroot
inversions

New root space element method:
combinat/root_system/root_space.py

associated_reflection

Bruhat covering relations have an associated inversion. Accordingly,
we have added versions of the Coxeter group element methods bruhat_lower_covers and bruhat_upper_covers which incorporate the inversion data:

New Coxeter group element methods:
categories/coxeter_groups.py

bruhat_cocovers_reflections
bruhat_covers_reflections

New Weyl group element methods:
categories/weyl_groups.py

bruhat_cocovers_coroots
bruhat_covers_coroots

2. Installs the Demazure or 0-Hecke product for Coxeter groups

New Coxeter group parent method:
categories/coxeter_groups.py

demazure_product

New Coxeter group element methods:
categories/coxeter_groups.py

apply_demazure_simple_reflection
apply_demazure_product
min_demazure_product_greater

3. Computes canonical lifts from quotients by parabolic subgroups.
This requires Deodhar's recovery of the Bruhat order on a Coxeter group from that on a parabolic subgroup and the quotient by that subgroup.

New Coxeter group element methods:
categories/coxeter_groups.py

deodhar_factor_element
deodhar_lift_up
deodhar_lift_down

4. Two random little methods for root systems

sage/combinat/root_system/root_lattice_realizations.py:
new parent method:
positive_roots_by_height

sage/combinat/root_system/root_space.py:
new element method:
max_coroot_le


---

Comment by mshimo created at 2012-03-31 06:33:50

Changing status from new to needs_review.


---

Comment by stumpc5 created at 2012-08-11 17:24:04

I went through your changes for Coxeter groups -- it looks nice and clean so far! I  attach a review patch with several minor modifications. I used your patch from the combinat queue, so please update the one here if necessary. Also, please update the header of the patch file (concerns auther and dependencies).

Best, Christian


---

Comment by stumpc5 created at 2012-08-13 08:57:39

Hi Mark,

I also went through categories/weyl_groups and made some minor changes. The only interesting is: I merged reflection_to_coroot into reflection_to_root and added an optional argument.

I hope to finish my review tonight...

btw: the patch needs to be rebased for sage-5.3.beta0 once we finish it.

Best, Christian


---

Comment by stumpc5 created at 2012-08-14 08:53:56

Hi,

concerning the modifications in RootLatticeRealizations:

- why don't we move this file into categories? (this might be answered somewhere else but I don't remember right now)

- shouldn't we implement the various methods for roots (roots, positive_roots, negative_roots, -_parabolic, -_nonparabolic, ...) right away as well for general Coxeter groups? It looks like we are not very far from that anyway (I actually do some rudimentary implementation in my other patch on Coxeter groups, but this part would perfectly fit here)

Christian


---

Comment by chapoton created at 2012-11-19 17:25:23

apply trac_12774-coxeter-ms-v2.patch


---

Comment by chapoton created at 2012-11-19 19:46:14

apply trac_12774-coxeter-ms-v2.patch


---

Comment by chapoton created at 2012-11-19 20:22:30

apply trac_12774-coxeter-ms-v2.patch

I have just folded and rebased this patch. The bot seems to be green and happy.

This looks good to me. Anne, Nicolas, Christian, do you want to have a look ?


---

Comment by chapoton created at 2012-11-19 20:48:40

apply trac_12774-coxeter-ms-v2.patch

I have corrected the deprecations


---

Comment by aschilling created at 2012-11-20 08:02:35

Replying to [comment:9 chapoton]:
> apply trac_12774-coxeter-ms-v2.patch
> 
> I have just folded and rebased this patch. The bot seems to be green and happy.
> 
> This looks good to me. Anne, Nicolas, Christian, do you want to have a look ?

Has Mark answered or taken into account all of Christian's previous comments? If not, that should be done first!

Anne


---

Comment by nthiery created at 2012-11-21 21:07:32

What are cocovers? should the new methods be named instead bruhat_upper_covers_* / bruhat_lower_covers_* for consistency with posets?

Cheers,
                                 Nicolas


---

Comment by mshimo created at 2013-02-12 13:54:37

Regarding Comment 6, first question: I don't know. (Nicolas, can you answer this?)
However I tried to put certain things involving root systems into
categories and had my first encounter with import loops.
Comment 6 second question: Since I don't know how much work it would take (and since my methods
use root data, which is more information than the Cartan data needed for a Coxeter group) 
my vote is to finalize this patch without the extension to Coxeter groups.

Regarding Comment 12: Cocovers are what you are calling "lower covers" and covers are what you are calling
"upper covers". I can change the names if you insist.


---

Comment by stumpc5 created at 2013-02-14 13:57:30

Does the version of the patch here reflection the current status?


---

Comment by mshimo created at 2013-02-14 14:23:25

Replying to [comment:14 stumpc5]:
> Does the version of the patch here reflection the current status?

I didn't change anything yet. 
The only additional changes I was planning to make (but have not yet made)
were the method renamings that Nicolas suggested.


---

Comment by aschilling created at 2013-02-14 22:07:51

Changing status from needs_review to positive_review.


---

Comment by aschilling created at 2013-02-14 22:11:43

Mark and I went through the patch at Sage Days 45 and reviewed it together. Everything looks fine!


---

Comment by aschilling created at 2013-02-14 22:13:32

Changing keywords from "coxeter group, weyl group" to "coxeter group, weyl group, days45".


---

Comment by jdemeyer created at 2013-02-15 08:23:02

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-02-15 08:23:02

You should not use "assert" for bad user input, only to check for actual bugs. Bad input should probably give a `ValueError` instead. The correct use for `assert` is to check for conditions which you _know_ are true if the program wouldn't have bugs.

If there is any way at all to reproduce an `AssertionError` using documented public functions, that is by definition a bug.


---

Attachment


---

Comment by aschilling created at 2013-02-15 21:06:50

Looks good now!


---

Comment by aschilling created at 2013-02-15 21:07:03

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-02-17 22:42:17

Resolution: fixed
