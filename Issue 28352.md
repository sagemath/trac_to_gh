# Issue 28352: threejs does not work when openGL is not supported

archive/issues_028352.json:
```json
{
    "body": "On some configs, `OpenGL` is not supported, and `threejs` relies on it. Since it is now the default 3d viewer, nothing will be drawn when trying to plot 3d objects: there should be some fallback to `jmol` when such case appears.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28589\n\n",
    "created_at": "2019-10-10T19:51:13Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "threejs does not work when openGL is not supported",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28352",
    "user": "tmonteil"
}
```
On some configs, `OpenGL` is not supported, and `threejs` relies on it. Since it is now the default 3d viewer, nothing will be drawn when trying to plot 3d objects: there should be some fallback to `jmol` when such case appears.

Issue created by migration from https://trac.sagemath.org/ticket/28589





---

archive/issue_comments_400375.json:
```json
{
    "body": "I do not know how to detect that the web browser supports `OpenGL` though.",
    "created_at": "2019-10-10T19:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400375",
    "user": "tmonteil"
}
```

I do not know how to detect that the web browser supports `OpenGL` though.



---

archive/issue_comments_400376.json:
```json
{
    "body": "Three.js more precisely uses WebGL, which is [supported](https://caniuse.com/#feat=webgl) in all major browsers. If someone is using a browser so old that it does not support WebGL, they should be told to upgrade that massive security risk.\n\nDetection of WebGL capability occurs in the browser, so there could be no automatic fallback once the process is handed off to the browser. At most we could display an error message, but I highly doubt even that will be necessary.",
    "created_at": "2019-10-11T00:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400376",
    "user": "@paulmasson"
}
```

Three.js more precisely uses WebGL, which is [supported](https://caniuse.com/#feat=webgl) in all major browsers. If someone is using a browser so old that it does not support WebGL, they should be told to upgrade that massive security risk.

Detection of WebGL capability occurs in the browser, so there could be no automatic fallback once the process is handed off to the browser. At most we could display an error message, but I highly doubt even that will be necessary.



---

archive/issue_comments_400377.json:
```json
{
    "body": "Changing keywords from \"\" to \"threejs\".",
    "created_at": "2019-10-11T00:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400377",
    "user": "@paulmasson"
}
```

Changing keywords from "" to "threejs".



---

archive/issue_comments_400378.json:
```json
{
    "body": "I went on that issue when developing Sage Debian Live. It runs up-to-date Debian buster with firefox-esr, but on 32bit. Firefox supports OpenGL but this latter seems not available.",
    "created_at": "2019-10-11T09:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400378",
    "user": "tmonteil"
}
```

I went on that issue when developing Sage Debian Live. It runs up-to-date Debian buster with firefox-esr, but on 32bit. Firefox supports OpenGL but this latter seems not available.



---

archive/issue_comments_400379.json:
```json
{
    "body": "I don't know how, but jupyter should be able to get feedback from the browser when such issue appears.",
    "created_at": "2019-10-11T09:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400379",
    "user": "tmonteil"
}
```

I don't know how, but jupyter should be able to get feedback from the browser when such issue appears.



---

archive/issue_comments_400380.json:
```json
{
    "body": "Replying to [comment:3 tmonteil]:\n> I went on that issue when developing Sage Debian Live. It runs up-to-date Debian buster with firefox-esr, but on 32bit. Firefox supports OpenGL but this latter seems not available.\nWhat do you mean by that? I may be wrong, but from that page, I would say that OpenGL is available in Debian buster 32bit:\nhttps://packages.debian.org/buster/libgl1-mesa-dev",
    "created_at": "2019-10-12T13:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400380",
    "user": "@egourgoulhon"
}
```

Replying to [comment:3 tmonteil]:
> I went on that issue when developing Sage Debian Live. It runs up-to-date Debian buster with firefox-esr, but on 32bit. Firefox supports OpenGL but this latter seems not available.
What do you mean by that? I may be wrong, but from that page, I would say that OpenGL is available in Debian buster 32bit:
https://packages.debian.org/buster/libgl1-mesa-dev



---

archive/issue_comments_400381.json:
```json
{
    "body": "Replying to [comment:2 paulmasson]:\n\n> Detection of WebGL capability occurs in the browser, so there could be no automatic fallback once the process is handed off to the browser. At most we could display an error message, but I highly doubt even that will be necessary.\n\nDisplaying a helpful error message would be good at a minimum.  Currently, if ThreeJS fails to work (this can happen even on modern browsers if WebGL is explicitly disabled), the user just gets a blank screen.  In the JS console there will be an error message, but the average user is not inclined to check the console for errors.  They just see a blank screen and panic.  Better to give an error message and suggest alternate rendering methods.",
    "created_at": "2019-12-16T11:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400381",
    "user": "@embray"
}
```

Replying to [comment:2 paulmasson]:

> Detection of WebGL capability occurs in the browser, so there could be no automatic fallback once the process is handed off to the browser. At most we could display an error message, but I highly doubt even that will be necessary.

Displaying a helpful error message would be good at a minimum.  Currently, if ThreeJS fails to work (this can happen even on modern browsers if WebGL is explicitly disabled), the user just gets a blank screen.  In the JS console there will be an error message, but the average user is not inclined to check the console for errors.  They just see a blank screen and panic.  Better to give an error message and suggest alternate rendering methods.



---

archive/issue_comments_400382.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400382",
    "user": "@embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_400383.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400383",
    "user": "@mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_400384.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28352#issuecomment-400384",
    "user": "@mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.
