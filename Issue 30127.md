# Issue 30127: Doctests using system brial crash (segfault) on debian-sid, -buster

Issue created by migration from https://trac.sagemath.org/ticket/30364

Original creator: mkoeppe

Original creation time: 2020-08-15 00:28:31

CC:  fbissey dimpase mjo thansen snark

`debian-sid` (https://github.com/mkoeppe/sage/runs/985563463) and `debian-bullseye`:

```
sage -t --random-seed=0 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
sage -t --random-seed=0 src/doc/en/developer/coding_in_other.rst  # 1 doctest failed
sage -t --random-seed=0 src/doc/en/reference/sat/index.rst  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/crypto/mq/sr.py  # Killed due to abort
sage -t --random-seed=0 src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/modules/free_module_morphism.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/rings/complex_arb.pyx  # 6 doctests failed
sage -t --random-seed=0 src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/rings/polynomial/pbori.pyx  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort
sage -t --random-seed=0 src/sage/rings/real_arb.pyx  # 2 doctests failed
sage -t --random-seed=0 src/sage/sat/boolean_polynomials.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/sat/solvers/dimacs.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # Killed due to abort
```


Per previous tickets (#29490, #29792), we avoid brial 1.2.5 for the same reason. 

Here it is 1.2.8 that crashes, illustrating once more why version number based tests are not robust enough.







---

Comment by dimpase created at 2020-08-15 07:07:59

cc debian people


---

Comment by dimpase created at 2020-08-15 07:10:48

an explicit test on 1.2.5 was rather unclear how to accomplish, thus I opted for banning a version.


---

Comment by vbraun created at 2020-09-08 07:46:57

Changing priority from blocker to major.


---

Comment by vbraun created at 2020-09-08 07:46:57

Maybe we should have positive lists instead of negative lists, so by default we don't use unknown system versions? Either way, sid/bullseye are not (and will not be in the near future)  released versions -> not a blocker


---

Comment by mkoeppe created at 2020-09-09 01:10:10

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-09-09 01:10:10

The segfaults seem to have disappeared in more recent runs (https://groups.google.com/d/msg/sage-release/hobZzw74Rv0/0CkgcJYjCgAJ), so perhaps this was just a Debian bug.


---

Comment by dimpase created at 2020-09-09 06:12:45

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2020-10-11 16:43:58

Resolution: worksforme
