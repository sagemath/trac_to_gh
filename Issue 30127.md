# Issue 30127: Doctests using system brial crash (segfault) on debian-sid, -buster

archive/issues_030127.json:
```json
{
    "body": "CC:  @kiwifb @dimpase @orlitzky @tobihan snark\n\n`debian-sid` (https://github.com/mkoeppe/sage/runs/985563463) and `debian-bullseye`:\n\n```\nsage -t --random-seed=0 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\nsage -t --random-seed=0 src/doc/en/developer/coding_in_other.rst  # 1 doctest failed\nsage -t --random-seed=0 src/doc/en/reference/sat/index.rst  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/crypto/mq/sr.py  # Killed due to abort\nsage -t --random-seed=0 src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/modules/free_module_morphism.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/rings/complex_arb.pyx  # 6 doctests failed\nsage -t --random-seed=0 src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/rings/polynomial/pbori.pyx  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort\nsage -t --random-seed=0 src/sage/rings/real_arb.pyx  # 2 doctests failed\nsage -t --random-seed=0 src/sage/sat/boolean_polynomials.py  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/sat/solvers/dimacs.py  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # Killed due to abort\n```\n\n\nPer previous tickets (#29490, #29792), we avoid brial 1.2.5 for the same reason. \n\nHere it is 1.2.8 that crashes, illustrating once more why version number based tests are not robust enough.\n\n\n\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30364\n\n",
    "created_at": "2020-08-15T00:28:31Z",
    "labels": [
        "packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Doctests using system brial crash (segfault) on debian-sid, -buster",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30127",
    "user": "@mkoeppe"
}
```
CC:  @kiwifb @dimpase @orlitzky @tobihan snark

`debian-sid` (https://github.com/mkoeppe/sage/runs/985563463) and `debian-bullseye`:

```
sage -t --random-seed=0 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
sage -t --random-seed=0 src/doc/en/developer/coding_in_other.rst  # 1 doctest failed
sage -t --random-seed=0 src/doc/en/reference/sat/index.rst  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/crypto/mq/sr.py  # Killed due to abort
sage -t --random-seed=0 src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/modules/free_module_morphism.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/rings/complex_arb.pyx  # 6 doctests failed
sage -t --random-seed=0 src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/rings/polynomial/pbori.pyx  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort
sage -t --random-seed=0 src/sage/rings/real_arb.pyx  # 2 doctests failed
sage -t --random-seed=0 src/sage/sat/boolean_polynomials.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/sat/solvers/dimacs.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # Killed due to abort
```


Per previous tickets (#29490, #29792), we avoid brial 1.2.5 for the same reason. 

Here it is 1.2.8 that crashes, illustrating once more why version number based tests are not robust enough.






Issue created by migration from https://trac.sagemath.org/ticket/30364





---

archive/issue_comments_428756.json:
```json
{
    "body": "cc debian people",
    "created_at": "2020-08-15T07:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428756",
    "user": "@dimpase"
}
```

cc debian people



---

archive/issue_comments_428757.json:
```json
{
    "body": "an explicit test on 1.2.5 was rather unclear how to accomplish, thus I opted for banning a version.",
    "created_at": "2020-08-15T07:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428757",
    "user": "@dimpase"
}
```

an explicit test on 1.2.5 was rather unclear how to accomplish, thus I opted for banning a version.



---

archive/issue_comments_428758.json:
```json
{
    "body": "Changing priority from blocker to major.",
    "created_at": "2020-09-08T07:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428758",
    "user": "@vbraun"
}
```

Changing priority from blocker to major.



---

archive/issue_comments_428759.json:
```json
{
    "body": "Maybe we should have positive lists instead of negative lists, so by default we don't use unknown system versions? Either way, sid/bullseye are not (and will not be in the near future)  released versions -> not a blocker",
    "created_at": "2020-09-08T07:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428759",
    "user": "@vbraun"
}
```

Maybe we should have positive lists instead of negative lists, so by default we don't use unknown system versions? Either way, sid/bullseye are not (and will not be in the near future)  released versions -> not a blocker



---

archive/issue_comments_428760.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-09T01:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428760",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428761.json:
```json
{
    "body": "The segfaults seem to have disappeared in more recent runs (https://groups.google.com/d/msg/sage-release/hobZzw74Rv0/0CkgcJYjCgAJ), so perhaps this was just a Debian bug.",
    "created_at": "2020-09-09T01:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428761",
    "user": "@mkoeppe"
}
```

The segfaults seem to have disappeared in more recent runs (https://groups.google.com/d/msg/sage-release/hobZzw74Rv0/0CkgcJYjCgAJ), so perhaps this was just a Debian bug.



---

archive/issue_comments_428762.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-09T06:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428762",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428763.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-10-11T16:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30127#issuecomment-428763",
    "user": "@slel"
}
```

Resolution: worksforme
