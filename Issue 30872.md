# Issue 30872: Add height to function  field element

Issue created by migration from https://trac.sagemath.org/ticket/31109

Original creator: @Saher-Amasha

Original creation time: 2020-12-26 16:14:20

CC:  klee saraedum caruso @davewittemorris pbruin @brentbaccala

a function that returns the max degree between the denominator and numerator




---

Comment by @zazzou-phi created at 2020-12-30 17:02:01

i'd like to take a look at this. this will be my first contribution. you mean implement the naive height function according to https://en.wikipedia.org/wiki/Height_function


---

Comment by @Saher-Amasha created at 2021-01-03 19:48:57

thanks for taking interest in our project but we are adding this code as part of our final project for our bachelor degree


---

Comment by @zazzou-phi created at 2021-01-04 10:45:09

ok. thanks for your reply. i'll leave you to it.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by @Saher-Amasha created at 2021-02-16 08:01:57

Changing status from new to needs_review.


---

Comment by tscrim created at 2021-02-17 08:09:37

I would think a better name for this method would be something like `naive_height`. I am cc-ing some people who might have an opinion on this.

A few minor doc things:

```diff
         """
-         Return the max degree between the denominator and numerator .
+        Return the max degree between the denominator and numerator.
```

and remove these blanklines:

```diff
             sage: f.height_ff_element()
             1
-        
-
-         
         """
-
         return max(self._x.denominator().degree(),self._x.numerator().degree())
```

and before the `def height_ff_element`.
----
New commits:


---

Comment by caruso created at 2021-02-17 23:14:35

I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?


---

Comment by klee created at 2021-02-18 01:52:41

Replying to [comment:8 caruso]:
> I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?

The "degree" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, "degree" is simply the usual degree of the numerator minus the usual degree of the denominator. 

It seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.

In conclusion, I suggest to rename the method just to `height`, without `ff_element` part.


---

Comment by klee created at 2021-02-18 01:58:41

To authors: please remove the repeated examples in TESTS.


---

Comment by caruso created at 2021-02-18 07:57:11

Replying to [comment:9 klee]:
> The "degree" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, "degree" is simply the usual degree of the numerator minus the usual degree of the denominator. 

Well, I agree that this definition of degree is also more or less common.

However, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.

On the contrary, defining the degree of a rational function as the order of the pole at infinity does not really match with other definitions of degree we find in the literature (except for polynomials, of course, but I would say that it's a theorem in this case, not a definition).

> It seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.

I understand this argument but my feeling is that the word `height` is usually reserved for algebraic numbers, or varieties defined over number fields: Weil heights, Neron-Tate heights, Faltings heights, etc. are all defined in this context.

Maybe calling the method `height` for rational functions over finite fields would make sense but for a rational function over `QQ`, I really expect a `height` method to return a measure of the size of the coefficients (and the aforementioned Wikipedia page agrees).

So, I would continue to argue for using `degree`.


---

Comment by klee created at 2021-02-18 12:23:21

Replying to [comment:11 caruso]:
> However, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.

Right. I agree that the definition of the "degree" of a rational function should be that of general algebraic geometry. Let us reserve the name "height" for methods of arithmetic geometry.

Hence I am also for "degree".


---

Comment by @Saher-Amasha created at 2021-02-19 19:09:32

Thanks for the feedback.
I'll change the name of the function to "degree" remove the duplicate tests and clean up the code. 
I might need a couple of days for this however as currently I have an exam period .


---

Comment by git created at 2021-03-03 20:39:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by caruso created at 2021-03-07 13:31:29

Perfect. Thanks.


---

Comment by caruso created at 2021-03-07 13:31:29

Changing status from needs_review to positive_review.


---

Comment by klee created at 2021-03-08 02:36:59

Changing status from positive_review to needs_work.


---

Comment by klee created at 2021-03-08 02:36:59

There is one doctest failure in `ideal.py`. I don't know how this ticket is related with the failure. Anyway the doctest itself seems fragile. So I suggest to change it like


```diff
             sage: K.<x> = FunctionField(GF(4))
             sage: O = K.maximal_order()
             sage: I = O.ideal(x^3*(x+1)^2)
-            sage: I._factor()
-            [(Ideal (x) of Maximal order of Rational function field in x
-            over Finite Field in z2 of size 2^2, 3),
+            sage: I.factor()  # indirect doctest
+            (Ideal (x) of Maximal order of Rational function field in x
+            over Finite Field in z2 of size 2^2)^3 *
             (Ideal (x + 1) of Maximal order of Rational function field in x
-            over Finite Field in z2 of size 2^2, 2)]
+            over Finite Field in z2 of size 2^2)^2
```



---

Comment by git created at 2021-03-11 13:27:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @Saher-Amasha created at 2021-03-11 13:30:17

Changing status from needs_work to needs_review.


---

Comment by klee created at 2021-03-12 00:10:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-03-20 15:27:20

Resolution: fixed
