# Issue 30872: Add height to function  field element

archive/issues_030872.json:
```json
{
    "body": "CC:  @kwankyu @saraedum @xcaruso @davewittemorris @pjbruin @brentbaccala\n\na function that returns the max degree between the denominator and numerator\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31109\n\n",
    "created_at": "2020-12-26T16:14:20Z",
    "labels": [
        "component: algebra",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add height to function  field element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30872",
    "user": "https://github.com/Saher-Amasha"
}
```
CC:  @kwankyu @saraedum @xcaruso @davewittemorris @pjbruin @brentbaccala

a function that returns the max degree between the denominator and numerator



Issue created by migration from https://trac.sagemath.org/ticket/31109





---

archive/issue_comments_440754.json:
```json
{
    "body": "i'd like to take a look at this. this will be my first contribution. you mean implement the naive height function according to https://en.wikipedia.org/wiki/Height_function",
    "created_at": "2020-12-30T17:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440754",
    "user": "https://github.com/zazzou-phi"
}
```

i'd like to take a look at this. this will be my first contribution. you mean implement the naive height function according to https://en.wikipedia.org/wiki/Height_function



---

archive/issue_comments_440755.json:
```json
{
    "body": "thanks for taking interest in our project but we are adding this code as part of our final project for our bachelor degree",
    "created_at": "2021-01-03T19:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440755",
    "user": "https://github.com/Saher-Amasha"
}
```

thanks for taking interest in our project but we are adding this code as part of our final project for our bachelor degree



---

archive/issue_comments_440756.json:
```json
{
    "body": "ok. thanks for your reply. i'll leave you to it.",
    "created_at": "2021-01-04T10:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440756",
    "user": "https://github.com/zazzou-phi"
}
```

ok. thanks for your reply. i'll leave you to it.



---

archive/issue_comments_440757.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440757",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_440758.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-16T08:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440758",
    "user": "https://github.com/Saher-Amasha"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_440759.json:
```json
{
    "body": "I would think a better name for this method would be something like `naive_height`. I am cc-ing some people who might have an opinion on this.\n\nA few minor doc things:\n\n```diff\n         \"\"\"\n-         Return the max degree between the denominator and numerator .\n+        Return the max degree between the denominator and numerator.\n```\n\nand remove these blanklines:\n\n```diff\n             sage: f.height_ff_element()\n             1\n-        \n-\n-         \n         \"\"\"\n-\n         return max(self._x.denominator().degree(),self._x.numerator().degree())\n```\n\nand before the `def height_ff_element`.\n----\nNew commits:",
    "created_at": "2021-02-17T08:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440759",
    "user": "https://github.com/tscrim"
}
```

I would think a better name for this method would be something like `naive_height`. I am cc-ing some people who might have an opinion on this.

A few minor doc things:

```diff
         """
-         Return the max degree between the denominator and numerator .
+        Return the max degree between the denominator and numerator.
```

and remove these blanklines:

```diff
             sage: f.height_ff_element()
             1
-        
-
-         
         """
-
         return max(self._x.denominator().degree(),self._x.numerator().degree())
```

and before the `def height_ff_element`.
----
New commits:



---

archive/issue_comments_440760.json:
```json
{
    "body": "I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?",
    "created_at": "2021-02-17T23:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440760",
    "user": "https://github.com/xcaruso"
}
```

I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?



---

archive/issue_comments_440761.json:
```json
{
    "body": "Replying to [comment:8 caruso]:\n> I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?\n\nThe \"degree\" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, \"degree\" is simply the usual degree of the numerator minus the usual degree of the denominator. \n\nIt seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.\n\nIn conclusion, I suggest to rename the method just to `height`, without `ff_element` part.",
    "created_at": "2021-02-18T01:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440761",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:8 caruso]:
> I'm not sure that `height` is a good terminology because it is more commonly used to measure the complexity of rational or algebraic numbers. Why not `degree` (cf https://en.wikipedia.org/wiki/Rational_function#Degree)?

The "degree" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, "degree" is simply the usual degree of the numerator minus the usual degree of the denominator. 

It seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.

In conclusion, I suggest to rename the method just to `height`, without `ff_element` part.



---

archive/issue_comments_440762.json:
```json
{
    "body": "To authors: please remove the repeated examples in TESTS.",
    "created_at": "2021-02-18T01:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440762",
    "user": "https://github.com/kwankyu"
}
```

To authors: please remove the repeated examples in TESTS.



---

archive/issue_comments_440763.json:
```json
{
    "body": "Replying to [comment:9 klee]:\n> The \"degree\" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, \"degree\" is simply the usual degree of the numerator minus the usual degree of the denominator. \n\nWell, I agree that this definition of degree is also more or less common.\n\nHowever, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.\n\nOn the contrary, defining the degree of a rational function as the order of the pole at infinity does not really match with other definitions of degree we find in the literature (except for polynomials, of course, but I would say that it's a theorem in this case, not a definition).\n\n> It seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.\n\nI understand this argument but my feeling is that the word `height` is usually reserved for algebraic numbers, or varieties defined over number fields: Weil heights, Neron-Tate heights, Faltings heights, etc. are all defined in this context.\n\nMaybe calling the method `height` for rational functions over finite fields would make sense but for a rational function over `QQ`, I really expect a `height` method to return a measure of the size of the coefficients (and the aforementioned Wikipedia page agrees).\n\nSo, I would continue to argue for using `degree`.",
    "created_at": "2021-02-18T07:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440763",
    "user": "https://github.com/xcaruso"
}
```

Replying to [comment:9 klee]:
> The "degree" of an element of a function field is commonly understood (at least in the area of algebraic geometry codes where function fields are extensively used) as the negative value of the valuation of the element at an infinite place of the function field. For rational function field, "degree" is simply the usual degree of the numerator minus the usual degree of the denominator. 

Well, I agree that this definition of degree is also more or less common.

However, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.

On the contrary, defining the degree of a rational function as the order of the pole at infinity does not really match with other definitions of degree we find in the literature (except for polynomials, of course, but I would say that it's a theorem in this case, not a definition).

> It seems to me that the implemented method is comparable with the `height` that measures the complexity of rational numbers, in the context of rational function field.

I understand this argument but my feeling is that the word `height` is usually reserved for algebraic numbers, or varieties defined over number fields: Weil heights, Neron-Tate heights, Faltings heights, etc. are all defined in this context.

Maybe calling the method `height` for rational functions over finite fields would make sense but for a rational function over `QQ`, I really expect a `height` method to return a measure of the size of the coefficients (and the aforementioned Wikipedia page agrees).

So, I would continue to argue for using `degree`.



---

archive/issue_comments_440764.json:
```json
{
    "body": "Replying to [comment:11 caruso]:\n> However, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.\n\nRight. I agree that the definition of the \"degree\" of a rational function should be that of general algebraic geometry. Let us reserve the name \"height\" for methods of arithmetic geometry.\n\nHence I am also for \"degree\".",
    "created_at": "2021-02-18T12:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440764",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:11 caruso]:
> However, in general algebraic geometry, the degree of a mapping is more often defined as the number of preimages of the generic point (which is also the degree of the underlying algebraic ring extension). For rational functions, it agrees with the maximum of the degree of the numerator and the denominator. That's where this definition comes from.

Right. I agree that the definition of the "degree" of a rational function should be that of general algebraic geometry. Let us reserve the name "height" for methods of arithmetic geometry.

Hence I am also for "degree".



---

archive/issue_comments_440765.json:
```json
{
    "body": "Thanks for the feedback.\nI'll change the name of the function to \"degree\" remove the duplicate tests and clean up the code. \nI might need a couple of days for this however as currently I have an exam period .",
    "created_at": "2021-02-19T19:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440765",
    "user": "https://github.com/Saher-Amasha"
}
```

Thanks for the feedback.
I'll change the name of the function to "degree" remove the duplicate tests and clean up the code. 
I might need a couple of days for this however as currently I have an exam period .



---

archive/issue_comments_440766.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-03T20:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440766",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440767.json:
```json
{
    "body": "Perfect. Thanks.",
    "created_at": "2021-03-07T13:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440767",
    "user": "https://github.com/xcaruso"
}
```

Perfect. Thanks.



---

archive/issue_comments_440768.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-07T13:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440768",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440769.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-03-08T02:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440769",
    "user": "https://github.com/kwankyu"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_440770.json:
```json
{
    "body": "There is one doctest failure in `ideal.py`. I don't know how this ticket is related with the failure. Anyway the doctest itself seems fragile. So I suggest to change it like\n\n\n```diff\n             sage: K.<x> = FunctionField(GF(4))\n             sage: O = K.maximal_order()\n             sage: I = O.ideal(x^3*(x+1)^2)\n-            sage: I._factor()\n-            [(Ideal (x) of Maximal order of Rational function field in x\n-            over Finite Field in z2 of size 2^2, 3),\n+            sage: I.factor()  # indirect doctest\n+            (Ideal (x) of Maximal order of Rational function field in x\n+            over Finite Field in z2 of size 2^2)^3 *\n             (Ideal (x + 1) of Maximal order of Rational function field in x\n-            over Finite Field in z2 of size 2^2, 2)]\n+            over Finite Field in z2 of size 2^2)^2\n```\n",
    "created_at": "2021-03-08T02:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440770",
    "user": "https://github.com/kwankyu"
}
```

There is one doctest failure in `ideal.py`. I don't know how this ticket is related with the failure. Anyway the doctest itself seems fragile. So I suggest to change it like


```diff
             sage: K.<x> = FunctionField(GF(4))
             sage: O = K.maximal_order()
             sage: I = O.ideal(x^3*(x+1)^2)
-            sage: I._factor()
-            [(Ideal (x) of Maximal order of Rational function field in x
-            over Finite Field in z2 of size 2^2, 3),
+            sage: I.factor()  # indirect doctest
+            (Ideal (x) of Maximal order of Rational function field in x
+            over Finite Field in z2 of size 2^2)^3 *
             (Ideal (x + 1) of Maximal order of Rational function field in x
-            over Finite Field in z2 of size 2^2, 2)]
+            over Finite Field in z2 of size 2^2)^2
```




---

archive/issue_comments_440771.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-11T13:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440771",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440772.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-11T13:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440772",
    "user": "https://github.com/Saher-Amasha"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_440773.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-12T00:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440773",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440774.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-20T15:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-440774",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_028309.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-20T15:27:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30872#event-28309"
}
```
