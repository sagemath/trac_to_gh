# Issue 17452: A tutorial on profiling in Sage

archive/issues_017452.json:
```json
{
    "body": "CC:  kcrisman jhpalmieri vdelecroix tmonteil dcoudert azi jmantysalo\n\nThis branch adds a tutorial on profiling in Sage. It merely points users toward the right tools and their specific documentation.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17689\n\n",
    "created_at": "2015-01-29T13:39:27Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "title": "A tutorial on profiling in Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17452",
    "user": "ncohen"
}
```
CC:  kcrisman jhpalmieri vdelecroix tmonteil dcoudert azi jmantysalo

This branch adds a tutorial on profiling in Sage. It merely points users toward the right tools and their specific documentation.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17689





---

archive/issue_comments_233134.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-01-29T13:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233134",
    "user": "ncohen"
}
```

New commits:



---

archive/issue_comments_233135.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-29T13:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233135",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_233136.json:
```json
{
    "body": "Hello,\n\nVery cool to start that! Here are just potential improvements to discuss. This is not a complete review and I think it would be nice if several people actually read it.\n\n* For `%prun` would be cool to explain a little bit the columns. In particular why there is twice \"percall\".\n\n* In `%prun` what do you mean by 'critical functions'?\n\n* The following does not work for me\n {{{\n  sage: %prun -r random_prime(2**500)\n  sage: stats_object = _\n  sage: stats.total_calls\n  2547\n  Traceback (most recent call last):\n  ...\n  AttributeError: 'module' object has no attribute 'total_calls'\n }}}\n\n* The `runsnake` program is curiously contained in the package `runsnakerun` on debian-like os. More generally, it would be cool to say on standard OS what are the packages to install. Right now it is only the case for `perf`.\n\n* For perf you need to launch the process before launching it??\n\nVincent",
    "created_at": "2015-01-29T18:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233136",
    "user": "vdelecroix"
}
```

Hello,

Very cool to start that! Here are just potential improvements to discuss. This is not a complete review and I think it would be nice if several people actually read it.

* For `%prun` would be cool to explain a little bit the columns. In particular why there is twice "percall".

* In `%prun` what do you mean by 'critical functions'?

* The following does not work for me
 {{{
  sage: %prun -r random_prime(2**500)
  sage: stats_object = _
  sage: stats.total_calls
  2547
  Traceback (most recent call last):
  ...
  AttributeError: 'module' object has no attribute 'total_calls'
 }}}

* The `runsnake` program is curiously contained in the package `runsnakerun` on debian-like os. More generally, it would be cool to say on standard OS what are the packages to install. Right now it is only the case for `perf`.

* For perf you need to launch the process before launching it??

Vincent



---

archive/issue_comments_233137.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-29T19:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233137",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233138.json:
```json
{
    "body": "Hello,\n\n>  * For `%prun` would be cool to explain a little bit the columns. In particular why there is twice \"percall\".\n\nI added a link for that. I am trying to keep this document \"short and efficient\" and to give users an idea of where to look for what they need, without documenting other people's code.\n\n>  * In `%prun` what do you mean by 'critical functions'?\n\nI meant 'performance-critical'. I rephrased it.\n\n>  * The following does not work for me\n\nThe second 'stats' should be 'stats_object'. Fixed.\n\n>  * The `runsnake` program is curiously contained in the package `runsnakerun` on debian-like os. More generally, it would be cool to say on standard OS what are the packages to install. Right now it is only the case for `perf`.\n\nI added this information for 'perf' because 'perf' is a very common keyword in softwares, and that it is actually non-trivial to find out that it is part of linux-tools unless you more or less know what to look for.\n\nTo find out that 'runsnake' is included in the 'runsnakerun' debian package you need to type 'runsnake debian' in google (samek for ubuntu), and probably for most others. I fear that if I add one people will come from Fedora, archlinux and who knows what else to add totally trivial information.\n\n\n```\n~$ apt-cache search runsnake\nrunsnakerun - GUI utility for (Python) cProfile or Profile profiler dumps\n```\n\n\n>  * For perf you need to launch the process before launching it??\n\nNo need. This thing is a wonder.\n\nNathann",
    "created_at": "2015-01-29T19:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233138",
    "user": "ncohen"
}
```

Hello,

>  * For `%prun` would be cool to explain a little bit the columns. In particular why there is twice "percall".

I added a link for that. I am trying to keep this document "short and efficient" and to give users an idea of where to look for what they need, without documenting other people's code.

>  * In `%prun` what do you mean by 'critical functions'?

I meant 'performance-critical'. I rephrased it.

>  * The following does not work for me

The second 'stats' should be 'stats_object'. Fixed.

>  * The `runsnake` program is curiously contained in the package `runsnakerun` on debian-like os. More generally, it would be cool to say on standard OS what are the packages to install. Right now it is only the case for `perf`.

I added this information for 'perf' because 'perf' is a very common keyword in softwares, and that it is actually non-trivial to find out that it is part of linux-tools unless you more or less know what to look for.

To find out that 'runsnake' is included in the 'runsnakerun' debian package you need to type 'runsnake debian' in google (samek for ubuntu), and probably for most others. I fear that if I add one people will come from Fedora, archlinux and who knows what else to add totally trivial information.


```
~$ apt-cache search runsnake
runsnakerun - GUI utility for (Python) cProfile or Profile profiler dumps
```


>  * For perf you need to launch the process before launching it??

No need. This thing is a wonder.

Nathann



---

archive/issue_comments_233139.json:
```json
{
    "body": "I just noticed a couple of mistakes in my last commit. I will update it today.",
    "created_at": "2015-01-30T11:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233139",
    "user": "ncohen"
}
```

I just noticed a couple of mistakes in my last commit. I will update it today.



---

archive/issue_comments_233140.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-30T11:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233140",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_233141.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-30T11:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233141",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233142.json:
```json
{
    "body": "Done.",
    "created_at": "2015-01-30T11:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233142",
    "user": "ncohen"
}
```

Done.



---

archive/issue_comments_233143.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-30T11:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233143",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_233144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-02-01T08:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233145.json:
```json
{
    "body": "Hello,\n\nI like the functional way of using `timeit`\n\n```\nsage: timeit(\"for i in range(2,100): _ = is_prime(i)\")\n625 loops, best of 3: 964 \u00b5s per loop\n```\n\nEspecially because it allows you to tune the parameters\n\n```\nsage: timeit(\"for i in range(2,100): _ = is_prime(i)\", number=137, precision=3)\n137 loops, best of 3: 1.05 ms per loop\n```\n\nAnd even better, I like `sage_timeit` that allows you to play with the results (which is useful if you want to benchmark several implementations)\n\n```\nsage: from sage.misc.sage_timeit import sage_timeit\nsage: t = sage_timeit(\"for i in range(2,100): _ = is_prime(i)\", globals_dict=globals())\nsage: t.stats\n(625, 3, 3, 924.3534088134766, '\\xc2\\xb5s')\nsage: t.series\n[0.0009369647979736328, 0.0009340656280517578, 0.0009243534088134766]\n```\n\nWhat do you think of having it mentioned?\n\nVincent",
    "created_at": "2015-02-01T10:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233145",
    "user": "vdelecroix"
}
```

Hello,

I like the functional way of using `timeit`

```
sage: timeit("for i in range(2,100): _ = is_prime(i)")
625 loops, best of 3: 964 µs per loop
```

Especially because it allows you to tune the parameters

```
sage: timeit("for i in range(2,100): _ = is_prime(i)", number=137, precision=3)
137 loops, best of 3: 1.05 ms per loop
```

And even better, I like `sage_timeit` that allows you to play with the results (which is useful if you want to benchmark several implementations)

```
sage: from sage.misc.sage_timeit import sage_timeit
sage: t = sage_timeit("for i in range(2,100): _ = is_prime(i)", globals_dict=globals())
sage: t.stats
(625, 3, 3, 924.3534088134766, '\xc2\xb5s')
sage: t.series
[0.0009369647979736328, 0.0009340656280517578, 0.0009243534088134766]
```

What do you think of having it mentioned?

Vincent



---

archive/issue_comments_233146.json:
```json
{
    "body": "Hello,\n\n> I like the functional way of using `timeit`\n>\n> And even better, I like `sage_timeit` that allows you to play with the results (which is useful if you want to benchmark several implementations)\n>\n> What do you think of having it mentioned?\n\nWould it be a problem for you if this documentation appeared in the docstring of `sage_timeit` (or its module)? Documenting the various arguments, their effects and uses is the job of the function's documentation.\n\nWe could then add a link from the tutorial to these places so that the interested user finds them.\n\nI meant this page to be an overview of the different means to profile code in Sage, as it is difficult to find \"timeit/prun/lprun/crun/perf\" if you do not know the name already. With this page, people interested in profiling will find all the keywords they need, and links toward the specific documentations.\n\nNathann",
    "created_at": "2015-02-01T11:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233146",
    "user": "ncohen"
}
```

Hello,

> I like the functional way of using `timeit`
>
> And even better, I like `sage_timeit` that allows you to play with the results (which is useful if you want to benchmark several implementations)
>
> What do you think of having it mentioned?

Would it be a problem for you if this documentation appeared in the docstring of `sage_timeit` (or its module)? Documenting the various arguments, their effects and uses is the job of the function's documentation.

We could then add a link from the tutorial to these places so that the interested user finds them.

I meant this page to be an overview of the different means to profile code in Sage, as it is difficult to find "timeit/prun/lprun/crun/perf" if you do not know the name already. With this page, people interested in profiling will find all the keywords they need, and links toward the specific documentations.

Nathann



---

archive/issue_comments_233147.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-03T20:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233147",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233148.json:
```json
{
    "body": "Turns out that we already had an interface with runsnake. I simplified an entry. Still in `needs_review`.\n\nNathann",
    "created_at": "2015-02-03T20:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233148",
    "user": "ncohen"
}
```

Turns out that we already had an interface with runsnake. I simplified an entry. Still in `needs_review`.

Nathann



---

archive/issue_comments_233149.json:
```json
{
    "body": "Ping ?...\n\nNathann\n\nP.S.: There is a stable release ahead, and the doc that will not make it before that will not appear online until the next one `^^;;;`",
    "created_at": "2015-02-05T10:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233149",
    "user": "ncohen"
}
```

Ping ?...

Nathann

P.S.: There is a stable release ahead, and the doc that will not make it before that will not appear online until the next one `^^;;;`



---

archive/issue_comments_233150.json:
```json
{
    "body": "This doc is very nice. Below are some comments / problems.\n\n* `Note that while %time only runs the command once, timeit tries to return a more meaningful value over several runs.` -> shouldn't you write `%timeit` instead ?\n\n* The `runsnake` command is not working on my mac, and the reported problem is not always the same :( Is this a known issue?\n\n```\nsage: runsnake('random_prime(2**500)')\nsage:   File \"/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_WELnaQ\", line 1\n    {(i\n      ^\nSyntaxError: invalid syntax\n\nsage: \nsage: runsnake('random_prime(2**500)')\nsage:   File \"/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_UNaKxo\", line 1\nSyntaxError: Non-ASCII character '\\xc5' in file /Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_UNaKxo on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details\n\nsage: runsnake('random_prime(2**500)')\nsage:   File \"/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_q4q1bM\", line 1\nSyntaxError: Non-ASCII character '\\xfb' in file /Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_q4q1bM on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details\n\nsage: \n```\n\n\n* `%crun`: I have very different output. Is it normal ?\n\n```\nsage: %crun p=random_prime(2**500)\nPROFILE: interrupts/evictions/bytes = 57/0/1840\nUsing local file /Users/dcoudert/sage/local/bin/python.\nUsing local file /Users/dcoudert/.sage/temp/confetti.inria.fr/38434/tmp_IbMOhg.perf.\nTotal: 57 samples\n       0   0.0%   0.0%       10  17.5% __mh_execute_header\n       3   5.3%   5.3%        3   5.3% 0x00007fff8a751c13\n       0   0.0%   5.3%        2   3.5% 0x000000010225ce6b\n       0   0.0%   5.3%        2   3.5% 0x00000001031e6ac8\n       0   0.0%   5.3%        2   3.5% 0x000000010399c0ee\n       0   0.0%   5.3%        2   3.5% 0x00007fff5da2fd4f\n       0   0.0%   5.3%        1   1.8% 0x00000001021e57f9\n```\n\n\n* I'm not checking the linux-only section on my mac.\n\n* As we already discussed, you may add a link to http://stackoverflow.com/questions/13075113/is-there-anyway-to-read-performance-counters-on-os-x-mountain-lion/13075880#13075880. The described procedure is not obvious and I'm not going to using it frequently, but it was working when I tried. It's really a pitty that profiling tools are not available on linux+mac.\n\nDavid.",
    "created_at": "2015-02-06T17:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233150",
    "user": "dcoudert"
}
```

This doc is very nice. Below are some comments / problems.

* `Note that while %time only runs the command once, timeit tries to return a more meaningful value over several runs.` -> shouldn't you write `%timeit` instead ?

* The `runsnake` command is not working on my mac, and the reported problem is not always the same :( Is this a known issue?

```
sage: runsnake('random_prime(2**500)')
sage:   File "/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_WELnaQ", line 1
    {(i
      ^
SyntaxError: invalid syntax

sage: 
sage: runsnake('random_prime(2**500)')
sage:   File "/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_UNaKxo", line 1
SyntaxError: Non-ASCII character '\xc5' in file /Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_UNaKxo on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details

sage: runsnake('random_prime(2**500)')
sage:   File "/Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_q4q1bM", line 1
SyntaxError: Non-ASCII character '\xfb' in file /Users/dcoudert/.sage/temp/confetti.inria.fr/17114/tmp_q4q1bM on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details

sage: 
```


* `%crun`: I have very different output. Is it normal ?

```
sage: %crun p=random_prime(2**500)
PROFILE: interrupts/evictions/bytes = 57/0/1840
Using local file /Users/dcoudert/sage/local/bin/python.
Using local file /Users/dcoudert/.sage/temp/confetti.inria.fr/38434/tmp_IbMOhg.perf.
Total: 57 samples
       0   0.0%   0.0%       10  17.5% __mh_execute_header
       3   5.3%   5.3%        3   5.3% 0x00007fff8a751c13
       0   0.0%   5.3%        2   3.5% 0x000000010225ce6b
       0   0.0%   5.3%        2   3.5% 0x00000001031e6ac8
       0   0.0%   5.3%        2   3.5% 0x000000010399c0ee
       0   0.0%   5.3%        2   3.5% 0x00007fff5da2fd4f
       0   0.0%   5.3%        1   1.8% 0x00000001021e57f9
```


* I'm not checking the linux-only section on my mac.

* As we already discussed, you may add a link to http://stackoverflow.com/questions/13075113/is-there-anyway-to-read-performance-counters-on-os-x-mountain-lion/13075880#13075880. The described procedure is not obvious and I'm not going to using it frequently, but it was working when I tried. It's really a pitty that profiling tools are not available on linux+mac.

David.



---

archive/issue_comments_233151.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-06T22:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233151",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233152.json:
```json
{
    "body": "Yo,\n\n> * `Note that while %time only runs the command once, timeit tries to return a more meaningful value over several runs.` -> shouldn't you write `%timeit` instead ?\n\nFixed.\n\n> * The `runsnake` command is not working on my mac, and the reported problem is not always the same :( Is this a known issue?\n\nI don't know. There are two tickets that I know about `runsnake`: #17735 and #14414.\n\n> * `%crun`: I have very different output. Is it normal ?\n\nNo idea. It looks like Python may have been compiled with different flags, but I do not know enough to answer that. I expect that the function will still be useful when the most time-consuming entries are Sage functions and not those internal Python functions.\n\n> * As we already discussed, you may add a link to http://stackoverflow.com/questions/13075113/is-there-anyway-to-read-performance-counters-on-os-x-mountain-lion/13075880#13075880.\n\nI prefer to not add a link toward a tutorial I cannot test myself.\n\nNathann",
    "created_at": "2015-02-06T22:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233152",
    "user": "ncohen"
}
```

Yo,

> * `Note that while %time only runs the command once, timeit tries to return a more meaningful value over several runs.` -> shouldn't you write `%timeit` instead ?

Fixed.

> * The `runsnake` command is not working on my mac, and the reported problem is not always the same :( Is this a known issue?

I don't know. There are two tickets that I know about `runsnake`: #17735 and #14414.

> * `%crun`: I have very different output. Is it normal ?

No idea. It looks like Python may have been compiled with different flags, but I do not know enough to answer that. I expect that the function will still be useful when the most time-consuming entries are Sage functions and not those internal Python functions.

> * As we already discussed, you may add a link to http://stackoverflow.com/questions/13075113/is-there-anyway-to-read-performance-counters-on-os-x-mountain-lion/13075880#13075880.

I prefer to not add a link toward a tutorial I cannot test myself.

Nathann



---

archive/issue_comments_233153.json:
```json
{
    "body": "Unfortunately I'm unable to test all proposed methods, so I cannot help more.",
    "created_at": "2015-02-07T13:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233153",
    "user": "dcoudert"
}
```

Unfortunately I'm unable to test all proposed methods, so I cannot help more.



---

archive/issue_comments_233154.json:
```json
{
    "body": "> Unfortunately I'm unable to test all proposed methods, so I cannot help more.\n\nI understand, thanks for your help! But do give the 'perf' thing a try if you ever get a linux machine around, it may convince you to give mac up for your next laptop `;-)`\n\nNathann",
    "created_at": "2015-02-07T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233154",
    "user": "ncohen"
}
```

> Unfortunately I'm unable to test all proposed methods, so I cannot help more.

I understand, thanks for your help! But do give the 'perf' thing a try if you ever get a linux machine around, it may convince you to give mac up for your next laptop `;-)`

Nathann



---

archive/issue_comments_233155.json:
```json
{
    "body": "Guys ?... The next stable release is pretty close. Would anybody have some time to review this patch so that it appears in the updated online doc ?\n\nNathann",
    "created_at": "2015-02-10T17:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233155",
    "user": "ncohen"
}
```

Guys ?... The next stable release is pretty close. Would anybody have some time to review this patch so that it appears in the updated online doc ?

Nathann



---

archive/issue_comments_233156.json:
```json
{
    "body": "Guys ?... It's only text...",
    "created_at": "2015-02-13T08:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233156",
    "user": "ncohen"
}
```

Guys ?... It's only text...



---

archive/issue_comments_233157.json:
```json
{
    "body": "I am a bit overloaded right now to help more on this interesting and important ticket, but as such, there is a big confusion between ipython `%timeit` and Sage `timeit`, so `%timeit` has nothing to do with `timeit <sage.misc.sage_timeit_class>`. A problem with `%timeit` is that it is ipython only, so it will not work in Sage notebook (that does not rely on ipython). So you need at least to point to the right documentations for the two different `timeit`, see `timeit?` vs `%timeit?`.\n\nFor example, with the Sage `timeit()` command, you can not do:\n\n\n```\nsage: timeit(factor(1234567890))\nAttributeError: 'IntegerFactorization' object has no attribute 'lstrip'\n```\n\n\nYou have to do\n\n\n```\nsage: timeit(\"factor(1234567890)\")\n625 loops, best of 3: 72.8 \u00b5s per loop\n```\n\n\nBut then, with ipython:\n\n\n```\nsage: %timeit(\"factor(1234567890)\")\n10000000 loops, best of 3: 26.3 ns per loop\n```\n\n\nWhich is much faster... Indeed, it measures the time for creating the string ! What you have to do instead is:\n\n\n```\nsage: %timeit(factor(1234567890))\n10000 loops, best of 3: 59.2 \u00b5s per loop\n```\n\n\nor\n\n\n```\nsage: %timeit factor(1234567890)\n10000 loops, best of 3: 59.5 \u00b5s per loop\n```\n\n\nSo there is a confusion that can lead to a silent misuse. It think this distinction should be made clear.",
    "created_at": "2015-02-13T13:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233157",
    "user": "tmonteil"
}
```

I am a bit overloaded right now to help more on this interesting and important ticket, but as such, there is a big confusion between ipython `%timeit` and Sage `timeit`, so `%timeit` has nothing to do with `timeit <sage.misc.sage_timeit_class>`. A problem with `%timeit` is that it is ipython only, so it will not work in Sage notebook (that does not rely on ipython). So you need at least to point to the right documentations for the two different `timeit`, see `timeit?` vs `%timeit?`.

For example, with the Sage `timeit()` command, you can not do:


```
sage: timeit(factor(1234567890))
AttributeError: 'IntegerFactorization' object has no attribute 'lstrip'
```


You have to do


```
sage: timeit("factor(1234567890)")
625 loops, best of 3: 72.8 µs per loop
```


But then, with ipython:


```
sage: %timeit("factor(1234567890)")
10000000 loops, best of 3: 26.3 ns per loop
```


Which is much faster... Indeed, it measures the time for creating the string ! What you have to do instead is:


```
sage: %timeit(factor(1234567890))
10000 loops, best of 3: 59.2 µs per loop
```


or


```
sage: %timeit factor(1234567890)
10000 loops, best of 3: 59.5 µs per loop
```


So there is a confusion that can lead to a silent misuse. It think this distinction should be made clear.



---

archive/issue_comments_233158.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-13T13:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233158",
    "user": "tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_233159.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-13T15:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233159",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233160.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-13T15:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233160",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_233161.json:
```json
{
    "body": "> I am a bit overloaded right now to help more on this interesting and important ticket, but as such, there is a big confusion between ipython `%timeit` and Sage `timeit`, so `%timeit` has nothing to do with `timeit <sage.misc.sage_timeit_class>`.\n\nAs I did not even use `timeit` in the examples I chose to remove this link toward Sage's timeit function. We still link toward Python's timeit function.\n\nAll examples in this document use `%` functions, and the last one requires a terminal, so notebook users are already a bit out of scope.\n\nNathann",
    "created_at": "2015-02-13T15:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233161",
    "user": "ncohen"
}
```

> I am a bit overloaded right now to help more on this interesting and important ticket, but as such, there is a big confusion between ipython `%timeit` and Sage `timeit`, so `%timeit` has nothing to do with `timeit <sage.misc.sage_timeit_class>`.

As I did not even use `timeit` in the examples I chose to remove this link toward Sage's timeit function. We still link toward Python's timeit function.

All examples in this document use `%` functions, and the last one requires a terminal, so notebook users are already a bit out of scope.

Nathann



---

archive/issue_comments_233162.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-11T12:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233162",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233163.json:
```json
{
    "body": "Rebased on the latest beta.",
    "created_at": "2015-03-11T12:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233163",
    "user": "ncohen"
}
```

Rebased on the latest beta.



---

archive/issue_comments_233164.json:
```json
{
    "body": "Guys ?...",
    "created_at": "2015-03-17T12:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233164",
    "user": "ncohen"
}
```

Guys ?...



---

archive/issue_comments_233165.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-31T14:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233165",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233166.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-31T14:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233166",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233167.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-31T14:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233167",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_233168.json:
```json
{
    "body": "I added some info about the `timeit` Sage function since the `%timeit` IPython magic is not available from the Sage notebook, and clarify the fact that `%` IPython magics are not Python commands. Is-it OK ?",
    "created_at": "2015-03-31T14:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233168",
    "user": "tmonteil"
}
```

I added some info about the `timeit` Sage function since the `%timeit` IPython magic is not available from the Sage notebook, and clarify the fact that `%` IPython magics are not Python commands. Is-it OK ?



---

archive/issue_comments_233169.json:
```json
{
    "body": "> I added some info about the `timeit` Sage function since the `%timeit` IPython magic is not available from the Sage notebook, and clarify the fact that `%` IPython magics are not Python commands. Is-it OK ?\n\nYeahyeah it is fine (and concise, thanks ! `:-P`). I shortened a couple of sentences and replaced (as you asked me to) the 500 with a 300 in the first examples, so that the `timeit` call runs more than 1 loop.\n\nIs that okay for you?\n\nNathann",
    "created_at": "2015-03-31T15:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233169",
    "user": "ncohen"
}
```

> I added some info about the `timeit` Sage function since the `%timeit` IPython magic is not available from the Sage notebook, and clarify the fact that `%` IPython magics are not Python commands. Is-it OK ?

Yeahyeah it is fine (and concise, thanks ! `:-P`). I shortened a couple of sentences and replaced (as you asked me to) the 500 with a 300 in the first examples, so that the `timeit` call runs more than 1 loop.

Is that okay for you?

Nathann



---

archive/issue_comments_233170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-31T15:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233170",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233171.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-31T15:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233171",
    "user": "tmonteil"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_233172.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd66\".",
    "created_at": "2015-03-31T15:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233172",
    "user": "tmonteil"
}
```

Changing keywords from "" to "sd66".



---

archive/issue_comments_233173.json:
```json
{
    "body": "Good to go !",
    "created_at": "2015-03-31T15:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233173",
    "user": "tmonteil"
}
```

Good to go !



---

archive/issue_comments_233174.json:
```json
{
    "body": "Wouhouuuuuuuu ! THaaaaaaaaaaanks ! `;-)`\n\nNathann",
    "created_at": "2015-03-31T15:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233174",
    "user": "ncohen"
}
```

Wouhouuuuuuuu ! THaaaaaaaaaaanks ! `;-)`

Nathann



---

archive/issue_comments_233175.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-14T19:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17452#issuecomment-233175",
    "user": "vbraun"
}
```

Resolution: fixed
