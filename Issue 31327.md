# Issue 31327: update mpmath to 1.2.0

archive/issues_031327.json:
```json
{
    "body": "CC:  @mkoeppe @kiwifb\n\nhttps://mpmath.org/files/mpmath-1.2.0.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/31564\n\n",
    "created_at": "2021-03-26T08:45:32Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "update mpmath to 1.2.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31327",
    "user": "@dimpase"
}
```
CC:  @mkoeppe @kiwifb

https://mpmath.org/files/mpmath-1.2.0.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/31564





---

archive/issue_comments_448003.json:
```json
{
    "body": "mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath",
    "created_at": "2021-03-26T09:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448003",
    "user": "@rocky"
}
```

mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath



---

archive/issue_comments_448004.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-26T09:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448004",
    "user": "@dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_448005.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-03-26T09:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448005",
    "user": "@dimpase"
}
```

New commits:



---

archive/issue_comments_448006.json:
```json
{
    "body": "Replying to [comment:1 gh-rocky]:\n> mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath\n\nmpmath homepage says 1.2.0\n\nI've openened https://github.com/fredrik-johansson/mpmath/issues/584\nto clarify.",
    "created_at": "2021-03-26T09:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448006",
    "user": "@dimpase"
}
```

Replying to [comment:1 gh-rocky]:
> mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath

mpmath homepage says 1.2.0

I've openened https://github.com/fredrik-johansson/mpmath/issues/584
to clarify.



---

archive/issue_comments_448007.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-03-26T10:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448007",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_448008.json:
```json
{
    "body": "fixed typo in commit message",
    "created_at": "2021-03-26T10:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448008",
    "user": "@dimpase"
}
```

fixed typo in commit message



---

archive/issue_comments_448009.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-26T10:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448009",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_448010.json:
```json
{
    "body": "hmm, this errors out with\n\n```\n[mpmath-1.2.0] ERROR: Could not find a version that satisfies the requirement setuptools_scm>=1.7.0\n[mpmath-1.2.0] ERROR: No matching distribution found for setuptools_scm>=1.7.0\n```\n",
    "created_at": "2021-03-26T10:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448010",
    "user": "@dimpase"
}
```

hmm, this errors out with

```
[mpmath-1.2.0] ERROR: Could not find a version that satisfies the requirement setuptools_scm>=1.7.0
[mpmath-1.2.0] ERROR: No matching distribution found for setuptools_scm>=1.7.0
```




---

archive/issue_comments_448011.json:
```json
{
    "body": "Matthias, any idea what can cause this? \n\nWith `u/mkoeppe/sagelib__add_setup_cfg__install_requires_` applied, I get a different error\n\n```\nInstalling mpmath-1.2.0\nTraceback (most recent call last):\n  File \"setup.py\", line 6, in <module>\n    setuptools.setup(use_scm_version=True)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/__init__.py\", line 153, in setup\n    return distutils.core.setup(**attrs)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/core.py\", line 108, in setup\n    _setup_distribution = dist = klass(attrs)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 424, in __init__\n    k: v for k, v in attrs.items()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/dist.py\", line 293, in __init__\n    self.finalize_options()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 695, in finalize_options\n    ep(self)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 702, in _finalize_setup_keywords\n    ep.load()(self, ep.name, value)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/integration.py\", line 26, in version_keyword\n    dist.metadata.version = _get_version(config)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py\", line 173, in _get_version\n    parsed_version = _do_parse(config)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py\", line 142, in _do_parse\n    \"use git+https://github.com/user/proj.git#egg=proj\" % config.absolute_root\nLookupError: setuptools-scm was unable to detect version for '/home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src'.\n\nMake sure you're either building from a fully intact git repository or PyPI tarballs. Most other sources (such as GitHub's tarballs, a git checkout without the .git folder) don't contain the necessary metadata and will not work.\n\nFor example, if you're using pip, instead of https://github.com/user/proj/archive/master.zip use git+https://github.com/user/proj.git#egg=proj\nError: could not determine package name\nWarning: Failure trying to uninstall a previous version of mpmath-1.2.0\nIgnoring indexes: https://pypi.org/simple\nCreated temporary directory: /home/scratch2/dimpase/tmp/pip-ephem-wheel-cache-a3rlnu1g\nCreated temporary directory: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o\nInitialized build tracking at /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o\nCreated build tracker: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o\nEntered build tracker: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o\nCreated temporary directory: /home/scratch2/dimpase/tmp/pip-wheel-gt6q_58m\nProcessing /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src\n  Created temporary directory: /home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k\n  Added file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src to build tracker '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'\n    Running setup.py (path:/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k/setup.py) egg_info for package from file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src\n    Created temporary directory: /home/scratch2/dimpase/tmp/pip-pip-egg-info-0589o42m\n    Running command python setup.py egg_info\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k/setup.py\", line 6, in <module>\n        setuptools.setup(use_scm_version=True)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/__init__.py\", line 153, in setup\n        return distutils.core.setup(**attrs)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/core.py\", line 108, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 424, in __init__\n        k: v for k, v in attrs.items()\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/dist.py\", line 293, in __init__\n        self.finalize_options()\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 695, in finalize_options\n        ep(self)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py\", line 702, in _finalize_setup_keywords\n        ep.load()(self, ep.name, value)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/integration.py\", line 26, in version_keyword\n        dist.metadata.version = _get_version(config)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py\", line 173, in _get_version\n        parsed_version = _do_parse(config)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py\", line 142, in _do_parse\n        \"use git+https://github.com/user/proj.git#egg=proj\" % config.absolute_root\n    LookupError: setuptools-scm was unable to detect version for '/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k'.\n\n    Make sure you're either building from a fully intact git repository or PyPI tarballs. Most other sources (such as GitHub's tarballs, a git checkout without the .git folder) don't contain the necessary metadata and will not work.\n\n    For example, if you're using pip, instead of https://github.com/user/proj/archive/master.zip use git+https://github.com/user/proj.git#egg=proj\nWARNING: Discarding file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src. Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\nException information:\nTraceback (most recent call last):\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 189, in _main\n    status = self.run(options, args)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/cli/req_command.py\", line 178, in wrapper\n    return func(self, options, args)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/commands/wheel.py\", line 159, in run\n    reqs, check_supported_wheels=True\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/resolver.py\", line 101, in resolve\n    req, requested_extras=(),\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/factory.py\", line 316, in make_requirement_from_install_req\n    raise self._build_failures[ireq.link]\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/factory.py\", line 169, in _make_candidate_from_link\n    name=name, version=version,\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py\", line 306, in __init__\n    version=version,\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py\", line 144, in __init__\n    self.dist = self._prepare()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py\", line 226, in _prepare\n    dist = self._prepare_distribution()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py\", line 312, in _prepare_distribution\n    self._ireq, parallel_builds=True,\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 457, in prepare_linked_requirement\n    return self._prepare_linked_requirement(req, parallel_builds)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 501, in _prepare_linked_requirement\n    req, self.req_tracker, self.finder, self.build_isolation,\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 66, in _get_prepared_distribution\n    abstract_dist.prepare_distribution_metadata(finder, build_isolation)\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/distributions/sdist.py\", line 41, in prepare_distribution_metadata\n    self.req.prepare_metadata()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/req/req_install.py\", line 549, in prepare_metadata\n    self.metadata_directory = self._generate_metadata()\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/req/req_install.py\", line 529, in _generate_metadata\n    details=self.name or f\"from {self.link}\"\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/build/metadata_legacy.py\", line 73, in generate_metadata\n    command_desc='python setup.py egg_info',\n  File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/utils/subprocess.py\", line 258, in call_subprocess\n    raise InstallationSubprocessError(proc.returncode, command_desc)\npip._internal.exceptions.InstallationSubprocessError: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\nRemoved file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src from build tracker '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'\nRemoved build tracker: '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'\n********************************************************************************************************************************************************************************************************************************************************************************************\nError building a wheel for mpmath-1.2.0\n```\n",
    "created_at": "2021-03-26T10:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448011",
    "user": "@dimpase"
}
```

Matthias, any idea what can cause this? 

With `u/mkoeppe/sagelib__add_setup_cfg__install_requires_` applied, I get a different error

```
Installing mpmath-1.2.0
Traceback (most recent call last):
  File "setup.py", line 6, in <module>
    setuptools.setup(use_scm_version=True)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/__init__.py", line 153, in setup
    return distutils.core.setup(**attrs)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/core.py", line 108, in setup
    _setup_distribution = dist = klass(attrs)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 424, in __init__
    k: v for k, v in attrs.items()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/dist.py", line 293, in __init__
    self.finalize_options()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 695, in finalize_options
    ep(self)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 702, in _finalize_setup_keywords
    ep.load()(self, ep.name, value)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/integration.py", line 26, in version_keyword
    dist.metadata.version = _get_version(config)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py", line 173, in _get_version
    parsed_version = _do_parse(config)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py", line 142, in _do_parse
    "use git+https://github.com/user/proj.git#egg=proj" % config.absolute_root
LookupError: setuptools-scm was unable to detect version for '/home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src'.

Make sure you're either building from a fully intact git repository or PyPI tarballs. Most other sources (such as GitHub's tarballs, a git checkout without the .git folder) don't contain the necessary metadata and will not work.

For example, if you're using pip, instead of https://github.com/user/proj/archive/master.zip use git+https://github.com/user/proj.git#egg=proj
Error: could not determine package name
Warning: Failure trying to uninstall a previous version of mpmath-1.2.0
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /home/scratch2/dimpase/tmp/pip-ephem-wheel-cache-a3rlnu1g
Created temporary directory: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o
Initialized build tracking at /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o
Created build tracker: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o
Entered build tracker: /home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o
Created temporary directory: /home/scratch2/dimpase/tmp/pip-wheel-gt6q_58m
Processing /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src
  Created temporary directory: /home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k
  Added file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src to build tracker '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'
    Running setup.py (path:/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k/setup.py) egg_info for package from file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src
    Created temporary directory: /home/scratch2/dimpase/tmp/pip-pip-egg-info-0589o42m
    Running command python setup.py egg_info
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k/setup.py", line 6, in <module>
        setuptools.setup(use_scm_version=True)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/__init__.py", line 153, in setup
        return distutils.core.setup(**attrs)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/core.py", line 108, in setup
        _setup_distribution = dist = klass(attrs)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 424, in __init__
        k: v for k, v in attrs.items()
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/_distutils/dist.py", line 293, in __init__
        self.finalize_options()
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 695, in finalize_options
        ep(self)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools/dist.py", line 702, in _finalize_setup_keywords
        ep.load()(self, ep.name, value)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/integration.py", line 26, in version_keyword
        dist.metadata.version = _get_version(config)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py", line 173, in _get_version
        parsed_version = _do_parse(config)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/setuptools_scm/__init__.py", line 142, in _do_parse
        "use git+https://github.com/user/proj.git#egg=proj" % config.absolute_root
    LookupError: setuptools-scm was unable to detect version for '/home/scratch2/dimpase/tmp/pip-req-build-m_nefw2k'.

    Make sure you're either building from a fully intact git repository or PyPI tarballs. Most other sources (such as GitHub's tarballs, a git checkout without the .git folder) don't contain the necessary metadata and will not work.

    For example, if you're using pip, instead of https://github.com/user/proj/archive/master.zip use git+https://github.com/user/proj.git#egg=proj
WARNING: Discarding file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src. Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
Exception information:
Traceback (most recent call last):
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/cli/base_command.py", line 189, in _main
    status = self.run(options, args)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/cli/req_command.py", line 178, in wrapper
    return func(self, options, args)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/commands/wheel.py", line 159, in run
    reqs, check_supported_wheels=True
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/resolver.py", line 101, in resolve
    req, requested_extras=(),
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 316, in make_requirement_from_install_req
    raise self._build_failures[ireq.link]
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 169, in _make_candidate_from_link
    name=name, version=version,
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 306, in __init__
    version=version,
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 144, in __init__
    self.dist = self._prepare()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 226, in _prepare
    dist = self._prepare_distribution()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 312, in _prepare_distribution
    self._ireq, parallel_builds=True,
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py", line 457, in prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py", line 501, in _prepare_linked_requirement
    req, self.req_tracker, self.finder, self.build_isolation,
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/prepare.py", line 66, in _get_prepared_distribution
    abstract_dist.prepare_distribution_metadata(finder, build_isolation)
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/distributions/sdist.py", line 41, in prepare_distribution_metadata
    self.req.prepare_metadata()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/req/req_install.py", line 549, in prepare_metadata
    self.metadata_directory = self._generate_metadata()
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/req/req_install.py", line 529, in _generate_metadata
    details=self.name or f"from {self.link}"
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/operations/build/metadata_legacy.py", line 73, in generate_metadata
    command_desc='python setup.py egg_info',
  File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/pip/_internal/utils/subprocess.py", line 258, in call_subprocess
    raise InstallationSubprocessError(proc.returncode, command_desc)
pip._internal.exceptions.InstallationSubprocessError: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
Removed file:///home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/mpmath-1.2.0/src from build tracker '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'
Removed build tracker: '/home/scratch2/dimpase/tmp/pip-req-tracker-1jcod24o'
********************************************************************************************************************************************************************************************************************************************************************************************
Error building a wheel for mpmath-1.2.0
```




---

archive/issue_comments_448012.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-26T11:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448012",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448013.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-26T11:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448013",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_448014.json:
```json
{
    "body": "OK, so this is an upstream bug, fixed by the latest commit.",
    "created_at": "2021-03-26T11:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448014",
    "user": "@dimpase"
}
```

OK, so this is an upstream bug, fixed by the latest commit.



---

archive/issue_comments_448015.json:
```json
{
    "body": "I've opened https://github.com/fredrik-johansson/mpmath/pull/585",
    "created_at": "2021-03-26T12:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448015",
    "user": "@dimpase"
}
```

I've opened https://github.com/fredrik-johansson/mpmath/pull/585



---

archive/issue_comments_448016.json:
```json
{
    "body": "Replying to [comment:3 dimpase]:\n> Replying to [comment:1 gh-rocky]:\n> > mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath\n> \n> mpmath homepage says 1.2.0\n> \n> I've openened https://github.com/fredrik-johansson/mpmath/issues/584\n> to clarify.\n> \n\nGenerally I think the releases on PyPI should be taken as authoritative. After all, they are what Python users get when they use pip.",
    "created_at": "2021-03-26T15:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448016",
    "user": "@mkoeppe"
}
```

Replying to [comment:3 dimpase]:
> Replying to [comment:1 gh-rocky]:
> > mpmath 1.2.1 (not 1.2.0) seems to be the latest mpmath
> 
> mpmath homepage says 1.2.0
> 
> I've openened https://github.com/fredrik-johansson/mpmath/issues/584
> to clarify.
> 

Generally I think the releases on PyPI should be taken as authoritative. After all, they are what Python users get when they use pip.



---

archive/issue_comments_448017.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-03-26T15:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448017",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_448018.json:
```json
{
    "body": "Also please expand the description. What is the purpose of the update? Does it address the issues raised in #25445? Or is it preparation for that?",
    "created_at": "2021-03-26T15:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448018",
    "user": "@mkoeppe"
}
```

Also please expand the description. What is the purpose of the update? Does it address the issues raised in #25445? Or is it preparation for that?



---

archive/issue_comments_448019.json:
```json
{
    "body": "Replying to [comment:14 mkoeppe]:\n> Also please expand the description. What is the purpose of the update? Does it address the issues raised in #25445? Or is it preparation for that?\n\nDon't take this as authoritative, but based on the experience in https://github.com/mathics/Mathics/issues/1169#issuecomment-806532433 mpmath 1.2.x may be necessary. (Or it that seemed to be the case for mpmath on the Fedora distribution.) \n\nBut I also suspect it is not sufficient because mpmath has code, which seems to go back for a long time, that special cases when the \"backend\" is sage.",
    "created_at": "2021-03-26T16:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448019",
    "user": "@rocky"
}
```

Replying to [comment:14 mkoeppe]:
> Also please expand the description. What is the purpose of the update? Does it address the issues raised in #25445? Or is it preparation for that?

Don't take this as authoritative, but based on the experience in https://github.com/mathics/Mathics/issues/1169#issuecomment-806532433 mpmath 1.2.x may be necessary. (Or it that seemed to be the case for mpmath on the Fedora distribution.) 

But I also suspect it is not sufficient because mpmath has code, which seems to go back for a long time, that special cases when the "backend" is sage.



---

archive/issue_comments_448020.json:
```json
{
    "body": "For what it is worth the differences between 1.2.0 and 1.2.1 are administrative and packaging rather than code or functional changes. \n\nSee https://github.com/fredrik-johansson/mpmath/compare/1.2.0...1.2.1 for the changes.",
    "created_at": "2021-03-26T19:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448020",
    "user": "@rocky"
}
```

For what it is worth the differences between 1.2.0 and 1.2.1 are administrative and packaging rather than code or functional changes. 

See https://github.com/fredrik-johansson/mpmath/compare/1.2.0...1.2.1 for the changes.



---

archive/issue_comments_448021.json:
```json
{
    "body": "attention shoud be paid to updating just updated ticket, it can revert edits.",
    "created_at": "2021-03-26T21:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448021",
    "user": "@dimpase"
}
```

attention shoud be paid to updating just updated ticket, it can revert edits.



---

archive/issue_comments_448022.json:
```json
{
    "body": "Replying to [comment:18 gh-rocky]:\n> For what it is worth the differences between 1.2.0 and 1.2.1 are administrative and packaging rather than code or functional changes. \n> \n> See https://github.com/fredrik-johansson/mpmath/compare/1.2.0...1.2.1 for the changes.\n\nperhaps it removed the need for \u200bthe patch in ed52890.",
    "created_at": "2021-03-26T21:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448022",
    "user": "@dimpase"
}
```

Replying to [comment:18 gh-rocky]:
> For what it is worth the differences between 1.2.0 and 1.2.1 are administrative and packaging rather than code or functional changes. 
> 
> See https://github.com/fredrik-johansson/mpmath/compare/1.2.0...1.2.1 for the changes.

perhaps it removed the need for ​the patch in ed52890.



---

archive/issue_comments_448023.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-26T21:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448023",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448024.json:
```json
{
    "body": "OK, 1.2.1 at least fixes the setuptools bug I had to patch for 1.2.0.",
    "created_at": "2021-03-26T21:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448024",
    "user": "@dimpase"
}
```

OK, 1.2.1 at least fixes the setuptools bug I had to patch for 1.2.0.



---

archive/issue_comments_448025.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2021-03-26T22:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448025",
    "user": "@dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_448026.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-08T23:40:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448026",
    "user": "@isuruf"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_448027.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-21T21:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31327#issuecomment-448027",
    "user": "@vbraun"
}
```

Resolution: fixed
