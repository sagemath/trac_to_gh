# Issue 14850: directory for foreign package environment

archive/issues_014850.json:
```json
{
    "body": "CC:  jondo dimpase\n\nSometimes, foreign packages need to manipulate environment. this looks impossible right now.\n\nIt would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15087\n\n",
    "created_at": "2013-08-23T15:26:02Z",
    "labels": [
        "scripts",
        "major",
        "enhancement"
    ],
    "title": "directory for foreign package environment",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14850",
    "user": "felixs"
}
```
CC:  jondo dimpase

Sometimes, foreign packages need to manipulate environment. this looks impossible right now.

It would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.

Issue created by migration from https://trac.sagemath.org/ticket/15087





---

archive/issue_comments_189433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-23T15:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189433",
    "user": "felixs"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189434.json:
```json
{
    "body": "We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...",
    "created_at": "2013-12-05T20:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189434",
    "user": "vbraun"
}
```

We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...



---

archive/issue_comments_189435.json:
```json
{
    "body": "Replying to [comment:3 vbraun]:\n> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...\n\ni agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\nstandalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).\n\ni am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...",
    "created_at": "2013-12-06T13:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189435",
    "user": "felixs"
}
```

Replying to [comment:3 vbraun]:
> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...

i agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

standalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).

i am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...



---

archive/issue_comments_189436.json:
```json
{
    "body": "Replying to [comment:4 felixs]:\n> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).\n\nWell `/usr/local/etc/env.d` doesn't sound like a particularly good place either...",
    "created_at": "2013-12-06T20:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189436",
    "user": "vbraun"
}
```

Replying to [comment:4 felixs]:
> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either...



---

archive/issue_comments_189437.json:
```json
{
    "body": "Replying to [comment:5 vbraun]:\n> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... \n\nindeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.\n\nfinally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...",
    "created_at": "2013-12-06T21:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189437",
    "user": "felixs"
}
```

Replying to [comment:5 vbraun]:
> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... 

indeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.

finally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...



---

archive/issue_comments_189438.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-12-29T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189438",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_189439.json:
```json
{
    "body": "Needs to be rebased.",
    "created_at": "2013-12-29T18:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189439",
    "user": "jdemeyer"
}
```

Needs to be rebased.



---

archive/issue_comments_189440.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-01-15T23:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189440",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_189441.json:
```json
{
    "body": "Packages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.",
    "created_at": "2020-01-15T23:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189441",
    "user": "mkoeppe"
}
```

Packages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.



---

archive/issue_comments_189442.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-16T11:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189442",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189443.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-01-16T14:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14850#issuecomment-189443",
    "user": "chapoton"
}
```

Resolution: invalid
