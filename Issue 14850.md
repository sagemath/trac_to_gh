# Issue 14850: directory for foreign package environment

Issue created by migration from https://trac.sagemath.org/ticket/15087

Original creator: felixs

Original creation time: 2013-08-23 15:26:02

CC:  jondo dimpase

Sometimes, foreign packages need to manipulate environment. this looks impossible right now.

It would be much better to have a directory, where packages may put environment snippets. On sage (the distribution) it makes sense to use `$SAGE_ETC/env.d` and set `SAGE_ETC` to `$SAGE_LOCAL/etc`.


---

Comment by felixs created at 2013-08-23 15:28:19

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-12-05 20:55:27

We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...


---

Comment by felixs created at 2013-12-06 13:49:07

Replying to [comment:3 vbraun]:
> We probably want a `/etc/sage/env.d` directory instead of `/etc/env.d` if this would be installed to the fs root...

i agree that `/etc/env.d` does not look very useful. but first of all, packages (spkgs) are (supposedly) not required for system installation involving `/etc`. secondly `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

standalone sagelib-into-system installations (e.g. prefix=/usr) are meant to be configured explicitly using --with-sysconfdir=/etc/sage (common practice).

i am aware that sage does not define a prefix, which makes me assume that installation is not implemented in a useful way (yet?) -- YMMV. more workarounds may be required...


---

Comment by vbraun created at 2013-12-06 20:21:43

Replying to [comment:4 felixs]:
> `sysconfdir` (=`$SAGE_ETC`) should default to `$prefix/etc`, where `$prefix` should be something like `/usr/local` or `/opt/sage` (clearly not `/`).

Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either...


---

Comment by felixs created at 2013-12-06 21:18:47

Replying to [comment:5 vbraun]:
> Well `/usr/local/etc/env.d` doesn't sound like a particularly good place either... 

indeed, maybe it's not a good idea to choose /usr/local as the prefix (i.e. for sage the distibution). but it's consistent.

finally it's the question how much you dislike redundant paths like `$HOME/sage-xyz/etc/sage` `/opt/sage/etc/sage` or `/tmp/sage/etc/sage`. i expect that `/opt/sage` will be the most common case for a prefix eventually, the situation looks very close to http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/opt.html...


---

Comment by jdemeyer created at 2013-12-29 18:16:12

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2013-12-29 18:16:12

Needs to be rebased.


---

Comment by mkoeppe created at 2020-01-15 23:52:42

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-01-15 23:52:42

Packages can now set environment variables by means of the `spkg-configure.m4` mechanism, and old-style (out-of-tree) packages have been eliminated. So this ticket can be closed as outdated.


---

Comment by dimpase created at 2020-01-16 11:25:14

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-01-16 14:24:28

Resolution: invalid
