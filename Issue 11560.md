# Issue 11560: faster import of sage.interacts.all

Issue created by migration from https://trac.sagemath.org/ticket/11732

Original creator: saraedum

Original creation time: 2011-08-24 06:01:24

Assignee: itolkov, jason

_sage.interact.all_ imports functions which have controls from _sagenb.notebook.interact_ as default parameters. These take some time to initialize. The attached patch improves this situation:


```
$ dumbbench -- ./sage --startuptime
Ran 23 iterations (3 outliers).
Rounded run time per iteration: 1.001e+00 +/- 2.2e-02 (2.2%)
```


vs.


```
$ dumbbench -- ./sage --startuptime
Ran 24 iterations (4 outliers).
Rounded run time per iteration: 9.56e-01 +/- 1.7e-02 (1.8%)
```



---

Attachment


---

Comment by saraedum created at 2011-08-24 06:03:53

Changing status from new to needs_review.


---

Comment by was created at 2011-08-24 23:29:26

Changing status from needs_review to positive_review.


---

Comment by was created at 2011-08-24 23:29:26

I'm not sure this matters much for startuptime (it's hard to tell).  But the code itself seems good and clean, and works.  So positive review.


---

Comment by was created at 2011-08-24 23:30:48

Changing keywords from "" to "sd32".


---

Comment by leif created at 2011-09-08 11:14:13

Again, attachment comments make life easier, and putting the patches to apply into the description simplifies things.


---

Comment by leif created at 2011-09-12 19:30:36

Resolution: fixed


---

Comment by leif created at 2011-09-28 16:57:44

"Proper" Mercurial changeset replacement patch.


---

Attachment

I've attached a `*.proper.patch`, which is identical except that I removed the "garbage" before "`# HG changeset patch`", i.e., I deleted the first line "`exporting patch:`", since Jeroen's current merger rejects such patches.

For now, please make sure all your patches start with "`# HG changeset patch`", i.e., have it on the first line without any preceding messages or whatever.

I've relaxed that in _my version_ of the merger, but Jeroen and maybe others are likely to use his more restrictive one.


---

Comment by kini created at 2011-12-25 23:43:16

This patch does not apply to the flask notebook trivially, and I'm probably not very qualified to do a rebasing myself. Anyone feel like looking into it? Latest version is at [https://github.com/sagemath/sagenb/](https://github.com/sagemath/sagenb/), a version a few days old is at [http://code.google.com/r/jasongrout-flask-sagenb/](http://code.google.com/r/jasongrout-flask-sagenb/).


---

Comment by jason created at 2012-01-16 20:46:28

This was merged in the flask notebook at https://github.com/sagemath/sagenb/commit/235358d5a643948525ce80e1f0fd8406e31ced72
