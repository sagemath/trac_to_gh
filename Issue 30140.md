# Issue 30140: improve doctests coverage in graphs

archive/issues_030140.json:
```json
{
    "body": "CC:  chapoton\n\n- `generic_graph.py`: from 99.1% (227 of 229) to 100%\n\nIssue created by migration from https://trac.sagemath.org/ticket/30377\n\n",
    "created_at": "2020-08-16T14:35:21Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "title": "improve doctests coverage in graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30140",
    "user": "dcoudert"
}
```
CC:  chapoton

- `generic_graph.py`: from 99.1% (227 of 229) to 100%

Issue created by migration from https://trac.sagemath.org/ticket/30377





---

archive/issue_comments_429417.json:
```json
{
    "body": "The added doctests allow to reach 100% coverage, but are not very useful by themself.\n----\nNew commits:",
    "created_at": "2020-08-16T17:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429417",
    "user": "dcoudert"
}
```

The added doctests allow to reach 100% coverage, but are not very useful by themself.
----
New commits:



---

archive/issue_comments_429418.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-16T17:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429418",
    "user": "dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_429419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-17T09:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429419",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429420.json:
```json
{
    "body": "ok, feu vert",
    "created_at": "2020-08-17T14:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429420",
    "user": "chapoton"
}
```

ok, feu vert



---

archive/issue_comments_429421.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-17T14:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429421",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_429422.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-08-17T14:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429422",
    "user": "dcoudert"
}
```

Thanks!



---

archive/issue_comments_429423.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-21T08:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429423",
    "user": "fbissey"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_429424.json:
```json
{
    "body": "Sorry, I am a bit annoyed already today.\n\nWhose great idea was is to introduce new calls to `installed_packages` or any other of those functions in `sage/misc/packages.py` that we are desperately trying to purge to make sage more packageable? \n\nIt may be a lesser offence in a doctest than at runtime but it is still objectionable. If Volker keeps this ticket merged in the current state, be assured there will be a follow up ticket to remove those bits.",
    "created_at": "2020-08-21T08:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429424",
    "user": "fbissey"
}
```

Sorry, I am a bit annoyed already today.

Whose great idea was is to introduce new calls to `installed_packages` or any other of those functions in `sage/misc/packages.py` that we are desperately trying to purge to make sage more packageable? 

It may be a lesser offence in a doctest than at runtime but it is still objectionable. If Volker keeps this ticket merged in the current state, be assured there will be a follow up ticket to remove those bits.



---

archive/issue_comments_429425.json:
```json
{
    "body": "Sorry for that.\n\nShould I change the doctest to something like that ?\n\n```\nsage: igraph_feature().is_present()  # optional - python_igraph \nTrue\n```\n\nor do you have a better suggestion ?",
    "created_at": "2020-08-21T08:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429425",
    "user": "dcoudert"
}
```

Sorry for that.

Should I change the doctest to something like that ?

```
sage: igraph_feature().is_present()  # optional - python_igraph 
True
```

or do you have a better suggestion ?



---

archive/issue_comments_429426.json:
```json
{
    "body": "I sincerely have no better suggestion. Playing with automagically discoverable dependency at runtime is always a bit fun. I notice some other python packages usually do a runtime detection at the beginning of the test run and then skip what is not available. sage is taking a very different approach.\n\nAnd testing the runtime tester is always going to leave you in a funny position.",
    "created_at": "2020-08-21T09:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429426",
    "user": "fbissey"
}
```

I sincerely have no better suggestion. Playing with automagically discoverable dependency at runtime is always a bit fun. I notice some other python packages usually do a runtime detection at the beginning of the test run and then skip what is not available. sage is taking a very different approach.

And testing the runtime tester is always going to leave you in a funny position.



---

archive/issue_comments_429427.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-21T11:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429427",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429428.json:
```json
{
    "body": "Should be better this way. The alternative is to simply remove the test.",
    "created_at": "2020-08-21T11:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429428",
    "user": "dcoudert"
}
```

Should be better this way. The alternative is to simply remove the test.



---

archive/issue_comments_429429.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-21T14:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429429",
    "user": "dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_429430.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-23T21:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429430",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_429431.json:
```json
{
    "body": "OK, Volker finally did not include the old version of the ticket in 9.2.beta10. Thanks for the correction.",
    "created_at": "2020-08-23T21:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429431",
    "user": "fbissey"
}
```

OK, Volker finally did not include the old version of the ticket in 9.2.beta10. Thanks for the correction.



---

archive/issue_comments_429432.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-26T21:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30140#issuecomment-429432",
    "user": "vbraun"
}
```

Resolution: fixed
