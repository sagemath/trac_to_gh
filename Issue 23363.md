# Issue 23363: Fix the remaining cpdef declaration issues

Issue created by migration from https://trac.sagemath.org/ticket/23600

Original creator: roed

Original creation time: 2017-08-08 20:37:51

CC:  jdemeyer

In #23227 we added `cpdef` declarations to address https://github.com/cython/cython/issues/1732.  A few were not completely straightforward and left for a followup ticket.


---

Comment by roed created at 2017-08-08 20:49:16

Jeroen, can you add the code here that you removed from the other branch?


---

Comment by jdemeyer created at 2017-08-09 08:34:26

I would rather prefer to fix this on a case-by-case basis (for example, one ticket for p-adics, one ticket for quaternion algebras, ...)


---

Comment by jdemeyer created at 2017-08-09 09:06:29

New commits:


---

Comment by jdemeyer created at 2017-08-09 09:25:05

To be clear: I am not saying that I'm against all the changes in this remaining branch, only that it's not immediately clear that it's the right thing to do.


---

Comment by jdemeyer created at 2017-08-09 09:34:30

Comments in more detail:

1. `sage/algebras/quatalg`: instead, add abstract methods `_add_` and `_mul_` to the base class.

2. `sage/modular/pollack_stevens`: unrelated change to `cpdef normalize`

3. `src/sage/modules`: instead, add abstract methods `_add_` and `_mul_` to the base class.

4. `sage/numerical/backends`: `add_variable` is already declared in the base class `GenericBackend`

5. `sage/rings/finite_rings`: instead, add abstract methods `_add_` and `_mul_` to the base class.

6. `src/sage/rings/number_field`: already in the base class `NumberFieldElement` (but not declared there)

7. `sage/rings/padics`: lots of changes, not looked in detail yet.

8. `src/sage/rings/polynomial` and power series: instead, add abstract methods to the base class.


---

Comment by jdemeyer created at 2017-08-09 09:35:50

I can try to fix some of these, but we should coordinate to avoid double work. Items 2, 4 and 6 on the list above seem easiest, so I will have a quick look now.

EDIT: 2 and 4 are different `cpdef` declarations issues, they are because of a changed signature. I sent an e-mail to cython-users asking whether the warning is still correct in this case.


---

Comment by roed created at 2017-08-09 10:08:01

Okay. I'm traveling at the moment, so I'm not going to work on this immediately. I'll make a comment here before doing anything.


---

Comment by jdemeyer created at 2018-01-29 16:02:58

Every issue has a ticket now, so let's close this.


---

Comment by jdemeyer created at 2018-01-29 16:02:58

Resolution: duplicate
