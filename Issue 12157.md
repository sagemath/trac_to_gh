# Issue 12157: Removed unneeded dependencies of the Sage library

archive/issues_012157.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nAccording to `spkg/standard/deps`, the sage library depends on:\n\n```\n$(INST)/$(SAGE): $(BASE) \\\n         $(INST)/$(SAGE_SCRIPTS) \\\n         $(INST)/$(ATLAS) \\\n         $(INST)/$(CEPHES) \\\n         $(INST)/$(CLIQUER) \\\n         $(INST)/$(CONWAY) \\\n         $(INST)/$(CYTHON) \\\n         $(INST)/$(DOCUTILS) \\\n         $(INST)/$(ECL) \\\n         $(INST)/$(ECLIB) \\\n         $(INST)/$(ECM) \\\n         $(INST)/$(ELLIPTIC_CURVES) \\\n         $(INST)/$(EXTCODE) \\\n         $(INST)/$(FLINT) \\\n         $(INST)/$(FPLLL) \\\n         $(INST)/$(GDMODULE) \\\n         $(INST)/$(GRAPHS) \\\n         $(INST)/$(GIVARO) \\\n         $(INST)/$(GLPK) \\\n         $(INST)/$(GSL) \\\n         $(INST)/$(IML) \\\n         $(INST)/$(IPYTHON) \\\n         $(INST)/$(LCALC) \\\n         $(INST)/$(LIBM4RI) \\\n         $(INST)/$(LIBM4RIE) \\\n         $(INST)/$(LINBOX) \\\n         $(INST)/$(MATPLOTLIB) \\\n         $(INST)/$(MERCURIAL) \\\n         $(INST)/$(MPFI) \\\n         $(INST)/$(MPFR) \\\n         $(INST)/$(MPIR) \\\n         $(INST)/$(MPMATH) \\\n         $(INST)/$(NETWORKX) \\\n         $(INST)/$(NTL) \\\n         $(INST)/$(NUMPY) \\\n         $(INST)/$(PARI) \\\n         $(INST)/$(PEXPECT) \\\n         $(INST)/$(POLYBORI) \\\n         $(INST)/$(PPL) \\\n         $(INST)/$(PYCRYPTO) \\\n         $(INST)/$(PYNAC) \\\n         $(INST)/$(PYTHON) \\\n         $(INST)/$(R) \\\n         $(INST)/$(RATPOINTS) \\\n         $(INST)/$(RUBIKS) \\\n         $(INST)/$(SAGENB) \\\n         $(INST)/$(SCONS) \\\n         $(INST)/$(SETUPTOOLS) \\\n         $(INST)/$(SINGULAR) \\\n         $(INST)/$(SYMMETRICA) \\\n         $(INST)/$(SYMPY) \\\n         $(INST)/$(ZNPOLY)\n```\n\nHowever, only components which are needed at build-time should be listed here.  I think for example R can be removed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12329\n\n",
    "created_at": "2012-01-20T09:42:28Z",
    "labels": [
        "build",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Removed unneeded dependencies of the Sage library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12157",
    "user": "@jdemeyer"
}
```
Assignee: GeorgSWeber

According to `spkg/standard/deps`, the sage library depends on:

```
$(INST)/$(SAGE): $(BASE) \
         $(INST)/$(SAGE_SCRIPTS) \
         $(INST)/$(ATLAS) \
         $(INST)/$(CEPHES) \
         $(INST)/$(CLIQUER) \
         $(INST)/$(CONWAY) \
         $(INST)/$(CYTHON) \
         $(INST)/$(DOCUTILS) \
         $(INST)/$(ECL) \
         $(INST)/$(ECLIB) \
         $(INST)/$(ECM) \
         $(INST)/$(ELLIPTIC_CURVES) \
         $(INST)/$(EXTCODE) \
         $(INST)/$(FLINT) \
         $(INST)/$(FPLLL) \
         $(INST)/$(GDMODULE) \
         $(INST)/$(GRAPHS) \
         $(INST)/$(GIVARO) \
         $(INST)/$(GLPK) \
         $(INST)/$(GSL) \
         $(INST)/$(IML) \
         $(INST)/$(IPYTHON) \
         $(INST)/$(LCALC) \
         $(INST)/$(LIBM4RI) \
         $(INST)/$(LIBM4RIE) \
         $(INST)/$(LINBOX) \
         $(INST)/$(MATPLOTLIB) \
         $(INST)/$(MERCURIAL) \
         $(INST)/$(MPFI) \
         $(INST)/$(MPFR) \
         $(INST)/$(MPIR) \
         $(INST)/$(MPMATH) \
         $(INST)/$(NETWORKX) \
         $(INST)/$(NTL) \
         $(INST)/$(NUMPY) \
         $(INST)/$(PARI) \
         $(INST)/$(PEXPECT) \
         $(INST)/$(POLYBORI) \
         $(INST)/$(PPL) \
         $(INST)/$(PYCRYPTO) \
         $(INST)/$(PYNAC) \
         $(INST)/$(PYTHON) \
         $(INST)/$(R) \
         $(INST)/$(RATPOINTS) \
         $(INST)/$(RUBIKS) \
         $(INST)/$(SAGENB) \
         $(INST)/$(SCONS) \
         $(INST)/$(SETUPTOOLS) \
         $(INST)/$(SINGULAR) \
         $(INST)/$(SYMMETRICA) \
         $(INST)/$(SYMPY) \
         $(INST)/$(ZNPOLY)
```

However, only components which are needed at build-time should be listed here.  I think for example R can be removed.

Issue created by migration from https://trac.sagemath.org/ticket/12329





---

archive/issue_comments_141492.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-20T12:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141492",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141493.json:
```json
{
    "body": "I'm fairly certain the sage library does not need $(INST)/$(ELLIPTIC_CURVES) either (all that package does is install a couple of databases to SAGE_DATA).",
    "created_at": "2012-01-27T09:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141493",
    "user": "@ohanar"
}
```

I'm fairly certain the sage library does not need $(INST)/$(ELLIPTIC_CURVES) either (all that package does is install a couple of databases to SAGE_DATA).



---

archive/issue_comments_141494.json:
```json
{
    "body": "You are right, I confused with `ECLIB` (which certainly is needed).  New patch, needs review.",
    "created_at": "2012-01-27T10:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141494",
    "user": "@jdemeyer"
}
```

You are right, I confused with `ECLIB` (which certainly is needed).  New patch, needs review.



---

archive/issue_comments_141495.json:
```json
{
    "body": "Coming from sage-on-gentoo, I am not sure at all that GRAPHS needs to be there. We very much build sage without needing mercurial but we do things a bit differently so that one needs caution. I don't think mpmath is needed to build either if it is we have a bug in sage-on-gentoo.",
    "created_at": "2012-01-27T18:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141495",
    "user": "@kiwifb"
}
```

Coming from sage-on-gentoo, I am not sure at all that GRAPHS needs to be there. We very much build sage without needing mercurial but we do things a bit differently so that one needs caution. I don't think mpmath is needed to build either if it is we have a bug in sage-on-gentoo.



---

archive/issue_comments_141496.json:
```json
{
    "body": "While gdmodule is not needed gd actually is and so is png.\n\n```\n    Extension('sage.matrix.matrix_mod2_dense',\n              sources = ['sage/matrix/matrix_mod2_dense.pyx'],\n              libraries = ['gmp','m4ri', 'gd', 'png12', 'z'],\n              depends = [SAGE_ROOT + \"/local/include/png.h\", SAGE_ROOT + \"/local/include/m4ri/m4ri.h\"]),\n```\n\nfor example from module_list.py. Of course these two are needed for polybori so you are probably covered. readline is also there but other dependencies may include it. I cannot check right now.",
    "created_at": "2012-01-27T20:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141496",
    "user": "@kiwifb"
}
```

While gdmodule is not needed gd actually is and so is png.

```
    Extension('sage.matrix.matrix_mod2_dense',
              sources = ['sage/matrix/matrix_mod2_dense.pyx'],
              libraries = ['gmp','m4ri', 'gd', 'png12', 'z'],
              depends = [SAGE_ROOT + "/local/include/png.h", SAGE_ROOT + "/local/include/m4ri/m4ri.h"]),
```

for example from module_list.py. Of course these two are needed for polybori so you are probably covered. readline is also there but other dependencies may include it. I cannot check right now.



---

archive/issue_comments_141497.json:
```json
{
    "body": "Okay, added `GD`, `LIBPNG`, `READLINE`.  Removed `GRAPHS`, `MPMATH`.  Testing now.",
    "created_at": "2012-01-29T11:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141497",
    "user": "@jdemeyer"
}
```

Okay, added `GD`, `LIBPNG`, `READLINE`.  Removed `GRAPHS`, `MPMATH`.  Testing now.



---

archive/issue_comments_141498.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-29T11:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141498",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141499.json:
```json
{
    "body": "Mercurial is needed in the `spkg-install` (at least for upgrades), so we cannot remove that.",
    "created_at": "2012-01-29T11:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141499",
    "user": "@jdemeyer"
}
```

Mercurial is needed in the `spkg-install` (at least for upgrades), so we cannot remove that.



---

archive/issue_comments_141500.json:
```json
{
    "body": "The new patch works!  Needs review.",
    "created_at": "2012-01-29T11:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141500",
    "user": "@jdemeyer"
}
```

The new patch works!  Needs review.



---

archive/issue_comments_141501.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-29T11:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141501",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141502.json:
```json
{
    "body": "Looks good to me, I fully agree with that list and cannot see it failing.",
    "created_at": "2012-01-30T00:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141502",
    "user": "@kiwifb"
}
```

Looks good to me, I fully agree with that list and cannot see it failing.



---

archive/issue_comments_141503.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-30T00:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141503",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_141504.json:
```json
{
    "body": "Attachment [12329_prune_deps.patch](tarball://root/attachments/some-uuid/ticket12329/12329_prune_deps.patch) by @jdemeyer created at 2012-01-31 09:46:34\n\nI replaced the \"sageruntime\" target by a \"$(SAGERUNTIME)\" variable, similar to the \"$(BASE)\" variable.",
    "created_at": "2012-01-31T09:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141504",
    "user": "@jdemeyer"
}
```

Attachment [12329_prune_deps.patch](tarball://root/attachments/some-uuid/ticket12329/12329_prune_deps.patch) by @jdemeyer created at 2012-01-31 09:46:34

I replaced the "sageruntime" target by a "$(SAGERUNTIME)" variable, similar to the "$(BASE)" variable.



---

archive/issue_comments_141505.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-02T12:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12157#issuecomment-141505",
    "user": "@jdemeyer"
}
```

Resolution: fixed
