# Issue 10771: Matrix and vector norms, condition number, over RDF/CDF

archive/issues_010771.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  mhampton @vbraun @haraldschilly @haikona mraum\n\nThree new methods for matrices and vectors over RDF/CDF, directly wrapping functions from `NumPy/SciPy`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10837\n\n",
    "created_at": "2011-02-24T00:38:15Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Matrix and vector norms, condition number, over RDF/CDF",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10771",
    "user": "https://github.com/rbeezer"
}
```
Assignee: jason, was

CC:  mhampton @vbraun @haraldschilly @haikona mraum

Three new methods for matrices and vectors over RDF/CDF, directly wrapping functions from `NumPy/SciPy`.

Issue created by migration from https://trac.sagemath.org/ticket/10837





---

archive/issue_comments_113788.json:
```json
{
    "body": "Attachment [trac_10837-norms-condition-CDF.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF.patch) by @rbeezer created at 2011-02-24 01:36:26\n\nWith a more specific norm now defined for vectors and matrices over CDF/RDF, the computation might conceivably differ from the more generic implementation provided in `matrix2.pyx`.  Just one test failure though, and I'm not sure how to fix it up.\n\nVolker,  Marshall?  Any ideas?\n\n```\n**********************************************************************\nFile \"/sage/dev/devel/sage-main/sage/geometry/polyhedra.py\", line 4948:\n    sage: ppoints[0]\nExpected:\n    (0.0, 0.0)\nGot:\n    (1.28197512426e-15, 1.28197512426e-15)\n**********************************************************************\n```",
    "created_at": "2011-02-24T01:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113788",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-norms-condition-CDF.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF.patch) by @rbeezer created at 2011-02-24 01:36:26

With a more specific norm now defined for vectors and matrices over CDF/RDF, the computation might conceivably differ from the more generic implementation provided in `matrix2.pyx`.  Just one test failure though, and I'm not sure how to fix it up.

Volker,  Marshall?  Any ideas?

```
**********************************************************************
File "/sage/dev/devel/sage-main/sage/geometry/polyhedra.py", line 4948:
    sage: ppoints[0]
Expected:
    (0.0, 0.0)
Got:
    (1.28197512426e-15, 1.28197512426e-15)
**********************************************************************
```



---

archive/issue_comments_113789.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-02-24T01:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113789",
    "user": "https://github.com/rbeezer"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_113790.json:
```json
{
    "body": "Minor nitpick (really minor): \"if not p in [-2,-1,1,2]:\" reads better as \"if p not in [-2,-1,1,2]:\", I think.\n\nIn the doctests for norm, shouldn't \"Return values are in `RDF`. \" be followed by a double-colon?\n\nIn the OUTPUT docs for the vector norm: \"Returned values is a double precision\" --> values should be the singular \"value\".  Also, \"(or an integer when ``p=0``.\" is missing a closing parenthesis.\n\nI've read through the patch and am testing the patch now, so if you attach corrections, please submit them as a separate patch.",
    "created_at": "2011-02-24T04:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113790",
    "user": "https://github.com/jasongrout"
}
```

Minor nitpick (really minor): "if not p in [-2,-1,1,2]:" reads better as "if p not in [-2,-1,1,2]:", I think.

In the doctests for norm, shouldn't "Return values are in `RDF`. " be followed by a double-colon?

In the OUTPUT docs for the vector norm: "Returned values is a double precision" --> values should be the singular "value".  Also, "(or an integer when ``p=0``." is missing a closing parenthesis.

I've read through the patch and am testing the patch now, so if you attach corrections, please submit them as a separate patch.



---

archive/issue_comments_113791.json:
```json
{
    "body": "I had some interesting failures on 4.6.1:\n\n```\n% sage -t matrix2.pyx \nDetected SAGE64 flag\nBuilding Sage on OS X in 64-bit mode\nsage -t  \"trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\"\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\", line 6726:\n    sage: A = matrix(RR, 2, 3, [3*I,4,1-I,1,2,0])\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_96[11]>\", line 1, in <module>\n        A = matrix(RR, Integer(2), Integer(3), [Integer(3)*I,Integer(4),Integer(1)-I,Integer(1),Integer(2),Integer(0)])###line 6726:\n    sage: A = matrix(RR, 2, 3, [3*I,4,1-I,1,2,0])\n      File \"/Users/grout/sage/local/lib/python/site-packages/sage/matrix/constructor.py\", line 666, in matrix\n        return matrix_space.MatrixSpace(ring, nrows, ncols, sparse=sparse)(entries)\n      File \"/Users/grout/sage/local/lib/python/site-packages/sage/matrix/matrix_space.py\", line 405, in __call__\n        return self.matrix(entries, copy=copy, coerce=coerce, rows=rows)\n      File \"/Users/grout/sage/local/lib/python/site-packages/sage/matrix/matrix_space.py\", line 1136, in matrix\n        return self.__matrix_class(self, entries=x, copy=copy, coerce=coerce)\n      File \"matrix_generic_dense.pyx\", line 109, in sage.matrix.matrix_generic_dense.Matrix_generic_dense.__init__ (sage/matrix/matrix_generic_dense.c:2349)\n        self._entries[i] = R(entries[i])\n      File \"parent.pyx\", line 882, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6462)\n      File \"coerce_maps.pyx\", line 156, in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4044)\n      File \"expression.pyx\", line 836, in sage.symbolic.expression.Expression._mpfr_ (sage/symbolic/expression.cpp:4944)\n      File \"expression.pyx\", line 766, in sage.symbolic.expression.Expression._eval_self (sage/symbolic/expression.cpp:4712)\n      File \"pynac.pyx\", line 1010, in sage.symbolic.pynac.py_float (sage/symbolic/pynac.cpp:8911)\n      File \"parent.pyx\", line 882, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6462)\n      File \"coerce_maps.pyx\", line 156, in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4044)\n      File \"number_field_element.pyx\", line 959, in sage.rings.number_field.number_field_element.NumberFieldElement._mpfr_ (sage/rings/number_field/number_field_element.cpp:8538)\n    TypeError: cannot convert 3*I to real number\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\", line 6727:\n    sage: A.norm('frob')\nExpected:\n    5.65685424949\nGot:\n    15.8113883008\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\", line 6729:\n    sage: A.norm(2)\nExpected:\n    5.47068444321\nGot:\n    15.0\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\", line 6731:\n    sage: A.norm(1)\nExpected:\n    6.0\nGot:\n    17.0\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\", line 6733:\n    sage: A.norm(Infinity)\nExpected:\n    8.41421356237\nGot:\n    17.0\n**********************************************************************\n1 items had failures:\n   5 of  19 in __main__.example_96\n***Test Failed*** 5 failures.\nFor whitespace errors, see the file /Users/grout/.sage//tmp/.doctest_matrix2.py\n\t [30.5 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx\"\n```\n\n\nIt seems like there was a patch recently that addressed the next error (maybe merged after 4.6.1?)\n\n```\n filename, compileflags)\n      File \"/Users/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_17[29]>\", line 1, in <module>\n        A.is_singular()###line 667:\n    sage: A.is_singular()\n      File \"element.pyx\", line 306, in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2666)\n      File \"parent.pyx\", line 272, in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:2840)\n      File \"parent.pyx\", line 170, in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2611)\n    AttributeError: 'sage.matrix.matrix_rational_dense.Matrix_rational_dense' object has no attribute 'is_singular'\n**********************************************************************\n1 items had failures:\n   1 of  35 in __main__.example_17\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /Users/grout/.sage//tmp/.doctest_matrix_double_dense.py\n\t [2.7 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix_double_dense.pyx\"\n```",
    "created_at": "2011-02-24T04:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113791",
    "user": "https://github.com/jasongrout"
}
```

I had some interesting failures on 4.6.1:

```
% sage -t matrix2.pyx 
Detected SAGE64 flag
Building Sage on OS X in 64-bit mode
sage -t  "trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx"
**********************************************************************
File "/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx", line 6726:
    sage: A = matrix(RR, 2, 3, [3*I,4,1-I,1,2,0])
Exception raised:
    Traceback (most recent call last):
      File "/Users/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_96[11]>", line 1, in <module>
        A = matrix(RR, Integer(2), Integer(3), [Integer(3)*I,Integer(4),Integer(1)-I,Integer(1),Integer(2),Integer(0)])###line 6726:
    sage: A = matrix(RR, 2, 3, [3*I,4,1-I,1,2,0])
      File "/Users/grout/sage/local/lib/python/site-packages/sage/matrix/constructor.py", line 666, in matrix
        return matrix_space.MatrixSpace(ring, nrows, ncols, sparse=sparse)(entries)
      File "/Users/grout/sage/local/lib/python/site-packages/sage/matrix/matrix_space.py", line 405, in __call__
        return self.matrix(entries, copy=copy, coerce=coerce, rows=rows)
      File "/Users/grout/sage/local/lib/python/site-packages/sage/matrix/matrix_space.py", line 1136, in matrix
        return self.__matrix_class(self, entries=x, copy=copy, coerce=coerce)
      File "matrix_generic_dense.pyx", line 109, in sage.matrix.matrix_generic_dense.Matrix_generic_dense.__init__ (sage/matrix/matrix_generic_dense.c:2349)
        self._entries[i] = R(entries[i])
      File "parent.pyx", line 882, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6462)
      File "coerce_maps.pyx", line 156, in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4044)
      File "expression.pyx", line 836, in sage.symbolic.expression.Expression._mpfr_ (sage/symbolic/expression.cpp:4944)
      File "expression.pyx", line 766, in sage.symbolic.expression.Expression._eval_self (sage/symbolic/expression.cpp:4712)
      File "pynac.pyx", line 1010, in sage.symbolic.pynac.py_float (sage/symbolic/pynac.cpp:8911)
      File "parent.pyx", line 882, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:6462)
      File "coerce_maps.pyx", line 156, in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4044)
      File "number_field_element.pyx", line 959, in sage.rings.number_field.number_field_element.NumberFieldElement._mpfr_ (sage/rings/number_field/number_field_element.cpp:8538)
    TypeError: cannot convert 3*I to real number
**********************************************************************
File "/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx", line 6727:
    sage: A.norm('frob')
Expected:
    5.65685424949
Got:
    15.8113883008
**********************************************************************
File "/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx", line 6729:
    sage: A.norm(2)
Expected:
    5.47068444321
Got:
    15.0
**********************************************************************
File "/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx", line 6731:
    sage: A.norm(1)
Expected:
    6.0
Got:
    17.0
**********************************************************************
File "/Users/grout/sage-trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx", line 6733:
    sage: A.norm(Infinity)
Expected:
    8.41421356237
Got:
    17.0
**********************************************************************
1 items had failures:
   5 of  19 in __main__.example_96
***Test Failed*** 5 failures.
For whitespace errors, see the file /Users/grout/.sage//tmp/.doctest_matrix2.py
	 [30.5 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix2.pyx"
```


It seems like there was a patch recently that addressed the next error (maybe merged after 4.6.1?)

```
 filename, compileflags)
      File "/Users/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_17[29]>", line 1, in <module>
        A.is_singular()###line 667:
    sage: A.is_singular()
      File "element.pyx", line 306, in sage.structure.element.Element.__getattr__ (sage/structure/element.c:2666)
      File "parent.pyx", line 272, in sage.structure.parent.getattr_from_other_class (sage/structure/parent.c:2840)
      File "parent.pyx", line 170, in sage.structure.parent.raise_attribute_error (sage/structure/parent.c:2611)
    AttributeError: 'sage.matrix.matrix_rational_dense.Matrix_rational_dense' object has no attribute 'is_singular'
**********************************************************************
1 items had failures:
   1 of  35 in __main__.example_17
***Test Failed*** 1 failures.
For whitespace errors, see the file /Users/grout/.sage//tmp/.doctest_matrix_double_dense.py
	 [2.7 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "trees/sage-4.6.1/devel/sage-main/sage/matrix/matrix_double_dense.pyx"
```



---

archive/issue_comments_113792.json:
```json
{
    "body": "Hi Jason,\n\nThanks for the look and the nits.  I'll tidy up in the morning, I'm about to call it a day.\n\nThe `matrix2.pyx` failures are from replacing `CDF` by `RR`, not `CC`.  I'd swear those had been tested.\n\nYes, lots of new stuff in 4.6.2.rc0, including `is_singular()`.  See the table at http://wiki.sagemath.org/devel/LatexToWorksheet\n\nRob",
    "created_at": "2011-02-24T05:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113792",
    "user": "https://github.com/rbeezer"
}
```

Hi Jason,

Thanks for the look and the nits.  I'll tidy up in the morning, I'm about to call it a day.

The `matrix2.pyx` failures are from replacing `CDF` by `RR`, not `CC`.  I'd swear those had been tested.

Yes, lots of new stuff in 4.6.2.rc0, including `is_singular()`.  See the table at http://wiki.sagemath.org/devel/LatexToWorksheet

Rob



---

archive/issue_comments_113793.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2011-02-24T05:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113793",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_113794.json:
```json
{
    "body": "Great.  I'm downloading 4.6.2.rc0 now and will compile it overnight.",
    "created_at": "2011-02-24T05:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113794",
    "user": "https://github.com/jasongrout"
}
```

Great.  I'm downloading 4.6.2.rc0 now and will compile it overnight.



---

archive/issue_comments_113795.json:
```json
{
    "body": "Attachment [trac_10837-norms-condition-CDF-edits.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits.patch) by @rbeezer created at 2011-02-24 17:38:23",
    "created_at": "2011-02-24T17:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113795",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-norms-condition-CDF-edits.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits.patch) by @rbeezer created at 2011-02-24 17:38:23



---

archive/issue_comments_113796.json:
```json
{
    "body": "Jason,\n\nThanks for the edits - they are all on the second patch.  With this all tests pass in sage/matrix and sage/modules.\n\nStill need some advice on the polyhedra failure.\n\nRob",
    "created_at": "2011-02-24T17:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113796",
    "user": "https://github.com/rbeezer"
}
```

Jason,

Thanks for the edits - they are all on the second patch.  With this all tests pass in sage/matrix and sage/modules.

Still need some advice on the polyhedra failure.

Rob



---

archive/issue_comments_113797.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2011-02-24T17:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113797",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_113798.json:
```json
{
    "body": "Volker - any chance of looking at this numerical issue in the polyhedra code?  #2512 just saw some work duplicating this.\n\nRob",
    "created_at": "2011-03-23T01:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113798",
    "user": "https://github.com/rbeezer"
}
```

Volker - any chance of looking at this numerical issue in the polyhedra code?  #2512 just saw some work duplicating this.

Rob



---

archive/issue_comments_113799.json:
```json
{
    "body": "We should just pick a point in the projection to doctest whose coordinates are not zero so that the floating point issues don't show up. E.g. change to\n\n```\nsage: ppoints[1]\n(-0.3182829598..., 1.18784817...)\n```",
    "created_at": "2011-03-23T01:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113799",
    "user": "https://github.com/vbraun"
}
```

We should just pick a point in the projection to doctest whose coordinates are not zero so that the floating point issues don't show up. E.g. change to

```
sage: ppoints[1]
(-0.3182829598..., 1.18784817...)
```



---

archive/issue_comments_113800.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2011-03-23T03:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113800",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_113801.json:
```json
{
    "body": "Replying to [comment:8 vbraun]:\n> We should just pick a point in the projection to doctest whose coordinates are not zero so that the floating point issues don't show up. E.g. change to\n\n\nThanks, Volker.  I'll switch to that and I have another test to add from #2512.  Tomorrow.",
    "created_at": "2011-03-23T03:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113801",
    "user": "https://github.com/rbeezer"
}
```

Replying to [comment:8 vbraun]:
> We should just pick a point in the projection to doctest whose coordinates are not zero so that the floating point issues don't show up. E.g. change to


Thanks, Volker.  I'll switch to that and I have another test to add from #2512.  Tomorrow.



---

archive/issue_comments_113802.json:
```json
{
    "body": "Attachment [trac_10837-norms-condition-CDF-edits-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits-v2.patch) by @rbeezer created at 2011-03-23 05:54:23",
    "created_at": "2011-03-23T05:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113802",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-norms-condition-CDF-edits-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits-v2.patch) by @rbeezer created at 2011-03-23 05:54:23



---

archive/issue_comments_113803.json:
```json
{
    "body": "v2 of the edit patch adds some consistency checks for matrix norms and condition numbers and adjusts the polyhedra doctest.\n\nRunning full tests right now.",
    "created_at": "2011-03-23T05:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113803",
    "user": "https://github.com/rbeezer"
}
```

v2 of the edit patch adds some consistency checks for matrix norms and condition numbers and adjusts the polyhedra doctest.

Running full tests right now.



---

archive/issue_comments_113804.json:
```json
{
    "body": "Passes all long tests now, so ready for review.",
    "created_at": "2011-03-23T06:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113804",
    "user": "https://github.com/rbeezer"
}
```

Passes all long tests now, so ready for review.



---

archive/issue_comments_113805.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-23T06:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113805",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_113806.json:
```json
{
    "body": "Hi Rob\n\nAll the tests pass muster, and the code checks out. A couple of cosmetic issues:\n\n1) Line 530 of sage/matrix/matrix_double_dense.pyx:\n\n```\n    ########################################################################                                      \n    # LEVEL 3 functionality (Optional)                                                                            \n    #    * cdef _sub_                                                                                             \n    #    * __deepcopy__                                                                                           \n    #    * __invert__                                                                                             \n    #    * Matrix windows -- only if you need strassen for that base                                              \n    #    * Other functions (list them here):                                                                      \n    #                                                                                                             \n    #    compute_LU(self)                                                                                         \n    #                                                                                                             \n    ########################################################################\n```\nPerhaps list the methods here for ease of maintainance later on.\n\n2) In your documentation on condition() and norm() you're missing an 'n' in the word 'column' for the -Infinity norm case. Line 582 of sage/matrix/matrix_double_dense.pyx:\n\n```\n        - ``p = Infinity`` or ``p = oo``: the maximum row sum.                                                    \n        - ``p = -Infinity`` or ``p = -oo``: the minimum colum sum.                                                \n        - ``p = 1``: the maximum column sum. \n```\n\n3) Line 705 of sage/matrix/matrix_double_dense.pyx:\n\n```\n    if numpy is None:\n        import numpy\n    import sage.rings.infinity\n    import sage.rings.integer\n    import sage.rings.real_double\n```\nBy convention, shouldn't import commands be listed at the top of a file?\n\n4) The same again as above for the norm() code for matrices and vectors you've added.\n\nSimon",
    "created_at": "2011-03-23T18:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113806",
    "user": "https://github.com/haikona"
}
```

Hi Rob

All the tests pass muster, and the code checks out. A couple of cosmetic issues:

1) Line 530 of sage/matrix/matrix_double_dense.pyx:

```
    ########################################################################                                      
    # LEVEL 3 functionality (Optional)                                                                            
    #    * cdef _sub_                                                                                             
    #    * __deepcopy__                                                                                           
    #    * __invert__                                                                                             
    #    * Matrix windows -- only if you need strassen for that base                                              
    #    * Other functions (list them here):                                                                      
    #                                                                                                             
    #    compute_LU(self)                                                                                         
    #                                                                                                             
    ########################################################################
```
Perhaps list the methods here for ease of maintainance later on.

2) In your documentation on condition() and norm() you're missing an 'n' in the word 'column' for the -Infinity norm case. Line 582 of sage/matrix/matrix_double_dense.pyx:

```
        - ``p = Infinity`` or ``p = oo``: the maximum row sum.                                                    
        - ``p = -Infinity`` or ``p = -oo``: the minimum colum sum.                                                
        - ``p = 1``: the maximum column sum. 
```

3) Line 705 of sage/matrix/matrix_double_dense.pyx:

```
    if numpy is None:
        import numpy
    import sage.rings.infinity
    import sage.rings.integer
    import sage.rings.real_double
```
By convention, shouldn't import commands be listed at the top of a file?

4) The same again as above for the norm() code for matrices and vectors you've added.

Simon



---

archive/issue_comments_113807.json:
```json
{
    "body": "Replying to [comment:13 spice]:\nHi Simon,\n\nThanks for the review.  Responses below:\n\n> 1) Line 530 of sage/matrix/matrix_double_dense.pyx:\n\n<snip>\n> Perhaps list the methods here for ease of maintainance later on.\n\n\nTake a look at sage/matrix/docs.py.  This stuff comes from there and is a list of things you have to do in order for matrices to \"work\".  So it seems to be used as a check-list more than a list of what is available.\n\n> 2) In your documentation on condition() and norm() you're missing an 'n' in the word 'column' for the -Infinity norm case.\n\n\nGood catch - I rolled this into a version 3 of the \"edits\" patch.\n\n> 3) Line 705 of sage/matrix/matrix_double_dense.pyx:\n> By convention, shouldn't import commands be listed at the top of a file?\n> 4) The same again as above for the norm() code for matrices and vectors you've added.\n\n\nAt the top of the file, then the import happens at start-up, which adds to the (noticeable) delay.  You can import anywhere, this is an attempt to delay it until it is needed.  `numpy` should be a variable, with module scope, so the conditional will mean the import only happens once (but I suspect it is not strictly necessary), which you will see throughout this file in other methods.\n\nRob",
    "created_at": "2011-03-23T20:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113807",
    "user": "https://github.com/rbeezer"
}
```

Replying to [comment:13 spice]:
Hi Simon,

Thanks for the review.  Responses below:

> 1) Line 530 of sage/matrix/matrix_double_dense.pyx:

<snip>
> Perhaps list the methods here for ease of maintainance later on.


Take a look at sage/matrix/docs.py.  This stuff comes from there and is a list of things you have to do in order for matrices to "work".  So it seems to be used as a check-list more than a list of what is available.

> 2) In your documentation on condition() and norm() you're missing an 'n' in the word 'column' for the -Infinity norm case.


Good catch - I rolled this into a version 3 of the "edits" patch.

> 3) Line 705 of sage/matrix/matrix_double_dense.pyx:
> By convention, shouldn't import commands be listed at the top of a file?
> 4) The same again as above for the norm() code for matrices and vectors you've added.


At the top of the file, then the import happens at start-up, which adds to the (noticeable) delay.  You can import anywhere, this is an attempt to delay it until it is needed.  `numpy` should be a variable, with module scope, so the conditional will mean the import only happens once (but I suspect it is not strictly necessary), which you will see throughout this file in other methods.

Rob



---

archive/issue_comments_113808.json:
```json
{
    "body": "Attachment [trac_10837-norms-condition-CDF-edits-v3.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits-v3.patch) by @rbeezer created at 2011-03-23 21:05:21",
    "created_at": "2011-03-23T21:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113808",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-norms-condition-CDF-edits-v3.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-edits-v3.patch) by @rbeezer created at 2011-03-23 21:05:21



---

archive/issue_comments_113809.json:
```json
{
    "body": "Changing keywords from \"\" to \"matrix, condition, norm\".",
    "created_at": "2011-03-23T21:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113809",
    "user": "https://github.com/haikona"
}
```

Changing keywords from "" to "matrix, condition, norm".



---

archive/issue_comments_113810.json:
```json
{
    "body": "Hi Rob\n\nThanks, good to know for future. Everything checks out, so I believe this is good to go.\n\nSimon",
    "created_at": "2011-03-23T21:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113810",
    "user": "https://github.com/haikona"
}
```

Hi Rob

Thanks, good to know for future. Everything checks out, so I believe this is good to go.

Simon



---

archive/issue_comments_113811.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-23T21:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113811",
    "user": "https://github.com/haikona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113812.json:
```json
{
    "body": "Replying to [comment:15 spice]:\n\nThanks, Simon.  Appreciate the help.  I'll add you to the master list of linear algebra patches on the next post.",
    "created_at": "2011-03-23T22:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113812",
    "user": "https://github.com/rbeezer"
}
```

Replying to [comment:15 spice]:

Thanks, Simon.  Appreciate the help.  I'll add you to the master list of linear algebra patches on the next post.



---

archive/issue_comments_113813.json:
```json
{
    "body": "I assume the v3 version of the patch is the one which should be applied?",
    "created_at": "2011-04-04T09:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113813",
    "user": "https://github.com/jdemeyer"
}
```

I assume the v3 version of the patch is the one which should be applied?



---

archive/issue_comments_113814.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-04-04T09:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113814",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_113815.json:
```json
{
    "body": "This patch conflicts with #10802.",
    "created_at": "2011-04-04T09:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113815",
    "user": "https://github.com/jdemeyer"
}
```

This patch conflicts with #10802.



---

archive/issue_comments_113816.json:
```json
{
    "body": "This conflicts with #10802, but is just fine all by itself - applies, builds, passes long tests on 4.7.alpha3.\n\nThere is an original patch and three iterations of a follow-on \"edit\" patch, so there are two patches to apply.  Description is updated.\n\nI am going to whip #10802 into shape, since it has other \"issues.\"  Thus, I'm going to flip this back to \"positive review.\"",
    "created_at": "2011-04-04T23:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113816",
    "user": "https://github.com/rbeezer"
}
```

This conflicts with #10802, but is just fine all by itself - applies, builds, passes long tests on 4.7.alpha3.

There is an original patch and three iterations of a follow-on "edit" patch, so there are two patches to apply.  Description is updated.

I am going to whip #10802 into shape, since it has other "issues."  Thus, I'm going to flip this back to "positive review."



---

archive/issue_comments_113817.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-04-04T23:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113817",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_113818.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-05T12:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113818",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028037.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-05T12:00:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28037"
}
```



---

archive/issue_comments_113819.json:
```json
{
    "body": "On cicero (Fedora 14-32):\n\n```\nsage -t -long  -force_lib devel/sage/sage/modules/vector_double_dense.pyx\nWarning: divide by zero encountered in power\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx\", line 628:\n    sage: v.norm(p=0)\nExpected:\n    8\nGot:\n    8.0\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx\", line 640:\n    sage: w.norm(p=0)\nExpected:\n    2\nGot:\n    2.0\n**********************************************************************\n```\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 646:\n    sage: A.condition()\nExpected:\n    1.63346888329e+13\nGot:\n    1.63347342847e+13\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 791:\n    sage: A.norm(p=-2)\nExpected:\n    3.84592537...e-16\nGot:\n    2.86378720384e-16\n**********************************************************************\nFile \"/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 1862:\n    sage: T.round(4)\nExpected:\n    [-13.5698      0.0      0.0      0.0]\n    [     0.0  -0.8508     -0.0     -0.0]\n    [     0.0      0.0   7.7664      0.0]\n    [     0.0      0.0      0.0  11.6542]\nGot:\n    [-13.5698     -0.0     -0.0     -0.0]\n    [     0.0  -0.8508      0.0     -0.0]\n    [     0.0      0.0   7.7664      0.0]\n    [     0.0      0.0      0.0  11.6542]\n**********************************************************************\n```",
    "created_at": "2011-04-11T08:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113819",
    "user": "https://github.com/jdemeyer"
}
```

On cicero (Fedora 14-32):

```
sage -t -long  -force_lib devel/sage/sage/modules/vector_double_dense.pyx
Warning: divide by zero encountered in power
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx", line 628:
    sage: v.norm(p=0)
Expected:
    8
Got:
    8.0
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx", line 640:
    sage: w.norm(p=0)
Expected:
    2
Got:
    2.0
**********************************************************************
```

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 646:
    sage: A.condition()
Expected:
    1.63346888329e+13
Got:
    1.63347342847e+13
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 791:
    sage: A.norm(p=-2)
Expected:
    3.84592537...e-16
Got:
    2.86378720384e-16
**********************************************************************
File "/home/buildbot/build/sage/cicero-1/cicero_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 1862:
    sage: T.round(4)
Expected:
    [-13.5698      0.0      0.0      0.0]
    [     0.0  -0.8508     -0.0     -0.0]
    [     0.0      0.0   7.7664      0.0]
    [     0.0      0.0      0.0  11.6542]
Got:
    [-13.5698     -0.0     -0.0     -0.0]
    [     0.0  -0.8508      0.0     -0.0]
    [     0.0      0.0   7.7664      0.0]
    [     0.0      0.0      0.0  11.6542]
**********************************************************************
```



---

archive/issue_comments_113820.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-04-11T08:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113820",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_113821.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-04-11T08:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113821",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_028038.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T08:46:22Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28038"
}
```



---

archive/issue_comments_113822.json:
```json
{
    "body": "On cleo (RHEL 5.3-64):\n\n```\nsage -t -long  -force_lib devel/sage/sage/modules/vector_double_dense.pyx\nWarning: divide by zero encountered in power\n**********************************************************************\nFile \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx\", line 626:\n    sage: v.norm(p=-oo)\nExpected:\n    0.0\nGot:\n    -0.0\n**********************************************************************\n```\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 646:\n    sage: A.condition()\nExpected:\n    1.63346888329e+13\nGot:\n    1.63344849368e+13\n**********************************************************************\nFile \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 791:\n    sage: A.norm(p=-2)\nExpected:\n    3.84592537...e-16\nGot:\n    1.64639435859e-16\n**********************************************************************\nFile \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 1862:\n    sage: T.round(4)\nExpected:\n    [-13.5698      0.0      0.0      0.0]\n    [     0.0  -0.8508     -0.0     -0.0]\n    [     0.0      0.0   7.7664      0.0]\n    [     0.0      0.0      0.0  11.6542]\nGot:\n    [-13.5698     -0.0      0.0      0.0]\n    [     0.0  -0.8508      0.0     -0.0]\n    [     0.0      0.0   7.7664     -0.0]\n    [     0.0      0.0      0.0  11.6542]\n**********************************************************************\n```",
    "created_at": "2011-04-11T08:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113822",
    "user": "https://github.com/jdemeyer"
}
```

On cleo (RHEL 5.3-64):

```
sage -t -long  -force_lib devel/sage/sage/modules/vector_double_dense.pyx
Warning: divide by zero encountered in power
**********************************************************************
File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/modules/vector_double_dense.pyx", line 626:
    sage: v.norm(p=-oo)
Expected:
    0.0
Got:
    -0.0
**********************************************************************
```

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 646:
    sage: A.condition()
Expected:
    1.63346888329e+13
Got:
    1.63344849368e+13
**********************************************************************
File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 791:
    sage: A.norm(p=-2)
Expected:
    3.84592537...e-16
Got:
    1.64639435859e-16
**********************************************************************
File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha4/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 1862:
    sage: T.round(4)
Expected:
    [-13.5698      0.0      0.0      0.0]
    [     0.0  -0.8508     -0.0     -0.0]
    [     0.0      0.0   7.7664      0.0]
    [     0.0      0.0      0.0  11.6542]
Got:
    [-13.5698     -0.0      0.0      0.0]
    [     0.0  -0.8508      0.0     -0.0]
    [     0.0      0.0   7.7664     -0.0]
    [     0.0      0.0      0.0  11.6542]
**********************************************************************
```



---

archive/issue_comments_113823.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-04-11T08:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113823",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_113824.json:
```json
{
    "body": "There are several doctest failures on other buildbot machines with the same tests are the above.",
    "created_at": "2011-04-11T08:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113824",
    "user": "https://github.com/jdemeyer"
}
```

There are several doctest failures on other buildbot machines with the same tests are the above.



---

archive/issue_comments_113825.json:
```json
{
    "body": "trying to help the build bot :\n\nApply trac_10837-norms-condition-CDF.patch trac_10837-norms-condition-CDF-edits-v3.patch",
    "created_at": "2011-06-11T20:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113825",
    "user": "https://github.com/fchapoton"
}
```

trying to help the build bot :

Apply trac_10837-norms-condition-CDF.patch trac_10837-norms-condition-CDF-edits-v3.patch



---

archive/issue_comments_113826.json:
```json
{
    "body": "trying again\n\nApply trac_10837-norms-condition-CDF.patch, trac_10837-norms-condition-CDF-edits-v3.patch",
    "created_at": "2011-06-15T19:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113826",
    "user": "https://github.com/fchapoton"
}
```

trying again

Apply trac_10837-norms-condition-CDF.patch, trac_10837-norms-condition-CDF-edits-v3.patch



---

archive/issue_comments_113827.json:
```json
{
    "body": "This is supposed to wake up the bot:\n\nApply trac_10837-norms-condition-CDF.patch, trac_10837-norms-condition-CDF-edits-\nv3.patch\n\nbut it did not work (already tried twice, let us try again..)",
    "created_at": "2011-06-24T20:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113827",
    "user": "https://github.com/fchapoton"
}
```

This is supposed to wake up the bot:

Apply trac_10837-norms-condition-CDF.patch, trac_10837-norms-condition-CDF-edits-
v3.patch

but it did not work (already tried twice, let us try again..)



---

archive/issue_comments_113828.json:
```json
{
    "body": "I was going to fix the doctests and the 0-norm for the vectors. But have a look at the condition of A in your doctests! The -oo condition is 17.5, but clearly the minimal sum over rows is 9! This is not an issue of the wrapper, but numpy gives the same result. Do you have any explanation at hand?\n\nOne thing: Is there any particular reason why you didn't include the usual condition, given as the quotient of the minimal and the maximal sv? This works for nonsquare matrices as well and is thus very important to have.",
    "created_at": "2011-08-06T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113828",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

I was going to fix the doctests and the 0-norm for the vectors. But have a look at the condition of A in your doctests! The -oo condition is 17.5, but clearly the minimal sum over rows is 9! This is not an issue of the wrapper, but numpy gives the same result. Do you have any explanation at hand?

One thing: Is there any particular reason why you didn't include the usual condition, given as the quotient of the minimal and the maximal sv? This works for nonsquare matrices as well and is thus very important to have.



---

archive/issue_comments_113829.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2011-08-06T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113829",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_113830.json:
```json
{
    "body": "Attachment [trac-10837-norms-condition-CDF-review.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review.patch) by mraum created at 2011-08-06 18:40:16",
    "created_at": "2011-08-06T18:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113830",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Attachment [trac-10837-norms-condition-CDF-review.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review.patch) by mraum created at 2011-08-06 18:40:16



---

archive/issue_comments_113831.json:
```json
{
    "body": "Attachment [trac-10837-norms-condition-CDF-review2.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review2.patch) by mraum created at 2011-08-06 18:57:45",
    "created_at": "2011-08-06T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113831",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Attachment [trac-10837-norms-condition-CDF-review2.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review2.patch) by mraum created at 2011-08-06 18:57:45



---

archive/issue_comments_113832.json:
```json
{
    "body": "Sorry, I confused the norm and the condition method. Everthing is OK now.\n\nI fixed the doctests and so that they will work on cleo, too. I also added the possibility to ask for the usual condition by passing p = 'sv' for singular values. All your changes are OK, so if you approve the new changes, you can give this a positive review.\n\n**Apply:**\n\n1. [attachment:trac_10837-norms-condition-CDF.patch]\n2. [attachment:trac_10837-norms-condition-CDF-edits-v3.patch]\n3. [attachment:trac_10837-norms-condition-CDF-review.patch]\n4. [attachment:trac_10837-norms-condition-CDF-review2.patch]",
    "created_at": "2011-08-06T19:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113832",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Sorry, I confused the norm and the condition method. Everthing is OK now.

I fixed the doctests and so that they will work on cleo, too. I also added the possibility to ask for the usual condition by passing p = 'sv' for singular values. All your changes are OK, so if you approve the new changes, you can give this a positive review.

**Apply:**

1. [attachment:trac_10837-norms-condition-CDF.patch]
2. [attachment:trac_10837-norms-condition-CDF-edits-v3.patch]
3. [attachment:trac_10837-norms-condition-CDF-review.patch]
4. [attachment:trac_10837-norms-condition-CDF-review2.patch]



---

archive/issue_comments_113833.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-08-06T19:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113833",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_113834.json:
```json
{
    "body": "Hi Martin,\n\nSomehow missed the singular value option in the NumPy docs.  Thanks for catching that and enabling it!\n\nAll the changes and additions look good to me.  The one test in the \"review2\" patch has a comment symbol in front of the `all()`.  If that is removed, the test passes (with result `True`).  Did you intend to remove the comment symbol?\n\nIf so, just let me know and I can fix it and get this ticket marked positive review and all ready to go.\n\nThanks,\nRob",
    "created_at": "2011-08-12T19:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113834",
    "user": "https://github.com/rbeezer"
}
```

Hi Martin,

Somehow missed the singular value option in the NumPy docs.  Thanks for catching that and enabling it!

All the changes and additions look good to me.  The one test in the "review2" patch has a comment symbol in front of the `all()`.  If that is removed, the test passes (with result `True`).  Did you intend to remove the comment symbol?

If so, just let me know and I can fix it and get this ticket marked positive review and all ready to go.

Thanks,
Rob



---

archive/issue_comments_113835.json:
```json
{
    "body": "You're absolutely right, please make the comment a test.",
    "created_at": "2011-08-14T11:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113835",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

You're absolutely right, please make the comment a test.



---

archive/issue_comments_113836.json:
```json
{
    "body": "Attachment [trac-10837-norms-condition-CDF-review-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review-v2.patch) by @rbeezer created at 2011-08-15 04:49:53\n\nCombined reviewer patch",
    "created_at": "2011-08-15T04:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113836",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac-10837-norms-condition-CDF-review-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac-10837-norms-condition-CDF-review-v2.patch) by @rbeezer created at 2011-08-15 04:49:53

Combined reviewer patch



---

archive/issue_comments_113837.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-15T04:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113837",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113838.json:
```json
{
    "body": "I took out the comment symbol to restore the test, and have combined the two reviewer tickets, since they need a user string (added Martin in on that).  Enabling the 'sv' option is a significant addition, so I have added Martin as an author (and myself as the reviewer of that).\n\nPasses all long tests, so as proposed, I have switched this to 'positive' review.  Thanks for the help on this on, Martin and Simon.\n\nRob",
    "created_at": "2011-08-15T04:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113838",
    "user": "https://github.com/rbeezer"
}
```

I took out the comment symbol to restore the test, and have combined the two reviewer tickets, since they need a user string (added Martin in on that).  Enabling the 'sv' option is a significant addition, so I have added Martin as an author (and myself as the reviewer of that).

Passes all long tests, so as proposed, I have switched this to 'positive' review.  Thanks for the help on this on, Martin and Simon.

Rob



---

archive/issue_events_028039.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-16T09:35:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28039"
}
```



---

archive/issue_comments_113839.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-08-17T19:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113839",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_113840.json:
```json
{
    "body": "This patch seems to conflict with #10839.",
    "created_at": "2011-08-17T19:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113840",
    "user": "https://github.com/jdemeyer"
}
```

This patch seems to conflict with #10839.



---

archive/issue_comments_113841.json:
```json
{
    "body": "Attachment [trac_10837-norms-condition-CDF-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-v2.patch) by @rbeezer created at 2011-08-17 20:36:46\n\nRebase",
    "created_at": "2011-08-17T20:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113841",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-norms-condition-CDF-v2.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-norms-condition-CDF-v2.patch) by @rbeezer created at 2011-08-17 20:36:46

Rebase



---

archive/issue_comments_113842.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-08-17T20:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113842",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_113843.json:
```json
{
    "body": "\"v2\" version of main patch is a rebase against a stock 4.7.1 with #10839 applied.  Tested on sage/matrix/matrix_double_dense.pyx.  Thanks.",
    "created_at": "2011-08-17T20:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113843",
    "user": "https://github.com/rbeezer"
}
```

"v2" version of main patch is a rebase against a stock 4.7.1 with #10839 applied.  Tested on sage/matrix/matrix_double_dense.pyx.  Thanks.



---

archive/issue_comments_113844.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-18T22:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113844",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028040.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:03:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28040"
}
```



---

archive/issue_comments_113845.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-08-24T08:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113845",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_028041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-24T08:26:03Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28041"
}
```



---

archive/issue_comments_113846.json:
```json
{
    "body": "On hawk (OpenSolaris 06/2009 i86pc Xeon W3580):\n\n```\nsage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx\", line 713:\n    sage: abs(c-d) < 1.0e-14\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```",
    "created_at": "2011-08-24T08:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113846",
    "user": "https://github.com/jdemeyer"
}
```

On hawk (OpenSolaris 06/2009 i86pc Xeon W3580):

```
sage -t -long  -force_lib devel/sage/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "/export/home/buildbot/build/sage/hawk-1/hawk_full/build/sage-4.7.2.alpha2/devel/sage-main/sage/matrix/matrix_double_dense.pyx", line 713:
    sage: abs(c-d) < 1.0e-14
Expected:
    True
Got:
    False
**********************************************************************
```



---

archive/issue_comments_113847.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-08-24T08:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113847",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_113848.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-24T21:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113848",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_113849.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-08-24T21:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113849",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_113850.json:
```json
{
    "body": "Ping. (#10802 depends on this.)",
    "created_at": "2011-09-09T00:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113850",
    "user": "https://github.com/nexttime"
}
```

Ping. (#10802 depends on this.)



---

archive/issue_comments_113851.json:
```json
{
    "body": "Attachment [trac_10837-numerical-noise-solaris.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-numerical-noise-solaris.patch) by @rbeezer created at 2011-09-19 02:41:40",
    "created_at": "2011-09-19T02:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113851",
    "user": "https://github.com/rbeezer"
}
```

Attachment [trac_10837-numerical-noise-solaris.patch](tarball://root/attachments/some-uuid/ticket10837/trac_10837-numerical-noise-solaris.patch) by @rbeezer created at 2011-09-19 02:41:40



---

archive/issue_comments_113852.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-09-19T02:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113852",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_113853.json:
```json
{
    "body": "\"noise-solaris\" patch fixes the failing doctest by relaxing the tolerance, and makes a similar change to a similar doctest in the same block.",
    "created_at": "2011-09-19T02:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113853",
    "user": "https://github.com/rbeezer"
}
```

"noise-solaris" patch fixes the failing doctest by relaxing the tolerance, and makes a similar change to a similar doctest in the same block.



---

archive/issue_comments_113854.json:
```json
{
    "body": "Positive review for [attachment:trac_10837-numerical-noise-solaris.patch].  I haven't tested it on Solaris, but that will happen later.",
    "created_at": "2011-10-04T07:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113854",
    "user": "https://github.com/jdemeyer"
}
```

Positive review for [attachment:trac_10837-numerical-noise-solaris.patch].  I haven't tested it on Solaris, but that will happen later.



---

archive/issue_comments_113855.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-04T07:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113855",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113856.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-10-05T07:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10771#issuecomment-113856",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028042.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-05T07:46:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10771#event-28042"
}
```
