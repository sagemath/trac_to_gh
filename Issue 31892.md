# Issue 31892: sage_input is unreliable for elements of ComplexField

archive/issues_031892.json:
```json
{
    "body": "\n```\nsage: fld = ComplexField(200)\nsage: a = fld('0.85425665148473689034386458431097348561089439860408577398333', '20')\nsage: sage_input(a, verify=True)\n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n...\nAssertionError: Expected 0.85425665148473689034386458431097348561089439860408577398333 + 20.000000000000000000000000000000000000000000000000000000000*I == 0.85425665148473689034386458431097348561089439860408577398333 + 20.000000000000000000000000000000000000000000000000000000000*I\n```\n\n\nApparently, the last bits that are usually not printed get lost.\n\n```\nsage: b = sage_eval(sage_input(a, verify=False))\nsage: a == b  # should be True\nFalse\nsage: a.str(truncate=False)\n0.85425665148473689034386458431097348561089439860408577398333000 + 20.000000000000000000000000000000000000000000000000000000000000*I\nsage: b.str(truncate=False)\n0.85425665148473689034386458431097348561089439860408577398333374 + 20.000000000000000000000000000000000000000000000000000000000000*I\n```\n\n\nThis was found by\n\n```\nsage -t --long --random-seed=3159 src/sage/rings/complex_mpfr.pyx\n```\n\n\nThe corresponding real version works:\n\n```\nsage: sage_input(a.real(), verify=True)\n# Verified\nRealField(200)(0.85425665148473689034386458431097348561089439860408577398333)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32129\n\n",
    "created_at": "2021-07-04T18:53:58Z",
    "labels": [
        "numerical",
        "major",
        "bug"
    ],
    "title": "sage_input is unreliable for elements of ComplexField",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31892",
    "user": "@mwageringel"
}
```

```
sage: fld = ComplexField(200)
sage: a = fld('0.85425665148473689034386458431097348561089439860408577398333', '20')
sage: sage_input(a, verify=True)
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
...
AssertionError: Expected 0.85425665148473689034386458431097348561089439860408577398333 + 20.000000000000000000000000000000000000000000000000000000000*I == 0.85425665148473689034386458431097348561089439860408577398333 + 20.000000000000000000000000000000000000000000000000000000000*I
```


Apparently, the last bits that are usually not printed get lost.

```
sage: b = sage_eval(sage_input(a, verify=False))
sage: a == b  # should be True
False
sage: a.str(truncate=False)
0.85425665148473689034386458431097348561089439860408577398333000 + 20.000000000000000000000000000000000000000000000000000000000000*I
sage: b.str(truncate=False)
0.85425665148473689034386458431097348561089439860408577398333374 + 20.000000000000000000000000000000000000000000000000000000000000*I
```


This was found by

```
sage -t --long --random-seed=3159 src/sage/rings/complex_mpfr.pyx
```


The corresponding real version works:

```
sage: sage_input(a.real(), verify=True)
# Verified
RealField(200)(0.85425665148473689034386458431097348561089439860408577398333)
```


Issue created by migration from https://trac.sagemath.org/ticket/32129





---

archive/issue_comments_455712.json:
```json
{
    "body": "dup of #30977?",
    "created_at": "2022-05-04T22:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31892#issuecomment-455712",
    "user": "mkoeppe"
}
```

dup of #30977?



---

archive/issue_comments_455713.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-10T20:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31892#issuecomment-455713",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455714.json:
```json
{
    "body": "Yes, it looks like it. Let us merge them.",
    "created_at": "2022-05-10T20:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31892#issuecomment-455714",
    "user": "@mwageringel"
}
```

Yes, it looks like it. Let us merge them.



---

archive/issue_comments_455715.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-10T20:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31892#issuecomment-455715",
    "user": "@mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455716.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2022-05-10T21:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31892#issuecomment-455716",
    "user": "mkoeppe"
}
```

Resolution: duplicate
