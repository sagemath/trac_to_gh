# Issue 10519: gcc/binutils wrapper

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2011-01-09 06:52:46

Assignee: GeorgSWeber

CC:  drkirkby jdemeyer wjp burcin jpflori tscrim

Keywords: gcc wrapper rpath

This ticket aims to implement a gcc wrapper that will change gcc/ld/... arguments before passing them on to the underlying compiler binaries. The most current version is at 

https://bitbucket.org/vbraun/gcc-wrapper

Right now, the wrappers
  * remove any extra rpath that is set
  * set the rpath to `$ORIGIN/../lib`. This makes the sage binaries look for their libraries in `$SAGE_LOCAL/lib` and no `LD_LIBRARY_PATH` hacks are necessary.
  * some gcc optimization settings are removed on itanium and gcc 4.4.1. See also #10430.

The wrapper is implemented in pure C++ and does not depend on any Sage component.

TODO:
  * Make the underlying ld binary independently configurable - this will simplify building Sage on Solaris.


---

Attachment

spkg/install with the wrapper spkg added


---

Comment by vbraun created at 2011-01-10 03:40:25

spkg/standard/deps with the added gcc wrapper spkg


---

Attachment

diff for spkg/install


---

Attachment

diff for spkg/standard/deps


---

Comment by vbraun created at 2011-01-11 10:26:36

Changing status from new to needs_review.


---

Attachment


---

Comment by jdemeyer created at 2011-01-12 00:48:54

Volker, what's your opinion on ulimiting the memory/CPU time of `gcc` just in case we are running a broken compiler which either uses infinite memory or runs forever.


---

Comment by vbraun created at 2011-01-12 01:44:47

In principle we could add limits, but then its hard to say precisely what they ought to be. I've seen gcc use >1gb of ram and take quite a long time and still produce the correct output. We could use something like (total available ram)/(#parallel makes)-256MB but then thats hard to implement and assumes that all parallel makes use the same amount of ram. And detecting the overall amount of ram is again very system-dependent. I think that GCC hanging and/or eating all memory is a rather rare failure mode for gcc, so at this point we shouldn't spend that much effort on it.


---

Comment by jdemeyer created at 2011-01-18 14:53:56

It seems that pynac no longer compiles properly with the new version of your wrapper (it worked with some older version), see [http://sage.math.washington.edu/home/jdemeyer/release/sage-4.6.2.test0/pynac-0.2.1.log](http://sage.math.washington.edu/home/jdemeyer/release/sage-4.6.2.test0/pynac-0.2.1.log).

Just try `sage -f pynac-0.2.1` and see whether you can reproduce this problem.


---

Comment by jdemeyer created at 2011-01-18 14:53:56

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2011-01-18 19:54:05

Fixed by the new spkg (same location, make sure to delete `$SAGE_ROOT/spkg/optional/gccwrapper-1.0.spkg` if you reinstall). I recompiled all spkgs (by erasing `$SAGE_ROOT/spkg/installed/*` without errors.

Turns out that configure calls gcc with some invalid options to figure out the version, and then expects a certain kind of error. I changed the wrapper to pass a single argument `gcc -option` directly through.


---

Comment by jdemeyer created at 2011-01-19 22:29:36

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2011-01-19 22:29:36

With the latest, I do indeed manage to compile Sage on `sage.math.washington.edu`.  I plan to test it on the buildbot one of the next days.


---

Comment by jdemeyer created at 2011-01-19 22:29:36

Changing keywords from "gcc wrapper rpath" to "gcc wrapper rpath gccwrapper spkg".


---

Comment by wjp created at 2011-01-20 09:01:21

How would this behave if you make a binary distribution of sage, and then move that to another system with gcc installed in a different location? Would (for example) loading cython files still work through the wrapper then?


---

Comment by jdemeyer created at 2011-01-22 11:18:03

needs_work given the buildbot tests.


---

Comment by jdemeyer created at 2011-01-22 11:18:03

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2011-01-22 18:36:02

Willem: A binary distribution should be compiled with the distribution's compiler, so we don't necessarily have to do anything as the compiler ought to be in the same place. But its probably better to either recompile the gcc wrapper on the new system or, if that fails, deactivate it ("$SAGE_LOCAL/bin/wrapper off"). We can work this out in a followup ticket where we also remove the `LD_LIBRARY_PATH` hacks.

Jeroen: I've updated the spkg to fix compilation on OSX. Turns out the updated ATLAS build script tripped over the wrapper on OSX. I guess I should have seen that coming as I wrote that script, but oh well... Investigating Solaris now.


---

Comment by vbraun created at 2011-01-22 20:29:58

The Solaris linker accepts `-R` but not `-rpath`, groan. The updated gccwrapper spkg fixes this. Compile proceeds past the previous error, but due to the amazing slowness it won't finish anytime soon... :-)


---

Comment by vbraun created at 2011-01-24 15:23:55

Built successfully on t2!


---

Comment by drkirkby created at 2011-02-03 14:07:42

I think this is a particularly bad idea. Also be aware that whilst Sage has only ever been built with gcc, there are advantages in building it with the Sun compiler. In fact, in the case of R, it will be necessary on Solaris x86 to build that component with the Sun compiler for a 64-bit build. The R manual states R has never been built 64-bit on Solaris x86 with the GNU compiler. 

What happens if the compiler is not gcc? 

So please don't go making assumptions about compilers and linkers. Bear in mind Solaris system may have gcc configured to use either the GNU or Sun linker.  

This whole idea of the ticket gets a -1 from me. It will make further porting efforts more difficult. 

Dave


---

Comment by drkirkby created at 2011-02-03 14:16:01

I just see that the documentation say 

"The cc wrapper actually calls gcc. This should already be the case as cc just installs as symlink cc -> gcc. But sometimes this link is dropped in manual gcc installs."

How about when gcc and cc and entirely different programs? 


```
drkirkby`@`hawk:~$ cc
usage: cc [ options] files.  Use 'cc -flags' for details
drkirkby`@`hawk:~$ gcc
gcc: no input files
drkirkby`@`hawk:~$ 
```


Seriously, I would drop the whole idea. 

Sorry I did not pick up on this ticket earlier. My dad died in mid January, so Sage has not been high on my priority list. 

Dave


---

Comment by jdemeyer created at 2011-02-03 14:19:41

I think your negative attitude towards this ticket is probably a misunderstanding. I believe that the gccwrapper does not only work with gcc (the name compiler-wrapper might have been a better choice).

I think this can actually make porting a lot easier instead of harder. Because compiler-specific issues can be dealt with just once, namely in the gccwrapper. For example, most of the SAGE64-stuff could be handled by the wrapper, instead of the individual spkgs.


---

Comment by jdemeyer created at 2011-02-03 14:22:12

A completely different issue: since there isn't really an upstream for this spkg, I think it would make a lot of sense to put the whole `src/` directory under revision control.  I believe this has been done also for `genus2reduction` which doesn't have an upstream either.


---

Comment by jdemeyer created at 2011-02-03 14:29:09

Sorry Dave, I spoke too soon.  Reading the source I do indeed see

```
  switch (prog) {
  case WRAPPED_GCC:        cmd = path(GCC_PATH_PREFIX)/"gcc";  break;
  case WRAPPED_CC:         cmd = path(GCC_PATH_PREFIX)/"gcc";  break;
  case WRAPPED_C99:        cmd = path(GCC_PATH_PREFIX)/"c99";  break;
  case WRAPPED_C89:        cmd = path(GCC_PATH_PREFIX)/"c89";  break;
  case WRAPPED_CPLUSPLUS:  cmd = path(GCC_PATH_PREFIX)/"c++";  break;
  case WRAPPED_GPLUSPLUS:  cmd = path(GCC_PATH_PREFIX)/"g++";  break;
  case WRAPPED_LD:         cmd = path(LD_PATH_PREFIX)/"ld";    break;
  case WRAPPED_WRAPPER:
  default:
    assert(false); return;
  }
```

with a hardcoded `gcc` in there.

I would use the autoconf-detected binaries for the compiler/linker there.  But the idea of this ticket certainly gets a +1 from me.


---

Comment by vbraun created at 2011-02-03 14:56:41

You can simply not use the wrapper if you have any other compiler, and rpath/runpaths will remain broken as they are right now. In particular, any distribution that wants to include Sage would just use their own compiler without wrapper and install libraries in the library search path. And upgrade their compiler if it dies while compiling pari :-)

I wrote autoconf macros to detect the linker used (Gnu/Sun/OSX), so it should work with either linker. Anything else is a bug that I'll be happy to fix.

In principle, other compilers could be supported by their own compiler wrapper. Since we currently can't use any other compiler, I haven't written any other wrapper. If the compiler/linker provides another way to set the rpath, then we don't need any wrapper of course.

Another possibility is to write a translator from the gcc compiler switches to some 3rd party compiler, and then use that other compiler without Sage knowing about it. I haven't tried this, but it might be easier than fixing all spkgs on rare hardware.

The point of translating cc->gcc is that this symlink was missing on one of the itanium machines on skynet (iras). I fixed that bug and checked that no other component of Sage tries to call cc. While thats clearly a broken gcc install, it arguably doesn't hurt to override it in the wrapper if you know that you are using gcc. Though you make a good case for not overriding cc at all, since it might be the Solaris compiler. One question is whether we can rely on the names of the compiler executables to be all different, or whether there are conflicts. I know that gcc and icc don't clash, but Solaris' cc is bound to be the same name as some other compiler?


---

Comment by drkirkby created at 2011-02-03 15:30:51

There's a fair amount of Sage which will build with the Sun compiler, and I hope to increase that, so please don't do anything that will screw up if cc is not gcc. 

Note there are two shell scripts $SAGE_LOCAL/bin/testcc.sh and $SAGE_LOCAL/bin/testcxx.sh which actually check what the compilers are, and does this withougt making assumptions based on their name. They compile a simple program (written inline) which checks what preprocessor variables are defined. 

I certainly would not assume a failure to link cc to gcc was a bug on any machine. 

With my fathers funeral in a few days, I'm not really in the mode for detailed analysis of this, but my initial feelings are I would leave well alone. 

Dave


---

Comment by jdemeyer created at 2011-02-03 15:55:10

Volker: what do you think of my suggestion, to use the autoconf-detected C/C++ compiler instead of a hardcoded `gcc`?  The idea of having hardcoded compiler names gets -1 from me.


---

Comment by vbraun created at 2011-02-03 18:28:51

I've renamed it to "compilerwrapper" to be more inclusive. Now it only installs the symlinks / translates options if the wrapper was built with gcc (and hence wraps gcc). If we ever add support for another compiler, it would then simply install its own (different) set of symlinks. I built the compilerwrapper spkg on mark/skynet with Sun Studio by setting CC=cc and CXX=CC and it works as expected (i.e. wraps nothing).


---

Comment by vbraun created at 2011-02-03 18:28:51

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2011-02-03 18:28:51

Changing keywords from "gcc wrapper rpath gccwrapper spkg" to "compiler gcc wrapper rpath spkg".


---

Attachment

Patch to SAGE_ROOT repo (use only this patch)


---

Comment by fbissey created at 2011-05-29 02:33:09

I have to say I am very supportive of the idea of using rpath. Shouldn't we also have a patch to sage_scripts to eliminate (or reduce if not possible to completely eliminate) LD_LIBRARY_PATH in sage-env? After all, that's the goal here.


---

Comment by vbraun created at 2011-05-29 03:05:07

I'm still trying to solve one issue with the rpaths. The problem is that Sage does not distinguish build preparation (configure) from the actual build. If we set relative rpaths, then configure requires LD_LIBRARY_PATH set because the configure scripts will build and execute binaries in random directories in order to test prerequisites. If we had separate prepare/build phases, then we could run configure with absolute rpaths and then switch to relative rpaths for the final build.

The problem with LD_LIBRARY_PATH is, of course, that sometimes it screws up parts of the toolchain. We had that with GMP/MPIR before, and now PPL.


---

Comment by fbissey created at 2011-05-29 03:52:09

And someone had a problem building doc the other day because system gd was masked by sage's gd. There was a problem with building ecl which was fixed as a colateral of another problem. The list will only grow.


---

Comment by leif created at 2011-08-27 14:15:40

Replying to [comment:25 vbraun]:
> The problem with LD_LIBRARY_PATH is, of course, that sometimes it screws up parts of the toolchain. We had that with GMP/MPIR before, and now PPL.

Simple solution: Rename Sage's libraries, or put critical ones (like GMP, MPFR, MPC, PPL etc., also readline on some systems) into a different directory.


---

Comment by vbraun created at 2011-08-27 17:29:15

Leif, while you are at it rewriting all spkg's to work with the renamed libraries, could you also convert the custom hacked build scripts to autotools? ;-)


---

Comment by gostrc created at 2012-01-21 16:00:23

I believe http://trac.sagemath.org/sage_trac/ticket/11391 is related to this issue.
Has there been any progress on this issue? because currently sage 4.8 is unable to compile on my system due to ticket #11391.


---

Comment by vbraun created at 2013-06-04 15:52:19

Updated patch


---

Attachment

Ok, maybe a new attempt is in order.

I'll try to be more gradual. For now, keep `LD_LIBRARY_PATH` but use the compilerwrapper to rewrite rpaths. I added the feature to overwrite `LD_LIBRARY_PATH` with `SAGE_OLD_LD_LIBRARY_PATH` before calling gcc/ld, so at least the nasty library version clashes in the compiler are avoided.

We need to figure out what to do if sage builds its own gcc since only one gcc can live in `$SAGE_LOCAL/bin`. I would be in favor of compiling our own gcc with some pre/postfix as `$SAGE_LOCAL/bin/gcc-sage`. The compilerwrapper can then easily switch between this gcc and the host one, if desired. Thoughts?


---

Comment by leif created at 2013-06-04 16:26:21

First, change the component to "optional packages"?

Jean-Pierre might have something to say as well, since it seems on Cygwin64 clashes of (system's) GCC's DLLs with Sage's (in `$SAGE_LOCAL/bin/` !) get more frequent (so I suggested to him to create wrapper scripts analogous to `sage-native-execute`, but also setting up / using "`SAGE_ORIG_PATH`", not just `*LIBRARY_PATH`).

(And Cygwin doesn't support `RPATH` at all, does it?)


---

Comment by leif created at 2013-06-04 16:41:52

Replying to [ticket:10572 vbraun]:
> The wrapper is implemented in pure C++ and does not depend on any Sage component. At the moment it only wraps gcc and does not do anything for other compilers.

The main problem I see is that this requires a working C++ compiler even if we (just) want to bootstrap Sage's GCC (although GCC 4.8 and later require a C++ compiler to build anyway).


---

Comment by vbraun created at 2013-06-04 17:05:57

I don't think we'll ever bootstrap sage without a half-way working C++ compiler. As you said, gcc is now written in C++. At least the compilerwrapper doesn't need any optimizations, so even moderately broken compilers should be fine.

Apparently Cygwin inherits the DLL hell from Windows. Not sure what we can do about it except building our own cygwin base distro.


---

Comment by vbraun created at 2013-06-04 17:10:18

On second thought, it seems that PATH equals LD_LIBRARY_PATH on Cygwin. So we could just strip out Sage from `$PATH` before calling gcc. Would that suffice?


---

Comment by leif created at 2013-06-04 17:30:24

`SPKG.txt` needs to get updated... ;-)

IMHO also the ticket's description;  there are at least two rather orthogonal problems the compiler wrapper is supposed to fix:

  1. Clashes between system and Sage's libraries.

  2. Relocation issues, i.e., "dead" (hard-coded) `RPATH`s in binaries (shared libraries and executables) created by Sage, upon moving the installation (which includes installing a pre-built / binary distribution).

  3. (Even more unrelated to both of the above:)  Broken compiler versions / tool chains;  work around by messing with (e.g.) optimization flags, depending on the present compiler and its known issues.


---

Comment by vbraun created at 2013-06-04 18:39:50

Leif: I don't think there is any point in making this an optional spkg. If the wrapper not installed before you compile the first dynamically-linked binary then it is useless.

Updated the description.


---

Comment by jpflori created at 2013-06-08 16:35:49

Replying to [comment:36 vbraun]:
> On second thought, it seems that PATH equals LD_LIBRARY_PATH on Cygwin. So we could just strip out Sage from `$PATH` before calling gcc. Would that suffice?
On Cygwin both have some use...
But mostly PATH is used in place of LD_LIBRARY_PATH indeed.


---

Comment by jpflori created at 2013-06-08 16:45:57

It would surely be nice to have some variable to trigger the installation of this (hopefully standard) package, just like we do for Sage's GCC, and another one to trigger its actual use (if installed).
I would be quite happy to still be able to mess with my compilers and not to have something getting in the way.


---

Comment by jpflori created at 2013-06-08 16:47:02

Replying to [comment:39 jpflori]:
> Replying to [comment:36 vbraun]:
> > On second thought, it seems that PATH equals LD_LIBRARY_PATH on Cygwin. So we could just strip out Sage from `$PATH` before calling gcc. Would that suffice?
> On Cygwin both have some use...
> But mostly PATH is used in place of LD_LIBRARY_PATH indeed.
(and for the usual usage of PATH on Linux of course.)


---

Comment by vbraun created at 2013-06-08 16:55:16

Once you have it installed you can user `wrapper on` / `wrapper off` to enable/disable it.


---

Comment by vbraun created at 2013-06-08 16:57:49

Apparently Cygwin uses LD_LIBRARY_PATH for dlopen() at runtime but **not** for loading shared libraries when the program starts. So its pretty much useless for us, right?


---

Comment by jpflori created at 2013-06-08 17:10:45

I had problems with that once because LD_LIBRARY_PATH was not set on Cygwin.
I think it was when building or using the Python's ctypes module, see #14380.


---

Comment by jpflori created at 2013-06-08 18:25:57

Replying to [comment:42 vbraun]:
> Once you have it installed you can user `wrapper on` / `wrapper off` to enable/disable it.
That's not very practical for example to prevent its use after typing "make"


---

Comment by vbraun created at 2013-06-08 18:40:58

How about if `SAGE_INSTALL_GCC=no` then don't install the wrapper, otherwise do install it. In particular, unset => install compiler wrapper by default, and gcc only if host gcc is too broken.


---

Comment by jpflori created at 2013-06-08 18:47:57

That could do the trick though I would prefer to have dedicated options like SAGE_INSTALL_WRAPPER and SAGE_USE_WRAPPER both on by default andindependent of SAGE_INSTALL_GCC.


---

Comment by vbraun created at 2013-06-08 19:05:17

Thats what I'm precisely trying to avoid, having millions of environment variables to configure everything under the sun is just crazyness. Its hard enough to remember whether its `SAGE_INSTALL_GCC` or `SAGE_GCC_INSTALL`. Also, whats the use case of installing gcc but not the wrapper, then we need further logic to prefix gcc if there is a wrapper and not prefix gcc if there is no wrapper. Which just means that it won't always work since nobody will test all combinations.


---

Comment by jpflori created at 2013-06-08 19:12:08

It's nice to be able to test some crazy combination and having the possibility to do so by setting one or two envvars rather than hacking into the code.

And SAGE_INSTALL_GCC will not treflect what it does anymore.

For the prefixed gcc issue, just prefix it all the time and if there is no wrapper installed then create symlinks.


---

Comment by vbraun created at 2013-06-08 19:39:26

Replying to [comment:49 jpflori]:
> It's nice to be able to test some crazy combination and having the possibility to do so by setting one or two envvars rather than hacking into the code.

I disagree, its a drain on the development process to try to support nonsensical combinations without any benefit. Some user will fall into the spike-filled traps and then complain (rightfully) why some combination of envionment variables causes everything to crash and burn.
 
> And SAGE_INSTALL_GCC will not treflect what it does anymore.

We should have called it `SAGE_INSTALL_GCC`. The compilerwrapper was also originally called gccwrapper until somebody on this ticket pointed out the stupidity of it.

> For the prefixed gcc issue, just prefix it all the time and if there is no wrapper installed then create symlinks.

Then, later, you install the compilerwrapper. Even later you disable the wrapper. Bang, your compiler is now gone. I'm sure this will be a crowd-pleaser.


---

Comment by jpflori created at 2013-06-08 19:55:01

Replying to [comment:50 vbraun]:
> Replying to [comment:49 jpflori]:
> > It's nice to be able to test some crazy combination and having the possibility to do so by setting one or two envvars rather than hacking into the code.
> 
> I disagree, its a drain on the development process to try to support nonsensical combinations without any benefit. Some user will fall into the spike-filled traps and then complain (rightfully) why some combination of envionment variables causes everything to crash and burn.
>  
> > And SAGE_INSTALL_GCC will not treflect what it does anymore.
> 
> We should have called it `SAGE_INSTALL_GCC`. The compilerwrapper was also originally called gccwrapper until somebody on this ticket pointed out the stupidity of it.
> 
> > For the prefixed gcc issue, just prefix it all the time and if there is no wrapper installed then create symlinks.
> 
> Then, later, you install the compilerwrapper. Even later you disable the wrapper. Bang, your compiler is now gone. I'm sure this will be a crowd-pleaser.
Isn't that "nonsensical", cf. [comment:38]?


---

Comment by leif created at 2013-06-08 20:10:58

Replying to [comment:38 vbraun]:
> If the wrapper not installed before you compile the first dynamically-linked binary then it is useless.

If / when GCC builds itself, it won't get used anyway (only during initial bootstrapping).


---

Comment by leif created at 2013-06-08 20:11:58

We certainly shouldn't use the same (and established) environment variable for different and unrelated purposes.


---

Comment by leif created at 2013-06-08 20:19:40

Replying to [comment:46 vbraun]:
> How about if `SAGE_INSTALL_GCC=no` then don't install the wrapper, otherwise do install it. In particular, unset => install compiler wrapper by default, and gcc only if host gcc is too broken.

One use case of the compiler wrapper is to work around (system!) compiler bugs, so unconditionally not installing it if `SAGE_INSTALL_GCC=no` doesn't make much sense, at least if it's used to prevent installing Sage's GCC (which is the current and intended meaning).


---

Comment by vbraun created at 2013-06-08 21:27:20

Its true that gcc won't build itself with the wrapper, but then we build gcc right at the beginning before we build any troublesome libraries. And the first stage doesn't need optimizations, to even moderately broken compilers should be fine.

We definitely should think about using a special case from an already existing environment variable to avoid creating too many obscure configuration options that we can never actually test. JP wants a setting so that he can play with potentially broken compilers, and setting `SAGE_INSTALL_GCC=no` is what you logically would want to set in this use case.

The basic fact is that only one program can be installed as `$SAGE_LOCAL/bin/gcc` So you don't have 4 independent choices of sage-gcc yes/no and compilerwrapper yes/no.


---

Comment by jpflori created at 2013-06-08 21:40:41

Replying to [comment:55 vbraun]:
> Its true that gcc won't build itself with the wrapper, but then we build gcc right at the beginning before we build any troublesome libraries. And the first stage doesn't need optimizations, to even moderately broken compilers should be fine.
You have to build the wrapper at the very beginning of the build process to be sure to avoid issues on Cygwin.
> 
> We definitely should think about using a special case from an already existing environment variable to avoid creating too many obscure configuration options that we can never actually test. JP wants a setting so that he can play with potentially broken compilers, and setting `SAGE_INSTALL_GCC=no` is what you logically would want to set in this use case.
> 
> The basic fact is that only one program can be installed as `$SAGE_LOCAL/bin/gcc` So you don't have 4 independent choices of sage-gcc yes/no and compilerwrapper yes/no.
>


---

Comment by vbraun created at 2013-06-08 22:12:21

Replying to [comment:56 jpflori]:
> You have to build the wrapper at the very beginning of the build process to be sure to avoid issues on Cygwin.

Agreed. What I'm trying to say is: Despite the compiler wrapper being installed first, gcc will build itself internally without wrapper. But that is fine since gcc knows what it is doing (and we haven't thrown any bricks in its way yet via LD_LIBRARY_PATH)


---

Comment by jpflori created at 2013-07-29 12:09:52

I've attached a patch to fix a little typo and take care of PATH as well, feel free to integrate it upstream.


---

Comment by jpflori created at 2013-07-29 12:10:12

PATH


---

Attachment

Done, added to repo & spkg in the ticket.


---

Comment by jpflori created at 2013-07-29 13:44:25

Thanks.

In fact we also need to patch the Sage repo to define SAGE_ORIG_PATH there IIRC.
Unfortunately I don't have access to the disk where I developped this part right now.
The patch should be up later today.


---

Attachment

Cygwin path patch


---

Comment by jpflori created at 2014-01-08 16:47:11

Finally added a needed patch for Cygwin which removes Sage stuff from PATH.


---

Comment by jpflori created at 2014-04-13 19:40:49

I've gitified the ticket without making it a standard package (basically, Volker's hg patch).
I think should definitely make it optional at least.

And I give positive review to what Volker done, except for maybe not making the package standard, at least now...
----
New commits:


---

Comment by git created at 2014-11-12 10:25:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-11-12 10:34:08

Volker: Any thoughts on this ticket?

I'll be tempted to positively review it as I've been using it quite often and would definitely need it if I use some of my time for the Cygwin's ports for the h2020 thing.


---

Comment by jpflori created at 2014-11-14 13:09:44

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2014-11-14 13:09:44

This still is useful for me and looks fine.
lgtm


---

Comment by vbraun created at 2014-11-14 13:20:10

I think its good to have it as an optional/experimental package, let's see if it turns out to be useful.

The SPKG.txt is incorrect in that the upstream repo is git now, but that is trivial.

I don't think its the final answer to our LD_LIBRARY_PATH / relocation woes, I'm working with the hashdist developers on a bullet-proof solution.


---

Comment by jpflori created at 2014-11-14 13:23:57

Replying to [comment:71 vbraun]:
> I think its good to have it as an optional/experimental package, let's see if it turns out to be useful.
> 
> The SPKG.txt is incorrect in that the upstream repo is git now, but that is trivial.
> 
Is it? I actually had a look to check if you updated the code but did not even notice it was not bitbucket anymore... or just ended up on the old bitbucket repo, who knows.

> I don't think its the final answer to our LD_LIBRARY_PATH / relocation woes, I'm working with the hashdist developers on a bullet-proof solution.
Sure, but at least it lets Sage build (quite) easily on platforms where PATH/LD_LIBRARY_PATH will always be a mess like Windows.


---

Comment by vbraun created at 2014-11-14 14:24:23

It is still on bitbucket, but bitbucket supports both hg and git nowadays...


---

Comment by vbraun created at 2014-11-14 21:01:41

Resolution: fixed
