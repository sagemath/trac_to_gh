# Issue 33765: Sirocco and projective curves

archive/issues_033765.json:
```json
{
    "body": "CC:  @enriqueartal\n\nLet `C`be a proyective plane curve with equation `F(x,y,z)=0` of degree `d`. The method `fundamental_group` computes the fundamental group of the complement. When the point `[0:1:0]` belongs to the curve it may produce wrong results. \n\nThe computation works as follows. Consider the affine curve `f(x,y):=F(x,y,1)=0` and compute its fundamental group via the projection `(x,y)->x`. In this group we have an ordered system of generators `t1,...,td` and to pass from the fundamental group of the complement of the affine curve to the fundamental group of the complement of the projective curve it is enough to add as relation the ordered product of the generators.\n\nIn order to apply it directly we need `[0:1:0]` outside the curve which is equivalent to have `f` to be of degree `d` in the variable `y` but up to now the method only checks if the maximal coefficient of `y` is a non-zero constant.\n\nThe following example shows the problem. It computes the fundamental group of a quintic which is known to be finite and non-abelian by Degtyarev.\n\n\n```\nsage: P.<x,y,z>=ProjectiveSpace(QQ,2)\nsage: f=z^2*y^3-z*(33*x*z+2*x^2+8*z^2)*y^2+(21*z^2+21*x*z-x^2)*(z^2+11*x*z-x^2)*y+(x-18*z)*(z^2+11*x*z-x^2)^2\nsage: C=Curve(f)\nsage: C.fundamental_group()\nFinitely presented group < x0 | x0^3 >\n```\n\n\nIf we make a change of coordinates to avoid this problem, everything is OK\n\n```\nsage: f1=f(z=z+y)\nsage: g1p=Curve(f1).fundamental_group()\nSingularity detected. Abort Sirocco\nsage: g1p.order()\n320\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34002\n\n",
    "created_at": "2022-06-16T12:54:59Z",
    "labels": [
        "algebraic geometry",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Sirocco and projective curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33765",
    "user": "@enriqueartal"
}
```
CC:  @enriqueartal

Let `C`be a proyective plane curve with equation `F(x,y,z)=0` of degree `d`. The method `fundamental_group` computes the fundamental group of the complement. When the point `[0:1:0]` belongs to the curve it may produce wrong results. 

The computation works as follows. Consider the affine curve `f(x,y):=F(x,y,1)=0` and compute its fundamental group via the projection `(x,y)->x`. In this group we have an ordered system of generators `t1,...,td` and to pass from the fundamental group of the complement of the affine curve to the fundamental group of the complement of the projective curve it is enough to add as relation the ordered product of the generators.

In order to apply it directly we need `[0:1:0]` outside the curve which is equivalent to have `f` to be of degree `d` in the variable `y` but up to now the method only checks if the maximal coefficient of `y` is a non-zero constant.

The following example shows the problem. It computes the fundamental group of a quintic which is known to be finite and non-abelian by Degtyarev.


```
sage: P.<x,y,z>=ProjectiveSpace(QQ,2)
sage: f=z^2*y^3-z*(33*x*z+2*x^2+8*z^2)*y^2+(21*z^2+21*x*z-x^2)*(z^2+11*x*z-x^2)*y+(x-18*z)*(z^2+11*x*z-x^2)^2
sage: C=Curve(f)
sage: C.fundamental_group()
Finitely presented group < x0 | x0^3 >
```


If we make a change of coordinates to avoid this problem, everything is OK

```
sage: f1=f(z=z+y)
sage: g1p=Curve(f1).fundamental_group()
Singularity detected. Abort Sirocco
sage: g1p.order()
320
```


Issue created by migration from https://trac.sagemath.org/ticket/34002





---

archive/issue_comments_480093.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2022-06-17T12:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480093",
    "user": "@miguelmarco"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_480094.json:
```json
{
    "body": "Set assignee to @miguelmarco.",
    "created_at": "2022-06-17T12:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480094",
    "user": "@miguelmarco"
}
```

Set assignee to @miguelmarco.



---

archive/issue_comments_480095.json:
```json
{
    "body": "This should fix it.\n----\nNew commits:",
    "created_at": "2022-06-17T13:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480095",
    "user": "@miguelmarco"
}
```

This should fix it.
----
New commits:



---

archive/issue_comments_480096.json:
```json
{
    "body": "It does",
    "created_at": "2022-06-18T14:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480096",
    "user": "@enriqueartal"
}
```

It does



---

archive/issue_comments_480097.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T07:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480097",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T14:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480098",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-02T07:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480099",
    "user": "@enriqueartal"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_480100.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-02T10:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480100",
    "user": "@enriqueartal"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_480101.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-08-04T22:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480101",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_480102.json:
```json
{
    "body": "Merge failure on top of:\n\nb66cf165f6 Trac #33836: Bug in Lie algebra's chevalley_eilenberg_complex method\n\n855db5865d Trac #32181: RealSet: Faster operations by scan-line (merging) techniques\n\n74eaa6fff7 Trac #34249: Fix documentation regarding number of edges of Turan graphs\n\ndf6ab59d6f Trac #34084: Fix bug with comparison to 1 in IndexedFreeModuleElement\n\ncad2347c46 Trac #34258: sage_build_cython: Remove normalization of -std=c++... flags\n\nc9fefb1b23 Trac #34244: Don't mark a polynomial doctest \"untested\"\n\nffe67f9e9a Trac #34240: With dot2tex installed, doctesting thematic_tutorials/algebraic_combinatorics/rsk.rst opens an image viewer\n\n58eb7cbc6a Trac #34226: Allow effective resistance method to work on graphs with multiple components\n\n6732163e15 Trac #34215: Removing remaining uses of is_CallableSymbolicExpression\n\n82b3038c13 Trac #34193: configure: Make display of package versions less confusing\n\n6b0c3ffa67 Trac #34175: `global_height` for polynomials fails when passed the zero polynomial\n\n2e34fbd740 Trac #34072: pycodestyle cleanup in src/sage/graphs/distances_all_pairs.pyx\n\n3b5db453d1 Trac #30876: sage_build_cython: Do not rely on CC environment variable being set\n\n4236744e73 Trac #34252: Revive furo\n\na752daa05d Trac #34248: Update plantri to 5.3\n\nf96606bd78 Trac #34246: Fix tests with scipy 1.9\n\n70acf303b5 Trac #34245: With plantri installed, a doctest creates a file in SAGE_ROOT\n\nfcc08c7d1e Trac #34229: use PARI's qfbredsl2() for binary quadratic forms\n\n7256777154 Trac #34181: Clean pkgs/sagemath-standard/build/scripts-*\n\n9c7e7bb5e3 Trac #34150: update cvxopt to 1.3\n\na34202cea2 Trac #34231: addition in InfinityRing gives wrong result\n\ne87679944b Trac #34213: sagelib spkg-install: Unset but do not poison SAGE_LOCAL\n\n2880f9c45e Trac #22349: Deprecate sorting of Graph vertices and edges by default\n\ncd1e2b13af Updated [SageMath](SageMath) version to 9.7.beta7\n\n\n\nreviewer 'enriqueartal' does not look right",
    "created_at": "2022-08-04T22:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480102",
    "user": "@vbraun"
}
```

Merge failure on top of:

b66cf165f6 Trac #33836: Bug in Lie algebra's chevalley_eilenberg_complex method

855db5865d Trac #32181: RealSet: Faster operations by scan-line (merging) techniques

74eaa6fff7 Trac #34249: Fix documentation regarding number of edges of Turan graphs

df6ab59d6f Trac #34084: Fix bug with comparison to 1 in IndexedFreeModuleElement

cad2347c46 Trac #34258: sage_build_cython: Remove normalization of -std=c++... flags

c9fefb1b23 Trac #34244: Don't mark a polynomial doctest "untested"

ffe67f9e9a Trac #34240: With dot2tex installed, doctesting thematic_tutorials/algebraic_combinatorics/rsk.rst opens an image viewer

58eb7cbc6a Trac #34226: Allow effective resistance method to work on graphs with multiple components

6732163e15 Trac #34215: Removing remaining uses of is_CallableSymbolicExpression

82b3038c13 Trac #34193: configure: Make display of package versions less confusing

6b0c3ffa67 Trac #34175: `global_height` for polynomials fails when passed the zero polynomial

2e34fbd740 Trac #34072: pycodestyle cleanup in src/sage/graphs/distances_all_pairs.pyx

3b5db453d1 Trac #30876: sage_build_cython: Do not rely on CC environment variable being set

4236744e73 Trac #34252: Revive furo

a752daa05d Trac #34248: Update plantri to 5.3

f96606bd78 Trac #34246: Fix tests with scipy 1.9

70acf303b5 Trac #34245: With plantri installed, a doctest creates a file in SAGE_ROOT

fcc08c7d1e Trac #34229: use PARI's qfbredsl2() for binary quadratic forms

7256777154 Trac #34181: Clean pkgs/sagemath-standard/build/scripts-*

9c7e7bb5e3 Trac #34150: update cvxopt to 1.3

a34202cea2 Trac #34231: addition in InfinityRing gives wrong result

e87679944b Trac #34213: sagelib spkg-install: Unset but do not poison SAGE_LOCAL

2880f9c45e Trac #22349: Deprecate sorting of Graph vertices and edges by default

cd1e2b13af Updated [SageMath](SageMath) version to 9.7.beta7



reviewer 'enriqueartal' does not look right



---

archive/issue_comments_480103.json:
```json
{
    "body": "The reviewer name should be your actual name, not trac account name.",
    "created_at": "2022-08-04T22:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480103",
    "user": "@vbraun"
}
```

The reviewer name should be your actual name, not trac account name.



---

archive/issue_comments_480104.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-08-04T22:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480104",
    "user": "@vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_480105.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-07T22:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33765#issuecomment-480105",
    "user": "@vbraun"
}
```

Resolution: fixed
