# Issue 33765: Sirocco and projective curves

Issue created by migration from https://trac.sagemath.org/ticket/34002

Original creator: enriqueartal

Original creation time: 2022-06-16 12:54:59

CC:  enriqueartal

Let `C`be a proyective plane curve with equation `F(x,y,z)=0` of degree `d`. The method `fundamental_group` computes the fundamental group of the complement. When the point `[0:1:0]` belongs to the curve it may produce wrong results. 

The computation works as follows. Consider the affine curve `f(x,y):=F(x,y,1)=0` and compute its fundamental group via the projection `(x,y)->x`. In this group we have an ordered system of generators `t1,...,td` and to pass from the fundamental group of the complement of the affine curve to the fundamental group of the complement of the projective curve it is enough to add as relation the ordered product of the generators.

In order to apply it directly we need `[0:1:0]` outside the curve which is equivalent to have `f` to be of degree `d` in the variable `y` but up to now the method only checks if the maximal coefficient of `y` is a non-zero constant.

The following example shows the problem. It computes the fundamental group of a quintic which is known to be finite and non-abelian by Degtyarev.


```
sage: P.<x,y,z>=ProjectiveSpace(QQ,2)
sage: f=z^2*y^3-z*(33*x*z+2*x^2+8*z^2)*y^2+(21*z^2+21*x*z-x^2)*(z^2+11*x*z-x^2)*y+(x-18*z)*(z^2+11*x*z-x^2)^2
sage: C=Curve(f)
sage: C.fundamental_group()
Finitely presented group < x0 | x0^3 >
```


If we make a change of coordinates to avoid this problem, everything is OK

```
sage: f1=f(z=z+y)
sage: g1p=Curve(f1).fundamental_group()
Singularity detected. Abort Sirocco
sage: g1p.order()
320
```



---

Comment by mmarco created at 2022-06-17 12:50:40

Changing type from PLEASE CHANGE to defect.


---

Comment by mmarco created at 2022-06-17 12:56:38

Set assignee to mmarco.


---

Comment by mmarco created at 2022-06-17 13:08:27

This should fix it.
----
New commits:


---

Comment by enriqueartal created at 2022-06-18 14:05:56

It does


---

Comment by git created at 2022-06-27 07:32:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-06-27 14:39:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by enriqueartal created at 2022-08-02 07:03:05

Changing status from new to needs_review.


---

Comment by enriqueartal created at 2022-08-02 10:25:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-08-04 22:48:14

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2022-08-04 22:48:14

Merge failure on top of:

b66cf165f6 Trac #33836: Bug in Lie algebra's chevalley_eilenberg_complex method

855db5865d Trac #32181: RealSet: Faster operations by scan-line (merging) techniques

74eaa6fff7 Trac #34249: Fix documentation regarding number of edges of Turan graphs

df6ab59d6f Trac #34084: Fix bug with comparison to 1 in IndexedFreeModuleElement

cad2347c46 Trac #34258: sage_build_cython: Remove normalization of -std=c++... flags

c9fefb1b23 Trac #34244: Don't mark a polynomial doctest "untested"

ffe67f9e9a Trac #34240: With dot2tex installed, doctesting thematic_tutorials/algebraic_combinatorics/rsk.rst opens an image viewer

58eb7cbc6a Trac #34226: Allow effective resistance method to work on graphs with multiple components

6732163e15 Trac #34215: Removing remaining uses of is_CallableSymbolicExpression

82b3038c13 Trac #34193: configure: Make display of package versions less confusing

6b0c3ffa67 Trac #34175: `global_height` for polynomials fails when passed the zero polynomial

2e34fbd740 Trac #34072: pycodestyle cleanup in src/sage/graphs/distances_all_pairs.pyx

3b5db453d1 Trac #30876: sage_build_cython: Do not rely on CC environment variable being set

4236744e73 Trac #34252: Revive furo

a752daa05d Trac #34248: Update plantri to 5.3

f96606bd78 Trac #34246: Fix tests with scipy 1.9

70acf303b5 Trac #34245: With plantri installed, a doctest creates a file in SAGE_ROOT

fcc08c7d1e Trac #34229: use PARI's qfbredsl2() for binary quadratic forms

7256777154 Trac #34181: Clean pkgs/sagemath-standard/build/scripts-*

9c7e7bb5e3 Trac #34150: update cvxopt to 1.3

a34202cea2 Trac #34231: addition in InfinityRing gives wrong result

e87679944b Trac #34213: sagelib spkg-install: Unset but do not poison SAGE_LOCAL

2880f9c45e Trac #22349: Deprecate sorting of Graph vertices and edges by default

cd1e2b13af Updated [SageMath](SageMath) version to 9.7.beta7



reviewer 'enriqueartal' does not look right


---

Comment by vbraun created at 2022-08-04 22:50:51

The reviewer name should be your actual name, not trac account name.


---

Comment by vbraun created at 2022-08-04 22:51:37

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2022-08-07 22:56:36

Resolution: fixed
