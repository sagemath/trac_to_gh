# Issue 31990: Deprecate methods arguments (alias: args), number_of_arguments, _fast_callable_ for non-callable symbolic expressions

archive/issues_031990.json:
```json
{
    "body": "CC:  @orlitzky @egourgoulhon\n\nFollow up from #14270.\n\nWe deprecate the use of methods `arguments` (alias: `args`) and `number_of_arguments` on non-callable symbolic expressions, as well as `_fast_callable_`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32227\n\n",
    "created_at": "2021-07-17T22:45:14Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Deprecate methods arguments (alias: args), number_of_arguments, _fast_callable_ for non-callable symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31990",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @orlitzky @egourgoulhon

Follow up from #14270.

We deprecate the use of methods `arguments` (alias: `args`) and `number_of_arguments` on non-callable symbolic expressions, as well as `_fast_callable_`.

Issue created by migration from https://trac.sagemath.org/ticket/32227





---

archive/issue_comments_456494.json:
```json
{
    "body": "This will need adjustments in the plotting code, which seems to use `arguments` \n\n---\nLast 10 new commits:",
    "created_at": "2021-07-17T22:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456494",
    "user": "https://github.com/mkoeppe"
}
```

This will need adjustments in the plotting code, which seems to use `arguments` 

---
Last 10 new commits:



---

archive/issue_events_085375.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85375"
}
```



---

archive/issue_comments_456495.json:
```json
{
    "body": "I just noticed that the docstring for `__len__` in `expression.pyx` says it returns the **number of arguments** of the expression, but it really should say **number of operands** since that is what is actually returned. I guess it would make sense to correct the docstring on this ticket.",
    "created_at": "2021-07-21T01:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456495",
    "user": "https://github.com/saliola"
}
```

I just noticed that the docstring for `__len__` in `expression.pyx` says it returns the **number of arguments** of the expression, but it really should say **number of operands** since that is what is actually returned. I guess it would make sense to correct the docstring on this ticket.



---

archive/issue_comments_456496.json:
```json
{
    "body": "Let's make this change in #29738, which deprecates the `__len__` method",
    "created_at": "2021-07-21T01:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456496",
    "user": "https://github.com/mkoeppe"
}
```

Let's make this change in #29738, which deprecates the `__len__` method



---

archive/issue_comments_456497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-15T02:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_456498.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-15T03:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456498",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_456499.json:
```json
{
    "body": "Setting to `needs_review` only to run the patchbot",
    "created_at": "2021-08-15T03:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456499",
    "user": "https://github.com/mkoeppe"
}
```

Setting to `needs_review` only to run the patchbot



---

archive/issue_comments_456500.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-09-06T05:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456500",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_085376.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85376"
}
```



---

archive/issue_events_085377.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85377"
}
```



---

archive/issue_comments_456501.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-03-08T20:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_456502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-08T20:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456502",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456503.json:
```json
{
    "body": "rebased, let's see what the patchbot says",
    "created_at": "2022-03-08T20:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456503",
    "user": "https://github.com/mkoeppe"
}
```

rebased, let's see what the patchbot says



---

archive/issue_comments_456504.json:
```json
{
    "body": "These deprecation warnings are triggered by examples like this:\n\n```\nFile \"src/sage/plot/animate.py\", line 34, in sage.plot.animate\nFailed example:\n    sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1) for c in sxrange(0,1,.2)]\nFile \"src/sage/plot/graphics.py\", line 1842, in sage.plot.graphics.Graphics.show\nFailed example:\n    p = plot_vector_field(f.gradient(), (u,-2,2), (v,-2,2))\n```\nand\n\n```\nFile \"src/sage/symbolic/relation.py\", line 183, in sage.symbolic.relation\nFailed example:\n    (x == sin(x)).find_root(-2,2)\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py\", line 59, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest\nFailed example:\n    numerical_integral(cos(log(cos(x))), 0, pi/4)  # rel tol 2e-11\n```\nand\n\n```\nFile \"src/sage/plot/plot3d/plot3d.py\", line 389, in sage.plot.plot3d.plot3d._find_arguments_for_callable\nFailed example:\n    _find_arguments_for_callable(a+b)\n```\nand\n\n```\nFile \"src/sage/modules/free_module_element.pyx\", line 4459, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__\nFailed example:\n    g = f.gradient()\n```",
    "created_at": "2022-03-09T05:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456504",
    "user": "https://github.com/mkoeppe"
}
```

These deprecation warnings are triggered by examples like this:

```
File "src/sage/plot/animate.py", line 34, in sage.plot.animate
Failed example:
    sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1) for c in sxrange(0,1,.2)]
File "src/sage/plot/graphics.py", line 1842, in sage.plot.graphics.Graphics.show
Failed example:
    p = plot_vector_field(f.gradient(), (u,-2,2), (v,-2,2))
```
and

```
File "src/sage/symbolic/relation.py", line 183, in sage.symbolic.relation
Failed example:
    (x == sin(x)).find_root(-2,2)
File "src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py", line 59, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest
Failed example:
    numerical_integral(cos(log(cos(x))), 0, pi/4)  # rel tol 2e-11
```
and

```
File "src/sage/plot/plot3d/plot3d.py", line 389, in sage.plot.plot3d.plot3d._find_arguments_for_callable
Failed example:
    _find_arguments_for_callable(a+b)
```
and

```
File "src/sage/modules/free_module_element.pyx", line 4459, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__
Failed example:
    g = f.gradient()
```



---

archive/issue_comments_456505.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-09T05:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456505",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456506.json:
```json
{
    "body": "I think most of these uses of `arguments` in the code would be best rewritten using a new method that converts a symbolic expression with at most 1 variable to a callable.",
    "created_at": "2022-03-09T06:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-456506",
    "user": "https://github.com/mkoeppe"
}
```

I think most of these uses of `arguments` in the code would be best rewritten using a new method that converts a symbolic expression with at most 1 variable to a callable.



---

archive/issue_events_085378.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85378"
}
```



---

archive/issue_events_085379.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85379"
}
```



---

archive/issue_events_085380.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85380"
}
```



---

archive/issue_events_085381.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31990#event-85381"
}
```
