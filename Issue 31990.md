# Issue 31990: Deprecate methods arguments (alias: args), number_of_arguments, _fast_callable_ for non-callable symbolic expressions

archive/issues_031990.json:
```json
{
    "body": "CC:  mjo egourgoulhon\n\nFollow up from #14270.\n\nWe deprecate the use of methods `arguments` (alias: `args`) and `number_of_arguments` on non-callable symbolic expressions, as well as `_fast_callable_`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32227\n\n",
    "created_at": "2021-07-17T22:45:14Z",
    "labels": [
        "symbolics",
        "major",
        "enhancement"
    ],
    "title": "Deprecate methods arguments (alias: args), number_of_arguments, _fast_callable_ for non-callable symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31990",
    "user": "mkoeppe"
}
```
CC:  mjo egourgoulhon

Follow up from #14270.

We deprecate the use of methods `arguments` (alias: `args`) and `number_of_arguments` on non-callable symbolic expressions, as well as `_fast_callable_`.

Issue created by migration from https://trac.sagemath.org/ticket/32227





---

archive/issue_comments_457045.json:
```json
{
    "body": "This will need adjustments in the plotting code, which seems to use `arguments` \n----\nLast 10 new commits:",
    "created_at": "2021-07-17T22:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457045",
    "user": "mkoeppe"
}
```

This will need adjustments in the plotting code, which seems to use `arguments` 
----
Last 10 new commits:



---

archive/issue_comments_457046.json:
```json
{
    "body": "I just noticed that the docstring for `__len__` in `expression.pyx` says it returns the **number of arguments** of the expression, but it really should say **number of operands** since that is what is actually returned. I guess it would make sense to correct the docstring on this ticket.",
    "created_at": "2021-07-21T01:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457046",
    "user": "saliola"
}
```

I just noticed that the docstring for `__len__` in `expression.pyx` says it returns the **number of arguments** of the expression, but it really should say **number of operands** since that is what is actually returned. I guess it would make sense to correct the docstring on this ticket.



---

archive/issue_comments_457047.json:
```json
{
    "body": "Let's make this change in #29738, which deprecates the `__len__` method",
    "created_at": "2021-07-21T01:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457047",
    "user": "mkoeppe"
}
```

Let's make this change in #29738, which deprecates the `__len__` method



---

archive/issue_comments_457048.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-15T02:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457048",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_457049.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-15T03:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457049",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_457050.json:
```json
{
    "body": "Setting to `needs_review` only to run the patchbot",
    "created_at": "2021-08-15T03:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457050",
    "user": "mkoeppe"
}
```

Setting to `needs_review` only to run the patchbot



---

archive/issue_comments_457051.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-09-06T05:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457051",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_457052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-03-08T20:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_457053.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-08T20:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457053",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_457054.json:
```json
{
    "body": "rebased, let's see what the patchbot says",
    "created_at": "2022-03-08T20:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457054",
    "user": "mkoeppe"
}
```

rebased, let's see what the patchbot says



---

archive/issue_comments_457055.json:
```json
{
    "body": "These deprecation warnings are triggered by examples like this:\n\n```\nFile \"src/sage/plot/animate.py\", line 34, in sage.plot.animate\nFailed example:\n    sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1) for c in sxrange(0,1,.2)]\nFile \"src/sage/plot/graphics.py\", line 1842, in sage.plot.graphics.Graphics.show\nFailed example:\n    p = plot_vector_field(f.gradient(), (u,-2,2), (v,-2,2))\n```\n\nand\n\n```\nFile \"src/sage/symbolic/relation.py\", line 183, in sage.symbolic.relation\nFailed example:\n    (x == sin(x)).find_root(-2,2)\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py\", line 59, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest\nFailed example:\n    numerical_integral(cos(log(cos(x))), 0, pi/4)  # rel tol 2e-11\n```\n\nand\n\n```\nFile \"src/sage/plot/plot3d/plot3d.py\", line 389, in sage.plot.plot3d.plot3d._find_arguments_for_callable\nFailed example:\n    _find_arguments_for_callable(a+b)\n```\n\nand\n\n```\nFile \"src/sage/modules/free_module_element.pyx\", line 4459, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__\nFailed example:\n    g = f.gradient()\n```\n",
    "created_at": "2022-03-09T05:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457055",
    "user": "mkoeppe"
}
```

These deprecation warnings are triggered by examples like this:

```
File "src/sage/plot/animate.py", line 34, in sage.plot.animate
Failed example:
    sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1) for c in sxrange(0,1,.2)]
File "src/sage/plot/graphics.py", line 1842, in sage.plot.graphics.Graphics.show
Failed example:
    p = plot_vector_field(f.gradient(), (u,-2,2), (v,-2,2))
```

and

```
File "src/sage/symbolic/relation.py", line 183, in sage.symbolic.relation
Failed example:
    (x == sin(x)).find_root(-2,2)
File "src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py", line 59, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest
Failed example:
    numerical_integral(cos(log(cos(x))), 0, pi/4)  # rel tol 2e-11
```

and

```
File "src/sage/plot/plot3d/plot3d.py", line 389, in sage.plot.plot3d.plot3d._find_arguments_for_callable
Failed example:
    _find_arguments_for_callable(a+b)
```

and

```
File "src/sage/modules/free_module_element.pyx", line 4459, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__
Failed example:
    g = f.gradient()
```




---

archive/issue_comments_457056.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-09T05:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457056",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_457057.json:
```json
{
    "body": "I think most of these uses of `arguments` in the code would be best rewritten using a new method that converts a symbolic expression with at most 1 variable to a callable.",
    "created_at": "2022-03-09T06:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31990#issuecomment-457057",
    "user": "mkoeppe"
}
```

I think most of these uses of `arguments` in the code would be best rewritten using a new method that converts a symbolic expression with at most 1 variable to a callable.
