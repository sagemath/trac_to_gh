# Issue 15323: Add methods to rigged configurations

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2013-12-21 06:51:25

Assignee: sage-combinat

CC:  sage-combinat aschilling

Keywords: rigged configurations

Adds some extra methods to rigged configurations: the action of the left column splitting and the basic operation in the bijection with tensor product of KR tableaux.


---

Comment by git created at 2013-12-21 06:52:10

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by tscrim created at 2013-12-21 06:52:43

Changing status from new to needs_review.


---

Comment by git created at 2013-12-22 20:40:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-03-14 15:01:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-03-18 15:48:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-03-21 00:21:18

Thanks in advance for doing the review.


---

Comment by aschilling created at 2014-03-21 04:19:10

Hi Travis,

Here are further comments:

```
+ If we are construction a rigged configuration from a rigged configuration
+ (say of another type) and we don't want to recompute the vacancy numbers,
+ we can use the ``use_vacancy_numbers`` to avoid the recomputation.
```

This is not a sentence. Perhaps you want "If we are constructing"?

Also, it would be great to add left_split as a method to KirillovReshetikhinTableaux and possibly also the right_split method! This can be just done by using the bijection to rigged configurations, but it would be very handy to have these methods directly on KirillovReshetikhinTableaux as well.

Thanks,

Anne


---

Comment by aschilling created at 2014-03-21 04:19:24

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-03-23 19:24:17

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by tscrim created at 2014-03-23 19:31:41

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-03-23 19:31:41

Here's the major changes:

- Based this off #15882.

- Added the Luzstig involution to (tensor products of) KR tableaux, KR crystals, and rigged configurations.

- Added left/right splitting maps to (tensor products of) KR tableaux and rigged configurations. (The right splitting map is non-trivial on KR tableaux; look in type D<sub>4</sub><sup>(1)</sup> at the B<sup>2,2</sup> module generators.)

- Moved `opposition_automorphism()` from the crystals category into Cartan types.

- Fixed the typo noted above.

Best,

Travis


---

Comment by git created at 2014-03-24 14:56:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-09 02:05:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-14 15:00:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-14 15:10:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2014-05-15 13:14:06

Based on 6.2beta1 it fails:

```
sage -t --long src/sage/combinat/rigged_configurations/rigged_configurations.py  # 1 doctest failed
```



---

Comment by rws created at 2014-05-15 13:14:06

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-05-15 14:53:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-05-15 14:53:42

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-06-11 01:26:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2014-07-19 22:03:08

Hi Travis,

Here are some more comments:

* The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!

* Please add the map `\theta` to rigged configuration and compare to lusztig_involution.

* Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:


```
sage: RC = RiggedConfigurations(['D', 4, 1], [This is the Trac macro *2, 1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#2, 1-macro))
sage: from sage.combinat.rigged_configurations.bij_type_D import RCToKRTBijectionTypeD
sage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run()
[[2], [-3]]

sage: RCToKRTBijectionTypeD(RC(partition_list=[[1],[1],[1],[1]])).run(build_graph=True)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-10-1c82ae944c4d> in <module>()
----> 1 RCToKRTBijectionTypeD(RC(partition_list=[[Integer(1)],[Integer(1)],[Integer(1)],[Integer(1)]])).run(build_graph=True)

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/bij_type_D.pyc in run(self, verbose, build_graph)
    513 
    514                     if build_graph:
--> 515                         y = self.rigged_con.parent()(*[x._clone() for x in self.cur_partitions])
    516                         self._graph.append([self._graph[-1][1], (y, len(self._graph)), letters(b)])
    517 

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8924)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4637)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (sage/structure/coerce_maps.c:4501)()

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configurations.pyc in _element_constructor_(self, *lst, **options)
    717             lst = lst[0]
    718 
--> 719         return self.element_class(self, list(lst), **options)
    720 
    721     def _calc_vacancy_number(self, partitions, a, i, **options):

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in __init__(self, parent, rigged_partitions, **options)
    289             nu[-1] = RiggedPartitionTypeB(nu[-1])
    290 
--> 291         ClonableArray.__init__(self, parent, nu)
    292 
    293     def _repr_(self):

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.__init__ (sage/structure/list_clone.c:3758)()

/Applications/sage/local/lib/python2.7/site-packages/sage/structure/list_clone.so in sage.structure.list_clone.ClonableArray.check (sage/structure/list_clone.c:5758)()

/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/rigged_configurations/rigged_configuration_element.pyc in check(self)
    492             for i, vac_num in enumerate(partition.vacancy_numbers):
    493                 if vac_num < partition.rigging[i]:
--> 494                     raise ValueError("rigging can be at most the vacancy number")
    495 
    496     def to_tensor_product_of_kirillov_reshetikhin_tableaux(self, display_steps=False, build_graph=False):

ValueError: rigging can be at most the vacancy number
}}} 

Anne


---

Comment by git created at 2014-07-20 17:47:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-20 17:53:06

Replying to [comment:22 aschilling]:
> * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!

I couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').

> * Please add the map `\theta` to rigged configuration and compare to lusztig_involution.

Added under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?

> * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:

This was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.


---

Comment by aschilling created at 2014-07-21 15:15:23

Replying to [comment:24 tscrim]:
> Replying to [comment:22 aschilling]:
> > * The documentation of right_split has a ` missing. Please run the documentation to see that it actually compiles!
> 
> I couldn't find this and the documentation built without an issue and looks okay to me (although there was a missing 'u').

There is a ` missing in

```
+ Let `\ast` denote the :meth:`Lusztig involution<lusztig_involution>`,
+ and `\mathrm{ls}` as the :meth:`left splitting map<left_split>`.
+ The right splitting map is defined as
+ \mathrm{rs} := \ast \circ \mathrm{ls} \circ \ast`.
```


> > * Please add the map `\theta` to rigged configuration and compare to lusztig_involution.
> 
> Added under the name `complement`. In general, it will be different than `lusztig_involution`, which fixes each classical component, whereas `\theta` fixes the classical structure but permutes the classical components. Or did you mean you wanted me to add a doctest showing this?

Under `\bar \Phi` the map `\star` (which I guess is what you call lusztig_involution) intertwines with `\theta`. It would be good to add a check like that.
 
> > * Please add tests and more explanations what `build_graph` does. Explain which graph it is computing. Also the following fails:
> 
> This was due to before, the element constructor always preserved the vacancy numbers and now it recomputes it unless explicitly stated. Fixed with added tests. I expanded the documentation in `to_tensor_..._tableaux()` as well.

Even though it is stated in the documentation, that `build_graph` is an optional 
parameter, it does not seem to take this input:

```
sage: rc = RC(partition_list=[[1],[1],[1],[1]])
sage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-702cb808a701> in <module>()
----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)

TypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'
```

What is the difference between `build_graph` and `display_steps`?

Anne


---

Comment by git created at 2014-07-21 16:45:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-21 16:56:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-21 16:57:48

Replying to [comment:25 aschilling]:
> There is a ` missing in
> ...

Ah, I forgot about the right split for KR tableaux. :P Fixed.

> Under `\bar \Phi` the map `\star` (which I guess is what you call lusztig_involution) intertwines with `\theta`. It would be good to add a check like that.

I've added a doctest.

> Even though it is stated in the documentation, that `build_graph` is an optional 
> parameter, it does not seem to take this input:
> {{{
> sage: rc = RC(partition_list=[[1],[1],[1],[1]])
> sage: rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-8-702cb808a701> in <module>()
> ----> 1 rc.to_tensor_product_of_kirillov_reshetikhin_crystals(build_graph=True)
> 
> TypeError: to_tensor_product_of_kirillov_reshetikhin_crystals() got an unexpected keyword argument 'build_graph'
> }}}

This is because this was not a parameter in `to_tensor_product_of_kirillov_reshetikhin_crystals`, but in `*_tableaux`. I've also added the parameter (and doc/test) to the 'to TP of KR crystals' methods.

> What is the difference between `build_graph` and `display_steps`?

The first one constructs and returns the graph, the latter outputs each step to the terminal. I've changed `output` to `print` to avoid some ambiguity.


---

Comment by aschilling created at 2014-07-22 04:35:44

Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.


---

Comment by tscrim created at 2014-07-22 18:55:54

Replying to [comment:29 aschilling]:
> Why is the right_split that you implemented the correct map? I thought that rs = * ls * using the * map.

`right_split` is implemented as `* ls *` (where `*` is the Lusztig involution) for both rigged configurations and KR tableaux.


---

Comment by aschilling created at 2014-07-23 01:08:16

With your current code

```
sage: RC = RiggedConfigurations(['D', 4, 1], [[2,2],[2, 2]])
sage: all((rc.right_split()).to_tensor_product_of_kirillov_reshetikhin_tableaux() == (rc.to_tensor_product_of_kirillov_reshetikhin_tableaux()).right_split() for rc in RC)
False
```

I think you need to use complement in the definition the RC side. Also, it might be better to rename `complement` to `complement_rigging` for a more descriptive name.


---

Comment by git created at 2014-07-23 02:19:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-23 02:55:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2014-07-23 21:30:10

Hi Travis,

Thanks for the changes. I get the following failure when trying to play with the code

```
sage: KRT = crystals.TensorProductOfKirillovReshetikhinTableaux(['D',4,1], [[2,2], [1,2]])
sage: all(b.to_rigged_configuration().lusztig_involution() == b.lusztig_involution().to_rigged_configuration() for b in KRT)
False
```


Anne


---

Comment by git created at 2014-07-26 15:40:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-26 15:41:18

Hey Anne,

I've removed the `lusztig_involution()` and `right_box()` methods for rigged configurations as per our discussion.


---

Comment by aschilling created at 2014-07-27 01:41:00

Changing status from needs_review to positive_review.


---

Comment by aschilling created at 2014-07-27 01:41:00

Ok, looks good now!

Anne


---

Comment by vbraun created at 2014-07-27 04:41:18

Resolution: fixed
