# Issue 29836: Laurent series ring constructor crashes on negative exponents

Issue created by migration from https://trac.sagemath.org/ticket/30073

Original creator: kedlaya

Original creation time: 2020-07-05 19:09:01

Keywords: Laurent series

This works:

```
sage: P.<x> = LaurentPolynomialRing(QQ)
sage: P({-3: 1})
x^-3
```

whereas this segfaults:

```
sage: P.<x> = LaurentSeriesRing(QQ)
sage: P({-3: 1})
...
```





---

Comment by chapoton created at 2020-07-05 20:03:15

Triggered by

```
sage: P.polynomial_ring()({-3: 1})
```

in the `_element_constructor_`


---

Comment by kedlaya created at 2020-08-14 18:28:43

I dealt with this by adding a special case to the element constructor to catch a `dict` input.
----
New commits:


---

Comment by kedlaya created at 2020-08-14 18:28:43

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2020-08-16 12:20:42

This fix looks good to me. The only thing I would change is to remove one of the doctests, as the current branch adds the exact same test twice in different places.


---

Comment by git created at 2020-08-16 22:08:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kedlaya created at 2020-08-16 22:08:19

Duplicate removed.


---

Comment by @mwageringel created at 2020-08-16 22:11:16

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2020-08-16 22:11:16

Thank you.


---

Comment by vbraun created at 2020-08-20 22:23:21

Resolution: fixed
