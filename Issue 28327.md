# Issue 28327: Tensor Fields: Consistent Naming

Issue created by migration from https://trac.sagemath.org/ticket/28564

Original creator: @DeRhamSource

Original creation time: 2019-10-06 13:25:57

CC:  tscrim egourgoulhon




---

Comment by @DeRhamSource created at 2019-10-06 14:47:57

Changing component from PLEASE CHANGE to geometry.


---

Comment by @DeRhamSource created at 2019-10-06 14:47:57

Changing type from PLEASE CHANGE to enhancement.


---

Comment by @DeRhamSource created at 2019-10-06 14:47:57

Changing keywords from "" to "manifolds, tensor fields, scalar fields".


---

Comment by git created at 2019-10-06 14:49:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-10-06 14:50:35

Changing status from new to needs_review.


---

Comment by git created at 2019-10-07 19:54:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-10-07 19:55:59

Actually, what do you prefer? Should copies apply the names from the original or not?

I think, at least it must be consistent...


---

Comment by @DeRhamSource created at 2019-10-07 19:55:59

Changing status from needs_review to needs_info.


---

Comment by egourgoulhon created at 2019-10-23 10:12:18

Replying to [comment:6 gh-DeRhamSource]:
> Actually, what do you prefer? Should copies apply the names from the original or not?
> 

I don't have a strong opinion on that. Travis?


---

Comment by tscrim created at 2019-10-24 22:51:22

Replying to [comment:7 egourgoulhon]:
> Replying to [comment:6 gh-DeRhamSource]:
> > Actually, what do you prefer? Should copies apply the names from the original or not?
> > 
> 
> I don't have a strong opinion on that. Travis?
> 

I might say no just because copies are meant to be modified, so they should have different names. However, like Eric, this is not a strong opinion. Actually, is there a mechanism to change the name?


---

Comment by egourgoulhon created at 2019-10-25 08:13:54

Replying to [comment:8 tscrim]:
> Replying to [comment:7 egourgoulhon]:
> 
> I might say no just because copies are meant to be modified, so they should have different names. However, like Eric, this is not a strong opinion. 

Thanks for your answer. 

>Actually, is there a mechanism to change the name?

Yes there is the method `set_name()`. One could also pass the (possible) new name as an argument to `copy()`. There are a few examples (2 actually) of `copy()` taking some arguments in Sage library.


---

Comment by tscrim created at 2019-10-25 22:43:44

Replying to [comment:9 egourgoulhon]:
> Replying to [comment:8 tscrim]:
> >Actually, is there a mechanism to change the name?
> 
> Yes there is the method `set_name()`. One could also pass the (possible) new name as an argument to `copy()`. There are a few examples (2 actually) of `copy()` taking some arguments in Sage library. 

Hmm...in that case I probably would say to not copy the name (with a `.. WARNING::` (perhaps `.. NOTE::`) block about that) and have `copy()` take an optional argument for the (latex) name.


---

Comment by git created at 2019-10-27 14:28:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-10-27 14:36:51

That's strange. I cannot observe merge conflicts. What's the matter?


---

Comment by egourgoulhon created at 2019-10-27 14:38:29

Replying to [comment:12 gh-DeRhamSource]:
> That's strange. I cannot observe merge conflicts. What's the matter?
It's because your develop branch is still 9.0.beta2 (this is what I see from the commit e4470b5). You should update to 9.0.beta3.


---

Comment by git created at 2019-10-27 14:48:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-10-27 14:49:04

That should be it.


---

Comment by @DeRhamSource created at 2019-10-27 14:49:04

Changing status from needs_info to needs_review.


---

Comment by egourgoulhon created at 2019-10-29 10:56:14

As revealed by the patchbot, there is one failed doctest:

```
sage -t --long src/sage/manifolds/differentiable/tensorfield.py
**********************************************************************
File "src/sage/manifolds/differentiable/tensorfield.py", line 260, in sage.manifolds.differentiable.tensorfield.TensorField
Failed example:
    s = f*t; s  # long time
Expected:
    Tensor field of type (0,2) on the 2-dimensional differentiable
     manifold S^2
Got:
    Tensor field f*t of type (0,2) on the 2-dimensional differentiable manifold S^2
```



---

Comment by egourgoulhon created at 2019-10-29 10:56:14

Changing status from needs_review to needs_work.


---

Comment by egourgoulhon created at 2019-10-29 11:12:29

Another point: the introduction of the treatment of the names in `FreeModuleTensor._rmul_()` is a valuable enhancement, thanks. However, I wonder about the `\cdot` in the LaTeX output: `_rmul_()` deals with the left multiplication of a module element by an element of the base ring and in most textbooks, this is denoted without any multiplication symbol, i.e. as `\lambda x`, where `\lambda` is the ring element and `x` is the module element. This is certainly true in the two textbooks that we quote regarding free modules: 
- R. Godement : *Algebra* [God1968]_ 
- S. Lang : *Algebra* [Lan2002]_
Granted: [Wikipedia article](https://en.wikipedia.org/wiki/Module_(mathematics)) uses the dot...


---

Comment by git created at 2019-10-29 13:44:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-10-29 13:50:07

Mhm. I partially agree with you. In practice, the notation is certainly inconvenient and everything is clear by choosing correct letters, but in this case I guess everything has to be rigorous. The `\cdot` makes unambiguously clear that an operation was performed on both elements.

The doctest is fixed. This is indeed a doctest error, but strangely it didn't occur to me in the first place.


---

Comment by egourgoulhon created at 2019-10-29 14:00:32

Replying to [comment:17 egourgoulhon]:
> Granted: [Wikipedia article](https://en.wikipedia.org/wiki/Module_(mathematics)) uses the dot...
On the other hand, the dot-free notation is used in [Wikipedia article 'Vector space'](https://en.wikipedia.org/wiki/Vector_space).

Travis, do you have an opinion on that? In particular, do we have other modules in Sage with named elements? If so, what is the adopted convention? (I think we should be consistent there).


---

Comment by tscrim created at 2019-10-30 04:57:22

Replying to [comment:20 egourgoulhon]:
> Replying to [comment:17 egourgoulhon]:
> > Granted: [Wikipedia article](https://en.wikipedia.org/wiki/Module_(mathematics)) uses the dot...
> On the other hand, the dot-free notation is used in [Wikipedia article 'Vector space'](https://en.wikipedia.org/wiki/Vector_space).
> 
> Travis, do you have an opinion on that? In particular, do we have other modules in Sage with named elements? If so, what is the adopted convention? (I think we should be consistent there). 

I don't know of any other place in Sage where we do something like this. Although at `\cdot` is much better than a period for an action IMO `^^;;`.


---

Comment by egourgoulhon created at 2019-10-30 21:50:42

Replying to [comment:21 tscrim]:
> Replying to [comment:20 egourgoulhon]:
> > Replying to [comment:17 egourgoulhon]:
> > > Granted: [Wikipedia article](https://en.wikipedia.org/wiki/Module_(mathematics)) uses the dot...
> > On the other hand, the dot-free notation is used in [Wikipedia article 'Vector space'](https://en.wikipedia.org/wiki/Vector_space).
> > 
> > Travis, do you have an opinion on that? In particular, do we have other modules in Sage with named elements? If so, what is the adopted convention? (I think we should be consistent there). 
> 
> I don't know of any other place in Sage where we do something like this. Although at `\cdot` is much better than a period for an action IMO `^^;;`.

OK. Let us keep the `\cdot` then...


---

Comment by egourgoulhon created at 2019-10-30 21:56:05

We are almost done here I think. One very last thing: you should modify the ticket description, to take into account the change in `copy()`.


---

Comment by git created at 2019-11-01 10:49:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-11-01 10:50:31

New commits:


---

Comment by @DeRhamSource created at 2019-11-01 10:50:31

Changing status from needs_work to needs_review.


---

Comment by egourgoulhon created at 2019-11-01 13:43:44

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2019-11-01 13:43:44

Thanks.


---

Comment by vbraun created at 2019-11-05 22:48:22

Merge conflict


---

Comment by vbraun created at 2019-11-05 22:48:22

Changing status from positive_review to needs_work.


---

Comment by git created at 2019-11-05 23:42:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-11-06 00:03:34

That should be it. Please check.


---

Comment by @DeRhamSource created at 2019-11-06 00:03:34

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-11-06 00:30:23

Replying to [comment:30 gh-DeRhamSource]:
> That should be it. Please check. 

Did you get a merge conflict when merging in beta4? Otherwise, there is a merge conflict with the upcoming beta5.


---

Comment by @DeRhamSource created at 2019-11-06 04:36:13

Replying to [comment:31 tscrim]:
> Replying to [comment:30 gh-DeRhamSource]:
> > That should be it. Please check. 
> 
> Did you get a merge conflict when merging in beta4?

Yes.


---

Comment by tscrim created at 2019-11-06 04:38:16

Great, thanks.


---

Comment by tscrim created at 2019-11-06 04:38:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-11-07 23:33:26

Merge conflict, possibly #28578... just wait for beta5


---

Comment by vbraun created at 2019-11-07 23:33:26

Changing status from positive_review to needs_work.


---

Comment by git created at 2019-11-11 03:09:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-11-11 03:10:39

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-11-11 04:21:01

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2019-11-15 06:44:12

Changing status from positive_review to needs_work.


---

Comment by fbissey created at 2019-11-15 06:44:12

Doctest failure

```
sage -t --long /usr/lib/python3.7/site-packages/sage/manifolds/differentiable/tensorfield.py
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 269, in sage.manifolds.differentiable.tensorfield.TensorField
Failed example:
    s = f*t.restrict(U); s
Expected:
    Tensor field of type (0,2) on the Open subset U of the 2-dimensional
     differentiable manifold S^2
Got:
    Tensor field f*t of type (0,2) on the Open subset U of the 2-dimensional differentiable manifold S^2
```

One such doctest was fixed in the same file at line 263 but this one was missed.


---

Comment by git created at 2019-11-15 09:17:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DeRhamSource created at 2019-11-15 09:42:26

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-11-15 12:15:37

Changing status from needs_review to positive_review.


---

Comment by git created at 2019-11-15 12:40:16

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-11-15 12:40:16

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by @DeRhamSource created at 2019-11-15 13:01:07

Now, everything must be fine, I guess.


---

Comment by @DeRhamSource created at 2019-11-15 13:02:05

Please give it a positive review, again. Sorry for this trivial mistake in the first place.


---

Comment by egourgoulhon created at 2019-11-15 13:55:14

Thanks for the fix.


---

Comment by egourgoulhon created at 2019-11-15 13:55:14

Changing status from needs_review to positive_review.


---

Comment by git created at 2019-11-18 12:59:58

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2019-11-18 12:59:58

Changing status from positive_review to needs_review.


---

Comment by @DeRhamSource created at 2019-11-18 13:00:58

Please give it a positive review again...


---

Comment by egourgoulhon created at 2019-11-18 20:56:31

The 9.0.beta6 patchbot is all green.


---

Comment by egourgoulhon created at 2019-11-18 20:56:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-11-24 16:58:54

Resolution: fixed
