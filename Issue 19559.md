# Issue 19559: Simplify build of interpreters by skipping header files

Issue created by migration from https://trac.sagemath.org/ticket/19796

Original creator: jdemeyer

Original creation time: 2015-12-29 10:07:04

CC:  vbraun fbissey

When upgrading GSL, there are problems with `sage/ext/interpreters` due to missing dependency checking. I could have gone for a minimal fix, but I decided to fundamentally simplify the building of interpreters, at the expense of making this branch more complicated.

Those "interpreters" involve a lot of files (there are generated .pyx, .pxd, .c and .h files), so the dependencies are difficult for Cython to follow. With this patch, the .h files are completely gone.

This commit was cherry-picked from the positively-reviewed branch at #19756.


---

Comment by jdemeyer created at 2015-12-29 10:09:02

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-12-29 10:09:02

New commits:


---

Comment by jdemeyer created at 2015-12-29 10:09:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-12-29 17:52:09

Resolution: fixed


---

Comment by gouezel created at 2016-01-09 09:15:54

Not sure it is directly related to this ticket, but interpreter compilation now fails on cygwin:


```
gcc -shared -Wl,--enable-auto-image-base -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib/python2.7/config -L/home/Sebastien/sage22/sage/local/lib -lpython2.7 -o build/lib.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/wrapper_el.dll
build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.o: dans la fonction « __pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__ »:
/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.c:1456: référence indéfinie vers « __imp_interp_py »
```



---

Comment by jdemeyer created at 2016-01-11 22:11:37

It is very likely related to this ticket. If you want it fixed, please open a new ticket.


---

Comment by gouezel created at 2016-01-12 08:13:48

New ticket at #19868
