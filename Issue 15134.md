# Issue 15134: No easy-to-find and easy-to-follow doc on how to skip ATLAS installation

Issue created by migration from https://trac.sagemath.org/ticket/15371

Original creator: darij

Original creation time: 2013-11-07 19:25:54

CC:  tscrim vbraun

Keywords: install, make, readme, documentation

This is getting more annoying with git than it was with mercurial because sometimes checking out a different branch without merging new master into it might set one back to an older version of Atlas, triggering a 6-hour makefest. Not only would most patches hardly mind a newer version of Atlas, but there is also the fact that most sage development doesn't really depend on Atlas at all, so an older version of Atlas should be fine for most of us, too. I certainly wouldn't want to have to go through the Atlas autotune every time I download a new sage.

http://sagemath.org/doc/installation/source.html#environment-variables only says:

```
SAGE_ATLAS_LIB - if you have an installation of ATLAS on your system and you want Sage to use it instead of building and installing its own version of ATLAS, set this variable to be the directory containing your ATLAS installation. It should contain the files libatlas, liblapack, libcblas, libptcblas, libf77blas, and libptf77blas, with extensions .a, .so, or .dylib. For backward compatibility, the libraries may also be in the subdirectory SAGE_ATLAS_LIB/lib/.
```


IMHO this info should be much more prominent, and could also be a bit more user-friendly:
* it should say where Sage install its atlas into, and
* it would help to explain how to change an environment variable (yes, this is googleable, but I remember it being nontrivial to understand).


---

Comment by chapoton created at 2013-11-12 12:47:36

Yes, I agree strongly. It is ok to compile ATLAS once in a while, but not every time !

Here is a excerpt of a message from William on sage-devel, that maybe deserves to be written somewhere in the doc, imho:

..., a reminder about how to use the
systemwide ATLAS (at least on Ubuntu 12.04 LTS).  Just do this before
building Sage:

```
         apt-get install libatlas3gf-base liblapack-dev
         cd /usr/lib/
         ln -s libatlas.so.3gf libatlas.so
         ln -s libcblas.so.3gf libcblas.so
         ln -s libf77blas.so.3gf libf77blas.so
         export SAGE_ATLAS_LIB="/usr/lib/"
```



---

Comment by darij created at 2013-11-13 19:10:54

By now it's also explained in http://wiki.sagemath.org/TentativeConventions#Step_6:_build_sage_and.2BAC8-or_the_sage_documentation (thanks, Mathieu!), but of course it should be in a more appropriate place like the installation guide.


---

Comment by darij created at 2014-11-13 04:37:24

Here is a better question: Is there a way to tell the Sage installer to use some set of defaults for ATLAS installation rather than using ATLAS's autotuning (or "search" as they seem to call it)? This should be a matter of passing some variables. It would be extremely convenient (or rather, what we have right now is extremely not so).


---

Comment by vbraun created at 2014-11-13 14:31:56

Use `SAGE_ATLAS_ARCH=base`, its documented in the installation instuctions


---

Comment by darij created at 2014-11-17 01:37:04

Ah, thanks! This has worked. Feel free to close the ticket then.


---

Comment by vbraun created at 2014-11-23 15:22:21

Resolution: fixed
