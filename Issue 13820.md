# Issue 13820: More IPython 0.13 fixes

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-01-28 11:12:05

Assignee: tbd




---

Comment by jdemeyer created at 2013-01-28 11:16:52

Changing priority from major to blocker.


---

Comment by jdemeyer created at 2013-01-28 11:43:16

Another problem happens with upgrading.  On `rosemary` (RHEL 5.6 x86_64), the scripts in `local/bin` aren't properly installed.  In particular `local/bin/ipython` isn't copied and the pre-upgrade `local/bin/ipython` doesn't work.  Full log: [http://build.sagemath.org/sage/builders/UGA%20rosemary%20%28RHEL%205.6%20x86_64%29%20up%26nbsp%3B4.5.2/builds/53/steps/shell_7/logs/ipython](http://build.sagemath.org/sage/builders/UGA%20rosemary%20%28RHEL%205.6%20x86_64%29%20up%26nbsp%3B4.5.2/builds/53/steps/shell_7/logs/ipython)

But note this part:

```
running install_scripts
copying build/scripts-2.7/iplogger -> /home/buildbot/build/sage/rosemary-1/rosemary_upgrade_4.5.2/build/sage-5.7.beta1/local/bin
```

which normally looks like

```
running install_scripts
copying build/scripts-2.7/ipengine -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/ipcontroller -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/ipcluster -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/iplogger -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/ipython -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/pycolor -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/irunner -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
copying build/scripts-2.7/iptest -> /release/buildbot/sage/sage-1/sage_upgrade_4.8/build/sage-5.7.beta1/local/bin
```


EDIT: I initially though this was because of #14026 but thinking further, it was probably #14027.


---

Attachment

Initial patch


---

Comment by vbraun created at 2013-01-28 15:20:19

The "you are on branch X" message was implementing a third bannering system besides sage-banner and IPython banner, and I removed all of it. We can think about putting it back in after we switch to git.

Apply trac_14024_branches.patch


---

Comment by vbraun created at 2013-01-28 17:45:27

Changing status from new to needs_review.


---

Comment by kini created at 2013-01-28 20:57:43

Ideally Sage itself should function even if all version control data is stripped from the installation. After we switch to git this might actually become feasible. "You are on branch X" is a nice thing to have, but it should fail gracefully. I like this patch though because the "branches" referred to by this message are not even used by anyone except the patchbot anymore.

Just testing that the patchbot succeeds in testing sage-0 on arando before I give this positive review.


---

Comment by kini created at 2013-01-28 21:36:40

Works fine.


---

Comment by kini created at 2013-01-28 21:36:40

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-01-30 07:36:32

Resolution: fixed
