# Issue 25336: pyflakes cleanup in number fields

archive/issues_025336.json:
```json
{
    "body": "CC:  @jdemeyer @tscrim @kiwifb @embray wstein\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25573\n\n",
    "created_at": "2018-06-13T20:04:10Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "pyflakes cleanup in number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25336",
    "user": "@fchapoton"
}
```
CC:  @jdemeyer @tscrim @kiwifb @embray wstein



Issue created by migration from https://trac.sagemath.org/ticket/25573





---

archive/issue_comments_357168.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to number fields.",
    "created_at": "2018-06-13T20:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357168",
    "user": "@fchapoton"
}
```

Changing component from PLEASE CHANGE to number fields.



---

archive/issue_comments_357169.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-06-13T20:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357169",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_357170.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-13T20:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357170",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_357171.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-14T05:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357171",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_357172.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-14T07:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357172",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357173.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-14T18:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357173",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357174.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-15T06:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357174",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_357175.json:
```json
{
    "body": "bots are morally green, please review",
    "created_at": "2018-06-20T12:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357175",
    "user": "@fchapoton"
}
```

bots are morally green, please review



---

archive/issue_comments_357176.json:
```json
{
    "body": "What about:\n\n\n```\n========== pyflakes ==========\n\n--- 8.3.beta6\n\n+++ 8.3.beta6 + #25573\n\n\n-found 0 pyflakes errors in the modified files\n+src/sage/rings/number_field/order.py:2053: local variable 'c' is assigned to but never used\n+found 1 pyflakes errors in the modified files\n+Traceback (most recent call last):\n+  File \"/home/chapoton/sage-patchbot/sage_patchbot/patchbot.py\", line 1118, in test_a_ticket\n+    baseline=baseline, **kwds)\n+  File \"/home/chapoton/sage-patchbot/sage_patchbot/plugins.py\", line 269, in pyflakes\n+    raise ValueError(full_msg)\n+ValueError: found 1 pyflakes errors in the modified files\n```\n\n\n?",
    "created_at": "2018-06-20T12:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357176",
    "user": "@embray"
}
```

What about:


```
========== pyflakes ==========

--- 8.3.beta6

+++ 8.3.beta6 + #25573


-found 0 pyflakes errors in the modified files
+src/sage/rings/number_field/order.py:2053: local variable 'c' is assigned to but never used
+found 1 pyflakes errors in the modified files
+Traceback (most recent call last):
+  File "/home/chapoton/sage-patchbot/sage_patchbot/patchbot.py", line 1118, in test_a_ticket
+    baseline=baseline, **kwds)
+  File "/home/chapoton/sage-patchbot/sage_patchbot/plugins.py", line 269, in pyflakes
+    raise ValueError(full_msg)
+ValueError: found 1 pyflakes errors in the modified files
```


?



---

archive/issue_comments_357177.json:
```json
{
    "body": "well, this one needs more brain time, so I kept it for future handling.. No idea if one can safely remove `c =` or even safely remove the whole line..",
    "created_at": "2018-06-20T12:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357177",
    "user": "@fchapoton"
}
```

well, this one needs more brain time, so I kept it for future handling.. No idea if one can safely remove `c =` or even safely remove the whole line..



---

archive/issue_comments_357178.json:
```json
{
    "body": "AFAICT that entire line can be removed.  It's not used, and it doesn't appear to have any side-effects.",
    "created_at": "2018-06-20T12:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357178",
    "user": "@embray"
}
```

AFAICT that entire line can be removed.  It's not used, and it doesn't appear to have any side-effects.



---

archive/issue_comments_357179.json:
```json
{
    "body": "But then there is an entire code paragraph that looks completely useless, as neither z nor alpha is used anywhere else.",
    "created_at": "2018-06-20T12:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357179",
    "user": "@fchapoton"
}
```

But then there is an entire code paragraph that looks completely useless, as neither z nor alpha is used anywhere else.



---

archive/issue_comments_357180.json:
```json
{
    "body": "Perhaps the person who wrote that code (albeit way back in 2007) should chime in.  It does appear to be incomplete.  You get the same result if you pass `allow_subfield=False, check_rank=False`.",
    "created_at": "2018-06-20T13:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357180",
    "user": "@embray"
}
```

Perhaps the person who wrote that code (albeit way back in 2007) should chime in.  It does appear to be incomplete.  You get the same result if you pass `allow_subfield=False, check_rank=False`.



---

archive/issue_comments_357181.json:
```json
{
    "body": "Well... I would rather move on by putting this aside, but let us wait and see if any answer comes back.",
    "created_at": "2018-06-20T13:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357181",
    "user": "@fchapoton"
}
```

Well... I would rather move on by putting this aside, but let us wait and see if any answer comes back.



---

archive/issue_comments_357182.json:
```json
{
    "body": "I think we should now move on. The remaining issue can be handled later.",
    "created_at": "2018-06-23T07:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357182",
    "user": "@fchapoton"
}
```

I think we should now move on. The remaining issue can be handled later.



---

archive/issue_comments_357183.json:
```json
{
    "body": "Isn't this pointing out a \"bug\" in `coprime_integers`?\n\n```\n        if n == 1:\n            X = [0]\n        else:\n            X = n.coprime_integers(n)\n```\n\nI wonder whether it would be more useful to return `[0]` in `1.coprime_integers(1)`...",
    "created_at": "2018-06-25T08:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357183",
    "user": "@jdemeyer"
}
```

Isn't this pointing out a "bug" in `coprime_integers`?

```
        if n == 1:
            X = [0]
        else:
            X = n.coprime_integers(n)
```

I wonder whether it would be more useful to return `[0]` in `1.coprime_integers(1)`...



---

archive/issue_comments_357184.json:
```json
{
    "body": "I opened #25657 for the `coprime_integers` issue. Maybe it's better to revert that change on this ticket?",
    "created_at": "2018-06-25T08:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357184",
    "user": "@jdemeyer"
}
```

I opened #25657 for the `coprime_integers` issue. Maybe it's better to revert that change on this ticket?



---

archive/issue_comments_357185.json:
```json
{
    "body": "I think the ticket here could just go as it is.",
    "created_at": "2018-06-27T05:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357185",
    "user": "@fchapoton"
}
```

I think the ticket here could just go as it is.



---

archive/issue_comments_357186.json:
```json
{
    "body": "I removed the `coprime_integers` change, we can discuss that at #25657. The rest gets positive review.\n----\nNew commits:",
    "created_at": "2018-07-01T06:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357186",
    "user": "@jdemeyer"
}
```

I removed the `coprime_integers` change, we can discuss that at #25657. The rest gets positive review.
----
New commits:



---

archive/issue_comments_357187.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-01T06:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357187",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_357188.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-07-08T13:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25336#issuecomment-357188",
    "user": "@vbraun"
}
```

Resolution: fixed
