# Issue 25336: pyflakes cleanup in number fields

Issue created by migration from https://trac.sagemath.org/ticket/25573

Original creator: chapoton

Original creation time: 2018-06-13 20:04:10

CC:  jdemeyer tscrim fbissey embray wstein




---

Comment by chapoton created at 2018-06-13 20:04:49

Changing component from PLEASE CHANGE to number fields.


---

Comment by chapoton created at 2018-06-13 20:04:49

New commits:


---

Comment by chapoton created at 2018-06-13 20:04:49

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-06-14 05:52:30

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-06-14 07:11:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-14 18:49:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-06-15 06:33:17

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-06-20 12:24:51

bots are morally green, please review


---

Comment by embray created at 2018-06-20 12:38:51

What about:


```
========== pyflakes ==========

--- 8.3.beta6

+++ 8.3.beta6 + #25573


-found 0 pyflakes errors in the modified files
+src/sage/rings/number_field/order.py:2053: local variable 'c' is assigned to but never used
+found 1 pyflakes errors in the modified files
+Traceback (most recent call last):
+  File "/home/chapoton/sage-patchbot/sage_patchbot/patchbot.py", line 1118, in test_a_ticket
+    baseline=baseline, **kwds)
+  File "/home/chapoton/sage-patchbot/sage_patchbot/plugins.py", line 269, in pyflakes
+    raise ValueError(full_msg)
+ValueError: found 1 pyflakes errors in the modified files
```


?


---

Comment by chapoton created at 2018-06-20 12:40:16

well, this one needs more brain time, so I kept it for future handling.. No idea if one can safely remove `c =` or even safely remove the whole line..


---

Comment by embray created at 2018-06-20 12:53:11

AFAICT that entire line can be removed.  It's not used, and it doesn't appear to have any side-effects.


---

Comment by chapoton created at 2018-06-20 12:57:26

But then there is an entire code paragraph that looks completely useless, as neither z nor alpha is used anywhere else.


---

Comment by embray created at 2018-06-20 13:36:24

Perhaps the person who wrote that code (albeit way back in 2007) should chime in.  It does appear to be incomplete.  You get the same result if you pass `allow_subfield=False, check_rank=False`.


---

Comment by chapoton created at 2018-06-20 13:53:35

Well... I would rather move on by putting this aside, but let us wait and see if any answer comes back.


---

Comment by chapoton created at 2018-06-23 07:34:36

I think we should now move on. The remaining issue can be handled later.


---

Comment by jdemeyer created at 2018-06-25 08:32:29

Isn't this pointing out a "bug" in `coprime_integers`?

```
        if n == 1:
            X = [0]
        else:
            X = n.coprime_integers(n)
```

I wonder whether it would be more useful to return `[0]` in `1.coprime_integers(1)`...


---

Comment by jdemeyer created at 2018-06-25 08:44:06

I opened #25657 for the `coprime_integers` issue. Maybe it's better to revert that change on this ticket?


---

Comment by chapoton created at 2018-06-27 05:36:38

I think the ticket here could just go as it is.


---

Comment by jdemeyer created at 2018-07-01 06:39:02

I removed the `coprime_integers` change, we can discuss that at #25657. The rest gets positive review.
----
New commits:


---

Comment by jdemeyer created at 2018-07-01 06:39:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-07-08 13:05:15

Resolution: fixed
