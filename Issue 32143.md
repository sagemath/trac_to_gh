# Issue 32143: make NumberFieldFractionalIdeal inherit from Ideal_fractional

Issue created by migration from https://trac.sagemath.org/ticket/32380

Original creator: lorenz

Original creation time: 2021-08-15 09:44:07

Keywords: number fields, fractional ideals

We have an `Ideal_fractional` parent class, but the most important type of fractional ideals in Sage (namely, for number fields) does not inherit from it. Let's change this, so that we can reliably distinguish fractional ideals from ideals.

(I haven't found any other fractional ideals in Sage that are not already children of `Ideal_fractional`.)

This patch should result in absolutely no change in behaviour, except that `isinstance(I, Ideal_fractional)` now returns `True` when `I` is a `NumberFieldFractionalIdeal`.


---

Comment by lorenz created at 2021-08-15 09:44:21

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-08-15 15:23:01

needs a doctest


---

Comment by git created at 2021-08-15 16:16:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by lorenz created at 2021-08-15 16:16:58

Done.


---

Comment by chapoton created at 2021-09-03 15:33:59

ok


---

Comment by chapoton created at 2021-09-03 15:33:59

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-14 22:24:12

Merge conflict


---

Comment by vbraun created at 2021-10-14 22:24:12

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-10-15 02:10:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by lorenz created at 2021-10-15 02:12:48

Thanks, fixed.


---

Comment by lorenz created at 2021-10-15 02:12:48

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2021-11-03 08:01:35

One (seems trivial) failing doctest according to the patchbot:

```
sage -t --long --random-seed=43805222569518434108329399959452339425 src/sage/rings/polynomial/polynomial_element_generic.py
**********************************************************************
File "src/sage/rings/polynomial/polynomial_element_generic.py", line 783, in sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_sparse.quo_rem
Failed example:
    f.quo_rem(g)
Expected:
    Traceback (most recent call last):
    ...
    ArithmeticError: Division non exact (consider coercing to polynomials over the fraction field)
Got:
    (-y^5 + 2*y^2, y^3 - 2*x^2*y^2 - y)
**********************************************************************
```

So some functionality is apparently changed for something that did not work before but now gives a result. Seems like a good thing.


---

Comment by lorenz created at 2021-11-03 08:46:26

Some quick testing suggests the failure is random (unrelated to this ticket, in any case). I've opened #32816 for this.


---

Comment by git created at 2021-11-03 08:47:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-11-03 08:57:27

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-11-03 08:57:27

Thanks. Then I am setting this back to a positive review.


---

Comment by lorenz created at 2021-11-03 09:00:08

Thank you!


---

Comment by vbraun created at 2021-11-15 23:16:07

Resolution: fixed
