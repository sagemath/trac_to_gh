# Issue 27861: Shortest path fix for the case that no path exists

Issue created by migration from https://trac.sagemath.org/ticket/28098

Original creator: @hensc

Original creation time: 2019-07-02 18:55:49

CC:  @rajat1433

In the documentation of the `shortest_path()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, the returned list is empty.
```


In the documentation of the `shortest_path_length()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, returns ``Infinity``.
```



But actually in many cases the methods stop with an error instead of returning an empty list or infinity, respectively:


```python
## Minimum repro
sage: G = Graph()
sage: G.add_vertices([1, 2])
sage: G.shortest_path(1, 2, algorithm='BFS')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='BFS')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: +Infinity
```


I'm using [SageMath](SageMath) version 8.8, Release Date: 2019-06-26, with Python 2.7.15, on Ubuntu 18.04.2 64bit.


---

Comment by @hensc created at 2019-07-02 22:42:40

New commits:


---

Comment by @hensc created at 2019-07-02 22:42:40

Changing status from new to needs_review.


---

Comment by dcoudert created at 2019-07-03 17:42:20

For me this patch is good to go.

`@`Rajat: can you double check. Thanks.


---

Comment by @bergus created at 2019-07-03 21:02:13

Ah, wonderful, I nearly had reported this as well - just ran into it. Thanks for fixing it before I could even file a report :-)


---

Comment by @rajat1433 created at 2019-07-04 05:27:30

It looks good.
For me too its good to go.


---

Comment by dcoudert created at 2019-07-04 16:59:46

So let it be.


---

Comment by dcoudert created at 2019-07-04 16:59:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-07-05 15:29:12

Resolution: fixed
