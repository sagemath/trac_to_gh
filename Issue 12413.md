# Issue 12413: Bring matrix/matrix0.pyx to 100% coverage

Issue created by migration from https://trac.sagemath.org/ticket/12585

Original creator: hthomas

Original creation time: 2012-02-26 00:51:43

Assignee: mvngu

CC:  hthomas

Improve the doctests for matrix/matrix0.pyx.


---

Comment by hthomas created at 2012-03-01 23:09:09

Changing status from new to needs_review.


---

Comment by hthomas created at 2012-03-01 23:09:09

I think this covers it.  sage -coverage still complains about one thing, but I think it's confused (the thing it's found is something defined by cdef but which is not a method).


---

Comment by hthomas created at 2012-03-01 23:19:43

Drat.  New patch coming


---

Comment by hthomas created at 2012-03-01 23:19:43

Changing status from needs_review to needs_work.


---

Attachment


---

Comment by hthomas created at 2012-03-01 23:23:49

Changing status from needs_work to needs_review.


---

Comment by hthomas created at 2012-03-01 23:23:49

This one applies properly to 5.0.beta5.


---

Comment by davidloeffler created at 2012-03-09 14:22:54

The reason sage -coverage was complaining is because of the comment placed *before* the docstring. I.e. it's not clever enough to parse

```python
def some_function(args):
    # comment
    """ docstring """
    function_body
```

I'm about to upload a tiny reviewer patch which moves the comment in `_lmul_` to after the docstring, and thus gets coverage up to 100%. I've also tagged a few doctests as `# indirect doctest ` to stop it complaining about the function name not appearing. Hugh: I'm happy with your patch, so if you're happy with my patch please set this to "positive review".


---

Attachment

apply over previous patch


---

Comment by davidloeffler created at 2012-03-09 14:24:39

Apply trac_12585_matrix0_doc-ht.patch, trac_12585-review.patch

(for the patchbot)


---

Comment by kcrisman created at 2012-03-09 15:08:28

Looks pretty good.  Considering that the changes you made after colons were all in underscored functions, so they didn't appear in the reference manual anyway, Hugh did good work too :)

Question:

```

def unpickle(cls, parent, mutability, cache, data, version):
    r"""
    Unpickle a matrix. This is only used internally by Sage. Users
    should never call this function directly.
    
    EXAMPLES: We illustrating saving and loading several different
    types of matrices.
    
    OVER `\ZZ`::
    
        sage: A = matrix(ZZ,2,range(4))
        sage: loads(dumps(A)) # indirect doctest
        [0 1]
        [2 3]
    
    Sparse OVER `\QQ`:
    
    Dense over `\QQ[x,y]`:
    
    Dense over finite field.
    """
```

?  Since this was there before, I guess it's not necessarily going to make this 'needs work', but I am a little mystified by what the story behind this is.  Should we open a ticket for this?


---

Comment by kcrisman created at 2012-03-09 15:08:28

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-13 08:24:44

Resolution: fixed


---

Comment by hthomas created at 2012-03-13 13:25:59

Thanks for reviewing this, David and Karl-Dieter!  Sorry not to have gotten back to you faster --- I was away from email.  I am (of course) happy with your changes, David.  

I'm not familiar enough with the Sage development process to assess whether it would be useful to open the ticket that you suggest, Karl-Dieter, but I guess it can't do any harm, so please go ahead if you think it would be productive.  I don't understand pickling, so I am not likely to do any work on it myself.


---

Comment by kcrisman created at 2012-03-13 15:11:31

This is now #12664.
