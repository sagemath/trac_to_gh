# Issue 16830: Canonical height over number fields for projective morphisms

archive/issues_016830.json:
```json
{
    "body": "Assignee: bhutz\n\nCC:  paulfili\n\nKeywords: canonical height\n\nEnable compute canonical height over number fields for points and morphisms defined over number fields. The method will be to extend the local height computations (green's functions) to include number field places.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17067\n\n",
    "created_at": "2014-09-29T16:01:24Z",
    "labels": [
        "algebraic geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Canonical height over number fields for projective morphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16830",
    "user": "bhutz"
}
```
Assignee: bhutz

CC:  paulfili

Keywords: canonical height

Enable compute canonical height over number fields for points and morphisms defined over number fields. The method will be to extend the local height computations (green's functions) to include number field places.


Issue created by migration from https://trac.sagemath.org/ticket/17067





---

archive/issue_comments_222845.json:
```json
{
    "body": "ok. I've now taken the original code from Adam Towsley and Paul Fili from sage-days 55 and made it mesh with the current functionality in Sage. It should be noted that I left QQ using RR and Qp so that the flip trick works better. However, over number fields, the size of the point is growing quite quickly so N cannot be too large. I didn't see a way to get a good use of the residue field (with precision) as with QQ.\n\nPlease take a look and see what you think. I've run many more examples there are in the docs where I pullback rational points to a number field and haven't run into any issues there. Another way to get valid tests would be nice.\n\nI'm also considering adding the error bound computation for dimension >1 to this ticket as well, but I've haven't yet looked into how complicated that will be.\n----\nNew commits:",
    "created_at": "2014-09-30T00:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222845",
    "user": "bhutz"
}
```

ok. I've now taken the original code from Adam Towsley and Paul Fili from sage-days 55 and made it mesh with the current functionality in Sage. It should be noted that I left QQ using RR and Qp so that the flip trick works better. However, over number fields, the size of the point is growing quite quickly so N cannot be too large. I didn't see a way to get a good use of the residue field (with precision) as with QQ.

Please take a look and see what you think. I've run many more examples there are in the docs where I pullback rational points to a number field and haven't run into any issues there. Another way to get valid tests would be nice.

I'm also considering adding the error bound computation for dimension >1 to this ticket as well, but I've haven't yet looked into how complicated that will be.
----
New commits:



---

archive/issue_comments_222846.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-03T14:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222846",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222847.json:
```json
{
    "body": "Here is a first attempt at the generalized error bounds. It needed the implementation of local heights for morphisms, so I did that and for points as well.\n\nI need to do some serious testing still, but the original set of doc tests were still basically correct. With the new error bound computation the values were slightly different, but within the specified tolerance.",
    "created_at": "2014-10-03T14:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222847",
    "user": "bhutz"
}
```

Here is a first attempt at the generalized error bounds. It needed the implementation of local heights for morphisms, so I did that and for points as well.

I need to do some serious testing still, but the original set of doc tests were still basically correct. With the new error bound computation the values were slightly different, but within the specified tolerance.



---

archive/issue_comments_222848.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-04T22:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222848",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222849.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-06T18:15:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222849",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222850.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-06T18:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222850",
    "user": "bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_222851.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-16T22:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222851",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222852.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-17T22:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222852",
    "user": "paulfili"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222853.json:
```json
{
    "body": "Conflicts, probably with #17517",
    "created_at": "2015-01-24T00:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222853",
    "user": "vbraun"
}
```

Conflicts, probably with #17517



---

archive/issue_comments_222854.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-01-24T00:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222854",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_222855.json:
```json
{
    "body": "It's not #17517 as it doesn't touch any of the same files. I just downloaded the latest beta5 and had no issues with merge, and it is still listed as green for automerge on trac. Do I need to wait until a new beta comes out or is there a way to see what happened here?",
    "created_at": "2015-01-24T02:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222855",
    "user": "bhutz"
}
```

It's not #17517 as it doesn't touch any of the same files. I just downloaded the latest beta5 and had no issues with merge, and it is still listed as green for automerge on trac. Do I need to wait until a new beta comes out or is there a way to see what happened here?



---

archive/issue_comments_222856.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-25T14:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222856",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222857.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-25T19:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222857",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222858.json:
```json
{
    "body": "Merge issues fixed. Note that the commit 3cd6d3e was rolled back and the conflict resolution redone.",
    "created_at": "2015-01-25T19:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222858",
    "user": "bhutz"
}
```

Merge issues fixed. Note that the commit 3cd6d3e was rolled back and the conflict resolution redone.



---

archive/issue_comments_222859.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-25T19:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222859",
    "user": "bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222860.json:
```json
{
    "body": "Passes doctests on my 6.5beta6 build, looks good to me.",
    "created_at": "2015-01-27T19:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222860",
    "user": "paulfili"
}
```

Passes doctests on my 6.5beta6 build, looks good to me.



---

archive/issue_comments_222861.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-27T19:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222861",
    "user": "paulfili"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222862.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-29T13:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16830#issuecomment-222862",
    "user": "vbraun"
}
```

Resolution: fixed
