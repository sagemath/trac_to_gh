# Issue 12029: The new R spkg breaks building from source on at least one OS X system.

Issue created by migration from https://trac.sagemath.org/ticket/12201

Original creator: mderickx

Original creation time: 2011-12-20 13:32:58

Assignee: amhou

CC:  vbraun kcrisman leif

On OS X 10.6.8 I cannot install this spkg in sage-4.8.alpha3 (I build the alpha3 from source so the old spkg does install).

Doing

```
md:sage-4.8.alpha3 maarten$ ./sage -f ../sage-4.8.alpha4/spkg/standard/r-2.14.0.p0.spkg
```


Hangs as described on:  http://pastebin.com/7K7qLMJh

The guilty command is: /Users/maarten/Downloads//sage-4.8.alpha3/spkg/build/r-2.14.0.p0/src/bin/exec/R --no-restore --slave --args nextArg--pkglocknextArg--data-compress=xznextArg--byte-compilenextArg-lnextArg../../../librarynextArgMASS.tgz

This was introduced by #12057 since alpha3 builds ok on this setup.


---

Comment by mderickx created at 2011-12-20 13:39:17

`@`kcrisman: I don't use R myself so the only other R's on my system are R's in other sage installations, but those are not on my path so it should not have an unwanted effect. Since I don't use it, I also don't have any R specific environment variables set of wich I am aware. 

`@`Volker: I tried using dtrace yesterday evening (never used it before), but since it is so extremely flexible I did not find out yet the way to get usefull information about the hanging processes. Any help on wich commands to feed to dtrace is appreciated.


---

Comment by kcrisman created at 2011-12-20 14:34:13

Changing component from statistics to packages.


---

Comment by kcrisman created at 2011-12-20 14:34:13

Changing assignee from amhou to tbd.


---

Comment by kcrisman created at 2011-12-20 14:34:13

Thanks, Maarten.  No, in this case you definitely shouldn't have one of those problems.  It remains possible that there are some other env variables set strangely, but I wouldn't have a clue.


---

Comment by kcrisman created at 2011-12-20 14:34:13

Changing keywords from "" to "r-project".


---

Comment by kcrisman created at 2012-01-24 14:33:14

See also [this sage-release post](http://groups.google.com/group/sage-release/browse_thread/thread/ef199497ad4c238a/dc30c735281ae1a7?show_docid=dc30c735281ae1a7).


---

Comment by kcrisman created at 2012-07-07 04:09:59

Maarten, is this still an issue?  I.e., does Sage build okay?  Otherwise we may want to close this.


---

Comment by mderickx created at 2012-07-09 14:34:16

I didn't build sage on my laptop for a while (moved most of my sage related stuff to mderickx.nl) so this was a good reminder. Indeed the R spkg doesn't hang anymore. I don't know what changed. Maybe it's the new gcc?


---

Comment by mderickx created at 2012-07-09 14:34:16

Changing status from new to needs_review.


---

Comment by mderickx created at 2012-07-09 14:34:29

Changing status from needs_review to positive_review.


---

Comment by leif created at 2012-07-09 15:06:10

Replying to [comment:6 mderickx]:
> I didn't build sage on my laptop for a while (moved most of my sage related stuff to mderickx.nl) so this was a good reminder. Indeed the R spkg doesn't hang anymore. I don't know what changed. Maybe it's the new gcc?


So this ticket should be changed to "WorksForMe" or whatever?


FWIW, this R spkg keeps segfaulting for me (when byte-compiling the base package) with GCC 4.7.x (FSF 4.7.0 local install or the new optional GCC 4.7.1 spkg) on Ubuntu 10.04.4 x86_64.  I don't recall when or which R spkg did install, but presumably some previous definitely did a while ago.


---

Comment by leif created at 2012-07-09 15:07:03

Replying to [comment:9 leif]:
> Replying to [comment:6 mderickx]:
> > I didn't build sage on my laptop for a while (moved most of my sage related stuff to mderickx.nl) so this was a good reminder. Indeed the R spkg doesn't hang anymore. I don't know what changed. Maybe it's the new gcc?
> 
> 
> So this ticket should be changed to "WorksForMe" or whatever?

Ok, I see you just did so.


---

Comment by jdemeyer created at 2012-08-01 12:25:55

Resolution: worksforme
