# Issue 14629: Make choosing irreducible polynomials independent of finite field implementations

Issue created by migration from Trac.

Original creator: pbruin

Original creation time: 2013-06-27 07:38:52

Assignee: cpernet

CC:  caruso

Keywords: polynomials

This patch makes the `FiniteField` constructor call the implementation-independent code for choosing irreducible polynomials from #14832.

With this patch, the generic constructor always passes an actual polynomial (not a string specifiying an algorithm to construct one) to the finite field implementation class.  For backwards compatibility, the existing classes still recognise a string `modulus`.  Checking if the finite field is a Conway polynomial is now done by an implementation-independent function.


---

Comment by pbruin created at 2013-06-27 07:44:22

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-07-08 15:11:17

It may be better to use a function decorator to do the caching of the is_conway method, i.e. use `@`cached_method.

And is there any point to prevent setting the default return value for finite fields explicitely constructed with conway polynomials?
(i.e. removing what would be the equivalent of "self._is_conway = True" after the "modulus == "conway"" tests? to set the default value of the cached_method you can use "self.is_conway.set_cache(True)".)


---

Comment by pbruin created at 2013-07-11 22:20:03

Replying to [comment:3 jpflori]:
> It may be better to use a function decorator to do the caching of the is_conway method, i.e. use `@`cached_method.

OK, I'll fix this as soon as I have time, unless you or someone else does it first.

> And is there any point to prevent setting the default return value for finite fields explicitely constructed with conway polynomials?
> (i.e. removing what would be the equivalent of "self._is_conway = True" after the "modulus == "conway"" tests? to set the default value of the cached_method you can use "self.is_conway.set_cache(True)".)

That might be slightly more elegant, but the test for `modulus == 'conway'` is now in `PolynomialRing.irreducible_element`, which is not directly related to finite fields, so we would need an additional check in the finite field constructor.  I'm not sure if it is worth it: checking whether we have a Conway polynomial is (hopefully) very fast (since the database was loaded when we looked up the Conway polynomial), and `is_conway()` is currently only used for Sage <-> Gap conversion.


---

Comment by pbruin created at 2013-07-12 16:19:25

based on 5.11.beta3 + #14832, use `@`cached_method


---

Attachment


---

Comment by jpflori created at 2013-07-15 09:56:46

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2013-07-15 09:56:46

Ok, looks ok for me.


---

Comment by pbruin created at 2013-07-16 11:48:08

The "apply" line in the comment below seems to be ignored.


---

Comment by pbruin created at 2013-07-16 13:28:30

For patchbot:

Apply trac_14833-FiniteField_polynomial_choice.patch


---

Comment by jpflori created at 2013-07-16 16:13:01

Maybe:

Apply:
[attachment:trac_14833-FiniteField_polynomial_choice.patch]

That should prevent the Finite Field thing being interpreted by the trac syntax.


---

Attachment

empty patch as ap√©ritif for patchbot


---

Comment by pbruin created at 2013-07-16 16:25:22

Now it thinks it is a digestif, but anyway...

(For the record, that file contained the first version of the patch; when I uploaded a revised version with a different name, the patchbot couldn't be made to eat only the new one.)


---

Comment by pbruin created at 2013-07-17 07:35:22


```
Apply trac_14833-FiniteField_polynomial_choice.patch
```



---

Comment by jdemeyer created at 2013-08-16 21:19:35

Resolution: fixed
