# Issue 26282: py3: care for islice

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2018-10-21 14:56:01




---

Comment by chapoton created at 2018-10-21 14:56:37

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-10-21 14:56:37

New commits:


---

Comment by vklein created at 2018-10-22 08:21:47

Set assignee to vklein.


---

Comment by vklein created at 2018-10-22 09:06:37

There is some remaining "islice" errors cases on the modified lines. I propose the patch below:



```
diff --git a/src/sage/rings/padics/local_generic_element.pyx b/src/sage/rings/padics/local_generic_element.pyx
index efb934b..3e89b37 100644
--- a/src/sage/rings/padics/local_generic_element.pyx
+++ b/src/sage/rings/padics/local_generic_element.pyx
`@``@` -344,7 +344,7 `@``@` cdef class LocalGenericElement(CommutativeRingElement):
         # construct the return value
         ans = self.parent().zero()
         for c in islice(self.expansion(lift_mode=lift_mode),
-                        int(start), int(stop), k):
+                        int(start), int(stop), int(k)):
             ans += ppow * c
             ppow *= pk
 
diff --git a/src/sage/rings/valuation/augmented_valuation.py b/src/sage/rings/valuation/augmented_valuation.py
index 5042977..cacd1ed 100644
--- a/src/sage/rings/valuation/augmented_valuation.py
+++ b/src/sage/rings/valuation/augmented_valuation.py
`@``@` -1817,7 +1817,7 `@``@` class FiniteAugmentedValuation(AugmentedValuation_base, FiniteInductiveValuation
             for i in range(f.degree(), -1, -1):
                 j = i // self.phi().degree()
                 from itertools import islice
-                coefficients = list(islice(f.list(), j * self.phi().degree(),
+                coefficients = list(islice(f.list(), int(j * self.phi().degree()),
                                            int(i) + 1))
                 g = self.domain()(coefficients)
                 ng = self._base_valuation.simplify(g, error=error-j*self._mu, force=force, phiadic=False)
```



---

Comment by vklein created at 2018-10-22 09:14:21

Remove assignee vklein.


---

Comment by chapoton created at 2018-10-22 09:14:53

ok, go on


---

Comment by chapoton created at 2018-10-22 09:55:46

Do you want me to add these fixes, or are you going to do that ?


---

Comment by vklein created at 2018-10-22 10:37:26

New commits:


---

Comment by vklein created at 2018-10-22 10:39:02

I give positive review to `7b2e58d` except for the two lines fixed by `3baaea2`


---

Comment by vklein created at 2018-10-22 10:41:59

`@`chapoton as i can't review my own commit i let you do that.


---

Comment by chapoton created at 2018-10-22 15:28:53

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2018-10-22 15:28:53

ok, good to go from my side


---

Comment by vbraun created at 2018-10-23 22:27:53

Resolution: fixed
