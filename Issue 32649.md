# Issue 32649: 1 fricas optional doctest failing in interfaces/fricas.py

Issue created by migration from https://trac.sagemath.org/ticket/32886

Original creator: slabbe

Original creation time: 2021-11-16 15:16:51

CC:  slelievre mantepse

On Ubuntu 18.04 with 9.5.beta6, the command 

```
$ sage -t --optional=sage,fricas  src/sage/interfaces/fricas.py
```

gives

```
Using --optional=fricas,sage
Doctesting 1 file.
sage -t --random-seed=323059266377074087629992611498642660477 src/sage/interfaces/fricas.py
**********************************************************************
File "src/sage/interfaces/fricas.py", line 1193, in sage.interfaces.fricas.FriCASElement._latex_
Failed example:
    latex(fricas("integrate(sin(x+1/x),x)"))                      # optional - fricas
Expected:
    \int ^{\displaystyle x} {{\sin \left( {{{{{ \%O} ^{2}}+1} \over  \%O}} \right)} \  {d \%O}}
Got:
    \int ^{\displaystyle x} {{\sin \left( {{{{{ \%A} ^{2}}+1} \over  \%A}} \right)} \  {d \%A}}
**********************************************************************
1 item had failures:
   1 of   4 in sage.interfaces.fricas.FriCASElement._latex_
    [274 tests, 1 failure, 27.18 s]
----------------------------------------------------------------------
sage -t --random-seed=323059266377074087629992611498642660477 src/sage/interfaces/fricas.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

Comment by slelievre created at 2021-11-16 18:10:54

See also a similar report for Sage 9.5.beta5 on Debian 10 buster.

- https://groups.google.com/g/sage-release/c/AAW7uCh1iZs/m/WQvClVRjAQAJ


---

Comment by mantepse created at 2021-11-30 11:14:50

Changing keywords from "" to "FriCAS".


---

Comment by mantepse created at 2021-11-30 11:28:17

Almost trivial fix, making the doctest more robust.  (What's tested is actually that an unevaluated integral produces proper LaTeX, and it does.)
----
New commits:


---

Comment by mantepse created at 2021-11-30 11:28:17

Changing status from new to needs_review.


---

Comment by slelievre created at 2021-11-30 14:58:19

Makes sense. Thanks.


---

Comment by slelievre created at 2021-11-30 14:58:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-12-19 11:47:19

Resolution: fixed
