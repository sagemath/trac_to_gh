# Issue 30034: nauty: Switch to autotoolized fork so that shared libraries can be built

Issue created by migration from https://trac.sagemath.org/ticket/30271

Original creator: mkoeppe

Original creation time: 2020-08-02 13:04:03

CC:  winfried thansen

This is for #27952.

The fork is at https://github.com/mkoeppe/nauty


---

Comment by mkoeppe created at 2020-08-02 13:33:31

As seen in https://github.com/Normaliz/Normaliz/runs/936924467, this needs more work:

```
  [nauty-2.7.1+ds+sage-2020-08-01]   /usr/bin/ld: cannot open linker script file ./nauty.map: No such file or directory
  [nauty-2.7.1+ds+sage-2020-08-01]   collect2: error: ld returned 1 exit status
```

----
New commits:


---

Comment by mkoeppe created at 2020-08-12 05:07:32

(removing cc as requested)


---

Comment by git created at 2020-08-12 05:24:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mkoeppe created at 2020-08-12 18:22:40

ubuntu-trusty-maximal (https://github.com/mkoeppe/sage/runs/974420086)

```
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:1512: undefined reference to `__gmpz_init'
sumlines-sumlines.o: In function `add_one':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:677: undefined reference to `__gmpz_init_set'
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:629: undefined reference to `__gmpz_add'
sumlines-sumlines.o: In function `scanline':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:961: undefined reference to `__gmpz_set_str'
sumlines-sumlines.o: In function `writeline':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:388: undefined reference to `__gmpz_out_str'
collect2: error: ld returned 1 exit status
```

Worked ok on `ubuntu-bionic-maximal` (https://github.com/mkoeppe/sage/runs/974420157)


---

Comment by mkoeppe created at 2020-12-10 07:03:37

`@`thansen: https://github.com/mkoeppe/nauty continues the autotoolization of nauty that is done partially by the Debian package. This may be of interest to the Debian maintainers


---

Comment by mkoeppe created at 2020-12-10 07:03:49

Changing keywords from "" to "sd111".


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
