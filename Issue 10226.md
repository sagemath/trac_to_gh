# Issue 10226: change_labels for sum species structure does not actually change the labels

Issue created by migration from Trac.

Original creator: mhansen

Original creation time: 2010-11-06 04:36:04

Assignee: mhansen

CC:  sage-combinat mantepse


```

sage: X = species.SingletonSpecies()
sage: X2 = X+X
sage: X2.structures([1]).list()
[1, 1]
sage: s = X2.structures([1]).list()[0]
sage: s.labels()
[1]
sage: s.change_labels(["a"])
1
```



---

Comment by mhansen created at 2010-11-26 07:15:25

Changing status from new to needs_review.


---

Comment by mhansen created at 2010-11-26 07:15:25

This patch does a couple of things:

1. Fix the `change_labels` bug above.

2. Add a left/right summand/factor method to sum and product species.

3. Make the `labels` method return all of the labels rather than just the ones that appear.  This is a backwards incompatible change, but I am pretty sure that there isn't really any code out there that depends on this.

4. Add a `labels_subset` method to do what the old `labels` methods did for subsets.

5. Add additional documentation to some of the classes.


---

Comment by hivert created at 2012-03-09 20:53:41

Changing assignee from mhansen to hivert.


---

Comment by hivert created at 2012-03-09 20:53:41

I'm assigning the ticket to myself to remember to review it.


---

Comment by mhansen created at 2012-07-31 21:40:22

Florent, if you have time, could you take a quick look at this.  #5512 is waiting on it.5512  Thanks!


---

Comment by mhansen created at 2012-07-31 22:08:04

I rebased  trac_10227-species_fixes-mh.patch on #5512

Apply trac_10227-species_fixes-mh.patch


---

Attachment


---

Comment by chapoton created at 2012-12-17 21:01:49

Changing keywords from "" to "species".


---

Comment by chapoton created at 2014-01-09 19:59:40

New commits:


---

Comment by git created at 2014-06-17 19:23:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-30 07:51:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2016-01-08 10:11:21

I'm now building this.


---

Comment by mantepse created at 2016-01-08 13:14:30

Looks OK.  It might make sense to add a docstring to `change_labels` in 

```
composition_species.py:69:    def change_labels(self, labels):
partition_species.py:112:    def change_labels(self, labels):
product_species.py:119:    def change_labels(self, labels):
structure.py:125:    def change_labels(self, labels):
structure.py:267:    def change_labels(self, labels):
```


I suggest:


```
Returns a relabelled structure.

INPUT:

- ``labels``, a list of labels.

OUTPUT:

A structure with the i-th label of self replaced with the i-th label of the list.

EXAMPLES::

    sage: C = species.CycleSpecies(3)
    sage: ls1 = C.structures([1,2,3]); ls2 = C.structures(["a", "b", "c"])
    sage: s = s1[0].change_labels(["b", "c", "a"]); t = s2[0]; (s,t,s==t)
    (('b', 'c', 'a'), ('a', 'b', 'c'), False)
    sage: s = s1[0].change_labels(["a", "b", "c"]); t = s2[0]; (s,t,s==t)
    (('a', 'b', 'c'), ('a', 'b', 'c'), True)


```



---

Comment by git created at 2016-01-08 20:21:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2016-01-09 07:49:07

(You didn't put my example into the doc for `change_labels`, but that's OK.  It's purpose would have been to clarify equality of structures: one might think that (b, c, a) and (a, b, c) are the same cycle, but they are not.  So it should actually be in the doc for equality)

Can I give this positive review?  (Florent is in the reviewer list, not me)


---

Comment by chapoton created at 2016-01-09 08:08:24

Replying to [comment:23 mantepse]:
> (You didn't put my example into the doc for `change_labels`, but that's OK.  It's purpose would have been to clarify equality of structures: one might think that (b, c, a) and (a, b, c) are the same cycle, but they are not.  So it should actually be in the doc for equality)

Where precisely do you want this example to be added ?

> Can I give this positive review?  (Florent is in the reviewer list, not me)

Yes, you can ; just add yourself to the reviewer list.


---

Comment by mantepse created at 2016-01-09 08:24:34

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-23 02:45:10

Resolution: fixed
