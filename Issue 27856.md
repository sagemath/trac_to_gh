# Issue 27856: Strip -Wstrict-prototypes from C++ cython extensions

Issue created by migration from https://trac.sagemath.org/ticket/28093

Original creator: isuruf

Original creation time: 2019-07-01 17:58:05

In conda, `-Wstrict-prototypes` is added to CFLAGS and therefore Cython C extensions are compiled with it. These flags are recorded and when a Cython C++ extension depends on C extension, these flags are used resulting a warning.

(C flags like -std=c99 is already stripped from C++ extensions, which means there is already infrastructure to do this.)


---

Comment by jdemeyer created at 2019-07-02 21:01:52

Resolution: duplicate


---

Comment by jdemeyer created at 2019-07-02 21:01:52

Duplicate of #25316


---

Comment by jdemeyer created at 2019-07-02 21:04:01

Replying to [ticket:28093 isuruf]:
> C flags like -std=c99 is already stripped from C++ extensions, which means there is already infrastructure to do this.

Unfortunately, this is not true. The flag `-std=c99` is handled by Sage, so we can easily choose whether to add it or not. The flag `-Wstrict-prototypes` on the other hand is added by distutils itself, it's non-trivial to not add that flag.

I should also add that this has been fixed upstream in Python 3.6, but it looks like it won't be backported to 2.7.
