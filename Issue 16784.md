# Issue 16784: Faster creation of words by the parent

archive/issues_016784.json:
```json
{
    "body": "CC:  vdelecroix sstarosta\n\n1. Move the code of `_construct_word` into `__call__` method.\n\n2. Create `finite_word_list` methods which are shortcuts for `__call__` when we know the datatype.\n\nHere are some benchmarks:\n\nlist:\n\n\n```\nsage: W = Words()\nsage: L = range(1000)\nsage: %timeit W(L)\n10000 loops, best of 3: 45.5 \u00b5s per loop\nsage: %timeit W.finite_word_list(L)\n1000000 loops, best of 3: 1.29 \u00b5s per loop\n```\n\n\nstr:\n\n\n```\nsage: W = Words()\nsage: s = 'a'*1000\nsage: %timeit W(s)\n10000 loops, best of 3: 45.2 \u00b5s per loop\nsage: %timeit W.finite_word_str(s)\n1000000 loops, best of 3: 1.27 \u00b5s per loop\n```\n\n\ntuple:\n\n\n```\nsage: t = tuple(L)\nsage: %timeit W(t)\n10000 loops, best of 3: 46 \u00b5s per loop\nsage: %timeit W.finite_word_tuple(t)\n1000000 loops, best of 3: 1.39 \u00b5s per loop\n```\n\n\nchar (why creation is so longer than str, tuple or list?):\n\n\n```\nsage: W = Words([0,1,2])\nsage: L = [0,1,1,2]*1000\nsage: type(W(L))\n<class 'sage.combinat.words.word.FiniteWord_char'>\nsage: %timeit W(L)\n1000 loops, best of 3: 336 \u00b5s per loop\nsage: %timeit W.finite_word_char(L)\n1000 loops, best of 3: 246 \u00b5s per loop\n```\n\n\nBEFORE:\n\n\n```\nsage: W = Words(range(5))\nsage: %time L = list(W.iterate_by_length(7))\nCPU times: user 4.6 s, sys: 54.7 ms, total: 4.66 s\nWall time: 4.68 s\n```\n\n\nAFTER:\n\n\n```\nsage: W = Words(range(5))\nsage: %time L = list(W.iterate_by_length(7))\nCPU times: user 940 ms, sys: 80.4 ms, total: 1.02 s\nWall time: 1.02 s\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17021\n\n",
    "created_at": "2014-09-20T23:47:34Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Faster creation of words by the parent",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16784",
    "user": "slabbe"
}
```
CC:  vdelecroix sstarosta

1. Move the code of `_construct_word` into `__call__` method.

2. Create `finite_word_list` methods which are shortcuts for `__call__` when we know the datatype.

Here are some benchmarks:

list:


```
sage: W = Words()
sage: L = range(1000)
sage: %timeit W(L)
10000 loops, best of 3: 45.5 µs per loop
sage: %timeit W.finite_word_list(L)
1000000 loops, best of 3: 1.29 µs per loop
```


str:


```
sage: W = Words()
sage: s = 'a'*1000
sage: %timeit W(s)
10000 loops, best of 3: 45.2 µs per loop
sage: %timeit W.finite_word_str(s)
1000000 loops, best of 3: 1.27 µs per loop
```


tuple:


```
sage: t = tuple(L)
sage: %timeit W(t)
10000 loops, best of 3: 46 µs per loop
sage: %timeit W.finite_word_tuple(t)
1000000 loops, best of 3: 1.39 µs per loop
```


char (why creation is so longer than str, tuple or list?):


```
sage: W = Words([0,1,2])
sage: L = [0,1,1,2]*1000
sage: type(W(L))
<class 'sage.combinat.words.word.FiniteWord_char'>
sage: %timeit W(L)
1000 loops, best of 3: 336 µs per loop
sage: %timeit W.finite_word_char(L)
1000 loops, best of 3: 246 µs per loop
```


BEFORE:


```
sage: W = Words(range(5))
sage: %time L = list(W.iterate_by_length(7))
CPU times: user 4.6 s, sys: 54.7 ms, total: 4.66 s
Wall time: 4.68 s
```


AFTER:


```
sage: W = Words(range(5))
sage: %time L = list(W.iterate_by_length(7))
CPU times: user 940 ms, sys: 80.4 ms, total: 1.02 s
Wall time: 1.02 s
```


Issue created by migration from https://trac.sagemath.org/ticket/17021





---

archive/issue_comments_222016.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-09-20T23:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222016",
    "user": "slabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_222017.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-09-20T23:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222017",
    "user": "slabbe"
}
```

New commits:



---

archive/issue_comments_222018.json:
```json
{
    "body": "I based my branch on top of #17013 who just got positive reviewed. I hope it is okay.",
    "created_at": "2014-09-20T23:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222018",
    "user": "slabbe"
}
```

I based my branch on top of #17013 who just got positive reviewed. I hope it is okay.



---

archive/issue_comments_222019.json:
```json
{
    "body": "Hello,\n\n1) what is the point of\n\n```\n+        word_classes = self._element_classes\n+        cls_str = 'FiniteWord_list'\n+        return word_classes[cls_str](parent=self, data=data)\n```\n\ninstead of\n\n```\n+        return self._element_classes['FiniteWord_list'](parent, data)\n```\n\n\n2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). Instead of using directly those, I would rather introduce a `check` argument in `__call__` and do not use them in methods of `FiniteWord`.\n\nVincent",
    "created_at": "2014-09-24T10:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222019",
    "user": "vdelecroix"
}
```

Hello,

1) what is the point of

```
+        word_classes = self._element_classes
+        cls_str = 'FiniteWord_list'
+        return word_classes[cls_str](parent=self, data=data)
```

instead of

```
+        return self._element_classes['FiniteWord_list'](parent, data)
```


2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). Instead of using directly those, I would rather introduce a `check` argument in `__call__` and do not use them in methods of `FiniteWord`.

Vincent



---

archive/issue_comments_222020.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-09-24T10:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222020",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_222021.json:
```json
{
    "body": "> 1) what is the point of\n\nYou are right, I will change that.\n\n> 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. \n\nOkay, I see and agree.\n\nBut still `__call__` is much slower because it guesses the datatype. I will check with a check argument whether it is better...",
    "created_at": "2014-09-24T22:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222021",
    "user": "slabbe"
}
```

> 1) what is the point of

You are right, I will change that.

> 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. 

Okay, I see and agree.

But still `__call__` is much slower because it guesses the datatype. I will check with a check argument whether it is better...



---

archive/issue_comments_222022.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-09-24T22:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222022",
    "user": "slabbe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_222023.json:
```json
{
    "body": "Replying to [comment:4 slabbe]:\n> > 1) what is the point of\n> \n> You are right, I will change that.\n> \n> > 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. \n> \n> Okay, I see and agree.\n> \n> But still `__call__` is much slower because it guesses the datatype. I will check with a check argument whether it is better...\n\nNot if `datatype` is properly set in input, no? You can assume that with a `check=False`, if the datatype is provided then there is no need to check that the data fits.\n\nVincent",
    "created_at": "2014-09-25T07:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222023",
    "user": "vdelecroix"
}
```

Replying to [comment:4 slabbe]:
> > 1) what is the point of
> 
> You are right, I will change that.
> 
> > 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. 
> 
> Okay, I see and agree.
> 
> But still `__call__` is much slower because it guesses the datatype. I will check with a check argument whether it is better...

Not if `datatype` is properly set in input, no? You can assume that with a `check=False`, if the datatype is provided then there is no need to check that the data fits.

Vincent



---

archive/issue_comments_222024.json:
```json
{
    "body": "> 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). \n\nWhat do you think if we do the following (automatically use char instead of list)?\n\n\n```diff\n    @lazy_attribute\n    def _element_classes(self):\n\n        [...]\n\n        # test whether or not we can use the class Finiteword_char\n        if (self.alphabet().cardinality() <= 256 and\n                all(isinstance(i, (int,Integer)) and 0 <= i < 256 for i in self.alphabet())):\n            L = self.alphabet().list()\n            if (all(L[i] < L[i+1] for i in range(len(L)-1)) and\n                    all(self.cmp_letters(L[i],L[i+1]) == -1 for i in range(len(L)-1))):\n                classes['FiniteWord_char'] = word.FiniteWord_char\n+               classes['FiniteWord_list'] = word.FiniteWord_char\n```\n\n\nWell, maybe it is bad since we won't be able to compare char with list anymore...",
    "created_at": "2014-09-26T10:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222024",
    "user": "slabbe"
}
```

> 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). 

What do you think if we do the following (automatically use char instead of list)?


```diff
    @lazy_attribute
    def _element_classes(self):

        [...]

        # test whether or not we can use the class Finiteword_char
        if (self.alphabet().cardinality() <= 256 and
                all(isinstance(i, (int,Integer)) and 0 <= i < 256 for i in self.alphabet())):
            L = self.alphabet().list()
            if (all(L[i] < L[i+1] for i in range(len(L)-1)) and
                    all(self.cmp_letters(L[i],L[i+1]) == -1 for i in range(len(L)-1))):
                classes['FiniteWord_char'] = word.FiniteWord_char
+               classes['FiniteWord_list'] = word.FiniteWord_char
```


Well, maybe it is bad since we won't be able to compare char with list anymore...



---

archive/issue_comments_222025.json:
```json
{
    "body": "Replying to [comment:7 slabbe]:\n> > 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). \n> \n> What do you think if we do the following (automatically use char instead of list)?\n>\n> [...]\n \nI already proposed that and you answered: \"and what if I really want a `Word_list`?\" If you want to go that way, we can even remove all the classes and always return `Word_char` whatever the input is. It is definitely the simplest but of course only concerns alphabet included in [0,255[.\n\nVincent",
    "created_at": "2014-09-26T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222025",
    "user": "vdelecroix"
}
```

Replying to [comment:7 slabbe]:
> > 2) Calling directly `.finite_word_tuple()` or `.finite_word_list()` from the methods in `FiniteWord` is bad. Doing that you impose the return type to be `FiniteWord_list` or `FiniteWord_tuple` (you might prefer a `FiniteWord_char` sometimes). 
> 
> What do you think if we do the following (automatically use char instead of list)?
>
> [...]
 
I already proposed that and you answered: "and what if I really want a `Word_list`?" If you want to go that way, we can even remove all the classes and always return `Word_char` whatever the input is. It is definitely the simplest but of course only concerns alphabet included in [0,255[.

Vincent



---

archive/issue_comments_222026.json:
```json
{
    "body": "There is no new commit, is that ok?",
    "created_at": "2014-09-28T14:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222026",
    "user": "vdelecroix"
}
```

There is no new commit, is that ok?



---

archive/issue_comments_222027.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-28T14:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222027",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222028.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-09-28T14:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222028",
    "user": "slabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222029.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-09-28T16:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222029",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_222030.json:
```json
{
    "body": "Hello,\n\nMuch cleaner than before! Great!\n\nAre you sure this is worth it\n\n```\nsage: W = Words([0,1,2])\nsage: l = [0,1,0]*100\nsage: timeit(\"w = W(l, datatype='list', check=False)\", number=2000)\n2000 loops, best of 3: 2.17 \u00b5s per loop\nsage: timeit(\"w = W._word_from_list(l)\", number=2000)\n2000 loops, best of 3: 1.55 \u00b5s per loop\nsage: cls = W._element_classes['FiniteWord_list']\nsage: timeit(\"w = cls(W,l)\", number=2000)\n2000 loops, best of 3: 717 ns per loop\n```\n\nHaving 20% gain with a method that is twice slower than calling the class constructor looks useless. If you want speed, use the classes themselves.\n\nThe name `_word_from_list_or_char` is more than confusing. For me `from` is about the input not the output. I have nothing against a method `_word_from_list` which return whatever it wants, but I would expect it to raise an Error if the input is not a list.\n\nSometimes you use `MyWordClass(parent=self, data=data)` and sometimes `MyWordClass(parent, data)`. Is there a reason why?\n\nVincent",
    "created_at": "2014-09-28T16:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222030",
    "user": "vdelecroix"
}
```

Hello,

Much cleaner than before! Great!

Are you sure this is worth it

```
sage: W = Words([0,1,2])
sage: l = [0,1,0]*100
sage: timeit("w = W(l, datatype='list', check=False)", number=2000)
2000 loops, best of 3: 2.17 µs per loop
sage: timeit("w = W._word_from_list(l)", number=2000)
2000 loops, best of 3: 1.55 µs per loop
sage: cls = W._element_classes['FiniteWord_list']
sage: timeit("w = cls(W,l)", number=2000)
2000 loops, best of 3: 717 ns per loop
```

Having 20% gain with a method that is twice slower than calling the class constructor looks useless. If you want speed, use the classes themselves.

The name `_word_from_list_or_char` is more than confusing. For me `from` is about the input not the output. I have nothing against a method `_word_from_list` which return whatever it wants, but I would expect it to raise an Error if the input is not a list.

Sometimes you use `MyWordClass(parent=self, data=data)` and sometimes `MyWordClass(parent, data)`. Is there a reason why?

Vincent



---

archive/issue_comments_222031.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-28T18:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222031",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222032.json:
```json
{
    "body": "I kept `_word_from_word`, `_word_from_iter` and `_word_from_callable` because their code takes more than one line and the latter two are used two or three times in the `__call__` method.",
    "created_at": "2014-09-28T18:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222032",
    "user": "slabbe"
}
```

I kept `_word_from_word`, `_word_from_iter` and `_word_from_callable` because their code takes more than one line and the latter two are used two or three times in the `__call__` method.



---

archive/issue_comments_222033.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-09-28T18:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222033",
    "user": "slabbe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_222034.json:
```json
{
    "body": "Hi Sebastien,\n\nI added a commit which removes some trailing whitespaces and allow to use `Word_char` when the input data is a tuple.\n\nIf you are happy with it, set to positive review.\n\nVincent\n----\nNew commits:",
    "created_at": "2014-09-28T22:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222034",
    "user": "vdelecroix"
}
```

Hi Sebastien,

I added a commit which removes some trailing whitespaces and allow to use `Word_char` when the input data is a tuple.

If you are happy with it, set to positive review.

Vincent
----
New commits:



---

archive/issue_comments_222035.json:
```json
{
    "body": "okay!",
    "created_at": "2014-09-28T22:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222035",
    "user": "slabbe"
}
```

okay!



---

archive/issue_comments_222036.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-28T22:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222036",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222037.json:
```json
{
    "body": "\n```\nsage -t --long --warn-long 62.5 src/sage/combinat/permutation.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 src/sage/combinat/parking_functions.py  # 62 doctests failed\n```\n",
    "created_at": "2014-09-29T13:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222037",
    "user": "vbraun"
}
```


```
sage -t --long --warn-long 62.5 src/sage/combinat/permutation.py  # 1 doctest failed
sage -t --long --warn-long 62.5 src/sage/combinat/parking_functions.py  # 62 doctests failed
```




---

archive/issue_comments_222038.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-09-29T13:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222038",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_222039.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-29T14:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222039",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222040.json:
```json
{
    "body": "Hi Sebastien,\n\nSo `CombinatorialObject` is still used as input ;-( I added a special case for it in the `__call__`.\n\nVincent",
    "created_at": "2014-09-29T14:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222040",
    "user": "vdelecroix"
}
```

Hi Sebastien,

So `CombinatorialObject` is still used as input ;-( I added a special case for it in the `__call__`.

Vincent



---

archive/issue_comments_222041.json:
```json
{
    "body": "`import is_iterator` ?",
    "created_at": "2014-09-29T14:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222041",
    "user": "slabbe"
}
```

`import is_iterator` ?



---

archive/issue_comments_222042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-09-29T15:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222043.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-09-29T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222043",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222044.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-09-29T16:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222044",
    "user": "slabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222045.json:
```json
{
    "body": "Hey Sebastien,\n\nAre you happy with that version? The tests in combinat pass at home.\n\nVincent",
    "created_at": "2014-09-29T16:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222045",
    "user": "vdelecroix"
}
```

Hey Sebastien,

Are you happy with that version? The tests in combinat pass at home.

Vincent



---

archive/issue_comments_222046.json:
```json
{
    "body": "Test in combinat pass here too. I was waiting for the buildbot. It says \"success\", but I can not check if all of tests in the sage library passed. Can you see it?\n\nS\u00e9bastien",
    "created_at": "2014-09-29T16:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222046",
    "user": "slabbe"
}
```

Test in combinat pass here too. I was waiting for the buildbot. It says "success", but I can not check if all of tests in the sage library passed. Can you see it?

Sébastien



---

archive/issue_comments_222047.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-29T16:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222047",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222048.json:
```json
{
    "body": "Nope. But at least it pass where it failed before... I set to positive review.\n\nI do not know whether the build bot runs the test or only try to compile and run.\n\nVincent",
    "created_at": "2014-09-29T16:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222048",
    "user": "vdelecroix"
}
```

Nope. But at least it pass where it failed before... I set to positive review.

I do not know whether the build bot runs the test or only try to compile and run.

Vincent



---

archive/issue_comments_222049.json:
```json
{
    "body": "I tried `make doc-clean` and `sage -docbuild reference html` and I get the following error:\n\n\n```\n...\n[combinat ] writing output... [ 98%] sage/databases/oeis                                               \n[combinat ] writing output... [ 98%] species                                                           \n[combinat ] writing output... [ 99%] symmetric_functions                                               \n[combinat ] writing output... [ 99%] tableaux                                                          \n[combinat ] writing output... [100%] words                                                             \n[combinat ] None:38: WARNING: citation not found: Schiffmann                                           \nError building the documentation.                                                                      \nTraceback (most recent call last):                                                                     \n  File \"/Users/slabbe/Applications/sage-git/src/doc/common/builder.py\", line 1491, in <module>         \n    getattr(get_builder(name), type)()                                                                 \n  File \"/Users/slabbe/Applications/sage-git/src/doc/common/builder.py\", line 503, in _wrapper          \n    x.get(99999)                                                                                       \n  File \"/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value                                                                                  \nOSError: [combinat ] None:38: WARNING: citation not found: Schiffmann\n```\n\n\nBut I get the same error on a clean version of `sage-6.4.beta4`. So it is not related to us. Also:\n\n\n```\nsage: search_src('Schiffman')      \nalgebras/hall_algebra.py:114:    See section 2.3 in [Schiffmann]_, and sections II.2 and III.3     \nalgebras/hall_algebra.py:211:    .. [Schiffmann] Oliver Schiffmann. *Lectures on Hall algebras*.   \nalgebras/hall_algebra.py:465:            corresponding to `\\lambda`. See Lemma 2.8 in [Schiffmann]_\ncombinat/hall_polynomial.py:66:    in [Schiffmann]_):                                              \n```\n\n\nThe part on words did not raised any warning or errors. So still positive review.",
    "created_at": "2014-09-29T17:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222049",
    "user": "slabbe"
}
```

I tried `make doc-clean` and `sage -docbuild reference html` and I get the following error:


```
...
[combinat ] writing output... [ 98%] sage/databases/oeis                                               
[combinat ] writing output... [ 98%] species                                                           
[combinat ] writing output... [ 99%] symmetric_functions                                               
[combinat ] writing output... [ 99%] tableaux                                                          
[combinat ] writing output... [100%] words                                                             
[combinat ] None:38: WARNING: citation not found: Schiffmann                                           
Error building the documentation.                                                                      
Traceback (most recent call last):                                                                     
  File "/Users/slabbe/Applications/sage-git/src/doc/common/builder.py", line 1491, in <module>         
    getattr(get_builder(name), type)()                                                                 
  File "/Users/slabbe/Applications/sage-git/src/doc/common/builder.py", line 503, in _wrapper          
    x.get(99999)                                                                                       
  File "/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value                                                                                  
OSError: [combinat ] None:38: WARNING: citation not found: Schiffmann
```


But I get the same error on a clean version of `sage-6.4.beta4`. So it is not related to us. Also:


```
sage: search_src('Schiffman')      
algebras/hall_algebra.py:114:    See section 2.3 in [Schiffmann]_, and sections II.2 and III.3     
algebras/hall_algebra.py:211:    .. [Schiffmann] Oliver Schiffmann. *Lectures on Hall algebras*.   
algebras/hall_algebra.py:465:            corresponding to `\lambda`. See Lemma 2.8 in [Schiffmann]_
combinat/hall_polynomial.py:66:    in [Schiffmann]_):                                              
```


The part on words did not raised any warning or errors. So still positive review.



---

archive/issue_comments_222050.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-02T16:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16784#issuecomment-222050",
    "user": "vbraun"
}
```

Resolution: fixed
