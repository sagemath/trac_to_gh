# Issue 24181: bug numerical_approx(2^(450232897/4888643760))

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2017-12-22 05:08:31

CC:  rws

Keywords: bug


```
sage: numerical_approx(2^(450232897/4888643760))
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-2-3c4e30ac02c1> in <module>()
----> 1 numerical_approx(Integer(2)**(Integer(450232897)/Integer(4888643760)))

/opt/sage/local/lib/python2.7/site-packages/sage/misc/functional.pyc in numerical_approx(x, prec, digits, algorithm)
   1406         return numerical_approx_generic(x, prec)
   1407     else:
-> 1408         return n(prec, algorithm=algorithm)
   1409 
   1410 n = numerical_approx

/opt/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.numerical_approx (build/cythonized/sage/symbolic/expression.cpp:36040)()
   5813 
   5814         s = DefiniteSumExpander(self)
-> 5815         cdef Expression x = self._parent(s())
   5816         from sage.rings.real_mpfr import RealField
   5817         R = RealField(prec)

/opt/sage/local/lib/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)
    216                 div = self.get_fake_div(ex)
    217                 return self.arithmetic(div, div.operato
--> 218             return self.arithmetic(ex, operator)
    219         elif operator in relation_operators:
    220             return self.relation(ex, operator)

/opt/sage/local/lib/python2.7/site-packages/sage/symbolic/expretic(self, ex, operator)
   1931             True
   1932         """
-> 1933         return reduce(operator, map(self, ex.operands()
   1934 
   1935     def composition(self, ex, operator):

/opt/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expd/cythonized/sage/symbolic/expression.cpp:26528)()
   3962                                relational_operator(base
   3963             else:
-> 3964                 x = g_pow(base._gobj, nexp._gobj)
   3965             return new_Expression_from_GEx(base._parent
   3966         if BOTH_ARE_ELEMENT(cl):

RuntimeError: 
```

The following works

```
sage: 2^(450232897/4888643760)
2^(450232897/4888643760)
sage: 2.0^(450232897/4888643760)
1.06591892580915
```



---

Comment by rws created at 2017-12-22 07:10:58

Wrong usage of MPZ size query functions in Pynac. Fixed in 0.7.15. If you cannot wait apply this patch: https://github.com/pynac/pynac/commit/163a26940a1a07aaea12ff82532a6c3ea4162c91.diff,


---

Comment by rws created at 2018-01-29 14:05:24

New commits:


---

Comment by rws created at 2018-01-29 14:07:30

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-01-29 14:46:49

Changing status from needs_review to positive_review.


---

Comment by git created at 2018-01-29 15:20:56

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2018-01-29 15:20:56

Changing status from positive_review to needs_review.


---

Comment by rws created at 2018-01-29 15:35:53

Ah that was a typo which I couldn't cancel fast enough, sorry.


---

Comment by rws created at 2018-01-29 15:40:14

Changing status from needs_review to positive_review.


---

Comment by rws created at 2018-01-29 15:40:14

New commits:


---

Comment by vbraun created at 2018-02-01 19:13:28

Resolution: fixed
