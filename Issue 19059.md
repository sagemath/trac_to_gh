# Issue 19059: Generating function in FindStat interface

Issue created by migration from Trac.

Original creator: stumpc5

Original creation time: 2015-09-26 12:37:07

CC:  mantepse




---

Comment by stumpc5 created at 2015-09-26 17:51:39

Changing keywords from "" to "FindStat, OEIS".


---

Comment by stumpc5 created at 2015-09-26 17:51:39

Changing type from PLEASE CHANGE to enhancement.


---

Comment by stumpc5 created at 2015-09-26 17:51:39

New commits:


---

Comment by git created at 2015-09-26 17:54:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-09-26 17:56:22

`@`mantepse, do I need to add the utf8 encoding in

```
self._generating_function = self._raw[FINDSTAT_STATISTIC_GENERATING_FUNCTION]
```

as in some of the other similar lines before?


---

Comment by git created at 2015-09-27 08:26:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-27 09:32:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-27 15:04:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-27 15:48:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-27 18:56:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-28 13:28:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-09-28 15:26:18

I think it would be better to have the commits `added name to json and pull it from there` and `added name_plural method` in a separate ticket.  Actually, I even have a bug to fix...


---

Comment by stumpc5 created at 2015-09-29 06:26:02

`@`mantepse If I now push the new `collections.json` without the `CollectionLevelsPrecomputed` field. Is then the current version of the interface braking? I guess so, right?


---

Comment by stumpc5 created at 2015-09-29 06:28:03

Replying to [comment:11 mantepse]:
> I think it would be better to have the commits `added name to json and pull it from there` and `added name_plural method` in a separate ticket.  Actually, I even have a bug to fix...

We can do that if you want...


---

Comment by stumpc5 created at 2015-09-29 07:17:11

Replying to [comment:13 stumpc5]:
> Replying to [comment:11 mantepse]:
> > I think it would be better to have the commits `added name to json and pull it from there` and `added name_plural method` in a separate ticket.  Actually, I even have a bug to fix...
> 
> We can do that if you want...

This is now #19307.


---

Comment by git created at 2015-09-29 07:21:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-09-29 07:31:11

Replying to [comment:12 stumpc5]:
> `@`mantepse If I now push the new `collections.json` without the `CollectionLevelsPrecomputed` field

Yes, if you do this then there is a breakage, although trivial to fix.  I'm afraid you can get rid of `CollectionLevelsPrecomputed` only after the trivial fix is merged, which will very likely take some time.

That's great that you thought of this!


---

Comment by git created at 2015-09-29 07:36:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-29 07:46:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-29 08:00:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-09-29 08:01:40

Changing status from new to needs_review.


---

Comment by stumpc5 created at 2015-09-29 08:01:40

Changing component from PLEASE CHANGE to packages: optional.


---

Comment by mantepse created at 2015-09-30 10:10:33

I fixed two trivial doctesting problems, and I have a few questions and suggestions:

1) the docstring of `oeis_search`

`Returns the OEIS search for the generating function of ``self``.`

could be improved: what's returned is actually the result of an OEIS search.  So perhaps:

`Search the OEIS for the generating function of the statistic.`

2) also, there should be an `OUTPUT` section, perhaps


```
OUTPUT:

- a tuple of OEIS sequences, see :meth:`OEIS.find_by_description` for more information.
```


3) not sure, but I think the blank-line `print` are unconventional.

4) the `EXAMPLES` section does not display correctly in html.


---

Comment by git created at 2015-09-30 10:16:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-04 19:43:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-04 19:48:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-04 19:58:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-04 19:59:03

New commits:


---

Comment by mantepse created at 2015-10-05 09:11:48

The html now looks almost fine, with the exception of the link to `OEIS.find_by_description()`, which does not work.

There is another, less minor thing: `generating_functions` currently only works for queries that yield statistics, i.e., of the form `findstat(number)`:

```
sage: s=findstat("Permutations", number_of_alignments); s
0: (St000222: The number of alignments of a permutation, [], 200)
sage: s.generating_functions()
...
AttributeError: 'FindStatStatistic' object has no attribute '_generating_function'

sage: s[0][0].generating_functions()
{2: 2,
 3: 3*q + 3,
 4: 12*q^2 + 8*q + 4,
 5: 20*q^4 + 45*q^3 + 35*q^2 + 15*q + 5,
 6: 100*q^6 + 180*q^5 + 198*q^4 + 140*q^3 + 72*q^2 + 24*q + 6}
```


While this is as expected, I think it shouldn't be that way.  In particular, if possible it would be nice to be able to use `oeis_search` even for new statistics.

Of course, this requires that the generating function is computed by the sage interface, and not retrieved from findstat.org.

I'll try to propose a patch shortly.


---

Comment by stumpc5 created at 2015-10-05 11:29:17

The generating function as list does not work for negative statistic values.


---

Comment by stumpc5 created at 2015-10-05 11:29:17

Changing status from needs_review to needs_work.


---

Comment by stumpc5 created at 2015-10-05 11:33:00

Replying to [comment:29 mantepse]:
> The html now looks almost fine, with the exception of the link to `OEIS.find_by_description()`, which does not work.

would you mind fixing this? I have built the documentation at the moment for a different ticket, so that would take me forever.

> There is another, less minor thing: `generating_functions` currently only works for queries that yield statistics, i.e., of the form `findstat(number)`:

Good catch! Looking forward to see your solution!

See also the other issue I just posted... I will provide a fix for that!


---

Comment by stumpc5 created at 2015-10-05 11:48:40

Here is another question concerning negative statistic values: so far, I had considered the generating function `2q + q^2` as the sequence `0,2,1` where the initial `0` corresponds to the constant term `0`. But if I consider negative statistic values, I might end up with the generating function `q^{-1} + 2q`, which I have to move to the sequence `1,0,2`.

So, should I always shift the sequence of a generating function such that it starts with the first nonzero term?

[I find this counter intuitive for nonnegative statistics, but it is unavoidable for partially negative statistics.]

Finally, it seems special wired if my generating functions are


```
f_1(q) = q^{-1} + q
f_2(q) = 2q + q^2
```

and then shift the first, but not the second, to finally get `1,0,1,0,2,1`.


---

Comment by mantepse created at 2015-10-05 11:59:08

I don't think I understand.  Where do you convert sequences to generating functions (or the other way round)?


---

Comment by stumpc5 created at 2015-10-05 12:09:43

The generating function is well-defined for any integer valued statistic (though it may be a Laurent polynomial). If I want to search the OEIS for the generating function of a statistic, I have to turn the generating function into a sequence, or indeed a linearized table T(n,k) where T(n,k) is the coefficient of `q^k` in the generating function of the n-th piece of the statistic (say the permutations of n or the Dyck paths of semilength n,...).

But since k \geq 0, this does not work for Laurent polynomials.


---

Comment by mantepse created at 2015-10-05 12:12:43

OK, so that's really a question on how to fine-tune oeis searches.  Don't you separate the individual generating functions with blanks?  If so, I would start with the first non-zero coefficient.


---

Comment by stumpc5 created at 2015-10-05 12:16:37

> OK, so that's really a question on how to fine-tune oeis searches. Don't you separate the individual generating functions with blanks? If so, I would start with the first non-zero coefficient.

Indeed I agree, and that's what I do already. But I would also like to use this functionality to provide a linear sequence and submit it to the OEIS. And for that I do not separate the individual generating functions.


---

Comment by stumpc5 created at 2015-10-05 12:17:35

But since this is not really an issue for the Sage interface to FindStat, I should maybe not consider it here...


---

Comment by mantepse created at 2015-10-05 12:37:54

I discovered an interesting user-interface problem: when doing a search for distribution FindStat does not expect that the objects within one block of values are all on the same level.  Eg, the following is a valid findstat query:

```
[1,2]
[2,1]
[1,2,3]
[1,3,2]
[2,1,3]
[2,3,1]
[3,1,2]
[3,2,1]
====> 1,1,2,2,2,2,2,2
```


But of course, in this case there is no way to compute the generating function...


---

Comment by stumpc5 created at 2015-10-05 12:47:26

Replying to [comment:38 mantepse]:
> I discovered an interesting user-interface problem: when doing a search for distribution FindStat does not expect that the objects within one block of values are all on the same level.

What is the problem with that? I implemented this as a feature!
----
New commits:


---

Comment by stumpc5 created at 2015-10-05 12:48:57

Are you planning to remove all dependencies on `CollectionLevelsPrecomputed` in this ticket? I thought to have that in an indiviual ticket, but it's also fine this way...


---

Comment by git created at 2015-10-05 13:05:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-10-05 13:07:21

Could you please have a look?  The current solution uses the [http://FindStat.org](http://FindStat.org) delivered data for `findstat(number)`, and computes the gf's otherwise.


---

Comment by git created at 2015-10-05 13:16:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-05 13:17:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-05 13:32:32


```
sage: Pi = Permutations(3).list()*2
sage: st = findstat([Pi,[pi.major_index() for pi in Pi]])
hi
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: FindStat delivers more statistic values than the level has elements. This should not happen.  Please send and email to the developers.
```

Hm, that's too bad, isn't it?


---

Comment by stumpc5 created at 2015-10-05 13:36:38

Unsurprisingly, the same happens for

```
sage: st = findstat([(pi,pi.major_index()) for pi in Pi])
```

and even for

```
sage: st = findstat([(pi,pi.major_index()  ) for pi in Permutations(3)] +
                    [(pi,pi.major_index()+1) for pi in Permutations(3)]
                   )
```

The later is indeed **not a statistic at all**!


---

Comment by mantepse created at 2015-10-05 14:05:18

excellent, that's a bug in the preparation of `_data`


---

Comment by git created at 2015-10-05 14:12:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-05 14:15:09

Why did you add `if gfs[key]` to the loop `for key in sorted(gfs.keys())`? That seems to produce wrong outputs...


---

Comment by mantepse created at 2015-10-05 15:08:24

Because I made `compute_generating_functions` use `None` if there are values for the level, but not enough.  I guess that's stupid, so feel free to remove it.


---

Comment by stumpc5 created at 2015-10-05 17:19:20

what is the point of having the lines

```
if len(set(elements)) != len(elements):
    raise ValueError("FindStat expects that every object appears only once!")
```

twice? Making the first `if len(set(elements)) != len(elements)` into an `if len(set(all_elements)) != len(all_elements)` should make the second obsolete. Or am I overseeing sth. or do you not like that?
----
New commits:


---

Comment by mantepse created at 2015-10-06 08:11:11

Well, you can change it if you like.  I didn't like to turn `all_elements` into a set on every iteration, that's all.  So, currently in every iteration we check that the elements in one block are distinct, and then we check that there is no element appearing in two different blocks.

We could actually simply delete the first check, that's probably clearest.


---

Comment by stumpc5 created at 2015-10-06 08:24:01

> We could actually simply delete the first check, that's probably clearest.

agreed and pushed.


---

Comment by stumpc5 created at 2015-10-06 08:40:33

I still don't know how to properly interact with the branches, but it seems that there is nothing better than constantly merging and changing the branch on trac...
----
New commits:


---

Comment by mantepse created at 2015-10-06 09:29:57

I have now removed `name_plural` and the change to `_name`, because they have a separate ticket and induced a doctest failure.

Do we need to open another ticket for the bugfix barking on duplicate objects?  (I do not care)  Otherwise, I think this is ready to go.  probably we need to doctest `compute_generating_functions` to make the patchbot happy.


---

Comment by stumpc5 created at 2015-10-06 09:44:51

Okay, if two tickets A and B do two different things, but to develop what I want in B I need A. How am I supposed to be doing that without merging A into B and having A as a dependency in B?
----
New commits:


---

Comment by git created at 2015-10-06 11:13:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-10-06 11:14:12

New commits:


---

Comment by mantepse created at 2015-10-06 11:14:12

Changing status from needs_work to positive_review.


---

Comment by stumpc5 created at 2015-10-07 07:11:25

Changing status from positive_review to needs_info.


---

Comment by stumpc5 created at 2015-10-07 07:11:25

Sorry to get back to this, but `if len(set(all_elements)) != len(all_elements)` assumes the elements to be hashable.

FindStat internally this is totally fine, but that makes the following, very natural, findstat search fail:

```
sage: findstat( { g:g.wiener_index() for g in Graphs(4) if g.is_connected() } )
---------------------------------------------------------------------------
...
TypeError: This graph is mutable, and thus not hashable. Create an immutable copy by `g.copy(immutable=True)`
```

It will obviously take much longer to do the uniqueness test in a list, but I guess it's worth it. What do you think?


---

Comment by mantepse created at 2015-10-08 06:11:56

The line you sent won't even work if you correct the typo (`Graphs` -> `graphs`) and omit `findstat`.

But otherwise you are right.  Possibly we should normalize the keys at the beginning, maybe even store the string representations.


---

Comment by stumpc5 created at 2015-10-08 08:10:53

I don't know how I got that line wrong, it should read

```
findstat([ (g,g.wiener_index()) for g in graphs(4) if g.is_connected() ])
```

and now only the findstat hashing causes the problem (and it was working without this ticket).

> Possibly we should normalize the keys at the beginning, maybe even store the string representations.

+1. Are you going to work on this and the addition of the `set_first_terms`, or should I do one/both of these?


---

Comment by git created at 2015-10-09 07:20:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-09 07:48:49

Wow, that's a whole lot of code for a bug I would have fixed by changing one line (but I am not saying my solution would have been the better)!

I wonder:

> Derzeit werden alle normalisiert, auch wenn's 17 Millionen sind

- Are really more normalized than used? A search should be restricted to `FINDSTAT_MAX_???` and a new statistic to `FINDSTAT_MAX_***`. Do you now normalize also all the others?

- is it really better (implementation-wise and time-wise) to store also all string representations than to check whether some list is duplicate-free? Or are you / do you plan using that string representation also somewhere else?


---

Comment by mantepse created at 2015-10-09 13:21:33

>> Wow, that's a whole lot of code for a bug I would have fixed by changing one line (but I am not saying my solution would have been the better)!

I'd be interested in seeing your solution.

>> I wonder:

> Derzeit werden alle normalisiert, auch wenn's 17 Millionen sind
>
>> Are really more normalized than used? A search should be restricted to `FINDSTAT_MAX_???` and a new statistic to `FINDSTAT_MAX_***`. Do you now normalize also all the others? 

I'm afraid so.  However, if the normalization really takes too long, I would move the code in `_find_by_values` that restricts the amount of data to `FINDSTAT_MAX_???` to `FindStat.__call__` and only normalize those data which are sent to FindStat.  If there is no problem, I certainly do not want to do this. 

>> is it really better (implementation-wise and time-wise) to store also all string representations than to check whether some list is duplicate-free? Or are you / do you plan using that string representation also somewhere else? 

How could I check without normalization that the list contains no duplicates?


---

Comment by stumpc5 created at 2015-10-09 13:29:56

Just a quick issue along the way:

```
sage: S = Permutations()
sage: a,b,c = S([1,2,3]),S([1,3,2]),S([2,1,3])
sage: findstat( [([a],[1]),([b],[1])] )
a new statistic on Cc0001: Permutations
```

Shouldn't that return an error as too little values are given?


---

Comment by stumpc5 created at 2015-10-09 13:35:37

Okay, the following is really nice as you do it:

```
sage: g = Graph([[1,2],[2,3]])
sage: h = Graph([[1,3],[2,3]])
sage: i = Graph([[1,3],[2,3],[2,4]])
sage: findstat( [([g,h,i],[1,1,1])] )
---------------------------------------------------------------------------
...
ValueError: FindStat expects that every object occurs at most once.
```

There is no change to do that without your normalization procedure. I was suggesting only to replace the `len(set(all_entries)) == len(all_entries)` by a short method to check that `all_entries` is a duplicate-free list. That is a one-liner and does what we did before slower but for non-hashable objects. But it does also not achieve the normalization.

As long as the timings are okay (and I haven't seen any issues so far, but sending a zillion might be a problem) I am happy with your solution...


---

Comment by mantepse created at 2015-10-09 13:52:19

Replying to [comment:73 stumpc5]:
> Just a quick issue along the way:
> {{{
> sage: S = Permutations()
> sage: a,b,c = S([1,2,3]),S([1,3,2]),S([2,1,3])
> sage: findstat( [([a],[1]),([b],[1])] )
> a new statistic on Cc0001: Permutations
> }}}
> Shouldn't that return an error as too little values are given?

Yes, and if you look closely you'll see already a doctest that doesn't know how to fail yet :-)


---

Comment by stumpc5 created at 2015-10-09 13:54:31

Replying to [comment:73 stumpc5]:
> Shouldn't that return an error as too little values are given?

I just checked: FindStat internally, it is allowed to send less than 3 entries, but it does not capture anything since only hits with 3 or more coincidences are returned. I think that's okay to leave. Anyway, I will add a check that not too little information is sent...

Am I right that you are not touching the file currently?


---

Comment by stumpc5 created at 2015-10-09 14:01:31

Before I do the change: is

```
# this might go wrong:
try:
    assert data != []
except:
    raise ValueError("after discarding elements not in the range, and keeping less than %s values, nothing remained to send to FindStat." %FINDSTAT_MAX_VALUES)
```

any better than

```
if data == []:
    raise ValueError("after discarding elements not in the range, and keeping less than %s values, nothing remained to send to FindStat." %FINDSTAT_MAX_VALUES)
```

I would otherwise do

```
if len(data) < FINDSTAT_MIN_VALUES:
    raise ValueError("After discarding elements not in the range, too little (=%s) values remained to send to FindStat." %FINDSTAT_MIN_VALUES)
```



---

Comment by mantepse created at 2015-10-09 14:06:51

ad 0: no, I'm not going to touch the file.

ad 1: no, I like the second version (yours) much better.

ad 2: OK, except that your test is not correct, you need the sum of the lengths of the lists in data.


---

Comment by git created at 2015-10-09 14:19:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-09 14:36:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-09 14:41:36

Seems ready for me for now. I did a few tests on graphs and the standardization doesn't seem to influence things too much. Let's wait for a user case complaining about that timing...


---

Comment by mantepse created at 2015-10-09 14:48:28

I have a few more docfixes, can I merge and push?


---

Comment by mantepse created at 2015-10-09 15:10:18

Changing status from needs_info to needs_review.


---

Comment by mantepse created at 2015-10-09 15:10:18

New commits:


---

Comment by mantepse created at 2015-10-13 07:44:01

Changing status from needs_review to positive_review.


---

Comment by mantepse created at 2015-10-13 07:44:01

New commits:


---

Comment by vbraun created at 2015-10-14 17:05:26

merge conflict, wait for the next beta


---

Comment by vbraun created at 2015-10-14 17:05:26

Changing status from positive_review to needs_work.


---

Comment by mantepse created at 2015-10-15 07:19:17

Am I supposed to see the merge conflict somewhere?


---

Comment by stumpc5 created at 2015-10-15 07:36:32

It only touches `findstat.py` so I guess the conflict is with #19314. I will pull `6.9` in a bit and then see if I can find the conflict. Let me know if you have solved it before...


---

Comment by mantepse created at 2015-10-15 07:38:51

OK, I won't touch it.  Thanks!


---

Comment by git created at 2015-10-15 08:11:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-15 08:16:56

I cannot see any merge conflicts either when merging `6.9` into this branch. I might have to do with all our take-stuff-out-of-ticket-and-move-it-into-another-ticket-and-get-it-back-here thing, but I wouldn't know where it goes wrong.

For the record: the only file changed from `6.9` when merging this ticket is `src/sage/databases/findstat.py` and the merge went through cleanly.


---

Comment by git created at 2015-10-16 17:29:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by stumpc5 created at 2015-10-16 17:56:05

Changing status from needs_work to needs_review.


---

Comment by stumpc5 created at 2015-10-16 17:57:05

I merged the the newest develop and fixed the indeed occurring merge conflict. I usually do mistakes doing that (even though I try not to), so please have a brief look again before giving it a positive review.


---

Comment by stumpc5 created at 2015-10-23 15:24:00

Martin, could you have a quick look here and give it a positive review?


---

Comment by stumpc5 created at 2015-11-08 15:01:08

ping


---

Comment by jdemeyer created at 2015-11-09 20:16:40

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-11-09 20:16:40

Don't use `except:`, catch specific exceptions or use `except Exception:` to catch all standard exceptions.


---

Comment by mantepse created at 2015-11-10 09:53:11

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-11-10 10:29:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-11-10 10:32:04

I'm giving the parts Christian wrote positive review.


---

Comment by stumpc5 created at 2015-11-10 13:56:08

Changing status from needs_review to positive_review.


---

Comment by stumpc5 created at 2015-11-10 13:56:08

looks good to me, and the patchbot is happy...


---

Comment by jdemeyer created at 2015-11-10 15:06:35

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2015-11-10 15:06:35

This is silly:

```
try:
    assert foo
except AssertionError:
    raise ValueError(...)
```


it would be much better to write this is

```
if not foo:
    raise ValueError(...)
```

but really, I think you also want to catch `TypeError` from the `depth = int(depth)` call.

You should also add doctests for these bad inputs.


---

Comment by git created at 2015-11-11 07:35:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-11-11 07:36:44

Do you like this version better?  (I want to keep the argument checking of depth short and as one entity, that's why I did it this way.)


---

Comment by mantepse created at 2015-11-11 14:11:16

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2015-11-11 16:53:01

Fine for me.

Please remember that you should never use `except:`, as it is usually the wrong thing to do (it also catches `KeyboardInterrupt` for example).


---

Comment by vbraun created at 2015-11-12 00:15:52

Doctests must run without network access

```
sage -t --long src/sage/databases/findstat.py
**********************************************************************
File "src/sage/databases/findstat.py", line 486, in sage.databases.findstat.FindStat.__call__
Failed example:
    findstat("Permutations", 1)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: The given arguments, Permutations and 1, cannot be used for a FindStat search.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.databases.findstat.FindStat.__call__[3]>", line 1, in <module>
        findstat("Permutations", Integer(1))
      File "sage/misc/lazy_import.pyx", line 383, in sage.misc.lazy_import.LazyImport.__call__ (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/lazy_import.c:3593)
        return self._get_object()(*args, **kwds)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/findstat.py", line 613, in __call__
        (collection, to_str) = get_collection(None, query_1)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/findstat.py", line 515, in get_collection
        collection = FindStatCollection(element)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1239)
        return cls.classcall(cls, *args, **kwds)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/findstat.py", line 1861, in __classcall_private__
        return FindStatCollections()(entry)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1239)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1304, in sage.misc.cachefunc.WeakCachedFunction.__call__ (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:8470)
        w = self.f(*args, **kwds)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 493, in sage.misc.classcall_metaclass.typecall (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1665)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/findstat.py", line 2357, in __init__
        for j in json.load(urlopen(FINDSTAT_URL_DOWNLOADS_COLLECTIONS)):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 154, in urlopen
        return opener.open(url, data, timeout)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 431, in open
        response = self._open(req, data)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 449, in _open
        '_open', req)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 409, in _call_chain
        result = func(*args)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 1227, in http_open
        return self.do_open(httplib.HTTPConnection, req)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python/urllib2.py", line 1197, in do_open
        raise URLError(err)
    URLError: <urlopen error [Errno 110] Connection timed out>
**********************************************************************
1 item had failures:
   1 of   6 in sage.databases.findstat.FindStat.__call__
    [54 tests, 1 failure, 127.29 s]
```



---

Comment by vbraun created at 2015-11-12 00:15:52

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-11-12 07:35:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-11-12 07:35:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2015-11-12 07:36:35

Changing status from needs_work to positive_review.


---

Comment by mantepse created at 2015-11-12 07:36:35

Sorry about that, fixed.


---

Comment by vbraun created at 2015-11-12 22:44:28

Resolution: fixed
