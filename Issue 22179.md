# Issue 22179: Add .is_circumscribable() method to polytopes

Issue created by migration from https://trac.sagemath.org/ticket/22416

Original creator: jipilab

Original creation time: 2017-02-22 17:27:21

CC:  moritz mkoeppe

Keywords: polytope, circumcenter

A full-dimensional compact polytope is circumscribable if there exists a point in space which is equidistant to all its vertices.

This function checks if this point exists and returns it if asked for.


---

Comment by git created at 2017-02-23 09:21:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-23 09:25:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-02-23 09:27:00

Changing status from new to needs_review.


---

Comment by git created at 2017-02-23 09:29:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-23 09:48:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-27 22:47:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-02-27 22:50:30

Changing keywords from "polytope, circumcenter" to "polytope, circumcenter, days84".


---

Comment by git created at 2017-02-28 14:03:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2017-02-28 15:31:06

Here are few first small comments after first reading:

* you forgot to replace `certify` with `certificate` in the code of the function.
* _inscribable_ is about the possibility to find a combinatorially equivalent polytope that can be inscribed in a sphere. So, i guess the current method should be called `is_inscribed` instead (if you agree, do not forget to also modify the ticket title).
* i do not see any reason why the polytope should be full-dimensional. In case it is not, there might be various centers, but you could return the one that belongs to the affine hull of the polytope.
* you could be lazier by not constructing the list `other_vertices`, but an iterator instead (the `all` call might end far before testing all points).
* since you only do comparisons with the circumradius, you should not compute it, but use its square (computing the square root can be very costly in some rings).
* `row_data` shoud be `raw_data`.
* Why not returning a boolean when `certificate` is set to `False` ? The problem here is that `bool((False,None))` is `True`, so that this will cause issues if the method is used within `if` statements.


---

Comment by git created at 2017-02-28 16:02:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-28 16:27:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-02-28 16:36:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2017-02-28 19:08:16

Some more comments:

* The documentation should start with a one-sentence description, see http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings
* in describing the input, you should say that the default for `certificate` is False (look at other parts of Sage source code, as well as http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)
* the `OUTPUT` section should separate cases depending on the value of `certificate`.
* tests like `sage: q.is_inscribed(True)` could be misleading for the user. Where does the `True` comes from. You can write this since certificate is the first option, but it is not a required parameter, so you should prefer the more explicit `sage: q.is_inscribed(certificate=True)`.
* `simplex_vertices` works because you assume that the polytope is full-dimensional, you should add a short comment to explain that just before that command, so that we understand what happens (and it will ease the work of someone who might try to extend the method to non-full-dimensional polytopes).
* since you do not use `other_vertices` anymore, you should remove its definition
* you have:

```
if not self.is_compact() or not self.is_full_dimensional():
    raise NotImplementedError("This function is implemented for full-dimensional polytopes only.")
```

If the polyhedron is full-dimensional but not compact, the user will get a misleading message. So make two different tests/statements, this adds informations to the user.


---

Comment by git created at 2017-03-01 11:36:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2017-03-01 11:37:14

All test pass on 7.6.b4.


---

Comment by tscrim created at 2017-03-01 15:04:37

Two minor things. For the `INPUT:`, you should format it as:

```
        - ``certificate`` -- (default: ``False``) boolean; specifies whether to
          return the circumcenter, if found
```

Also, we don't technically consider error messages to be full sentences (at least the "shorter" ones like here) following Python's convention. So it should start with a lower case and not end with a period.


---

Comment by jipilab created at 2017-03-02 17:21:27

Thanks for the tip! Will do!


---

Comment by git created at 2017-03-02 17:27:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-03-03 08:04:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-03-04 12:28:37

ok, let it be


---

Comment by chapoton created at 2017-03-04 12:28:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-03-05 15:13:36

Resolution: fixed
