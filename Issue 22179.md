# Issue 22179: Add .is_circumscribable() method to polytopes

archive/issues_022179.json:
```json
{
    "body": "CC:  @mo271 @mkoeppe\n\nKeywords: polytope, circumcenter\n\nA full-dimensional compact polytope is circumscribable if there exists a point in space which is equidistant to all its vertices.\n\nThis function checks if this point exists and returns it if asked for.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22416\n\n",
    "created_at": "2017-02-22T17:27:21Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Add .is_circumscribable() method to polytopes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22179",
    "user": "https://github.com/jplab"
}
```
CC:  @mo271 @mkoeppe

Keywords: polytope, circumcenter

A full-dimensional compact polytope is circumscribable if there exists a point in space which is equidistant to all its vertices.

This function checks if this point exists and returns it if asked for.

Issue created by migration from https://trac.sagemath.org/ticket/22416





---

archive/issue_comments_307698.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-23T09:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307699.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-23T09:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307700.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-23T09:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307700",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_307701.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-23T09:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307702.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-23T09:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307702",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-27T22:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307704.json:
```json
{
    "body": "Changing keywords from \"polytope, circumcenter\" to \"polytope, circumcenter, days84\".",
    "created_at": "2017-02-27T22:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307704",
    "user": "https://github.com/jplab"
}
```

Changing keywords from "polytope, circumcenter" to "polytope, circumcenter, days84".



---

archive/issue_comments_307705.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T14:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307706.json:
```json
{
    "body": "Here are few first small comments after first reading:\n\n* you forgot to replace `certify` with `certificate` in the code of the function.\n* *inscribable* is about the possibility to find a combinatorially equivalent polytope that can be inscribed in a sphere. So, i guess the current method should be called `is_inscribed` instead (if you agree, do not forget to also modify the ticket title).\n* i do not see any reason why the polytope should be full-dimensional. In case it is not, there might be various centers, but you could return the one that belongs to the affine hull of the polytope.\n* you could be lazier by not constructing the list `other_vertices`, but an iterator instead (the `all` call might end far before testing all points).\n* since you only do comparisons with the circumradius, you should not compute it, but use its square (computing the square root can be very costly in some rings).\n* `row_data` shoud be `raw_data`.\n* Why not returning a boolean when `certificate` is set to `False` ? The problem here is that `bool((False,None))` is `True`, so that this will cause issues if the method is used within `if` statements.",
    "created_at": "2017-02-28T15:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307706",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Here are few first small comments after first reading:

* you forgot to replace `certify` with `certificate` in the code of the function.
* *inscribable* is about the possibility to find a combinatorially equivalent polytope that can be inscribed in a sphere. So, i guess the current method should be called `is_inscribed` instead (if you agree, do not forget to also modify the ticket title).
* i do not see any reason why the polytope should be full-dimensional. In case it is not, there might be various centers, but you could return the one that belongs to the affine hull of the polytope.
* you could be lazier by not constructing the list `other_vertices`, but an iterator instead (the `all` call might end far before testing all points).
* since you only do comparisons with the circumradius, you should not compute it, but use its square (computing the square root can be very costly in some rings).
* `row_data` shoud be `raw_data`.
* Why not returning a boolean when `certificate` is set to `False` ? The problem here is that `bool((False,None))` is `True`, so that this will cause issues if the method is used within `if` statements.



---

archive/issue_comments_307707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T16:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307708.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T16:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307709.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-28T16:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307710.json:
```json
{
    "body": "Some more comments:\n\n* The documentation should start with a one-sentence description, see http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n* in describing the input, you should say that the default for `certificate` is False (look at other parts of Sage source code, as well as http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)\n* the `OUTPUT` section should separate cases depending on the value of `certificate`.\n* tests like `sage: q.is_inscribed(True)` could be misleading for the user. Where does the `True` comes from. You can write this since certificate is the first option, but it is not a required parameter, so you should prefer the more explicit `sage: q.is_inscribed(certificate=True)`.\n* `simplex_vertices` works because you assume that the polytope is full-dimensional, you should add a short comment to explain that just before that command, so that we understand what happens (and it will ease the work of someone who might try to extend the method to non-full-dimensional polytopes).\n* since you do not use `other_vertices` anymore, you should remove its definition\n* you have:\n\n```\nif not self.is_compact() or not self.is_full_dimensional():\n    raise NotImplementedError(\"This function is implemented for full-dimensional polytopes only.\")\n```\n\nIf the polyhedron is full-dimensional but not compact, the user will get a misleading message. So make two different tests/statements, this adds informations to the user.",
    "created_at": "2017-02-28T19:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307710",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Some more comments:

* The documentation should start with a one-sentence description, see http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings
* in describing the input, you should say that the default for `certificate` is False (look at other parts of Sage source code, as well as http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings)
* the `OUTPUT` section should separate cases depending on the value of `certificate`.
* tests like `sage: q.is_inscribed(True)` could be misleading for the user. Where does the `True` comes from. You can write this since certificate is the first option, but it is not a required parameter, so you should prefer the more explicit `sage: q.is_inscribed(certificate=True)`.
* `simplex_vertices` works because you assume that the polytope is full-dimensional, you should add a short comment to explain that just before that command, so that we understand what happens (and it will ease the work of someone who might try to extend the method to non-full-dimensional polytopes).
* since you do not use `other_vertices` anymore, you should remove its definition
* you have:

```
if not self.is_compact() or not self.is_full_dimensional():
    raise NotImplementedError("This function is implemented for full-dimensional polytopes only.")
```

If the polyhedron is full-dimensional but not compact, the user will get a misleading message. So make two different tests/statements, this adds informations to the user.



---

archive/issue_comments_307711.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-01T11:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307712.json:
```json
{
    "body": "All test pass on 7.6.b4.",
    "created_at": "2017-03-01T11:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307712",
    "user": "https://github.com/jplab"
}
```

All test pass on 7.6.b4.



---

archive/issue_comments_307713.json:
```json
{
    "body": "Two minor things. For the `INPUT:`, you should format it as:\n\n```\n        - ``certificate`` -- (default: ``False``) boolean; specifies whether to\n          return the circumcenter, if found\n```\n\nAlso, we don't technically consider error messages to be full sentences (at least the \"shorter\" ones like here) following Python's convention. So it should start with a lower case and not end with a period.",
    "created_at": "2017-03-01T15:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307713",
    "user": "https://github.com/tscrim"
}
```

Two minor things. For the `INPUT:`, you should format it as:

```
        - ``certificate`` -- (default: ``False``) boolean; specifies whether to
          return the circumcenter, if found
```

Also, we don't technically consider error messages to be full sentences (at least the "shorter" ones like here) following Python's convention. So it should start with a lower case and not end with a period.



---

archive/issue_comments_307714.json:
```json
{
    "body": "Thanks for the tip! Will do!",
    "created_at": "2017-03-02T17:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307714",
    "user": "https://github.com/jplab"
}
```

Thanks for the tip! Will do!



---

archive/issue_comments_307715.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-02T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307716.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-03T08:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307717.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2017-03-04T12:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307717",
    "user": "https://github.com/fchapoton"
}
```

ok, let it be



---

archive/issue_comments_307718.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-04T12:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307718",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_058669.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-05T15:13:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22179#event-58669"
}
```



---

archive/issue_comments_307719.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-05T15:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22179#issuecomment-307719",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
