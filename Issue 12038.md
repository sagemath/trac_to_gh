# Issue 12038: GP(p) constructor should check primality of p only once

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-12-21 11:45:09

Assignee: was

Keywords: sd35

In the `FiniteField` constructor, it is first checked whether the order is a prime power, and then whether it is prime.  If the order is prime, this means that the primality of the order will be checked twice.


---

Comment by jdemeyer created at 2011-12-21 11:53:18

Changing status from new to needs_review.


---

Attachment


---

Comment by florian created at 2011-12-21 12:33:23

I'm currently reviewing this


---

Comment by florian created at 2011-12-21 22:13:36

For some reason the patch keep failing to apply, I've upgraded sage to 7.4.2 to be sure, but it still doesn't apply. I get


```
applying /storage/florian/12210_GF_p_is_prime.patch
patching file sage/rings/finite_rings/constructor.py
Hunk #1 FAILED at 288
Hunk #2 FAILED at 345
Hunk #3 FAILED at 381
3 out of 3 hunks FAILED -- saving rejects to file sage/rings/finite_rings/constructor.py.rej
abort: patch failed to apply

```

I'm assuming I'm doing something wrong or something, so someone else can take the reviewing over while I try to sort out the problem on my machine.


---

Comment by johanbosman created at 2011-12-21 23:06:22

I think you have to upgrade to 4.8.alpha4 to apply this.


---

Comment by jdemeyer created at 2011-12-22 12:38:32

It is because of #11784, you could try applying that patch first


---

Comment by mstreng created at 2012-01-05 13:03:42

Changing status from needs_review to positive_review.


---

Comment by mstreng created at 2012-01-05 13:03:42

All long tests pass on 4.8.alpha4.


---

Comment by jdemeyer created at 2012-01-18 08:16:21

Resolution: fixed
