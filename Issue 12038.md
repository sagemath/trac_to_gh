# Issue 12038: GP(p) constructor should check primality of p only once

archive/issues_012038.json:
```json
{
    "body": "Assignee: @williamstein\n\nKeywords: sd35\n\nIn the `FiniteField` constructor, it is first checked whether the order is a prime power, and then whether it is prime.  If the order is prime, this means that the primality of the order will be checked twice.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12210\n\n",
    "created_at": "2011-12-21T11:45:09Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "GP(p) constructor should check primality of p only once",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12038",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: @williamstein

Keywords: sd35

In the `FiniteField` constructor, it is first checked whether the order is a prime power, and then whether it is prime.  If the order is prime, this means that the primality of the order will be checked twice.

Issue created by migration from https://trac.sagemath.org/ticket/12210





---

archive/issue_comments_138948.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-21T11:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138948",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_138949.json:
```json
{
    "body": "Attachment [12210_GF_p_is_prime.patch](tarball://root/attachments/some-uuid/ticket12210/12210_GF_p_is_prime.patch) by @jdemeyer created at 2011-12-21 11:53:33",
    "created_at": "2011-12-21T11:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138949",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [12210_GF_p_is_prime.patch](tarball://root/attachments/some-uuid/ticket12210/12210_GF_p_is_prime.patch) by @jdemeyer created at 2011-12-21 11:53:33



---

archive/issue_comments_138950.json:
```json
{
    "body": "I'm currently reviewing this",
    "created_at": "2011-12-21T12:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138950",
    "user": "https://trac.sagemath.org/admin/accounts/users/florian"
}
```

I'm currently reviewing this



---

archive/issue_comments_138951.json:
```json
{
    "body": "For some reason the patch keep failing to apply, I've upgraded sage to 7.4.2 to be sure, but it still doesn't apply. I get\n\n```\napplying /storage/florian/12210_GF_p_is_prime.patch\npatching file sage/rings/finite_rings/constructor.py\nHunk #1 FAILED at 288\nHunk #2 FAILED at 345\nHunk #3 FAILED at 381\n3 out of 3 hunks FAILED -- saving rejects to file sage/rings/finite_rings/constructor.py.rej\nabort: patch failed to apply\n\n```\nI'm assuming I'm doing something wrong or something, so someone else can take the reviewing over while I try to sort out the problem on my machine.",
    "created_at": "2011-12-21T22:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138951",
    "user": "https://trac.sagemath.org/admin/accounts/users/florian"
}
```

For some reason the patch keep failing to apply, I've upgraded sage to 7.4.2 to be sure, but it still doesn't apply. I get

```
applying /storage/florian/12210_GF_p_is_prime.patch
patching file sage/rings/finite_rings/constructor.py
Hunk #1 FAILED at 288
Hunk #2 FAILED at 345
Hunk #3 FAILED at 381
3 out of 3 hunks FAILED -- saving rejects to file sage/rings/finite_rings/constructor.py.rej
abort: patch failed to apply

```
I'm assuming I'm doing something wrong or something, so someone else can take the reviewing over while I try to sort out the problem on my machine.



---

archive/issue_comments_138952.json:
```json
{
    "body": "I think you have to upgrade to 4.8.alpha4 to apply this.",
    "created_at": "2011-12-21T23:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138952",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

I think you have to upgrade to 4.8.alpha4 to apply this.



---

archive/issue_comments_138953.json:
```json
{
    "body": "It is because of #11784, you could try applying that patch first",
    "created_at": "2011-12-22T12:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138953",
    "user": "https://github.com/jdemeyer"
}
```

It is because of #11784, you could try applying that patch first



---

archive/issue_comments_138954.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-05T13:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138954",
    "user": "https://github.com/mstreng"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_138955.json:
```json
{
    "body": "All long tests pass on 4.8.alpha4.",
    "created_at": "2012-01-05T13:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138955",
    "user": "https://github.com/mstreng"
}
```

All long tests pass on 4.8.alpha4.



---

archive/issue_events_032516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T13:08:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12038#event-32516"
}
```



---

archive/issue_events_032517.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:16:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12038#event-32517"
}
```



---

archive/issue_comments_138956.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-18T08:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12038#issuecomment-138956",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
