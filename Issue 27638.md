# Issue 27638: Cythonize graph methods

archive/issues_027638.json:
```json
{
    "body": "Keywords: gsoc19\n\nThis ticket aims at Cythonizing several methods in the graph module of sage in order for them to work faster.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27875\n\n",
    "created_at": "2019-05-27T09:00:21Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Cythonize graph methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27638",
    "user": "@giorgosgiapis"
}
```
Keywords: gsoc19

This ticket aims at Cythonizing several methods in the graph module of sage in order for them to work faster.

Issue created by migration from https://trac.sagemath.org/ticket/27875





---

archive/issue_comments_390182.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-27T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390182",
    "user": "@giorgosgiapis"
}
```

New commits:



---

archive/issue_comments_390183.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-28T11:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390183",
    "user": "@giorgosgiapis"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_390184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-28T13:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390184",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390185.json:
```json
{
    "body": "So far you just moved the methods to a `.pyx` file and specified the type of some variables. Have you tried to go deeper in the code in order to get significant speed up improvements ? May be some data structures could be changed.",
    "created_at": "2019-05-29T08:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390185",
    "user": "@dcoudert"
}
```

So far you just moved the methods to a `.pyx` file and specified the type of some variables. Have you tried to go deeper in the code in order to get significant speed up improvements ? May be some data structures could be changed.



---

archive/issue_comments_390186.json:
```json
{
    "body": "Replying to [comment:6 dcoudert]:\n> So far you just moved the methods to a `.pyx` file and specified the type of some variables. Have you tried to go deeper in the code in order to get significant speed up improvements ? May be some data structures could be changed.\nI will look into it. I did some benchmarking and even with these improvements, it seems that the methods run a bit faster.",
    "created_at": "2019-05-29T09:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390186",
    "user": "@giorgosgiapis"
}
```

Replying to [comment:6 dcoudert]:
> So far you just moved the methods to a `.pyx` file and specified the type of some variables. Have you tried to go deeper in the code in order to get significant speed up improvements ? May be some data structures could be changed.
I will look into it. I did some benchmarking and even with these improvements, it seems that the methods run a bit faster.



---

archive/issue_comments_390187.json:
```json
{
    "body": "> I will look into it. I did some benchmarking and even with these improvements, it seems that the methods run a bit faster. \nThat's for sure, but we cythonize if there is a significant speed-up or reduction of memory consumption. Otherwise, the benefit is rather limited.",
    "created_at": "2019-05-30T09:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390187",
    "user": "@dcoudert"
}
```

> I will look into it. I did some benchmarking and even with these improvements, it seems that the methods run a bit faster. 
That's for sure, but we cythonize if there is a significant speed-up or reduction of memory consumption. Otherwise, the benefit is rather limited.



---

archive/issue_comments_390188.json:
```json
{
    "body": "Any progress on improving the code ?",
    "created_at": "2019-06-12T14:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390188",
    "user": "@dcoudert"
}
```

Any progress on improving the code ?



---

archive/issue_comments_390189.json:
```json
{
    "body": "Please change that.\n- `G.add_vertices(self.edges(labels=labels))` -> `G.add_vertices(self.edge_iterator(labels=labels))`",
    "created_at": "2019-07-06T13:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390189",
    "user": "@dcoudert"
}
```

Please change that.
- `G.add_vertices(self.edges(labels=labels))` -> `G.add_vertices(self.edge_iterator(labels=labels))`



---

archive/issue_comments_390190.json:
```json
{
    "body": "There is a merge conflict.",
    "created_at": "2019-07-31T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390190",
    "user": "@dcoudert"
}
```

There is a merge conflict.



---

archive/issue_comments_390191.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-31T15:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390191",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390192.json:
```json
{
    "body": "I think the merge conflict is fixed.",
    "created_at": "2019-07-31T15:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390192",
    "user": "@giorgosgiapis"
}
```

I think the merge conflict is fixed.



---

archive/issue_comments_390193.json:
```json
{
    "body": "your branch contains several modifications in `src/module_list.py` that should not be here. Please check.",
    "created_at": "2019-07-31T15:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390193",
    "user": "@dcoudert"
}
```

your branch contains several modifications in `src/module_list.py` that should not be here. Please check.



---

archive/issue_comments_390194.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-31T15:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390194",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390195.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-31T15:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390195",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390196.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-31T15:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390196",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390197.json:
```json
{
    "body": "I think it's ok now.",
    "created_at": "2019-07-31T15:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390197",
    "user": "@giorgosgiapis"
}
```

I think it's ok now.



---

archive/issue_comments_390198.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-31T16:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390198",
    "user": "@dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_390199.json:
```json
{
    "body": "LGTM.",
    "created_at": "2019-07-31T16:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390199",
    "user": "@dcoudert"
}
```

LGTM.



---

archive/issue_comments_390200.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-03T23:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27638",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27638#issuecomment-390200",
    "user": "@vbraun"
}
```

Resolution: fixed
