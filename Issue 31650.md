# Issue 31650: an integral crashes Giac and Sage

Issue created by migration from https://trac.sagemath.org/ticket/31887

Original creator: @mwageringel

Original creation time: 2021-05-31 19:35:21

CC:  parisse

Keywords: integrate, giac, integral

As reported in this [ask-sage question](https://ask.sagemath.org/question/57331/why-using-giac-via-libgiac-crashes-sagemath-when-giac-crashes/), the following integral crashes with Giac 1.7.0:

```
    sage: integrand=(x+(1+x)^(1/2))^(1/2)/(x^2+1)/(1+x)^(1/2)
    sage: integrate(integrand, x, algorithm="giac")
    Giac crashed -- automatically restarting.
    sage0*x
```

When using libgiac, Sage crashes as well:

```
    sage: from sage.libs.giac import libgiac
    sage: libgiac.integrate(integrand, x)

    [Process exited 139]
```

With Giac 1.6.0.47 which is in Sage 9.3, one gets some output:

```
sage: libgiac.integrate(integrand, x)
  ***   Warning: increasing stack size to 2048000.
Bad conditionned root j= 13 value 2.7174396231e+43+1.3659091552e+44*i ratio infinity mindist 5.4348792462e+43
  ***   Warning: increasing stack size to 2048000.
  ***   Warning: increasing stack size to 4096000.
  ***   Warning: increasing stack size to 2048000.
  ***   Warning: increasing stack size to 4096000.
  ***   Warning: increasing stack size to 8192000.
  ***   Warning: increasing stack size to 16384000.
Warning, integration of abs or sign assumes constant sign by intervals (correct if the argument is real):
Check [abs(t_nostep)]
  ***   Warning: increasing stack size to 2048000.
Bad conditionned root j= 13 value 2.7174396231e+43+1.3659091552e+44*i ratio infinity mindist 5.4348792462e+43
  ***   Warning: increasing stack size to 2048000.
  ***   Warning: increasing stack size to 2048000.
  ***   Warning: increasing stack size to 4096000.
  ***   Warning: increasing stack size to 8192000.
  ***   Warning: increasing stack size to 16384000.
Warning, integration of abs or sign assumes constant sign by intervals (correct if the argument is real):
Check [abs(t_nostep)]
---------------------------------------------------------------------------
...
RuntimeError: iquo Error: Bad Argument Type
```



---

Comment by edgarcosta created at 2021-06-04 14:42:27

Running on OSX, I also get similar issues due to conversion.
Full traceback: https://gist.github.com/edgarcosta/6ba59b0f53a94455f83c2166288cb479
Relevant bit:

```
TypeError: An error occurred running a Giac command:
INPUT:
sage2:=int(sage0,x):;
OUTPUT:
  ***   Warning: increasing stack size to 2048000.
Unable to convert to real -5.4348792461126750008981111610946592130*E43 Error: Bad Argument Value
Warning, integration of abs or sign assumes constant sign by intervals (correct if the argument is real):
Check [abs(t_nostep)]

Evaluation time: 2.12
"iquo Error: Bad Argument Type"
```

