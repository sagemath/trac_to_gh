# Issue 15378: Put ATLAS archdef tarballs into patches/ARCHS

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2014-01-01 17:23:20

CC:  vbraun dimpase

Keywords: atlas spkg archdef

Not sure why but it seems the tarballs we shipped did not make the git transition.


---

Comment by jpflori created at 2014-01-01 17:30:25

Ive take the opportunity to add an ARM archdef tarball as provided at http://math-atlas.sourceforge.net/errata.html#armhardfp
----
New commits:


---

Comment by jpflori created at 2014-01-01 17:30:25

Changing status from new to needs_review.


---

Comment by jpflori created at 2014-01-02 20:54:39

Changing keywords from "atlas spkg archdef" to "atlas spkg archdef cygwin".


---

Comment by jpflori created at 2014-01-02 20:54:39

The ATLAS-lib issue is surely my bad as it is already wrong in the sage 5.13 tarball...
This make ATLAS not so useful on Cygwin, whence the severity change.


---

Comment by jpflori created at 2014-01-02 20:54:39

Changing priority from major to critical.


---

Comment by vbraun created at 2014-01-03 06:38:13

Since we have to make our own ATLAS tarball anyways to embed lapack, I would be in favor of putting the archdef tarballs in there as well. Even though they are small, they are still binary stuff that we should keep out of the repo if possible.


---

Comment by git created at 2014-01-03 12:36:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-01-03 12:40:23

Replying to [comment:3 vbraun]:
> Since we have to make our own ATLAS tarball anyways to embed lapack, I would be in favor of putting the archdef tarballs in there as well. Even though they are small, they are still binary stuff that we should keep out of the repo if possible.
Yes, we also have to generate the autotools project an d put it in.
I'm not so found of not tracking and putting the archdefs tarballs into the ATLAS tarball as there is no easy way to generate them as for the autotools project, or getting them somewhere upstream as for the lapack tarball.


---

Comment by vbraun created at 2014-01-04 01:43:49

Putting them into our git repo doesn't make it easier to obtain the archdefs either, it jut puts binary crap into our repo. If anything, it makes it worse for non-Sage users to get the archdefs.


---

Comment by jpflori created at 2014-01-04 02:04:15

Ok, so let's just put them somewhere on sagemath...


---

Comment by git created at 2014-01-04 15:17:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-01-04 15:21:58

Ok, now the archef tarballs are within the "upstream" tarball.
I've taken the opportunity to add a Solaris archdef tarball.
I've slightly reworked the atlas related scripts.
Please review.


---

Comment by git created at 2014-01-04 18:23:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-01-04 18:24:11

I've put the current archdefs at http://boxen.math.washington.edu/home/jpflori/archdefs/


---

Comment by jpflori created at 2014-01-14 10:01:49

This fails to build on Cygwin64 when SAGE_FAT_BINARY is set, and is easy to fix: just don't force isa extensions as the win64 abi is not the same as the amd64 one and asm code cannot be assembled...


---

Comment by git created at 2014-01-14 14:58:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-01-20 16:15:34

Changing the tarball without the version (excluding the patchlevel) is not supported ATM, I think. We cache files in the upstream/ dir as `package-versionwithoutpatchlevel.tar.gz`, so this ticket would break builds for everybody who has the old tarball cached.

Either combine with an upstream version bump or wait until the build system can handle this case.

Apart from that, positive review ;-)


---

Comment by git created at 2014-01-28 17:55:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-01-28 17:58:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-02-01 19:39:23

Resolution: fixed
