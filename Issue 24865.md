# Issue 24865: Allow more digits in some outputs

Issue created by migration from https://trac.sagemath.org/ticket/25102

Original creator: saraedum

Original creation time: 2018-04-05 17:50:44

CC:  infinity0

this just allows a few additional digits in some outputs that apparently show up on Debian.

I know about "rel tol" but I am just following the pattern that is already used in many other places in these files.
    
These changes are used on the Debian builds to make these doctests pass. They are part of Debian's `u2-fix-trivial-test-cases.patch`.


---

Comment by saraedum created at 2018-04-05 17:51:09

I did not investigate where these digits come from. It does not hurt to allow more digits here I think.


---

Comment by git created at 2018-04-05 17:52:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-04-05 17:53:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by saraedum created at 2018-04-05 17:54:22

infinity0: Would you like to comment on where these digits come from? (in case you happen to know)


---

Comment by saraedum created at 2018-04-05 17:54:39

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-04-05 18:38:35

Positive review assuming that doctests pass.


---

Comment by jdemeyer created at 2018-04-05 18:38:35

Changing status from needs_review to positive_review.


---

Comment by infinity0 created at 2018-04-06 23:49:55

Unfortunately I don't know for sure where the extra digits come from, it may be due to different versions of numpy or something between Debian and what Sage expects.

If "rel tol" works for tuples that might be a better solution; I wrote these patches quickly to get stuff working and am not super familiar with the features of the testing framework.


---

Comment by jdemeyer created at 2018-05-17 12:50:31

Replying to [comment:8 infinity0]:
> If "rel tol" works for tuples that might be a better solution; I wrote these patches quickly to get stuff working and am not super familiar with the features of the testing framework.

For future reference: the `rel tol` stuff really works on the level of strings, analogous to the `...`. It doesn't understand the structure of the output, it just allows replacing floating-point numbers textually by different floating-point numbers. So yes, it works with tuples but also with anything else.


---

Comment by vbraun created at 2018-05-18 17:48:43

Resolution: fixed
