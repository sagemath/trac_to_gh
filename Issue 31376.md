# Issue 31376: ClusterAlgeba.greedy_element bug and further improvements

Issue created by migration from https://trac.sagemath.org/ticket/31613

Original creator: etn40ff

Original creation time: 2021-04-05 18:09:14

CC:  egunawan gmoose05 drupel

Keywords: Cluster Algebras, theta basis

Currently `ClusterAlgeba.greedy_element` gives wrong answers when mixing initial and non-initial cluster variables.

The code in this ticket started as a fix to these issues and ended up in a retooling of the whole greedy and theta basis framework.

With the proposed changes the code should be able to compute (in rank 2) theta basis elements, F-polynomials, and decompose any element in terms of theta basis elements.


---

Comment by etn40ff created at 2021-04-05 18:09:34

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-04-05 18:48:56

typo "decoposition"

missing empty line after EXAMPLES::

typo "biliinear"


---

Comment by git created at 2021-04-05 19:04:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by etn40ff created at 2021-04-05 19:05:29

Thank you Frédéric

S.


---

Comment by chapoton created at 2021-04-06 06:35:24

in `g_vector_to_d_vector(self, g)`, there is a superfluous "return d"


---

Comment by git created at 2021-04-06 06:44:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by etn40ff created at 2021-04-06 06:46:33

Replying to [comment:5 chapoton]:
> in `g_vector_to_d_vector(self, g)`, there is a superfluous "return d"

My bad: I missed that from an older implementation while cleaning up.


---

Comment by chapoton created at 2021-04-07 18:42:05

ok, let it be. I have no stamina for a serious mathematical review.


---

Comment by chapoton created at 2021-04-07 18:42:05

Changing status from needs_review to positive_review.


---

Comment by etn40ff created at 2021-04-07 20:14:59

Tnks


---

Comment by chapoton created at 2021-05-10 11:05:05

milestone to 9.4, as 9.3 has been released


---

Comment by vbraun created at 2021-06-06 13:18:28

Resolution: fixed
