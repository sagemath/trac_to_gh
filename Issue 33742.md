# Issue 33742: .roots() does not always return elements of the base ring

Issue created by migration from https://trac.sagemath.org/ticket/33979

Original creator: @maxale

Original creation time: 2022-06-11 17:24:16

We have:

```
sage: R.<x> = PolynomialRing(GF(7))
sage: print( (x-5).roots(multiplicities=False)[0].parent() is R.base_ring() )
True
```

but at the same time:

```
sage: R.<x> = PolynomialRing(Integers(21))
sage: print( (x-5).roots(multiplicities=False)[0].parent() is R.base_ring() )
False
```

In the latter example, `.roots()` returns elements of `ZZ` rather than `Integers(21)`.


---

Comment by @DaveWitteMorris created at 2022-06-12 02:33:04

Changing keywords from "" to "root, parent, IntegerModRing".


---

Comment by @DaveWitteMorris created at 2022-06-12 02:33:04

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2022-06-12 02:33:04

Thanks for reporting the bug. When the base ring is an `IntegerModRing`, the code finds integer roots and neglected to convert them to elements of the base ring.
----
New commits:


---

Comment by mmezzarobba created at 2022-06-16 14:40:31

lgtm!


---

Comment by mmezzarobba created at 2022-06-16 14:40:31

Changing status from needs_review to positive_review.


---

Comment by @DaveWitteMorris created at 2022-06-16 15:32:02

Thanks!

(I notice that one of the patchbots has doctest failures in src/sage/misc/sagedoc.py and src/sage/sage_docbuild/conf.py, but they seem to have nothing to do with this ticket.)


---

Comment by vbraun created at 2022-06-21 23:23:16

Resolution: fixed
