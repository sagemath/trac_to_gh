# Issue 19879: Random segfault in cysignals.signals.sig_raise_exception

Issue created by migration from https://trac.sagemath.org/ticket/20116

Original creator: vbraun

Original creation time: 2016-02-25 20:08:12

CC:  malb jdemeyer vdelecroix fbissey cpernet

Keywords: random_fail

Random failure on the buildbot (Ubuntu 14.04 32 bit)

```
sage -t --long src/sage/calculus/wester.py
**********************************************************************
File "src/sage/calculus/wester.py", line 483, in sage.calculus.wester
Failed example:
    m.eigenspaces_left()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.wester[161]>", line 1, in <module>
        m.eigenspaces_left()
      File "sage/matrix/matrix2.pyx", line 5474, in sage.matrix.matrix2.Matrix.eigenspaces_left (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:40098)
        G = self.fcp()   # factored characteristic polynomial
      File "sage/matrix/matrix2.pyx", line 2431, in sage.matrix.matrix2.Matrix.fcp (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:20985)
        return self.charpoly(var).factor()
      File "sage/matrix/matrix_rational_dense.pyx", line 946, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.charpoly (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_rational_dense.c:11037)
        f = A.charpoly(var, algorithm='linbox')
      File "sage/matrix/matrix_integer_dense.pyx", line 1252, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.charpoly (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:12798)
        g = self._charpoly_linbox(var)
      File "sage/matrix/matrix_integer_dense.pyx", line 1305, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._charpoly_linbox (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13598)
        return self._poly_linbox(var=var, typ='charpoly')
      File "sage/matrix/matrix_integer_dense.pyx", line 1328, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._poly_linbox (/mnt/highperf/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13957)
        sig_on()
      File "src/cysignals/signals.pyx", line 115, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1400)
    SignalError: Segmentation fault
**********************************************************************
1 item had failures:
   1 of 199 in sage.calculus.wester
    [198 tests, 1 failure, 2.79 s]
```



---

Comment by jdemeyer created at 2016-02-25 20:50:28

Just to clarify: did this happen while testing #17635?


---

Comment by vbraun created at 2016-02-25 21:12:14

No, only already-closed tickets are in there.


---

Comment by jdemeyer created at 2016-02-27 11:09:17

I just got this on sage-7.1.beta5, which look related:

```
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3807, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()  # long time (4s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[8]>", line 1, in <module>
        E.congruence_number()  # long time (4s on sage.math, 2011)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3847, in congruence_number
        V = W.complement().cuspidal_subspace()
      File "sage/misc/cachefunc.pyx", line 1909, in sage.misc.cachefunc.CachedMethodCaller.__call__ (build/cythonized/sage/misc/cachefunc.c:9941)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1785, in sage.misc.cachefunc.CachedMethodCaller._instance_call (build/cythonized/sage/misc/cachefunc.c:9408)
        return self.f(self._instance, *args, **kwds)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/modular/hecke/submodule.py", line 370, in complement
        g = T.charpoly('x')
      File "sage/matrix/matrix_rational_dense.pyx", line 946, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.charpoly (build/cythonized/sage/matrix/matrix_rational_dense.c:11037)
        f = A.charpoly(var, algorithm='linbox')
      File "sage/matrix/matrix_integer_dense.pyx", line 1252, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.charpoly (build/cythonized/sage/matrix/matrix_integer_dense.c:12798)
        g = self._charpoly_linbox(var)
      File "sage/matrix/matrix_integer_dense.pyx", line 1305, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._charpoly_linbox (build/cythonized/sage/matrix/matrix_integer_dense.c:13598)
        return self._poly_linbox(var=var, typ='charpoly')
      File "sage/matrix/matrix_integer_dense.pyx", line 1328, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._poly_linbox (build/cythonized/sage/matrix/matrix_integer_dense.c:13957)
        sig_on()
    MemoryError: failed to allocate 8589934600 bytes
**********************************************************************
```



---

Comment by jdemeyer created at 2016-02-27 11:14:24

Could #17075 somehow have caused this?
