# Issue 22525: py3: get rid of __cmp__ in quadratic forms

archive/issues_022525.json:
```json
{
    "body": "CC:  @tscrim @jm58660 @jdemeyer\n\nas another micro-step towards python3\n\nIssue created by migration from https://trac.sagemath.org/ticket/22762\n\n",
    "created_at": "2017-04-05T12:07:16Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: get rid of __cmp__ in quadratic forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22525",
    "user": "https://github.com/fchapoton"
}
```
CC:  @tscrim @jm58660 @jdemeyer

as another micro-step towards python3

Issue created by migration from https://trac.sagemath.org/ticket/22762





---

archive/issue_comments_313547.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313547",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_313548.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313548",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_313549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_313550.json:
```json
{
    "body": "Do we want to use ``@`total_ordering` on the class?",
    "created_at": "2017-04-05T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313550",
    "user": "https://github.com/tscrim"
}
```

Do we want to use ``@`total_ordering` on the class?



---

archive/issue_comments_313551.json:
```json
{
    "body": "What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.\n\nhttps://docs.python.org/3/library/stdtypes.html#comparisons",
    "created_at": "2017-04-06T06:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313551",
    "user": "https://github.com/fchapoton"
}
```

What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.

https://docs.python.org/3/library/stdtypes.html#comparisons



---

archive/issue_comments_313552.json:
```json
{
    "body": "That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.",
    "created_at": "2017-04-06T22:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313552",
    "user": "https://github.com/tscrim"
}
```

That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.



---

archive/issue_comments_313553.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2017-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313553",
    "user": "https://github.com/fchapoton"
}
```

green bot, please review



---

archive/issue_comments_313554.json:
```json
{
    "body": "I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.",
    "created_at": "2017-04-11T22:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313554",
    "user": "https://github.com/tscrim"
}
```

I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.



---

archive/issue_comments_313555.json:
```json
{
    "body": "`__lt__` is needed because we sometimes sort this kind of things\n\nwhat is the removed functionality ?",
    "created_at": "2017-04-16T09:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313555",
    "user": "https://github.com/fchapoton"
}
```

`__lt__` is needed because we sometimes sort this kind of things

what is the removed functionality ?



---

archive/issue_comments_313556.json:
```json
{
    "body": "For example, with this branch:\n\n```\nsage: P = BinaryQF([2,2,3])\nsage: Q = BinaryQF([1,2,3])\nsage: Q <= P\nFalse\n```\n\nIf this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?",
    "created_at": "2017-04-16T18:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313556",
    "user": "https://github.com/tscrim"
}
```

For example, with this branch:

```
sage: P = BinaryQF([2,2,3])
sage: Q = BinaryQF([1,2,3])
sage: Q <= P
False
```

If this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?



---

archive/issue_comments_313557.json:
```json
{
    "body": "I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.",
    "created_at": "2017-04-17T19:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313557",
    "user": "https://github.com/fchapoton"
}
```

I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.



---

archive/issue_comments_313558.json:
```json
{
    "body": "Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.",
    "created_at": "2017-04-17T23:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313558",
    "user": "https://github.com/tscrim"
}
```

Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.



---

archive/issue_comments_313559.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_313560.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313560",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_313561.json:
```json
{
    "body": "Thanks.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313561",
    "user": "https://github.com/tscrim"
}
```

Thanks.



---

archive/issue_comments_313562.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313562",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
