# Issue 22525: py3: get rid of __cmp__ in quadratic forms

archive/issues_022525.json:
```json
{
    "body": "CC:  tscrim jmantysalo jdemeyer\n\nas another micro-step towards python3\n\nIssue created by migration from https://trac.sagemath.org/ticket/22762\n\n",
    "created_at": "2017-04-05T12:07:16Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: get rid of __cmp__ in quadratic forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22525",
    "user": "chapoton"
}
```
CC:  tscrim jmantysalo jdemeyer

as another micro-step towards python3

Issue created by migration from https://trac.sagemath.org/ticket/22762





---

archive/issue_comments_313898.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313898",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_313899.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313899",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_313900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313900",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_313901.json:
```json
{
    "body": "Do we want to use ``@`total_ordering` on the class?",
    "created_at": "2017-04-05T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313901",
    "user": "tscrim"
}
```

Do we want to use ``@`total_ordering` on the class?



---

archive/issue_comments_313902.json:
```json
{
    "body": "What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.\n\nhttps://docs.python.org/3/library/stdtypes.html#comparisons",
    "created_at": "2017-04-06T06:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313902",
    "user": "chapoton"
}
```

What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.

https://docs.python.org/3/library/stdtypes.html#comparisons



---

archive/issue_comments_313903.json:
```json
{
    "body": "That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.",
    "created_at": "2017-04-06T22:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313903",
    "user": "tscrim"
}
```

That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.



---

archive/issue_comments_313904.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2017-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313904",
    "user": "chapoton"
}
```

green bot, please review



---

archive/issue_comments_313905.json:
```json
{
    "body": "I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.",
    "created_at": "2017-04-11T22:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313905",
    "user": "tscrim"
}
```

I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.



---

archive/issue_comments_313906.json:
```json
{
    "body": "`__lt__` is needed because we sometimes sort this kind of things\n\nwhat is the removed functionality ?",
    "created_at": "2017-04-16T09:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313906",
    "user": "chapoton"
}
```

`__lt__` is needed because we sometimes sort this kind of things

what is the removed functionality ?



---

archive/issue_comments_313907.json:
```json
{
    "body": "For example, with this branch:\n\n```\nsage: P = BinaryQF([2,2,3])\nsage: Q = BinaryQF([1,2,3])\nsage: Q <= P\nFalse\n```\n\nIf this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?",
    "created_at": "2017-04-16T18:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313907",
    "user": "tscrim"
}
```

For example, with this branch:

```
sage: P = BinaryQF([2,2,3])
sage: Q = BinaryQF([1,2,3])
sage: Q <= P
False
```

If this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?



---

archive/issue_comments_313908.json:
```json
{
    "body": "I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.",
    "created_at": "2017-04-17T19:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313908",
    "user": "chapoton"
}
```

I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.



---

archive/issue_comments_313909.json:
```json
{
    "body": "Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.",
    "created_at": "2017-04-17T23:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313909",
    "user": "tscrim"
}
```

Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.



---

archive/issue_comments_313910.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313910",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_313911.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313911",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_313912.json:
```json
{
    "body": "Thanks.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313912",
    "user": "tscrim"
}
```

Thanks.



---

archive/issue_comments_313913.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22525#issuecomment-313913",
    "user": "vbraun"
}
```

Resolution: fixed
