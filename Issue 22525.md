# Issue 22525: py3: get rid of __cmp__ in quadratic forms

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-04-05 12:07:16

CC:  tscrim jmantysalo jdemeyer

as another micro-step towards python3


---

Comment by chapoton created at 2017-04-05 12:08:01

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-04-05 12:08:01

New commits:


---

Comment by git created at 2017-04-05 12:08:56

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2017-04-05 16:22:35

Do we want to use ``@`total_ordering` on the class?


---

Comment by chapoton created at 2017-04-06 06:38:28

What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.

https://docs.python.org/3/library/stdtypes.html#comparisons


---

Comment by tscrim created at 2017-04-06 22:03:03

That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.


---

Comment by chapoton created at 2017-04-11 20:49:36

green bot, please review


---

Comment by tscrim created at 2017-04-11 22:18:19

I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.


---

Comment by chapoton created at 2017-04-16 09:09:46

`__lt__` is needed because we sometimes sort this kind of things

what is the removed functionality ?


---

Comment by tscrim created at 2017-04-16 18:03:25

For example, with this branch:

```
sage: P = BinaryQF([2,2,3])
sage: Q = BinaryQF([1,2,3])
sage: Q <= P
False
```

If this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?


---

Comment by chapoton created at 2017-04-17 19:14:08

I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.


---

Comment by tscrim created at 2017-04-17 23:42:31

Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.


---

Comment by git created at 2017-04-18 18:21:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-04-18 22:38:42

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-04-18 22:38:42

Thanks.


---

Comment by vbraun created at 2017-04-23 12:57:42

Resolution: fixed
