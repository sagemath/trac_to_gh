# Issue 30550: package modular_resolution: Split out from p_group_cohomology

archive/issues_030550.json:
```json
{
    "body": "CC:  simonking @dimpase @jhpalmieri @tscrim @kwankyu\n\nAs discussed in #28711#comment:64:\n\nWe split the current `p_group_cohomology` spkg:\n\nIn this ticket, we create the package `modular_resolution`, depending on meataxe-the-C-library, that installs\na standalone C library `libmodres.so` in `$SAGE_LOCAL/lib` and \nsome executables in `$SAGE_LOCAL/bin`, linked against `libmodres`\n\nIssue created by migration from https://trac.sagemath.org/ticket/30787\n\n",
    "created_at": "2020-10-17T22:57:53Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "package modular_resolution: Split out from p_group_cohomology",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30550",
    "user": "https://github.com/mkoeppe"
}
```
CC:  simonking @dimpase @jhpalmieri @tscrim @kwankyu

As discussed in #28711#comment:64:

We split the current `p_group_cohomology` spkg:

In this ticket, we create the package `modular_resolution`, depending on meataxe-the-C-library, that installs
a standalone C library `libmodres.so` in `$SAGE_LOCAL/lib` and 
some executables in `$SAGE_LOCAL/bin`, linked against `libmodres`

Issue created by migration from https://trac.sagemath.org/ticket/30787





---

archive/issue_comments_435758.json:
```json
{
    "body": "I'll start with summing up what the current p_group_cohomology spkg comprises and how the parts depend upon each other.\n1. the C library `libmodres`, which also links against `libmtx` and thus depends on the `meataxe` spkg, but not necessarily on `sage-meataxe`.\n2. some executables linked against `libmodres`\n3. some module for Singular, that should be installed in `SAGE_LOCAL/share/singular/LIB/` (that's where Singular expect modules)\n4. some package for GAP, which by #28711 should be installed in `SAGE_LOCAL/share/gap/pkg/` (that's where GAP expect packages)\n5. some database of cohomology rings, to be installed in `SAGE_LOCAL/share/pGroupCohomology` (could in principle be moved to somewhere else, but is data and thus shouldn't be in places like `SAGE_SRC`)\n6. some pip installable modules linked against `libmodres` and `libmtx` and also depending on `sage.matrix.matrix_gfpn_dense` being built and uses some Cython headers from `sage.structure`. The pip installable modules could in principle be put into the Sage src tree, analogously to `sage-meataxe`. 2.-5. are run time dependencies.",
    "created_at": "2020-10-20T07:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435758",
    "user": "https://github.com/simon-king-jena"
}
```

I'll start with summing up what the current p_group_cohomology spkg comprises and how the parts depend upon each other.
1. the C library `libmodres`, which also links against `libmtx` and thus depends on the `meataxe` spkg, but not necessarily on `sage-meataxe`.
2. some executables linked against `libmodres`
3. some module for Singular, that should be installed in `SAGE_LOCAL/share/singular/LIB/` (that's where Singular expect modules)
4. some package for GAP, which by #28711 should be installed in `SAGE_LOCAL/share/gap/pkg/` (that's where GAP expect packages)
5. some database of cohomology rings, to be installed in `SAGE_LOCAL/share/pGroupCohomology` (could in principle be moved to somewhere else, but is data and thus shouldn't be in places like `SAGE_SRC`)
6. some pip installable modules linked against `libmodres` and `libmtx` and also depending on `sage.matrix.matrix_gfpn_dense` being built and uses some Cython headers from `sage.structure`. The pip installable modules could in principle be put into the Sage src tree, analogously to `sage-meataxe`. 2.-5. are run time dependencies.



---

archive/issue_comments_435759.json:
```json
{
    "body": "Obviously, 1. and 2. from the previous comment should be in the new modular_resolution spkg. But at what point should 3.-5. be installed? Currently, 5. is installed when making modular_resolution, whereas 3.-4. are installed by p_group_cohomology's spkg-install.\n\nWould it be better to install ALL of 3.-5. by modular_resolution's spkg-install (not by the make file)? Or ALL of 3.-5. by p_group_cohomology's spkg-install? Or something else?",
    "created_at": "2020-10-20T07:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435759",
    "user": "https://github.com/simon-king-jena"
}
```

Obviously, 1. and 2. from the previous comment should be in the new modular_resolution spkg. But at what point should 3.-5. be installed? Currently, 5. is installed when making modular_resolution, whereas 3.-4. are installed by p_group_cohomology's spkg-install.

Would it be better to install ALL of 3.-5. by modular_resolution's spkg-install (not by the make file)? Or ALL of 3.-5. by p_group_cohomology's spkg-install? Or something else?



---

archive/issue_comments_435760.json:
```json
{
    "body": "The python/cython modules should be left alone, do not bundle anything with it please.\n\nHave you thought about upstreaming the Singular library?",
    "created_at": "2020-10-20T08:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435760",
    "user": "https://github.com/dimpase"
}
```

The python/cython modules should be left alone, do not bundle anything with it please.

Have you thought about upstreaming the Singular library?



---

archive/issue_comments_435761.json:
```json
{
    "body": "Replying to [comment:4 dimpase]:\n> The python/cython modules should be left alone, do not bundle anything with it please.\n> \n> Have you thought about upstreaming the Singular library?\n\nNo. I'm not sure if I should. It is about the computation of Dickson invariants, though. Since Singular has some capabilities of computing non-modular and modular invariant rings of finite group actions, it would somehow make sense to include it in Singular. (EDIT: I think I'll ask the Singular developers).\n\nConcerning the analogous question on the GAP package: In this case I think it makes no sense to make it an upstream package. It calls the executables of `modular_resolution`, writing initial data needed for p_group_cohomology into several files.",
    "created_at": "2020-10-20T08:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435761",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:4 dimpase]:
> The python/cython modules should be left alone, do not bundle anything with it please.
> 
> Have you thought about upstreaming the Singular library?

No. I'm not sure if I should. It is about the computation of Dickson invariants, though. Since Singular has some capabilities of computing non-modular and modular invariant rings of finite group actions, it would somehow make sense to include it in Singular. (EDIT: I think I'll ask the Singular developers).

Concerning the analogous question on the GAP package: In this case I think it makes no sense to make it an upstream package. It calls the executables of `modular_resolution`, writing initial data needed for p_group_cohomology into several files.



---

archive/issue_comments_435762.json:
```json
{
    "body": "Replying to [comment:5 SimonKing]:\n> \n> Concerning the analogous question on the GAP package: In this case I think it makes no sense to make it an upstream package. It calls the executables of `modular_resolution`, writing initial data needed for p_group_cohomology into several files.\n\nAn important consideration is the ability to have `spkg-check` - e.g. for instance you can bundle the GAP package with modular_resolution, so that you can easily write some tests (in GAP) for all of them.",
    "created_at": "2020-10-20T09:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435762",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 SimonKing]:
> 
> Concerning the analogous question on the GAP package: In this case I think it makes no sense to make it an upstream package. It calls the executables of `modular_resolution`, writing initial data needed for p_group_cohomology into several files.

An important consideration is the ability to have `spkg-check` - e.g. for instance you can bundle the GAP package with modular_resolution, so that you can easily write some tests (in GAP) for all of them.



---

archive/issue_comments_435763.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> An important consideration is the ability to have `spkg-check` - e.g. for instance you can bundle the GAP package with modular_resolution, so that you can easily write some tests (in GAP) for all of them. \n\nGood point!\n\nIf one bundles modular_resolution together with the cohomology database (which is currently the case) and with the GAP package, one could add the following self test: Call a function from the GAP package that uses an executable from modular_resolution to create initial data for, say, the cohomology ring of the dihedral group, which is part of the database, i.e., one can verify that the newly created initial data coincides what is found in the data base.",
    "created_at": "2020-10-20T09:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435763",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:6 dimpase]:
> An important consideration is the ability to have `spkg-check` - e.g. for instance you can bundle the GAP package with modular_resolution, so that you can easily write some tests (in GAP) for all of them. 

Good point!

If one bundles modular_resolution together with the cohomology database (which is currently the case) and with the GAP package, one could add the following self test: Call a function from the GAP package that uses an executable from modular_resolution to create initial data for, say, the cohomology ring of the dihedral group, which is part of the database, i.e., one can verify that the newly created initial data coincides what is found in the data base.



---

archive/issue_comments_435764.json:
```json
{
    "body": "Replying to [comment:3 SimonKing]:\n> Obviously, 1. and 2. from the previous comment should be in the new modular_resolution spkg. But at what point should 3.-5. be installed? Currently, 5. is installed when making modular_resolution, whereas 3.-4. are installed by p_group_cohomology's spkg-install.\n> \n> Would it be better to install ALL of 3.-5. by modular_resolution's spkg-install (not by the make file)? Or ALL of 3.-5. by p_group_cohomology's spkg-install? Or something else?\n\nparts 3.-4. are outside of the scope of this ticket.\n\npart 5. Is it used by 1.-2.? Then it should be included here; otherwise, outside of the scope of this ticket.",
    "created_at": "2020-10-20T15:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435764",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:3 SimonKing]:
> Obviously, 1. and 2. from the previous comment should be in the new modular_resolution spkg. But at what point should 3.-5. be installed? Currently, 5. is installed when making modular_resolution, whereas 3.-4. are installed by p_group_cohomology's spkg-install.
> 
> Would it be better to install ALL of 3.-5. by modular_resolution's spkg-install (not by the make file)? Or ALL of 3.-5. by p_group_cohomology's spkg-install? Or something else?

parts 3.-4. are outside of the scope of this ticket.

part 5. Is it used by 1.-2.? Then it should be included here; otherwise, outside of the scope of this ticket.



---

archive/issue_comments_435765.json:
```json
{
    "body": "Replying to [comment:8 mkoeppe]:\n> parts 3.-4. are outside of the scope of this ticket.\n\nYou argued in #28711, comment 58, that \"an spkg should either be a pip-installable Python package, or it should be a non-Python package (which can install anywhere in SAGE_LOCAL).\"\n\nIf I understand correctly, it means that not only the C library libmodres but also the database as well as the helpers for GAP and Singular shouldn't be installed by p_group_cohomology (whose main part IS pip-installable). So, 3.-5. should be split out as well and thus ARE in the scope of this ticket.\n\n> part 5. Is it used by 1.-2.? Then it should be included here; otherwise, outside of the scope of this ticket.\n\nThen tell me by what source the database should be provided, if it shouldn't be p_group_cohomology.",
    "created_at": "2020-10-20T16:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435765",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:8 mkoeppe]:
> parts 3.-4. are outside of the scope of this ticket.

You argued in #28711, comment 58, that "an spkg should either be a pip-installable Python package, or it should be a non-Python package (which can install anywhere in SAGE_LOCAL)."

If I understand correctly, it means that not only the C library libmodres but also the database as well as the helpers for GAP and Singular shouldn't be installed by p_group_cohomology (whose main part IS pip-installable). So, 3.-5. should be split out as well and thus ARE in the scope of this ticket.

> part 5. Is it used by 1.-2.? Then it should be included here; otherwise, outside of the scope of this ticket.

Then tell me by what source the database should be provided, if it shouldn't be p_group_cohomology.



---

archive/issue_comments_435766.json:
```json
{
    "body": "Replying to [comment:9 SimonKing]:\n> Replying to [comment:8 mkoeppe]:\n> > parts 3.-4. are outside of the scope of this ticket.\n> \n> You argued in #28711, comment 58, that \"an spkg should either be a pip-installable Python package, or it should be a non-Python package (which can install anywhere in SAGE_LOCAL).\"\n> \n> If I understand correctly, it means that not only the C library libmodres but also the database as well as the helpers for GAP and Singular shouldn't be installed by p_group_cohomology (whose main part IS pip-installable).\n\nYes, but this ticket is titled \"package modular_resolution: Split out from p_group_cohomology\", so it is more narrowly focused than a ticket titled \"Split p_group_cohomology into its irreducible components\".",
    "created_at": "2020-10-20T16:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435766",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:9 SimonKing]:
> Replying to [comment:8 mkoeppe]:
> > parts 3.-4. are outside of the scope of this ticket.
> 
> You argued in #28711, comment 58, that "an spkg should either be a pip-installable Python package, or it should be a non-Python package (which can install anywhere in SAGE_LOCAL)."
> 
> If I understand correctly, it means that not only the C library libmodres but also the database as well as the helpers for GAP and Singular shouldn't be installed by p_group_cohomology (whose main part IS pip-installable).

Yes, but this ticket is titled "package modular_resolution: Split out from p_group_cohomology", so it is more narrowly focused than a ticket titled "Split p_group_cohomology into its irreducible components".



---

archive/issue_comments_435767.json:
```json
{
    "body": "Replying to [comment:10 mkoeppe]:\n> Yes, but this ticket is titled \"package modular_resolution: Split out from p_group_cohomology\", so it is more narrowly focused than a ticket titled \"Split p_group_cohomology into its irreducible components\".\n\nI don't understand what you suggest.\n\nDo you suggest to change the title and description of the ticket? Or do you suggest to keep the Singular and Gap helpers in p_group_cohomology and additionally to move the database from modular_cohomology (that's where the database currently is) to p_group_cohomology, even though it is basically a pip installable module? Or something else?",
    "created_at": "2020-10-20T17:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435767",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:10 mkoeppe]:
> Yes, but this ticket is titled "package modular_resolution: Split out from p_group_cohomology", so it is more narrowly focused than a ticket titled "Split p_group_cohomology into its irreducible components".

I don't understand what you suggest.

Do you suggest to change the title and description of the ticket? Or do you suggest to keep the Singular and Gap helpers in p_group_cohomology and additionally to move the database from modular_cohomology (that's where the database currently is) to p_group_cohomology, even though it is basically a pip installable module? Or something else?



---

archive/issue_comments_435768.json:
```json
{
    "body": "Replying to [comment:11 SimonKing]:\n> Or do you suggest to keep the Singular and Gap helpers in p_group_cohomology\n\nYes, that's my suggestion for this ticket - to keep the ticket simple. Follow-up tickets can take care of further restructuring.\n\n> additionally to move the database from modular_cohomology (that's where the database currently is) to p_group_cohomology\n\nIf the `modular_cohomology` Makefile currently installs this database, there's probably no need to change it.",
    "created_at": "2020-10-20T17:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435768",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:11 SimonKing]:
> Or do you suggest to keep the Singular and Gap helpers in p_group_cohomology

Yes, that's my suggestion for this ticket - to keep the ticket simple. Follow-up tickets can take care of further restructuring.

> additionally to move the database from modular_cohomology (that's where the database currently is) to p_group_cohomology

If the `modular_cohomology` Makefile currently installs this database, there's probably no need to change it.



---

archive/issue_comments_435769.json:
```json
{
    "body": "If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.",
    "created_at": "2020-10-20T17:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435769",
    "user": "https://github.com/mkoeppe"
}
```

If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.



---

archive/issue_comments_435770.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.\n\nHow can this be done? I mean, I know where the database ends up. Makefile.am is\n\n```\nACLOCAL_AMFLAGS = -I m4\nSUBDIRS = src\n\ndbdir           = $(datadir)/pGroupCohomology\ndist_db_DATA    = group_cohomology_database.tar\n\ninstall-data-hook:\n\tcd $(DESTDIR)$(dbdir) && tar xf $(dist_db_DATA) && rm $(dist_db_DATA)\n\nuninstall-hook:\n\trm -r $(DESTDIR)$(dbdir)\n```\n\nand so the database will be in `$SAGE_LOCAL/share/pGroupCohomology`. But I guess a script returning that path (dependent on the value of `SAGE_LOCAL` is not what you suggest.\n\nIs there a standard script in the autotools ecosystem that would provide the correct value of `$(dbdir)` both during and after (staged) installation?",
    "created_at": "2020-10-20T19:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435770",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:13 mkoeppe]:
> If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.

How can this be done? I mean, I know where the database ends up. Makefile.am is

```
ACLOCAL_AMFLAGS = -I m4
SUBDIRS = src

dbdir           = $(datadir)/pGroupCohomology
dist_db_DATA    = group_cohomology_database.tar

install-data-hook:
	cd $(DESTDIR)$(dbdir) && tar xf $(dist_db_DATA) && rm $(dist_db_DATA)

uninstall-hook:
	rm -r $(DESTDIR)$(dbdir)
```

and so the database will be in `$SAGE_LOCAL/share/pGroupCohomology`. But I guess a script returning that path (dependent on the value of `SAGE_LOCAL` is not what you suggest.

Is there a standard script in the autotools ecosystem that would provide the correct value of `$(dbdir)` both during and after (staged) installation?



---

archive/issue_comments_435771.json:
```json
{
    "body": "Replying to [comment:14 SimonKing]:\n> Replying to [comment:13 mkoeppe]:\n> > If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.\n> \n> How can this be done? I mean, I know where the database ends up. Makefile.am is\n> {{{\n> ACLOCAL_AMFLAGS = -I m4\n> SUBDIRS = src\n> \n> dbdir           = $(datadir)/pGroupCohomology\n> dist_db_DATA    = group_cohomology_database.tar\n> \n> install-data-hook:\n> \tcd $(DESTDIR)$(dbdir) && tar xf $(dist_db_DATA) && rm $(dist_db_DATA)\n> \n> uninstall-hook:\n> \trm -r $(DESTDIR)$(dbdir)\n> }}}\n> and so the database will be in `$SAGE_LOCAL/share/pGroupCohomology`. But I guess a script returning that path (dependent on the value of `SAGE_LOCAL` is not what you suggest.\n\nNot depending on `SAGE_LOCAL` - the upstream package should make sense without Sage.\nRather, depending on the configured install prefix.\n\nLike this: Create template file `modres-config.in`\n{{{#! /bin/sh\necho \"@datadir@/pGroupCohomology\"\n```\n\nand add to configure.ac:\n\n```\nAC_CONFIG_FILES([modres-config], [chmod +x modres-config])\n```\n\n\n> Is there a standard script in the autotools ecosystem that would provide the correct \nvalue of `$(dbdir)` both during and after (staged) installation?\n\nNo, one would not want to read from DESTDIR.",
    "created_at": "2020-10-20T20:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435771",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:14 SimonKing]:
> Replying to [comment:13 mkoeppe]:
> > If the database is part of the `modular_resolution` package, I would suggest to install an executable script (perhaps `modres-config`) that reports the install location.
> 
> How can this be done? I mean, I know where the database ends up. Makefile.am is
> {{{
> ACLOCAL_AMFLAGS = -I m4
> SUBDIRS = src
> 
> dbdir           = $(datadir)/pGroupCohomology
> dist_db_DATA    = group_cohomology_database.tar
> 
> install-data-hook:
> 	cd $(DESTDIR)$(dbdir) && tar xf $(dist_db_DATA) && rm $(dist_db_DATA)
> 
> uninstall-hook:
> 	rm -r $(DESTDIR)$(dbdir)
> }}}
> and so the database will be in `$SAGE_LOCAL/share/pGroupCohomology`. But I guess a script returning that path (dependent on the value of `SAGE_LOCAL` is not what you suggest.

Not depending on `SAGE_LOCAL` - the upstream package should make sense without Sage.
Rather, depending on the configured install prefix.

Like this: Create template file `modres-config.in`
{{{#! /bin/sh
echo "@datadir@/pGroupCohomology"
```

and add to configure.ac:

```
AC_CONFIG_FILES([modres-config], [chmod +x modres-config])
```


> Is there a standard script in the autotools ecosystem that would provide the correct 
value of `$(dbdir)` both during and after (staged) installation?

No, one would not want to read from DESTDIR.



---

archive/issue_comments_435772.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> Like this: Create template file `modres-config.in`\n> {{{\n> #! /bin/sh\n> echo \"`@`datadir`@`/pGroupCohomology\"\n> }}}\n> and add to configure.ac:\n> {{{\n> AC_CONFIG_FILES([modres-config], [chmod +x modres-config])\n> }}}\n> \n> > Is there a standard script in the autotools ecosystem that would provide the correct \n> value of `$(dbdir)` both during and after (staged) installation?\n> \n> No, one would not want to read from DESTDIR.\n\nDo I understand correctly that the syntax ``@`datadir`@`` in `modres-config.in` makes it so that the value `$(datadir)` is inserted during creation of the `modres-config` script, so that calling it later provides the final destination of the database? Well, I simply didn't know how to achieve this and is what I meant by a \"standard script in the autotools ecosystem\".\n\nTo be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?",
    "created_at": "2020-10-20T20:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435772",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:15 mkoeppe]:
> Like this: Create template file `modres-config.in`
> {{{
> #! /bin/sh
> echo "`@`datadir`@`/pGroupCohomology"
> }}}
> and add to configure.ac:
> {{{
> AC_CONFIG_FILES([modres-config], [chmod +x modres-config])
> }}}
> 
> > Is there a standard script in the autotools ecosystem that would provide the correct 
> value of `$(dbdir)` both during and after (staged) installation?
> 
> No, one would not want to read from DESTDIR.

Do I understand correctly that the syntax ``@`datadir`@`` in `modres-config.in` makes it so that the value `$(datadir)` is inserted during creation of the `modres-config` script, so that calling it later provides the final destination of the database? Well, I simply didn't know how to achieve this and is what I meant by a "standard script in the autotools ecosystem".

To be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?



---

archive/issue_comments_435773.json:
```json
{
    "body": "Replying to [comment:16 SimonKing]:\n> Do I understand correctly that the syntax ``@`datadir`@`` in `modres-config.in` makes it so that the value `$(datadir)` is inserted during creation of the `modres-config` script, so that calling it later provides the final destination of the database? \n\nThat's right. `./configure` will create the file `modres-config`. There are, of course, many other ways to do it, like generating this simple script in an install-hook.\n\n> Well, I simply didn't know how to achieve this and is what I meant by a \"standard script in the autotools ecosystem\".\n\nOk, great; but note that it does not do anything about DESTDIR (and should not).\n\n> To be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?\n\nYes.",
    "created_at": "2020-10-20T20:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435773",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:16 SimonKing]:
> Do I understand correctly that the syntax ``@`datadir`@`` in `modres-config.in` makes it so that the value `$(datadir)` is inserted during creation of the `modres-config` script, so that calling it later provides the final destination of the database? 

That's right. `./configure` will create the file `modres-config`. There are, of course, many other ways to do it, like generating this simple script in an install-hook.

> Well, I simply didn't know how to achieve this and is what I meant by a "standard script in the autotools ecosystem".

Ok, great; but note that it does not do anything about DESTDIR (and should not).

> To be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?

Yes.



---

archive/issue_comments_435774.json:
```json
{
    "body": "Replying to [comment:17 mkoeppe]:\n> > To be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?\n> \n> Yes.\n\nIs this ticket only about creating a new `modular_resolution` spkg, or also to modify `p_group_cohomology` to use the new split-off spkg? Or shall the latter be done on a new ticket?\n\nWhile we are at it: Is there a recommended way (at least recommended in Sage) to read from the output of system calls in Python? `os.popen`, or `subprocess.Popen` or something else?",
    "created_at": "2020-10-20T21:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435774",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:17 mkoeppe]:
> > To be clear: Do you suggest that this script will be called by the Python/Cython modules to find out the location of the database?
> 
> Yes.

Is this ticket only about creating a new `modular_resolution` spkg, or also to modify `p_group_cohomology` to use the new split-off spkg? Or shall the latter be done on a new ticket?

While we are at it: Is there a recommended way (at least recommended in Sage) to read from the output of system calls in Python? `os.popen`, or `subprocess.Popen` or something else?



---

archive/issue_comments_435775.json:
```json
{
    "body": "Replying to [comment:18 SimonKing]:\n> Is this ticket only about creating a new `modular_resolution` spkg, or also to modify `p_group_cohomology` to use the new split-off spkg? Or shall the latter be done on a new ticket?\n\nBoth\n\n> While we are at it: Is there a recommended way (at least recommended in Sage) to read from the output of system calls in Python? `os.popen`, or `subprocess.Popen` or something else?\n\nI just learned the hard way how to write this portably for Python >= 3.6 (all our currently supported Python versions): Take a look at the most recent version (after #30758) of `src/sage/features/__init.py__` (`package_systems`).\n\n```\n        from subprocess import run, CalledProcessError, PIPE\n\n        try:\n            proc = run('sage-guess-package-system', shell=True, stdout=PIPE, stderr=PIPE, universal_newlines=True, check=True)\n            _cache_package_systems = [PackageSystem(proc.stdout.strip())]\n        except CalledProcessError:\n            pass\n```\n",
    "created_at": "2020-10-20T23:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435775",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:18 SimonKing]:
> Is this ticket only about creating a new `modular_resolution` spkg, or also to modify `p_group_cohomology` to use the new split-off spkg? Or shall the latter be done on a new ticket?

Both

> While we are at it: Is there a recommended way (at least recommended in Sage) to read from the output of system calls in Python? `os.popen`, or `subprocess.Popen` or something else?

I just learned the hard way how to write this portably for Python >= 3.6 (all our currently supported Python versions): Take a look at the most recent version (after #30758) of `src/sage/features/__init.py__` (`package_systems`).

```
        from subprocess import run, CalledProcessError, PIPE

        try:
            proc = run('sage-guess-package-system', shell=True, stdout=PIPE, stderr=PIPE, universal_newlines=True, check=True)
            _cache_package_systems = [PackageSystem(proc.stdout.strip())]
        except CalledProcessError:
            pass
```




---

archive/issue_comments_435776.json:
```json
{
    "body": "Why would one want to create a custom script `modres-config` instead of hooking this up on `pkg-config` ?\n(I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)\n\nThen the Python interface is already there (with Python module `pkgconfig` - see e.g. `src/sage/env.py`)",
    "created_at": "2020-10-21T09:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435776",
    "user": "https://github.com/dimpase"
}
```

Why would one want to create a custom script `modres-config` instead of hooking this up on `pkg-config` ?
(I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)

Then the Python interface is already there (with Python module `pkgconfig` - see e.g. `src/sage/env.py`)



---

archive/issue_comments_435777.json:
```json
{
    "body": "Replying to [comment:20 dimpase]:\n> Why would one want to create a custom script `modres-config` instead of hooking this up on `pkg-config` ?\n\nI have no preference.\n\n> (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)\n\nPlease do!",
    "created_at": "2020-10-21T09:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435777",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:20 dimpase]:
> Why would one want to create a custom script `modres-config` instead of hooking this up on `pkg-config` ?

I have no preference.

> (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)

Please do!



---

archive/issue_comments_435778.json:
```json
{
    "body": "We were discussing how to advertise the install location of the data files. Pkgconfig for the library would also be nice of course",
    "created_at": "2020-10-21T09:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435778",
    "user": "https://github.com/mkoeppe"
}
```

We were discussing how to advertise the install location of the data files. Pkgconfig for the library would also be nice of course



---

archive/issue_comments_435779.json:
```json
{
    "body": "Replying to [comment:21 SimonKing]:\n> > (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)\n> \n> Please do!\n\nIn particular, I have no idea how to make pkgconfig aware of an autotoolized library: `pkgconfig.list_all()` contains neither `libmtx` nor `mtx` nor `meataxe` nor `modres` nor `libmodres` nor `modular_resolution`, although meataxe and modular_resolution are installed.",
    "created_at": "2020-10-21T09:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435779",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:21 SimonKing]:
> > (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)
> 
> Please do!

In particular, I have no idea how to make pkgconfig aware of an autotoolized library: `pkgconfig.list_all()` contains neither `libmtx` nor `mtx` nor `meataxe` nor `modres` nor `libmodres` nor `modular_resolution`, although meataxe and modular_resolution are installed.



---

archive/issue_comments_435780.json:
```json
{
    "body": "Replying to [comment:23 SimonKing]:\n> Replying to [comment:21 SimonKing]:\n> > > (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)\n> > \n> > Please do!\n> \n> In particular, I have no idea how to make pkgconfig aware of an autotoolized library: `pkgconfig.list_all()` contains neither `libmtx` nor `mtx` nor `meataxe` nor `modres` nor `libmodres` nor `modular_resolution`, although meataxe and modular_resolution are installed.\n\nAs an example, have a look at e.g. https://github.com/cddlib/cddlib/pull/40\n(It changes a bit more than just adds `cddlib.pc` (adds some GMP-related stuff), so skip these parts)\nNamely, \n\n1. `Makefile.am` needed\n\n``` \npkgconfigdir       = $(libdir)/pkgconfig\npkgconfig_DATA     = cddlib.pc\n```\n\n\n2. `cddlib.pc.in` (a template) needed to be created\n\n3. `cddlib.pc` had to be added to the list in `AC_CONFIG_FILES`\n   \nAfter all this, `./configure` will fill in `cddlib.pc.in` and create `cddlib.pc`, which is then installed by `make install`.\nThen Python `pkgconfig` module will be aware of that .pc file, no problem.\n\nBy the way, you can have a custom variable in .pc file - in your case, say, the path to the database - and request it using\n`pkg-config --variable=... ...` calls (and from Python `pkgconfig` in a similar way)",
    "created_at": "2020-10-21T10:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435780",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:23 SimonKing]:
> Replying to [comment:21 SimonKing]:
> > > (I can show you the very easy autoconf/automake magic for this, I've done this for many projects used by Sage)
> > 
> > Please do!
> 
> In particular, I have no idea how to make pkgconfig aware of an autotoolized library: `pkgconfig.list_all()` contains neither `libmtx` nor `mtx` nor `meataxe` nor `modres` nor `libmodres` nor `modular_resolution`, although meataxe and modular_resolution are installed.

As an example, have a look at e.g. https://github.com/cddlib/cddlib/pull/40
(It changes a bit more than just adds `cddlib.pc` (adds some GMP-related stuff), so skip these parts)
Namely, 

1. `Makefile.am` needed

``` 
pkgconfigdir       = $(libdir)/pkgconfig
pkgconfig_DATA     = cddlib.pc
```


2. `cddlib.pc.in` (a template) needed to be created

3. `cddlib.pc` had to be added to the list in `AC_CONFIG_FILES`
   
After all this, `./configure` will fill in `cddlib.pc.in` and create `cddlib.pc`, which is then installed by `make install`.
Then Python `pkgconfig` module will be aware of that .pc file, no problem.

By the way, you can have a custom variable in .pc file - in your case, say, the path to the database - and request it using
`pkg-config --variable=... ...` calls (and from Python `pkgconfig` in a similar way)



---

archive/issue_comments_435781.json:
```json
{
    "body": "Thank you, Dima!\n\nI wonder: Should I add pkg-config to SharedMeatAxe as well? After all, meataxe uses arithmetic tables that are of course stored in some default folder, and currently its location is presented by an environment variable. This variable is needed by the meataxe executables (that are also part of the package), whereas libmtx uses a C variable for the same purpose.\n\nI took this design from the original `MeatAxe` from which I forked off `SharedMeatAxe`, but I've never been happy with it.\n\nOn the other hand, I'm not sure if pkg-config would be the right tool in this case: The location of the tables is in fact not determined by the autotoolised build system, but it is determined at run time -- and moreover the arithmetic tables are first created by spkg-postinst, not by the makefile of meataxe.",
    "created_at": "2020-10-21T10:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435781",
    "user": "https://github.com/simon-king-jena"
}
```

Thank you, Dima!

I wonder: Should I add pkg-config to SharedMeatAxe as well? After all, meataxe uses arithmetic tables that are of course stored in some default folder, and currently its location is presented by an environment variable. This variable is needed by the meataxe executables (that are also part of the package), whereas libmtx uses a C variable for the same purpose.

I took this design from the original `MeatAxe` from which I forked off `SharedMeatAxe`, but I've never been happy with it.

On the other hand, I'm not sure if pkg-config would be the right tool in this case: The location of the tables is in fact not determined by the autotoolised build system, but it is determined at run time -- and moreover the arithmetic tables are first created by spkg-postinst, not by the makefile of meataxe.



---

archive/issue_comments_435782.json:
```json
{
    "body": "Replying to [comment:25 SimonKing]:\n> Thank you, Dima!\n> \n> I wonder: Should I add pkg-config to SharedMeatAxe as well? After all, meataxe uses arithmetic tables that are of course stored in some default folder, and currently its location is presented by an environment variable. This variable is needed by the meataxe executables (that are also part of the package), whereas libmtx uses a C variable for the same purpose.\n\nIt certainly simplifies things, to be able to use pkg-config to  check the library. E.g. imagine meataxe library available as a Debian package, and then naturally one would want to use it rather than to build Sage's one...\n\nAs to location of the tables/databases, naturally, there is no standard. Although I imagine there are defaults set in libmtx and in meataxe executables.\n\n> \n> I took this design from the original `MeatAxe` from which I forked off `SharedMeatAxe`, but I've never been happy with it.\n> \n> On the other hand, I'm not sure if pkg-config would be the right tool in this case: The location of the tables is in fact not determined by the autotoolised build system, but it is determined at run time -- and moreover the arithmetic tables are first created by spkg-postinst, not by the makefile of meataxe.\n\nHow is this determination happening at runtime? Checking an environment variable? Or there is a default value?",
    "created_at": "2020-10-21T11:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435782",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:25 SimonKing]:
> Thank you, Dima!
> 
> I wonder: Should I add pkg-config to SharedMeatAxe as well? After all, meataxe uses arithmetic tables that are of course stored in some default folder, and currently its location is presented by an environment variable. This variable is needed by the meataxe executables (that are also part of the package), whereas libmtx uses a C variable for the same purpose.

It certainly simplifies things, to be able to use pkg-config to  check the library. E.g. imagine meataxe library available as a Debian package, and then naturally one would want to use it rather than to build Sage's one...

As to location of the tables/databases, naturally, there is no standard. Although I imagine there are defaults set in libmtx and in meataxe executables.

> 
> I took this design from the original `MeatAxe` from which I forked off `SharedMeatAxe`, but I've never been happy with it.
> 
> On the other hand, I'm not sure if pkg-config would be the right tool in this case: The location of the tables is in fact not determined by the autotoolised build system, but it is determined at run time -- and moreover the arithmetic tables are first created by spkg-postinst, not by the makefile of meataxe.

How is this determination happening at runtime? Checking an environment variable? Or there is a default value?



---

archive/issue_comments_435783.json:
```json
{
    "body": "Replying to [comment:26 dimpase]:\n> It certainly simplifies things, to be able to use pkg-config to  check the library. E.g. imagine meataxe library available as a Debian package, and then naturally one would want to use it rather than to build Sage's one...\n\nHowever, the location of the arithmetic tables does not depend on who built it. If the tables can not be found in the location specified by the environment variable MTXLIB resp. the C variable `MtxLibDir`, then it is attempted to read from `pwd`. And if this fails, it is attempted create new tables.\n\n> As to location of the tables/databases, naturally, there is no standard. Although I imagine there are defaults set in libmtx and in meataxe executables.\n\nThe default is the current directory (so, better not use the default!).\n\n> How is this determination happening at runtime? Checking an environment variable? Or there is a default value?\n\nActually I don't recall if there is a default value of the variable. You as a user of meataxe executables on the command line are supposed to assign a value to the environment variable, and you as a programmer of code linked against libmtx are supposed to assign a value to the C variable. Sage does both automatically, if you import from sage.libs.meataxe.\n\nSo, the user (Sage, in this case) has full control. If one fails to assign a value, then the current directory is used, or an error results (I don't recall).",
    "created_at": "2020-10-21T11:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435783",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:26 dimpase]:
> It certainly simplifies things, to be able to use pkg-config to  check the library. E.g. imagine meataxe library available as a Debian package, and then naturally one would want to use it rather than to build Sage's one...

However, the location of the arithmetic tables does not depend on who built it. If the tables can not be found in the location specified by the environment variable MTXLIB resp. the C variable `MtxLibDir`, then it is attempted to read from `pwd`. And if this fails, it is attempted create new tables.

> As to location of the tables/databases, naturally, there is no standard. Although I imagine there are defaults set in libmtx and in meataxe executables.

The default is the current directory (so, better not use the default!).

> How is this determination happening at runtime? Checking an environment variable? Or there is a default value?

Actually I don't recall if there is a default value of the variable. You as a user of meataxe executables on the command line are supposed to assign a value to the environment variable, and you as a programmer of code linked against libmtx are supposed to assign a value to the C variable. Sage does both automatically, if you import from sage.libs.meataxe.

So, the user (Sage, in this case) has full control. If one fails to assign a value, then the current directory is used, or an error results (I don't recall).



---

archive/issue_comments_435784.json:
```json
{
    "body": "Replying to [comment:24 dimpase]:\n> By the way, you can have a custom variable in .pc file - in your case, say, the path to the database - and request it using\n> `pkg-config --variable=... ...` calls (and from Python `pkgconfig` in a similar way)\n\nThis is a great point that I had forgotten about -- so `pkg-config` is a great solution for advertising the location of the data files too.",
    "created_at": "2020-10-21T18:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435784",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:24 dimpase]:
> By the way, you can have a custom variable in .pc file - in your case, say, the path to the database - and request it using
> `pkg-config --variable=... ...` calls (and from Python `pkgconfig` in a similar way)

This is a great point that I had forgotten about -- so `pkg-config` is a great solution for advertising the location of the data files too.



---

archive/issue_comments_435785.json:
```json
{
    "body": "I would suggest deferring the discussion about meataxe to a separate ticket",
    "created_at": "2020-10-21T18:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435785",
    "user": "https://github.com/mkoeppe"
}
```

I would suggest deferring the discussion about meataxe to a separate ticket



---

archive/issue_comments_435786.json:
```json
{
    "body": "Replying to [comment:29 mkoeppe]:\n> I would suggest deferring the discussion about meataxe to a separate ticket\n\nI wanted to know whether a new ticket makes sense at all, before opening it.",
    "created_at": "2020-10-21T19:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435786",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:29 mkoeppe]:
> I would suggest deferring the discussion about meataxe to a separate ticket

I wanted to know whether a new ticket makes sense at all, before opening it.



---

archive/issue_comments_435787.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435787",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_435788.json:
```json
{
    "body": "Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435788",
    "user": "https://github.com/mkoeppe"
}
```

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_435789.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435789",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_435790.json:
```json
{
    "body": "while working on #31404, and trying p_group_cohomology in the new setup, I saw that Singular has renamed `poly.lib` to `polylib.lib`.\nThis causes errors in the doctests, with Singular 4.2. Maybe a special ticket for such things? Also\nthe format of `dickson.lib` is old:\n\n```\n> LIB \"dickson.lib\";\n// ** loaded /mnt/opt/Sage/sage-dev/local/share/singular/LIB/dickson.lib \n// ** library dickson.lib has old format. This format is still accepted,\n// ** but for functionality you may wish to change to the new\n// ** format. Please refer to the manual for further information.\n// ** loaded /usr/bin/../share/singular/LIB/polylib.lib (4.2.0.0,Dec_2020)\n// ** redefining ringweights (LIB \"dickson.lib\";)\n// ** redefining ringweights (LIB \"dickson.lib\";)\n// ** loaded /usr/bin/../share/singular/LIB/ring.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/primdec.lib (4.2.0.0,Mar_2021)\n// ** loaded /usr/bin/../share/singular/LIB/absfact.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/triang.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/matrix.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/nctools.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/random.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/elim.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/inout.lib (4.1.2.0,Feb_2019)\n// ** loaded /usr/bin/../share/singular/LIB/general.lib (4.1.2.0,Feb_2019)\n> \n```\n",
    "created_at": "2021-09-10T13:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435790",
    "user": "https://github.com/dimpase"
}
```

while working on #31404, and trying p_group_cohomology in the new setup, I saw that Singular has renamed `poly.lib` to `polylib.lib`.
This causes errors in the doctests, with Singular 4.2. Maybe a special ticket for such things? Also
the format of `dickson.lib` is old:

```
> LIB "dickson.lib";
// ** loaded /mnt/opt/Sage/sage-dev/local/share/singular/LIB/dickson.lib 
// ** library dickson.lib has old format. This format is still accepted,
// ** but for functionality you may wish to change to the new
// ** format. Please refer to the manual for further information.
// ** loaded /usr/bin/../share/singular/LIB/polylib.lib (4.2.0.0,Dec_2020)
// ** redefining ringweights (LIB "dickson.lib";)
// ** redefining ringweights (LIB "dickson.lib";)
// ** loaded /usr/bin/../share/singular/LIB/ring.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/primdec.lib (4.2.0.0,Mar_2021)
// ** loaded /usr/bin/../share/singular/LIB/absfact.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/triang.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/matrix.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/nctools.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/random.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/elim.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/inout.lib (4.1.2.0,Feb_2019)
// ** loaded /usr/bin/../share/singular/LIB/general.lib (4.1.2.0,Feb_2019)
> 
```




---

archive/issue_comments_435791.json:
```json
{
    "body": "Replying to [comment:36 dimpase]:\n> while working on #31404, and trying p_group_cohomology in the new setup, I saw that Singular has renamed `poly.lib` to `polylib.lib`.\nThat's https://github.com/sagemath/p_group_cohomology/issues/4",
    "created_at": "2021-09-10T17:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435791",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:36 dimpase]:
> while working on #31404, and trying p_group_cohomology in the new setup, I saw that Singular has renamed `poly.lib` to `polylib.lib`.
That's https://github.com/sagemath/p_group_cohomology/issues/4



---

archive/issue_comments_435792.json:
```json
{
    "body": "For what it is worth, I am attaching a patch for p_group_cohomology/spkg-install.in\nand a patch (include_dir.patch) to be installed in p_group_cohomology/patches/.\n\nI was able to build the spkg with these changes.",
    "created_at": "2021-11-04T21:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435792",
    "user": "https://github.com/culler"
}
```

For what it is worth, I am attaching a patch for p_group_cohomology/spkg-install.in
and a patch (include_dir.patch) to be installed in p_group_cohomology/patches/.

I was able to build the spkg with these changes.



---

archive/issue_comments_435793.json:
```json
{
    "body": "patch for p_group_cohomology/spkg-install.in",
    "created_at": "2021-11-04T21:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435793",
    "user": "https://github.com/culler"
}
```

patch for p_group_cohomology/spkg-install.in



---

archive/issue_comments_435794.json:
```json
{
    "body": "Attachment [include_dir.patch](tarball://root/attachments/some-uuid/ticket30787/include_dir.patch) by @culler created at 2021-11-04 21:59:29\n\npatch to install in p_group_cohomology/patches",
    "created_at": "2021-11-04T21:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435794",
    "user": "https://github.com/culler"
}
```

Attachment [include_dir.patch](tarball://root/attachments/some-uuid/ticket30787/include_dir.patch) by @culler created at 2021-11-04 21:59:29

patch to install in p_group_cohomology/patches



---

archive/issue_comments_435795.json:
```json
{
    "body": "`p_group_cohomology` build fails on Linux 9.6.beta3, with or without the `@`culler's patches.\nI opened #33474 to fix this.",
    "created_at": "2022-03-07T06:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435795",
    "user": "https://github.com/dimpase"
}
```

`p_group_cohomology` build fails on Linux 9.6.beta3, with or without the `@`culler's patches.
I opened #33474 to fix this.



---

archive/issue_comments_435796.json:
```json
{
    "body": "Here's a beginning\n----\nNew commits:",
    "created_at": "2022-03-07T06:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435796",
    "user": "https://github.com/mkoeppe"
}
```

Here's a beginning
----
New commits:



---

archive/issue_comments_435797.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-07T07:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435798.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-07T07:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435799.json:
```json
{
    "body": "untested, feel free to continue. getting late here.",
    "created_at": "2022-03-07T07:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435799",
    "user": "https://github.com/mkoeppe"
}
```

untested, feel free to continue. getting late here.



---

archive/issue_comments_435800.json:
```json
{
    "body": "OK, this builds - but the GAP helper files aren't ending in the correct place. Thus this fix. \nStill need to sort of `dickson.lib`, as the system-wide Singular doesn't find it.\n----\nNew commits:",
    "created_at": "2022-03-07T13:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435800",
    "user": "https://github.com/dimpase"
}
```

OK, this builds - but the GAP helper files aren't ending in the correct place. Thus this fix. 
Still need to sort of `dickson.lib`, as the system-wide Singular doesn't find it.
----
New commits:



---

archive/issue_comments_435801.json:
```json
{
    "body": "OK, the following tells Singular where to look for:\n\n```\ndima@hilbert /mnt/opt/Sage/sage-dev $ export SINGULARPATH=`pwd`/local/share/singular/LIB\ndima@hilbert /mnt/opt/Sage/sage-dev $ ./sage --singular\n                     SINGULAR                                 /  Development\n A Computer Algebra System for Polynomial Computations       /   version 4.2.1\n                                                           0<\n by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \\   May 2021\nFB Mathematik der Universitaet, D-67653 Kaiserslautern        \\\n> LIB \"dickson.lib\";\n// ** loaded /mnt/opt/Sage/sage-dev/local/share/singular/LIB/dickson.lib \n// ** library dickson.lib has old format. This format is still accepted,\n// ** but for functionality you may wish to change to the new\n// ** format. Please refer to the manual for further information.\n   ? cannot open `poly.lib`\n// ** loaded /usr/bin/../share/singular/LIB/general.lib (4.1.2.0,Feb_2019)\n...\n```\n\nAnd we're running into an old name for `polylib.lib`.",
    "created_at": "2022-03-07T13:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435801",
    "user": "https://github.com/dimpase"
}
```

OK, the following tells Singular where to look for:

```
dima@hilbert /mnt/opt/Sage/sage-dev $ export SINGULARPATH=`pwd`/local/share/singular/LIB
dima@hilbert /mnt/opt/Sage/sage-dev $ ./sage --singular
                     SINGULAR                                 /  Development
 A Computer Algebra System for Polynomial Computations       /   version 4.2.1
                                                           0<
 by: W. Decker, G.-M. Greuel, G. Pfister, H. Schoenemann     \   May 2021
FB Mathematik der Universitaet, D-67653 Kaiserslautern        \
> LIB "dickson.lib";
// ** loaded /mnt/opt/Sage/sage-dev/local/share/singular/LIB/dickson.lib 
// ** library dickson.lib has old format. This format is still accepted,
// ** but for functionality you may wish to change to the new
// ** format. Please refer to the manual for further information.
   ? cannot open `poly.lib`
// ** loaded /usr/bin/../share/singular/LIB/general.lib (4.1.2.0,Feb_2019)
...
```

And we're running into an old name for `polylib.lib`.



---

archive/issue_comments_435802.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-07T13:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435803.json:
```json
{
    "body": "OK, so now we are in a reasonable shape; one doctest fails due to deprecation of `set_default_prec()`, used in `upstream/p_group_cohomology-3.3.2/pGroupCohomology-3.3.2/pGroupCohomology/barcode.py`,\nthe rest work.\n\nAnd we need to sort out how to deal with `SINGULARPATH` - cf. comment:48.",
    "created_at": "2022-03-07T13:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435803",
    "user": "https://github.com/dimpase"
}
```

OK, so now we are in a reasonable shape; one doctest fails due to deprecation of `set_default_prec()`, used in `upstream/p_group_cohomology-3.3.2/pGroupCohomology-3.3.2/pGroupCohomology/barcode.py`,
the rest work.

And we need to sort out how to deal with `SINGULARPATH` - cf. comment:48.



---

archive/issue_comments_435804.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2022-03-07T13:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435804",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_435805.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2022-03-07T13:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435805",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_435806.json:
```json
{
    "body": "Replying to [comment:50 dimpase]:\n> And we need to sort out how to deal with `SINGULARPATH` - cf. comment:48.\n\nDon't try to adjust SINGULARPATH, just load the library from the absolute pathname",
    "created_at": "2022-03-07T16:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435806",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:50 dimpase]:
> And we need to sort out how to deal with `SINGULARPATH` - cf. comment:48.

Don't try to adjust SINGULARPATH, just load the library from the absolute pathname



---

archive/issue_comments_435807.json:
```json
{
    "body": "Likewise for the gap helper, don't try to install it in the GAP library, just load it from the absolute pathname",
    "created_at": "2022-03-07T16:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435807",
    "user": "https://github.com/mkoeppe"
}
```

Likewise for the gap helper, don't try to install it in the GAP library, just load it from the absolute pathname



---

archive/issue_comments_435808.json:
```json
{
    "body": "I installed this on OS X, although the first time failed in building `modular_resolution`:\n\n```\n./modular_resolution.h:29:10: fatal error: 'meataxe.h' file not found\n#include \"meataxe.h\"\n         ^~~~~~~~~~~\n1 error generated.\n```\n\nMaybe add `meataxe` to the dependencies file for `modular_resolution`?\n\nAfter building everything, the test suite failed almost immediately with\n\n```\nRunning the test suite for p_group_cohomology-3.3.2.p0...\nmake[3]: *** No rule to make target `check'.  Stop.\n********************************************************************************\nError testing modular_resolution-1.1\n********************************************************************************\n\nreal\t0m0.134s\nuser\t0m0.016s\nsys\t0m0.025s\n************************************************************************\nError testing package p_group_cohomology-3.3.2.p0\n************************************************************************\n```\n\nThe package has an extensive test suite, so if we can get it to pass tests, that should be a strong indication that everything is working.",
    "created_at": "2022-03-07T22:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435808",
    "user": "https://github.com/jhpalmieri"
}
```

I installed this on OS X, although the first time failed in building `modular_resolution`:

```
./modular_resolution.h:29:10: fatal error: 'meataxe.h' file not found
#include "meataxe.h"
         ^~~~~~~~~~~
1 error generated.
```

Maybe add `meataxe` to the dependencies file for `modular_resolution`?

After building everything, the test suite failed almost immediately with

```
Running the test suite for p_group_cohomology-3.3.2.p0...
make[3]: *** No rule to make target `check'.  Stop.
********************************************************************************
Error testing modular_resolution-1.1
********************************************************************************

real	0m0.134s
user	0m0.016s
sys	0m0.025s
************************************************************************
Error testing package p_group_cohomology-3.3.2.p0
************************************************************************
```

The package has an extensive test suite, so if we can get it to pass tests, that should be a strong indication that everything is working.



---

archive/issue_comments_435809.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-03-07T23:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_435810.json:
```json
{
    "body": "Replying to [comment:54 jhpalmieri]:\n> Maybe add `meataxe` to the dependencies file for `modular_resolution`?\n\nHere it is. I had forgotten to add the file",
    "created_at": "2022-03-07T23:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435810",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:54 jhpalmieri]:
> Maybe add `meataxe` to the dependencies file for `modular_resolution`?

Here it is. I had forgotten to add the file



---

archive/issue_comments_435811.json:
```json
{
    "body": "The documentation doesn't build:\n\n```\nRunning Sphinx v4.4.0\n\nExtension error:\nCould not import extension inventory_builder (exception: No module named 'inventory_builder')\nmake[3]: *** [html] Error 2\n```\n",
    "created_at": "2022-03-07T23:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435811",
    "user": "https://github.com/jhpalmieri"
}
```

The documentation doesn't build:

```
Running Sphinx v4.4.0

Extension error:
Could not import extension inventory_builder (exception: No module named 'inventory_builder')
make[3]: *** [html] Error 2
```




---

archive/issue_comments_435812.json:
```json
{
    "body": "Patching `conf.py` fixed it:\n\n```diff\ndiff --git a/pGroupCohomology-3.3.2/doc/source/conf.py b/pGroupCohomology-3.3.2/doc/source/conf.py\nindex e24ceb6..ee16257 100644\n--- a/pGroupCohomology-3.3.2/doc/source/conf.py\n+++ b/pGroupCohomology-3.3.2/doc/source/conf.py\n@@ -34,8 +34,8 @@ sys.path.append(os.path.join(SAGE_SRC, \"sage_setup\", \"docbuild\", \"ext\"))\n # Add any Sphinx extension module names here, as strings. They can be\n # extensions coming with Sphinx (named 'sphinx.ext.*') or your custom\n # ones.\n-extensions = ['inventory_builder',\n-              'sage_autodoc',\n+extensions = ['sage_docbuild.ext.inventory_builder',\n+              'sage_docbuild.ext.sage_autodoc',\n               'sphinx.ext.intersphinx',\n               'sphinx.ext.todo']\n```\n\nbut I wonder if the p_group_cohomology `conf.py` should just point to Sage's conf.py and use that.",
    "created_at": "2022-03-07T23:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435812",
    "user": "https://github.com/jhpalmieri"
}
```

Patching `conf.py` fixed it:

```diff
diff --git a/pGroupCohomology-3.3.2/doc/source/conf.py b/pGroupCohomology-3.3.2/doc/source/conf.py
index e24ceb6..ee16257 100644
--- a/pGroupCohomology-3.3.2/doc/source/conf.py
+++ b/pGroupCohomology-3.3.2/doc/source/conf.py
@@ -34,8 +34,8 @@ sys.path.append(os.path.join(SAGE_SRC, "sage_setup", "docbuild", "ext"))
 # Add any Sphinx extension module names here, as strings. They can be
 # extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
 # ones.
-extensions = ['inventory_builder',
-              'sage_autodoc',
+extensions = ['sage_docbuild.ext.inventory_builder',
+              'sage_docbuild.ext.sage_autodoc',
               'sphinx.ext.intersphinx',
               'sphinx.ext.todo']
```

but I wonder if the p_group_cohomology `conf.py` should just point to Sage's conf.py and use that.



---

archive/issue_comments_435813.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2022-03-08T08:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435813",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_435814.json:
```json
{
    "body": "testsuite for `modular_resolution` (created in the latest commit) passes.\n\nWith `p_group_cohomology`, somehow I can't uninstall it, for some reason.\n \n----\nNew commits:",
    "created_at": "2022-03-08T08:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435814",
    "user": "https://github.com/dimpase"
}
```

testsuite for `modular_resolution` (created in the latest commit) passes.

With `p_group_cohomology`, somehow I can't uninstall it, for some reason.
 
----
New commits:



---

archive/issue_comments_435815.json:
```json
{
    "body": "Doing\n\n```\nexport SINGULARPATH=`pwd`/local/share/singular/LIB\n```\n\nand after some fighting `./configure` and using `./sage -f` instead of `make`, I was able to rebuild `p_group_cohomology` and ran its testsuite. 2 failures - one due to deprecated `set_default_prec()`, clear how to fix, and another\n\n```\n[p_group_cohomology-3.3.2.p0] File \"pGroupCohomology-3.3.2/pGroupCohomology/cohomology.pyx\", line 993, in pGroupCohomology.cohomology.is_filter_regular\n[p_group_cohomology-3.3.2.p0] Failed example:\n[p_group_cohomology-3.3.2.p0]     is_filter_regular(H.relation_ideal(), F[0])\n[p_group_cohomology-3.3.2.p0] Expected:\n[p_group_cohomology-3.3.2.p0]     False\n[p_group_cohomology-3.3.2.p0] Got:\n[p_group_cohomology-3.3.2.p0]     [0]\n```\n\nI am not sure about. Looks like a genuine change.",
    "created_at": "2022-03-08T09:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435815",
    "user": "https://github.com/dimpase"
}
```

Doing

```
export SINGULARPATH=`pwd`/local/share/singular/LIB
```

and after some fighting `./configure` and using `./sage -f` instead of `make`, I was able to rebuild `p_group_cohomology` and ran its testsuite. 2 failures - one due to deprecated `set_default_prec()`, clear how to fix, and another

```
[p_group_cohomology-3.3.2.p0] File "pGroupCohomology-3.3.2/pGroupCohomology/cohomology.pyx", line 993, in pGroupCohomology.cohomology.is_filter_regular
[p_group_cohomology-3.3.2.p0] Failed example:
[p_group_cohomology-3.3.2.p0]     is_filter_regular(H.relation_ideal(), F[0])
[p_group_cohomology-3.3.2.p0] Expected:
[p_group_cohomology-3.3.2.p0]     False
[p_group_cohomology-3.3.2.p0] Got:
[p_group_cohomology-3.3.2.p0]     [0]
```

I am not sure about. Looks like a genuine change.



---

archive/issue_comments_435816.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-08T11:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435817.json:
```json
{
    "body": "more doctest etc patches for the package. This reduces the noise, but there are still quite a lot of discrepancies, some of which look serious.\nAlso,\n\n```\nsage -t --warn-long 62.5 --random-seed=230138939486715312795148381621394057005 src/sage/tests/modular_group_cohomology.py\n**********************************************************************\nFile \"src/sage/tests/modular_group_cohomology.py\", line 55, in sage.tests.modular_group_cohomology\nFailed example:\n    ascii_art(H.bar_code('LowerCentralSeries')[2])# optional - p_group_cohomology\nExpected:\n        *\n      *-*\n      *-*\n    *\nGot:\n      *-*\n      *-*\n      *-*\n      *-*\n    *\n**********************************************************************\n1 item had failures:\n   1 of  18 in sage.tests.modular_group_cohomology\n    [17 tests, 1 failure, 3.71 s]\n```\n\n\nJohn, do you have an idea about test failures?",
    "created_at": "2022-03-08T11:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435817",
    "user": "https://github.com/dimpase"
}
```

more doctest etc patches for the package. This reduces the noise, but there are still quite a lot of discrepancies, some of which look serious.
Also,

```
sage -t --warn-long 62.5 --random-seed=230138939486715312795148381621394057005 src/sage/tests/modular_group_cohomology.py
**********************************************************************
File "src/sage/tests/modular_group_cohomology.py", line 55, in sage.tests.modular_group_cohomology
Failed example:
    ascii_art(H.bar_code('LowerCentralSeries')[2])# optional - p_group_cohomology
Expected:
        *
      *-*
      *-*
    *
Got:
      *-*
      *-*
      *-*
      *-*
    *
**********************************************************************
1 item had failures:
   1 of  18 in sage.tests.modular_group_cohomology
    [17 tests, 1 failure, 3.71 s]
```


John, do you have an idea about test failures?



---

archive/issue_comments_435818.json:
```json
{
    "body": "First of all: Thank you very much for working on it! I am currently buried in exam grading and unable to do more interesting stuff.\n\nBoth the failure at `is_filter_regular(H.relation_ideal(), F[0])` and `H.bar_code('LowerCentralSeries')` look very serious to me. So, I should try and build stuff, and try to analyse the failures.\n\nMy question: It looks to me as if the branch introduces patches -- I guess these should eventually be included in the next version of the p_group_cohomology package, i.e., should be pushed to the github repository of the package. But how? Could you tell me a workflow?\n\nBest regards,\nSimon",
    "created_at": "2022-03-08T11:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435818",
    "user": "https://github.com/simon-king-jena"
}
```

First of all: Thank you very much for working on it! I am currently buried in exam grading and unable to do more interesting stuff.

Both the failure at `is_filter_regular(H.relation_ideal(), F[0])` and `H.bar_code('LowerCentralSeries')` look very serious to me. So, I should try and build stuff, and try to analyse the failures.

My question: It looks to me as if the branch introduces patches -- I guess these should eventually be included in the next version of the p_group_cohomology package, i.e., should be pushed to the github repository of the package. But how? Could you tell me a workflow?

Best regards,
Simon



---

archive/issue_comments_435819.json:
```json
{
    "body": "Hi Simon, patches are a bit messy, as they are against the package, which has a different directory structure. So a straight `git apply <patch-file>` doesn't work in the upstream directory, one needs to use `patch -pX` with different values of `X` for different files.\nDon't worry about this, I'll push a branch upstream with these changes applied.\n\nAfter that, for the new release we'd also need to sort out packaging of GAP and Singular files, as Matthias\nsays. But it's certainly most important to fix the maths issues!\n\nIt's already possible to build and test this branch, with workaround in comment:62",
    "created_at": "2022-03-08T12:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435819",
    "user": "https://github.com/dimpase"
}
```

Hi Simon, patches are a bit messy, as they are against the package, which has a different directory structure. So a straight `git apply <patch-file>` doesn't work in the upstream directory, one needs to use `patch -pX` with different values of `X` for different files.
Don't worry about this, I'll push a branch upstream with these changes applied.

After that, for the new release we'd also need to sort out packaging of GAP and Singular files, as Matthias
says. But it's certainly most important to fix the maths issues!

It's already possible to build and test this branch, with workaround in comment:62



---

archive/issue_comments_435820.json:
```json
{
    "body": "I've collected the patches for upstream in https://github.com/sagemath/p_group_cohomology/tree/wip_trac_30787\nsee also\nhttps://github.com/sagemath/p_group_cohomology/issues/6",
    "created_at": "2022-03-08T12:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435820",
    "user": "https://github.com/dimpase"
}
```

I've collected the patches for upstream in https://github.com/sagemath/p_group_cohomology/tree/wip_trac_30787
see also
https://github.com/sagemath/p_group_cohomology/issues/6



---

archive/issue_comments_435821.json:
```json
{
    "body": "Do I understand correctly that the only place (other than install scripts) that knows about the installation location of the database is `set_local_sources` (\nhttps://github.com/sagemath/p_group_cohomology/blob/master/src/pGroupCohomology/factory.py#L617)?\n----\nNew commits:",
    "created_at": "2022-03-08T19:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435821",
    "user": "https://github.com/mkoeppe"
}
```

Do I understand correctly that the only place (other than install scripts) that knows about the installation location of the database is `set_local_sources` (
https://github.com/sagemath/p_group_cohomology/blob/master/src/pGroupCohomology/factory.py#L617)?
----
New commits:



---

archive/issue_comments_435822.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-08T19:20:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435823.json:
```json
{
    "body": "This should fix docbuilding.\n----\nNew commits:",
    "created_at": "2022-03-08T21:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435823",
    "user": "https://github.com/jhpalmieri"
}
```

This should fix docbuilding.
----
New commits:



---

archive/issue_comments_435824.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-03-09T12:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435824",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_435825.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-09T14:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435826.json:
```json
{
    "body": "OK, refactoring done, what remains are maths errors.",
    "created_at": "2022-03-09T14:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435826",
    "user": "https://github.com/dimpase"
}
```

OK, refactoring done, what remains are maths errors.



---

archive/issue_comments_435827.json:
```json
{
    "body": "Replying to [comment:76 dimpase]:\n> OK, refactoring done, what remains are maths errors.\n\nThank you! So, what's the plan now? I suppose I have to pull from the upstream repository to which you posted the new version, and then try to install it on my laptop, so that I can see what is happening on the mathematical side.\n\nQuestion: Has there been a recent Singular upgrade in Sage? If so: What version of Sage?",
    "created_at": "2022-03-09T14:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435827",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:76 dimpase]:
> OK, refactoring done, what remains are maths errors.

Thank you! So, what's the plan now? I suppose I have to pull from the upstream repository to which you posted the new version, and then try to install it on my laptop, so that I can see what is happening on the mathematical side.

Question: Has there been a recent Singular upgrade in Sage? If so: What version of Sage?



---

archive/issue_comments_435828.json:
```json
{
    "body": "I just tried to pull, but I got permission denied. It could be that I am on a new laptop now. So, how can I convince git that I have permission to pull and push? Both for the upstream repository and for the sage trac please.",
    "created_at": "2022-03-09T14:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435828",
    "user": "https://github.com/simon-king-jena"
}
```

I just tried to pull, but I got permission denied. It could be that I am on a new laptop now. So, how can I convince git that I have permission to pull and push? Both for the upstream repository and for the sage trac please.



---

archive/issue_comments_435829.json:
```json
{
    "body": "you probably don't need the upstream repo now. (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)\n\nJust build the branch of this ticket.",
    "created_at": "2022-03-09T15:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435829",
    "user": "https://github.com/dimpase"
}
```

you probably don't need the upstream repo now. (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)

Just build the branch of this ticket.



---

archive/issue_comments_435830.json:
```json
{
    "body": "Singular now is 4.2.0 or 1, don't recall. (away from kbd now)",
    "created_at": "2022-03-09T15:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435830",
    "user": "https://github.com/dimpase"
}
```

Singular now is 4.2.0 or 1, don't recall. (away from kbd now)



---

archive/issue_comments_435831.json:
```json
{
    "body": "You can also run this branch in GitPod (the rightmost button in Status Badges above)\nYou'll get a VM with this branch pulled (but without p_group_cohomology built, so you'd need to do\n`make p_group_cohomology` followed up by `make build` in the terminal window there). Takes 5-10 minutes to start.\n\nYou'd need to be authenticated to GitHub, I guess, to use it.",
    "created_at": "2022-03-09T15:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435831",
    "user": "https://github.com/dimpase"
}
```

You can also run this branch in GitPod (the rightmost button in Status Badges above)
You'll get a VM with this branch pulled (but without p_group_cohomology built, so you'd need to do
`make p_group_cohomology` followed up by `make build` in the terminal window there). Takes 5-10 minutes to start.

You'd need to be authenticated to GitHub, I guess, to use it.



---

archive/issue_comments_435832.json:
```json
{
    "body": "Oops, it seems that my latest change to the package created a circular import (only detected from a fresh build it seems)\n\nSee https://github.com/sagemath/p_group_cohomology/commit/3a7a043fe259b7ce667ad6b8f8d8ab0ea42a9fa4\nOne cannot import a package inside itself, I gather, but without this I can't \ncall `os.path.dirname(pGroupCohomology.__file__)`. Any way out here?",
    "created_at": "2022-03-09T16:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435832",
    "user": "https://github.com/dimpase"
}
```

Oops, it seems that my latest change to the package created a circular import (only detected from a fresh build it seems)

See https://github.com/sagemath/p_group_cohomology/commit/3a7a043fe259b7ce667ad6b8f8d8ab0ea42a9fa4
One cannot import a package inside itself, I gather, but without this I can't 
call `os.path.dirname(pGroupCohomology.__file__)`. Any way out here?



---

archive/issue_comments_435833.json:
```json
{
    "body": "I guess, just use `__file__` in these  calls, and remove `import` statements.",
    "created_at": "2022-03-09T16:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435833",
    "user": "https://github.com/dimpase"
}
```

I guess, just use `__file__` in these  calls, and remove `import` statements.



---

archive/issue_comments_435834.json:
```json
{
    "body": "yes",
    "created_at": "2022-03-09T17:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435834",
    "user": "https://github.com/mkoeppe"
}
```

yes



---

archive/issue_comments_435835.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-09T19:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435836.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-03-09T19:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435836",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_435837.json:
```json
{
    "body": "Replying to [comment:79 dimpase]:\n> you probably don't need the upstream repo now.\n\nAt some point (namely when fixing the maths problem) I need to be able to push.\n\n> (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)\n\nHow? I'm logged in to my github account and visited my profile, but I see no hint how to upload my public ssh key. Also it is a long time since I last created an ssh key. How do I do this? On sage-devel, I saw that some special type of key is now needed.\n\n> Just build the branch of this ticket.\n\nThis wouldn't allow me to work an the maths problem.\n----\nLast 10 new commits:",
    "created_at": "2022-03-09T19:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435837",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:79 dimpase]:
> you probably don't need the upstream repo now.

At some point (namely when fixing the maths problem) I need to be able to push.

> (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)

How? I'm logged in to my github account and visited my profile, but I see no hint how to upload my public ssh key. Also it is a long time since I last created an ssh key. How do I do this? On sage-devel, I saw that some special type of key is now needed.

> Just build the branch of this ticket.

This wouldn't allow me to work an the maths problem.
----
Last 10 new commits:



---

archive/issue_comments_435838.json:
```json
{
    "body": "still an error to fix for the GAP package path. Should be ready soon.",
    "created_at": "2022-03-09T22:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435838",
    "user": "https://github.com/dimpase"
}
```

still an error to fix for the GAP package path. Should be ready soon.



---

archive/issue_comments_435839.json:
```json
{
    "body": "Replying to [comment:89 SimonKing]:\n> Replying to [comment:79 dimpase]:\n> > you probably don't need the upstream repo now.\n> \n> At some point (namely when fixing the maths problem) I need to be able to push.\n> \n> > (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)\n> \n> How? I'm logged in to my github account and visited my profile, but I see no hint how to upload my public ssh key.\n\nIt's in Settings, not in Profile.\n\n\n> Also it is a long time since I last created an ssh key. How do I do this? On sage-devel, I saw that some special type of key is now needed.\n\nNothing special, just secure by modern standards. Either a long RSA key (say, 4096 bits), or \nan ed25519 key. The command to run for the latter is `ssh-keygen -t ed25519`\n \n> \n> > Just build the branch of this ticket.\n> \n> This wouldn't allow me to work an the maths problem.\none can make patches against the package tarball, instead of re-creating the tarball\nat the source repo. Anyway, you should be able to get your keys right.",
    "created_at": "2022-03-09T22:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435839",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:89 SimonKing]:
> Replying to [comment:79 dimpase]:
> > you probably don't need the upstream repo now.
> 
> At some point (namely when fixing the maths problem) I need to be able to push.
> 
> > (for github  (and for git trac) you might need to create  a new ssh keypair, some old keys are now deemed too insecure)
> 
> How? I'm logged in to my github account and visited my profile, but I see no hint how to upload my public ssh key.

It's in Settings, not in Profile.


> Also it is a long time since I last created an ssh key. How do I do this? On sage-devel, I saw that some special type of key is now needed.

Nothing special, just secure by modern standards. Either a long RSA key (say, 4096 bits), or 
an ed25519 key. The command to run for the latter is `ssh-keygen -t ed25519`
 
> 
> > Just build the branch of this ticket.
> 
> This wouldn't allow me to work an the maths problem.
one can make patches against the package tarball, instead of re-creating the tarball
at the source repo. Anyway, you should be able to get your keys right.



---

archive/issue_comments_435840.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-09T22:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435841.json:
```json
{
    "body": "Is this currently expected to be able to be installed? When I tried `make modular_resolution`, I just get that it couldn't find the make target, similar for `sage -i modular_resolution`. It is being picked up by `sage --optional` (and I did also run `./configure` and `make build` before trying this too). Am I just doing something stupid (like forgetting a step)?",
    "created_at": "2022-03-09T23:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435841",
    "user": "https://github.com/tscrim"
}
```

Is this currently expected to be able to be installed? When I tried `make modular_resolution`, I just get that it couldn't find the make target, similar for `sage -i modular_resolution`. It is being picked up by `sage --optional` (and I did also run `./configure` and `make build` before trying this too). Am I just doing something stupid (like forgetting a step)?



---

archive/issue_comments_435842.json:
```json
{
    "body": "Perhaps it needs a run of `./bootstrap && ./configure --enable-download-from-upstream-url`?\nIt works for me now from a clean build - and it works even in GitPod.",
    "created_at": "2022-03-09T23:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435842",
    "user": "https://github.com/dimpase"
}
```

Perhaps it needs a run of `./bootstrap && ./configure --enable-download-from-upstream-url`?
It works for me now from a clean build - and it works even in GitPod.



---

archive/issue_comments_435843.json:
```json
{
    "body": "`modular_resolution` by itself is not interesting, try `p_group_cohomology`.",
    "created_at": "2022-03-09T23:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435843",
    "user": "https://github.com/dimpase"
}
```

`modular_resolution` by itself is not interesting, try `p_group_cohomology`.



---

archive/issue_comments_435844.json:
```json
{
    "body": "Apparently, GitPod allows creating snapshots - so that's what I just have got there on this branch:\n\nhttps://gitpod.io#snapshot/a3cc9419-a976-446c-8247-1f2d84b4cabc\n\n(no idea for how long it persists)",
    "created_at": "2022-03-09T23:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435844",
    "user": "https://github.com/dimpase"
}
```

Apparently, GitPod allows creating snapshots - so that's what I just have got there on this branch:

https://gitpod.io#snapshot/a3cc9419-a976-446c-8247-1f2d84b4cabc

(no idea for how long it persists)



---

archive/issue_comments_435845.json:
```json
{
    "body": "I was not doing the `./bootstrap`, which I didn't think was necessary since I was adding this to my already built Sage. That fixed it.",
    "created_at": "2022-03-10T00:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435845",
    "user": "https://github.com/tscrim"
}
```

I was not doing the `./bootstrap`, which I didn't think was necessary since I was adding this to my already built Sage. That fixed it.



---

archive/issue_comments_435846.json:
```json
{
    "body": "During compilation, I see a bunch of warnings (\"unused variable\" or \"unused function\"). Do we care about these?",
    "created_at": "2022-03-10T01:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435846",
    "user": "https://github.com/jhpalmieri"
}
```

During compilation, I see a bunch of warnings ("unused variable" or "unused function"). Do we care about these?



---

archive/issue_comments_435847.json:
```json
{
    "body": "Replying to [comment:98 jhpalmieri]:\n> During compilation, I see a bunch of warnings (\"unused variable\" or \"unused function\"). Do we care about these? \n\nI do. I'm afraid that it is a long time since last working on the package, but getting rid of warnings was one of my concerns.",
    "created_at": "2022-03-10T08:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435847",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:98 jhpalmieri]:
> During compilation, I see a bunch of warnings ("unused variable" or "unused function"). Do we care about these? 

I do. I'm afraid that it is a long time since last working on the package, but getting rid of warnings was one of my concerns.



---

archive/issue_comments_435848.json:
```json
{
    "body": "Should we just merge this ticket, as going from \"cannot be installed\" to \"can be installed\" is already an improvement?",
    "created_at": "2022-03-19T00:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435848",
    "user": "https://github.com/mkoeppe"
}
```

Should we just merge this ticket, as going from "cannot be installed" to "can be installed" is already an improvement?



---

archive/issue_comments_435849.json:
```json
{
    "body": "Yes, it would be good to have it in 9.6,\nfixed, preferably (or else failing tests should be marked as bugs)",
    "created_at": "2022-03-19T08:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435849",
    "user": "https://github.com/dimpase"
}
```

Yes, it would be good to have it in 9.6,
fixed, preferably (or else failing tests should be marked as bugs)



---

archive/issue_comments_435850.json:
```json
{
    "body": "Changing priority from blocker to critical.",
    "created_at": "2022-03-20T16:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435850",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from blocker to critical.



---

archive/issue_comments_435851.json:
```json
{
    "body": "See [this sage-devel](https://groups.google.com/g/sage-devel/c/KCu_VuBwjgg/m/fNhn6wtWAgAJ) message for a fix to build `p_group_cohomology`, along with #34221.",
    "created_at": "2022-08-08T22:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435851",
    "user": "https://github.com/jhpalmieri"
}
```

See [this sage-devel](https://groups.google.com/g/sage-devel/c/KCu_VuBwjgg/m/fNhn6wtWAgAJ) message for a fix to build `p_group_cohomology`, along with #34221.



---

archive/issue_comments_435852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-09T03:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435853.json:
```json
{
    "body": "\n```\nsage -t --random-seed=154551441816182074078932648792662937529 src/sage/tests/modular_group_cohomology.py\n**********************************************************************\nFile \"src/sage/tests/modular_group_cohomology.py\", line 10, in sage.tests.modular_group_cohomology\nFailed example:\n    from pGroupCohomology import CohomologyRing   # optional - p_group_cohomology\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.modular_group_cohomology[0]>\", line 1, in <module>\n        from pGroupCohomology import CohomologyRing   # optional - p_group_cohomology\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/pGroupCohomology/__init__.py\", line 2466, in <module>\n        from pGroupCohomology.factory import CohomologyRing\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/pGroupCohomology/factory.py\", line 45, in <module>\n        from pGroupCohomology.cohomology import COHO\n      File \"pGroupCohomology/cohomology.pyx\", line 71, in init pGroupCohomology.cohomology\n        from sage.docs.instancedoc import instancedoc\n    ImportError: cannot import name instancedoc\n```\n",
    "created_at": "2022-08-09T03:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435853",
    "user": "https://github.com/mkoeppe"
}
```


```
sage -t --random-seed=154551441816182074078932648792662937529 src/sage/tests/modular_group_cohomology.py
**********************************************************************
File "src/sage/tests/modular_group_cohomology.py", line 10, in sage.tests.modular_group_cohomology
Failed example:
    from pGroupCohomology import CohomologyRing   # optional - p_group_cohomology
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.modular_group_cohomology[0]>", line 1, in <module>
        from pGroupCohomology import CohomologyRing   # optional - p_group_cohomology
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/pGroupCohomology/__init__.py", line 2466, in <module>
        from pGroupCohomology.factory import CohomologyRing
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/pGroupCohomology/factory.py", line 45, in <module>
        from pGroupCohomology.cohomology import COHO
      File "pGroupCohomology/cohomology.pyx", line 71, in init pGroupCohomology.cohomology
        from sage.docs.instancedoc import instancedoc
    ImportError: cannot import name instancedoc
```




---

archive/issue_comments_435854.json:
```json
{
    "body": "Broken by #33763?",
    "created_at": "2022-08-09T04:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435854",
    "user": "https://github.com/mkoeppe"
}
```

Broken by #33763?



---

archive/issue_comments_435855.json:
```json
{
    "body": "Indeed, we need to change\n\n```diff\n-from sage.docs.instancedoc import instancedoc\n+from sage.misc.instancedoc import instancedoc\n```\n\nupstream.",
    "created_at": "2022-08-09T04:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435855",
    "user": "https://github.com/tscrim"
}
```

Indeed, we need to change

```diff
-from sage.docs.instancedoc import instancedoc
+from sage.misc.instancedoc import instancedoc
```

upstream.



---

archive/issue_comments_435856.json:
```json
{
    "body": "Looks like the deprecation done in #33763 somehow doesn't work",
    "created_at": "2022-08-09T04:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435856",
    "user": "https://github.com/mkoeppe"
}
```

Looks like the deprecation done in #33763 somehow doesn't work



---

archive/issue_comments_435857.json:
```json
{
    "body": "Maybe because it is a Cython file? It could be converted to a `.py` file, but then I don't get a deprecation message. Probably the best thing would be to display a deprecation message when `sage.docs.instancedoc` (maybe also changed to a `.py` file) is imported and the redirect is a normal import.\n\nWell, this still will need to be fixed upstream anyways.",
    "created_at": "2022-08-09T04:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435857",
    "user": "https://github.com/tscrim"
}
```

Maybe because it is a Cython file? It could be converted to a `.py` file, but then I don't get a deprecation message. Probably the best thing would be to display a deprecation message when `sage.docs.instancedoc` (maybe also changed to a `.py` file) is imported and the redirect is a normal import.

Well, this still will need to be fixed upstream anyways.



---

archive/issue_comments_435858.json:
```json
{
    "body": "I've opened #34324 (Fix deprecated import of instancedoc)",
    "created_at": "2022-08-09T17:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435858",
    "user": "https://github.com/mkoeppe"
}
```

I've opened #34324 (Fix deprecated import of instancedoc)



---

archive/issue_comments_435859.json:
```json
{
    "body": "Replying to [comment:113 tscrim]:\n> Well, this still will need to be fixed upstream anyways.\n\nThat's now https://github.com/sagemath/p_group_cohomology/pull/7",
    "created_at": "2022-08-09T17:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435859",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:113 tscrim]:
> Well, this still will need to be fixed upstream anyways.

That's now https://github.com/sagemath/p_group_cohomology/pull/7



---

archive/issue_comments_435860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-09T17:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435860",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435861.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-09T17:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_435862.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-09T17:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_435863.json:
```json
{
    "body": "This fixes it. \n\nWe are now back to the same status as comment:100, 5 months ago:\n- it builds\n- package testsuite (`make SAGE_CHECK=warn p_group_cohomology`) has failures\n- 1 failure in `./sage -t src/sage/tests/modular_group_cohomology.py`\n\nI'd suggest that we merge it as is.",
    "created_at": "2022-08-09T18:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435863",
    "user": "https://github.com/mkoeppe"
}
```

This fixes it. 

We are now back to the same status as comment:100, 5 months ago:
- it builds
- package testsuite (`make SAGE_CHECK=warn p_group_cohomology`) has failures
- 1 failure in `./sage -t src/sage/tests/modular_group_cohomology.py`

I'd suggest that we merge it as is.



---

archive/issue_comments_435864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-09T18:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435864",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_435865.json:
```json
{
    "body": "I think that it should have #34291 as a dependency and set this back to optional.",
    "created_at": "2022-08-09T18:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435865",
    "user": "https://github.com/jhpalmieri"
}
```

I think that it should have #34291 as a dependency and set this back to optional.



---

archive/issue_comments_435866.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-09T18:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435867.json:
```json
{
    "body": "What would be your recommended way to test this package? Of course, I can do pull requests to fix things like\n\n```\nFile \"pGroupCohomology-3.3.3/pGroupCohomology/factory.py\", line 909, in pGroupCohomology.factory.CohomologyRingFactory.create_group_key\nFailed example:\n    type(X._key[0][0])\nExpected:\n    <type 'sage.rings.integer.Integer'>\nGot:\n    <class 'sage.rings.integer.Integer'>\n```\n\nbut if I wanted to start looking at the more serious bugs, what would be the most efficient way to test it? I imagine doing patches and rebuilding the spkg is not ideal.\n\n`@`SimonKing If you have any comments, both on the mathematical side or the development side, they would be appreciated!",
    "created_at": "2022-08-09T23:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435867",
    "user": "https://github.com/tscrim"
}
```

What would be your recommended way to test this package? Of course, I can do pull requests to fix things like

```
File "pGroupCohomology-3.3.3/pGroupCohomology/factory.py", line 909, in pGroupCohomology.factory.CohomologyRingFactory.create_group_key
Failed example:
    type(X._key[0][0])
Expected:
    <type 'sage.rings.integer.Integer'>
Got:
    <class 'sage.rings.integer.Integer'>
```

but if I wanted to start looking at the more serious bugs, what would be the most efficient way to test it? I imagine doing patches and rebuilding the spkg is not ideal.

`@`SimonKing If you have any comments, both on the mathematical side or the development side, they would be appreciated!



---

archive/issue_comments_435868.json:
```json
{
    "body": "I very much appreciate that you work on these things. Because of teaching, I didn't have much time recently. Actually, even though my [SageMath](SageMath) installation is still working on my laptop, git claims that there is no git repository in the source tree. Hence, I couldn't even upgrade my [SageMath](SageMath) installation. Today I finished a new build from scratch.\n\nNext, I probably need to be reminded how to access/use the github repository of the cohomology package...",
    "created_at": "2022-08-09T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435868",
    "user": "https://github.com/simon-king-jena"
}
```

I very much appreciate that you work on these things. Because of teaching, I didn't have much time recently. Actually, even though my [SageMath](SageMath) installation is still working on my laptop, git claims that there is no git repository in the source tree. Hence, I couldn't even upgrade my [SageMath](SageMath) installation. Today I finished a new build from scratch.

Next, I probably need to be reminded how to access/use the github repository of the cohomology package...



---

archive/issue_comments_435869.json:
```json
{
    "body": "Replying to [comment:124 tscrim]:\n> What would be your recommended way to test this package? Of course, I can do pull requests to fix things like\n> {{{\n> File \"pGroupCohomology-3.3.3/pGroupCohomology/factory.py\", line 909, in pGroupCohomology.factory.CohomologyRingFactory.create_group_key\n> Failed example:\n>     type(X._key[0][0])\n> Expected:\n>     <type 'sage.rings.integer.Integer'>\n> Got:\n>     <class 'sage.rings.integer.Integer'>\n> }}}\n> but if I wanted to start looking at the more serious bugs, what would be the most efficient way to test it? I imagine doing patches and rebuilding the spkg is not ideal.\n\nYou can just go into a git checkout of https://github.com/sagemath/p_group_cohomology,  and do `sage -pip install src/`",
    "created_at": "2022-08-09T23:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435869",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:124 tscrim]:
> What would be your recommended way to test this package? Of course, I can do pull requests to fix things like
> {{{
> File "pGroupCohomology-3.3.3/pGroupCohomology/factory.py", line 909, in pGroupCohomology.factory.CohomologyRingFactory.create_group_key
> Failed example:
>     type(X._key[0][0])
> Expected:
>     <type 'sage.rings.integer.Integer'>
> Got:
>     <class 'sage.rings.integer.Integer'>
> }}}
> but if I wanted to start looking at the more serious bugs, what would be the most efficient way to test it? I imagine doing patches and rebuilding the spkg is not ideal.

You can just go into a git checkout of https://github.com/sagemath/p_group_cohomology,  and do `sage -pip install src/`



---

archive/issue_comments_435870.json:
```json
{
    "body": "comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. You can run\n\n```\ngit clone git@github.com:sagemath/p_group_cohomology.git\n```\n\n(assuming you will access github via ssh; I got this from the (on my screen it is green) \"code\" button) from whatever folder you want to get the source code. You might even have direct push/pull access.\n\ncomment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?",
    "created_at": "2022-08-10T00:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435870",
    "user": "https://github.com/tscrim"
}
```

comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. You can run

```
git clone git@github.com:sagemath/p_group_cohomology.git
```

(assuming you will access github via ssh; I got this from the (on my screen it is green) "code" button) from whatever folder you want to get the source code. You might even have direct push/pull access.

comment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?



---

archive/issue_comments_435871.json:
```json
{
    "body": "Replying to [comment:127 tscrim]:\n> comment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?\n\nYes, that's what I meant by \"go into\"",
    "created_at": "2022-08-10T00:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435871",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:127 tscrim]:
> comment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?

Yes, that's what I meant by "go into"



---

archive/issue_comments_435872.json:
```json
{
    "body": "Replying to [comment:128 mkoeppe]:\n> Replying to [comment:127 tscrim]:\n> > comment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?\n> \n> Yes, that's what I meant by \"go into\"\n\nAh, sorry I missed that. Thank you.",
    "created_at": "2022-08-10T00:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435872",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:128 mkoeppe]:
> Replying to [comment:127 tscrim]:
> > comment:126: Thank you. I am guessing I should run that command from the folder I put the pGpCoHo package?
> 
> Yes, that's what I meant by "go into"

Ah, sorry I missed that. Thank you.



---

archive/issue_comments_435873.json:
```json
{
    "body": "Attachment [p_gp_coho_3_3_3p1_failures.txt](tarball://root/attachments/some-uuid/ticket30787/p_gp_coho_3_3_3p1_failures.txt) by @tscrim created at 2022-08-10 00:07:48\n\nCurrent failures of 3.3.3p1 version",
    "created_at": "2022-08-10T00:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435873",
    "user": "https://github.com/tscrim"
}
```

Attachment [p_gp_coho_3_3_3p1_failures.txt](tarball://root/attachments/some-uuid/ticket30787/p_gp_coho_3_3_3p1_failures.txt) by @tscrim created at 2022-08-10 00:07:48

Current failures of 3.3.3p1 version



---

archive/issue_comments_435874.json:
```json
{
    "body": "Replying to [comment:127 tscrim]:\n> comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. \n\nThat would come as a surprise. Anyway, I used several worktrees, and I see a .git file (not a folder) whose content is `gitdir: /home/king/Sage/git/sage/.git/worktrees/py3`\n\nAnyway, now I have a new Sage installation, I see not an urgent need to fix the old one, although I won't delete the old installations.\n\n> You can run\n> {{{\n> git clone git`@`github.com:sagemath/p_group_cohomology.git\n> }}}\n> (assuming you will access github via ssh;\n\nMeanwhile I have. Strange enough: I used to work with Sage on this laptop, but I needed to upload the public ssh key that I have on this laptop.",
    "created_at": "2022-08-10T00:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435874",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:127 tscrim]:
> comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. 

That would come as a surprise. Anyway, I used several worktrees, and I see a .git file (not a folder) whose content is `gitdir: /home/king/Sage/git/sage/.git/worktrees/py3`

Anyway, now I have a new Sage installation, I see not an urgent need to fix the old one, although I won't delete the old installations.

> You can run
> {{{
> git clone git`@`github.com:sagemath/p_group_cohomology.git
> }}}
> (assuming you will access github via ssh;

Meanwhile I have. Strange enough: I used to work with Sage on this laptop, but I needed to upload the public ssh key that I have on this laptop.



---

archive/issue_comments_435875.json:
```json
{
    "body": "Replying to [comment:130 SimonKing]:\n> Replying to [comment:127 tscrim]:\n> > comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. \n> \n> That would come as a surprise. Anyway, I used several worktrees, and I see a .git file (not a folder) whose content is `gitdir: /home/king/Sage/git/sage/.git/worktrees/py3`\n\nThat is very strange.\n\n> Anyway, now I have a new Sage installation, I see not an urgent need to fix the old one, although I won't delete the old installations.\n\nIndeed, it is not worth the trouble.\n\n> Meanwhile I have. Strange enough: I used to work with Sage on this laptop, but I needed to upload the public ssh key that I have on this laptop.\n\nThat is because Github is not trac. They are different servers and both require your (public) ssh key.",
    "created_at": "2022-08-10T00:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435875",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:130 SimonKing]:
> Replying to [comment:127 tscrim]:
> > comment:125: No problem; I think we can all relate. `;)` It sounds like you might have accidentally deleted the `.git` folder. 
> 
> That would come as a surprise. Anyway, I used several worktrees, and I see a .git file (not a folder) whose content is `gitdir: /home/king/Sage/git/sage/.git/worktrees/py3`

That is very strange.

> Anyway, now I have a new Sage installation, I see not an urgent need to fix the old one, although I won't delete the old installations.

Indeed, it is not worth the trouble.

> Meanwhile I have. Strange enough: I used to work with Sage on this laptop, but I needed to upload the public ssh key that I have on this laptop.

That is because Github is not trac. They are different servers and both require your (public) ssh key.



---

archive/issue_comments_435876.json:
```json
{
    "body": "Replying to [comment:119 mkoeppe]:\n> We are now back to the same status as comment:100, 5 months ago:\n> - it builds\n> - package testsuite (`make SAGE_CHECK=warn p_group_cohomology`) has failures\n> - 1 failure in `./sage -t src/sage/tests/modular_group_cohomology.py`\n> \n> I'd suggest that we merge it as is. \n\nI've opened #34333 for fixing the tests.",
    "created_at": "2022-08-10T16:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435876",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:119 mkoeppe]:
> We are now back to the same status as comment:100, 5 months ago:
> - it builds
> - package testsuite (`make SAGE_CHECK=warn p_group_cohomology`) has failures
> - 1 failure in `./sage -t src/sage/tests/modular_group_cohomology.py`
> 
> I'd suggest that we merge it as is. 

I've opened #34333 for fixing the tests.



---

archive/issue_comments_435877.json:
```json
{
    "body": "I agree that we should merge it as is, since it now builds. I won't set to \"positive review\" yet in case anyone disagrees, but I'll change it in a few days if no one says anything (or does it first).",
    "created_at": "2022-08-10T20:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435877",
    "user": "https://github.com/jhpalmieri"
}
```

I agree that we should merge it as is, since it now builds. I won't set to "positive review" yet in case anyone disagrees, but I'll change it in a few days if no one says anything (or does it first).



---

archive/issue_comments_435878.json:
```json
{
    "body": "it's good to go.",
    "created_at": "2022-08-10T21:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435878",
    "user": "https://github.com/dimpase"
}
```

it's good to go.



---

archive/issue_comments_435879.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-10T21:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435879",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_435880.json:
```json
{
    "body": "Thanks all!",
    "created_at": "2022-08-10T21:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435880",
    "user": "https://github.com/mkoeppe"
}
```

Thanks all!



---

archive/issue_comments_435881.json:
```json
{
    "body": "+1 on this as the errors are likely a little more involved to fix and it would be good to keep this optional. However, one thing before we include this is marking the doctest failure within Sage as a `# known bug`.",
    "created_at": "2022-08-10T23:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435881",
    "user": "https://github.com/tscrim"
}
```

+1 on this as the errors are likely a little more involved to fix and it would be good to keep this optional. However, one thing before we include this is marking the doctest failure within Sage as a `# known bug`.



---

archive/issue_comments_435882.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-08-10T23:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435882",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_435883.json:
```json
{
    "body": "This was also demanded in comment:101, but who's going to work on it?",
    "created_at": "2022-08-10T23:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435883",
    "user": "https://github.com/mkoeppe"
}
```

This was also demanded in comment:101, but who's going to work on it?



---

archive/issue_comments_435884.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-10T23:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435884",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_435885.json:
```json
{
    "body": "It doesn't need to be fixed here, it is just having the doctest marked so we don't get the failure reported when running tests with the spkg installed.",
    "created_at": "2022-08-11T00:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435885",
    "user": "https://github.com/tscrim"
}
```

It doesn't need to be fixed here, it is just having the doctest marked so we don't get the failure reported when running tests with the spkg installed.



---

archive/issue_comments_435886.json:
```json
{
    "body": "I mean specifically the one in the Sage library noted in comment:64.",
    "created_at": "2022-08-11T00:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435886",
    "user": "https://github.com/tscrim"
}
```

I mean specifically the one in the Sage library noted in comment:64.



---

archive/issue_comments_435887.json:
```json
{
    "body": "Outside the scope of the ticket to add such annotations.",
    "created_at": "2022-08-11T00:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435887",
    "user": "https://github.com/mkoeppe"
}
```

Outside the scope of the ticket to add such annotations.



---

archive/issue_comments_435888.json:
```json
{
    "body": "I disagree. I have pushed it.\n----\nNew commits:",
    "created_at": "2022-08-11T00:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435888",
    "user": "https://github.com/tscrim"
}
```

I disagree. I have pushed it.
----
New commits:



---

archive/issue_comments_435889.json:
```json
{
    "body": "Do you know that it's a bug?",
    "created_at": "2022-08-11T00:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435889",
    "user": "https://github.com/mkoeppe"
}
```

Do you know that it's a bug?



---

archive/issue_comments_435890.json:
```json
{
    "body": "No as I can't (quickly) find this in the literature (as I don't know this area very well). However, since it is in a tests file, I am operating under the assumption it has been verified through some other means. Furthermore, none of the other results have changed.\n\nSimon, perhaps you can comment briefly on this?",
    "created_at": "2022-08-11T00:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435890",
    "user": "https://github.com/tscrim"
}
```

No as I can't (quickly) find this in the literature (as I don't know this area very well). However, since it is in a tests file, I am operating under the assumption it has been verified through some other means. Furthermore, none of the other results have changed.

Simon, perhaps you can comment briefly on this?



---

archive/issue_comments_435891.json:
```json
{
    "body": "Then please clarify the annotation from `# known bug` to `# known bug - at least one of the results is wrong`",
    "created_at": "2022-08-11T00:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435891",
    "user": "https://github.com/mkoeppe"
}
```

Then please clarify the annotation from `# known bug` to `# known bug - at least one of the results is wrong`



---

archive/issue_comments_435892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-11T01:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435893.json:
```json
{
    "body": "Done.",
    "created_at": "2022-08-11T01:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435893",
    "user": "https://github.com/tscrim"
}
```

Done.



---

archive/issue_comments_435894.json:
```json
{
    "body": "This is fine with me.",
    "created_at": "2022-08-11T01:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435894",
    "user": "https://github.com/mkoeppe"
}
```

This is fine with me.



---

archive/issue_comments_435895.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-11T01:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435895",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_435896.json:
```json
{
    "body": "I am setting it back to a positive review then.\n\nSimon (or John or someone else if you know), if you could comment on the correctness of the test output, that would be appreciated.",
    "created_at": "2022-08-11T01:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435896",
    "user": "https://github.com/tscrim"
}
```

I am setting it back to a positive review then.

Simon (or John or someone else if you know), if you could comment on the correctness of the test output, that would be appreciated.



---

archive/issue_comments_435897.json:
```json
{
    "body": "Replying to [comment:146 tscrim]:\n> No as I can't (quickly) find this in the literature (as I don't know this area very well). However, since it is in a tests file, I am operating under the assumption it has been verified through some other means. Furthermore, none of the other results have changed.\n> \n> Simon, perhaps you can comment briefly on this?\n\nIn the test, an invariant of the group is calculated. So, if there are two different results than either the result computed by the old package version or the result computed by the new package version is wrong (or both). Therefore certainly one of the two versions has a bug.\n\nI could ask Graham Ellis (my co-author in a publication on \"persistant group cohomology\") if he can compute this example: I know that he has software developed independently of `p_group_cohomology`.",
    "created_at": "2022-08-11T05:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435897",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:146 tscrim]:
> No as I can't (quickly) find this in the literature (as I don't know this area very well). However, since it is in a tests file, I am operating under the assumption it has been verified through some other means. Furthermore, none of the other results have changed.
> 
> Simon, perhaps you can comment briefly on this?

In the test, an invariant of the group is calculated. So, if there are two different results than either the result computed by the old package version or the result computed by the new package version is wrong (or both). Therefore certainly one of the two versions has a bug.

I could ask Graham Ellis (my co-author in a publication on "persistant group cohomology") if he can compute this example: I know that he has software developed independently of `p_group_cohomology`.



---

archive/issue_comments_435898.json:
```json
{
    "body": "Replying to [comment:152 SimonKing]:\n> I could ask Graham Ellis (my co-author in a publication on \"persistant group cohomology\") if he can compute this example: I know that he has software developed independently of `p_group_cohomology`.\n\nThank you for your thoughts. Could you please ask him? Independent corroboration would be great.",
    "created_at": "2022-08-11T07:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435898",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:152 SimonKing]:
> I could ask Graham Ellis (my co-author in a publication on "persistant group cohomology") if he can compute this example: I know that he has software developed independently of `p_group_cohomology`.

Thank you for your thoughts. Could you please ask him? Independent corroboration would be great.



---

archive/issue_events_028054.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2022-08-29T11:24:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30550#event-28054"
}
```



---

archive/issue_comments_435899.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-29T11:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30550",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30550#issuecomment-435899",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
