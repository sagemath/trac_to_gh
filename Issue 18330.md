# Issue 18330: LatticePoset: add maximal_sublattices_iterator()

archive/issues_018330.json:
```json
{
    "body": "CC:  @nathanncohen @kevindilks\n\nHow to add an iterator over maximal sublattices of a lattice? I think that the algorithm is not too complicated. Basically we from 1 to n on elements.\n\nLets suppose that sublattice generated by elements 2,4,5 is not whole lattice. Now try to add 6. If it generates element 1 or 3, we will skip it. That's because if for example 1,2,4,6,8 is a maximal sublattice, then it had been generated already (we have tried all sublattices containing 1 before going to those that does not contain 1).\n\nThere might be a room for improvement by somehow arranging elements. But time for it is, I think, after we have some working code.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18567\n\n",
    "created_at": "2015-06-01T12:38:27Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "LatticePoset: add maximal_sublattices_iterator()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18330",
    "user": "https://github.com/jm58660"
}
```
CC:  @nathanncohen @kevindilks

How to add an iterator over maximal sublattices of a lattice? I think that the algorithm is not too complicated. Basically we from 1 to n on elements.

Lets suppose that sublattice generated by elements 2,4,5 is not whole lattice. Now try to add 6. If it generates element 1 or 3, we will skip it. That's because if for example 1,2,4,6,8 is a maximal sublattice, then it had been generated already (we have tried all sublattices containing 1 before going to those that does not contain 1).

There might be a room for improvement by somehow arranging elements. But time for it is, I think, after we have some working code.

Issue created by migration from https://trac.sagemath.org/ticket/18567





---

archive/issue_comments_248449.json:
```json
{
    "body": "There is now some code that at least seems to work. This is quite interesting optimization problem. Can this be made to real `maximal_sublattices_iterator()` instead of `maximal_sublattices()` (that internally generates some non-maximal sublattices and then discards them).\n\nI tried googling some time, but find no algorithm for this. This is somewhat ad hoc solution.\n----\nNew commits:",
    "created_at": "2015-06-10T12:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248449",
    "user": "https://github.com/jm58660"
}
```

There is now some code that at least seems to work. This is quite interesting optimization problem. Can this be made to real `maximal_sublattices_iterator()` instead of `maximal_sublattices()` (that internally generates some non-maximal sublattices and then discards them).

I tried googling some time, but find no algorithm for this. This is somewhat ad hoc solution.
----
New commits:



---

archive/issue_comments_248450.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T09:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-07-08T11:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_248452.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-08T11:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248452",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_248453.json:
```json
{
    "body": "Ping... Anybody wants to look at the code? This is necessary part in the road to `frattini_sublattice()`.",
    "created_at": "2015-07-19T18:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248453",
    "user": "https://github.com/jm58660"
}
```

Ping... Anybody wants to look at the code? This is necessary part in the road to `frattini_sublattice()`.



---

archive/issue_comments_248454.json:
```json
{
    "body": "Two minor things:\n\n- I think you could change the test `sorted([sorted(list(x)) for x in ms])` to `sorted(ms, key=sorted)` (note that I didn't actually try this).\n\n- Could you add a space around the `<` comparisons to help improve readability?\n\nKevin, if you want to do the full review, please go ahead. I'm not sure I will have enough time to throughly test this.",
    "created_at": "2015-07-27T04:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248454",
    "user": "https://github.com/tscrim"
}
```

Two minor things:

- I think you could change the test `sorted([sorted(list(x)) for x in ms])` to `sorted(ms, key=sorted)` (note that I didn't actually try this).

- Could you add a space around the `<` comparisons to help improve readability?

Kevin, if you want to do the full review, please go ahead. I'm not sure I will have enough time to throughly test this.



---

archive/issue_comments_248455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-27T08:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248456.json:
```json
{
    "body": "Here is one test lattice:\n\n\n```\nz={'d': [1,2,3], 1:['l', 4], 2:[4,'c'], 3:['r',4], 4:[5], 5:[6,13], 6:[7,11], 7:[8,14], 8:[9,12], 9:[10,15], 10:['u'], 'l':[11], 11:[12], 12:['u'], 'r':[13], 13:[14], 14:[15], 15:['u'], 'c':[10]}\nM3min=LatticePoset(z)\n```\n\n\n(from http://www.math.hawaii.edu/~ralph/Preprints/combined.pdf you can find more). Do you want some test code? You can make a random lattice (for example random poset + `completion_by_cuts()`), and test by adding one random element to maximal sublattice - it should generate whole lattice. Or make a test like #18562 and see if a random maximal sublattice is found in the list of sublattices.",
    "created_at": "2015-07-27T08:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248456",
    "user": "https://github.com/jm58660"
}
```

Here is one test lattice:


```
z={'d': [1,2,3], 1:['l', 4], 2:[4,'c'], 3:['r',4], 4:[5], 5:[6,13], 6:[7,11], 7:[8,14], 8:[9,12], 9:[10,15], 10:['u'], 'l':[11], 11:[12], 12:['u'], 'r':[13], 13:[14], 14:[15], 15:['u'], 'c':[10]}
M3min=LatticePoset(z)
```


(from http://www.math.hawaii.edu/~ralph/Preprints/combined.pdf you can find more). Do you want some test code? You can make a random lattice (for example random poset + `completion_by_cuts()`), and test by adding one random element to maximal sublattice - it should generate whole lattice. Or make a test like #18562 and see if a random maximal sublattice is found in the list of sublattices.



---

archive/issue_comments_248457.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-05T18:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248457",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_248458.json:
```json
{
    "body": "needs rebase, does not apply",
    "created_at": "2015-08-05T18:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248458",
    "user": "https://github.com/fchapoton"
}
```

needs rebase, does not apply



---

archive/issue_comments_248459.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-09T15:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_248460.json:
```json
{
    "body": "Replying to [comment:12 chapoton]:\n> needs rebase, does not apply\n\nDone that, should work now. I will change this to needs_review after checking myself that this compiles and works.",
    "created_at": "2015-08-09T15:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248460",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:12 chapoton]:
> needs rebase, does not apply

Done that, should work now. I will change this to needs_review after checking myself that this compiles and works.



---

archive/issue_comments_248461.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-09T18:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248461",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_248462.json:
```json
{
    "body": "I made some minor reviewer changes. If you're happy with them, then go ahead and set a positive review.",
    "created_at": "2015-08-23T22:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248462",
    "user": "https://github.com/tscrim"
}
```

I made some minor reviewer changes. If you're happy with them, then go ahead and set a positive review.



---

archive/issue_comments_248463.json:
```json
{
    "body": "?? Branch-field is red, so I guess you made a typo.",
    "created_at": "2015-08-24T03:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248463",
    "user": "https://github.com/jm58660"
}
```

?? Branch-field is red, so I guess you made a typo.



---

archive/issue_comments_248464.json:
```json
{
    "body": "I think it's because beta3 was just released and my branch is based off beta2.",
    "created_at": "2015-08-24T05:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248464",
    "user": "https://github.com/tscrim"
}
```

I think it's because beta3 was just released and my branch is based off beta2.



---

archive/issue_comments_248465.json:
```json
{
    "body": "Replying to [comment:18 tscrim]:\n> I think it's because beta3 was just released and my branch is based off beta2.\n\nBut I don't see the \"commits\"-link, like there is when the code needs rebasing.",
    "created_at": "2015-08-24T05:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248465",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:18 tscrim]:
> I think it's because beta3 was just released and my branch is based off beta2.

But I don't see the "commits"-link, like there is when the code needs rebasing.



---

archive/issue_comments_248466.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T19:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_248467.json:
```json
{
    "body": "It seems like it didn't push it for some reason. Fixed.",
    "created_at": "2015-08-24T19:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248467",
    "user": "https://github.com/tscrim"
}
```

It seems like it didn't push it for some reason. Fixed.



---

archive/issue_comments_248468.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-25T06:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248468",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_248469.json:
```json
{
    "body": "Replying to [comment:16 tscrim]:\n> I made some minor reviewer changes. If you're happy with them, then go ahead and set a positive review.\n\nThank you! Compiles & works.\n\n(Now we just put this to production, and wait for someone to come up with better algorithm...)",
    "created_at": "2015-08-25T06:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248469",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:16 tscrim]:
> I made some minor reviewer changes. If you're happy with them, then go ahead and set a positive review.

Thank you! Compiles & works.

(Now we just put this to production, and wait for someone to come up with better algorithm...)



---

archive/issue_comments_248470.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-26T03:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18330#issuecomment-248470",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-26T03:00:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18330",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18330#event-17555"
}
```
