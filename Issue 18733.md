# Issue 18733: always simplify log(a^m,a) to m for any m coercible to Integer

archive/issues_018733.json:
```json
{
    "body": "From https://groups.google.com/forum/?hl=en#!topic/sage-devel/hwm-7V8S3hE\n\n```\nsage: log(int(8),2)\nlog(8)/log(2)\nsage: log(8,int(2))\nlog(8)/log(2)\nsage: log(8,2)\n3\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18970\n\n",
    "created_at": "2015-07-30T06:51:22Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "always simplify log(a^m,a) to m for any m coercible to Integer",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18733",
    "user": "@rwst"
}
```
From https://groups.google.com/forum/?hl=en#!topic/sage-devel/hwm-7V8S3hE

```
sage: log(int(8),2)
log(8)/log(2)
sage: log(8,int(2))
log(8)/log(2)
sage: log(8,2)
3
```


Issue created by migration from https://trac.sagemath.org/ticket/18970





---

archive/issue_comments_255679.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-07-30T07:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255679",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_255680.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-30T07:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255680",
    "user": "@rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_255681.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-30T07:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255681",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255682.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-07-30T08:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255682",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_255683.json:
```json
{
    "body": "Before this patch\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 5.08 times longer than the fastest. This could mean that an intermediate result is being cached \n10000 loops, best of 3: 39.4 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 38.1 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 32.8 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 14.52 times longer than the fastest. This could mean that an intermediate result is being cached \n1000000 loops, best of 3: 1.12 \u00b5s per loop\n```\n\nAfter\n\n```\nsage: %timeit log(QQ(8),3)\nThe slowest run took 37.28 times longer than the fastest. This could mean that an intermediate result is being cached \n10000 loops, best of 3: 48.8 \u00b5s per loop\nsage: %timeit log(QQ(8),2)\nThe slowest run took 8.69 times longer than the fastest. This could mean that an intermediate result is being cached \n100000 loops, best of 3: 5.43 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 48.4 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 8.80 times longer than the fastest. This could mean that an intermediate result is being cached \n100000 loops, best of 3: 5.34 \u00b5s per loop\n```\n\n\nI've repeated (differently) it due to the caching-warnings. Before\n\n```\nsage: timeit('log(QQ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 191 \u00b5s per loop\nsage: timeit('log(QQ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 150 \u00b5s per loop\nsage: timeit('log(ZZ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 125 \u00b5s per loop\nsage: timeit('log(ZZ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 24.1 \u00b5s per loop\n```\n\nAfter\n\n```\nsage: timeit('log(QQ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 1.93 ms per loop\nsage: timeit('log(QQ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 45.1 \u00b5s per loop\nsage: timeit('log(ZZ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 158 \u00b5s per loop\nsage: timeit('log(ZZ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 45.1 \u00b5s per loop\n```\n\n\nIn particular `log(QQ(8),3)` becomes much slower (and only `log(QQ(8),2)` gains speed).",
    "created_at": "2015-07-30T08:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255683",
    "user": "@dkrenn"
}
```

Before this patch

```
sage: %timeit log(QQ(8),2)
The slowest run took 5.08 times longer than the fastest. This could mean that an intermediate result is being cached 
10000 loops, best of 3: 39.4 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 38.1 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 32.8 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 14.52 times longer than the fastest. This could mean that an intermediate result is being cached 
1000000 loops, best of 3: 1.12 µs per loop
```

After

```
sage: %timeit log(QQ(8),3)
The slowest run took 37.28 times longer than the fastest. This could mean that an intermediate result is being cached 
10000 loops, best of 3: 48.8 µs per loop
sage: %timeit log(QQ(8),2)
The slowest run took 8.69 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 5.43 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 48.4 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 8.80 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 5.34 µs per loop
```


I've repeated (differently) it due to the caching-warnings. Before

```
sage: timeit('log(QQ(8),3)', number=1, repeat=1)
1 loops, best of 1: 191 µs per loop
sage: timeit('log(QQ(8),2)', number=1, repeat=1)
1 loops, best of 1: 150 µs per loop
sage: timeit('log(ZZ(8),3)', number=1, repeat=1)
1 loops, best of 1: 125 µs per loop
sage: timeit('log(ZZ(8),2)', number=1, repeat=1)
1 loops, best of 1: 24.1 µs per loop
```

After

```
sage: timeit('log(QQ(8),3)', number=1, repeat=1)
1 loops, best of 1: 1.93 ms per loop
sage: timeit('log(QQ(8),2)', number=1, repeat=1)
1 loops, best of 1: 45.1 µs per loop
sage: timeit('log(ZZ(8),3)', number=1, repeat=1)
1 loops, best of 1: 158 µs per loop
sage: timeit('log(ZZ(8),2)', number=1, repeat=1)
1 loops, best of 1: 45.1 µs per loop
```


In particular `log(QQ(8),3)` becomes much slower (and only `log(QQ(8),2)` gains speed).



---

archive/issue_comments_255684.json:
```json
{
    "body": "\n```\nsage: log(QQ(8),2).parent()\nInteger Ring\n```\n\nwhich is a different behavior compared to the common/similar arithmetic operations (e.g. `(QQ(2)^ZZ(1)).parent()` is `Rational Field` and not `Integer Ring`) and I would expect that the logarithm of a rational is again a rational (if possible) or something where QQ coerces into (but not out of something which coerces into QQ).",
    "created_at": "2015-07-30T08:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255684",
    "user": "@dkrenn"
}
```


```
sage: log(QQ(8),2).parent()
Integer Ring
```

which is a different behavior compared to the common/similar arithmetic operations (e.g. `(QQ(2)^ZZ(1)).parent()` is `Rational Field` and not `Integer Ring`) and I would expect that the logarithm of a rational is again a rational (if possible) or something where QQ coerces into (but not out of something which coerces into QQ).



---

archive/issue_comments_255685.json:
```json
{
    "body": "Is this a one-time comment, or do you plan to review to the end?",
    "created_at": "2015-07-30T08:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255685",
    "user": "@rwst"
}
```

Is this a one-time comment, or do you plan to review to the end?



---

archive/issue_comments_255686.json:
```json
{
    "body": "Replying to [comment:8 rws]:\n> Is this a one-time comment, or do you plan to review to the end?\n\nDoes this make a difference on how to react to my comment? ;) ....or more seriously: I am not sure if I feel qualified enough to review a change in the `log`-function. I just saw the discussion on sage-devel and looked into the ticket and decided to give some comments.",
    "created_at": "2015-07-30T09:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255686",
    "user": "@dkrenn"
}
```

Replying to [comment:8 rws]:
> Is this a one-time comment, or do you plan to review to the end?

Does this make a difference on how to react to my comment? ;) ....or more seriously: I am not sure if I feel qualified enough to review a change in the `log`-function. I just saw the discussion on sage-devel and looked into the ticket and decided to give some comments.



---

archive/issue_comments_255687.json:
```json
{
    "body": "The code at hand unconditionally tries to coerce the arguments into ZZ,QQ instead of checking the type first. Apart from the speed issue it also would benefit from moving completely into GiNaC: atm some cases are intercepted unnecessarily in `Function_log.__call__` which itself awkwardly calls Pynac.",
    "created_at": "2016-08-30T15:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255687",
    "user": "@rwst"
}
```

The code at hand unconditionally tries to coerce the arguments into ZZ,QQ instead of checking the type first. Apart from the speed issue it also would benefit from moving completely into GiNaC: atm some cases are intercepted unnecessarily in `Function_log.__call__` which itself awkwardly calls Pynac.



---

archive/issue_comments_255688.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-08-30T15:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255688",
    "user": "@rwst"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_255689.json:
```json
{
    "body": "I guess some of the speed regression is due to the at least partially redundant checking whether `arg == base**v`, and of course now *in addition* computing the valuation first in case the latter does *not* hold.  (At least it seemed to when I looked at it yesterday...)\n\nNot sure how much the probably superfluous coercion contributes.",
    "created_at": "2016-08-30T15:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255689",
    "user": "@nexttime"
}
```

I guess some of the speed regression is due to the at least partially redundant checking whether `arg == base**v`, and of course now *in addition* computing the valuation first in case the latter does *not* hold.  (At least it seemed to when I looked at it yesterday...)

Not sure how much the probably superfluous coercion contributes.



---

archive/issue_comments_255690.json:
```json
{
    "body": "New branch depends on Pynac git master.\n----\nNew commits:",
    "created_at": "2016-09-07T08:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255690",
    "user": "@rwst"
}
```

New branch depends on Pynac git master.
----
New commits:



---

archive/issue_comments_255691.json:
```json
{
    "body": "Timings with this branch. Before:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 10.96 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 40.1 \u00b5s per loop\nsage: %timeit log(QQ(8),2)\n10000 loops, best of 3: 40.2 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 40.5 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 34.4 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 19.11 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 886 ns per loop\n```\n\nAfter:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 26.7 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\nThe slowest run took 10.80 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 26.8 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 30.2 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 17.37 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 686 ns per loop\n```\n\nThe single run measurements vary so much from run to run that I refrain from giving them here. The After values of `timeit('log(QQ(8),3)', number=1, repeat=1)` are however in the same range as the Before values (as well as the others).",
    "created_at": "2016-09-07T08:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255691",
    "user": "@rwst"
}
```

Timings with this branch. Before:

```
sage: %timeit log(QQ(8),2)
The slowest run took 10.96 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 40.1 µs per loop
sage: %timeit log(QQ(8),2)
10000 loops, best of 3: 40.2 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 40.5 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 34.4 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 19.11 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 886 ns per loop
```

After:

```
sage: %timeit log(QQ(8),2)
The slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 26.7 µs per loop
sage: %timeit log(QQ(8),3)
The slowest run took 10.80 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 26.8 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 30.2 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 17.37 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 686 ns per loop
```

The single run measurements vary so much from run to run that I refrain from giving them here. The After values of `timeit('log(QQ(8),3)', number=1, repeat=1)` are however in the same range as the Before values (as well as the others).



---

archive/issue_comments_255692.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-10-02T14:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255692",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_255693.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-02T14:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255693",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255694.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-25T06:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255694",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255695.json:
```json
{
    "body": "Completed coverage.\n----\nNew commits:",
    "created_at": "2017-04-13T07:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255695",
    "user": "@rwst"
}
```

Completed coverage.
----
New commits:



---

archive/issue_comments_255696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-24T13:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255696",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255697.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-20T20:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255697",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_255698.json:
```json
{
    "body": "does not apply",
    "created_at": "2017-10-20T20:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255698",
    "user": "@fchapoton"
}
```

does not apply



---

archive/issue_comments_255699.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-21T05:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255699",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255700.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-21T05:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255700",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255701.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-23T23:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255701",
    "user": "@tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_255702.json:
```json
{
    "body": "Needs another rebase over beta9.",
    "created_at": "2017-10-23T23:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255702",
    "user": "@tscrim"
}
```

Needs another rebase over beta9.



---

archive/issue_comments_255703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-24T06:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255703",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255704.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-24T06:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255704",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_255705.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-24T15:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255705",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_255706.json:
```json
{
    "body": "Fixes were added, cruft removed, and it all squashed.\n----\nNew commits:",
    "created_at": "2017-10-24T15:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255706",
    "user": "@rwst"
}
```

Fixes were added, cruft removed, and it all squashed.
----
New commits:



---

archive/issue_comments_255707.json:
```json
{
    "body": "LGTM. Timings on my laptop with branch:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 29.31 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.57 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\nThe slowest run took 4.03 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 35.5 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 33 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 16.93 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 887 ns per loop\n```\n\nvs. with `develop`:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 14987.26 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.6 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 43.2 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\nThe slowest run took 4.42 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 38.9 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 14.23 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.06 \u00b5s per loop\n```\n",
    "created_at": "2017-10-25T14:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255707",
    "user": "@tscrim"
}
```

LGTM. Timings on my laptop with branch:

```
sage: %timeit log(QQ(8),2)
The slowest run took 29.31 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.57 µs per loop
sage: %timeit log(QQ(8),3)
The slowest run took 4.03 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 35.5 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 33 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 16.93 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 887 ns per loop
```

vs. with `develop`:

```
sage: %timeit log(QQ(8),2)
The slowest run took 14987.26 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.6 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 43.2 µs per loop
sage: %timeit log(ZZ(8),3)
The slowest run took 4.42 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 38.9 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 14.23 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.06 µs per loop
```




---

archive/issue_comments_255708.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-25T14:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255708",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_255709.json:
```json
{
    "body": "Thanks.",
    "created_at": "2017-10-26T06:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255709",
    "user": "@rwst"
}
```

Thanks.



---

archive/issue_comments_255710.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-29T10:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18733#issuecomment-255710",
    "user": "@vbraun"
}
```

Resolution: fixed
