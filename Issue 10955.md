# Issue 10955: jmol in the flask notebook

Issue created by migration from https://trac.sagemath.org/ticket/11078

Original creator: jason

Original creation time: 2011-03-29 11:47:49

Assignee: jason, mpatel, was

CC:  rkirov mhansen kcrisman

The attached patch solves an issue with jmol finding the right .jmol.zip file in the new flask notebook.  This patch should only be applied *after* the notebook is moved to a flask notebook.

The patch should replace the following line in `sage/plot/plot3d/base.pyx`

```
f.write('set defaultdirectory "%s"\n' % archive_name)
```

with

```
import sagenb
f.write('set defaultdirectory "cells/%s/%s"\n' % (sagenb.notebook.interact.SAGE_CELL_ID, archive_name))
```



---

Comment by was created at 2011-06-14 17:10:22

Changing keywords from "" to "sd31".


---

Comment by slabbe created at 2011-07-25 19:50:58

This week, I compiled sage-4.7.1.rc0 and installed the new flask Sage notebook following instructions from : http://code.google.com/r/rkirov-flask/. I also followed the section `Adding stock Jmol` plus the patch `trac_11078.patch`. This made Jmol to work from the notebook : Great!

But, from the command line, with the patch `trac_11078.patch` a command like `sphere()` opens Jmol but Jmol stays all black. I had to mimic the modifications done in #11503 on the same file `sage/plot/plot3d/base.pyx` to make Jmol works properly from the command line.

SÃ©bastien


---

Comment by jason created at 2011-12-31 16:38:17

Changing status from new to needs_review.


---

Attachment

I updated the patch with the changes from #11503.  With the flask notebook, sphere() works both from the command line and from the notebook.

I'm setting as needs review to have one other person double-check this patch works as intended, though I guess I might qualify as the only needed reviewer.  Basically, what I did here was just rebase the patch at #11503.


---

Comment by was created at 2012-01-06 03:34:22

Changing status from needs_review to positive_review.


---

Comment by was created at 2012-01-06 03:34:22

This looks great to me!


---

Comment by jason created at 2012-01-10 15:24:07

Changing keywords from "sd31" to "sd31, sd35.5".


---

Comment by jason created at 2012-01-10 15:24:17

Changing keywords from "sd31, sd35.5" to "sd31 sd35.5".


---

Comment by jdemeyer created at 2012-07-02 15:21:47

Resolution: fixed


---

Comment by jdemeyer created at 2012-07-23 06:50:43

Resolution changed from fixed to 


---

Comment by jdemeyer created at 2012-07-23 06:50:43

Unmerging this from sage-5.2 due to the serious security issue at #13270.


---

Comment by jdemeyer created at 2012-07-23 06:50:43

Changing status from closed to new.


---

Comment by jdemeyer created at 2012-07-23 06:51:25

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-07-23 06:51:46

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-07-25 06:40:59

Resolution: fixed
