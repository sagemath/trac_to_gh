# Issue 17369: Calculation involving nintegral works with Sage 6.3 but not with Sage 6.4

Issue created by migration from https://trac.sagemath.org/ticket/17606

Original creator: alyasoff

Original creation time: 2015-01-08 19:54:57

Keywords: nintegral

The following code:


```
var('u')
assume(u>0
```


```
fu=1/8*(I*sqrt(2)*(erf(1/2*sqrt(2)*(I*pi + 2*u + 1)) - erf(1/2*sqrt(2)*(-I*pi + 2*u + 1)))*e^(u + 1/2) + sqrt(2)*(-I*erf(1/2*sqrt(2)*(I*pi - 2*u + 1)) + I*erf(1/2*sqrt(2)*(-I*pi - 2*u + 1)))*e^(u + 1/2) - (sqrt(2)*e^(1/8) - sqrt(2)*e^(2*u + 1/8))*(erf(1/4*sqrt(2)*(2*I*pi + 4*u + 1)) + erf(1/4*sqrt(2)*(-2*I*pi + 4*u + 1))) - (sqrt(2)*e^(1/8) - sqrt(2)*e^(2*u + 1/8))*(erf(1/4*sqrt(2)*(2*I*pi - 4*u + 1)) + erf(1/4*sqrt(2)*(-2*I*pi - 4*u + 1))))*e^(-u)/sqrt(pi)
```


```
fu.nintegral(u,0,2)
```

returns:


```
(1.4275778409741315, 3.656408002774788e-14, 63, 0)
```


with Sage 6.3, but with Sage 6.4 returns:


```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_4.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("ZnUubmludGVncmFsKHUsMCwyKQ=="),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/tmp/tmpbwhja8/___code___.py", line 3, in <module>
    exec compile(u'fu.nintegral(u,_sage_const_0 ,_sage_const_2 )
  File "", line 1, in <module>
    
  File "sage/symbolic/expression.pyx", line 10244, in sage.symbolic.expression.Expression.nintegral (build/cythonized/sage/symbolic/expression.cpp:51090)
  File "/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 792, in nintegral
    raise TypeError(err)
TypeError: ECL says: Error executing code in Maxima: 
```



---

Attachment


---

Comment by rws created at 2015-03-14 17:01:58

Changing component from numerical to calculus.


---

Comment by chapoton created at 2019-08-26 19:10:44

works fine in 8.9.b7


---

Comment by chapoton created at 2020-09-21 08:49:32

Changing keywords from "nintegral" to "nintegral, integral".


---

Comment by @DaveWitteMorris created at 2020-09-21 17:35:26

error message from 9.2b12


---

Attachment

The lines give me an error with 9.2b12 (on MacOS 10.15.2). Full error message is attached.

```
RuntimeError: ECL says: Error executing code in Maxima: quad_qags: Cannot numerically evaluate errexp1 at 1.0

During handling of the above exception, another exception occurred:
    ...
TypeError: ECL says: Error executing code in Maxima: quad_qags: Cannot numerically evaluate errexp1 at 1.0.

During handling of the above exception, another exception occurred:
    ...
TypeError: ECL says: Error executing code in Maxima: quad_qags: Cannot numerically evaluate errexp1 at 1.0
```

No error with 9.1 (on my laptop and on `CoCalc`).
