# Issue 17668: Dominating set in directed Graphs not correct

Issue created by migration from Trac.

Original creator: Mantis

Original creation time: 2015-03-06 21:29:35

Keywords: dominating_set, Graphs, Directed Graphs

It seems that the dominating_set() operation is not working correctly for the directed graphs. For example if the graph is a->b->c<-d the dominating_set will give b,c which is not true. 

The dominating set of a undirected graph is computed correctly.

I suppose a stopgap should be filled also.



---

Comment by git created at 2015-03-07 13:21:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Mantis created at 2015-03-07 13:26:05

Changing status from new to needs_review.


---

Comment by git created at 2015-03-08 01:12:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-03-08 12:18:05

Hello,

What you propose is correct. However, I would prefer this formulation.

```
 # For any vertex v, one of its neighbors or v itself is in
 # the minimum dominating set. If g is a DiGraph, we use the
 # in-neighborhood of v instead.
 neighbor_iterator = g.neighbor_in_iterator if g.is_directed() else g.neighbor_iterator
 for v in g.vertex_iterator():
     p.add_constraint(int(not total)*b[v]+p.sum([b[u] for u in neighbor_iterator(v)]), min=1)
```


For the doc test, you can add a reference to this ticket as follows. Also, you should add an empty line before the `sage: ` lines. So this could be:

```
The dominating set of a DiGraph is different from the dominating set of its underlying Graph (modification introduced in :trac:`17905`) ::

   sage: g = digraphs.Path(3)
   sage: len(g.dominating_set())
   2
   sage: gg = Graph(g)
   sage: gg.is_isomorphic(graphs.PathGraph(3))
   True
   sage: len(gg.dominating_set())
   1
```


David.


---

Comment by dcoudert created at 2015-03-08 12:18:05

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2015-03-09 15:44:06

Hellooooooo,

To complete David's answer: the empty line after "sage:" is a requirement of sphinx, the software that is being used to turn Sage's documentation into a html page.

In order to check that your documentation is compiled properly, you should run:


```
sage -b && sage -docbuild reference/graphs html
```


More details there: http://www.sagemath.org/doc/developer/sage_manuals.html

It is also preferable, as he advises, to use `digraphs.Path` and `graphs.PathGraph` instead of building the graphs yourself `:-)`

For that, see: http://www.sagemath.org/doc/reference/graphs/sage/graphs/graph_generators.html

Good luck,

Nathann


---

Comment by Mantis created at 2015-03-10 10:04:08

Hi,

Thank you for the help and responses. It is great that i have the feedback to learn the contribution process and the coding preferences of the project.

I will make changes in my code when I will be in my home.

I have tested my doctest with 

```
./sage -t src/sage/graphs/generic_graph.py
```

that I got from the [http://www.sagemath.org/doc/developer/doctesting.html](http://www.sagemath.org/doc/developer/doctesting.html) and I didn't have any complain but I will try yours also when I can.

Cheers 
Sergios


---

Comment by ncohen created at 2015-03-10 14:31:48

Hello,

> I will make changes in my code when I will be in my home.

Okayyyyyyyyyyy !

> I have tested my doctest with
> {{{
> ./sage -t src/sage/graphs/generic_graph.py
> }}}
> that I got from the [http://www.sagemath.org/doc/developer/doctesting.html](http://www.sagemath.org/doc/developer/doctesting.html) and I didn't have any complain but I will try yours also when I can.

You did well, and the two must be run, though they have different
purposes:

1) With your command, you tested that all examples of code
   contained in the docstring (they usually appear after a double
   column, i.e. '::') return what they are expected to return. It
   tests the actual code that you write.

2) With the other command, you build the html documentation. This
   ignores the code but only reads the doc, and tests that
   the ".. NOTE" environments are displayed properly, it compiles
   the LaTeX code that the doc can possibly contains, creates
   links from one function to another... Things like that.

Nathann


---

Comment by git created at 2015-03-12 08:57:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-12 09:07:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Mantis created at 2015-03-12 09:10:58

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-03-12 09:27:33

Hellooooooo!

Your branch looks good, and almost ready to go. I just had a look at it, and made two modifications:

1) One line of documentation was very long (we try to keep lines to max 80 characters unless it makes it harder to read: that's a Python standard) so I wrapped it around.

2) Your if/else can be written in one line


```diff
-        if g.is_directed():
-            neighbors_iter=g.neighbor_in_iterator
-        else:
-            neighbors_iter=g.neighbor_iterator
+        neighbors_iter=g.neighbor_in_iterator if g.is_directed() else g.neighbor_iterator
```


I added a small commit on top of your branch. That new branch is named public/17905.

As I reviewed your changes and added a commit, you have to review mine before this ticket can be merged. Of course, tell me if there is anything that you do not like, and we will discuss it.

Cheers,

Nathann


---

Comment by Mantis created at 2015-03-12 10:07:32

Replying to [comment:12 ncohen]:
Hello

> 1) One line of documentation was very long (we try to keep lines to max 80 characters unless it makes it harder to read: that's a Python standard) so I wrapped it around.
> 
I will keep that in mind 

> 2) Your if/else can be written in one line
It is fine with me. I am used of writing the if - else in more lines to be easier to read but if the source has that format I will use that format also.

About your commit, I didn't find how to pull your commit. Can you show me the way?

Cheers
Sergios


---

Comment by ncohen created at 2015-03-12 10:13:43

Hello !

> About your commit, I didn't find how to pull your commit. Can you show me the way?

Well, in my case I have to run `git pull trac public/17905` but if you use the 'git trac' command then I am at a loss.

You could try this, see if it works. If it does not, could you send an email to sage-devel to ask? Such documentation has to be written eventually.

Nathann


---

Comment by Mantis created at 2015-03-12 10:27:20

Replying to [comment:14 ncohen]:
Hi

> Well, in my case I have to run `git pull trac public/17905` but if you use the 'git trac' command then I am at a loss.
> 
Yes I was using the git trac 
> You could try this, see if it works. If it does not, could you send an email to sage-devel to ask? Such documentation has to be written eventually.
> 
It works I now have your commit. But now I am lost. How I review it?

Sergios


---

Comment by dcoudert created at 2015-03-12 10:30:02

You have to check that it is working correctly, that the doc is properly built, etc.

one space in missing between graphs and ( in:

```
The dominating set is calculated for both the directed and undirected graphs(modification introduced in :trac:`17905`)::
```


David.


---

Comment by Mantis created at 2015-03-12 10:49:34

Hello again,
That part was not the problem. What I wanted to say is now the changes are in `public/17905`. I should merge with my branch and commit that to git trac? Or it's not required. That is the part I don't understand. Sorry if I'm asking alot of question's.

Sergios


---

Comment by ncohen created at 2015-03-12 10:51:42

Hello !

> That part was not the problem. What I wanted to say is now the changes are in `public/17905`. I should merge with my branch and commit that to git trac? Or it's not required. That is the part I don't understand. Sorry if I'm asking alot of question's.

Oh. Well, you can do that (merge with your branch) or you can just change the branch's name in the ticket's description. Much easier, and totally equivalent `:-)`

Nathann


---

Comment by Mantis created at 2015-03-12 11:36:37

Hello,
It seems my first walk-through is near the end. I agree with David that a space is missing between graphs and (.
It's better like this:
`The dominating set is calculated for both the directed and undirected graphs (modification introduced in :trac:`17905`)::`

Sergios
----
New commits:


---

Comment by git created at 2015-03-12 11:46:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-03-16 13:17:09

Yo guys. The typo is fixed. Is there anything else ?...

Nathann


---

Comment by Mantis created at 2015-03-16 13:20:06

Hellow Nathann
From my point everything is done. Should I change the ticket?
Sergios


---

Comment by ncohen created at 2015-03-16 13:22:53

> From my point everything is done. Should I change the ticket?

Yes, if you do not see anything else that needs to be changed.

All commits must be reviewed and I added a commit to the branch, so even if it is a bit trivial somebody has to 'review' them. Even the original author can do that, and then set the ticket to positive review (given that we reviewed your changes already, and agree with them).

Nathann


---

Comment by Mantis created at 2015-03-16 13:25:45

Changing status from needs_review to positive_review.


---

Comment by Mantis created at 2015-03-16 13:25:45

Understood.


---

Comment by ncohen created at 2015-03-16 13:26:58

Thanks !

Now that it is in `positive_review` we can forget about it. In some time the release manager (Volker Braun) will come and close the ticket, and it will be available in the next release.

Nathann


---

Comment by vbraun created at 2015-03-17 08:34:01

Resolution: fixed
