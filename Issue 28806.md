# Issue 28806: NotImplementedError: the translation of the FriCAS object sage2 to sage is not yet implemented

Issue created by migration from https://trac.sagemath.org/ticket/29043

Original creator: @nasser1

Original creation time: 2020-01-19 08:45:25

CC:  mantepse

Keywords: integrate symbolic

Using sagemath 8.9  with fricas 1.3.5, in one test file I have, I see many integrals fail with same error


```

sage: integrate((I*a*tan(d*x + c) + a)*sec(d*x + c)^10,x, algorithm="fricas")
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-7-586bc09b0cfc> in <module>()
----> 1 integrate((I*a*tan(d*x + c) + a)*sec(d*x + c)**Integer(10),x, algorithm="fricas")

/usr/lib/python2.7/site-packages/sage/misc/functional.pyc in integral(x, *args, **kwds)
    751     """
    752     if hasattr(x, 'integral'):
--> 753         return x.integral(*args, **kwds)
    754     else:
    755         from sage.symbolic.ring import SR

/usr/lib/python2.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.integral (build/cythonized/sage/symbolic/expression.cpp:64032)()
  12360                     R = ring.SR
  12361             return R(integral(f, v, a, b, **kwds))
> 12362         return integral(self, *args, **kwds)
  12363 
  12364     integrate = integral

/usr/lib/python2.7/site-packages/sage/symbolic/integration/integral.pyc in integrate(expression, v, a, b, algorithm, hold)
    910         if not integrator:
    911             raise ValueError("Unknown algorithm: %s" % algorithm)
--> 912         return integrator(expression, v, a, b)
    913     if a is None:
    914         return indefinite_integral(expression, v, hold=hold)

/usr/lib/python2.7/site-packages/sage/symbolic/integration/external.pyc in fricas_integrator(expression, v, a, b, noPole)
    393             result = ex.integrate(seg)
    394 
--> 395     result = result.sage()
    396 
    397     if result == "failed":

/usr/lib/python2.7/site-packages/sage/interfaces/interface.pyc in sage(self, *args, **kwds)
   1079             [0 0]
   1080         """
-> 1081         return self._sage_(*args, **kwds)
   1082 
   1083     def __repr__(self):

/usr/lib/python2.7/site-packages/sage/interfaces/fricas.pyc in _sage_(self)
   1909             return R(unparsed_InputForm)
   1910 
-> 1911         raise NotImplementedError("the translation of the FriCAS object %s to sage is not yet implemented" % (unparsed_InputForm))
   1912 
   1913 

NotImplementedError: the translation of the FriCAS object sage2 to sage is not yet implemented
sage: 



```


Here are more examples



```
integrate((I*a*tan(d*x + c) + a)*sec(d*x + c)^10,x, algorithm="fricas")

integrate((I*a*tan(d*x + c) + a)*sec(d*x + c)^8,x, algorithm="fricas")

```


There are 10's or 100's of similar integrals, all fail with same error. But they work OK in fricas



```
(6) -> ii:=integrate(cos(d*x+c)/(a+I*a*tan(d*x+c))^2,x);  

                                         Type: Union(Expression(Integer),...)
(7) -> unparse(ii::InputForm)                             

   (7)
  "((3*I^3*sin(d*x+c)+3*I^2*cos(d*x+c))*log((((-2)*I*cos(d*x+c)*sin(d*x+c)+((I^
  2+(-1))*cos(d*x+c)^2+(I^2+2)))*(I^2+1)^(1/2)+((2*I^2+2)*sin(d*x+c)+((-2)*I^3+
  (-2)*I)*cos(d*x+c)))/(2*I*cos(d*x+c)*sin(d*x+c)+(((-1)*I^2+1)*cos(d*x+c)^2+I^
  2)))+((2*I^2+2)*cos(d*x+c)*sin(d*x+c)+((2*I^3+2*I)*cos(d*x+c)^2+((-4)*I^3+2*I
  )))*(I^2+1)^(1/2))/(((2*I^5+4*I^3+2*I)*a^2*d*sin(d*x+c)+(2*I^4+4*I^2+2)*a^2*d
  *cos(d*x+c))*(I^2+1)^(1/2))"
                                                                
```



If you want to see more such examples, please see this [https://www.12000.org/my_notes/CAS_integration_tests/reports/rubi_4_16_1/test_cases/4_Trig_functions/4.3_Tangent/4.3.1.2-d_sec-%5em-a+b_tan-%5en/rese2.htm#x3-130002
]

looking at the table above, under Fricas, each entry which says F(-2), means it failed due to this error. 

Is this known error in Fricas translation? 

Thanks
--Nasser


---

Comment by mantepse created at 2020-01-19 21:33:38

Please always use the "FriCAS" keyword for tickets on this topic, otherwise I might not see it.


---

Comment by mantepse created at 2020-01-19 21:33:38

Changing keywords from "integrate symbolic" to "integrate symbolic, FriCAS".


---

Comment by @nasser1 created at 2020-01-21 04:09:33

Set assignee to @nasser1.


---

Comment by @nasser1 created at 2020-01-21 04:10:27

this was a bug in Fricas. not sagemath need to close


---

Comment by mantepse created at 2020-01-21 06:39:08

Changing status from new to needs_review.


---

Comment by mantepse created at 2020-01-21 06:41:12

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-01-26 07:32:17

Changing status from positive_review to needs_work.


---

Comment by chapoton created at 2020-01-26 07:32:17

this would need a doctest, once in a stable release


---

Comment by mkoeppe created at 2020-05-01 04:28:42

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mantepse created at 2021-06-01 12:36:44

New commits:


---

Comment by mantepse created at 2021-06-01 12:36:44

Changing status from needs_work to needs_review.


---

Comment by mantepse created at 2021-06-01 12:36:57

Changing status from needs_review to positive_review.


---

Comment by git created at 2021-06-23 12:41:03

Changing status from positive_review to needs_review.


---

Comment by git created at 2021-06-23 12:41:03

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2021-06-23 14:28:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2021-07-08 09:55:20

The doctest is added by #28630.


---

Comment by mantepse created at 2021-07-08 09:55:30

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-07-08 16:57:54

Resolution: duplicate
