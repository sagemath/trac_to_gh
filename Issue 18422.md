# Issue 18422: Python 3 preparation: Change more integer divisions from / to // (part 2)

archive/issues_018422.json:
```json
{
    "body": "CC:  aapitzsch tscrim jdemeyer\n\nKeywords: python3\n\nThe attached patch is part of the enabling of Sage for Py2/3.\nPy2 integer division `/` is changed to P2/3 floor division `//` (see #15995).\nThis ticket is similar to #16371 which already performed such changes.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18659\n\n",
    "created_at": "2015-06-10T08:52:24Z",
    "labels": [
        "misc",
        "major",
        "enhancement"
    ],
    "title": "Python 3 preparation: Change more integer divisions from / to // (part 2)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18422",
    "user": "wluebbe"
}
```
CC:  aapitzsch tscrim jdemeyer

Keywords: python3

The attached patch is part of the enabling of Sage for Py2/3.
Py2 integer division `/` is changed to P2/3 floor division `//` (see #15995).
This ticket is similar to #16371 which already performed such changes.

Issue created by migration from https://trac.sagemath.org/ticket/18659





---

archive/issue_comments_250238.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-04-24T09:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250238",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_250239.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-04-24T09:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250239",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_250240.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-24T09:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250240",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250241.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-24T11:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250241",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-24T11:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250243.json:
```json
{
    "body": "The line\n\n```\nthem does euclidean division (in Python2) or float division (in Python3)::\n```\n\ndoes not correspond to the code which does `//`.",
    "created_at": "2016-04-24T20:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250243",
    "user": "jdemeyer"
}
```

The line

```
them does euclidean division (in Python2) or float division (in Python3)::
```

does not correspond to the code which does `//`.



---

archive/issue_comments_250244.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-24T20:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250244",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_250245.json:
```json
{
    "body": "```2//3`` return ``0``.`: `return` should be `returns`",
    "created_at": "2016-04-24T20:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250245",
    "user": "jdemeyer"
}
```

```2//3`` return ``0``.`: `return` should be `returns`



---

archive/issue_comments_250246.json:
```json
{
    "body": "I feel that this ticket does too much at once. Most changes are non-trivial and require some work to review. It's too much for me anyway.",
    "created_at": "2016-04-24T20:14:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250246",
    "user": "jdemeyer"
}
```

I feel that this ticket does too much at once. Most changes are non-trivial and require some work to review. It's too much for me anyway.



---

archive/issue_comments_250247.json:
```json
{
    "body": "should I split it in smaller chunks ? it is already only a small step in all the changes that have to be made...",
    "created_at": "2016-04-27T15:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250247",
    "user": "chapoton"
}
```

should I split it in smaller chunks ? it is already only a small step in all the changes that have to be made...



---

archive/issue_comments_250248.json:
```json
{
    "body": "Changing component from misc to python3.",
    "created_at": "2016-04-28T06:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250248",
    "user": "chapoton"
}
```

Changing component from misc to python3.



---

archive/issue_comments_250249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-28T06:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250249",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250250.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-04-28T06:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250250",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_250251.json:
```json
{
    "body": "I don't think your changes in `rigged_configurations/*` are correct as they should all be Sage integers and, in certain cases, allowed to be rationals. Although perhaps it ends up being okay as there are no doctest failures, but I need to check (which I am doing now).",
    "created_at": "2016-04-28T14:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250251",
    "user": "tscrim"
}
```

I don't think your changes in `rigged_configurations/*` are correct as they should all be Sage integers and, in certain cases, allowed to be rationals. Although perhaps it ends up being okay as there are no doctest failures, but I need to check (which I am doing now).



---

archive/issue_comments_250252.json:
```json
{
    "body": "Actually, it does seem to handle the division to rationals okay, but now it has values which are floats that should be integers.",
    "created_at": "2016-04-28T14:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250252",
    "user": "tscrim"
}
```

Actually, it does seem to handle the division to rationals okay, but now it has values which are floats that should be integers.



---

archive/issue_comments_250253.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-28T14:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250253",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_250254.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-04-28T14:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250254",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_250255.json:
```json
{
    "body": "Okay, this should take care of the issues in `rigged_configurations/*`.\n----\nNew commits:",
    "created_at": "2016-04-28T14:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250255",
    "user": "tscrim"
}
```

Okay, this should take care of the issues in `rigged_configurations/*`.
----
New commits:



---

archive/issue_comments_250256.json:
```json
{
    "body": "Replying to [comment:9 chapoton]:\n> should I split it in smaller chunks ? it is already only a small step in all the changes that have to be made...\n\nI cannot speak for others, but **for me** it would improve the chances that I will review it.",
    "created_at": "2016-05-02T13:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250256",
    "user": "jdemeyer"
}
```

Replying to [comment:9 chapoton]:
> should I split it in smaller chunks ? it is already only a small step in all the changes that have to be made...

I cannot speak for others, but **for me** it would improve the chances that I will review it.



---

archive/issue_comments_250257.json:
```json
{
    "body": "Splitting the ticket also means that we don't need an \"all or nothing\" approach. For example #15994 was rejected because of problems in one particular module. That is a pity, because the other changes are probably good.",
    "created_at": "2016-05-02T13:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250257",
    "user": "jdemeyer"
}
```

Splitting the ticket also means that we don't need an "all or nothing" approach. For example #15994 was rejected because of problems in one particular module. That is a pity, because the other changes are probably good.



---

archive/issue_comments_250258.json:
```json
{
    "body": "I have split into 2 tickets, the other one being #20533 for the combinat folder\n----\nNew commits:",
    "created_at": "2016-05-02T13:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250258",
    "user": "chapoton"
}
```

I have split into 2 tickets, the other one being #20533 for the combinat folder
----
New commits:



---

archive/issue_comments_250259.json:
```json
{
    "body": "I think only the changes in\n\n*1 algebras/steenrod/steenrod_algebra_bases.py\n*2 graphs/generic_graph.py\n*3 modular/arithgroup/arithgroup_perm.py\n\nreally need to be checked seriously. All others are very simple.\n\nFor *1, there is a sentence that explain that all dimensions are divided by the given factor. Being dimensions, they surely must be integers.\n\nFor *2, the end result must be an integer (Wiener index), and we are simply dividing an even integer by 2.\n\nFor *3, it seems to be about cusp widths, that are in principle integers, as far as I understand.",
    "created_at": "2016-05-03T10:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250259",
    "user": "chapoton"
}
```

I think only the changes in

*1 algebras/steenrod/steenrod_algebra_bases.py
*2 graphs/generic_graph.py
*3 modular/arithgroup/arithgroup_perm.py

really need to be checked seriously. All others are very simple.

For *1, there is a sentence that explain that all dimensions are divided by the given factor. Being dimensions, they surely must be integers.

For *2, the end result must be an integer (Wiener index), and we are simply dividing an even integer by 2.

For *3, it seems to be about cusp widths, that are in principle integers, as far as I understand.



---

archive/issue_comments_250260.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-12T19:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250260",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_250261.json:
```json
{
    "body": "As far as I can tell, these are correct.",
    "created_at": "2016-05-12T19:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250261",
    "user": "tscrim"
}
```

As far as I can tell, these are correct.



---

archive/issue_comments_250262.json:
```json
{
    "body": "Thanks a lot.",
    "created_at": "2016-05-12T19:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250262",
    "user": "chapoton"
}
```

Thanks a lot.



---

archive/issue_comments_250263.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-05-17T07:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250263",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_250264.json:
```json
{
    "body": "This ticket has had seriously wrong consequences about the work done in #20533.",
    "created_at": "2016-05-22T11:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250264",
    "user": "chapoton"
}
```

This ticket has had seriously wrong consequences about the work done in #20533.



---

archive/issue_comments_250265.json:
```json
{
    "body": "This ticket's changes are plain wrong ! \n\nEDIT: can we easily undo this, quickly, please ??",
    "created_at": "2016-05-22T11:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250265",
    "user": "chapoton"
}
```

This ticket's changes are plain wrong ! 

EDIT: can we easily undo this, quickly, please ??



---

archive/issue_comments_250266.json:
```json
{
    "body": "This is already in 7.3.beta0 so we can't undo it. You added 488db3dddfa94779c0ba612fd552239aec80ea5d that reverts some changes, so thats what you got.",
    "created_at": "2016-05-22T12:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250266",
    "user": "vbraun"
}
```

This is already in 7.3.beta0 so we can't undo it. You added 488db3dddfa94779c0ba612fd552239aec80ea5d that reverts some changes, so thats what you got.



---

archive/issue_comments_250267.json:
```json
{
    "body": "Yes, I guess that's my fault. Jeroen asked me to split a ticket, so I did it (as I could) by reverting some changes, and putting them in another ticket. Then the other ticket went in sage first, and this one after. And just undid everything done in the other ticket.\n\nI will have to re-do the division clean-up in combinat. I am not happy about that.",
    "created_at": "2016-05-22T12:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250267",
    "user": "chapoton"
}
```

Yes, I guess that's my fault. Jeroen asked me to split a ticket, so I did it (as I could) by reverting some changes, and putting them in another ticket. Then the other ticket went in sage first, and this one after. And just undid everything done in the other ticket.

I will have to re-do the division clean-up in combinat. I am not happy about that.



---

archive/issue_comments_250268.json:
```json
{
    "body": "you can use `git revert`",
    "created_at": "2016-05-22T12:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250268",
    "user": "vbraun"
}
```

you can use `git revert`



---

archive/issue_comments_250269.json:
```json
{
    "body": "Changing keywords from \"python3\" to \"divison\".",
    "created_at": "2018-02-23T13:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18422#issuecomment-250269",
    "user": "embray"
}
```

Changing keywords from "python3" to "divison".
