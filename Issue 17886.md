# Issue 17886: let Transducer(word) output a word

Issue created by migration from https://trac.sagemath.org/ticket/18123

Original creator: dkrenn

Original creation time: 2015-04-03 19:21:26

CC:  vdelecroix cheuberg skropf

Keywords: sd66, transducer, words

Make

```
sage: W = Words([0,1])
sage: inverter.process(W([0,1,0]))
word: 101
sage: inverter.process(words.FibonacciWord([0,1]))
word: 1011010110110101101011011010110110101101...
```

work.

See also #18118.


---

Comment by dkrenn created at 2015-04-06 09:11:34

Last 10 new commits:


---

Comment by dkrenn created at 2015-04-06 09:11:34

Changing status from new to needs_review.


---

Comment by cheuberg created at 2015-04-17 11:13:43

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-04-18 04:19:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2015-04-18 04:20:41

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-04-18 05:18:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2015-04-18 05:28:28

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2015-04-18 05:28:28

IMHO `.iter_process` should return an iterator in every case. Wouldn't it be cleaner to remove automatic_output from `.iter_process` alltogether and move this convenience option to `.process` or even only to the convenience method `__call__`?

Further comments:
* Introductory example: The sentence "Here processing works with iterators in background." is unclear to me.
* code of `__call__`: in the branch `if ... input_tape.is_finite() == False`:, the check `if not 'automatic_output_type' in kwargs` seems to be superfluous because it is set before.
* `__call__`: Claims that automatic_output_type is set, but it is not.
* documentation of `.process`: What is the difference in the results of `automatic_output_type=False` and `automatic_output_type=None`?
* Please include doctests for `automatic_output_type`.
* Code of `iter_process`: IMHO setting `kwargs['format_output']` once and using it once, but then again guarded by `if_automatic_output_type` is some kind of overkill and also some kind of abuse of that parameter.
* For simplicity, I'd prefer to eliminate the possibility `automatic_output=None`: The magic that `format_output` is investigated in order to determine `automatic_output` could as well be moved to `__call__`. I can hardly imagine a use case of calling `.process` directly with `automatic_output=None`.


---

Comment by git created at 2015-07-28 11:19:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-13 13:14:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2015-09-14 10:20:42

Replying to [comment:10 cheuberg]:
> IMHO `.iter_process` should return an iterator in every case. Wouldn't it be cleaner to remove automatic_output from `.iter_process` alltogether and move this convenience option to `.process` or even only to the convenience method `__call__`?

`.iter_process` returns an iterator, but it can be of any type (depending on input type/class) which supports iterating. Thus did not change it.

> Further comments: [...]

All done; see commits.
----
Last 10 new commits:


---

Comment by dkrenn created at 2015-09-14 10:20:59

Changing status from needs_work to needs_review.


---

Comment by cheuberg created at 2015-09-14 15:45:01

Changing status from needs_review to positive_review.


---

Comment by cheuberg created at 2015-09-14 15:45:01

modifications are fine, doctests pass, documentation ok.


---

Comment by vbraun created at 2015-09-18 13:03:10

Resolution: fixed
