# Issue 11841: Fix entropy function in devel/sage/sage/coding

Issue created by migration from Trac.

Original creator: ppurka

Original creation time: 2011-11-12 07:39:30

Assignee: wdj

CC:  wdj kini jpang

Keywords: entropy coding theory

The entropy function doesn't take care of corner cases when it is evaluated at 0 and 1, and neither does it check whether the range is within 0 and 1.

Attached patched passes all tests in devel/sage/sage/coding


---

Comment by ppurka created at 2011-11-12 07:44:34

Changing priority from major to minor.


---

Comment by ppurka created at 2012-01-22 16:17:15

Changing status from new to needs_review.


---

Comment by dkrenn created at 2012-02-28 18:09:48

Changing status from needs_review to needs_work.


---

Comment by dkrenn created at 2012-02-28 18:09:48

There should be a doctest for the inputs `x=0` and `x=1`. 

Maybe the message of 

```
raise ValueError("The entropy function is undefined for values not between 0 and 1") 
```

should be more precise (since there is more than one input parameter), e.g. something like 

```
"The value x (x = %s) must be between 0 and 1." % x
```

Can you also improve the documentation by describing the input parameters `x` and `q` and add one or two examples?

I'm not sure, whether it should also be checked that `q` is positive.


---

Comment by ppurka created at 2012-02-29 13:51:19

Thanks for your comments. Updated the patch.


---

Comment by ppurka created at 2012-02-29 13:51:19

Changing status from needs_work to needs_review.


---

Comment by dkrenn created at 2012-03-02 09:41:51

Looks much better now. It would be nice to follow the [conventions](http://www.sagemath.org/doc/developer/conventions.html) (somewhere in the middle there is an example `def point...` (...template when documenting functions)). E.g. use ``` and ```` at the places where variables or formulas (interval) are.

Further I suggest to put `sage: entropy(1.1, 2)` and `sage: entropy(1, 1)` under a separate section `TESTS::`, since to me it seems more like a test than an example showing some functionality.

Maybe you can also add the following example (change the values if you want others) to `EXAMPLES`:

```
sage: entropy(1/5,4)
-1/5*log(1/5)/log(4) - 4/5*log(4/5)/log(4) + 1/5*log(3)/log(4)
```

so that we have an example (with values that are not a special case).


---

Comment by dkrenn created at 2012-03-02 09:41:51

Changing status from needs_review to needs_work.


---

Comment by ppurka created at 2012-03-02 10:16:57

apply to devel/sage


---

Attachment

Updated it again! Didn't know that I was so inconsistent. :)


---

Comment by ppurka created at 2012-03-02 10:17:47

Changing status from needs_work to needs_review.


---

Comment by dkrenn created at 2012-03-02 12:07:06

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-03-04 21:19:17

Resolution: fixed
