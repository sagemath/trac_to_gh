# Issue 14996: Implement q-multinomial and combinat/q_analogues.py cleanup

Issue created by migration from https://trac.sagemath.org/ticket/15233

Original creator: mathzeta2

Original creation time: 2013-09-27 00:10:08

As the title says, we do the following in the attached patch:

* Implement `q_multinomial`.
* A new "Birkhoff formula" for `q_subgroups_of_abelian_group` that is usually faster than the formula of Delsarte due to more cancellations.
* Some cleanup: Whitespace issues, replacing `p` with `q` and trivial naming of `gaussian_binomial` and `gaussian_multinomial`.


---

Comment by mathzeta2 created at 2013-09-27 03:04:44

Changing status from new to needs_review.


---

Attachment


---

Comment by tscrim created at 2013-09-30 23:43:49

Hey Tomer,

Here's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.

Best,

Travis


---

Comment by mathzeta2 created at 2013-10-01 17:20:35

Replying to [comment:2 tscrim]:
> Here's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.

Yes, I do agree to your changes. Proof reading is a never ending job, and it caused me to find few extra documentation fixes (see the new patch). If they are OK by you, positive review it is.


---

Attachment

Looks good to me. Thanks.


---

Comment by tscrim created at 2013-10-02 01:16:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-02 07:39:17

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-10-02 07:39:17

[attachment:trac_15233-review-ts.patch] needs to be rebased to sage-5.12.rc0.


---

Attachment


---

Comment by tscrim created at 2013-10-02 14:22:19

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2013-10-02 14:22:19

Weird...my review patch didn't apply on top of the base patch... Anyways, fixed now.


---

Comment by jdemeyer created at 2013-10-03 06:21:26

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-10-03 06:21:26

There are problems while building the documentation:

```
dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: "ch2006".
dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst
```



---

Comment by mathzeta2 created at 2013-10-03 07:03:08

Replying to [comment:8 jdemeyer]:
> There are problems while building the documentation:
> {{{
> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: "ch2006".
> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst
> }}}


Oh, that what happened in ticket:14496#comment:24. We can fix that "locally", but is there a "global" ticket for the duplicate citation bug? I did not find one.


---

Comment by tscrim created at 2013-10-03 21:57:51

I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).


---

Attachment


---

Comment by mathzeta2 created at 2013-10-03 23:54:51

Replying to [comment:10 tscrim]:
> I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).

I hope that folding the patches worked... Please see the new patch.

I changed those citations to [auto-numbered footnotes](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#auto-numbered-footnotes). The benefit is that both `q_binomial` and `gaussian_binomial` have the full docstring. A proper solution would be a way to specify aliases (maybe with functools.wraps?) for any object.


---

Comment by mathzeta2 created at 2013-10-03 23:54:51

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2013-10-04 00:07:47

These are citations, not footnotes, and are global. As such, I believe it should remain identified by `CH2006`, and to work around the duplication issue, please revert it back to a redirection.


---

Attachment

Alright, the latest patch is ready.


---

Comment by tscrim created at 2013-10-04 23:18:50

Changing status from needs_review to positive_review.


---

Attachment

I had to do a very minor rebase as there were underscores in `Gaussian_biniomal_coefficient` for me. I believe you don't have #14861 applied.

Thanks for reinstating the redirection.

Travis

For patchbot:

Apply: trac_15233-q_analogues-rebased-ts.patch


---

Comment by jdemeyer created at 2013-10-12 09:46:39

Resolution: fixed
