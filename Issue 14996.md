# Issue 14996: Implement q-multinomial and combinat/q_analogues.py cleanup

archive/issues_014996.json:
```json
{
    "body": "As the title says, we do the following in the attached patch:\n\n* Implement `q_multinomial`.\n* A new \"Birkhoff formula\" for `q_subgroups_of_abelian_group` that is usually faster than the formula of Delsarte due to more cancellations.\n* Some cleanup: Whitespace issues, replacing `p` with `q` and trivial naming of `gaussian_binomial` and `gaussian_multinomial`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15233\n\n",
    "created_at": "2013-09-27T00:10:08Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Implement q-multinomial and combinat/q_analogues.py cleanup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14996",
    "user": "@mathzeta"
}
```
As the title says, we do the following in the attached patch:

* Implement `q_multinomial`.
* A new "Birkhoff formula" for `q_subgroups_of_abelian_group` that is usually faster than the formula of Delsarte due to more cancellations.
* Some cleanup: Whitespace issues, replacing `p` with `q` and trivial naming of `gaussian_binomial` and `gaussian_multinomial`.

Issue created by migration from https://trac.sagemath.org/ticket/15233





---

archive/issue_comments_191693.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-09-27T03:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191693",
    "user": "@mathzeta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_191694.json:
```json
{
    "body": "Attachment [trac_15233_q_analogues.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues.patch) by @mathzeta created at 2013-09-27 03:04:44",
    "created_at": "2013-09-27T03:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191694",
    "user": "@mathzeta"
}
```

Attachment [trac_15233_q_analogues.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues.patch) by @mathzeta created at 2013-09-27 03:04:44



---

archive/issue_comments_191695.json:
```json
{
    "body": "Hey Tomer,\n\nHere's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-09-30T23:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191695",
    "user": "@tscrim"
}
```

Hey Tomer,

Here's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.

Best,

Travis



---

archive/issue_comments_191696.json:
```json
{
    "body": "Replying to [comment:2 tscrim]:\n> Here's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.\n\nYes, I do agree to your changes. Proof reading is a never ending job, and it caused me to find few extra documentation fixes (see the new patch). If they are OK by you, positive review it is.",
    "created_at": "2013-10-01T17:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191696",
    "user": "@mathzeta"
}
```

Replying to [comment:2 tscrim]:
> Here's a review patch which makes some minor documentation tweaks to bring the file into our current standards. If you agree with my changes, you can go ahead and set this to a positive review.

Yes, I do agree to your changes. Proof reading is a never ending job, and it caused me to find few extra documentation fixes (see the new patch). If they are OK by you, positive review it is.



---

archive/issue_comments_191697.json:
```json
{
    "body": "Attachment [trac_15233_q_analogues_doc_fix-tb.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_doc_fix-tb.patch) by @tscrim created at 2013-10-02 01:16:39\n\nLooks good to me. Thanks.",
    "created_at": "2013-10-02T01:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191697",
    "user": "@tscrim"
}
```

Attachment [trac_15233_q_analogues_doc_fix-tb.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_doc_fix-tb.patch) by @tscrim created at 2013-10-02 01:16:39

Looks good to me. Thanks.



---

archive/issue_comments_191698.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-02T01:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191698",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_191699.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-10-02T07:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191699",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_191700.json:
```json
{
    "body": "[attachment:trac_15233-review-ts.patch] needs to be rebased to sage-5.12.rc0.",
    "created_at": "2013-10-02T07:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191700",
    "user": "@jdemeyer"
}
```

[attachment:trac_15233-review-ts.patch] needs to be rebased to sage-5.12.rc0.



---

archive/issue_comments_191701.json:
```json
{
    "body": "Attachment [trac_15233-review-ts.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233-review-ts.patch) by @tscrim created at 2013-10-02 14:19:15",
    "created_at": "2013-10-02T14:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191701",
    "user": "@tscrim"
}
```

Attachment [trac_15233-review-ts.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233-review-ts.patch) by @tscrim created at 2013-10-02 14:19:15



---

archive/issue_comments_191702.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-10-02T14:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191702",
    "user": "@tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_191703.json:
```json
{
    "body": "Weird...my review patch didn't apply on top of the base patch... Anyways, fixed now.",
    "created_at": "2013-10-02T14:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191703",
    "user": "@tscrim"
}
```

Weird...my review patch didn't apply on top of the base patch... Anyways, fixed now.



---

archive/issue_comments_191704.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-10-03T06:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191704",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_191705.json:
```json
{
    "body": "There are problems while building the documentation:\n\n```\ndochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: \"ch2006\".\ndochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst\n```\n",
    "created_at": "2013-10-03T06:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191705",
    "user": "@jdemeyer"
}
```

There are problems while building the documentation:

```
dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: "ch2006".
dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst
```




---

archive/issue_comments_191706.json:
```json
{
    "body": "Replying to [comment:8 jdemeyer]:\n> There are problems while building the documentation:\n> {{{\n> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: \"ch2006\".\n> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst\n> }}}\n\n\nOh, that what happened in ticket:14496#comment:24. We can fix that \"locally\", but is there a \"global\" ticket for the duplicate citation bug? I did not find one.",
    "created_at": "2013-10-03T07:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191706",
    "user": "@mathzeta"
}
```

Replying to [comment:8 jdemeyer]:
> There are problems while building the documentation:
> {{{
> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: Duplicate explicit target name: "ch2006".
> dochtml.log:[combinat ] /scratch/release/merger/sage-5.13.beta0/local/lib/python2.7/site-packages/sage/combinat/q_analogues.py:docstring of sage.combinat.q_analogues.q_binomial:141: WARNING: duplicate citation CH2006, other instance in /scratch/release/merger/sage-5.13.beta0/devel/sage/doc/en/reference/combinat/sage/combinat/q_analogues.rst
> }}}


Oh, that what happened in ticket:14496#comment:24. We can fix that "locally", but is there a "global" ticket for the duplicate citation bug? I did not find one.



---

archive/issue_comments_191707.json:
```json
{
    "body": "I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).",
    "created_at": "2013-10-03T21:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191707",
    "user": "@tscrim"
}
```

I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).



---

archive/issue_comments_191708.json:
```json
{
    "body": "Attachment [trac_15233_q_analogues_folded.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_folded.patch) by @mathzeta created at 2013-10-03 23:34:41",
    "created_at": "2013-10-03T23:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191708",
    "user": "@mathzeta"
}
```

Attachment [trac_15233_q_analogues_folded.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_folded.patch) by @mathzeta created at 2013-10-03 23:34:41



---

archive/issue_comments_191709.json:
```json
{
    "body": "Replying to [comment:10 tscrim]:\n> I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).\n\nI hope that folding the patches worked... Please see the new patch.\n\nI changed those citations to [auto-numbered footnotes](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#auto-numbered-footnotes). The benefit is that both `q_binomial` and `gaussian_binomial` have the full docstring. A proper solution would be a way to specify aliases (maybe with functools.wraps?) for any object.",
    "created_at": "2013-10-03T23:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191709",
    "user": "@mathzeta"
}
```

Replying to [comment:10 tscrim]:
> I remember that now... I think you should just revert the alias to an explicit redirecting function call (and fold all of the patches together).

I hope that folding the patches worked... Please see the new patch.

I changed those citations to [auto-numbered footnotes](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#auto-numbered-footnotes). The benefit is that both `q_binomial` and `gaussian_binomial` have the full docstring. A proper solution would be a way to specify aliases (maybe with functools.wraps?) for any object.



---

archive/issue_comments_191710.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-10-03T23:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191710",
    "user": "@mathzeta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_191711.json:
```json
{
    "body": "These are citations, not footnotes, and are global. As such, I believe it should remain identified by `CH2006`, and to work around the duplication issue, please revert it back to a redirection.",
    "created_at": "2013-10-04T00:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191711",
    "user": "@tscrim"
}
```

These are citations, not footnotes, and are global. As such, I believe it should remain identified by `CH2006`, and to work around the duplication issue, please revert it back to a redirection.



---

archive/issue_comments_191712.json:
```json
{
    "body": "Attachment [trac_15233_q_analogues_folded.2.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_folded.2.patch) by @mathzeta created at 2013-10-04 22:08:02\n\nAlright, the latest patch is ready.",
    "created_at": "2013-10-04T22:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191712",
    "user": "@mathzeta"
}
```

Attachment [trac_15233_q_analogues_folded.2.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233_q_analogues_folded.2.patch) by @mathzeta created at 2013-10-04 22:08:02

Alright, the latest patch is ready.



---

archive/issue_comments_191713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-04T23:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191713",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_191714.json:
```json
{
    "body": "Attachment [trac_15233-q_analogues-rebased-ts.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233-q_analogues-rebased-ts.patch) by @tscrim created at 2013-10-04 23:18:50\n\nI had to do a very minor rebase as there were underscores in `Gaussian_biniomal_coefficient` for me. I believe you don't have #14861 applied.\n\nThanks for reinstating the redirection.\n\nTravis\n\nFor patchbot:\n\nApply: trac_15233-q_analogues-rebased-ts.patch",
    "created_at": "2013-10-04T23:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191714",
    "user": "@tscrim"
}
```

Attachment [trac_15233-q_analogues-rebased-ts.patch](tarball://root/attachments/some-uuid/ticket15233/trac_15233-q_analogues-rebased-ts.patch) by @tscrim created at 2013-10-04 23:18:50

I had to do a very minor rebase as there were underscores in `Gaussian_biniomal_coefficient` for me. I believe you don't have #14861 applied.

Thanks for reinstating the redirection.

Travis

For patchbot:

Apply: trac_15233-q_analogues-rebased-ts.patch



---

archive/issue_comments_191715.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-12T09:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14996#issuecomment-191715",
    "user": "@jdemeyer"
}
```

Resolution: fixed
