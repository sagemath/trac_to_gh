# Issue 20950: Overflow in conversion of polynomials in large characteristic to SymbolicRing

archive/issues_020950.json:
```json
{
    "body": "Keywords: symbolic overflow\n\n```\n\n```\nFound while looking at #21186, but apparently unrelated:\n\n```\nsage: x - polygen(FiniteField(next_prime(2^32)), 'y')\nTraceback (most recent call last):\n...\nOverflowError: Python int too large to convert to C long\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/21187\n\n",
    "created_at": "2016-08-08T07:38:50Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Overflow in conversion of polynomials in large characteristic to SymbolicRing",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20950",
    "user": "https://github.com/pjbruin"
}
```
Keywords: symbolic overflow

```

```
Found while looking at #21186, but apparently unrelated:

```
sage: x - polygen(FiniteField(next_prime(2^32)), 'y')
Traceback (most recent call last):
...
OverflowError: Python int too large to convert to C long
```

Issue created by migration from https://trac.sagemath.org/ticket/21187





---

archive/issue_comments_289447.json:
```json
{
    "body": "Any nonzero characteristics computation with symbolics is broken, and rightly so.",
    "created_at": "2016-08-10T06:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289447",
    "user": "https://github.com/rwst"
}
```

Any nonzero characteristics computation with symbolics is broken, and rightly so.



---

archive/issue_comments_289448.json:
```json
{
    "body": "Replying to [comment:1 rws]:\n> Any nonzero characteristics computation with symbolics is broken, and rightly so.\n\nThat is perfectly fine with me, as long as it is for mathematical (not programming) reasons.  Also, it should be made clear to the user that this is not supported.  Currently, one can do\n\n```\na = SR(Mod(3, 5))\n```\nwhich does seem to behave as expected (e.g. `(a*x)^2` returns `4*x^2`, and multiplying this by 5 returns 0).",
    "created_at": "2016-08-10T08:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289448",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:1 rws]:
> Any nonzero characteristics computation with symbolics is broken, and rightly so.

That is perfectly fine with me, as long as it is for mathematical (not programming) reasons.  Also, it should be made clear to the user that this is not supported.  Currently, one can do

```
a = SR(Mod(3, 5))
```
which does seem to behave as expected (e.g. `(a*x)^2` returns `4*x^2`, and multiplying this by 5 returns 0).



---

archive/issue_comments_289449.json:
```json
{
    "body": "I'm not the algebraist to make the mathematical case but I strongly suspect there is one. Of course programming plays a role in that the more we tried to support nonzero characteristics in Pynac the odder were the possible problems. It calls for a structured, i.e., algebraic approach, and symbolics do not mix with that.\n\nThe easy cases were implemented but see #18787.\n\nWhat is needed for a clear error is that someone opens a ticket for it.",
    "created_at": "2016-08-10T08:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289449",
    "user": "https://github.com/rwst"
}
```

I'm not the algebraist to make the mathematical case but I strongly suspect there is one. Of course programming plays a role in that the more we tried to support nonzero characteristics in Pynac the odder were the possible problems. It calls for a structured, i.e., algebraic approach, and symbolics do not mix with that.

The easy cases were implemented but see #18787.

What is needed for a clear error is that someone opens a ticket for it.



---

archive/issue_comments_289450.json:
```json
{
    "body": "Reading the code from Pynac, it seems that it only differentiates between\n- characteristic 0\n- characteristic 2\n- characteristic >2\n\nSo returning \"3\" might actually fix the problem.",
    "created_at": "2016-08-10T09:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289450",
    "user": "https://github.com/jdemeyer"
}
```

Reading the code from Pynac, it seems that it only differentiates between
- characteristic 0
- characteristic 2
- characteristic >2

So returning "3" might actually fix the problem.



---

archive/issue_comments_289451.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-10T10:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289451",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_289452.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-10T10:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289452",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_289453.json:
```json
{
    "body": "A fine solution to the problem, and it passes `make ptestlong`.",
    "created_at": "2016-08-10T13:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289453",
    "user": "https://github.com/rwst"
}
```

A fine solution to the problem, and it passes `make ptestlong`.



---

archive/issue_comments_289454.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-10T13:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289454",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_056509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-13T22:50:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20950#event-56509"
}
```



---

archive/issue_comments_289455.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-13T22:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20950#issuecomment-289455",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
