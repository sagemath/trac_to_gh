# Issue 20950: Overflow in conversion of polynomials in large characteristic to SymbolicRing

Issue created by migration from Trac.

Original creator: pbruin

Original creation time: 2016-08-08 07:38:50

Keywords: symbolic overflow


```

```

Found while looking at #21186, but apparently unrelated:

```
sage: x - polygen(FiniteField(next_prime(2^32)), 'y')
Traceback (most recent call last):
...
OverflowError: Python int too large to convert to C long
```



---

Comment by rws created at 2016-08-10 06:25:58

Any nonzero characteristics computation with symbolics is broken, and rightly so.


---

Comment by pbruin created at 2016-08-10 08:01:02

Replying to [comment:1 rws]:
> Any nonzero characteristics computation with symbolics is broken, and rightly so.
That is perfectly fine with me, as long as it is for mathematical (not programming) reasons.  Also, it should be made clear to the user that this is not supported.  Currently, one can do

```
a = SR(Mod(3, 5))
```

which does seem to behave as expected (e.g. `(a*x)^2` returns `4*x^2`, and multiplying this by 5 returns 0).


---

Comment by rws created at 2016-08-10 08:34:19

I'm not the algebraist to make the mathematical case but I strongly suspect there is one. Of course programming plays a role in that the more we tried to support nonzero characteristics in Pynac the odder were the possible problems. It calls for a structured, i.e., algebraic approach, and symbolics do not mix with that.

The easy cases were implemented but see #18787.

What is needed for a clear error is that someone opens a ticket for it.


---

Comment by jdemeyer created at 2016-08-10 09:45:00

Reading the code from Pynac, it seems that it only differentiates between
- characteristic 0
- characteristic 2
- characteristic >2

So returning "3" might actually fix the problem.


---

Comment by jdemeyer created at 2016-08-10 10:26:34

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-08-10 10:26:34

New commits:


---

Comment by rws created at 2016-08-10 13:09:18

A fine solution to the problem, and it passes `make ptestlong`.


---

Comment by rws created at 2016-08-10 13:09:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-08-13 22:50:59

Resolution: fixed
