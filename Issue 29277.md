# Issue 29277: implement formatting of elements in RDF/CDF

Issue created by migration from https://trac.sagemath.org/ticket/29514

Original creator: @mwageringel

Original creation time: 2020-04-15 19:55:27

This ticket implements `__format__` for elements in `RDF` and `CDF` by delegating to the builtin types `float` and `complex`. See also #29212 for a related discussion.


```
sage: '{:.4e}'.format(RDF(2/3))
'6.6667e-01'
sage: format(CDF(32/3, 0), ' .4f')
' 10.6667+0.0000j'
```


For reference: the [format specification](https://docs.python.org/3/library/string.html#formatspec) in Python.

Note that the imaginary unit is represented as a `j` by the type `complex`, but that is part of Python.


---

Comment by @mwageringel created at 2020-04-15 19:57:28

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2020-04-15 19:57:28

New commits:


---

Comment by git created at 2020-04-15 20:01:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2020-04-16 19:13:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2020-04-16 19:15:58

Actually, here is a much better version that very closely matches the usual representation of elements in `CDF`.


---

Comment by @mwageringel created at 2020-04-16 19:40:31

A possible use case is reducing the number of digits in matrices:

```
sage: print(matrix.random(CDF, 4).str(' {:.4f}'.format))
[ -0.6482 + 0.4684*I   0.7523 + 0.9738*I   0.0076 - 0.5470*I   0.4949 + 0.5821*I]
[  0.6205 + 0.5834*I  -0.0394 + 0.3852*I  -0.3764 - 0.9199*I   0.3162 - 0.2032*I]
[ -0.0436 + 0.5112*I  -0.3949 + 0.2829*I   0.2733 + 0.4865*I   0.3938 - 0.0825*I]
[  0.0763 + 0.6577*I  -0.9444 + 0.4760*I   0.0951 + 0.6043*I  -0.4464 + 0.4081*I]
```



---

Comment by egourgoulhon created at 2020-06-13 18:55:50

LGTM. Thank you!


---

Comment by egourgoulhon created at 2020-06-13 18:55:50

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2020-06-13 18:56:57

Thank you for the review.


---

Comment by vbraun created at 2020-07-08 19:32:40

Resolution: fixed
