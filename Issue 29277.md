# Issue 29277: implement formatting of elements in RDF/CDF

archive/issues_029277.json:
```json
{
    "body": "This ticket implements `__format__` for elements in `RDF` and `CDF` by delegating to the builtin types `float` and `complex`. See also #29212 for a related discussion.\n\n\n```\nsage: '{:.4e}'.format(RDF(2/3))\n'6.6667e-01'\nsage: format(CDF(32/3, 0), ' .4f')\n' 10.6667+0.0000j'\n```\n\n\nFor reference: the [format specification](https://docs.python.org/3/library/string.html#formatspec) in Python.\n\nNote that the imaginary unit is represented as a `j` by the type `complex`, but that is part of Python.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29514\n\n",
    "created_at": "2020-04-15T19:55:27Z",
    "labels": [
        "misc",
        "minor",
        "enhancement"
    ],
    "title": "implement formatting of elements in RDF/CDF",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29277",
    "user": "@mwageringel"
}
```
This ticket implements `__format__` for elements in `RDF` and `CDF` by delegating to the builtin types `float` and `complex`. See also #29212 for a related discussion.


```
sage: '{:.4e}'.format(RDF(2/3))
'6.6667e-01'
sage: format(CDF(32/3, 0), ' .4f')
' 10.6667+0.0000j'
```


For reference: the [format specification](https://docs.python.org/3/library/string.html#formatspec) in Python.

Note that the imaginary unit is represented as a `j` by the type `complex`, but that is part of Python.

Issue created by migration from https://trac.sagemath.org/ticket/29514





---

archive/issue_comments_415028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-15T19:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415028",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_415029.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-15T19:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415029",
    "user": "@mwageringel"
}
```

New commits:



---

archive/issue_comments_415030.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-15T20:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415030",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_415031.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-16T19:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415031",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415032.json:
```json
{
    "body": "Actually, here is a much better version that very closely matches the usual representation of elements in `CDF`.",
    "created_at": "2020-04-16T19:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415032",
    "user": "@mwageringel"
}
```

Actually, here is a much better version that very closely matches the usual representation of elements in `CDF`.



---

archive/issue_comments_415033.json:
```json
{
    "body": "A possible use case is reducing the number of digits in matrices:\n\n```\nsage: print(matrix.random(CDF, 4).str(' {:.4f}'.format))\n[ -0.6482 + 0.4684*I   0.7523 + 0.9738*I   0.0076 - 0.5470*I   0.4949 + 0.5821*I]\n[  0.6205 + 0.5834*I  -0.0394 + 0.3852*I  -0.3764 - 0.9199*I   0.3162 - 0.2032*I]\n[ -0.0436 + 0.5112*I  -0.3949 + 0.2829*I   0.2733 + 0.4865*I   0.3938 - 0.0825*I]\n[  0.0763 + 0.6577*I  -0.9444 + 0.4760*I   0.0951 + 0.6043*I  -0.4464 + 0.4081*I]\n```\n",
    "created_at": "2020-04-16T19:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415033",
    "user": "@mwageringel"
}
```

A possible use case is reducing the number of digits in matrices:

```
sage: print(matrix.random(CDF, 4).str(' {:.4f}'.format))
[ -0.6482 + 0.4684*I   0.7523 + 0.9738*I   0.0076 - 0.5470*I   0.4949 + 0.5821*I]
[  0.6205 + 0.5834*I  -0.0394 + 0.3852*I  -0.3764 - 0.9199*I   0.3162 - 0.2032*I]
[ -0.0436 + 0.5112*I  -0.3949 + 0.2829*I   0.2733 + 0.4865*I   0.3938 - 0.0825*I]
[  0.0763 + 0.6577*I  -0.9444 + 0.4760*I   0.0951 + 0.6043*I  -0.4464 + 0.4081*I]
```




---

archive/issue_comments_415034.json:
```json
{
    "body": "LGTM. Thank you!",
    "created_at": "2020-06-13T18:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415034",
    "user": "egourgoulhon"
}
```

LGTM. Thank you!



---

archive/issue_comments_415035.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-13T18:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415035",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415036.json:
```json
{
    "body": "Thank you for the review.",
    "created_at": "2020-06-13T18:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415036",
    "user": "@mwageringel"
}
```

Thank you for the review.



---

archive/issue_comments_415037.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-08T19:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29277#issuecomment-415037",
    "user": "vbraun"
}
```

Resolution: fixed
