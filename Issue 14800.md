# Issue 14800: Badly formed error messages for ModularFormsRing constructor

archive/issues_014800.json:
```json
{
    "body": "When you give the `ModularFormsRing` constructor invalid input, it returns a badly formed error message, as follows:\n\n```\nsage: ModularFormsRing(3.4)                                      \n...\nValueError: Group (=%s) should be a congruence subgroup\nsage: ModularFormsRing(Gamma0(2), base_ring=PolynomialRing(ZZ,x))\n...\nValueError: Base ring (=%s) should be QQ, ZZ or a finite prime field\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15037\n\n",
    "created_at": "2013-08-12T01:53:24Z",
    "labels": [
        "component: modular forms",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Badly formed error messages for ModularFormsRing constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14800",
    "user": "https://github.com/itaibn"
}
```
When you give the `ModularFormsRing` constructor invalid input, it returns a badly formed error message, as follows:

```
sage: ModularFormsRing(3.4)                                      
...
ValueError: Group (=%s) should be a congruence subgroup
sage: ModularFormsRing(Gamma0(2), base_ring=PolynomialRing(ZZ,x))
...
ValueError: Base ring (=%s) should be QQ, ZZ or a finite prime field
```


Issue created by migration from https://trac.sagemath.org/ticket/15037





---

archive/issue_comments_188515.json:
```json
{
    "body": "applies to 5.12.beta1",
    "created_at": "2013-08-19T15:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188515",
    "user": "https://github.com/JohnCremona"
}
```

applies to 5.12.beta1



---

archive/issue_comments_188516.json:
```json
{
    "body": "Attachment [trac_15037-modular.patch](tarball://root/attachments/some-uuid/ticket15037/trac_15037-modular.patch) by @JohnCremona created at 2013-08-19 15:13:09\n\nThe patch fixes the problem and adds two doctests.",
    "created_at": "2013-08-19T15:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188516",
    "user": "https://github.com/JohnCremona"
}
```

Attachment [trac_15037-modular.patch](tarball://root/attachments/some-uuid/ticket15037/trac_15037-modular.patch) by @JohnCremona created at 2013-08-19 15:13:09

The patch fixes the problem and adds two doctests.



---

archive/issue_comments_188517.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-19T15:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188517",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_188518.json:
```json
{
    "body": "Attachment [trac_15037_review.patch](tarball://root/attachments/some-uuid/ticket15037/trac_15037_review.patch) by @fchapoton created at 2013-08-21 07:05:34\n\nhere is a review patch. You can set the ticket to positive review if you agree with my changes.",
    "created_at": "2013-08-21T07:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188518",
    "user": "https://github.com/fchapoton"
}
```

Attachment [trac_15037_review.patch](tarball://root/attachments/some-uuid/ticket15037/trac_15037_review.patch) by @fchapoton created at 2013-08-21 07:05:34

here is a review patch. You can set the ticket to positive review if you agree with my changes.



---

archive/issue_comments_188519.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> here is a review patch. You can set the ticket to positive review if you agree with my changes.\nOK, I am happy (though no more happy than I was before!   Is it stated somewhere that the % sign should have spaces around it?  If so I will obey in future!)",
    "created_at": "2013-08-21T08:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188519",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:2 chapoton]:
> here is a review patch. You can set the ticket to positive review if you agree with my changes.
OK, I am happy (though no more happy than I was before!   Is it stated somewhere that the % sign should have spaces around it?  If so I will obey in future!)



---

archive/issue_comments_188520.json:
```json
{
    "body": "well, this is the pep8 standard:\n\nhttp://www.python.org/dev/peps/pep-0008/\n\nand it is recommended for sage:\n\nhttp://www.sagemath.org/doc/developer/conventions.html",
    "created_at": "2013-08-21T08:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188520",
    "user": "https://github.com/fchapoton"
}
```

well, this is the pep8 standard:

http://www.python.org/dev/peps/pep-0008/

and it is recommended for sage:

http://www.sagemath.org/doc/developer/conventions.html



---

archive/issue_comments_188521.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-21T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188521",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188522.json:
```json
{
    "body": "Sorry to nitpick, but those exceptions should probably be `TypeError`, not `ValueError` (feel free to ignore this comment, it's not that important anyway).",
    "created_at": "2013-08-21T15:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188522",
    "user": "https://github.com/jdemeyer"
}
```

Sorry to nitpick, but those exceptions should probably be `TypeError`, not `ValueError` (feel free to ignore this comment, it's not that important anyway).



---

archive/issue_comments_188523.json:
```json
{
    "body": "I could easily change that, and at the same time include chapoton's 4 spaces into my patch, but are you sure?  If I give a ring as base_ring which happens not to be one of the rings allowed, that is surely an error in its Value not its Type?",
    "created_at": "2013-08-21T15:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188523",
    "user": "https://github.com/JohnCremona"
}
```

I could easily change that, and at the same time include chapoton's 4 spaces into my patch, but are you sure?  If I give a ring as base_ring which happens not to be one of the rings allowed, that is surely an error in its Value not its Type?



---

archive/issue_comments_188524.json:
```json
{
    "body": "Replying to [comment:7 cremona]:\n> I could easily change that, and at the same time include chapoton's 4 spaces into my patch, but are you sure?  If I give a ring as base_ring which happens not to be one of the rings allowed, that is surely an error in its Value not its Type?\nWell a ring like `RR` is really a type which is not allowed, so that would be clearly a `TypeError`. Perhaps you could argue that `GF(9)` should be a `ValueError` since it's a finite field (an allowed type) but with the wrong number of elements. But for simplicity, I think a `TypeError` there would be okay. Technically speaking, even `GF(3)` and `GF(9)` are different Python types, so the `TypeError` in all cases is certainly defensible:\n\n```\nsage: type(GF(3))\n<class 'sage.rings.finite_rings.finite_field_prime_modn.FiniteField_prime_modn_with_category'>\nsage: type(GF(9,'a'))\n<class 'sage.rings.finite_rings.finite_field_givaro.FiniteField_givaro_with_category'>\n```\n",
    "created_at": "2013-08-21T16:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188524",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 cremona]:
> I could easily change that, and at the same time include chapoton's 4 spaces into my patch, but are you sure?  If I give a ring as base_ring which happens not to be one of the rings allowed, that is surely an error in its Value not its Type?
Well a ring like `RR` is really a type which is not allowed, so that would be clearly a `TypeError`. Perhaps you could argue that `GF(9)` should be a `ValueError` since it's a finite field (an allowed type) but with the wrong number of elements. But for simplicity, I think a `TypeError` there would be okay. Technically speaking, even `GF(3)` and `GF(9)` are different Python types, so the `TypeError` in all cases is certainly defensible:

```
sage: type(GF(3))
<class 'sage.rings.finite_rings.finite_field_prime_modn.FiniteField_prime_modn_with_category'>
sage: type(GF(9,'a'))
<class 'sage.rings.finite_rings.finite_field_givaro.FiniteField_givaro_with_category'>
```




---

archive/issue_comments_188525.json:
```json
{
    "body": "OK -- but I don't think anyone seeing the error message would be very concerned over this distinction!",
    "created_at": "2013-08-21T16:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188525",
    "user": "https://github.com/JohnCremona"
}
```

OK -- but I don't think anyone seeing the error message would be very concerned over this distinction!



---

archive/issue_comments_188526.json:
```json
{
    "body": "Replying to [comment:9 cremona]:\n> OK -- but I don't think anyone seeing the error message would be very concerned over this distinction!\nOf course, I clearly said in [comment:6] that it wasn't an important thing, just something I felt I should mention.",
    "created_at": "2013-08-21T20:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188526",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:9 cremona]:
> OK -- but I don't think anyone seeing the error message would be very concerned over this distinction!
Of course, I clearly said in [comment:6] that it wasn't an important thing, just something I felt I should mention.



---

archive/issue_events_014522.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-28T06:54:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14800#event-14522"
}
```



---

archive/issue_comments_188527.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-28T06:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14800",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14800#issuecomment-188527",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
