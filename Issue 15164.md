# Issue 15164: Build git without gettext if necessary

Issue created by migration from https://trac.sagemath.org/ticket/15401

Original creator: vbraun

Original creation time: 2013-11-12 05:06:00

The git spkg fails to build if gettext is not installed, see https://groups.google.com/d/msg/sage-devel/RAWInaDhz5c/lQYXrKQ4aXEJ 

We should try again without gettext if necessary.


---

Comment by vbraun created at 2013-11-12 05:10:46

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-11-12 05:10:46

New commits:


---

Comment by robertwb created at 2013-11-12 06:15:46

Looks good to me, though is there a reason moving the tests is also part of this ticket? (If so, the description should at least be updated.)


---

Comment by hemmecke created at 2013-11-12 07:57:50

Would that mean that git author names like "Javier López Peña", "Jean-Philippe Labbé", "Alexandre Prusch Züge", "Sébastien Barthélemy", "Sébastien Labbé" will not show correctly in such a git version?


---

Comment by vbraun created at 2013-11-12 16:36:25

The tests obviously belong into `spkg-check`, wtf were they doing in the `spkg-install`?

 Replying to [comment:3 hemmecke]:
> Would that mean that git author names like "Javier López Peña" [...]

no


---

Comment by git created at 2013-11-16 15:14:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2013-11-16 15:19:49

I ran into this problem on the UW redhawk buildslave and fixed it for good.


---

Comment by git created at 2013-11-29 17:22:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-11-29 18:06:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ohanar created at 2013-11-30 23:34:07

Don't you want to define `NO_MSGFMT`, rather than `NO_GETTEXT`? The test provided in git's configure.ac should be sufficient for determining the value of `NO_GETTEXT`


---

Comment by git created at 2013-12-01 01:08:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ohanar created at 2013-12-01 04:07:38

Other than the "combined build/" should probably be removed from the test suite error, positive review.


---

Comment by git created at 2013-12-01 15:11:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2013-12-01 15:11:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-01 15:29:26

git actually doesn't have a `NO_MSGFMT` variable...


---

Comment by git created at 2013-12-01 15:31:07

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2013-12-01 15:31:07

Changing status from positive_review to needs_review.


---

Comment by ohanar created at 2013-12-01 20:19:16

It does, but it looks like it isn't fully implemented.


---

Comment by ohanar created at 2013-12-01 20:19:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-01 20:25:45

Well for the record, it didn't work on UW redhawk. Also, grep finds `NO_MSGFMT` only in the `git[k]-gui` folders, not in the git core part.


---

Comment by ohanar created at 2013-12-01 20:48:38

Yes, it looks like upstream has written their own parser for .po files, but not for .mo files, which is why I say it hasn't been fully implemented.


---

Comment by vbraun created at 2013-12-16 14:05:40

Resolution: fixed
