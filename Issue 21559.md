# Issue 21559: Clean up GAP installation, following Debian's layout

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2016-11-02 01:53:07

CC:  dimpase fbissey jdemeyer vbraun

As discussed on #15105, Debian splits the GAP installation into `lib` and `share`. 
We could do the same.





---

Comment by jdemeyer created at 2016-11-02 09:06:16

This should be done upstream and not just in Sage.


---

Comment by dimpase created at 2016-11-02 12:20:19

Replying to [comment:1 jdemeyer]:
> This should be done upstream and not just in Sage.
The problem here is that the upstream's milestone for this to happen is apparently "Ice age in Hell"...


---

Comment by jdemeyer created at 2016-11-02 12:34:20

If upstream doesn't care, why should Sage care? If you move away from upstream's install system, there should be a reason for that. And "just because Debian does it" is not sufficient reason IMHO.


---

Comment by jdemeyer created at 2016-11-02 12:37:02

Replying to [comment:2 dimpase]:
> The problem here is that the upstream's milestone for this to happen is apparently "Ice age in Hell"...

Do you think they would accept a pull request to make the installation more sane?


---

Comment by vbraun created at 2016-11-02 13:21:07

Either before or after the heat death of the universe ;-)

Sanitizing the gap directory structure is likely to break some GAP third-party packages that expect said layout...


---

Comment by jdemeyer created at 2016-11-02 14:27:38

Replying to [comment:5 vbraun]:
> Sanitizing the gap directory structure is likely to break some GAP third-party packages that expect said layout...

Which is exactly why we should not have a different GAP directory structure compared to upstream.


---

Comment by mkoeppe created at 2016-11-02 18:44:30

OK, let's keep this ticket as an open wishlist item. We can wait until the next generation of GAP maintainers takes a fresh look.


---

Comment by embray created at 2016-11-07 14:11:25

Replying to [comment:2 dimpase]:
> Replying to [comment:1 jdemeyer]:
> > This should be done upstream and not just in Sage.
> The problem here is that the upstream's milestone for this to happen is apparently "Ice age in Hell"...

I'm curious what their reasoning is. What do they gain from having a non-standard installation?


---

Comment by embray created at 2016-11-07 14:12:41

Replying to [comment:5 vbraun]:
> Either before or after the heat death of the universe ;-)
> 
> Sanitizing the gap directory structure is likely to break some GAP third-party packages that expect said layout...

That seems like a problem for GAP + those packages then.


---

Comment by fbissey created at 2016-11-07 19:59:01

I looked at debian packages and they do have a collection of gap packages and yes some them are patched. I actually stole the patch for `atlasrep` and I even think sage should do too. It solve problems when sage is installed globally as root, including `gap_packages` which contains said `atlasrep` (which does fetch stuff from the internet and then wants to write them in `GAP_ROOT_PATH/pkgs` without the patch).

I do not follow debian scheme for gap in Gentoo at this stage. Upstream has developed over the years a nice self contained system with its own packaging. They probably never considered being packaged when they reached that state. Moving to a more standard installation scheme is now a cost against benefits problem. They'll be willing to move when the benefits far outweigh the costs.


---

Comment by embray created at 2016-11-08 11:26:50

The problem is that there's no cost to them not having a more standard packaging scheme--instead they're just pushing the cost on to everyone else who wants to help distribute their software.

Oh well--Jeroen is also right, I think, that there's no reason to tinker with GAP's installation layout in the Sage distribution unless there's a demonstrable need for it.  But I think it's good to leave this ticket open for discussion.


---

Comment by fbissey created at 2016-11-08 21:14:44

My big ears tell me they are actually not interested in being packaged, so they don't really care about cost to anyone else.

Agree on keeping the status quo until something needs to be done.


---

Comment by jdemeyer created at 2017-09-22 13:45:47

So, this can be closed then?


---

Comment by jdemeyer created at 2017-09-22 13:45:47

Changing status from new to needs_review.


---

Comment by dimpase created at 2017-09-22 14:34:00

Changing status from needs_review to positive_review.


---

Comment by embray created at 2017-10-05 14:59:49

I still wish I had some answer as to why GAP thinks it needs to be special. But oh well, so does Sage (which I also don't have a completely satisfactory answer for tbh, other than "history").


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
