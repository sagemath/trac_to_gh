# Issue 15505: Pkgconfig

Issue created by migration from https://trac.sagemath.org/ticket/15742

Original creator: vbraun

Original creation time: 2014-01-27 10:13:31

CC:  fbissey jpflori




---

Comment by vbraun created at 2014-01-27 10:16:14

Changing type from PLEASE CHANGE to enhancement.


---

Comment by vbraun created at 2014-01-27 10:16:14

Changing component from PLEASE CHANGE to build.


---

Comment by git created at 2014-01-27 11:39:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-01-27 11:39:52

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-01-27 13:26:51

`ln -sf` is not portable, better use `rm -f; ln -s`.


---

Comment by jdemeyer created at 2014-01-27 13:26:51

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2014-01-27 13:28:14

Doesn't `PKGCONFIG` in `build/deps` need the usual setuptools workaround (see the bottom of `build/deps`)?


---

Comment by git created at 2014-01-27 17:46:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2014-01-27 19:17:14

Why is pkgconfig depending on sagenb? Do we need something provided by sagenb? I don't really like that dependency.


---

Comment by vbraun created at 2014-01-27 20:01:33

To serialize the install of python packages... we can put it first instead of last.


---

Comment by git created at 2014-01-27 20:02:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2014-01-27 21:18:50

Actually much better since we will want numpy/scipy/cvxopt to use it and come to think of it, we want iml, R, fflas-ffpack and gsl? to feed from it.


---

Comment by vbraun created at 2014-01-27 21:21:10

The commandline pkg-config (`PKGCONF` in `deps`, as opposed to the Python `PKGCONFIG`) is built earlier (and not serialized), for the record.


---

Comment by jhpalmieri created at 2014-01-27 21:27:29

It would be a good idea to put the licensing information for these packages in the top-level file `COPYING.txt`.


---

Comment by git created at 2014-01-27 22:04:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2014-01-27 22:10:15

Something I noticed a few minutes ago. The 1.1.0 release on github and pypi are different. I don't think there is any functional differences but the pypi version doesn't include the tests. In any case the tests require nose which I think is optional.

I just thought I'd mention it.


---

Comment by jdemeyer created at 2014-02-04 08:00:26

Changing component from build to packages: standard.


---

Comment by vbraun created at 2014-02-26 10:02:34

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2014-02-26 10:02:34

No outstanding issues as far as I know.


---

Comment by fbissey created at 2014-02-27 09:02:16

Installed no problem on Maverick and used it in conjunction with #14993 to great effect.


---

Comment by fbissey created at 2014-02-27 09:02:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-02-27 21:28:43

Resolution: fixed


---

Comment by vbraun created at 2014-02-28 10:13:35

Compile runs into issues on some antiques due to ancient _FORTIFY_SOURCE bugs:

```
gcc -c -g -O2 -DLIBDIR=\"/home/buildbot/build/sage/iras-1/sage_git/build/local/lib\" -DINCLUDEDIR=\"/home/buildbot/build/sage/iras-1/sage_git/build/local/include\" -DPKG_DEFAULT_PATH=\"/home/buildbot/build/sage/iras-1/sage_git/build/local/lib/pkgconfig:/home/buildbot/build/sage/iras-1/sage_git/build/local/share/pkgconfig\" -DSYSTEM_INCLUDEDIR=\"/home/buildbot/build/sage/iras-1/sage_git/build/local/include\" -DSYSTEM_LIBDIR=\"/home/buildbot/build/sage/iras-1/sage_git/build/local/lib\" -Wall -Wextra -Wformat=2 -std=gnu99 -D_FORTIFY_SOURCE=2 -I.  queue.c -o queue.o
gcc  -o pkgconf main.o cache.o pkg.o bsdstubs.o getopt_long.o fragment.o argvsplit.o fileio.o tuple.o dependency.o queue.o
cache.o: In function `gets':
/usr/include/bits/stdio2.h:80: multiple definition of `gets'
main.o:/usr/include/bits/stdio2.h:80: first defined here
cache.o: In function `fgets':
/usr/include/bits/stdio2.h:94: multiple definition of `fgets'
main.o:/usr/include/bits/stdio2.h:94: first defined here
cache.o: In function `fgets_unlocked':
/usr/include/bits/stdio2.h:110: multiple definition of `fgets_unlocked'
main.o:/usr/include/bits/stdio2.h:110: first defined here
```



---

Comment by vbraun created at 2014-02-28 10:27:16

New commits:


---

Comment by vbraun created at 2014-02-28 10:27:16

Changing status from closed to new.


---

Comment by vbraun created at 2014-02-28 10:27:16

Resolution changed from fixed to 


---

Comment by git created at 2014-02-28 10:28:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-02-28 10:49:10

Reported at https://github.com/pkgconf/pkgconf/issues/61


---

Comment by git created at 2014-02-28 11:17:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-02-28 11:18:28

The `setup_requires` was downloading nose from setup.py, fixed.


---

Comment by vbraun created at 2014-02-28 11:18:28

Changing status from new to needs_review.


---

Comment by jpflori created at 2014-02-28 13:01:01

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2014-02-28 13:34:59

It seems I have a failure on gcc110.


---

Comment by vbraun created at 2014-02-28 13:44:42

Also fails on Slowaris because it doesn't have a `install` program.


---

Comment by jpflori created at 2014-02-28 13:50:52

Replying to [comment:32 jpflori]:
> It seems I have a failure on gcc110.
False alert.

I had merged the http proxy poisoning stuff, but for some reason I did not have the latest commits from here.


---

Comment by git created at 2014-02-28 14:05:03

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-02-28 14:05:03

Changing status from positive_review to needs_review.


---

Comment by jpflori created at 2014-02-28 14:11:23

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2014-02-28 14:11:23

Seems ok.

I'm testing on another solaris system.
I'll rant here if it fails.


---

Comment by git created at 2014-02-28 16:42:12

Changing status from positive_review to needs_review.


---

Comment by git created at 2014-02-28 16:42:12

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by vbraun created at 2014-02-28 16:50:51

I've opened a pull request with upstream at https://github.com/pkgconf/pkgconf/pull/62

Now builds on solaris, yay ;-)


---

Comment by vbraun created at 2014-03-01 08:48:12

Resolution: fixed
