# Issue 13761: BooleanPolynomialRing.remove_var(...) does not return a BooleanPolynomialRing

archive/issues_013761.json:
```json
{
    "body": "Assignee: malb\n\nCC:  malb alexanderdreyer polybori\n\n\n```\nsage: P.<x,y,z,w> = BooleanPolynomialRing()\nsage: P\nBoolean PolynomialRing in x, y, z, w\n```\n\nand :\n\n```\nsage: P.remove_var('x')\nMultivariate Polynomial Ring in y, z, w over Finite Field of size 2\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13965\n\n",
    "created_at": "2013-01-17T23:02:40Z",
    "labels": [
        "commutative algebra",
        "major",
        "bug"
    ],
    "title": "BooleanPolynomialRing.remove_var(...) does not return a BooleanPolynomialRing",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13761",
    "user": "Bouillaguet"
}
```
Assignee: malb

CC:  malb alexanderdreyer polybori


```
sage: P.<x,y,z,w> = BooleanPolynomialRing()
sage: P
Boolean PolynomialRing in x, y, z, w
```

and :

```
sage: P.remove_var('x')
Multivariate Polynomial Ring in y, z, w over Finite Field of size 2
```


Issue created by migration from https://trac.sagemath.org/ticket/13965





---

archive/issue_comments_170804.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-17T23:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170804",
    "user": "Bouillaguet"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_170805.json:
```json
{
    "body": "The patch looks good, but what about the ordering?",
    "created_at": "2013-01-17T23:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170805",
    "user": "AlexanderDreyer"
}
```

The patch looks good, but what about the ordering?



---

archive/issue_comments_170806.json:
```json
{
    "body": "I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).\n\nI think that we could let the user optionally provide an order for the \"reduced\" ring, and not try to do anything automatically... Do you agree ?",
    "created_at": "2013-01-18T08:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170806",
    "user": "Bouillaguet"
}
```

I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).

I think that we could let the user optionally provide an order for the "reduced" ring, and not try to do anything automatically... Do you agree ?



---

archive/issue_comments_170807.json:
```json
{
    "body": "Replying to [comment:3 Bouillaguet]:\n> I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).\nFor block orders you just have to make the blocks smaller. That' not a oneliner, but something like \n\n```python\nblks=R.term_order().blocks()\nmax_idx = len(blks[0])\nif idx < max_idx:\n  if nlen > 0:\n    new_order = TermOrder(bl, len(bl)-1)\nelse:\n  new_order = bl\n\nfor bl in blks[1:]:\n  nlen = len(bl)\n  max_idx += nlen\n  if idx < max_idx:\n     if nlen > 0:\n       new_order += TermOrder(bl, nlen-1)\n  else:\n     new_order += bl\n \n```\n\nshould do.\n\n> I think that we could let the user optionally provide an order for the \"reduced\" ring, and not try to do anything automatically... Do you agree ?\nIt the line above do not work out for some case, it would be an acceptable alternative.",
    "created_at": "2013-01-18T10:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170807",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:3 Bouillaguet]:
> I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).
For block orders you just have to make the blocks smaller. That' not a oneliner, but something like 

```python
blks=R.term_order().blocks()
max_idx = len(blks[0])
if idx < max_idx:
  if nlen > 0:
    new_order = TermOrder(bl, len(bl)-1)
else:
  new_order = bl

for bl in blks[1:]:
  nlen = len(bl)
  max_idx += nlen
  if idx < max_idx:
     if nlen > 0:
       new_order += TermOrder(bl, nlen-1)
  else:
     new_order += bl
 
```

should do.

> I think that we could let the user optionally provide an order for the "reduced" ring, and not try to do anything automatically... Do you agree ?
It the line above do not work out for some case, it would be an acceptable alternative.



---

archive/issue_comments_170808.json:
```json
{
    "body": "Attachment\n\nI implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.\n\nAlexanderDreyer, do you like it?",
    "created_at": "2013-01-20T14:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170808",
    "user": "Bouillaguet"
}
```

Attachment

I implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.

AlexanderDreyer, do you like it?



---

archive/issue_comments_170809.json:
```json
{
    "body": "Replying to [comment:5 Bouillaguet]:\n> I implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.\n> \n> AlexanderDreyer, do you like it?\nYeah, that indeed a good comprise: it works out of the box in typical use cases and is not to hard in the remaining cases (where people probably know their way thru). So this is a positive review, if patchbot agrees.",
    "created_at": "2013-01-21T08:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170809",
    "user": "AlexanderDreyer"
}
```

Replying to [comment:5 Bouillaguet]:
> I implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.
> 
> AlexanderDreyer, do you like it?
Yeah, that indeed a good comprise: it works out of the box in typical use cases and is not to hard in the remaining cases (where people probably know their way thru). So this is a positive review, if patchbot agrees.



---

archive/issue_comments_170810.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-23T17:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170810",
    "user": "Bouillaguet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_170811.json:
```json
{
    "body": "Patchbot agrees :)",
    "created_at": "2013-01-23T17:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170811",
    "user": "Bouillaguet"
}
```

Patchbot agrees :)



---

archive/issue_comments_170812.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-26T09:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13761",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13761#issuecomment-170812",
    "user": "jdemeyer"
}
```

Resolution: fixed
