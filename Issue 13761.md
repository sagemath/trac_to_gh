# Issue 13761: BooleanPolynomialRing.remove_var(...) does not return a BooleanPolynomialRing

Issue created by migration from Trac.

Original creator: Bouillaguet

Original creation time: 2013-01-17 23:02:40

Assignee: malb

CC:  malb alexanderdreyer polybori


```
sage: P.<x,y,z,w> = BooleanPolynomialRing()
sage: P
Boolean PolynomialRing in x, y, z, w
```

and :

```
sage: P.remove_var('x')
Multivariate Polynomial Ring in y, z, w over Finite Field of size 2
```



---

Comment by Bouillaguet created at 2013-01-17 23:13:53

Changing status from new to needs_review.


---

Comment by AlexanderDreyer created at 2013-01-17 23:59:10

The patch looks good, but what about the ordering?


---

Comment by Bouillaguet created at 2013-01-18 08:12:24

I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).

I think that we could let the user optionally provide an order for the "reduced" ring, and not try to do anything automatically... Do you agree ?


---

Comment by AlexanderDreyer created at 2013-01-18 10:40:25

Replying to [comment:3 Bouillaguet]:
> I mimicked what existed in multi_polynomial_ring_generic.pyx, and it ignored the order (my intuition would be that sometimes it must not be possible to carry on the order, when it is a block order for instance).
For block orders you just have to make the blocks smaller. That' not a oneliner, but something like 

```python
blks=R.term_order().blocks()
max_idx = len(blks[0])
if idx < max_idx:
  if nlen > 0:
    new_order = TermOrder(bl, len(bl)-1)
else:
  new_order = bl

for bl in blks[1:]:
  nlen = len(bl)
  max_idx += nlen
  if idx < max_idx:
     if nlen > 0:
       new_order += TermOrder(bl, nlen-1)
  else:
     new_order += bl
 
```

should do.

> I think that we could let the user optionally provide an order for the "reduced" ring, and not try to do anything automatically... Do you agree ?
It the line above do not work out for some case, it would be an acceptable alternative.


---

Attachment

I implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.

AlexanderDreyer, do you like it?


---

Comment by AlexanderDreyer created at 2013-01-21 08:31:44

Replying to [comment:5 Bouillaguet]:
> I implemented a compromise solution, and for good measure I also adapted it to generic polynomial rings.
> 
> AlexanderDreyer, do you like it?
Yeah, that indeed a good comprise: it works out of the box in typical use cases and is not to hard in the remaining cases (where people probably know their way thru). So this is a positive review, if patchbot agrees.


---

Comment by Bouillaguet created at 2013-01-23 17:33:53

Changing status from needs_review to positive_review.


---

Comment by Bouillaguet created at 2013-01-23 17:33:53

Patchbot agrees :)


---

Comment by jdemeyer created at 2013-01-26 09:55:05

Resolution: fixed
