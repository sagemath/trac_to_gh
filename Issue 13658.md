# Issue 13658: Split graph_generators into several files

Issue created by migration from https://trac.sagemath.org/ticket/13862

Original creator: ncohen

Original creation time: 2012-12-24 15:33:21

Assignee: tbd

CC:  dcoudert




---

Comment by ncohen created at 2012-12-24 17:24:36

Changing assignee from tbd to jason, ncohen, rlm.


---

Comment by ncohen created at 2012-12-24 17:24:36

Changing type from PLEASE CHANGE to enhancement.


---

Comment by ncohen created at 2012-12-24 17:24:36

Changing component from PLEASE CHANGE to graph theory.


---

Comment by ncohen created at 2012-12-25 23:34:29

This patch creates the following files and moves into them the methods from `GraphGenerator` that are associated to it in the list at the top of the graph_generators module documentation.

* basic.py
* degree_sequence.py
* families.py
* platonic_solids.py
* random.py
* smallgraphs.py
* world_map.py

This patch passes all tests, but is not clean yet and lacks documentations. Others will follow.

Nathann


---

Attachment

What this additional ([attachment:trac_13862-cleaning_and_moving.patch]) patch does :
* Moves `_circle_embedding` and `_line_embedding` to `graph_plot.py`. These methods are now imported at the beginning of generators/* modules that need need.
* Removes LCFGraph from the list of basc graphs (this methods creates a family of graphs). It was already in the list of "families" graphs.
* Moves the Harary Graph to the "families" file. Same thing here : there are many Harary graphs.
* Moves `DorogovtsevGoltsevMendesGraph` to `families.py`. Not worth creating an independent "pseudofractal" module at the moment.
* Moves `IntervalGraph` to families. This one was not liste among the "families", which is why it was still in `graph_generators.py` after the first patch.
* Adds the Nauru Graph to the list of small graphs.

Some work on the doc is still needed.

Nathann


---

Attachment


---

Comment by ncohen created at 2012-12-26 00:11:24

Apply trac_13862.patch, trac_13862-cleaning_and_moving.patch


---

Comment by ncohen created at 2012-12-26 10:49:14

What this new patch ([attachment:trac_13862-doc.patch]) does :
* Moves the "Usage" part of the graph_generators module's doc to graph_plot, as it explains how graphs are displayed.
* *HEAVY* rewrite of the fuctions lists at the top of graph_generators. Now the methods are listed in 3xN tables, so that they are easier to browse. This required to define an (ugly) helper function in `graph_generators.py`. But the lists at the top of that file are now easier to read (both in html and in `sage.graphs.graph_generators?`) and easier to update (just add a string in a list).
* `NauruGraph` isadded to the list of small graphs

This patch's almost ready.

Nathann


---

Attachment


---

Comment by ncohen created at 2012-12-26 11:32:39

What this patch does ([attachment:trac_13862-code_reformatting.patch]):

* Removes all occurrences to `self`, as the former methods are now functions and belong to no class.
* Adds a line of doc to all new files, saying that their documentation actually appears in graph_generators

Lots of code formatting `:-P`

(only one patch left)

Nathann


---

Comment by ncohen created at 2012-12-26 11:42:50

Changing status from new to needs_review.


---

Attachment

What this patch does ([attachment:trac_13862-moves_3_constructors.patch]):
* Moves `CompleteGraph`, `CompleteBipartiteGraph` and `CompleteMultipartiteGraph` from `families.py` to `basic.py`
* Adds `CompleteMultipartiteGraph` to the lists, as it did not appears before `O_o`

And nooooow, this ticket is ready to be reviewed !!! `:-P`

Nathann


---

Comment by dcoudert created at 2012-12-28 12:29:43

Hello,

the long tests fail on families.py


```
**********************************************************************
File "/path-to-sage/sage-5.6.beta0/devel/sage-myclone/sage/graphs/generators/families.py", line 1815:
    sage: G = graphs.RingedTree(5)
Exception raised:
    Traceback (most recent call last):
      File "/path-to-sage/sage-5.6.beta0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/path-to-sage/sage-5.6.beta0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/path-to-sage/sage-5.6.beta0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_25[2]>", line 1, in <module>
        G = graphs.RingedTree(Integer(5))###line 1815:
    sage: G = graphs.RingedTree(5)
      File "/path-to-sage/sage-5.6.beta0/local/lib/python/site-packages/sage/graphs/generators/families.py", line 1845, in RingedTree
        from sage.graphs.graph_plot import GraphGenerators
    ImportError: cannot import name GraphGenerators
```


I have run tests only on the graph directory. I don't know if this patch could impact other modules.

Also, you should add possible dependencies with other patches e.g., #13809.


---

Comment by dcoudert created at 2012-12-28 12:29:43

Changing status from needs_review to needs_work.


---

Attachment


---

Attachment


---

Comment by ncohen created at 2012-12-28 21:41:45

God... I ran tests on these files a crazy amount of times but I forgot long tests `:-P`

Updated ! I cheated a bit by first removing #13809 then adding it again, but this set of patch is.... HEAVY to work with `:-P`

Nathann

Apply trac_13862-unapply_13809.patch, trac_13862.patch, trac_13862-cleaning_and_moving.patch, trac_13862-doc.patch, trac_13862-code_reformatting.patch, trac_13862-moves_3_constructors.patch, trac_13862-reapply_13809.patch


---

Comment by ncohen created at 2012-12-28 21:41:45

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2012-12-29 00:17:02

Install OK, doctest OK including long tests, and docbuild OK. 
For me the patch is good to go!

I have added the dependency to the patch description.

This is definitely a huge patch, but it has to be done. Good job.


---

Comment by dcoudert created at 2012-12-29 00:17:02

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2012-12-29 09:17:16

Wow. Glad to see that `:-D`

Thaaaaaaaaaaaaankss !!!

Nathann


---

Comment by ncohen created at 2012-12-30 21:42:24

Apply trac_13862.patch, trac_13862-cleaning_and_moving.patch, trac_13862-doc.patch, trac_13862-code_reformatting.patch, trac_13862-moves_3_constructors.patch


---

Comment by jdemeyer created at 2013-01-01 11:38:00

Resolution: fixed
