# Issue 18568: Add didactical implementation of tableau cutting planes to interactive_simplex_method

archive/issues_018568.json:
```json
{
    "body": "CC:  @novoselt @yuan-zhou zwang pjxiao\n\nWe are working on a didactical implementation of the cutting plane method using tableau cutting planes,\nsuch as Gomory's fractional cut and Gomory's mixed integer cut.\n\nThis would work with `InteractiveLP`, `LPAbstractDictionary`, etc.\n(Via #18804, one could run the cutting plane method also on a backend tableau.)\n\nTo work correctly with mixed integer problems, one would need to remember which variables are real and which are integer. \n\nWould it be acceptable to add a slot such as `._integer_variables` (a set), and a corresponding accessor `.integer_variables`() to the various classes of interactive_simplex_method?\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18805\n\n",
    "created_at": "2015-06-28T19:45:26Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Add didactical implementation of tableau cutting planes to interactive_simplex_method",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18568",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @novoselt @yuan-zhou zwang pjxiao

We are working on a didactical implementation of the cutting plane method using tableau cutting planes,
such as Gomory's fractional cut and Gomory's mixed integer cut.

This would work with `InteractiveLP`, `LPAbstractDictionary`, etc.
(Via #18804, one could run the cutting plane method also on a backend tableau.)

To work correctly with mixed integer problems, one would need to remember which variables are real and which are integer. 

Would it be acceptable to add a slot such as `._integer_variables` (a set), and a corresponding accessor `.integer_variables`() to the various classes of interactive_simplex_method?



Issue created by migration from https://trac.sagemath.org/ticket/18805





---

archive/issue_comments_252212.json:
```json
{
    "body": "I think this would be great, but the interface should be very clean not to scare students ;-) Various checks and methods like `optimal_solution` should of course then be modified to take integrality into consideration.",
    "created_at": "2015-06-28T22:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252212",
    "user": "https://github.com/novoselt"
}
```

I think this would be great, but the interface should be very clean not to scare students ;-) Various checks and methods like `optimal_solution` should of course then be modified to take integrality into consideration.



---

archive/issue_comments_252213.json:
```json
{
    "body": "We now have an implementation of the Gomory fractional and Gomory mixed integer cutting plane methods.\n\nThis is on top of an old version of #18742, and we'll later of course rebase it on top of the final version of it. \nBut comments on the general design would already be very welcome at this point:\n\nhttps://github.com/pgxiao/sage/blob/Peggy/src/sage/numerical/interactive_simplex_method.py",
    "created_at": "2015-07-30T04:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252213",
    "user": "https://github.com/mkoeppe"
}
```

We now have an implementation of the Gomory fractional and Gomory mixed integer cutting plane methods.

This is on top of an old version of #18742, and we'll later of course rebase it on top of the final version of it. 
But comments on the general design would already be very welcome at this point:

https://github.com/pgxiao/sage/blob/Peggy/src/sage/numerical/interactive_simplex_method.py



---

archive/issue_comments_252214.json:
```json
{
    "body": "It is now rebased on top of current 'develop'.\n\nNeeds review.\n----\nLast 10 new commits:",
    "created_at": "2015-08-19T23:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252214",
    "user": "https://github.com/mkoeppe"
}
```

It is now rebased on top of current 'develop'.

Needs review.
----
Last 10 new commits:



---

archive/issue_comments_252215.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-19T23:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252215",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_252216.json:
```json
{
    "body": "I hope to take a closer look during upcoming Sage Days, but some picks at formatting for now, http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings has a long example docsctring:\n\n- there should be empty lines between arguments\n- there should be no empty lines (especially multiple ones) in the very beginning and the very end\n- references to other methods should be marked with `:meth:`, `:func:`, `:class:` as appropriate\n- the very first line should be a one-line description and if at all possible it should take only one line\n- mathematics should be in single back quotes and use of LaTeX is encouraged\n- there should be empty lines after `::` and before the test blocks\n- there should be `::` before EVERY test block\n\nWhile some of these things are convention/taste/style, others are just plain necessary for documentation and testing frameworks to work. As you can see from the patchbot result, the current version does not build.",
    "created_at": "2015-08-20T03:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252216",
    "user": "https://github.com/novoselt"
}
```

I hope to take a closer look during upcoming Sage Days, but some picks at formatting for now, http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings has a long example docsctring:

- there should be empty lines between arguments
- there should be no empty lines (especially multiple ones) in the very beginning and the very end
- references to other methods should be marked with `:meth:`, `:func:`, `:class:` as appropriate
- the very first line should be a one-line description and if at all possible it should take only one line
- mathematics should be in single back quotes and use of LaTeX is encouraged
- there should be empty lines after `::` and before the test blocks
- there should be `::` before EVERY test block

While some of these things are convention/taste/style, others are just plain necessary for documentation and testing frameworks to work. As you can see from the patchbot result, the current version does not build.



---

archive/issue_comments_252217.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-20T03:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252217",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_252218.json:
```json
{
    "body": "Thanks a lot for taking a look and for your comments.\u00a0\n\nI have revised the docstrings. The current version is supposed to build successfully. New commits:\n",
    "created_at": "2015-08-21T22:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252218",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

Thanks a lot for taking a look and for your comments.Â 

I have revised the docstrings. The current version is supposed to build successfully. New commits:




---

archive/issue_comments_252219.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-21T22:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252219",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252220.json:
```json
{
    "body": "The very first change with all the commits::\n\n```\n+def form_thin_long_triangle(k):\n+    r\"\"\"\n+\n+    Generate a thin long triangle with vertices (0, 0), (1, 0), and (1/2, k)\n+    for some given integer K, and return the triangle in Ax<=b form.\n+    This thin long triangle is an example of a system with large Chvatal rank.\n+\n+    INPUT:\n+    -``k``-- an integer indicating the y coordinate of the top vertex for the triangle\n+\n+    OUTPUT:\n+    -``A`` -- a two by two matrix\n+    -``b`` -- a two-element vector\n+\n+    EXAMPLES::\n+        sage: from sage.numerical.interactive_simplex_method \\\n+        ....:     import form_thin_long_triangle\n+        sage: A, b, = form_thin_long_triangle(4)\n+        sage: A, b\n+        (([-8, 1], [8, 1]), (0, 8))\n+\n+    \"\"\"\n+    A = ([Integer(-2 * k), Integer(1)], [Integer(2 * k), Integer(1)])\n+    b = (Integer(0), Integer(2 * k))\n+    type(b[0])\n+    return A, b\n```\n\n\n- empty line in the beginning of the docstring\n- no one-line description in the beginning\n- math should be written as LaTeX\n- INPUT/OUTPUT/EXAMPLES blocks lack empty lines\n- I do not understand the documentation - what does it mean to generate a triangle in the form Ax<=b?\n- the output does not match the documentation, A is not a matrix and b is not a vector\n- there is no need in `Integer` conversion (and its import)\n- `type(...)` does nothing useful\n- why would a user need such a function??? If it is for internal use, perhaps start with underscore.",
    "created_at": "2015-08-24T22:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252220",
    "user": "https://github.com/novoselt"
}
```

The very first change with all the commits::

```
+def form_thin_long_triangle(k):
+    r"""
+
+    Generate a thin long triangle with vertices (0, 0), (1, 0), and (1/2, k)
+    for some given integer K, and return the triangle in Ax<=b form.
+    This thin long triangle is an example of a system with large Chvatal rank.
+
+    INPUT:
+    -``k``-- an integer indicating the y coordinate of the top vertex for the triangle
+
+    OUTPUT:
+    -``A`` -- a two by two matrix
+    -``b`` -- a two-element vector
+
+    EXAMPLES::
+        sage: from sage.numerical.interactive_simplex_method \
+        ....:     import form_thin_long_triangle
+        sage: A, b, = form_thin_long_triangle(4)
+        sage: A, b
+        (([-8, 1], [8, 1]), (0, 8))
+
+    """
+    A = ([Integer(-2 * k), Integer(1)], [Integer(2 * k), Integer(1)])
+    b = (Integer(0), Integer(2 * k))
+    type(b[0])
+    return A, b
```


- empty line in the beginning of the docstring
- no one-line description in the beginning
- math should be written as LaTeX
- INPUT/OUTPUT/EXAMPLES blocks lack empty lines
- I do not understand the documentation - what does it mean to generate a triangle in the form Ax<=b?
- the output does not match the documentation, A is not a matrix and b is not a vector
- there is no need in `Integer` conversion (and its import)
- `type(...)` does nothing useful
- why would a user need such a function??? If it is for internal use, perhaps start with underscore.



---

archive/issue_comments_252221.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-24T22:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252221",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_252222.json:
```json
{
    "body": "\n```\n+        Examples for the sufficient conditions for integer slack variables::\n+\n+            sage: P = InteractiveLPProblem(A, b, c)\n+            sage: P.integer_variables()\n+            set()\n+            sage: P = InteractiveLPProblem(A, b, c, integer_variables=True)\n+            sage: P.integer_variables()\n+            {x1, x2, x3, x4}\n+            sage: b1 = (11/10, 5)\n+            sage: P = InteractiveLPProblem(A, b1, c, integer_variables=True)\n+            sage: P.integer_variables()\n+            {x1, x2, x4}\n+            sage: A1 = ([1, 1], [3/10, 1])\n+            sage: P = InteractiveLPProblem(A1, b1, c, integer_variables=True)\n+            sage: P.integer_variables()\n+            {x1, x2}\n+\n+        Allow the user to choose integer slack variables which may violate the sufficient conditions::\n+\n+            sage: P = InteractiveLPProblem(A, b, c, integer_variables={'x1', 'x2', 'x3'})\n+            sage: P.integer_variables()\n+            {x1, x2, x3}\n```\n\nI do not understand the comments here. These examples should demonstrate creation of problems and use of parameters, there was no talk about slack variables, sufficient conditions, and their violation.",
    "created_at": "2015-08-24T22:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252222",
    "user": "https://github.com/novoselt"
}
```


```
+        Examples for the sufficient conditions for integer slack variables::
+
+            sage: P = InteractiveLPProblem(A, b, c)
+            sage: P.integer_variables()
+            set()
+            sage: P = InteractiveLPProblem(A, b, c, integer_variables=True)
+            sage: P.integer_variables()
+            {x1, x2, x3, x4}
+            sage: b1 = (11/10, 5)
+            sage: P = InteractiveLPProblem(A, b1, c, integer_variables=True)
+            sage: P.integer_variables()
+            {x1, x2, x4}
+            sage: A1 = ([1, 1], [3/10, 1])
+            sage: P = InteractiveLPProblem(A1, b1, c, integer_variables=True)
+            sage: P.integer_variables()
+            {x1, x2}
+
+        Allow the user to choose integer slack variables which may violate the sufficient conditions::
+
+            sage: P = InteractiveLPProblem(A, b, c, integer_variables={'x1', 'x2', 'x3'})
+            sage: P.integer_variables()
+            {x1, x2, x3}
```

I do not understand the comments here. These examples should demonstrate creation of problems and use of parameters, there was no talk about slack variables, sufficient conditions, and their violation.



---

archive/issue_comments_252223.json:
```json
{
    "body": "\n```\n+        slack_variables = [\"{}{:d}\".format(\"x\", i)\n+                               for i in range(n + 1, n + m + 1)]\n```\n\nAfter all the work for supporting different styles there are now slack variables hard-coded to be x in generic problems that did not use to even have slack variables?!\n\nThis is not going to work for such a huge patch. Can you please provide a detailed text overview of what exactly should be achieved by this ticket and the plan of how this will be done?\n\nIt would be great also to have an incremental set of tickets that add new functionality without affecting much existing code. Looking at the commit messages, I am quite puzzled by the move of `ELLUL` method to abstract dictionaries: I think it does not make sense for revised dictionaries and for the regular ones its implementation relies on knowledge of the latex representation of these regular dictionaries - so it does belong to the place where it originally was...",
    "created_at": "2015-08-24T23:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252223",
    "user": "https://github.com/novoselt"
}
```


```
+        slack_variables = ["{}{:d}".format("x", i)
+                               for i in range(n + 1, n + m + 1)]
```

After all the work for supporting different styles there are now slack variables hard-coded to be x in generic problems that did not use to even have slack variables?!

This is not going to work for such a huge patch. Can you please provide a detailed text overview of what exactly should be achieved by this ticket and the plan of how this will be done?

It would be great also to have an incremental set of tickets that add new functionality without affecting much existing code. Looking at the commit messages, I am quite puzzled by the move of `ELLUL` method to abstract dictionaries: I think it does not make sense for revised dictionaries and for the regular ones its implementation relies on knowledge of the latex representation of these regular dictionaries - so it does belong to the place where it originally was...



---

archive/issue_comments_252224.json:
```json
{
    "body": "\n```\n+            integer_variables=self.integer_variables())\n```\n\nMost definitely wrong while constructing either a dual problem or converting to standard form!!!\n\nThe current code was used by several hundred students for working on individual assignments (i.e. applied to quite different problems some of which exposed corner cases), so it is relatively bug free and easy to use/consistent. With major changes it may be a good idea to use it for your course, make tweaks that surface during the term, and then work on a patch for changing the standard module.",
    "created_at": "2015-08-24T23:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252224",
    "user": "https://github.com/novoselt"
}
```


```
+            integer_variables=self.integer_variables())
```

Most definitely wrong while constructing either a dual problem or converting to standard form!!!

The current code was used by several hundred students for working on individual assignments (i.e. applied to quite different problems some of which exposed corner cases), so it is relatively bug free and easy to use/consistent. With major changes it may be a good idea to use it for your course, make tweaks that surface during the term, and then work on a patch for changing the standard module.



---

archive/issue_comments_252225.json:
```json
{
    "body": "As a possibility to consider - derive new classes like\n\n```\nclass InteractiveMILPProblem(InteractiveLPProblem):\n   ...\n```\n\nthat will concentrate just on Gomory's cuts.",
    "created_at": "2015-08-24T23:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252225",
    "user": "https://github.com/novoselt"
}
```

As a possibility to consider - derive new classes like

```
class InteractiveMILPProblem(InteractiveLPProblem):
   ...
```

that will concentrate just on Gomory's cuts.



---

archive/issue_comments_252226.json:
```json
{
    "body": "Thanks for your initial comments.\n\nThe individual commits on this branch, if you read them in the right order (from oldest to newest -- the commit with the triangle testcase is the last commit before the commits that clean up docstrings), add features gradually and should be easy to review. \n\nMaking ELLUL available for both LPDictionary and LPRevisedDictionary is motivated by implementing run_dual_simplex_method as a dictionary method. I think this makes a lot of sense because each of the individual methods that ELLUL stands for are available for both dictionary types.\n\nWe need this as a subroutine for the cutting plane method. (Perhaps run_simplex_method and run_revised_simplex_method can and should be refactored as well and pushed down to become dictionary methods?)",
    "created_at": "2015-08-25T22:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252226",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for your initial comments.

The individual commits on this branch, if you read them in the right order (from oldest to newest -- the commit with the triangle testcase is the last commit before the commits that clean up docstrings), add features gradually and should be easy to review. 

Making ELLUL available for both LPDictionary and LPRevisedDictionary is motivated by implementing run_dual_simplex_method as a dictionary method. I think this makes a lot of sense because each of the individual methods that ELLUL stands for are available for both dictionary types.

We need this as a subroutine for the cutting plane method. (Perhaps run_simplex_method and run_revised_simplex_method can and should be refactored as well and pushed down to become dictionary methods?)



---

archive/issue_comments_252227.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T00:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252228.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> (Perhaps run_simplex_method and run_revised_simplex_method can and should be refactored as well and pushed down to become dictionary methods?)\n\nWe'll redo this ticket on top of #19097 that does the above and implements the dual simplex method. \nThis is to make the present ticket smaller.",
    "created_at": "2015-08-26T22:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252228",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:13 mkoeppe]:
> (Perhaps run_simplex_method and run_revised_simplex_method can and should be refactored as well and pushed down to become dictionary methods?)

We'll redo this ticket on top of #19097 that does the above and implements the dual simplex method. 
This is to make the present ticket smaller.



---

archive/issue_comments_252229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-05T17:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252230.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-09T03:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252231.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-24T21:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252232.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-09-30T06:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_252233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-04T17:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-04T22:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252235.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-10-22T17:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252236.json:
```json
{
    "body": "I still think that this would be the ideal solution:\n\nReplying to [comment:12 novoselt]:\n> As a possibility to consider - derive new classes like\n> {{{\n> class InteractiveMILPProblem(InteractiveLPProblem):\n>    ...\n> }}}\n> that will concentrate just on Gomory's cuts.\n\nIt may even make sense to start a new file for that given that current simplex method implementation is almost 4.5k lines. And I am not an expert in terminology, but my understanding is that \"simplex method\" is for real variables while Gomory cuts is a way to use it repeatedly adjusting constraints to solve integer optimization problems, i.e. \"it builds on simplex method\". Apart from ease of reviewing, it may make sense didactically as those who study simplex method may want to look at the code as well, so it is good to keep it simpler/cleaner.",
    "created_at": "2015-10-22T20:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252236",
    "user": "https://github.com/novoselt"
}
```

I still think that this would be the ideal solution:

Replying to [comment:12 novoselt]:
> As a possibility to consider - derive new classes like
> {{{
> class InteractiveMILPProblem(InteractiveLPProblem):
>    ...
> }}}
> that will concentrate just on Gomory's cuts.

It may even make sense to start a new file for that given that current simplex method implementation is almost 4.5k lines. And I am not an expert in terminology, but my understanding is that "simplex method" is for real variables while Gomory cuts is a way to use it repeatedly adjusting constraints to solve integer optimization problems, i.e. "it builds on simplex method". Apart from ease of reviewing, it may make sense didactically as those who study simplex method may want to look at the code as well, so it is good to keep it simpler/cleaner.



---

archive/issue_comments_252237.json:
```json
{
    "body": "Replying to [comment:25 novoselt]:\n> I still think that this would be the ideal solution:\n> \n> Replying to [comment:12 novoselt]:\n> > As a possibility to consider - derive new classes like\n> > {{{\n> > class InteractiveMILPProblem(InteractiveLPProblem):\n> >    ...\n> > }}}\n> > that will concentrate just on Gomory's cuts.\n> \n> It may even make sense to start a new file for that given that current simplex method implementation is almost 4.5k lines. And I am not an expert in terminology, but my understanding is that \"simplex method\" is for real variables while Gomory cuts is a way to use it repeatedly adjusting constraints to solve integer optimization problems, i.e. \"it builds on simplex method\".\n\nYes.\n\n> Apart from ease of reviewing, it may make sense didactically as those who study simplex method may want to look at the code as well, so it is good to keep it simpler/cleaner.\n\nYes, we'll look into this. But a few things from this patch would still make sense to add to the existing classes:\n\n1) Refactoring of the plot method\n2) Refactoring leaving_coefficients through row_coefficients etc.\n3) The add_row methods\n\nWe can make separate tickets for all of these -- let me know.",
    "created_at": "2015-10-22T21:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252237",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:25 novoselt]:
> I still think that this would be the ideal solution:
> 
> Replying to [comment:12 novoselt]:
> > As a possibility to consider - derive new classes like
> > {{{
> > class InteractiveMILPProblem(InteractiveLPProblem):
> >    ...
> > }}}
> > that will concentrate just on Gomory's cuts.
> 
> It may even make sense to start a new file for that given that current simplex method implementation is almost 4.5k lines. And I am not an expert in terminology, but my understanding is that "simplex method" is for real variables while Gomory cuts is a way to use it repeatedly adjusting constraints to solve integer optimization problems, i.e. "it builds on simplex method".

Yes.

> Apart from ease of reviewing, it may make sense didactically as those who study simplex method may want to look at the code as well, so it is good to keep it simpler/cleaner.

Yes, we'll look into this. But a few things from this patch would still make sense to add to the existing classes:

1) Refactoring of the plot method
2) Refactoring leaving_coefficients through row_coefficients etc.
3) The add_row methods

We can make separate tickets for all of these -- let me know.



---

archive/issue_comments_252238.json:
```json
{
    "body": "Separate tickets for separate problems are always better ;-)\n\nThe sensitivity analysis methods require some careful thinking for fitting in into existing framework where:\n- problems are thought to be immutable (and I think it is a good decision in line with how other stuff in Sage works), so adding/removing constraints to them should return a new problem with augmented matrices etc;\n- dictionaries are mutable, but are supposed to always represent the same problem;\n- regular dictionaries are standalone entities that are not aware of \"the original problem\", which makes sense since they carry all the information, while revised dictionaries do remember the problem, which also makes sense since they rely on its data for computing necessary stuff.\n\nIt probably makes sense to have something like `problem.add_stuff(stuff_to_add, dictionary=None)` which returns the new problem and, optionally given a dictionary for the old problem, also a related dictionary for the new problem.",
    "created_at": "2015-10-22T23:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252238",
    "user": "https://github.com/novoselt"
}
```

Separate tickets for separate problems are always better ;-)

The sensitivity analysis methods require some careful thinking for fitting in into existing framework where:
- problems are thought to be immutable (and I think it is a good decision in line with how other stuff in Sage works), so adding/removing constraints to them should return a new problem with augmented matrices etc;
- dictionaries are mutable, but are supposed to always represent the same problem;
- regular dictionaries are standalone entities that are not aware of "the original problem", which makes sense since they carry all the information, while revised dictionaries do remember the problem, which also makes sense since they rely on its data for computing necessary stuff.

It probably makes sense to have something like `problem.add_stuff(stuff_to_add, dictionary=None)` which returns the new problem and, optionally given a dictionary for the old problem, also a related dictionary for the new problem.



---

archive/issue_comments_252239.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-03-04T02:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252240.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-09T05:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252241.json:
```json
{
    "body": "rebased on top of 7.2.beta3",
    "created_at": "2016-04-09T05:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252241",
    "user": "https://github.com/mkoeppe"
}
```

rebased on top of 7.2.beta3



---

archive/issue_comments_252242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-26T00:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252243.json:
```json
{
    "body": "So what exactly is going on here? I thought we have reached an agreement that it would be better to keep the simplex method stuff as is and have a separate class/module for dealing with integer variables via Gomory's cuts, changing problems and running simplex method repeatedly. As it stands now, this is a single huge commit changing a lot of code and injecting integer variables directly into `InteractiveLPProblem`.",
    "created_at": "2016-04-26T03:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252243",
    "user": "https://github.com/novoselt"
}
```

So what exactly is going on here? I thought we have reached an agreement that it would be better to keep the simplex method stuff as is and have a separate class/module for dealing with integer variables via Gomory's cuts, changing problems and running simplex method repeatedly. As it stands now, this is a single huge commit changing a lot of code and injecting integer variables directly into `InteractiveLPProblem`.



---

archive/issue_comments_252244.json:
```json
{
    "body": "Nothing much going on. The main author is busy with classes. \nI'm rebasing occasionally to keep it up-to-date with sage. \nThe plan is to follow your suggestion and make it a separate set of classes.\n\nBut please take a look at #20500, split out (and cleaned up) from this huge patch.",
    "created_at": "2016-04-26T03:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252244",
    "user": "https://github.com/mkoeppe"
}
```

Nothing much going on. The main author is busy with classes. 
I'm rebasing occasionally to keep it up-to-date with sage. 
The plan is to follow your suggestion and make it a separate set of classes.

But please take a look at #20500, split out (and cleaned up) from this huge patch.



---

archive/issue_comments_252245.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-04-26T04:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_252246.json:
```json
{
    "body": "Rebased on top of #20500; it seems to work again.",
    "created_at": "2016-04-26T04:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252246",
    "user": "https://github.com/mkoeppe"
}
```

Rebased on top of #20500; it seems to work again.



---

archive/issue_comments_252247.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-05-01T00:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252247",
    "user": "https://trac.sagemath.org/admin/accounts/users/pjxiao"
}
```

New commits:



---

archive/issue_comments_252248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-01T21:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-04T03:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252250.json:
```json
{
    "body": "A part of this is now split out as #20559. Will rebase on top of that later.",
    "created_at": "2016-05-05T00:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252250",
    "user": "https://github.com/mkoeppe"
}
```

A part of this is now split out as #20559. Will rebase on top of that later.



---

archive/issue_comments_252251.json:
```json
{
    "body": "Development of this, based on pjxiao's Aug 24, 2016 version from https://github.com/pgxiao/sage.git, is now taking place at https://github.com/mkoeppe/sage-numerical-interactive-mip\n\nThe present ticket should be closed.",
    "created_at": "2020-01-23T18:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252251",
    "user": "https://github.com/mkoeppe"
}
```

Development of this, based on pjxiao's Aug 24, 2016 version from https://github.com/pgxiao/sage.git, is now taking place at https://github.com/mkoeppe/sage-numerical-interactive-mip

The present ticket should be closed.



---

archive/issue_comments_252252.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-01-23T18:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252252",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_252253.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-23T21:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252253",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252254.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-01-24T08:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18568#issuecomment-252254",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
