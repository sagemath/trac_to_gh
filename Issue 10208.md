# Issue 10208: typo in vm_basis.py

Issue created by migration from Trac.

Original creator: AlexGhitza

Original creation time: 2010-11-04 08:03:57

Assignee: craigcitro

CC:  was mraum

Keywords: delta

A typo in the function `delta_qexp` in `vm_basis.py` means that an if statement which is supposed to speed things up over `ZZ` or `QQ` never gets it right.

Trivial patch coming up.


---

Attachment


---

Comment by AlexGhitza created at 2010-11-04 08:52:46

See the attached patch.  I don't think the fix can be doctested, but here are some timings on `sage-4.6.1.alpha0`:

BEFORE THE PATCH:

```
sage: timeit('f = delta_qexp(100)')
625 loops, best of 3: 431 µs per loop
sage: timeit('f = delta_qexp(10000)')
25 loops, best of 3: 35.7 ms per loop
sage: timeit('f = delta_qexp(1000000)')
5 loops, best of 3: 6.42 s per loop
```


AFTER THE PATCH:

```
sage: timeit('f = delta_qexp(100)')
625 loops, best of 3: 304 µs per loop
sage: timeit('f = delta_qexp(10000)')
25 loops, best of 3: 28.9 ms per loop
sage: timeit('f = delta_qexp(1000000)')
5 loops, best of 3: 5.73 s per loop
```



---

Comment by mraum created at 2010-11-04 09:47:42

That's right, apart from timings there is no "visible" difference. All tests pass, so I would give this a positive review. Do you want to change anything before?


---

Comment by AlexGhitza created at 2010-11-04 10:47:28

Oops, just forgot to set it to "needs review".


---

Comment by AlexGhitza created at 2010-11-04 10:47:28

Changing status from new to needs_review.


---

Comment by mraum created at 2010-11-04 11:08:33

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2010-11-10 22:22:13

Resolution: fixed
