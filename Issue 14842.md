# Issue 14842: unique_round for RIF

Issue created by migration from https://trac.sagemath.org/ticket/15079

Original creator: dkrenn

Original creation time: 2013-08-22 13:44:32

Keywords: rif, floor, ceil, round

`RIF`-element has already `.unique_floor` and `.unique_ceil` and now has a `.unique_round`


---

Comment by dkrenn created at 2013-08-22 13:57:34

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-11-22 18:03:51

Changing component from numerical to basic arithmetic.


---

Comment by jdemeyer created at 2013-11-22 18:03:51

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2013-11-22 18:03:51

Why make a special case for `self < 0`? This is bad:

```
sage: RIF(-1/2,-1/3).unique_round()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-6a343dbc6aff> in <module>()
----> 1 RIF(-Integer(1)/Integer(2),-Integer(1)/Integer(3)).unique_round()

/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/rings/real_mpfi.so in sage.rings.real_mpfi.RealIntervalFieldElement.unique_round (sage/rings/real_mpfi.c:15854)()

/usr/local/src/sage-5.13.beta1/local/lib/python2.7/site-packages/sage/rings/real_mpfi.so in sage.rings.real_mpfi.RealIntervalFieldElement.unique_round (sage/rings/real_mpfi.c:15959)()

ValueError: interval does not have a unique round (nearest integer)
sage: RIF(-1/2,1/3).unique_round()
0
```

If an interval doesn't have a unique round, a larger interval certainly should not have a unique round.


---

Comment by dkrenn created at 2013-11-24 17:26:29

Replying to [comment:2 jdemeyer]:
> Why make a special case for `self < 0`? 

Since `RIF(-1/2).unique_round()` should give `-1`.

> This is bad:
> {{{
> sage: RIF(-1/2,-1/3).unique_round()
> ...
> ValueError: interval does not have a unique round (nearest integer)
> sage: RIF(-1/2,1/3).unique_round()
> 0
> }}}
> If an interval doesn't have a unique round, a larger interval certainly should not have a unique round.

Corrected and tests added.


---

Comment by dkrenn created at 2013-11-24 17:26:29

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-11-24 17:30:30

Replying to [comment:3 dkrenn]:
> Replying to [comment:2 jdemeyer]:
> > Why make a special case for `self < 0`? 
> 
> Since `RIF(-1/2).unique_round()` should give `-1`.
Sure, but then why don't implement `unique_round()` like `unique_floor()`?


---

Comment by dkrenn created at 2013-11-24 17:38:18

Replying to [comment:4 jdemeyer]:
> Replying to [comment:3 dkrenn]:
> > Replying to [comment:2 jdemeyer]:
> > > Why make a special case for `self < 0`? 
> > 
> > Since `RIF(-1/2).unique_round()` should give `-1`.
> Sure, but then why don't implement `unique_round()` like `unique_floor()`?

Oh...how could I not see this...it is much simplier ;)

Done now.


---

Attachment


---

Comment by jdemeyer created at 2013-11-27 21:43:34

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-12-05 08:01:44

Resolution: fixed
