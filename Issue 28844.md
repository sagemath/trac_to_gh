# Issue 28844: allow proper detection of gf2x 1.3

Issue created by migration from https://trac.sagemath.org/ticket/29081

Original creator: dimpase

Original creation time: 2020-01-26 11:05:05

CC:  arojas isuruf fbissey

our current (a very convoluted) test for system's gf2x version 1.2 stumbles on newer gf2x (due to a change in certain function signature). E.g. Arch already has 1.3, so this needs a fix.

An easy fix is to use pkg-config to test for the version, as now gf2x comes with gf2x.pc (I've done a patch for gf2x at some point to fix this :-)).


---

Comment by dimpase created at 2020-01-26 11:06:48

Antonio, do you know whether using gf2x 1.3.0 needs any doctest patches?


---

Comment by arojas created at 2020-01-26 11:33:26

Replying to [comment:1 dimpase]:
> Antonio, do you know whether using gf2x 1.3.0 needs any doctest patches? 

No, everything works fine


---

Comment by dimpase created at 2020-01-26 11:55:10

Changing type from enhancement to defect.


---

Comment by dimpase created at 2020-01-26 11:55:10

New commits:


---

Comment by dimpase created at 2020-01-26 11:55:10

Changing status from new to needs_review.


---

Comment by arojas created at 2020-01-30 10:43:37

Replying to [comment:1 dimpase]:
> Antonio, do you know whether using gf2x 1.3.0 needs any doctest patches? 

Forgot to mention: even though sage itself works fine, ntl<11.4.2 will fail to build. So using gf2x>=1.3 requires using ntl>=11.4.2 or applying this patch:

https://git.archlinux.org/svntogit/community.git/tree/trunk/ntl-gf2x-1.3.patch?h=packages/ntl&id=984d20aef5d675abc756f151cb044944bdb78575


---

Comment by dimpase created at 2020-01-30 12:05:22

We can either upgrade NTL in Sage (we should anyway, see #29109) or we can check in our spkg-configure that gf2x is too new and do not configure NTL to use gf2x in this case.


---

Comment by dimpase created at 2020-02-03 18:53:43

Replying to [comment:5 dimpase]:
> We can either upgrade NTL in Sage (we should anyway, see #29109) or we can check in our spkg-configure that gf2x is too new and do not configure NTL to use gf2x in this case.

with #29109 done, gf2x 1.3.0 may be used without a problem. I've added #29109 as dependency here. So this can go forward too.


---

Comment by arojas created at 2020-02-07 22:56:54

Built fine on Arch with system gf2x 1.3


---

Comment by arojas created at 2020-02-07 22:56:54

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-02-08 21:00:26

please add missing reviewer name


---

Comment by vbraun created at 2020-02-10 20:05:45

Resolution: fixed
