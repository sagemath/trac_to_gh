# Issue 18406: Implement reverse row bumping for Tableaux

Issue created by migration from Trac.

Original creator: j.levinson

Original creation time: 2015-06-08 22:48:52

CC:  vivianepons alauve g.chatel aschilling jpswanson darij saliola

Keywords: sd65

Implement the reverse Schensted insertion algorithm for semistandard tableaux.


---

Comment by j.levinson created at 2015-06-08 23:07:06

Changing keywords from "sd65" to "days65".


---

Comment by j.levinson created at 2015-06-10 15:10:48

I implemented reverse bumping, but I haven't built the documentation yet.
----
New commits:


---

Comment by j.levinson created at 2015-06-10 15:10:48

Changing component from packages: standard to combinatorics.


---

Comment by j.levinson created at 2015-06-10 15:10:48

Changing status from new to needs_review.


---

Comment by git created at 2015-06-10 17:03:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-10 22:20:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-11 04:15:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by alauve created at 2015-06-15 17:04:10

Thanks for implementing this. I have only minor comments (1&2), plus some questions (3&4) for all cc'd.

Jake,
1. Have a look at the python conventions page [http://www.sagemath.org/documentation/html/en/developer/coding_basics.html#python-code-style](http://www.sagemath.org/documentation/html/en/developer/coding_basics.html#python-code-style), as there are a few (minor) violations. E.g., "_from (r-1,c)_" should read "_from (r-1, c)._"

2. It might be nice to add "Schensted" or some such keyword in the one-sentence-description of `reverse_bump()`'s docstring.

-----

All,
3. Does it make sense to implement an `is_semistandard()` method?

4. Should we move `.bump()` and `.reverse_bump()` to `SemistandardTableaux` class? As defined, `.bump()` will produce _something_ for any tableau _T_, but it will not be the inverse of `.reverse_bump()` unless _T_ is semistandard. In the opposite direction, `.reverse_bump()` assumes that _T_ is semistandard. There is no inverse to the map `.bump()` as presently defined. Regardless, in the code

```python
if not (self.is_row_increasing(weak=True) and self.is_column_increasing(weak=False)):
    raise ValueError("Reverse bumping is only defined for semistandard tableaux")
```

perhaps the error should be `TypeError` or `NotImplementedError`?


---

Comment by alauve created at 2015-06-15 17:04:10

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-06-19 13:46:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by j.levinson created at 2015-06-19 13:48:21

Thanks for the review, Aaron.

1. Done.

2. Done.

3. Sure, done. Relatedly, would it be good to deprecate `is_row_strict()` in favor of `is_row_increasing(weak=False)` and likewise for columns? It seems cleaner to have a single function which can test for both the strict and weak conditions.

4. I think `.bump()` should behave the same way as `.reverse_bump()` with regards to type-checking, whatever we decide regarding which class to keep it in. So even if we don't move it, I think `.bump()` should probably raise an error on non-semistandard tableaux.

  I have never heard of applying Schensted's algorithm to a non-semistandard tableau, so it seems bad that this function does it (indeed, there are several equivalent formulations of the algorithm which cease to be equivalent when applied to non-semistandard tableaux. One of these happens to be the way `.bump()` is implemented, which seems arbitrary). So moving it to the `SemistandardTableau` class seems logical and would let us dispense with the typechecking.

  That said, removing functionality makes me uncomfortable -- certainly I have run computations using "semistandard `Tableaux`" before I knew that "`SemistandardTableaux`" even existed; I imagine other users might be doing the same.


---

Comment by alauve created at 2015-06-19 14:39:22

3. I don't see the problem with keeping a few other method names around. (e.g., using tab completion, would you have guessed that `.is_row_increasing` would have the option to check for weak and strict?) 
As part of this ticket, we could certainly re-code `self.is_row_strict()` to be the single line, 
`return self.is_row_increasing(weak=False)`. Likewise for `.is_column_strict()`. In the interest of discoverability, might even want to add an `.is_row_weakly_increasing()` method. Let's see what others have to say.

4. Okay. I'm with you. Moving the code only to `SemistandardTableaux` is probably not the answer. For a given _T_, we just do `T.is_semistandard()` (Note to inheritance experts: for efficiency, should we duplicate the code in `SemistandardTableaux` class, minus this check?)

As far as adding the `.is_semistandard()` check to `.bump()` (and potentially breaking a few users' sloppy code), let's see what others have to say.


---

Comment by aschilling created at 2015-06-19 15:50:41

Hi Jake,

Great that you made so much progress since the Sage Days!

I would either point `is_row_strict` (and similarly `is_column_strict`) to your method with the appropriate specification of `weak` or actually introduce the option `weak` in these methods and not introduce a new method (of course, having increasing in the name is more appropriate than strict).

Also, have a look at `RSK` and `RSK_inverse` since these must at least implicitly use inverse bumping.

Best,

Anne


---

Comment by darij created at 2015-06-19 16:08:31

Thanks for this work! It's a thing that ought to have been implemented long ago...

I prefer not to redirect the existing `is_column_strict` method, since it seems (to me) to be one of the speed-critical places in the code. That said, I haven't really checked what the speed penalty of a redirection would be.


---

Comment by j.levinson created at 2015-06-19 19:57:07

Hi all,

- Should `reverse_bump` just ask for the row `r` to bump from rather than the `(r,c)` pair?

- I looked at `RSK_inverse`; I wrote an alternate `reverse_bump` based on that code + the above bullet point. Is there a way to upload it without overwriting the current commit?

- Once we have a verdict on the row/column strict/weak increasing methods, I can make the necessary changes.

Best,
Jake


---

Comment by aschilling created at 2015-06-19 23:46:07

Hi Jake,

> - Should `reverse_bump` just ask for the row `r` to bump from rather than the `(r,c)` pair?

Possibly. Another option would be to allow both, either a row index or an outer corner.
 
> - I looked at `RSK_inverse`; I wrote an alternate `reverse_bump` based on that code + the above bullet point. Is there a way to upload it without overwriting the current commit?

I am not quite sure what you mean by overwriting the current commit.

I would suggest though to just use one implementation of reverse bumping and use the method in RKS_inverse if that makes sense!

Best,

Anne


---

Comment by git created at 2015-06-24 04:26:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by j.levinson created at 2015-06-24 04:30:07

Changing status from needs_work to needs_review.


---

Comment by j.levinson created at 2015-06-24 04:30:07

I finally decided to leave `is_column_strict` and `is_row_strict` unchanged. Perhaps they can eventually be deprecated in favor of `is_row_increasing` and `is_column_increasing`, but it sounds like there was at least one objection for the time being.

The input parsing for `reverse_bump` (to accept either rows or corners) should be proofread by someone more experienced than me, though I more or less copied what other functions seemed to do.

Otherwise I think this is good to go.


---

Comment by tscrim created at 2015-06-24 06:31:33

I know this isn't part of this ticket, but if the checks for column/row strictness are as speed critical, perhaps we should also move them to `partitions.pyx` and use the speed of cython.


---

Comment by darij created at 2015-06-24 10:45:37

New commits:


---

Comment by darij created at 2015-06-24 10:47:16

Here's my review then. If you are OK with my changes, please set the ticket to positive_review.

I fear I don't know cython well enough to tell whether moving the checks into a .pyx is a good idea. Some people use tableaux for things other than integers.

I have replaced your "outer corner" by "corner" now, though I see the logic behind your use of "outer" (unfortunately, for some other people, "outer corner" means "cocorner", aka "addable cell"). Feel free to add a definition of "corner" if you think this makes confusion possible.


---

Comment by git created at 2015-06-24 10:49:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by j.levinson created at 2015-06-24 14:20:35

Changing status from needs_review to positive_review.


---

Comment by j.levinson created at 2015-06-24 14:20:35

Darij, thanks for the changes!

Re: "outer/inner corner", I was using the terms in the same sense as in `skew_tableau.py`, which has `inner_corners` and `outer_corners` functions (both of which return "subtractable cells").

Given the risk of confusion, I'm fine with leaving it as just "corner" as you set it, since then `reverse_bump` is compatible with `Tableau.corners`.


---

Comment by vbraun created at 2015-06-24 20:11:15

Resolution: fixed
