# Issue 13151: upgrade docutils to version 0.9.1

archive/issues_013151.json:
```json
{
    "body": "Assignee: tbd\n\nThe latest release package is docutils-0.9.1.tgz. It was released on 2012-06-17.\n\nThe actual docutils version in Sage (since 4.7.1 #10166) is 0.7 released on 2009-10-11 \n\nOne should make sure to avoid the problem fixed at #11660 (docutils files not world-readable).\n\nIssue created by migration from https://trac.sagemath.org/ticket/13323\n\n",
    "created_at": "2012-08-01T14:30:19Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "upgrade docutils to version 0.9.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13151",
    "user": "@seblabbe"
}
```
Assignee: tbd

The latest release package is docutils-0.9.1.tgz. It was released on 2012-06-17.

The actual docutils version in Sage (since 4.7.1 #10166) is 0.7 released on 2009-10-11 

One should make sure to avoid the problem fixed at #11660 (docutils files not world-readable).

Issue created by migration from https://trac.sagemath.org/ticket/13323





---

archive/issue_comments_160218.json:
```json
{
    "body": "A new spkg version is here :\n\nhttp://sage.math.washington.edu/home/slabbe/docutils-0.9.1.p0.spkg\n\nI still haven't build sage from source with this new package. I will change the status to needs review once I did it.",
    "created_at": "2012-08-01T14:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160218",
    "user": "@seblabbe"
}
```

A new spkg version is here :

http://sage.math.washington.edu/home/slabbe/docutils-0.9.1.p0.spkg

I still haven't build sage from source with this new package. I will change the status to needs review once I did it.



---

archive/issue_comments_160219.json:
```json
{
    "body": "Ok, it is not so easy. Sage compiles fine. But, Sphinx v1.1.2 has trouble building the documentation with the version 0.9.1 of docutils. Here is a part of `dochtml.log` :\n\n\n```\nSetting permissions of DOT_SAGE directory so only you can read and write it.\nsphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/reference   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/reference /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.1.2\nloading pickled environment... not yet created\nloading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...\nbuilding [html]: targets for 1040 source files that are out of date\nupdating environment: 1040 added, 0 changed, 0 removed\nreading sources... [  0%] algebras\nreading sources... [  0%] arithgroup\nreading sources... [  0%] calculus\nreading sources... [  0%] categories\nreading sources... [  0%] cmd\nreading sources... [  0%] coding\nreading sources... [  0%] coercion\n\nException occurred:\n  File \"/home/slabbe/sage-5.2/local/lib/python2.7/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/util/nodes.py\", line 183, in set_role_source_info\n    inliner.reporter.locator(lineno)\nAttributeError: Reporter instance has no attribute 'locator'\nThe full traceback has been saved in /tmp/sphinx-err-TDfXeg.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nEither send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,\nor report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!\nBuild finished.  The built documents can be found in /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference\nsphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/faq   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/faq /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/faq\nRunning Sphinx v1.1.2\nloading pickled environment... not yet created\nloading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...\nloading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv...\nWARNING: intersphinx inventory '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv' not fetchable due to <type 'exceptions.IOError'>: [Errno 2] No such file or directory: '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv'\nbuilding [html]: targets for 4 source files that are out of date\nupdating environment: 4 added, 0 changed, 0 removed\n```\n\n\nI tested the compilation [here](http://sage.math.washington.edu/home/slabbe/sage-5.2/) on sage.math.",
    "created_at": "2012-08-01T21:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160219",
    "user": "@seblabbe"
}
```

Ok, it is not so easy. Sage compiles fine. But, Sphinx v1.1.2 has trouble building the documentation with the version 0.9.1 of docutils. Here is a part of `dochtml.log` :


```
Setting permissions of DOT_SAGE directory so only you can read and write it.
sphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/reference   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/reference /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...
building [html]: targets for 1040 source files that are out of date
updating environment: 1040 added, 0 changed, 0 removed
reading sources... [  0%] algebras
reading sources... [  0%] arithgroup
reading sources... [  0%] calculus
reading sources... [  0%] categories
reading sources... [  0%] cmd
reading sources... [  0%] coding
reading sources... [  0%] coercion

Exception occurred:
  File "/home/slabbe/sage-5.2/local/lib/python2.7/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/util/nodes.py", line 183, in set_role_source_info
    inliner.reporter.locator(lineno)
AttributeError: Reporter instance has no attribute 'locator'
The full traceback has been saved in /tmp/sphinx-err-TDfXeg.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
Either send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,
or report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!
Build finished.  The built documents can be found in /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference
sphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/faq   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/faq /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/faq
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv...
WARNING: intersphinx inventory '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv' not fetchable due to <type 'exceptions.IOError'>: [Errno 2] No such file or directory: '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv'
building [html]: targets for 4 source files that are out of date
updating environment: 4 added, 0 changed, 0 removed
```


I tested the compilation [here](http://sage.math.washington.edu/home/slabbe/sage-5.2/) on sage.math.



---

archive/issue_comments_160220.json:
```json
{
    "body": "This seems to be fixed here\n\nhttps://bitbucket.org/birkenfeld/sphinx/changeset/bab0b83c9e02\n\nand available in Sphinx v1.1.3 (Mar 10, 2012).",
    "created_at": "2012-08-01T21:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160220",
    "user": "@seblabbe"
}
```

This seems to be fixed here

https://bitbucket.org/birkenfeld/sphinx/changeset/bab0b83c9e02

and available in Sphinx v1.1.3 (Mar 10, 2012).



---

archive/issue_comments_160221.json:
```json
{
    "body": "Hi,\nI the problem similar to the one reported by [ticket:13323#comment:2 slabbe] building the documentation of sage-5.4.rc3.",
    "created_at": "2012-11-03T16:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160221",
    "user": "r.gaia.cs"
}
```

Hi,
I the problem similar to the one reported by [ticket:13323#comment:2 slabbe] building the documentation of sage-5.4.rc3.



---

archive/issue_comments_160222.json:
```json
{
    "body": "For your information, you'll also hit errors looking like:\n\n```\n[combinat ] /home/jpuydt/sage-5.9.debian/local/local/lib/python2.7/dist-packages/sage/combinat/free_module.py:docstring of sage.combinat.free_module.CombinatorialFreeModule:60: ERROR: Error in \"note\" directive:\n[combinat ] invalid option block.\n[combinat ] .. note:: These print options may also be accessed and modified using the\n[combinat ] :meth:`print_options` method, after the module has been defined.\n```\n\nwhich are explained [here](http://www.mail-archive.com/sphinx-dev`@`googlegroups.com/msg05480.html).\n\nNotice also that docutils are now up to version 0.10.",
    "created_at": "2013-05-16T12:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160222",
    "user": "Snark"
}
```

For your information, you'll also hit errors looking like:

```
[combinat ] /home/jpuydt/sage-5.9.debian/local/local/lib/python2.7/dist-packages/sage/combinat/free_module.py:docstring of sage.combinat.free_module.CombinatorialFreeModule:60: ERROR: Error in "note" directive:
[combinat ] invalid option block.
[combinat ] .. note:: These print options may also be accessed and modified using the
[combinat ] :meth:`print_options` method, after the module has been defined.
```

which are explained [here](http://www.mail-archive.com/sphinx-dev`@`googlegroups.com/msg05480.html).

Notice also that docutils are now up to version 0.10.



---

archive/issue_comments_160223.json:
```json
{
    "body": "Superseded by #16733.",
    "created_at": "2014-11-13T14:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160223",
    "user": "@jdemeyer"
}
```

Superseded by #16733.



---

archive/issue_comments_160224.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-13T14:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160224",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160225.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-13T14:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160225",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_160226.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2014-11-14T11:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13151#issuecomment-160226",
    "user": "@vbraun"
}
```

Resolution: duplicate
