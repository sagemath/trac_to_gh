# Issue 13151: upgrade docutils to version 0.9.1

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2012-08-01 14:30:19

Assignee: tbd

The latest release package is docutils-0.9.1.tgz. It was released on 2012-06-17.

The actual docutils version in Sage (since 4.7.1 #10166) is 0.7 released on 2009-10-11 

One should make sure to avoid the problem fixed at #11660 (docutils files not world-readable).


---

Comment by slabbe created at 2012-08-01 14:52:12

A new spkg version is here :

http://sage.math.washington.edu/home/slabbe/docutils-0.9.1.p0.spkg

I still haven't build sage from source with this new package. I will change the status to needs review once I did it.


---

Comment by slabbe created at 2012-08-01 21:16:56

Ok, it is not so easy. Sage compiles fine. But, Sphinx v1.1.2 has trouble building the documentation with the version 0.9.1 of docutils. Here is a part of `dochtml.log` :


```
Setting permissions of DOT_SAGE directory so only you can read and write it.
sphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/reference   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/reference /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...
building [html]: targets for 1040 source files that are out of date
updating environment: 1040 added, 0 changed, 0 removed
reading sources... [  0%] algebras
reading sources... [  0%] arithgroup
reading sources... [  0%] calculus
reading sources... [  0%] categories
reading sources... [  0%] cmd
reading sources... [  0%] coding
reading sources... [  0%] coercion

Exception occurred:
  File "/home/slabbe/sage-5.2/local/lib/python2.7/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/util/nodes.py", line 183, in set_role_source_info
    inliner.reporter.locator(lineno)
AttributeError: Reporter instance has no attribute 'locator'
The full traceback has been saved in /tmp/sphinx-err-TDfXeg.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
Either send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,
or report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks!
Build finished.  The built documents can be found in /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference
sphinx-build -b html -d /home/slabbe/sage-5.2/devel/sage/doc/output/doctrees/en/faq   -A hide_pdf_links=1  /home/slabbe/sage-5.2/devel/sage/doc/en/faq /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/faq
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/common/python.inv...
loading intersphinx inventory from /home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv...
WARNING: intersphinx inventory '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv' not fetchable due to <type 'exceptions.IOError'>: [Errno 2] No such file or directory: '/home/slabbe/sage-5.2/devel/sage/doc/output/html/en/reference/objects.inv'
building [html]: targets for 4 source files that are out of date
updating environment: 4 added, 0 changed, 0 removed
```


I tested the compilation [here](http://sage.math.washington.edu/home/slabbe/sage-5.2/) on sage.math.


---

Comment by slabbe created at 2012-08-01 21:23:00

This seems to be fixed here

https://bitbucket.org/birkenfeld/sphinx/changeset/bab0b83c9e02

and available in Sphinx v1.1.3 (Mar 10, 2012).


---

Comment by r.gaia.cs created at 2012-11-03 16:39:35

Hi,
I the problem similar to the one reported by [ticket:13323#comment:2 slabbe] building the documentation of sage-5.4.rc3.


---

Comment by Snark created at 2013-05-16 12:32:49

For your information, you'll also hit errors looking like:

```
[combinat ] /home/jpuydt/sage-5.9.debian/local/local/lib/python2.7/dist-packages/sage/combinat/free_module.py:docstring of sage.combinat.free_module.CombinatorialFreeModule:60: ERROR: Error in "note" directive:
[combinat ] invalid option block.
[combinat ] .. note:: These print options may also be accessed and modified using the
[combinat ] :meth:`print_options` method, after the module has been defined.
```

which are explained [here](http://www.mail-archive.com/sphinx-dev`@`googlegroups.com/msg05480.html).

Notice also that docutils are now up to version 0.10.


---

Comment by jdemeyer created at 2014-11-13 14:00:19

Superseded by #16733.


---

Comment by jdemeyer created at 2014-11-13 14:00:19

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-11-13 14:00:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-14 11:11:15

Resolution: duplicate
