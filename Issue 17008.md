# Issue 17008: Matrix class __init__ for sparse matrices is incorrectly documented

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2014-10-28 18:27:43

CC:  was

Keywords: matrices, documentation,

It claims to take a list of triples `(i, j, entry in row i and column j)`, but it actually takes a dictionary `(i, j): entry in row i and column j`.

I have fixed the error where it appears (integer, rational and mod-n matrices). It would also be good to copy this documentation to other classes where it makes sense.


---

Comment by darij created at 2014-10-28 18:27:57

Changing component from PLEASE CHANGE to linear algebra.


---

Comment by darij created at 2014-10-28 18:27:57

Changing status from new to needs_review.


---

Comment by git created at 2014-11-12 07:27:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-11-12 07:29:49

Now that I am looking at this again, it worries me that matrix classes for matrices over QQ, ZZ and Zmod(n) ignore the `coerce` and `copy` attributes. The idea might be that integers, rationals and ints mod n do not need to be coerced -- but I don't think this is the case (particularly ints mod n); and that integers, rationals and ints mod n do not need to be copied because they are already immutable -- but the `copy` attribute does not copy the entries, but copies the *list/dict* of entries, and that is always mutable.


---

Comment by mmezzarobba created at 2015-02-05 16:37:24

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-02-05 17:32:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-05 17:33:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-02-05 17:34:10

Changing status from needs_work to needs_review.


---

Comment by darij created at 2015-02-05 17:34:27

Fixed.


---

Comment by jdemeyer created at 2015-02-06 13:00:17

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2015-02-06 13:00:17

Replying to [comment:3 darij]:
> Now that I am looking at this again, it worries me that matrix classes for matrices over QQ, ZZ and Zmod(n) ignore the `coerce` and `copy` attributes.
They are ignored indeed, but it the safe direction: the code acts if both `copy` and `coerce` are True.


---

Comment by darij created at 2015-02-06 14:53:02

Thank you!


---

Comment by mmezzarobba created at 2015-02-07 11:19:59

I get doc building errors, due I think to

```
+        - ``entries`` -- * a Python dictionary whose items have the
+                           form ``(i, j): x``, where ``0 <= i < nrows``,
+                           ``0 <= j < ncols``, and ``x`` is coercible to
+                           an integer.  The ``i,j`` entry of ``self`` is
+                           set to ``x``.  The ``x``'s can be ``0``.
+                         * Alternatively, entries can be a list of *all*
+                           the entries of the sparse matrix, read
+                           row-by-row from top to bottom (so they would
+                           be mostly 0).
```

and similar changes.


---

Comment by mmezzarobba created at 2015-02-07 11:19:59

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-02-07 12:09:09

That should be something like this:

```
        - ``entries`` -- can be one of the following:

          * a Python dictionary whose items have the
            form ``(i, j): x``, where ``0 <= i < nrows``,
            ``0 <= j < ncols``, and ``x`` is coercible to
            an integer.  The ``i,j`` entry of ``self`` is
            set to ``x``.  The ``x``'s can be ``0``.
          * Alternatively, entries can be a list of *all*
            the entries of the sparse matrix, read
            row-by-row from top to bottom (so they would
            be mostly 0).
```



---

Comment by git created at 2015-02-07 14:40:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-02-07 14:40:42

Changing status from needs_work to positive_review.


---

Comment by darij created at 2015-02-07 14:40:42

Fixed (and one typo too); thank you!


---

Comment by vbraun created at 2015-02-18 08:53:26

Resolution: fixed
