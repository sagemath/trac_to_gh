# Issue 10728: FanMorphism defined by matrices are dangerous

archive/issues_010728.json:
```json
{
    "body": "Assignee: @aghitza\n\nCC:  @rbeezer @kcrisman\n\nHere I use a projection matrix to map a 3d cone to a 2d cone:\n\n```\nsage: projection = matrix(ZZ,[[1,0,0],[0,1,0]])\nsage: projection\n[1 0 0]\n[0 1 0]\nsage: cone3d = Cone([(1,0,0),(0,1,0)])\nsage: cone2d = Cone([ projection*r for r in cone3d.rays() ])\nsage: cone2d.rays()\n(N(0, 1), N(1, 0))\n```\n\nIf you use the same matrix in `FanMorphism`, you get an unexpected result:\n\n```\nsage: FanMorphism( projection, Fan([cone3d]), Fan([cone2d]) )\nFan morphism defined by the matrix\n[1 0]\n[0 0]\n[1 0]\nDomain fan: Rational polyhedral fan in 3-d lattice N\nCodomain fan: Rational polyhedral fan in 2-d lattice N\n```\n\nSharp eyes reveal that the matrix is not the one I wanted; I understand that Sage expects a left matrix action.  But having gotten a matrix of the wrong shape, no error is produced. Only a nonsensical output? Expected behavior would be an error, stating that the matrix dimensions do not match.\n\nFor reference, the correct way to construct the morphism is with the transposed matrix.\n\n```\nsage: FanMorphism( projection.transpose(), Fan([cone3d]), Fan([cone2d]) )\nFan morphism defined by the matrix\n[1 0]\n[0 1]\n[0 0]\nDomain fan: Rational polyhedral fan in 3-d lattice N\nCodomain fan: Rational polyhedral fan in 2-d lattice N\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10793\n\n",
    "created_at": "2011-02-17T11:52:58Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "FanMorphism defined by matrices are dangerous",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10728",
    "user": "https://github.com/vbraun"
}
```
Assignee: @aghitza

CC:  @rbeezer @kcrisman

Here I use a projection matrix to map a 3d cone to a 2d cone:

```
sage: projection = matrix(ZZ,[[1,0,0],[0,1,0]])
sage: projection
[1 0 0]
[0 1 0]
sage: cone3d = Cone([(1,0,0),(0,1,0)])
sage: cone2d = Cone([ projection*r for r in cone3d.rays() ])
sage: cone2d.rays()
(N(0, 1), N(1, 0))
```

If you use the same matrix in `FanMorphism`, you get an unexpected result:

```
sage: FanMorphism( projection, Fan([cone3d]), Fan([cone2d]) )
Fan morphism defined by the matrix
[1 0]
[0 0]
[1 0]
Domain fan: Rational polyhedral fan in 3-d lattice N
Codomain fan: Rational polyhedral fan in 2-d lattice N
```

Sharp eyes reveal that the matrix is not the one I wanted; I understand that Sage expects a left matrix action.  But having gotten a matrix of the wrong shape, no error is produced. Only a nonsensical output? Expected behavior would be an error, stating that the matrix dimensions do not match.

For reference, the correct way to construct the morphism is with the transposed matrix.

```
sage: FanMorphism( projection.transpose(), Fan([cone3d]), Fan([cone2d]) )
Fan morphism defined by the matrix
[1 0]
[0 1]
[0 0]
Domain fan: Rational polyhedral fan in 3-d lattice N
Codomain fan: Rational polyhedral fan in 2-d lattice N
```


Issue created by migration from https://trac.sagemath.org/ticket/10793





---

archive/issue_comments_112859.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2011-02-17T15:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112859",
    "user": "https://github.com/novoselt"
}
```

Changing priority from major to critical.



---

archive/issue_comments_112860.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-02-17T15:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112860",
    "user": "https://github.com/novoselt"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_112861.json:
```json
{
    "body": "Changing assignee from @aghitza to jason, was.",
    "created_at": "2011-02-17T15:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112861",
    "user": "https://github.com/novoselt"
}
```

Changing assignee from @aghitza to jason, was.



---

archive/issue_comments_112862.json:
```json
{
    "body": "I have completely replaced the original Volker's description since the problem is unrelated to fan morphisms themselves.\n\nAlso I think that this is an extremely dangerous bug and will take the liberty to elevate its priority...",
    "created_at": "2011-02-17T15:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112862",
    "user": "https://github.com/novoselt"
}
```

I have completely replaced the original Volker's description since the problem is unrelated to fan morphisms themselves.

Also I think that this is an extremely dangerous bug and will take the liberty to elevate its priority...



---

archive/issue_comments_112863.json:
```json
{
    "body": "Changing component from algebraic geometry to linear algebra.",
    "created_at": "2011-02-17T15:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112863",
    "user": "https://github.com/novoselt"
}
```

Changing component from algebraic geometry to linear algebra.



---

archive/issue_comments_112864.json:
```json
{
    "body": "So it seems that the problem here is that in converting to an element of the matrix space, it views the entries of the matrix (or indeed, the entries of a nested list as well) as a flattened list:\n\n\n```\nsage: M\nFull MatrixSpace of 3 by 2 dense matrices over Integer Ring\nsage: M([[1,2,3],[4,5,6]])\n[1 2]\n[3 4]\n[5 6]\n```\n\n\nSo I guess you're saying that MatrixSpace shouldn't flatten the list, but instead should throw an error?",
    "created_at": "2011-02-17T16:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112864",
    "user": "https://github.com/jasongrout"
}
```

So it seems that the problem here is that in converting to an element of the matrix space, it views the entries of the matrix (or indeed, the entries of a nested list as well) as a flattened list:


```
sage: M
Full MatrixSpace of 3 by 2 dense matrices over Integer Ring
sage: M([[1,2,3],[4,5,6]])
[1 2]
[3 4]
[5 6]
```


So I guess you're saying that MatrixSpace shouldn't flatten the list, but instead should throw an error?



---

archive/issue_comments_112865.json:
```json
{
    "body": "Around line 361 in `matrix/matrix_space.py`, we see:\n\n\n```\n        if isinstance(entries, (list, tuple)) and len(entries) > 0 and \\\n           sage.modules.free_module_element.is_FreeModuleElement(entries[0]):\n            #Try to determine whether or not the entries should\n            #be rows or columns\n            if rows is None:\n                #If the matrix is square, default to rows\n                if self.__ncols == self.__nrows:\n                    rows = True\n                elif len(entries[0]) == self.__ncols:\n                    rows = True\n                elif len(entries[0]) == self.__nrows:\n                    rows = False\n                else:\n                    raise ValueError, \"incorrect dimensions\"\n            \n            if self.__is_sparse:\n                e = {}\n                zero = self.base_ring()(0)\n                for i in xrange(len(entries)):\n                    for j, x in entries[i].iteritems():\n                        if x != zero:\n                            if rows:\n                                e[(i,j)] = x\n                            else:\n                                e[(j,i)] = x\n                entries = e\n            else:\n                entries = sum([v.list() for v in entries],[])\n```\n\n\nSo:\n\n1. I think it tries to be too intelligent about guessing whether you have rows or columns.  That leads to inconsistent behavior when you have code dealing with different matrix spaces with different dimensions.\n\n2. It indeed does flatten the list if all else fails (that's the sum([v.list()... line).  I agree that that looks dangerous as well.",
    "created_at": "2011-02-17T16:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112865",
    "user": "https://github.com/jasongrout"
}
```

Around line 361 in `matrix/matrix_space.py`, we see:


```
        if isinstance(entries, (list, tuple)) and len(entries) > 0 and \
           sage.modules.free_module_element.is_FreeModuleElement(entries[0]):
            #Try to determine whether or not the entries should
            #be rows or columns
            if rows is None:
                #If the matrix is square, default to rows
                if self.__ncols == self.__nrows:
                    rows = True
                elif len(entries[0]) == self.__ncols:
                    rows = True
                elif len(entries[0]) == self.__nrows:
                    rows = False
                else:
                    raise ValueError, "incorrect dimensions"
            
            if self.__is_sparse:
                e = {}
                zero = self.base_ring()(0)
                for i in xrange(len(entries)):
                    for j, x in entries[i].iteritems():
                        if x != zero:
                            if rows:
                                e[(i,j)] = x
                            else:
                                e[(j,i)] = x
                entries = e
            else:
                entries = sum([v.list() for v in entries],[])
```


So:

1. I think it tries to be too intelligent about guessing whether you have rows or columns.  That leads to inconsistent behavior when you have code dealing with different matrix spaces with different dimensions.

2. It indeed does flatten the list if all else fails (that's the sum([v.list()... line).  I agree that that looks dangerous as well.



---

archive/issue_comments_112866.json:
```json
{
    "body": "Replying to [comment:2 jason]:\n> So it seems that the problem here is that in converting to an element of the matrix space, it views the entries of the matrix (or indeed, the entries of a nested list as well) as a flattened list:\n> \n> {{{\n> sage: M\n> Full MatrixSpace of 3 by 2 dense matrices over Integer Ring\n> sage: M([[1,2,3],[4,5,6]])\n> [1 2]\n> [3 4]\n> [5 6]\n> }}}\n> \n> So I guess you're saying that MatrixSpace shouldn't flatten the list, but instead should throw an error?\n\nAbsolutely! I see no reason why such flattening can make sense, so even if there some - I think they should do it explicitly.\n\nI find it a bit confusing that Sage uses right matrix action, so in the description I tend to think that `projection` itself is the matrix of the morphism, not its transpose. I suspect I am not the only one who can fall into this trap: it is accepted as an input, but some other not-very-related matrix is then used in the morphism.",
    "created_at": "2011-02-17T16:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112866",
    "user": "https://github.com/novoselt"
}
```

Replying to [comment:2 jason]:
> So it seems that the problem here is that in converting to an element of the matrix space, it views the entries of the matrix (or indeed, the entries of a nested list as well) as a flattened list:
> 
> {{{
> sage: M
> Full MatrixSpace of 3 by 2 dense matrices over Integer Ring
> sage: M([[1,2,3],[4,5,6]])
> [1 2]
> [3 4]
> [5 6]
> }}}
> 
> So I guess you're saying that MatrixSpace shouldn't flatten the list, but instead should throw an error?

Absolutely! I see no reason why such flattening can make sense, so even if there some - I think they should do it explicitly.

I find it a bit confusing that Sage uses right matrix action, so in the description I tend to think that `projection` itself is the matrix of the morphism, not its transpose. I suspect I am not the only one who can fall into this trap: it is accepted as an input, but some other not-very-related matrix is then used in the morphism.



---

archive/issue_comments_112867.json:
```json
{
    "body": "Hi Rob, this is the ticket I was talking about!",
    "created_at": "2011-06-14T16:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112867",
    "user": "https://github.com/novoselt"
}
```

Hi Rob, this is the ticket I was talking about!



---

archive/issue_comments_112868.json:
```json
{
    "body": "Attachment [trac_10793_bug_in_matrix_construction.patch](tarball://root/attachments/some-uuid/ticket10793/trac_10793_bug_in_matrix_construction.patch) by @novoselt created at 2011-06-16 22:54:49",
    "created_at": "2011-06-16T22:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112868",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_10793_bug_in_matrix_construction.patch](tarball://root/attachments/some-uuid/ticket10793/trac_10793_bug_in_matrix_construction.patch) by @novoselt created at 2011-06-16 22:54:49



---

archive/issue_comments_112869.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-16T22:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112869",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_112870.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd31\".",
    "created_at": "2011-06-16T22:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112870",
    "user": "https://github.com/novoselt"
}
```

Changing keywords from "" to "sd31".



---

archive/issue_comments_112871.json:
```json
{
    "body": "There are doctest failures that have to be addressed. I suspect that all places that are affected were just kind of wrong. For Nx1 and 1xN matrices nothing too horrible is going on, hopefully there are no other cases.",
    "created_at": "2011-06-16T23:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112871",
    "user": "https://github.com/novoselt"
}
```

There are doctest failures that have to be addressed. I suspect that all places that are affected were just kind of wrong. For Nx1 and 1xN matrices nothing too horrible is going on, hopefully there are no other cases.



---

archive/issue_comments_112872.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-06-16T23:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112872",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_112873.json:
```json
{
    "body": "Here is the list of offenders:\n\n```\n\tsage -t -long devel/sage-main/sage/crypto/mq/sr.py # 15 doctests failed\n\tsage -t -long devel/sage-main/sage/interfaces/sage0.py # 2 doctests failed\n\tsage -t -long devel/sage-main/sage/crypto/mq/mpolynomialsystem.py # 50 doctests failed\n\tsage -t -long devel/sage-main/sage/geometry/fan_morphism.py # 4 doctests failed\n\tsage -t -long devel/sage-main/sage/rings/polynomial/multi_polynomial_sequence.py # 33 doctests failed\n\tsage -t -long devel/sage-main/sage/categories/map.pyx # 16 doctests failed\n\tsage -t -long devel/sage-main/sage/interfaces/magma.py # 2 doctests failed\n\tsage -t -long devel/sage-main/sage/modules/matrix_morphism.py # 9 doctests failed\n```\n\n\nIMHO, all these files are full of bugs!",
    "created_at": "2011-06-17T00:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112873",
    "user": "https://github.com/novoselt"
}
```

Here is the list of offenders:

```
	sage -t -long devel/sage-main/sage/crypto/mq/sr.py # 15 doctests failed
	sage -t -long devel/sage-main/sage/interfaces/sage0.py # 2 doctests failed
	sage -t -long devel/sage-main/sage/crypto/mq/mpolynomialsystem.py # 50 doctests failed
	sage -t -long devel/sage-main/sage/geometry/fan_morphism.py # 4 doctests failed
	sage -t -long devel/sage-main/sage/rings/polynomial/multi_polynomial_sequence.py # 33 doctests failed
	sage -t -long devel/sage-main/sage/categories/map.pyx # 16 doctests failed
	sage -t -long devel/sage-main/sage/interfaces/magma.py # 2 doctests failed
	sage -t -long devel/sage-main/sage/modules/matrix_morphism.py # 9 doctests failed
```


IMHO, all these files are full of bugs!



---

archive/issue_comments_112874.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-06-17T00:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112874",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_112875.json:
```json
{
    "body": "OK, it turned out to be not as scary as it seemed to me originally. Most of the errors were due to forgetting that matrices act from the right. In crypto I have added explicit conversion of matrices to lists since it seems that they wanted it. I don't understand that code to make sure that this is indeed correct, but at the very least I didn't introduce a new bug ;-)",
    "created_at": "2011-06-17T00:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112875",
    "user": "https://github.com/novoselt"
}
```

OK, it turned out to be not as scary as it seemed to me originally. Most of the errors were due to forgetting that matrices act from the right. In crypto I have added explicit conversion of matrices to lists since it seems that they wanted it. I don't understand that code to make sure that this is indeed correct, but at the very least I didn't introduce a new bug ;-)



---

archive/issue_comments_112876.json:
```json
{
    "body": "Patches should apply fine on top of sage-4.7.1.alpha4, as #11200 (and other patches modifying fan morphisms) was merged.",
    "created_at": "2011-07-06T00:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112876",
    "user": "https://github.com/novoselt"
}
```

Patches should apply fine on top of sage-4.7.1.alpha4, as #11200 (and other patches modifying fan morphisms) was merged.



---

archive/issue_comments_112877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-14T02:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112877",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_112878.json:
```json
{
    "body": "I totally forgot that we haven't merged this ticket yet. Applies fine on Sage-4.7.1.rc2. Positive review.",
    "created_at": "2011-08-14T02:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112878",
    "user": "https://github.com/vbraun"
}
```

I totally forgot that we haven't merged this ticket yet. Applies fine on Sage-4.7.1.rc2. Positive review.



---

archive/issue_comments_112879.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-08-17T20:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112879",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_112880.json:
```json
{
    "body": "This patch conflicts with #11552.  Since the latter is older, I propose that this patch is rebased to #11552.",
    "created_at": "2011-08-17T20:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112880",
    "user": "https://github.com/jdemeyer"
}
```

This patch conflicts with #11552.  Since the latter is older, I propose that this patch is rebased to #11552.



---

archive/issue_comments_112881.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-08-17T21:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112881",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_112882.json:
```json
{
    "body": "Attachment [trac_10793_fixing_existing_bugs.patch](tarball://root/attachments/some-uuid/ticket10793/trac_10793_fixing_existing_bugs.patch) by @novoselt created at 2011-08-17 21:41:13\n\nRebased on top of #11552, needs review.",
    "created_at": "2011-08-17T21:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112882",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_10793_fixing_existing_bugs.patch](tarball://root/attachments/some-uuid/ticket10793/trac_10793_fixing_existing_bugs.patch) by @novoselt created at 2011-08-17 21:41:13

Rebased on top of #11552, needs review.



---

archive/issue_comments_112883.json:
```json
{
    "body": "I think that if a rebase is straightforward (ie there is no real change to code), then it does not need to be reviewed.  I can't tell here, since the rebased patch replaced the old patch.\n\nNo matter - I've applied it and done minimal tests.  All looks good.  I'm running all tests right now and then will flip to positive review.\n\nI'm glad this got fixed.  While doing work on free module morphisms I ran into this frequently, where domains and codomains got confused, and so on.  I'm surprised it survived this long.  Thanks Volker and Andrey for the fix!\n\nRob",
    "created_at": "2011-08-17T23:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112883",
    "user": "https://github.com/rbeezer"
}
```

I think that if a rebase is straightforward (ie there is no real change to code), then it does not need to be reviewed.  I can't tell here, since the rebased patch replaced the old patch.

No matter - I've applied it and done minimal tests.  All looks good.  I'm running all tests right now and then will flip to positive review.

I'm glad this got fixed.  While doing work on free module morphisms I ran into this frequently, where domains and codomains got confused, and so on.  I'm surprised it survived this long.  Thanks Volker and Andrey for the fix!

Rob



---

archive/issue_comments_112884.json:
```json
{
    "body": "It was straightforward, your patch added spaces after commas in two lines that I have altered...",
    "created_at": "2011-08-18T00:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112884",
    "user": "https://github.com/novoselt"
}
```

It was straightforward, your patch added spaces after commas in two lines that I have altered...



---

archive/issue_comments_112885.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-18T00:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112885",
    "user": "https://github.com/rbeezer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_112886.json:
```json
{
    "body": "Sorry.  ;-)  Thanks for the rebase.  Passes all tests.\n\nRob",
    "created_at": "2011-08-18T00:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112886",
    "user": "https://github.com/rbeezer"
}
```

Sorry.  ;-)  Thanks for the rebase.  Passes all tests.

Rob



---

archive/issue_events_010833.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-18T22:02:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10728#event-10833"
}
```



---

archive/issue_comments_112887.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-18T22:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10728",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10728#issuecomment-112887",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
