# Issue 22571: absolute_import in Cython files

Issue created by migration from https://trac.sagemath.org/ticket/22808

Original creator: jdemeyer

Original creation time: 2017-04-14 09:27:46

CC:  chapoton




---

Comment by chapoton created at 2017-05-10 14:00:40

one step in #22975


---

Comment by chapoton created at 2017-05-24 07:13:48

next step in #23068


---

Comment by chapoton created at 2017-08-07 13:28:50

next step in #23589


---

Comment by chapoton created at 2017-08-18 10:47:41

next step in #23641


---

Comment by chapoton created at 2017-08-21 10:24:53

next step in #23662


---

Comment by chapoton created at 2017-08-29 14:34:56

maybe the last step in #23745

but how can we check ?


---

Comment by chapoton created at 2017-10-13 13:50:21

Jeroen, do you have an idea how to find places where adding "absolute_import" is still needed ?


---

Comment by jdemeyer created at 2017-10-13 14:01:45

Do you mean for Python and Cython code in the Sage library or only Cython code?


---

Comment by chapoton created at 2017-10-13 14:02:56

Well, only Cython, to deal with this ticket. But of course one should also check for py files.


---

Comment by jdemeyer created at 2017-10-13 14:06:06

OK, both Python and Cython. I think it is best to treat Python and Cython the same here. Imports work the same way. The only difference is that Cython also has `cimport`.

I think that I only created this ticket because at some point you were adding `from __future__ import absolute_import` to a lot of Python files but not to Cython files. It seemed like you overlooked Cython files.


---

Comment by chapoton created at 2017-10-13 14:56:43

So what should we do here ?

I would like to have some certitude before closing, but I do not know how to test that everything is in order.


---

Comment by jdemeyer created at 2017-10-13 15:14:08

Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.


---

Comment by chapoton created at 2017-11-12 10:41:01

Replying to [comment:12 jdemeyer]:
> Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.

any idea on how to do that ?


---

Comment by jdemeyer created at 2017-11-13 11:14:00

Replying to [comment:13 chapoton]:
> any idea on how to do that ?

Yes.


---

Comment by jdemeyer created at 2017-11-14 16:39:32

Just one change required...
----
New commits:


---

Comment by jdemeyer created at 2017-11-14 16:39:32

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-11-14 19:27:10

Great !
Does this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?


---

Comment by jdemeyer created at 2017-11-14 20:13:42

Replying to [comment:17 chapoton]:
> Great !
> Does this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?

Yes. I didn't run doctests, but at least built and ran Sage.


---

Comment by chapoton created at 2017-11-14 20:18:20

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-11-14 20:18:20

Then let us consider that this ticket is fixed. Thanks !


---

Comment by vbraun created at 2017-12-11 01:03:49

Resolution: fixed
