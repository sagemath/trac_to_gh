# Issue 22571: absolute_import in Cython files

archive/issues_022571.json:
```json
{
    "body": "CC:  @fchapoton\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/22808\n\n",
    "created_at": "2017-04-14T09:27:46Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "absolute_import in Cython files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22571",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @fchapoton



Issue created by migration from https://trac.sagemath.org/ticket/22808





---

archive/issue_comments_314432.json:
```json
{
    "body": "one step in #22975",
    "created_at": "2017-05-10T14:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314432",
    "user": "https://github.com/fchapoton"
}
```

one step in #22975



---

archive/issue_comments_314433.json:
```json
{
    "body": "next step in #23068",
    "created_at": "2017-05-24T07:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314433",
    "user": "https://github.com/fchapoton"
}
```

next step in #23068



---

archive/issue_comments_314434.json:
```json
{
    "body": "next step in #23589",
    "created_at": "2017-08-07T13:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314434",
    "user": "https://github.com/fchapoton"
}
```

next step in #23589



---

archive/issue_comments_314435.json:
```json
{
    "body": "next step in #23641",
    "created_at": "2017-08-18T10:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314435",
    "user": "https://github.com/fchapoton"
}
```

next step in #23641



---

archive/issue_comments_314436.json:
```json
{
    "body": "next step in #23662",
    "created_at": "2017-08-21T10:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314436",
    "user": "https://github.com/fchapoton"
}
```

next step in #23662



---

archive/issue_comments_314437.json:
```json
{
    "body": "maybe the last step in #23745\n\nbut how can we check ?",
    "created_at": "2017-08-29T14:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314437",
    "user": "https://github.com/fchapoton"
}
```

maybe the last step in #23745

but how can we check ?



---

archive/issue_comments_314438.json:
```json
{
    "body": "Jeroen, do you have an idea how to find places where adding \"absolute_import\" is still needed ?",
    "created_at": "2017-10-13T13:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314438",
    "user": "https://github.com/fchapoton"
}
```

Jeroen, do you have an idea how to find places where adding "absolute_import" is still needed ?



---

archive/issue_comments_314439.json:
```json
{
    "body": "Do you mean for Python and Cython code in the Sage library or only Cython code?",
    "created_at": "2017-10-13T14:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314439",
    "user": "https://github.com/jdemeyer"
}
```

Do you mean for Python and Cython code in the Sage library or only Cython code?



---

archive/issue_comments_314440.json:
```json
{
    "body": "Well, only Cython, to deal with this ticket. But of course one should also check for py files.",
    "created_at": "2017-10-13T14:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314440",
    "user": "https://github.com/fchapoton"
}
```

Well, only Cython, to deal with this ticket. But of course one should also check for py files.



---

archive/issue_comments_314441.json:
```json
{
    "body": "OK, both Python and Cython. I think it is best to treat Python and Cython the same here. Imports work the same way. The only difference is that Cython also has `cimport`.\n\nI think that I only created this ticket because at some point you were adding `from __future__ import absolute_import` to a lot of Python files but not to Cython files. It seemed like you overlooked Cython files.",
    "created_at": "2017-10-13T14:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314441",
    "user": "https://github.com/jdemeyer"
}
```

OK, both Python and Cython. I think it is best to treat Python and Cython the same here. Imports work the same way. The only difference is that Cython also has `cimport`.

I think that I only created this ticket because at some point you were adding `from __future__ import absolute_import` to a lot of Python files but not to Cython files. It seemed like you overlooked Cython files.



---

archive/issue_comments_314442.json:
```json
{
    "body": "So what should we do here ?\n\nI would like to have some certitude before closing, but I do not know how to test that everything is in order.",
    "created_at": "2017-10-13T14:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314442",
    "user": "https://github.com/fchapoton"
}
```

So what should we do here ?

I would like to have some certitude before closing, but I do not know how to test that everything is in order.



---

archive/issue_comments_314443.json:
```json
{
    "body": "Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.",
    "created_at": "2017-10-13T15:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314443",
    "user": "https://github.com/jdemeyer"
}
```

Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.



---

archive/issue_comments_314444.json:
```json
{
    "body": "Replying to [comment:12 jdemeyer]:\n> Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.\n\nany idea on how to do that ?",
    "created_at": "2017-11-12T10:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314444",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:12 jdemeyer]:
> Actually, it might be easy to force Cython to use `absolute_import` everywhere. Maybe we can try the same thing with `print_function`.

any idea on how to do that ?



---

archive/issue_comments_314445.json:
```json
{
    "body": "Replying to [comment:13 chapoton]:\n> any idea on how to do that ?\n\nYes.",
    "created_at": "2017-11-13T11:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314445",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:13 chapoton]:
> any idea on how to do that ?

Yes.



---

archive/issue_comments_314446.json:
```json
{
    "body": "Just one change required...\n----\nNew commits:",
    "created_at": "2017-11-14T16:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314446",
    "user": "https://github.com/jdemeyer"
}
```

Just one change required...
----
New commits:



---

archive/issue_comments_314447.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-14T16:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314447",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_314448.json:
```json
{
    "body": "Great !\nDoes this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?",
    "created_at": "2017-11-14T19:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314448",
    "user": "https://github.com/fchapoton"
}
```

Great !
Does this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?



---

archive/issue_comments_314449.json:
```json
{
    "body": "Replying to [comment:17 chapoton]:\n> Great !\n> Does this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?\n\nYes. I didn't run doctests, but at least built and ran Sage.",
    "created_at": "2017-11-14T20:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314449",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:17 chapoton]:
> Great !
> Does this mean that you tried to compile while forcing cython to use absolute import, and this was the only failure ?

Yes. I didn't run doctests, but at least built and ran Sage.



---

archive/issue_comments_314450.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-14T20:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314450",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_314451.json:
```json
{
    "body": "Then let us consider that this ticket is fixed. Thanks !",
    "created_at": "2017-11-14T20:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314451",
    "user": "https://github.com/fchapoton"
}
```

Then let us consider that this ticket is fixed. Thanks !



---

archive/issue_comments_314452.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22571#issuecomment-314452",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
