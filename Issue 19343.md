# Issue 19343: use locals() in growth group factory

Issue created by migration from https://trac.sagemath.org/ticket/19580

Original creator: dkrenn

Original creation time: 2015-11-13 02:43:35

CC:  behackl cheuberg

Make

```
sage: Z = ZZ
sage: GrowthGroup('n^Z')
```

working.


---

Comment by dkrenn created at 2015-11-13 02:44:14

New commits:


---

Comment by dkrenn created at 2015-11-13 02:44:14

Changing status from new to needs_review.


---

Comment by git created at 2015-11-13 02:55:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2015-11-13 02:56:48

Merged in #19528 due to a merge conflict.


---

Comment by git created at 2015-11-13 02:58:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nbruin created at 2015-11-13 07:21:51

Would it be possible to just not do this? It's a strong indication of bad design if you end up parsing strings wrt. locals/globals dictionaries. Variable names do not belong in strings.

You'll probably get scoping/shadowing in the different dictionaries wrong. E.g. what about

```
[GrowthGroup("n^Z") for Z in [1..10]]
```

and, subtly different,

```
list(GrowthGroup("n^Z") for Z in [1..10])
```

And what would

```
[GrowthGroup("n^Z") for n in [1..10] for Z in [1..10]]
```

do? I know: it probably gives errors because it's not passing the right values here, but what is different about n wrt. Z that one name needs to be looked up in a scope and the other doesn't?

If you need a construction like this, then something along the lines

```
PreGrowthGroup("n")^Z
```

is probably much safer.

You might want to check on sage-devel what the opinions of other developers are about letting local/global variable names sneak into strings.


---

Comment by cheuberg created at 2017-01-05 11:52:09

does not merge (cf. patchbot)


---

Comment by cheuberg created at 2017-01-05 11:52:09

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-01-05 12:47:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2017-01-05 13:08:20

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-05-19 08:59:28

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2017-05-19 08:59:28

branch does no longer apply
