# Issue 12752: SchubertPolynomialRing causes symmetrica and Sage to crash on bad input

archive/issues_012752.json:
```json
{
    "body": "Assignee: VivianePons\n\nCC:  sage-combinat nthiery\n\nKeywords: days38, Schubert polynomials\n\nThe SchubertPolynomialRing expects a permutation as an index. When a list is given which is not a permutation, the object is created anyway. The problem comes when one tries to expand the polynomial, if the index is not a valid permutation, it makes symmetrica crash which makes Sage crash ! \n\n\n```\nsage: S = SchubertPolynomialRing(ZZ)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \nsage: pol = S([2,1,3])\nsage: pol.expand()\nx0\nsage: pol = S([2,1,1])\nsage: pol.expand()\nfunction: mult_apply_integer(2) \npython: function: mult_apply_integer(2) \n: Operation not permitted\n```\n\nSo the idea would be to check when the polynomial is created that the input is correct and raise an exception at this point if it's not. \n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12924\n\n",
    "created_at": "2012-05-08T15:16:12Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "SchubertPolynomialRing causes symmetrica and Sage to crash on bad input",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12752",
    "user": "VivianePons"
}
```
Assignee: VivianePons

CC:  sage-combinat nthiery

Keywords: days38, Schubert polynomials

The SchubertPolynomialRing expects a permutation as an index. When a list is given which is not a permutation, the object is created anyway. The problem comes when one tries to expand the polynomial, if the index is not a valid permutation, it makes symmetrica crash which makes Sage crash ! 


```
sage: S = SchubertPolynomialRing(ZZ)                                  
sage: pol = S([2,1,3])
sage: pol.expand()
x0
sage: pol = S([2,1,1])
sage: pol.expand()
function: mult_apply_integer(2) 
python: function: mult_apply_integer(2) 
: Operation not permitted
```

So the idea would be to check when the polynomial is created that the input is correct and raise an exception at this point if it's not. 


Issue created by migration from https://trac.sagemath.org/ticket/12924





---

archive/issue_comments_152830.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-08T18:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152830",
    "user": "VivianePons"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152831.json:
```json
{
    "body": "Attachment [trac_12924-Schubert-polynomials-input-bug-vp.patch](tarball://root/attachments/some-uuid/ticket12924/trac_12924-Schubert-polynomials-input-bug-vp.patch) by VivianePons created at 2012-05-08 18:44:32",
    "created_at": "2012-05-08T18:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152831",
    "user": "VivianePons"
}
```

Attachment [trac_12924-Schubert-polynomials-input-bug-vp.patch](tarball://root/attachments/some-uuid/ticket12924/trac_12924-Schubert-polynomials-input-bug-vp.patch) by VivianePons created at 2012-05-08 18:44:32



---

archive/issue_comments_152832.json:
```json
{
    "body": "Attachment [trac_12924-doc_fix.patch](tarball://root/attachments/some-uuid/ticket12924/trac_12924-doc_fix.patch) by mhansen created at 2012-07-31 22:18:29\n\nI've fixed some of the formatting.  If you're fine with these changes, you can mark this ticket as positive_review.",
    "created_at": "2012-07-31T22:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152832",
    "user": "mhansen"
}
```

Attachment [trac_12924-doc_fix.patch](tarball://root/attachments/some-uuid/ticket12924/trac_12924-doc_fix.patch) by mhansen created at 2012-07-31 22:18:29

I've fixed some of the formatting.  If you're fine with these changes, you can mark this ticket as positive_review.



---

archive/issue_comments_152833.json:
```json
{
    "body": "It's ok with me ! Thank's for the review",
    "created_at": "2012-08-02T02:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152833",
    "user": "VivianePons"
}
```

It's ok with me ! Thank's for the review



---

archive/issue_comments_152834.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-02T02:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152834",
    "user": "mhansen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152835.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-12T18:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12752#issuecomment-152835",
    "user": "jdemeyer"
}
```

Resolution: fixed
