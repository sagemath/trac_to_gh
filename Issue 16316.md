# Issue 16316: Clean IncidenceStructure

archive/issues_016316.json:
```json
{
    "body": "CC:  @nathanncohen @brettpim\n\nIn #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:\n- to deal with other ground sets than integers (but with a fixed bijection `points <-> {0, ..., v-1}`)\n- to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)\n- ... (maybe more)\n\nsee also: #16534\n\nIssue created by migration from https://trac.sagemath.org/ticket/16553\n\n",
    "created_at": "2014-06-26T12:25:09Z",
    "labels": [
        "combinatorial designs",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Clean IncidenceStructure",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16316",
    "user": "@videlec"
}
```
CC:  @nathanncohen @brettpim

In #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:
- to deal with other ground sets than integers (but with a fixed bijection `points <-> {0, ..., v-1}`)
- to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)
- ... (maybe more)

see also: #16534

Issue created by migration from https://trac.sagemath.org/ticket/16553





---

archive/issue_comments_213603.json:
```json
{
    "body": "Some more remarks:\n\n- I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n\n- A better name for `IncidenceStructure` would be `Design`... and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n\n- to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n  {{{\n  class Design:\n      def rank_point(self, point):    # index of ``point``\n      def unrank_point(self, n):      # ``n``-th point\n      def rank_block(self, block):    # index of ``block``\n      def unrank_block(self, n):      # ``n``-th block\n  }}}",
    "created_at": "2014-06-26T13:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213603",
    "user": "@videlec"
}
```

Some more remarks:

- I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.

- A better name for `IncidenceStructure` would be `Design`... and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.

- to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`
  {{{
  class Design:
      def rank_point(self, point):    # index of ``point``
      def unrank_point(self, n):      # ``n``-th point
      def rank_block(self, block):    # index of ``block``
      def unrank_block(self, n):      # ``n``-th block
  }}}



---

archive/issue_comments_213604.json:
```json
{
    "body": "Yo !\n\n> - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n\nWell, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.\n\nANd of course, the blocks would be .. Sets of points from the ground set ?\n\nThat's what we want, isn't it ?\n\n> - A better name for `IncidenceStructure` would be `Design`...\n\nOr hypergraph ?... A friend of mine says \"geometry\" instead of \"hypergraph\". Truth it, an incidence structure is a pretty general thing :\n\nhttp://en.wikipedia.org/wiki/Incidence_structure\n\n> and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n\nWell, we may need to have \".groups()\" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...\n\nThe main problem is that orthogonal arrays are not really designs in this sense.\n\n> - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n>   {{{\n>   class Design:\n>       def rank_point(self, point):    # index of ``point``\n>       def unrank_point(self, n):      # ``n``-th point\n>       def rank_block(self, block):    # index of ``block``\n>       def unrank_block(self, n):      # ``n``-th block\n>   }}}\n\nReally ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !\n\nNathann",
    "created_at": "2014-06-26T13:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213604",
    "user": "@nathanncohen"
}
```

Yo !

> - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.

Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.

ANd of course, the blocks would be .. Sets of points from the ground set ?

That's what we want, isn't it ?

> - A better name for `IncidenceStructure` would be `Design`...

Or hypergraph ?... A friend of mine says "geometry" instead of "hypergraph". Truth it, an incidence structure is a pretty general thing :

http://en.wikipedia.org/wiki/Incidence_structure

> and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.

Well, we may need to have ".groups()" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...

The main problem is that orthogonal arrays are not really designs in this sense.

> - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`
>   {{{
>   class Design:
>       def rank_point(self, point):    # index of ``point``
>       def unrank_point(self, n):      # ``n``-th point
>       def rank_block(self, block):    # index of ``block``
>       def unrank_block(self, n):      # ``n``-th block
>   }}}

Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !

Nathann



---

archive/issue_comments_213605.json:
```json
{
    "body": "Replying to [comment:2 ncohen]:\n> Yo !\n> \n> > - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n> \n> Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.\n\n> ANd of course, the blocks would be .. Sets of points from the ground set ?\n\nThis is confusing. Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\nOne option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n> \n> > - A better name for `IncidenceStructure` would be `Design`...\n> \n> Or hypergraph ?... A friend of mine says \"geometry\" instead of \"hypergraph\". Truth it, an incidence structure is a pretty general thing :\n> \n> http://en.wikipedia.org/wiki/Incidence_structure\n>\n\nYes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?\n\n> > and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n> \n> Well, we may need to have \".groups()\" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...\n> \n> The main problem is that orthogonal arrays are not really designs in this sense.\n> \n> > - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n> >   {{{\n> >   class Design:\n> >       def rank_point(self, point):    # index of ``point``\n> >       def unrank_point(self, n):      # ``n``-th point\n> >       def rank_block(self, block):    # index of ``block``\n> >       def unrank_block(self, n):      # ``n``-th block\n> >   }}}\n> \n> Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !\n\nAll right.\n\nVincent",
    "created_at": "2014-06-26T13:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213605",
    "user": "@videlec"
}
```

Replying to [comment:2 ncohen]:
> Yo !
> 
> > - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.
> 
> Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.

> ANd of course, the blocks would be .. Sets of points from the ground set ?

This is confusing. Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

> 
> > - A better name for `IncidenceStructure` would be `Design`...
> 
> Or hypergraph ?... A friend of mine says "geometry" instead of "hypergraph". Truth it, an incidence structure is a pretty general thing :
> 
> http://en.wikipedia.org/wiki/Incidence_structure
>

Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?

> > and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.
> 
> Well, we may need to have ".groups()" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...
> 
> The main problem is that orthogonal arrays are not really designs in this sense.
> 
> > - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`
> >   {{{
> >   class Design:
> >       def rank_point(self, point):    # index of ``point``
> >       def unrank_point(self, n):      # ``n``-th point
> >       def rank_block(self, block):    # index of ``block``
> >       def unrank_block(self, n):      # ``n``-th block
> >   }}}
> 
> Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !

All right.

Vincent



---

archive/issue_comments_213606.json:
```json
{
    "body": "> This is confusing.\n\nWhat is confusing ? That blocks are sets of points ? `O_o`\n\n> Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\nWhy doesn't it work with duals ?\n \n> One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n............\n\nYeah, let's make it impossible to iterate on blocks. That will be better.\n\n> Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?\n\nForget about hypergraphs for the moment. Nobody but I knows it exists, and it can do nothing useful except displaying stuff, and once more I am the only one who knows that it does that `:-P`\n\nIncidence Structure will be the most basic thing we have. Then we will have GDD, then all we need above that.\n\nNathann",
    "created_at": "2014-06-26T13:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213606",
    "user": "@nathanncohen"
}
```

> This is confusing.

What is confusing ? That blocks are sets of points ? `O_o`

> Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

Why doesn't it work with duals ?
 
> One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

............

Yeah, let's make it impossible to iterate on blocks. That will be better.

> Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?

Forget about hypergraphs for the moment. Nobody but I knows it exists, and it can do nothing useful except displaying stuff, and once more I am the only one who knows that it does that `:-P`

Incidence Structure will be the most basic thing we have. Then we will have GDD, then all we need above that.

Nathann



---

archive/issue_comments_213607.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n> > This is confusing.\n> \n> What is confusing ? That blocks are sets of points ? `O_o`\n\nNo, that points are blocks of the dual!\n\n> > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n> \n> Why doesn't it work with duals ?\n\nBecause the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.\n\n> > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n> \n> ............\n> \n> Yeah, let's make it impossible to iterate on blocks. That will be better.\n\nAll right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?\n\nVincent",
    "created_at": "2014-06-26T14:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213607",
    "user": "@videlec"
}
```

Replying to [comment:4 ncohen]:
> > This is confusing.
> 
> What is confusing ? That blocks are sets of points ? `O_o`

No, that points are blocks of the dual!

> > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.
> 
> Why doesn't it work with duals ?

Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.

> > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.
> 
> ............
> 
> Yeah, let's make it impossible to iterate on blocks. That will be better.

All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?

Vincent



---

archive/issue_comments_213608.json:
```json
{
    "body": "> All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?\n\nNo. What I want is to stop trying to solve problems that already have an easy solution, especially when what you call \"solving them\" means sacrificing definitely useful stuff like being able to iterate on blocks. We can just make the `.dual()` function return a design along with a dictionary associating a vertex with the block it has become.\n\nNathann",
    "created_at": "2014-06-26T14:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213608",
    "user": "@nathanncohen"
}
```

> All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?

No. What I want is to stop trying to solve problems that already have an easy solution, especially when what you call "solving them" means sacrificing definitely useful stuff like being able to iterate on blocks. We can just make the `.dual()` function return a design along with a dictionary associating a vertex with the block it has become.

Nathann



---

archive/issue_comments_213609.json:
```json
{
    "body": "Replying to [comment:5 vdelecroix]:\n> Replying to [comment:4 ncohen]:\n> > > This is confusing.\n> > \n> > What is confusing ? That blocks are sets of points ? `O_o`\n> \n> No, that points are blocks of the dual!\n> \n> > > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n> > \n> > Why doesn't it work with duals ?\n> \n> Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.\n> \n> > > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n> > \n> > ............\n> > \n> > Yeah, let's make it impossible to iterate on blocks. That will be better.\n\nAll right: what about intersection? do we want `b1.intersection(b2)` available?",
    "created_at": "2014-06-26T15:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213609",
    "user": "@videlec"
}
```

Replying to [comment:5 vdelecroix]:
> Replying to [comment:4 ncohen]:
> > > This is confusing.
> > 
> > What is confusing ? That blocks are sets of points ? `O_o`
> 
> No, that points are blocks of the dual!
> 
> > > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.
> > 
> > Why doesn't it work with duals ?
> 
> Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.
> 
> > > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.
> > 
> > ............
> > 
> > Yeah, let's make it impossible to iterate on blocks. That will be better.

All right: what about intersection? do we want `b1.intersection(b2)` available?



---

archive/issue_comments_213610.json:
```json
{
    "body": "> All right: what about intersection? do we want `b1.intersection(b2)` available?\n\nWhy we would need that ?...\n\nNathann",
    "created_at": "2014-06-26T15:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213610",
    "user": "@nathanncohen"
}
```

> All right: what about intersection? do we want `b1.intersection(b2)` available?

Why we would need that ?...

Nathann



---

archive/issue_comments_213611.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n> > All right: what about intersection? do we want `b1.intersection(b2)` available?\n> \n> Why we would need that ?...\n\nTo compute the intersection numbers (see definition 1.5 of the Handbook).",
    "created_at": "2014-06-26T15:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213611",
    "user": "@videlec"
}
```

Replying to [comment:8 ncohen]:
> > All right: what about intersection? do we want `b1.intersection(b2)` available?
> 
> Why we would need that ?...

To compute the intersection numbers (see definition 1.5 of the Handbook).



---

archive/issue_comments_213612.json:
```json
{
    "body": "> To compute the intersection numbers (see definition 1.5 of the Handbook).\n\nThat's not a reason to restrict the input. If we need to compute stuff like that we can copy the data in whatever structure we need to make it go faster, but that is not sufficient to change the input of the whole class.\n\nNathann",
    "created_at": "2014-06-26T15:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213612",
    "user": "@nathanncohen"
}
```

> To compute the intersection numbers (see definition 1.5 of the Handbook).

That's not a reason to restrict the input. If we need to compute stuff like that we can copy the data in whatever structure we need to make it go faster, but that is not sufficient to change the input of the whole class.

Nathann



---

archive/issue_comments_213613.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-06-26T21:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213613",
    "user": "@videlec"
}
```

New commits:



---

archive/issue_comments_213614.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-26T21:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213614",
    "user": "@videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213615.json:
```json
{
    "body": "I did not know what to do with `def block_design_checker(self, t, v, k, lmbda, type=None):`... help!\n\nVincent",
    "created_at": "2014-06-26T21:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213615",
    "user": "@videlec"
}
```

I did not know what to do with `def block_design_checker(self, t, v, k, lmbda, type=None):`... help!

Vincent



---

archive/issue_comments_213616.json:
```json
{
    "body": "Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.\n\nFirst, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.\n\nThen, things like \"return len(self.blocks())\" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`\n\n\nYou also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.\n\nYou seem to remove classes without deprecation, like `BlockDesign`.\n\nNathann",
    "created_at": "2014-06-27T07:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213616",
    "user": "@nathanncohen"
}
```

Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.

First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.

Then, things like "return len(self.blocks())" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`


You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.

You seem to remove classes without deprecation, like `BlockDesign`.

Nathann



---

archive/issue_comments_213617.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-06-27T07:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213617",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_213618.json:
```json
{
    "body": "Replying to [comment:13 ncohen]:\n> Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.\n\nI can do that. But I am not sure you want to know the real history of my commits.\n\n> First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.\n\nThe definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n\n> Then, things like \"return len(self.blocks())\" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`\n\nRight!\n\n> You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.\n\nThe only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n\n> You seem to remove classes without deprecation, like `BlockDesign`.\n\nNope. It is now a complete synonym of `IncidenceStructure` without any further check.\n\nVincent",
    "created_at": "2014-06-27T07:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213618",
    "user": "@videlec"
}
```

Replying to [comment:13 ncohen]:
> Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.

I can do that. But I am not sure you want to know the real history of my commits.

> First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.

The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.

> Then, things like "return len(self.blocks())" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`

Right!

> You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.

The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).

> You seem to remove classes without deprecation, like `BlockDesign`.

Nope. It is now a complete synonym of `IncidenceStructure` without any further check.

Vincent



---

archive/issue_comments_213619.json:
```json
{
    "body": "Yo !\n\n> I can do that. But I am not sure you want to know the real history of my commits.\n\nNot \"the real history\". That's why we create several patches for several things, and that's why we can add several commits in the same ticket : so that we may present the changes in a way that makes them easy to review. You didn't want to see the real history of my design commits eithers `:-P`\n\n> The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n\nWell, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this \"t\" is a variable.... What about tDesign ?\n\nWhat I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. \n\n> The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n\nI have never heard of \"t indices\" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...\n\nNathann",
    "created_at": "2014-06-27T07:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213619",
    "user": "@nathanncohen"
}
```

Yo !

> I can do that. But I am not sure you want to know the real history of my commits.

Not "the real history". That's why we create several patches for several things, and that's why we can add several commits in the same ticket : so that we may present the changes in a way that makes them easy to review. You didn't want to see the real history of my design commits eithers `:-P`

> The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.

Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this "t" is a variable.... What about tDesign ?

What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. 

> The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).

I have never heard of "t indices" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...

Nathann



---

archive/issue_comments_213620.json:
```json
{
    "body": "Replying to [comment:15 ncohen]:\n> Yo !\n> \n> > The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n> \n> Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this \"t\" is a variable.... What about tDesign ?\n\n> What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. \n\nI propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).\n\n> > The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n> \n> I have never heard of \"t indices\" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...\n\nHandbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.",
    "created_at": "2014-06-27T08:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213620",
    "user": "@videlec"
}
```

Replying to [comment:15 ncohen]:
> Yo !
> 
> > The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.
> 
> Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this "t" is a variable.... What about tDesign ?

> What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. 

I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).

> > The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).
> 
> I have never heard of "t indices" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...

Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.



---

archive/issue_comments_213621.json:
```json
{
    "body": "Yo !\n\n> I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).\n\nWorks for me.\n\n> Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.\n\n+1 to degree. However having a \"degree\" method is a bit of a lie given that the data structure of IncidenceStructure is not at all meant to compute the degree of points... Unless we cache it ?\n\nNathann",
    "created_at": "2014-06-27T08:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213621",
    "user": "@nathanncohen"
}
```

Yo !

> I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).

Works for me.

> Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.

+1 to degree. However having a "degree" method is a bit of a lie given that the data structure of IncidenceStructure is not at all meant to compute the degree of points... Unless we cache it ?

Nathann



---

archive/issue_comments_213622.json:
```json
{
    "body": "There is right now the possibility of having repeated elements in the blocks. The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?\n\nVincent",
    "created_at": "2014-06-27T08:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213622",
    "user": "@videlec"
}
```

There is right now the possibility of having repeated elements in the blocks. The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?

Vincent



---

archive/issue_comments_213623.json:
```json
{
    "body": "Yo !\n\n> There is right now the possibility of having repeated elements in the blocks.\n\n`>_<`\n\n> The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?\n\nLet's remove this. It does not appear in what is commonly accepted as an incidence structure. Those things are meant to be sets.\n\nNathann",
    "created_at": "2014-06-27T08:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213623",
    "user": "@nathanncohen"
}
```

Yo !

> There is right now the possibility of having repeated elements in the blocks.

`>_<`

> The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?

Let's remove this. It does not appear in what is commonly accepted as an incidence structure. Those things are meant to be sets.

Nathann



---

archive/issue_comments_213624.json:
```json
{
    "body": "Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n\n```\nsage: S3_9 = designs.steiner_triple_system(9)\nsage: S3_9.is_t_design(return_parameters=True)\n(True, [2, 9, 3, 1])\n\nsage: blocks = designs.steiner_quadruple_system(8)\nsage: S8 = designs.IncidenceStructure(8, blocks)\nsage: S8.is_t_design(return_parameters=True)\n(True, [3, 8, 4, 1])\n```\n",
    "created_at": "2014-06-27T08:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213624",
    "user": "@videlec"
}
```

Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest

```
sage: S3_9 = designs.steiner_triple_system(9)
sage: S3_9.is_t_design(return_parameters=True)
(True, [2, 9, 3, 1])

sage: blocks = designs.steiner_quadruple_system(8)
sage: S8 = designs.IncidenceStructure(8, blocks)
sage: S8.is_t_design(return_parameters=True)
(True, [3, 8, 4, 1])
```




---

archive/issue_comments_213625.json:
```json
{
    "body": "Yo !\n\n> Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n\nJust because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.\n\nBy the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without \"knowing\" the value of `t`. There is no such thing as \"the largest t such that a design is a `t`-design.\n\nNathann",
    "created_at": "2014-06-27T08:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213625",
    "user": "@nathanncohen"
}
```

Yo !

> Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest

Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.

By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without "knowing" the value of `t`. There is no such thing as "the largest t such that a design is a `t`-design.

Nathann



---

archive/issue_comments_213626.json:
```json
{
    "body": "Replying to [comment:21 ncohen]:\n> Yo !\n> \n> > Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n> \n> Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.\n> \n> By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without \"knowing\" the value of `t`. There is no such thing as \"the largest t such that a design is a `t`-design.\n\nWhy not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n\n```\nlambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n```\n\n(Handbook theorem II.4.8)\n\nI think that we should forbid lambda=0, that's all.",
    "created_at": "2014-06-27T08:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213626",
    "user": "@videlec"
}
```

Replying to [comment:21 ncohen]:
> Yo !
> 
> > Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest
> 
> Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.
> 
> By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without "knowing" the value of `t`. There is no such thing as "the largest t such that a design is a `t`-design.

Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 

```
lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
```

(Handbook theorem II.4.8)

I think that we should forbid lambda=0, that's all.



---

archive/issue_comments_213627.json:
```json
{
    "body": "> Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n> {{{\n> lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n> }}}\n> (Handbook theorem II.4.8)\n> \n> I think that we should forbid lambda=0, that's all.\n\nHmmmmmm... Makes total sense, sorry `O_o`\n\nNathann",
    "created_at": "2014-06-27T08:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213627",
    "user": "@nathanncohen"
}
```

> Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 
> {{{
> lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
> }}}
> (Handbook theorem II.4.8)
> 
> I think that we should forbid lambda=0, that's all.

Hmmmmmm... Makes total sense, sorry `O_o`

Nathann



---

archive/issue_comments_213628.json:
```json
{
    "body": "Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?\n\nNathann",
    "created_at": "2014-06-27T09:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213628",
    "user": "@nathanncohen"
}
```

Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?

Nathann



---

archive/issue_comments_213629.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?\n> \n> Nathann\n\nI would love that!",
    "created_at": "2014-06-27T09:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213629",
    "user": "@videlec"
}
```

Replying to [comment:24 ncohen]:
> Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?
> 
> Nathann

I would love that!



---

archive/issue_comments_213630.json:
```json
{
    "body": "Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`\n\nNathann",
    "created_at": "2014-06-27T09:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213630",
    "user": "@nathanncohen"
}
```

Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`

Nathann



---

archive/issue_comments_213631.json:
```json
{
    "body": "Replying to [comment:26 ncohen]:\n> Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`\n\nmight be the `SageObject`. I can remove the inheritance.",
    "created_at": "2014-06-27T09:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213631",
    "user": "@videlec"
}
```

Replying to [comment:26 ncohen]:
> Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`

might be the `SageObject`. I can remove the inheritance.



---

archive/issue_comments_213632.json:
```json
{
    "body": "Replying to [comment:23 ncohen]:\n> > Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n> > {{{\n> > lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n> > }}}\n> > (Handbook theorem II.4.8)\n> > \n> > I think that we should forbid lambda=0, that's all.\n> \n> Hmmmmmm... Makes total sense, sorry `O_o`\n\nAnd actually:\n- a design whose blocks have all the same lenght is a 0-design\n- a 0-design for which each point has the same degree is a 1-design\n\nI should modify the function to take care of that...",
    "created_at": "2014-06-27T09:17:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213632",
    "user": "@videlec"
}
```

Replying to [comment:23 ncohen]:
> > Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 
> > {{{
> > lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
> > }}}
> > (Handbook theorem II.4.8)
> > 
> > I think that we should forbid lambda=0, that's all.
> 
> Hmmmmmm... Makes total sense, sorry `O_o`

And actually:
- a design whose blocks have all the same lenght is a 0-design
- a 0-design for which each point has the same degree is a 1-design

I should modify the function to take care of that...



---

archive/issue_comments_213633.json:
```json
{
    "body": "> might be the `SageObject`. I can remove the inheritance.\n\nGood idea ! It will also remove these 9 functions we don't need \n\n```\nSageObject.category    SageObject.dump        SageObject.mro         SageObject.reset_name  SageObject.version     \nSageObject.db          SageObject.dumps       SageObject.rename      SageObject.save        \n```\n\n\nNathann",
    "created_at": "2014-06-27T09:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213633",
    "user": "@nathanncohen"
}
```

> might be the `SageObject`. I can remove the inheritance.

Good idea ! It will also remove these 9 functions we don't need 

```
SageObject.category    SageObject.dump        SageObject.mro         SageObject.reset_name  SageObject.version     
SageObject.db          SageObject.dumps       SageObject.rename      SageObject.save        
```


Nathann



---

archive/issue_comments_213634.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-27T11:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213634",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213635.json:
```json
{
    "body": "Hi Nathann,\n\nAs I completely rewrote the infrastructure it does not make much sense to have separated commits. I decided to implement a `t_design_parameters` (as a cached method) and a `is_t_design`. It is much more readable that way.\n\nI am not sure what to do with the caching of degrees... for sure we do not want to do it on startup. And for now, as the datastructure is still in basic state I vote for keeping it the way it is. If we will cache it in the future then we should remove the ``@`cached_method` on `t_design_parameters`.\n\nNeeeeeds review!\n\nVincent",
    "created_at": "2014-06-27T11:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213635",
    "user": "@videlec"
}
```

Hi Nathann,

As I completely rewrote the infrastructure it does not make much sense to have separated commits. I decided to implement a `t_design_parameters` (as a cached method) and a `is_t_design`. It is much more readable that way.

I am not sure what to do with the caching of degrees... for sure we do not want to do it on startup. And for now, as the datastructure is still in basic state I vote for keeping it the way it is. If we will cache it in the future then we should remove the ``@`cached_method` on `t_design_parameters`.

Neeeeeds review!

Vincent



---

archive/issue_comments_213636.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-06-27T11:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213636",
    "user": "@videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_213637.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-06-27T11:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213637",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_213638.json:
```json
{
    "body": "there was small conflicts with #16446 so I did the merge.",
    "created_at": "2014-06-27T11:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213638",
    "user": "@videlec"
}
```

there was small conflicts with #16446 so I did the merge.



---

archive/issue_comments_213639.json:
```json
{
    "body": "First passe review:\n\n- Deprecated argument for `BlockDesign(test=...)`\n- `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy\n- `is_block_design` -> `t_design_parameters` O_o ??? `is_t_design` ?\n- Why remove `OA_to_projective_plane` ?\n- Why this ?\n\n\n```\n-    A 3-design::\n-\n-        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))\n-        sage: D.is_block_design()\n-        (True, [3, 32, 4, 1])\n```\n\n\n- lines `t_design_parameters` with an optional flag ? Why ?\n\n- WHy this ?\n\n\n```\n-        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)\n-        sage: BD.is_block_design()         # optional - gap_packages (design package)\n-        (True, [5, 12, 6, 1])\n```\n\n\n- `IncidenceStructure(matrix)` broken ?\n\n- function that builds *and* incidence structure from a matrix\n\n- The doc of IncidenceStructure needs an INPUT block. It is useless to have one\n  in `__init__`, nobody sees it and it does not appear in the html doc.\n\n- \"point -- the points\" is not very informative. Especially when you handle\n  integers or iterables.\n\n- Instead of doing\n\n\n```\n+            for i in range(b):\n+                for j in range(v):\n+                    if not M[j,i].is_zero():\n+                        blocks[i].append(j)\n```\n\n\n  You can use matrix methods, like rows() columns() dans their to_dictionary()\n  function (you get the nonzero entries easily)\n\n\n- `self.points() == other.points() and self.blocks() == other.blocks()` :\n  compare private variables immediately, possibly avoids a copy\n\n- What is the point of `__ne__` when you have `__eq__` ?\n\n- `points()` and `blocks()` for the classes I am implementing I thought we\n  should make them COPY the data instead of return it immediately by default,\n  otherwise the users can change what is inside of them. With a `copy=False`\n  flag to prevent this. What do you think ?\n\n- replication_number -> degree ?\n\n- intersection_number -> needs a definition\n\n- intersection_number -> use itertools.combination\n\n- `Note that the dual of a block design may not be a block design.` --> ?\n\n- `replication_number`, `intersection_number`, `degrees` --> another ticket. By\n  the way, the implementation of `degrees` is ridiculous. Think of the\n  algorithmics behind instead of using fancy \"reduce\" functions.\n\n- `is_t_design` and `t_design_parameters` should be the same function. Let's\n  just have optional `t,v,k,l` parameters in `is_t_design`.\n\nNathann",
    "created_at": "2014-06-27T12:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213639",
    "user": "@nathanncohen"
}
```

First passe review:

- Deprecated argument for `BlockDesign(test=...)`
- `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy
- `is_block_design` -> `t_design_parameters` O_o ??? `is_t_design` ?
- Why remove `OA_to_projective_plane` ?
- Why this ?


```
-    A 3-design::
-
-        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))
-        sage: D.is_block_design()
-        (True, [3, 32, 4, 1])
```


- lines `t_design_parameters` with an optional flag ? Why ?

- WHy this ?


```
-        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)
-        sage: BD.is_block_design()         # optional - gap_packages (design package)
-        (True, [5, 12, 6, 1])
```


- `IncidenceStructure(matrix)` broken ?

- function that builds *and* incidence structure from a matrix

- The doc of IncidenceStructure needs an INPUT block. It is useless to have one
  in `__init__`, nobody sees it and it does not appear in the html doc.

- "point -- the points" is not very informative. Especially when you handle
  integers or iterables.

- Instead of doing


```
+            for i in range(b):
+                for j in range(v):
+                    if not M[j,i].is_zero():
+                        blocks[i].append(j)
```


  You can use matrix methods, like rows() columns() dans their to_dictionary()
  function (you get the nonzero entries easily)


- `self.points() == other.points() and self.blocks() == other.blocks()` :
  compare private variables immediately, possibly avoids a copy

- What is the point of `__ne__` when you have `__eq__` ?

- `points()` and `blocks()` for the classes I am implementing I thought we
  should make them COPY the data instead of return it immediately by default,
  otherwise the users can change what is inside of them. With a `copy=False`
  flag to prevent this. What do you think ?

- replication_number -> degree ?

- intersection_number -> needs a definition

- intersection_number -> use itertools.combination

- `Note that the dual of a block design may not be a block design.` --> ?

- `replication_number`, `intersection_number`, `degrees` --> another ticket. By
  the way, the implementation of `degrees` is ridiculous. Think of the
  algorithmics behind instead of using fancy "reduce" functions.

- `is_t_design` and `t_design_parameters` should be the same function. Let's
  just have optional `t,v,k,l` parameters in `is_t_design`.

Nathann



---

archive/issue_comments_213640.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-27T12:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213640",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213641.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-27T14:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213641",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213642.json:
```json
{
    "body": "I adressed the issues you mentioned. I only answer to those for which there was a problem\n\n> - `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy\n\ndone. But it is not clear to me:\n- are we allowed to modify the output of `blocks`?\n- are we allowed to modify the output of `__iter__`?\n\nIf both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n\n> - Why remove `OA_to_projective_plane` ?\n\nSorry, I should have said this: it was *completely* broken!!\n\n> - Why this ?\n> \n> {{{\n> -    A 3-design::\n> -\n> -        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))\n> -        sage: D.is_block_design()\n> -        (True, [3, 32, 4, 1])\n> }}}\n\nIt has nothing to do here (in the doc of `AffineGeometryDesign`).\n\n> - Why this ?\n> \n> {{{\n> -        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)\n> -        sage: BD.is_block_design()         # optional - gap_packages (design package)\n> -        (True, [5, 12, 6, 1])\n> }}}\n\nThe same test above is copied I guess 5 times all over the place. \n\n> - What is the point of `__ne__` when you have `__eq__` ?\n\nIt is not automatically set up to `not __eq__`. You should learn your python\n\n```\nsage: class A(object):\n....:     def __eq__(self, other):\n....:         return True\n....:     \nsage: a = A()\nsage: b = A()\nsage: a == b\nTrue\nsage: a != b\nTrue\n```\n\n \n> - `IncidenceStructure(matrix)` broken ?\n\nIt was. Now if the input is a matrix there is a check\n\n> - replication_number -> degree ?\n\nremoved, it was equivalent to .degrees(1)\n\n> - intersection_number -> needs a definition\n> - intersection_number -> use itertools.combination\n\nremoved, it was equivalent to .degrees(2)\n\n> - `replication_number`, `intersection_number`, `degrees` --> another ticket. By\n>   the way, the implementation of `degrees` is ridiculous. Think of the\n>   algorithmics behind instead of using fancy \"reduce\" functions.\n\ndegrees can not be in another commit since it is used in `.is_t_design`. I\nimplemented a more reasonable version (but a bit ugly because of the cached_method\nover an iterator...)\n\nVincent",
    "created_at": "2014-06-27T14:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213642",
    "user": "@videlec"
}
```

I adressed the issues you mentioned. I only answer to those for which there was a problem

> - `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy

done. But it is not clear to me:
- are we allowed to modify the output of `blocks`?
- are we allowed to modify the output of `__iter__`?

If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).

> - Why remove `OA_to_projective_plane` ?

Sorry, I should have said this: it was *completely* broken!!

> - Why this ?
> 
> {{{
> -    A 3-design::
> -
> -        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))
> -        sage: D.is_block_design()
> -        (True, [3, 32, 4, 1])
> }}}

It has nothing to do here (in the doc of `AffineGeometryDesign`).

> - Why this ?
> 
> {{{
> -        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)
> -        sage: BD.is_block_design()         # optional - gap_packages (design package)
> -        (True, [5, 12, 6, 1])
> }}}

The same test above is copied I guess 5 times all over the place. 

> - What is the point of `__ne__` when you have `__eq__` ?

It is not automatically set up to `not __eq__`. You should learn your python

```
sage: class A(object):
....:     def __eq__(self, other):
....:         return True
....:     
sage: a = A()
sage: b = A()
sage: a == b
True
sage: a != b
True
```

 
> - `IncidenceStructure(matrix)` broken ?

It was. Now if the input is a matrix there is a check

> - replication_number -> degree ?

removed, it was equivalent to .degrees(1)

> - intersection_number -> needs a definition
> - intersection_number -> use itertools.combination

removed, it was equivalent to .degrees(2)

> - `replication_number`, `intersection_number`, `degrees` --> another ticket. By
>   the way, the implementation of `degrees` is ridiculous. Think of the
>   algorithmics behind instead of using fancy "reduce" functions.

degrees can not be in another commit since it is used in `.is_t_design`. I
implemented a more reasonable version (but a bit ugly because of the cached_method
over an iterator...)

Vincent



---

archive/issue_comments_213643.json:
```json
{
    "body": "Yo !\n\n> done. But it is not clear to me:\n> - are we allowed to modify the output of `blocks`?\n> - are we allowed to modify the output of `__iter__`?\n> \n> If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n\nThe point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.\n\nFor `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.\n\nIdeally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.\n\nWe can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.\n\n> Sorry, I should have said this: it was *completely* broken!!\n\nAnd it wasn't used anywhere ? Why on earth did we write this in the first place ? `O_o`\n\n> It has nothing to do here (in the doc of `AffineGeometryDesign`).\n\nOkay\n\n> The same test above is copied I guess 5 times all over the place. \n\nOkay.\n\nThose two things are the kind of stuff that is pretty hard to find out while looking at the diff file unless you explain it....\n\n> > - `IncidenceStructure(matrix)` broken ?\n> \n> It was. Now if the input is a matrix there is a check\n\nOkayyy...\n\n> degrees can not be in another commit since it is used in `.is_t_design`.\n\nThis function was already implemented before.\n\nNathann",
    "created_at": "2014-06-27T14:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213643",
    "user": "@nathanncohen"
}
```

Yo !

> done. But it is not clear to me:
> - are we allowed to modify the output of `blocks`?
> - are we allowed to modify the output of `__iter__`?
> 
> If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).

The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.

For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.

Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.

We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.

> Sorry, I should have said this: it was *completely* broken!!

And it wasn't used anywhere ? Why on earth did we write this in the first place ? `O_o`

> It has nothing to do here (in the doc of `AffineGeometryDesign`).

Okay

> The same test above is copied I guess 5 times all over the place. 

Okay.

Those two things are the kind of stuff that is pretty hard to find out while looking at the diff file unless you explain it....

> > - `IncidenceStructure(matrix)` broken ?
> 
> It was. Now if the input is a matrix there is a check

Okayyy...

> degrees can not be in another commit since it is used in `.is_t_design`.

This function was already implemented before.

Nathann



---

archive/issue_comments_213644.json:
```json
{
    "body": "It all looks good to me, thanks for all the work ! There is only this `degrees` thing to solve now. I don't believe that we should have such a function. The \"degree\" is usually defined for a point. You can define it for larger things, but certainly not make it the default... Especially when you don't have a way to compute the degree of a vertex..\n\nI mean.. Really, that's an internal function ...\n\nNathann",
    "created_at": "2014-06-27T14:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213644",
    "user": "@nathanncohen"
}
```

It all looks good to me, thanks for all the work ! There is only this `degrees` thing to solve now. I don't believe that we should have such a function. The "degree" is usually defined for a point. You can define it for larger things, but certainly not make it the default... Especially when you don't have a way to compute the degree of a vertex..

I mean.. Really, that's an internal function ...

Nathann



---

archive/issue_comments_213645.json:
```json
{
    "body": "About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.\n\nAbout `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.\n\nNathann",
    "created_at": "2014-06-27T15:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213645",
    "user": "@nathanncohen"
}
```

About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.

About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.

Nathann



---

archive/issue_comments_213646.json:
```json
{
    "body": "By the way I do not get what you want to do with this \"degrees\" function. The work was already done in the previous version of this function. Why did you break it into a \"degrees\" function ?\n\nThat's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?\n\nNathann",
    "created_at": "2014-06-27T15:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213646",
    "user": "@nathanncohen"
}
```

By the way I do not get what you want to do with this "degrees" function. The work was already done in the previous version of this function. Why did you break it into a "degrees" function ?

That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?

Nathann



---

archive/issue_comments_213647.json:
```json
{
    "body": "Replying to [comment:39 ncohen]:\n> Yo !\n> \n> > done. But it is not clear to me:\n> > - are we allowed to modify the output of `blocks`?\n> > - are we allowed to modify the output of `__iter__`?\n> > \n> > If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n> \n> The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.\n> \n> For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.\n> \n> Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.\n> \n> We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.\n\nEasiest way: store everything as tuple of tuples. Is it ok for you?\n\nReplying to [comment:41 ncohen]:\n> About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.\n> \n> About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.\n\nagreed. I will modify that.\n\nReplying to [comment:42 ncohen]:\n> By the way I do not get what you want to do with this \"degrees\" function. The work was already done in the previous version of this function. Why did you break it into a \"degrees\" function ?\n\nI thought it might be useful to have degrees. But on the other hand, you are right, it is not very nice within this datastructure.\n \n> That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?\n\nIt was badly implemented. You can cut the last loop on `t` quickly most of the time.\n\nVincent",
    "created_at": "2014-06-27T15:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213647",
    "user": "@videlec"
}
```

Replying to [comment:39 ncohen]:
> Yo !
> 
> > done. But it is not clear to me:
> > - are we allowed to modify the output of `blocks`?
> > - are we allowed to modify the output of `__iter__`?
> > 
> > If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).
> 
> The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.
> 
> For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.
> 
> Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.
> 
> We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.

Easiest way: store everything as tuple of tuples. Is it ok for you?

Replying to [comment:41 ncohen]:
> About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.
> 
> About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.

agreed. I will modify that.

Replying to [comment:42 ncohen]:
> By the way I do not get what you want to do with this "degrees" function. The work was already done in the previous version of this function. Why did you break it into a "degrees" function ?

I thought it might be useful to have degrees. But on the other hand, you are right, it is not very nice within this datastructure.
 
> That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?

It was badly implemented. You can cut the last loop on `t` quickly most of the time.

Vincent



---

archive/issue_comments_213648.json:
```json
{
    "body": "> Easiest way: store everything as tuple of tuples. Is it ok for you?\n\nYeah yeah but it would be nice to not HAVE to copy stuff if we don't want to... I hate classes `T_T`\n\n> It was badly implemented. You can cut the last loop on `t` quickly most of the time.\n\nIsn't it possible to just fix that ?..\n\nNathann",
    "created_at": "2014-06-27T15:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213648",
    "user": "@nathanncohen"
}
```

> Easiest way: store everything as tuple of tuples. Is it ok for you?

Yeah yeah but it would be nice to not HAVE to copy stuff if we don't want to... I hate classes `T_T`

> It was badly implemented. You can cut the last loop on `t` quickly most of the time.

Isn't it possible to just fix that ?..

Nathann



---

archive/issue_comments_213649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-27T16:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213649",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213650.json:
```json
{
    "body": "Hi Nathann,\n\nEverything are now tuples of tuples. I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.\n\nVincent",
    "created_at": "2014-06-27T16:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213650",
    "user": "@videlec"
}
```

Hi Nathann,

Everything are now tuples of tuples. I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.

Vincent



---

archive/issue_comments_213651.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-27T16:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213651",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213652.json:
```json
{
    "body": "> Everything are now tuples of tuples.\n\nWHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? \n\nWhy not only what belongs to a mutable class or is cached ? \n\nThis does not maky ANY sense :\n\n\n```\nself._points = tuple(range(v))\n```\n\n\nWhy are you converting this to a tuple given that you created it yourself ? Nobody will change it !\n\n> I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.\n\nTell me where.\n\nNathann",
    "created_at": "2014-06-27T16:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213652",
    "user": "@nathanncohen"
}
```

> Everything are now tuples of tuples.

WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? 

Why not only what belongs to a mutable class or is cached ? 

This does not maky ANY sense :


```
self._points = tuple(range(v))
```


Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !

> I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.

Tell me where.

Nathann



---

archive/issue_comments_213653.json:
```json
{
    "body": "I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from comment:42.\n\nNathann",
    "created_at": "2014-06-27T16:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213653",
    "user": "@nathanncohen"
}
```

I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from comment:42.

Nathann



---

archive/issue_comments_213654.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-27T16:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213654",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213655.json:
```json
{
    "body": "Replying to [comment:49 ncohen]:\n> I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from comment:42.\n\nThis one is a `0-(4,0,3)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[],[],[]])\nsage: I.is_block_design()\n(False, [0, 0, 0, 0])\n```\n\nAnd this one is a `0-(4,1,2)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[0],[1]])\nsage: I.is_block_design()\nFalse\n```\n\nAnd this one is a `1-(4,1,1)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[0],[1],[2],[3]])\nsage: I.is_block_design()\n(False, [0, 0, 0, 0])\n```\n\n\nI broke it into several pieces in order to allow an argument `t` to the function. But I agree that comparing to the old version I can do much better with the degree stuff...\n\nVincent",
    "created_at": "2014-06-27T16:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213655",
    "user": "@videlec"
}
```

Replying to [comment:49 ncohen]:
> I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from comment:42.

This one is a `0-(4,0,3)` design

```
sage: I = IncidenceStructure(range(4), [[],[],[]])
sage: I.is_block_design()
(False, [0, 0, 0, 0])
```

And this one is a `0-(4,1,2)` design

```
sage: I = IncidenceStructure(range(4), [[0],[1]])
sage: I.is_block_design()
False
```

And this one is a `1-(4,1,1)` design

```
sage: I = IncidenceStructure(range(4), [[0],[1],[2],[3]])
sage: I.is_block_design()
(False, [0, 0, 0, 0])
```


I broke it into several pieces in order to allow an argument `t` to the function. But I agree that comparing to the old version I can do much better with the degree stuff...

Vincent



---

archive/issue_comments_213656.json:
```json
{
    "body": "Yo !\n\n> This one is a `0-(4,0,3)` design\n>\n> And this one is a `0-(4,1,2)` design\n>\n> And this one is a `1-(4,1,1)` design\n\n....\n\nWell, that's hardly a problem, is it ? Handling the trivial cases is usually done separately at the beginning of the function\n\n> I broke it into several pieces in order to allow an argument `t` to the function.\n....\n\nWhat about this ?..\n\n\n```\n-        for t in range(2,min(v,k+1)):\n+        for t in (range(2,min(v,k+1)) if t is None else [t]):\n```\n\n\nNathann",
    "created_at": "2014-06-27T16:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213656",
    "user": "@nathanncohen"
}
```

Yo !

> This one is a `0-(4,0,3)` design
>
> And this one is a `0-(4,1,2)` design
>
> And this one is a `1-(4,1,1)` design

....

Well, that's hardly a problem, is it ? Handling the trivial cases is usually done separately at the beginning of the function

> I broke it into several pieces in order to allow an argument `t` to the function.
....

What about this ?..


```
-        for t in range(2,min(v,k+1)):
+        for t in (range(2,min(v,k+1)) if t is None else [t]):
```


Nathann



---

archive/issue_comments_213657.json:
```json
{
    "body": "Replying to [comment:48 ncohen]:\n> > Everything are now tuples of tuples.\n> \n> WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? \n> \n> Why not only what belongs to a mutable class or is cached ? \n> \n> This does not maky ANY sense :\n> \n> {{{\n> self._points = tuple(range(v))\n> }}}\n> \n> Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !\n\nand then\n\n```\nsage: BD = designs.IncidenceStructure(4)\nsage: BD.points().append(19)\nsage: BD.points()\n[0, 1, 2, 3, 19]\n```\n\nShould we do a copy each time somebody asked for points?",
    "created_at": "2014-06-27T17:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213657",
    "user": "@videlec"
}
```

Replying to [comment:48 ncohen]:
> > Everything are now tuples of tuples.
> 
> WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? 
> 
> Why not only what belongs to a mutable class or is cached ? 
> 
> This does not maky ANY sense :
> 
> {{{
> self._points = tuple(range(v))
> }}}
> 
> Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !

and then

```
sage: BD = designs.IncidenceStructure(4)
sage: BD.points().append(19)
sage: BD.points()
[0, 1, 2, 3, 19]
```

Should we do a copy each time somebody asked for points?



---

archive/issue_comments_213658.json:
```json
{
    "body": "> and then\n> {{{\n> sage: BD = designs.IncidenceStructure(4)\n> sage: BD.points().append(19)\n> sage: BD.points()\n> [0, 1, 2, 3, 19]\n> }}}\n> Should we do a copy each time somebody asked for points?\n\nThat's hardly a problem if we do a copy for blocks anyway. Plus one can directly access `._points` to avoid that. But agreed, it's not a very bad problem anyway.\n\nNathann",
    "created_at": "2014-06-27T17:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213658",
    "user": "@nathanncohen"
}
```

> and then
> {{{
> sage: BD = designs.IncidenceStructure(4)
> sage: BD.points().append(19)
> sage: BD.points()
> [0, 1, 2, 3, 19]
> }}}
> Should we do a copy each time somebody asked for points?

That's hardly a problem if we do a copy for blocks anyway. Plus one can directly access `._points` to avoid that. But agreed, it's not a very bad problem anyway.

Nathann



---

archive/issue_comments_213659.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-27T17:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213659",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213660.json:
```json
{
    "body": "Hi Nathann,\n\nSorry, I was being stupid... With the last commit, it is back to normal.\n\nI still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n\n```\ndef make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n    ....\n```\n\nbut I prefer the current version. Better idea?\n\nEDIT: possibility, have only one parameter in `is_t_design`. But I think that it is very cool to have all of them available.\n\nVincent",
    "created_at": "2014-06-27T17:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213660",
    "user": "@videlec"
}
```

Hi Nathann,

Sorry, I was being stupid... With the last commit, it is back to normal.

I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":

```
def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
    ....
```

but I prefer the current version. Better idea?

EDIT: possibility, have only one parameter in `is_t_design`. But I think that it is very cool to have all of them available.

Vincent



---

archive/issue_comments_213661.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-27T17:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213661",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213662.json:
```json
{
    "body": "Hello !\n\n> I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n> {{{\n> def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n>     ....\n> }}}\n> but I prefer the current version. Better idea?\n\nWhat do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?\n\nIt would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?\n\nIt is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that \"t must be defined if lambda is defined\". I don't think anybody would complain.\n\nIt can be implemented anyway if needed, it will just be ugly.\n\nNathann",
    "created_at": "2014-06-27T17:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213662",
    "user": "@nathanncohen"
}
```

Hello !

> I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":
> {{{
> def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
>     ....
> }}}
> but I prefer the current version. Better idea?

What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?

It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?

It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that "t must be defined if lambda is defined". I don't think anybody would complain.

It can be implemented anyway if needed, it will just be ugly.

Nathann



---

archive/issue_comments_213663.json:
```json
{
    "body": "Replying to [comment:57 ncohen]:\n> Hello !\n> \n> > I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n> > {{{\n> > def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n> >     ....\n> > }}}\n> > but I prefer the current version. Better idea?\n> \n> What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?\n> It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?\n\nI would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n\n```\nif m.is_even():\n    print \"m is even\"\n```\n\nbad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n\n> It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that \"t must be defined if lambda is defined\". I don't think anybody would complain.\n> \n> It can be implemented anyway if needed, it will just be ugly.\n\nIt is implemented, not very ugly and not very useful!\n\nVincent",
    "created_at": "2014-06-27T17:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213663",
    "user": "@videlec"
}
```

Replying to [comment:57 ncohen]:
> Hello !
> 
> > I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":
> > {{{
> > def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
> >     ....
> > }}}
> > but I prefer the current version. Better idea?
> 
> What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?
> It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?

I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:

```
if m.is_even():
    print "m is even"
```

bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).

> It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that "t must be defined if lambda is defined". I don't think anybody would complain.
> 
> It can be implemented anyway if needed, it will just be ugly.

It is implemented, not very ugly and not very useful!

Vincent



---

archive/issue_comments_213664.json:
```json
{
    "body": "> I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n> {{{\n> if m.is_even():\n>     print \"m is even\"\n> }}}\n> bad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n\n`return_parameters=True`...\n\n> It is implemented, not very ugly and not very useful!\n\nWhat about all the stuff you converted to tuples ?..\n\nNathann",
    "created_at": "2014-06-27T17:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213664",
    "user": "@nathanncohen"
}
```

> I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:
> {{{
> if m.is_even():
>     print "m is even"
> }}}
> bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).

`return_parameters=True`...

> It is implemented, not very ugly and not very useful!

What about all the stuff you converted to tuples ?..

Nathann



---

archive/issue_comments_213665.json:
```json
{
    "body": "Replying to [comment:59 ncohen]:\n> > I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n> > {{{\n> > if m.is_even():\n> >     print \"m is even\"\n> > }}}\n> > bad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n> \n> `return_parameters=True`...\n> \n> > It is implemented, not very ugly and not very useful!\n> \n> What about all the stuff you converted to tuples ?..\n\nI do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n\nIf you want to propose some code, do it! I am lost!\n\nVincent",
    "created_at": "2014-06-27T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213665",
    "user": "@videlec"
}
```

Replying to [comment:59 ncohen]:
> > I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:
> > {{{
> > if m.is_even():
> >     print "m is even"
> > }}}
> > bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).
> 
> `return_parameters=True`...
> 
> > It is implemented, not very ugly and not very useful!
> 
> What about all the stuff you converted to tuples ?..

I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.

If you want to propose some code, do it! I am lost!

Vincent



---

archive/issue_comments_213666.json:
```json
{
    "body": "> I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n\nI never had anything again `return_parameters` flags `O_o`\n\nThat's what I always do when I need a test function which can also return useful information it already computed...\n\n> If you want to propose some code, do it! I am lost!\n\nAhahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???\n\nDo you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?\n\nNathann",
    "created_at": "2014-06-27T17:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213666",
    "user": "@nathanncohen"
}
```

> I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.

I never had anything again `return_parameters` flags `O_o`

That's what I always do when I need a test function which can also return useful information it already computed...

> If you want to propose some code, do it! I am lost!

Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???

Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?

Nathann



---

archive/issue_comments_213667.json:
```json
{
    "body": "Replying to [comment:61 ncohen]:\n> > I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n> \n> I never had anything again `return_parameters` flags `O_o`\n> \n> That's what I always do when I need a test function which can also return useful information it already computed...\n> \n> > If you want to propose some code, do it! I am lost!\n> \n> Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???\n> \n> Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?\n\nfine.",
    "created_at": "2014-06-27T17:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213667",
    "user": "@videlec"
}
```

Replying to [comment:61 ncohen]:
> > I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.
> 
> I never had anything again `return_parameters` flags `O_o`
> 
> That's what I always do when I need a test function which can also return useful information it already computed...
> 
> > If you want to propose some code, do it! I am lost!
> 
> Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???
> 
> Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?

fine.



---

archive/issue_comments_213668.json:
```json
{
    "body": "> fine.\n\nIt is located at `public/16553v2`\n\nNathann",
    "created_at": "2014-06-27T18:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213668",
    "user": "@nathanncohen"
}
```

> fine.

It is located at `public/16553v2`

Nathann



---

archive/issue_comments_213669.json:
```json
{
    "body": "Replying to [comment:63 ncohen]:\n> > fine.\n> \n> It is located at `public/16553v2`\n\nThanks. What should we do for `is_t_design`?",
    "created_at": "2014-06-27T18:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213669",
    "user": "@videlec"
}
```

Replying to [comment:63 ncohen]:
> > fine.
> 
> It is located at `public/16553v2`

Thanks. What should we do for `is_t_design`?



---

archive/issue_comments_213670.json:
```json
{
    "body": "> Thanks. What should we do for `is_t_design`?\n\nWell the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?\n\nAlso, what about all the tuple stuff ? I think I asked this question 3 times already.\n\nNathann",
    "created_at": "2014-06-27T18:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213670",
    "user": "@nathanncohen"
}
```

> Thanks. What should we do for `is_t_design`?

Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?

Also, what about all the tuple stuff ? I think I asked this question 3 times already.

Nathann



---

archive/issue_comments_213671.json:
```json
{
    "body": "Replying to [comment:65 ncohen]:\n> > Thanks. What should we do for `is_t_design`?\n> \n> Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?\n\nHmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.\n\n> Also, what about all the tuple stuff ? I think I asked this question 3 times already.\n\nYes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?\n\nVincent",
    "created_at": "2014-06-27T18:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213671",
    "user": "@videlec"
}
```

Replying to [comment:65 ncohen]:
> > Thanks. What should we do for `is_t_design`?
> 
> Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?

Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.

> Also, what about all the tuple stuff ? I think I asked this question 3 times already.

Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?

Vincent



---

archive/issue_comments_213672.json:
```json
{
    "body": "> Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.\n\nOkay I will give it a try then.\n\n> Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?\n\nAbout  incomplete_orthogonal_array` and steiner triple systems, for instance ?...\n\nNathann",
    "created_at": "2014-06-27T18:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213672",
    "user": "@nathanncohen"
}
```

> Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.

Okay I will give it a try then.

> Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?

About  incomplete_orthogonal_array` and steiner triple systems, for instance ?...

Nathann



---

archive/issue_comments_213673.json:
```json
{
    "body": "Oh, steiner triple systems are probably incidence structures already, so that's okay.\n\nNathann",
    "created_at": "2014-06-27T18:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213673",
    "user": "@nathanncohen"
}
```

Oh, steiner triple systems are probably incidence structures already, so that's okay.

Nathann



---

archive/issue_comments_213674.json:
```json
{
    "body": "BTW I am working on the `is_t_design` function right now.\n\nNathann",
    "created_at": "2014-06-27T18:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213674",
    "user": "@nathanncohen"
}
```

BTW I am working on the `is_t_design` function right now.

Nathann



---

archive/issue_comments_213675.json:
```json
{
    "body": "Replying to [comment:69 ncohen]:\n> BTW I am working on the `is_t_design` function right now.\n\nYes. This is what I understod and I am working on #16535",
    "created_at": "2014-06-27T18:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213675",
    "user": "@videlec"
}
```

Replying to [comment:69 ncohen]:
> BTW I am working on the `is_t_design` function right now.

Yes. This is what I understod and I am working on #16535



---

archive/issue_comments_213676.json:
```json
{
    "body": "DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?\n\nI'm removing all this t=0,1 shit. t>=2.\n\nNathann",
    "created_at": "2014-06-27T19:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213676",
    "user": "@nathanncohen"
}
```

DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?

I'm removing all this t=0,1 shit. t>=2.

Nathann



---

archive/issue_comments_213677.json:
```json
{
    "body": "Replying to [comment:71 ncohen]:\n> DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?\n> \n> I'm removing all this t=0,1 shit. t>=2.\n\nAll right.\n\nVincent",
    "created_at": "2014-06-27T19:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213677",
    "user": "@videlec"
}
```

Replying to [comment:71 ncohen]:
> DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?
> 
> I'm removing all this t=0,1 shit. t>=2.

All right.

Vincent



---

archive/issue_comments_213678.json:
```json
{
    "body": "The code at `public/16553v2` works for all cases. Et ca m'a completement niqu\u00e9 la soir\u00e9e. Deux heures a me payer des cas de merde de t=0 et t=1 dont tout le monde se branle.\n\nNathann",
    "created_at": "2014-06-27T20:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213678",
    "user": "@nathanncohen"
}
```

The code at `public/16553v2` works for all cases. Et ca m'a completement niqué la soirée. Deux heures a me payer des cas de merde de t=0 et t=1 dont tout le monde se branle.

Nathann



---

archive/issue_comments_213679.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-06-27T20:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213679",
    "user": "@nathanncohen"
}
```

New commits:



---

archive/issue_comments_213680.json:
```json
{
    "body": "Okay, three questions :\n\n- Should BlockDesign be deprecated ?\n- is `self._degrees_cache` used anywhere ? If not, remove it\n- `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix\n- `is_simple()` does not work when the input is not copied and not necessarily sorted.\n\nNathann",
    "created_at": "2014-06-27T20:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213680",
    "user": "@nathanncohen"
}
```

Okay, three questions :

- Should BlockDesign be deprecated ?
- is `self._degrees_cache` used anywhere ? If not, remove it
- `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix
- `is_simple()` does not work when the input is not copied and not necessarily sorted.

Nathann



---

archive/issue_comments_213681.json:
```json
{
    "body": "I will add commit to remove ten lines I had forgotten to remove in my last commit.\n\nNathann",
    "created_at": "2014-06-27T20:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213681",
    "user": "@nathanncohen"
}
```

I will add commit to remove ten lines I had forgotten to remove in my last commit.

Nathann



---

archive/issue_comments_213682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-27T20:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213682",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213683.json:
```json
{
    "body": "And of course you need to review my code too.\n\nNathann",
    "created_at": "2014-06-27T20:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213683",
    "user": "@nathanncohen"
}
```

And of course you need to review my code too.

Nathann



---

archive/issue_comments_213684.json:
```json
{
    "body": "Replying to [comment:75 ncohen]:\n> Okay, three questions :\n> \n> - Should BlockDesign be deprecated ?\n\nIt is cool to have as an alias for incidence structure. If you find confusing to have an alias, then yes we should deprecate it.\n\n> - is `self._degrees_cache` used anywhere ? If not, remove it\n\nNot anymore. I will.\n\n> - `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix\n\nYes, because of the reordering of the columns. But we can avoid reordering the columns and keep the matrix. But then, matrices are mutable... hopefully, we can do `m.set_immutable()` as soon as we use it.\n\n> - `is_simple()` does not work when the input is not copied and not necessarily sorted.\n\nAnd the implementation is stupid, if the blocks are sorted, one would do\n\n```\nB = self._blocks\nreturn any(B[i] == B[i+1] for i in xrange(len(B)-1))\n```\n\n\n\nAnd... Haaaa.... it is very bad to reorder the blocks:\n\n```\nsage: D = designs.IncidenceStructure(2, [[0]])\nsage: D == D.dual().dual()\nFalse\n```\n\nTaking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n\nVincent",
    "created_at": "2014-06-27T20:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213684",
    "user": "@videlec"
}
```

Replying to [comment:75 ncohen]:
> Okay, three questions :
> 
> - Should BlockDesign be deprecated ?

It is cool to have as an alias for incidence structure. If you find confusing to have an alias, then yes we should deprecate it.

> - is `self._degrees_cache` used anywhere ? If not, remove it

Not anymore. I will.

> - `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix

Yes, because of the reordering of the columns. But we can avoid reordering the columns and keep the matrix. But then, matrices are mutable... hopefully, we can do `m.set_immutable()` as soon as we use it.

> - `is_simple()` does not work when the input is not copied and not necessarily sorted.

And the implementation is stupid, if the blocks are sorted, one would do

```
B = self._blocks
return any(B[i] == B[i+1] for i in xrange(len(B)-1))
```



And... Haaaa.... it is very bad to reorder the blocks:

```
sage: D = designs.IncidenceStructure(2, [[0]])
sage: D == D.dual().dual()
False
```

Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")

Vincent



---

archive/issue_comments_213685.json:
```json
{
    "body": "Yo !\n\n> Yes, because of the reordering of the columns.\n\nOk !\n\n> And the implementation is stupid, if the blocks are sorted, one would do\nYep.\n\n> And... Haaaa.... it is very bad to reorder the blocks:\n> Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n\nYou should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.\n\nAccept that.\n\nNathann",
    "created_at": "2014-06-27T21:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213685",
    "user": "@nathanncohen"
}
```

Yo !

> Yes, because of the reordering of the columns.

Ok !

> And the implementation is stupid, if the blocks are sorted, one would do
Yep.

> And... Haaaa.... it is very bad to reorder the blocks:
> Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")

You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.

Accept that.

Nathann



---

archive/issue_comments_213686.json:
```json
{
    "body": "Replying to [comment:80 ncohen]:\n> Yo !\n> \n> > Yes, because of the reordering of the columns.\n> \n> Ok !\n> \n> > And the implementation is stupid, if the blocks are sorted, one would do\n> Yep.\n> \n> > And... Haaaa.... it is very bad to reorder the blocks:\n> > Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n> \n> You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.\n> \n> Accept that.\n\nNo. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)! But, for the sake of that ticket let say that I do accept that.",
    "created_at": "2014-06-27T21:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213686",
    "user": "@videlec"
}
```

Replying to [comment:80 ncohen]:
> Yo !
> 
> > Yes, because of the reordering of the columns.
> 
> Ok !
> 
> > And the implementation is stupid, if the blocks are sorted, one would do
> Yep.
> 
> > And... Haaaa.... it is very bad to reorder the blocks:
> > Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")
> 
> You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.
> 
> Accept that.

No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)! But, for the sake of that ticket let say that I do accept that.



---

archive/issue_comments_213687.json:
```json
{
    "body": "> No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)!\n\nMathematicians in book say \"let us take a bijection between two things\". But they are the same guys who, in front of the computer, want their vertices to be correctly labelled.\n\n> But, for the sake of that ticket let say that I do accept that.\n\nExcellent ! `:-P`\n\nNathann",
    "created_at": "2014-06-27T21:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213687",
    "user": "@nathanncohen"
}
```

> No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)!

Mathematicians in book say "let us take a bijection between two things". But they are the same guys who, in front of the computer, want their vertices to be correctly labelled.

> But, for the sake of that ticket let say that I do accept that.

Excellent ! `:-P`

Nathann



---

archive/issue_comments_213688.json:
```json
{
    "body": "By the way we will have an `IncidenceStructure.relabel` function someday.",
    "created_at": "2014-06-28T08:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213688",
    "user": "@nathanncohen"
}
```

By the way we will have an `IncidenceStructure.relabel` function someday.



---

archive/issue_comments_213689.json:
```json
{
    "body": "By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?\n\nNathann",
    "created_at": "2014-06-28T08:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213689",
    "user": "@nathanncohen"
}
```

By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?

Nathann



---

archive/issue_comments_213690.json:
```json
{
    "body": "Replying to [comment:84 ncohen]:\n> By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?\n\nDoes not work.\n\nAre you done with your changes?",
    "created_at": "2014-06-28T08:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213690",
    "user": "@videlec"
}
```

Replying to [comment:84 ncohen]:
> By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?

Does not work.

Are you done with your changes?



---

archive/issue_comments_213691.json:
```json
{
    "body": "> Does not work.\nI see.\n\n> Are you done with your changes?\n\nWhich changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?\n\nNathann",
    "created_at": "2014-06-28T08:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213691",
    "user": "@nathanncohen"
}
```

> Does not work.
I see.

> Are you done with your changes?

Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?

Nathann



---

archive/issue_comments_213692.json:
```json
{
    "body": "Replying to [comment:86 ncohen]:\n> > Does not work.\n> I see.\n> \n> > Are you done with your changes?\n> \n> Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?\n\nBut Sage does not start. Is that what you want?\n\nI will start from where it is!\n\nVincent",
    "created_at": "2014-06-28T08:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213692",
    "user": "@videlec"
}
```

Replying to [comment:86 ncohen]:
> > Does not work.
> I see.
> 
> > Are you done with your changes?
> 
> Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?

But Sage does not start. Is that what you want?

I will start from where it is!

Vincent



---

archive/issue_comments_213693.json:
```json
{
    "body": "Arg. I hadn't noticed that `_t_design_parameters` was an alias of something\n\n\n```\n parameters = deprecated_function_alias(16553, _t_design_parameters)\n```\n\n\nNathann",
    "created_at": "2014-06-28T08:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213693",
    "user": "@nathanncohen"
}
```

Arg. I hadn't noticed that `_t_design_parameters` was an alias of something


```
 parameters = deprecated_function_alias(16553, _t_design_parameters)
```


Nathann



---

archive/issue_comments_213694.json:
```json
{
    "body": "I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?\n\nNathann",
    "created_at": "2014-06-28T08:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213694",
    "user": "@nathanncohen"
}
```

I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?

Nathann



---

archive/issue_comments_213695.json:
```json
{
    "body": "Replying to [comment:90 ncohen]:\n> I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?\n\nYes. I started again working on it.",
    "created_at": "2014-06-28T08:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213695",
    "user": "@videlec"
}
```

Replying to [comment:90 ncohen]:
> I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?

Yes. I started again working on it.



---

archive/issue_comments_213696.json:
```json
{
    "body": "Okay. I was about to copy/paste the old `parameters` function and deprecate it.\n\nNathann",
    "created_at": "2014-06-28T09:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213696",
    "user": "@nathanncohen"
}
```

Okay. I was about to copy/paste the old `parameters` function and deprecate it.

Nathann



---

archive/issue_comments_213697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-28T09:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213697",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213698.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-28T09:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213698",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213699.json:
```json
{
    "body": "HMmm... You can't make equality depend on the ordering of the blocks.. Perhaps this copy=True on input is not very easy to work with `:-/`\n\nNathann",
    "created_at": "2014-06-28T09:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213699",
    "user": "@nathanncohen"
}
```

HMmm... You can't make equality depend on the ordering of the blocks.. Perhaps this copy=True on input is not very easy to work with `:-/`

Nathann



---

archive/issue_comments_213700.json:
```json
{
    "body": "Also, I wonder if it is a good idea to store the \"labelled blocks\" or if we should work with blocks on `0,...,n-1` and have dictionary to translate stuff when needed.. `O_o`\n\nI have been bitten once or twice by the time it took to hash vertex labels in graphs `-_-`\n\nNathann",
    "created_at": "2014-06-28T10:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213700",
    "user": "@nathanncohen"
}
```

Also, I wonder if it is a good idea to store the "labelled blocks" or if we should work with blocks on `0,...,n-1` and have dictionary to translate stuff when needed.. `O_o`

I have been bitten once or twice by the time it took to hash vertex labels in graphs `-_-`

Nathann



---

archive/issue_comments_213701.json:
```json
{
    "body": "Also, you can't sort something that you did not create yourself. If the \"labels\" on the points are something like sets (i.e. not totally ordered) then you can't assume that blocks are totally ordered either, and so you can't sort them either.\n\nNathann",
    "created_at": "2014-06-28T10:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213701",
    "user": "@nathanncohen"
}
```

Also, you can't sort something that you did not create yourself. If the "labels" on the points are something like sets (i.e. not totally ordered) then you can't assume that blocks are totally ordered either, and so you can't sort them either.

Nathann



---

archive/issue_comments_213702.json:
```json
{
    "body": "- It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n- For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n\n```\ndef _nonzero_positions_by_row(self, copy=True)\ndef _nonzero_positions_by_column(self, copy=True)\n```\n\nIt is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n\nWhat do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n\nVincent",
    "created_at": "2014-06-28T10:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213702",
    "user": "@videlec"
}
```

- It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.
- For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods

```
def _nonzero_positions_by_row(self, copy=True)
def _nonzero_positions_by_column(self, copy=True)
```

It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.

What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.

Vincent



---

archive/issue_comments_213703.json:
```json
{
    "body": "Yo !\n\n> - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n\n+1\n\n> - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n> {{{\n> def _nonzero_positions_by_row(self, copy=True)\n> def _nonzero_positions_by_column(self, copy=True)\n> }}}\n> It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n> \n> What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n\nI don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..\n\nThe best data structure for this is a bipartite graph, isn't it ?\n\nBut even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...\n\nWhat do you think ?\n\nNathann\n\nNathann",
    "created_at": "2014-06-28T10:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213703",
    "user": "@nathanncohen"
}
```

Yo !

> - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.

+1

> - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods
> {{{
> def _nonzero_positions_by_row(self, copy=True)
> def _nonzero_positions_by_column(self, copy=True)
> }}}
> It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.
> 
> What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.

I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..

The best data structure for this is a bipartite graph, isn't it ?

But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...

What do you think ?

Nathann

Nathann



---

archive/issue_comments_213704.json:
```json
{
    "body": "Replying to [comment:99 ncohen]:\n> Yo !\n> \n> > - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n> \n> +1\n> \n> > - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n> > {{{\n> > def _nonzero_positions_by_row(self, copy=True)\n> > def _nonzero_positions_by_column(self, copy=True)\n> > }}}\n> > It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n> > \n> > What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n> \n> I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..\n\nRight.\n\n> The best data structure for this is a bipartite graph, isn't it ?\n\nIt is the same as a binary matrix...\n\n> But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...\n> \n> What do you think ?\n\nTrue, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?\n\nVincent",
    "created_at": "2014-06-28T10:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213704",
    "user": "@videlec"
}
```

Replying to [comment:99 ncohen]:
> Yo !
> 
> > - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.
> 
> +1
> 
> > - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods
> > {{{
> > def _nonzero_positions_by_row(self, copy=True)
> > def _nonzero_positions_by_column(self, copy=True)
> > }}}
> > It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.
> > 
> > What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.
> 
> I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..

Right.

> The best data structure for this is a bipartite graph, isn't it ?

It is the same as a binary matrix...

> But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...
> 
> What do you think ?

True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?

Vincent



---

archive/issue_comments_213705.json:
```json
{
    "body": "Yo !\n\n> It is the same as a binary matrix...\n\nNot exactly. But anyway, a binary matrix is meant to be binary, while a Matrix isn't as far as I know.\n\n> True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?\n\nWhat is the problem ? If you translate the input to 0,...,n-1 anyway we never have any reason to accept what the users gives us without a copy, do we ? And so you can sort it as you want, given that it is your data and that you will never give it as it is to anybody else.\n\nNathann",
    "created_at": "2014-06-28T10:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213705",
    "user": "@nathanncohen"
}
```

Yo !

> It is the same as a binary matrix...

Not exactly. But anyway, a binary matrix is meant to be binary, while a Matrix isn't as far as I know.

> True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?

What is the problem ? If you translate the input to 0,...,n-1 anyway we never have any reason to accept what the users gives us without a copy, do we ? And so you can sort it as you want, given that it is your data and that you will never give it as it is to anybody else.

Nathann



---

archive/issue_comments_213706.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-28T16:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213706",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-28T16:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213707",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213708.json:
```json
{
    "body": "All right,\n\nNow: \n- `._points` are the points\n- `._point_index` might be `None` or a correspondence between point and integers\n- `._blocks` is a sorted tuple of sorted blocks on {0, ..., v-1}\n(It is explained in the documentation)\n\nI also removed all other hidden attributes. All doctest pass, and doc builds.\n\n... needs review!\n\nVincent",
    "created_at": "2014-06-28T16:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213708",
    "user": "@videlec"
}
```

All right,

Now: 
- `._points` are the points
- `._point_index` might be `None` or a correspondence between point and integers
- `._blocks` is a sorted tuple of sorted blocks on {0, ..., v-1}
(It is explained in the documentation)

I also removed all other hidden attributes. All doctest pass, and doc builds.

... needs review!

Vincent



---

archive/issue_comments_213709.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-28T16:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213709",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213710.json:
```json
{
    "body": "PS: I slightly modified your commit since it broke the documentation.",
    "created_at": "2014-06-28T16:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213710",
    "user": "@videlec"
}
```

PS: I slightly modified your commit since it broke the documentation.



---

archive/issue_comments_213711.json:
```json
{
    "body": "....................\n\nAnd how the hell am I supposed to see the differences ?\n\nNathann",
    "created_at": "2014-06-28T16:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213711",
    "user": "@nathanncohen"
}
```

....................

And how the hell am I supposed to see the differences ?

Nathann



---

archive/issue_comments_213712.json:
```json
{
    "body": "\n```\ngit diff 9be78f42a2e26008661462f6db66b5646849ee76 \\\n         0741a69bb10de397690869ad98140e085ddab994\n```\n",
    "created_at": "2014-06-28T16:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213712",
    "user": "@videlec"
}
```


```
git diff 9be78f42a2e26008661462f6db66b5646849ee76 \
         0741a69bb10de397690869ad98140e085ddab994
```




---

archive/issue_comments_213713.json:
```json
{
    "body": "> {{{\n> git diff 9be78f42a2e26008661462f6db66b5646849ee76 0741a69bb10de397690869ad98140e085ddab994\n> }}}\n\nGood. Use that to produce a third commit.\n\nNathann",
    "created_at": "2014-06-28T16:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213713",
    "user": "@nathanncohen"
}
```

> {{{
> git diff 9be78f42a2e26008661462f6db66b5646849ee76 0741a69bb10de397690869ad98140e085ddab994
> }}}

Good. Use that to produce a third commit.

Nathann



---

archive/issue_comments_213714.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-28T16:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213714",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213715.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-28T16:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213715",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213716.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-28T16:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213716",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213717.json:
```json
{
    "body": "Thanks",
    "created_at": "2014-06-28T16:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213717",
    "user": "@nathanncohen"
}
```

Thanks



---

archive/issue_comments_213718.json:
```json
{
    "body": "What about comment:95 ? If you make equality depend on the ordering, it may be broken when `copy=False`...",
    "created_at": "2014-06-28T16:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213718",
    "user": "@nathanncohen"
}
```

What about comment:95 ? If you make equality depend on the ordering, it may be broken when `copy=False`...



---

archive/issue_comments_213719.json:
```json
{
    "body": "I would say that the best is to sort the input even when `copy=False`, what do you think ? With a warning in the documentation of the `copy` argument of course, saying that the list/blocks will be reordered (and that the user should not touch that) ?...\n\nThis being said, the way equality is written it will still return false negatives as `[1,2,3] != (1,2,3)` ...\n\nNathann",
    "created_at": "2014-06-28T16:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213719",
    "user": "@nathanncohen"
}
```

I would say that the best is to sort the input even when `copy=False`, what do you think ? With a warning in the documentation of the `copy` argument of course, saying that the list/blocks will be reordered (and that the user should not touch that) ?...

This being said, the way equality is written it will still return false negatives as `[1,2,3] != (1,2,3)` ...

Nathann



---

archive/issue_comments_213720.json:
```json
{
    "body": "Oh, you removed \"copy\" in the next commit ....",
    "created_at": "2014-06-28T16:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213720",
    "user": "@nathanncohen"
}
```

Oh, you removed "copy" in the next commit ....



---

archive/issue_comments_213721.json:
```json
{
    "body": "You add documentation for \"copy\" in the first commit, and remove it in the next.. This is really pleasant to review ...\n\nNathann",
    "created_at": "2014-06-28T16:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213721",
    "user": "@nathanncohen"
}
```

You add documentation for "copy" in the first commit, and remove it in the next.. This is really pleasant to review ...

Nathann



---

archive/issue_comments_213722.json:
```json
{
    "body": "comment:97\n\n\n```\nsage: a = Set([1,2]); b = Set([3,4])\nsage: IncidenceStructure([a,b],[]) == IncidenceStructure([b,a],[])\nFalse\n```\n",
    "created_at": "2014-06-28T17:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213722",
    "user": "@nathanncohen"
}
```

comment:97


```
sage: a = Set([1,2]); b = Set([3,4])
sage: IncidenceStructure([a,b],[]) == IncidenceStructure([b,a],[])
False
```




---

archive/issue_comments_213723.json:
```json
{
    "body": "Short of those comments it looks good !!\n\nTwo questions:\n\n- What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?\n\n- Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?\n\nToo bad that it is not very easy to have everything work with a \"copy\" argument `:-/`\n\nNathann",
    "created_at": "2014-06-28T17:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213723",
    "user": "@nathanncohen"
}
```

Short of those comments it looks good !!

Two questions:

- What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?

- Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?

Too bad that it is not very easy to have everything work with a "copy" argument `:-/`

Nathann



---

archive/issue_comments_213724.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-28T17:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213724",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213725.json:
```json
{
    "body": "about [comment:116]/[comment:97] and non-ordered stuff:\n- one possibility: we can avoid sorting the ground set and consider `[0,1,2]`, and `[2,0,1]` as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?\n\nabout [comment:117]:\n> - What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?\n\nno problem.\n \n> - Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?\n\nYou are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:\n\n```\ndef block_sizes(self):\n    self._block_sizes = map(len, self.blocks())\n    return self._block_sizes\n```\n\n\n> Too bad that it is not very easy to have everything work with a \"copy\" argument `:-/`\n\nAll right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n\nNot for this ticket\n- right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...",
    "created_at": "2014-06-28T17:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213725",
    "user": "@videlec"
}
```

about [comment:116]/[comment:97] and non-ordered stuff:
- one possibility: we can avoid sorting the ground set and consider `[0,1,2]`, and `[2,0,1]` as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?

about [comment:117]:
> - What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?

no problem.
 
> - Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?

You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:

```
def block_sizes(self):
    self._block_sizes = map(len, self.blocks())
    return self._block_sizes
```


> Too bad that it is not very easy to have everything work with a "copy" argument `:-/`

All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.

Not for this ticket
- right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...



---

archive/issue_comments_213726.json:
```json
{
    "body": "Yo !\n\n> - one possibility: we can avoid sorting the ground set and consider [0,1,2], and [2,0,1] as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?\n\nNOnonono, saying that the order of the vertices matters for equality really isn't what one would expect ! But it isn't so bad to make equality test slower, is it ? I mean, does anybody use it for anything ? I wonder why such methods are even defined...\n\nJust to play it safe, we can rewrite this to relabel+convert to set the blocks of self and other before comparing them. It is slow but it is correct, and we can change the data structure later if it becomes a problem. Or use graphs as a data structure, as they do that already `:-PPP`\n\nI don't mind not having an equality test, but if there is one I want to be sure that it works as expected. Because otherwise I cannot complain constantly about #14019, and that's important to me `:-P`\n\n> You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:\n> {{{\n> def block_sizes(self):\n>     self._block_sizes = map(len, self.blocks())\n>     return self._block_sizes\n> }}}\n\nGNIiiiiiiiiiiiiiiiiiii `>_<`\n\n> All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n\nWhat we can do is something like \"set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing\".\n\n> - right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...\n\nAhahahaah. Yeah.... Like a bipartite graph ? `:-P`\n\nNathann",
    "created_at": "2014-06-28T18:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213726",
    "user": "@nathanncohen"
}
```

Yo !

> - one possibility: we can avoid sorting the ground set and consider [0,1,2], and [2,0,1] as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?

NOnonono, saying that the order of the vertices matters for equality really isn't what one would expect ! But it isn't so bad to make equality test slower, is it ? I mean, does anybody use it for anything ? I wonder why such methods are even defined...

Just to play it safe, we can rewrite this to relabel+convert to set the blocks of self and other before comparing them. It is slow but it is correct, and we can change the data structure later if it becomes a problem. Or use graphs as a data structure, as they do that already `:-PPP`

I don't mind not having an equality test, but if there is one I want to be sure that it works as expected. Because otherwise I cannot complain constantly about #14019, and that's important to me `:-P`

> You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:
> {{{
> def block_sizes(self):
>     self._block_sizes = map(len, self.blocks())
>     return self._block_sizes
> }}}

GNIiiiiiiiiiiiiiiiiiii `>_<`

> All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.

What we can do is something like "set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing".

> - right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...

Ahahahaah. Yeah.... Like a bipartite graph ? `:-P`

Nathann



---

archive/issue_comments_213727.json:
```json
{
    "body": "Why aren't we using bipartite graph?\n\nReplying to [comment:119 ncohen]:\n> > All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n> \n> What we can do is something like \"set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing\".\n\nCould you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?\n\nVincent",
    "created_at": "2014-06-28T18:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213727",
    "user": "@videlec"
}
```

Why aren't we using bipartite graph?

Replying to [comment:119 ncohen]:
> > All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.
> 
> What we can do is something like "set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing".

Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?

Vincent



---

archive/issue_comments_213728.json:
```json
{
    "body": "> Why aren't we using bipartite graph?\n\nBecause I hate complicated data structure `T_T`\n\nI love lists.\n\n> Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?\n\nOh. I thought that we could store lists of lists in this case. I just hate tuple. Knowing that you have to copy the whole data (a list) to make it immutable (a tupple) horrifies me already.\n\nNathann",
    "created_at": "2014-06-28T18:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213728",
    "user": "@nathanncohen"
}
```

> Why aren't we using bipartite graph?

Because I hate complicated data structure `T_T`

I love lists.

> Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?

Oh. I thought that we could store lists of lists in this case. I just hate tuple. Knowing that you have to copy the whole data (a list) to make it immutable (a tupple) horrifies me already.

Nathann



---

archive/issue_comments_213729.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-28T19:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213729",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213730.json:
```json
{
    "body": "All right, the commit message says it all. I also fixed the issue you mentioned.\n\nNeeds review!\n\nVincent",
    "created_at": "2014-06-28T19:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213730",
    "user": "@videlec"
}
```

All right, the commit message says it all. I also fixed the issue you mentioned.

Needs review!

Vincent



---

archive/issue_comments_213731.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-28T19:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213731",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213732.json:
```json
{
    "body": "HMmmmmmmm...\n\nWell, I'd say that it is good `O_O`\n\nAnother pass on the whole branch, and then ...\n\nNathann",
    "created_at": "2014-06-28T20:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213732",
    "user": "@nathanncohen"
}
```

HMmmmmmmm...

Well, I'd say that it is good `O_O`

Another pass on the whole branch, and then ...

Nathann



---

archive/issue_comments_213733.json:
```json
{
    "body": "Yo !\n\nIf you agree with this additional commit, you can switch to `positive_review` !\n\nNathann",
    "created_at": "2014-06-28T20:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213733",
    "user": "@nathanncohen"
}
```

Yo !

If you agree with this additional commit, you can switch to `positive_review` !

Nathann



---

archive/issue_comments_213734.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-28T20:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213734",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213735.json:
```json
{
    "body": "Great!!\n\nShould I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?",
    "created_at": "2014-06-28T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213735",
    "user": "@videlec"
}
```

Great!!

Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?



---

archive/issue_comments_213736.json:
```json
{
    "body": "> Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?\n\nWhat for ? `O_o`\n\nNathann",
    "created_at": "2014-06-28T21:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213736",
    "user": "@nathanncohen"
}
```

> Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?

What for ? `O_o`

Nathann



---

archive/issue_comments_213737.json:
```json
{
    "body": "Replying to [comment:128 ncohen]:\n> > Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?\n> \n> What for ? `O_o`\n\n- improve my skills with git rebase\n- have `git blame` do better job\n- simplification",
    "created_at": "2014-06-28T21:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213737",
    "user": "@videlec"
}
```

Replying to [comment:128 ncohen]:
> > Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?
> 
> What for ? `O_o`

- improve my skills with git rebase
- have `git blame` do better job
- simplification



---

archive/issue_comments_213738.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-28T23:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213738",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213739.json:
```json
{
    "body": "Same diff, better history... so I guess it is better.\n----\nLast 10 new commits:",
    "created_at": "2014-06-28T23:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213739",
    "user": "@videlec"
}
```

Same diff, better history... so I guess it is better.
----
Last 10 new commits:



---

archive/issue_comments_213740.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-06-29T01:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213740",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_213741.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/matroids/catalog.py\n**********************************************************************\nFile \"src/sage/matroids/catalog.py\", line 1349, in sage.matroids.catalog.Block_9_4\nFailed example:\n    BlockDesign(9, B).is_block_design()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.matroids.catalog.Block_9_4[5]>\", line 1, in <module>\n        BlockDesign(Integer(9), B).is_block_design()\n    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'\n**********************************************************************\nFile \"src/sage/matroids/catalog.py\", line 1376, in sage.matroids.catalog.Block_10_5\nFailed example:\n    BlockDesign(10, B).is_block_design()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.matroids.catalog.Block_10_5[5]>\", line 1, in <module>\n        BlockDesign(Integer(10), B).is_block_design()\n    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'\n**********************************************************************\n```\n",
    "created_at": "2014-06-29T01:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213741",
    "user": "@vbraun"
}
```


```
sage -t --long src/sage/matroids/catalog.py
**********************************************************************
File "src/sage/matroids/catalog.py", line 1349, in sage.matroids.catalog.Block_9_4
Failed example:
    BlockDesign(9, B).is_block_design()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.matroids.catalog.Block_9_4[5]>", line 1, in <module>
        BlockDesign(Integer(9), B).is_block_design()
    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'
**********************************************************************
File "src/sage/matroids/catalog.py", line 1376, in sage.matroids.catalog.Block_10_5
Failed example:
    BlockDesign(10, B).is_block_design()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.matroids.catalog.Block_10_5[5]>", line 1, in <module>
        BlockDesign(Integer(10), B).is_block_design()
    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'
**********************************************************************
```




---

archive/issue_comments_213742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-29T10:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213742",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213743.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-29T10:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213743",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-29T10:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213744",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213745.json:
```json
{
    "body": "All right, final review needed!\n\nVincent",
    "created_at": "2014-06-29T10:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213745",
    "user": "@videlec"
}
```

All right, final review needed!

Vincent



---

archive/issue_comments_213746.json:
```json
{
    "body": "Funny. I would have expected `.points()` to appear more often in the code `:-)`\n\nNathann",
    "created_at": "2014-06-29T17:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213746",
    "user": "@nathanncohen"
}
```

Funny. I would have expected `.points()` to appear more often in the code `:-)`

Nathann



---

archive/issue_comments_213747.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-29T19:24:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213747",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213748.json:
```json
{
    "body": "make ptestlong + make doc-clean + make doc + make doc-pdf.\n\nAnd the latter failed during \"a tour of Sage' but that's only because other documents always require one thousand different languages to be installed I believe.\n\nGood !\n\nNathann",
    "created_at": "2014-06-29T19:24:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213748",
    "user": "@nathanncohen"
}
```

make ptestlong + make doc-clean + make doc + make doc-pdf.

And the latter failed during "a tour of Sage' but that's only because other documents always require one thousand different languages to be installed I believe.

Good !

Nathann



---

archive/issue_comments_213749.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-06-30T05:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213749",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_213750.json:
```json
{
    "body": "There is another .points that was introduced in #16535",
    "created_at": "2014-06-30T05:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213750",
    "user": "@vbraun"
}
```

There is another .points that was introduced in #16535



---

archive/issue_comments_213751.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-01T07:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213751",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213752.json:
```json
{
    "body": "Needs review!\n\nVincent",
    "created_at": "2014-07-01T07:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213752",
    "user": "@videlec"
}
```

Needs review!

Vincent



---

archive/issue_comments_213753.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-01T07:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213753",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213754.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-01T07:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213754",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213755.json:
```json
{
    "body": "apparently it does not apply on the latest release, the branch name's in red. Instead of merging tickets you should go back to `trac #16553v3: change .points() -> .ground_set()` and merge with beta5.\n\nNathann",
    "created_at": "2014-07-01T07:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213755",
    "user": "@nathanncohen"
}
```

apparently it does not apply on the latest release, the branch name's in red. Instead of merging tickets you should go back to `trac #16553v3: change .points() -> .ground_set()` and merge with beta5.

Nathann



---

archive/issue_comments_213756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-07-01T08:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213756",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213757.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-01T08:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213757",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213758.json:
```json
{
    "body": "For the tenth time ...",
    "created_at": "2014-07-01T08:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213758",
    "user": "@nathanncohen"
}
```

For the tenth time ...



---

archive/issue_comments_213759.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-01T08:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213759",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213760.json:
```json
{
    "body": "Replying to [comment:144 ncohen]:\n> For the tenth time ...\n\nand the last... (I hope)",
    "created_at": "2014-07-01T08:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213760",
    "user": "@videlec"
}
```

Replying to [comment:144 ncohen]:
> For the tenth time ...

and the last... (I hope)



---

archive/issue_comments_213761.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-01T21:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16316",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16316#issuecomment-213761",
    "user": "@vbraun"
}
```

Resolution: fixed
