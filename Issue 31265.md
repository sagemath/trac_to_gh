# Issue 31265: GH Actions: Free more disk space

Issue created by migration from https://trac.sagemath.org/ticket/31502

Original creator: mkoeppe

Original creation time: 2021-03-16 01:56:52

CC:  @kliem slelievre

Some of the docker-based tests run out of disk space, for example
`ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/2116657496).


---

Comment by slelievre created at 2021-03-16 09:22:10

Changing keywords from "" to "docker".


---

Comment by slelievre created at 2021-03-16 09:22:10

Possibly related: #29849.


---

Comment by mkoeppe created at 2021-03-17 04:29:55

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-03-17 04:29:55

New commits:


---

Comment by mkoeppe created at 2021-03-17 19:46:16

This can be seen in action in https://github.com/mkoeppe/sage/runs/2127941282 (see output in "free disk space" and "install test prerequisites" - it frees about 7GB of space.


---

Comment by mkoeppe created at 2021-03-18 06:11:25

Fixes `ubuntu-focal-standard` - as can be seen in https://github.com/mkoeppe/sage/runs/2135025352


---

Comment by @kliem created at 2021-03-23 08:58:04

LGTM.


---

Comment by @kliem created at 2021-03-23 08:58:04

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-03-23 17:19:58

Thanks!


---

Comment by mkoeppe created at 2021-03-29 23:54:39

Setting priority to blocker to bring this ticket to the attention of the release bot.


---

Comment by mkoeppe created at 2021-03-29 23:54:39

Changing priority from critical to blocker.


---

Comment by vbraun created at 2021-03-31 23:00:12

Changing priority from blocker to major.


---

Comment by mkoeppe created at 2021-04-01 00:12:24

Changing priority from major to blocker.


---

Comment by mkoeppe created at 2021-04-01 00:12:24

Obviously a blocker because it blocks us from demonstrating that Sage builds and tests correctly on the supported platform `ubuntu-focal-standard`.


---

Comment by @kliem created at 2021-04-01 06:15:59

Replying to [comment:10 mkoeppe]:
> Obviously a blocker because it blocks us from demonstrating that Sage builds and tests correctly on the supported platform `ubuntu-focal-standard`.

This ticket only changes files in `.github/workflows/`
This ticket can't break anything but the github workflows itself (and it doesn't break those).


---

Comment by vbraun created at 2021-04-01 16:32:20

How likely it is to break things is the wrong question. Instead, ask yourself: Is this ticket important enough so that everyone else's ticket should wait another week before it can get merged, so we can have an additional rc round.


---

Comment by mkoeppe created at 2021-04-01 16:50:40

Yes, a fully working portability testing infrastructure is crucial to making a release that will be in use for the next 1/2 year.


---

Comment by mkoeppe created at 2021-04-01 16:55:26

Here's an idea: If a positively reviewed ticket only modifies `/.github/` or `/tox.ini`, just merge it and don't count it to whatever batch size or limits you use in your merge scripts. -- After all, your build scripts do not test anything involving these files.


---

Comment by mkoeppe created at 2021-04-01 16:59:47

The same idea would probably also apply to `/.ci/`, `/.circleci/`, `/.gitlab-ci.yml`, and `/docker/` -- except these see a lot less activity as the maintainers seem to have disappeared.


---

Comment by vbraun created at 2021-04-01 19:58:16

Look, I appreciate what you are doing. But you need more frequent releases, not a more drawn-out release process so we can wait until everyone has their pet ticket merged.


---

Comment by mkoeppe created at 2021-04-01 20:07:04

Volker, I had hoped for a substantial response to comments 14/15.


---

Comment by vbraun created at 2021-04-05 19:42:21

Resolution: fixed
