# Issue 16537: Sage is not listed as a failed package

archive/issues_016537.json:
```json
{
    "body": "CC:  @jhpalmieri @nexttime @vbraun @jdemeyer\n\nIt took me a bit to figure out what was wrong after getting\n\n```\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build:\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n```\nAnd what was wrong was that \"package sage-6.3.beta4\" failed to build (due to wrong $HOME where Cython cache was supposed to live) - is it actually considered a package? On the one hand there is no sage in upstream or build/pkgs, on the other - there is log/pkgs/sage-*\n\nIn any case it would be nice to have a more clear error message - usually it gives paths to the log files that contain the error message in the end, as looking for errors on the console or install.log is inconvenient for parallel builds. Looks like #14263 just missed this particular case.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16774\n\n",
    "closed_at": "2015-06-20T09:20:16Z",
    "created_at": "2014-08-06T22:42:31Z",
    "labels": [
        "component: build",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Sage is not listed as a failed package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16537",
    "user": "https://github.com/novoselt"
}
```
CC:  @jhpalmieri @nexttime @vbraun @jdemeyer

It took me a bit to figure out what was wrong after getting

```
***************************************************************
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```
And what was wrong was that "package sage-6.3.beta4" failed to build (due to wrong $HOME where Cython cache was supposed to live) - is it actually considered a package? On the one hand there is no sage in upstream or build/pkgs, on the other - there is log/pkgs/sage-*

In any case it would be nice to have a more clear error message - usually it gives paths to the log files that contain the error message in the end, as looking for errors on the console or install.log is inconvenient for parallel builds. Looks like #14263 just missed this particular case.

Issue created by migration from https://trac.sagemath.org/ticket/16774





---

archive/issue_comments_217334.json:
```json
{
    "body": "I think the issue is that, in the transition to git, the Sage library is no longer distributed as an spkg, and is no longer installed using the `sage-spkg` script. So the log file doesn't look the same; for example, even when successful, it doesn't record the amount of time spent building the \"package\".",
    "created_at": "2014-08-07T05:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217334",
    "user": "https://github.com/jhpalmieri"
}
```

I think the issue is that, in the transition to git, the Sage library is no longer distributed as an spkg, and is no longer installed using the `sage-spkg` script. So the log file doesn't look the same; for example, even when successful, it doesn't record the amount of time spent building the "package".



---

archive/issue_events_049115.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16537#event-49115"
}
```



---

archive/issue_comments_217335.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2014-08-21T12:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217335",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_217336.json:
```json
{
    "body": "Haha, reading the ticket's title, I of course first thought of the recent discussion on sage-flame and elsewhere... (probably substituting \"package\" by \"project\", too)",
    "created_at": "2014-08-21T15:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217336",
    "user": "https://github.com/nexttime"
}
```

Haha, reading the ticket's title, I of course first thought of the recent discussion on sage-flame and elsewhere... (probably substituting "package" by "project", too)



---

archive/issue_comments_217337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-17T16:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217337",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_217338.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-17T16:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217338",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_217339.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-18T19:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217339",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_217340.json:
```json
{
    "body": "Looks okay to me. I tested it out by breaking a Cython file, and then `make` exits with the appropriate error message:\n\n```\nError building Sage.\n\nThe following package(s) may have failed to build:\n\npackage: sage-6.8.beta4\n```",
    "created_at": "2015-06-18T19:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217340",
    "user": "https://github.com/jhpalmieri"
}
```

Looks okay to me. I tested it out by breaking a Cython file, and then `make` exits with the appropriate error message:

```
Error building Sage.

The following package(s) may have failed to build:

package: sage-6.8.beta4
```



---

archive/issue_events_049116.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-20T09:20:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16537#event-49116"
}
```



---

archive/issue_comments_217341.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-20T09:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16537",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16537#issuecomment-217341",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
