# Issue 16537: Sage is not listed as a failed package

Issue created by migration from Trac.

Original creator: novoselt

Original creation time: 2014-08-06 22:42:31

CC:  jhpalmieri leif vbraun jdemeyer

It took me a bit to figure out what was wrong after getting

```
***************************************************************
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```

And what was wrong was that "package sage-6.3.beta4" failed to build (due to wrong $HOME where Cython cache was supposed to live) - is it actually considered a package? On the one hand there is no sage in upstream or build/pkgs, on the other - there is log/pkgs/sage-*

In any case it would be nice to have a more clear error message - usually it gives paths to the log files that contain the error message in the end, as looking for errors on the console or install.log is inconvenient for parallel builds. Looks like #14263 just missed this particular case.


---

Comment by jhpalmieri created at 2014-08-07 05:53:25

I think the issue is that, in the transition to git, the Sage library is no longer distributed as an spkg, and is no longer installed using the `sage-spkg` script. So the log file doesn't look the same; for example, even when successful, it doesn't record the amount of time spent building the "package".


---

Comment by jdemeyer created at 2014-08-21 12:23:37

Changing type from enhancement to defect.


---

Comment by leif created at 2014-08-21 15:22:13

Haha, reading the ticket's title, I of course first thought of the recent discussion on sage-flame and elsewhere... (probably substituting "package" by "project", too)


---

Comment by jdemeyer created at 2015-06-17 16:28:06

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-06-17 16:28:06

New commits:


---

Comment by jhpalmieri created at 2015-06-18 19:50:26

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2015-06-18 19:50:26

Looks okay to me. I tested it out by breaking a Cython file, and then `make` exits with the appropriate error message:

```
Error building Sage.

The following package(s) may have failed to build:

package: sage-6.8.beta4
```



---

Comment by vbraun created at 2015-06-20 09:20:16

Resolution: fixed
