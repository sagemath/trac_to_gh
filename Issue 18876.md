# Issue 18876: LatticePoset: Return type category of product()

archive/issues_018876.json:
```json
{
    "body": "CC:  ncohen\n\nKeywords: poset, latticeposet\n\n\n```\nL = LatticePoset({1:[]})\nL2 = L.product(L)\nL3 = L.ordinal_product(L)\ntype(L) == type(L2), type(L) == type(L3)\n```\n\n\noutputs `(False, True)`.\n\n(Also the docstring needs some polishing, at least oneliner to \"Return the cartesian product of the poset with `other`.\")\n\nIssue created by migration from https://trac.sagemath.org/ticket/19113\n\n",
    "created_at": "2015-08-31T07:37:05Z",
    "labels": [
        "combinatorics",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "LatticePoset: Return type category of product()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18876",
    "user": "jmantysalo"
}
```
CC:  ncohen

Keywords: poset, latticeposet


```
L = LatticePoset({1:[]})
L2 = L.product(L)
L3 = L.ordinal_product(L)
type(L) == type(L2), type(L) == type(L3)
```


outputs `(False, True)`.

(Also the docstring needs some polishing, at least oneliner to "Return the cartesian product of the poset with `other`.")

Issue created by migration from https://trac.sagemath.org/ticket/19113





---

archive/issue_comments_258431.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2015-08-31T07:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258431",
    "user": "jmantysalo"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_258432.json:
```json
{
    "body": "Nicolas, you might be interested in this. `type(L2)` says `sage.combinat.posets.lattices.FiniteLatticePoset_with_category` but `L2.category()` gives Join of Category of finite *posets* and Category of finite enumerated sets and Category of facade sets, whereas the category of `L3` is Join of Category of finite *lattice* posets and Category of finite enumerated sets and Category of facade sets.\n\nI don't know if there is anything to do to prevent this kind of errors. The error appears with `L2.join_irreducibles()`, but `L2.join_matrix()` works.",
    "created_at": "2015-08-31T07:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258432",
    "user": "jmantysalo"
}
```

Nicolas, you might be interested in this. `type(L2)` says `sage.combinat.posets.lattices.FiniteLatticePoset_with_category` but `L2.category()` gives Join of Category of finite *posets* and Category of finite enumerated sets and Category of facade sets, whereas the category of `L3` is Join of Category of finite *lattice* posets and Category of finite enumerated sets and Category of facade sets.

I don't know if there is anything to do to prevent this kind of errors. The error appears with `L2.join_irreducibles()`, but `L2.join_matrix()` works.



---

archive/issue_comments_258433.json:
```json
{
    "body": "The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.\n\nIMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.",
    "created_at": "2015-08-31T15:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258433",
    "user": "tscrim"
}
```

The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.

IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.



---

archive/issue_comments_258434.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.\n\nOK. Corrected that.\n\n> IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.\n\nShould this be part of #18776?\n\nThis is now ready for review. I corrected the bug, added the definition of the function and added a test.\n\nAlso there is non-relating change that rearranges the functions in the \"Other & not yet classified\" part of index and changes some phrasing.\n----\nNew commits:",
    "created_at": "2015-09-01T06:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258434",
    "user": "jmantysalo"
}
```

Replying to [comment:3 tscrim]:
> The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.

OK. Corrected that.

> IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.

Should this be part of #18776?

This is now ready for review. I corrected the bug, added the definition of the function and added a test.

Also there is non-relating change that rearranges the functions in the "Other & not yet classified" part of index and changes some phrasing.
----
New commits:



---

archive/issue_comments_258435.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-01T06:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258435",
    "user": "jmantysalo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258436.json:
```json
{
    "body": "Travis, do you happen to have time for this?",
    "created_at": "2015-09-14T12:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258436",
    "user": "jmantysalo"
}
```

Travis, do you happen to have time for this?



---

archive/issue_comments_258437.json:
```json
{
    "body": "Some questions/comments.\n\n- You've not added any tests which check that this is fixed.\n- Cartesian should be capitalized.\n- Why did you make all of the changes to the table of methods?\n\nAlso I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).",
    "created_at": "2015-09-15T19:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258437",
    "user": "tscrim"
}
```

Some questions/comments.

- You've not added any tests which check that this is fixed.
- Cartesian should be capitalized.
- Why did you make all of the changes to the table of methods?

Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).



---

archive/issue_comments_258438.json:
```json
{
    "body": "Replying to [comment:7 tscrim]:\n\n> - You've not added any tests which check that this is fixed.\n> - Cartesian should be capitalized.\n\nOK, I'll do these.\n\n> - Why did you make all of the changes to the table of methods?\n\nBecause it is more logical to have for example `comparability_graph()` and `comparability_graph()` together and `promotion()` and `evacuation()` as a pair. All changes are for \"uncategorized\" functions at the index.\n\n> Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).\n\nDuh. Can you make a patch to convert all `the poset` and `this poset` to ```self```? Maybe a year ago I was pointed to style guide that adviced against `self`. But almost everything is OK for me, as long as it is uniform accross the software.",
    "created_at": "2015-09-16T06:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258438",
    "user": "jmantysalo"
}
```

Replying to [comment:7 tscrim]:

> - You've not added any tests which check that this is fixed.
> - Cartesian should be capitalized.

OK, I'll do these.

> - Why did you make all of the changes to the table of methods?

Because it is more logical to have for example `comparability_graph()` and `comparability_graph()` together and `promotion()` and `evacuation()` as a pair. All changes are for "uncategorized" functions at the index.

> Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).

Duh. Can you make a patch to convert all `the poset` and `this poset` to ```self```? Maybe a year ago I was pointed to style guide that adviced against `self`. But almost everything is OK for me, as long as it is uniform accross the software.



---

archive/issue_comments_258439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-16T08:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258440.json:
```json
{
    "body": "Corrected. Hopefully Travis can review this, even if the patch has the `self` -> \"the\" -change.",
    "created_at": "2015-09-16T08:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258440",
    "user": "jmantysalo"
}
```

Corrected. Hopefully Travis can review this, even if the patch has the `self` -> "the" -change.



---

archive/issue_comments_258441.json:
```json
{
    "body": "Nicolas? As Travis won't review this, can you do it?",
    "created_at": "2015-09-24T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258441",
    "user": "jmantysalo"
}
```

Nicolas? As Travis won't review this, can you do it?



---

archive/issue_comments_258442.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-09T10:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258442",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258443.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-09T10:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258443",
    "user": "jmantysalo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258444.json:
```json
{
    "body": "Merge. Compiling and running tests.\n\nAlso I moved `kazhdan_lusztig_polynomial` to right place in the index of functions.",
    "created_at": "2015-11-09T10:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258444",
    "user": "jmantysalo"
}
```

Merge. Compiling and running tests.

Also I moved `kazhdan_lusztig_polynomial` to right place in the index of functions.



---

archive/issue_comments_258445.json:
```json
{
    "body": "Tests passed.",
    "created_at": "2015-11-09T14:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258445",
    "user": "jmantysalo"
}
```

Tests passed.



---

archive/issue_comments_258446.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-09T14:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258446",
    "user": "jmantysalo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258447.json:
```json
{
    "body": "Nathann maybe? The bug is clear and patch is simple. Othewise this rearranges index of not classified functions so that for example `comparability_graph()` is near to `incomparability_graph()`. But nobody have had time to look at this.",
    "created_at": "2015-11-12T12:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258447",
    "user": "jmantysalo"
}
```

Nathann maybe? The bug is clear and patch is simple. Othewise this rearranges index of not classified functions so that for example `comparability_graph()` is near to `incomparability_graph()`. But nobody have had time to look at this.



---

archive/issue_comments_258448.json:
```json
{
    "body": "> Nathann maybe?\n\nI am not the 'reviewer by default'.\n\nAbout your patch: is there a reason why you don't want to use the automatically generated index of functions?\n\nNathann",
    "created_at": "2015-11-12T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258448",
    "user": "ncohen"
}
```

> Nathann maybe?

I am not the 'reviewer by default'.

About your patch: is there a reason why you don't want to use the automatically generated index of functions?

Nathann



---

archive/issue_comments_258449.json:
```json
{
    "body": "Replying to [comment:16 ncohen]:\n\n> I am not the 'reviewer by default'.\n\nI know, I have tried to ping other people. With no success, as you can see.\n\n> About your patch: is there a reason why you don't want to use the automatically generated index of functions?\n\nNo. Just that I must learn to use it (at the process of reviewing the ticket where you extend it). And that I try to convert using it when there is not much other tickets waiting for this file.",
    "created_at": "2015-11-12T13:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258449",
    "user": "jmantysalo"
}
```

Replying to [comment:16 ncohen]:

> I am not the 'reviewer by default'.

I know, I have tried to ping other people. With no success, as you can see.

> About your patch: is there a reason why you don't want to use the automatically generated index of functions?

No. Just that I must learn to use it (at the process of reviewing the ticket where you extend it). And that I try to convert using it when there is not much other tickets waiting for this file.



---

archive/issue_comments_258450.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-12T13:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258450",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258451.json:
```json
{
    "body": "Thanks. Next time I try harder to get someone else to review.",
    "created_at": "2015-11-12T13:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258451",
    "user": "jmantysalo"
}
```

Thanks. Next time I try harder to get someone else to review.



---

archive/issue_comments_258452.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-12T22:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258452",
    "user": "vbraun"
}
```

Resolution: fixed
