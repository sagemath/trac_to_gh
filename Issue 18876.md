# Issue 18876: LatticePoset: Return type category of product()

archive/issues_018876.json:
```json
{
    "body": "CC:  @nathanncohen\n\nKeywords: poset, latticeposet\n\n```\nL = LatticePoset({1:[]})\nL2 = L.product(L)\nL3 = L.ordinal_product(L)\ntype(L) == type(L2), type(L) == type(L3)\n```\n\noutputs `(False, True)`.\n\n(Also the docstring needs some polishing, at least oneliner to \"Return the cartesian product of the poset with `other`.\")\n\nIssue created by migration from https://trac.sagemath.org/ticket/19113\n\n",
    "closed_at": "2015-11-12T22:44:29Z",
    "created_at": "2015-08-31T07:37:05Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "LatticePoset: Return type category of product()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18876",
    "user": "https://github.com/jm58660"
}
```
CC:  @nathanncohen

Keywords: poset, latticeposet

```
L = LatticePoset({1:[]})
L2 = L.product(L)
L3 = L.ordinal_product(L)
type(L) == type(L2), type(L) == type(L3)
```

outputs `(False, True)`.

(Also the docstring needs some polishing, at least oneliner to "Return the cartesian product of the poset with `other`.")

Issue created by migration from https://trac.sagemath.org/ticket/19113





---

archive/issue_comments_258123.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2015-08-31T07:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258123",
    "user": "https://github.com/jm58660"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_258124.json:
```json
{
    "body": "Nicolas, you might be interested in this. `type(L2)` says `sage.combinat.posets.lattices.FiniteLatticePoset_with_category` but `L2.category()` gives Join of Category of finite *posets* and Category of finite enumerated sets and Category of facade sets, whereas the category of `L3` is Join of Category of finite *lattice* posets and Category of finite enumerated sets and Category of facade sets.\n\nI don't know if there is anything to do to prevent this kind of errors. The error appears with `L2.join_irreducibles()`, but `L2.join_matrix()` works.",
    "created_at": "2015-08-31T07:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258124",
    "user": "https://github.com/jm58660"
}
```

Nicolas, you might be interested in this. `type(L2)` says `sage.combinat.posets.lattices.FiniteLatticePoset_with_category` but `L2.category()` gives Join of Category of finite *posets* and Category of finite enumerated sets and Category of facade sets, whereas the category of `L3` is Join of Category of finite *lattice* posets and Category of finite enumerated sets and Category of facade sets.

I don't know if there is anything to do to prevent this kind of errors. The error appears with `L2.join_irreducibles()`, but `L2.join_matrix()` works.



---

archive/issue_comments_258125.json:
```json
{
    "body": "The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.\n\nIMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.",
    "created_at": "2015-08-31T15:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258125",
    "user": "https://github.com/tscrim"
}
```

The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.

IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.



---

archive/issue_comments_258126.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.\n\n\nOK. Corrected that.\n\n> IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.\n\n\nShould this be part of #18776?\n\nThis is now ready for review. I corrected the bug, added the definition of the function and added a test.\n\nAlso there is non-relating change that rearranges the functions in the \"Other & not yet classified\" part of index and changes some phrasing.\n\n---\nNew commits:",
    "created_at": "2015-09-01T06:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258126",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:3 tscrim]:
> The difference is in the constructions, `product` goes through `FiniteLatticePoset` whereas `ordinal_product` goes through `LatticePoset` (which sets category). So it's a code path problem, not anything with the categories.


OK. Corrected that.

> IMO, one should implement an `__init__` method for each of `*LatticePoset` classes which handles telling `Poset` which category to use. I'm not so much in favor of these construction functions because they cause problems exactly like this one.


Should this be part of #18776?

This is now ready for review. I corrected the bug, added the definition of the function and added a test.

Also there is non-relating change that rearranges the functions in the "Other & not yet classified" part of index and changes some phrasing.

---
New commits:



---

archive/issue_comments_258127.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-01T06:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258127",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258128.json:
```json
{
    "body": "Travis, do you happen to have time for this?",
    "created_at": "2015-09-14T12:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258128",
    "user": "https://github.com/jm58660"
}
```

Travis, do you happen to have time for this?



---

archive/issue_comments_258129.json:
```json
{
    "body": "Some questions/comments.\n\n- You've not added any tests which check that this is fixed.\n- Cartesian should be capitalized.\n- Why did you make all of the changes to the table of methods?\n\nAlso I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).",
    "created_at": "2015-09-15T19:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258129",
    "user": "https://github.com/tscrim"
}
```

Some questions/comments.

- You've not added any tests which check that this is fixed.
- Cartesian should be capitalized.
- Why did you make all of the changes to the table of methods?

Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).



---

archive/issue_comments_258130.json:
```json
{
    "body": "Replying to [comment:7 tscrim]:\n\n> - You've not added any tests which check that this is fixed.\n> - Cartesian should be capitalized.\n\n\nOK, I'll do these.\n\n> - Why did you make all of the changes to the table of methods?\n\n\nBecause it is more logical to have for example `comparability_graph()` and `comparability_graph()` together and `promotion()` and `evacuation()` as a pair. All changes are for \"uncategorized\" functions at the index.\n\n> Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).\n\n\nDuh. Can you make a patch to convert all `the poset` and `this poset` to ```self```? Maybe a year ago I was pointed to style guide that adviced against `self`. But almost everything is OK for me, as long as it is uniform accross the software.",
    "created_at": "2015-09-16T06:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258130",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:7 tscrim]:

> - You've not added any tests which check that this is fixed.
> - Cartesian should be capitalized.


OK, I'll do these.

> - Why did you make all of the changes to the table of methods?


Because it is more logical to have for example `comparability_graph()` and `comparability_graph()` together and `promotion()` and `evacuation()` as a pair. All changes are for "uncategorized" functions at the index.

> Also I'm not going to set a positive review on tickets that change ```self``` to `this poset` (that's not to say I'm not going to allow a positive review, but it's my somewhat mild form of protest).


Duh. Can you make a patch to convert all `the poset` and `this poset` to ```self```? Maybe a year ago I was pointed to style guide that adviced against `self`. But almost everything is OK for me, as long as it is uniform accross the software.



---

archive/issue_comments_258131.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-16T08:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258132.json:
```json
{
    "body": "Corrected. Hopefully Travis can review this, even if the patch has the `self` -> \"the\" -change.",
    "created_at": "2015-09-16T08:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258132",
    "user": "https://github.com/jm58660"
}
```

Corrected. Hopefully Travis can review this, even if the patch has the `self` -> "the" -change.



---

archive/issue_comments_258133.json:
```json
{
    "body": "Nicolas? As Travis won't review this, can you do it?",
    "created_at": "2015-09-24T14:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258133",
    "user": "https://github.com/jm58660"
}
```

Nicolas? As Travis won't review this, can you do it?



---

archive/issue_comments_258134.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-09T10:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258135.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-09T10:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258135",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258136.json:
```json
{
    "body": "Merge. Compiling and running tests.\n\nAlso I moved `kazhdan_lusztig_polynomial` to right place in the index of functions.",
    "created_at": "2015-11-09T10:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258136",
    "user": "https://github.com/jm58660"
}
```

Merge. Compiling and running tests.

Also I moved `kazhdan_lusztig_polynomial` to right place in the index of functions.



---

archive/issue_comments_258137.json:
```json
{
    "body": "Tests passed.",
    "created_at": "2015-11-09T14:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258137",
    "user": "https://github.com/jm58660"
}
```

Tests passed.



---

archive/issue_comments_258138.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-09T14:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258138",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258139.json:
```json
{
    "body": "Nathann maybe? The bug is clear and patch is simple. Othewise this rearranges index of not classified functions so that for example `comparability_graph()` is near to `incomparability_graph()`. But nobody have had time to look at this.",
    "created_at": "2015-11-12T12:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258139",
    "user": "https://github.com/jm58660"
}
```

Nathann maybe? The bug is clear and patch is simple. Othewise this rearranges index of not classified functions so that for example `comparability_graph()` is near to `incomparability_graph()`. But nobody have had time to look at this.



---

archive/issue_comments_258140.json:
```json
{
    "body": "> Nathann maybe?\n\n\nI am not the 'reviewer by default'.\n\nAbout your patch: is there a reason why you don't want to use the automatically generated index of functions?\n\nNathann",
    "created_at": "2015-11-12T12:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258140",
    "user": "https://github.com/nathanncohen"
}
```

> Nathann maybe?


I am not the 'reviewer by default'.

About your patch: is there a reason why you don't want to use the automatically generated index of functions?

Nathann



---

archive/issue_comments_258141.json:
```json
{
    "body": "Replying to [comment:16 ncohen]:\n\n> I am not the 'reviewer by default'.\n\n\nI know, I have tried to ping other people. With no success, as you can see.\n\n> About your patch: is there a reason why you don't want to use the automatically generated index of functions?\n\n\nNo. Just that I must learn to use it (at the process of reviewing the ticket where you extend it). And that I try to convert using it when there is not much other tickets waiting for this file.",
    "created_at": "2015-11-12T13:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258141",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:16 ncohen]:

> I am not the 'reviewer by default'.


I know, I have tried to ping other people. With no success, as you can see.

> About your patch: is there a reason why you don't want to use the automatically generated index of functions?


No. Just that I must learn to use it (at the process of reviewing the ticket where you extend it). And that I try to convert using it when there is not much other tickets waiting for this file.



---

archive/issue_comments_258142.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-12T13:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258142",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258143.json:
```json
{
    "body": "Thanks. Next time I try harder to get someone else to review.",
    "created_at": "2015-11-12T13:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258143",
    "user": "https://github.com/jm58660"
}
```

Thanks. Next time I try harder to get someone else to review.



---

archive/issue_comments_258144.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-12T22:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18876#issuecomment-258144",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053118.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-12T22:44:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18876",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18876#event-53118"
}
```
