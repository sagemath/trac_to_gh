# Issue 11230: add a cache on basis in free modules

Issue created by migration from https://trac.sagemath.org/ticket/11402

Original creator: hivert

Original creation time: 2011-05-30 11:45:01

Assignee: hivert

CC:  sage-combinat

Keywords: FreeModules basis cache

Let `FM` be a combinatorial free module currently creating elements using the basis is very slow because the family is recreated each time:

```
sage: FM = CombinatorialFreeModule(QQ, ZZ)
sage: %timeit [FM.basis()[i] for i in range(100)]
5 loops, best of 3: 44.4 ms per loop
```

Adding a cache to `basis` gives a large speedup

```
sage: FM = CombinatorialFreeModule(QQ, ZZ)
sage: %timeit [FM.basis()[i] for i in range(100)]
125 loops, best of 3: 3.45 ms per loop
```

The speedup will be even larger with Simon King optimization on cache_methods.



---

Comment by hivert created at 2011-05-30 11:53:45

Changing status from new to needs_review.


---

Attachment

A pretty simple one, ready for review.


---

Comment by nthiery created at 2011-05-31 19:45:08

I had wanted to do that for a while. Thanks!


---

Comment by nthiery created at 2011-05-31 19:45:08

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-06-08 07:15:10

Resolution: fixed
