# Issue 12074: Wiener index without dictionnary

Issue created by migration from Trac.

Original creator: dcoudert

Original creation time: 2012-01-02 14:07:44

Assignee: jason, ncohen, rlm

CC:  ncohen

This patch implements the wiener index function without using the costly and useless dictionary. It has been prepared using sage-4.8.alpha5 and depends on patch #12244.

This is my first patch.


---

Comment by dcoudert created at 2012-01-02 14:12:42

Changing status from new to needs_review.


---

Comment by dcoudert created at 2012-01-02 15:48:30

The patch should be better now.
However, I'm fighting with &Ã©`@`$`@`&`@` references. Several functions are referencing exactly the same papers and so we have some duplication. The only solution I have found to remove the warnings when building the documentation is to use alternative bib key entries, but I'm not sure its the best option and so I have let the warnings.


---

Comment by ncohen created at 2012-01-02 15:57:41

Helloooooooo !!!

I think I had the same problem a looong time ago, and I probably chosed the nasty way out. What happens when you cite the paper while not defining them in the same function ? Are the links broken, or fo they redirect toward the other function's references ?
The release manager is wise but his wrath is terrifying. In particular, he does not like warnings, so we should avoid that `:-D`
By the way (and I know that the difference in runtime is very small), it is easier to check whether a graph is connected than to count the number of connected components. So in the process, could you replace ``self.connected_components_number() == 1`` by ``self.is_connected()`` ?

If the references are broken when you cite in one method the references defined in another one, I'd say that duplicating them and changing the name (add a number at the end, or a letter) is not thaaaaaat bad anyway `:-)`

Nathann


---

Comment by ncohen created at 2012-01-02 16:04:00

Oh, and two other things :
    * The "commit message" of the patch you send must begin with "trac #12246 -- explanation of what the ticket does"
    * When there are several patches to be applied, or when there are dependencies, it should be explicitely said in the ticket's description.

The reason behind 1) is that there is a script using this information to create the list of contributions (and contributors) for each release, and most importantly that the release manager prefers it this way `:-D`

The reason behind 2) is that there is a program we call the "sagebot" (cf. the circle you can see on this page, just near the ticket's title) that uses this information to automatically apply the tickets and check the tests pass.

Last thing --> The ticket's "type" is "enhancement".


---

Comment by ncohen created at 2012-01-02 16:04:00

Changing type from PLEASE CHANGE to enhancement.


---

Comment by dcoudert created at 2012-01-02 16:24:38

I tried to make all mentioned improvements. 
Is it better now ?
Best,
David.


---

Comment by ncohen created at 2012-01-02 16:40:03

Well, the wiener_index function from distances_all_pairs.pyx still returns wrong result on disconnected graph, so it would be better to move the test there to avoid any problem `^^;`

Short of this, all tests pass !

Nathann


---

Comment by dcoudert created at 2012-01-02 17:07:50

I have moved the test to the distances_all_pairs.pyx file.
Should be ok now.


---

Comment by ncohen created at 2012-01-02 17:15:05

Yeeeeeepeeeeeeeeee !!

Passes all tests, everything looks fine, good to go ! `:-)`

Congratulations ! `^^`

Nathann


---

Comment by ncohen created at 2012-01-02 17:15:05

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2012-01-02 17:16:37

Thank you Nathann, this is my first patch !
D.


---

Comment by dcoudert created at 2012-01-05 22:18:00

Thank you for the correction.
In french it is "dictionnaire" with 2 n.
Best,
David.


---

Comment by jdemeyer created at 2012-01-09 23:36:35

A small comment about the patch: the commit message (edited by `hg qrefresh -e` if you use Mercurial queues) now is one long line.  It should be broken up into several shorter lines.  Make sure the first line makes sense by itself.  And remove "Dependency: #12244" which should not be in the commit message.


---

Comment by jdemeyer created at 2012-01-09 23:36:35

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2012-01-10 00:20:57

improvement of the commit message


---

Attachment

I have changed the commit message as recommended.
I have also updated the comments in the function to use no more than 80 chars per lines.
I hope it better fits the standard now.
Thank you,
David.


---

Comment by ncohen created at 2012-01-10 07:44:16

Changing status from needs_work to positive_review.


---

Comment by ncohen created at 2012-01-10 07:44:16

(otherwise it will never be merged) `:-)`


---

Comment by jdemeyer created at 2012-01-18 08:16:35

Resolution: fixed
