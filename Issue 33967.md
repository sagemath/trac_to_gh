# Issue 33967: Misleading OSError message when saving an animation to an inexistent folder

Issue created by migration from https://trac.sagemath.org/ticket/34204

Original creator: slabbe

Original creation time: 2022-07-21 14:00:48

CC:  tmonteil

From this [ask question](https://ask.sagemath.org/question/63317/saving-animation-problem/), the command

```
sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1)
for c in srange(0,1,.1)]
a = animate(sines)
a.save('animations/sines')
```

returns

```
Command "['convert', '-dispose', 'Background', '-delay', '20', '-loop',
'0', '*.png', '/home/slabbe/animations/sines.gif']" returned non-zero 
exit status "1" (with stderr "convert-im6.q16: unable to open image 
`/home/slabbe/animations/sines.gif': Aucun fichier ou dossier de ce 
type @ error/blob.c/OpenBlob/2874." and stdout "").
---------------------------------------------------------------------------
Traceback (most recent call last):
...
OSError: Error: Cannot generate GIF animation. The convert command
(ImageMagick) is present but does not seem to be functional. Verify 
that the objects passed to the animate command can be saved in PNG 
image format. See www.imagemagick.org more information.
```

The problem is not that imagemagick is not functional.

The way error message are given as written in #33092 needs to be improved.


---

Comment by slabbe created at 2022-08-24 14:43:15

New commits:


---

Comment by slabbe created at 2022-08-24 14:43:15

Changing status from new to needs_review.


---

Comment by slabbe created at 2022-08-24 14:46:28

Both:

```
sage -t src/sage/plot/animate.py
sage -t --optional=sage,optional,external src/sage/plot/animate.py
```

works for me. My setup is that I have both ffmpeg and imagemagick installed.

However, newly added doctests do not depend on ffmpeg or imagemagick because these features are "required" only after the new error message is raised.

Needs review.
