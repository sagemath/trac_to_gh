# Issue 33967: Misleading OSError message when saving an animation to an inexistent folder

archive/issues_033967.json:
```json
{
    "body": "CC:  tmonteil\n\nFrom this [ask question](https://ask.sagemath.org/question/63317/saving-animation-problem/), the command\n\n```\nsines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1)\nfor c in srange(0,1,.1)]\na = animate(sines)\na.save('animations/sines')\n```\n\nreturns\n\n```\nCommand \"['convert', '-dispose', 'Background', '-delay', '20', '-loop',\n'0', '*.png', '/home/slabbe/animations/sines.gif']\" returned non-zero \nexit status \"1\" (with stderr \"convert-im6.q16: unable to open image \n`/home/slabbe/animations/sines.gif': Aucun fichier ou dossier de ce \ntype @ error/blob.c/OpenBlob/2874.\" and stdout \"\").\n---------------------------------------------------------------------------\nTraceback (most recent call last):\n...\nOSError: Error: Cannot generate GIF animation. The convert command\n(ImageMagick) is present but does not seem to be functional. Verify \nthat the objects passed to the animate command can be saved in PNG \nimage format. See www.imagemagick.org more information.\n```\n\nThe problem is not that imagemagick is not functional.\n\nThe way error message are given as written in #33092 needs to be improved.\n\nIssue created by migration from https://trac.sagemath.org/ticket/34204\n\n",
    "created_at": "2022-07-21T14:00:48Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "title": "Misleading OSError message when saving an animation to an inexistent folder",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33967",
    "user": "slabbe"
}
```
CC:  tmonteil

From this [ask question](https://ask.sagemath.org/question/63317/saving-animation-problem/), the command

```
sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1, ymax=1)
for c in srange(0,1,.1)]
a = animate(sines)
a.save('animations/sines')
```

returns

```
Command "['convert', '-dispose', 'Background', '-delay', '20', '-loop',
'0', '*.png', '/home/slabbe/animations/sines.gif']" returned non-zero 
exit status "1" (with stderr "convert-im6.q16: unable to open image 
`/home/slabbe/animations/sines.gif': Aucun fichier ou dossier de ce 
type @ error/blob.c/OpenBlob/2874." and stdout "").
---------------------------------------------------------------------------
Traceback (most recent call last):
...
OSError: Error: Cannot generate GIF animation. The convert command
(ImageMagick) is present but does not seem to be functional. Verify 
that the objects passed to the animate command can be saved in PNG 
image format. See www.imagemagick.org more information.
```

The problem is not that imagemagick is not functional.

The way error message are given as written in #33092 needs to be improved.

Issue created by migration from https://trac.sagemath.org/ticket/34204





---

archive/issue_comments_482287.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-08-24T14:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33967",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33967#issuecomment-482287",
    "user": "slabbe"
}
```

New commits:



---

archive/issue_comments_482288.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-24T14:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33967",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33967#issuecomment-482288",
    "user": "slabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_482289.json:
```json
{
    "body": "Both:\n\n```\nsage -t src/sage/plot/animate.py\nsage -t --optional=sage,optional,external src/sage/plot/animate.py\n```\n\nworks for me. My setup is that I have both ffmpeg and imagemagick installed.\n\nHowever, newly added doctests do not depend on ffmpeg or imagemagick because these features are \"required\" only after the new error message is raised.\n\nNeeds review.",
    "created_at": "2022-08-24T14:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33967",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33967#issuecomment-482289",
    "user": "slabbe"
}
```

Both:

```
sage -t src/sage/plot/animate.py
sage -t --optional=sage,optional,external src/sage/plot/animate.py
```

works for me. My setup is that I have both ffmpeg and imagemagick installed.

However, newly added doctests do not depend on ffmpeg or imagemagick because these features are "required" only after the new error message is raised.

Needs review.
