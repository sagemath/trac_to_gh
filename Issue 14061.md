# Issue 14061: Compile Python as C99

archive/issues_014061.json:
```json
{
    "body": "Assignee: tbd\n\nThe new doctesting framework (#12415) on Solaris gives lots of warnings like\n\n```\nsage -t --long devel/sage/sage/plot/plot.py\n**********************************************************************\nFile \"devel/sage/sage/plot/plot.py\", line 236, in sage.plot.plot\nFailed example:\n    (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # show their sum, nicely formatted\nExpected nothing\nGot:\n    Warning: invalid value encountered in isinf\n    Warning: invalid value encountered in isinf\n    Warning: invalid value encountered in isinf\n    [...]\n    Warning: invalid value encountered in isinf\n    Warning: invalid value encountered in isinf\n    Warning: invalid value encountered in isinf\n```\n\nThese warnings are actually harmless and are indirectly caused by the fact that Python doesn't find the `isinf()` C library function. From `spkg/logs/python-2.7.3.p5.log`:\n\n```\n[...]\nchecking whether isinf is declared... no\nchecking whether isnan is declared... yes\nchecking whether isfinite is declared... no\n[...]\n```\n\nThese functions are defined by C99 and Python's `configure` does find `isinf` and `isfinite` when compiled as C99. So we should add a compiler flag to fix this.\n\n**spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p6.spkg)\n\nTo test: build this spkg and rebuild numpy.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14265\n\n",
    "created_at": "2013-03-13T12:47:32Z",
    "labels": [
        "packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Compile Python as C99",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14061",
    "user": "@jdemeyer"
}
```
Assignee: tbd

The new doctesting framework (#12415) on Solaris gives lots of warnings like

```
sage -t --long devel/sage/sage/plot/plot.py
**********************************************************************
File "devel/sage/sage/plot/plot.py", line 236, in sage.plot.plot
Failed example:
    (g1+g2).show(ticks=pi/6, tick_formatter=pi)  # show their sum, nicely formatted
Expected nothing
Got:
    Warning: invalid value encountered in isinf
    Warning: invalid value encountered in isinf
    Warning: invalid value encountered in isinf
    [...]
    Warning: invalid value encountered in isinf
    Warning: invalid value encountered in isinf
    Warning: invalid value encountered in isinf
```

These warnings are actually harmless and are indirectly caused by the fact that Python doesn't find the `isinf()` C library function. From `spkg/logs/python-2.7.3.p5.log`:

```
[...]
checking whether isinf is declared... no
checking whether isnan is declared... yes
checking whether isfinite is declared... no
[...]
```

These functions are defined by C99 and Python's `configure` does find `isinf` and `isfinite` when compiled as C99. So we should add a compiler flag to fix this.

**spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p6.spkg)

To test: build this spkg and rebuild numpy.

Issue created by migration from https://trac.sagemath.org/ticket/14265





---

archive/issue_comments_175909.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-13T14:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175909",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175910.json:
```json
{
    "body": "Note that this also affects any Python extension module built with distutils, as the latter (by default) use the flags Python was built with.  (This also applies to C++ files btw. ...)\n\nSo for testing, one should at least rebuild the whole Sage library as well (e.g. with `./sage -ba-force`).\n\n\n\n\nSolaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).",
    "created_at": "2013-03-14T03:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175910",
    "user": "@nexttime"
}
```

Note that this also affects any Python extension module built with distutils, as the latter (by default) use the flags Python was built with.  (This also applies to C++ files btw. ...)

So for testing, one should at least rebuild the whole Sage library as well (e.g. with `./sage -ba-force`).




Solaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).



---

archive/issue_comments_175911.json:
```json
{
    "body": "Replying to [comment:3 leif]:\n> Solaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).\nI think GCC never defaults to gnu99/c99. It must be that glibc always declares isinf(), even in C89 mode.",
    "created_at": "2013-03-14T08:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175911",
    "user": "@jdemeyer"
}
```

Replying to [comment:3 leif]:
> Solaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).
I think GCC never defaults to gnu99/c99. It must be that glibc always declares isinf(), even in C89 mode.



---

archive/issue_comments_175912.json:
```json
{
    "body": "Replying to [comment:4 jdemeyer]:\n> Replying to [comment:3 leif]:\n> > Solaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).\n> I think GCC never defaults to gnu99/c99. It must be that glibc always declares isinf(), even in C89 mode.\n\nConfused that with `__STDC__`, which GCC defines on anything but Solaris by default.\n\nGLIBC's `math.h` only defines `isinf()` etc. if `__USE_ISOC99` is defined, but that's apparently \"frequently\" the case (see `features.h`.)",
    "created_at": "2013-03-14T09:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175912",
    "user": "@nexttime"
}
```

Replying to [comment:4 jdemeyer]:
> Replying to [comment:3 leif]:
> > Solaris is the only OS I'm aware of (and Sage supports) where GCC does **not** default to `gnu99` (for C input files).
> I think GCC never defaults to gnu99/c99. It must be that glibc always declares isinf(), even in C89 mode.

Confused that with `__STDC__`, which GCC defines on anything but Solaris by default.

GLIBC's `math.h` only defines `isinf()` etc. if `__USE_ISOC99` is defined, but that's apparently "frequently" the case (see `features.h`.)



---

archive/issue_comments_175913.json:
```json
{
    "body": "On `sage.math` at least, `isinf()` is declared in `gnu89` mode, but not in `c89` mode (which is a sensible choice).",
    "created_at": "2013-03-14T09:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175913",
    "user": "@jdemeyer"
}
```

On `sage.math` at least, `isinf()` is declared in `gnu89` mode, but not in `c89` mode (which is a sensible choice).



---

archive/issue_comments_175914.json:
```json
{
    "body": "Replying to [comment:6 jdemeyer]:\n> On `sage.math` at least, `isinf()` is declared in `gnu89` mode, but not in `c89` mode (which is a sensible choice).\n\nSame on 10.04.4.",
    "created_at": "2013-03-14T09:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175914",
    "user": "@nexttime"
}
```

Replying to [comment:6 jdemeyer]:
> On `sage.math` at least, `isinf()` is declared in `gnu89` mode, but not in `c89` mode (which is a sensible choice).

Same on 10.04.4.



---

archive/issue_comments_175915.json:
```json
{
    "body": "Replying to [comment:3 leif]:\n> Note that this also affects any Python extension module built with distutils, as the latter (by default) use the flags Python was built with.  (This also applies to C++ files btw. ...)\nTrue, it applies to C++ also, but this doesn't seem to cause problems:\n\n```\ngcc -fno-strict-aliasing -std=gnu99 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/release/merger/sage-5.9.beta0/local/include -I/release/merger/sage-5.9.beta0/local/include/csage -I/release/merger/sage-5.9.beta0/devel/sage/sage/ext -I/release/merger/sage-5.9.beta0/local/include/python2.7 -c sage/rings/number_field/number_field_element.cpp -o build/temp.linux-x86_64-2.7/sage/rings/number_field/number_field_element.o -w\ncc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]\ng++ -pthread -shared -L/release/merger/sage-5.9.beta0/local/lib build/temp.linux-x86_64-2.7/sage/rings/number_field/number_field_element.o -L/release/merger/sage-5.9.beta0/local/lib -L/release/merger/sage-5.9.beta0/local/lib -lcsage -lntl -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/number_field/number_field_element.so\n```\n",
    "created_at": "2013-03-14T10:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175915",
    "user": "@jdemeyer"
}
```

Replying to [comment:3 leif]:
> Note that this also affects any Python extension module built with distutils, as the latter (by default) use the flags Python was built with.  (This also applies to C++ files btw. ...)
True, it applies to C++ also, but this doesn't seem to cause problems:

```
gcc -fno-strict-aliasing -std=gnu99 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/release/merger/sage-5.9.beta0/local/include -I/release/merger/sage-5.9.beta0/local/include/csage -I/release/merger/sage-5.9.beta0/devel/sage/sage/ext -I/release/merger/sage-5.9.beta0/local/include/python2.7 -c sage/rings/number_field/number_field_element.cpp -o build/temp.linux-x86_64-2.7/sage/rings/number_field/number_field_element.o -w
cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]
g++ -pthread -shared -L/release/merger/sage-5.9.beta0/local/lib build/temp.linux-x86_64-2.7/sage/rings/number_field/number_field_element.o -L/release/merger/sage-5.9.beta0/local/lib -L/release/merger/sage-5.9.beta0/local/lib -lcsage -lntl -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/rings/number_field/number_field_element.so
```




---

archive/issue_comments_175916.json:
```json
{
    "body": "\n```sh\n$ gcc-4.6.3 -std=gnu99 -c -x c++ /dev/null -o /dev/null\ncc1plus: warning: command line option \u2018-std=gnu99\u2019 is valid for C/ObjC but not for C++ [enabled by default]\n```\n\n\n:-)",
    "created_at": "2013-03-14T11:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175916",
    "user": "@nexttime"
}
```


```sh
$ gcc-4.6.3 -std=gnu99 -c -x c++ /dev/null -o /dev/null
cc1plus: warning: command line option ‘-std=gnu99’ is valid for C/ObjC but not for C++ [enabled by default]
```


:-)



---

archive/issue_comments_175917.json:
```json
{
    "body": "More weirdness:\n\n```\njdemeyer@sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null\ncc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]\ncc1plus: warning: command line option '-std=gnu99' is valid for C/ObjC but not for C++ [enabled by default]\n```\n\n\n```\njdemeyer@sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null -w\ncc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]\n```\n\n\nAnyway, it's a strange thing that Python uses `CC` and `CFLAGS` to compile C++ code.",
    "created_at": "2013-03-14T12:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175917",
    "user": "@jdemeyer"
}
```

More weirdness:

```
jdemeyer@sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null
cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]
cc1plus: warning: command line option '-std=gnu99' is valid for C/ObjC but not for C++ [enabled by default]
```


```
jdemeyer@sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null -w
cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]
```


Anyway, it's a strange thing that Python uses `CC` and `CFLAGS` to compile C++ code.



---

archive/issue_comments_175918.json:
```json
{
    "body": "Replying to [comment:10 jdemeyer]:\n> More weirdness:\n> {{{\n> jdemeyer`@`sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null\n> cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]\n> cc1plus: warning: command line option '-std=gnu99' is valid for C/ObjC but not for C++ [enabled by default]\n> }}}\n> {{{\n> jdemeyer`@`sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null -w\n> cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]\n> }}}\n> \n> Anyway, it's a strange thing that Python uses `CC` and `CFLAGS` to compile C++ code.\n\nYeah, I'll one day fix these (by removing the invalid options if `lang==\"c++\"`) ...",
    "created_at": "2013-03-14T12:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175918",
    "user": "@nexttime"
}
```

Replying to [comment:10 jdemeyer]:
> More weirdness:
> {{{
> jdemeyer`@`sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null
> cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]
> cc1plus: warning: command line option '-std=gnu99' is valid for C/ObjC but not for C++ [enabled by default]
> }}}
> {{{
> jdemeyer`@`sage:~$ gcc -std=gnu99 -Wstrict-prototypes -c -x c++ /dev/null -o /dev/null -w
> cc1plus: warning: command line option '-Wstrict-prototypes' is valid for C/ObjC but not for C++ [enabled by default]
> }}}
> 
> Anyway, it's a strange thing that Python uses `CC` and `CFLAGS` to compile C++ code.

Yeah, I'll one day fix these (by removing the invalid options if `lang=="c++"`) ...



---

archive/issue_comments_175919.json:
```json
{
    "body": "Replying to [comment:11 leif]:\n> Yeah, I'll one day fix these (by removing the invalid options if `lang==\"c++\"`) ...\nIt's a distutils problem, not a Sage problem: [http://bugs.python.org/issue1222585](http://bugs.python.org/issue1222585)",
    "created_at": "2013-03-14T12:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175919",
    "user": "@jdemeyer"
}
```

Replying to [comment:11 leif]:
> Yeah, I'll one day fix these (by removing the invalid options if `lang=="c++"`) ...
It's a distutils problem, not a Sage problem: [http://bugs.python.org/issue1222585](http://bugs.python.org/issue1222585)



---

archive/issue_comments_175920.json:
```json
{
    "body": "Given that:\n1. this has been tested on the buildbot with no issues,\n2. it fixes an issue on Solaris,\n3. the fact that Distutils compiles C++ files as C files is not easily solved,\nI think this ticket is still ready for review.\n\nI added a patch to remove the c99 options which are currently in `module_list.py`.",
    "created_at": "2013-03-14T13:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175920",
    "user": "@jdemeyer"
}
```

Given that:
1. this has been tested on the buildbot with no issues,
2. it fixes an issue on Solaris,
3. the fact that Distutils compiles C++ files as C files is not easily solved,
I think this ticket is still ready for review.

I added a patch to remove the c99 options which are currently in `module_list.py`.



---

archive/issue_comments_175921.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> I added a patch to remove the c99 options which are currently in `module_list.py`.\n\nI also thought about doing so, but I think we shouldn't, as you can still override Python's `CFLAGS`, and it's good to have documented which modules actually (seem to) require C99...",
    "created_at": "2013-03-14T13:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175921",
    "user": "@nexttime"
}
```

Replying to [comment:13 jdemeyer]:
> I added a patch to remove the c99 options which are currently in `module_list.py`.

I also thought about doing so, but I think we shouldn't, as you can still override Python's `CFLAGS`, and it's good to have documented which modules actually (seem to) require C99...



---

archive/issue_comments_175922.json:
```json
{
    "body": "Replying to [comment:14 leif]:\n> Replying to [comment:13 jdemeyer]:\n> > I added a patch to remove the c99 options which are currently in `module_list.py`.\n> \n> I also thought about doing so, but I think we shouldn't, as you can still override Python's `CFLAGS`, and it's good to have documented which modules actually (seem to) require C99...\n\nTo be more precise (tried a few hours ago, but forgot):  the `-std=gnu99` only appears in my Sage library build logs if I **unset** `CFLAGS`. (For \"safety\", I actually also unset `CPPFLAGS` and `CXXFLAGS`, FWIW).",
    "created_at": "2013-03-14T13:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175922",
    "user": "@nexttime"
}
```

Replying to [comment:14 leif]:
> Replying to [comment:13 jdemeyer]:
> > I added a patch to remove the c99 options which are currently in `module_list.py`.
> 
> I also thought about doing so, but I think we shouldn't, as you can still override Python's `CFLAGS`, and it's good to have documented which modules actually (seem to) require C99...

To be more precise (tried a few hours ago, but forgot):  the `-std=gnu99` only appears in my Sage library build logs if I **unset** `CFLAGS`. (For "safety", I actually also unset `CPPFLAGS` and `CXXFLAGS`, FWIW).



---

archive/issue_comments_175923.json:
```json
{
    "body": "P.S.: Unsetting `CFLAGS` is sufficient to get all of Python's.",
    "created_at": "2013-03-14T13:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175923",
    "user": "@nexttime"
}
```

P.S.: Unsetting `CFLAGS` is sufficient to get all of Python's.



---

archive/issue_comments_175924.json:
```json
{
    "body": "Replying to [comment:14 leif]:\n> as you can still override Python's `CFLAGS`\nNot really, Python's `spkg-install` would always add the C99 flag.\n\n> it's good to have documented which modules actually (seem to) require C99...\nWhy, what's the added value?  Removing all those extra C99 flags simplifies `module_list.py` and I'm always in favour of simplification.",
    "created_at": "2013-03-14T13:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175924",
    "user": "@jdemeyer"
}
```

Replying to [comment:14 leif]:
> as you can still override Python's `CFLAGS`
Not really, Python's `spkg-install` would always add the C99 flag.

> it's good to have documented which modules actually (seem to) require C99...
Why, what's the added value?  Removing all those extra C99 flags simplifies `module_list.py` and I'm always in favour of simplification.



---

archive/issue_comments_175925.json:
```json
{
    "body": "OK, removing the C99 flags can be moved to a new ticket: #14268",
    "created_at": "2013-03-14T13:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175925",
    "user": "@jdemeyer"
}
```

OK, removing the C99 flags can be moved to a new ticket: #14268



---

archive/issue_comments_175926.json:
```json
{
    "body": "Replying to [comment:17 jdemeyer]:\n> Replying to [comment:14 leif]:\n> > as you can still override Python's `CFLAGS`\n> Not really, Python's `spkg-install` would always add the C99 flag.\n\nYou probably misunderstood me.\n\nDo `env CFLAGS=\"-DFOO\" ./sage -ba` and the `-std=gnu99` vanishes, so we must not remove `-std=c99` from the `extra_compile_flags` (or what it's called).\n\nAs an alternative (I see no reason for), unconditionally (except for C++ sources perhaps) explicitly add `-std=gnu99` in `setup.py`.",
    "created_at": "2013-03-14T14:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175926",
    "user": "@nexttime"
}
```

Replying to [comment:17 jdemeyer]:
> Replying to [comment:14 leif]:
> > as you can still override Python's `CFLAGS`
> Not really, Python's `spkg-install` would always add the C99 flag.

You probably misunderstood me.

Do `env CFLAGS="-DFOO" ./sage -ba` and the `-std=gnu99` vanishes, so we must not remove `-std=c99` from the `extra_compile_flags` (or what it's called).

As an alternative (I see no reason for), unconditionally (except for C++ sources perhaps) explicitly add `-std=gnu99` in `setup.py`.



---

archive/issue_comments_175927.json:
```json
{
    "body": "Building Sage 5.8.rc0 from scratch with this spkg on mark (Solaris 5.10, GCC 4.7.0, CFLAGS et al. not set), I get a lot of (additional, I think) warnings, and at least SageNB and the Sage library fail to build:\n\n\n```\n...\nBuilding modified file sage/ext/interpreters/wrapper_el.pyx.\nExecuting 341 commands (using 1 thread)\nTraceback (most recent call last):\n  File \"setup.py\", line 835, in <module>\n    execute_list_of_commands(queue)\n  File \"setup.py\", line 278, in execute_list_of_commands\n    execute_list_of_commands_in_parallel(command_list, nthreads)\n  File \"setup.py\", line 226, in execute_list_of_commands_in_parallel\n    from multiprocessing import Pool\n  File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python/multiprocessing/__init__.py\", line 84, in <module>\n    import _multiprocessing\nImportError: No module named _multiprocessing\nError installing modified sage library code.\nERROR installing Sage\n```\n\n(Haven't investigated the Python build log yet.)\n\nSageNB:\n\n```\n...\nProcessing zope.interface-4.0.3.tar.gz\nRunning zope.interface-4.0.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-TRxDqq/zope.interface-4.0.3/egg-dist-tmp-5XxIwA\nIn file included from /usr/include/limits.h:18:0,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:169,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/syslimits.h:7,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:34,\n                 from /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/Python.h:19,\n                 from src/zope/interface/_zope_interface_coptimizations.c:15:\n/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h\n:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\n********************************************************************************\nWARNING:\n\n        An optional code optimization (C extension) could not be compiled.\n\n        Optimizations for this package will not be available!\n()\ncommand 'gcc' failed with exit status 1\n********************************************************************************\nAdding zope.interface 4.0.3 to easy-install.pth file\n...\nRunning Twisted-12.3.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-lSWXxx/Twisted-12.3.0/egg-dist-tmp-mH8uhP\nIn file included from /usr/include/sys/types.h:18:0,\n                 from /usr/include/rpc/types.h:16,\n                 from /usr/include/rpc/rpc.h:19,\n                 from conftest.c:1:\n/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h\n:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nIn file included from /usr/include/rpc/rpcb_clnt.h:31:0,\n                 from /usr/include/rpc/rpc.h:46,\n                 from conftest.c:1:\n/usr/include/rpc/rpcb_prot.h:162:3: error: unknown type name 'u_int'\n/usr/include/rpc/rpcb_prot.h:198:3: error: unknown type name 'u_int'\n/usr/include/rpc/rpcb_prot.h:226:2: error: unknown type name 'u_int'\n/usr/include/rpc/rpcb_prot.h:479:1: error: unknown type name 'u_int'\n/usr/include/rpc/rpcb_prot.h:492:1: error: unknown type name 'u_int'\nconftest.c:1:23: fatal error: sys/epoll.h: No such file or directory\ncompilation terminated.\nIn file included from /usr/include/limits.h:18:0,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:169,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/syslimits.h:7,\n                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:34,\n                 from /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/Python.h:19,\n                 from twisted/test/raiser.c:4:\n/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h\n:341:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing Twisted-12.3.0.tar.bz2 !\n\nreal    0m28.292s\nuser    0m8.691s\nsys     0m2.294s\n************************************************************************\nError installing package sagenb-0.10.4\n************************************************************************\n```\n\n\nCountless warnings like\n\n```\n.../sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/pyconfig.h:1136:0: warning: \"_FILE_OFFSET_BITS\" redefined [enabled by default]\n```\n",
    "created_at": "2013-03-14T20:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175927",
    "user": "@nexttime"
}
```

Building Sage 5.8.rc0 from scratch with this spkg on mark (Solaris 5.10, GCC 4.7.0, CFLAGS et al. not set), I get a lot of (additional, I think) warnings, and at least SageNB and the Sage library fail to build:


```
...
Building modified file sage/ext/interpreters/wrapper_el.pyx.
Executing 341 commands (using 1 thread)
Traceback (most recent call last):
  File "setup.py", line 835, in <module>
    execute_list_of_commands(queue)
  File "setup.py", line 278, in execute_list_of_commands
    execute_list_of_commands_in_parallel(command_list, nthreads)
  File "setup.py", line 226, in execute_list_of_commands_in_parallel
    from multiprocessing import Pool
  File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python/multiprocessing/__init__.py", line 84, in <module>
    import _multiprocessing
ImportError: No module named _multiprocessing
Error installing modified sage library code.
ERROR installing Sage
```

(Haven't investigated the Python build log yet.)

SageNB:

```
...
Processing zope.interface-4.0.3.tar.gz
Running zope.interface-4.0.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-TRxDqq/zope.interface-4.0.3/egg-dist-tmp-5XxIwA
In file included from /usr/include/limits.h:18:0,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:169,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/syslimits.h:7,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:34,
                 from /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/Python.h:19,
                 from src/zope/interface/_zope_interface_coptimizations.c:15:
/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h
:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
********************************************************************************
WARNING:

        An optional code optimization (C extension) could not be compiled.

        Optimizations for this package will not be available!
()
command 'gcc' failed with exit status 1
********************************************************************************
Adding zope.interface 4.0.3 to easy-install.pth file
...
Running Twisted-12.3.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-lSWXxx/Twisted-12.3.0/egg-dist-tmp-mH8uhP
In file included from /usr/include/sys/types.h:18:0,
                 from /usr/include/rpc/types.h:16,
                 from /usr/include/rpc/rpc.h:19,
                 from conftest.c:1:
/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h
:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
In file included from /usr/include/rpc/rpcb_clnt.h:31:0,
                 from /usr/include/rpc/rpc.h:46,
                 from conftest.c:1:
/usr/include/rpc/rpcb_prot.h:162:3: error: unknown type name 'u_int'
/usr/include/rpc/rpcb_prot.h:198:3: error: unknown type name 'u_int'
/usr/include/rpc/rpcb_prot.h:226:2: error: unknown type name 'u_int'
/usr/include/rpc/rpcb_prot.h:479:1: error: unknown type name 'u_int'
/usr/include/rpc/rpcb_prot.h:492:1: error: unknown type name 'u_int'
conftest.c:1:23: fatal error: sys/epoll.h: No such file or directory
compilation terminated.
In file included from /usr/include/limits.h:18:0,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:169,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/syslimits.h:7,
                 from /usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/limits.h:34,
                 from /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/Python.h:19,
                 from twisted/test/raiser.c:4:
/usr/local/gcc-4.7.0/sparc-SunOS-ultrasparc3/lib/gcc/sparc-sun-solaris2.10/4.7.0/include-fixed/sys/feature_tests.h
:341:2: error: #error "Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications"
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing Twisted-12.3.0.tar.bz2 !

real    0m28.292s
user    0m8.691s
sys     0m2.294s
************************************************************************
Error installing package sagenb-0.10.4
************************************************************************
```


Countless warnings like

```
.../sage-5.8.rc0-gcc-4.7.0/local/include/python2.7/pyconfig.h:1136:0: warning: "_FILE_OFFSET_BITS" redefined [enabled by default]
```




---

archive/issue_comments_175928.json:
```json
{
    "body": "P.S.:  Nearly one year ago, I managed to successfully build Sage 5.0.beta13 (presumably with a couple of fixed spkgs) with GCC 4.7.0 on mark2.",
    "created_at": "2013-03-14T20:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175928",
    "user": "@nexttime"
}
```

P.S.:  Nearly one year ago, I managed to successfully build Sage 5.0.beta13 (presumably with a couple of fixed spkgs) with GCC 4.7.0 on mark2.



---

archive/issue_comments_175929.json:
```json
{
    "body": "I have updated my spkg at some point, did you try the most recent version?",
    "created_at": "2013-03-14T23:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175929",
    "user": "@jdemeyer"
}
```

I have updated my spkg at some point, did you try the most recent version?



---

archive/issue_comments_175930.json:
```json
{
    "body": "Replying to [comment:23 jdemeyer]:\n> I have updated my spkg at some point, did you try the most recent version?\n\nMost recent is a moving target...  I took the one dated March 13th 14:19 UTC.  (I didn't see any relevant changes in the changelog or the comments, so didn't bother to grab a new one later.  Now I see `-std=gnu99` meanwhile gets **ap**pended to `CFLAGS`, and IIRC adding `-D_XPG6` on Solaris is also new; any other relevant changes?)",
    "created_at": "2013-03-15T05:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175930",
    "user": "@nexttime"
}
```

Replying to [comment:23 jdemeyer]:
> I have updated my spkg at some point, did you try the most recent version?

Most recent is a moving target...  I took the one dated March 13th 14:19 UTC.  (I didn't see any relevant changes in the changelog or the comments, so didn't bother to grab a new one later.  Now I see `-std=gnu99` meanwhile gets **ap**pended to `CFLAGS`, and IIRC adding `-D_XPG6` on Solaris is also new; any other relevant changes?)



---

archive/issue_comments_175931.json:
```json
{
    "body": "I've now installed your updated Python spkg and `make`'d the rest (without setting `SAGE_UPGRADING`) on mark.\n\nDocumentation built, ptestlong in progress.",
    "created_at": "2013-03-15T11:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175931",
    "user": "@nexttime"
}
```

I've now installed your updated Python spkg and `make`'d the rest (without setting `SAGE_UPGRADING`) on mark.

Documentation built, ptestlong in progress.



---

archive/issue_comments_175932.json:
```json
{
    "body": "I get a couple of doctest \"errors\" of the form (still on mark):\n\n```\nExpected:\n    foo\nGot:\n    WARNING: IPython GUI event loop requires ctypes, %gui will not be available\n    foo\n```\n\n\n:-)",
    "created_at": "2013-03-15T14:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175932",
    "user": "@nexttime"
}
```

I get a couple of doctest "errors" of the form (still on mark):

```
Expected:
    foo
Got:
    WARNING: IPython GUI event loop requires ctypes, %gui will not be available
    foo
```


:-)



---

archive/issue_comments_175933.json:
```json
{
    "body": "Replying to [comment:26 leif]:\n> I get a couple of doctest \"errors\" of the form (still on mark):\n> {{{\n> Expected:\n>     foo\n> Got:\n>     WARNING: IPython GUI event loop requires ctypes, %gui will not be available\n>     foo\n> }}}\nAnd where do you get these errors, it would help if you mention the exact test.",
    "created_at": "2013-03-16T14:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175933",
    "user": "@jdemeyer"
}
```

Replying to [comment:26 leif]:
> I get a couple of doctest "errors" of the form (still on mark):
> {{{
> Expected:
>     foo
> Got:
>     WARNING: IPython GUI event loop requires ctypes, %gui will not be available
>     foo
> }}}
And where do you get these errors, it would help if you mention the exact test.



---

archive/issue_comments_175934.json:
```json
{
    "body": "Replying to [comment:24 leif]:\n> I see `-std=gnu99` meanwhile gets **ap**pended to `CFLAGS`\nThat was a mistake, it should be prepended, fixed now.\n\n> adding `-D_XPG6` on Solaris is also new\nIndeed, it is required at least for OpenSolaris (hawk).\n\n> any other relevant changes?\nRemoving `-fwrapv` since Python's `configure` now adds it for compilers named `*clang*`.",
    "created_at": "2013-03-16T14:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175934",
    "user": "@jdemeyer"
}
```

Replying to [comment:24 leif]:
> I see `-std=gnu99` meanwhile gets **ap**pended to `CFLAGS`
That was a mistake, it should be prepended, fixed now.

> adding `-D_XPG6` on Solaris is also new
Indeed, it is required at least for OpenSolaris (hawk).

> any other relevant changes?
Removing `-fwrapv` since Python's `configure` now adds it for compilers named `*clang*`.



---

archive/issue_comments_175935.json:
```json
{
    "body": "Changing assignee from tbd to @jdemeyer.",
    "created_at": "2013-03-16T14:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175935",
    "user": "@jdemeyer"
}
```

Changing assignee from tbd to @jdemeyer.



---

archive/issue_comments_175936.json:
```json
{
    "body": "Replying to [comment:27 jdemeyer]:\n> Replying to [comment:26 leif]:\n> > I get a couple of doctest \"errors\" of the form (still on mark):\n> > {{{\n> > Expected:\n> >     foo\n> > Got:\n> >     WARNING: IPython GUI event loop requires ctypes, %gui will not be available\n> >     foo\n> > }}}\n> And where do you get these errors, it would help if you mention the exact test.\n\nHaven't investigated further yet (will rebuild parts and rerun ptestlong later), but *I think<sup>TM</sup>* most of the following failures are of that kind:\n\n```\n\tsage -t  --long -force_lib devel/sage/sage/crypto/mq/sr.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/libs/ppl.pyx # 8 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/matrix/matrix_modn_dense.pyx # 5 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/matrix/matrix_modn_dense_template.pxi # 5 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/misc/interpreter.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/misc/temporary_file.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/parallel/decorate.py # 2 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/tests/cmdline.py # 9 doctests failed\n```\n\n\nMore details later;  [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/sage-5.8.rc0+14265-gcc-4.7.0-mark.ptestlong.v1.log)'s the \"preliminary\" log.",
    "created_at": "2013-03-16T15:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175936",
    "user": "@nexttime"
}
```

Replying to [comment:27 jdemeyer]:
> Replying to [comment:26 leif]:
> > I get a couple of doctest "errors" of the form (still on mark):
> > {{{
> > Expected:
> >     foo
> > Got:
> >     WARNING: IPython GUI event loop requires ctypes, %gui will not be available
> >     foo
> > }}}
> And where do you get these errors, it would help if you mention the exact test.

Haven't investigated further yet (will rebuild parts and rerun ptestlong later), but *I think<sup>TM</sup>* most of the following failures are of that kind:

```
	sage -t  --long -force_lib devel/sage/sage/crypto/mq/sr.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/libs/ppl.pyx # 8 doctests failed
	sage -t  --long -force_lib devel/sage/sage/matrix/matrix_modn_dense.pyx # 5 doctests failed
	sage -t  --long -force_lib devel/sage/sage/matrix/matrix_modn_dense_template.pxi # 5 doctests failed
	sage -t  --long -force_lib devel/sage/sage/misc/interpreter.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/misc/temporary_file.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/parallel/decorate.py # 2 doctests failed
	sage -t  --long -force_lib devel/sage/sage/tests/cmdline.py # 9 doctests failed
```


More details later;  [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/sage-5.8.rc0+14265-gcc-4.7.0-mark.ptestlong.v1.log)'s the "preliminary" log.



---

archive/issue_comments_175937.json:
```json
{
    "body": "`sage/parallel/decorate.py` passed now (tested separately; no rebuilds yet).\n\nAll failures in `sage/libs/ppl.pyx` are (apparently reproducibly) `Expected: foo Got: WARNING: ... foo`.  Same for `sage/misc/interpreter.py`; similar for `sage/misc/temporary_file.py` and `sage/tests/cmdline.py`.\n\nWhy t!** f!*** is IPython involved at all?\n\nWhen testing `sage/crypto/mq/sr.py`, I also get the warning at the beginning (but not in `Got:`), then a `RuntimeError: Bus Error`.  Same for `sage/matrix/matrix_modn_dense{.pyx,_template.pxi}`, plus some errors due to the previous bus error(s) I think.",
    "created_at": "2013-03-17T08:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175937",
    "user": "@nexttime"
}
```

`sage/parallel/decorate.py` passed now (tested separately; no rebuilds yet).

All failures in `sage/libs/ppl.pyx` are (apparently reproducibly) `Expected: foo Got: WARNING: ... foo`.  Same for `sage/misc/interpreter.py`; similar for `sage/misc/temporary_file.py` and `sage/tests/cmdline.py`.

Why t!** f!*** is IPython involved at all?

When testing `sage/crypto/mq/sr.py`, I also get the warning at the beginning (but not in `Got:`), then a `RuntimeError: Bus Error`.  Same for `sage/matrix/matrix_modn_dense{.pyx,_template.pxi}`, plus some errors due to the previous bus error(s) I think.



---

archive/issue_comments_175938.json:
```json
{
    "body": "Just found\n\n```\n.../spkg/build/python-2.7.3.p6/src/Modules/_ctypes/libffi/src/sparc/v9.o: file not recognized: Bad value\ncollect2: error: ld returned 1 exit status\n\nPython build finished, but the necessary bits to build these modules were not found:\n_bsddb             _ssl               _tkinter        \nbsddb185           gdbm               linuxaudiodev   \nossaudiodev                                           \nTo find the necessary bits, look in setup.py in detect_modules() for the module's name.\n\n\nFailed to build these modules:\n_ctypes            _curses            _curses_panel   \n```\n\nwhen (re)building the updated Python spkg.  So apparently `_ctypes` cannot be built because some objects are built 64-bit.",
    "created_at": "2013-03-17T09:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175938",
    "user": "@nexttime"
}
```

Just found

```
.../spkg/build/python-2.7.3.p6/src/Modules/_ctypes/libffi/src/sparc/v9.o: file not recognized: Bad value
collect2: error: ld returned 1 exit status

Python build finished, but the necessary bits to build these modules were not found:
_bsddb             _ssl               _tkinter        
bsddb185           gdbm               linuxaudiodev   
ossaudiodev                                           
To find the necessary bits, look in setup.py in detect_modules() for the module's name.


Failed to build these modules:
_ctypes            _curses            _curses_panel   
```

when (re)building the updated Python spkg.  So apparently `_ctypes` cannot be built because some objects are built 64-bit.



---

archive/issue_comments_175939.json:
```json
{
    "body": "I added a check in the spkg that `ctypes` can be imported, but I cannot reproduce your problem.",
    "created_at": "2013-03-17T14:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175939",
    "user": "@jdemeyer"
}
```

I added a check in the spkg that `ctypes` can be imported, but I cannot reproduce your problem.



---

archive/issue_comments_175940.json:
```json
{
    "body": "Replying to [comment:32 jdemeyer]:\n> I added a check in the spkg that `ctypes` can be imported, but I cannot reproduce your problem.\n\nWell, it previously worked without `_ctypes`, so why require it now?  Just for `%gui`?\n\nSomething with IPython (or doctesting) is broken, so that should (also) get fixed.  (I don't think the spkg here is causing it.)",
    "created_at": "2013-03-17T16:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175940",
    "user": "@nexttime"
}
```

Replying to [comment:32 jdemeyer]:
> I added a check in the spkg that `ctypes` can be imported, but I cannot reproduce your problem.

Well, it previously worked without `_ctypes`, so why require it now?  Just for `%gui`?

Something with IPython (or doctesting) is broken, so that should (also) get fixed.  (I don't think the spkg here is causing it.)



---

archive/issue_comments_175941.json:
```json
{
    "body": "Replying to [comment:31 leif]:\n> {{{\n> .../src/Modules/_ctypes/libffi/src/sparc/v9.o: file not recognized: Bad value\n> collect2: error: ld returned 1 exit status\n> ...\n> Failed to build these modules:\n> _ctypes            _curses            _curses_panel   \n> }}}\n\nThis goes back to Sage 5.2 and 5.0, with GCC 4.7.0, but apparently never caused a problem.",
    "created_at": "2013-03-17T16:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175941",
    "user": "@nexttime"
}
```

Replying to [comment:31 leif]:
> {{{
> .../src/Modules/_ctypes/libffi/src/sparc/v9.o: file not recognized: Bad value
> collect2: error: ld returned 1 exit status
> ...
> Failed to build these modules:
> _ctypes            _curses            _curses_panel   
> }}}

This goes back to Sage 5.2 and 5.0, with GCC 4.7.0, but apparently never caused a problem.



---

archive/issue_comments_175942.json:
```json
{
    "body": "With yesterday's spkg, it gets even weirder now:\n\n```\nWARNING: IPython GUI event loop requires ctypes, %gui will not be available\nTraceback (most recent call last):\n  File \"./spkg-install\", line 4, in <module>\n    from sage.all import save\n  File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/all.py\", line 70, in <module>\n    from sage.matrix.all     import *\n  File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/all.py\", line 1, in <module>\n    from matrix_space import MatrixSpace, is_MatrixSpace\n  File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 37, in <module>\n    import matrix_modn_dense\n  File \"matrix_modn_dense_template_header.pxi\", line 11, in init sage.matrix.matrix_modn_dense (sage/matrix/matrix_modn_dense.c:13934)\n  File \"matrix_integer_dense.pxd\", line 12, in init sage.matrix.matrix_modn_dense_float (sage/matrix/matrix_modn_dense_float.cpp:16937)\n  File \"linbox.pxd\", line 7, in init sage.matrix.matrix_integer_dense (sage/matrix/matrix_integer_dense.c:43265)\nImportError: ld.so.1: python2.7: fatal: relocation error: file /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/liblinboxsage.so.0: symbol _ZN6LinBox17NotImplementedYet12_errorStreamE: referenced symbol not found\n\nreal    0m16.342s\nuser    0m3.614s\nsys     0m1.785s\n************************************************************************\nError installing package conway_polynomials-0.4.p0\n************************************************************************\n```\n",
    "created_at": "2013-03-17T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175942",
    "user": "@nexttime"
}
```

With yesterday's spkg, it gets even weirder now:

```
WARNING: IPython GUI event loop requires ctypes, %gui will not be available
Traceback (most recent call last):
  File "./spkg-install", line 4, in <module>
    from sage.all import save
  File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/all.py", line 70, in <module>
    from sage.matrix.all     import *
  File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/all.py", line 1, in <module>
    from matrix_space import MatrixSpace, is_MatrixSpace
  File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 37, in <module>
    import matrix_modn_dense
  File "matrix_modn_dense_template_header.pxi", line 11, in init sage.matrix.matrix_modn_dense (sage/matrix/matrix_modn_dense.c:13934)
  File "matrix_integer_dense.pxd", line 12, in init sage.matrix.matrix_modn_dense_float (sage/matrix/matrix_modn_dense_float.cpp:16937)
  File "linbox.pxd", line 7, in init sage.matrix.matrix_integer_dense (sage/matrix/matrix_integer_dense.c:43265)
ImportError: ld.so.1: python2.7: fatal: relocation error: file /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/liblinboxsage.so.0: symbol _ZN6LinBox17NotImplementedYet12_errorStreamE: referenced symbol not found

real    0m16.342s
user    0m3.614s
sys     0m1.785s
************************************************************************
Error installing package conway_polynomials-0.4.p0
************************************************************************
```




---

archive/issue_comments_175943.json:
```json
{
    "body": "Replying to [comment:33 leif]:\n> Something with IPython (or doctesting) is broken\nIf the new IPython requires `ctypes`, then we should check for it.\n\nI feel like we're wandering away too much away from the essence of this ticket, which is ensuring that Python compiles the `isinf()` function. The fact that it doesn't work with GCC-4.7.0 doesn't matter for now.",
    "created_at": "2013-03-17T17:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175943",
    "user": "@jdemeyer"
}
```

Replying to [comment:33 leif]:
> Something with IPython (or doctesting) is broken
If the new IPython requires `ctypes`, then we should check for it.

I feel like we're wandering away too much away from the essence of this ticket, which is ensuring that Python compiles the `isinf()` function. The fact that it doesn't work with GCC-4.7.0 doesn't matter for now.



---

archive/issue_comments_175944.json:
```json
{
    "body": "Replying to [comment:36 jdemeyer]:\n> Replying to [comment:33 leif]:\n> > Something with IPython (or doctesting) is broken\n> If the new IPython requires `ctypes`, then we should check for it.\n\nWell it doesn't, otherwise it wouldn't build, or issue an error message instead of just a warning.\n\nAnd as said, previous versions did build and work with GCC 4.7.0, so there's a regression.",
    "created_at": "2013-03-17T17:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175944",
    "user": "@nexttime"
}
```

Replying to [comment:36 jdemeyer]:
> Replying to [comment:33 leif]:
> > Something with IPython (or doctesting) is broken
> If the new IPython requires `ctypes`, then we should check for it.

Well it doesn't, otherwise it wouldn't build, or issue an error message instead of just a warning.

And as said, previous versions did build and work with GCC 4.7.0, so there's a regression.



---

archive/issue_comments_175945.json:
```json
{
    "body": "Replying to [comment:37 leif]:\n> And as said, previous versions did build and work with GCC 4.7.0, so there's a regression.\nDo you mean GCC-4.7.0 with GNU ld which is installed system-wide on mark or do you mean a custom-built GCC-4.7.0 with Sun ld? Because building Sage on mark with GNU ld never worked for me (at least `libpng` doesn't build).\n\nI'm going to try building Sage on mark with GCC-4.7.2 (the optional spkg) + Sun ld. If that works with this spkg, I think there is no reason to hold up this ticket.",
    "created_at": "2013-03-18T11:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175945",
    "user": "@jdemeyer"
}
```

Replying to [comment:37 leif]:
> And as said, previous versions did build and work with GCC 4.7.0, so there's a regression.
Do you mean GCC-4.7.0 with GNU ld which is installed system-wide on mark or do you mean a custom-built GCC-4.7.0 with Sun ld? Because building Sage on mark with GNU ld never worked for me (at least `libpng` doesn't build).

I'm going to try building Sage on mark with GCC-4.7.2 (the optional spkg) + Sun ld. If that works with this spkg, I think there is no reason to hold up this ticket.



---

archive/issue_comments_175946.json:
```json
{
    "body": "Replying to [comment:39 jdemeyer]:\n> Replying to [comment:37 leif]:\n> > And as said, previous versions did build and work with GCC 4.7.0, so there's a regression.\n> Do you mean GCC-4.7.0 with GNU ld which is installed system-wide on mark or do you mean a custom-built GCC-4.7.0 with Sun ld? Because building Sage on mark with GNU ld never worked for me (at least `libpng` doesn't build).\n\nThe system-wide GCC 4.7.0 (which is configured to use GNU ld).\n\nUnfortunately, with the default setup on the skynet machines (`/usr/local/skynet_bash_profile`), the Sun linker comes first in `PATH`, so some packages get confused, assuming the wrong linker.\n\nE.g. to build libpng, you have to\n\n```sh\nexport LD=/usr/local/binutils-2.22/sparc-SunOS-ultrasparc3-gcc-4.6.2-without-zlib/bin/ld\n```\n\n\n\n\n> I'm going to try building Sage on mark with GCC-4.7.2 (the optional spkg) + Sun ld. If that works with this spkg, I think there is no reason to hold up this ticket.\n\nYes.  I was going to try that as well.  (I'll open a ticket for building Singular with GCC 4.7.x on Solaris soon; only needs a trivial patch to `kernel/bigintmat.cc`.)\n\nThe odd IPython warnings (and/or making Python properly build `_ctypes` on Solaris SPARC) should be fixed on another ticket.\n\nHopefully Sage 5.9.beta* gets out soon... ;-)",
    "created_at": "2013-03-18T12:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175946",
    "user": "@nexttime"
}
```

Replying to [comment:39 jdemeyer]:
> Replying to [comment:37 leif]:
> > And as said, previous versions did build and work with GCC 4.7.0, so there's a regression.
> Do you mean GCC-4.7.0 with GNU ld which is installed system-wide on mark or do you mean a custom-built GCC-4.7.0 with Sun ld? Because building Sage on mark with GNU ld never worked for me (at least `libpng` doesn't build).

The system-wide GCC 4.7.0 (which is configured to use GNU ld).

Unfortunately, with the default setup on the skynet machines (`/usr/local/skynet_bash_profile`), the Sun linker comes first in `PATH`, so some packages get confused, assuming the wrong linker.

E.g. to build libpng, you have to

```sh
export LD=/usr/local/binutils-2.22/sparc-SunOS-ultrasparc3-gcc-4.6.2-without-zlib/bin/ld
```




> I'm going to try building Sage on mark with GCC-4.7.2 (the optional spkg) + Sun ld. If that works with this spkg, I think there is no reason to hold up this ticket.

Yes.  I was going to try that as well.  (I'll open a ticket for building Singular with GCC 4.7.x on Solaris soon; only needs a trivial patch to `kernel/bigintmat.cc`.)

The odd IPython warnings (and/or making Python properly build `_ctypes` on Solaris SPARC) should be fixed on another ticket.

Hopefully Sage 5.9.beta* gets out soon... ;-)



---

archive/issue_comments_175947.json:
```json
{
    "body": "Replying to [comment:40 leif]:\n> (I'll open a ticket for building Singular with GCC 4.7.x on Solaris soon; only needs a trivial patch to `kernel/bigintmat.cc`.)\n\nP.S.:  A patched version of `bigintmat.cc` is [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/bigintmat.cc).",
    "created_at": "2013-03-18T12:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175947",
    "user": "@nexttime"
}
```

Replying to [comment:40 leif]:
> (I'll open a ticket for building Singular with GCC 4.7.x on Solaris soon; only needs a trivial patch to `kernel/bigintmat.cc`.)

P.S.:  A patched version of `bigintmat.cc` is [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/bigintmat.cc).



---

archive/issue_comments_175948.json:
```json
{
    "body": "See #14296 for `$LD` troubles.",
    "created_at": "2013-03-18T13:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175948",
    "user": "@jdemeyer"
}
```

See #14296 for `$LD` troubles.



---

archive/issue_comments_175949.json:
```json
{
    "body": "Replying to [comment:35 leif]:\n> With yesterday's spkg, it gets even weirder now:\n> {{{\n> WARNING: IPython GUI event loop requires ctypes, %gui will not be available\n> Traceback (most recent call last):\n>   File \"./spkg-install\", line 4, in <module>\n>     from sage.all import save\n>   File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/all.py\", line 70, in <module>\n>     from sage.matrix.all     import *\n>   File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/all.py\", line 1, in <module>\n>     from matrix_space import MatrixSpace, is_MatrixSpace\n>   File \"/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 37, in <module>\n>     import matrix_modn_dense\n>   File \"matrix_modn_dense_template_header.pxi\", line 11, in init sage.matrix.matrix_modn_dense (sage/matrix/matrix_modn_dense.c:13934)\n>   File \"matrix_integer_dense.pxd\", line 12, in init sage.matrix.matrix_modn_dense_float (sage/matrix/matrix_modn_dense_float.cpp:16937)\n>   File \"linbox.pxd\", line 7, in init sage.matrix.matrix_integer_dense (sage/matrix/matrix_integer_dense.c:43265)\n> ImportError: ld.so.1: python2.7: fatal: relocation error: file /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/liblinboxsage.so.0: symbol _ZN6LinBox17NotImplementedYet12_errorStreamE: referenced symbol not found\n> \n> real    0m16.342s\n> user    0m3.614s\n> sys     0m1.785s\n> ************************************************************************\n> Error installing package conway_polynomials-0.4.p0\n> ************************************************************************\n> }}}\n\nI've now successfully built *vanilla* Sage 5.8.rc0 (plus the fix for Singular, cf. #14295) on mark2 (with `CFLAGS` et al. set, FWIW), and while I still get the IPython warnings, Sage at least starts up without errors.\n\nCurrently building the docs to afterwards run ptestlong.",
    "created_at": "2013-03-18T18:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175949",
    "user": "@nexttime"
}
```

Replying to [comment:35 leif]:
> With yesterday's spkg, it gets even weirder now:
> {{{
> WARNING: IPython GUI event loop requires ctypes, %gui will not be available
> Traceback (most recent call last):
>   File "./spkg-install", line 4, in <module>
>     from sage.all import save
>   File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/all.py", line 70, in <module>
>     from sage.matrix.all     import *
>   File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/all.py", line 1, in <module>
>     from matrix_space import MatrixSpace, is_MatrixSpace
>   File "/home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 37, in <module>
>     import matrix_modn_dense
>   File "matrix_modn_dense_template_header.pxi", line 11, in init sage.matrix.matrix_modn_dense (sage/matrix/matrix_modn_dense.c:13934)
>   File "matrix_integer_dense.pxd", line 12, in init sage.matrix.matrix_modn_dense_float (sage/matrix/matrix_modn_dense_float.cpp:16937)
>   File "linbox.pxd", line 7, in init sage.matrix.matrix_integer_dense (sage/matrix/matrix_integer_dense.c:43265)
> ImportError: ld.so.1: python2.7: fatal: relocation error: file /home/leif/Sage/release/build/mark/sage-5.8.rc0-gcc-4.7.0/local/lib/liblinboxsage.so.0: symbol _ZN6LinBox17NotImplementedYet12_errorStreamE: referenced symbol not found
> 
> real    0m16.342s
> user    0m3.614s
> sys     0m1.785s
> ************************************************************************
> Error installing package conway_polynomials-0.4.p0
> ************************************************************************
> }}}

I've now successfully built *vanilla* Sage 5.8.rc0 (plus the fix for Singular, cf. #14295) on mark2 (with `CFLAGS` et al. set, FWIW), and while I still get the IPython warnings, Sage at least starts up without errors.

Currently building the docs to afterwards run ptestlong.



---

archive/issue_comments_175950.json:
```json
{
    "body": "It seems that OpenSolaris is much more strict about C99. In particular, there doesn't seem to be a clean way to compile both C and C++ with the same compiler options.\n\nSo perhaps we should try compiling C89 but with `-D__C99FEATURES__` which enables a few things from C99 such as `isinf()`.",
    "created_at": "2013-03-19T09:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175950",
    "user": "@jdemeyer"
}
```

It seems that OpenSolaris is much more strict about C99. In particular, there doesn't seem to be a clean way to compile both C and C++ with the same compiler options.

So perhaps we should try compiling C89 but with `-D__C99FEATURES__` which enables a few things from C99 such as `isinf()`.



---

archive/issue_comments_175951.json:
```json
{
    "body": "Replying to [comment:44 jdemeyer]:\n> So perhaps we should try compiling C89 but with `-D__C99FEATURES__` which enables a few things from C99 such as `isinf()`.\n\nSeems much better.  `-D_XPG6` is a hack anyway, as both `_XOPEN_SOURCE=600` and _POSIX_C_SOURCE=200112L` require C99.\n\nOr define your own macros `#ifndef`... ;-)",
    "created_at": "2013-03-19T10:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175951",
    "user": "@nexttime"
}
```

Replying to [comment:44 jdemeyer]:
> So perhaps we should try compiling C89 but with `-D__C99FEATURES__` which enables a few things from C99 such as `isinf()`.

Seems much better.  `-D_XPG6` is a hack anyway, as both `_XOPEN_SOURCE=600` and _POSIX_C_SOURCE=200112L` require C99.

Or define your own macros `#ifndef`... ;-)



---

archive/issue_comments_175952.json:
```json
{
    "body": "Replying to [comment:26 leif]:\n> I get a couple of doctest \"errors\" of the form (still on mark):\n> {{{\n> Expected:\n>     foo\n> Got:\n>     WARNING: IPython GUI event loop requires ctypes, %gui will not be available\n>     foo\n> }}}\n\nThis is now #14309.",
    "created_at": "2013-03-19T10:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175952",
    "user": "@nexttime"
}
```

Replying to [comment:26 leif]:
> I get a couple of doctest "errors" of the form (still on mark):
> {{{
> Expected:
>     foo
> Got:
>     WARNING: IPython GUI event loop requires ctypes, %gui will not be available
>     foo
> }}}

This is now #14309.



---

archive/issue_comments_175953.json:
```json
{
    "body": "This spkg has been completely buildbot-tested and works fine. Needs review...",
    "created_at": "2013-03-22T08:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175953",
    "user": "@jdemeyer"
}
```

This spkg has been completely buildbot-tested and works fine. Needs review...



---

archive/issue_comments_175954.json:
```json
{
    "body": "Diff for the Python spkg, for review only",
    "created_at": "2013-03-24T14:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175954",
    "user": "@jdemeyer"
}
```

Diff for the Python spkg, for review only



---

archive/issue_comments_175955.json:
```json
{
    "body": "Attachment [python-2.7.3.p6.diff](tarball://root/attachments/some-uuid/ticket14265/python-2.7.3.p6.diff) by @jdemeyer created at 2013-03-24 14:28:23",
    "created_at": "2013-03-24T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175955",
    "user": "@jdemeyer"
}
```

Attachment [python-2.7.3.p6.diff](tarball://root/attachments/some-uuid/ticket14265/python-2.7.3.p6.diff) by @jdemeyer created at 2013-03-24 14:28:23



---

archive/issue_comments_175956.json:
```json
{
    "body": "OK I bite. I note from the diff that on OS X you prepend --disable-toolbox-glue rather than appending it to PYTHON_CONFIGURE. Does it mean that it is safe for user to override this option? If it is safe why is it disabled by default?",
    "created_at": "2013-03-28T10:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175956",
    "user": "@kiwifb"
}
```

OK I bite. I note from the diff that on OS X you prepend --disable-toolbox-glue rather than appending it to PYTHON_CONFIGURE. Does it mean that it is safe for user to override this option? If it is safe why is it disabled by default?



---

archive/issue_comments_175957.json:
```json
{
    "body": "Replying to [comment:50 fbissey]:\n> I note from the diff that on OS X you prepend --disable-toolbox-glue rather than appending it to PYTHON_CONFIGURE. Does it mean that it is safe for user to override this option?\nNo.\n\nIt's all about giving the user at least the *possibility* to override this option. In general, we should never force things on the user, it the user wants to do stupid things, he should be able to.",
    "created_at": "2013-03-28T17:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175957",
    "user": "@jdemeyer"
}
```

Replying to [comment:50 fbissey]:
> I note from the diff that on OS X you prepend --disable-toolbox-glue rather than appending it to PYTHON_CONFIGURE. Does it mean that it is safe for user to override this option?
No.

It's all about giving the user at least the *possibility* to override this option. In general, we should never force things on the user, it the user wants to do stupid things, he should be able to.



---

archive/issue_comments_175958.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-03-29T03:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175958",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175959.json:
```json
{
    "body": "I am ok with that line of reasonning. It was different from the original handling. spkg looks ok to me and only touch solaris which has been tested positive that.",
    "created_at": "2013-03-29T03:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175959",
    "user": "@kiwifb"
}
```

I am ok with that line of reasonning. It was different from the original handling. spkg looks ok to me and only touch solaris which has been tested positive that.



---

archive/issue_comments_175960.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-03-29T04:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14061#issuecomment-175960",
    "user": "@jdemeyer"
}
```

Resolution: fixed
