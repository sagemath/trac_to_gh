# Issue 19730: fix or remove cliquer

archive/issues_019730.json:
```json
{
    "body": "CC:  dimpase ncohen was\n\nThe installation of cliquer can fail randomly with:\n\n```\nerror: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/install_name_tool: changing install names or rpaths can't be redone for: /Users/vbraun/Code/binary-pkg/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391yaj24ng0bmdu/local/lib/libcliquer.dylib (for architecture x86_64) because larger updated load commands do not fit (the program must be relinked, and you may need to use -headerpad or -headerpad_max_install_names)\n```\n\nReally the current cliquer has no business being a standard package:\n* No build system to speak of\n* Errors are not caught\n* A libcliquer.so is installed on Darwin (in addition to libcliquer.dylib)\n\nIssue created by migration from https://trac.sagemath.org/ticket/19967\n\n",
    "created_at": "2016-01-26T20:39:33Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "fix or remove cliquer",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19730",
    "user": "vbraun"
}
```
CC:  dimpase ncohen was

The installation of cliquer can fail randomly with:

```
error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/install_name_tool: changing install names or rpaths can't be redone for: /Users/vbraun/Code/binary-pkg/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391yaj24ng0bmdu/local/lib/libcliquer.dylib (for architecture x86_64) because larger updated load commands do not fit (the program must be relinked, and you may need to use -headerpad or -headerpad_max_install_names)
```

Really the current cliquer has no business being a standard package:
* No build system to speak of
* Errors are not caught
* A libcliquer.so is installed on Darwin (in addition to libcliquer.dylib)

Issue created by migration from https://trac.sagemath.org/ticket/19967





---

archive/issue_comments_271201.json:
```json
{
    "body": "I'll let it burn in autohell, to begin with. Wish me luck. Hopefully this at least makes it installable everywhere we need...",
    "created_at": "2016-01-26T20:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271201",
    "user": "dimpase"
}
```

I'll let it burn in autohell, to begin with. Wish me luck. Hopefully this at least makes it installable everywhere we need...



---

archive/issue_comments_271202.json:
```json
{
    "body": "Replying to [comment:2 dimpase]:\n> I'll let it burn in autohell, to begin with. Wish me luck. Hopefully this at least makes it installable everywhere we need...\n\nluck.",
    "created_at": "2016-01-26T21:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271202",
    "user": "fbissey"
}
```

Replying to [comment:2 dimpase]:
> I'll let it burn in autohell, to begin with. Wish me luck. Hopefully this at least makes it installable everywhere we need...

luck.



---

archive/issue_comments_271203.json:
```json
{
    "body": "https://github.com/dimpase/autocliquer has the dirty stuff done; one can build shared libs on Linux and OSX and cliquer's own tests pass. I don't know how to properly hook the tests into the autohell (so that `make check` does the right thing), please advice (or submit a pull request :-))\n\n`make check` should run `test/testcases`, reading data from the same directory.\n\n what the the right Makefile.am magic for them?\n\nSimilarly, there are `include/cliquer/test*` files that should not really be installed, they only needed for `make check`\n\nI can't also figure out how to set up the proper version number on the `.so` file. It's again something for `configure.ac` or one of `Makefile.am`.",
    "created_at": "2016-01-27T00:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271203",
    "user": "dimpase"
}
```

https://github.com/dimpase/autocliquer has the dirty stuff done; one can build shared libs on Linux and OSX and cliquer's own tests pass. I don't know how to properly hook the tests into the autohell (so that `make check` does the right thing), please advice (or submit a pull request :-))

`make check` should run `test/testcases`, reading data from the same directory.

 what the the right Makefile.am magic for them?

Similarly, there are `include/cliquer/test*` files that should not really be installed, they only needed for `make check`

I can't also figure out how to set up the proper version number on the `.so` file. It's again something for `configure.ac` or one of `Makefile.am`.



---

archive/issue_comments_271204.json:
```json
{
    "body": "For proper version number it is in `configure.ac` and that's libtool stuff. Look at eclib for a nice example https://github.com/JohnCremona/eclib/blob/master/configure.ac I would recommend 1.0.0 to start with.\nfor the rest I imagine you'll take PR if we send them.",
    "created_at": "2016-01-27T00:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271204",
    "user": "fbissey"
}
```

For proper version number it is in `configure.ac` and that's libtool stuff. Look at eclib for a nice example https://github.com/JohnCremona/eclib/blob/master/configure.ac I would recommend 1.0.0 to start with.
for the rest I imagine you'll take PR if we send them.



---

archive/issue_comments_271205.json:
```json
{
    "body": "PR sent...",
    "created_at": "2016-01-27T03:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271205",
    "user": "vbraun"
}
```

PR sent...



---

archive/issue_comments_271206.json:
```json
{
    "body": "Replying to [comment:6 vbraun]:\n> PR sent...\nWhich PR to who?",
    "created_at": "2016-01-27T09:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271206",
    "user": "jdemeyer"
}
```

Replying to [comment:6 vbraun]:
> PR sent...
Which PR to who?



---

archive/issue_comments_271207.json:
```json
{
    "body": "Replying to [comment:7 jdemeyer]:\n> Replying to [comment:6 vbraun]:\n> > PR sent...\n> Which PR to who?\na PR to me on the github repo https://github.com/dimpase/autocliquer\n(thanks Volker!)\n\nI have already used it and make a proper testsuite; tests pass. Now to the version thing, and it will be ready for making its way into Sage.",
    "created_at": "2016-01-27T10:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271207",
    "user": "dimpase"
}
```

Replying to [comment:7 jdemeyer]:
> Replying to [comment:6 vbraun]:
> > PR sent...
> Which PR to who?
a PR to me on the github repo https://github.com/dimpase/autocliquer
(thanks Volker!)

I have already used it and make a proper testsuite; tests pass. Now to the version thing, and it will be ready for making its way into Sage.



---

archive/issue_comments_271208.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-27T13:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271208",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271209.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-27T13:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271209",
    "user": "dimpase"
}
```

New commits:



---

archive/issue_comments_271210.json:
```json
{
    "body": "oh, sorry, the same rotten develop branch of me --- will be fixed soon",
    "created_at": "2016-01-27T13:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271210",
    "user": "dimpase"
}
```

oh, sorry, the same rotten develop branch of me --- will be fixed soon



---

archive/issue_comments_271211.json:
```json
{
    "body": "you may meanwhile just review the last commit (\u200b05c5881)\n\nsorry for mess",
    "created_at": "2016-01-27T13:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271211",
    "user": "dimpase"
}
```

you may meanwhile just review the last commit (â€‹05c5881)

sorry for mess



---

archive/issue_comments_271212.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-27T13:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271212",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_271213.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-01-27T14:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271213",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_271214.json:
```json
{
    "body": "Why fork cliquer? Did you even try to report this upstream?",
    "created_at": "2016-01-27T14:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271214",
    "user": "jdemeyer"
}
```

Why fork cliquer? Did you even try to report this upstream?



---

archive/issue_comments_271215.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> Why fork cliquer? Did you even try to report this upstream?\nI know Patric, the maintainer, for over 20 years. I sent him an email, but he is a busy guy, and I am not sure how quickly he will react. Meanwhile this is all we have.",
    "created_at": "2016-01-27T14:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271215",
    "user": "dimpase"
}
```

Replying to [comment:13 jdemeyer]:
> Why fork cliquer? Did you even try to report this upstream?
I know Patric, the maintainer, for over 20 years. I sent him an email, but he is a busy guy, and I am not sure how quickly he will react. Meanwhile this is all we have.



---

archive/issue_comments_271216.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-01-27T14:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271216",
    "user": "dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_271217.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-01-27T14:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271217",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_271218.json:
```json
{
    "body": "Still: why fork cliquer instead of patching the sources?",
    "created_at": "2016-01-27T14:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271218",
    "user": "jdemeyer"
}
```

Still: why fork cliquer instead of patching the sources?



---

archive/issue_comments_271219.json:
```json
{
    "body": "Replying to [comment:17 jdemeyer]:\n> Still: why fork cliquer instead of patching the sources? \n\nCause this is the only way I know how to fix it once and for good. And cause this is waste of anyone's time to do manual building of shared libraries instead of using appropriate tools.",
    "created_at": "2016-01-27T15:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271219",
    "user": "dimpase"
}
```

Replying to [comment:17 jdemeyer]:
> Still: why fork cliquer instead of patching the sources? 

Cause this is the only way I know how to fix it once and for good. And cause this is waste of anyone's time to do manual building of shared libraries instead of using appropriate tools.



---

archive/issue_comments_271220.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-01-27T15:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271220",
    "user": "dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_271221.json:
```json
{
    "body": "or do you mean to say \"why don't I create a mega-patch instead of being honest about it?\"",
    "created_at": "2016-01-27T15:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271221",
    "user": "dimpase"
}
```

or do you mean to say "why don't I create a mega-patch instead of being honest about it?"



---

archive/issue_comments_271222.json:
```json
{
    "body": "Replying to [comment:20 dimpase]:\n> or do you mean to say \"why don't I create a mega-patch instead of being honest about it?\"\nIf it is a mega-patch, you're probably doing it wrong.",
    "created_at": "2016-01-27T15:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271222",
    "user": "jdemeyer"
}
```

Replying to [comment:20 dimpase]:
> or do you mean to say "why don't I create a mega-patch instead of being honest about it?"
If it is a mega-patch, you're probably doing it wrong.



---

archive/issue_comments_271223.json:
```json
{
    "body": "Replying to [comment:21 jdemeyer]:\n> Replying to [comment:20 dimpase]:\n> > or do you mean to say \"why don't I create a mega-patch instead of being honest about it?\"\n> If it is a mega-patch, you're probably doing it wrong.\n\nMaybe you stop saying how wrong I am and review my changes?\nThis is getting silly. I made a sane directory layout to begin with, and created bog-standard Makefile.am and configure.ac\n\nI forwarded you the email I just got from the maintainer. Go figure. I don't think we have this option in the \"Report Upstream\" menu.",
    "created_at": "2016-01-27T15:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271223",
    "user": "dimpase"
}
```

Replying to [comment:21 jdemeyer]:
> Replying to [comment:20 dimpase]:
> > or do you mean to say "why don't I create a mega-patch instead of being honest about it?"
> If it is a mega-patch, you're probably doing it wrong.

Maybe you stop saying how wrong I am and review my changes?
This is getting silly. I made a sane directory layout to begin with, and created bog-standard Makefile.am and configure.ac

I forwarded you the email I just got from the maintainer. Go figure. I don't think we have this option in the "Report Upstream" menu.



---

archive/issue_comments_271224.json:
```json
{
    "body": "Replying to [comment:22 dimpase]:\n> I made a sane directory layout to begin with, and created bog-standard Makefile.am and configure.ac\n\nWhich is very good, I'm not complaining about that. I am only saying that *this is not a reason to fork cliquer*.",
    "created_at": "2016-01-27T16:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271224",
    "user": "jdemeyer"
}
```

Replying to [comment:22 dimpase]:
> I made a sane directory layout to begin with, and created bog-standard Makefile.am and configure.ac

Which is very good, I'm not complaining about that. I am only saying that *this is not a reason to fork cliquer*.



---

archive/issue_comments_271225.json:
```json
{
    "body": "Can you add a `--libdir=\"$SAGE_LOCAL/lib\"` to the configure? I'm not 100% sure if its still needed now that we have a lib64->lib symlink; But some distros use a complicated multilib naming scheme and we'd still break if that gets used.",
    "created_at": "2016-01-27T19:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271225",
    "user": "vbraun"
}
```

Can you add a `--libdir="$SAGE_LOCAL/lib"` to the configure? I'm not 100% sure if its still needed now that we have a lib64->lib symlink; But some distros use a complicated multilib naming scheme and we'd still break if that gets used.



---

archive/issue_comments_271226.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-27T20:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271226",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271227.json:
```json
{
    "body": "OK, done",
    "created_at": "2016-01-27T20:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271227",
    "user": "dimpase"
}
```

OK, done



---

archive/issue_comments_271228.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-27T20:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271228",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271229.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-28T17:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19730#issuecomment-271229",
    "user": "vbraun"
}
```

Resolution: fixed
