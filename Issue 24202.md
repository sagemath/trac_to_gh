# Issue 24202: Avoid some performance problems in symbolics

Issue created by migration from https://trac.sagemath.org/ticket/24439

Original creator: rws

Original creation time: 2017-12-28 13:55:36

By replacing `if ex == 0:` with `ex.is_trivial_zero():` the ticket removes some surprising performance hogs in symbolics code.


---

Comment by rws created at 2017-12-28 13:57:28

New commits:


---

Comment by rws created at 2017-12-28 13:57:28

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-12-28 18:23:48

While I am not against these changes, I am slightly worried that, e.g., `is_unit` will not work in cases where it previously did, such as

```
sage: x = var('x')
sage: 1 - sin(x)^2 - cos(x)^2
-cos(x)^2 - sin(x)^2 + 1
sage: f = 1 - sin(x)^2 - cos(x)^2
sage: f
-cos(x)^2 - sin(x)^2 + 1
sage: f.is_trivial_zero()
False
sage: bool(f == 0)
True
sage: f.is_unit()
False
```



---

Comment by rws created at 2017-12-29 06:20:08

Right, I was rushing it. In principle there could be `is_trivial_unit` like `is_trivial_zero` and a note in `is_unit` as to performance.


---

Comment by git created at 2017-12-31 08:06:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2017-12-31 08:08:09

I just reverted and added a note. Please review.


---

Comment by tscrim created at 2017-12-31 16:35:05

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-12-31 16:35:05

Thanks.


---

Comment by vbraun created at 2018-01-01 21:32:34

Resolution: fixed
