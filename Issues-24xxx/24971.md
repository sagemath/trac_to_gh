# Issue 24971: "0 = x" is preparsed very badly

archive/issues_024734.json:
```json
{
    "body": "```\nsage: preparse(\"0 = x\")\n'__tmp__=var(\"0\"); Integer = symbolic_expression(x).function(0)'\n```\nThis is because `0 = x` becomes `Integer(0) = x` which is interpreted as defining a function `Integer` in the variable `0`.\n\nObserved in [this ask.sagemath question](https://ask.sagemath.org/question/41524/local-variable-integer-referenced-before-assignment/).\n\nCC:  @slel\n\nKeywords: preparser\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/24971\n\n",
    "created_at": "2018-03-14T03:06:18Z",
    "labels": [
        "component: user interface",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "\"0 = x\" is preparsed very badly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24971",
    "user": "https://github.com/kcrisman"
}
```
```
sage: preparse("0 = x")
'__tmp__=var("0"); Integer = symbolic_expression(x).function(0)'
```
This is because `0 = x` becomes `Integer(0) = x` which is interpreted as defining a function `Integer` in the variable `0`.

Observed in [this ask.sagemath question](https://ask.sagemath.org/question/41524/local-variable-integer-referenced-before-assignment/).

CC:  @slel

Keywords: preparser

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/24971





---

archive/issue_comments_369688.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n f()\n ```\n-Naturally, the second line of the function is totally invalid Python.  But Sage allows it in this context (removing `v=1` makes the preparser know this is a problem) by instead raising a different, ***very confusing*** error:\n+Naturally, the second line of the function is totally invalid Python.  But Sage allows it in this context (removing `v=1` makes the preparser know this is a problem, and taking it outside a function likewise) by instead raising a different, ***very confusing*** error:\n \n ```\n       1 def f():\n``````\n",
    "created_at": "2018-03-14T03:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24971#issuecomment-369688",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 f()
 ```
-Naturally, the second line of the function is totally invalid Python.  But Sage allows it in this context (removing `v=1` makes the preparser know this is a problem) by instead raising a different, ***very confusing*** error:
+Naturally, the second line of the function is totally invalid Python.  But Sage allows it in this context (removing `v=1` makes the preparser know this is a problem, and taking it outside a function likewise) by instead raising a different, ***very confusing*** error:
 
 ```
       1 def f():
``````




---

archive/issue_comments_369689.json:
```json
{
    "body": "<a id='comment:2'></a>This must happen because of double preparsing:\n\n```\n0 = p\n```\nbecomes\n\n```\nInteger(0) = p\n```\nwhich is interpreted as a function definition of the function `Integer` in the variable `0`.",
    "created_at": "2018-03-14T06:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24971#issuecomment-369689",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>This must happen because of double preparsing:

```
0 = p
```
becomes

```
Integer(0) = p
```
which is interpreted as a function definition of the function `Integer` in the variable `0`.



---

archive/issue_comments_369690.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+```\n+sage: preparse(\"0 = x\")\n+'__tmp__=var(\"0\"); Integer = symbolic_expression(x).function(0)'\n+```\n+This is because `0 = x` becomes `Integer(0) = x` which is interpreted as defining a function `Integer` in the variable `0`.\n \n+Observed in [this ask.sagemath question](https://ask.sagemath.org/question/41524/local-variable-integer-referenced-before-assignment/).\n \n Comment: 1\n \n``````\n",
    "created_at": "2018-03-14T10:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24971#issuecomment-369690",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+```
+sage: preparse("0 = x")
+'__tmp__=var("0"); Integer = symbolic_expression(x).function(0)'
+```
+This is because `0 = x` becomes `Integer(0) = x` which is interpreted as defining a function `Integer` in the variable `0`.
 
+Observed in [this ask.sagemath question](https://ask.sagemath.org/question/41524/local-variable-integer-referenced-before-assignment/).
 
 Comment: 1
 
``````




---

archive/issue_comments_369691.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to user interface.",
    "created_at": "2018-03-14T10:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24971#issuecomment-369691",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from PLEASE CHANGE to user interface.



---

archive/issue_comments_369692.json:
```json
{
    "body": "Changing keywords from \"\" to \"preparser\".",
    "created_at": "2020-10-09T13:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24971#issuecomment-369692",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "preparser".
