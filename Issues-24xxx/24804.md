# Issue 24804: py3: minor fixes to sage.libs.ntl

archive/issues_024567.json:
```json
{
    "body": "Two unrelated but (I think) small updates in `sage.libs.ntl`.  With these fixes (among others in unrelated modules) all the tests pass for `sage.libs.ntl` in my Python 3 branch.\n\nThe update to `ntl_ZZ_pX` allows it to take as an argument any object that implements the `Sequence` protocol, instead of just `(list, tuple)` exactly.  To summarize, this means classes that implement at least `__iter__`, `__len__`, and `__getitem__` (though to be clear, `dict` is is not a `Sequence`).  This means, among other things, it can accept `range` objects without any additional fuss, and there were several examples of this usage in the tests.\n\n**CC:**  @vinklein @jhpalmieri @kiwifb\n\n**Keywords:** ntl\n\n**Branch:** [public/ticket/24804](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/24804)\n\n**Commit:** [e2e31f35b62a7c8da831205567c8e1cdb43179bd](https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd)\n\n**Reviewer:** Vincent Klein\n\n**Author:** Erik Bray\n\n**Dependencies:** #26769\n\nIssue created by migration from https://trac.sagemath.org/ticket/24804\n\n",
    "closed_at": "2019-07-21T07:01:33Z",
    "created_at": "2018-02-21T11:42:12Z",
    "labels": [
        "component: python3",
        "bug",
        "duplicate"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "py3: minor fixes to sage.libs.ntl",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24804",
    "user": "https://github.com/embray"
}
```
Two unrelated but (I think) small updates in `sage.libs.ntl`.  With these fixes (among others in unrelated modules) all the tests pass for `sage.libs.ntl` in my Python 3 branch.

The update to `ntl_ZZ_pX` allows it to take as an argument any object that implements the `Sequence` protocol, instead of just `(list, tuple)` exactly.  To summarize, this means classes that implement at least `__iter__`, `__len__`, and `__getitem__` (though to be clear, `dict` is is not a `Sequence`).  This means, among other things, it can accept `range` objects without any additional fuss, and there were several examples of this usage in the tests.

**CC:**  @vinklein @jhpalmieri @kiwifb

**Keywords:** ntl

**Branch:** [public/ticket/24804](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/24804)

**Commit:** [e2e31f35b62a7c8da831205567c8e1cdb43179bd](https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd)

**Reviewer:** Vincent Klein

**Author:** Erik Bray

**Dependencies:** #26769

Issue created by migration from https://trac.sagemath.org/ticket/24804





---

archive/issue_comments_450311.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-02-21T11:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450311",
    "user": "https://github.com/embray"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_450312.json:
```json
{
    "body": "<a id='comment:2'></a>\nthere seems to be some failing doctests\n\nor at least one, see patchbot",
    "created_at": "2018-02-21T16:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450312",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
there seems to be some failing doctests

or at least one, see patchbot



---

archive/issue_comments_450313.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-02-21T21:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450313",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_450314.json:
```json
{
    "body": "<a id='comment:4'></a>\nYeah, the `SequenceABC` change might need a closer examination; see also #24815.  I still believe it's basically the right way to go, but Jeroen has pointed out some possible performance impact here.  I'm open to other ideas as long as the're flexible-enough to take any types that can be duck-typed as list-like.",
    "created_at": "2018-02-23T14:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450314",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
Yeah, the `SequenceABC` change might need a closer examination; see also #24815.  I still believe it's basically the right way to go, but Jeroen has pointed out some possible performance impact here.  I'm open to other ideas as long as the're flexible-enough to take any types that can be duck-typed as list-like.



---

archive/issue_events_071202.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71202"
}
```



---

archive/issue_events_071203.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71203"
}
```



---

archive/issue_events_071204.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71204"
}
```



---

archive/issue_comments_450315.json:
```json
{
    "body": "<a id='comment:6'></a>\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450315",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_events_071205.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71205"
}
```



---

archive/issue_events_071206.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71206"
}
```



---

archive/issue_comments_450316.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/python3/sage-libs-ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-libs-ntl)\" to \"[public/ticket/24804](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/24804)\".",
    "created_at": "2018-11-22T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450316",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/embray/python3/sage-libs-ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-libs-ntl)" to "[public/ticket/24804](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/24804)".



---

archive/issue_comments_450317.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-11-22T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450317",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_450318.json:
```json
{
    "body": "**Changing commit** from \"[710733024789049a9611bee15e1c37cfe27a1f86](https://github.com/sagemath/sagetrac-mirror/commit/710733024789049a9611bee15e1c37cfe27a1f86)\" to \"[42951cb51203677b1987737e38f27943cdc3f63f](https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f)\".",
    "created_at": "2018-11-22T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450318",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[710733024789049a9611bee15e1c37cfe27a1f86](https://github.com/sagemath/sagetrac-mirror/commit/710733024789049a9611bee15e1c37cfe27a1f86)" to "[42951cb51203677b1987737e38f27943cdc3f63f](https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f)".



---

archive/issue_comments_450319.json:
```json
{
    "body": "<a id='comment:8'></a>\nin order to move on, I propose a less controversial fix\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f\">42951cb</a></td><td><code>py3: some care for libs/ntl</code></td></tr></table>\n",
    "created_at": "2018-11-22T10:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450319",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
in order to move on, I propose a less controversial fix

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f">42951cb</a></td><td><code>py3: some care for libs/ntl</code></td></tr></table>




---

archive/issue_comments_450320.json:
```json
{
    "body": "<a id='comment:9'></a>\nThis is still pretty arbitrary.  I think it would be nice to at least have defined in one place a tuple of all the common sequence types both built into Python and maybe from Sage as well (e.g. vectors).\n\nIn lots of other places we have not explicitly added support for range arguments, so why in this one place?",
    "created_at": "2018-11-22T11:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450320",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
This is still pretty arbitrary.  I think it would be nice to at least have defined in one place a tuple of all the common sequence types both built into Python and maybe from Sage as well (e.g. vectors).

In lots of other places we have not explicitly added support for range arguments, so why in this one place?



---

archive/issue_comments_450321.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-11-22T18:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450321",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_450322.json:
```json
{
    "body": "<a id='comment:11'></a>\nI mean, if this specific fix will help make progress I'm not opposed to it, but then we should open a ticket to discuss some kind of general solution to handling sequence-like types in a consistent manner.",
    "created_at": "2018-11-23T12:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450322",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
I mean, if this specific fix will help make progress I'm not opposed to it, but then we should open a ticket to discuss some kind of general solution to handling sequence-like types in a consistent manner.



---

archive/issue_comments_450323.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20\">31152f9</a></td><td><code>trac 24804 fix by using xrange as type</code></td></tr></table>\n",
    "created_at": "2018-11-23T13:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20">31152f9</a></td><td><code>trac 24804 fix by using xrange as type</code></td></tr></table>




---

archive/issue_comments_450324.json:
```json
{
    "body": "**Changing commit** from \"[42951cb51203677b1987737e38f27943cdc3f63f](https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f)\" to \"[31152f9aceb9db428cbaf797e8fbcb00f2ab4e20](https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20)\".",
    "created_at": "2018-11-23T13:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[42951cb51203677b1987737e38f27943cdc3f63f](https://github.com/sagemath/sagetrac-mirror/commit/42951cb51203677b1987737e38f27943cdc3f63f)" to "[31152f9aceb9db428cbaf797e8fbcb00f2ab4e20](https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20)".



---

archive/issue_comments_450325.json:
```json
{
    "body": "<a id='comment:13'></a>\ngreen bot. I would prefer to keep the general discussion for somewhere else.",
    "created_at": "2018-11-23T16:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450325",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>
green bot. I would prefer to keep the general discussion for somewhere else.



---

archive/issue_comments_450326.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-11-23T16:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450326",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_450327.json:
```json
{
    "body": "<a id='comment:15'></a>\n> With these fixes (among others in unrelated modules) all the tests pass for sage.libs.ntl\n\n\nIt's currently false. There is still errors in sage.libs.ntl with this ticket:\n\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/libs/ntl/ntl_GF2X.pyx  # 2 doctests failed\nsage -t --long src/sage/libs/ntl/ntl_mat_GF2E.pyx  # 1 doctest failed\nsage -t --long src/sage/libs/ntl/ntl_GF2E.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2018-11-26T09:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450327",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:15'></a>
> With these fixes (among others in unrelated modules) all the tests pass for sage.libs.ntl


It's currently false. There is still errors in sage.libs.ntl with this ticket:


```
----------------------------------------------------------------------
sage -t --long src/sage/libs/ntl/ntl_GF2X.pyx  # 2 doctests failed
sage -t --long src/sage/libs/ntl/ntl_mat_GF2E.pyx  # 1 doctest failed
sage -t --long src/sage/libs/ntl/ntl_GF2E.pyx  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_450328.json:
```json
{
    "body": "<a id='comment:16'></a>\nyes, but still this is a little progress..",
    "created_at": "2018-11-26T09:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450328",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
yes, but still this is a little progress..



---

archive/issue_comments_450329.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [vklein](#comment%3A15):\n> > With these fixes (among others in unrelated modules) all the tests pass for sage.libs.ntl\n\n> \n> It's currently false. There is still errors in sage.libs.ntl with this ticket:\n> \n> \n> ```\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/libs/ntl/ntl_GF2X.pyx  # 2 doctests failed\n> sage -t --long src/sage/libs/ntl/ntl_mat_GF2E.pyx  # 1 doctest failed\n> sage -t --long src/sage/libs/ntl/ntl_GF2E.pyx  # 1 doctest failed\n> ----------------------------------------------------------------------\n> ```\n\n\n\"With these fixes *(among others in unrelated modules)*\" the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well.  I don't remember what those fixes would have been; this ticket was opened nine months ago.  I'll take another look though.  I haven't updated my Python 3 branch in too long...",
    "created_at": "2018-11-26T10:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450329",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Replying to [vklein](#comment%3A15):
> > With these fixes (among others in unrelated modules) all the tests pass for sage.libs.ntl

> 
> It's currently false. There is still errors in sage.libs.ntl with this ticket:
> 
> 
> ```
> ----------------------------------------------------------------------
> sage -t --long src/sage/libs/ntl/ntl_GF2X.pyx  # 2 doctests failed
> sage -t --long src/sage/libs/ntl/ntl_mat_GF2E.pyx  # 1 doctest failed
> sage -t --long src/sage/libs/ntl/ntl_GF2E.pyx  # 1 doctest failed
> ----------------------------------------------------------------------
> ```


"With these fixes *(among others in unrelated modules)*" the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well.  I don't remember what those fixes would have been; this ticket was opened nine months ago.  I'll take another look though.  I haven't updated my Python 3 branch in too long...



---

archive/issue_comments_450330.json:
```json
{
    "body": "<a id='comment:18'></a>\nISTM the remaining bug is caused by some `map` somewhere.  I'm looking  into it.",
    "created_at": "2018-11-26T11:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450330",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
ISTM the remaining bug is caused by some `map` somewhere.  I'm looking  into it.



---

archive/issue_comments_450331.json:
```json
{
    "body": "<a id='comment:19'></a>\nLooking at the Python code and C-API docs, there is in fact a C-level `PySequence` API: https://docs.python.org/2/c-api/sequence.html\n\nI believe it would be very useful to provide some thin wrappers around this to support sequence-like types generically, but more efficiently than going through the full `isinstance` check and ABC support (which is something I think still worth looking into making faster).",
    "created_at": "2018-11-26T11:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450331",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Looking at the Python code and C-API docs, there is in fact a C-level `PySequence` API: https://docs.python.org/2/c-api/sequence.html

I believe it would be very useful to provide some thin wrappers around this to support sequence-like types generically, but more efficiently than going through the full `isinstance` check and ABC support (which is something I think still worth looking into making faster).



---

archive/issue_comments_450332.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [embray](#comment%3A17):\n> Replying to [vklein](#comment%3A15):\n> > > With these fixes (among others in unrelated modules) all the tests pass for \n\n> the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well. \nOk my bad.",
    "created_at": "2018-11-26T12:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450332",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:20'></a>
Replying to [embray](#comment%3A17):
> Replying to [vklein](#comment%3A15):
> > > With these fixes (among others in unrelated modules) all the tests pass for 

> the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well. 
Ok my bad.



---

archive/issue_comments_450333.json:
```json
{
    "body": "**Reviewer:** Vincent Klein",
    "created_at": "2018-11-26T12:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450333",
    "user": "https://github.com/vinklein"
}
```

**Reviewer:** Vincent Klein



---

archive/issue_comments_450334.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-11-26T12:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450334",
    "user": "https://github.com/vinklein"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_450335.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2018-11-26T14:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450335",
    "user": "https://github.com/embray"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_450336.json:
```json
{
    "body": "<a id='comment:22'></a>\nI am working on an alternative.",
    "created_at": "2018-11-26T14:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450336",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
I am working on an alternative.



---

archive/issue_comments_450337.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [vklein](#comment%3A20):\n> Replying to [embray](#comment%3A17):\n> > Replying to [vklein](#comment%3A15):\n> > > > With these fixes (among others in unrelated modules) all the tests pass for \n\n> > the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well. \n> Ok my bad.\n\n\nApparently not really: The issue here *is* a `map()` call in `sage.libs.ntl` which could easily be converted to a list comprehension.  I think in my python3 branch it still worked because I changed some other interfaces to accept arbitrary iterables better, which is also just as good, but I think these `map()` calls could just as well be rewritten too.",
    "created_at": "2018-11-26T14:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450337",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
Replying to [vklein](#comment%3A20):
> Replying to [embray](#comment%3A17):
> > Replying to [vklein](#comment%3A15):
> > > > With these fixes (among others in unrelated modules) all the tests pass for 

> > the parenthesized part is important: these were fixes that I needed in `sage.libs.ntl` itself for those tests to pass, but this required some other fixes elsewhere as well. 
> Ok my bad.


Apparently not really: The issue here *is* a `map()` call in `sage.libs.ntl` which could easily be converted to a list comprehension.  I think in my python3 branch it still worked because I changed some other interfaces to accept arbitrary iterables better, which is also just as good, but I think these `map()` calls could just as well be rewritten too.



---

archive/issue_comments_450338.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d1c59f670a1312ce2f0cdb34e431b4d01ec3cb3\">9d1c59f</a></td><td><code>add a simple issequence implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d7066c898c4885ff33e5385b20d5892993cbc98\">1d7066c</a></td><td><code>add a special case for the most common case of list or tuple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79d5bdf2b1eaca0f7702fefbe78b60c0ccf14441\">79d5bdf</a></td><td><code>py3: some care for libs/ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62508e3b72301903d832fe9331f77222cd4b91cc\">62508e3</a></td><td><code>py3: replace a troublesome map() in ntl_GF2X._sage_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3407ae333384a978c0607764345a5d380706ae35\">3407ae3</a></td><td><code>cover more sequence types here by using issequence</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697\">56b866a</a></td><td><code>remove some defunct code</code></td></tr></table>\n",
    "created_at": "2018-11-26T15:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d1c59f670a1312ce2f0cdb34e431b4d01ec3cb3">9d1c59f</a></td><td><code>add a simple issequence implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d7066c898c4885ff33e5385b20d5892993cbc98">1d7066c</a></td><td><code>add a special case for the most common case of list or tuple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79d5bdf2b1eaca0f7702fefbe78b60c0ccf14441">79d5bdf</a></td><td><code>py3: some care for libs/ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62508e3b72301903d832fe9331f77222cd4b91cc">62508e3</a></td><td><code>py3: replace a troublesome map() in ntl_GF2X._sage_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3407ae333384a978c0607764345a5d380706ae35">3407ae3</a></td><td><code>cover more sequence types here by using issequence</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697">56b866a</a></td><td><code>remove some defunct code</code></td></tr></table>




---

archive/issue_comments_450339.json:
```json
{
    "body": "**Changing commit** from \"[31152f9aceb9db428cbaf797e8fbcb00f2ab4e20](https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20)\" to \"[56b866a7afe1193180ec4fad90f1da983e697697](https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697)\".",
    "created_at": "2018-11-26T15:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[31152f9aceb9db428cbaf797e8fbcb00f2ab4e20](https://github.com/sagemath/sagetrac-mirror/commit/31152f9aceb9db428cbaf797e8fbcb00f2ab4e20)" to "[56b866a7afe1193180ec4fad90f1da983e697697](https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697)".



---

archive/issue_comments_450340.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-11-26T15:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450340",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_450341.json:
```json
{
    "body": "<a id='comment:25'></a>\nUpdated to take advantage of #26769.  If it takes too long to agree on #26769 or something like it then let's revert back.  But I think this should work well.",
    "created_at": "2018-11-26T15:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450341",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
Updated to take advantage of #26769.  If it takes too long to agree on #26769 or something like it then let's revert back.  But I think this should work well.



---

archive/issue_comments_450342.json:
```json
{
    "body": "**Dependencies:** #26769",
    "created_at": "2018-11-26T15:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450342",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #26769



---

archive/issue_comments_450343.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-11-26T21:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450343",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_450344.json:
```json
{
    "body": "<a id='comment:26'></a>\nfailing doctests.. I would prefer to \"keep it simple-stupid\".",
    "created_at": "2018-11-26T21:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450344",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>
failing doctests.. I would prefer to "keep it simple-stupid".



---

archive/issue_comments_450345.json:
```json
{
    "body": "<a id='comment:27'></a>\nIt looks like the last failures were caused by the `raise TypeError` I added in https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697\n\nI just didn't understand that in that code it seems to assume that it's okay to initialize a `ntl_ZZ_pX` without actually initializing its `.x` attribute.  It struck me as ill-considered, but it at least seems that it was by design (at first glance it just looked like an oversight) so I'll revert that part for now.",
    "created_at": "2018-11-27T13:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450345",
    "user": "https://github.com/embray"
}
```

<a id='comment:27'></a>
It looks like the last failures were caused by the `raise TypeError` I added in https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697

I just didn't understand that in that code it seems to assume that it's okay to initialize a `ntl_ZZ_pX` without actually initializing its `.x` attribute.  It struck me as ill-considered, but it at least seems that it was by design (at first glance it just looked like an oversight) so I'll revert that part for now.



---

archive/issue_comments_450346.json:
```json
{
    "body": "<a id='comment:28'></a>\nIt looks like I was partially wrong too about there being no tests for initializing that type from a string.  The one test there was for it was very non-local, however, and the existing code was still somewhat wrong.  I'll just fix that up a bit.",
    "created_at": "2018-11-27T13:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450346",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
It looks like I was partially wrong too about there being no tests for initializing that type from a string.  The one test there was for it was very non-local, however, and the existing code was still somewhat wrong.  I'll just fix that up a bit.



---

archive/issue_comments_450347.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd\">e2e31f3</a></td><td><code>update some defunct code</code></td></tr></table>\n",
    "created_at": "2018-11-27T13:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd">e2e31f3</a></td><td><code>update some defunct code</code></td></tr></table>




---

archive/issue_comments_450348.json:
```json
{
    "body": "**Changing commit** from \"[56b866a7afe1193180ec4fad90f1da983e697697](https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697)\" to \"[e2e31f35b62a7c8da831205567c8e1cdb43179bd](https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd)\".",
    "created_at": "2018-11-27T13:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450348",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[56b866a7afe1193180ec4fad90f1da983e697697](https://github.com/sagemath/sagetrac-mirror/commit/56b866a7afe1193180ec4fad90f1da983e697697)" to "[e2e31f35b62a7c8da831205567c8e1cdb43179bd](https://github.com/sagemath/sagetrac-mirror/commit/e2e31f35b62a7c8da831205567c8e1cdb43179bd)".



---

archive/issue_comments_450349.json:
```json
{
    "body": "<a id='comment:30'></a>\nRetargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450349",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>
Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_events_071207.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71207"
}
```



---

archive/issue_events_071208.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71208"
}
```



---

archive/issue_events_071209.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71209"
}
```



---

archive/issue_events_071210.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71210"
}
```



---

archive/issue_comments_450350.json:
```json
{
    "body": "<a id='comment:31'></a>\nMoving all my in-progress tickets to 8.8 milestone.",
    "created_at": "2019-03-25T10:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450350",
    "user": "https://github.com/embray"
}
```

<a id='comment:31'></a>
Moving all my in-progress tickets to 8.8 milestone.



---

archive/issue_comments_450351.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [embray](#comment%3A25):\n> Updated to take advantage of #26769.  If it takes too long to agree on #26769 or something like it then let's revert back.  But I think this should work well.\n\n\nNow seems to be a good time to revert back to the simple-minded solution. Otherwise, we can give a green light to the under-the-carpet solution proposed in #27588",
    "created_at": "2019-04-06T20:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450351",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>
Replying to [embray](#comment%3A25):
> Updated to take advantage of #26769.  If it takes too long to agree on #26769 or something like it then let's revert back.  But I think this should work well.


Now seems to be a good time to revert back to the simple-minded solution. Otherwise, we can give a green light to the under-the-carpet solution proposed in #27588



---

archive/issue_comments_450352.json:
```json
{
    "body": "<a id='comment:33'></a>\nErik, after 5 months and no review for your proposal, would you oppose to revert to my previous branch public/ticket/24804, and keep your enhanced solution for later ?",
    "created_at": "2019-04-25T13:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450352",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
Erik, after 5 months and no review for your proposal, would you oppose to revert to my previous branch public/ticket/24804, and keep your enhanced solution for later ?



---

archive/issue_comments_450353.json:
```json
{
    "body": "<a id='comment:34'></a>\nCould you open a new ticket instead?  It's fine be me.  Of course someone *could* just review #26769 and come to a definitive conclusion on that and/or offer an alternative solution to the general problem.",
    "created_at": "2019-04-30T12:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450353",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
Could you open a new ticket instead?  It's fine be me.  Of course someone *could* just review #26769 and come to a definitive conclusion on that and/or offer an alternative solution to the general problem.



---

archive/issue_comments_450354.json:
```json
{
    "body": "<a id='comment:35'></a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450354",
    "user": "https://github.com/embray"
}
```

<a id='comment:35'></a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_071211.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71211"
}
```



---

archive/issue_events_071212.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71212"
}
```



---

archive/issue_comments_450355.json:
```json
{
    "body": "<a id='comment:36'></a>\nI propose to close this one, as all tests pass in libs/ntl",
    "created_at": "2019-07-14T09:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450355",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>
I propose to close this one, as all tests pass in libs/ntl



---

archive/issue_comments_450356.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2019-07-14T09:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450356",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_events_071213.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-14T09:34:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71213"
}
```



---

archive/issue_events_071214.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-14T09:34:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71214"
}
```



---

archive/issue_comments_450357.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-07-20T16:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450357",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_450358.json:
```json
{
    "body": "<a id='comment:38'></a>\nSounds good to me.",
    "created_at": "2019-07-20T16:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24804#issuecomment-450358",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:38'></a>
Sounds good to me.



---

archive/issue_events_071215.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-21T07:01:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24804#event-71215"
}
```
