# Issue 24564: Gluing of lattices

archive/issues_024327.json:
```json
{
    "body": "Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.\nIf `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)` is isotropical then we can define the \"gluing\" `L`, an overlattice of `L1 +...+ Ln`\n\nKeywords: IntegralLattice\n\nBranch/Commit: e4b326b264fda6c68999b5e7dc718f15665c2205\n\nReviewer: Simon Brandhorst\n\nAuthor: Paolo Menegatti\n\nDependencies: #24702\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24564\n\n",
    "closed_at": "2018-05-08T17:26:41Z",
    "created_at": "2018-01-19T10:07:02Z",
    "labels": [
        "component: quadratic forms"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Gluing of lattices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24564",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```
Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.
If `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)` is isotropical then we can define the "gluing" `L`, an overlattice of `L1 +...+ Ln`

Keywords: IntegralLattice

Branch/Commit: e4b326b264fda6c68999b5e7dc718f15665c2205

Reviewer: Simon Brandhorst

Author: Paolo Menegatti

Dependencies: #24702

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24564





---

archive/issue_comments_465125.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to quadratic forms.",
    "created_at": "2018-01-19T10:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465125",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing component from PLEASE CHANGE to quadratic forms.



---

archive/issue_comments_465126.json:
```json
{
    "body": "Changing keywords from \"lattices\" to \"IntegralLattice\".",
    "created_at": "2018-01-19T10:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465126",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing keywords from "lattices" to "IntegralLattice".



---

archive/issue_comments_465127.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,5 @@\n-Let L1,L2 two integer lattices and A_L1, A_L2 their discriminant groups.\n-If G1,G2 are subgroups of A_L1 and AL2 respectively and f:G1-->G2 an isomorphisme of group we could define the \"gluing\" L, a primitive extension of L1+L2-->L\n-\n-Keywords: lattices\n+Let `L1`,`L2` two integer lattices and `A_L1`, `A_L2` their discriminant groups.\n+If `G1`, `G2` are subgroups of `A_L1` and `A_L2` respectively and `f: G1 --> G2` an isomorphism of groups we can define the \"gluing\" `L`, a primitive extension of `L1 + L2 --> L`\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2018-01-19T10:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465127",
    "user": "https://github.com/simonbrandhorst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,5 @@
-Let L1,L2 two integer lattices and A_L1, A_L2 their discriminant groups.
-If G1,G2 are subgroups of A_L1 and AL2 respectively and f:G1-->G2 an isomorphisme of group we could define the "gluing" L, a primitive extension of L1+L2-->L
-
-Keywords: lattices
+Let `L1`,`L2` two integer lattices and `A_L1`, `A_L2` their discriminant groups.
+If `G1`, `G2` are subgroups of `A_L1` and `A_L2` respectively and `f: G1 --> G2` an isomorphism of groups we can define the "gluing" `L`, a primitive extension of `L1 + L2 --> L`
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_465128.json:
```json
{
    "body": "Changing branch from \"\" to \"u/pmenegat/primitive_extension_of_lattices\"",
    "created_at": "2018-01-25T20:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465128",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing branch from "" to "u/pmenegat/primitive_extension_of_lattices"



---

archive/issue_comments_465129.json:
```json
{
    "body": "Changing commit from \"\" to \"e6cae6d88dc018f6421a91fc4d9e073ab138644e\"",
    "created_at": "2018-02-09T22:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "e6cae6d88dc018f6421a91fc4d9e073ab138644e"



---

archive/issue_comments_465130.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-09T22:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465131.json:
```json
{
    "body": "Changing dependencies from \"\" to \"u/sbrandhorst/intersections_of_freequadraticmodules_have_the_wrong_ambient_module\"",
    "created_at": "2018-02-10T12:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465131",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing dependencies from "" to "u/sbrandhorst/intersections_of_freequadraticmodules_have_the_wrong_ambient_module"



---

archive/issue_comments_465132.json:
```json
{
    "body": "Changing dependencies from \"u/sbrandhorst/intersections_of_freequadraticmodules_have_the_wrong_ambient_module\" to \"#24702\"",
    "created_at": "2018-02-10T12:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465132",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing dependencies from "u/sbrandhorst/intersections_of_freequadraticmodules_have_the_wrong_ambient_module" to "#24702"



---

archive/issue_comments_465133.json:
```json
{
    "body": "Changing commit from \"e6cae6d88dc018f6421a91fc4d9e073ab138644e\" to \"95066709fc5a98a232185532eebcbd6c003656bd\"",
    "created_at": "2018-02-16T18:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e6cae6d88dc018f6421a91fc4d9e073ab138644e" to "95066709fc5a98a232185532eebcbd6c003656bd"



---

archive/issue_comments_465134.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-16T18:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465135.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2018-02-16T18:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465135",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_465136.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-\n+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.\n+If `G1`,...,`Gn` are subgroups of the `A_Li` and `fi: Gi --> AL` `n` morphism of groups, we can define the \"gluing\" `L`, a primitive extension of `L1 +...+ Ln --> L`\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2018-02-16T18:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465136",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-
+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.
+If `G1`,...,`Gn` are subgroups of the `A_Li` and `fi: Gi --> AL` `n` morphism of groups, we can define the "gluing" `L`, a primitive extension of `L1 +...+ Ln --> L`
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_465137.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-16T18:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465137",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_465138.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-19T06:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465138",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_465139.json:
```json
{
    "body": "<a id='comment:8'></a>The mul function is a good idea. But please make it a separate ticket.\n\nWhat you define is an extension - but it is not primitive.\nFor this consider your first example\n\n```\n    sage: from sage.modules.free_quadratic_module_integer_symmetric import PrimitiveExtension\n    sage: L1 = IntegralLattice(matrix([[4]]))\n    sage: g1 = L1.discriminant_group().gens()[0]\n    sage: glue = [[2*g1]]\n    sage: PrimitiveExtension([L1],glue)\n    Lattice of degree 1 and rank 1 over Integer Ring\n    Basis matrix:\n    [1]\n    Inner product matrix:\n    [1]\n    ....\n```\nA single lattice does not have any primitive extensions.\n\nYour code breaks if the lattices have a given basis different from the standard one.\nIt is not enough to just consider the gram matrices.:\n\n```\nsage: from sage.modules.free_quadratic_module_integer_symmetric import PrimitiveExtension\nsage: A = IntegralLattice(matrix.identity(2),basis=[(2,2)])\nsage: g = A.discriminant_group().gens()\nsage: PrimitiveExtension([A,A],[g,g])\n.....\nTypeError: unsupported operand parent(s) for *: 'Full MatrixSpace of 2 by 1 dense matrices over Integer Ring' and 'Free module of degree 2 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1/4 1/4]'\n```\n\n- I would suggest to enhance the `.direct_sum` method to eat a list of lattices (or a single lattice) - best make it a separate ticket.\n- For me a primitive extension is defined as follows:\n\nLet `L1`, `L2` be two lattices. Then a primitive extension is an overlattice `L`\n`L1 + L2 -- > L` such that `L1 * QQ` intersected with `L` is L1 and likewise for `L2`.\nThen Nikulin proved:\nA primitive extension is the same as giving a homomorphism\n`phi: AL1 -- > AL2` on the discriminant groups reversing the sign of the discriminant form:\n`q(x) = -q(phi(x))`.\n\nThen my suggestion is to define a method. \n\n```\ndef primitive_extension(self, L2, phi):\n\n   1. check that phi is a homomorphism reversing the sign\n   2. take the direct sum of L1 and L2\n   3. take the graph Gamma of phi inside A_L1 + A_L2\n   4. return (L1.direct_sum(L2)).overlattice(Gamma)\n```\nAnd maybe the morphisms defining the embeddings.",
    "created_at": "2018-02-19T06:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465139",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:8'></a>The mul function is a good idea. But please make it a separate ticket.

What you define is an extension - but it is not primitive.
For this consider your first example

```
    sage: from sage.modules.free_quadratic_module_integer_symmetric import PrimitiveExtension
    sage: L1 = IntegralLattice(matrix([[4]]))
    sage: g1 = L1.discriminant_group().gens()[0]
    sage: glue = [[2*g1]]
    sage: PrimitiveExtension([L1],glue)
    Lattice of degree 1 and rank 1 over Integer Ring
    Basis matrix:
    [1]
    Inner product matrix:
    [1]
    ....
```
A single lattice does not have any primitive extensions.

Your code breaks if the lattices have a given basis different from the standard one.
It is not enough to just consider the gram matrices.:

```
sage: from sage.modules.free_quadratic_module_integer_symmetric import PrimitiveExtension
sage: A = IntegralLattice(matrix.identity(2),basis=[(2,2)])
sage: g = A.discriminant_group().gens()
sage: PrimitiveExtension([A,A],[g,g])
.....
TypeError: unsupported operand parent(s) for *: 'Full MatrixSpace of 2 by 1 dense matrices over Integer Ring' and 'Free module of degree 2 and rank 1 over Integer Ring
Echelon basis matrix:
[1/4 1/4]'
```

- I would suggest to enhance the `.direct_sum` method to eat a list of lattices (or a single lattice) - best make it a separate ticket.
- For me a primitive extension is defined as follows:

Let `L1`, `L2` be two lattices. Then a primitive extension is an overlattice `L`
`L1 + L2 -- > L` such that `L1 * QQ` intersected with `L` is L1 and likewise for `L2`.
Then Nikulin proved:
A primitive extension is the same as giving a homomorphism
`phi: AL1 -- > AL2` on the discriminant groups reversing the sign of the discriminant form:
`q(x) = -q(phi(x))`.

Then my suggestion is to define a method. 

```
def primitive_extension(self, L2, phi):

   1. check that phi is a homomorphism reversing the sign
   2. take the direct sum of L1 and L2
   3. take the graph Gamma of phi inside A_L1 + A_L2
   4. return (L1.direct_sum(L2)).overlattice(Gamma)
```
And maybe the morphisms defining the embeddings.



---

archive/issue_comments_465140.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-\n+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.\n+If `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)' is isotropical then we can define the \"gluing\" `L`, an overlattice of `L1 +...+ Ln`\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2018-02-20T13:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465140",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-
+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.
+If `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)' is isotropical then we can define the "gluing" `L`, an overlattice of `L1 +...+ Ln`
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_465141.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-\n+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.\n+If `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)` is isotropical then we can define the \"gluing\" `L`, an overlattice of `L1 +...+ Ln`\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2018-02-20T13:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465141",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-
+Let `L1`,...,`Ln` `n` integer lattices and `A_L1`,..., `A_Ln` their discriminant groups.
+If `G1`,...,`Gn` are subgroups of the `A_Li` and `v_i,1`,...,`v_i,k` vectors of `Gi`, such that the span of `(v_1,1+...+v_n,1,...,v_1,k+...+v_n,k)` is isotropical then we can define the "gluing" `L`, an overlattice of `L1 +...+ Ln`
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_465142.json:
```json
{
    "body": "Changing commit from \"95066709fc5a98a232185532eebcbd6c003656bd\" to \"26bacb9597ae82c54f3d19ba0b95395be1c23a0c\"",
    "created_at": "2018-02-22T13:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "95066709fc5a98a232185532eebcbd6c003656bd" to "26bacb9597ae82c54f3d19ba0b95395be1c23a0c"



---

archive/issue_comments_465143.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-22T13:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465144.json:
```json
{
    "body": "Changing commit from \"26bacb9597ae82c54f3d19ba0b95395be1c23a0c\" to \"930bc87cf3d3066e2b7560eb370c729401ac1895\"",
    "created_at": "2018-02-23T09:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465144",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26bacb9597ae82c54f3d19ba0b95395be1c23a0c" to "930bc87cf3d3066e2b7560eb370c729401ac1895"



---

archive/issue_comments_465145.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-23T09:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465145",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465146.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-23T10:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465146",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465147.json:
```json
{
    "body": "Changing commit from \"930bc87cf3d3066e2b7560eb370c729401ac1895\" to \"adaf3f2053bb3cf137daa908cc35395cb4f8c307\"",
    "created_at": "2018-02-23T10:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465147",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "930bc87cf3d3066e2b7560eb370c729401ac1895" to "adaf3f2053bb3cf137daa908cc35395cb4f8c307"



---

archive/issue_comments_465148.json:
```json
{
    "body": "Changing commit from \"adaf3f2053bb3cf137daa908cc35395cb4f8c307\" to \"1f7e304a1e164bfebdbf4132fe0c8bac12ddf85f\"",
    "created_at": "2018-02-23T11:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465148",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "adaf3f2053bb3cf137daa908cc35395cb4f8c307" to "1f7e304a1e164bfebdbf4132fe0c8bac12ddf85f"



---

archive/issue_comments_465149.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-23T11:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465149",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465150.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-23T15:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465150",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465151.json:
```json
{
    "body": "Changing commit from \"1f7e304a1e164bfebdbf4132fe0c8bac12ddf85f\" to \"c85d4abe4c86939f1c426d10dccce9b80dfbf32e\"",
    "created_at": "2018-02-23T15:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1f7e304a1e164bfebdbf4132fe0c8bac12ddf85f" to "c85d4abe4c86939f1c426d10dccce9b80dfbf32e"



---

archive/issue_comments_465152.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-02T14:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465152",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_465153.json:
```json
{
    "body": "Changing author from \"\" to \"Paolo Menegatti\"",
    "created_at": "2018-03-02T14:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465153",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing author from "" to "Paolo Menegatti"



---

archive/issue_comments_465154.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-03T10:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465154",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_465155.json:
```json
{
    "body": "<a id='comment:18'></a>I think that the ambient spaces should be preserved. If the user has given the lattice a specific basis/ambient space, she probably had a good reason and wants to keep it. \nAs a general rule: We should not forget any information - unless the user explicitly requests it.\n\nHence, the overlattice (=glued lattice) should live in the direct sum of the respective ambient spaces. \nI do like that you provide the embeddings. That is a good feature.\nAs a suggestion: \n- Improve the `direct_sum` method to take a list of lattices as input and output the inclusions as well.\n- In a second step use `overlattice` to create the glueing.\n- Please add input checks.",
    "created_at": "2018-03-03T10:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465155",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:18'></a>I think that the ambient spaces should be preserved. If the user has given the lattice a specific basis/ambient space, she probably had a good reason and wants to keep it. 
As a general rule: We should not forget any information - unless the user explicitly requests it.

Hence, the overlattice (=glued lattice) should live in the direct sum of the respective ambient spaces. 
I do like that you provide the embeddings. That is a good feature.
As a suggestion: 
- Improve the `direct_sum` method to take a list of lattices as input and output the inclusions as well.
- In a second step use `overlattice` to create the glueing.
- Please add input checks.



---

archive/issue_comments_465156.json:
```json
{
    "body": "Changing commit from \"c85d4abe4c86939f1c426d10dccce9b80dfbf32e\" to \"9bf9f05f1f56d2e75439c2d2169459c3dfc2c0a3\"",
    "created_at": "2018-03-29T08:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465156",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing commit from "c85d4abe4c86939f1c426d10dccce9b80dfbf32e" to "9bf9f05f1f56d2e75439c2d2169459c3dfc2c0a3"



---

archive/issue_comments_465157.json:
```json
{
    "body": "Changing branch from \"u/pmenegat/primitive_extension_of_lattices\" to \"u/pmenegat/gluings\"",
    "created_at": "2018-03-29T08:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465157",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing branch from "u/pmenegat/primitive_extension_of_lattices" to "u/pmenegat/gluings"



---

archive/issue_comments_465158.json:
```json
{
    "body": "Changing commit from \"9bf9f05f1f56d2e75439c2d2169459c3dfc2c0a3\" to \"5499ecba063d5375c883a06f1ba87c05c70f1581\"",
    "created_at": "2018-03-29T08:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9bf9f05f1f56d2e75439c2d2169459c3dfc2c0a3" to "5499ecba063d5375c883a06f1ba87c05c70f1581"



---

archive/issue_comments_465159.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-29T08:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465160.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-29T09:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465161.json:
```json
{
    "body": "Changing commit from \"5499ecba063d5375c883a06f1ba87c05c70f1581\" to \"3e46f377b67657e5ea29ecd304d7571097fe33f9\"",
    "created_at": "2018-03-29T09:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5499ecba063d5375c883a06f1ba87c05c70f1581" to "3e46f377b67657e5ea29ecd304d7571097fe33f9"



---

archive/issue_comments_465162.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-29T11:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465163.json:
```json
{
    "body": "Changing commit from \"3e46f377b67657e5ea29ecd304d7571097fe33f9\" to \"a04c88956adcb2bd088ca9e700682a4cf4e7f744\"",
    "created_at": "2018-03-29T11:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e46f377b67657e5ea29ecd304d7571097fe33f9" to "a04c88956adcb2bd088ca9e700682a4cf4e7f744"



---

archive/issue_comments_465164.json:
```json
{
    "body": "Changing commit from \"a04c88956adcb2bd088ca9e700682a4cf4e7f744\" to \"d086e54090b3fd3963c2176236b0f958a9e512ab\"",
    "created_at": "2018-03-29T13:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465164",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a04c88956adcb2bd088ca9e700682a4cf4e7f744" to "d086e54090b3fd3963c2176236b0f958a9e512ab"



---

archive/issue_comments_465165.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-29T13:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465166.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-29T13:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465166",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_465167.json:
```json
{
    "body": "Changing branch from \"u/pmenegat/gluings\" to \"u/sbrandhorst/gluings\"",
    "created_at": "2018-04-03T19:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465167",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/pmenegat/gluings" to "u/sbrandhorst/gluings"



---

archive/issue_comments_465168.json:
```json
{
    "body": "<a id='comment:26'></a>you can give it a positive review if you are happy with my changes.\n\n---\nNew commits:",
    "created_at": "2018-04-03T19:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465168",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:26'></a>you can give it a positive review if you are happy with my changes.

---
New commits:



---

archive/issue_comments_465169.json:
```json
{
    "body": "Changing commit from \"d086e54090b3fd3963c2176236b0f958a9e512ab\" to \"e4b326b264fda6c68999b5e7dc718f15665c2205\"",
    "created_at": "2018-04-03T19:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465169",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing commit from "d086e54090b3fd3963c2176236b0f958a9e512ab" to "e4b326b264fda6c68999b5e7dc718f15665c2205"



---

archive/issue_comments_465170.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-17T08:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465170",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465171.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Simon Brandhorst\"",
    "created_at": "2018-04-17T08:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465171",
    "user": "https://trac.sagemath.org/admin/accounts/users/pmenegat"
}
```

Changing reviewer from "" to "Simon Brandhorst"



---

archive/issue_events_061946.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:26:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24564#event-61946"
}
```



---

archive/issue_comments_465172.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/gluings\" to \"e4b326b264fda6c68999b5e7dc718f15665c2205\"",
    "created_at": "2018-05-08T17:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465172",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/sbrandhorst/gluings" to "e4b326b264fda6c68999b5e7dc718f15665c2205"



---

archive/issue_comments_465173.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24564#issuecomment-465173",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
