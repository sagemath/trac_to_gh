# Issue 24596: port Sage to SPARC Solaris 11

archive/issues_024359.json:
```json
{
    "body": "We have access to SPARC T4 system\n\n```\nSunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n```\n\nWe track here the resulting issues and tickets.\n\n* no need to pre-build any tools, apparently. Everything is available via Solaris `pkg` or `pkgutil` (i.e. opencsw). \n\n* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242). For details and a possible fix, see #24674.\n\n* Various packages need `CFLAGS=\"-D_XPG6\"`\n\n* To take care of the above, set the following before building\n\n```\nexport PATH=/opt/csw/gnu:$PATH\nexport CFLAGS=\"-O2 -g -D_XPG6\"\nexport CXXFLAGS=\"$CFLAGS\"        # Maybe not strictly needed\n\n./configure --with-mp=gmp\n```\n\n* OpenBLAS fails to auto-detect SPARC CPU: #24638\n\n* #24597 fixes building issues for python2/3\n\n* building `fplll` and `singular` fails due to a silly C++  (g++ 5.4.0)\n  error, which cannot properly compile templated `pow()` from \n  `cmath`, e.g. the following fails:\n\n```\n#include <cmath>\nint main()\n{\nint i,j,k;\ni = 2;\nj = 10;\nk = pow(i,j);\nreturn k;\n}\n```\n   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding `std::` to pow, or adding `using namespace std;` results in successful compilation of this example (and most probably this also will work for Singular).\n** this problem went away by itself after some changes to the linker used, I don't really know why **\n\n* iconv fails due to a wrong assumption on the standard in the \n  source code, fixed in the latest stable version. #24602 is the \n  update to do here.\n\n* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618\n\n* linking of Singular is tentatively fixed by #24611\n\nCC:  @dimpase\n\nReviewer: Dima Pasechnik\n\nBranch: u/jdemeyer/port_sage_to_sparc_solaris_11\n\nDependencies: #23733, #24638, #24765\n\nCommit: 760cfbbb1d729dd9972714bc9a086de0d5b69a8d\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/24596\n\n",
    "closed_at": "2020-08-14T12:54:34Z",
    "created_at": "2018-01-26T14:59:02Z",
    "labels": [
        "component: porting: solaris"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "port Sage to SPARC Solaris 11",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24596",
    "user": "https://github.com/dimpase"
}
```
We have access to SPARC T4 system

```
SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
```

We track here the resulting issues and tickets.

* no need to pre-build any tools, apparently. Everything is available via Solaris `pkg` or `pkgutil` (i.e. opencsw). 

* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242). For details and a possible fix, see #24674.

* Various packages need `CFLAGS="-D_XPG6"`

* To take care of the above, set the following before building

```
export PATH=/opt/csw/gnu:$PATH
export CFLAGS="-O2 -g -D_XPG6"
export CXXFLAGS="$CFLAGS"        # Maybe not strictly needed

./configure --with-mp=gmp
```

* OpenBLAS fails to auto-detect SPARC CPU: #24638

* #24597 fixes building issues for python2/3

* building `fplll` and `singular` fails due to a silly C++  (g++ 5.4.0)
  error, which cannot properly compile templated `pow()` from 
  `cmath`, e.g. the following fails:

```
#include <cmath>
int main()
{
int i,j,k;
i = 2;
j = 10;
k = pow(i,j);
return k;
}
```
   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding `std::` to pow, or adding `using namespace std;` results in successful compilation of this example (and most probably this also will work for Singular).
** this problem went away by itself after some changes to the linker used, I don't really know why **

* iconv fails due to a wrong assumption on the standard in the 
  source code, fixed in the latest stable version. #24602 is the 
  update to do here.

* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618

* linking of Singular is tentatively fixed by #24611

CC:  @dimpase

Reviewer: Dima Pasechnik

Branch: u/jdemeyer/port_sage_to_sparc_solaris_11

Dependencies: #23733, #24638, #24765

Commit: 760cfbbb1d729dd9972714bc9a086de0d5b69a8d

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/24596





---

archive/issue_comments_363330.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -20,6 +20,10 @@\n export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n \\`\\`\\`\n \n+* #24597 fixes building issues for python2/3\n+\n+\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/24596\n```\n",
    "created_at": "2018-01-26T16:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363330",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -20,6 +20,10 @@
 export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
 \`\`\`
 
+* #24597 fixes building issues for python2/3
+
+
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/24596
```




---

archive/issue_comments_363331.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-26T17:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363331",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,29 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
 
 
 Comment: 1
```




---

archive/issue_comments_363332.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,46 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly g++ (version 5.4.0) \n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   Trying to build gcc 7.2 now. \n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-27T09:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363332",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,46 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly g++ (version 5.4.0) 
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   Trying to build gcc 7.2 now. 
+
 
 
 Comment: 1
```




---

archive/issue_comments_363333.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly g++ (version 5.4.0) \n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   Trying to build gcc 7.2 now. \n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, probably fixed in the latest stable version. To \n+  try the update...\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-27T09:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363333",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly g++ (version 5.4.0) 
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   Trying to build gcc 7.2 now. 
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, probably fixed in the latest stable version. To 
+  try the update...
 
 
 Comment: 1
```




---

archive/issue_comments_363334.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, probably fixed in the latest stable version. To \n+  try the update...\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-28T18:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363334",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, probably fixed in the latest stable version. To 
+  try the update...
 
 
 Comment: 1
```




---

archive/issue_comments_363335.json:
```json
{
    "body": "<a id='comment:5'></a>I've managed to build `gcc 7.2.0` from source configuring as follows:\n\n```\n./configure --prefix=/datapool/dima --with-gmp-include=/usr/include/gmp --with-mpfr-include=/usr/include/mpfr --with-mpc=/usr --without-gnu-ld --with-ld=/usr/bin/ld --with-gnu-as --enable-languages=c,c++,fortran  --enable-shared --enable-initfini-array  --with-system-zlib  --with-as=/usr/gnu/bin/as --build=sparcv9-sun-solaris2.11\n```\nusing system-provided gmp, mpfr, and mpc.\nBuilding it in Sage did not work, it failed in building gfrortan with some obscure MPFR-related linking error.",
    "created_at": "2018-01-28T18:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363335",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>I've managed to build `gcc 7.2.0` from source configuring as follows:

```
./configure --prefix=/datapool/dima --with-gmp-include=/usr/include/gmp --with-mpfr-include=/usr/include/mpfr --with-mpc=/usr --without-gnu-ld --with-ld=/usr/bin/ld --with-gnu-as --enable-languages=c,c++,fortran  --enable-shared --enable-initfini-array  --with-system-zlib  --with-as=/usr/gnu/bin/as --build=sparcv9-sun-solaris2.11
```
using system-provided gmp, mpfr, and mpc.
Building it in Sage did not work, it failed in building gfrortan with some obscure MPFR-related linking error.



---

archive/issue_comments_363336.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-28T23:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363336",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
 
 
 Comment: 1
```




---

archive/issue_comments_363337.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,52 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-29T00:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363337",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,52 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
 
 
 Comment: 1
```




---

archive/issue_comments_363338.json:
```json
{
    "body": "<a id='comment:9'></a>Lots of issues mentioned in the ticket description do not have a ticket yet. Should I create tickets for each?",
    "created_at": "2018-01-29T17:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363338",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Lots of issues mentioned in the ticket description do not have a ticket yet. Should I create tickets for each?



---

archive/issue_comments_363339.json:
```json
{
    "body": "<a id='comment:10'></a>One more issue is just reported here: http://www.singular.uni-kl.de:8002/trac/ticket/816\n\nSingular uses specific -Wl linker syntax in libpolys/polys/Makefile.am\nwhich nukes linking (as Solaris linker does not accept `dynamic_lookup` parameter).\n(By right, it's autotools that should generate such platform-specific arguments, it's asking for trouble to give them explicitly).\n\nFeel free to open as many tickets as needed- making sure that we don't duplicate each other.",
    "created_at": "2018-01-29T17:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363339",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>One more issue is just reported here: http://www.singular.uni-kl.de:8002/trac/ticket/816

Singular uses specific -Wl linker syntax in libpolys/polys/Makefile.am
which nukes linking (as Solaris linker does not accept `dynamic_lookup` parameter).
(By right, it's autotools that should generate such platform-specific arguments, it's asking for trouble to give them explicitly).

Feel free to open as many tickets as needed- making sure that we don't duplicate each other.



---

archive/issue_comments_363340.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,54 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular should be fixed, see #24611\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-29T23:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363340",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,54 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular should be fixed, see #24611
+
 
 
 Comment: 1
```




---

archive/issue_comments_363341.json:
```json
{
    "body": "<a id='comment:11'></a>Opened #24611 to deal with Singular linking problems",
    "created_at": "2018-01-29T23:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363341",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>Opened #24611 to deal with Singular linking problems



---

archive/issue_comments_363342.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,55 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-30T11:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363342",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,55 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242). (Should check if this is still needed for MPFR 4.0.0).
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
+
 
 
 Comment: 1
```




---

archive/issue_comments_363343.json:
```json
{
    "body": "<a id='comment:13'></a>the next snag is R, a bus error during installation of 'tools' package:\n\n```\n...\ngcc -shared -L../../../../lib -m64 -L/datapool/dima/Sage/sagetrac-mirror/local/lib -Wl,-rpath,/datapool/dima/Sage/sagetrac-mirror/local/lib -o tools.so text.o init.o Rmd5.o md5.o signals.o install.o getfmts.o http.o gramLatex.o gramRd.o -L../../../../lib -lR\nmake[9]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools/src'\nmkdir -p -- ../../../../library/tools/libs\n/src'\nmake[7]: Leaving directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'\nmake[7]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'\ninstalling 'sysdata.rda'\nmake[7]: Leaving directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'\n\n *** caught bus error ***\naddress 101556b6c, cause 'invalid alignment'\n\nTraceback:\n 1: strsplit(x, \"\\n[ \\t\\n]*\\n\", perl = TRUE)\n 2: is.vector(X)\n 3: lapply(strsplit(x, \"\\n[ \\t\\n]*\\n\", perl = TRUE), strsplit, \"[ \\t\\n]\",     perl = TRUE)\n 4: strwrap(paste0(x, \": \", y), exdent = indent, width = width, simplify = FALSE)\n 5: formatDL(rep.int(tag, length(val)), val, style = \"list\", width = width,     indent = indent)\n 6: fmt(nmx[j], xj[i], foldable[j])\n 7: write.dcf(rbind(x), dfile, keep.white = c(.keep_white_description_fields,     \"Maintainer\", \"BugReports\"))\n 8: .write_description(db, file.path(outDir, \"DESCRIPTION\"))\n 9: tools:::.install_package_description(\".\", \"../../../library/tools\")\nAn irrecoverable exception occurred. R is aborting now ...\n/bin/sh: 13985: Bus error(coredump)\nmake[6]: *** [Makefile:36: all] Bus Error\n```",
    "created_at": "2018-01-30T11:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363343",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>the next snag is R, a bus error during installation of 'tools' package:

```
...
gcc -shared -L../../../../lib -m64 -L/datapool/dima/Sage/sagetrac-mirror/local/lib -Wl,-rpath,/datapool/dima/Sage/sagetrac-mirror/local/lib -o tools.so text.o init.o Rmd5.o md5.o signals.o install.o getfmts.o http.o gramLatex.o gramRd.o -L../../../../lib -lR
make[9]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools/src'
mkdir -p -- ../../../../library/tools/libs
/src'
make[7]: Leaving directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'
make[7]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'
installing 'sysdata.rda'
make[7]: Leaving directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/r-3.4.3/src/src/library/tools'

 *** caught bus error ***
address 101556b6c, cause 'invalid alignment'

Traceback:
 1: strsplit(x, "\n[ \t\n]*\n", perl = TRUE)
 2: is.vector(X)
 3: lapply(strsplit(x, "\n[ \t\n]*\n", perl = TRUE), strsplit, "[ \t\n]",     perl = TRUE)
 4: strwrap(paste0(x, ": ", y), exdent = indent, width = width, simplify = FALSE)
 5: formatDL(rep.int(tag, length(val)), val, style = "list", width = width,     indent = indent)
 6: fmt(nmx[j], xj[i], foldable[j])
 7: write.dcf(rbind(x), dfile, keep.white = c(.keep_white_description_fields,     "Maintainer", "BugReports"))
 8: .write_description(db, file.path(outDir, "DESCRIPTION"))
 9: tools:::.install_package_description(".", "../../../library/tools")
An irrecoverable exception occurred. R is aborting now ...
/bin/sh: 13985: Bus error(coredump)
make[6]: *** [Makefile:36: all] Bus Error
```



---

archive/issue_comments_363344.json:
```json
{
    "body": "<a id='comment:14'></a>The complete log of R installation is here. http://users.ox.ac.uk/~coml0531/tmp/r-343-solaris11.log\n\nI suppose this is a compiler bug (with gcc 7.2.0). I'll try different gcc versions.",
    "created_at": "2018-01-30T11:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363344",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>The complete log of R installation is here. http://users.ox.ac.uk/~coml0531/tmp/r-343-solaris11.log

I suppose this is a compiler bug (with gcc 7.2.0). I'll try different gcc versions.



---

archive/issue_comments_363345.json:
```json
{
    "body": "<a id='comment:15'></a>To avoid the MPIR trouble, I'm trying `./configure --with-mp=gmp`.",
    "created_at": "2018-01-30T14:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363345",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>To avoid the MPIR trouble, I'm trying `./configure --with-mp=gmp`.



---

archive/issue_comments_363346.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,55 @@\n+with access to SPARC T4 system, this looks not too hard.\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* python2/3 building needs \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* tuning of \\`gf2x\\` fails, set \\`SAGE_TUNE_GF2X=no\\`\n+\n+* to take care of the above, \\`.\\` the following before building\n+\n+\\`\\`\\`\n+export ABI=64\n+export SAGE64=yes\n+export CFLAGS=\"-D_XPG6\"\n+export SAGE_TUNE_GF2X=no\n+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-30T14:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363346",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,55 @@
+with access to SPARC T4 system, this looks not too hard.
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved quickly by a patch, see MPIR [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* python2/3 building needs \`CFLAGS="-D_XPG6"\`
+
+* tuning of \`gf2x\` fails, set \`SAGE_TUNE_GF2X=no\`
+
+* to take care of the above, \`.\` the following before building
+
+\`\`\`
+export ABI=64
+export SAGE64=yes
+export CFLAGS="-D_XPG6"
+export SAGE_TUNE_GF2X=no
+export PATH=/opt/csw/gnu:/usr/sfw/bin:$PATH
+\`\`\`
+
+* \`./configure --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
+
 
 
 Comment: 1
```




---

archive/issue_comments_363347.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,57 @@\n+We have access to SPARC T4 system\n+\n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-mp=gmp --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2018-01-30T15:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363347",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,57 @@
+We have access to SPARC T4 system
+
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+\`\`\`
+
+* \`./configure --with-mp=gmp --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
+
 
 
 Comment: 1
```




---

archive/issue_comments_363348.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:14 dimpase]:\n> The complete log of R installation is here. http://users.ox.ac.uk/~coml0531/tmp/r-343-solaris11.log\n> \n> I suppose this is a compiler bug (with gcc 7.2.0). I'll try different gcc versions.\n\nSame error with gcc 7.3.0. Will try gcc 5.4 now.",
    "created_at": "2018-01-30T17:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363348",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>Replying to [comment:14 dimpase]:
> The complete log of R installation is here. http://users.ox.ac.uk/~coml0531/tmp/r-343-solaris11.log
> 
> I suppose this is a compiler bug (with gcc 7.2.0). I'll try different gcc versions.

Same error with gcc 7.3.0. Will try gcc 5.4 now.



---

archive/issue_comments_363349.json:
```json
{
    "body": "<a id='comment:21'></a>the problem of R is in pcre (that's where it crashes), and pcre fails its self-tests:\n\n```\n[pcre-8.40.p1] make[5]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/pcre-8.40.p1/src'\n[pcre-8.40.p1] PASS: pcre_stringpiece_unittest\n[pcre-8.40.p1] PASS: pcre_scanner_unittest\n[pcre-8.40.p1] PASS: pcrecpp_unittest\n[pcre-8.40.p1] ./test-driver: line 107: 25794 Bus Error               (core dumped) \"$@\" > $log_file 2>&1\n[pcre-8.40.p1] FAIL: pcre_jit_test\n[pcre-8.40.p1] FAIL: RunTest\n[pcre-8.40.p1] FAIL: RunGrepTest\n[pcre-8.40.p1] ============================================================================\n[pcre-8.40.p1] Testsuite summary for PCRE 8.40\n[pcre-8.40.p1] ============================================================================\n[pcre-8.40.p1] # TOTAL: 6\n[pcre-8.40.p1] # PASS:  3\n[pcre-8.40.p1] # SKIP:  0\n[pcre-8.40.p1] # XFAIL: 0\n[pcre-8.40.p1] # FAIL:  3\n[pcre-8.40.p1] # XPASS: 0\n[pcre-8.40.p1] # ERROR: 0\n```\n\n---\nNew commits:",
    "created_at": "2018-01-31T01:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363349",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>the problem of R is in pcre (that's where it crashes), and pcre fails its self-tests:

```
[pcre-8.40.p1] make[5]: Entering directory '/datapool/dima/Sage/sagetrac-mirror/local/var/tmp/sage/build/pcre-8.40.p1/src'
[pcre-8.40.p1] PASS: pcre_stringpiece_unittest
[pcre-8.40.p1] PASS: pcre_scanner_unittest
[pcre-8.40.p1] PASS: pcrecpp_unittest
[pcre-8.40.p1] ./test-driver: line 107: 25794 Bus Error               (core dumped) "$@" > $log_file 2>&1
[pcre-8.40.p1] FAIL: pcre_jit_test
[pcre-8.40.p1] FAIL: RunTest
[pcre-8.40.p1] FAIL: RunGrepTest
[pcre-8.40.p1] ============================================================================
[pcre-8.40.p1] Testsuite summary for PCRE 8.40
[pcre-8.40.p1] ============================================================================
[pcre-8.40.p1] # TOTAL: 6
[pcre-8.40.p1] # PASS:  3
[pcre-8.40.p1] # SKIP:  0
[pcre-8.40.p1] # XFAIL: 0
[pcre-8.40.p1] # FAIL:  3
[pcre-8.40.p1] # XPASS: 0
[pcre-8.40.p1] # ERROR: 0
```

---
New commits:



---

archive/issue_comments_363350.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-31T06:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363351.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,56 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-mp=gmp --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-01-31T06:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363351",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,56 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+\`\`\`
+
+* \`./configure --with-mp=gmp --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363352.json:
```json
{
    "body": "Replying to [ticket:24596 dimpase]:\n> * gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.\n\n\nI had no problems to build GLPK with GCC 5.4.0.",
    "created_at": "2018-01-31T06:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363352",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:24596 dimpase]:
> * gcc 7.2 builds glpk and fplll, whereas gcc 5.4 cannot do it.


I had no problems to build GLPK with GCC 5.4.0.



---

archive/issue_comments_363353.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,56 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\\`\\`\\`\n+\n+* \\`./configure --with-mp=gmp --with-blas=atlas\\` - there is no openblas on sparc\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-01-31T06:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363353",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,56 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+\`\`\`
+
+* \`./configure --with-mp=gmp --with-blas=atlas\` - there is no openblas on sparc
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363354.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-31T09:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363355.json:
```json
{
    "body": "<a id='comment:28'></a>By the way, I can't reproduce any problems with gf2x tuning.",
    "created_at": "2018-01-31T10:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363355",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>By the way, I can't reproduce any problems with gf2x tuning.



---

archive/issue_comments_363356.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,58 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* OpenBLAS fails to build\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\n+./configure --with-mp=gmp --with-blas=atlas\n+\\`\\`\\`\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-01-31T12:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363356",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,58 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* OpenBLAS fails to build
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+
+./configure --with-mp=gmp --with-blas=atlas
+\`\`\`
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363357.json:
```json
{
    "body": "<a id='comment:30'></a>By the way, I think that it *should* be possible to build openblas. I don't see any fundamental obstructions.",
    "created_at": "2018-01-31T12:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363357",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>By the way, I think that it *should* be possible to build openblas. I don't see any fundamental obstructions.



---

archive/issue_comments_363358.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 jdemeyer]:\n> By the way, I think that it *should* be possible to build openblas. I don't see any fundamental obstructions.\n\n\nI think that openblas for non-x86* architectures does not exist.",
    "created_at": "2018-01-31T12:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363358",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>Replying to [comment:30 jdemeyer]:
> By the way, I think that it *should* be possible to build openblas. I don't see any fundamental obstructions.


I think that openblas for non-x86* architectures does not exist.



---

archive/issue_comments_363359.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,59 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* OpenBLAS needs an explicit \\`TARGET=SPARC\\`.\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+export OPENBLAS_CONFIGURE=\"TARGET=SPARC\"\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-01-31T15:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363359",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,59 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* OpenBLAS needs an explicit \`TARGET=SPARC\`.
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+export OPENBLAS_CONFIGURE="TARGET=SPARC"
+
+./configure --with-mp=gmp
+\`\`\`
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363360.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:31 dimpase]:\n> I think that openblas for non-x86* architectures does not exist.\n\n\nI am challenging your hypotheses:\n\n```\nInstall OK!\nmake[3]: Leaving directory '/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/src'\nmake[2]: Leaving directory '/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/src'\nWrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/blas.pc\nWrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/cblas.pc\nWrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/lapack.pc\n\nreal    55m45.102s\nuser    99m54.598s\nsys     35m15.907s\nCopying package files from temporary location /datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/inst to /datapool/jeroen/sage-openblas/local\nSuccessfully installed openblas-0.2.20.p1\nDeleting temporary build directory\n/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1\nFinished installing openblas-0.2.20.p1.spkg\n```",
    "created_at": "2018-01-31T15:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363360",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Replying to [comment:31 dimpase]:
> I think that openblas for non-x86* architectures does not exist.


I am challenging your hypotheses:

```
Install OK!
make[3]: Leaving directory '/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/src'
make[2]: Leaving directory '/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/src'
Wrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/blas.pc
Wrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/cblas.pc
Wrote /datapool/jeroen/sage-openblas/local/lib/pkgconfig/lapack.pc

real    55m45.102s
user    99m54.598s
sys     35m15.907s
Copying package files from temporary location /datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1/inst to /datapool/jeroen/sage-openblas/local
Successfully installed openblas-0.2.20.p1
Deleting temporary build directory
/datapool/jeroen/sage-openblas/local/var/tmp/sage/build/openblas-0.2.20.p1
Finished installing openblas-0.2.20.p1.spkg
```



---

archive/issue_comments_363361.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:21 dimpase]:\n> the problem of R is in pcre (that's where it crashes),\n\n\ntrying to build R with system's pcre (remove the dependence on pcre from R, and remove pcre stuff from SAGEROOT/local/[bin,lib])\ngets me past this ugly segfault.\n\nStuck later in some linking error, which should be manageable\n(need to rebuild with -j1 for a meaningful log).",
    "created_at": "2018-02-01T01:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363361",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>Replying to [comment:21 dimpase]:
> the problem of R is in pcre (that's where it crashes),


trying to build R with system's pcre (remove the dependence on pcre from R, and remove pcre stuff from SAGEROOT/local/[bin,lib])
gets me past this ugly segfault.

Stuck later in some linking error, which should be manageable
(need to rebuild with -j1 for a meaningful log).



---

archive/issue_comments_363362.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 dimpase]:\n> Replying to [comment:21 dimpase]:\n> > the problem of R is in pcre (that's where it crashes),\n\n> \n> trying to build R with system's pcre (remove the dependence on pcre from R, and remove pcre stuff from SAGEROOT/local/[bin,lib])\n> gets me past this ugly segfault.\n> \n> Stuck later in some linking error, which should be manageable\n> (need to rebuild with -j1 for a meaningful log).\n\n \ndeal with pcre here: #24628",
    "created_at": "2018-02-01T01:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363362",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>Replying to [comment:33 dimpase]:
> Replying to [comment:21 dimpase]:
> > the problem of R is in pcre (that's where it crashes),

> 
> trying to build R with system's pcre (remove the dependence on pcre from R, and remove pcre stuff from SAGEROOT/local/[bin,lib])
> gets me past this ugly segfault.
> 
> Stuck later in some linking error, which should be manageable
> (need to rebuild with -j1 for a meaningful log).

 
deal with pcre here: #24628



---

archive/issue_comments_363363.json:
```json
{
    "body": "<a id='comment:35'></a>deal with R on #24629",
    "created_at": "2018-02-01T01:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363363",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>deal with R on #24629



---

archive/issue_comments_363364.json:
```json
{
    "body": "<a id='comment:36'></a>By the way, how did you manage to build GCC? I have tried with several variations on `CFLAGS` and `CC` but I never managed to have a successful build of GCC.",
    "created_at": "2018-02-01T05:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363364",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>By the way, how did you manage to build GCC? I have tried with several variations on `CFLAGS` and `CC` but I never managed to have a successful build of GCC.



---

archive/issue_comments_363365.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,59 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* OpenBLAS needs an explicit \\`TARGET=SPARC\\`: https://github.com/xianyi/OpenBLAS/pull/1443\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+export OPENBLAS_CONFIGURE=\"TARGET=SPARC\"\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-01T06:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363365",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,59 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* OpenBLAS needs an explicit \`TARGET=SPARC\`: https://github.com/xianyi/OpenBLAS/pull/1443
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+export OPENBLAS_CONFIGURE="TARGET=SPARC"
+
+./configure --with-mp=gmp
+\`\`\`
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363366.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:36 jdemeyer]:\n> By the way, how did you manage to build GCC? I have tried with several variations on `CFLAGS` and `CC` but I never managed to have a successful build of GCC.\n\n\nI managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed. This is what I did to build\ngcc 7.2 in /datapool/dima/bin\n\n```\n./configure --prefix=/datapool/dima --with-gmp-include=/usr/include/gmp --with-mpfr-include=/usr/include/mpfr --with-mpc=/usr --without-gnu-ld --with-ld=/usr/bin/ld --with-gnu-as --enable-languages=c,c++,fortran  --enable-shared --enable-initfini-array  --with-system-zlib  --with-as=/usr/gnu/bin/as --build=sparcv9-sun-solaris2.11\n```\nYou need to make sure that Solaris `ld` is 1st in the PATH (I have a dedicated directory `/datapool/dima/tools` with a link to /usr/bin/ld which is 1st in my PATH), and also I used the same\nflags as for building Sage:\n\n```\nCFLAGS=-D_XPG6\nPATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin\n```\nProbably if I tried harder it would also have worked with Sage's gcc - we don't set `--build=`, do we?\n\nTo use gfortran built there one needs \n\n```\nexport LD_LIBRARY_PATH=/datapool/dima/lib/sparcv9\n```\n(perhaps there is a better way)",
    "created_at": "2018-02-01T09:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363366",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>Replying to [comment:36 jdemeyer]:
> By the way, how did you manage to build GCC? I have tried with several variations on `CFLAGS` and `CC` but I never managed to have a successful build of GCC.


I managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed. This is what I did to build
gcc 7.2 in /datapool/dima/bin

```
./configure --prefix=/datapool/dima --with-gmp-include=/usr/include/gmp --with-mpfr-include=/usr/include/mpfr --with-mpc=/usr --without-gnu-ld --with-ld=/usr/bin/ld --with-gnu-as --enable-languages=c,c++,fortran  --enable-shared --enable-initfini-array  --with-system-zlib  --with-as=/usr/gnu/bin/as --build=sparcv9-sun-solaris2.11
```
You need to make sure that Solaris `ld` is 1st in the PATH (I have a dedicated directory `/datapool/dima/tools` with a link to /usr/bin/ld which is 1st in my PATH), and also I used the same
flags as for building Sage:

```
CFLAGS=-D_XPG6
PATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin
```
Probably if I tried harder it would also have worked with Sage's gcc - we don't set `--build=`, do we?

To use gfortran built there one needs 

```
export LD_LIBRARY_PATH=/datapool/dima/lib/sparcv9
```
(perhaps there is a better way)



---

archive/issue_comments_363367.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 dimpase]:\n> I managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed.\n\n\nSo, it's a GCC build *outside* of Sage. I was simply trying to build with `SAGE_INSTALL_GCC=yes`.\n\n> also I used the same\n> flags as for building Sage:\n> \n> ```\n> CFLAGS=-D_XPG6\n> PATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin\n> ```\n\n\nSo no `-m64` to build GCC?",
    "created_at": "2018-02-01T11:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363367",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Replying to [comment:38 dimpase]:
> I managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed.


So, it's a GCC build *outside* of Sage. I was simply trying to build with `SAGE_INSTALL_GCC=yes`.

> also I used the same
> flags as for building Sage:
> 
> ```
> CFLAGS=-D_XPG6
> PATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin
> ```


So no `-m64` to build GCC?



---

archive/issue_comments_363368.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,58 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* OpenBLAS fails to auto-detect SPARC CPU: #24638\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-01T12:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363368",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,58 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* OpenBLAS fails to auto-detect SPARC CPU: #24638
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+
+./configure --with-mp=gmp
+\`\`\`
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363369.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,58 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* By default, GCC produces 32-bit output but we really want 64-bit.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-m64 -O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"\n+export PATH=/opt/csw/gnu:$PATH\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* OpenBLAS fails to auto-detect SPARC CPU: #24638\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-01T12:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363369",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,58 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* By default, GCC produces 32-bit output but we really want 64-bit.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-m64 -O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"
+export PATH=/opt/csw/gnu:$PATH
+
+./configure --with-mp=gmp
+\`\`\`
+
+* OpenBLAS fails to auto-detect SPARC CPU: #24638
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it.
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363370.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:39 jdemeyer]:\n> Replying to [comment:38 dimpase]:\n> > I managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed.\n\n> \n> So, it's a GCC build *outside* of Sage. I was simply trying to build with `SAGE_INSTALL_GCC=yes`.\n\n\nThis did not work for me either, I merely wanted to see whether it's an internal Sage issue, or a bigger problem. (So yes, it's a Sage internal issue, not sure we must fix it no matter what; after all, the system's gcc 5.4.0 appears to be doing the job just as well.)\n\n> \n> > also I used the same\n> > flags as for building Sage:\n> > \n> > ```\n> > CFLAGS=-D_XPG6\n> > PATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin\n> > ```\n\n> \n> So no `-m64` to build GCC?\n\n\nI did `export ABI=64`. I ended up with 64-bit results. It might be managed by `--build`, perhaps. However, I suppose one ends up with tools capable of building 64- and 32-bit programs. In $PREFIX/lib/ it has installed a bunch of 32-bit ELFs, and in \n$PREFIX/lib/sparcv9/ 64-bit ELFs.",
    "created_at": "2018-02-01T12:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363370",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>Replying to [comment:39 jdemeyer]:
> Replying to [comment:38 dimpase]:
> > I managed it with the system GMP, MPFR, and MPC, which have non-standard header locations (thus lots of these flags). Also, `--build=` is needed.

> 
> So, it's a GCC build *outside* of Sage. I was simply trying to build with `SAGE_INSTALL_GCC=yes`.


This did not work for me either, I merely wanted to see whether it's an internal Sage issue, or a bigger problem. (So yes, it's a Sage internal issue, not sure we must fix it no matter what; after all, the system's gcc 5.4.0 appears to be doing the job just as well.)

> 
> > also I used the same
> > flags as for building Sage:
> > 
> > ```
> > CFLAGS=-D_XPG6
> > PATH=/datapool/dima/tools:/opt/csw/gnu:/opt/csw/bin:/usr/sfw/bin:/usr/bin:/usr/sbin
> > ```

> 
> So no `-m64` to build GCC?


I did `export ABI=64`. I ended up with 64-bit results. It might be managed by `--build`, perhaps. However, I suppose one ends up with tools capable of building 64- and 32-bit programs. In $PREFIX/lib/ it has installed a bunch of 32-bit ELFs, and in 
$PREFIX/lib/sparcv9/ 64-bit ELFs.



---

archive/issue_comments_363371.json:
```json
{
    "body": "<a id='comment:43'></a>With all the fixes we got, my build went to an error about conflicting headers while building sagelib:\n\n```\n[sagelib-8.2.beta4] [ 26/430] creating build/temp.solaris-2.11-sun4v.64bit-2.7/build/cythonized/sage/data_structures\n[sagelib-8.2.beta4] gcc -DNDEBUG -g -O3 -Wall -D_XPG6 -fPIC -I/datapool/dima/Sage/sagetrac-mirror/local/include -I/datapool/dima/Sage/sagetrac-mirror/local/inc\nlude/python2.7 -I/datapool/dima/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/numpy/core/include -I/datapool/dima/Sage/sagetrac-mirror/src -I/datapool\n/dima/Sage/sagetrac-mirror/src/sage/ext -Ibuild/cythonized -I/datapool/dima/Sage/sagetrac-mirror/local/include/python2.7 -c build/cythonized/sage/data_structur\nes/binary_search.c -o build/temp.solaris-2.11-sun4v.64bit-2.7/build/cythonized/sage/data_structures/binary_search.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRAC\nEBACK=1 -std=c99\n[sagelib-8.2.beta4] In file included from build/cythonized/sage/combinat/partitions.cpp:597:0:\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions_c.h: In function \u2018int isinf(double)\u2019:\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions_c.h:3:19: error: \u2018int isinf(double)\u2019 conflicts with a previous declaration\n[sagelib-8.2.beta4]  int isinf(double x) { return !finite(x) && x==x; }\n[sagelib-8.2.beta4]                    ^\n[sagelib-8.2.beta4] In file included from /datapool/dima/lib/gcc/sparcv9-sun-solaris2.11/7.2.0/include-fixed/math.h:25:0,\n[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/bits/std_abs.h:40,\n[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/cstdlib:77,\n[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/stdlib.h:36,\n[sagelib-8.2.beta4]                  from ../local/include/python2.7/Python.h:42,\n[sagelib-8.2.beta4]                  from build/cythonized/sage/combinat/partitions.cpp:58:\n[sagelib-8.2.beta4] /usr/include/iso/math_c99.h:711:14: note: previous declaration \u2018bool std::isinf(double)\u2019\n[sagelib-8.2.beta4]   inline bool isinf(double __X) { return __builtin_isinf(__X); }\n[sagelib-8.2.beta4]               ^~~~~\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp: At global scope:\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4778:18: warning: \u2018PyObject* __pyx_pw_4sage_9structure_7element_3have_same_parent(PyObject*, \nPyObject*, PyObject*)\u2019 defined but not used [-Wunused-function]\n[sagelib-8.2.beta4]  static PyObject *__pyx_pw_4sage_9structure_7element_3have_same_parent(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {\n[sagelib-8.2.beta4]                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4777:13: warning: \u2018__pyx_doc_4sage_9structure_7element_2have_same_parent\u2019 defined but not use\nd [-Wunused-variable]\n[sagelib-8.2.beta4]  static char __pyx_doc_4sage_9structure_7element_2have_same_parent[] = \"have_same_parent(left, right) -> bool\\nFile: sage/structure/element\n.pxd (starting at line 112)\\n\\n    Return ``True`` if and only if ``left`` and ``right`` have the\\n    same parent.\\n\\n    .. WARNING::\\n\\n        This functio\nn assumes that at least one of the arguments is a\\n        Sage :class:`Element`. When in doubt, use the slower\\n        ``parent(left) is parent(right)`` inst\nead.\\n\\n    EXAMPLES::\\n\\n        sage: from sage.structure.element import have_same_parent\\n        sage: have_same_parent(1, 3)\\n        True\\n        sage: \nhave_same_parent(1, 1/2)\\n        False\\n        sage: have_same_parent(gap(1), gap(1/2))\\n        True\\n\\n    These have different types but the same parent::\n\\n\\n        sage: a = RLF(2)\\n        sage: b = exp(a)\\n        sage: type(a)\\n        <... 'sage.rings.real_lazy.LazyWrapper'>\\n        sage: type(b)\\n       \n <... 'sage.rings.real_lazy.LazyNamedUnop'>\\n        sage: have_same_parent(a, b)\\n        True\\n    \";\n[sagelib-8.2.beta4]              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4436:18: warning: \u2018PyObject* __pyx_pw_4sage_9structure_7element_1parent(PyObject*, PyObject*)\u2019 defined but not used [-Wunused-function]\n[sagelib-8.2.beta4]  static PyObject *__pyx_pw_4sage_9structure_7element_1parent(PyObject *__pyx_self, PyObject *__pyx_v_x) {\n[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4435:13: warning: \u2018__pyx_doc_4sage_9structure_7element_parent\u2019 defined but not used [-Wunused-variable]\n[sagelib-8.2.beta4]  static char __pyx_doc_4sage_9structure_7element_parent[] = \"parent(x)\\nFile: sage/structure/element.pxd (starting at line 7)\\n\\n    Return the parent of the element ``x``.\\n\\n    Usually, this means the mathematical object of which ``x`` is an\\n    element.\\n\\n    INPUT:\\n\\n    - ``x`` -- an element\\n\\n    OUTPUT:\\n\\n    - If ``x`` is a Sage :class:`Element`, return ``x.parent()``.\\n\\n    - Otherwise, return ``type(x)``.\\n\\n    .. SEEALSO::\\n\\n        `Parents, Conversion and Coercion <http://doc.sagemath.org/html/en/tutorial/tour_coercion.html>`_\\n        Section in the Sage Tutorial\\n\\n    EXAMPLES::\\n\\n        sage: a = 42\\n        sage: parent(a)\\n        Integer Ring\\n        sage: b = 42/1\\n        sage: parent(b)\\n        Rational Field\\n        sage: c = 42.0\\n        sage: parent(c)\\n        Real Field with 53 bits of precision\\n\\n    Some more complicated examples::\\n\\n        sage: x = Partition([3,2,1,1,1])\\n        sage: parent(x)\\n        Partitions\\n        sage: v = vector(RDF, [1,2,3])\\n        sage: parent(v)\\n        Vector space of dimension 3 over Real Double Field\\n\\n    The following are not considered to be elements, so the type is\\n    returned::\\n\\n        sage: d = int(42)  # Python int\\n        sage: parent(d)\\n        <... 'int'>\\n        sage: L = list(range(10))\\n        sage: parent(L)\\n        <... 'list'>\\n    \";\n[sagelib-8.2.beta4]              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n[sagelib-8.2.beta4] error: command 'gcc' failed with exit status 1\n```\n\nI don't know why `sage/combinat/partitions` needs to redefine `isinf(double)` - it is something about C++ vs plain C?",
    "created_at": "2018-02-02T09:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363371",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>With all the fixes we got, my build went to an error about conflicting headers while building sagelib:

```
[sagelib-8.2.beta4] [ 26/430] creating build/temp.solaris-2.11-sun4v.64bit-2.7/build/cythonized/sage/data_structures
[sagelib-8.2.beta4] gcc -DNDEBUG -g -O3 -Wall -D_XPG6 -fPIC -I/datapool/dima/Sage/sagetrac-mirror/local/include -I/datapool/dima/Sage/sagetrac-mirror/local/inc
lude/python2.7 -I/datapool/dima/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/numpy/core/include -I/datapool/dima/Sage/sagetrac-mirror/src -I/datapool
/dima/Sage/sagetrac-mirror/src/sage/ext -Ibuild/cythonized -I/datapool/dima/Sage/sagetrac-mirror/local/include/python2.7 -c build/cythonized/sage/data_structur
es/binary_search.c -o build/temp.solaris-2.11-sun4v.64bit-2.7/build/cythonized/sage/data_structures/binary_search.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRAC
EBACK=1 -std=c99
[sagelib-8.2.beta4] In file included from build/cythonized/sage/combinat/partitions.cpp:597:0:
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions_c.h: In function ‘int isinf(double)’:
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions_c.h:3:19: error: ‘int isinf(double)’ conflicts with a previous declaration
[sagelib-8.2.beta4]  int isinf(double x) { return !finite(x) && x==x; }
[sagelib-8.2.beta4]                    ^
[sagelib-8.2.beta4] In file included from /datapool/dima/lib/gcc/sparcv9-sun-solaris2.11/7.2.0/include-fixed/math.h:25:0,
[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/bits/std_abs.h:40,
[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/cstdlib:77,
[sagelib-8.2.beta4]                  from /datapool/dima/include/c++/7.2.0/stdlib.h:36,
[sagelib-8.2.beta4]                  from ../local/include/python2.7/Python.h:42,
[sagelib-8.2.beta4]                  from build/cythonized/sage/combinat/partitions.cpp:58:
[sagelib-8.2.beta4] /usr/include/iso/math_c99.h:711:14: note: previous declaration ‘bool std::isinf(double)’
[sagelib-8.2.beta4]   inline bool isinf(double __X) { return __builtin_isinf(__X); }
[sagelib-8.2.beta4]               ^~~~~
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp: At global scope:
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4778:18: warning: ‘PyObject* __pyx_pw_4sage_9structure_7element_3have_same_parent(PyObject*, 
PyObject*, PyObject*)’ defined but not used [-Wunused-function]
[sagelib-8.2.beta4]  static PyObject *__pyx_pw_4sage_9structure_7element_3have_same_parent(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
[sagelib-8.2.beta4]                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4777:13: warning: ‘__pyx_doc_4sage_9structure_7element_2have_same_parent’ defined but not use
d [-Wunused-variable]
[sagelib-8.2.beta4]  static char __pyx_doc_4sage_9structure_7element_2have_same_parent[] = "have_same_parent(left, right) -> bool\nFile: sage/structure/element
.pxd (starting at line 112)\n\n    Return ``True`` if and only if ``left`` and ``right`` have the\n    same parent.\n\n    .. WARNING::\n\n        This functio
n assumes that at least one of the arguments is a\n        Sage :class:`Element`. When in doubt, use the slower\n        ``parent(left) is parent(right)`` inst
ead.\n\n    EXAMPLES::\n\n        sage: from sage.structure.element import have_same_parent\n        sage: have_same_parent(1, 3)\n        True\n        sage: 
have_same_parent(1, 1/2)\n        False\n        sage: have_same_parent(gap(1), gap(1/2))\n        True\n\n    These have different types but the same parent::
\n\n        sage: a = RLF(2)\n        sage: b = exp(a)\n        sage: type(a)\n        <... 'sage.rings.real_lazy.LazyWrapper'>\n        sage: type(b)\n       
 <... 'sage.rings.real_lazy.LazyNamedUnop'>\n        sage: have_same_parent(a, b)\n        True\n    ";
[sagelib-8.2.beta4]              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4436:18: warning: ‘PyObject* __pyx_pw_4sage_9structure_7element_1parent(PyObject*, PyObject*)’ defined but not used [-Wunused-function]
[sagelib-8.2.beta4]  static PyObject *__pyx_pw_4sage_9structure_7element_1parent(PyObject *__pyx_self, PyObject *__pyx_v_x) {
[sagelib-8.2.beta4] build/cythonized/sage/combinat/partitions.cpp:4435:13: warning: ‘__pyx_doc_4sage_9structure_7element_parent’ defined but not used [-Wunused-variable]
[sagelib-8.2.beta4]  static char __pyx_doc_4sage_9structure_7element_parent[] = "parent(x)\nFile: sage/structure/element.pxd (starting at line 7)\n\n    Return the parent of the element ``x``.\n\n    Usually, this means the mathematical object of which ``x`` is an\n    element.\n\n    INPUT:\n\n    - ``x`` -- an element\n\n    OUTPUT:\n\n    - If ``x`` is a Sage :class:`Element`, return ``x.parent()``.\n\n    - Otherwise, return ``type(x)``.\n\n    .. SEEALSO::\n\n        `Parents, Conversion and Coercion <http://doc.sagemath.org/html/en/tutorial/tour_coercion.html>`_\n        Section in the Sage Tutorial\n\n    EXAMPLES::\n\n        sage: a = 42\n        sage: parent(a)\n        Integer Ring\n        sage: b = 42/1\n        sage: parent(b)\n        Rational Field\n        sage: c = 42.0\n        sage: parent(c)\n        Real Field with 53 bits of precision\n\n    Some more complicated examples::\n\n        sage: x = Partition([3,2,1,1,1])\n        sage: parent(x)\n        Partitions\n        sage: v = vector(RDF, [1,2,3])\n        sage: parent(v)\n        Vector space of dimension 3 over Real Double Field\n\n    The following are not considered to be elements, so the type is\n    returned::\n\n        sage: d = int(42)  # Python int\n        sage: parent(d)\n        <... 'int'>\n        sage: L = list(range(10))\n        sage: parent(L)\n        <... 'list'>\n    ";
[sagelib-8.2.beta4]              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[sagelib-8.2.beta4] error: command 'gcc' failed with exit status 1
```

I don't know why `sage/combinat/partitions` needs to redefine `isinf(double)` - it is something about C++ vs plain C?



---

archive/issue_comments_363372.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:42 dimpase]:\n> I did `export ABI=64`.\n\n\nI'm sure if that actually changes anything for GCC. In any case, it doesn't help for building GCC in Sage.",
    "created_at": "2018-02-02T09:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363372",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>Replying to [comment:42 dimpase]:
> I did `export ABI=64`.


I'm sure if that actually changes anything for GCC. In any case, it doesn't help for building GCC in Sage.



---

archive/issue_comments_363373.json:
```json
{
    "body": "<a id='comment:45'></a>trying now the obvious\n\n```\ndiff --git a/src/sage/combinat/partitions_c.h b/src/sage/combinat/partitions_c.h\nindex e82ac77..7bc7398 100644\n--- a/src/sage/combinat/partitions_c.h\n+++ b/src/sage/combinat/partitions_c.h\n@@ -1,8 +1,3 @@\n-#if defined(__sun)\n-#include <ieeefp.h>\n-int isinf(double x) { return !finite(x) && x==x; }\n-#endif\n-\n #include <gmp.h>\n \n int part(mpz_t answer, unsigned int n);\n```\n\nwhich is undoing true vintage stuff: commit 29fd8e9662c (Michael Abshoff 2008-01-29...)",
    "created_at": "2018-02-02T09:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363373",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>trying now the obvious

```
diff --git a/src/sage/combinat/partitions_c.h b/src/sage/combinat/partitions_c.h
index e82ac77..7bc7398 100644
--- a/src/sage/combinat/partitions_c.h
+++ b/src/sage/combinat/partitions_c.h
@@ -1,8 +1,3 @@
-#if defined(__sun)
-#include <ieeefp.h>
-int isinf(double x) { return !finite(x) && x==x; }
-#endif
-
 #include <gmp.h>
 
 int part(mpz_t answer, unsigned int n);
```

which is undoing true vintage stuff: commit 29fd8e9662c (Michael Abshoff 2008-01-29...)



---

archive/issue_comments_363374.json:
```json
{
    "body": "<a id='comment:46'></a>I will inspect the whole commit 29fd8e9662c - there is quite a bit of Sun-only funky stuff...",
    "created_at": "2018-02-02T09:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363374",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>I will inspect the whole commit 29fd8e9662c - there is quite a bit of Sun-only funky stuff...



---

archive/issue_comments_363375.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:46 dimpase]:\n> I will inspect the whole commit 29fd8e9662c - there is quite a bit of Sun-only funky stuff...\n\n\nI've opened #24642 for this.",
    "created_at": "2018-02-02T10:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363375",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>Replying to [comment:46 dimpase]:
> I will inspect the whole commit 29fd8e9662c - there is quite a bit of Sun-only funky stuff...


I've opened #24642 for this.



---

archive/issue_comments_363376.json:
```json
{
    "body": "<a id='comment:48'></a>My build has completed, but `./sage` crashes on startup. Undertaking more cleaning of `_sun` stuff, perhaps it helps.",
    "created_at": "2018-02-02T11:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363376",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>My build has completed, but `./sage` crashes on startup. Undertaking more cleaning of `_sun` stuff, perhaps it helps.



---

archive/issue_comments_363377.json:
```json
{
    "body": "<a id='comment:49'></a>OK, it's merely \n\n```\nImportError: ld.so.1: python2.7: fatal: libflint.so.13: open failed: No such file or directory\n```\nOpened #24643 to deal with it.",
    "created_at": "2018-02-02T11:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363377",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>OK, it's merely 

```
ImportError: ld.so.1: python2.7: fatal: libflint.so.13: open failed: No such file or directory
```
Opened #24643 to deal with it.



---

archive/issue_comments_363378.json:
```json
{
    "body": "<a id='comment:50'></a>Do recent Sage's work on any Solaris platform? I know at one point it worked on Solaris 10 (SPARC) and passed all doc tests as a 32-bit application, but whilst I managed to build a 64-bit version, it was **very** unstable. I believe later version of Sage were not tested on Solaris, and I found it would not build. \n\nI recently installed the latest Solaris 10 on a Sun Blade 2000 (SPARC), but can't install Solaris 11 on there, as the CPU is too old. I also have OpenSolaris (sort of Solaris 11) on an x86 box. \n\n**If I can be any assistance I will be, but I don't have access to any Solaris 11 SPARC box.**\n\nI am guessing that this T4 box will be like the old t2.math, which was very slow on Sage. The T2, T3 and T4 CPUs are not designed for this application. Apparently they work very well on busy webservers and databases, but if only one thread is in use most of the time, they are not going to work well. \n\nI don't think enough people see the benefit of having software compile on several platforms. Often bugs show up on one platform that don't on another, but may bite on that other platform in the future. \n\nDave",
    "created_at": "2018-02-02T14:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363378",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:50'></a>Do recent Sage's work on any Solaris platform? I know at one point it worked on Solaris 10 (SPARC) and passed all doc tests as a 32-bit application, but whilst I managed to build a 64-bit version, it was **very** unstable. I believe later version of Sage were not tested on Solaris, and I found it would not build. 

I recently installed the latest Solaris 10 on a Sun Blade 2000 (SPARC), but can't install Solaris 11 on there, as the CPU is too old. I also have OpenSolaris (sort of Solaris 11) on an x86 box. 

**If I can be any assistance I will be, but I don't have access to any Solaris 11 SPARC box.**

I am guessing that this T4 box will be like the old t2.math, which was very slow on Sage. The T2, T3 and T4 CPUs are not designed for this application. Apparently they work very well on busy webservers and databases, but if only one thread is in use most of the time, they are not going to work well. 

I don't think enough people see the benefit of having software compile on several platforms. Often bugs show up on one platform that don't on another, but may bite on that other platform in the future. 

Dave



---

archive/issue_comments_363379.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:50 drkirkby]:\n> I don't think enough people see the benefit of having software compile on several platforms.\n\n\nMy opinion is that compiling software on \"exotic\" platforms helps portability in general. So it's not wasted effort.",
    "created_at": "2018-02-02T15:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363379",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>Replying to [comment:50 drkirkby]:
> I don't think enough people see the benefit of having software compile on several platforms.


My opinion is that compiling software on "exotic" platforms helps portability in general. So it's not wasted effort.



---

archive/issue_comments_363380.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:50 drkirkby]:\n> Do recent Sage's work on any Solaris platform? I know at one point it worked on Solaris 10 (SPARC) and passed all doc tests as a 32-bit application, but whilst I managed to build a 64-bit version, it was **very** unstable. I believe later version of Sage were not tested on Solaris, and I found it would not build. \n\n\nFor years we did not have access to a well-working Solaris box, and so the port bitrotted quite a bit.\n> \n> I recently installed the latest Solaris 10 on a Sun Blade 2000 (SPARC), but can't install Solaris 11 on there, as the CPU is too old. I also have OpenSolaris (sort of Solaris 11) on an x86 box. \n> \n> **If I can be any assistance I will be, but I don't have access to any Solaris 11 SPARC box.**\n> \n\n\nI believe that with recent [openCSW](https://www.opencsw.org/manual/for-administrators/getting-started.html) you basically get the same tools for Solaris 11 and 10, \nso it should not matter too much whether it's 10 or 11. (YMMV, naturally).\n\nOne can get gcc 5.4 and all the g-stuff (gtar, gawk, etc), so nothing needs to be built manually.\nGive it a try once we have this ticket in a reasonable shape.\n\nAt the moment I get working Sage (with all this slew of tickets we opened here, and patches there), but building some bits of documentation (3d plots built with tachyon) fails.\n\n\n> I am guessing that this T4 box will be like the old t2.math, which was very slow on Sage. The T2, T3 and T4 CPUs are not designed for this application. Apparently they work very well on busy webservers and databases, but if only one thread is in use most of the time, they are not going to work well. \n> \n\nT4 is not too slow, it seems.",
    "created_at": "2018-02-02T19:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363380",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>Replying to [comment:50 drkirkby]:
> Do recent Sage's work on any Solaris platform? I know at one point it worked on Solaris 10 (SPARC) and passed all doc tests as a 32-bit application, but whilst I managed to build a 64-bit version, it was **very** unstable. I believe later version of Sage were not tested on Solaris, and I found it would not build. 


For years we did not have access to a well-working Solaris box, and so the port bitrotted quite a bit.
> 
> I recently installed the latest Solaris 10 on a Sun Blade 2000 (SPARC), but can't install Solaris 11 on there, as the CPU is too old. I also have OpenSolaris (sort of Solaris 11) on an x86 box. 
> 
> **If I can be any assistance I will be, but I don't have access to any Solaris 11 SPARC box.**
> 


I believe that with recent [openCSW](https://www.opencsw.org/manual/for-administrators/getting-started.html) you basically get the same tools for Solaris 11 and 10, 
so it should not matter too much whether it's 10 or 11. (YMMV, naturally).

One can get gcc 5.4 and all the g-stuff (gtar, gawk, etc), so nothing needs to be built manually.
Give it a try once we have this ticket in a reasonable shape.

At the moment I get working Sage (with all this slew of tickets we opened here, and patches there), but building some bits of documentation (3d plots built with tachyon) fails.


> I am guessing that this T4 box will be like the old t2.math, which was very slow on Sage. The T2, T3 and T4 CPUs are not designed for this application. Apparently they work very well on busy webservers and databases, but if only one thread is in use most of the time, they are not going to work well. 
> 

T4 is not too slow, it seems.



---

archive/issue_comments_363381.json:
```json
{
    "body": "<a id='comment:53'></a>The next problem is with plotting (docs won't build due to errors in matplotlib).\nAs #23696 is imminent, I don't want to look at errors with matplotlib 1.5.\nThe first problem is in subprocess32: #24650 (ought to be fixed upstream)",
    "created_at": "2018-02-03T14:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363381",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>The next problem is with plotting (docs won't build due to errors in matplotlib).
As #23696 is imminent, I don't want to look at errors with matplotlib 1.5.
The first problem is in subprocess32: #24650 (ought to be fixed upstream)



---

archive/issue_comments_363382.json:
```json
{
    "body": "<a id='comment:55'></a>pexpect interface is apparently broken (and this causes a lot of breakage everywhere pexpect is used), e.g.\n\n```\nsage -t src/sage/interfaces/singular.py  # 172 doctests failed\n```\nsee #24651 for full details and traces. Here is a typical error:\n\n```\nsage: t=singular(0)\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n...\nIOError: [Errno 22] Invalid argument: setecho() may not be called on this platform.\nsage:  \n```",
    "created_at": "2018-02-03T20:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363382",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:55'></a>pexpect interface is apparently broken (and this causes a lot of breakage everywhere pexpect is used), e.g.

```
sage -t src/sage/interfaces/singular.py  # 172 doctests failed
```
see #24651 for full details and traces. Here is a typical error:

```
sage: t=singular(0)
---------------------------------------------------------------------------
IOError                                   Traceback (most recent call last)
...
IOError: [Errno 22] Invalid argument: setecho() may not be called on this platform.
sage:  
```



---

archive/issue_comments_363383.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,55 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export CFLAGS=\"-O2 -g -D_XPG6\"\n+export PATH=/opt/csw/gnu:$PATH\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* OpenBLAS fails to auto-detect SPARC CPU: #24638\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-05T10:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363383",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,55 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export CFLAGS="-O2 -g -D_XPG6"
+export PATH=/opt/csw/gnu:$PATH
+
+./configure --with-mp=gmp
+\`\`\`
+
+* OpenBLAS fails to auto-detect SPARC CPU: #24638
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363384.json:
```json
{
    "body": "<a id='comment:57'></a>Are you sure it's a good idea not to pass `-D_XPG6` to g++, too?",
    "created_at": "2018-02-05T10:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363384",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:57'></a>Are you sure it's a good idea not to pass `-D_XPG6` to g++, too?



---

archive/issue_comments_363385.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,56 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export PATH=/opt/csw/gnu:$PATH\n+export CFLAGS=\"-O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"        # Maybe not strictly needed\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* OpenBLAS fails to auto-detect SPARC CPU: #24638\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-05T10:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363385",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,56 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242)
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export PATH=/opt/csw/gnu:$PATH
+export CFLAGS="-O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"        # Maybe not strictly needed
+
+./configure --with-mp=gmp
+\`\`\`
+
+* OpenBLAS fails to auto-detect SPARC CPU: #24638
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363386.json:
```json
{
    "body": "<a id='comment:58'></a>Replying to [comment:57 dimpase]:\n> Are you sure it's a good idea not to pass `-D_XPG6` to g++, too?\n\n\nIt seems in particular needed to compile C99 code. But I guess it doesn't hurt to add it to `CXXFLAGS`.",
    "created_at": "2018-02-05T10:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363386",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>Replying to [comment:57 dimpase]:
> Are you sure it's a good idea not to pass `-D_XPG6` to g++, too?


It seems in particular needed to compile C99 code. But I guess it doesn't hurt to add it to `CXXFLAGS`.



---

archive/issue_comments_363387.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-02-06T11:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_363388.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,56 @@\n+We have access to SPARC T4 system\n \n+\\`\\`\\`\n+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v\n+\\`\\`\\`\n+\n+We track here the resulting issues and tickets.\n+\n+* no need to pre-build any tools, apparently. Everything is available via Solaris \\`pkg\\` or \\`pkgutil\\` (i.e. opencsw). \n+\n+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242). For details and a possible fix, see #24674.\n+\n+* Various packages need \\`CFLAGS=\"-D_XPG6\"\\`\n+\n+* To take care of the above, set the following before building\n+\n+\\`\\`\\`\n+export PATH=/opt/csw/gnu:$PATH\n+export CFLAGS=\"-O2 -g -D_XPG6\"\n+export CXXFLAGS=\"$CFLAGS\"        # Maybe not strictly needed\n+\n+./configure --with-mp=gmp\n+\\`\\`\\`\n+\n+* OpenBLAS fails to auto-detect SPARC CPU: #24638\n+\n+* #24597 fixes building issues for python2/3\n+\n+* building \\`fplll\\` and \\`singular\\` fails due to a silly C++  (g++ 5.4.0)\n+  error, which cannot properly compile templated \\`pow()\\` from \n+  \\`cmath\\`, e.g. the following fails:\n+\n+\\`\\`\\`\n+#include <cmath>\n+int main()\n+{\n+int i,j,k;\n+i = 2;\n+j = 10;\n+k = pow(i,j);\n+return k;\n+}\n+\\`\\`\\`\n+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \\`std::\\` to pow, or adding \\`using namespace std;\\` results in successful compilation of this example (and most probably this also will work for Singular).\n+** this problem went away by itself after some changes to the linker used, I don't really know why **\n+\n+* iconv fails due to a wrong assumption on the standard in the \n+  source code, fixed in the latest stable version. #24602 is the \n+  update to do here.\n+\n+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618\n+\n+* linking of Singular is tentatively fixed by #24611\n \n Comment: 1\n \n```\n",
    "created_at": "2018-02-06T17:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363388",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,56 @@
+We have access to SPARC T4 system
 
+\`\`\`
+SunOS xenos-sagetest 5.11 11.3 sun4v sparc sun4v
+\`\`\`
+
+We track here the resulting issues and tickets.
+
+* no need to pre-build any tools, apparently. Everything is available via Solaris \`pkg\` or \`pkgutil\` (i.e. opencsw). 
+
+* MPFR configure fails with MPIR. Can be resolved by using GMP instead. Upstream: [issue 242](https://github.com/wbhart/mpir/issues/242). For details and a possible fix, see #24674.
+
+* Various packages need \`CFLAGS="-D_XPG6"\`
+
+* To take care of the above, set the following before building
+
+\`\`\`
+export PATH=/opt/csw/gnu:$PATH
+export CFLAGS="-O2 -g -D_XPG6"
+export CXXFLAGS="$CFLAGS"        # Maybe not strictly needed
+
+./configure --with-mp=gmp
+\`\`\`
+
+* OpenBLAS fails to auto-detect SPARC CPU: #24638
+
+* #24597 fixes building issues for python2/3
+
+* building \`fplll\` and \`singular\` fails due to a silly C++  (g++ 5.4.0)
+  error, which cannot properly compile templated \`pow()\` from 
+  \`cmath\`, e.g. the following fails:
+
+\`\`\`
+#include <cmath>
+int main()
+{
+int i,j,k;
+i = 2;
+j = 10;
+k = pow(i,j);
+return k;
+}
+\`\`\`
+   This appears to be platform-specific.  Same error with g++ 7.2.0. Adding \`std::\` to pow, or adding \`using namespace std;\` results in successful compilation of this example (and most probably this also will work for Singular).
+** this problem went away by itself after some changes to the linker used, I don't really know why **
+
+* iconv fails due to a wrong assumption on the standard in the 
+  source code, fixed in the latest stable version. #24602 is the 
+  update to do here.
+
+* gcc 7.2 builds fplll, whereas gcc 5.4 cannot do it. See #24618
+
+* linking of Singular is tentatively fixed by #24611
 
 Comment: 1
 
```




---

archive/issue_comments_363389.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-07T06:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363390.json:
```json
{
    "body": "<a id='comment:64'></a>testing:\n\n```\nsage -t src/sage/plot/plot3d/list_plot3d.py  # 1 doctest failed\nsage -t src/sage/plot/plot3d/base.pyx  # Killed due to bus error\nsage -t src/sage/modular/abvar/abvar.py  # Timed out\nsage -t src/sage/modular/abvar/lseries.py  # Timed out\nsage -t src/sage/modular/modform/element.py  # Timed out\nsage -t src/sage/modular/modform_hecketriangle/element.py  # Timed out\nsage -t src/sage/modular/modform_hecketriangle/readme.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_point.py  # 1 doctest failed\nsage -t src/sage/functions/wigner.py  # 1 doctest failed\nsage -t src/sage/rings/bernmm.pyx  # 2 doctests failed\nsage -t src/sage/rings/number_field/number_field.py  # Timed out\nsage -t src/sage/rings/padics/padic_extension_leaves.py  # Timed out\nsage -t src/sage/geometry/riemannian_manifolds/surface3d_generators.py  # 1 doctest failed\nsage -t src/sage/misc/cython.py  # 1 doctest failed\nsage -t src/sage/misc/compat.py  # 1 doctest failed\nsage -t src/sage/tests/parigp.py  # Timed out\nsage -t src/sage/tests/cmdline.py  # 1 doctest failed\nsage -t src/sage/lfunctions/dokchitser.py  # Timed out\nsage -t src/sage/graphs/generators/smallgraphs.py  # 1 doctest failed\nsage -t src/sage/repl/image.py  # Killed due to bus error\nsage -t src/sage/matrix/matrix2.pyx  # Killed due to bus error\nsage -t src/sage/dynamics/complex_dynamics/mandel_julia.py  # Killed due to bus error\nsage -t src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx  # Killed due to bus error\nsage -t src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/l_series.rst  # Timed out\n```\n\nhere is the log for failing tests:\nhttp://users.ox.ac.uk/~coml0531/tmp/test5.log",
    "created_at": "2018-02-11T10:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363390",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:64'></a>testing:

```
sage -t src/sage/plot/plot3d/list_plot3d.py  # 1 doctest failed
sage -t src/sage/plot/plot3d/base.pyx  # Killed due to bus error
sage -t src/sage/modular/abvar/abvar.py  # Timed out
sage -t src/sage/modular/abvar/lseries.py  # Timed out
sage -t src/sage/modular/modform/element.py  # Timed out
sage -t src/sage/modular/modform_hecketriangle/element.py  # Timed out
sage -t src/sage/modular/modform_hecketriangle/readme.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_point.py  # 1 doctest failed
sage -t src/sage/functions/wigner.py  # 1 doctest failed
sage -t src/sage/rings/bernmm.pyx  # 2 doctests failed
sage -t src/sage/rings/number_field/number_field.py  # Timed out
sage -t src/sage/rings/padics/padic_extension_leaves.py  # Timed out
sage -t src/sage/geometry/riemannian_manifolds/surface3d_generators.py  # 1 doctest failed
sage -t src/sage/misc/cython.py  # 1 doctest failed
sage -t src/sage/misc/compat.py  # 1 doctest failed
sage -t src/sage/tests/parigp.py  # Timed out
sage -t src/sage/tests/cmdline.py  # 1 doctest failed
sage -t src/sage/lfunctions/dokchitser.py  # Timed out
sage -t src/sage/graphs/generators/smallgraphs.py  # 1 doctest failed
sage -t src/sage/repl/image.py  # Killed due to bus error
sage -t src/sage/matrix/matrix2.pyx  # Killed due to bus error
sage -t src/sage/dynamics/complex_dynamics/mandel_julia.py  # Killed due to bus error
sage -t src/sage/dynamics/complex_dynamics/mandel_julia_helper.pyx  # Killed due to bus error
sage -t src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/l_series.rst  # Timed out
```

here is the log for failing tests:
http://users.ox.ac.uk/~coml0531/tmp/test5.log



---

archive/issue_comments_363391.json:
```json
{
    "body": "<a id='comment:65'></a>see #24765 for a GAP problem.",
    "created_at": "2018-02-17T22:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363391",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'></a>see #24765 for a GAP problem.



---

archive/issue_comments_363392.json:
```json
{
    "body": "<a id='comment:68'></a>Do \"we\" have still access to the system? Can it be configured as a self-hosted runner for [GitHub](GitHub) actions? https://help.github.com/en/actions/hosting-your-own-runners",
    "created_at": "2020-03-22T15:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363392",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:68'></a>Do "we" have still access to the system? Can it be configured as a self-hosted runner for [GitHub](GitHub) actions? https://help.github.com/en/actions/hosting-your-own-runners



---

archive/issue_comments_363393.json:
```json
{
    "body": "<a id='comment:69'></a>no access since last year, no reply from the sysadmin.\nI can offer an OpenBSD box as a replacement :-)",
    "created_at": "2020-03-26T02:40:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363393",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:69'></a>no access since last year, no reply from the sysadmin.
I can offer an OpenBSD box as a replacement :-)



---

archive/issue_comments_363394.json:
```json
{
    "body": "<a id='comment:70'></a>Outdated, should be closed",
    "created_at": "2020-07-08T16:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363394",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Outdated, should be closed



---

archive/issue_events_061995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-08T16:51:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24596#event-61995"
}
```



---

archive/issue_comments_363395.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-08T16:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363395",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_363396.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-09T13:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363396",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_363397.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-08-14T12:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24596#issuecomment-363397",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid



---

archive/issue_events_061996.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-14T12:54:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24596",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24596#event-61996"
}
```
