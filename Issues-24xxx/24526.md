# Issue 24526: more user friendly finite field extensions

archive/issues_024289.json:
```json
{
    "body": "`GF(p).extension(xxx)` does not accept symbolic polynomials... and the error is cryptic\n\n```\nsage: Fp = GF(3)\nsage: Fp2.<i> = Fp.extension(x^2+1)\nTraceback (most recent call last):\n...\nUnboundLocalError: local variable 'E' referenced before assignment\n```\n\nWe make it more user friendly by allowing the above in some duck typing fashion.\n\nWork_Issues: merge conflict\n\nAuthor: Vincent Delecroix\n\nBranch: u/vdelecroix/24526\n\nStatus: needs_work\n\nCommit: ba8454698b6ebc00afcebeefc5b586e2dfcff4be\n\nIssue created by migration from https://trac.sagemath.org/ticket/24526\n\n",
    "created_at": "2018-01-11T19:43:41Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "more user friendly finite field extensions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24526",
    "user": "https://github.com/videlec"
}
```
`GF(p).extension(xxx)` does not accept symbolic polynomials... and the error is cryptic

```
sage: Fp = GF(3)
sage: Fp2.<i> = Fp.extension(x^2+1)
Traceback (most recent call last):
...
UnboundLocalError: local variable 'E' referenced before assignment
```

We make it more user friendly by allowing the above in some duck typing fashion.

Work_Issues: merge conflict

Author: Vincent Delecroix

Branch: u/vdelecroix/24526

Status: needs_work

Commit: ba8454698b6ebc00afcebeefc5b586e2dfcff4be

Issue created by migration from https://trac.sagemath.org/ticket/24526





---

archive/issue_comments_464337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-11T20:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464337",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464338.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2018-01-11T20:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464338",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_464339.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,8 @@\n UnboundLocalError: local variable 'E' referenced before assignment\n ```\n \n+We make it more user friendly by allowing the above in some duck typing fashion.\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/24526\n``````\n",
    "created_at": "2018-01-11T20:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464339",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,8 @@
 UnboundLocalError: local variable 'E' referenced before assignment
 ```
 
+We make it more user friendly by allowing the above in some duck typing fashion.
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/24526
``````




---

archive/issue_comments_464340.json:
```json
{
    "body": "Changing commit from \"\" to \"ba8454698b6ebc00afcebeefc5b586e2dfcff4be\"",
    "created_at": "2018-01-11T23:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464340",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "ba8454698b6ebc00afcebeefc5b586e2dfcff4be"



---

archive/issue_comments_464341.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2018-01-11T23:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464341",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_464342.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/24526\"",
    "created_at": "2018-01-11T23:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464342",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/24526"



---

archive/issue_comments_464343.json:
```json
{
    "body": "<a id='comment:3'></a>It may be better to keep the branch dealing with tuples/lists for speed reasons... Perhaps it doesn't matter (I don't know how much it is used or what alternatives exist for constructing extensions without too much overhead), but your patch makes the call to `extension()` in `GF(3).extension([1, 0, 1], 'a')` 70% slower on my system.",
    "created_at": "2018-01-31T09:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464343",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>It may be better to keep the branch dealing with tuples/lists for speed reasons... Perhaps it doesn't matter (I don't know how much it is used or what alternatives exist for constructing extensions without too much overhead), but your patch makes the call to `extension()` in `GF(3).extension([1, 0, 1], 'a')` 70% slower on my system.



---

archive/issue_comments_464344.json:
```json
{
    "body": "<a id='comment:4'></a>Should this ducktyping really all be happening under the hood without notifying the user? I think a more readable error message would be better, or at least a warning. We don't want people to use SR for polynomials in their code, do we?\n\nAlso, is this\n\n```\n+                else:\n+                    modulus = modulus.change_ring(self)\n```\nnecessary? The `GF` constructor already does `modulus = R(modulus).monic()`, where R = PolynomialRing(FiniteField(p), 'x').",
    "created_at": "2018-04-01T16:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464344",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>Should this ducktyping really all be happening under the hood without notifying the user? I think a more readable error message would be better, or at least a warning. We don't want people to use SR for polynomials in their code, do we?

Also, is this

```
+                else:
+                    modulus = modulus.change_ring(self)
```
necessary? The `GF` constructor already does `modulus = R(modulus).monic()`, where R = PolynomialRing(FiniteField(p), 'x').



---

archive/issue_comments_464345.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge conflict\"",
    "created_at": "2019-03-28T08:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464345",
    "user": "https://github.com/dkrenn"
}
```

Changing work_issues from "" to "merge conflict"



---

archive/issue_comments_464346.json:
```json
{
    "body": "<a id='comment:5'></a>Does not apply anymore.",
    "created_at": "2019-03-28T08:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464346",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>Does not apply anymore.



---

archive/issue_comments_464347.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-28T08:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464347",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_464348.json:
```json
{
    "body": "<a id='comment:6'></a>Recent user report for the same problem:\n\n- [Ask Sage question 56220: Finite field extension](https://ask.sagemath.org/question/56220)",
    "created_at": "2021-03-24T13:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464348",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>Recent user report for the same problem:

- [Ask Sage question 56220: Finite field extension](https://ask.sagemath.org/question/56220)



---

archive/issue_comments_464349.json:
```json
{
    "body": "<a id='comment:7'></a>Please rebase, and I can review.",
    "created_at": "2021-03-24T13:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24526",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24526#issuecomment-464349",
    "user": "https://github.com/slel"
}
```

<a id='comment:7'></a>Please rebase, and I can review.
