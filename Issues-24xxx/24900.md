# Issue 24900: Tensor product and coefficients

archive/issues_024663.json:
```json
{
    "body": "Tensor products of combinatorial free modules still use an old version of\ncartesian product. As a consequence extracting a coefficient is not possible:\n\n```\nsage: F = CombinatorialFreeModule(ZZ, [1,2]); F.__custom_name = \"F\"\nsage: G = CombinatorialFreeModule(ZZ, [3,4]); G.__custom_name = \"G\"\nsage: T = tensor([F, G]); T\nsage: T.basis()[(1,3)].coefficient((1,3))\n...\nNotImplementedError:\n```\nI fix that. As a side effect, this change the result of `an_element` so that I\nhave to fix a few doctests.\n\nMoreover, building the tensor of two infinite dimensional FM now raises a correct\nwarning:\n\n```\nsage: F = CombinatorialFreeModule(ZZ, NN)\nsage: T = tensor([F, F]); T\nFree module generated by Non negative integer semiring over Integer Ring \u2297 Free module generated by Non negative integer semiring over Integer Ring\nsage: T.an_element()\n/home/data/Sage-Install/sage-dev/local/lib/python2.7/site-packages/sage/categories/sets_cat.py:2159: UserWarning: Sage is not able to determine whether the factors of this Cartesian product are finite. The lexicographic ordering might not go through all elements.\n  warn(\"Sage is not able to determine whether the factors of \"\n2*B[0] \u2297 B[1] + B[0] \u2297 B[0] + 3*B[0] \u2297 B[2] + B[42] \u2297 B[42]\n```\nI'm hiding this by asking only finite dim FM.\n\n\n**CC:**  @nthiery @tscrim @mkoeppe\n\n**Keywords:** tensor product, free modules\n\n**Branch:** [public/cartesian_24900](https://github.com/sagemath/sagetrac-mirror/tree/public/cartesian_24900)\n\n**Commit:** [bfa36e785be6af5bb7031d785c8469acfcd1472b](https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b)\n\n**Author:** Florent Hivert\n\n**Status:** needs_work\n\n**Dependencies:** #19195\n\nIssue created by migration from https://trac.sagemath.org/ticket/24900\n\n",
    "created_at": "2018-03-05T15:16:01Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Tensor product and coefficients",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24900",
    "user": "https://github.com/hivert"
}
```
Tensor products of combinatorial free modules still use an old version of
cartesian product. As a consequence extracting a coefficient is not possible:

```
sage: F = CombinatorialFreeModule(ZZ, [1,2]); F.__custom_name = "F"
sage: G = CombinatorialFreeModule(ZZ, [3,4]); G.__custom_name = "G"
sage: T = tensor([F, G]); T
sage: T.basis()[(1,3)].coefficient((1,3))
...
NotImplementedError:
```
I fix that. As a side effect, this change the result of `an_element` so that I
have to fix a few doctests.

Moreover, building the tensor of two infinite dimensional FM now raises a correct
warning:

```
sage: F = CombinatorialFreeModule(ZZ, NN)
sage: T = tensor([F, F]); T
Free module generated by Non negative integer semiring over Integer Ring ⊗ Free module generated by Non negative integer semiring over Integer Ring
sage: T.an_element()
/home/data/Sage-Install/sage-dev/local/lib/python2.7/site-packages/sage/categories/sets_cat.py:2159: UserWarning: Sage is not able to determine whether the factors of this Cartesian product are finite. The lexicographic ordering might not go through all elements.
  warn("Sage is not able to determine whether the factors of "
2*B[0] ⊗ B[1] + B[0] ⊗ B[0] + 3*B[0] ⊗ B[2] + B[42] ⊗ B[42]
```
I'm hiding this by asking only finite dim FM.


**CC:**  @nthiery @tscrim @mkoeppe

**Keywords:** tensor product, free modules

**Branch:** [public/cartesian_24900](https://github.com/sagemath/sagetrac-mirror/tree/public/cartesian_24900)

**Commit:** [bfa36e785be6af5bb7031d785c8469acfcd1472b](https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b)

**Author:** Florent Hivert

**Status:** needs_work

**Dependencies:** #19195

Issue created by migration from https://trac.sagemath.org/ticket/24900





---

archive/issue_comments_452190.json:
```json
{
    "body": "**Branch:** [u/hivert/tensor_product_and_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/tensor_product_and_coefficients)",
    "created_at": "2018-03-05T15:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452190",
    "user": "https://github.com/hivert"
}
```

**Branch:** [u/hivert/tensor_product_and_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/tensor_product_and_coefficients)



---

archive/issue_comments_452191.json:
```json
{
    "body": "**Commit:** [009c70a07140b6df68ac61ccd38db52c0b1188b1](https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1)",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452191",
    "user": "https://github.com/hivert"
}
```

**Commit:** [009c70a07140b6df68ac61ccd38db52c0b1188b1](https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1)



---

archive/issue_comments_452192.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1\">009c70a</a></td><td><code>Fix tensor prod. using old cartesian prod.</code></td></tr></table>\n",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452192",
    "user": "https://github.com/hivert"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1">009c70a</a></td><td><code>Fix tensor prod. using old cartesian prod.</code></td></tr></table>




---

archive/issue_comments_452193.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452193",
    "user": "https://github.com/hivert"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_452194.json:
```json
{
    "body": "**Author:** Florent Hivert",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452194",
    "user": "https://github.com/hivert"
}
```

**Author:** Florent Hivert



---

archive/issue_comments_452195.json:
```json
{
    "body": "<a id='comment:3'></a>\nmany failing doctests",
    "created_at": "2018-03-14T16:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452195",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
many failing doctests



---

archive/issue_comments_452196.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-03-14T16:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452196",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_452197.json:
```json
{
    "body": "<a id='comment:6'></a>\nrebased, just to see where this stands now\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8\">29190d3</a></td><td><code>Fix tensor prod. using old cartesian prod.</code></td></tr></table>\n",
    "created_at": "2022-08-22T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452197",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
rebased, just to see where this stands now

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8">29190d3</a></td><td><code>Fix tensor prod. using old cartesian prod.</code></td></tr></table>




---

archive/issue_comments_452198.json:
```json
{
    "body": "**Changing commit** from \"[009c70a07140b6df68ac61ccd38db52c0b1188b1](https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1)\" to \"[29190d35dd8266187b91f482064d785b934cb7a8](https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8)\".",
    "created_at": "2022-08-22T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452198",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[009c70a07140b6df68ac61ccd38db52c0b1188b1](https://github.com/sagemath/sagetrac-mirror/commit/009c70a07140b6df68ac61ccd38db52c0b1188b1)" to "[29190d35dd8266187b91f482064d785b934cb7a8](https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8)".



---

archive/issue_comments_452199.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/tensor_product_and_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/tensor_product_and_coefficients)\" to \"[public/cartesian_24900](https://github.com/sagemath/sagetrac-mirror/tree/public/cartesian_24900)\".",
    "created_at": "2022-08-22T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452199",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/hivert/tensor_product_and_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/tensor_product_and_coefficients)" to "[public/cartesian_24900](https://github.com/sagemath/sagetrac-mirror/tree/public/cartesian_24900)".



---

archive/issue_events_071405.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-08-22T16:59:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24900#event-71405"
}
```



---

archive/issue_comments_452200.json:
```json
{
    "body": "**Changing commit** from \"[29190d35dd8266187b91f482064d785b934cb7a8](https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8)\" to \"[bfa36e785be6af5bb7031d785c8469acfcd1472b](https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b)\".",
    "created_at": "2022-08-23T08:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[29190d35dd8266187b91f482064d785b934cb7a8](https://github.com/sagemath/sagetrac-mirror/commit/29190d35dd8266187b91f482064d785b934cb7a8)" to "[bfa36e785be6af5bb7031d785c8469acfcd1472b](https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b)".



---

archive/issue_comments_452201.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b\">bfa36e7</a></td><td><code>fix one doctest</code></td></tr></table>\n",
    "created_at": "2022-08-23T08:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfa36e785be6af5bb7031d785c8469acfcd1472b">bfa36e7</a></td><td><code>fix one doctest</code></td></tr></table>




---

archive/issue_comments_452202.json:
```json
{
    "body": "**Dependencies:** #19195",
    "created_at": "2022-08-30T05:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24900#issuecomment-452202",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #19195



---

archive/issue_events_071406.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24900#event-71406"
}
```



---

archive/issue_events_071407.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24900",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24900#event-71407"
}
```
