# Issue 24261: py3: add py2 and py3 doctest flags

archive/issues_024024.json:
```json
{
    "body": "This adds two new flags that can be placed next to doctests: `# py2` and `# py3`.  If marked `py2` a test will *only* be run on Python 2 and so on.\n\nGenerally this should be avoided in favor of making a test work on both in some way or another, but there are some cases where it simply doesn't make sense.  For example this test in `sage.doctest.control`\n\n```\n 640             sage: DD = DocTestDefaults(sagenb = True)\n 641             sage: DC = DocTestController(DD, [])\n 642             sage: DC.add_files()  # py2\n 643             Doctesting the Sage notebook.\n 644             sage: DC.files[0][-6:]  # py2\n 645             'sagenb'\n```\n\nThis doesn't work on Python 3 since we don't even install the Sage notebook on Python 3 (at least not currently).\n\nThe relevant code being tested there should also be updated to handle Python 3 better, but even so there's no practical way to make the test make sense on Python 3 until/unless sagenb is supported on Python 3.  I suspect other cases like this may come up on occasion so it's useful to have.\n\nCC:  @fchapoton\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton, Erik Bray, Jeroen Demeyer\n\nAuthor: Erik Bray, Jeroen Demeyer\n\nBranch: 12c300aad31ee72ea569134b35a94baed7efa470\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24261\n\n",
    "closed_at": "2018-01-14T10:14:36Z",
    "created_at": "2017-11-21T14:09:27Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "py3: add py2 and py3 doctest flags",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24261",
    "user": "https://github.com/embray"
}
```
This adds two new flags that can be placed next to doctests: `# py2` and `# py3`.  If marked `py2` a test will *only* be run on Python 2 and so on.

Generally this should be avoided in favor of making a test work on both in some way or another, but there are some cases where it simply doesn't make sense.  For example this test in `sage.doctest.control`

```
 640             sage: DD = DocTestDefaults(sagenb = True)
 641             sage: DC = DocTestController(DD, [])
 642             sage: DC.add_files()  # py2
 643             Doctesting the Sage notebook.
 644             sage: DC.files[0][-6:]  # py2
 645             'sagenb'
```

This doesn't work on Python 3 since we don't even install the Sage notebook on Python 3 (at least not currently).

The relevant code being tested there should also be updated to handle Python 3 better, but even so there's no practical way to make the test make sense on Python 3 until/unless sagenb is supported on Python 3.  I suspect other cases like this may come up on occasion so it's useful to have.

CC:  @fchapoton

Reviewer: Frédéric Chapoton, Erik Bray, Jeroen Demeyer

Author: Erik Bray, Jeroen Demeyer

Branch: 12c300aad31ee72ea569134b35a94baed7efa470

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24261





---

archive/issue_comments_461423.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-21T14:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461423",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461424.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhy not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.",
    "created_at": "2017-11-21T15:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461424",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
Why not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.



---

archive/issue_comments_461425.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [jdemeyer](#comment%3A2):\n> Why not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.\n\n\nand there are already existing instances waiting for that",
    "created_at": "2017-11-21T16:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461425",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Replying to [jdemeyer](#comment%3A2):
> Why not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.


and there are already existing instances waiting for that



---

archive/issue_comments_461426.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jdemeyer](#comment%3A2):\n> Why not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.\n\n\nI considered something like that but it seems to have different semantics.  Currently \"optional - pkgname\" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.\n\nRather than making a special case it's simpler and clearer I think to just have specific tags for this (there's also prior precedence such as using `# py3` in coverage to mark lines that should be ignored in the coverage analysis).",
    "created_at": "2017-11-21T17:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461426",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
Replying to [jdemeyer](#comment%3A2):
> Why not `# optional - python2` or `# optional - python3`? That's reusing an existing system for optional tests.


I considered something like that but it seems to have different semantics.  Currently "optional - pkgname" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.

Rather than making a special case it's simpler and clearer I think to just have specific tags for this (there's also prior precedence such as using `# py3` in coverage to mark lines that should be ignored in the coverage analysis).



---

archive/issue_comments_461427.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think it would be better to have `# py2` and `# py3` behave like the `# 32-bit` and `# 64-bit` and be specific for the output. I guess there is also the question of how many of our doctest inputs are going to be specific for Python2. Do any of you have an impression? I think it might be marginal at worst, in which case, we can just build into the doctests an explicit check of Python2 vs 3 as part of the doctest itself.",
    "created_at": "2017-11-22T04:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461427",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I think it would be better to have `# py2` and `# py3` behave like the `# 32-bit` and `# 64-bit` and be specific for the output. I guess there is also the question of how many of our doctest inputs are going to be specific for Python2. Do any of you have an impression? I think it might be marginal at worst, in which case, we can just build into the doctests an explicit check of Python2 vs 3 as part of the doctest itself.



---

archive/issue_comments_461428.json:
```json
{
    "body": "<a id='comment:6'></a>\nI wouldn't mind changing it to apply to the output but not skip the test.  That would actually be better since if the behavior on Python 3 changes in these cases (e.g. `sagenb` works, to use my previous example) then we'd want to see that reflected in the test results.\n\nI think a stronger possibility is *Python 3* only inputs, such as doing things with annotations and other Python 3 only syntax.  So maybe having these tags work on both output and input would be good?",
    "created_at": "2017-11-22T13:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461428",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
I wouldn't mind changing it to apply to the output but not skip the test.  That would actually be better since if the behavior on Python 3 changes in these cases (e.g. `sagenb` works, to use my previous example) then we'd want to see that reflected in the test results.

I think a stronger possibility is *Python 3* only inputs, such as doing things with annotations and other Python 3 only syntax.  So maybe having these tags work on both output and input would be good?



---

archive/issue_comments_461429.json:
```json
{
    "body": "<a id='comment:7'></a>\nI would not oppose that, but I don't think we do anything like that elsewhere. So it might require some invasive changes and might cause some slight confusion (but that is debatable). I think we would be better off having a separate marker for Python3 input.",
    "created_at": "2017-11-22T22:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461429",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
I would not oppose that, but I don't think we do anything like that elsewhere. So it might require some invasive changes and might cause some slight confusion (but that is debatable). I think we would be better off having a separate marker for Python3 input.



---

archive/issue_comments_461430.json:
```json
{
    "body": "<a id='comment:8'></a>\nAdding tags on output lines would not require invasive changes, but I do think it's slightly more confusing.  Whereas the use of comments on input lines is consistent with Python syntax, sticking comments in output lines is a bit ad-hoc and confusing.  But we also already have precedence for that in the \"32-bit/64-bit\" case as you pointed out.",
    "created_at": "2017-11-23T09:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461430",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Adding tags on output lines would not require invasive changes, but I do think it's slightly more confusing.  Whereas the use of comments on input lines is consistent with Python syntax, sticking comments in output lines is a bit ad-hoc and confusing.  But we also already have precedence for that in the "32-bit/64-bit" case as you pointed out.



---

archive/issue_comments_461431.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-01T11:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461431",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_461432.json:
```json
{
    "body": "<a id='comment:9'></a>\nI just realized there's a bug in how this is implemented, where tests containing these tags are skipped regardless.",
    "created_at": "2017-12-01T11:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461432",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
I just realized there's a bug in how this is implemented, where tests containing these tags are skipped regardless.



---

archive/issue_comments_461433.json:
```json
{
    "body": "<a id='comment:10'></a>\nImplementation bug aside, I've been working on fixing the sageinspect module, and that's increasingly convinced me that having a concise way to run specific test cases on either Python 2 or Python 3 only is useful, especially in that module.",
    "created_at": "2017-12-01T11:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461433",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Implementation bug aside, I've been working on fixing the sageinspect module, and that's increasingly convinced me that having a concise way to run specific test cases on either Python 2 or Python 3 only is useful, especially in that module.



---

archive/issue_comments_461434.json:
```json
{
    "body": "Changing commit from \"6f5fd8cfb06c4b7c7f9743e2559eca00c06f3a0f\" to \"e01e5531b69e5a65642651efab85cf5bb496c8ee\"",
    "created_at": "2017-12-01T13:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6f5fd8cfb06c4b7c7f9743e2559eca00c06f3a0f" to "e01e5531b69e5a65642651efab85cf5bb496c8ee"



---

archive/issue_comments_461435.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[e01e553](https://github.com/sagemath/sagetrac-mirror/commit/e01e5531b69e5a65642651efab85cf5bb496c8ee)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|",
    "created_at": "2017-12-01T13:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[e01e553](https://github.com/sagemath/sagetrac-mirror/commit/e01e5531b69e5a65642651efab85cf5bb496c8ee)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|



---

archive/issue_comments_461436.json:
```json
{
    "body": "<a id='comment:12'></a>\nOkay, this definitely works now.  My fixes to the sageinspect module (and in particular its tests) rely on this pretty heavily.",
    "created_at": "2017-12-01T13:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461436",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
Okay, this definitely works now.  My fixes to the sageinspect module (and in particular its tests) rely on this pretty heavily.



---

archive/issue_comments_461437.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-01T13:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461437",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_461438.json:
```json
{
    "body": "Changing commit from \"e01e5531b69e5a65642651efab85cf5bb496c8ee\" to \"31f2008835ab51a4a1fdbe8b14b7ef175494be01\"",
    "created_at": "2017-12-01T14:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e01e5531b69e5a65642651efab85cf5bb496c8ee" to "31f2008835ab51a4a1fdbe8b14b7ef175494be01"



---

archive/issue_comments_461439.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[31f2008](https://github.com/sagemath/sagetrac-mirror/commit/31f2008835ab51a4a1fdbe8b14b7ef175494be01)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|",
    "created_at": "2017-12-01T14:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[31f2008](https://github.com/sagemath/sagetrac-mirror/commit/31f2008835ab51a4a1fdbe8b14b7ef175494be01)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|



---

archive/issue_comments_461440.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [embray](#comment%3A4):\n> I considered something like that but it seems to have different semantics.  Currently \"optional - pkgname\" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.\n\n\nRight, I get that. Still, I think that we already have enough (if not too many) special doctest markers. And even if `# optional` is typically used to check whether a package is installed, I think that the meaning of `# optional - python2` is clear enough.\n\nMoreover, there are already doctests using `# optional - python2` and `# optional - python3` referring to the current running version of Python.",
    "created_at": "2017-12-04T13:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461440",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Replying to [embray](#comment%3A4):
> I considered something like that but it seems to have different semantics.  Currently "optional - pkgname" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.


Right, I get that. Still, I think that we already have enough (if not too many) special doctest markers. And even if `# optional` is typically used to check whether a package is installed, I think that the meaning of `# optional - python2` is clear enough.

Moreover, there are already doctests using `# optional - python2` and `# optional - python3` referring to the current running version of Python.



---

archive/issue_comments_461441.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jdemeyer](#comment%3A14):\n> Replying to [embray](#comment%3A4):\n> > I considered something like that but it seems to have different semantics.  Currently \"optional - pkgname\" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.\n\n> \n> Right, I get that. Still, I think that we already have enough (if not too many) special \n\n\nThat's pretty subjective--I think \"enough\" is however many you need to write reasonable tests.\n\n> doctest markers. And even if `# optional` is typically used to check whether a package is installed, I think that the meaning of `# optional - python2` is clear enough.\n\n\nI don't.  It's overly wordy and not quite clear at all given the double meaning.\n\n> Moreover, there are already doctests using `# optional - python2` and `# optional - python3` referring to the current running version of Python.\n\n\nExcept those explicitly don't work right now.  I've already replaced a few examples using these markers.  Here's a concrete example that might help motivate:\n\n```\n                sage: import ast, sage.misc.sageinspect as sms  # py3\n                sage: visitor = sms.SageArgSpecVisitor()  # py3\n                sage: vis = lambda x: visitor.visit_NameConstant(ast.parse(x).body[0].value)  # py3\n                sage: [vis(n) for n in ['True', 'False', 'None']]  # py3\n                [True, False, None]\n                sage: [type(vis(n)) for n in ['True', 'False', 'None']]  # py3\n                [<type 'bool'>, <type 'bool'>, <type 'NoneType'>]\n```\n\nThis entire sequence of test commands is Python 3 only and does not even make sense on Python 2 (it might be nice to tag a whole range at once actually rather than every single line but that's a separate issue).  Putting \"# optional - python3\" on every one of those lines is just that much more line noise.",
    "created_at": "2017-12-04T13:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461441",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
Replying to [jdemeyer](#comment%3A14):
> Replying to [embray](#comment%3A4):
> > I considered something like that but it seems to have different semantics.  Currently "optional - pkgname" implies that a package is installed/available.  Here we don't care if python2/3 is available.  We care about what Python version is currently running the tests.

> 
> Right, I get that. Still, I think that we already have enough (if not too many) special 


That's pretty subjective--I think "enough" is however many you need to write reasonable tests.

> doctest markers. And even if `# optional` is typically used to check whether a package is installed, I think that the meaning of `# optional - python2` is clear enough.


I don't.  It's overly wordy and not quite clear at all given the double meaning.

> Moreover, there are already doctests using `# optional - python2` and `# optional - python3` referring to the current running version of Python.


Except those explicitly don't work right now.  I've already replaced a few examples using these markers.  Here's a concrete example that might help motivate:

```
                sage: import ast, sage.misc.sageinspect as sms  # py3
                sage: visitor = sms.SageArgSpecVisitor()  # py3
                sage: vis = lambda x: visitor.visit_NameConstant(ast.parse(x).body[0].value)  # py3
                sage: [vis(n) for n in ['True', 'False', 'None']]  # py3
                [True, False, None]
                sage: [type(vis(n)) for n in ['True', 'False', 'None']]  # py3
                [<type 'bool'>, <type 'bool'>, <type 'NoneType'>]
```

This entire sequence of test commands is Python 3 only and does not even make sense on Python 2 (it might be nice to tag a whole range at once actually rather than every single line but that's a separate issue).  Putting "# optional - python3" on every one of those lines is just that much more line noise.



---

archive/issue_comments_461442.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-07T17:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461442",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_461443.json:
```json
{
    "body": "<a id='comment:16'></a>\nOK, fine. I don't really agree, but we have to move on. If you want to go forward with `# py2` and `# py3`, you should at least fix the existing uses of `# optional - python2` and `# optional - python3`. If you do that, I'm willing to set this ticket to positive review.",
    "created_at": "2017-12-07T17:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461443",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
OK, fine. I don't really agree, but we have to move on. If you want to go forward with `# py2` and `# py3`, you should at least fix the existing uses of `# optional - python2` and `# optional - python3`. If you do that, I'm willing to set this ticket to positive review.



---

archive/issue_comments_461444.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jdemeyer](#comment%3A16):\n> OK, fine. I don't really agree, but we have to move on. If you want to go forward with `# py2` and `# py3`, you should at least fix the existing uses of `# optional - python2` and `# optional - python3`. If you do that, I'm willing to set this ticket to positive review.\n\n\nI'm fixing those as I come to them, but fixing all of them at once would probably only hang this up longer.  Better to add the feature first and then switch to using it where it makes sense to on a case by case basis.",
    "created_at": "2017-12-08T09:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461444",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Replying to [jdemeyer](#comment%3A16):
> OK, fine. I don't really agree, but we have to move on. If you want to go forward with `# py2` and `# py3`, you should at least fix the existing uses of `# optional - python2` and `# optional - python3`. If you do that, I'm willing to set this ticket to positive review.


I'm fixing those as I come to them, but fixing all of them at once would probably only hang this up longer.  Better to add the feature first and then switch to using it where it makes sense to on a case by case basis.



---

archive/issue_comments_461445.json:
```json
{
    "body": "<a id='comment:18'></a>\nCome on, there are really few instances of `# optional - python[23]` currently in Sage. It doesn't take much effort to fix those. And those can also double as testcase that the `# py2` and `# py3` markers actually work.",
    "created_at": "2017-12-08T09:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461445",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Come on, there are really few instances of `# optional - python[23]` currently in Sage. It doesn't take much effort to fix those. And those can also double as testcase that the `# py2` and `# py3` markers actually work.



---

archive/issue_comments_461446.json:
```json
{
    "body": "<a id='comment:19'></a>\nAlright, I have no problem doing it (I'll have to double-check but I think I've already fixed most of those cases). It just seemed antithetical to your normal philosophy (which I generally agree with...)",
    "created_at": "2017-12-08T10:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461446",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Alright, I have no problem doing it (I'll have to double-check but I think I've already fixed most of those cases). It just seemed antithetical to your normal philosophy (which I generally agree with...)



---

archive/issue_comments_461447.json:
```json
{
    "body": "Changing commit from \"31f2008835ab51a4a1fdbe8b14b7ef175494be01\" to \"c09007614f985868bd2a43c0f8e282aeb8de17b7\"",
    "created_at": "2017-12-08T11:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "31f2008835ab51a4a1fdbe8b14b7ef175494be01" to "c09007614f985868bd2a43c0f8e282aeb8de17b7"



---

archive/issue_comments_461448.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|\n|[c090076](https://github.com/sagemath/sagetrac-mirror/commit/c09007614f985868bd2a43c0f8e282aeb8de17b7)|`Fix a few more cases where '# optional - python2' wasn't really doing what was intended.`|",
    "created_at": "2017-12-08T11:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
|[c090076](https://github.com/sagemath/sagetrac-mirror/commit/c09007614f985868bd2a43c0f8e282aeb8de17b7)|`Fix a few more cases where '# optional - python2' wasn't really doing what was intended.`|



---

archive/issue_comments_461449.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-08T11:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461449",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_461450.json:
```json
{
    "body": "<a id='comment:21'></a>\nNote: I also fixed one case of `# optional - python2` in #24286.",
    "created_at": "2017-12-08T11:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461450",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Note: I also fixed one case of `# optional - python2` in #24286.



---

archive/issue_comments_461451.json:
```json
{
    "body": "<a id='comment:22'></a>\ntypo : \"on optionl features\" in src/doc/en/developer/coding_basics.rst\n\none failing doctest in src/sage/doctest/sources.py",
    "created_at": "2017-12-14T15:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461451",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
typo : "on optionl features" in src/doc/en/developer/coding_basics.rst

one failing doctest in src/sage/doctest/sources.py



---

archive/issue_comments_461452.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-14T15:45:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461452",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_461453.json:
```json
{
    "body": "<a id='comment:24'></a>\nCan somebody explain the origin of this test?\n\n```\nsage -t --long src/sage/doctest/sources.py\n**********************************************************************\nFile \"src/sage/doctest/sources.py\", line 759, in sage.doctest.sources.FileDocTestSource._test_enough_doctests\nFailed example:\n    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time\n        path = os.path.relpath(path)\n        dirs.sort(); files.sort()\n        for F in files:\n            _, ext = os.path.splitext(F)\n            if ext in ('.py', '.pyx', '.pxd', '.pxi', '.sage', '.spyx', '.rst'):\n                filename = os.path.join(path, F)\n                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))\n                FDS._test_enough_doctests(verbose=False)\nExpected:\n    There are 7 tests in sage/combinat/diagram_algebras.py that are not being run\n    There are 7 tests in sage/combinat/dyck_word.py that are not being run\n    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run\n    There are 6 tests in sage/combinat/interval_posets.py that are not being run\n    There are 18 tests in sage/combinat/partition.py that are not being run\n    There are 15 tests in sage/combinat/permutation.py that are not being run\n    There are 14 tests in sage/combinat/skew_partition.py that are not being run\n    There are 18 tests in sage/combinat/tableau.py that are not being run\n    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run\n    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run\n    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 15 tests in sage/manifolds/manifold.py that are not being run\n    There are 3 tests in sage/rings/invariant_theory.py that are not being run\nGot:\n    There are 7 tests in sage/combinat/diagram_algebras.py that are not being run\n    There are 7 tests in sage/combinat/dyck_word.py that are not being run\n    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run\n    There are 6 tests in sage/combinat/interval_posets.py that are not being run\n    There are 18 tests in sage/combinat/partition.py that are not being run\n    There are 15 tests in sage/combinat/permutation.py that are not being run\n    There are 14 tests in sage/combinat/skew_partition.py that are not being run\n    There are 18 tests in sage/combinat/tableau.py that are not being run\n    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run\n    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run\n    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run\n    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 15 tests in sage/manifolds/manifold.py that are not being run\n    There are 1 tests in sage/misc/sage_eval.py that are not being run\n    There are 3 tests in sage/rings/invariant_theory.py that are not being run\n    There are 1 tests in sage/rings/finite_rings/integer_mod.pyx that are not being run\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.doctest.sources.FileDocTestSource._test_enough_doctests\n    [367 tests, 1 failure, 244.00 s]\n```\n\nIt's pretty awfully annoying to have a test whose output depends on the contents of a variety of specific modules.  If this is meant to be some kind of regression test (?) it's not clear, but surely it could be run without such a strong dependency on external data.",
    "created_at": "2017-12-15T11:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461453",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'></a>
Can somebody explain the origin of this test?

```
sage -t --long src/sage/doctest/sources.py
**********************************************************************
File "src/sage/doctest/sources.py", line 759, in sage.doctest.sources.FileDocTestSource._test_enough_doctests
Failed example:
    for path, dirs, files in itertools.chain(os.walk('sage'), os.walk('doc')): # long time
        path = os.path.relpath(path)
        dirs.sort(); files.sort()
        for F in files:
            _, ext = os.path.splitext(F)
            if ext in ('.py', '.pyx', '.pxd', '.pxi', '.sage', '.spyx', '.rst'):
                filename = os.path.join(path, F)
                FDS = FileDocTestSource(filename, DocTestDefaults(long=True,optional=True))
                FDS._test_enough_doctests(verbose=False)
Expected:
    There are 7 tests in sage/combinat/diagram_algebras.py that are not being run
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run
    There are 6 tests in sage/combinat/interval_posets.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 15 tests in sage/manifolds/manifold.py that are not being run
    There are 3 tests in sage/rings/invariant_theory.py that are not being run
Got:
    There are 7 tests in sage/combinat/diagram_algebras.py that are not being run
    There are 7 tests in sage/combinat/dyck_word.py that are not being run
    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run
    There are 6 tests in sage/combinat/interval_posets.py that are not being run
    There are 18 tests in sage/combinat/partition.py that are not being run
    There are 15 tests in sage/combinat/permutation.py that are not being run
    There are 14 tests in sage/combinat/skew_partition.py that are not being run
    There are 18 tests in sage/combinat/tableau.py that are not being run
    There are 8 tests in sage/combinat/crystals/tensor_product.py that are not being run
    There are 11 tests in sage/combinat/rigged_configurations/rigged_configurations.py that are not being run
    There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
    There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 15 tests in sage/manifolds/manifold.py that are not being run
    There are 1 tests in sage/misc/sage_eval.py that are not being run
    There are 3 tests in sage/rings/invariant_theory.py that are not being run
    There are 1 tests in sage/rings/finite_rings/integer_mod.pyx that are not being run
**********************************************************************
1 item had failures:
   1 of   9 in sage.doctest.sources.FileDocTestSource._test_enough_doctests
    [367 tests, 1 failure, 244.00 s]
```

It's pretty awfully annoying to have a test whose output depends on the contents of a variety of specific modules.  If this is meant to be some kind of regression test (?) it's not clear, but surely it could be run without such a strong dependency on external data.



---

archive/issue_comments_461454.json:
```json
{
    "body": "<a id='comment:25'></a>\nI really don't understand what to do with this test.  It's like it's testing the doctest parser by using a different, simpler doctest parser that doesn't fully work, and comparing the results from that parser to the results from the actual doctest parser.  If we want to check that the actual doctest parser works then there should be (and are) unit tests for the code of the actual doctest parser.  As it is this test is just testing the secondary, flakier doctest parser implemented in the test...",
    "created_at": "2017-12-15T11:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461454",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
I really don't understand what to do with this test.  It's like it's testing the doctest parser by using a different, simpler doctest parser that doesn't fully work, and comparing the results from that parser to the results from the actual doctest parser.  If we want to check that the actual doctest parser works then there should be (and are) unit tests for the code of the actual doctest parser.  As it is this test is just testing the secondary, flakier doctest parser implemented in the test...



---

archive/issue_comments_461455.json:
```json
{
    "body": "Changing commit from \"c09007614f985868bd2a43c0f8e282aeb8de17b7\" to \"96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5\"",
    "created_at": "2017-12-15T11:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c09007614f985868bd2a43c0f8e282aeb8de17b7" to "96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5"



---

archive/issue_comments_461456.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[96127eb](https://github.com/sagemath/sagetrac-mirror/commit/96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5)|`Fix typo`|",
    "created_at": "2017-12-15T11:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[96127eb](https://github.com/sagemath/sagetrac-mirror/commit/96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5)|`Fix typo`|



---

archive/issue_comments_461457.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-12-18T16:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461457",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_461458.json:
```json
{
    "body": "<a id='comment:28'></a>\nTo solve your problem with `_test_enough_doctests`, you could add some extra attribute to `SageDocTestParser` to never skip any test (not even the `# py2` and `# py3` tests). Then you set that attribute when running `_test_enough_doctests`.",
    "created_at": "2017-12-19T12:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461458",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
To solve your problem with `_test_enough_doctests`, you could add some extra attribute to `SageDocTestParser` to never skip any test (not even the `# py2` and `# py3` tests). Then you set that attribute when running `_test_enough_doctests`.



---

archive/issue_comments_461459.json:
```json
{
    "body": "<a id='comment:29'></a>\nI'd still just as soon remove that test...",
    "created_at": "2018-01-02T15:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461459",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'></a>
I'd still just as soon remove that test...



---

archive/issue_comments_461460.json:
```json
{
    "body": "Changing branch from \"u/embray/python3/doctest-py2-only\" to \"u/jdemeyer/python3/doctest-py2-only\"",
    "created_at": "2018-01-05T10:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461460",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/embray/python3/doctest-py2-only" to "u/jdemeyer/python3/doctest-py2-only"



---

archive/issue_comments_461461.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-01-05T10:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461461",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_461462.json:
```json
{
    "body": "<a id='comment:31'></a>\nThis variant re-uses the existing optional tags implementation. It passes all tests in `sage/doctest`.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[39c71a2](https://github.com/sagemath/sagetrac-mirror/commit/39c71a222dddc426e23ac733c96c0bdb90a8d18b)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|\n|[1fcea7e](https://github.com/sagemath/sagetrac-mirror/commit/1fcea7e739d5be87349d1fb11581cdfecf980af3)|`Better fix for this doctest`|\n|[12c300a](https://github.com/sagemath/sagetrac-mirror/commit/12c300aad31ee72ea569134b35a94baed7efa470)|`Automatically add py2/py3 optional tag`|",
    "created_at": "2018-01-05T10:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461462",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
This variant re-uses the existing optional tags implementation. It passes all tests in `sage/doctest`.

---
New commits:
|                                                                                                                                          |                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[39c71a2](https://github.com/sagemath/sagetrac-mirror/commit/39c71a222dddc426e23ac733c96c0bdb90a8d18b)|`Add doctest flags for running tests on Python 2 only or Python 3 only.`|
|[1fcea7e](https://github.com/sagemath/sagetrac-mirror/commit/1fcea7e739d5be87349d1fb11581cdfecf980af3)|`Better fix for this doctest`|
|[12c300a](https://github.com/sagemath/sagetrac-mirror/commit/12c300aad31ee72ea569134b35a94baed7efa470)|`Automatically add py2/py3 optional tag`|



---

archive/issue_comments_461463.json:
```json
{
    "body": "Changing author from \"Erik Bray\" to \"Erik Bray, Jeroen Demeyer\"",
    "created_at": "2018-01-05T10:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461463",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Erik Bray" to "Erik Bray, Jeroen Demeyer"



---

archive/issue_comments_461464.json:
```json
{
    "body": "Changing commit from \"96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5\" to \"12c300aad31ee72ea569134b35a94baed7efa470\"",
    "created_at": "2018-01-05T10:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461464",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "96127ebd7f23c774b4c5c6619962f8dcb8bc2ae5" to "12c300aad31ee72ea569134b35a94baed7efa470"



---

archive/issue_comments_461465.json:
```json
{
    "body": "<a id='comment:32'></a>\nI don't fully understand what this is doing differently, but I'm not opposed as long as it works.",
    "created_at": "2018-01-05T12:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461465",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'></a>
I don't fully understand what this is doing differently, but I'm not opposed as long as it works.



---

archive/issue_comments_461466.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [embray](#comment%3A32):\n> I'm not opposed\n\n\nIs that a subtle way to say \"positive review\"?",
    "created_at": "2018-01-05T12:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461466",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Replying to [embray](#comment%3A32):
> I'm not opposed


Is that a subtle way to say "positive review"?



---

archive/issue_comments_461467.json:
```json
{
    "body": "<a id='comment:34'></a>\nThis seems to be ready to go, no ?",
    "created_at": "2018-01-06T19:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461467",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
This seems to be ready to go, no ?



---

archive/issue_comments_461468.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-08T16:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461468",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_461469.json:
```json
{
    "body": "<a id='comment:35'></a>\nok, let it be. Erik and Jeroen, I added your names as reviewers. Feel free to undo that.",
    "created_at": "2018-01-08T16:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461469",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:35'></a>
ok, let it be. Erik and Jeroen, I added your names as reviewers. Feel free to undo that.



---

archive/issue_comments_461470.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton, Erik Bray, Jeroen Demeyer\"",
    "created_at": "2018-01-08T16:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461470",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton, Erik Bray, Jeroen Demeyer"



---

archive/issue_comments_461471.json:
```json
{
    "body": "<a id='comment:36'></a>\nYes, I understand how this is working now. +1",
    "created_at": "2018-01-09T13:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461471",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>
Yes, I understand how this is working now. +1



---

archive/issue_comments_461472.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-14T10:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461472",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_461473.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/python3/doctest-py2-only\" to \"12c300aad31ee72ea569134b35a94baed7efa470\"",
    "created_at": "2018-01-14T10:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461473",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/python3/doctest-py2-only" to "12c300aad31ee72ea569134b35a94baed7efa470"



---

archive/issue_events_069855.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-14T10:14:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24261#event-69855"
}
```



---

archive/issue_comments_461474.json:
```json
{
    "body": "Changing commit from \"12c300aad31ee72ea569134b35a94baed7efa470\" to \"\"",
    "created_at": "2018-01-19T15:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461474",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "12c300aad31ee72ea569134b35a94baed7efa470" to ""



---

archive/issue_comments_461475.json:
```json
{
    "body": "<a id='comment:38'></a>\nfollow-up in #24570",
    "created_at": "2018-01-19T15:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24261#issuecomment-461475",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:38'></a>
follow-up in #24570
