# Issue 24121: windows version not properly detected in psutil

archive/issues_023884.json:
```json
{
    "assignees": [
        "https://github.com/embray"
    ],
    "body": "psutil compilation fails with\n\n```\nTraceback (most recent call last):\n  File \"setup.py\", line 253, in <module>\n    macros.append((\"_WIN32_WINNT\", get_winver()))\n  File \"setup.py\", line 249, in get_winver\n    maj = int(m.group('major'))\nAttributeError: 'NoneType' object has no attribute 'group'\n```\n\nbecause the regexp to detect windows version in `setup.py` is not adapted to my windows version, which is as follows:\n\n```\nPS C:\\Users\\Sebastien> cmd /c ver\n\nMicrosoft Windows [version 10.0.16299.19]\n```\n\nCC:  @embray\n\nBranch/Commit: **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**\n\nReviewer: **Emmanuel Charpentier**\n\nAuthor: **Erik Bray**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24121_\n\n",
    "closed_at": "2017-12-11T01:04:19Z",
    "created_at": "2017-10-29T09:32:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "windows version not properly detected in psutil",
    "type": "issue",
    "updated_at": "2017-12-11T01:04:19Z",
    "url": "https://github.com/sagemath/sage/issues/24121",
    "user": "https://github.com/sagetrac-gouezel"
}
```
psutil compilation fails with

```
Traceback (most recent call last):
  File "setup.py", line 253, in <module>
    macros.append(("_WIN32_WINNT", get_winver()))
  File "setup.py", line 249, in get_winver
    maj = int(m.group('major'))
AttributeError: 'NoneType' object has no attribute 'group'
```

because the regexp to detect windows version in `setup.py` is not adapted to my windows version, which is as follows:

```
PS C:\Users\Sebastien> cmd /c ver

Microsoft Windows [version 10.0.16299.19]
```

CC:  @embray

Branch/Commit: **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**

Reviewer: **Emmanuel Charpentier**

Author: **Erik Bray**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/24121_





---

archive/issue_events_336357.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2017-10-29T09:32:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336357"
}
```



---

archive/issue_events_336358.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2017-10-29T09:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336358"
}
```



---

archive/issue_events_336359.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2017-10-29T09:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336359"
}
```



---

archive/issue_events_336360.json:
```json
{
    "actor": "https://github.com/sagetrac-gouezel",
    "created_at": "2017-10-29T09:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336360"
}
```



---

archive/issue_comments_364747.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFWIW on my machine\n\n```\nMicrosoft Windows [Version 10.0.15063]\n```\n\nwhich is why I haven't seen this.  For some reason your Windows version has an additional component not accounted for in that regexp.\n\nI already [fixed](https://github.com/giampaolo/psutil/pull/998/commits/a33c43ca59fd1b5327402a637a5c02b32976ed86) this issue some time ago in my psutil Cygwin port, but never updated the patch to psutil included with Sage.  I guess it would be good to do that then.",
    "created_at": "2017-10-30T13:54:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364747",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

FWIW on my machine

```
Microsoft Windows [Version 10.0.15063]
```

which is why I haven't seen this.  For some reason your Windows version has an additional component not accounted for in that regexp.

I already [fixed](https://github.com/giampaolo/psutil/pull/998/commits/a33c43ca59fd1b5327402a637a5c02b32976ed86) this issue some time ago in my psutil Cygwin port, but never updated the patch to psutil included with Sage.  I guess it would be good to do that then.



---

archive/issue_events_336361.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-30T13:54:59Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "subject": "https://github.com/embray",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336361"
}
```



---

archive/issue_comments_364748.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYou might as well update psutil at the same time.",
    "created_at": "2017-10-30T15:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364748",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

You might as well update psutil at the same time.



---

archive/issue_comments_364749.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@embray](#comment:1):\n> FWIW on my machine\n> \n> ```\n> Microsoft Windows [Version 10.0.15063]\n> ```\n> \n> which is why I haven't seen this.  For some reason your Windows version has an additional component not accounted for in that regexp.\n> \n> I already [fixed](https://github.com/giampaolo/psutil/pull/998/commits/a33c43ca59fd1b5327402a637a5c02b32976ed86) this issue some time ago in my psutil Cygwin port, but never updated the patch to psutil included with Sage.  I guess it would be good to do that then.\n\nFWIW, I just got bitten by this. From a cygwin prompt :\n\n```\ncharpent@DESKTOP-P0B7HOE ~/sage\n$ cmd /c ver\n\nMicrosoft Windows [version 10.0.16299.19]\n```\n\nSince this seems to block Sage from successfully compiling on windows, I'd be tempted to raise the priority of this bug to \"blocker\".",
    "created_at": "2017-11-05T10:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364749",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@embray](#comment:1):
> FWIW on my machine
> 
> ```
> Microsoft Windows [Version 10.0.15063]
> ```
> 
> which is why I haven't seen this.  For some reason your Windows version has an additional component not accounted for in that regexp.
> 
> I already [fixed](https://github.com/giampaolo/psutil/pull/998/commits/a33c43ca59fd1b5327402a637a5c02b32976ed86) this issue some time ago in my psutil Cygwin port, but never updated the patch to psutil included with Sage.  I guess it would be good to do that then.

FWIW, I just got bitten by this. From a cygwin prompt :

```
charpent@DESKTOP-P0B7HOE ~/sage
$ cmd /c ver

Microsoft Windows [version 10.0.16299.19]
```

Since this seems to block Sage from successfully compiling on windows, I'd be tempted to raise the priority of this bug to "blocker".



---

archive/issue_comments_364750.json:
```json
{
    "body": "Attachment: **[patch_psutil_patch.patch.gz](https://github.com/sagemath/sage/files/ticket24121/patch_psutil_patch.patch.gz)**\n\nEmergency patch, allows compilatopn on Wndows 10 / cygwin.",
    "created_at": "2017-11-05T14:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364750",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Attachment: **[patch_psutil_patch.patch.gz](https://github.com/sagemath/sage/files/ticket24121/patch_psutil_patch.patch.gz)**

Emergency patch, allows compilatopn on Wndows 10 / cygwin.



---

archive/issue_comments_364751.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nImpossible to `git trac push` at the moment. I have uploaded a patch(adaptation of Erik's patch) that allows successful recompilation on Windows 10 under cygwin.\n\n`ptestlong` underway (will be long...).",
    "created_at": "2017-11-05T14:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364751",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:4" align="right">comment:4</div>

Impossible to `git trac push` at the moment. I have uploaded a patch(adaptation of Erik's patch) that allows successful recompilation on Windows 10 under cygwin.

`ptestlong` underway (will be long...).



---

archive/issue_events_336362.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-05T14:11:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336362"
}
```



---

archive/issue_comments_364752.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@EmmanuelCharpentier](#comment:4):\n> Impossible to `git trac push` at the moment. I have uploaded a patch(adaptation of Erik's patch) that allows successful recompilation on Windows 10 under cygwin.\n> \n> `ptestlong` underway (will be long...).\n\nI get two errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 124.4 src/sage/parallel/map_reduce.py  # 1 doctest failed\nsage -t --long --warn-long 124.4 src/sage/calculus/calculus.py  # Timed out\n----------------------------------------------------------------------\n```\n\nBoth are transient (i. e. do not fail when ran standalone).\n\nHTH,",
    "created_at": "2017-11-05T16:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364752",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@EmmanuelCharpentier](#comment:4):
> Impossible to `git trac push` at the moment. I have uploaded a patch(adaptation of Erik's patch) that allows successful recompilation on Windows 10 under cygwin.
> 
> `ptestlong` underway (will be long...).

I get two errors :

```
----------------------------------------------------------------------
sage -t --long --warn-long 124.4 src/sage/parallel/map_reduce.py  # 1 doctest failed
sage -t --long --warn-long 124.4 src/sage/calculus/calculus.py  # Timed out
----------------------------------------------------------------------
```

Both are transient (i. e. do not fail when ran standalone).

HTH,



---

archive/issue_comments_364753.json:
```json
{
    "body": "Branch: **[patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/patch_psutil_patch)**",
    "created_at": "2017-11-05T16:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364753",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Branch: **[patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/patch_psutil_patch)**



---

archive/issue_comments_364754.json:
```json
{
    "body": "Changed branch from **[patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/patch_psutil_patch)** to **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)**",
    "created_at": "2017-11-05T16:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364754",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed branch from **[patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/patch_psutil_patch)** to **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)**



---

archive/issue_comments_364755.json:
```json
{
    "body": "Commit: **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)**",
    "created_at": "2017-11-05T16:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364755",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)**



---

archive/issue_comments_364756.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7\"><code>ed80215</code></a></td><td><code>24121 : Emergency patch for compilation on windows 10 ; bump patchlevel</code></td></tr></table>\n",
    "created_at": "2017-11-05T16:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364756",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7"><code>ed80215</code></a></td><td><code>24121 : Emergency patch for compilation on windows 10 ; bump patchlevel</code></td></tr></table>




---

archive/issue_comments_364757.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@sagetrac-git](#comment:8):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7\"><code>ed80215</code></a></td><td><code>24121 : Emergency patch for compilation on windows 10 ; bump patchlevel</code></td></tr></table>\n\nFinally managed to push mu patch \"manually\" as described in the Developer's Manual.\n\nBut Ire-pasted my public RSA kay in the relevant place, so that may be a fluke...",
    "created_at": "2017-11-05T16:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364757",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@sagetrac-git](#comment:8):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7"><code>ed80215</code></a></td><td><code>24121 : Emergency patch for compilation on windows 10 ; bump patchlevel</code></td></tr></table>

Finally managed to push mu patch "manually" as described in the Developer's Manual.

But Ire-pasted my public RSA kay in the relevant place, so that may be a fluke...



---

archive/issue_comments_364758.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPlease let me handle this--this is already fixed in my branch of `psutil`, I just need to update the existing patch.\n\nI don't consider it an emergency since it hasn't affected any of the machines I'm using for Windows builds.",
    "created_at": "2017-11-06T09:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364758",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

Please let me handle this--this is already fixed in my branch of `psutil`, I just need to update the existing patch.

I don't consider it an emergency since it hasn't affected any of the machines I'm using for Windows builds.



---

archive/issue_comments_364759.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI guess this hasn't affected you because your machines are not really up-to-date? (For me, the problem hit me after the last big windows update, Fall Creators Update, that should be soon installed for everyone).",
    "created_at": "2017-11-06T09:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364759",
    "user": "https://github.com/sagetrac-gouezel"
}
```

<div id="comment:11" align="right">comment:11</div>

I guess this hasn't affected you because your machines are not really up-to-date? (For me, the problem hit me after the last big windows update, Fall Creators Update, that should be soon installed for everyone).



---

archive/issue_comments_364760.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2017-11-06T10:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364760",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_comments_364761.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4\"><code>9426d24</code></a></td><td><code>Updates my cygwin patch to psutil to the latest version of the patch.</code></td></tr></table>\n",
    "created_at": "2017-11-06T10:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364761",
    "user": "https://github.com/embray"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4"><code>9426d24</code></a></td><td><code>Updates my cygwin patch to psutil to the latest version of the patch.</code></td></tr></table>




---

archive/issue_comments_364762.json:
```json
{
    "body": "Changed commit from **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**",
    "created_at": "2017-11-06T10:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364762",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**



---

archive/issue_comments_364763.json:
```json
{
    "body": "Changed branch from **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)** to **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)**",
    "created_at": "2017-11-06T10:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364763",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)** to **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)**



---

archive/issue_comments_364764.json:
```json
{
    "body": "Changed commit from **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)** to **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)**",
    "created_at": "2017-11-06T10:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364764",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed commit from **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)** to **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)**



---

archive/issue_comments_364765.json:
```json
{
    "body": "Changed branch from **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)** to **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)**",
    "created_at": "2017-11-06T10:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364765",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed branch from **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)** to **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)**



---

archive/issue_comments_364766.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@embray](#comment:10):\n> Please let me handle this\n\nYou're welcome ;-)\n>--this is already fixed in my branch of `psutil`, I just need to update the existing patch.\n\nThat's what I did in my patch-to-the-current-patch, following exactly what you did in your cygwin port. I don't doubt it can be done better...(In fact : do we still need the Windows version string, since we now rely on a ficntion that dives directly the version ?\n> I don't consider it an emergency since it hasn't affected any of the machines I'm using for Windows builds.\n\nI got that after my Windows VM got upgraded to \"Fall Creators Update\", which I *think* introduced the new format (and triggered the error).",
    "created_at": "2017-11-06T10:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364766",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@embray](#comment:10):
> Please let me handle this

You're welcome ;-)
>--this is already fixed in my branch of `psutil`, I just need to update the existing patch.

That's what I did in my patch-to-the-current-patch, following exactly what you did in your cygwin port. I don't doubt it can be done better...(In fact : do we still need the Windows version string, since we now rely on a ficntion that dives directly the version ?
> I don't consider it an emergency since it hasn't affected any of the machines I'm using for Windows builds.

I got that after my Windows VM got upgraded to "Fall Creators Update", which I *think* introduced the new format (and triggered the error).



---

archive/issue_comments_364767.json:
```json
{
    "body": "Changed author from **Erik Bray** to none",
    "created_at": "2017-11-06T10:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364767",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed author from **Erik Bray** to none



---

archive/issue_comments_364768.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nRe-reading this ticket, I am *quite* surprised :\n\n* I see the \"Authors\" field deleted : I did **not** do that.\n* Similarly, I did **not** changed the branch nor the commit.\n\nI do not know what happened. But I want to be absolutely clear : I am **not** trying to take over this ticket.\n\nWith apologies, if necessary.",
    "created_at": "2017-11-06T12:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364768",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:14" align="right">comment:14</div>

Re-reading this ticket, I am *quite* surprised :

* I see the "Authors" field deleted : I did **not** do that.
* Similarly, I did **not** changed the branch nor the commit.

I do not know what happened. But I want to be absolutely clear : I am **not** trying to take over this ticket.

With apologies, if necessary.



---

archive/issue_comments_364769.json:
```json
{
    "body": "Changed branch from **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)** to **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)**",
    "created_at": "2017-11-06T12:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364769",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed branch from **[u/charpent/patch_psutil_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/patch_psutil_patch)** to **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)**



---

archive/issue_comments_364770.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@EmmanuelCharpentier](#comment:14):\n> Re-reading this ticket, I am *quite* surprised :\n> \n> * I see the \"Authors\" field deleted : I did **not** do that.\n> * Similarly, I did **not** changed the branch nor the commit.\n> \n> I do not know what happened.\n\nI have an hypothesis : I probably *unwillingly* overtook your changes, that seem to have been done while I was typing my first answer. And I didn't see the result..\n\n> But I want to be absolutely clear : I am **not** trying to take over this ticket.\n> \n> With apologies, if necessary.\n\nThey **are** necessary. Sorry for the mess...\n\nI can review this ticket later tonight, if you care...",
    "created_at": "2017-11-06T12:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364770",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@EmmanuelCharpentier](#comment:14):
> Re-reading this ticket, I am *quite* surprised :
> 
> * I see the "Authors" field deleted : I did **not** do that.
> * Similarly, I did **not** changed the branch nor the commit.
> 
> I do not know what happened.

I have an hypothesis : I probably *unwillingly* overtook your changes, that seem to have been done while I was typing my first answer. And I didn't see the result..

> But I want to be absolutely clear : I am **not** trying to take over this ticket.
> 
> With apologies, if necessary.

They **are** necessary. Sorry for the mess...

I can review this ticket later tonight, if you care...



---

archive/issue_comments_364771.json:
```json
{
    "body": "Changed commit from **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**",
    "created_at": "2017-11-06T12:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364771",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changed commit from **[`ed80215`](https://github.com/sagemath/sagetrac-mirror/commit/ed802154f7450af93b982e4f2a1c8c5eb2ce0ff7)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**



---

archive/issue_comments_364772.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2017-11-06T12:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364772",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Author: **Erik Bray**



---

archive/issue_comments_364773.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt's possible you commented while having a previous version of the page with your modifications already loaded.",
    "created_at": "2017-11-06T17:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364773",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

It's possible you commented while having a previous version of the page with your modifications already loaded.



---

archive/issue_comments_364774.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThanks--I just wanted to merge that change from the current version of my branch so I could keep track of things better.\n\nMeanwhile I'm working on the last updates I need to my branch to re-submit it, hopefully, for merging into psutil's main branch.",
    "created_at": "2017-11-06T17:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364774",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

Thanks--I just wanted to merge that change from the current version of my branch so I could keep track of things better.

Meanwhile I'm working on the last updates I need to my branch to re-submit it, hopefully, for merging into psutil's main branch.



---

archive/issue_events_336363.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-09T14:19:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336363"
}
```



---

archive/issue_events_336364.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-09T14:19:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336364"
}
```



---

archive/issue_comments_364775.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI still haven't gotten the fall update on my machine yet, but if more people do have it then this will be a problem (albeit only for building).",
    "created_at": "2017-11-09T14:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364775",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

I still haven't gotten the fall update on my machine yet, but if more people do have it then this will be a problem (albeit only for building).



---

archive/issue_comments_364776.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nResults so far, using Erik's branch :\n* On Linux (Debian testing) :\n    - 8.1.beta9 : compiles, passes ptestlong\n    - after upgrade to 8.1.rc0 : compiles, passes ptestlong.\n    - full recompilation (`make distclean && make ptestlong`) of 8.1.rc0 : compiles, passes ptestlong.\n* On Windows 10 + \"Fall Creators Update\" :\n    - 8.1.beta9 : compiles (ptestlong not run)\n    - after upgrade to 8.1.rc0 : compiles (ptestlong not run)\n    - full recompilation : *does ***not*** build*. Consistently fails building pynac, that complaints that it can't find the python library.\n\nI'm almost sure that this failure is unrelated to #24121's target. However, I set `needs_work` to flag the problem. I can re-test whenever `needs_review` is set.",
    "created_at": "2017-11-10T10:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364776",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:19" align="right">comment:19</div>

Results so far, using Erik's branch :
* On Linux (Debian testing) :
    - 8.1.beta9 : compiles, passes ptestlong
    - after upgrade to 8.1.rc0 : compiles, passes ptestlong.
    - full recompilation (`make distclean && make ptestlong`) of 8.1.rc0 : compiles, passes ptestlong.
* On Windows 10 + "Fall Creators Update" :
    - 8.1.beta9 : compiles (ptestlong not run)
    - after upgrade to 8.1.rc0 : compiles (ptestlong not run)
    - full recompilation : *does ***not*** build*. Consistently fails building pynac, that complaints that it can't find the python library.

I'm almost sure that this failure is unrelated to #24121's target. However, I set `needs_work` to flag the problem. I can re-test whenever `needs_review` is set.



---

archive/issue_events_336365.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-10T10:55:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336365"
}
```



---

archive/issue_events_336366.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-10T10:55:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336366"
}
```



---

archive/issue_events_336367.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-10T11:32:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336367"
}
```



---

archive/issue_events_336368.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-10T11:32:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336368"
}
```



---

archive/issue_comments_364777.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nJust because there is some other problem with building does not mean *this* issue needs work.  If the psutil package is building/installing then any other issue is not relevant to this one.  Please clarify whether the psutil package built.",
    "created_at": "2017-11-10T11:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364777",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">comment:20</div>

Just because there is some other problem with building does not mean *this* issue needs work.  If the psutil package is building/installing then any other issue is not relevant to this one.  Please clarify whether the psutil package built.



---

archive/issue_comments_364778.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOn Windows 10 + \"Fall Creators Update\", sage8.0.rc0+#24121+#24189, psutil compiles. \n\nHowever, Sage fails to build : fpyll consistently fails to build.",
    "created_at": "2017-11-10T22:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364778",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:21" align="right">comment:21</div>

On Windows 10 + "Fall Creators Update", sage8.0.rc0+#24121+#24189, psutil compiles. 

However, Sage fails to build : fpyll consistently fails to build.



---

archive/issue_events_336369.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-10T22:25:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336369"
}
```



---

archive/issue_events_336370.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-10T22:25:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336370"
}
```



---

archive/issue_comments_364779.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nCreated #24197. positive_review for this ticket.",
    "created_at": "2017-11-10T22:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364779",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:22" align="right">comment:22</div>

Created #24197. positive_review for this ticket.



---

archive/issue_comments_364780.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier**",
    "created_at": "2017-11-10T22:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364780",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Reviewer: **Emmanuel Charpentier**



---

archive/issue_events_336371.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-04T13:48:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336371"
}
```



---

archive/issue_events_336372.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-04T13:48:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336372"
}
```



---

archive/issue_events_336373.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T01:04:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336373"
}
```



---

archive/issue_events_336374.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "290133941551e8bf587996adb0c300182d682d1f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-11T01:04:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24121#event-336374"
}
```



---

archive/issue_comments_364781.json:
```json
{
    "body": "Changed branch from **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**",
    "created_at": "2017-12-11T01:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24121#issuecomment-364781",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/cygwin/ticket-24121](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-24121)** to **[`9426d24`](https://github.com/sagemath/sagetrac-mirror/commit/9426d2432a57150a3f6a4f8cd99934362bbf9ed4)**
