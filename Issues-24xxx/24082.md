# Issue 24082: Genus from a TorsionQuadraticModules and a signature pair

archive/issues_023845.json:
```json
{
    "body": "By results of Nikulin:\nThe genus of an even integral quadratic form is determined by\n`(s_+,s_-,q)`\nwhere `s_+,s_-` is the signature and `q` a torsion quadratic form with values in `QQ/2ZZ`\n\nThe genus of an odd integral quadratic form is determined by\n`(s_+,s_-,b)`\nhere `b` is a torsion bilinear form with values in `QQ/ZZ`\n\nWe have `TorsionQuadraticModule` and we have\n`sage.quadratic_forms.genera.genus.Genus`\n\nThis ticket should implement the Theorem of Nikulin.\n\nCC:  @annahaensch @tscrim\n\nReviewer: Travis Scrimshaw\n\nAuthor: Simon Brandhorst\n\nBranch: 3ad32006e86c6874b3f498692e73f7fb1d7c09e1\n\nDependencies: #23699,#23916,#24035,#24577,#24576, #24818, #25875, #24889\n\nCommit: 3ad32006e86c6874b3f498692e73f7fb1d7c09e1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24082\n\n",
    "closed_at": "2019-05-08T15:51:08Z",
    "created_at": "2017-10-21T12:55:29Z",
    "labels": [
        "component: quadratic forms"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Genus from a TorsionQuadraticModules and a signature pair",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24082",
    "user": "https://github.com/simonbrandhorst"
}
```
By results of Nikulin:
The genus of an even integral quadratic form is determined by
`(s_+,s_-,q)`
where `s_+,s_-` is the signature and `q` a torsion quadratic form with values in `QQ/2ZZ`

The genus of an odd integral quadratic form is determined by
`(s_+,s_-,b)`
here `b` is a torsion bilinear form with values in `QQ/ZZ`

We have `TorsionQuadraticModule` and we have
`sage.quadratic_forms.genera.genus.Genus`

This ticket should implement the Theorem of Nikulin.

CC:  @annahaensch @tscrim

Reviewer: Travis Scrimshaw

Author: Simon Brandhorst

Branch: 3ad32006e86c6874b3f498692e73f7fb1d7c09e1

Dependencies: #23699,#23916,#24035,#24577,#24576, #24818, #25875, #24889

Commit: 3ad32006e86c6874b3f498692e73f7fb1d7c09e1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24082





---

archive/issue_comments_333620.json:
```json
{
    "body": "<a id='comment:5'></a>Last 10 new commits:",
    "created_at": "2018-01-20T14:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333620",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:5'></a>Last 10 new commits:



---

archive/issue_comments_333621.json:
```json
{
    "body": "<a id='comment:6'></a>This ticket is now split into several subtasks to keep reviewing easy.",
    "created_at": "2018-01-20T14:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333621",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:6'></a>This ticket is now split into several subtasks to keep reviewing easy.



---

archive/issue_comments_333622.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-20T16:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333623.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-28T08:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333624.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-02-22T08:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_333625.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-22T15:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333626.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-22T16:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333627.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-03-01T10:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_333628.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-01T12:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333629.json:
```json
{
    "body": "<a id='comment:18'></a>Todo:\n\n- odd genera",
    "created_at": "2018-03-01T12:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333629",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:18'></a>Todo:

- odd genera



---

archive/issue_comments_333630.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-11T11:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333630",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_333631.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-10T21:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333632.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-05-11T22:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_333633.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-11T22:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333633",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333634.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-07-18T14:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333634",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_333635.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-19T09:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333636.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-21T12:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333637.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-10-21T16:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_333638.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-10-21T16:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333638",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_333639.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-21T17:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333640.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-02-11T08:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333641.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-17T08:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333642.json:
```json
{
    "body": "<a id='comment:36'></a>Correctness of the code can be checked with the following systematic exhaustion of small examples:\n\n```\nfrom sage.quadratic_forms.genera.genus import genera\nfor signature in [(1,0), (1,1),(1,2), (4,0), (0,5)]:\n    for det in range(1,257):\n        det\n        for genus in genera(signature,det,even=False):\n            assert genus == genus.discriminant_form().genus(signature)\n```",
    "created_at": "2019-04-17T12:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333642",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:36'></a>Correctness of the code can be checked with the following systematic exhaustion of small examples:

```
from sage.quadratic_forms.genera.genus import genera
for signature in [(1,0), (1,1),(1,2), (4,0), (0,5)]:
    for det in range(1,257):
        det
        for genus in genera(signature,det,even=False):
            assert genus == genus.discriminant_form().genus(signature)
```



---

archive/issue_comments_333643.json:
```json
{
    "body": "<a id='comment:38'></a>I think you should add that as a test, although maybe shortening down the values of `det`?\n\nAlso, some nitpicks while-you-are-at-it:\n\n- The alignment of the `import` should be at the opening parenthesis level (otherwise it looks strange, and I think this is a PEP8 thing too).\n- The closing `]` in `block1` and `block2` IMO looks better at the same level as the `[`.\n- The `else` after the `for` loops at the end of `genus` is unnecessary and makes it seem like the code could return a `None` (whereas you really want it to error out if that `if` statement is never satisfied).",
    "created_at": "2019-04-17T12:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333643",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>I think you should add that as a test, although maybe shortening down the values of `det`?

Also, some nitpicks while-you-are-at-it:

- The alignment of the `import` should be at the opening parenthesis level (otherwise it looks strange, and I think this is a PEP8 thing too).
- The closing `]` in `block1` and `block2` IMO looks better at the same level as the `[`.
- The `else` after the `for` loops at the end of `genus` is unnecessary and makes it seem like the code could return a `None` (whereas you really want it to error out if that `if` statement is never satisfied).



---

archive/issue_comments_333644.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-17T14:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333645.json:
```json
{
    "body": "<a id='comment:40'></a>Thank you. For taking a look at this.",
    "created_at": "2019-04-17T14:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333645",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:40'></a>Thank you. For taking a look at this.



---

archive/issue_comments_333646.json:
```json
{
    "body": "<a id='comment:41'></a>You're welcome, it was no problem.\n\nYou will need to do the following changes:\n\n```diff\n-            sage: genera = flatten([genera(s, d, even=False) for d in dets for s in signatures])    # long\n-            sage: all(g == g.discriminant_form().genus(g.signature_pair()) for g in genera)\n+            sage: genera = flatten([genera(s, d, even=False) for d in dets for s in signatures])  # long time\n+            sage: all(g == g.discriminant_form().genus(g.signature_pair()) for g in genera)  # long time\n             True\n-            \"\"\"\n+        \"\"\"\n```\nWithout marking the second test as `# long time`, you will get an error when running only the short doctests as `genera` is undefined. Also, you will want to mark that as `TESTS:`, maybe also\n\n```diff\n-        A systematic test of lattices of\n-        small ranks and determinants::\n+        A systematic test of lattices of small ranks and determinants::\n```",
    "created_at": "2019-04-17T14:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333646",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:41'></a>You're welcome, it was no problem.

You will need to do the following changes:

```diff
-            sage: genera = flatten([genera(s, d, even=False) for d in dets for s in signatures])    # long
-            sage: all(g == g.discriminant_form().genus(g.signature_pair()) for g in genera)
+            sage: genera = flatten([genera(s, d, even=False) for d in dets for s in signatures])  # long time
+            sage: all(g == g.discriminant_form().genus(g.signature_pair()) for g in genera)  # long time
             True
-            """
+        """
```
Without marking the second test as `# long time`, you will get an error when running only the short doctests as `genera` is undefined. Also, you will want to mark that as `TESTS:`, maybe also

```diff
-        A systematic test of lattices of
-        small ranks and determinants::
+        A systematic test of lattices of small ranks and determinants::
```



---

archive/issue_comments_333647.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-17T14:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333648.json:
```json
{
    "body": "<a id='comment:43'></a>tests pass",
    "created_at": "2019-04-17T14:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333648",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:43'></a>tests pass



---

archive/issue_comments_333649.json:
```json
{
    "body": "<a id='comment:44'></a>Great, thanks. I will just wait for the patchbot to confirm the doc builds.",
    "created_at": "2019-04-17T14:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333649",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:44'></a>Great, thanks. I will just wait for the patchbot to confirm the doc builds.



---

archive/issue_comments_333650.json:
```json
{
    "body": "<a id='comment:45'></a>*ping*",
    "created_at": "2019-04-24T07:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333650",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:45'></a>*ping*



---

archive/issue_comments_333651.json:
```json
{
    "body": "<a id='comment:46'></a>This is now getting a doctest failure:\n\n```\nFile \"src/sage/modules/torsion_quadratic_module.py\", line 575, in sage.modules.torsion_quadratic_module.TorsionQuadraticModule.genus\nFailed example:\n    D.genus((1,0))\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: this discriminant form and signature do not define a genus\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.torsion_quadratic_module.TorsionQuadraticModule.genus[12]>\", line 1, in <module>\n        D.genus((Integer(1),Integer(0)))\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/modules/torsion_quadratic_module.py\", line 630, in genus\n        genus = GenusSymbol_global_ring(signature_pair, local_symbols)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/quadratic_forms/genera/genus.py\", line 1980, in __init__\n        raise TypeError(\"all local symbols must be of the same dimension\")\n    TypeError: all local symbols must be of the same dimension\n```",
    "created_at": "2019-04-24T07:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333651",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'></a>This is now getting a doctest failure:

```
File "src/sage/modules/torsion_quadratic_module.py", line 575, in sage.modules.torsion_quadratic_module.TorsionQuadraticModule.genus
Failed example:
    D.genus((1,0))
Expected:
    Traceback (most recent call last):
    ...
    ValueError: this discriminant form and signature do not define a genus
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.torsion_quadratic_module.TorsionQuadraticModule.genus[12]>", line 1, in <module>
        D.genus((Integer(1),Integer(0)))
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/modules/torsion_quadratic_module.py", line 630, in genus
        genus = GenusSymbol_global_ring(signature_pair, local_symbols)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/quadratic_forms/genera/genus.py", line 1980, in __init__
        raise TypeError("all local symbols must be of the same dimension")
    TypeError: all local symbols must be of the same dimension
```



---

archive/issue_comments_333652.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-03T23:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333653.json:
```json
{
    "body": "<a id='comment:48'></a>Tests pass & doc builds on my machine",
    "created_at": "2019-05-03T23:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333653",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:48'></a>Tests pass & doc builds on my machine



---

archive/issue_comments_333654.json:
```json
{
    "body": "<a id='comment:49'></a>and a green bot",
    "created_at": "2019-05-04T21:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333654",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:49'></a>and a green bot



---

archive/issue_comments_333655.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-06T05:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333655",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061156.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-05-06T05:08:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24082#event-61156"
}
```



---

archive/issue_comments_333656.json:
```json
{
    "body": "<a id='comment:50'></a>Thank you. LGTM.",
    "created_at": "2019-05-06T05:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333656",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:50'></a>Thank you. LGTM.



---

archive/issue_events_061157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-08T15:51:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24082#event-61157"
}
```



---

archive/issue_comments_333657.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-08T15:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24082#issuecomment-333657",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
