# Issue 24228: py3: replace <type by <... (in pyx files of rings folder)

archive/issues_023991.json:
```json
{
    "assignees": [],
    "body": "part of #16085\n\nCC:  @embray\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24228_\n\n",
    "closed_at": "2018-01-16T16:48:28Z",
    "created_at": "2017-11-16T20:19:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: replace <type by <... (in pyx files of rings folder)",
    "type": "issue",
    "updated_at": "2018-06-27T19:03:57Z",
    "url": "https://github.com/sagemath/sage/issues/24228",
    "user": "https://github.com/fchapoton"
}
```
part of #16085

CC:  @embray

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/24228_





---

archive/issue_events_318096.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-16T20:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318096"
}
```



---

archive/issue_events_318097.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-16T20:19:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318097"
}
```



---

archive/issue_events_318098.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-16T20:19:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318098"
}
```



---

archive/issue_events_318099.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-16T20:19:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318099"
}
```



---

archive/issue_events_318100.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-16T20:20:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318100"
}
```



---

archive/issue_comments_369346.json:
```json
{
    "body": "Commit: **[1113dea](https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe)**",
    "created_at": "2017-11-16T20:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369346",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[1113dea](https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe)**



---

archive/issue_comments_369347.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe\">1113dea</a></td><td><code>py3: replace <type 'xxx'> by <... 'xxx'> in the doctests of rings/ pyx files</code></td></tr></table>\n",
    "created_at": "2017-11-16T20:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369347",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe">1113dea</a></td><td><code>py3: replace <type 'xxx'> by <... 'xxx'> in the doctests of rings/ pyx files</code></td></tr></table>




---

archive/issue_comments_369348.json:
```json
{
    "body": "Branch: **[u/chapoton/24228](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24228)**",
    "created_at": "2017-11-16T20:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369348",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/24228](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24228)**



---

archive/issue_comments_369349.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+part of #16085\n``````\n",
    "created_at": "2017-11-16T20:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369349",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+part of #16085
``````




---

archive/issue_comments_369350.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nLGTM if green patchbot.",
    "created_at": "2017-11-16T21:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369350",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">Comment 3</div>

LGTM if green patchbot.



---

archive/issue_comments_369351.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-11-16T21:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369351",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_318101.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-17T07:21:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318101"
}
```



---

archive/issue_events_318102.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-11-17T07:21:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318102"
}
```



---

archive/issue_comments_369352.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThanks",
    "created_at": "2017-11-17T07:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369352",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">Comment 4</div>

Thanks



---

archive/issue_comments_369353.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nPersonally I'm -1 on changing this en mass, purely from the perspective of documentation quality.   If these were all pure tests that aren't shown in the documentation that would be one thing, but when it comes to usage examples I don't like it.  It would be nicer to just display one or the other (probably `<class ...>` for forward-compatibility), and handle the difference in the doctest output checker.",
    "created_at": "2017-11-20T10:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369353",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">Comment 5</div>

Personally I'm -1 on changing this en mass, purely from the perspective of documentation quality.   If these were all pure tests that aren't shown in the documentation that would be one thing, but when it comes to usage examples I don't like it.  It would be nicer to just display one or the other (probably `<class ...>` for forward-compatibility), and handle the difference in the doctest output checker.



---

archive/issue_comments_369354.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI'm working on an update to the output checker to be flexible about this.  Would you consider putting these tickets on hold instead?",
    "created_at": "2017-11-21T11:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369354",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

I'm working on an update to the output checker to be flexible about this.  Would you consider putting these tickets on hold instead?



---

archive/issue_events_318103.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-21T11:03:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318103"
}
```



---

archive/issue_events_318104.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-21T11:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318104"
}
```



---

archive/issue_comments_369355.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nPlease see #24258",
    "created_at": "2017-11-21T12:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369355",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">Comment 8</div>

Please see #24258



---

archive/issue_comments_369356.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI think it would cause more problems/confusion for the user to unexpectedly get something different than when they ran the test (assuming they understand `...`). Moreover, I feel that #24258 makes the conversion to Python3 harder because it suppresses the distinctions in a hidden way as opposed to the clearly hacked `...` approach. I do agree that it does make the doctests less clean. However, I have less invested than others on Python3, so perhaps they can comment.\n\nFrom a quick look, a number of the tests probably could be better implemented to not create the output difference (i.e. explicitly test against the type or not have output). So we might also want to spend some effort on that rather than relying on workarounds.",
    "created_at": "2017-11-22T05:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369356",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

I think it would cause more problems/confusion for the user to unexpectedly get something different than when they ran the test (assuming they understand `...`). Moreover, I feel that #24258 makes the conversion to Python3 harder because it suppresses the distinctions in a hidden way as opposed to the clearly hacked `...` approach. I do agree that it does make the doctests less clean. However, I have less invested than others on Python3, so perhaps they can comment.

From a quick look, a number of the tests probably could be better implemented to not create the output difference (i.e. explicitly test against the type or not have output). So we might also want to spend some effort on that rather than relying on workarounds.



---

archive/issue_comments_369357.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@tscrim](#comment%3A9):\n> I think it would cause more problems/confusion for the user to unexpectedly get something different than when they ran the test (assuming they understand `...`). Moreover, I feel that #24258 makes the conversion to Python3 harder because it suppresses the distinctions in a hidden way as opposed to the clearly hacked `...` approach. I do agree that it does make the doctests less clean. However, I have less invested than others on Python3, so perhaps they can comment.\n> \n> From a quick look, a number of the tests probably could be better implemented to not create the output difference (i.e. explicitly test against the type or not have output). So we might also want to spend some effort on that rather than relying on workarounds.\n\nThis is the problem with using doctests everywhere.  From a documentation standpoint looking at the repr is more interesting.  It depends, to me, if the test is in an \"EXAMPLES\" block or a \"TESTS\" block.  In the former case I think it should be more interesting for reading purposes.\n\nCasual readers of the docs *don't* necessarily know what `...` means in this context.  In many cases it's pretty clear (e.g. trailing ellipses at the end of some long floating point expansion).  But here it's just awkward and ugly.  For the purposes of testing, especially considering that Python 3 is currently not the default (and won't be for still quite a while) it's better to leave existing tests alone *as much as possible* and adapt minor `repr` differences to Python 3 only.",
    "created_at": "2017-11-22T12:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369357",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@tscrim](#comment%3A9):
> I think it would cause more problems/confusion for the user to unexpectedly get something different than when they ran the test (assuming they understand `...`). Moreover, I feel that #24258 makes the conversion to Python3 harder because it suppresses the distinctions in a hidden way as opposed to the clearly hacked `...` approach. I do agree that it does make the doctests less clean. However, I have less invested than others on Python3, so perhaps they can comment.
> 
> From a quick look, a number of the tests probably could be better implemented to not create the output difference (i.e. explicitly test against the type or not have output). So we might also want to spend some effort on that rather than relying on workarounds.

This is the problem with using doctests everywhere.  From a documentation standpoint looking at the repr is more interesting.  It depends, to me, if the test is in an "EXAMPLES" block or a "TESTS" block.  In the former case I think it should be more interesting for reading purposes.

Casual readers of the docs *don't* necessarily know what `...` means in this context.  In many cases it's pretty clear (e.g. trailing ellipses at the end of some long floating point expansion).  But here it's just awkward and ugly.  For the purposes of testing, especially considering that Python 3 is currently not the default (and won't be for still quite a while) it's better to leave existing tests alone *as much as possible* and adapt minor `repr` differences to Python 3 only.



---

archive/issue_comments_369358.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWe are in agreement that they are not pretty, but I think it is much better to show the differences between Python2 and Python3 doctests. Actually, perhaps the best solution would be the output flag suggested on #24261 along with writing better doctests in the cases we can. Thoughts?",
    "created_at": "2017-11-22T22:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369358",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">Comment 11</div>

We are in agreement that they are not pretty, but I think it is much better to show the differences between Python2 and Python3 doctests. Actually, perhaps the best solution would be the output flag suggested on #24261 along with writing better doctests in the cases we can. Thoughts?



---

archive/issue_comments_369359.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nIt's better in cases that actually matter--this is just a trivial formatting difference that does not impact the validity of the relevant tests (one can invent a pathological case where it matters, such as replacing the builtin `int` with a user-defined class named \"int\").  By putting in \"...\" anywhere one isn't \"showing\" anything, just brushing the difference under the rug, rather than handling it an explicitly and restrictively.",
    "created_at": "2017-11-23T09:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369359",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">Comment 12</div>

It's better in cases that actually matter--this is just a trivial formatting difference that does not impact the validity of the relevant tests (one can invent a pathological case where it matters, such as replacing the builtin `int` with a user-defined class named "int").  By putting in "..." anywhere one isn't "showing" anything, just brushing the difference under the rug, rather than handling it an explicitly and restrictively.



---

archive/issue_comments_369360.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAlso, the point of #24261 is specifically for those relatively rare cases where there is an expected non-trivial difference in behavior between Python 2 and 3.  Using it for this case would mean hundreds of examples like\n\n```\n<type 'int'>  # py2\n<class 'int'>  # py3\n```\n\nSee?  It's silly when you look at it that way.",
    "created_at": "2017-11-23T09:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369360",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">Comment 13</div>

Also, the point of #24261 is specifically for those relatively rare cases where there is an expected non-trivial difference in behavior between Python 2 and 3.  Using it for this case would mean hundreds of examples like

```
<type 'int'>  # py2
<class 'int'>  # py3
```

See?  It's silly when you look at it that way.



---

archive/issue_comments_369361.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI see a bunch of these got merged anyways since I didn't change the status on them.  I'd really prefer to undo that.",
    "created_at": "2017-12-15T12:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369361",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">Comment 14</div>

I see a bunch of these got merged anyways since I didn't change the status on them.  I'd really prefer to undo that.



---

archive/issue_comments_369362.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nFor the record, I will not actively oppose (up to suggesting changing the appropriate doctests to remove the compatibility issue), but I will not be reviewing those tickets either.",
    "created_at": "2017-12-15T12:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369362",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">Comment 15</div>

For the record, I will not actively oppose (up to suggesting changing the appropriate doctests to remove the compatibility issue), but I will not be reviewing those tickets either.



---

archive/issue_comments_369363.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI still don't understand your opposition here.  It feels like a bikeshed.  We're just talking about making a few documentation examples work more easily testable.",
    "created_at": "2017-12-15T13:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369363",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">Comment 16</div>

I still don't understand your opposition here.  It feels like a bikeshed.  We're just talking about making a few documentation examples work more easily testable.



---

archive/issue_comments_369364.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWhatever you do, please beware of conflicts with #24350. I already had several merge conflicts because of changing `<type` to `<...`.",
    "created_at": "2017-12-15T13:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369364",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

Whatever you do, please beware of conflicts with #24350. I already had several merge conflicts because of changing `<type` to `<...`.



---

archive/issue_comments_369365.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@embray](#comment%3A16):\n> I still don't understand your opposition here.  It feels like a bikeshed.  We're just talking about making a few documentation examples work more easily testable.\n\nHow I see your proposal is that we should hide much more of the difference between Python2/3 by making the framework itself more complicated (and thus more prone to bugs). So IMO it is far from bikeshedding. But like I said, I am not opposing your proposal, but instead choosing not to support it.\n\nReally, we should have very minimal tests that honestly need to include a check that has the output type/class there. Some better (and more robust) checks would be to do `isinstance(foo, Bar)`. So I doubt we would really have to have hundreds of cases as you say in [comment:13](#comment%3A13). However, that might require looking a bit at the actual doctest itself, and so it is not so mechanical of a change.",
    "created_at": "2017-12-15T13:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369365",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@embray](#comment%3A16):
> I still don't understand your opposition here.  It feels like a bikeshed.  We're just talking about making a few documentation examples work more easily testable.

How I see your proposal is that we should hide much more of the difference between Python2/3 by making the framework itself more complicated (and thus more prone to bugs). So IMO it is far from bikeshedding. But like I said, I am not opposing your proposal, but instead choosing not to support it.

Really, we should have very minimal tests that honestly need to include a check that has the output type/class there. Some better (and more robust) checks would be to do `isinstance(foo, Bar)`. So I doubt we would really have to have hundreds of cases as you say in [comment:13](#comment%3A13). However, that might require looking a bit at the actual doctest itself, and so it is not so mechanical of a change.



---

archive/issue_comments_369366.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nIt's really not complicated...",
    "created_at": "2017-12-15T13:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369366",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

It's really not complicated...



---

archive/issue_comments_369367.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@jdemeyer](#comment%3A17):\n> Whatever you do, please beware of conflicts with #24350. I already had several merge conflicts because of changing `<type` to `<...`.\n\nPerhaps in that case we could revert those changes.  I meant to put the other tickets for that on hold as well...",
    "created_at": "2017-12-15T13:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369367",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@jdemeyer](#comment%3A17):
> Whatever you do, please beware of conflicts with #24350. I already had several merge conflicts because of changing `<type` to `<...`.

Perhaps in that case we could revert those changes.  I meant to put the other tickets for that on hold as well...



---

archive/issue_events_318105.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:10:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318105"
}
```



---

archive/issue_events_318106.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:10:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318106"
}
```



---

archive/issue_events_318107.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:10:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318107"
}
```



---

archive/issue_events_318108.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:10:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318108"
}
```



---

archive/issue_events_318109.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:10:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318109"
}
```



---

archive/issue_comments_369368.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nLet us close this one as invalid for the time being, please. This will only become a serious issue when we can start to run the tests in python3.",
    "created_at": "2017-12-15T16:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369368",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">Comment 21</div>

Let us close this one as invalid for the time being, please. This will only become a serious issue when we can start to run the tests in python3.



---

archive/issue_comments_369369.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nErik, could you please close this one ?",
    "created_at": "2018-01-16T16:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369369",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">Comment 22</div>

Erik, could you please close this one ?



---

archive/issue_events_318110.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T16:48:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318110"
}
```



---

archive/issue_events_318111.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T16:48:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318111"
}
```



---

archive/issue_events_318112.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T16:48:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24228#event-318112"
}
```



---

archive/issue_comments_369370.json:
```json
{
    "body": "Changed branch from **[u/chapoton/24228](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24228)** to none",
    "created_at": "2018-06-27T19:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369370",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/24228](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24228)** to none



---

archive/issue_comments_369371.json:
```json
{
    "body": "Changed commit from **[1113dea](https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe)** to none",
    "created_at": "2018-06-27T19:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24228#issuecomment-369371",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[1113dea](https://github.com/sagemath/sagetrac-mirror/commit/1113dea74be379432cab4eafd140150d1ddbc8fe)** to none
