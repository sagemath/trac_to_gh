# Issue 24434: faster reduced words

archive/issues_024197.json:
```json
{
    "assignees": [],
    "body": "Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.\n\nAs a side effect, the performance is also a bit better.  Old:\n\n```\nsage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n1 loop, best of 3: 42.3 s per loop\nsage: version()\n'SageMath version 8.2.beta1, Release Date: 2017-12-22'\n```\n\nNew:\n\n```\nsage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n1 loop, best of 3: 4.9 s per loop\n```\n\nCC:  @darijgr @tscrim\n\nBranch/Commit: **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**\n\nReviewer: **Darij Grinberg, Travis Scrimshaw**\n\nAuthor: **Martin Rubey**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24434_\n\n",
    "closed_at": "2017-12-31T09:28:04Z",
    "created_at": "2017-12-27T08:52:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "faster reduced words",
    "type": "issue",
    "updated_at": "2017-12-31T09:28:04Z",
    "url": "https://github.com/sagemath/sage/issues/24434",
    "user": "https://github.com/mantepse"
}
```
Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.

As a side effect, the performance is also a bit better.  Old:

```
sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
1 loop, best of 3: 42.3 s per loop
sage: version()
'SageMath version 8.2.beta1, Release Date: 2017-12-22'
```

New:

```
sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
1 loop, best of 3: 4.9 s per loop
```

CC:  @darijgr @tscrim

Branch/Commit: **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**

Reviewer: **Darij Grinberg, Travis Scrimshaw**

Author: **Martin Rubey**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/24434_





---

archive/issue_events_338588.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T08:52:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338588"
}
```



---

archive/issue_events_338589.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T08:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338589"
}
```



---

archive/issue_comments_369978.json:
```json
{
    "body": "Branch: **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)**",
    "created_at": "2017-12-27T08:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369978",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)**



---

archive/issue_events_338590.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338590"
}
```



---

archive/issue_comments_369979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,17 @@\n+Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.\n \n+As a side effect, the performance is also a bit better.  Old:\n+\n+```\n+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n+1 loop, best of 3: 42.3 s per loop\n+sage: version()\n+'SageMath version 8.2.beta1, Release Date: 2017-12-22'\n+```\n+\n+New:\n+\n+```\n+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n+1 loop, best of 3: 4.9 s per loop\n+```\n``````\n",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369979",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,17 @@
+Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.
 
+As a side effect, the performance is also a bit better.  Old:
+
+```
+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
+1 loop, best of 3: 42.3 s per loop
+sage: version()
+'SageMath version 8.2.beta1, Release Date: 2017-12-22'
+```
+
+New:
+
+```
+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
+1 loop, best of 3: 4.9 s per loop
+```
``````




---

archive/issue_comments_369980.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369980",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_events_338591.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338591"
}
```



---

archive/issue_comments_369981.json:
```json
{
    "body": "Commit: **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)**",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369981",
    "user": "https://github.com/mantepse"
}
```

Commit: **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)**



---

archive/issue_events_338592.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338592"
}
```



---

archive/issue_comments_369982.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLooks good to me (if the tests pass)!",
    "created_at": "2017-12-27T12:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369982",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:3" align="right">comment:3</div>

Looks good to me (if the tests pass)!



---

archive/issue_comments_369983.json:
```json
{
    "body": "Changed commit from **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)** to **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)**",
    "created_at": "2017-12-27T12:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)** to **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)**



---

archive/issue_comments_369984.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577\">2346617</a></td><td><code>python3 fix and fix doc</code></td></tr></table>\n",
    "created_at": "2017-12-27T12:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577">2346617</a></td><td><code>python3 fix and fix doc</code></td></tr></table>




---

archive/issue_comments_369985.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n(the patchbots are failing on 8.2beta1, not on this ticket)",
    "created_at": "2017-12-28T08:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369985",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">comment:5</div>

(the patchbots are failing on 8.2beta1, not on this ticket)



---

archive/issue_comments_369986.json:
```json
{
    "body": "Reviewer: **Darij Grinberg, Travis Scrimshaw**",
    "created_at": "2017-12-30T07:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369986",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Darij Grinberg, Travis Scrimshaw**



---

archive/issue_comments_369987.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOne little thing:\n\n```diff\n-return [w for w in self.reduced_words_iterator()]\n+return list(self.reduced_words_iterator())\n```\nOnce done, you can set a positive review on my behalf.",
    "created_at": "2017-12-30T07:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369987",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

One little thing:

```diff
-return [w for w in self.reduced_words_iterator()]
+return list(self.reduced_words_iterator())
```
Once done, you can set a positive review on my behalf.



---

archive/issue_comments_369988.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3\">bed22ef</a></td><td><code>use list to turn iterator into list</code></td></tr></table>\n",
    "created_at": "2017-12-30T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3">bed22ef</a></td><td><code>use list to turn iterator into list</code></td></tr></table>




---

archive/issue_comments_369989.json:
```json
{
    "body": "Changed commit from **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**",
    "created_at": "2017-12-30T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**



---

archive/issue_comments_369990.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWonderful, thank you!",
    "created_at": "2017-12-30T07:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369990",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">comment:8</div>

Wonderful, thank you!



---

archive/issue_events_338593.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-30T07:36:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338593"
}
```



---

archive/issue_events_338594.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-30T07:36:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338594"
}
```



---

archive/issue_comments_369991.json:
```json
{
    "body": "Changed branch from **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**",
    "created_at": "2017-12-31T09:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-369991",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**



---

archive/issue_events_338595.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-31T09:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338595"
}
```



---

archive/issue_events_338596.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4e3f251a475e7ee7a33616fd1596b4fcf5aa3c4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-31T09:28:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-338596"
}
```
