# Issue 24434: faster reduced words

archive/issues_024197.json:
```json
{
    "assignees": [],
    "body": "Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.\n\nAs a side effect, the performance is also a bit better.  Old:\n\n```\nsage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n1 loop, best of 3: 42.3 s per loop\nsage: version()\n'SageMath version 8.2.beta1, Release Date: 2017-12-22'\n```\n\nNew:\n\n```\nsage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n1 loop, best of 3: 4.9 s per loop\n```\n\nCC:  @darijgr @tscrim\n\nBranch/Commit: **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**\n\nReviewer: **Darij Grinberg, Travis Scrimshaw**\n\nAuthor: **Martin Rubey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24434_\n\n",
    "closed_at": "2017-12-31T09:28:04Z",
    "created_at": "2017-12-27T08:52:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "faster reduced words",
    "type": "issue",
    "updated_at": "2017-12-31T09:28:04Z",
    "url": "https://github.com/sagemath/sage/issues/24434",
    "user": "https://github.com/mantepse"
}
```
Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.

As a side effect, the performance is also a bit better.  Old:

```
sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
1 loop, best of 3: 42.3 s per loop
sage: version()
'SageMath version 8.2.beta1, Release Date: 2017-12-22'
```

New:

```
sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
1 loop, best of 3: 4.9 s per loop
```

CC:  @darijgr @tscrim

Branch/Commit: **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**

Reviewer: **Darij Grinberg, Travis Scrimshaw**

Author: **Martin Rubey**

_Issue created by migration from https://trac.sagemath.org/ticket/24434_





---

archive/issue_events_320563.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T08:52:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320563"
}
```



---

archive/issue_events_320564.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T08:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320564"
}
```



---

archive/issue_comments_372639.json:
```json
{
    "body": "Branch: **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)**",
    "created_at": "2017-12-27T08:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372639",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)**



---

archive/issue_events_320565.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320565"
}
```



---

archive/issue_comments_372640.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,17 @@\n+Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.\n \n+As a side effect, the performance is also a bit better.  Old:\n+\n+```\n+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n+1 loop, best of 3: 42.3 s per loop\n+sage: version()\n+'SageMath version 8.2.beta1, Release Date: 2017-12-22'\n+```\n+\n+New:\n+\n+```\n+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]\n+1 loop, best of 3: 4.9 s per loop\n+```\n``````\n",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372640",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,17 @@
+Since it is usually infeasible to compute all reduced words of a permutation, an iterator may be more convenient.
 
+As a side effect, the performance is also a bit better.  Old:
+
+```
+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
+1 loop, best of 3: 42.3 s per loop
+sage: version()
+'SageMath version 8.2.beta1, Release Date: 2017-12-22'
+```
+
+New:
+
+```
+sage: %timeit [len(pi.reduced_words()) for pi in Permutations(6)]
+1 loop, best of 3: 4.9 s per loop
+```
``````




---

archive/issue_comments_372641.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372641",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_events_320566.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320566"
}
```



---

archive/issue_comments_372642.json:
```json
{
    "body": "Commit: **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)**",
    "created_at": "2017-12-27T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372642",
    "user": "https://github.com/mantepse"
}
```

Commit: **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)**



---

archive/issue_events_320567.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-27T09:01:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320567"
}
```



---

archive/issue_comments_372643.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nLooks good to me (if the tests pass)!",
    "created_at": "2017-12-27T12:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372643",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:3" align="right">Comment 3</div>

Looks good to me (if the tests pass)!



---

archive/issue_comments_372644.json:
```json
{
    "body": "Changed commit from **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)** to **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)**",
    "created_at": "2017-12-27T12:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[14bfedb](https://github.com/sagemath/sagetrac-mirror/commit/14bfedbb03d4a82750731586d3a667376e2d8bad)** to **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)**



---

archive/issue_comments_372645.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577\">2346617</a></td><td><code>python3 fix and fix doc</code></td></tr></table>\n",
    "created_at": "2017-12-27T12:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372645",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577">2346617</a></td><td><code>python3 fix and fix doc</code></td></tr></table>




---

archive/issue_comments_372646.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\n(the patchbots are failing on 8.2beta1, not on this ticket)",
    "created_at": "2017-12-28T08:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372646",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">Comment 5</div>

(the patchbots are failing on 8.2beta1, not on this ticket)



---

archive/issue_comments_372647.json:
```json
{
    "body": "Reviewer: **Darij Grinberg, Travis Scrimshaw**",
    "created_at": "2017-12-30T07:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372647",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Darij Grinberg, Travis Scrimshaw**



---

archive/issue_comments_372648.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOne little thing:\n\n```diff\n-return [w for w in self.reduced_words_iterator()]\n+return list(self.reduced_words_iterator())\n```\nOnce done, you can set a positive review on my behalf.",
    "created_at": "2017-12-30T07:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372648",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">Comment 6</div>

One little thing:

```diff
-return [w for w in self.reduced_words_iterator()]
+return list(self.reduced_words_iterator())
```
Once done, you can set a positive review on my behalf.



---

archive/issue_comments_372649.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3\">bed22ef</a></td><td><code>use list to turn iterator into list</code></td></tr></table>\n",
    "created_at": "2017-12-30T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372649",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3">bed22ef</a></td><td><code>use list to turn iterator into list</code></td></tr></table>




---

archive/issue_comments_372650.json:
```json
{
    "body": "Changed commit from **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**",
    "created_at": "2017-12-30T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372650",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2346617](https://github.com/sagemath/sagetrac-mirror/commit/234661711ef519723bc5fe252941c0fed2e9b577)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**



---

archive/issue_comments_372651.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nWonderful, thank you!",
    "created_at": "2017-12-30T07:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372651",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">Comment 8</div>

Wonderful, thank you!



---

archive/issue_events_320568.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-30T07:36:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320568"
}
```



---

archive/issue_events_320569.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-12-30T07:36:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320569"
}
```



---

archive/issue_comments_372652.json:
```json
{
    "body": "Changed branch from **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**",
    "created_at": "2017-12-31T09:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24434#issuecomment-372652",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/faster_reduced_words](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/faster_reduced_words)** to **[bed22ef](https://github.com/sagemath/sagetrac-mirror/commit/bed22efa99dfbfdf508449f41d81b6633afaa7e3)**



---

archive/issue_events_320570.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-31T09:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320570"
}
```



---

archive/issue_events_320571.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4e3f251a475e7ee7a33616fd1596b4fcf5aa3c4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-31T09:28:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24434",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24434#event-320571"
}
```
