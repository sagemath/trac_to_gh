# Issue 24646: Add support for staged installations in packages that use sdh_pip_install

archive/issues_024409.json:
```json
{
    "body": "This implements #22509 for any Python packages that are installed with `sdh_pip_install`.  Passing `--root=` to pip is essentially the same as using `DESTDIR` with `make install`.\n\nThis required a few additional changes to a small handful of packages for them to work with staged installation.\n\nBranch/Commit: ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d\n\nReviewer: Julian R\u00fcth\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24646\n\n",
    "closed_at": "2018-08-05T08:43:12Z",
    "created_at": "2018-02-02T13:50:25Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Add support for staged installations in packages that use sdh_pip_install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24646",
    "user": "https://github.com/embray"
}
```
This implements #22509 for any Python packages that are installed with `sdh_pip_install`.  Passing `--root=` to pip is essentially the same as using `DESTDIR` with `make install`.

This required a few additional changes to a small handful of packages for them to work with staged installation.

Branch/Commit: ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d

Reviewer: Julian Rüth

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24646





---

archive/issue_comments_467256.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-02T13:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467256",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_467257.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-26T11:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467258.json:
```json
{
    "body": "Changing commit from \"efecbb56eb5e9743f63e0b24a639ae4edddf5c8b\" to \"fcd6e5d28644c3f24b01d719b6c422e251701c56\"",
    "created_at": "2018-03-26T11:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "efecbb56eb5e9743f63e0b24a639ae4edddf5c8b" to "fcd6e5d28644c3f24b01d719b6c422e251701c56"



---

archive/issue_comments_467259.json:
```json
{
    "body": "Changing commit from \"fcd6e5d28644c3f24b01d719b6c422e251701c56\" to \"fd1719e051417e956af06a6fe4e51a09171dd366\"",
    "created_at": "2018-03-26T11:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fcd6e5d28644c3f24b01d719b6c422e251701c56" to "fd1719e051417e956af06a6fe4e51a09171dd366"



---

archive/issue_comments_467260.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-26T11:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_062062.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24646#event-62062"
}
```



---

archive/issue_comments_467261.json:
```json
{
    "body": "<a id='comment:5'></a>merge failure on 8.3.b0",
    "created_at": "2018-05-12T19:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467261",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>merge failure on 8.3.b0



---

archive/issue_comments_467262.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-12T19:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467262",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467263.json:
```json
{
    "body": "Changing commit from \"fd1719e051417e956af06a6fe4e51a09171dd366\" to \"d03844b7b3897d837b5370c3e972900cbacc966b\"",
    "created_at": "2018-05-14T15:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fd1719e051417e956af06a6fe4e51a09171dd366" to "d03844b7b3897d837b5370c3e972900cbacc966b"



---

archive/issue_comments_467264.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-14T15:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467265.json:
```json
{
    "body": "<a id='comment:7'></a>Rebased since its dependency #24645 has been satisfied.",
    "created_at": "2018-05-14T15:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467265",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Rebased since its dependency #24645 has been satisfied.



---

archive/issue_comments_467266.json:
```json
{
    "body": "Changing dependencies from \"#24645\" to \"\"",
    "created_at": "2018-05-14T15:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467266",
    "user": "https://github.com/embray"
}
```

Changing dependencies from "#24645" to ""



---

archive/issue_comments_467267.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-14T15:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467267",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_467268.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-15T14:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467268",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467269.json:
```json
{
    "body": "<a id='comment:8'></a>What's up with `build/pkgs/widgetsnbextension/spkg-postinst`? That should just be removed.",
    "created_at": "2018-05-15T14:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467269",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>What's up with `build/pkgs/widgetsnbextension/spkg-postinst`? That should just be removed.



---

archive/issue_comments_467270.json:
```json
{
    "body": "<a id='comment:9'></a>For `sagenb`, why not keep\n\n```\nif [ ! -d mathjax ]; then\n    echo >&2 \"Error: Cannot symlink mathjax into the SageNB data directory.\"\n    exit 1\nfi\n```\nIt seems like a useful sanity check.",
    "created_at": "2018-05-15T14:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467270",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>For `sagenb`, why not keep

```
if [ ! -d mathjax ]; then
    echo >&2 "Error: Cannot symlink mathjax into the SageNB data directory."
    exit 1
fi
```
It seems like a useful sanity check.



---

archive/issue_comments_467271.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [jdemeyer](#comment%3A8):\n> What's up with `build/pkgs/widgetsnbextension/spkg-postinst`?\n\n\nLet me check whether or not that was intended to be in this branch.\n\n> That should just be removed.\n\n\nI don't see how you can assert that without knowing what it is.",
    "created_at": "2018-05-15T14:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467271",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>Replying to [jdemeyer](#comment%3A8):
> What's up with `build/pkgs/widgetsnbextension/spkg-postinst`?


Let me check whether or not that was intended to be in this branch.

> That should just be removed.


I don't see how you can assert that without knowing what it is.



---

archive/issue_comments_467272.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [jdemeyer](#comment%3A9):\n> For `sagenb`, why not keep\n\n\nYou can see just above that it checks that the directory being symlinked exists before making the symlink.",
    "created_at": "2018-05-15T15:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467272",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>Replying to [jdemeyer](#comment%3A9):
> For `sagenb`, why not keep


You can see just above that it checks that the directory being symlinked exists before making the symlink.



---

archive/issue_comments_467273.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [embray](#comment%3A11):\n> You can see just above that it checks that the directory being symlinked exists before making the symlink.\n\n\nIt's not at all obvious to me that the check *before* is equivalent to the `ln -s` succeeding. The check after is simpler and therefore safer.",
    "created_at": "2018-05-15T15:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467273",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [embray](#comment%3A11):
> You can see just above that it checks that the directory being symlinked exists before making the symlink.


It's not at all obvious to me that the check *before* is equivalent to the `ln -s` succeeding. The check after is simpler and therefore safer.



---

archive/issue_comments_467274.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [embray](#comment%3A10):\n> I don't see how you can assert that without knowing what it is.\n\n\nI know what it is because I wrote the original. The code which is in that `spkg-postinst` script used to be in `spkg-install` but it's no longer needed because of Jupyter improvements. At some point, you must have had a merge/rebase conflict with `spkg-install` and this left-over `spkg-postinst` script is fallout from that.",
    "created_at": "2018-05-15T15:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467274",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [embray](#comment%3A10):
> I don't see how you can assert that without knowing what it is.


I know what it is because I wrote the original. The code which is in that `spkg-postinst` script used to be in `spkg-install` but it's no longer needed because of Jupyter improvements. At some point, you must have had a merge/rebase conflict with `spkg-install` and this left-over `spkg-postinst` script is fallout from that.



---

archive/issue_comments_467275.json:
```json
{
    "body": "<a id='comment:14'></a>I see, you even removed the `jupyter nbextension` call a while ago (but probably after I first wrote this).  I believe you then, that it's no longer needed.",
    "created_at": "2018-05-15T16:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467275",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>I see, you even removed the `jupyter nbextension` call a while ago (but probably after I first wrote this).  I believe you then, that it's no longer needed.



---

archive/issue_comments_467276.json:
```json
{
    "body": "Changing commit from \"d03844b7b3897d837b5370c3e972900cbacc966b\" to \"00bd3f3814f22b5d43c8402821f3df893ac380b9\"",
    "created_at": "2018-05-16T09:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d03844b7b3897d837b5370c3e972900cbacc966b" to "00bd3f3814f22b5d43c8402821f3df893ac380b9"



---

archive/issue_comments_467277.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-16T09:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467278.json:
```json
{
    "body": "<a id='comment:16'></a>Ok, I dropped the `spkg-postinst` for `widgetsnbextension` and updated the sagenb install.  I think this is better now.",
    "created_at": "2018-05-16T09:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467278",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>Ok, I dropped the `spkg-postinst` for `widgetsnbextension` and updated the sagenb install.  I think this is better now.



---

archive/issue_comments_467279.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-16T09:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467279",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_467280.json:
```json
{
    "body": "<a id='comment:17'></a>For `sagenb`, you still removed the check for a working symlink. Why?",
    "created_at": "2018-05-16T10:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467280",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>For `sagenb`, you still removed the check for a working symlink. Why?



---

archive/issue_comments_467281.json:
```json
{
    "body": "<a id='comment:18'></a>The symlink wouldn't resolve because this is being installed in DESTDIR.",
    "created_at": "2018-05-16T12:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467281",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>The symlink wouldn't resolve because this is being installed in DESTDIR.



---

archive/issue_comments_467282.json:
```json
{
    "body": "<a id='comment:19'></a>The changes to Sphinx conflict with #24935. It is possible to just revert those?",
    "created_at": "2018-05-16T15:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467282",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>The changes to Sphinx conflict with #24935. It is possible to just revert those?



---

archive/issue_comments_467283.json:
```json
{
    "body": "<a id='comment:20'></a>Unfortunately they're necessary for the package to install correctly.  You could merge this into #24935.",
    "created_at": "2018-05-16T15:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467283",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>Unfortunately they're necessary for the package to install correctly.  You could merge this into #24935.



---

archive/issue_comments_467284.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-01T23:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467284",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467285.json:
```json
{
    "body": "<a id='comment:21'></a>there are merge conflicts",
    "created_at": "2018-06-01T23:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467285",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>there are merge conflicts



---

archive/issue_comments_467286.json:
```json
{
    "body": "Changing commit from \"00bd3f3814f22b5d43c8402821f3df893ac380b9\" to \"208d754a61850cccb34b6a27afc3553fa7dc3bbb\"",
    "created_at": "2018-06-02T15:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "00bd3f3814f22b5d43c8402821f3df893ac380b9" to "208d754a61850cccb34b6a27afc3553fa7dc3bbb"



---

archive/issue_comments_467287.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-02T15:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467288.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-02T15:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467288",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_467289.json:
```json
{
    "body": "<a id='comment:23'></a>I'm surprised this hasn't been merged yet.  It really ought to be.",
    "created_at": "2018-06-02T15:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467289",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>I'm surprised this hasn't been merged yet.  It really ought to be.



---

archive/issue_comments_467290.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge conflicts\"",
    "created_at": "2018-07-04T16:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467290",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "merge conflicts"



---

archive/issue_comments_467291.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-07-10T16:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467292.json:
```json
{
    "body": "Changing commit from \"208d754a61850cccb34b6a27afc3553fa7dc3bbb\" to \"449a6a29ff85becfefa9b915a9aa0e56a3ea409f\"",
    "created_at": "2018-07-10T16:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "208d754a61850cccb34b6a27afc3553fa7dc3bbb" to "449a6a29ff85becfefa9b915a9aa0e56a3ea409f"



---

archive/issue_comments_467293.json:
```json
{
    "body": "<a id='comment:26'></a>Here we go again...",
    "created_at": "2018-07-10T16:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467293",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>Here we go again...



---

archive/issue_comments_467294.json:
```json
{
    "body": "Changing work_issues from \"merge conflicts\" to \"\"",
    "created_at": "2018-07-10T16:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467294",
    "user": "https://github.com/embray"
}
```

Changing work_issues from "merge conflicts" to ""



---

archive/issue_comments_467295.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-11T13:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467295",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_467296.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2018-07-11T13:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467296",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rüth"



---

archive/issue_comments_467297.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-15T09:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467297",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_467298.json:
```json
{
    "body": "<a id='comment:29'></a>See patchbot",
    "created_at": "2018-07-15T09:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467298",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>See patchbot



---

archive/issue_comments_467299.json:
```json
{
    "body": "<a id='comment:30'></a>Apparently I had asked Jeroen to make this a prerequisite to #24935 (after all, this ticket was opened first and had no reason to wait so long to be merged).  But he forgot about that or ignored it (and I likewise forgot about it).",
    "created_at": "2018-07-16T10:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467299",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>Apparently I had asked Jeroen to make this a prerequisite to #24935 (after all, this ticket was opened first and had no reason to wait so long to be merged).  But he forgot about that or ignored it (and I likewise forgot about it).



---

archive/issue_comments_467300.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-07-16T10:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467301.json:
```json
{
    "body": "Changing commit from \"449a6a29ff85becfefa9b915a9aa0e56a3ea409f\" to \"4d2050677eb89a12bd864f100b601ea3dc586887\"",
    "created_at": "2018-07-16T10:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "449a6a29ff85becfefa9b915a9aa0e56a3ea409f" to "4d2050677eb89a12bd864f100b601ea3dc586887"



---

archive/issue_comments_467302.json:
```json
{
    "body": "<a id='comment:32'></a>The `spkg-postinst` for Sphinx was simply no longer necessary so I removed it.",
    "created_at": "2018-07-16T10:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467302",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'></a>The `spkg-postinst` for Sphinx was simply no longer necessary so I removed it.



---

archive/issue_comments_467303.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-07-16T10:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467303",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_467304.json:
```json
{
    "body": "<a id='comment:33'></a>I believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467304",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_events_062063.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24646#event-62063"
}
```



---

archive/issue_events_062064.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24646#event-62064"
}
```



---

archive/issue_comments_467305.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-07-30T08:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467305",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_467306.json:
```json
{
    "body": "<a id='comment:34'></a>You obviously didn't try to build Sage with the ticket\n\n```\nNo record that 'sagenb' was ever installed; skipping uninstall\n./spkg-install: line 33: syntax error near unexpected token `fi'\n./spkg-install: line 33: `fi'\n```",
    "created_at": "2018-07-30T08:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467306",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>You obviously didn't try to build Sage with the ticket

```
No record that 'sagenb' was ever installed; skipping uninstall
./spkg-install: line 33: syntax error near unexpected token `fi'
./spkg-install: line 33: `fi'
```



---

archive/issue_comments_467307.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [vbraun](#comment%3A34):\n> You obviously didn't try to build Sage with the ticket\n\n\nThat's a bit flippant.  Of course I built Sage with this ticket.  It's been opened for 6 months and has had to be rebased many times.  Perhaps there was a small merge error along the way.  But that's not as if it was never tested...",
    "created_at": "2018-07-30T16:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467307",
    "user": "https://github.com/embray"
}
```

<a id='comment:35'></a>Replying to [vbraun](#comment%3A34):
> You obviously didn't try to build Sage with the ticket


That's a bit flippant.  Of course I built Sage with this ticket.  It's been opened for 6 months and has had to be rebased many times.  Perhaps there was a small merge error along the way.  But that's not as if it was never tested...



---

archive/issue_comments_467308.json:
```json
{
    "body": "<a id='comment:36'></a>Also, the ticket doesn't bump the package versions of the affected packages, so you would only see the issue if rebuilding from scratch.  The \"obviously\" is pretty unnecessary.",
    "created_at": "2018-07-30T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467308",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>Also, the ticket doesn't bump the package versions of the affected packages, so you would only see the issue if rebuilding from scratch.  The "obviously" is pretty unnecessary.



---

archive/issue_comments_467309.json:
```json
{
    "body": "Changing commit from \"4d2050677eb89a12bd864f100b601ea3dc586887\" to \"ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d\"",
    "created_at": "2018-07-30T16:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467309",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4d2050677eb89a12bd864f100b601ea3dc586887" to "ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d"



---

archive/issue_comments_467310.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-07-30T16:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_467311.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-07-30T16:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467311",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_467312.json:
```json
{
    "body": "<a id='comment:38'></a>New commits:",
    "created_at": "2018-07-30T16:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467312",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>New commits:



---

archive/issue_events_062065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:43:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24646#event-62065"
}
```



---

archive/issue_comments_467313.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467313",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_467314.json:
```json
{
    "body": "Changing branch from \"u/embray/build/destdir-pip\" to \"ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d\"",
    "created_at": "2018-08-05T08:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24646#issuecomment-467314",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/build/destdir-pip" to "ff1ccd3c132a4bd27a36a1c56ecaf171ad3b7a5d"
