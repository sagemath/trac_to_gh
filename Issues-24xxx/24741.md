# Issue 24741: py3: numerous additional fixes for sage.numerical

archive/issues_024504.json:
```json
{
    "body": "\n\n**Assignee:** @embray\n\n**Branch/Commit:** [2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)\n\n**Reviewer:** David Coudert, Travis Scrimshaw\n\n**Author:** Erik Bray\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24741\n\n",
    "closed_at": "2019-03-06T20:46:01Z",
    "created_at": "2018-02-15T14:59:56Z",
    "labels": [
        "component: python3",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "py3: numerous additional fixes for sage.numerical",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24741",
    "user": "https://github.com/embray"
}
```


**Assignee:** @embray

**Branch/Commit:** [2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)

**Reviewer:** David Coudert, Travis Scrimshaw

**Author:** Erik Bray

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/24741





---

archive/issue_comments_472116.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f08fb452108ef1c83eb9f0932d3014df44793350\">f08fb45</a></td><td><code>py3: numerous string encode/decode fixes for sage.numerical.backends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9db2b1235c226d6fb141f74abbff9f0071b6f5be\">9db2b12</a></td><td><code>Change the add_col method of backends to accept any iterable instead of strictly list.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b735bf3afe18ab2783d113054eb292c7a5f1e0a\">0b735bf</a></td><td><code>Python 3 fixes for the LoggingBackend</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49846eda2ce2d9e80a1248c2b8f5ce5cdca3d116\">49846ed</a></td><td><code>Support for tuple unpacking in function signatures was removed in Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14f355bcf1b25e166bd5ea90f56182a9519487a4\">14f355b</a></td><td><code>py3: miscellaneous minor Python 3 fixes and other cleanup, fixing all the tests for this package on Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806\">3cbd09c</a></td><td><code>For some reason this deprecation warning is shown on Python 2 but not on Python 3</code></td></tr></table>\n",
    "created_at": "2018-02-15T15:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472116",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f08fb452108ef1c83eb9f0932d3014df44793350">f08fb45</a></td><td><code>py3: numerous string encode/decode fixes for sage.numerical.backends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9db2b1235c226d6fb141f74abbff9f0071b6f5be">9db2b12</a></td><td><code>Change the add_col method of backends to accept any iterable instead of strictly list.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b735bf3afe18ab2783d113054eb292c7a5f1e0a">0b735bf</a></td><td><code>Python 3 fixes for the LoggingBackend</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49846eda2ce2d9e80a1248c2b8f5ce5cdca3d116">49846ed</a></td><td><code>Support for tuple unpacking in function signatures was removed in Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14f355bcf1b25e166bd5ea90f56182a9519487a4">14f355b</a></td><td><code>py3: miscellaneous minor Python 3 fixes and other cleanup, fixing all the tests for this package on Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806">3cbd09c</a></td><td><code>For some reason this deprecation warning is shown on Python 2 but not on Python 3</code></td></tr></table>




---

archive/issue_comments_472117.json:
```json
{
    "body": "**Changing branch** from \"[+u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/+u/embray/python3/sage-numerical-backends/misc)\" to \"[u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-numerical-backends/misc)\".",
    "created_at": "2018-02-15T15:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472117",
    "user": "https://github.com/embray"
}
```

**Changing branch** from "[+u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/+u/embray/python3/sage-numerical-backends/misc)" to "[u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-numerical-backends/misc)".



---

archive/issue_comments_472118.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-02-15T15:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472118",
    "user": "https://github.com/embray"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_472119.json:
```json
{
    "body": "**Commit:** [3cbd09c3640c85970c8066b70ab7f4b7e7442806](https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806)",
    "created_at": "2018-02-15T15:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472119",
    "user": "https://github.com/embray"
}
```

**Commit:** [3cbd09c3640c85970c8066b70ab7f4b7e7442806](https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806)



---

archive/issue_events_070786.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70786"
}
```



---

archive/issue_events_070787.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70787"
}
```



---

archive/issue_events_070788.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70788"
}
```



---

archive/issue_comments_472120.json:
```json
{
    "body": "<a id='comment:3'></a>\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472120",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_comments_472121.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-09-05T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472121",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_472122.json:
```json
{
    "body": "<a id='comment:4'></a>\nbranch is red",
    "created_at": "2018-09-05T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472122",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
branch is red



---

archive/issue_events_070789.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70789"
}
```



---

archive/issue_events_070790.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:41:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70790"
}
```



---

archive/issue_comments_472123.json:
```json
{
    "body": "<a id='comment:6'></a>\nRetargeting some of my tickets (somewhat optimistically for now).",
    "created_at": "2018-12-28T14:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472123",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Retargeting some of my tickets (somewhat optimistically for now).



---

archive/issue_events_070791.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70791"
}
```



---

archive/issue_events_070792.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-28T14:10:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70792"
}
```



---

archive/issue_comments_472124.json:
```json
{
    "body": "<a id='comment:7'></a>\nred branch",
    "created_at": "2018-12-28T20:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472124",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
red branch



---

archive/issue_comments_472125.json:
```json
{
    "body": "**Changing dependencies** from \"#24740\" to \"\".",
    "created_at": "2019-02-24T12:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472125",
    "user": "https://github.com/fchapoton"
}
```

**Changing dependencies** from "#24740" to "".



---

archive/issue_comments_472126.json:
```json
{
    "body": "<a id='comment:8'></a>\nstill red",
    "created_at": "2019-02-24T12:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472126",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
still red



---

archive/issue_comments_472127.json:
```json
{
    "body": "<a id='comment:9'></a>\nThis branch is such a mess now.  I think a lot of the things in it were already fixed.  I'm trying to figure it out...",
    "created_at": "2019-02-25T16:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472127",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
This branch is such a mess now.  I think a lot of the things in it were already fixed.  I'm trying to figure it out...



---

archive/issue_comments_472128.json:
```json
{
    "body": "<a id='comment:10'></a>\nyes, indeed. That's why I did not manage to merge or rebase it myself..",
    "created_at": "2019-02-25T16:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472128",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
yes, indeed. That's why I did not manage to merge or rebase it myself..



---

archive/issue_comments_472129.json:
```json
{
    "body": "<a id='comment:11'></a>\nOkay, I'm working on it.  From what I can tell there are still a handful of fixes in here that haven't made it into the mainline yet.",
    "created_at": "2019-02-27T16:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472129",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
Okay, I'm working on it.  From what I can tell there are still a handful of fixes in here that haven't made it into the mainline yet.



---

archive/issue_comments_472130.json:
```json
{
    "body": "**Set assignee** to @embray.",
    "created_at": "2019-02-27T16:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472130",
    "user": "https://github.com/embray"
}
```

**Set assignee** to @embray.



---

archive/issue_comments_472131.json:
```json
{
    "body": "**Changing commit** from \"[3cbd09c3640c85970c8066b70ab7f4b7e7442806](https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806)\" to \"[51b38909b8484c7611260dee32b4abe5316ef5af](https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af)\".",
    "created_at": "2019-02-27T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3cbd09c3640c85970c8066b70ab7f4b7e7442806](https://github.com/sagemath/sagetrac-mirror/commit/3cbd09c3640c85970c8066b70ab7f4b7e7442806)" to "[51b38909b8484c7611260dee32b4abe5316ef5af](https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af)".



---

archive/issue_comments_472132.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af\">51b3890</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>\n",
    "created_at": "2019-02-27T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af">51b3890</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>




---

archive/issue_comments_472133.json:
```json
{
    "body": "**Changing commit** from \"[51b38909b8484c7611260dee32b4abe5316ef5af](https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af)\" to \"[bbfc308629fa0b7424ea52df136a928580f3488b](https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b)\".",
    "created_at": "2019-02-27T17:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[51b38909b8484c7611260dee32b4abe5316ef5af](https://github.com/sagemath/sagetrac-mirror/commit/51b38909b8484c7611260dee32b4abe5316ef5af)" to "[bbfc308629fa0b7424ea52df136a928580f3488b](https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b)".



---

archive/issue_comments_472134.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b\">bbfc308</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>\n",
    "created_at": "2019-02-27T17:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b">bbfc308</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>




---

archive/issue_comments_472135.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2019-02-27T17:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472135",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_472136.json:
```json
{
    "body": "<a id='comment:14'></a>\nI think this is fine now.  With this, the only failures I'm seeing in `sage.numerical` are due to `__round__`.",
    "created_at": "2019-02-27T17:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472136",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
I think this is fine now.  With this, the only failures I'm seeing in `sage.numerical` are due to `__round__`.



---

archive/issue_comments_472137.json:
```json
{
    "body": "<a id='comment:15'></a>\n* some changes will likely conflict with #27342 (sorry for the lack of coordination)\n\n* I am worried about the changes in `src/sage/numerical/backends/cvxopt_backend.pyx`,\nbecause we iterate twice over the input, and this will fail if it is an iterator..",
    "created_at": "2019-02-27T19:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472137",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
* some changes will likely conflict with #27342 (sorry for the lack of coordination)

* I am worried about the changes in `src/sage/numerical/backends/cvxopt_backend.pyx`,
because we iterate twice over the input, and this will fail if it is an iterator..



---

archive/issue_comments_472138.json:
```json
{
    "body": "<a id='comment:16'></a>\nIt could check if it's not already a `list` and just wrap it in `list` if not.  That would be superfluous for other sized sequences but there's no better way to deal with that case without #26769, which I still contend is useful.",
    "created_at": "2019-02-28T13:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472138",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
It could check if it's not already a `list` and just wrap it in `list` if not.  That would be superfluous for other sized sequences but there's no better way to deal with that case without #26769, which I still contend is useful.



---

archive/issue_comments_472139.json:
```json
{
    "body": "<a id='comment:17'></a>\nAlso if that's definitely a problem it's not caught be any tests.  Why don't you see if it actually does break, and if so a regression test should be added.",
    "created_at": "2019-02-28T13:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472139",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Also if that's definitely a problem it's not caught be any tests.  Why don't you see if it actually does break, and if so a regression test should be added.



---

archive/issue_comments_472140.json:
```json
{
    "body": "<a id='comment:18'></a>\nok, then. Let us keep this question about `list` for somewhere else.\n\nWhat about the conflict with #27342 ?",
    "created_at": "2019-02-28T15:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472140",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>
ok, then. Let us keep this question about `list` for somewhere else.

What about the conflict with #27342 ?



---

archive/issue_comments_472141.json:
```json
{
    "body": "<a id='comment:19'></a>\n- why using `if type(indices) is not list:` instead of `if not isinstance(indices, list):` ?\n\n- in `src/sage/numerical/interactive_simplex_method.py`\n\n```diff\n-        names.extend([str(s) for s in self.x()])\n+        names.extend(str(s) for s in self.x())\n```\n\notherwise, LGTM",
    "created_at": "2019-02-28T16:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472141",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
- why using `if type(indices) is not list:` instead of `if not isinstance(indices, list):` ?

- in `src/sage/numerical/interactive_simplex_method.py`

```diff
-        names.extend([str(s) for s in self.x()])
+        names.extend(str(s) for s in self.x())
```

otherwise, LGTM



---

archive/issue_comments_472142.json:
```json
{
    "body": "<a id='comment:20'></a>\nWe want to convert these inputs explicitly to `PyListType`-typed objects so that Cython can generate efficient code to loop over them.  This is why the previous code explicitly typed those arguments as `list`.  This does effectively the same thing but allows the arguments to be iterables of other types, and then convert them to `list`.",
    "created_at": "2019-02-28T17:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472142",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>
We want to convert these inputs explicitly to `PyListType`-typed objects so that Cython can generate efficient code to loop over them.  This is why the previous code explicitly typed those arguments as `list`.  This does effectively the same thing but allows the arguments to be iterables of other types, and then convert them to `list`.



---

archive/issue_comments_472143.json:
```json
{
    "body": "<a id='comment:21'></a>\nI perfectly understood that you now allow to give an iterable as input, and that it is important to cast to `PyListType`.\n\nWhat I don't understand is the use of `type(indices) is not list` instead of `isinstance(indices, list)`. Is this a more efficient formulation in Cython or just a stylistic preference ?",
    "created_at": "2019-02-28T17:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472143",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
I perfectly understood that you now allow to give an iterable as input, and that it is important to cast to `PyListType`.

What I don't understand is the use of `type(indices) is not list` instead of `isinstance(indices, list)`. Is this a more efficient formulation in Cython or just a stylistic preference ?



---

archive/issue_comments_472144.json:
```json
{
    "body": "<a id='comment:22'></a>\nYes, if you want to check an *exact* type using `type(foo) is bar` is orders of magnitude faster, because it's just a pointer comparison.\n\n`isinstance(...)` is a much more complex beast that needs to be able to support things like subclasses as well as `__instancecheck_` and `__subclasscheck__`.  So it's better, especially in Cython code, to do exact type comparisons when that's all you need in a particular case.",
    "created_at": "2019-03-01T11:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472144",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
Yes, if you want to check an *exact* type using `type(foo) is bar` is orders of magnitude faster, because it's just a pointer comparison.

`isinstance(...)` is a much more complex beast that needs to be able to support things like subclasses as well as `__instancecheck_` and `__subclasscheck__`.  So it's better, especially in Cython code, to do exact type comparisons when that's all you need in a particular case.



---

archive/issue_comments_472145.json:
```json
{
    "body": "<a id='comment:23'></a>\nThanks for the explanation. It's good to know.\n\nThe remaining issues with py3 are due to `__round__`, and there is this possible minor improvement #comment:19 for `names.extend`.",
    "created_at": "2019-03-01T12:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472145",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>
Thanks for the explanation. It's good to know.

The remaining issues with py3 are due to `__round__`, and there is this possible minor improvement #comment:19 for `names.extend`.



---

archive/issue_comments_472146.json:
```json
{
    "body": "<a id='comment:24'></a>\nHmm, not that it really matters much here either way but I'm not sure[comment:19](#comment%3A19) is necessarily much of an improvement.  In most cases I do advocate for generator expressions, but for small collections there's actually more overhead in terms of setting up the generator object and iterating over it than it's worth.  For example:\n\n```\nIn [1]: x = list(range(4))\n\nIn [2]: %%timeit\n   ...: names = []\n   ...: names.extend(str(_) for _ in x)\n   ...:\n100000 loops, best of 3: 2.19 \u00b5s per loop\n\nIn [3]: %%timeit\n   ...: names = []\n   ...: names.extend([str(_) for _ in x])\n   ...:\n1000000 loops, best of 3: 1.48 \u00b5s per loop\n```\n\nYou can also see in the [list.extend](https://github.com/python/cpython/blob/69b4a17f342146d6b7a73975a37678db9916aa75/Objects/listobject.c#L799) implementation that it has a more optimized code path for the case where it's given a list or tuple and can use the `PySequence_Fast` API, as opposed to the more generic path of having to guess what the new size of the list will be (using `__length_hint__` if there is one) and slowly iterate over the iterable.\n\nOf course that's all implementation detail and there's no guarantee in the language that this should be faster.  By rights the generator expression should be \"better\" but in practice it isn't, at least for small lists.",
    "created_at": "2019-03-01T13:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472146",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'></a>
Hmm, not that it really matters much here either way but I'm not sure[comment:19](#comment%3A19) is necessarily much of an improvement.  In most cases I do advocate for generator expressions, but for small collections there's actually more overhead in terms of setting up the generator object and iterating over it than it's worth.  For example:

```
In [1]: x = list(range(4))

In [2]: %%timeit
   ...: names = []
   ...: names.extend(str(_) for _ in x)
   ...:
100000 loops, best of 3: 2.19 µs per loop

In [3]: %%timeit
   ...: names = []
   ...: names.extend([str(_) for _ in x])
   ...:
1000000 loops, best of 3: 1.48 µs per loop
```

You can also see in the [list.extend](https://github.com/python/cpython/blob/69b4a17f342146d6b7a73975a37678db9916aa75/Objects/listobject.c#L799) implementation that it has a more optimized code path for the case where it's given a list or tuple and can use the `PySequence_Fast` API, as opposed to the more generic path of having to guess what the new size of the list will be (using `__length_hint__` if there is one) and slowly iterate over the iterable.

Of course that's all implementation detail and there's no guarantee in the language that this should be faster.  By rights the generator expression should be "better" but in practice it isn't, at least for small lists.



---

archive/issue_comments_472147.json:
```json
{
    "body": "<a id='comment:25'></a>\nThank you very much for this detailed explanation. Then I agree that current formulation is good.\n\nTo avoid merge conflict with #27342, you should revert some changes\n- `linear_functions.pyx` (same done in #27342)\n- `mip.pyx`: \n\n```diff\n-            sage: x_sol.keys()\n+            sage: sorted(x_sol)\n```",
    "created_at": "2019-03-01T13:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472147",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>
Thank you very much for this detailed explanation. Then I agree that current formulation is good.

To avoid merge conflict with #27342, you should revert some changes
- `linear_functions.pyx` (same done in #27342)
- `mip.pyx`: 

```diff
-            sage: x_sol.keys()
+            sage: sorted(x_sol)
```



---

archive/issue_comments_472148.json:
```json
{
    "body": "**Reviewer:** David Coudert",
    "created_at": "2019-03-01T13:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472148",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** David Coudert



---

archive/issue_comments_472149.json:
```json
{
    "body": "<a id='comment:26'></a>\nThanks for reminding me. Yes, I'll just rebase this on top of #27342.",
    "created_at": "2019-03-01T14:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472149",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
Thanks for reminding me. Yes, I'll just rebase this on top of #27342.



---

archive/issue_comments_472150.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2019-03-01T14:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472150",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_472151.json:
```json
{
    "body": "<a id='comment:27'></a>\nred branch, as expected",
    "created_at": "2019-03-03T11:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472151",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
red branch, as expected



---

archive/issue_comments_472152.json:
```json
{
    "body": "<a id='comment:28'></a>\nAll the better then.",
    "created_at": "2019-03-05T16:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472152",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
All the better then.



---

archive/issue_comments_472153.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee\">2ebacb6</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>\n",
    "created_at": "2019-03-05T17:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee">2ebacb6</a></td><td><code>Trac #24741: py3: miscellaneous minor fixes, mostly to sage.numerical backends</code></td></tr></table>




---

archive/issue_comments_472154.json:
```json
{
    "body": "**Changing commit** from \"[bbfc308629fa0b7424ea52df136a928580f3488b](https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b)\" to \"[2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)\".",
    "created_at": "2019-03-05T17:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bbfc308629fa0b7424ea52df136a928580f3488b](https://github.com/sagemath/sagetrac-mirror/commit/bbfc308629fa0b7424ea52df136a928580f3488b)" to "[2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)".



---

archive/issue_comments_472155.json:
```json
{
    "body": "<a id='comment:30'></a>\nI think this is still good, though I did not test on Python 3.",
    "created_at": "2019-03-05T17:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472155",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>
I think this is still good, though I did not test on Python 3.



---

archive/issue_comments_472156.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2019-03-05T17:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472156",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_472157.json:
```json
{
    "body": "<a id='comment:31'></a>\nWith this branch on Python3, I go from\n\n```\nsage -t src/sage/numerical/mip.pyx  # 1 doctest failed\nsage -t src/sage/numerical/backends/cvxopt_sdp_backend.pyx  # 6 doctests failed\nsage -t src/sage/numerical/sdp.pyx  # 10 doctests failed\nsage -t src/sage/numerical/backends/cvxopt_backend.pyx  # 9 doctests failed\nsage -t src/sage/numerical/backends/glpk_backend.pyx  # Killed due to abort\n```\nto\n\n```\nsage -t src/sage/numerical/backends/cvxopt_backend.pyx  # 8 doctests failed\nsage -t src/sage/numerical/backends/cvxopt_sdp_backend.pyx  # 5 doctests failed\nsage -t src/sage/numerical/sdp.pyx  # 8 doctests failed\n```\nwhich all look like `round`-type failures",
    "created_at": "2019-03-05T22:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472157",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'></a>
With this branch on Python3, I go from

```
sage -t src/sage/numerical/mip.pyx  # 1 doctest failed
sage -t src/sage/numerical/backends/cvxopt_sdp_backend.pyx  # 6 doctests failed
sage -t src/sage/numerical/sdp.pyx  # 10 doctests failed
sage -t src/sage/numerical/backends/cvxopt_backend.pyx  # 9 doctests failed
sage -t src/sage/numerical/backends/glpk_backend.pyx  # Killed due to abort
```
to

```
sage -t src/sage/numerical/backends/cvxopt_backend.pyx  # 8 doctests failed
sage -t src/sage/numerical/backends/cvxopt_sdp_backend.pyx  # 5 doctests failed
sage -t src/sage/numerical/sdp.pyx  # 8 doctests failed
```
which all look like `round`-type failures



---

archive/issue_comments_472158.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-03-05T22:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472158",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_472159.json:
```json
{
    "body": "**Changing reviewer** from \"David Coudert\" to \"David Coudert, Travis Scrimshaw\".",
    "created_at": "2019-03-05T22:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472159",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "David Coudert" to "David Coudert, Travis Scrimshaw".



---

archive/issue_comments_472160.json:
```json
{
    "body": "<a id='comment:32'></a>\nSame for me. Good to go.",
    "created_at": "2019-03-06T07:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472160",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>
Same for me. Good to go.



---

archive/issue_comments_472161.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-03-06T20:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472161",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_472162.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-numerical-backends/misc)\" to \"[2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)\".",
    "created_at": "2019-03-06T20:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24741#issuecomment-472162",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/python3/sage-numerical-backends/misc](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-numerical-backends/misc)" to "[2ebacb66f40bf6f3b475684c81a3c749cb1daeee](https://github.com/sagemath/sagetrac-mirror/commit/2ebacb66f40bf6f3b475684c81a3c749cb1daeee)".



---

archive/issue_events_070793.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-06T20:46:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24741",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24741#event-70793"
}
```
