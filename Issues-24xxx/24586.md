# Issue 24586: packages whose type is "script" must have executable spkg-install

archive/issues_024349.json:
```json
{
    "body": "It is all in the title. Fixed for `r_jupyter` in #24585, `pyopenssl` is OK, `texlive` remains:\n\n```\nsage -i texlive\n\n[...]\n\ncd '/opt/sagemath/sage-source' && \\\n    source '/opt/sagemath/sage-source/src/bin/sage-env' && \\\n    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/texlive/spkg-install' /opt/sagemath/sage-source/logs/pkgs/texlive.log\n[texlive] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/texlive/spkg-install: Permission denied\nMakefile:2984: recipe for target 'texlive' failed\n```\n\n\nCC:  @embray\n\nReviewer: Jeroen Demeyer\n\nAuthor: Thierry Monteil\n\nBranch: 81352f59f223c1dd48e6c85e4b413baaed4a972e\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24586\n\n",
    "closed_at": "2018-01-27T15:59:41Z",
    "created_at": "2018-01-22T23:24:20Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "packages whose type is \"script\" must have executable spkg-install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24586",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
It is all in the title. Fixed for `r_jupyter` in #24585, `pyopenssl` is OK, `texlive` remains:

```
sage -i texlive

[...]

cd '/opt/sagemath/sage-source' && \
    source '/opt/sagemath/sage-source/src/bin/sage-env' && \
    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/texlive/spkg-install' /opt/sagemath/sage-source/logs/pkgs/texlive.log
[texlive] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/texlive/spkg-install: Permission denied
Makefile:2984: recipe for target 'texlive' failed
```


CC:  @embray

Reviewer: Jeroen Demeyer

Author: Thierry Monteil

Branch: 81352f59f223c1dd48e6c85e4b413baaed4a972e

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24586





---

archive/issue_comments_363082.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-22T23:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363082",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_363083.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2018-01-22T23:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363083",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_363084.json:
```json
{
    "body": "<a id='comment:3'></a>Apparently, `texlive` script is broken anyway, see also #21922.",
    "created_at": "2018-01-22T23:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363084",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:3'></a>Apparently, `texlive` script is broken anyway, see also #21922.



---

archive/issue_comments_363085.json:
```json
{
    "body": "<a id='comment:4'></a>I'm thinking we should just get rid of \"script\" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of \"package type\" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).\n\nI would propose that we convert these packages' types to \"optional\", treat \"script\" as an alias for \"optional\", and write a deprecation warning in the off chance that someone tries to use \"script\" type again.",
    "created_at": "2018-01-23T11:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363085",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).

I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.



---

archive/issue_comments_363086.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-23T11:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363086",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_363087.json:
```json
{
    "body": "<a id='comment:5'></a>Additionally if wanted to add some explicit marker that there is no \"source tarball\" for the package that would be fine too.",
    "created_at": "2018-01-23T11:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363087",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>Additionally if wanted to add some explicit marker that there is no "source tarball" for the package that would be fine too.



---

archive/issue_comments_363088.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-01-25T18:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363088",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_363089.json:
```json
{
    "body": "<a id='comment:6'></a>At least this fixes something, why not merge it?",
    "created_at": "2018-01-25T18:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363089",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>At least this fixes something, why not merge it?



---

archive/issue_comments_363090.json:
```json
{
    "body": "<a id='comment:7'></a>I guess. I can open an issue for my further suggestions.",
    "created_at": "2018-01-26T16:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363090",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>I guess. I can open an issue for my further suggestions.



---

archive/issue_events_061972.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-27T15:59:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-61972"
}
```



---

archive/issue_comments_363091.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-27T15:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363091",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_363092.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:4 embray]:\n> I'm thinking we should just get rid of \"script\" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of \"package type\" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).\n> \n> I would propose that we convert these packages' types to \"optional\", treat \"script\" as an alias for \"optional\", and write a deprecation warning in the off chance that someone tries to use \"script\" type again.\n\n\n#29287 makes roughly these proposed changes (but without the soft transition using deprecation).",
    "created_at": "2020-03-15T02:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-363092",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Replying to [comment:4 embray]:
> I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).
> 
> I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.


#29287 makes roughly these proposed changes (but without the soft transition using deprecation).
