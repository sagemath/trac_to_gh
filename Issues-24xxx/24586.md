# Issue 24586: packages whose type is "script" must have executable spkg-install

archive/issues_024349.json:
```json
{
    "body": "It is all in the title. Fixed for `r_jupyter` in #24585, `pyopenssl` is OK, `texlive` remains:\n\n```\nsage -i texlive\n\n[...]\n\ncd '/opt/sagemath/sage-source' && \\\n    source '/opt/sagemath/sage-source/src/bin/sage-env' && \\\n    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/texlive/spkg-install' /opt/sagemath/sage-source/logs/pkgs/texlive.log\n[texlive] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/texlive/spkg-install: Permission denied\nMakefile:2984: recipe for target 'texlive' failed\n```\n\n\n**CC:**  @embray\n\n**Branch:** [81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Thierry Monteil\n\nIssue created by migration from https://trac.sagemath.org/ticket/24586\n\n",
    "closed_at": "2018-01-27T15:59:41Z",
    "created_at": "2018-01-22T23:24:20Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "packages whose type is \"script\" must have executable spkg-install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24586",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
It is all in the title. Fixed for `r_jupyter` in #24585, `pyopenssl` is OK, `texlive` remains:

```
sage -i texlive

[...]

cd '/opt/sagemath/sage-source' && \
    source '/opt/sagemath/sage-source/src/bin/sage-env' && \
    sage-logger -p '/opt/sagemath/sage-source/build/pkgs/texlive/spkg-install' /opt/sagemath/sage-source/logs/pkgs/texlive.log
[texlive] /opt/sagemath/sage-source/build/bin/sage-logger: line 89: /opt/sagemath/sage-source/build/pkgs/texlive/spkg-install: Permission denied
Makefile:2984: recipe for target 'texlive' failed
```


**CC:**  @embray

**Branch:** [81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)

**Reviewer:** Jeroen Demeyer

**Author:** Thierry Monteil

Issue created by migration from https://trac.sagemath.org/ticket/24586





---

archive/issue_comments_376761.json:
```json
{
    "body": "**Branch:** [u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install)",
    "created_at": "2018-01-22T23:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376761",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Branch:** [u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install)



---

archive/issue_events_221998.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2018-01-22T23:40:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-221998"
}
```



---

archive/issue_events_221999.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2018-01-22T23:40:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "rename": {
        "from": "packges whose type is \"script\" must have executable spkg-install",
        "to": "packages whose type is \"script\" must have executable spkg-install"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-221999"
}
```



---

archive/issue_comments_376762.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e\">81352f5</a></td><td><code>#24586 : make build/pkgs/texlive/spkg-install executable</code></td></tr></table>\n",
    "created_at": "2018-01-22T23:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376762",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e">81352f5</a></td><td><code>#24586 : make build/pkgs/texlive/spkg-install executable</code></td></tr></table>




---

archive/issue_comments_376763.json:
```json
{
    "body": "**Commit:** [81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)",
    "created_at": "2018-01-22T23:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376763",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Commit:** [81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)



---

archive/issue_comments_376764.json:
```json
{
    "body": "<a id='comment:3'></a>\nApparently, `texlive` script is broken anyway, see also #21922.",
    "created_at": "2018-01-22T23:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376764",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:3'></a>
Apparently, `texlive` script is broken anyway, see also #21922.



---

archive/issue_comments_376765.json:
```json
{
    "body": "<a id='comment:4'></a>\nI'm thinking we should just get rid of \"script\" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of \"package type\" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).\n\nI would propose that we convert these packages' types to \"optional\", treat \"script\" as an alias for \"optional\", and write a deprecation warning in the off chance that someone tries to use \"script\" type again.",
    "created_at": "2018-01-23T11:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376765",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).

I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.



---

archive/issue_events_222000.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-23T11:39:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222000"
}
```



---

archive/issue_events_222001.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-23T11:39:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222001"
}
```



---

archive/issue_comments_376766.json:
```json
{
    "body": "<a id='comment:5'></a>\nAdditionally if wanted to add some explicit marker that there is no \"source tarball\" for the package that would be fine too.",
    "created_at": "2018-01-23T11:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376766",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
Additionally if wanted to add some explicit marker that there is no "source tarball" for the package that would be fine too.



---

archive/issue_events_222002.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-25T18:03:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222002"
}
```



---

archive/issue_events_222003.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-25T18:03:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222003"
}
```



---

archive/issue_comments_376767.json:
```json
{
    "body": "<a id='comment:6'></a>\nAt least this fixes something, why not merge it?",
    "created_at": "2018-01-25T18:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376767",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
At least this fixes something, why not merge it?



---

archive/issue_comments_376768.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2018-01-25T18:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376768",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_376769.json:
```json
{
    "body": "<a id='comment:7'></a>\nI guess. I can open an issue for my further suggestions.",
    "created_at": "2018-01-26T16:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376769",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
I guess. I can open an issue for my further suggestions.



---

archive/issue_comments_376770.json:
```json
{
    "body": "**Changing branch** from \"[u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install)\" to \"[81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)\".",
    "created_at": "2018-01-27T15:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376770",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/packges_whose_type_is__script__must_have_executable_spkg_install)" to "[81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)".



---

archive/issue_events_222004.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-27T15:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222004"
}
```



---

archive/issue_events_222005.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-27T15:59:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24586#event-222005"
}
```



---

archive/issue_comments_376771.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [embray](#comment%3A4):\n> I'm thinking we should just get rid of \"script\" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of \"package type\" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).\n> \n> I would propose that we convert these packages' types to \"optional\", treat \"script\" as an alias for \"optional\", and write a deprecation warning in the off chance that someone tries to use \"script\" type again.\n\n\n#29287 makes roughly these proposed changes (but without the soft transition using deprecation).",
    "created_at": "2020-03-15T02:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [embray](#comment%3A4):
> I'm thinking we should just get rid of "script" type.  It only applies to three packages and there's no good reason for it.  It's a misuse of "package type" anyways, which we'd like to get away from being a reflection of how a package is installed and more a reflection of under what circumstances the package should be installed (i.e. standard vs. optional).
> 
> I would propose that we convert these packages' types to "optional", treat "script" as an alias for "optional", and write a deprecation warning in the off chance that someone tries to use "script" type again.


#29287 makes roughly these proposed changes (but without the soft transition using deprecation).



---

archive/issue_comments_376772.json:
```json
{
    "body": "**Changing commit** from \"[81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)\" to \"\".",
    "created_at": "2020-03-15T02:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24586#issuecomment-376772",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[81352f59f223c1dd48e6c85e4b413baaed4a972e](https://github.com/sagemath/sagetrac-mirror/commit/81352f59f223c1dd48e6c85e4b413baaed4a972e)" to "".
