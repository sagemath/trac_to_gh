# Issue 24089: Max common neighbors for Graphs

archive/issues_023852.json:
```json
{
    "body": "Use adjacency matrix to implement maximum common neighbors score for graphs. \n\nAssignee: @rajat1433\n\nCC:  @dcoudert\n\nKeywords: neighbors, graphs, link prediction,sd90\n\nBranch/Commit: f081682b9db13f14e226cd70a0768dd4a133858d\n\nReviewer: David Coudert\n\nAuthor: Amanda Francis, Rajat Mittal\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24089\n\n",
    "closed_at": "2019-03-29T12:36:47Z",
    "created_at": "2017-10-22T22:16:59Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Max common neighbors for Graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24089",
    "user": "https://trac.sagemath.org/admin/accounts/users/afrancis"
}
```
Use adjacency matrix to implement maximum common neighbors score for graphs. 

Assignee: @rajat1433

CC:  @dcoudert

Keywords: neighbors, graphs, link prediction,sd90

Branch/Commit: f081682b9db13f14e226cd70a0768dd4a133858d

Reviewer: David Coudert

Author: Amanda Francis, Rajat Mittal

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24089





---

archive/issue_comments_455510.json:
```json
{
    "body": "Changing keywords from \"neighbors, graphs, link prediction\" to \"neighbors, graphs, link prediction,sd90\".",
    "created_at": "2017-10-23T16:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455510",
    "user": "https://trac.sagemath.org/admin/accounts/users/afrancis"
}
```

Changing keywords from "neighbors, graphs, link prediction" to "neighbors, graphs, link prediction,sd90".



---

archive/issue_comments_455511.json:
```json
{
    "body": "Changing branch from \"\" to \"u/afrancis/max_common_neighbors_for_graphs\"",
    "created_at": "2017-10-24T00:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455511",
    "user": "https://trac.sagemath.org/admin/accounts/users/afrancis"
}
```

Changing branch from "" to "u/afrancis/max_common_neighbors_for_graphs"



---

archive/issue_comments_455512.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-24T17:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455513.json:
```json
{
    "body": "Changing commit from \"\" to \"96bd2b7f4bda8de468a7176bb15c00622b9c94e7\"",
    "created_at": "2017-10-24T17:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "96bd2b7f4bda8de468a7176bb15c00622b9c94e7"



---

archive/issue_comments_455514.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-24T22:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455515.json:
```json
{
    "body": "Changing commit from \"96bd2b7f4bda8de468a7176bb15c00622b9c94e7\" to \"a749b9313f955b0cf1bf91486969d66be0f9ae31\"",
    "created_at": "2017-10-24T22:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "96bd2b7f4bda8de468a7176bb15c00622b9c94e7" to "a749b9313f955b0cf1bf91486969d66be0f9ae31"



---

archive/issue_comments_455516.json:
```json
{
    "body": "Changing author from \"\" to \"Amanda Francis\"",
    "created_at": "2017-10-24T22:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455516",
    "user": "https://trac.sagemath.org/admin/accounts/users/afrancis"
}
```

Changing author from "" to "Amanda Francis"



---

archive/issue_comments_455517.json:
```json
{
    "body": "Changing commit from \"a749b9313f955b0cf1bf91486969d66be0f9ae31\" to \"9436b14b27e08b757044161e118490d6f63970e4\"",
    "created_at": "2017-10-24T22:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a749b9313f955b0cf1bf91486969d66be0f9ae31" to "9436b14b27e08b757044161e118490d6f63970e4"



---

archive/issue_comments_455518.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-24T22:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455519.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-24T23:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455519",
    "user": "https://trac.sagemath.org/admin/accounts/users/afrancis"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455520.json:
```json
{
    "body": "<a id='comment:8'></a>Here I have similar comments as for #24094. You can have a look to [doc.sagemath.org/html/en/developer/coding_basics.html].",
    "created_at": "2017-10-25T08:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455520",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>Here I have similar comments as for #24094. You can have a look to [doc.sagemath.org/html/en/developer/coding_basics.html].



---

archive/issue_comments_455521.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-25T08:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455521",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_061167.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-19T05:39:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61167"
}
```



---

archive/issue_comments_455522.json:
```json
{
    "body": "Set assignee to @rajat1433.",
    "created_at": "2019-03-19T05:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455522",
    "user": "https://github.com/rajat1433"
}
```

Set assignee to @rajat1433.



---

archive/issue_comments_455523.json:
```json
{
    "body": "Changing commit from \"9436b14b27e08b757044161e118490d6f63970e4\" to \"\"",
    "created_at": "2019-03-19T09:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455523",
    "user": "https://github.com/rajat1433"
}
```

Changing commit from "9436b14b27e08b757044161e118490d6f63970e4" to ""



---

archive/issue_comments_455524.json:
```json
{
    "body": "Changing author from \"Amanda Francis\" to \"Amanda Francis, Rajat Mittal\"",
    "created_at": "2019-03-19T09:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455524",
    "user": "https://github.com/rajat1433"
}
```

Changing author from "Amanda Francis" to "Amanda Francis, Rajat Mittal"



---

archive/issue_comments_455525.json:
```json
{
    "body": "Changing branch from \"u/afrancis/max_common_neighbors_for_graphs\" to \"u/gh-rajat1433/24089_max_common_neighbors\"",
    "created_at": "2019-03-19T09:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455525",
    "user": "https://github.com/rajat1433"
}
```

Changing branch from "u/afrancis/max_common_neighbors_for_graphs" to "u/gh-rajat1433/24089_max_common_neighbors"



---

archive/issue_events_061168.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-19T09:07:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61168"
}
```



---

archive/issue_events_061169.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-19T09:07:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61169"
}
```



---

archive/issue_comments_455526.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2019-03-19T09:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455526",
    "user": "https://github.com/rajat1433"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_455527.json:
```json
{
    "body": "Changing commit from \"\" to \"514a29a2555b8c3e4d9a3cd771ba6d3c4abeff39\"",
    "created_at": "2019-03-19T09:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "514a29a2555b8c3e4d9a3cd771ba6d3c4abeff39"



---

archive/issue_comments_455528.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-19T09:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455529.json:
```json
{
    "body": "<a id='comment:12'></a>Done a lot of refactoring and improvement in the original author's code , following the pep8 guidelines and also added vertices option to common_neighbors_matrix method.",
    "created_at": "2019-03-19T09:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455529",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:12'></a>Done a lot of refactoring and improvement in the original author's code , following the pep8 guidelines and also added vertices option to common_neighbors_matrix method.



---

archive/issue_comments_455530.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-19T09:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455530",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455531.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-19T09:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455532.json:
```json
{
    "body": "Changing commit from \"514a29a2555b8c3e4d9a3cd771ba6d3c4abeff39\" to \"4935d5e2bbda1e51382f2bf6831e26bec812b27e\"",
    "created_at": "2019-03-19T09:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "514a29a2555b8c3e4d9a3cd771ba6d3c4abeff39" to "4935d5e2bbda1e51382f2bf6831e26bec812b27e"



---

archive/issue_comments_455533.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-19T10:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455533",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_455534.json:
```json
{
    "body": "<a id='comment:15'></a>several comments\n\n**common_neighbors_matrix**\n\n- We could shorten the short description to\n\n```\nReturn a matrix of numbers of common neighbors between each pairs.\n```\n  an then add the explanation about `(i, j)` entry\n\n- pep8:\n\n```diff\n-        - ``nonedgesonly``-- Boolean (default: `True`); if ``true``, assigns\n+        - ``nonedgesonly``-- boolean (default: ``True``); if ``True``, assigns\n```\n\n- remove `# add edge`. Not useful\n\n```\n            sage: G = Graph([(0,0)],loops=True) # add edges\n```\n\n- same here\n\n```\n            sage: G = graphs.CompleteGraph(4) # Check Complete Graph\n```\n\n- you must document at the begining of the method that it is working for simple graphs only, and so that neither loops nor multiple edges are accepted. Then instead of this test, you could use:\n\n```\n-        if self.has_loops():\n-            raise ValueError('Unable to compute simple graph common neighbors for graphs with loops')\n+        self._scream_if_not_simple()\n```\n\n- this method is defined in `graph.py`, so self is not directed.\n\n- use `vertices = list(self)` but the documentation of the `vertices` parameter says that default in `self.vertices()`.\n\n- `range(0, self.order())`: no need to add 0 -> `range(self.order())`\n\n- we expect the matrix to be symmetric, so \n\n```diff\n-        for v in range(0, self.order()):\n-            for w in range(0, self.order()):\n-                if v == w:\n-                    M[v, w] = 0\n-                if nonedgesonly == True:\n-                    if A[v, w] > 0:\n-                        M[v, w] = 0\n+        for v in range(self.order()):\n+            M[v, v] = 0\n+            for w in range(v + 1, self.order()):\n+                if nonedgesonly and A[v, w]:\n+                    M[v, w] = M[w, v] = 0\n```\n\n**most_common_neighbors**\n\n- ```nonedgesonly`` -- Boolean (default: `True`); if ``True``,` same as above\n\n- `non-adajacent` -> non-adjacent`\n\n- alignment 80 columns\n\n```\n+        The common neighbors matrix  for a fan on 6 vertices counting only non-adjacent vertex pairs ::\n```\n\n- remove `#Check Complete Graph`\n\n- document that the method is for simple graphs only and add `self._scream_if_not_simple()`\n\n- document that the method is defined for graphs of order `\\geq 2` and do\n\n```diff\n-            raise ValueError('Unable to find node pairs with common neighbors for graphs with less than 2 nodes')\n+            raise ValueError('this method is defined for graphs with at least 2 vertices')\n```\n\n- what is `max(max(M)` ?\n\n- The matrix is symmetric, and the current implementation outputs pair (u, v) and (v, u).",
    "created_at": "2019-03-19T10:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455534",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>several comments

**common_neighbors_matrix**

- We could shorten the short description to

```
Return a matrix of numbers of common neighbors between each pairs.
```
  an then add the explanation about `(i, j)` entry

- pep8:

```diff
-        - ``nonedgesonly``-- Boolean (default: `True`); if ``true``, assigns
+        - ``nonedgesonly``-- boolean (default: ``True``); if ``True``, assigns
```

- remove `# add edge`. Not useful

```
            sage: G = Graph([(0,0)],loops=True) # add edges
```

- same here

```
            sage: G = graphs.CompleteGraph(4) # Check Complete Graph
```

- you must document at the begining of the method that it is working for simple graphs only, and so that neither loops nor multiple edges are accepted. Then instead of this test, you could use:

```
-        if self.has_loops():
-            raise ValueError('Unable to compute simple graph common neighbors for graphs with loops')
+        self._scream_if_not_simple()
```

- this method is defined in `graph.py`, so self is not directed.

- use `vertices = list(self)` but the documentation of the `vertices` parameter says that default in `self.vertices()`.

- `range(0, self.order())`: no need to add 0 -> `range(self.order())`

- we expect the matrix to be symmetric, so 

```diff
-        for v in range(0, self.order()):
-            for w in range(0, self.order()):
-                if v == w:
-                    M[v, w] = 0
-                if nonedgesonly == True:
-                    if A[v, w] > 0:
-                        M[v, w] = 0
+        for v in range(self.order()):
+            M[v, v] = 0
+            for w in range(v + 1, self.order()):
+                if nonedgesonly and A[v, w]:
+                    M[v, w] = M[w, v] = 0
```

**most_common_neighbors**

- ```nonedgesonly`` -- Boolean (default: `True`); if ``True``,` same as above

- `non-adajacent` -> non-adjacent`

- alignment 80 columns

```
+        The common neighbors matrix  for a fan on 6 vertices counting only non-adjacent vertex pairs ::
```

- remove `#Check Complete Graph`

- document that the method is for simple graphs only and add `self._scream_if_not_simple()`

- document that the method is defined for graphs of order `\geq 2` and do

```diff
-            raise ValueError('Unable to find node pairs with common neighbors for graphs with less than 2 nodes')
+            raise ValueError('this method is defined for graphs with at least 2 vertices')
```

- what is `max(max(M)` ?

- The matrix is symmetric, and the current implementation outputs pair (u, v) and (v, u).



---

archive/issue_comments_455535.json:
```json
{
    "body": "Changing commit from \"4935d5e2bbda1e51382f2bf6831e26bec812b27e\" to \"2039233a1141798e812d8fe7c5a7e8471d4b960c\"",
    "created_at": "2019-03-19T11:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4935d5e2bbda1e51382f2bf6831e26bec812b27e" to "2039233a1141798e812d8fe7c5a7e8471d4b960c"



---

archive/issue_comments_455536.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-19T11:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455537.json:
```json
{
    "body": "<a id='comment:17'></a>\n```\n    what is max(max(M))\n```\n\n\nIts the maximum value in a 2d matrix.\n\n\n```\n    The matrix is symmetric, and the current implementation outputs pair (u, v) and (v, u).\n```\n \nno it outputed only (u,v) bcoz second loop started from v.\n\n\n```\nuse vertices = list(self) but the documentation of the vertices parameter says that default in self.vertices(). \n```\n\nI have now restored self.vertices in the code. (Or should I do other way round including list(self) in documentation as well as code?\n\nAll the changes suggested are commited.\n\n---\nNew commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[2039233](https://git.sagemath.org/sage.git/commit?id=2039233a1141798e812d8fe7c5a7e8471d4b960c)|`changes_as_per_review`|\n---\nNew commits:",
    "created_at": "2019-03-19T11:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455537",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:17'></a>
```
    what is max(max(M))
```


Its the maximum value in a 2d matrix.


```
    The matrix is symmetric, and the current implementation outputs pair (u, v) and (v, u).
```
 
no it outputed only (u,v) bcoz second loop started from v.


```
use vertices = list(self) but the documentation of the vertices parameter says that default in self.vertices(). 
```

I have now restored self.vertices in the code. (Or should I do other way round including list(self) in documentation as well as code?

All the changes suggested are commited.

---
New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[2039233](https://git.sagemath.org/sage.git/commit?id=2039233a1141798e812d8fe7c5a7e8471d4b960c)|`changes_as_per_review`|
---
New commits:



---

archive/issue_comments_455538.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-19T11:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455538",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455539.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 gh-rajat1433]:\n> \n> \n> ```\n>     what is max(max(M))\n> ```\n> \n> \n> Its the maximum value in a 2d matrix.\n\n\nI don't think so\n\n```\nsage: G = graphs.CycleGraph(4)\nsage: A = G.adjacency_matrix()\nsage: M = A**2\nsage: M\n[2 0 2 0]\n[0 2 0 2]\n[2 0 2 0]\n[0 2 0 2]\nsage: M[1, 1] = 3\nsage: M\n[2 0 2 0]\n[0 3 0 2]\n[2 0 2 0]\n[0 2 0 2]\nsage: max(max(M))\n2\nsage: max(M)\n(2, 0, 2, 0)\n```\n\n`max(M)` returns the \"maximum\" row according some definition, apparently lexicographic.\n\n\nuse for instance `max(M.coefficients())`\n\n\n> I have now restored self.vertices in the code. (Or should I do other way round including list(self) in documentation as well as code?\n\n\nit's consistent with `adjacency_matrix, so it's OK.",
    "created_at": "2019-03-19T12:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455539",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>Replying to [comment:17 gh-rajat1433]:
> 
> 
> ```
>     what is max(max(M))
> ```
> 
> 
> Its the maximum value in a 2d matrix.


I don't think so

```
sage: G = graphs.CycleGraph(4)
sage: A = G.adjacency_matrix()
sage: M = A**2
sage: M
[2 0 2 0]
[0 2 0 2]
[2 0 2 0]
[0 2 0 2]
sage: M[1, 1] = 3
sage: M
[2 0 2 0]
[0 3 0 2]
[2 0 2 0]
[0 2 0 2]
sage: max(max(M))
2
sage: max(M)
(2, 0, 2, 0)
```

`max(M)` returns the "maximum" row according some definition, apparently lexicographic.


use for instance `max(M.coefficients())`


> I have now restored self.vertices in the code. (Or should I do other way round including list(self) in documentation as well as code?


it's consistent with `adjacency_matrix, so it's OK.



---

archive/issue_comments_455540.json:
```json
{
    "body": "<a id='comment:20'></a>fixed for maximum value",
    "created_at": "2019-03-19T12:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455540",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:20'></a>fixed for maximum value



---

archive/issue_comments_455541.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-19T12:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455542.json:
```json
{
    "body": "Changing commit from \"2039233a1141798e812d8fe7c5a7e8471d4b960c\" to \"4b5431f11938fb6d573356a77b0a09b5a02cf0e6\"",
    "created_at": "2019-03-19T12:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2039233a1141798e812d8fe7c5a7e8471d4b960c" to "4b5431f11938fb6d573356a77b0a09b5a02cf0e6"



---

archive/issue_comments_455543.json:
```json
{
    "body": "<a id='comment:22'></a>almost done ;)\n\n```diff\n             for v in range(self.num_verts()):\n-                for w in range(v, self.num_verts()):\n+                for w in range(v + 1, self.num_verts()):\n```\n\nand also, you can do\n\n```diff\n-            ValueError: This method is not known to work on graphs with loops. Perhaps this method can be updated to handle them, but in the meantime if you want to use it please disallow loops using allow_loops().\n+            ValueError: This method is not known to work on graphs with\n+            multiedges. Perhaps this method can be updated to handle them, but\n+            in the meantime if you want to use it please disallow multiedges\n+            using allow_multiple_edges().\n```\n\nand \n\n```diff\n-        The (`i` , `j`) entry of the matrix gives the number of common\n+        The `(i , j)` entry of the matrix gives the number of common\n```",
    "created_at": "2019-03-19T12:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455543",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>almost done ;)

```diff
             for v in range(self.num_verts()):
-                for w in range(v, self.num_verts()):
+                for w in range(v + 1, self.num_verts()):
```

and also, you can do

```diff
-            ValueError: This method is not known to work on graphs with loops. Perhaps this method can be updated to handle them, but in the meantime if you want to use it please disallow loops using allow_loops().
+            ValueError: This method is not known to work on graphs with
+            multiedges. Perhaps this method can be updated to handle them, but
+            in the meantime if you want to use it please disallow multiedges
+            using allow_multiple_edges().
```

and 

```diff
-        The (`i` , `j`) entry of the matrix gives the number of common
+        The `(i , j)` entry of the matrix gives the number of common
```



---

archive/issue_comments_455544.json:
```json
{
    "body": "Changing commit from \"4b5431f11938fb6d573356a77b0a09b5a02cf0e6\" to \"4ea2d8c1178dda31d95eeaffa1739d39223bdf79\"",
    "created_at": "2019-03-19T14:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b5431f11938fb6d573356a77b0a09b5a02cf0e6" to "4ea2d8c1178dda31d95eeaffa1739d39223bdf79"



---

archive/issue_comments_455545.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-19T14:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455546.json:
```json
{
    "body": "<a id='comment:24'></a>Thanks for the review. I have fixed the remaining documentation bugs.",
    "created_at": "2019-03-19T14:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455546",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:24'></a>Thanks for the review. I have fixed the remaining documentation bugs.



---

archive/issue_comments_455547.json:
```json
{
    "body": "<a id='comment:25'></a>LGTM",
    "created_at": "2019-03-19T14:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455547",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>LGTM



---

archive/issue_comments_455548.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-19T14:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455548",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455549.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-03-24T00:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455549",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_455550.json:
```json
{
    "body": "<a id='comment:26'></a>Merge conflict",
    "created_at": "2019-03-24T00:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455550",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>Merge conflict



---

archive/issue_comments_455551.json:
```json
{
    "body": "Changing branch from \"u/gh-rajat1433/24089_max_common_neighbors\" to \"u/gh-rajat1433/24089_common_neighbors\"",
    "created_at": "2019-03-24T05:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455551",
    "user": "https://github.com/rajat1433"
}
```

Changing branch from "u/gh-rajat1433/24089_max_common_neighbors" to "u/gh-rajat1433/24089_common_neighbors"



---

archive/issue_comments_455552.json:
```json
{
    "body": "Changing commit from \"4ea2d8c1178dda31d95eeaffa1739d39223bdf79\" to \"\"",
    "created_at": "2019-03-24T05:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455552",
    "user": "https://github.com/rajat1433"
}
```

Changing commit from "4ea2d8c1178dda31d95eeaffa1739d39223bdf79" to ""



---

archive/issue_comments_455553.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-24T05:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455554.json:
```json
{
    "body": "Changing commit from \"\" to \"2a9c447e048e16573ec1705ab676b1d21ef991a6\"",
    "created_at": "2019-03-24T05:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "2a9c447e048e16573ec1705ab676b1d21ef991a6"



---

archive/issue_comments_455555.json:
```json
{
    "body": "Changing commit from \"2a9c447e048e16573ec1705ab676b1d21ef991a6\" to \"d5cc829d4a3fd45bdba61a86e0e2c966c37614ab\"",
    "created_at": "2019-03-24T05:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a9c447e048e16573ec1705ab676b1d21ef991a6" to "d5cc829d4a3fd45bdba61a86e0e2c966c37614ab"



---

archive/issue_comments_455556.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-24T05:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455557.json:
```json
{
    "body": "<a id='comment:30'></a>I have merged it with latest release i.e. 8.7 rc0 to avoid any conflicts. Is milestone 8.7 good or I have to make it 8.8 ?",
    "created_at": "2019-03-24T05:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455557",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:30'></a>I have merged it with latest release i.e. 8.7 rc0 to avoid any conflicts. Is milestone 8.7 good or I have to make it 8.8 ?



---

archive/issue_comments_455558.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-24T05:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455558",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455559.json:
```json
{
    "body": "<a id='comment:32'></a>The milestone is now 8.8. Version 8.7 has been released. The last develop version is 8.7, and the first beta of 8.8 will be shortly released.\n\n\n- a better code when `nonedgesonly = False`\n\n```diff\n-            for w in range(v + 1, self.order()):\n-                if nonedgesonly and A[v, w]:\n-                    M[v, w] = M[w, v] = 0\n+            if nonedgesonly:\n+                for w in range(v + 1, self.order()):\n+                    if A[v, w]:\n+                        M[v, w] = M[w, v] = 0\n```\n\n- Add a `.` at the end of `Return vertex pairs with maximal number of common neighbors`\n\n- only 1 empty line before the INPUT block\n\n- Do simple validity test first\n\n```diff\n-        verts = list(self)\n-        M = self.common_neighbors_matrix(vertices=verts, nonedgesonly=nonedgesonly)\n-        if self.num_verts() < 2:\n-            raise ValueError('this method is defined for graphs with at least 2 vertices')\n+        if self.num_verts() < 2:\n+            raise ValueError('this method is defined for graphs with at least 2 vertices')\n+        verts = list(self)\n+        M = self.common_neighbors_matrix(vertices=verts, nonedgesonly=nonedgesonly)\n```\n\n- no need to call twice `M.coefficients()`. Use a variable `coefficients = M.coefficients()`",
    "created_at": "2019-03-24T18:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455559",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>The milestone is now 8.8. Version 8.7 has been released. The last develop version is 8.7, and the first beta of 8.8 will be shortly released.


- a better code when `nonedgesonly = False`

```diff
-            for w in range(v + 1, self.order()):
-                if nonedgesonly and A[v, w]:
-                    M[v, w] = M[w, v] = 0
+            if nonedgesonly:
+                for w in range(v + 1, self.order()):
+                    if A[v, w]:
+                        M[v, w] = M[w, v] = 0
```

- Add a `.` at the end of `Return vertex pairs with maximal number of common neighbors`

- only 1 empty line before the INPUT block

- Do simple validity test first

```diff
-        verts = list(self)
-        M = self.common_neighbors_matrix(vertices=verts, nonedgesonly=nonedgesonly)
-        if self.num_verts() < 2:
-            raise ValueError('this method is defined for graphs with at least 2 vertices')
+        if self.num_verts() < 2:
+            raise ValueError('this method is defined for graphs with at least 2 vertices')
+        verts = list(self)
+        M = self.common_neighbors_matrix(vertices=verts, nonedgesonly=nonedgesonly)
```

- no need to call twice `M.coefficients()`. Use a variable `coefficients = M.coefficients()`



---

archive/issue_events_061170.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-24T18:46:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61170"
}
```



---

archive/issue_events_061171.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-24T18:46:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61171"
}
```



---

archive/issue_comments_455560.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-24T19:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455561.json:
```json
{
    "body": "Changing commit from \"d5cc829d4a3fd45bdba61a86e0e2c966c37614ab\" to \"f081682b9db13f14e226cd70a0768dd4a133858d\"",
    "created_at": "2019-03-24T19:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d5cc829d4a3fd45bdba61a86e0e2c966c37614ab" to "f081682b9db13f14e226cd70a0768dd4a133858d"



---

archive/issue_comments_455562.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks for the review. I have made the changes.",
    "created_at": "2019-03-24T19:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455562",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:35'></a>Thanks for the review. I have made the changes.



---

archive/issue_comments_455563.json:
```json
{
    "body": "<a id='comment:36'></a>LGTM",
    "created_at": "2019-03-25T13:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455563",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>LGTM



---

archive/issue_comments_455564.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-25T13:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455564",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061172.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-29T12:36:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24089#event-61172"
}
```



---

archive/issue_comments_455565.json:
```json
{
    "body": "Changing branch from \"u/gh-rajat1433/24089_common_neighbors\" to \"f081682b9db13f14e226cd70a0768dd4a133858d\"",
    "created_at": "2019-03-29T12:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455565",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-rajat1433/24089_common_neighbors" to "f081682b9db13f14e226cd70a0768dd4a133858d"



---

archive/issue_comments_455566.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-29T12:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24089#issuecomment-455566",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
