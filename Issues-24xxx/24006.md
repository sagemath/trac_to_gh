# Issue 24006: SymPy --> Sage conversion completely inside Sage

archive/issues_023769.json:
```json
{
    "assignees": [],
    "body": "There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n\nThis branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.\n\nSee https://github.com/sympy/sympy/issues/13430\n\nDepends on #23990\n\nCC:  @EmmanuelCharpentier\n\nBranch: **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**\n\nReviewer: **Marco Mancini, Jeroen Demeyer**\n\nAuthor: **Ralf Stephan**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24006_\n\n",
    "closed_at": "2017-10-29T10:31:51Z",
    "created_at": "2017-10-10T15:41:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "SymPy --> Sage conversion completely inside Sage",
    "type": "issue",
    "updated_at": "2017-12-07T13:51:12Z",
    "url": "https://github.com/sagemath/sage/issues/24006",
    "user": "https://github.com/rwst"
}
```
There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.

This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.

See https://github.com/sympy/sympy/issues/13430

Depends on #23990

CC:  @EmmanuelCharpentier

Branch: **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**

Reviewer: **Marco Mancini, Jeroen Demeyer**

Author: **Ralf Stephan**

_Issue created by migration from https://trac.sagemath.org/ticket/24006_





---

archive/issue_events_303982.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303982"
}
```



---

archive/issue_events_303983.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303983"
}
```



---

archive/issue_events_303984.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303984"
}
```



---

archive/issue_events_303985.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303985"
}
```



---

archive/issue_comments_365324.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n \n This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.\n+\n+See https://github.com/sympy/sympy/issues/13430\n``````\n",
    "created_at": "2017-10-10T15:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365324",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.
 
 This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.
+
+See https://github.com/sympy/sympy/issues/13430
``````




---

archive/issue_comments_365325.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nProof of concept:\n\n```\nsage: from sympy import Symbol\n....: from sage.symbolic.ring import SR\n....: \n....: def _sympysage_symbol(self):\n....:     return SR.var(self.name)\n....: \n....: Symbol.sage = _sympysage_symbol\n....: \nsage: x._sympy_()\nx\nsage: type(_)\n<class 'sympy.core.symbol.Symbol'>\nsage: x._sympy_()\nx\nsage: _.sage()\nx\nsage: type(_)\n<type 'sage.symbolic.expression.Expression'>\n```",
    "created_at": "2017-10-10T16:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365325",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'>Comment 2:</a>
Proof of concept:

```
sage: from sympy import Symbol
....: from sage.symbolic.ring import SR
....: 
....: def _sympysage_symbol(self):
....:     return SR.var(self.name)
....: 
....: Symbol.sage = _sympysage_symbol
....: 
sage: x._sympy_()
x
sage: type(_)
<class 'sympy.core.symbol.Symbol'>
sage: x._sympy_()
x
sage: _.sage()
x
sage: type(_)
<type 'sage.symbolic.expression.Expression'>
```



---

archive/issue_comments_365326.json:
```json
{
    "body": "Branch: **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)**",
    "created_at": "2017-10-11T15:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365326",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)**



---

archive/issue_comments_365327.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nThis naive attempt already works in first tests. Setting review in order to get startup timings from the patchbots.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1\">252e5cb</a></td><td><code>24006: SymPy/Sage conversion</code></td></tr></table>\n",
    "created_at": "2017-10-11T15:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365327",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'>Comment 4:</a>
This naive attempt already works in first tests. Setting review in order to get startup timings from the patchbots.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1">252e5cb</a></td><td><code>24006: SymPy/Sage conversion</code></td></tr></table>




---

archive/issue_comments_365328.json:
```json
{
    "body": "Commit: **[252e5cb](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)**",
    "created_at": "2017-10-11T15:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365328",
    "user": "https://github.com/rwst"
}
```

Commit: **[252e5cb](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)**



---

archive/issue_events_303986.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T15:30:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303986"
}
```



---

archive/issue_comments_365329.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI get a ton of errors when ptesting it over 8.1.beta7+#23990. The resulting log file is too large to be uploaded (3,2 Mb gzipped, 332,2 Mb (!!!) uncompressed).\n\nI'll try `make distclean ; make ptestlong`, but don't hold your breath...\n\nNot changing status, pending second attempt to build.",
    "created_at": "2017-10-11T18:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365329",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'>Comment 6:</a>
I get a ton of errors when ptesting it over 8.1.beta7+#23990. The resulting log file is too large to be uploaded (3,2 Mb gzipped, 332,2 Mb (!!!) uncompressed).

I'll try `make distclean ; make ptestlong`, but don't hold your breath...

Not changing status, pending second attempt to build.



---

archive/issue_comments_365330.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nDon't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.",
    "created_at": "2017-10-11T19:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365330",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'>Comment 7:</a>
Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.



---

archive/issue_events_303987.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T19:25:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303987"
}
```



---

archive/issue_events_303988.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T19:25:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303988"
}
```



---

archive/issue_comments_365331.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@rwst](#comment%3A7):\n> Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.\n\nAaaarghhh... I *did* waste CPU. For some (now unscrutable) reason, I have been unable to `make` sage : some plot used in the documentation refuses to build.\n\nCurrently ptesting 8.1.beta7+#23990 again to check that the problemis indeed with the present patch (and reinstalling my 434 or so R packages...).\n\nThe next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?",
    "created_at": "2017-10-12T04:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365331",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@rwst](#comment%3A7):
> Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.

Aaaarghhh... I *did* waste CPU. For some (now unscrutable) reason, I have been unable to `make` sage : some plot used in the documentation refuses to build.

Currently ptesting 8.1.beta7+#23990 again to check that the problemis indeed with the present patch (and reinstalling my 434 or so R packages...).

The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?



---

archive/issue_comments_365332.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@EmmanuelCharpentier](#comment%3A8):\n> The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?\n\nSorry I was not clear enough in [comment:4](#comment%3A4)",
    "created_at": "2017-10-12T04:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365332",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@EmmanuelCharpentier](#comment%3A8):
> The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?

Sorry I was not clear enough in [comment:4](#comment%3A4)



---

archive/issue_comments_365333.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nActually the code was really bad Python, one can see it is not the language I'm used to.",
    "created_at": "2017-10-12T06:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365333",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'>Comment 10:</a>
Actually the code was really bad Python, one can see it is not the language I'm used to.



---

archive/issue_comments_365334.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAlso, we may have to adapt to the `_sage_` convention. Yes, all interfaces in `src/sage/interface` even Mma use it.",
    "created_at": "2017-10-12T07:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365334",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'>Comment 11:</a>
Also, we may have to adapt to the `_sage_` convention. Yes, all interfaces in `src/sage/interface` even Mma use it.



---

archive/issue_comments_365335.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97\">31e038d</a></td><td><code>24006: fixes</code></td></tr></table>\n",
    "created_at": "2017-10-12T09:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365335",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97">31e038d</a></td><td><code>24006: fixes</code></td></tr></table>




---

archive/issue_comments_365336.json:
```json
{
    "body": "Changed commit from **[252e5cb](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)** to **[31e038d](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)**",
    "created_at": "2017-10-12T09:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365336",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[252e5cb](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)** to **[31e038d](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)**



---

archive/issue_comments_365337.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c3c37d50390480eb30dd6cbc3849e0564fb9618\">8c3c37d</a></td><td><code>fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c\">6e36053</a></td><td><code>24006: fixes, first part of doctests</code></td></tr></table>\n",
    "created_at": "2017-10-14T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365337",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c3c37d50390480eb30dd6cbc3849e0564fb9618">8c3c37d</a></td><td><code>fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c">6e36053</a></td><td><code>24006: fixes, first part of doctests</code></td></tr></table>




---

archive/issue_comments_365338.json:
```json
{
    "body": "Changed commit from **[31e038d](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)** to **[6e36053](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)**",
    "created_at": "2017-10-14T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365338",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[31e038d](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)** to **[6e36053](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)**



---

archive/issue_comments_365339.json:
```json
{
    "body": "Changed branch from **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)** to **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)**",
    "created_at": "2017-10-15T15:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365339",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)** to **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)**



---

archive/issue_comments_365340.json:
```json
{
    "body": "Changed commit from **[6e36053](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)** to **[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)**",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365340",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[6e36053](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)** to **[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)**



---

archive/issue_events_303989.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303989"
}
```



---

archive/issue_events_303990.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303990"
}
```



---

archive/issue_events_303991.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "title_is": "SymPy --> Sage conversion completely inside Sage",
    "title_was": "experimental: SymPy --> Sage conversion completely inside Sage",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303991"
}
```



---

archive/issue_comments_365341.json:
```json
{
    "body": "Dependencies: **#23990**",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365341",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#23990**



---

archive/issue_comments_365342.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n \n-This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.\n+This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.\n \n See https://github.com/sympy/sympy/issues/13430\n``````\n",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365342",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.
 
-This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.
+This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.
 
 See https://github.com/sympy/sympy/issues/13430
``````




---

archive/issue_comments_365343.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThis new branch is now ready for review. It already passes all symbolic tests. It may fail in other Sage parts where symbolics are used. Let's put the patchbots on it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98\">9462954</a></td><td><code>23990: Convert symbolic relations to SymPy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9\">07f4744</a></td><td><code>23990: handle unequality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a\">0ed659f</a></td><td><code>23990: do not evaluate</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc\">5f023ea</a></td><td><code>23990: convert relations from SymPy to Sage, with test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816\">0f596bb</a></td><td><code>23990: fix patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f\">479e206</a></td><td><code>23990: sympy patchlevel bump</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321\">3e362ee</a></td><td><code>24006: SymPy --> Sage conversion completely inside Sage</code></td></tr></table>\n",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365343",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'>Comment 15:</a>
This new branch is now ready for review. It already passes all symbolic tests. It may fail in other Sage parts where symbolics are used. Let's put the patchbots on it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98">9462954</a></td><td><code>23990: Convert symbolic relations to SymPy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9">07f4744</a></td><td><code>23990: handle unequality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a">0ed659f</a></td><td><code>23990: do not evaluate</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc">5f023ea</a></td><td><code>23990: convert relations from SymPy to Sage, with test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816">0f596bb</a></td><td><code>23990: fix patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f">479e206</a></td><td><code>23990: sympy patchlevel bump</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321">3e362ee</a></td><td><code>24006: SymPy --> Sage conversion completely inside Sage</code></td></tr></table>




---

archive/issue_comments_365344.json:
```json
{
    "body": "Attachment: **[dochtml.log.gz](https://github.com/sagemath/sage/files/ticket24006/dochtml.log.gz)**\n\nLog of a failed attempt to build the documentation.",
    "created_at": "2017-10-15T19:23:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365344",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Attachment: **[dochtml.log.gz](https://github.com/sagemath/sage/files/ticket24006/dochtml.log.gz)**

Log of a failed attempt to build the documentation.



---

archive/issue_events_303992.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-15T19:29:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303992"
}
```



---

archive/issue_events_303993.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-15T19:29:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303993"
}
```



---

archive/issue_comments_365345.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOn top of #24026 (which needs review ;-), I can't even build the documentation (hence no formal testing possible). See uploaded log.\n\nAnd yes, I did `./sage -f sympy` before `( make doc-clean && make ptestlong)`.\n\n==>`needs_work`",
    "created_at": "2017-10-15T19:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365345",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:16'>Comment 16:</a>
On top of #24026 (which needs review ;-), I can't even build the documentation (hence no formal testing possible). See uploaded log.

And yes, I did `./sage -f sympy` before `( make doc-clean && make ptestlong)`.

==>`needs_work`



---

archive/issue_comments_365346.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74\">8dd5f88</a></td><td><code>24006: add missing file, fixes</code></td></tr></table>\n",
    "created_at": "2017-10-16T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365346",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74">8dd5f88</a></td><td><code>24006: add missing file, fixes</code></td></tr></table>




---

archive/issue_comments_365347.json:
```json
{
    "body": "Changed commit from **[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)** to **[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)**",
    "created_at": "2017-10-16T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365347",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)** to **[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)**



---

archive/issue_comments_365348.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2017-10-16T14:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365348",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_events_303994.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-16T14:31:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303994"
}
```



---

archive/issue_events_303995.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-16T14:31:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303995"
}
```



---

archive/issue_comments_365349.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nApologies again, the main file was missing, and more changes.",
    "created_at": "2017-10-16T14:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365349",
    "user": "https://github.com/rwst"
}
```

<a id='comment:18'>Comment 18:</a>
Apologies again, the main file was missing, and more changes.



---

archive/issue_comments_365350.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nTesting on top of #24026, `ptestlong` gives me two errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/libs/gap/assigned_names.py  # 1 doctest failed\nsage -t --long src/sage/schemes/elliptic_curves/sha_tate.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nBoth are transient (i. e. both tests pass when ran standalone).\n\nAn example of possible usefulness :\n\n```\nsage: dgamma(y,k,theta)=y^(k-1)*e^(-y/theta)/(theta^k*gamma(k))\nsage: (dgamma(y,k,theta).laplace(y,x)^p).expand().canonicalize_radical().inverse\n....: _laplace(x,y)\nilt(1/((theta*x + 1)^(k*p)), x, y)\nsage: sympy.inverse_laplace_transform((dgamma(y,k,theta).laplace(y,x)^p).expand(\n....: ).canonicalize_radical(),x,y)._sage_()\nk*p*theta^(-k*p)*y^(k*p - 1)*e^(-y/theta)*heaviside(y)/gamma(k*p + 1)\n```\n\nI won't be able to test further right now. I'll try to find more examples (that could be useful doctests...).\n\nDid you translate Sympy's conditional expressions in your recent `cases` ?\n\nAnother thought : we might subclass `sage()` as a wrapper for `_sage_()` possibly allowing for further arguments, such as supplementary translation dictionaries, as originally intended for mathematica.sage() (but this does not seem to worl currently...). Another ticket ?\n\nOh, BTW : `positive_review`",
    "created_at": "2017-10-16T16:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365350",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:19'>Comment 19:</a>
Testing on top of #24026, `ptestlong` gives me two errors :

```
----------------------------------------------------------------------
sage -t --long src/sage/libs/gap/assigned_names.py  # 1 doctest failed
sage -t --long src/sage/schemes/elliptic_curves/sha_tate.py  # 1 doctest failed
----------------------------------------------------------------------
```
Both are transient (i. e. both tests pass when ran standalone).

An example of possible usefulness :

```
sage: dgamma(y,k,theta)=y^(k-1)*e^(-y/theta)/(theta^k*gamma(k))
sage: (dgamma(y,k,theta).laplace(y,x)^p).expand().canonicalize_radical().inverse
....: _laplace(x,y)
ilt(1/((theta*x + 1)^(k*p)), x, y)
sage: sympy.inverse_laplace_transform((dgamma(y,k,theta).laplace(y,x)^p).expand(
....: ).canonicalize_radical(),x,y)._sage_()
k*p*theta^(-k*p)*y^(k*p - 1)*e^(-y/theta)*heaviside(y)/gamma(k*p + 1)
```

I won't be able to test further right now. I'll try to find more examples (that could be useful doctests...).

Did you translate Sympy's conditional expressions in your recent `cases` ?

Another thought : we might subclass `sage()` as a wrapper for `_sage_()` possibly allowing for further arguments, such as supplementary translation dictionaries, as originally intended for mathematica.sage() (but this does not seem to worl currently...). Another ticket ?

Oh, BTW : `positive_review`



---

archive/issue_events_303996.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-16T16:50:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303996"
}
```



---

archive/issue_events_303997.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-16T16:50:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303997"
}
```



---

archive/issue_comments_365351.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@EmmanuelCharpentier](#comment%3A19):\n> Did you translate Sympy's conditional expressions in your recent `cases` ?\n\nSee #23923\n\n> Oh, BTW : `positive_review`\n\nThanks.",
    "created_at": "2017-10-17T06:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365351",
    "user": "https://github.com/rwst"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@EmmanuelCharpentier](#comment%3A19):
> Did you translate Sympy's conditional expressions in your recent `cases` ?

See #23923

> Oh, BTW : `positive_review`

Thanks.



---

archive/issue_comments_365352.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nHello,\n\nI am trying to extend your interface to the function Subs:\n\n```\ndH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\n```\n\nwhere h is an abstract function.\n\nI tried to add the function in src/interfaces/sympy.py :  \n\n```\ndef _sympysage_Subs(self):\n    \"\"\"\n    EXAMPLES::\n\n        sage: from sympy import Symbol\n        sage: from sympy.core.singleton import S\n    \"\"\"\n\n    args = self.args\n    func = args[0]\n    substi = [(args[1][i],args[2][i]) for i in range(len(args[1]))]\n\n    print (substi)\n    #s = args[0].subs(substi)\n    return s\n\n```\n\nBut I am experimenting recursion problems (for this reason s is commented).\nI tried to use the function Subs(...).doit() but it has no effect.",
    "created_at": "2017-10-17T14:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365352",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:21'>Comment 21:</a>
Hello,

I am trying to extend your interface to the function Subs:

```
dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
```

where h is an abstract function.

I tried to add the function in src/interfaces/sympy.py :  

```
def _sympysage_Subs(self):
    """
    EXAMPLES::

        sage: from sympy import Symbol
        sage: from sympy.core.singleton import S
    """

    args = self.args
    func = args[0]
    substi = [(args[1][i],args[2][i]) for i in range(len(args[1]))]

    print (substi)
    #s = args[0].subs(substi)
    return s

```

But I am experimenting recursion problems (for this reason s is commented).
I tried to use the function Subs(...).doit() but it has no effect.



---

archive/issue_comments_365353.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nOn top of #20204 I get with your code (comment removed):\n\n```\nsage: from sympy import Subs, Derivative, Function, Symbol\nsage: _xi_1 = Symbol('_xi_1')\nsage: u = Symbol('u')\nsage: v = Symbol('v')\nsage: h = Function('h')\nsage: x._sympy_()\nx\nsage: dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\nsage: dH._sage_()\n[(_xi_1, u/2 + v/2)]\nSubs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\n```\nUsing this code however:\n\n```\n    args = self.args\n    substi = dict([(args[1][i]._sage_(),args[2][i]._sage_()) for i in range(len(args[1]))])\n    s = args[0]._sage_().subs(substi)\n```\nI get:\n\n```\nsage: dH._sage_()\nD[0](h)(1/2*u + 1/2*v, 1/2*u - 1/2*v)\n```",
    "created_at": "2017-10-18T06:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365353",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'>Comment 22:</a>
On top of #20204 I get with your code (comment removed):

```
sage: from sympy import Subs, Derivative, Function, Symbol
sage: _xi_1 = Symbol('_xi_1')
sage: u = Symbol('u')
sage: v = Symbol('v')
sage: h = Function('h')
sage: x._sympy_()
x
sage: dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
sage: dH._sage_()
[(_xi_1, u/2 + v/2)]
Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
```
Using this code however:

```
    args = self.args
    substi = dict([(args[1][i]._sage_(),args[2][i]._sage_()) for i in range(len(args[1]))])
    s = args[0]._sage_().subs(substi)
```
I get:

```
sage: dH._sage_()
D[0](h)(1/2*u + 1/2*v, 1/2*u - 1/2*v)
```



---

archive/issue_comments_365354.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nSo, doing the conversion to sage and then the substitution it works. \nFantastic. \nThe substitutions didn't work in sympy only.\nThanks",
    "created_at": "2017-10-18T08:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365354",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:23'>Comment 23:</a>
So, doing the conversion to sage and then the substitution it works. 
Fantastic. 
The substitutions didn't work in sympy only.
Thanks



---

archive/issue_comments_365355.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThere should be a change in the sympy patchlevel if you change patches (including removing them!)",
    "created_at": "2017-10-18T20:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365355",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'>Comment 24:</a>
There should be a change in the sympy patchlevel if you change patches (including removing them!)



---

archive/issue_events_303998.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-18T20:37:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303998"
}
```



---

archive/issue_events_303999.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-18T20:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-303999"
}
```



---

archive/issue_comments_365356.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nSorry to spoil the party, but I don't think that it's good to require that the user does `sympy_init()` in order for Sympy -> Sage conversion to work. In my view, it would be much better to fix it upstream in sympy. Ideally, you should either fix sympy to fix the `_sage_()` method in sympy or to call `sympy_init()` whenever `sympy` is imported.",
    "created_at": "2017-10-18T20:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365356",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>Comment 25:</a>
Sorry to spoil the party, but I don't think that it's good to require that the user does `sympy_init()` in order for Sympy -> Sage conversion to work. In my view, it would be much better to fix it upstream in sympy. Ideally, you should either fix sympy to fix the `_sage_()` method in sympy or to call `sympy_init()` whenever `sympy` is imported.



---

archive/issue_comments_365357.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@jdemeyer](#comment%3A25):\n> ....or to call `sympy_init()` whenever `sympy` is imported.\n\nSo, how to do that? Note that #20204 already has positive review and it includes this ticket. I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.",
    "created_at": "2017-10-19T05:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365357",
    "user": "https://github.com/rwst"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@jdemeyer](#comment%3A25):
> ....or to call `sympy_init()` whenever `sympy` is imported.

So, how to do that? Note that #20204 already has positive review and it includes this ticket. I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.



---

archive/issue_events_304000.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T05:44:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304000"
}
```



---

archive/issue_events_304001.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T05:44:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304001"
}
```



---

archive/issue_comments_365358.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@jdemeyer](#comment%3A24):\n> There should be a change in the sympy patchlevel if you change patches (including removing them!)\n\nThere is a change in patchlevel in #20204 which includes this ticket.",
    "created_at": "2017-10-19T05:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365358",
    "user": "https://github.com/rwst"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@jdemeyer](#comment%3A24):
> There should be a change in the sympy patchlevel if you change patches (including removing them!)

There is a change in patchlevel in #20204 which includes this ticket.



---

archive/issue_comments_365359.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@rwst](#comment%3A27):\n> Replying to [@jdemeyer](#comment%3A24):\n> > There should be a change in the sympy patchlevel if you change patches (including removing them!)\n\n> \n> There is a change in patchlevel in #20204 which includes this ticket.\n\nThat is irrelevant. **This** ticket removes a patch so **this** ticket should increase the patchlevel of sympy.",
    "created_at": "2017-10-19T08:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365359",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@rwst](#comment%3A27):
> Replying to [@jdemeyer](#comment%3A24):
> > There should be a change in the sympy patchlevel if you change patches (including removing them!)

> 
> There is a change in patchlevel in #20204 which includes this ticket.

That is irrelevant. **This** ticket removes a patch so **this** ticket should increase the patchlevel of sympy.



---

archive/issue_events_304002.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-19T08:24:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304002"
}
```



---

archive/issue_events_304003.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-19T08:24:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304003"
}
```



---

archive/issue_comments_365360.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@rwst](#comment%3A26):\n> I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.\n\nFine for me.\n\nMy suggestion was to patch sympy itself.",
    "created_at": "2017-10-19T08:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365360",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@rwst](#comment%3A26):
> I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.

Fine for me.

My suggestion was to patch sympy itself.



---

archive/issue_comments_365361.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@jdemeyer](#comment%3A29):\n> My suggestion was to patch sympy itself.\n\nYou said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'",
    "created_at": "2017-10-19T09:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365361",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@jdemeyer](#comment%3A29):
> My suggestion was to patch sympy itself.

You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'



---

archive/issue_comments_365362.json:
```json
{
    "body": "Changed commit from **[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)** to **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**",
    "created_at": "2017-10-19T13:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365362",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)** to **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**



---

archive/issue_comments_365363.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34\">9169924</a></td><td><code>Merge branch 'develop' into t/24006/24006</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7\">d43419f</a></td><td><code>24006: bump sympy patchlevel</code></td></tr></table>\n",
    "created_at": "2017-10-19T13:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365363",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>Comment 31:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34">9169924</a></td><td><code>Merge branch 'develop' into t/24006/24006</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7">d43419f</a></td><td><code>24006: bump sympy patchlevel</code></td></tr></table>




---

archive/issue_events_304004.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304004"
}
```



---

archive/issue_events_304005.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304005"
}
```



---

archive/issue_events_304006.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304006"
}
```



---

archive/issue_events_304007.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304007"
}
```



---

archive/issue_comments_365364.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nOkay the patchlevel is bumped here and the `sympy_init` call placed in `sympy/__init__` (see #24067). Please review.",
    "created_at": "2017-10-19T14:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365364",
    "user": "https://github.com/rwst"
}
```

<a id='comment:32'>Comment 32:</a>
Okay the patchlevel is bumped here and the `sympy_init` call placed in `sympy/__init__` (see #24067). Please review.



---

archive/issue_comments_365365.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@rwst](#comment%3A30):\n> Replying to [@jdemeyer](#comment%3A29):\n> > My suggestion was to patch sympy itself.\n\n> \n> You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'\n\nExactly. I gave two possible solutions, both of which involve patching sympy.",
    "created_at": "2017-10-19T20:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365365",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@rwst](#comment%3A30):
> Replying to [@jdemeyer](#comment%3A29):
> > My suggestion was to patch sympy itself.

> 
> You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'

Exactly. I gave two possible solutions, both of which involve patching sympy.



---

archive/issue_events_304008.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T14:34:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304008"
}
```



---

archive/issue_events_304009.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T14:34:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304009"
}
```



---

archive/issue_comments_365366.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nThanks.",
    "created_at": "2017-10-20T14:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365366",
    "user": "https://github.com/rwst"
}
```

<a id='comment:35'>Comment 35:</a>
Thanks.



---

archive/issue_events_304010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:05:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304010"
}
```



---

archive/issue_events_304011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304011"
}
```



---

archive/issue_comments_365367.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nReviewer name",
    "created_at": "2017-10-21T19:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365367",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'>Comment 36:</a>
Reviewer name



---

archive/issue_comments_365368.json:
```json
{
    "body": "Reviewer: **Marco Mancini, Jeroen Demeyer**",
    "created_at": "2017-10-23T23:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365368",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Marco Mancini, Jeroen Demeyer**



---

archive/issue_events_304012.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:25:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304012"
}
```



---

archive/issue_events_304013.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:25:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304013"
}
```



---

archive/issue_events_304014.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T10:31:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304014"
}
```



---

archive/issue_events_304015.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0ee8241017ee730a7e5240026f52872fcdc5e6ca",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-29T10:31:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-304015"
}
```



---

archive/issue_comments_365369.json:
```json
{
    "body": "Changed branch from **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)** to **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**",
    "created_at": "2017-10-29T10:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365369",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)** to **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**



---

archive/issue_comments_365370.json:
```json
{
    "body": "Changed commit from **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)** to none",
    "created_at": "2017-12-07T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365370",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)** to none



---

archive/issue_comments_365371.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nI just noticed this:\n\n```\n################################################################\n#   Distributed under GNU GPL3, see www.gnu.org\n################################################################\n```\n\nThis is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later.\n\nDo you agree to change this to GPL version 2 or later?",
    "created_at": "2017-12-07T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365371",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'>Comment 39:</a>
I just noticed this:

```
################################################################
#   Distributed under GNU GPL3, see www.gnu.org
################################################################
```

This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later.

Do you agree to change this to GPL version 2 or later?



---

archive/issue_comments_365372.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nAlso, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?",
    "created_at": "2017-12-07T10:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365372",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>Comment 40:</a>
Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?



---

archive/issue_comments_365373.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nReplying to [@jdemeyer](#comment%3A39):\n> I just noticed this:\n> \n> ```\n> ################################################################\n> #   Distributed under GNU GPL3, see www.gnu.org\n> ################################################################\n> ```\n> \n> This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later. \n> Do you agree to change this to GPL version 2 or later?\n\nAgree. Actually I intended 2.",
    "created_at": "2017-12-07T13:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365373",
    "user": "https://github.com/rwst"
}
```

<a id='comment:41'>Comment 41:</a>
Replying to [@jdemeyer](#comment%3A39):
> I just noticed this:
> 
> ```
> ################################################################
> #   Distributed under GNU GPL3, see www.gnu.org
> ################################################################
> ```
> 
> This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later. 
> Do you agree to change this to GPL version 2 or later?

Agree. Actually I intended 2.



---

archive/issue_comments_365374.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nReplying to [@jdemeyer](#comment%3A40):\n> Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?\n\nThat's fine. Please open a ticket for what you intend to be done.",
    "created_at": "2017-12-07T13:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365374",
    "user": "https://github.com/rwst"
}
```

<a id='comment:42'>Comment 42:</a>
Replying to [@jdemeyer](#comment%3A40):
> Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?

That's fine. Please open a ticket for what you intend to be done.



---

archive/issue_comments_365375.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nReplying to [@rwst](#comment%3A42):\n> That's fine. Please open a ticket for what you intend to be done.\n\nDone: #24067",
    "created_at": "2017-12-07T13:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-365375",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'>Comment 43:</a>
Replying to [@rwst](#comment%3A42):
> That's fine. Please open a ticket for what you intend to be done.

Done: #24067
