# Issue 24006: SymPy --> Sage conversion completely inside Sage

archive/issues_023769.json:
```json
{
    "assignees": [],
    "body": "There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n\nThis branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.\n\nSee https://github.com/sympy/sympy/issues/13430\n\nDepends on #23990\n\nCC:  @EmmanuelCharpentier\n\nBranch: **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**\n\nReviewer: **Marco Mancini, Jeroen Demeyer**\n\nAuthor: **Ralf Stephan**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24006_\n\n",
    "closed_at": "2017-10-29T10:31:51Z",
    "created_at": "2017-10-10T15:41:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "SymPy --> Sage conversion completely inside Sage",
    "type": "issue",
    "updated_at": "2017-12-07T13:51:12Z",
    "url": "https://github.com/sagemath/sage/issues/24006",
    "user": "https://github.com/rwst"
}
```
There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.

This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.

See https://github.com/sympy/sympy/issues/13430

Depends on #23990

CC:  @EmmanuelCharpentier

Branch: **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**

Reviewer: **Marco Mancini, Jeroen Demeyer**

Author: **Ralf Stephan**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/24006_





---

archive/issue_events_330435.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330435"
}
```



---

archive/issue_events_330436.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330436"
}
```



---

archive/issue_events_330437.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330437"
}
```



---

archive/issue_events_330438.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-10T15:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330438"
}
```



---

archive/issue_comments_362569.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n \n This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.\n+\n+See https://github.com/sympy/sympy/issues/13430\n``````\n",
    "created_at": "2017-10-10T15:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362569",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.
 
 This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.
+
+See https://github.com/sympy/sympy/issues/13430
``````




---

archive/issue_comments_362570.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nProof of concept:\n\n```\nsage: from sympy import Symbol\n....: from sage.symbolic.ring import SR\n....: \n....: def _sympysage_symbol(self):\n....:     return SR.var(self.name)\n....: \n....: Symbol.sage = _sympysage_symbol\n....: \nsage: x._sympy_()\nx\nsage: type(_)\n<class 'sympy.core.symbol.Symbol'>\nsage: x._sympy_()\nx\nsage: _.sage()\nx\nsage: type(_)\n<type 'sage.symbolic.expression.Expression'>\n```",
    "created_at": "2017-10-10T16:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362570",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Proof of concept:

```
sage: from sympy import Symbol
....: from sage.symbolic.ring import SR
....: 
....: def _sympysage_symbol(self):
....:     return SR.var(self.name)
....: 
....: Symbol.sage = _sympysage_symbol
....: 
sage: x._sympy_()
x
sage: type(_)
<class 'sympy.core.symbol.Symbol'>
sage: x._sympy_()
x
sage: _.sage()
x
sage: type(_)
<type 'sage.symbolic.expression.Expression'>
```



---

archive/issue_comments_362571.json:
```json
{
    "body": "Branch: **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)**",
    "created_at": "2017-10-11T15:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362571",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)**



---

archive/issue_comments_362572.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis naive attempt already works in first tests. Setting review in order to get startup timings from the patchbots.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1\"><code>252e5cb</code></a></td><td><code>24006: SymPy/Sage conversion</code></td></tr></table>\n",
    "created_at": "2017-10-11T15:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362572",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

This naive attempt already works in first tests. Setting review in order to get startup timings from the patchbots.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1"><code>252e5cb</code></a></td><td><code>24006: SymPy/Sage conversion</code></td></tr></table>




---

archive/issue_comments_362573.json:
```json
{
    "body": "Commit: **[`252e5cb`](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)**",
    "created_at": "2017-10-11T15:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362573",
    "user": "https://github.com/rwst"
}
```

Commit: **[`252e5cb`](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)**



---

archive/issue_events_330439.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T15:30:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330439"
}
```



---

archive/issue_comments_362574.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI get a ton of errors when ptesting it over 8.1.beta7+#23990. The resulting log file is too large to be uploaded (3,2 Mb gzipped, 332,2 Mb (!!!) uncompressed).\n\nI'll try `make distclean ; make ptestlong`, but don't hold your breath...\n\nNot changing status, pending second attempt to build.",
    "created_at": "2017-10-11T18:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362574",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:6" align="right">comment:6</div>

I get a ton of errors when ptesting it over 8.1.beta7+#23990. The resulting log file is too large to be uploaded (3,2 Mb gzipped, 332,2 Mb (!!!) uncompressed).

I'll try `make distclean ; make ptestlong`, but don't hold your breath...

Not changing status, pending second attempt to build.



---

archive/issue_comments_362575.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nDon't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.",
    "created_at": "2017-10-11T19:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362575",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.



---

archive/issue_events_330440.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T19:25:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330440"
}
```



---

archive/issue_events_330441.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-11T19:25:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330441"
}
```



---

archive/issue_comments_362576.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@rwst](#comment:7):\n> Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.\n\nAaaarghhh... I *did* waste CPU. For some (now unscrutable) reason, I have been unable to `make` sage : some plot used in the documentation refuses to build.\n\nCurrently ptesting 8.1.beta7+#23990 again to check that the problemis indeed with the present patch (and reinstalling my 434 or so R packages...).\n\nThe next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?",
    "created_at": "2017-10-12T04:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362576",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@rwst](#comment:7):
> Don't waste CPU, I just wanted a patchbot on it, for the startup time. But I'm afraid already there is a 25% increase so this must be done lazily.  I haven't debugged it at all.

Aaaarghhh... I *did* waste CPU. For some (now unscrutable) reason, I have been unable to `make` sage : some plot used in the documentation refuses to build.

Currently ptesting 8.1.beta7+#23990 again to check that the problemis indeed with the present patch (and reinstalling my 434 or so R packages...).

The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?



---

archive/issue_comments_362577.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@EmmanuelCharpentier](#comment:8):\n> The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?\n\nSorry I was not clear enough in [comment:4](#comment:4)",
    "created_at": "2017-10-12T04:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362577",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@EmmanuelCharpentier](#comment:8):
> The next time you position `needs_review` to get the attention of a patchbot, could you leave a note to potential reviewers ?

Sorry I was not clear enough in [comment:4](#comment:4)



---

archive/issue_comments_362578.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nActually the code was really bad Python, one can see it is not the language I'm used to.",
    "created_at": "2017-10-12T06:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362578",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

Actually the code was really bad Python, one can see it is not the language I'm used to.



---

archive/issue_comments_362579.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAlso, we may have to adapt to the `_sage_` convention. Yes, all interfaces in `src/sage/interface` even Mma use it.",
    "created_at": "2017-10-12T07:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362579",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">comment:11</div>

Also, we may have to adapt to the `_sage_` convention. Yes, all interfaces in `src/sage/interface` even Mma use it.



---

archive/issue_comments_362580.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97\"><code>31e038d</code></a></td><td><code>24006: fixes</code></td></tr></table>\n",
    "created_at": "2017-10-12T09:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362580",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97"><code>31e038d</code></a></td><td><code>24006: fixes</code></td></tr></table>




---

archive/issue_comments_362581.json:
```json
{
    "body": "Changed commit from **[`252e5cb`](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)** to **[`31e038d`](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)**",
    "created_at": "2017-10-12T09:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`252e5cb`](https://github.com/sagemath/sagetrac-mirror/commit/252e5cb3ec0b8a4c16d1576d5060c73632aa1ec1)** to **[`31e038d`](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)**



---

archive/issue_comments_362582.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c3c37d50390480eb30dd6cbc3849e0564fb9618\"><code>8c3c37d</code></a></td><td><code>fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c\"><code>6e36053</code></a></td><td><code>24006: fixes, first part of doctests</code></td></tr></table>\n",
    "created_at": "2017-10-14T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362582",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c3c37d50390480eb30dd6cbc3849e0564fb9618"><code>8c3c37d</code></a></td><td><code>fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c"><code>6e36053</code></a></td><td><code>24006: fixes, first part of doctests</code></td></tr></table>




---

archive/issue_comments_362583.json:
```json
{
    "body": "Changed commit from **[`31e038d`](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)** to **[`6e36053`](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)**",
    "created_at": "2017-10-14T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31e038d`](https://github.com/sagemath/sagetrac-mirror/commit/31e038dd31218ba48434beb93455b71c8f484b97)** to **[`6e36053`](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)**



---

archive/issue_comments_362584.json:
```json
{
    "body": "Changed branch from **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)** to **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)**",
    "created_at": "2017-10-15T15:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362584",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/experimental__sympy_____sage_conversion_completely_inside_sage](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/experimental__sympy_____sage_conversion_completely_inside_sage)** to **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)**



---

archive/issue_comments_362585.json:
```json
{
    "body": "Changed commit from **[`6e36053`](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)** to **[`3e362ee`](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)**",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362585",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`6e36053`](https://github.com/sagemath/sagetrac-mirror/commit/6e36053c039d27d6abacfb8aefd6f5925d13295c)** to **[`3e362ee`](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)**



---

archive/issue_events_330442.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330442"
}
```



---

archive/issue_events_330443.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330443"
}
```



---

archive/issue_events_330444.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-15T15:23:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "title_is": "SymPy --> Sage conversion completely inside Sage",
    "title_was": "experimental: SymPy --> Sage conversion completely inside Sage",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330444"
}
```



---

archive/issue_comments_362586.json:
```json
{
    "body": "Dependencies: **#23990**",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362586",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#23990**



---

archive/issue_comments_362587.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.\n \n-This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.\n+This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.\n \n See https://github.com/sympy/sympy/issues/13430\n``````\n",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362587",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 There are 46 SymPy object member functions named `_sage_()` that comprise the SymPy-->Sage conversion facility. It turns out that automatic testing the code at the SymPy Travis never worked and is difficult to fix because of fitting Sage into Travis. Secondly, after initial work on it by SymPy authors work is now mainly motivated with Sage development where the maintenance of interdependent Sage and SymPy patches begins to be unwieldy and error-prone.
 
-This branch contains experimental code that dynamically adds `sage()` methods on Sage startup to the relevant objects.
+This branch contains experimental code that dynamically adds `_sage()_` methods on the first SymPy conversion to the relevant objects.
 
 See https://github.com/sympy/sympy/issues/13430
``````




---

archive/issue_comments_362588.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis new branch is now ready for review. It already passes all symbolic tests. It may fail in other Sage parts where symbolics are used. Let's put the patchbots on it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98\"><code>9462954</code></a></td><td><code>23990: Convert symbolic relations to SymPy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9\"><code>07f4744</code></a></td><td><code>23990: handle unequality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a\"><code>0ed659f</code></a></td><td><code>23990: do not evaluate</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc\"><code>5f023ea</code></a></td><td><code>23990: convert relations from SymPy to Sage, with test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816\"><code>0f596bb</code></a></td><td><code>23990: fix patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f\"><code>479e206</code></a></td><td><code>23990: sympy patchlevel bump</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321\"><code>3e362ee</code></a></td><td><code>24006: SymPy --> Sage conversion completely inside Sage</code></td></tr></table>\n",
    "created_at": "2017-10-15T15:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362588",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

This new branch is now ready for review. It already passes all symbolic tests. It may fail in other Sage parts where symbolics are used. Let's put the patchbots on it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98"><code>9462954</code></a></td><td><code>23990: Convert symbolic relations to SymPy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9"><code>07f4744</code></a></td><td><code>23990: handle unequality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a"><code>0ed659f</code></a></td><td><code>23990: do not evaluate</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc"><code>5f023ea</code></a></td><td><code>23990: convert relations from SymPy to Sage, with test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816"><code>0f596bb</code></a></td><td><code>23990: fix patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f"><code>479e206</code></a></td><td><code>23990: sympy patchlevel bump</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321"><code>3e362ee</code></a></td><td><code>24006: SymPy --> Sage conversion completely inside Sage</code></td></tr></table>




---

archive/issue_comments_362589.json:
```json
{
    "body": "Attachment: **[dochtml.log.gz](https://github.com/sagemath/sage/files/ticket24006/dochtml.log.gz)**\n\nLog of a failed attempt to build the documentation.",
    "created_at": "2017-10-15T19:23:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362589",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Attachment: **[dochtml.log.gz](https://github.com/sagemath/sage/files/ticket24006/dochtml.log.gz)**

Log of a failed attempt to build the documentation.



---

archive/issue_events_330445.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-15T19:29:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330445"
}
```



---

archive/issue_events_330446.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-15T19:29:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330446"
}
```



---

archive/issue_comments_362590.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOn top of #24026 (which needs review ;-), I can't even build the documentation (hence no formal testing possible). See uploaded log.\n\nAnd yes, I did `./sage -f sympy` before `( make doc-clean && make ptestlong)`.\n\n==>`needs_work`",
    "created_at": "2017-10-15T19:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362590",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:16" align="right">comment:16</div>

On top of #24026 (which needs review ;-), I can't even build the documentation (hence no formal testing possible). See uploaded log.

And yes, I did `./sage -f sympy` before `( make doc-clean && make ptestlong)`.

==>`needs_work`



---

archive/issue_comments_362591.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74\"><code>8dd5f88</code></a></td><td><code>24006: add missing file, fixes</code></td></tr></table>\n",
    "created_at": "2017-10-16T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74"><code>8dd5f88</code></a></td><td><code>24006: add missing file, fixes</code></td></tr></table>




---

archive/issue_comments_362592.json:
```json
{
    "body": "Changed commit from **[`3e362ee`](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)** to **[`8dd5f88`](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)**",
    "created_at": "2017-10-16T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362592",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e362ee`](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)** to **[`8dd5f88`](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)**



---

archive/issue_comments_362593.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2017-10-16T14:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362593",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_events_330447.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-16T14:31:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330447"
}
```



---

archive/issue_events_330448.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-16T14:31:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330448"
}
```



---

archive/issue_comments_362594.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nApologies again, the main file was missing, and more changes.",
    "created_at": "2017-10-16T14:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362594",
    "user": "https://github.com/rwst"
}
```

<div id="comment:18" align="right">comment:18</div>

Apologies again, the main file was missing, and more changes.



---

archive/issue_comments_362595.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nTesting on top of #24026, `ptestlong` gives me two errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/libs/gap/assigned_names.py  # 1 doctest failed\nsage -t --long src/sage/schemes/elliptic_curves/sha_tate.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nBoth are transient (i. e. both tests pass when ran standalone).\n\nAn example of possible usefulness :\n\n```\nsage: dgamma(y,k,theta)=y^(k-1)*e^(-y/theta)/(theta^k*gamma(k))\nsage: (dgamma(y,k,theta).laplace(y,x)^p).expand().canonicalize_radical().inverse\n....: _laplace(x,y)\nilt(1/((theta*x + 1)^(k*p)), x, y)\nsage: sympy.inverse_laplace_transform((dgamma(y,k,theta).laplace(y,x)^p).expand(\n....: ).canonicalize_radical(),x,y)._sage_()\nk*p*theta^(-k*p)*y^(k*p - 1)*e^(-y/theta)*heaviside(y)/gamma(k*p + 1)\n```\n\nI won't be able to test further right now. I'll try to find more examples (that could be useful doctests...).\n\nDid you translate Sympy's conditional expressions in your recent `cases` ?\n\nAnother thought : we might subclass `sage()` as a wrapper for `_sage_()` possibly allowing for further arguments, such as supplementary translation dictionaries, as originally intended for mathematica.sage() (but this does not seem to worl currently...). Another ticket ?\n\nOh, BTW : `positive_review`",
    "created_at": "2017-10-16T16:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362595",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:19" align="right">comment:19</div>

Testing on top of #24026, `ptestlong` gives me two errors :

```
----------------------------------------------------------------------
sage -t --long src/sage/libs/gap/assigned_names.py  # 1 doctest failed
sage -t --long src/sage/schemes/elliptic_curves/sha_tate.py  # 1 doctest failed
----------------------------------------------------------------------
```
Both are transient (i. e. both tests pass when ran standalone).

An example of possible usefulness :

```
sage: dgamma(y,k,theta)=y^(k-1)*e^(-y/theta)/(theta^k*gamma(k))
sage: (dgamma(y,k,theta).laplace(y,x)^p).expand().canonicalize_radical().inverse
....: _laplace(x,y)
ilt(1/((theta*x + 1)^(k*p)), x, y)
sage: sympy.inverse_laplace_transform((dgamma(y,k,theta).laplace(y,x)^p).expand(
....: ).canonicalize_radical(),x,y)._sage_()
k*p*theta^(-k*p)*y^(k*p - 1)*e^(-y/theta)*heaviside(y)/gamma(k*p + 1)
```

I won't be able to test further right now. I'll try to find more examples (that could be useful doctests...).

Did you translate Sympy's conditional expressions in your recent `cases` ?

Another thought : we might subclass `sage()` as a wrapper for `_sage_()` possibly allowing for further arguments, such as supplementary translation dictionaries, as originally intended for mathematica.sage() (but this does not seem to worl currently...). Another ticket ?

Oh, BTW : `positive_review`



---

archive/issue_events_330449.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-16T16:50:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330449"
}
```



---

archive/issue_events_330450.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-16T16:50:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330450"
}
```



---

archive/issue_comments_362596.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@EmmanuelCharpentier](#comment:19):\n> Did you translate Sympy's conditional expressions in your recent `cases` ?\n\nSee #23923\n\n> Oh, BTW : `positive_review`\n\nThanks.",
    "created_at": "2017-10-17T06:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362596",
    "user": "https://github.com/rwst"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@EmmanuelCharpentier](#comment:19):
> Did you translate Sympy's conditional expressions in your recent `cases` ?

See #23923

> Oh, BTW : `positive_review`

Thanks.



---

archive/issue_comments_362597.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello,\n\nI am trying to extend your interface to the function Subs:\n\n```\ndH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\n```\n\nwhere h is an abstract function.\n\nI tried to add the function in src/interfaces/sympy.py :  \n\n```\ndef _sympysage_Subs(self):\n    \"\"\"\n    EXAMPLES::\n\n        sage: from sympy import Symbol\n        sage: from sympy.core.singleton import S\n    \"\"\"\n\n    args = self.args\n    func = args[0]\n    substi = [(args[1][i],args[2][i]) for i in range(len(args[1]))]\n\n    print (substi)\n    #s = args[0].subs(substi)\n    return s\n\n```\n\nBut I am experimenting recursion problems (for this reason s is commented).\nI tried to use the function Subs(...).doit() but it has no effect.",
    "created_at": "2017-10-17T14:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362597",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello,

I am trying to extend your interface to the function Subs:

```
dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
```

where h is an abstract function.

I tried to add the function in src/interfaces/sympy.py :  

```
def _sympysage_Subs(self):
    """
    EXAMPLES::

        sage: from sympy import Symbol
        sage: from sympy.core.singleton import S
    """

    args = self.args
    func = args[0]
    substi = [(args[1][i],args[2][i]) for i in range(len(args[1]))]

    print (substi)
    #s = args[0].subs(substi)
    return s

```

But I am experimenting recursion problems (for this reason s is commented).
I tried to use the function Subs(...).doit() but it has no effect.



---

archive/issue_comments_362598.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOn top of #20204 I get with your code (comment removed):\n\n```\nsage: from sympy import Subs, Derivative, Function, Symbol\nsage: _xi_1 = Symbol('_xi_1')\nsage: u = Symbol('u')\nsage: v = Symbol('v')\nsage: h = Function('h')\nsage: x._sympy_()\nx\nsage: dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\nsage: dH._sage_()\n[(_xi_1, u/2 + v/2)]\nSubs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))\n```\nUsing this code however:\n\n```\n    args = self.args\n    substi = dict([(args[1][i]._sage_(),args[2][i]._sage_()) for i in range(len(args[1]))])\n    s = args[0]._sage_().subs(substi)\n```\nI get:\n\n```\nsage: dH._sage_()\nD[0](h)(1/2*u + 1/2*v, 1/2*u - 1/2*v)\n```",
    "created_at": "2017-10-18T06:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362598",
    "user": "https://github.com/rwst"
}
```

<div id="comment:22" align="right">comment:22</div>

On top of #20204 I get with your code (comment removed):

```
sage: from sympy import Subs, Derivative, Function, Symbol
sage: _xi_1 = Symbol('_xi_1')
sage: u = Symbol('u')
sage: v = Symbol('v')
sage: h = Function('h')
sage: x._sympy_()
x
sage: dH = Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
sage: dH._sage_()
[(_xi_1, u/2 + v/2)]
Subs(Derivative(h(_xi_1, u/2 - v/2), _xi_1), (_xi_1,), (u/2 + v/2,))
```
Using this code however:

```
    args = self.args
    substi = dict([(args[1][i]._sage_(),args[2][i]._sage_()) for i in range(len(args[1]))])
    s = args[0]._sage_().subs(substi)
```
I get:

```
sage: dH._sage_()
D[0](h)(1/2*u + 1/2*v, 1/2*u - 1/2*v)
```



---

archive/issue_comments_362599.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSo, doing the conversion to sage and then the substitution it works. \nFantastic. \nThe substitutions didn't work in sympy only.\nThanks",
    "created_at": "2017-10-18T08:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362599",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:23" align="right">comment:23</div>

So, doing the conversion to sage and then the substitution it works. 
Fantastic. 
The substitutions didn't work in sympy only.
Thanks



---

archive/issue_comments_362600.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThere should be a change in the sympy patchlevel if you change patches (including removing them!)",
    "created_at": "2017-10-18T20:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362600",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

There should be a change in the sympy patchlevel if you change patches (including removing them!)



---

archive/issue_events_330451.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-18T20:37:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330451"
}
```



---

archive/issue_events_330452.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-18T20:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330452"
}
```



---

archive/issue_comments_362601.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSorry to spoil the party, but I don't think that it's good to require that the user does `sympy_init()` in order for Sympy -> Sage conversion to work. In my view, it would be much better to fix it upstream in sympy. Ideally, you should either fix sympy to fix the `_sage_()` method in sympy or to call `sympy_init()` whenever `sympy` is imported.",
    "created_at": "2017-10-18T20:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362601",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Sorry to spoil the party, but I don't think that it's good to require that the user does `sympy_init()` in order for Sympy -> Sage conversion to work. In my view, it would be much better to fix it upstream in sympy. Ideally, you should either fix sympy to fix the `_sage_()` method in sympy or to call `sympy_init()` whenever `sympy` is imported.



---

archive/issue_comments_362602.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jdemeyer](#comment:25):\n> ....or to call `sympy_init()` whenever `sympy` is imported.\n\nSo, how to do that? Note that #20204 already has positive review and it includes this ticket. I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.",
    "created_at": "2017-10-19T05:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362602",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jdemeyer](#comment:25):
> ....or to call `sympy_init()` whenever `sympy` is imported.

So, how to do that? Note that #20204 already has positive review and it includes this ticket. I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.



---

archive/issue_events_330453.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T05:44:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330453"
}
```



---

archive/issue_events_330454.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T05:44:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330454"
}
```



---

archive/issue_comments_362603.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jdemeyer](#comment:24):\n> There should be a change in the sympy patchlevel if you change patches (including removing them!)\n\nThere is a change in patchlevel in #20204 which includes this ticket.",
    "created_at": "2017-10-19T05:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362603",
    "user": "https://github.com/rwst"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jdemeyer](#comment:24):
> There should be a change in the sympy patchlevel if you change patches (including removing them!)

There is a change in patchlevel in #20204 which includes this ticket.



---

archive/issue_comments_362604.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@rwst](#comment:27):\n> Replying to [@jdemeyer](#comment:24):\n> > There should be a change in the sympy patchlevel if you change patches (including removing them!)\n\n> \n> There is a change in patchlevel in #20204 which includes this ticket.\n\nThat is irrelevant. **This** ticket removes a patch so **this** ticket should increase the patchlevel of sympy.",
    "created_at": "2017-10-19T08:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362604",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@rwst](#comment:27):
> Replying to [@jdemeyer](#comment:24):
> > There should be a change in the sympy patchlevel if you change patches (including removing them!)

> 
> There is a change in patchlevel in #20204 which includes this ticket.

That is irrelevant. **This** ticket removes a patch so **this** ticket should increase the patchlevel of sympy.



---

archive/issue_events_330455.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-19T08:24:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330455"
}
```



---

archive/issue_events_330456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-19T08:24:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330456"
}
```



---

archive/issue_comments_362605.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@rwst](#comment:26):\n> I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.\n\nFine for me.\n\nMy suggestion was to patch sympy itself.",
    "created_at": "2017-10-19T08:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362605",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@rwst](#comment:26):
> I'm offering to implement your suggestion in another ticket which can be put on top of it all because there is no pressing need for it.

Fine for me.

My suggestion was to patch sympy itself.



---

archive/issue_comments_362606.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jdemeyer](#comment:29):\n> My suggestion was to patch sympy itself.\n\nYou said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'",
    "created_at": "2017-10-19T09:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362606",
    "user": "https://github.com/rwst"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jdemeyer](#comment:29):
> My suggestion was to patch sympy itself.

You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'



---

archive/issue_comments_362607.json:
```json
{
    "body": "Changed commit from **[`8dd5f88`](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)** to **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**",
    "created_at": "2017-10-19T13:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8dd5f88`](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)** to **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**



---

archive/issue_comments_362608.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34\"><code>9169924</code></a></td><td><code>Merge branch 'develop' into t/24006/24006</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7\"><code>d43419f</code></a></td><td><code>24006: bump sympy patchlevel</code></td></tr></table>\n",
    "created_at": "2017-10-19T13:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362608",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34"><code>9169924</code></a></td><td><code>Merge branch 'develop' into t/24006/24006</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7"><code>d43419f</code></a></td><td><code>24006: bump sympy patchlevel</code></td></tr></table>




---

archive/issue_events_330457.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330457"
}
```



---

archive/issue_events_330458.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330458"
}
```



---

archive/issue_events_330459.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330459"
}
```



---

archive/issue_events_330460.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:22:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330460"
}
```



---

archive/issue_comments_362609.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOkay the patchlevel is bumped here and the `sympy_init` call placed in `sympy/__init__` (see #24067). Please review.",
    "created_at": "2017-10-19T14:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362609",
    "user": "https://github.com/rwst"
}
```

<div id="comment:32" align="right">comment:32</div>

Okay the patchlevel is bumped here and the `sympy_init` call placed in `sympy/__init__` (see #24067). Please review.



---

archive/issue_comments_362610.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@rwst](#comment:30):\n> Replying to [@jdemeyer](#comment:29):\n> > My suggestion was to patch sympy itself.\n\n> \n> You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'\n\nExactly. I gave two possible solutions, both of which involve patching sympy.",
    "created_at": "2017-10-19T20:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362610",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@rwst](#comment:30):
> Replying to [@jdemeyer](#comment:29):
> > My suggestion was to patch sympy itself.

> 
> You said '...you should either fix sympy to fix the _sage_() method in sympy or to call sympy_init() whenever sympy is imported.'

Exactly. I gave two possible solutions, both of which involve patching sympy.



---

archive/issue_events_330461.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T14:34:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330461"
}
```



---

archive/issue_events_330462.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T14:34:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330462"
}
```



---

archive/issue_comments_362611.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThanks.",
    "created_at": "2017-10-20T14:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362611",
    "user": "https://github.com/rwst"
}
```

<div id="comment:35" align="right">comment:35</div>

Thanks.



---

archive/issue_events_330463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:05:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330463"
}
```



---

archive/issue_events_330464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330464"
}
```



---

archive/issue_comments_362612.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReviewer name",
    "created_at": "2017-10-21T19:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362612",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:36" align="right">comment:36</div>

Reviewer name



---

archive/issue_comments_362613.json:
```json
{
    "body": "Reviewer: **Marco Mancini, Jeroen Demeyer**",
    "created_at": "2017-10-23T23:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362613",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Marco Mancini, Jeroen Demeyer**



---

archive/issue_events_330465.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:25:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330465"
}
```



---

archive/issue_events_330466.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:25:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330466"
}
```



---

archive/issue_events_330467.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T10:31:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330467"
}
```



---

archive/issue_events_330468.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0ee8241017ee730a7e5240026f52872fcdc5e6ca",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-29T10:31:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24006#event-330468"
}
```



---

archive/issue_comments_362614.json:
```json
{
    "body": "Changed branch from **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)** to **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**",
    "created_at": "2017-10-29T10:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362614",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/24006](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24006)** to **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)**



---

archive/issue_comments_362615.json:
```json
{
    "body": "Changed commit from **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)** to none",
    "created_at": "2017-12-07T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362615",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`d43419f`](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)** to none



---

archive/issue_comments_362616.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI just noticed this:\n\n```\n################################################################\n#   Distributed under GNU GPL3, see www.gnu.org\n################################################################\n```\n\nThis is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later.\n\nDo you agree to change this to GPL version 2 or later?",
    "created_at": "2017-12-07T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

I just noticed this:

```
################################################################
#   Distributed under GNU GPL3, see www.gnu.org
################################################################
```

This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later.

Do you agree to change this to GPL version 2 or later?



---

archive/issue_comments_362617.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAlso, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?",
    "created_at": "2017-12-07T10:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362617",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?



---

archive/issue_comments_362618.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jdemeyer](#comment:39):\n> I just noticed this:\n> \n> ```\n> ################################################################\n> #   Distributed under GNU GPL3, see www.gnu.org\n> ################################################################\n> ```\n> \n> This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later. \n> Do you agree to change this to GPL version 2 or later?\n\nAgree. Actually I intended 2.",
    "created_at": "2017-12-07T13:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362618",
    "user": "https://github.com/rwst"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jdemeyer](#comment:39):
> I just noticed this:
> 
> ```
> ################################################################
> #   Distributed under GNU GPL3, see www.gnu.org
> ################################################################
> ```
> 
> This is **not acceptable** for Sage, all files in the Sage library are supposed to be licensed under GPL version 2 or later. 
> Do you agree to change this to GPL version 2 or later?

Agree. Actually I intended 2.



---

archive/issue_comments_362619.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jdemeyer](#comment:40):\n> Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?\n\nThat's fine. Please open a ticket for what you intend to be done.",
    "created_at": "2017-12-07T13:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362619",
    "user": "https://github.com/rwst"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jdemeyer](#comment:40):
> Also, I find the names like `_sympysage_float` a bit awkward. If we want to upstream that, we should think about that. Is it OK to change to use names like `Float_sage` (with the same capitalisation as in Sympy)?

That's fine. Please open a ticket for what you intend to be done.



---

archive/issue_comments_362620.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@rwst](#comment:42):\n> That's fine. Please open a ticket for what you intend to be done.\n\nDone: #24067",
    "created_at": "2017-12-07T13:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24006#issuecomment-362620",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@rwst](#comment:42):
> That's fine. Please open a ticket for what you intend to be done.

Done: #24067
