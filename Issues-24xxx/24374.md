# Issue 24374: Upgrade to NetworkX 2.1

archive/issues_024137.json:
```json
{
    "body": "Sage ships NetworkX 1.11. Version 2.1 has been [released on PyPI.](https://pypi.python.org/pypi/networkx/)\n\nWe also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.\n\nThe upstream zip is here: https://files.pythonhosted.org/packages/11/42/f951cc6838a4dff6ce57211c4d7f8444809ccbe2134179950301e5c4c83c/networkx-2.1.zip\n\nCC:  @kiwifb @slel @antonio-rojas\n\nKeywords: upgrade, networkx\n\nBranch/Commit: 9553d85e804047b65ce218645563b2140c2d0b0c\n\nUpstream: Completely fixed; Fix reported upstream\n\nReviewer: David Coudert, Dima Pasechnik\n\nAuthor: Dima Pasechnik, Julian R\u00fcth\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24374\n\n",
    "closed_at": "2018-06-29T22:34:12Z",
    "created_at": "2017-12-14T11:48:15Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Upgrade to NetworkX 2.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24374",
    "user": "https://github.com/dimpase"
}
```
Sage ships NetworkX 1.11. Version 2.1 has been [released on PyPI.](https://pypi.python.org/pypi/networkx/)

We also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.

The upstream zip is here: https://files.pythonhosted.org/packages/11/42/f951cc6838a4dff6ce57211c4d7f8444809ccbe2134179950301e5c4c83c/networkx-2.1.zip

CC:  @kiwifb @slel @antonio-rojas

Keywords: upgrade, networkx

Branch/Commit: 9553d85e804047b65ce218645563b2140c2d0b0c

Upstream: Completely fixed; Fix reported upstream

Reviewer: David Coudert, Dima Pasechnik

Author: Dima Pasechnik, Julian Rüth

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24374





---

archive/issue_comments_455660.json:
```json
{
    "body": "<a id='comment:2'></a>\nreported at https://github.com/networkx/networkx/issues/2799",
    "created_at": "2017-12-15T09:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455660",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
reported at https://github.com/networkx/networkx/issues/2799



---

archive/issue_comments_455661.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2017-12-15T09:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455661",
    "user": "https://github.com/dimpase"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_455662.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. No feedback yet.\" to \"Completely fixed; Fix reported upstream\"",
    "created_at": "2017-12-15T11:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455662",
    "user": "https://github.com/dimpase"
}
```

Changing upstream from "Reported upstream. No feedback yet." to "Completely fixed; Fix reported upstream"



---

archive/issue_comments_455663.json:
```json
{
    "body": "<a id='comment:3'></a>\nthe problem is in `networkx` code a test for `isinstance(n2,int)` should be by right for\n`isinstance(n2,numbers.Integral)`\n\nWith the appropriate change in `algorithms/bipartite/generators.py`, line 67 in master (2.1), everything works\n\n```\nimport numbers\nif isinstance(n2,numbers.Integral):\n```",
    "created_at": "2017-12-15T11:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455663",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
the problem is in `networkx` code a test for `isinstance(n2,int)` should be by right for
`isinstance(n2,numbers.Integral)`

With the appropriate change in `algorithms/bipartite/generators.py`, line 67 in master (2.1), everything works

```
import numbers
if isinstance(n2,numbers.Integral):
```



---

archive/issue_comments_455664.json:
```json
{
    "body": "<a id='comment:4'></a>\nSince a new release of NetworkX has the fix to the observed problems, this could move forward.",
    "created_at": "2018-02-14T11:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455664",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'></a>
Since a new release of NetworkX has the fix to the observed problems, this could move forward.



---

archive/issue_comments_455665.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,18 @@\n-the new version of [networks](https://networkx.github.io/) is out since Sept. 2017, \n-and appears to be installable by `sage --pip install networkx` (after doing\n-`sage --pip uninstall networkx`)\n+Sage ships NetworkX 1.11. New versions are available and installable by doing\n+\n+```\n+sage --pip uninstall networkx\n+sage --pip install networkx\n+```\n+We should update.\n+\n+- [GitHub: NetworkX](https://networkx.github.io/)\n+- [[https://pypi.python.org/pypi/networkx/|PyPI: NetworkX||\n  \n-We should update.\n-There are few quirks [already noticed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ): some functions of networkx fail if they are passed Sage's `ZZ()`\n-numbers as parameters (whereas `int()` works).\n+A few quirks in version 2.0 (which came out in 2017-09)\n+[were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):\n+NetworkX methods were no longer accepting Sage integers as arguments.\n+\n+This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)\n+and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).\n+\n``````\n",
    "created_at": "2018-02-14T11:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455665",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,18 @@
-the new version of [networks](https://networkx.github.io/) is out since Sept. 2017, 
-and appears to be installable by `sage --pip install networkx` (after doing
-`sage --pip uninstall networkx`)
+Sage ships NetworkX 1.11. New versions are available and installable by doing
+
+```
+sage --pip uninstall networkx
+sage --pip install networkx
+```
+We should update.
+
+- [GitHub: NetworkX](https://networkx.github.io/)
+- [[https://pypi.python.org/pypi/networkx/|PyPI: NetworkX||
  
-We should update.
-There are few quirks [already noticed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ): some functions of networkx fail if they are passed Sage's `ZZ()`
-numbers as parameters (whereas `int()` works).
+A few quirks in version 2.0 (which came out in 2017-09)
+[were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):
+NetworkX methods were no longer accepting Sage integers as arguments.
+
+This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)
+and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).
+
``````




---

archive/issue_events_077916.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "rename": {
        "from": "update networkx to version 2.0",
        "to": "Upgrade to NetworkX 2.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24374#event-77916"
}
```



---

archive/issue_comments_455666.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n We should update.\n \n - [GitHub: NetworkX](https://networkx.github.io/)\n-- [[https://pypi.python.org/pypi/networkx/|PyPI: NetworkX||\n+- [PyPI: NetworkX](https://pypi.python.org/pypi/networkx/)\n  \n A few quirks in version 2.0 (which came out in 2017-09)\n [were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):\n``````\n",
    "created_at": "2018-02-14T11:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455666",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 We should update.
 
 - [GitHub: NetworkX](https://networkx.github.io/)
-- [[https://pypi.python.org/pypi/networkx/|PyPI: NetworkX||
+- [PyPI: NetworkX](https://pypi.python.org/pypi/networkx/)
  
 A few quirks in version 2.0 (which came out in 2017-09)
 [were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):
``````




---

archive/issue_comments_455667.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2018-02-15T12:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455667",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_455668.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'll make an update.",
    "created_at": "2018-02-15T12:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455668",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
I'll make an update.



---

archive/issue_comments_455669.json:
```json
{
    "body": "<a id='comment:7'></a>\nLet me know if I can help.",
    "created_at": "2018-03-28T18:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455669",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
Let me know if I can help.



---

archive/issue_comments_455670.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'll try to work on the actual upgrade if nobody objects.",
    "created_at": "2018-06-21T17:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455670",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:8'></a>
I'll try to work on the actual upgrade if nobody objects.



---

archive/issue_comments_455671.json:
```json
{
    "body": "<a id='comment:9'></a>\nOh, another ticket I forgot about. Sorry. Please have a go at it - I am marking exams this week...",
    "created_at": "2018-06-21T17:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455671",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
Oh, another ticket I forgot about. Sorry. Please have a go at it - I am marking exams this week...



---

archive/issue_comments_455672.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/24374\"",
    "created_at": "2018-06-21T23:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455672",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/24374"



---

archive/issue_comments_455673.json:
```json
{
    "body": "Attachment [networkx-2.1.tar.gz](tarball://root/attachments/some-uuid/ticket24374/networkx-2.1.tar.gz) by @saraedum created at 2018-06-21 23:18:43\n\nrenamed tarball from github",
    "created_at": "2018-06-21T23:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455673",
    "user": "https://github.com/saraedum"
}
```

Attachment [networkx-2.1.tar.gz](tarball://root/attachments/some-uuid/ticket24374/networkx-2.1.tar.gz) by @saraedum created at 2018-06-21 23:18:43

renamed tarball from github



---

archive/issue_comments_455674.json:
```json
{
    "body": "Changing commit from \"\" to \"ae76acfe05f5ef3d8885196615692ac3ef9c2983\"",
    "created_at": "2018-06-21T23:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455674",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "ae76acfe05f5ef3d8885196615692ac3ef9c2983"



---

archive/issue_comments_455675.json:
```json
{
    "body": "<a id='comment:12'></a>\nI pushed a branch that passes long doctests in `sage/graph/`. I am now running long doctests for all of sage.\n\n---\nNew commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[ae76acf](https://github.com/sagemath/sagetrac-mirror/commit/ae76acfe05f5ef3d8885196615692ac3ef9c2983)|`Upgrade NetworkX to version 2.1`|",
    "created_at": "2018-06-21T23:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455675",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>
I pushed a branch that passes long doctests in `sage/graph/`. I am now running long doctests for all of sage.

---
New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[ae76acf](https://github.com/sagemath/sagetrac-mirror/commit/ae76acfe05f5ef3d8885196615692ac3ef9c2983)|`Upgrade NetworkX to version 2.1`|



---

archive/issue_comments_455676.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.",
    "created_at": "2018-06-21T23:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455676",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.



---

archive/issue_comments_455677.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-21T23:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455677",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455678.json:
```json
{
    "body": "<a id='comment:14'></a>\nI would not be surprised if some things are broken now. There are a lot of subtle changes in networkx and not all code paths are doctested I believe.\n\nSome more comments for potential reviewers:\n* I simplified the SPKG.txt as the changelog has not been mantained for a few years it seems. Also, I am not sure whether the dependencies section is actually useful; numpy and scipy are not hard dependencies. Furthermore, I did not drop src/doc/data as mentioned in the SPKG.txt as I do not see why we should remove that from the source package.\n* I upgraded copyright headers. When there were no copyright headers at all, I added new ones and seeded them with everyone in the git history of the file. The lists of authors are really lengthy but a lot of people have made little changes to these files.\n* I dropped NetworkXGraphBackend as it is not used anywhere. There might still be some pickles around that use this? If so, then we should try to upgrade them on unpickling.\n* The recursive topsort has disappeared it seems.\n* The balanced tree implementation now raises errors if you feed it invalid heights or degrees.",
    "created_at": "2018-06-21T23:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455678",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
I would not be surprised if some things are broken now. There are a lot of subtle changes in networkx and not all code paths are doctested I believe.

Some more comments for potential reviewers:
* I simplified the SPKG.txt as the changelog has not been mantained for a few years it seems. Also, I am not sure whether the dependencies section is actually useful; numpy and scipy are not hard dependencies. Furthermore, I did not drop src/doc/data as mentioned in the SPKG.txt as I do not see why we should remove that from the source package.
* I upgraded copyright headers. When there were no copyright headers at all, I added new ones and seeded them with everyone in the git history of the file. The lists of authors are really lengthy but a lot of people have made little changes to these files.
* I dropped NetworkXGraphBackend as it is not used anywhere. There might still be some pickles around that use this? If so, then we should try to upgrade them on unpickling.
* The recursive topsort has disappeared it seems.
* The balanced tree implementation now raises errors if you feed it invalid heights or degrees.



---

archive/issue_comments_455679.json:
```json
{
    "body": "Changing work_issues from \"\" to \"do all doctests pass?\"",
    "created_at": "2018-06-21T23:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455679",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "do all doctests pass?"



---

archive/issue_comments_455680.json:
```json
{
    "body": "<a id='comment:15'></a>\nIt is totally not kosher to just drop functionality like NetworkXGraphBackend. Why,\nwhat's wrong with it?\nThat it is not used in the Sage library does not mean it is not used by users.\n\nAnd even if you did that it would require a deprecation rather than outright removal...",
    "created_at": "2018-06-22T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455680",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
It is totally not kosher to just drop functionality like NetworkXGraphBackend. Why,
what's wrong with it?
That it is not used in the Sage library does not mean it is not used by users.

And even if you did that it would require a deprecation rather than outright removal...



---

archive/issue_comments_455681.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-22T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455681",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_455682.json:
```json
{
    "body": "<a id='comment:16'></a>\nNetworkXGraphBackend does not seem to be accessible without explicitly importing it. I do not think that things that are internal need to be deprecated before removal.",
    "created_at": "2018-06-22T00:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455682",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:16'></a>
NetworkXGraphBackend does not seem to be accessible without explicitly importing it. I do not think that things that are internal need to be deprecated before removal.



---

archive/issue_comments_455683.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-22T00:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455683",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455684.json:
```json
{
    "body": "<a id='comment:18'></a>\nBtw., it had been deprecated in #18375 it seems.",
    "created_at": "2018-06-22T00:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455684",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:18'></a>
Btw., it had been deprecated in #18375 it seems.



---

archive/issue_comments_455685.json:
```json
{
    "body": "<a id='comment:19'></a>\nNote that some of the NetworkXGraphBackend \"doctests\" start like this:\n\n```\nsage: G = DiGraph(digraphs.Path(5),implementation=\"networkx\")\n/usr/bin/sage-ipython:1: DeprecationWarning: The 'implementation' keyword is deprecated, and the graphs has been stored as a 'c_graph'\nSee http://trac.sagemath.org/18375 for details.\n  #!/usr/bin/env python2\nsage: G = G._backend\n```\n\nHowever, `G` is not a `NetworkXGraphBackend`:\n\n```\nsage: type(G).mro()\n[<type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>,\n <type 'sage.graphs.base.c_graph.CGraphBackend'>,\n <type 'sage.graphs.base.graph_backends.GenericGraphBackend'>,\n <type 'sage.structure.sage_object.SageObject'>,\n <type 'object'>]\n```",
    "created_at": "2018-06-22T00:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455685",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
Note that some of the NetworkXGraphBackend "doctests" start like this:

```
sage: G = DiGraph(digraphs.Path(5),implementation="networkx")
/usr/bin/sage-ipython:1: DeprecationWarning: The 'implementation' keyword is deprecated, and the graphs has been stored as a 'c_graph'
See http://trac.sagemath.org/18375 for details.
  #!/usr/bin/env python2
sage: G = G._backend
```

However, `G` is not a `NetworkXGraphBackend`:

```
sage: type(G).mro()
[<type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>,
 <type 'sage.graphs.base.c_graph.CGraphBackend'>,
 <type 'sage.graphs.base.graph_backends.GenericGraphBackend'>,
 <type 'sage.structure.sage_object.SageObject'>,
 <type 'object'>]
```



---

archive/issue_comments_455686.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [fbissey](#comment%3A13):\n> The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.\n\n\nOk. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?",
    "created_at": "2018-06-22T01:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455686",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>
Replying to [fbissey](#comment%3A13):
> The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.


Ok. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?



---

archive/issue_comments_455687.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,3 +16,5 @@\n This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)\n and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).\n \n+We also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.\n+\n``````\n",
    "created_at": "2018-06-22T01:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455687",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,3 +16,5 @@
 This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)
 and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).
 
+We also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.
+
``````




---

archive/issue_comments_455688.json:
```json
{
    "body": "<a id='comment:21'></a>\nOK, it's fine then. I've modified the ticket description to this effect.\n(Still needs review).\n\nBy the way, I was going to propose more upstream changes, so that it respects integral function arguments in the Python numerical tower, rather than starting screaming any time it's not `int()`. I only did so in a very minimal way, to fix all the uses in Sage library.\nSee https://github.com/networkx/networkx/pull/2800",
    "created_at": "2018-06-22T01:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455688",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>
OK, it's fine then. I've modified the ticket description to this effect.
(Still needs review).

By the way, I was going to propose more upstream changes, so that it respects integral function arguments in the Python numerical tower, rather than starting screaming any time it's not `int()`. I only did so in a very minimal way, to fix all the uses in Sage library.
See https://github.com/networkx/networkx/pull/2800



---

archive/issue_comments_455689.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [saraedum](#comment%3A20):\n> Replying to [fbissey](#comment%3A13):\n> > The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.\n\n> \n> Ok. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?\n\n\nWell pypi ship distribution archives rather than raw tarballs. It is a bit like the difference between a sdist and a raw tarball for an autoconf project. Except that usually the python raw stuff is a bit more easily usable than the raw autoconf stuff where `configure` and friends haven't been generated.",
    "created_at": "2018-06-22T01:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455689",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>
Replying to [saraedum](#comment%3A20):
> Replying to [fbissey](#comment%3A13):
> > The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.

> 
> Ok. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?


Well pypi ship distribution archives rather than raw tarballs. It is a bit like the difference between a sdist and a raw tarball for an autoconf project. Except that usually the python raw stuff is a bit more easily usable than the raw autoconf stuff where `configure` and friends haven't been generated.



---

archive/issue_comments_455690.json:
```json
{
    "body": "<a id='comment:23'></a>\nAbout github tarballs vs pypi tarballs: similar discussion on another ticket:\n- #25083#comment:3",
    "created_at": "2018-06-22T01:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455690",
    "user": "https://github.com/slel"
}
```

<a id='comment:23'></a>
About github tarballs vs pypi tarballs: similar discussion on another ticket:
- #25083#comment:3



---

archive/issue_comments_455691.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, networkx\".",
    "created_at": "2018-06-22T01:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455691",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade, networkx".



---

archive/issue_comments_455692.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [fbissey](#comment%3A22):\n> Replying to [saraedum](#comment%3A20):\n> > Replying to [fbissey](#comment%3A13):\n> > > The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.\n\n> > \n> > Ok. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?\n  \n> \n> Well pypi ship distribution archives rather than raw tarballs. It is a bit like the difference between a sdist and a raw tarball for an autoconf project. Except that usually the python raw stuff is a bit more easily usable than the raw autoconf stuff where `configure` and friends haven't been generated.\n\n\nI think the general practice is to upload distribution tarballs for github releases as well, that's at least what I do ;)",
    "created_at": "2018-06-25T13:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455692",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:24'></a>
Replying to [fbissey](#comment%3A22):
> Replying to [saraedum](#comment%3A20):
> > Replying to [fbissey](#comment%3A13):
> > > The zip archive from pypi is acceptable as a source and we probably should use it instead over renaming the github tarball.

> > 
> > Ok. I don't really mind (except for recomputing the checksums.) I just thought renaming is nice because the archive was named `NetworkX-NetworkX-2.1.tar.gz` or something like that. I also wouldn't mind to use this weird name instead. Is there some reason to prefer pypi over github?
  
> 
> Well pypi ship distribution archives rather than raw tarballs. It is a bit like the difference between a sdist and a raw tarball for an autoconf project. Except that usually the python raw stuff is a bit more easily usable than the raw autoconf stuff where `configure` and friends haven't been generated.


I think the general practice is to upload distribution tarballs for github releases as well, that's at least what I do ;)



---

archive/issue_comments_455693.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[7c1eafd](https://github.com/sagemath/sagetrac-mirror/commit/7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c)|`Upgrading checksums for PYPI's networkx`|",
    "created_at": "2018-06-25T13:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[7c1eafd](https://github.com/sagemath/sagetrac-mirror/commit/7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c)|`Upgrading checksums for PYPI's networkx`|



---

archive/issue_comments_455694.json:
```json
{
    "body": "Changing commit from \"ae76acfe05f5ef3d8885196615692ac3ef9c2983\" to \"7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c\"",
    "created_at": "2018-06-25T13:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ae76acfe05f5ef3d8885196615692ac3ef9c2983" to "7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c"



---

archive/issue_comments_455695.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,20 +1,5 @@\n-Sage ships NetworkX 1.11. New versions are available and installable by doing\n-\n-```\n-sage --pip uninstall networkx\n-sage --pip install networkx\n-```\n-We should update.\n-\n-- [GitHub: NetworkX](https://networkx.github.io/)\n-- [PyPI: NetworkX](https://pypi.python.org/pypi/networkx/)\n- \n-A few quirks in version 2.0 (which came out in 2017-09)\n-[were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):\n-NetworkX methods were no longer accepting Sage integers as arguments.\n-\n-This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)\n-and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).\n+Sage ships NetworkX 1.11. Version 2.1 has been [released on PyPI.](https://pypi.python.org/pypi/networkx/)\n \n We also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.\n \n+The upstream zip is here: https://files.pythonhosted.org/packages/11/42/f951cc6838a4dff6ce57211c4d7f8444809ccbe2134179950301e5c4c83c/networkx-2.1.zip\n``````\n",
    "created_at": "2018-06-25T13:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455695",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,20 +1,5 @@
-Sage ships NetworkX 1.11. New versions are available and installable by doing
-
-```
-sage --pip uninstall networkx
-sage --pip install networkx
-```
-We should update.
-
-- [GitHub: NetworkX](https://networkx.github.io/)
-- [PyPI: NetworkX](https://pypi.python.org/pypi/networkx/)
- 
-A few quirks in version 2.0 (which came out in 2017-09)
-[were discussed](https://groups.google.com/d/msg/sage-devel/DAifW_Ma__s/YxJD8rKgAgAJ):
-NetworkX methods were no longer accepting Sage integers as arguments.
-
-This was [fixed in Dec 2017](https://github.com/networkx/networkx/issues/2799)
-and NetworkX 2.1 was [released in Jan 2018](https://github.com/networkx/networkx/releases).
+Sage ships NetworkX 1.11. Version 2.1 has been [released on PyPI.](https://pypi.python.org/pypi/networkx/)
 
 We also take this occasion to drop deprecated in #18375 NetworkXGraphBackend.
 
+The upstream zip is here: https://files.pythonhosted.org/packages/11/42/f951cc6838a4dff6ce57211c4d7f8444809ccbe2134179950301e5c4c83c/networkx-2.1.zip
``````




---

archive/issue_comments_455696.json:
```json
{
    "body": "Changing work_issues from \"do all doctests pass?\" to \"\"",
    "created_at": "2018-06-25T14:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455696",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "do all doctests pass?" to ""



---

archive/issue_comments_455697.json:
```json
{
    "body": "<a id='comment:27'></a>\nEverything seems to work now.",
    "created_at": "2018-06-25T14:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455697",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:27'></a>
Everything seems to work now.



---

archive/issue_comments_455698.json:
```json
{
    "body": "Changing commit from \"7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c\" to \"9553d85e804047b65ce218645563b2140c2d0b0c\"",
    "created_at": "2018-06-25T14:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7c1eafddaf9d5020d185b15ad2196c6aeeb95b2c" to "9553d85e804047b65ce218645563b2140c2d0b0c"



---

archive/issue_comments_455699.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[2b1b116](https://github.com/sagemath/sagetrac-mirror/commit/2b1b1168188302d709b7ba7d1c5ca23456830648)|`Upgrade NetworkX to version 2.1`|\n|[225daf1](https://github.com/sagemath/sagetrac-mirror/commit/225daf105ca919b6c173c23083c3b35df3b3de33)|`Upgrading checksums for PYPI's networkx`|\n|[9553d85](https://github.com/sagemath/sagetrac-mirror/commit/9553d85e804047b65ce218645563b2140c2d0b0c)|`Drop implicit assumption about vertex ordering`|",
    "created_at": "2018-06-25T14:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[2b1b116](https://github.com/sagemath/sagetrac-mirror/commit/2b1b1168188302d709b7ba7d1c5ca23456830648)|`Upgrade NetworkX to version 2.1`|
|[225daf1](https://github.com/sagemath/sagetrac-mirror/commit/225daf105ca919b6c173c23083c3b35df3b3de33)|`Upgrading checksums for PYPI's networkx`|
|[9553d85](https://github.com/sagemath/sagetrac-mirror/commit/9553d85e804047b65ce218645563b2140c2d0b0c)|`Drop implicit assumption about vertex ordering`|



---

archive/issue_comments_455700.json:
```json
{
    "body": "<a id='comment:29'></a>\nThere is something wrong with this patch. It is about upgrading NetworkX to version 2.1 (clearly needed), but it also includes modifications to various parts of the code: modifying copyright descriptions in some files (`digraph.py`, `bipartite_graph.py`, `degree_sequence.py`, etc.), droping implicit assumption about vertex ordering, removing an input parameter in `cliques_get_max_clique_graph`, etc. Why ?\n\nIf you want to correct an error like in you last commit [9553d85](https://github.com/sagemath/sagetrac-mirror/commit/9553d85e804047b65ce218645563b2140c2d0b0c), you can open a specific ticket.\n\nThe proposed modification of copyright in `digraph.py` is really nice and I don't know how you get the data, but it should not be done here.",
    "created_at": "2018-06-25T17:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455700",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'></a>
There is something wrong with this patch. It is about upgrading NetworkX to version 2.1 (clearly needed), but it also includes modifications to various parts of the code: modifying copyright descriptions in some files (`digraph.py`, `bipartite_graph.py`, `degree_sequence.py`, etc.), droping implicit assumption about vertex ordering, removing an input parameter in `cliques_get_max_clique_graph`, etc. Why ?

If you want to correct an error like in you last commit [9553d85](https://github.com/sagemath/sagetrac-mirror/commit/9553d85e804047b65ce218645563b2140c2d0b0c), you can open a specific ticket.

The proposed modification of copyright in `digraph.py` is really nice and I don't know how you get the data, but it should not be done here.



---

archive/issue_comments_455701.json:
```json
{
    "body": "<a id='comment:30'></a>\nPlease see #24374#comment:14 about the compilation of the copyrights. Sure the copyright changes are not part of the upgrade but it is imo customary here to add such small non-functional changes, e.g., we recently do this for pyflakes changes.\n\nAll the changes (except the copyright) in these tickets were necessary to make doctests pass after the networkx upgrade. In particular this is the case for the clique (the parameter does not exist in networkx anymore) and matching changes (there apparently was an implicit ordering before.)",
    "created_at": "2018-06-25T17:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455701",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:30'></a>
Please see #24374#comment:14 about the compilation of the copyrights. Sure the copyright changes are not part of the upgrade but it is imo customary here to add such small non-functional changes, e.g., we recently do this for pyflakes changes.

All the changes (except the copyright) in these tickets were necessary to make doctests pass after the networkx upgrade. In particular this is the case for the clique (the parameter does not exist in networkx anymore) and matching changes (there apparently was an implicit ordering before.)



---

archive/issue_comments_455702.json:
```json
{
    "body": "<a id='comment:31'></a>\nThat said, if you want to split this up, feel free to do so.",
    "created_at": "2018-06-25T17:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455702",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:31'></a>
That said, if you want to split this up, feel free to do so.



---

archive/issue_comments_455703.json:
```json
{
    "body": "<a id='comment:32'></a>\nI see. I checked all the changes in the codes, and I agree it's \"minor\". So go for it.",
    "created_at": "2018-06-25T17:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455703",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>
I see. I checked all the changes in the codes, and I agree it's "minor". So go for it.



---

archive/issue_comments_455704.json:
```json
{
    "body": "Changing author from \"Dima Pasechnik\" to \"Dima Pasechnik, Julian R\u00fcth\"",
    "created_at": "2018-06-25T17:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455704",
    "user": "https://github.com/dimpase"
}
```

Changing author from "Dima Pasechnik" to "Dima Pasechnik, Julian Rüth"



---

archive/issue_comments_455705.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-26T22:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455705",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455706.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert, Dima Pasechnik\"",
    "created_at": "2018-06-26T22:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455706",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "David Coudert, Dima Pasechnik"



---

archive/issue_comments_455707.json:
```json
{
    "body": "<a id='comment:34'></a>\nlooks good to me.",
    "created_at": "2018-06-26T22:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455707",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
looks good to me.



---

archive/issue_events_077917.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-29T22:34:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24374#event-77917"
}
```



---

archive/issue_comments_455708.json:
```json
{
    "body": "Changing branch from \"u/saraedum/24374\" to \"9553d85e804047b65ce218645563b2140c2d0b0c\"",
    "created_at": "2018-06-29T22:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455708",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/saraedum/24374" to "9553d85e804047b65ce218645563b2140c2d0b0c"



---

archive/issue_comments_455709.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-29T22:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24374",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24374#issuecomment-455709",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
