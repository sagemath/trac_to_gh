# Issue 24264: Allow "generic" PolynomialRing implementation

archive/issues_024027.json:
```json
{
    "assignees": [],
    "body": "It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation=\"singular\")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation=\"generic\"`.\n\nThis requires various fixes involving the `implementation` keyword being ignored or breaking caching. In particular, we fix this caching bug:\n\n```\nsage: p = 2^64 + 13\nsage: A = GF(p^2)\nsage: B = GF(p^3)\nsage: R = A.modulus().parent()\nsage: S = B.modulus().parent()\nsage: R is S\nFalse\n```\n\nWe also introduce a new implementation \"GF2X\" for the GF2X package. This used be called \"NTL\" which we still allow as alias.\n\nCC:  @embray @tscrim\n\nBranch/Commit: **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24264_\n\n",
    "closed_at": "2017-12-25T18:20:42Z",
    "created_at": "2017-11-22T12:59:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow \"generic\" PolynomialRing implementation",
    "type": "issue",
    "updated_at": "2017-12-25T18:20:42Z",
    "url": "https://github.com/sagemath/sage/issues/24264",
    "user": "https://github.com/jdemeyer"
}
```
It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation="singular")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation="generic"`.

This requires various fixes involving the `implementation` keyword being ignored or breaking caching. In particular, we fix this caching bug:

```
sage: p = 2^64 + 13
sage: A = GF(p^2)
sage: B = GF(p^3)
sage: R = A.modulus().parent()
sage: S = B.modulus().parent()
sage: R is S
False
```

We also introduce a new implementation "GF2X" for the GF2X package. This used be called "NTL" which we still allow as alias.

CC:  @embray @tscrim

Branch/Commit: **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**

Reviewer: **Travis Scrimshaw**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/24264_





---

archive/issue_events_318571.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-22T12:59:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318571"
}
```



---

archive/issue_events_318572.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-22T12:59:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318572"
}
```



---

archive/issue_events_318573.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-22T12:59:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318573"
}
```



---

archive/issue_events_318574.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-22T12:59:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318574"
}
```



---

archive/issue_comments_369959.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\n+1",
    "created_at": "2017-11-22T13:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369959",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">Comment 1</div>

+1



---

archive/issue_comments_369960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation=\"singular\")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation=\"generic\"`.\n+\n+This requires minor fixes in `src/sage/rings/polynomial/polynomial_ring_constructor.py`\n``````\n",
    "created_at": "2017-11-22T13:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369960",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation="singular")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation="generic"`.
+
+This requires minor fixes in `src/sage/rings/polynomial/polynomial_ring_constructor.py`
``````




---

archive/issue_comments_369961.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2017-11-23T09:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369961",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_369962.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThis is harder than expected due to caching. Currently, the caching does not take into account the `implementation` keyword. That is an existing bug, but it makes it pointless to add more support for the `implementation` keyword.",
    "created_at": "2017-11-23T09:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369962",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

This is harder than expected due to caching. Currently, the caching does not take into account the `implementation` keyword. That is an existing bug, but it makes it pointless to add more support for the `implementation` keyword.



---

archive/issue_comments_369963.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nWouldn't it make sense to fix that?  It doesn't need to use the \"implementation\" keyword per se, but it would make sense if the type a method was called on was also cached?\n\nI'm likely missing something though since I don't know exactly what you mean in this case by \"caching\".",
    "created_at": "2017-11-23T10:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369963",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

Wouldn't it make sense to fix that?  It doesn't need to use the "implementation" keyword per se, but it would make sense if the type a method was called on was also cached?

I'm likely missing something though since I don't know exactly what you mean in this case by "caching".



---

archive/issue_comments_369964.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation=\"singular\")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation=\"generic\"`.\n \n-This requires minor fixes in `src/sage/rings/polynomial/polynomial_ring_constructor.py`\n+This requires various fixes involving the `implementation` and caching. In particular, we fix this caching bug:\n+\n+```\n+sage: p = 2^64 + 13\n+sage: A = GF(p^2)\n+sage: B = GF(p^3)\n+sage: R = A.modulus().parent()\n+sage: S = B.modulus().parent()\n+sage: R is S\n+False\n+```\n``````\n",
    "created_at": "2017-11-23T11:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369964",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,13 @@
 It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation="singular")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation="generic"`.
 
-This requires minor fixes in `src/sage/rings/polynomial/polynomial_ring_constructor.py`
+This requires various fixes involving the `implementation` and caching. In particular, we fix this caching bug:
+
+```
+sage: p = 2^64 + 13
+sage: A = GF(p^2)
+sage: B = GF(p^3)
+sage: R = A.modulus().parent()
+sage: S = B.modulus().parent()
+sage: R is S
+False
+```
``````




---

archive/issue_comments_369965.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@embray](#comment%3A6):\n> Wouldn't it make sense to fix that?\n\nOf course. I'm just saying that this makes it harder than I initially expected.",
    "created_at": "2017-11-23T11:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369965",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@embray](#comment%3A6):
> Wouldn't it make sense to fix that?

Of course. I'm just saying that this makes it harder than I initially expected.



---

archive/issue_comments_369966.json:
```json
{
    "body": "Branch: **[u/jdemeyer/allow__generic__polynomialring_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow__generic__polynomialring_implementation)**",
    "created_at": "2017-11-23T11:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369966",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/allow__generic__polynomialring_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow__generic__polynomialring_implementation)**



---

archive/issue_comments_369967.json:
```json
{
    "body": "Commit: **[f8449e9](https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0)**",
    "created_at": "2017-11-23T11:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369967",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[f8449e9](https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0)**



---

archive/issue_events_318575.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-23T11:41:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318575"
}
```



---

archive/issue_comments_369968.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0\">f8449e9</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-11-23T11:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369968",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0">f8449e9</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369969.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation=\"singular\")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation=\"generic\"`.\n \n-This requires various fixes involving the `implementation` and caching. In particular, we fix this caching bug:\n+This requires various fixes involving the `implementation` keyword being ignored or breaking caching. In particular, we fix this caching bug:\n \n ```\n sage: p = 2^64 + 13\n``````\n",
    "created_at": "2017-11-23T11:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369969",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 It is possible to specify a specific backend like `PolynomialRing(QQ, 'x', implementation="singular")` but the opposite (asking for a generic Sage implementation) is not. Fix this by allowing `implementation="generic"`.
 
-This requires various fixes involving the `implementation` and caching. In particular, we fix this caching bug:
+This requires various fixes involving the `implementation` keyword being ignored or breaking caching. In particular, we fix this caching bug:
 
 ```
 sage: p = 2^64 + 13
``````




---

archive/issue_events_318576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-23T12:26:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318576"
}
```



---

archive/issue_events_318577.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-23T12:26:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318577"
}
```



---

archive/issue_comments_369970.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6\">b8990cb</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-11-23T14:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369970",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6">b8990cb</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369971.json:
```json
{
    "body": "Changed commit from **[f8449e9](https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0)** to **[b8990cb](https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6)**",
    "created_at": "2017-11-23T14:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369971",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f8449e9](https://github.com/sagemath/sagetrac-mirror/commit/f8449e9821e3298266552c326078aea6360645e0)** to **[b8990cb](https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6)**



---

archive/issue_events_318578.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-23T14:15:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318578"
}
```



---

archive/issue_events_318579.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-23T14:15:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318579"
}
```



---

archive/issue_comments_369972.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nThis change:\n\n```diff\ndiff --git a/src/sage/algebras/free_algebra.py b/src/sage/algebras/free_algebra.py\nindex e6c66e9..09db35d 100644\n--- a/src/sage/algebras/free_algebra.py\n+++ b/src/sage/algebras/free_algebra.py\n@@ -269,7 +269,7 @@ class FreeAlgebraFactory(UniqueFactory):\n         # test if we can use libSingular/letterplace\n         if implementation == \"letterplace\":\n             args = [arg for arg in (arg1, arg2) if arg is not None]\n-            kwds = dict(sparse=sparse, order=order, implementation=\"singular\")\n+            kwds = dict(order=order, implementation=\"singular\")\n             if name is not None:\n                 kwds[\"name\"] = name\n             if names is not None:\n```\nseems to cause multiple failures with the free algebra:\n\n```\nsage -t --long src/sage/algebras/free_algebra.py  # 12 doctests failed\nsage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Bad exit: 14\nsage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 19 doctests failed\nsage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 31 doctests failed\n```\nSee patchbots.\n\nAlso, we (and singular?) only have sparse implementations for multivariate polynomials, right?",
    "created_at": "2017-11-23T22:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369972",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">Comment 15</div>

This change:

```diff
diff --git a/src/sage/algebras/free_algebra.py b/src/sage/algebras/free_algebra.py
index e6c66e9..09db35d 100644
--- a/src/sage/algebras/free_algebra.py
+++ b/src/sage/algebras/free_algebra.py
@@ -269,7 +269,7 @@ class FreeAlgebraFactory(UniqueFactory):
         # test if we can use libSingular/letterplace
         if implementation == "letterplace":
             args = [arg for arg in (arg1, arg2) if arg is not None]
-            kwds = dict(sparse=sparse, order=order, implementation="singular")
+            kwds = dict(order=order, implementation="singular")
             if name is not None:
                 kwds["name"] = name
             if names is not None:
```
seems to cause multiple failures with the free algebra:

```
sage -t --long src/sage/algebras/free_algebra.py  # 12 doctests failed
sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # Bad exit: 14
sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 19 doctests failed
sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 31 doctests failed
```
See patchbots.

Also, we (and singular?) only have sparse implementations for multivariate polynomials, right?



---

archive/issue_events_318580.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-24T09:20:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318580"
}
```



---

archive/issue_events_318581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-24T09:20:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318581"
}
```



---

archive/issue_comments_369973.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf\">a299cb4</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-11-24T10:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369973",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf">a299cb4</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369974.json:
```json
{
    "body": "Changed commit from **[b8990cb](https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6)** to **[a299cb4](https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf)**",
    "created_at": "2017-11-24T10:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369974",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b8990cb](https://github.com/sagemath/sagetrac-mirror/commit/b8990cb104c69cea819be6d7320188f13209e2b6)** to **[a299cb4](https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf)**



---

archive/issue_comments_369975.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5\">21b4952</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr></table>\n",
    "created_at": "2017-11-24T10:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369975",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5">21b4952</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr></table>




---

archive/issue_comments_369976.json:
```json
{
    "body": "Changed commit from **[a299cb4](https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf)** to **[21b4952](https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5)**",
    "created_at": "2017-11-24T10:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369976",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a299cb4](https://github.com/sagemath/sagetrac-mirror/commit/a299cb4c0c04de8331933d2ba70e2d99b57e2acf)** to **[21b4952](https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5)**



---

archive/issue_events_318582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-24T10:25:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318582"
}
```



---

archive/issue_events_318583.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-24T10:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318583"
}
```



---

archive/issue_comments_369977.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@tscrim](#comment%3A15):\n> seems to cause multiple failures with the free algebra:\n\nFixed by allowing `sparse=None` to mean `sparse=True` in the multi-variate case.",
    "created_at": "2017-11-24T10:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369977",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@tscrim](#comment%3A15):
> seems to cause multiple failures with the free algebra:

Fixed by allowing `sparse=None` to mean `sparse=True` in the multi-variate case.



---

archive/issue_comments_369978.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nPatchbot is green now.",
    "created_at": "2017-11-27T08:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369978",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

Patchbot is green now.



---

archive/issue_comments_369979.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nWhat are your thoughts about changing `_implementation_names` to `_implementation`, which only takes a string? It is only used to differentiate between FLINT and NTL implementations in coercion. I think it could simplify the code overall.\n\nFurthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation. I know it is a little more brittle, but I think it will make the code more clean and would work well with the above suggestion. I haven't yet fully attempted this, but I will be happy to do this if you do not object.\n\nOne thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:\n\n```\nsage: RF.<x> = PolynomialRing(ZZ, implementation='FLINT')\nsage: RG.<x> = PolynomialRing(ZZ, implementation='generic')\nsage: RF.coerce_map_from(RG)\nsage: RF.has_coerce_map_from(RG)\nTrue\nsage: RG.has_coerce_map_from(RF)\nTrue\n```\nI've been told that this circular coercion gives a memory leak because the co(?)domain is cached by the coercion model. Although I cannot reproduce it:\n\n```\nsage: import gc\nsage: for i in range(10000):\n....:     if i % 100 == 0:\n....:         get_memory_usage()\n....:     R = PolynomialRing(ZZ, 'x%s'%i, implementation='FLINT')\n....:     S = PolynomialRing(ZZ, 'x%s'%i, implementation='generic')\n....:     assert R is not S\n....:     assert R.coerce_map_from(S) is not None\n....:     assert S.coerce_map_from(R) is not None\n....:     del R\n....:     del S\n....:     _ = gc.collect()\n5872.29296875\n5872.29296875\n5872.29296875\n5872.29296875\n...\n```\nHowever, it does introduce a *very* subtle reason why code could suddenly become slow by multiplying things in the opposite order. We will have to update things accordingly in that spot in `PolynomialRing._coerce_map_from_`.",
    "created_at": "2017-11-27T08:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369979",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">Comment 22</div>

What are your thoughts about changing `_implementation_names` to `_implementation`, which only takes a string? It is only used to differentiate between FLINT and NTL implementations in coercion. I think it could simplify the code overall.

Furthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation. I know it is a little more brittle, but I think it will make the code more clean and would work well with the above suggestion. I haven't yet fully attempted this, but I will be happy to do this if you do not object.

One thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:

```
sage: RF.<x> = PolynomialRing(ZZ, implementation='FLINT')
sage: RG.<x> = PolynomialRing(ZZ, implementation='generic')
sage: RF.coerce_map_from(RG)
sage: RF.has_coerce_map_from(RG)
True
sage: RG.has_coerce_map_from(RF)
True
```
I've been told that this circular coercion gives a memory leak because the co(?)domain is cached by the coercion model. Although I cannot reproduce it:

```
sage: import gc
sage: for i in range(10000):
....:     if i % 100 == 0:
....:         get_memory_usage()
....:     R = PolynomialRing(ZZ, 'x%s'%i, implementation='FLINT')
....:     S = PolynomialRing(ZZ, 'x%s'%i, implementation='generic')
....:     assert R is not S
....:     assert R.coerce_map_from(S) is not None
....:     assert S.coerce_map_from(R) is not None
....:     del R
....:     del S
....:     _ = gc.collect()
5872.29296875
5872.29296875
5872.29296875
5872.29296875
...
```
However, it does introduce a *very* subtle reason why code could suddenly become slow by multiplying things in the opposite order. We will have to update things accordingly in that spot in `PolynomialRing._coerce_map_from_`.



---

archive/issue_comments_369980.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@tscrim](#comment%3A22):\n> Furthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation.\n\nWell, this will slow down creating polynomial rings. Every time that you create a polynomial ring with `implementation=None` (which is the default, so the most common case), you will need to run some code to figure out the implementation.\n\nLet me give a counter-proposal: instead of making `_implementation_names` an attribute, we create a static method on the polynomial ring class:\n\n```python\n# Assuming that the implementation for a given polynomial ring class\n# depends only on the base_ring, which is currently the case.\n@staticmethod\ndef _implementation_names(base_ring, implementation):\n    # Default implementation for generic polynomial rings\n    if implementation is None or implementation == \"generic\":\n        return [\"generic\", None]\n    raise ValueError(\"unknown implementation {!r}\".format(implementation))\n```\n\nI think that this will lead to cleaner code without the performance loss of normalizing the `implementation` every time.",
    "created_at": "2017-11-27T09:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369980",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@tscrim](#comment%3A22):
> Furthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation.

Well, this will slow down creating polynomial rings. Every time that you create a polynomial ring with `implementation=None` (which is the default, so the most common case), you will need to run some code to figure out the implementation.

Let me give a counter-proposal: instead of making `_implementation_names` an attribute, we create a static method on the polynomial ring class:

```python
# Assuming that the implementation for a given polynomial ring class
# depends only on the base_ring, which is currently the case.
@staticmethod
def _implementation_names(base_ring, implementation):
    # Default implementation for generic polynomial rings
    if implementation is None or implementation == "generic":
        return ["generic", None]
    raise ValueError("unknown implementation {!r}".format(implementation))
```

I think that this will lead to cleaner code without the performance loss of normalizing the `implementation` every time.



---

archive/issue_comments_369981.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> Replying to [@tscrim](#comment%3A22):\n> > Furthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation.\n\n> \n> Well, this will slow down creating polynomial rings. Every time that you create a polynomial ring with `implementation=None` (which is the default, so the most common case), you will need to run some code to figure out the implementation.\n\nAh, that is a good point about having to process the input.\n\n> Let me give a counter-proposal: instead of making `_implementation_names` an attribute, we create a static method on the polynomial ring class:\n> \n> ```python\n> # Assuming that the implementation for a given polynomial ring class\n> # depends only on the base_ring, which is currently the case.\n> @staticmethod\n> def _implementation_names(base_ring, implementation):\n>     # Default implementation for generic polynomial rings\n>     if implementation is None or implementation == \"generic\":\n>         return [\"generic\", None]\n>     raise ValueError(\"unknown implementation {!r}\".format(implementation))\n> ```\n> \n> I think that this will lead to cleaner code without the performance loss of normalizing the `implementation` every time.\n\n+1 Do you want me to do this or will you?",
    "created_at": "2017-11-27T22:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369981",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@jdemeyer](#comment%3A23):
> Replying to [@tscrim](#comment%3A22):
> > Furthermore, how do you feel about instead of storing a key for all implementation keywords possible, we instead standardize the implementation keyword to always give the actual implementation.

> 
> Well, this will slow down creating polynomial rings. Every time that you create a polynomial ring with `implementation=None` (which is the default, so the most common case), you will need to run some code to figure out the implementation.

Ah, that is a good point about having to process the input.

> Let me give a counter-proposal: instead of making `_implementation_names` an attribute, we create a static method on the polynomial ring class:
> 
> ```python
> # Assuming that the implementation for a given polynomial ring class
> # depends only on the base_ring, which is currently the case.
> @staticmethod
> def _implementation_names(base_ring, implementation):
>     # Default implementation for generic polynomial rings
>     if implementation is None or implementation == "generic":
>         return ["generic", None]
>     raise ValueError("unknown implementation {!r}".format(implementation))
> ```
> 
> I think that this will lead to cleaner code without the performance loss of normalizing the `implementation` every time.

+1 Do you want me to do this or will you?



---

archive/issue_comments_369982.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nLet me give this a try.",
    "created_at": "2017-11-30T10:47:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369982",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">Comment 25</div>

Let me give this a try.



---

archive/issue_events_318584.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-30T13:14:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318584"
}
```



---

archive/issue_events_318585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-30T13:14:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318585"
}
```



---

archive/issue_comments_369983.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,5 @@\n sage: R is S\n False\n ```\n+\n+We also introduce a new implementation \"GF2X\" for the GF2X package. This used be called \"NTL\" which we still allow as alias.\n``````\n",
    "created_at": "2017-11-30T13:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369983",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,5 @@
 sage: R is S
 False
 ```
+
+We also introduce a new implementation "GF2X" for the GF2X package. This used be called "NTL" which we still allow as alias.
``````




---

archive/issue_comments_369984.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d679f1341f7d68790ae239b23cd68a36a6af2187\">d679f13</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e\">bfd388f</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-11-30T15:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d679f1341f7d68790ae239b23cd68a36a6af2187">d679f13</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e">bfd388f</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369985.json:
```json
{
    "body": "Changed commit from **[21b4952](https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5)** to **[bfd388f](https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e)**",
    "created_at": "2017-11-30T15:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[21b4952](https://github.com/sagemath/sagetrac-mirror/commit/21b4952d4fab7a14bdfd0611d2e2f1e01f74dee5)** to **[bfd388f](https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e)**



---

archive/issue_comments_369986.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@jdemeyer](#comment%3A25):\n> Let me give this a try.\n\nDone. This was more work than I initially thought, but I am happy with the result. The code looks cleaner than before.",
    "created_at": "2017-11-30T15:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369986",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@jdemeyer](#comment%3A25):
> Let me give this a try.

Done. This was more work than I initially thought, but I am happy with the result. The code looks cleaner than before.



---

archive/issue_events_318586.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-30T15:59:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318586"
}
```



---

archive/issue_events_318587.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-30T15:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318587"
}
```



---

archive/issue_comments_369987.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627\">a0aefd8</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-11-30T21:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369987",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29" align="right">Comment 29</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627">a0aefd8</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369988.json:
```json
{
    "body": "Changed commit from **[bfd388f](https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e)** to **[a0aefd8](https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627)**",
    "created_at": "2017-11-30T21:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369988",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bfd388f](https://github.com/sagemath/sagetrac-mirror/commit/bfd388f57c354d96eaf85442b17d7ca6dd2fdc1e)** to **[a0aefd8](https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627)**



---

archive/issue_comments_369989.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nIt definitely is cleaner to me as well. Some comments:\n\n- This seems fragile:\n\n  ```python\n        implementation = self._implementation_names(implementation, base_ring)[0]\n        if implementation == \"NTL\":\n  ```\n  I would instead do\n\n  ```python\n        implementation = self._implementation_names(implementation, base_ring)[0]\n        if \"NTL\" in implementation:\n  ```\n- The cyclic coercion (comment:22) should get a doctest for only the generic to FLINT (if I am reading the code correctly).\n- This feels a bit fragile to me\n\n  ```python\n  if self.element_class.__name__ != 'Polynomial_integer_dense_flint':\n  ```\n  I'm guessing you are doing this to avoid a circular import? What about doing something similar to what is currently there and checking the implementation name?\n- Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).\n\nCan you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.",
    "created_at": "2017-11-30T22:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369989",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">Comment 30</div>

It definitely is cleaner to me as well. Some comments:

- This seems fragile:

  ```python
        implementation = self._implementation_names(implementation, base_ring)[0]
        if implementation == "NTL":
  ```
  I would instead do

  ```python
        implementation = self._implementation_names(implementation, base_ring)[0]
        if "NTL" in implementation:
  ```
- The cyclic coercion (comment:22) should get a doctest for only the generic to FLINT (if I am reading the code correctly).
- This feels a bit fragile to me

  ```python
  if self.element_class.__name__ != 'Polynomial_integer_dense_flint':
  ```
  I'm guessing you are doing this to avoid a circular import? What about doing something similar to what is currently there and checking the implementation name?
- Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).

Can you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.



---

archive/issue_comments_369990.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@tscrim](#comment%3A30):\n> - This seems fragile:\n> \n>   ```python\n>         implementation = self._implementation_names(implementation, base_ring)[0]\n>         if implementation == \"NTL\":\n>   ```\n>   I would instead do\n> \n>   ```python\n>         implementation = self._implementation_names(implementation, base_ring)[0]\n>         if \"NTL\" in implementation:\n>   ```\n\nWhy? I don't understand your objection.\n\n> - Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).\n\nWell, all of them are tested somewhere. Some are tested explicitly by calling `_implementation_names_impl`; some are tested indirectly by constructing an instance of a polynomial ring class; still others are testing using the polynomial ring constructor.\n\n> Can you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.\n\nIt was just simpler that way. First of all, the actual implementations can just `return NotImplemented` instead of raising an exception. This also simplifies one check in the polynomial constructor where I'm using list comprehension to check for `NotImplemented`. You cannot use list comprehension with a condition \"raises `ValueError`\".\n\nSecond, the wrapper method `_implementation_names()` does a sanity check of the output of `_implementation_names_impl()`: it checks that the given `implementation` is in the output list.",
    "created_at": "2017-12-01T09:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369990",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@tscrim](#comment%3A30):
> - This seems fragile:
> 
>   ```python
>         implementation = self._implementation_names(implementation, base_ring)[0]
>         if implementation == "NTL":
>   ```
>   I would instead do
> 
>   ```python
>         implementation = self._implementation_names(implementation, base_ring)[0]
>         if "NTL" in implementation:
>   ```

Why? I don't understand your objection.

> - Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).

Well, all of them are tested somewhere. Some are tested explicitly by calling `_implementation_names_impl`; some are tested indirectly by constructing an instance of a polynomial ring class; still others are testing using the polynomial ring constructor.

> Can you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.

It was just simpler that way. First of all, the actual implementations can just `return NotImplemented` instead of raising an exception. This also simplifies one check in the polynomial constructor where I'm using list comprehension to check for `NotImplemented`. You cannot use list comprehension with a condition "raises `ValueError`".

Second, the wrapper method `_implementation_names()` does a sanity check of the output of `_implementation_names_impl()`: it checks that the given `implementation` is in the output list.



---

archive/issue_comments_369991.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@tscrim](#comment%3A22):\n> One thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:\n\nThat is a very deep rabbit hole.\n\nFirst of all, note that cyclic coercion is already possible in other cases:\n\n```\nsage: R = PolynomialRing(GF(3), 't', implementation='FLINT')\nsage: S = PolynomialRing(GF(3), 't', implementation='NTL')\nsage: R\nUnivariate Polynomial Ring in t over Finite Field of size 3\nsage: S\nUnivariate Polynomial Ring in t over Finite Field of size 3 (using NTL)\nsage: R.has_coerce_map_from(S)\nTrue\nsage: S.has_coerce_map_from(R)\nTrue\n```\n\nThere are two related issues when trying to fix this:\n\n(A) The polynomial ring itself does not store its implementation or any other information which could help to determine in which way a coercion should go.\n\n(B) Pickling doesn't work correctly for non-default implementations:\n\n```\n# Continuing the example above\nsage: loads(dumps(S)) is S\nFalse\nsage: loads(dumps(S)) is R\nTrue\n```\n\nCurrently, one could fix (A) by not allowing coercions between different implementations. But then (B) gives trouble because then there isn't even a coercion between `loads(dumps(S))` and `S`.\n\nSuggestions??",
    "created_at": "2017-12-01T11:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369991",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@tscrim](#comment%3A22):
> One thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:

That is a very deep rabbit hole.

First of all, note that cyclic coercion is already possible in other cases:

```
sage: R = PolynomialRing(GF(3), 't', implementation='FLINT')
sage: S = PolynomialRing(GF(3), 't', implementation='NTL')
sage: R
Univariate Polynomial Ring in t over Finite Field of size 3
sage: S
Univariate Polynomial Ring in t over Finite Field of size 3 (using NTL)
sage: R.has_coerce_map_from(S)
True
sage: S.has_coerce_map_from(R)
True
```

There are two related issues when trying to fix this:

(A) The polynomial ring itself does not store its implementation or any other information which could help to determine in which way a coercion should go.

(B) Pickling doesn't work correctly for non-default implementations:

```
# Continuing the example above
sage: loads(dumps(S)) is S
False
sage: loads(dumps(S)) is R
True
```

Currently, one could fix (A) by not allowing coercions between different implementations. But then (B) gives trouble because then there isn't even a coercion between `loads(dumps(S))` and `S`.

Suggestions??



---

archive/issue_comments_369992.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> Replying to [@tscrim](#comment%3A30):\n> > - This seems fragile:\n> > \n> >   ```python\n> >         implementation = self._implementation_names(implementation, base_ring)[0]\n> >         if implementation == \"NTL\":\n> >   ```\n> >   I would instead do\n> > \n> >   ```python\n> >         implementation = self._implementation_names(implementation, base_ring)[0]\n> >         if \"NTL\" in implementation:\n> >   ```\n\n> \n> Why? I don't understand your objection.\n\nI either missed, didn't remember, or didn't quite understand the implication of the \"The first element in the list is the canonical name.\" part of the `OUTPUT`. So I thought you were using an undocumented specification.\n\n> > - Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).\n\n> \n> Well, all of them are tested somewhere. Some are tested explicitly by calling `_implementation_names_impl`; some are tested indirectly by constructing an instance of a polynomial ring class; still others are testing using the polynomial ring constructor.\n\nWould it be possible to have at least one of those tests local to each of these functions? It would make it easier to debug if something broke later on.\n\n> > Can you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.\n\n> \n> It was just simpler that way. First of all, the actual implementations can just `return NotImplemented` instead of raising an exception. This also simplifies one check in the polynomial constructor where I'm using list comprehension to check for `NotImplemented`. You cannot use list comprehension with a condition \"raises `ValueError`\".\n\n>\n> Second, the wrapper method `_implementation_names()` does a sanity check of the output of `_implementation_names_impl()`: it checks that the given `implementation` is in the output list.\n\nThank you for the explanations. Makes sense to me, and it made it easy to see where these features are being used.",
    "created_at": "2017-12-01T11:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369992",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@jdemeyer](#comment%3A31):
> Replying to [@tscrim](#comment%3A30):
> > - This seems fragile:
> > 
> >   ```python
> >         implementation = self._implementation_names(implementation, base_ring)[0]
> >         if implementation == "NTL":
> >   ```
> >   I would instead do
> > 
> >   ```python
> >         implementation = self._implementation_names(implementation, base_ring)[0]
> >         if "NTL" in implementation:
> >   ```

> 
> Why? I don't understand your objection.

I either missed, didn't remember, or didn't quite understand the implication of the "The first element in the list is the canonical name." part of the `OUTPUT`. So I thought you were using an undocumented specification.

> > - Some `_implementation_names_impl` have doctests and others do not (including some with mildly non-trivial behavior).

> 
> Well, all of them are tested somewhere. Some are tested explicitly by calling `_implementation_names_impl`; some are tested indirectly by constructing an instance of a polynomial ring class; still others are testing using the polynomial ring constructor.

Would it be possible to have at least one of those tests local to each of these functions? It would make it easier to debug if something broke later on.

> > Can you also explain why you have the `@classmethod` and the `@staticmethod`? I'm not quite sure I understand why we need the redirection.

> 
> It was just simpler that way. First of all, the actual implementations can just `return NotImplemented` instead of raising an exception. This also simplifies one check in the polynomial constructor where I'm using list comprehension to check for `NotImplemented`. You cannot use list comprehension with a condition "raises `ValueError`".

>
> Second, the wrapper method `_implementation_names()` does a sanity check of the output of `_implementation_names_impl()`: it checks that the given `implementation` is in the output list.

Thank you for the explanations. Makes sense to me, and it made it easy to see where these features are being used.



---

archive/issue_comments_369993.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> Replying to [@tscrim](#comment%3A22):\n> > One thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:\n\n> \n> That is a very deep rabbit hole.\n> \n> First of all, note that cyclic coercion is already possible in other cases:\n> \n> ```\n> sage: R = PolynomialRing(GF(3), 't', implementation='FLINT')\n> sage: S = PolynomialRing(GF(3), 't', implementation='NTL')\n> sage: R\n> Univariate Polynomial Ring in t over Finite Field of size 3\n> sage: S\n> Univariate Polynomial Ring in t over Finite Field of size 3 (using NTL)\n> sage: R.has_coerce_map_from(S)\n> True\n> sage: S.has_coerce_map_from(R)\n> True\n> ```\n\nI know some people would consider that a bug, and even if is not, it could create strange behavior and slowdowns because of moving between implementations.\n\n> There are two related issues when trying to fix this:\n> \n> (A) The polynomial ring itself does not store its implementation or any other information which could help to determine in which way a coercion should go.\n\nIt has to store something in order to get the different string representations. As for determining which way to make the coercion is a bit more arbitrary, but something we can do in the `_coerce_map_from_`.\n\n> (B) Pickling doesn't work correctly for non-default implementations:\n> \n> ```\n> # Continuing the example above\n> sage: loads(dumps(S)) is S\n> False\n> sage: loads(dumps(S)) is R\n> True\n> ```\n> \n> Currently, one could fix (A) by not allowing coercions between different implementations. But then (B) gives trouble because then there isn't even a coercion between `loads(dumps(S))` and `S`.\n\nThat's a bug (and somewhat horrifying).\n\n> Suggestions??\n\n(B) deserves a ticket all on its own. Although (A) is currently addressed for `ZZ` rings:\n\n```\nsage: R = PolynomialRing(ZZ, 't', implementation=\"FLINT\")\nsage: S = PolynomialRing(ZZ, 't', implementation=\"NTL\")\nsage: R.has_coerce_map_from(S)\nTrue\nsage: S.has_coerce_map_from(R)\nFalse\n```\nI can't think of a simple way with the current framework that we can have an ordering on the implementations that would correspond to the coercion order. I feel like we would need to add another `@staticmethod` specifying this (with a default of `[None]` when there is only 1 implementation, the default).\n\nI am also happy addressing (A) more thoroughly on a followup if we just add a test for\n\n```\nsage: T = PolynomialRing(ZZ, 't', implementation=\"generic\")\n```\nand the non-cyclic coercion with R and S above.",
    "created_at": "2017-12-01T12:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369993",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jdemeyer](#comment%3A32):
> Replying to [@tscrim](#comment%3A22):
> > One thing that definitely needs fixing: By allowing generic coercions, we are introducing a memory leak via cyclic coercion between the generic and FLINT implementations:

> 
> That is a very deep rabbit hole.
> 
> First of all, note that cyclic coercion is already possible in other cases:
> 
> ```
> sage: R = PolynomialRing(GF(3), 't', implementation='FLINT')
> sage: S = PolynomialRing(GF(3), 't', implementation='NTL')
> sage: R
> Univariate Polynomial Ring in t over Finite Field of size 3
> sage: S
> Univariate Polynomial Ring in t over Finite Field of size 3 (using NTL)
> sage: R.has_coerce_map_from(S)
> True
> sage: S.has_coerce_map_from(R)
> True
> ```

I know some people would consider that a bug, and even if is not, it could create strange behavior and slowdowns because of moving between implementations.

> There are two related issues when trying to fix this:
> 
> (A) The polynomial ring itself does not store its implementation or any other information which could help to determine in which way a coercion should go.

It has to store something in order to get the different string representations. As for determining which way to make the coercion is a bit more arbitrary, but something we can do in the `_coerce_map_from_`.

> (B) Pickling doesn't work correctly for non-default implementations:
> 
> ```
> # Continuing the example above
> sage: loads(dumps(S)) is S
> False
> sage: loads(dumps(S)) is R
> True
> ```
> 
> Currently, one could fix (A) by not allowing coercions between different implementations. But then (B) gives trouble because then there isn't even a coercion between `loads(dumps(S))` and `S`.

That's a bug (and somewhat horrifying).

> Suggestions??

(B) deserves a ticket all on its own. Although (A) is currently addressed for `ZZ` rings:

```
sage: R = PolynomialRing(ZZ, 't', implementation="FLINT")
sage: S = PolynomialRing(ZZ, 't', implementation="NTL")
sage: R.has_coerce_map_from(S)
True
sage: S.has_coerce_map_from(R)
False
```
I can't think of a simple way with the current framework that we can have an ordering on the implementations that would correspond to the coercion order. I feel like we would need to add another `@staticmethod` specifying this (with a default of `[None]` when there is only 1 implementation, the default).

I am also happy addressing (A) more thoroughly on a followup if we just add a test for

```
sage: T = PolynomialRing(ZZ, 't', implementation="generic")
```
and the non-cyclic coercion with R and S above.



---

archive/issue_comments_369994.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@tscrim](#comment%3A34):\n> I am also happy addressing (A) more thoroughly on a followup if we just add a test for\n> \n> ```\n> sage: T = PolynomialRing(ZZ, 't', implementation=\"generic\")\n> ```\n> and the non-cyclic coercion with R and S above.\n\nYes, I would rather do that. This ticket is already getting quite big...",
    "created_at": "2017-12-04T09:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369994",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@tscrim](#comment%3A34):
> I am also happy addressing (A) more thoroughly on a followup if we just add a test for
> 
> ```
> sage: T = PolynomialRing(ZZ, 't', implementation="generic")
> ```
> and the non-cyclic coercion with R and S above.

Yes, I would rather do that. This ticket is already getting quite big...



---

archive/issue_comments_369995.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nFollow-up tickets: #24319, #24320 (Note that I do not plan to work on these)",
    "created_at": "2017-12-04T09:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369995",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

Follow-up tickets: #24319, #24320 (Note that I do not plan to work on these)



---

archive/issue_comments_369996.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nPart of the mess in polynomial rings is that the logic for constructing them is separated in different places:\n\n1. The constructor `PolynomialRing`\n\n2. The `_implementation_names_impl()` method of the polynomial ring.\n\n3. The `__init__` method of the polynomial ring.\n\nThere are also two non-equivalent ways to pass an implementation: using the `implementation` keyword or using the `element_class` keyword.",
    "created_at": "2017-12-04T10:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369996",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Part of the mess in polynomial rings is that the logic for constructing them is separated in different places:

1. The constructor `PolynomialRing`

2. The `_implementation_names_impl()` method of the polynomial ring.

3. The `__init__` method of the polynomial ring.

There are also two non-equivalent ways to pass an implementation: using the `implementation` keyword or using the `element_class` keyword.



---

archive/issue_comments_369997.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nI feel like only `PolynomialRing` should take an `implementation` and not `__init__`. Instead, the `implementation` should be translated somewhere to an `element_class` which is passed to `__init__`.\n\nBut that will be for a follow-up.",
    "created_at": "2017-12-04T10:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369997",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">Comment 38</div>

I feel like only `PolynomialRing` should take an `implementation` and not `__init__`. Instead, the `implementation` should be translated somewhere to an `element_class` which is passed to `__init__`.

But that will be for a follow-up.



---

archive/issue_comments_369998.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00202917143a18632ff88901f35734e5faddbaed\">0020291</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf\">ee237be</a></td><td><code>Allow \"generic\" PolynomialRing implementation</code></td></tr></table>\n",
    "created_at": "2017-12-04T10:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369998",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39" align="right">Comment 39</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00202917143a18632ff88901f35734e5faddbaed">0020291</a></td><td><code>Fix -Wsign-compare compiler warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf">ee237be</a></td><td><code>Allow "generic" PolynomialRing implementation</code></td></tr></table>




---

archive/issue_comments_369999.json:
```json
{
    "body": "Changed commit from **[a0aefd8](https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627)** to **[ee237be](https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf)**",
    "created_at": "2017-12-04T10:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-369999",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a0aefd8](https://github.com/sagemath/sagetrac-mirror/commit/a0aefd8670fda042b00e1730b682eb5d47824627)** to **[ee237be](https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf)**



---

archive/issue_comments_370000.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI hope that this addresses all your concerns.",
    "created_at": "2017-12-04T10:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370000",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

I hope that this addresses all your concerns.



---

archive/issue_comments_370001.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-12-06T13:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370001",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_370002.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nYes, it does. Thank you.",
    "created_at": "2017-12-06T13:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370002",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">Comment 41</div>

Yes, it does. Thank you.



---

archive/issue_events_318588.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-06T13:54:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318588"
}
```



---

archive/issue_events_318589.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-06T13:54:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318589"
}
```



---

archive/issue_comments_370003.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nFinally... I initially started with this ticket thinking \"this should only take 1 hour\" :-)",
    "created_at": "2017-12-06T14:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370003",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">Comment 42</div>

Finally... I initially started with this ticket thinking "this should only take 1 hour" :-)



---

archive/issue_comments_370004.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nAh, I know that feeling. Although in my case, that has always been a sign I am in for a whole day of programming. :P",
    "created_at": "2017-12-06T14:42:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370004",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">Comment 43</div>

Ah, I know that feeling. Although in my case, that has always been a sign I am in for a whole day of programming. :P



---

archive/issue_comments_370005.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@jdemeyer](#comment%3A42):\n> Finally... I initially started with this ticket thinking \"this should only take 1 hour\" :-)\n\nI \"love\" when that happens.  I haven't really followed this closely since it quickly went beyond any understanding I have of the coercion system, but I'm glad it will be fixed.\n\nThe next thing to do might be to fix cases like the one I pointed out in #24263 to ensure that the polynomial implementation that's supposed to be being tested is actually the one being tested.",
    "created_at": "2017-12-06T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370005",
    "user": "https://github.com/embray"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@jdemeyer](#comment%3A42):
> Finally... I initially started with this ticket thinking "this should only take 1 hour" :-)

I "love" when that happens.  I haven't really followed this closely since it quickly went beyond any understanding I have of the coercion system, but I'm glad it will be fixed.

The next thing to do might be to fix cases like the one I pointed out in #24263 to ensure that the polynomial implementation that's supposed to be being tested is actually the one being tested.



---

archive/issue_comments_370006.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nSee patchbot",
    "created_at": "2017-12-11T15:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370006",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">Comment 45</div>

See patchbot



---

archive/issue_events_318590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T15:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318590"
}
```



---

archive/issue_events_318591.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T15:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318591"
}
```



---

archive/issue_comments_370007.json:
```json
{
    "body": "Changed commit from **[ee237be](https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf)** to **[fff5d7e](https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4)**",
    "created_at": "2017-12-12T17:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ee237be](https://github.com/sagemath/sagetrac-mirror/commit/ee237be05d51612dc941dca2d1d10f75dcfe63bf)** to **[fff5d7e](https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4)**



---

archive/issue_comments_370008.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f33025e331d203f1c7c03cdf522af556673a5541\">f33025e</a></td><td><code>Fix coercion of polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4\">fff5d7e</a></td><td><code>Better error message for mismatched constructions</code></td></tr></table>\n",
    "created_at": "2017-12-12T17:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370008",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f33025e331d203f1c7c03cdf522af556673a5541">f33025e</a></td><td><code>Fix coercion of polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4">fff5d7e</a></td><td><code>Better error message for mismatched constructions</code></td></tr></table>




---

archive/issue_events_318592.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:03:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318592"
}
```



---

archive/issue_events_318593.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:03:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318593"
}
```



---

archive/issue_comments_370009.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nTrivial thing, but can we break this output line since it is so long:\n\n```\n            ValueError: domain (Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in x over Integer Ring)\n             and codomain (Univariate Polynomial Ring in t over Univariate Polynomial Ring in x over Integer Ring)\n             must have the same functorial construction over their base rings\n```\nOtherwise LGTM and you can set a positive review on my behalf.",
    "created_at": "2017-12-12T23:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370009",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">Comment 48</div>

Trivial thing, but can we break this output line since it is so long:

```
            ValueError: domain (Full MatrixSpace of 2 by 2 dense matrices over Univariate Polynomial Ring in x over Integer Ring)
             and codomain (Univariate Polynomial Ring in t over Univariate Polynomial Ring in x over Integer Ring)
             must have the same functorial construction over their base rings
```
Otherwise LGTM and you can set a positive review on my behalf.



---

archive/issue_comments_370010.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@tscrim](#comment%3A48):\n> Trivial thing, but can we break this output line since it is so long\n\nShouldn't the output in doctests match the **actual** output from the terminal? If the actual output is one long line, shouldn't the doctest reflect that?\n\nIf you insist, I will change it though.",
    "created_at": "2017-12-13T13:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370010",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@tscrim](#comment%3A48):
> Trivial thing, but can we break this output line since it is so long

Shouldn't the output in doctests match the **actual** output from the terminal? If the actual output is one long line, shouldn't the doctest reflect that?

If you insist, I will change it though.



---

archive/issue_comments_370011.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> Replying to [@tscrim](#comment%3A48):\n> > Trivial thing, but can we break this output line since it is so long\n\n> \n> Shouldn't the output in doctests match the **actual** output from the terminal? If the actual output is one long line, shouldn't the doctest reflect that?\n> \n> If you insist, I will change it though.\n\nMy usually 90 char wide terminal splits it (essentially randomly) and we have the guideline of 80 char/line in documentation. So with that in mind, I was suggesting the most logical places to split that and keep the lines short. If you would rather leave it as one really (really) long line, then I won't insist, but it makes it much more manageable for me and is in the spirit of the rest of Sage's doc. (I would also not oppose a strict 80 char/line cuts as well.)",
    "created_at": "2017-12-13T13:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370011",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@jdemeyer](#comment%3A49):
> Replying to [@tscrim](#comment%3A48):
> > Trivial thing, but can we break this output line since it is so long

> 
> Shouldn't the output in doctests match the **actual** output from the terminal? If the actual output is one long line, shouldn't the doctest reflect that?
> 
> If you insist, I will change it though.

My usually 90 char wide terminal splits it (essentially randomly) and we have the guideline of 80 char/line in documentation. So with that in mind, I was suggesting the most logical places to split that and keep the lines short. If you would rather leave it as one really (really) long line, then I won't insist, but it makes it much more manageable for me and is in the spirit of the rest of Sage's doc. (I would also not oppose a strict 80 char/line cuts as well.)



---

archive/issue_comments_370012.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nReplying to [@tscrim](#comment%3A50):\n> and we have the guideline of 80 char/line in documentation.\n\nIn my mind, there is a difference between the different parts of the documentation:\n\n1. **textual documentation**: word wrap as usual\n\n2. **code in EXAMPLES**: follow PEP 8, which means trying to limit the line lengths\n\n3. **output in EXAMPLES**: I think it is best to keep the exact formatting of the output and not randomly wrap lines.",
    "created_at": "2017-12-13T15:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370012",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">Comment 51</div>

Replying to [@tscrim](#comment%3A50):
> and we have the guideline of 80 char/line in documentation.

In my mind, there is a difference between the different parts of the documentation:

1. **textual documentation**: word wrap as usual

2. **code in EXAMPLES**: follow PEP 8, which means trying to limit the line lengths

3. **output in EXAMPLES**: I think it is best to keep the exact formatting of the output and not randomly wrap lines.



---

archive/issue_comments_370013.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nThe problem is it is so ugly on my screen that I cannot read it at once with my default settings. IMO, there is no benefit in keeping it \"exactly\" (where I would say that is not completely accurate with how terminals can wrap) in the doc without some breaks (in this case, I think they are logical). Although this is effectively bikeshedding, and I don't care enough to die on this hill.",
    "created_at": "2017-12-14T04:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370013",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">Comment 52</div>

The problem is it is so ugly on my screen that I cannot read it at once with my default settings. IMO, there is no benefit in keeping it "exactly" (where I would say that is not completely accurate with how terminals can wrap) in the doc without some breaks (in this case, I think they are logical). Although this is effectively bikeshedding, and I don't care enough to die on this hill.



---

archive/issue_events_318594.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-14T04:23:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318594"
}
```



---

archive/issue_events_318595.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-14T04:23:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318595"
}
```



---

archive/issue_events_318596.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-14T04:23:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318596"
}
```



---

archive/issue_events_318597.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-14T04:23:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318597"
}
```



---

archive/issue_comments_370014.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\n\n```\nsage -t --long --warn-long 65.5 src/sage/rings/morphism.pyx\n**********************************************************************\nFile \"src/sage/rings/morphism.pyx\", line 361, in sage.rings.morphism\nFailed example:\n    phi3 = RingHomomorphism_from_base(H, R.hom([x])); phi3\nExpected:\n    Ring endomorphism of Univariate Quotient Polynomial Ring in a over Finite Field of size 2 with modulus x^2 + x + 1\n      Defn: Induced from base ring by\n            Ring endomorphism of Univariate Polynomial Ring in x over Finite Field of size 2 (using NTL)\n              Defn: x |--> x\nGot:\n    Ring endomorphism of Univariate Quotient Polynomial Ring in a over Finite Field of size 2 with modulus x^2 + x + 1\n      Defn: Induced from base ring by\n            Ring endomorphism of Univariate Polynomial Ring in x over Finite Field of size 2 (using GF2X)\n              Defn: x |--> x\n**********************************************************************\n```",
    "created_at": "2017-12-14T23:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370014",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">Comment 53</div>


```
sage -t --long --warn-long 65.5 src/sage/rings/morphism.pyx
**********************************************************************
File "src/sage/rings/morphism.pyx", line 361, in sage.rings.morphism
Failed example:
    phi3 = RingHomomorphism_from_base(H, R.hom([x])); phi3
Expected:
    Ring endomorphism of Univariate Quotient Polynomial Ring in a over Finite Field of size 2 with modulus x^2 + x + 1
      Defn: Induced from base ring by
            Ring endomorphism of Univariate Polynomial Ring in x over Finite Field of size 2 (using NTL)
              Defn: x |--> x
Got:
    Ring endomorphism of Univariate Quotient Polynomial Ring in a over Finite Field of size 2 with modulus x^2 + x + 1
      Defn: Induced from base ring by
            Ring endomorphism of Univariate Polynomial Ring in x over Finite Field of size 2 (using GF2X)
              Defn: x |--> x
**********************************************************************
```



---

archive/issue_events_318598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-14T23:32:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318598"
}
```



---

archive/issue_events_318599.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-14T23:32:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318599"
}
```



---

archive/issue_comments_370015.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nJeroen, will you update the output here, or should I do it?",
    "created_at": "2017-12-22T05:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370015",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:54" align="right">Comment 54</div>

Jeroen, will you update the output here, or should I do it?



---

archive/issue_comments_370016.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nI forgot about this ticket. If you can update it, please do.",
    "created_at": "2017-12-22T10:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370016",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">Comment 55</div>

I forgot about this ticket. If you can update it, please do.



---

archive/issue_comments_370017.json:
```json
{
    "body": "Changed commit from **[fff5d7e](https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4)** to **[ad3118f](https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8)**",
    "created_at": "2017-12-23T07:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370017",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[fff5d7e](https://github.com/sagemath/sagetrac-mirror/commit/fff5d7e04b5db731f88ffe5c557a8d8914639aa4)** to **[ad3118f](https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8)**



---

archive/issue_events_318600.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-23T07:05:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318600"
}
```



---

archive/issue_events_318601.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-23T07:05:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318601"
}
```



---

archive/issue_comments_370018.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nUpdated.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8\">ad3118f</a></td><td><code>Merge branch 'u/jdemeyer/allow__generic__polynomialring_implementation' of git://trac.sagemath.org/sage into u/tscrim/generic_polynomialring_implementation-24264</code></td></tr></table>\n",
    "created_at": "2017-12-23T07:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370018",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">Comment 56</div>

Updated.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8">ad3118f</a></td><td><code>Merge branch 'u/jdemeyer/allow__generic__polynomialring_implementation' of git://trac.sagemath.org/sage into u/tscrim/generic_polynomialring_implementation-24264</code></td></tr></table>




---

archive/issue_comments_370019.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/allow__generic__polynomialring_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow__generic__polynomialring_implementation)** to **[u/tscrim/generic_polynomialring_implementation-24264](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/generic_polynomialring_implementation-24264)**",
    "created_at": "2017-12-23T07:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370019",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/jdemeyer/allow__generic__polynomialring_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow__generic__polynomialring_implementation)** to **[u/tscrim/generic_polynomialring_implementation-24264](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/generic_polynomialring_implementation-24264)**



---

archive/issue_comments_370020.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470\">0efda1b</a></td><td><code>Fixing doctest output in morphism.pyx.</code></td></tr></table>\n",
    "created_at": "2017-12-23T07:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370020",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57" align="right">Comment 57</div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470">0efda1b</a></td><td><code>Fixing doctest output in morphism.pyx.</code></td></tr></table>




---

archive/issue_comments_370021.json:
```json
{
    "body": "Changed commit from **[ad3118f](https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8)** to **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**",
    "created_at": "2017-12-23T07:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370021",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ad3118f](https://github.com/sagemath/sagetrac-mirror/commit/ad3118fd940d36b58ca9271e6a2767b2a9413eb8)** to **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**



---

archive/issue_events_318602.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-12-23T07:05:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318602"
}
```



---

archive/issue_events_318603.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-12-23T07:05:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318603"
}
```



---

archive/issue_events_318604.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-23T07:05:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318604"
}
```



---

archive/issue_events_318605.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-23T07:05:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318605"
}
```



---

archive/issue_comments_370022.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nCommit, then push. `:p`",
    "created_at": "2017-12-23T07:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370022",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">Comment 58</div>

Commit, then push. `:p`



---

archive/issue_comments_370023.json:
```json
{
    "body": "Changed branch from **[u/tscrim/generic_polynomialring_implementation-24264](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/generic_polynomialring_implementation-24264)** to **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**",
    "created_at": "2017-12-25T18:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24264#issuecomment-370023",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/generic_polynomialring_implementation-24264](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/generic_polynomialring_implementation-24264)** to **[0efda1b](https://github.com/sagemath/sagetrac-mirror/commit/0efda1be627e00c9ee03bb70900d37663f638470)**



---

archive/issue_events_318606.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-25T18:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318606"
}
```



---

archive/issue_events_318607.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a8e61d5c4bea0fa1117475660781a865912da09",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-25T18:20:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24264#event-318607"
}
```
