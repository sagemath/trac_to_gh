# Issue 24064: Upgrade a few Jupyter packages

archive/issues_023827.json:
```json
{
    "body": "**Tarballs**:\n\n- https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz\n- https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz\n- https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz\n- https://pypi.python.org/packages/6e/0e/160754f7ae3e984863f585a3743b0ed1702043a81245907c8fae2d537155/nbformat-4.4.0.tar.gz\n\n**Branch:** [a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Jeroen Demeyer\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24064\n\n",
    "closed_at": "2017-10-21T19:00:54Z",
    "created_at": "2017-10-18T14:02:09Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Upgrade a few Jupyter packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24064",
    "user": "https://github.com/jdemeyer"
}
```
**Tarballs**:

- https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz
- https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz
- https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz
- https://pypi.python.org/packages/6e/0e/160754f7ae3e984863f585a3743b0ed1702043a81245907c8fae2d537155/nbformat-4.4.0.tar.gz

**Branch:** [a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)

**Reviewer:** François Bissey

**Author:** Jeroen Demeyer

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/24064





---

archive/issue_comments_457010.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n - https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz\n - https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz\n - https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz\n+- https://pypi.python.org/packages/6e/0e/160754f7ae3e984863f585a3743b0ed1702043a81245907c8fae2d537155/nbformat-4.4.0.tar.gz\n``````\n",
    "created_at": "2017-10-18T14:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457010",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 - https://pypi.python.org/packages/d4/51/09da9a18cd858b28cee596a628660a8cbf9830bdd89fe94361bfe18a0bb4/jupyter_client-5.1.0.tar.gz
 - https://pypi.python.org/packages/0c/41/67e16b243b78b49f4b1650d045b63be187c27d20a76f0f7b8e61e0fcb966/ipykernel-4.6.1.tar.gz
 - https://pypi.python.org/packages/e8/69/fbeffffc05236398ebfcfb512b6d2511c622871dca1746361006da310399/ipython_genutils-0.2.0.tar.gz
+- https://pypi.python.org/packages/6e/0e/160754f7ae3e984863f585a3743b0ed1702043a81245907c8fae2d537155/nbformat-4.4.0.tar.gz
``````




---

archive/issue_comments_457011.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_a_few_jupyter_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_a_few_jupyter_packages)",
    "created_at": "2017-10-18T14:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457011",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_a_few_jupyter_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_a_few_jupyter_packages)



---

archive/issue_comments_457012.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4\">a0d75a0</a></td><td><code>server_extensions is deprecated</code></td></tr></table>\n",
    "created_at": "2017-10-18T14:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4">a0d75a0</a></td><td><code>server_extensions is deprecated</code></td></tr></table>




---

archive/issue_comments_457013.json:
```json
{
    "body": "**Commit:** [a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)",
    "created_at": "2017-10-18T14:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)



---

archive/issue_comments_457014.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2017-10-18T20:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457014",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_457015.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhich package introduce the deprecation of `server_extension`, do you know?",
    "created_at": "2017-10-18T20:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457015",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Which package introduce the deprecation of `server_extension`, do you know?



---

archive/issue_comments_457016.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [fbissey](#comment%3A5):\n> Which package introduce the deprecation of `server_extension`, do you know?\n\n\n`notebook` (so it's not even a package touched on this ticket)",
    "created_at": "2017-10-18T20:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457016",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [fbissey](#comment%3A5):
> Which package introduce the deprecation of `server_extension`, do you know?


`notebook` (so it's not even a package touched on this ticket)



---

archive/issue_comments_457017.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-10-18T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457017",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_457018.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2017-10-18T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457018",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_457019.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jdemeyer](#comment%3A6):\n> Replying to [fbissey](#comment%3A5):\n> > Which package introduce the deprecation of `server_extension`, do you know?\n\n> \n> `notebook` (so it's not even a package touched on this ticket)\n\n\nOK, that was puzzling me.  Let's move it on.",
    "created_at": "2017-10-18T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457019",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
Replying to [jdemeyer](#comment%3A6):
> Replying to [fbissey](#comment%3A5):
> > Which package introduce the deprecation of `server_extension`, do you know?

> 
> `notebook` (so it's not even a package touched on this ticket)


OK, that was puzzling me.  Let's move it on.



---

archive/issue_comments_457020.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_a_few_jupyter_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_a_few_jupyter_packages)\" to \"[a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)\".",
    "created_at": "2017-10-21T19:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457020",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_a_few_jupyter_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_a_few_jupyter_packages)" to "[a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)".



---

archive/issue_events_069528.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:00:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24064#event-69528"
}
```



---

archive/issue_comments_457021.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2017-10-21T19:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457021",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_457022.json:
```json
{
    "body": "**Changing commit** from \"[a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)\" to \"\".",
    "created_at": "2017-10-22T19:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457022",
    "user": "https://github.com/koffie"
}
```

**Changing commit** from "[a0d75a0b162b18b744b67c145f3aef4434ac1bb4](https://github.com/sagemath/sagetrac-mirror/commit/a0d75a0b162b18b744b67c145f3aef4434ac1bb4)" to "".



---

archive/issue_comments_457023.json:
```json
{
    "body": "<a id='comment:9'></a>\n[At](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-96-generic/petitbonum/2017-10-22%2018:09:18?short) [least](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-97-generic/quasar/2017-10-22%2017:48:41?short) [three](https://patchbot.sagemath.org/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-10-22%2017:24:17?short) patchbots seem to fail during the build of ipykernel since 8.1.beta9. Could this ticket be the cause of that?\n\nMost relevant part of the install log (which is messed up due to parallel builds)\n\n```\n[ipykernel-4.6.1]     Traceback (most recent call last):\n[ipykernel-4.6.1]       File \"<string>\", line 1, in <module>\n[ipykernel-4.6.1]       File \"/tmp/pip-n397X9-build/setup.py\", line 91, in <module>\n[ipykernel-4.6.1]         from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME\n[ipykernel-4.6.1]       File \"ipykernel/__init__.py\", line 2, in <module>\n[ipykernel-4.6.1]         from .connect import *\n[ipykernel-4.6.1]       File \"ipykernel/connect.py\", line 13, in <module>\n[ipykernel-4.6.1]         from IPython.core.profiledir import ProfileDir\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/IPython/__init__.py\", line 48, in <module>\n[ipykernel-4.6.1]         from .core.application import Application\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/IPython/core/application.py\", line 23, in <module>\n[ipykernel-4.6.1]         from traitlets.config.application import Application, catch_config_error\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/__init__.py\", line 1, in <module>\n[numpy-1.13.3.p0] gcc: numpy/core/src/npymath/npy_math.c\n[ipykernel-4.6.1]         from .traitlets import *\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/traitlets.py\", line 60, in <module>\n[ipykernel-4.6.1]         from .utils.importstring import import_item\n[ipykernel-4.6.1]       File \"/opt/sage/local/lib/python2.7/site-packages/traitlets/utils/importstring.py\", line 8, in <module>\n[ipykernel-4.6.1]         from ipython_genutils.py3compat import cast_bytes_py2\n[ipykernel-4.6.1]     ImportError: No module named ipython_genutils.py3compat\n```\nSeems that somehow a dependency is not installed correctly.",
    "created_at": "2017-10-22T19:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457023",
    "user": "https://github.com/koffie"
}
```

<a id='comment:9'></a>
[At](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-96-generic/petitbonum/2017-10-22%2018:09:18?short) [least](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-97-generic/quasar/2017-10-22%2017:48:41?short) [three](https://patchbot.sagemath.org/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-10-22%2017:24:17?short) patchbots seem to fail during the build of ipykernel since 8.1.beta9. Could this ticket be the cause of that?

Most relevant part of the install log (which is messed up due to parallel builds)

```
[ipykernel-4.6.1]     Traceback (most recent call last):
[ipykernel-4.6.1]       File "<string>", line 1, in <module>
[ipykernel-4.6.1]       File "/tmp/pip-n397X9-build/setup.py", line 91, in <module>
[ipykernel-4.6.1]         from ipykernel.kernelspec import write_kernel_spec, make_ipkernel_cmd, KERNEL_NAME
[ipykernel-4.6.1]       File "ipykernel/__init__.py", line 2, in <module>
[ipykernel-4.6.1]         from .connect import *
[ipykernel-4.6.1]       File "ipykernel/connect.py", line 13, in <module>
[ipykernel-4.6.1]         from IPython.core.profiledir import ProfileDir
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/IPython/__init__.py", line 48, in <module>
[ipykernel-4.6.1]         from .core.application import Application
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/IPython/core/application.py", line 23, in <module>
[ipykernel-4.6.1]         from traitlets.config.application import Application, catch_config_error
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/__init__.py", line 1, in <module>
[numpy-1.13.3.p0] gcc: numpy/core/src/npymath/npy_math.c
[ipykernel-4.6.1]         from .traitlets import *
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/traitlets.py", line 60, in <module>
[ipykernel-4.6.1]         from .utils.importstring import import_item
[ipykernel-4.6.1]       File "/opt/sage/local/lib/python2.7/site-packages/traitlets/utils/importstring.py", line 8, in <module>
[ipykernel-4.6.1]         from ipython_genutils.py3compat import cast_bytes_py2
[ipykernel-4.6.1]     ImportError: No module named ipython_genutils.py3compat
```
Seems that somehow a dependency is not installed correctly.



---

archive/issue_comments_457024.json:
```json
{
    "body": "<a id='comment:10'></a>\nYes, those things can go unnoticed. According to similar gentoo ebuild `ipykernel` depends on `traitlets` which brings `ipython_genutils`, we don't have the `traitlets` dependency in `ipykernel` in sage. But I'd say the `ipython_genutils` is now a direct dependency in view of these logs.",
    "created_at": "2017-10-22T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457024",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
Yes, those things can go unnoticed. According to similar gentoo ebuild `ipykernel` depends on `traitlets` which brings `ipython_genutils`, we don't have the `traitlets` dependency in `ipykernel` in sage. But I'd say the `ipython_genutils` is now a direct dependency in view of these logs.



---

archive/issue_comments_457025.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'd happily review a follow up ticket fixing this.",
    "created_at": "2017-10-22T19:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457025",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
I'd happily review a follow up ticket fixing this.



---

archive/issue_comments_457026.json:
```json
{
    "body": "<a id='comment:12'></a>\nOk, in the mean time I created the ticket #24088 for the issue.",
    "created_at": "2017-10-22T19:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24064#issuecomment-457026",
    "user": "https://github.com/koffie"
}
```

<a id='comment:12'></a>
Ok, in the mean time I created the ticket #24088 for the issue.
