# Issue 24905: Upgrade polymake to version 3.4

archive/issues_024668.json:
```json
{
    "body": "https://polymake.org/doku.php/download/start#get_latest_stable_release33\n\nTo build it for Sage do:\n\n```\n(cd upstream && wget https://polymake.org/lib/exe/fetch.php/download/polymake-3.4-minimal.tar.bz2)\n```\n\npull this ticket and build sage\n\n```\nmake build\n```\n\nThen \nRead (and follow) the installation instructions regarding Perl prereqs on your platform:\n\n```\n./sage -info polymake\n```\n\nFinally: \n\n```\n./sage -i polymake\n```\n\nCC:  simonking @jplab @videlec @slel @sophiasage paffenholz@mathematik.tu-darmstadt.de kastner@math.tu-berlin.de\n\nKeywords: IMA-PolyGeom, thursdaysbdx\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: Matthias Koeppe, Jean-Philippe Labb\u00e9, Dima Pasechnik\n\nAuthor: Matthias Koeppe, Jean-Philippe Labb\u00e9, Dima Pasechnik\n\nBranch: public/upgrade_polymake_to_version_3_2r4\n\nCommit: 2eda6e11325d5d997f0de64e9d9f7add42fa7adb\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24905\n\n",
    "closed_at": "2019-05-12T21:33:26Z",
    "created_at": "2018-03-06T06:28:53Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Upgrade polymake to version 3.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24905",
    "user": "https://github.com/mkoeppe"
}
```
https://polymake.org/doku.php/download/start#get_latest_stable_release33

To build it for Sage do:

```
(cd upstream && wget https://polymake.org/lib/exe/fetch.php/download/polymake-3.4-minimal.tar.bz2)
```

pull this ticket and build sage

```
make build
```

Then 
Read (and follow) the installation instructions regarding Perl prereqs on your platform:

```
./sage -info polymake
```

Finally: 

```
./sage -i polymake
```

CC:  simonking @jplab @videlec @slel @sophiasage paffenholz@mathematik.tu-darmstadt.de kastner@math.tu-berlin.de

Keywords: IMA-PolyGeom, thursdaysbdx

Upstream: Reported upstream. No feedback yet.

Reviewer: Matthias Koeppe, Jean-Philippe Labbé, Dima Pasechnik

Author: Matthias Koeppe, Jean-Philippe Labbé, Dima Pasechnik

Branch: public/upgrade_polymake_to_version_3_2r4

Commit: 2eda6e11325d5d997f0de64e9d9f7add42fa7adb

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24905





---

archive/issue_comments_345582.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T21:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345583.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-05T21:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345583",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_345584.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-06T12:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345584",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_345585.json:
```json
{
    "body": "<a id='comment:5'></a>`ninja_build` should be an order-only dependency (after the `|` symbol)",
    "created_at": "2018-04-06T12:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345585",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>`ninja_build` should be an order-only dependency (after the `|` symbol)



---

archive/issue_comments_345586.json:
```json
{
    "body": "<a id='comment:6'></a>All other packages have `$(MP_LIBRARY)` in their dependencies instead of `$(INST)/$(SAGE_MP_LIBRARY)`. I guess this should be changed.",
    "created_at": "2018-04-06T12:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345586",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>All other packages have `$(MP_LIBRARY)` in their dependencies instead of `$(INST)/$(SAGE_MP_LIBRARY)`. I guess this should be changed.



---

archive/issue_comments_345587.json:
```json
{
    "body": "<a id='comment:7'></a>Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:\n\n```\n[perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.\n```\nIndeed, there is no `libncurses.a` installed (but `libncurses.so` is).",
    "created_at": "2018-04-06T12:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345587",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:

```
[perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.
```
Indeed, there is no `libncurses.a` installed (but `libncurses.so` is).



---

archive/issue_comments_345588.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:\n> Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:\n> \n> ```\n> [perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.\n> ```\n> Indeed, there is no `libncurses.a` installed (but `libncurses.so` is).\n\nCould you create a separate ticket for this (and include more log detail)?",
    "created_at": "2018-04-06T16:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:
> Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:
> 
> ```
> [perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.
> ```
> Indeed, there is no `libncurses.a` installed (but `libncurses.so` is).

Could you create a separate ticket for this (and include more log detail)?



---

archive/issue_comments_345589.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T16:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345590.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-06T18:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345590",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_345591.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-06T18:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345591",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_345592.json:
```json
{
    "body": "<a id='comment:12'></a>This upgrade seems to break the whole polymake interface. Next step: Compare what's happening on the wire (pexpect log) between the two polymake versions.",
    "created_at": "2018-04-06T19:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345592",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>This upgrade seems to break the whole polymake interface. Next step: Compare what's happening on the wire (pexpect log) between the two polymake versions.



---

archive/issue_comments_345593.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:8 mkoeppe]:\n> Replying to [comment:7 jdemeyer]:\n> > Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:\n> > \n> > ```\n> > [perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.\n> > ```\n> > Indeed, there is no `libncurses.a` installed (but `libncurses.so` is).\n\n> Could you create a separate ticket for this (and include more log detail)?\n\nWe have reproduced this problem on another linux box. Fix is in #25112.",
    "created_at": "2018-04-06T20:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345593",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Replying to [comment:8 mkoeppe]:
> Replying to [comment:7 jdemeyer]:
> > Unfortunately, I cannot test this because `perl_term_readline_gnu` fails to install:
> > 
> > ```
> > [perl_term_readline_gnu-1.34] Could not find neither libtermcap.a, libncurses.a, or libcurses.
> > ```
> > Indeed, there is no `libncurses.a` installed (but `libncurses.so` is).

> Could you create a separate ticket for this (and include more log detail)?

We have reproduced this problem on another linux box. Fix is in #25112.



---

archive/issue_comments_345594.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T22:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345595.json:
```json
{
    "body": "<a id='comment:20'></a>Compilation fails on Debian stretch. I copy the relevant section of the log file:\n\n```\n[706/940] LD /home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/lib/polytope.so\nFAILED: /home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/lib/polytope.so \ng++ -shared -L/usr/local/lib -fstack-protector-strong -Wl,-z,lazy -Wl,--as-needed  -o \nLOOOOOOOOGGGGGGGGGGGGGGGGGGGGG LIST OF .o and .so files \n/home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/staticlib/sympol/libsympol.a  -L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib -lsoplex -lz -lppl -llrsgmp -lnormaliz -lgmpxx -lcddgmp -L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib  -fopenmp -lmpfr -lgmp -lpthread  -ldl\n/usr/bin/ld: /home/jplabbe/sage/local/lib/libsoplex.a(rational.cpp.o): relocation R_X86_64_TPOFF32 against symbol `_ZN6soplex8Rational10useListMemE' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: /home/jplabbe/sage/local/lib/libsoplex.a(spxdefines.cpp.o): relocation R_X86_64_TPOFF32 against symbol `_ZN6soplex5Param9s_epsilonE' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Nonrepresentable section on output\ncollect2: error: ld returned 1 exit status\n```",
    "created_at": "2018-04-06T23:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345595",
    "user": "https://github.com/jplab"
}
```

<a id='comment:20'></a>Compilation fails on Debian stretch. I copy the relevant section of the log file:

```
[706/940] LD /home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/lib/polytope.so
FAILED: /home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/lib/polytope.so 
g++ -shared -L/usr/local/lib -fstack-protector-strong -Wl,-z,lazy -Wl,--as-needed  -o 
LOOOOOOOOGGGGGGGGGGGGGGGGGGGGG LIST OF .o and .so files 
/home/jplabbe/sage/local/var/tmp/sage/build/polymake-3.2r2/src/build/Opt/staticlib/sympol/libsympol.a  -L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib -lsoplex -lz -lppl -llrsgmp -lnormaliz -lgmpxx -lcddgmp -L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib  -fopenmp -lmpfr -lgmp -lpthread  -ldl
/usr/bin/ld: /home/jplabbe/sage/local/lib/libsoplex.a(rational.cpp.o): relocation R_X86_64_TPOFF32 against symbol `_ZN6soplex8Rational10useListMemE' can not be used when making a shared object; recompile with -fPIC
/usr/bin/ld: /home/jplabbe/sage/local/lib/libsoplex.a(spxdefines.cpp.o): relocation R_X86_64_TPOFF32 against symbol `_ZN6soplex5Param9s_epsilonE' can not be used when making a shared object; recompile with -fPIC
/usr/bin/ld: final link failed: Nonrepresentable section on output
collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_345596.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-07T21:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345596",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345597.json:
```json
{
    "body": "<a id='comment:22'></a>Now the compilation finishes without errors. Testing with `--optional=polymake`, I get:\n\n```\n----------------------------------------------------------------------\nsage -t backend_polymake.py  # 53 doctests failed\nsage -t base.py  # 13 doctests failed\n----------------------------------------------------------------------\n```\n\nThe first is:\n\n```\nsage: p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],lines=[], backend='polymake')\n```\n\nfor which I get:\n\n```\nTraceback (most recent call last):\n...\nTypeError: Can't locate File/Slurp.pm in @INC (you may need to install the File::Slurp module) (@INC contains: CODE(0x562008f51e88) /home/jplabbe/sage/local/share/polymake/perllib /home/jplabbe/sage/local/lib/polymake/perlx/5.24.1/x86_64-linux-gnu-thread-multi /home/jplabbe/sage/local/lib/polymake/perlx/5.24.1 /home/jplabbe/sage/local/lib/polymake/perlx /home/jplabbe/sage/local/lib/perl5/x86_64-linux-gnu-thread-multi /home/jplabbe/sage/local/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base)\nBEGIN failed--compilation aborted\n```\n\nAnother type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.",
    "created_at": "2018-04-08T15:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345597",
    "user": "https://github.com/jplab"
}
```

<a id='comment:22'></a>Now the compilation finishes without errors. Testing with `--optional=polymake`, I get:

```
----------------------------------------------------------------------
sage -t backend_polymake.py  # 53 doctests failed
sage -t base.py  # 13 doctests failed
----------------------------------------------------------------------
```

The first is:

```
sage: p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],lines=[], backend='polymake')
```

for which I get:

```
Traceback (most recent call last):
...
TypeError: Can't locate File/Slurp.pm in @INC (you may need to install the File::Slurp module) (@INC contains: CODE(0x562008f51e88) /home/jplabbe/sage/local/share/polymake/perllib /home/jplabbe/sage/local/lib/polymake/perlx/5.24.1/x86_64-linux-gnu-thread-multi /home/jplabbe/sage/local/lib/polymake/perlx/5.24.1 /home/jplabbe/sage/local/lib/polymake/perlx /home/jplabbe/sage/local/lib/perl5/x86_64-linux-gnu-thread-multi /home/jplabbe/sage/local/lib/perl5 /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base)
BEGIN failed--compilation aborted
```

Another type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.



---

archive/issue_comments_345598.json:
```json
{
    "body": "<a id='comment:23'></a>For the error with Slurp, merge #24152 (needs review) and then re-read the polymake SPKG.txt regarding the Perl libraries that need to be installed.",
    "created_at": "2018-04-08T16:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345598",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>For the error with Slurp, merge #24152 (needs review) and then re-read the polymake SPKG.txt regarding the Perl libraries that need to be installed.



---

archive/issue_comments_345599.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:22 jipilab]:\n> Another type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.\n\nYes, that's exactly what I meant when I wrote \"break[s] the whole polymake interface\".",
    "created_at": "2018-04-08T16:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345599",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Replying to [comment:22 jipilab]:
> Another type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.

Yes, that's exactly what I meant when I wrote "break[s] the whole polymake interface".



---

archive/issue_comments_345600.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:\n> Replying to [comment:22 jipilab]:\n> > Another type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.\n\n> Yes, that's exactly what I meant when I wrote \"break[s] the whole polymake interface\".\n\nI wanted to emphaSIZE the problem! ;)",
    "created_at": "2018-04-08T17:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345600",
    "user": "https://github.com/jplab"
}
```

<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:
> Replying to [comment:22 jipilab]:
> > Another type of error seems to be that not putting `()` at the end of a CAPITALIZEDPOLYMAKEMETHOD returns a function and not the result anymore.

> Yes, that's exactly what I meant when I wrote "break[s] the whole polymake interface".

I wanted to emphaSIZE the problem! ;)



---

archive/issue_comments_345601.json:
```json
{
    "body": "<a id='comment:26'></a>Merged the dependency to #24152.\n\n---\nNew commits:",
    "created_at": "2018-04-08T18:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345601",
    "user": "https://github.com/jplab"
}
```

<a id='comment:26'></a>Merged the dependency to #24152.

---
New commits:



---

archive/issue_comments_345602.json:
```json
{
    "body": "Changing keywords from \"\" to \"IMA-PolyGeom\".",
    "created_at": "2018-04-08T20:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345602",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "IMA-PolyGeom".



---

archive/issue_comments_345603.json:
```json
{
    "body": "<a id='comment:28'></a>3.2r3 is out",
    "created_at": "2018-09-01T07:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345603",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>3.2r3 is out



---

archive/issue_comments_345604.json:
```json
{
    "body": "<a id='comment:29'></a>Ok, good to know. At the beginning of October, I have a week where I'll try this once more.\n\nFurther, I had a comment recently that one might want to add a link to the backend `polymake` in the documentation page for the interface (because the interface is not the only way to use polymake in sage...).",
    "created_at": "2018-09-01T08:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345604",
    "user": "https://github.com/jplab"
}
```

<a id='comment:29'></a>Ok, good to know. At the beginning of October, I have a week where I'll try this once more.

Further, I had a comment recently that one might want to add a link to the backend `polymake` in the documentation page for the interface (because the interface is not the only way to use polymake in sage...).



---

archive/issue_comments_345605.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-21T18:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345605",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345606.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-03T18:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345607.json:
```json
{
    "body": "<a id='comment:32'></a>It seems that the commit 791f766 merged the develop branch into the upgrade polymake branch?\n\nWe then get all the diffs from the develop branch on this ticket... I would revert back to a previous commit if no changes were done at the same time as this merge... Let's see how it goes with this update on top of the last beta.\n\nNow version 3.2.r4 is out as well and I updated the description of the ticket.\n\nPolymake days are January 24-26 2019, I will ask them if a stable release is to be expected soon...",
    "created_at": "2019-01-03T18:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345607",
    "user": "https://github.com/jplab"
}
```

<a id='comment:32'></a>It seems that the commit 791f766 merged the develop branch into the upgrade polymake branch?

We then get all the diffs from the develop branch on this ticket... I would revert back to a previous commit if no changes were done at the same time as this merge... Let's see how it goes with this update on top of the last beta.

Now version 3.2.r4 is out as well and I updated the description of the ticket.

Polymake days are January 24-26 2019, I will ask them if a stable release is to be expected soon...



---

archive/issue_comments_345608.json:
```json
{
    "body": "<a id='comment:33'></a>I accidently erased the patch to compile with gcc7 form a previous ticket... I do not have gcc7 on my computer... But I guess it would be good to check it again anyways on this new release...",
    "created_at": "2019-01-03T18:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345608",
    "user": "https://github.com/jplab"
}
```

<a id='comment:33'></a>I accidently erased the patch to compile with gcc7 form a previous ticket... I do not have gcc7 on my computer... But I guess it would be good to check it again anyways on this new release...



---

archive/issue_comments_345609.json:
```json
{
    "body": "<a id='comment:34'></a>I am looking at the broken polymake interface. I noticed a few things:\n\n- Quotes do not work the same way as before:\n\n```\n    sage: polymake(\"'ok'\")                              # optional - polymake\n    'ok'\n```\n\n   So we need to handle this differently when calling member functions.\n\n- I get a compilation error directly while asking for the Type of a polytope:\n\n```\npolytope > $c = cube(3);\npolytope > $t = typeof $c;\npolymake:  ERROR: Compilation error\n```\n\nThis breaks pretty much everything, as the object is not able to catch its type and get the proper names for functions, and lots of other things...",
    "created_at": "2019-01-04T12:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345609",
    "user": "https://github.com/jplab"
}
```

<a id='comment:34'></a>I am looking at the broken polymake interface. I noticed a few things:

- Quotes do not work the same way as before:

```
    sage: polymake("'ok'")                              # optional - polymake
    'ok'
```

   So we need to handle this differently when calling member functions.

- I get a compilation error directly while asking for the Type of a polytope:

```
polytope > $c = cube(3);
polytope > $t = typeof $c;
polymake:  ERROR: Compilation error
```

This breaks pretty much everything, as the object is not able to catch its type and get the proper names for functions, and lots of other things...



---

archive/issue_comments_345610.json:
```json
{
    "body": "<a id='comment:35'></a>New commits:",
    "created_at": "2019-01-05T12:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345610",
    "user": "https://github.com/jplab"
}
```

<a id='comment:35'></a>New commits:



---

archive/issue_comments_345611.json:
```json
{
    "body": "<a id='comment:36'></a>The previous commits fix the polymake interface, see https://forum.polymake.org/viewtopic.php?f=8&t=1675 for a discussion of the issue.\n\nIn short, the command\n\n```\n$t = typeof $c;\n```\n\nStopped working (as in the tutorials mentionned in the discussion) and we should use:\n\n```\n$t = $c -> type;\n```\n\nThis seems to have fixed the problems.\n\nThere is still a spurious failing test in the interface which is an appearing blankline. I ignore it for now...\n\nNext, I'll check the polymake backend for polyhedron. There seems to be around 4 failing doctests. That's much better than the 100s... there was.",
    "created_at": "2019-01-05T12:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345611",
    "user": "https://github.com/jplab"
}
```

<a id='comment:36'></a>The previous commits fix the polymake interface, see https://forum.polymake.org/viewtopic.php?f=8&t=1675 for a discussion of the issue.

In short, the command

```
$t = typeof $c;
```

Stopped working (as in the tutorials mentionned in the discussion) and we should use:

```
$t = $c -> type;
```

This seems to have fixed the problems.

There is still a spurious failing test in the interface which is an appearing blankline. I ignore it for now...

Next, I'll check the polymake backend for polyhedron. There seems to be around 4 failing doctests. That's much better than the 100s... there was.



---

archive/issue_comments_345612.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:34 jipilab]:\n> I am looking at the broken polymake interface. I noticed a few things:\n> \n> - Quotes do not work the same way as before:\n> \n> \n> ```\n>     sage: polymake(\"'ok'\")                              # optional - polymake\n>     'ok'\n> ```\n\n\nThis was simply because of the failing evaluation when setting variables. It seems fine now.",
    "created_at": "2019-01-05T12:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345612",
    "user": "https://github.com/jplab"
}
```

<a id='comment:37'></a>Replying to [comment:34 jipilab]:
> I am looking at the broken polymake interface. I noticed a few things:
> 
> - Quotes do not work the same way as before:
> 
> 
> ```
>     sage: polymake("'ok'")                              # optional - polymake
>     'ok'
> ```


This was simply because of the failing evaluation when setting variables. It seems fine now.



---

archive/issue_comments_345613.json:
```json
{
    "body": "<a id='comment:38'></a>On the release page of polymake 3.2 https://polymake.org/doku.php/news/release_3_2\n\none can read under \"polytope\":\n\n- zero vectors in input properties throw an exception\n\nThis breaks a few of our tests.",
    "created_at": "2019-01-05T12:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345613",
    "user": "https://github.com/jplab"
}
```

<a id='comment:38'></a>On the release page of polymake 3.2 https://polymake.org/doku.php/news/release_3_2

one can read under "polytope":

- zero vectors in input properties throw an exception

This breaks a few of our tests.



---

archive/issue_comments_345614.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 jipilab]:\n> On the release page of polymake 3.2 https://polymake.org/doku.php/news/release_3_2\n> \n> one can read under \"polytope\":\n> \n> - zero vectors in input properties throw an exception\n> \n> This breaks a few of our tests.\n\n\nThe question is now: how to get the full space as a polyhedron is polymake?",
    "created_at": "2019-01-05T12:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345614",
    "user": "https://github.com/jplab"
}
```

<a id='comment:39'></a>Replying to [comment:38 jipilab]:
> On the release page of polymake 3.2 https://polymake.org/doku.php/news/release_3_2
> 
> one can read under "polytope":
> 
> - zero vectors in input properties throw an exception
> 
> This breaks a few of our tests.


The question is now: how to get the full space as a polyhedron is polymake?



---

archive/issue_comments_345615.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-05T13:15:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345616.json:
```json
{
    "body": "<a id='comment:41'></a>It seems that the tests now pass.\n\nReady for review!",
    "created_at": "2019-01-05T13:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345616",
    "user": "https://github.com/jplab"
}
```

<a id='comment:41'></a>It seems that the tests now pass.

Ready for review!



---

archive/issue_comments_345617.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-01-05T13:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345617",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_062542.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-13T17:23:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24905#event-62542"
}
```



---

archive/issue_comments_345618.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-01T10:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345619.json:
```json
{
    "body": "<a id='comment:44'></a>I'm getting the following error:\n\n```\nRunning doctests with ID 2019-03-11-14-11-33-0ac43552.\nGit branch: public/upgrade_polymake_to_version_3_2r4\nUsing --optional=4ti2,bliss,cmake,dochtml,gmpy2,latte_int,lidia,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,qhull,sage,topcom\nDoctesting 1 file.\nsage -t --long --warn-long 41.5 src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 1735, in sage.interfaces.polymake.PolymakeElement.get_member_function\nFailed example:\n    c.get_member_function(\"foo\")()                        # optional - polymake\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: Can't locate object method \"foo\" via package \"Polymake::polytope::Polytope__Rational\" at input line 1.\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeElement.get_member_function[6]>\", line 1, in <module>\n        c.get_member_function(\"foo\")()                        # optional - polymake\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 2114, in __call__\n        return self._obj._check_valid().function_call(self._name, list(args), kwds)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 284, in function_call\n        return self(s)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 288, in __call__\n        return cls(self, x, name=name)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1442, in __init__\n        raise_(TypeError, TypeError(*x.args), sys.exc_info()[2])\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1437, in __init__\n        self._name = parent._create(value, name=name)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 628, in _create\n        self.set(name, value)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 717, in set\n        self.eval(cmd)\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1351, in eval\n        for L in code.split('\\n') if L != ''])\n      File \"/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 1068, in _eval_line\n        raise PolymakeError(e)\n    TypeError: Can't locate object method \"foo\" via package \"Polymake::polytope::Polytope__Rational\"\n```\n\nAlso, I had to install perl yet with\n\n```\ncpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n```\nyet. With polymake 3.1 in sage, there was not need of that.",
    "created_at": "2019-03-11T13:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345619",
    "user": "https://github.com/kliem"
}
```

<a id='comment:44'></a>I'm getting the following error:

```
Running doctests with ID 2019-03-11-14-11-33-0ac43552.
Git branch: public/upgrade_polymake_to_version_3_2r4
Using --optional=4ti2,bliss,cmake,dochtml,gmpy2,latte_int,lidia,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,qhull,sage,topcom
Doctesting 1 file.
sage -t --long --warn-long 41.5 src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 1735, in sage.interfaces.polymake.PolymakeElement.get_member_function
Failed example:
    c.get_member_function("foo")()                        # optional - polymake
Expected:
    Traceback (most recent call last):
    ...
    TypeError: Can't locate object method "foo" via package "Polymake::polytope::Polytope__Rational" at input line 1.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeElement.get_member_function[6]>", line 1, in <module>
        c.get_member_function("foo")()                        # optional - polymake
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 2114, in __call__
        return self._obj._check_valid().function_call(self._name, list(args), kwds)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 284, in function_call
        return self(s)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 288, in __call__
        return cls(self, x, name=name)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1442, in __init__
        raise_(TypeError, TypeError(*x.args), sys.exc_info()[2])
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1437, in __init__
        self._name = parent._create(value, name=name)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 628, in _create
        self.set(name, value)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 717, in set
        self.eval(cmd)
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1351, in eval
        for L in code.split('\n') if L != ''])
      File "/srv/public/kliem/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 1068, in _eval_line
        raise PolymakeError(e)
    TypeError: Can't locate object method "foo" via package "Polymake::polytope::Polytope__Rational"
```

Also, I had to install perl yet with

```
cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
```
yet. With polymake 3.1 in sage, there was not need of that.



---

archive/issue_comments_345620.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-13T09:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345621.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:44 gh-kliem]:\n\nThe failing doctest should be fixed now.\n\n> \n> Also, I had to install perl yet with\n> \n> ```\n> cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n> ```\n> yet. With polymake 3.1 in sage, there was not need of that.\n\n\nCould you be more specific about this? Could you say in which order you did this and if we have to add this to the installation instruction?",
    "created_at": "2019-03-13T09:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345621",
    "user": "https://github.com/jplab"
}
```

<a id='comment:46'></a>Replying to [comment:44 gh-kliem]:

The failing doctest should be fixed now.

> 
> Also, I had to install perl yet with
> 
> ```
> cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
> ```
> yet. With polymake 3.1 in sage, there was not need of that.


Could you be more specific about this? Could you say in which order you did this and if we have to add this to the installation instruction?



---

archive/issue_comments_345622.json:
```json
{
    "body": "<a id='comment:47'></a>I had polymake installed via `./sage -i polymake` before.\nThis didn't require any extra installations.\n\nI went through the instructions of this ticket and ignored\n`./sage -info polymake`.\nThis failed. Following the instructions and executing\n\n```\ncpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n```\nbeforehand worked fine.\n\nTo me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.\n\nReplying to [comment:46 jipilab]:\n> Replying to [comment:44 gh-kliem]:\n> \n> The failing doctest should be fixed now.\n> \n> > \n> > Also, I had to install perl yet with\n> > \n> > ```\n> > cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n> > ```\n> > yet. With polymake 3.1 in sage, there was not need of that.\n  \n> \n> Could you be more specific about this? Could you say in which order you did this and if we have to add this to the installation instruction?",
    "created_at": "2019-03-13T09:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345622",
    "user": "https://github.com/kliem"
}
```

<a id='comment:47'></a>I had polymake installed via `./sage -i polymake` before.
This didn't require any extra installations.

I went through the instructions of this ticket and ignored
`./sage -info polymake`.
This failed. Following the instructions and executing

```
cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
```
beforehand worked fine.

To me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.

Replying to [comment:46 jipilab]:
> Replying to [comment:44 gh-kliem]:
> 
> The failing doctest should be fixed now.
> 
> > 
> > Also, I had to install perl yet with
> > 
> > ```
> > cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
> > ```
> > yet. With polymake 3.1 in sage, there was not need of that.
  
> 
> Could you be more specific about this? Could you say in which order you did this and if we have to add this to the installation instruction?



---

archive/issue_comments_345623.json:
```json
{
    "body": "<a id='comment:48'></a>Btw, also polymake is not auto-detected when running doctests.\n\nSo `./sage -t --all --long` will not use polymake unless specified.\n\nI don't know, if this is a problem specific to my installation or not.",
    "created_at": "2019-03-13T10:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345623",
    "user": "https://github.com/kliem"
}
```

<a id='comment:48'></a>Btw, also polymake is not auto-detected when running doctests.

So `./sage -t --all --long` will not use polymake unless specified.

I don't know, if this is a problem specific to my installation or not.



---

archive/issue_comments_345624.json:
```json
{
    "body": "<a id='comment:49'></a>Almost everything passed now. This is the only thing remaining on my machine:\n\n```\nFile \"src/sage/interfaces/polymake.py\", line 823, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    p.N_LATTICE_POINTS                # optional - polymake\nExpected:\n    used package latte\n      LattE (Lattice point Enumeration) is a computer software dedicated to the\n      problems of counting lattice points and integration inside convex polytopes.\n      Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n      http://www.math.ucdavis.edu/~latte/\n    27\nGot:\n    27\n```",
    "created_at": "2019-03-13T11:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345624",
    "user": "https://github.com/kliem"
}
```

<a id='comment:49'></a>Almost everything passed now. This is the only thing remaining on my machine:

```
File "src/sage/interfaces/polymake.py", line 823, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    p.N_LATTICE_POINTS                # optional - polymake
Expected:
    used package latte
      LattE (Lattice point Enumeration) is a computer software dedicated to the
      problems of counting lattice points and integration inside convex polytopes.
      Copyright by Matthias Koeppe, Jesus A. De Loera and others.
      http://www.math.ucdavis.edu/~latte/
    27
Got:
    27
```



---

archive/issue_comments_345625.json:
```json
{
    "body": "<a id='comment:50'></a>Replying to [comment:47 gh-kliem]:\n> I had polymake installed via `./sage -i polymake` before.\n> This didn't require any extra installations.\n> \n> I went through the instructions of this ticket and ignored\n> `./sage -info polymake`.\n> This failed. Following the instructions and executing\n> \n> ```\n> cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n> ```\n> beforehand worked fine.\n> \n> To me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.\n\n\nHave a look at the commit to see what changed. When we update a package, we change the source and the place to download the package. Since the package is not yet on the sage mirror, this is why you download it and put it in the appropriate folder by hand.\n\nAfter doing so, as long as you are on this branch, installing polymake will install the newest version (the one written with this new ticket). If you go back to a different ticket, you have to (re-)install polymake the usual way. And it should work. But well, polymake installation used to not work before, so there's no discussion to have on this aspect. We should focus on the present installation.\n\nAgain, can you state clearly what you did step-by-step and say if each step worked or not. It is difficult to follow from what you write about what worked and what did not work.",
    "created_at": "2019-03-13T13:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345625",
    "user": "https://github.com/jplab"
}
```

<a id='comment:50'></a>Replying to [comment:47 gh-kliem]:
> I had polymake installed via `./sage -i polymake` before.
> This didn't require any extra installations.
> 
> I went through the instructions of this ticket and ignored
> `./sage -info polymake`.
> This failed. Following the instructions and executing
> 
> ```
> cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
> ```
> beforehand worked fine.
> 
> To me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.


Have a look at the commit to see what changed. When we update a package, we change the source and the place to download the package. Since the package is not yet on the sage mirror, this is why you download it and put it in the appropriate folder by hand.

After doing so, as long as you are on this branch, installing polymake will install the newest version (the one written with this new ticket). If you go back to a different ticket, you have to (re-)install polymake the usual way. And it should work. But well, polymake installation used to not work before, so there's no discussion to have on this aspect. We should focus on the present installation.

Again, can you state clearly what you did step-by-step and say if each step worked or not. It is difficult to follow from what you write about what worked and what did not work.



---

archive/issue_comments_345626.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:48 gh-kliem]:\n> Btw, also polymake is not auto-detected when running doctests.\n> \n> So `./sage -t --all --long` will not use polymake unless specified.\n> \n> I don't know, if this is a problem specific to my installation or not.\n\n\nPolymake is an experimental package, so it is not included in the default testing. Perhaps there is a way to include all experimental package. But this is a recipe for disaster anyway. So just add it by hand each time you test. That's the cheapest solution.",
    "created_at": "2019-03-13T13:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345626",
    "user": "https://github.com/jplab"
}
```

<a id='comment:51'></a>Replying to [comment:48 gh-kliem]:
> Btw, also polymake is not auto-detected when running doctests.
> 
> So `./sage -t --all --long` will not use polymake unless specified.
> 
> I don't know, if this is a problem specific to my installation or not.


Polymake is an experimental package, so it is not included in the default testing. Perhaps there is a way to include all experimental package. But this is a recipe for disaster anyway. So just add it by hand each time you test. That's the cheapest solution.



---

archive/issue_comments_345627.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:49 gh-kliem]:\n> Almost everything passed now. This is the only thing remaining on my machine:\n> \n> \n> ```\n> File \"src/sage/interfaces/polymake.py\", line 823, in sage.interfaces.polymake.Polymake._eval_line\n> Failed example:\n>     p.N_LATTICE_POINTS                # optional - polymake\n> Expected:\n>     used package latte\n>       LattE (Lattice point Enumeration) is a computer software dedicated to the\n>       problems of counting lattice points and integration inside convex polytopes.\n>       Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n>       http://www.math.ucdavis.edu/~latte/\n>     27\n> Got:\n>     27\n> ```\n\n\nOkay, this is annoying, as I do not get this error in my case. It seems that they randomly throw out such transparency statements about libraries it uses. Okay. Thanks for pointing this out.",
    "created_at": "2019-03-13T13:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345627",
    "user": "https://github.com/jplab"
}
```

<a id='comment:52'></a>Replying to [comment:49 gh-kliem]:
> Almost everything passed now. This is the only thing remaining on my machine:
> 
> 
> ```
> File "src/sage/interfaces/polymake.py", line 823, in sage.interfaces.polymake.Polymake._eval_line
> Failed example:
>     p.N_LATTICE_POINTS                # optional - polymake
> Expected:
>     used package latte
>       LattE (Lattice point Enumeration) is a computer software dedicated to the
>       problems of counting lattice points and integration inside convex polytopes.
>       Copyright by Matthias Koeppe, Jesus A. De Loera and others.
>       http://www.math.ucdavis.edu/~latte/
>     27
> Got:
>     27
> ```


Okay, this is annoying, as I do not get this error in my case. It seems that they randomly throw out such transparency statements about libraries it uses. Okay. Thanks for pointing this out.



---

archive/issue_comments_345628.json:
```json
{
    "body": "<a id='comment:53'></a>Ok, let's try again.\n\nIn my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.\n\nWhen testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored\n`./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).\n\nWhen I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.\n\nIf somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.\nBut I have no idea whats going on and whether this depends on my specific computer or not.\n\nI just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.\n\nReplying to [comment:50 jipilab]:\n> Replying to [comment:47 gh-kliem]:\n> > I had polymake installed via `./sage -i polymake` before.\n> > This didn't require any extra installations.\n> > \n> > I went through the instructions of this ticket and ignored\n> > `./sage -info polymake`.\n> > This failed. Following the instructions and executing\n> > \n> > ```\n> > cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n> > ```\n> > beforehand worked fine.\n> > \n> > To me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.\n\n> \n> Have a look at the commit to see what changed. When we update a package, we change the source and the place to download the package. Since the package is not yet on the sage mirror, this is why you download it and put it in the appropriate folder by hand.\n> \n> After doing so, as long as you are on this branch, installing polymake will install the newest version (the one written with this new ticket). If you go back to a different ticket, you have to (re-)install polymake the usual way. And it should work. But well, polymake installation used to not work before, so there's no discussion to have on this aspect. We should focus on the present installation.\n> \n> Again, can you state clearly what you did step-by-step and say if each step worked or not. It is difficult to follow from what you write about what worked and what did not work.",
    "created_at": "2019-03-13T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345628",
    "user": "https://github.com/kliem"
}
```

<a id='comment:53'></a>Ok, let's try again.

In my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.

When testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored
`./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).

When I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.

If somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.
But I have no idea whats going on and whether this depends on my specific computer or not.

I just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.

Replying to [comment:50 jipilab]:
> Replying to [comment:47 gh-kliem]:
> > I had polymake installed via `./sage -i polymake` before.
> > This didn't require any extra installations.
> > 
> > I went through the instructions of this ticket and ignored
> > `./sage -info polymake`.
> > This failed. Following the instructions and executing
> > 
> > ```
> > cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
> > ```
> > beforehand worked fine.
> > 
> > To me it looks like `./sage -i polymake` worked somehow out of the box before and now it doesn't anymore.

> 
> Have a look at the commit to see what changed. When we update a package, we change the source and the place to download the package. Since the package is not yet on the sage mirror, this is why you download it and put it in the appropriate folder by hand.
> 
> After doing so, as long as you are on this branch, installing polymake will install the newest version (the one written with this new ticket). If you go back to a different ticket, you have to (re-)install polymake the usual way. And it should work. But well, polymake installation used to not work before, so there's no discussion to have on this aspect. We should focus on the present installation.
> 
> Again, can you state clearly what you did step-by-step and say if each step worked or not. It is difficult to follow from what you write about what worked and what did not work.



---

archive/issue_comments_345629.json:
```json
{
    "body": "<a id='comment:54'></a>On Ubuntu 16.04 with sage 8.7.beta7, after installing the dependencies, the command\n\n```\nsage -t --optional=sage,optional,experimental,external,polymake src/sage/interfaces/polymake.py\n```\n\ngives:\n\n```\nUsing --optional=4ti2,bliss,cbc,ccache,cmake,cryptominisat,dot2tex,experimental,external,glucose,latte_int,lidia,lrslib,memlimit,mpir,ninja_build,normaliz,notedown,pandoc_attributes,polymake,pycosat,pynormaliz,python2,qhull,rst2ipynb,sage,topcom\nExternal software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,scilab\nDoctesting 1 file.\nsage -t src/sage/interfaces/polymake.py\n    [245 tests, 8.19 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 11.7 seconds\n    cpu time: 1.8 seconds\n    cumulative wall time: 8.2 seconds\nExternal software detected for doctesting: \n```",
    "created_at": "2019-03-13T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345629",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:54'></a>On Ubuntu 16.04 with sage 8.7.beta7, after installing the dependencies, the command

```
sage -t --optional=sage,optional,experimental,external,polymake src/sage/interfaces/polymake.py
```

gives:

```
Using --optional=4ti2,bliss,cbc,ccache,cmake,cryptominisat,dot2tex,experimental,external,glucose,latte_int,lidia,lrslib,memlimit,mpir,ninja_build,normaliz,notedown,pandoc_attributes,polymake,pycosat,pynormaliz,python2,qhull,rst2ipynb,sage,topcom
External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,scilab
Doctesting 1 file.
sage -t src/sage/interfaces/polymake.py
    [245 tests, 8.19 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 11.7 seconds
    cpu time: 1.8 seconds
    cumulative wall time: 8.2 seconds
External software detected for doctesting: 
```



---

archive/issue_comments_345630.json:
```json
{
    "body": "<a id='comment:55'></a>Just to mention this.\n\nI am using cofio: https://patchbot.sagemath.org/ticket/?machine=debian&machine=9.6&machine=x86_64&machine=4.9.0-8-amd64&machine=cofio&status=open\n\nNot with the Sage same install, but I don't think it matters.\n\nReplying to [comment:52 jipilab]:\n> Replying to [comment:49 gh-kliem]:\n> > Almost everything passed now. This is the only thing remaining on my machine:\n> > \n> > \n> > ```\n> > File \"src/sage/interfaces/polymake.py\", line 823, in sage.interfaces.polymake.Polymake._eval_line\n> > Failed example:\n> >     p.N_LATTICE_POINTS                # optional - polymake\n> > Expected:\n> >     used package latte\n> >       LattE (Lattice point Enumeration) is a computer software dedicated to the\n> >       problems of counting lattice points and integration inside convex polytopes.\n> >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n> >       http://www.math.ucdavis.edu/~latte/\n> >     27\n> > Got:\n> >     27\n> > ```\n\n> \n> Okay, this is annoying, as I do not get this error in my case. It seems that they randomly throw out such transparency statements about libraries it uses. Okay. Thanks for pointing this out.",
    "created_at": "2019-03-13T15:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345630",
    "user": "https://github.com/kliem"
}
```

<a id='comment:55'></a>Just to mention this.

I am using cofio: https://patchbot.sagemath.org/ticket/?machine=debian&machine=9.6&machine=x86_64&machine=4.9.0-8-amd64&machine=cofio&status=open

Not with the Sage same install, but I don't think it matters.

Replying to [comment:52 jipilab]:
> Replying to [comment:49 gh-kliem]:
> > Almost everything passed now. This is the only thing remaining on my machine:
> > 
> > 
> > ```
> > File "src/sage/interfaces/polymake.py", line 823, in sage.interfaces.polymake.Polymake._eval_line
> > Failed example:
> >     p.N_LATTICE_POINTS                # optional - polymake
> > Expected:
> >     used package latte
> >       LattE (Lattice point Enumeration) is a computer software dedicated to the
> >       problems of counting lattice points and integration inside convex polytopes.
> >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.
> >       http://www.math.ucdavis.edu/~latte/
> >     27
> > Got:
> >     27
> > ```

> 
> Okay, this is annoying, as I do not get this error in my case. It seems that they randomly throw out such transparency statements about libraries it uses. Okay. Thanks for pointing this out.



---

archive/issue_comments_345631.json:
```json
{
    "body": "<a id='comment:56'></a>Replying to [comment:53 gh-kliem]:\n> Ok, let's try again.\n> \n> In my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.\n> \n> When testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored\n> `./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).\n> \n> When I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.\n> \n> If somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.\n> But I have no idea whats going on and whether this depends on my specific computer or not.\n> \n> I just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.\n> \n\n\nOkay, thanks for the clarification. I do not know if there is a way to fix this through the installation of polymake. Since there is no section Debian in the installation instruction coming from  `sage -info polymake` which one did you execute? The ubuntu ones? None?",
    "created_at": "2019-03-13T15:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345631",
    "user": "https://github.com/jplab"
}
```

<a id='comment:56'></a>Replying to [comment:53 gh-kliem]:
> Ok, let's try again.
> 
> In my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.
> 
> When testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored
> `./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).
> 
> When I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.
> 
> If somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.
> But I have no idea whats going on and whether this depends on my specific computer or not.
> 
> I just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.
> 


Okay, thanks for the clarification. I do not know if there is a way to fix this through the installation of polymake. Since there is no section Debian in the installation instruction coming from  `sage -info polymake` which one did you execute? The ubuntu ones? None?



---

archive/issue_comments_345632.json:
```json
{
    "body": "<a id='comment:57'></a>> > > {{{\n> > > File \"src/sage/interfaces/polymake.py\", line 823, in sage.interfaces.polymake.Polymake._eval_line\n> > > Failed example:\n> > >     p.N_LATTICE_POINTS                # optional - polymake\n> > > Expected:\n> > >     used package latte\n> > >       LattE (Lattice point Enumeration) is a computer software dedicated to the\n> > >       problems of counting lattice points and integration inside convex polytopes.\n> > >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n> > >       http://www.math.ucdavis.edu/~latte/\n> > >     27\n> > > Got:\n> > >     27\n> > > }}}\n\n\nTyping in the terminal I get:\n\n```\n$ sage -experimental\n[package]...............................[latest version] ([version])\nperl_term_readline_gnu..................1.35 (1.35)\npolymake................................3.2r4 (3.2r4)\n```\n\nI do get the verbose out from using `polymake3.2r4`. And all tests passed on an fresh install on a Ubuntu machine. Could you make sure that you used the latest `polymake`? Somehow it seems really odd to me and I can't figure out why it does not show the verbose in your case.",
    "created_at": "2019-03-13T15:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345632",
    "user": "https://github.com/jplab"
}
```

<a id='comment:57'></a>> > > {{{
> > > File "src/sage/interfaces/polymake.py", line 823, in sage.interfaces.polymake.Polymake._eval_line
> > > Failed example:
> > >     p.N_LATTICE_POINTS                # optional - polymake
> > > Expected:
> > >     used package latte
> > >       LattE (Lattice point Enumeration) is a computer software dedicated to the
> > >       problems of counting lattice points and integration inside convex polytopes.
> > >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.
> > >       http://www.math.ucdavis.edu/~latte/
> > >     27
> > > Got:
> > >     27
> > > }}}


Typing in the terminal I get:

```
$ sage -experimental
[package]...............................[latest version] ([version])
perl_term_readline_gnu..................1.35 (1.35)
polymake................................3.2r4 (3.2r4)
```

I do get the verbose out from using `polymake3.2r4`. And all tests passed on an fresh install on a Ubuntu machine. Could you make sure that you used the latest `polymake`? Somehow it seems really odd to me and I can't figure out why it does not show the verbose in your case.



---

archive/issue_comments_345633.json:
```json
{
    "body": "<a id='comment:58'></a>```\n./sage -info polymake\n\n...\n\nA distribution-independent way to install Perl modules (into a user's\nhome directory) is using CPAN.\n\n cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp\n```\n\nThis did the job. I also did \n`sage -i 4ti2 latte_int topcom qhull` then, but this has most likely nothing to do with the issue.\n\n\nReplying to [comment:56 jipilab]:\n> Replying to [comment:53 gh-kliem]:\n> > Ok, let's try again.\n> > \n> > In my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.\n> > \n> > When testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored\n> > `./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).\n> > \n> > When I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.\n> > \n> > If somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.\n> > But I have no idea whats going on and whether this depends on my specific computer or not.\n> > \n> > I just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.\n> > \n\n> \n> Okay, thanks for the clarification. I do not know if there is a way to fix this through the installation of polymake. Since there is no section Debian in the installation instruction coming from  `sage -info polymake` which one did you execute? The ubuntu ones? None?",
    "created_at": "2019-03-13T15:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345633",
    "user": "https://github.com/kliem"
}
```

<a id='comment:58'></a>```
./sage -info polymake

...

A distribution-independent way to install Perl modules (into a user's
home directory) is using CPAN.

 cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp
```

This did the job. I also did 
`sage -i 4ti2 latte_int topcom qhull` then, but this has most likely nothing to do with the issue.


Replying to [comment:56 jipilab]:
> Replying to [comment:53 gh-kliem]:
> > Ok, let's try again.
> > 
> > In my current Sage installation I had polymake 3.1 installed. When installing it, this worked out of the box. So a simply run of `./sage -i polymake` and I had polymake 3.3. No prereqs.
> > 
> > When testing this ticket, I checked out this branch and pulled and did everything as instructed, but ignored
> > `./sage -info polymake`. This did not work (yes I didn't follow the instructions completely).
> > 
> > When I paid attention to `./sage -info polymake` and installed the perl thing, it worked fine.
> > 
> > If somehow possible, it would be nice to have `./sage -i polymake` work without any prereqs again.
> > But I have no idea whats going on and whether this depends on my specific computer or not.
> > 
> > I just wanted to point out, that the update to polymake 3.2 has a prequirement that wasn't there before. You are probably aware of this, I just wanted to mention it.
> > 

> 
> Okay, thanks for the clarification. I do not know if there is a way to fix this through the installation of polymake. Since there is no section Debian in the installation instruction coming from  `sage -info polymake` which one did you execute? The ubuntu ones? None?



---

archive/issue_comments_345634.json:
```json
{
    "body": "<a id='comment:59'></a>```\nkliem@cofio:~/localhome/sage$ sage -experimental\n[package]...............................[latest version] ([version])\n\nautotools...............................20141105.p0 (not_installed)\ncocoalib................................0.99564 (not_installed)\ncompilerwrapper.........................1.2 (not_installed)\ngap3....................................04jul17 (not_installed)\nlibtheora...............................1.1.1 (not_installed)\nlie.....................................2.2.2 (not_installed)\nmodular_decomposition...................20100607 (not_installed)\nperl_term_readline_gnu..................1.35 (1.35)\npolymake................................3.2r4 (3.2r4)\nqepcad..................................B.1.71 (not_installed)\nscipoptsuite............................5.0.1 (not_installed)\nsurf....................................1.0.6-gcc6 (not_installed)\nvalgrind................................3.10.0 (not_installed)\n```\n\nReplying to [comment:57 jipilab]:\n> \n> > > > {{{\n> > > > File \"src/sage/interfaces/polymake.py\", line 823, in sage.interfaces.polymake.Polymake._eval_line\n> > > > Failed example:\n> > > >     p.N_LATTICE_POINTS                # optional - polymake\n> > > > Expected:\n> > > >     used package latte\n> > > >       LattE (Lattice point Enumeration) is a computer software dedicated to the\n> > > >       problems of counting lattice points and integration inside convex polytopes.\n> > > >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n> > > >       http://www.math.ucdavis.edu/~latte/\n> > > >     27\n> > > > Got:\n> > > >     27\n> > > > }}}\n\n> \n> Typing in the terminal I get:\n> \n> \n> ```\n> $ sage -experimental\n> [package]...............................[latest version] ([version])\n> perl_term_readline_gnu..................1.35 (1.35)\n> polymake................................3.2r4 (3.2r4)\n> ```\n> \n> I do get the verbose out from using `polymake3.2r4`. And all tests passed on an fresh install on a Ubuntu machine. Could you make sure that you used the latest `polymake`? Somehow it seems really odd to me and I can't figure out why it does not show the verbose in your case.",
    "created_at": "2019-03-13T15:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345634",
    "user": "https://github.com/kliem"
}
```

<a id='comment:59'></a>```
kliem@cofio:~/localhome/sage$ sage -experimental
[package]...............................[latest version] ([version])

autotools...............................20141105.p0 (not_installed)
cocoalib................................0.99564 (not_installed)
compilerwrapper.........................1.2 (not_installed)
gap3....................................04jul17 (not_installed)
libtheora...............................1.1.1 (not_installed)
lie.....................................2.2.2 (not_installed)
modular_decomposition...................20100607 (not_installed)
perl_term_readline_gnu..................1.35 (1.35)
polymake................................3.2r4 (3.2r4)
qepcad..................................B.1.71 (not_installed)
scipoptsuite............................5.0.1 (not_installed)
surf....................................1.0.6-gcc6 (not_installed)
valgrind................................3.10.0 (not_installed)
```

Replying to [comment:57 jipilab]:
> 
> > > > {{{
> > > > File "src/sage/interfaces/polymake.py", line 823, in sage.interfaces.polymake.Polymake._eval_line
> > > > Failed example:
> > > >     p.N_LATTICE_POINTS                # optional - polymake
> > > > Expected:
> > > >     used package latte
> > > >       LattE (Lattice point Enumeration) is a computer software dedicated to the
> > > >       problems of counting lattice points and integration inside convex polytopes.
> > > >       Copyright by Matthias Koeppe, Jesus A. De Loera and others.
> > > >       http://www.math.ucdavis.edu/~latte/
> > > >     27
> > > > Got:
> > > >     27
> > > > }}}

> 
> Typing in the terminal I get:
> 
> 
> ```
> $ sage -experimental
> [package]...............................[latest version] ([version])
> perl_term_readline_gnu..................1.35 (1.35)
> polymake................................3.2r4 (3.2r4)
> ```
> 
> I do get the verbose out from using `polymake3.2r4`. And all tests passed on an fresh install on a Ubuntu machine. Could you make sure that you used the latest `polymake`? Somehow it seems really odd to me and I can't figure out why it does not show the verbose in your case.



---

archive/issue_comments_345635.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-13T15:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345636.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-13T15:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345637.json:
```json
{
    "body": "<a id='comment:64'></a>Achhhh...\n\nlibjson-perl is now a requirement since version 3.3:\n\nhttps://polymake.org/doku.php/news/release_3_3\n\nI added it to the Ubuntu requirements, I will check how to install this on other platforms...",
    "created_at": "2019-03-13T15:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345637",
    "user": "https://github.com/jplab"
}
```

<a id='comment:64'></a>Achhhh...

libjson-perl is now a requirement since version 3.3:

https://polymake.org/doku.php/news/release_3_3

I added it to the Ubuntu requirements, I will check how to install this on other platforms...



---

archive/issue_comments_345638.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-14T10:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345639.json:
```json
{
    "body": "Changing keywords from \"IMA-PolyGeom\" to \"IMA-PolyGeom, thursdaysbdx\".",
    "created_at": "2019-03-14T10:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345639",
    "user": "https://github.com/vinklein"
}
```

Changing keywords from "IMA-PolyGeom" to "IMA-PolyGeom, thursdaysbdx".



---

archive/issue_comments_345640.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-03-14T10:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_345641.json:
```json
{
    "body": "<a id='comment:69'></a>It seems that polymake 3.3 does not compile out of the box on my stable Debian distribution...\n\nI feel like version 3.3 should be a separate ticket and have a compiling, and working version of polymake as an experimental package. It is better than having the very latest release which fails to compile. Once this ticket is merged, I might invest time again to figure out what goes wrong in the compilation.",
    "created_at": "2019-03-14T10:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345641",
    "user": "https://github.com/jplab"
}
```

<a id='comment:69'></a>It seems that polymake 3.3 does not compile out of the box on my stable Debian distribution...

I feel like version 3.3 should be a separate ticket and have a compiling, and working version of polymake as an experimental package. It is better than having the very latest release which fails to compile. Once this ticket is merged, I might invest time again to figure out what goes wrong in the compilation.



---

archive/issue_comments_345642.json:
```json
{
    "body": "<a id='comment:70'></a>`@`MKoeppe: could you eventually check that the above works on OSX machine?\n\nBest,",
    "created_at": "2019-03-14T10:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345642",
    "user": "https://github.com/jplab"
}
```

<a id='comment:70'></a>`@`MKoeppe: could you eventually check that the above works on OSX machine?

Best,



---

archive/issue_comments_345643.json:
```json
{
    "body": "<a id='comment:72'></a>This ticket with polymake 3.3 (before last push) compile on ubuntu 16.04.",
    "created_at": "2019-03-14T16:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345643",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:72'></a>This ticket with polymake 3.3 (before last push) compile on ubuntu 16.04.



---

archive/issue_events_062543.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24905#event-62543"
}
```



---

archive/issue_events_062544.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24905#event-62544"
}
```



---

archive/issue_comments_345644.json:
```json
{
    "body": "<a id='comment:73'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345644",
    "user": "https://github.com/embray"
}
```

<a id='comment:73'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_345645.json:
```json
{
    "body": "<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-16T12:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345646.json:
```json
{
    "body": "Attachment [polymake-3.2r4.log](tarball://root/attachments/some-uuid/ticket24905/polymake-3.2r4.log) by @sophiasage created at 2019-04-17 09:02:15\n\nlog of a failed compilation.",
    "created_at": "2019-04-17T09:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345646",
    "user": "https://github.com/sophiasage"
}
```

Attachment [polymake-3.2r4.log](tarball://root/attachments/some-uuid/ticket24905/polymake-3.2r4.log) by @sophiasage created at 2019-04-17 09:02:15

log of a failed compilation.



---

archive/issue_comments_345647.json:
```json
{
    "body": "<a id='comment:76'></a>I tried to compile on macOS Mojave and it failed. I attached my log file.",
    "created_at": "2019-04-17T09:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345647",
    "user": "https://github.com/sophiasage"
}
```

<a id='comment:76'></a>I tried to compile on macOS Mojave and it failed. I attached my log file.



---

archive/issue_comments_345648.json:
```json
{
    "body": "<a id='comment:77'></a>Replying to [comment:76 selia]:\n> I tried to compile on macOS Mojave and it failed. I attached my log file.\n\n\nThe failure was reported on the polymake forum here:\n\nhttps://forum.polymake.org/viewtopic.php?f=8&t=1702",
    "created_at": "2019-04-17T13:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345648",
    "user": "https://github.com/jplab"
}
```

<a id='comment:77'></a>Replying to [comment:76 selia]:
> I tried to compile on macOS Mojave and it failed. I attached my log file.


The failure was reported on the polymake forum here:

https://forum.polymake.org/viewtopic.php?f=8&t=1702



---

archive/issue_comments_345649.json:
```json
{
    "body": "<a id='comment:78'></a>Replying to [comment:77 jipilab]:\n> Replying to [comment:76 selia]:\n> > I tried to compile on macOS Mojave and it failed. I attached my log file.\n\n> \n> The failure was reported on the polymake forum here:\n> \n> https://forum.polymake.org/viewtopic.php?f=8&t=1702\n\n\nUpstream say this is fixed in Polymake 3.4, released 2019-04-15.\n\nShould we upgrade to Polymake 3.4 instead of 3.2 in this ticket?",
    "created_at": "2019-04-19T14:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345649",
    "user": "https://github.com/slel"
}
```

<a id='comment:78'></a>Replying to [comment:77 jipilab]:
> Replying to [comment:76 selia]:
> > I tried to compile on macOS Mojave and it failed. I attached my log file.

> 
> The failure was reported on the polymake forum here:
> 
> https://forum.polymake.org/viewtopic.php?f=8&t=1702


Upstream say this is fixed in Polymake 3.4, released 2019-04-15.

Should we upgrade to Polymake 3.4 instead of 3.2 in this ticket?



---

archive/issue_comments_345650.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:78 slelievre]:\n> Replying to [comment:77 jipilab]:\n> > Replying to [comment:76 selia]:\n> > > I tried to compile on macOS Mojave and it failed. I attached my log file.\n\n> > \n> > The failure was reported on the polymake forum here:\n> > \n> > https://forum.polymake.org/viewtopic.php?f=8&t=1702\n\n> \n> Upstream say this is fixed in Polymake 3.4, released 2019-04-15.\n> \n> Should we upgrade to Polymake 3.4 instead of 3.2 in this ticket?\n\n\n+1. It makes no sense to upgrade to 3.2 before 3.4.",
    "created_at": "2019-04-19T14:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345650",
    "user": "https://github.com/videlec"
}
```

<a id='comment:79'></a>Replying to [comment:78 slelievre]:
> Replying to [comment:77 jipilab]:
> > Replying to [comment:76 selia]:
> > > I tried to compile on macOS Mojave and it failed. I attached my log file.

> > 
> > The failure was reported on the polymake forum here:
> > 
> > https://forum.polymake.org/viewtopic.php?f=8&t=1702

> 
> Upstream say this is fixed in Polymake 3.4, released 2019-04-15.
> 
> Should we upgrade to Polymake 3.4 instead of 3.2 in this ticket?


+1. It makes no sense to upgrade to 3.2 before 3.4.



---

archive/issue_comments_345651.json:
```json
{
    "body": "<a id='comment:80'></a>Replying to [comment:79 vdelecroix]:\n> Replying to [comment:78 slelievre]:\n> > Replying to [comment:77 jipilab]:\n> > > Replying to [comment:76 selia]:\n> > > > I tried to compile on macOS Mojave and it failed. I attached my log file.\n\n> > > \n> > > The failure was reported on the polymake forum here:\n> > > \n> > > https://forum.polymake.org/viewtopic.php?f=8&t=1702\n\n> > \n> > Upstream say this is fixed in Polymake 3.4, released 2019-04-15.\n> > \n> > Should we upgrade to Polymake 3.4 instead of 3.2 in this ticket?\n\n> \n> +1. It makes no sense to upgrade to 3.2 before 3.4.\n\n\nAgreed. Although the version 3.3 did not compile on debian stretch and this is why I thought that having 3.2rc4 working could have fixed the backend quickly. Since I do not know how long it will take to make the version 3.4 work, I thought it is better to do things one step at a time.\n\nThe whole interface was broken and at least now it works on debian and they proposed a fix.\n\nAnyhow, yes, we can just skip to 3.4, let's just hope it is not a quantum leap...",
    "created_at": "2019-04-21T13:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345651",
    "user": "https://github.com/jplab"
}
```

<a id='comment:80'></a>Replying to [comment:79 vdelecroix]:
> Replying to [comment:78 slelievre]:
> > Replying to [comment:77 jipilab]:
> > > Replying to [comment:76 selia]:
> > > > I tried to compile on macOS Mojave and it failed. I attached my log file.

> > > 
> > > The failure was reported on the polymake forum here:
> > > 
> > > https://forum.polymake.org/viewtopic.php?f=8&t=1702

> > 
> > Upstream say this is fixed in Polymake 3.4, released 2019-04-15.
> > 
> > Should we upgrade to Polymake 3.4 instead of 3.2 in this ticket?

> 
> +1. It makes no sense to upgrade to 3.2 before 3.4.


Agreed. Although the version 3.3 did not compile on debian stretch and this is why I thought that having 3.2rc4 working could have fixed the backend quickly. Since I do not know how long it will take to make the version 3.4 work, I thought it is better to do things one step at a time.

The whole interface was broken and at least now it works on debian and they proposed a fix.

Anyhow, yes, we can just skip to 3.4, let's just hope it is not a quantum leap...



---

archive/issue_comments_345652.json:
```json
{
    "body": "<a id='comment:81'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-24T09:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:81'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345653.json:
```json
{
    "body": "<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-24T10:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345654.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-24T11:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345655.json:
```json
{
    "body": "<a id='comment:84'></a>Upgrading to 3.4 now. Builds OK on Mac OS Mojave (see updated instructions for prerequisites!)\n\nMany test failures from \n`./sage -t --optional=sage,polymake src/sage/interfaces/polymake.py `",
    "created_at": "2019-04-24T11:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345655",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'></a>Upgrading to 3.4 now. Builds OK on Mac OS Mojave (see updated instructions for prerequisites!)

Many test failures from 
`./sage -t --optional=sage,polymake src/sage/interfaces/polymake.py `



---

archive/issue_comments_345656.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-24T11:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345656",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_345657.json:
```json
{
    "body": "<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-24T13:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345658.json:
```json
{
    "body": "<a id='comment:86'></a>Works now (on macOS Mojave). Please test on other platforms.\n\nThe following gives sporadic errors (can happen during doctest too):\n\n```\nsage: polymake.eval('help \"TRIANGULATION\";')\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n<ipython-input-14-18a26ee8f157> in <module>()\n----> 1 polymake.eval('help \"TRIANGULATION\";')\n\n/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)\n   1349                 elif split_lines:\n   1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1351                                         for L in code.split('\\n') if L != ''])\n   1352                 else:\n   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)\n   1020                         i = pat\n   1021                         while i:\n-> 1022                             self._expect.send(chr(3))\n   1023                             sleep(0.1)\n   1024                             i = self._expect.expect(self._prompt, timeout=0.1)\n\n/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/pexpect/pty_spawn.pyc in send(self, s)\n    566 \n    567         b = self._encoder.encode(s, final=False)\n--> 568         return os.write(self.child_fd, b)\n    569 \n    570     def sendline(self, s=''):\n\nOSError: [Errno 5] Input/output error\n```",
    "created_at": "2019-04-24T13:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345658",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>Works now (on macOS Mojave). Please test on other platforms.

The following gives sporadic errors (can happen during doctest too):

```
sage: polymake.eval('help "TRIANGULATION";')
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
<ipython-input-14-18a26ee8f157> in <module>()
----> 1 polymake.eval('help "TRIANGULATION";')

/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)
   1349                 elif split_lines:
   1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1351                                         for L in code.split('\n') if L != ''])
   1352                 else:
   1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)
   1020                         i = pat
   1021                         while i:
-> 1022                             self._expect.send(chr(3))
   1023                             sleep(0.1)
   1024                             i = self._expect.expect(self._prompt, timeout=0.1)

/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/pexpect/pty_spawn.pyc in send(self, s)
    566 
    567         b = self._encoder.encode(s, final=False)
--> 568         return os.write(self.child_fd, b)
    569 
    570     def sendline(self, s=''):

OSError: [Errno 5] Input/output error
```



---

archive/issue_comments_345659.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-24T13:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345659",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_345660.json:
```json
{
    "body": "<a id='comment:88'></a>Replying to [comment:86 mkoeppe]:\n> Works now (on macOS Mojave). Please test on other platforms.\n> \n> The following gives sporadic errors (can happen during doctest too):\n> \n> ```\n> sage: polymake.eval('help \"TRIANGULATION\";')\n> ---------------------------------------------------------------------------\n> OSError                                   Traceback (most recent call last)\n> <ipython-input-14-18a26ee8f157> in <module>()\n> ----> 1 polymake.eval('help \"TRIANGULATION\";')\n> \n> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)\n>    1349                 elif split_lines:\n>    1350                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n> -> 1351                                         for L in code.split('\\n') if L != ''])\n>    1352                 else:\n>    1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n> \n> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)\n>    1020                         i = pat\n>    1021                         while i:\n> -> 1022                             self._expect.send(chr(3))\n>    1023                             sleep(0.1)\n>    1024                             i = self._expect.expect(self._prompt, timeout=0.1)\n> \n> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/pexpect/pty_spawn.pyc in send(self, s)\n>     566 \n>     567         b = self._encoder.encode(s, final=False)\n> --> 568         return os.write(self.child_fd, b)\n>     569 \n>     570     def sendline(self, s=''):\n> \n> OSError: [Errno 5] Input/output error\n> ```\n\n\nIs there a way to control/predict this kind of behavior? It would be annoying to have such errors in the doctests.\n\nSince it is an experimental package, this could be tolerable, but it would be good to grasp how this occurs...\n\nI will this new branch.",
    "created_at": "2019-04-24T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345660",
    "user": "https://github.com/jplab"
}
```

<a id='comment:88'></a>Replying to [comment:86 mkoeppe]:
> Works now (on macOS Mojave). Please test on other platforms.
> 
> The following gives sporadic errors (can happen during doctest too):
> 
> ```
> sage: polymake.eval('help "TRIANGULATION";')
> ---------------------------------------------------------------------------
> OSError                                   Traceback (most recent call last)
> <ipython-input-14-18a26ee8f157> in <module>()
> ----> 1 polymake.eval('help "TRIANGULATION";')
> 
> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)
>    1349                 elif split_lines:
>    1350                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
> -> 1351                                         for L in code.split('\n') if L != ''])
>    1352                 else:
>    1353                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)
> 
> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)
>    1020                         i = pat
>    1021                         while i:
> -> 1022                             self._expect.send(chr(3))
>    1023                             sleep(0.1)
>    1024                             i = self._expect.expect(self._prompt, timeout=0.1)
> 
> /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python2.7/site-packages/pexpect/pty_spawn.pyc in send(self, s)
>     566 
>     567         b = self._encoder.encode(s, final=False)
> --> 568         return os.write(self.child_fd, b)
>     569 
>     570     def sendline(self, s=''):
> 
> OSError: [Errno 5] Input/output error
> ```


Is there a way to control/predict this kind of behavior? It would be annoying to have such errors in the doctests.

Since it is an experimental package, this could be tolerable, but it would be good to grasp how this occurs...

I will this new branch.



---

archive/issue_comments_345661.json:
```json
{
    "body": "<a id='comment:89'></a>Compilation works on debian.\n\nI get the following errors in the interface:\n\n```\nsage -t polymake.py\n**********************************************************************\nFile \"polymake.py\", line 884, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c                                 # optional - polymake\nExpected:\n    cube of dimension 15\nGot:\n    <repr(<sage.interfaces.polymake.PolymakeElement at 0x7fe892d55cd0>) failed: PolymakeError: Can't locate object method \"description\" via package \"1\" (perhaps you forgot to load \"1\"?)>\n**********************************************************************\nFile \"polymake.py\", line 886, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake\nExpected:\n    32768\nGot:\n    Member function 'N_VERTICES' of print ref(@SAGE590);\n    1 object\n**********************************************************************\nFile \"polymake.py\", line 1133, in sage.interfaces.polymake.Polymake.application\nFailed example:\n    q.VERY_AMPLE                  # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake.application[3]>\", line 1, in <module>\n        q.VERY_AMPLE                  # optional - polymake\n      File \"/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 1680, in __getattr__\n        raise AttributeError\n    AttributeError\n**********************************************************************\n```\n\nAll tests pass on the `backend_polymake.py`.\n\nWill investigate.",
    "created_at": "2019-04-25T06:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345661",
    "user": "https://github.com/jplab"
}
```

<a id='comment:89'></a>Compilation works on debian.

I get the following errors in the interface:

```
sage -t polymake.py
**********************************************************************
File "polymake.py", line 884, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c                                 # optional - polymake
Expected:
    cube of dimension 15
Got:
    <repr(<sage.interfaces.polymake.PolymakeElement at 0x7fe892d55cd0>) failed: PolymakeError: Can't locate object method "description" via package "1" (perhaps you forgot to load "1"?)>
**********************************************************************
File "polymake.py", line 886, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake
Expected:
    32768
Got:
    Member function 'N_VERTICES' of print ref(@SAGE590);
    1 object
**********************************************************************
File "polymake.py", line 1133, in sage.interfaces.polymake.Polymake.application
Failed example:
    q.VERY_AMPLE                  # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake.application[3]>", line 1, in <module>
        q.VERY_AMPLE                  # optional - polymake
      File "/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 1680, in __getattr__
        raise AttributeError
    AttributeError
**********************************************************************
```

All tests pass on the `backend_polymake.py`.

Will investigate.



---

archive/issue_comments_345662.json:
```json
{
    "body": "<a id='comment:90'></a>I lauched the test with:\n\n```\nsage -t src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,pynormaliz,python2,sage,topcom,polymake\n```\n\nHere is a longer trace about the last doctest failure:\n\n```\nsage: q = polymake.new_object(\"Polytope\", INEQUALITIES=[[5,-4,0,1],[-3,0,-4,1],[-2,1,0,0],[-4,4,4,-1],[0,0,1,0],[8,0,0,-1],[1,0,-1,0],[3,-1,0,0]])\nsage: q.H_VECTOR\n1 5 5 1\nsage: q.F_VECTOR\n8 14 8\nsage: q.VERY_AMPLE\n/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: could not compute 'HILBERT_BASIS_GENERATORS' probably because of unsatisfied preconditions:\nprecondition : POINTED ( HILBERT_BASIS_GENERATORS , N_HILBERT_BASIS : )\n  warnings.warn(w, RuntimeWarning)\n/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: rule VERY_AMPLE : GRAPH.ADJACENCY, GRAPH.EDGE_DIRECTIONS, N_VERTICES, VERTICES, FACETS | INEQUALITIES failed: Can't use an undefined value as an ARRAY reference at /home/jplabbe/sage/local/share/polymake/apps/polytope/rules/lattice.rules line 603.\n  warnings.warn(w, RuntimeWarning)\n/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: rule HILBERT_BASIS_GENERATORS , N_HILBERT_BASIS : failed: \n*** Missing external software:\n*** To compute Hilbert bases you need to have one of the following:\n***    - bundled:libnormaliz enabled (requires boost, rerun configure)\n***    - 4ti2 installed and configured (check 'show_unconfigured;')\n  warnings.warn(w, RuntimeWarning)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-7-1f21cb7f3e00> in <module>()\n----> 1 q.VERY_AMPLE\n\n/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in __getattr__(self, attrname)\n   1678                     return P('{}->{}'.format(self._name, attrname))\n   1679                 except (TypeError, PolymakeError):\n-> 1680                     raise AttributeError\n   1681             else:\n   1682                 return P._function_element_class()(self, '{}->{}'.format(self._name, attrname), memberfunction=True)\n\nAttributeError: \n```",
    "created_at": "2019-04-25T12:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345662",
    "user": "https://github.com/jplab"
}
```

<a id='comment:90'></a>I lauched the test with:

```
sage -t src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,pynormaliz,python2,sage,topcom,polymake
```

Here is a longer trace about the last doctest failure:

```
sage: q = polymake.new_object("Polytope", INEQUALITIES=[[5,-4,0,1],[-3,0,-4,1],[-2,1,0,0],[-4,4,4,-1],[0,0,1,0],[8,0,0,-1],[1,0,-1,0],[3,-1,0,0]])
sage: q.H_VECTOR
1 5 5 1
sage: q.F_VECTOR
8 14 8
sage: q.VERY_AMPLE
/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: could not compute 'HILBERT_BASIS_GENERATORS' probably because of unsatisfied preconditions:
precondition : POINTED ( HILBERT_BASIS_GENERATORS , N_HILBERT_BASIS : )
  warnings.warn(w, RuntimeWarning)
/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: rule VERY_AMPLE : GRAPH.ADJACENCY, GRAPH.EDGE_DIRECTIONS, N_VERTICES, VERTICES, FACETS | INEQUALITIES failed: Can't use an undefined value as an ARRAY reference at /home/jplabbe/sage/local/share/polymake/apps/polytope/rules/lattice.rules line 603.
  warnings.warn(w, RuntimeWarning)
/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:1064: RuntimeWarning: rule HILBERT_BASIS_GENERATORS , N_HILBERT_BASIS : failed: 
*** Missing external software:
*** To compute Hilbert bases you need to have one of the following:
***    - bundled:libnormaliz enabled (requires boost, rerun configure)
***    - 4ti2 installed and configured (check 'show_unconfigured;')
  warnings.warn(w, RuntimeWarning)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-7-1f21cb7f3e00> in <module>()
----> 1 q.VERY_AMPLE

/home/jplabbe/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in __getattr__(self, attrname)
   1678                     return P('{}->{}'.format(self._name, attrname))
   1679                 except (TypeError, PolymakeError):
-> 1680                     raise AttributeError
   1681             else:
   1682                 return P._function_element_class()(self, '{}->{}'.format(self._name, attrname), memberfunction=True)

AttributeError: 
```



---

archive/issue_comments_345663.json:
```json
{
    "body": "<a id='comment:91'></a>Here's the log of the configuration of polymake:\n\n```\ngcc version 6.3.0 20170516 (Debian 6.3.0-18+deb9u1) \n[polymake-3.4] ****************************************************\n[polymake-3.4] Package 'polymake' is currently not installed\n[polymake-3.4] No legacy uninstaller found for 'polymake'; nothing to do\n[polymake-3.4] checking C++ compiler ... ok (g++ -std=gnu++11 is GCC 6.3.0)\n[polymake-3.4] checking C++ library ... ok (GNU libstdc++ 20170516, C++ 201402)\n[polymake-3.4] determining architecture ... ok (x86_64)\n[polymake-3.4] determining compiler flags ... ok\n[polymake-3.4]    CFLAGS= -march=native\n[polymake-3.4]    CXXFLAGS= -std=c++14 -march=native -ftemplate-depth-200 -fno-strict-aliasing -Wno-parentheses -Wshadow -fopenmp -Wno-error=unused-function -Wno-maybe-uninitialized\n[polymake-3.4]    LDFLAGS=-L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib  -fuse-ld=gold -fopenmp\n[polymake-3.4] checking gmp installation ... ok\n[polymake-3.4] checking mpfr installation ... ok\n[polymake-3.4] checking boost installation ... ok\n[polymake-3.4] checking libxml2 installation ... ok\n[polymake-3.4] checking perl module XML::Writer ... ok\n[polymake-3.4] checking perl module XML::LibXML ... ok\n[polymake-3.4] checking perl module XML::LibXSLT ... ok\n[polymake-3.4] checking perl module Term::ReadKey ... ok\n[polymake-3.4] checking perl module Term::ReadLine ... ok\n[polymake-3.4] checking perl module JSON ... ok\n[polymake-3.4] checking shared perl library ... ok\n[polymake-3.4] \n[polymake-3.4] Configuring bundled extensions:\n[polymake-3.4] bundled extension java ... disabled by command-line\n[polymake-3.4] bundled extension javaview ... disabled by command-line\n[polymake-3.4] bundled extension soplex ... disabled by command-line\n[polymake-3.4] bundled extension atint ... ok\n[polymake-3.4] bundled extension bliss ... ok\n[polymake-3.4] bundled extension cdd ... ok (0.94g @ system)\n[polymake-3.4] bundled extension libnormaliz ... failed\n[polymake-3.4] bundled extension lrs ... ok (6.2 @ system)\n[polymake-3.4] bundled extension nauty ... disabled because of conflict with other extension: bliss\n[polymake-3.4] bundled extension ppl ... ok (1.2.0 @ /home/jplabbe/sage/local)\n[polymake-3.4] bundled extension scip ... failed\n[polymake-3.4] bundled extension singular ... ok (4.1.1 @ system)\n[polymake-3.4] bundled extension sympol ... ok (bundled)\n[polymake-3.4] * If you want to change the configuration of bundled extensions please see build/bundled.log and try configure --help.\n```",
    "created_at": "2019-04-25T12:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345663",
    "user": "https://github.com/jplab"
}
```

<a id='comment:91'></a>Here's the log of the configuration of polymake:

```
gcc version 6.3.0 20170516 (Debian 6.3.0-18+deb9u1) 
[polymake-3.4] ****************************************************
[polymake-3.4] Package 'polymake' is currently not installed
[polymake-3.4] No legacy uninstaller found for 'polymake'; nothing to do
[polymake-3.4] checking C++ compiler ... ok (g++ -std=gnu++11 is GCC 6.3.0)
[polymake-3.4] checking C++ library ... ok (GNU libstdc++ 20170516, C++ 201402)
[polymake-3.4] determining architecture ... ok (x86_64)
[polymake-3.4] determining compiler flags ... ok
[polymake-3.4]    CFLAGS= -march=native
[polymake-3.4]    CXXFLAGS= -std=c++14 -march=native -ftemplate-depth-200 -fno-strict-aliasing -Wno-parentheses -Wshadow -fopenmp -Wno-error=unused-function -Wno-maybe-uninitialized
[polymake-3.4]    LDFLAGS=-L/home/jplabbe/sage/local/lib -Wl,-rpath,/home/jplabbe/sage/local/lib  -fuse-ld=gold -fopenmp
[polymake-3.4] checking gmp installation ... ok
[polymake-3.4] checking mpfr installation ... ok
[polymake-3.4] checking boost installation ... ok
[polymake-3.4] checking libxml2 installation ... ok
[polymake-3.4] checking perl module XML::Writer ... ok
[polymake-3.4] checking perl module XML::LibXML ... ok
[polymake-3.4] checking perl module XML::LibXSLT ... ok
[polymake-3.4] checking perl module Term::ReadKey ... ok
[polymake-3.4] checking perl module Term::ReadLine ... ok
[polymake-3.4] checking perl module JSON ... ok
[polymake-3.4] checking shared perl library ... ok
[polymake-3.4] 
[polymake-3.4] Configuring bundled extensions:
[polymake-3.4] bundled extension java ... disabled by command-line
[polymake-3.4] bundled extension javaview ... disabled by command-line
[polymake-3.4] bundled extension soplex ... disabled by command-line
[polymake-3.4] bundled extension atint ... ok
[polymake-3.4] bundled extension bliss ... ok
[polymake-3.4] bundled extension cdd ... ok (0.94g @ system)
[polymake-3.4] bundled extension libnormaliz ... failed
[polymake-3.4] bundled extension lrs ... ok (6.2 @ system)
[polymake-3.4] bundled extension nauty ... disabled because of conflict with other extension: bliss
[polymake-3.4] bundled extension ppl ... ok (1.2.0 @ /home/jplabbe/sage/local)
[polymake-3.4] bundled extension scip ... failed
[polymake-3.4] bundled extension singular ... ok (4.1.1 @ system)
[polymake-3.4] bundled extension sympol ... ok (bundled)
[polymake-3.4] * If you want to change the configuration of bundled extensions please see build/bundled.log and try configure --help.
```



---

archive/issue_comments_345664.json:
```json
{
    "body": "<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-25T14:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345665.json:
```json
{
    "body": "<a id='comment:93'></a>Compiled fine on debian stretch and all relevant tests pass:\n\n```\n$ sage -t /sage/src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom\nDoctesting 1 file.\nsage -t polymake.py\n    [245 tests, 14.65 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n\nand\n\n```\n$ sage -t sage/src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake\ntoo few successful tests, not using stored timings\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom\nDoctesting 25 files.\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2019-04-25T14:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345665",
    "user": "https://github.com/jplab"
}
```

<a id='comment:93'></a>Compiled fine on debian stretch and all relevant tests pass:

```
$ sage -t /sage/src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom
Doctesting 1 file.
sage -t polymake.py
    [245 tests, 14.65 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```

and

```
$ sage -t sage/src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake
too few successful tests, not using stored timings
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom
Doctesting 25 files.
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_345666.json:
```json
{
    "body": "<a id='comment:94'></a>polymake patch sent upstream.",
    "created_at": "2019-04-26T08:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345666",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:94'></a>polymake patch sent upstream.



---

archive/issue_comments_345667.json:
```json
{
    "body": "<a id='comment:95'></a>It compiled on Debian GNU/Linux 9.8 (stretch) x86_64. All relevant tests pass:\n\n```\n$ ./sage -t src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake\n```\n\n```\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2019-04-26-23-04-17-71ea1904.\nGit branch: polymake\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom\nDoctesting 1 file.\nsage -t src/sage/interfaces/polymake.py\n    [245 tests, 6.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 11.6 seconds\n    cpu time: 1.4 seconds\n    cumulative wall time: 6.9 seconds\n```\n\n```\n$ ./sage -t src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom,polymake\n```\n\n```\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2019-04-26-23-12-47-322d8126.\nGit branch: polymake\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,polymake,python2,sage,topcom\nDoctesting 25 files.\n...\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 65.0 seconds\n    cpu time: 43.6 seconds\n    cumulative wall time: 64.1 seconds\n```",
    "created_at": "2019-04-26T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345667",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:95'></a>It compiled on Debian GNU/Linux 9.8 (stretch) x86_64. All relevant tests pass:

```
$ ./sage -t src/sage/interfaces/polymake.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom,polymake
```

```
too few successful tests, not using stored timings
Running doctests with ID 2019-04-26-23-04-17-71ea1904.
Git branch: polymake
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,polymake,pynormaliz,python2,sage,topcom
Doctesting 1 file.
sage -t src/sage/interfaces/polymake.py
    [245 tests, 6.94 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 11.6 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 6.9 seconds
```

```
$ ./sage -t src/sage/geometry/polyhedron/*.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom,polymake
```

```
too few successful tests, not using stored timings
Running doctests with ID 2019-04-26-23-12-47-322d8126.
Git branch: polymake
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,polymake,python2,sage,topcom
Doctesting 25 files.
...
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 65.0 seconds
    cpu time: 43.6 seconds
    cumulative wall time: 64.1 seconds
```



---

archive/issue_comments_345668.json:
```json
{
    "body": "log of failed compilation. mac os mojave",
    "created_at": "2019-04-27T07:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345668",
    "user": "https://github.com/sophiasage"
}
```

log of failed compilation. mac os mojave



---

archive/issue_comments_345669.json:
```json
{
    "body": "<a id='comment:96'></a>Attachment [polymake-3.4.log](tarball://root/attachments/some-uuid/ticket24905/polymake-3.4.log) by @mkoeppe created at 2019-04-27 08:30:29\n\nSee the updated Perl module prerequisites by typing \"sage -info polymake\".",
    "created_at": "2019-04-27T08:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345669",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:96'></a>Attachment [polymake-3.4.log](tarball://root/attachments/some-uuid/ticket24905/polymake-3.4.log) by @mkoeppe created at 2019-04-27 08:30:29

See the updated Perl module prerequisites by typing "sage -info polymake".



---

archive/issue_comments_345670.json:
```json
{
    "body": "Attachment [polymake.log](tarball://root/attachments/some-uuid/ticket24905/polymake.log) by @LaisRast created at 2019-04-27 10:57:40\n\nsage -t src/sage/interfaces/polymake.py",
    "created_at": "2019-04-27T10:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345670",
    "user": "https://github.com/LaisRast"
}
```

Attachment [polymake.log](tarball://root/attachments/some-uuid/ticket24905/polymake.log) by @LaisRast created at 2019-04-27 10:57:40

sage -t src/sage/interfaces/polymake.py



---

archive/issue_comments_345671.json:
```json
{
    "body": "<a id='comment:97'></a>It compiled on Arch Linux x86_64 (5.0.9-arch1-1-ARCH). All relevant tests pass except for three.\nhttps://trac.sagemath.org/attachment/ticket/24905/polymake.log",
    "created_at": "2019-04-27T10:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345671",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:97'></a>It compiled on Arch Linux x86_64 (5.0.9-arch1-1-ARCH). All relevant tests pass except for three.
https://trac.sagemath.org/attachment/ticket/24905/polymake.log



---

archive/issue_comments_345672.json:
```json
{
    "body": "<a id='comment:98'></a>```\n[polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o                                                                                                    \n[polymake-3.4]   g++ -std=gnu++11 -c -o /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o -MMD -MT /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.\n4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o -MF /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o.d -fPIC -pipe -std=c++14 -march=native -ft\nemplate-depth-200 -fno-strict-aliasing -Wno-parentheses -Wshadow -fopenmp -Wno-error=unused-function -Wno-maybe-uninitialized  -DPOLYMAKE_DEBUG=0 -DNDEBUG -O3 -DPOLYMAKE_APPNAME=ideal -DPOLYMAKE_BUNDLED_EXT=singular -DSING_NDEBUG -DOM_NDEBUG -DSING_NDEBUG -DOM_NDEBUG -DS\nING_NDEBUG -DOM_NDEBUG -DSING_NDEBUG -DOM_NDEBUG -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/singular -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/s\ningular -I/srv/public/kliem/patchbot-sage/sage/local/include/ -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/ -I/srv/public/kliem/patchbot-sage/sage/local/include -Wno-unused-value -I/srv/public/kliem/patchbot-sa\nge/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/include/app-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/include/apps -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake\n-3.4/src/include/app-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/apps -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/external/permlib -I/srv/public/kliem/patchbot-sage/sage/lo\ncal/var/tmp/sage/build/polymake-3.4/src/include/external/TOSimplex -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/core-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/core /srv/pu\nblic/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc && : 'COMPILER_USED=6.3.0'\n[polymake-3.4] In file included from ../../../../../../../../include/polymake/client.h:25:0,\n[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:6:\n[polymake-3.4] ../../../../../../../../include/polymake/perl/calls.h: In constructor 'pm::perl::PropertyValue::PropertyValue(sv*, TOptions ...)':\n[polymake-3.4] ../../../../../../../../include/polymake/perl/calls.h:48:7: warning: declaration of 'options' shadows a member of 'pm::perl::PropertyValue' [-Wshadow]\n[polymake-3.4]        : Value(sv_arg)\n[polymake-3.4]        ^\n[polymake-3.4] In file included from ../../../../../../../../include/polymake/client.h:21:0,\n[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:6:\n[polymake-3.4] ../../../../../../../../include/polymake/perl/Value.h:633:16: note: shadowed declaration is here\n[polymake-3.4]     value_flags options;\n[polymake-3.4]                 ^~~~~~~\n[polymake-3.4] In file included from ../../../../../../../../include/polymake/next/SparseMatrix.h:24:0,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/SparseMatrix.h:20,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/PolynomialImpl.h:24,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/next/Polynomial.h:21,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/Polynomial.h:20,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/ideal/next/singularIdeal.h:24,\n[polymake-3.4]                  from ../../../../../../../../include/polymake/ideal/singularIdeal.h:20,\n[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:7:\n[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h: In member function 'void pm::sparse2d::sym_permute_entries<Traits>::copy(const typename Traits::ruler*, typename Traits::ruler*, const Perm&, const InvPerm&)':\n[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h:881:4: warning: declaration of 'inv_perm' shadows a member of 'pm::sparse2d::sym_permute_entries<Traits>' [-Wshadow]\n[polymake-3.4]     {\n[polymake-3.4]     ^\n[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h:906:21: note: shadowed declaration is here\n[polymake-3.4]     std::vector<int> inv_perm;\n[polymake-3.4]                      ^~~~~~~~\n[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc: At global scope:\n[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:10:1: error: 'FunctionCallerStart4perl' does not name a type\n[polymake-3.4]  FunctionCallerStart4perl {\n[polymake-3.4]  ^~~~~~~~~~~~~~~~~~~~~~~~\n[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:13:20: error: expected constructor, destructor, or type conversion before '(' token\n[polymake-3.4]  FunctionCaller4perl(contains_monomial, meth);\n[polymake-3.4]                     ^\n[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:14:30: error: expected constructor, destructor, or type conversion before '(' token\n[polymake-3.4]  FunctionTemplateInstance4perl(0, contains_monomial, meth, contains_monomial:M, perl::Returns::normal, 0, (perl::Canned<const SingularIdeal&>));\n[polymake-3.4]                               ^\n[polymake-3.4] [359/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/lex_min_representative.o\n[polymake-3.4] [360/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/orbit_permlib.o\n[polymake-3.4] [361/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/permlib_group_tools.o\n[polymake-3.4] [362/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/induced_action.o\n[polymake-3.4] [363/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/conjugacy_classes.o\n[polymake-3.4] [364/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/permlib.o\n[polymake-3.4] [365/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/orbit.o\n[polymake-3.4] [366/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/sparse_isotypic_components.o\n[polymake-3.4] [367/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/representations.o\n[polymake-3.4] ninja: build stopped: subcommand failed.\n[polymake-3.4] Makefile:34: recipe for target 'all' failed\n[polymake-3.4] make[2]: *** [all] Error 1\n[polymake-3.4] make[2]: Leaving directory '/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src'\n[polymake-3.4] Error building polymake\n[polymake-3.4]\n[polymake-3.4] real     7m41.235s\n[polymake-3.4] user     57m24.108s\n[polymake-3.4] sys      1m28.580s\n[polymake-3.4] ************************************************************************\n[polymake-3.4] Error installing package polymake-3.4\n[polymake-3.4] ************************************************************************\n[polymake-3.4] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[polymake-3.4] explaining the problem and including the log file\n[polymake-3.4]   /srv/public/kliem/patchbot-sage/sage/logs/pkgs/polymake-3.4.log\n[polymake-3.4] Describe your computer, operating system, etc.\n[polymake-3.4] If you want to try to fix the problem yourself, *don't* just cd to\n[polymake-3.4] /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4 and type 'make' or whatever is appropriate.\n[polymake-3.4] Instead, the following commands setup all environment variables\n[polymake-3.4] correctly and load a subshell for you to debug the error:\n[polymake-3.4]   (cd '/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4' && '/srv/public/kliem/patchbot-sage/sage/sage' --sh)\n[polymake-3.4] When you are done debugging, you can type \"exit\" to leave the subshell.\n[polymake-3.4] ************************************************************************\nMakefile:2162: recipe for target '/srv/public/kliem/patchbot-sage/sage/local/var/lib/sage/installed/polymake-3.4' failed\nmake[1]: *** [/srv/public/kliem/patchbot-sage/sage/local/var/lib/sage/installed/polymake-3.4] Error 1\nmake[1]: Leaving directory '/srv/public/kliem/patchbot-sage/sage/build/make'\n\nreal    7m44,443s\nuser    57m25,204s\nsys     1m28,764s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make polymake'):\n\n* package: ecl-16.1.3.p0\n  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/ecl-16.1.3.p0.log\n  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/ecl-16.1.3.p0\n\n* package: numpy-1.16.0\n  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/numpy-1.16.0.log\n  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/numpy-1.16.0\n\n* package: polymake-3.4\n  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/polymake-3.4.log\n  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4\n\n* package: python\n  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/python.log\n  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/python\n\n* package: r-3.4.4.p1\n  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/r-3.4.4.p1.log\n  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/r-3.4.4.p1\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nMakefile:31: recipe for target 'polymake' failed\nmake: *** [polymake] Error 1\n\n```",
    "created_at": "2019-04-27T11:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345672",
    "user": "https://github.com/kliem"
}
```

<a id='comment:98'></a>```
[polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o                                                                                                    
[polymake-3.4]   g++ -std=gnu++11 -c -o /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o -MMD -MT /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.
4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o -MF /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o.d -fPIC -pipe -std=c++14 -march=native -ft
emplate-depth-200 -fno-strict-aliasing -Wno-parentheses -Wshadow -fopenmp -Wno-error=unused-function -Wno-maybe-uninitialized  -DPOLYMAKE_DEBUG=0 -DNDEBUG -O3 -DPOLYMAKE_APPNAME=ideal -DPOLYMAKE_BUNDLED_EXT=singular -DSING_NDEBUG -DOM_NDEBUG -DSING_NDEBUG -DOM_NDEBUG -DS
ING_NDEBUG -DOM_NDEBUG -DSING_NDEBUG -DOM_NDEBUG -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/singular -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/s
ingular -I/srv/public/kliem/patchbot-sage/sage/local/include/ -I/srv/public/kliem/patchbot-sage/sage/local/include -I/srv/public/kliem/patchbot-sage/sage/local/include/ -I/srv/public/kliem/patchbot-sage/sage/local/include -Wno-unused-value -I/srv/public/kliem/patchbot-sa
ge/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/include/app-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/include/apps -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake
-3.4/src/include/app-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/apps -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/external/permlib -I/srv/public/kliem/patchbot-sage/sage/lo
cal/var/tmp/sage/build/polymake-3.4/src/include/external/TOSimplex -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/core-wrappers -I/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/include/core /srv/pu
blic/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc && : 'COMPILER_USED=6.3.0'
[polymake-3.4] In file included from ../../../../../../../../include/polymake/client.h:25:0,
[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:6:
[polymake-3.4] ../../../../../../../../include/polymake/perl/calls.h: In constructor 'pm::perl::PropertyValue::PropertyValue(sv*, TOptions ...)':
[polymake-3.4] ../../../../../../../../include/polymake/perl/calls.h:48:7: warning: declaration of 'options' shadows a member of 'pm::perl::PropertyValue' [-Wshadow]
[polymake-3.4]        : Value(sv_arg)
[polymake-3.4]        ^
[polymake-3.4] In file included from ../../../../../../../../include/polymake/client.h:21:0,
[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:6:
[polymake-3.4] ../../../../../../../../include/polymake/perl/Value.h:633:16: note: shadowed declaration is here
[polymake-3.4]     value_flags options;
[polymake-3.4]                 ^~~~~~~
[polymake-3.4] In file included from ../../../../../../../../include/polymake/next/SparseMatrix.h:24:0,
[polymake-3.4]                  from ../../../../../../../../include/polymake/SparseMatrix.h:20,
[polymake-3.4]                  from ../../../../../../../../include/polymake/PolynomialImpl.h:24,
[polymake-3.4]                  from ../../../../../../../../include/polymake/next/Polynomial.h:21,
[polymake-3.4]                  from ../../../../../../../../include/polymake/Polynomial.h:20,
[polymake-3.4]                  from ../../../../../../../../include/polymake/ideal/next/singularIdeal.h:24,
[polymake-3.4]                  from ../../../../../../../../include/polymake/ideal/singularIdeal.h:20,
[polymake-3.4]                  from ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:7:
[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h: In member function 'void pm::sparse2d::sym_permute_entries<Traits>::copy(const typename Traits::ruler*, typename Traits::ruler*, const Perm&, const InvPerm&)':
[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h:881:4: warning: declaration of 'inv_perm' shadows a member of 'pm::sparse2d::sym_permute_entries<Traits>' [-Wshadow]
[polymake-3.4]     {
[polymake-3.4]     ^
[polymake-3.4] ../../../../../../../../include/polymake/internal/sparse2d.h:906:21: note: shadowed declaration is here
[polymake-3.4]     std::vector<int> inv_perm;
[polymake-3.4]                      ^~~~~~~~
[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc: At global scope:
[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:10:1: error: 'FunctionCallerStart4perl' does not name a type
[polymake-3.4]  FunctionCallerStart4perl {
[polymake-3.4]  ^~~~~~~~~~~~~~~~~~~~~~~~
[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:13:20: error: expected constructor, destructor, or type conversion before '(' token
[polymake-3.4]  FunctionCaller4perl(contains_monomial, meth);
[polymake-3.4]                     ^
[polymake-3.4] ../../bundled/singular/apps/ideal/cpperl/generated/auto-contains_monomial.cc:14:30: error: expected constructor, destructor, or type conversion before '(' token
[polymake-3.4]  FunctionTemplateInstance4perl(0, contains_monomial, meth, contains_monomial:M, perl::Returns::normal, 0, (perl::Canned<const SingularIdeal&>));
[polymake-3.4]                               ^
[polymake-3.4] [359/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/lex_min_representative.o
[polymake-3.4] [360/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/orbit_permlib.o
[polymake-3.4] [361/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/permlib_group_tools.o
[polymake-3.4] [362/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/induced_action.o
[polymake-3.4] [363/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/conjugacy_classes.o
[polymake-3.4] [364/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/permlib.o
[polymake-3.4] [365/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/orbit.o
[polymake-3.4] [366/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/sparse_isotypic_components.o
[polymake-3.4] [367/902] COMPILE /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/apps/group/representations.o
[polymake-3.4] ninja: build stopped: subcommand failed.
[polymake-3.4] Makefile:34: recipe for target 'all' failed
[polymake-3.4] make[2]: *** [all] Error 1
[polymake-3.4] make[2]: Leaving directory '/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src'
[polymake-3.4] Error building polymake
[polymake-3.4]
[polymake-3.4] real     7m41.235s
[polymake-3.4] user     57m24.108s
[polymake-3.4] sys      1m28.580s
[polymake-3.4] ************************************************************************
[polymake-3.4] Error installing package polymake-3.4
[polymake-3.4] ************************************************************************
[polymake-3.4] Please email sage-devel (http://groups.google.com/group/sage-devel)
[polymake-3.4] explaining the problem and including the log file
[polymake-3.4]   /srv/public/kliem/patchbot-sage/sage/logs/pkgs/polymake-3.4.log
[polymake-3.4] Describe your computer, operating system, etc.
[polymake-3.4] If you want to try to fix the problem yourself, *don't* just cd to
[polymake-3.4] /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4 and type 'make' or whatever is appropriate.
[polymake-3.4] Instead, the following commands setup all environment variables
[polymake-3.4] correctly and load a subshell for you to debug the error:
[polymake-3.4]   (cd '/srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4' && '/srv/public/kliem/patchbot-sage/sage/sage' --sh)
[polymake-3.4] When you are done debugging, you can type "exit" to leave the subshell.
[polymake-3.4] ************************************************************************
Makefile:2162: recipe for target '/srv/public/kliem/patchbot-sage/sage/local/var/lib/sage/installed/polymake-3.4' failed
make[1]: *** [/srv/public/kliem/patchbot-sage/sage/local/var/lib/sage/installed/polymake-3.4] Error 1
make[1]: Leaving directory '/srv/public/kliem/patchbot-sage/sage/build/make'

real    7m44,443s
user    57m25,204s
sys     1m28,764s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make polymake'):

* package: ecl-16.1.3.p0
  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/ecl-16.1.3.p0.log
  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/ecl-16.1.3.p0

* package: numpy-1.16.0
  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/numpy-1.16.0.log
  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/numpy-1.16.0

* package: polymake-3.4
  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/polymake-3.4.log
  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4

* package: python
  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/python.log
  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/python

* package: r-3.4.4.p1
  log file: /srv/public/kliem/patchbot-sage/sage/logs/pkgs/r-3.4.4.p1.log
  build directory: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/r-3.4.4.p1

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

Makefile:31: recipe for target 'polymake' failed
make: *** [polymake] Error 1

```



---

archive/issue_comments_345673.json:
```json
{
    "body": "<a id='comment:99'></a>Replying to [comment:98 gh-kliem]:\n> \n> \n> \n> ```\n> [polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o    \n> ```\n\nWhich compiler is that? Did Sage install its own gcc?",
    "created_at": "2019-04-27T14:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:99'></a>Replying to [comment:98 gh-kliem]:
> 
> 
> 
> ```
> [polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o    
> ```

Which compiler is that? Did Sage install its own gcc?



---

archive/issue_comments_345674.json:
```json
{
    "body": "<a id='comment:100'></a>I don't know. I suppose its the systems gcc (Debian 6.3.0-18+deb9u1).\n\n(This is the default gcc in the sage subshell as well.)\n\nNow I did `./sage -i gcc` and will see if that makes any difference.\n\nIt does \nReplying to [comment:99 mkoeppe]:\n> Replying to [comment:98 gh-kliem]:\n> > \n> > \n> > \n> > ```\n> > [polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o    \n> > ```\n\n> Which compiler is that? Did Sage install its own gcc?",
    "created_at": "2019-04-27T15:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345674",
    "user": "https://github.com/kliem"
}
```

<a id='comment:100'></a>I don't know. I suppose its the systems gcc (Debian 6.3.0-18+deb9u1).

(This is the default gcc in the sage subshell as well.)

Now I did `./sage -i gcc` and will see if that makes any difference.

It does 
Replying to [comment:99 mkoeppe]:
> Replying to [comment:98 gh-kliem]:
> > 
> > 
> > 
> > ```
> > [polymake-3.4] FAILED: /srv/public/kliem/patchbot-sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/Opt/bundled/singular/apps/ideal/cpperl/auto-contains_monomial.o    
> > ```

> Which compiler is that? Did Sage install its own gcc?



---

archive/issue_comments_345675.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T15:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345676.json:
```json
{
    "body": "<a id='comment:102'></a>Replying to [comment:100 gh-kliem]:\n> I don't know. I suppose its the systems gcc (Debian 6.3.0-18+deb9u1).\n> \n> (This is the default gcc in the sage subshell as well.)\n> \n> Now I did `./sage -i gcc` and will see if that makes any difference.\n> \n> It does \n\n\nIt may also be worth checking whether polymake builds OK from its source package with your system's gcc.",
    "created_at": "2019-04-27T16:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345676",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:102'></a>Replying to [comment:100 gh-kliem]:
> I don't know. I suppose its the systems gcc (Debian 6.3.0-18+deb9u1).
> 
> (This is the default gcc in the sage subshell as well.)
> 
> Now I did `./sage -i gcc` and will see if that makes any difference.
> 
> It does 


It may also be worth checking whether polymake builds OK from its source package with your system's gcc.



---

archive/issue_comments_345677.json:
```json
{
    "body": "<a id='comment:3'></a>(outside of sage.)",
    "created_at": "2019-04-27T16:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345677",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>(outside of sage.)



---

archive/issue_comments_345678.json:
```json
{
    "body": "<a id='comment:4'></a>polymake 3.3 worked fine. I didn't check with polymake 3.4.",
    "created_at": "2019-04-27T17:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345678",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>polymake 3.3 worked fine. I didn't check with polymake 3.4.



---

archive/issue_comments_345679.json:
```json
{
    "body": "<a id='comment:5'></a>Now my sage is messed up.\n\nThose are some of the error that occure\n\n```\nFile \"src/sage/groups/generic.py\", line 1104, in sage.groups.generic.?\nFailed example:                                               \n    F=GF(2^1279,'a')\nException raised:                \n    Traceback (most recent call last):\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)       \n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)       \n      File \"<doctest sage.groups.generic.?[14]>\", line 1, in <module>\n        F=GF(Integer(2)**Integer(1279),'a')\n      File \"sage/structure/factory.pyx\", line 367, in sage.structure.factory.UniqueFactory.__call__ (build/cythonized/sage/structure/factory.c:2059)\n        key, kwds = self.create_key_and_extra_args(*args, **kwds)\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/finite_field_constructor.py\", line 566, in create_key_and_extra_args\n        raise ValueError(\"the order of a finite field must be a prime power\")\n    ValueError: the order of a finite field must be a prime power\n**********************************************************************\nFile \"src/sage/groups/generic.py\", line 1105, in sage.groups.generic.?\nFailed example:           \n    n=F.cardinality()-1 # Mersenne prime\nException raised:                                                           \n    Traceback (most recent call last):             \n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.groups.generic.?[15]>\", line 1, in <module>\n        n=F.cardinality()-Integer(1) # Mersenne prime\n    AttributeError: 'IntegerFactorization' object has no attribute 'cardinality'\n**********************************************************************\nFile \"src/sage/groups/generic.py\", line 1106, in sage.groups.generic.?\nFailed example:\n    order_from_multiple(F.random_element(),n,factorization=[(n,1)],operation='*')==n\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.groups.generic.?[16]>\", line 1, in <module>\n        order_from_multiple(F.random_element(),n,factorization=[(n,Integer(1))],operation='*')==n\n    AttributeError: 'IntegerFactorization' object has no attribute 'random_element'\n```\n\nIt seems that almost nothing works anymore. I have no idea what I can do about it besides deleting everything and reinstalling sage.\n\nThose errors are happening in the develop branch as well.\n\nBy the way, nothing works in src/sage/interfaces/polymake.py. This is the start of a very long list.\n\n```\nkliem@zancara:~/localhome/patchbot-sage/sage$  sage -t --long  src/sage/interfaces/polymake.py --optional=bliss,ccache,dochtml,lrslib,memlimit,mpir,ninja_build,normaliz,openssl,pynormaliz,python2,sage,polymake \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-04-27-22-43-17-aca10dd8.\nGit branch: develop\nUsing --optional=bliss,ccache,dochtml,lrslib,memlimit,mpir,ninja_build,normaliz,openssl,polymake,pynormaliz,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 71, in sage.interfaces.polymake.PolymakeError\nFailed example:\n    polymake.eval('print foo;')    # optional polymake\nExpected:\n    Traceback (most recent call last):\n    ...\n    PolymakeError: Unquoted string \"foo\" may clash with future reserved word...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeError[0]>\", line 1, in <module>\n        polymake.eval('print foo;')    # optional polymake\n    AttributeError: Polymake instance has no attribute 'eval'\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 86, in sage.interfaces.polymake.polymake_console\nFailed example:\n    from sage.interfaces.polymake import polymake_console\nException raised:\n    Traceback (most recent call last):\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.polymake_console[0]>\", line 1, in <module>\n        from sage.interfaces.polymake import polymake_console\n    ImportError: No module named polymake\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 127, in sage.interfaces.polymake.Polymake\nFailed example:\n    p = polymake.rand_sphere(4, 20, seed=5)       # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake[0]>\", line 1, in <module>\n        p = polymake.rand_sphere(Integer(4), Integer(20), seed=Integer(5))       # optional - polymake\n    AttributeError: Polymake instance has no attribute 'rand_sphere'\n**********************************************************************\n```",
    "created_at": "2019-04-27T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345679",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>Now my sage is messed up.

Those are some of the error that occure

```
File "src/sage/groups/generic.py", line 1104, in sage.groups.generic.?
Failed example:                                               
    F=GF(2^1279,'a')
Exception raised:                
    Traceback (most recent call last):
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)       
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)       
      File "<doctest sage.groups.generic.?[14]>", line 1, in <module>
        F=GF(Integer(2)**Integer(1279),'a')
      File "sage/structure/factory.pyx", line 367, in sage.structure.factory.UniqueFactory.__call__ (build/cythonized/sage/structure/factory.c:2059)
        key, kwds = self.create_key_and_extra_args(*args, **kwds)
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/rings/finite_rings/finite_field_constructor.py", line 566, in create_key_and_extra_args
        raise ValueError("the order of a finite field must be a prime power")
    ValueError: the order of a finite field must be a prime power
**********************************************************************
File "src/sage/groups/generic.py", line 1105, in sage.groups.generic.?
Failed example:           
    n=F.cardinality()-1 # Mersenne prime
Exception raised:                                                           
    Traceback (most recent call last):             
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.generic.?[15]>", line 1, in <module>
        n=F.cardinality()-Integer(1) # Mersenne prime
    AttributeError: 'IntegerFactorization' object has no attribute 'cardinality'
**********************************************************************
File "src/sage/groups/generic.py", line 1106, in sage.groups.generic.?
Failed example:
    order_from_multiple(F.random_element(),n,factorization=[(n,1)],operation='*')==n
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.generic.?[16]>", line 1, in <module>
        order_from_multiple(F.random_element(),n,factorization=[(n,Integer(1))],operation='*')==n
    AttributeError: 'IntegerFactorization' object has no attribute 'random_element'
```

It seems that almost nothing works anymore. I have no idea what I can do about it besides deleting everything and reinstalling sage.

Those errors are happening in the develop branch as well.

By the way, nothing works in src/sage/interfaces/polymake.py. This is the start of a very long list.

```
kliem@zancara:~/localhome/patchbot-sage/sage$  sage -t --long  src/sage/interfaces/polymake.py --optional=bliss,ccache,dochtml,lrslib,memlimit,mpir,ninja_build,normaliz,openssl,pynormaliz,python2,sage,polymake 
too many failed tests, not using stored timings
Running doctests with ID 2019-04-27-22-43-17-aca10dd8.
Git branch: develop
Using --optional=bliss,ccache,dochtml,lrslib,memlimit,mpir,ninja_build,normaliz,openssl,polymake,pynormaliz,python2,sage
Doctesting 1 file.
sage -t --long src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 71, in sage.interfaces.polymake.PolymakeError
Failed example:
    polymake.eval('print foo;')    # optional polymake
Expected:
    Traceback (most recent call last):
    ...
    PolymakeError: Unquoted string "foo" may clash with future reserved word...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeError[0]>", line 1, in <module>
        polymake.eval('print foo;')    # optional polymake
    AttributeError: Polymake instance has no attribute 'eval'
**********************************************************************
File "src/sage/interfaces/polymake.py", line 86, in sage.interfaces.polymake.polymake_console
Failed example:
    from sage.interfaces.polymake import polymake_console
Exception raised:
    Traceback (most recent call last):
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.polymake_console[0]>", line 1, in <module>
        from sage.interfaces.polymake import polymake_console
    ImportError: No module named polymake
**********************************************************************
File "src/sage/interfaces/polymake.py", line 127, in sage.interfaces.polymake.Polymake
Failed example:
    p = polymake.rand_sphere(4, 20, seed=5)       # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/import/sage-7.4/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake[0]>", line 1, in <module>
        p = polymake.rand_sphere(Integer(4), Integer(20), seed=Integer(5))       # optional - polymake
    AttributeError: Polymake instance has no attribute 'rand_sphere'
**********************************************************************
```



---

archive/issue_comments_345680.json:
```json
{
    "body": "<a id='comment:6'></a>When I run polymake in the sage subshell I get a compilation error upon running ` $p = rand_sphere<4,20>;`.",
    "created_at": "2019-04-27T20:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345680",
    "user": "https://github.com/kliem"
}
```

<a id='comment:6'></a>When I run polymake in the sage subshell I get a compilation error upon running ` $p = rand_sphere<4,20>;`.



---

archive/issue_comments_345681.json:
```json
{
    "body": "<a id='comment:7'></a>Run a `sage distclean` and reinstall sage from scratch. Installing polymake also broke my sage somehow a some point. Reinstalling worked for me.",
    "created_at": "2019-04-27T21:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345681",
    "user": "https://github.com/jplab"
}
```

<a id='comment:7'></a>Run a `sage distclean` and reinstall sage from scratch. Installing polymake also broke my sage somehow a some point. Reinstalling worked for me.



---

archive/issue_comments_345682.json:
```json
{
    "body": "<a id='comment:108'></a>I already did it. Now `openssl` isn't working again. It will take a while until I have a working version of sage on this machine again.\n\nReplying to [comment:107 jipilab]:\n> Run a `sage distclean` and reinstall sage from scratch. Installing polymake also broke my sage somehow a some point. Reinstalling worked for me.",
    "created_at": "2019-04-28T06:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345682",
    "user": "https://github.com/kliem"
}
```

<a id='comment:108'></a>I already did it. Now `openssl` isn't working again. It will take a while until I have a working version of sage on this machine again.

Replying to [comment:107 jipilab]:
> Run a `sage distclean` and reinstall sage from scratch. Installing polymake also broke my sage somehow a some point. Reinstalling worked for me.



---

archive/issue_comments_345683.json:
```json
{
    "body": "<a id='comment:109'></a>Replying to [comment:97 gh-LaisRast]:\n> It compiled on Arch Linux x86_64 (5.0.9-arch1-1-ARCH). All relevant tests pass except for three.\n> https://trac.sagemath.org/attachment/ticket/24905/polymake.log\n\n\nThanks for checking. In these three doctests it looks like polymake is emitting some extra newlines.\nThis is probably some nondeterministic pty interaction.",
    "created_at": "2019-04-28T08:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345683",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:109'></a>Replying to [comment:97 gh-LaisRast]:
> It compiled on Arch Linux x86_64 (5.0.9-arch1-1-ARCH). All relevant tests pass except for three.
> https://trac.sagemath.org/attachment/ticket/24905/polymake.log


Thanks for checking. In these three doctests it looks like polymake is emitting some extra newlines.
This is probably some nondeterministic pty interaction.



---

archive/issue_comments_345684.json:
```json
{
    "body": "<a id='comment:0'></a>polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:\n\n```\n  $p = cube(20);\n  $p->VOLUME;\n```",
    "created_at": "2019-04-28T14:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:

```
  $p = cube(20);
  $p->VOLUME;
```



---

archive/issue_comments_345685.json:
```json
{
    "body": "<a id='comment:111'></a>Replying to [comment:110 mkoeppe]:\n> polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:\n> \n> ```\n>   $p = cube(20);\n>   $p->VOLUME;\n> ```\n\n\nSimilar on debian using `./sage -polymake`.",
    "created_at": "2019-04-28T15:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345685",
    "user": "https://github.com/jplab"
}
```

<a id='comment:111'></a>Replying to [comment:110 mkoeppe]:
> polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:
> 
> ```
>   $p = cube(20);
>   $p->VOLUME;
> ```


Similar on debian using `./sage -polymake`.



---

archive/issue_comments_345686.json:
```json
{
    "body": "<a id='comment:112'></a>Replying to [comment:110 mkoeppe]:\n> polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:\n> \n> ```\n>   $p = cube(20);\n>   $p->VOLUME;\n> ```\n\npolymake 3.2 (from the official DMG) has the same problem.",
    "created_at": "2019-04-28T18:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345686",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:112'></a>Replying to [comment:110 mkoeppe]:
> polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:
> 
> ```
>   $p = cube(20);
>   $p->VOLUME;
> ```

polymake 3.2 (from the official DMG) has the same problem.



---

archive/issue_comments_345687.json:
```json
{
    "body": "<a id='comment:113'></a>Replying to [comment:112 mkoeppe]:\n> Replying to [comment:110 mkoeppe]:\n> > polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:\n> > \n> > ```\n> >   $p = cube(20);\n> >   $p->VOLUME;\n> > ```\n\n> polymake 3.2 (from the official DMG) has the same problem.\nLikewise, polymake 3.1",
    "created_at": "2019-04-28T18:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345687",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:113'></a>Replying to [comment:112 mkoeppe]:
> Replying to [comment:110 mkoeppe]:
> > polymake 3.4 on macOS Mojave (built within sage, but also the official DMG from the polymake website) dies if one presses `^C` in quick succession during a computation such as the following:
> > 
> > ```
> >   $p = cube(20);
> >   $p->VOLUME;
> > ```

> polymake 3.2 (from the official DMG) has the same problem.
Likewise, polymake 3.1



---

archive/issue_comments_345688.json:
```json
{
    "body": "<a id='comment:4'></a>I set up my sage again and everything worked (all tests passed).\n\nAfter installing polymake (and normaliz pynormaliz 4ti2 latte_int topcom qhull)\nI am getting the following failure:\n\n```\nkliem@zancara:~/localhome/patchbot-sage/sage$ ./sage -t --long src/sage/rings/integer.pyx --exitfirst\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-04-28-22-27-17-978fe65b.\nGit branch: polymake\nUsing --optional=4ti2,bliss,cmake,dochtml,latte_int,lidia,lrslib,memlimit,ninja_build,normaliz,openssl,pynormaliz,python2,qhull,sage,topcom\nDoctesting 1 file.\nsage -t --long src/sage/rings/integer.pyx\n**********************************************************************\nFile \"src/sage/rings/integer.pyx\", line 3009, in sage.rings.integer.Integer.divisors\nFailed example:\n    for i in range(20):  # long time\n        try:\n            alarm(RDF.random_element(1e-3, 0.5))\n            _ = n.divisors()\n            cancel_alarm()  # we never get here\n        except AlarmInterrupt:\n            pass\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.integer.Integer.divisors[20]>\", line 4, in <module>\n        _ = n.divisors()\n      File \"sage/rings/integer.pyx\", line 3079, in sage.rings.integer.Integer.divisors (build/cythonized/sage/rings/integer.c:19767)\n        ptr = <unsigned long*>check_allocarray(divisor_count, 3 * sizeof(unsigned long))\n      File \"memory.pxd\", line 87, in cysignals.memory.check_allocarray (build/cythonized/sage/rings/integer.c:47077)\n    MemoryError: failed to allocate 33554432 * 24 bytes\n**********************************************************************\n1 item had failures:\n   1 of  21 in sage.rings.integer.Integer.divisors\n    [1127 tests, 1 failure, 19.40 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/rings/integer.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 19.6 seconds\n    cpu time: 19.4 seconds\n    cumulative wall time: 19.4 seconds\n```\n\nThis looks familiar and indeed I have had this issue before:\n\nhttps://groups.google.com/forum/#!topic/sage-devel/wqnilUCLsT4\n\nThe last time I had this issue this also happened in connection with this ticket on a different machine.\n\nThere are several more failures in this file, but I believe they are all due to the same issue.",
    "created_at": "2019-04-28T20:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345688",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>I set up my sage again and everything worked (all tests passed).

After installing polymake (and normaliz pynormaliz 4ti2 latte_int topcom qhull)
I am getting the following failure:

```
kliem@zancara:~/localhome/patchbot-sage/sage$ ./sage -t --long src/sage/rings/integer.pyx --exitfirst
too many failed tests, not using stored timings
Running doctests with ID 2019-04-28-22-27-17-978fe65b.
Git branch: polymake
Using --optional=4ti2,bliss,cmake,dochtml,latte_int,lidia,lrslib,memlimit,ninja_build,normaliz,openssl,pynormaliz,python2,qhull,sage,topcom
Doctesting 1 file.
sage -t --long src/sage/rings/integer.pyx
**********************************************************************
File "src/sage/rings/integer.pyx", line 3009, in sage.rings.integer.Integer.divisors
Failed example:
    for i in range(20):  # long time
        try:
            alarm(RDF.random_element(1e-3, 0.5))
            _ = n.divisors()
            cancel_alarm()  # we never get here
        except AlarmInterrupt:
            pass
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/patchbot-sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.integer.Integer.divisors[20]>", line 4, in <module>
        _ = n.divisors()
      File "sage/rings/integer.pyx", line 3079, in sage.rings.integer.Integer.divisors (build/cythonized/sage/rings/integer.c:19767)
        ptr = <unsigned long*>check_allocarray(divisor_count, 3 * sizeof(unsigned long))
      File "memory.pxd", line 87, in cysignals.memory.check_allocarray (build/cythonized/sage/rings/integer.c:47077)
    MemoryError: failed to allocate 33554432 * 24 bytes
**********************************************************************
1 item had failures:
   1 of  21 in sage.rings.integer.Integer.divisors
    [1127 tests, 1 failure, 19.40 s]
----------------------------------------------------------------------
sage -t --long src/sage/rings/integer.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 19.6 seconds
    cpu time: 19.4 seconds
    cumulative wall time: 19.4 seconds
```

This looks familiar and indeed I have had this issue before:

https://groups.google.com/forum/#!topic/sage-devel/wqnilUCLsT4

The last time I had this issue this also happened in connection with this ticket on a different machine.

There are several more failures in this file, but I believe they are all due to the same issue.



---

archive/issue_comments_345689.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-30T12:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345689",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345690.json:
```json
{
    "body": "<a id='comment:115'></a>Replying to [comment:114 gh-kliem]:\n> [snip]\n\n\nI do not think that this error is related to this ticket as we are not touching the file `src/sage/rings/integer.pyx` directly, nor does the installation (as far as I can see) is related to this module. This looks like a local error on this machine.\n\nConsidering that:\n\n- This error was not so far reproduced on other machines,\n- that the package is experimental,\n- it compiles on macOS Mojave, debian, and ArchLinux,\n\nI would set this ticket to positive review. Further issues can be reported here: #22710.",
    "created_at": "2019-04-30T12:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345690",
    "user": "https://github.com/jplab"
}
```

<a id='comment:115'></a>Replying to [comment:114 gh-kliem]:
> [snip]


I do not think that this error is related to this ticket as we are not touching the file `src/sage/rings/integer.pyx` directly, nor does the installation (as far as I can see) is related to this module. This looks like a local error on this machine.

Considering that:

- This error was not so far reproduced on other machines,
- that the package is experimental,
- it compiles on macOS Mojave, debian, and ArchLinux,

I would set this ticket to positive review. Further issues can be reported here: #22710.



---

archive/issue_comments_345691.json:
```json
{
    "body": "<a id='comment:116'></a>Replying to [comment:115 jipilab]:\n> Replying to [comment:114 gh-kliem]:\n> > [snip]\n\n> \n> I do not think that this error is related to this ticket as we are not touching the file `src/sage/rings/integer.pyx` directly, nor does the installation (as far as I can see) is related to this module. This looks like a local error on this machine.\n\n\nI have this error occuring on two different machines and it's installation dependent (on one machine it only shows up in one installation). As it hasn't been there in this installation before installing normaliz pynormaliz 4ti2 latte_int topcom qhull polymake, I suppose that one of them for some strange reason causes `alarm` to not work correctly anymore (this causes the memory overflow as the list of divisors is too long for `./sage -t` default).\n\nIt is possible that a patchbot cannot have polymake installed. But I'm not certain of this yet.\n> \n> Considering that:\n> \n> - This error was not so far reproduced on other machines,\n> - that the package is experimental,\n> - it compiles on macOS Mojave, debian, and ArchLinux,\n> \n> I would set this ticket to positive review. Further issues can be reported here: #22710.",
    "created_at": "2019-04-30T20:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345691",
    "user": "https://github.com/kliem"
}
```

<a id='comment:116'></a>Replying to [comment:115 jipilab]:
> Replying to [comment:114 gh-kliem]:
> > [snip]

> 
> I do not think that this error is related to this ticket as we are not touching the file `src/sage/rings/integer.pyx` directly, nor does the installation (as far as I can see) is related to this module. This looks like a local error on this machine.


I have this error occuring on two different machines and it's installation dependent (on one machine it only shows up in one installation). As it hasn't been there in this installation before installing normaliz pynormaliz 4ti2 latte_int topcom qhull polymake, I suppose that one of them for some strange reason causes `alarm` to not work correctly anymore (this causes the memory overflow as the list of divisors is too long for `./sage -t` default).

It is possible that a patchbot cannot have polymake installed. But I'm not certain of this yet.
> 
> Considering that:
> 
> - This error was not so far reproduced on other machines,
> - that the package is experimental,
> - it compiles on macOS Mojave, debian, and ArchLinux,
> 
> I would set this ticket to positive review. Further issues can be reported here: #22710.



---

archive/issue_comments_345692.json:
```json
{
    "body": "<a id='comment:7'></a>I can't seem to reproduce a failure in the tests for `src/sage/rings/integer.pyx`.",
    "created_at": "2019-05-01T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345692",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>I can't seem to reproduce a failure in the tests for `src/sage/rings/integer.pyx`.



---

archive/issue_comments_345693.json:
```json
{
    "body": "<a id='comment:8'></a>The failure has nothing to do with this ticket.\n\nI updated my post on sage-devel.\n\nIt seems that many patchbots fail that test in the sense that alarm interrupt takes way too long (they all take about a minute for this file and this seems to be the reason why).\nIn my case the machine allocates the list for the divisors already, which exceeds the default allowance for `.sage -t`.",
    "created_at": "2019-05-02T04:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345693",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>The failure has nothing to do with this ticket.

I updated my post on sage-devel.

It seems that many patchbots fail that test in the sense that alarm interrupt takes way too long (they all take about a minute for this file and this seems to be the reason why).
In my case the machine allocates the list for the divisors already, which exceeds the default allowance for `.sage -t`.



---

archive/issue_comments_345694.json:
```json
{
    "body": "<a id='comment:9'></a>These two doctests need to be marked optional\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 1097, in sage.interfaces.polymake.Polymake._tab_completion\nFailed example:\n    'show_credits' in dir(polymake)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._tab_completion[0]>\", line 1, in <module>\n        'show_credits' in dir(polymake)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/tab_completion.py\", line 52, in __dir__\n        return dir(self.__class__) + list(self.__dict__) + tab_fn()\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 1107, in _tab_completion\n        self._start()\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 362, in _start\n        Expect._start(self, alt_message=None)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/expect.py\", line 523, in _start\n        raise RuntimeError(\"unable to start %s: %s\" % (self.name(), msg))\n    RuntimeError: unable to start polymake: End Of File (EOF). Exception style platform.\n    Polymake finished running /usr/bin/env TERM=dumb polymake\n    command: /usr/bin/env\n    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']\n    buffer (last 100 chars): ''\n    before (last 100 chars): '/usr/bin/env: \\xe2\\x80\\x98polymake\\xe2\\x80\\x99: No such file or directory\\r\\n'\n    after: <class 'pexpect.exceptions.EOF'>\n    match: None\n    match_index: None\n    exitstatus: 127\n    flag_eof: True\n    pid: 26727\n    child_fd: 15\n    closed: False\n    timeout: None\n    delimiter: <class 'pexpect.exceptions.EOF'>\n    logfile: None\n    logfile_read: None\n    logfile_send: None\n    maxread: 4194304\n    ignorecase: False\n    searchwindowsize: None\n    delaybeforesend: None\n    delayafterclose: 0.1\n    delayafterterminate: 0.1\n    searcher: searcher_re:\n        0: re.compile('polytope > ')\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 1102, in sage.interfaces.polymake.Polymake._tab_completion\nFailed example:\n    'lex_ordered' in dir(polymake)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._tab_completion[1]>\", line 1, in <module>\n        'lex_ordered' in dir(polymake)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/tab_completion.py\", line 52, in __dir__\n        return dir(self.__class__) + list(self.__dict__) + tab_fn()\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 1107, in _tab_completion\n        self._start()\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py\", line 362, in _start\n        Expect._start(self, alt_message=None)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/expect.py\", line 523, in _start\n        raise RuntimeError(\"unable to start %s: %s\" % (self.name(), msg))\n    RuntimeError: unable to start polymake: End Of File (EOF). Exception style platform.\n    Polymake finished running /usr/bin/env TERM=dumb polymake\n    command: /usr/bin/env\n    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']\n    buffer (last 100 chars): ''\n    before (last 100 chars): '/usr/bin/env: \\xe2\\x80\\x98polymake\\xe2\\x80\\x99: No such file or directory\\r\\n'\n    after: <class 'pexpect.exceptions.EOF'>\n    match: None\n    match_index: None\n    exitstatus: 127\n    flag_eof: True\n    pid: 26731\n    child_fd: 15\n    closed: False\n    timeout: None\n    delimiter: <class 'pexpect.exceptions.EOF'>\n    logfile: None\n    logfile_read: None\n    logfile_send: None\n    maxread: 4194304\n    ignorecase: False\n    searchwindowsize: None\n    delaybeforesend: None\n    delayafterclose: 0.1\n    delayafterterminate: 0.1\n    searcher: searcher_re:\n        0: re.compile('polytope > ')\n**********************************************************************\n1 item had failures:\n   2 of   3 in sage.interfaces.polymake.Polymake._tab_completion\n    [24 tests, 2 failures, 0.09 s]\n```",
    "created_at": "2019-05-06T00:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345694",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>These two doctests need to be marked optional

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 1097, in sage.interfaces.polymake.Polymake._tab_completion
Failed example:
    'show_credits' in dir(polymake)
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._tab_completion[0]>", line 1, in <module>
        'show_credits' in dir(polymake)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/tab_completion.py", line 52, in __dir__
        return dir(self.__class__) + list(self.__dict__) + tab_fn()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 1107, in _tab_completion
        self._start()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 362, in _start
        Expect._start(self, alt_message=None)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/expect.py", line 523, in _start
        raise RuntimeError("unable to start %s: %s" % (self.name(), msg))
    RuntimeError: unable to start polymake: End Of File (EOF). Exception style platform.
    Polymake finished running /usr/bin/env TERM=dumb polymake
    command: /usr/bin/env
    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']
    buffer (last 100 chars): ''
    before (last 100 chars): '/usr/bin/env: \xe2\x80\x98polymake\xe2\x80\x99: No such file or directory\r\n'
    after: <class 'pexpect.exceptions.EOF'>
    match: None
    match_index: None
    exitstatus: 127
    flag_eof: True
    pid: 26727
    child_fd: 15
    closed: False
    timeout: None
    delimiter: <class 'pexpect.exceptions.EOF'>
    logfile: None
    logfile_read: None
    logfile_send: None
    maxread: 4194304
    ignorecase: False
    searchwindowsize: None
    delaybeforesend: None
    delayafterclose: 0.1
    delayafterterminate: 0.1
    searcher: searcher_re:
        0: re.compile('polytope > ')
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 1102, in sage.interfaces.polymake.Polymake._tab_completion
Failed example:
    'lex_ordered' in dir(polymake)
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._tab_completion[1]>", line 1, in <module>
        'lex_ordered' in dir(polymake)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/tab_completion.py", line 52, in __dir__
        return dir(self.__class__) + list(self.__dict__) + tab_fn()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 1107, in _tab_completion
        self._start()
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/polymake.py", line 362, in _start
        Expect._start(self, alt_message=None)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/expect.py", line 523, in _start
        raise RuntimeError("unable to start %s: %s" % (self.name(), msg))
    RuntimeError: unable to start polymake: End Of File (EOF). Exception style platform.
    Polymake finished running /usr/bin/env TERM=dumb polymake
    command: /usr/bin/env
    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']
    buffer (last 100 chars): ''
    before (last 100 chars): '/usr/bin/env: \xe2\x80\x98polymake\xe2\x80\x99: No such file or directory\r\n'
    after: <class 'pexpect.exceptions.EOF'>
    match: None
    match_index: None
    exitstatus: 127
    flag_eof: True
    pid: 26731
    child_fd: 15
    closed: False
    timeout: None
    delimiter: <class 'pexpect.exceptions.EOF'>
    logfile: None
    logfile_read: None
    logfile_send: None
    maxread: 4194304
    ignorecase: False
    searchwindowsize: None
    delaybeforesend: None
    delayafterclose: 0.1
    delayafterterminate: 0.1
    searcher: searcher_re:
        0: re.compile('polytope > ')
**********************************************************************
1 item had failures:
   2 of   3 in sage.interfaces.polymake.Polymake._tab_completion
    [24 tests, 2 failures, 0.09 s]
```



---

archive/issue_comments_345695.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-05-06T00:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345695",
    "user": "https://github.com/kiwifb"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_345696.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-06T08:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345697.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-06T08:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345697",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_345698.json:
```json
{
    "body": "<a id='comment:2'></a>please provide a precise link to the tarball. The link in the description leads to source tarball, minimal tarball, etc...",
    "created_at": "2019-05-07T08:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345698",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>please provide a precise link to the tarball. The link in the description leads to source tarball, minimal tarball, etc...



---

archive/issue_comments_345699.json:
```json
{
    "body": "<a id='comment:3'></a>The wget command line has the URL.",
    "created_at": "2019-05-07T08:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345699",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>The wget command line has the URL.



---

archive/issue_comments_345700.json:
```json
{
    "body": "<a id='comment:4'></a>I see - but the instructions like this are flaky. By right, one has to get the branch and  the  tarball first, and only then go about building things.\nOtherwise chances are that building chokes up on an unavailable tarball.\n\nAnd you should run `make build` to get all the deps right (`sage -b` is really a quick and dirty plug that should go away)",
    "created_at": "2019-05-07T08:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345700",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>I see - but the instructions like this are flaky. By right, one has to get the branch and  the  tarball first, and only then go about building things.
Otherwise chances are that building chokes up on an unavailable tarball.

And you should run `make build` to get all the deps right (`sage -b` is really a quick and dirty plug that should go away)



---

archive/issue_comments_345701.json:
```json
{
    "body": "<a id='comment:5'></a>why does one need `libncurses-dev`? Sage provides ncurses, and as soon as #27277 is in, it should be able to use system's (n)curses.",
    "created_at": "2019-05-07T08:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345701",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>why does one need `libncurses-dev`? Sage provides ncurses, and as soon as #27277 is in, it should be able to use system's (n)curses.



---

archive/issue_comments_345702.json:
```json
{
    "body": "<a id='comment:126'></a>Replying to [comment:125 dimpase]:\n> why does one need `libncurses-dev`? Sage provides ncurses, and as soon as #27277 is in, it should be able to use system's (n)curses. \n\n\nThis might be copy-paste from polymake install instructions. Certainly the `ncurses` spkg is pulled in via `perl_term_readline_gnu` and `readline`. It would be good to test if the install works without this system package (it should).",
    "created_at": "2019-05-07T10:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345702",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:126'></a>Replying to [comment:125 dimpase]:
> why does one need `libncurses-dev`? Sage provides ncurses, and as soon as #27277 is in, it should be able to use system's (n)curses. 


This might be copy-paste from polymake install instructions. Certainly the `ncurses` spkg is pulled in via `perl_term_readline_gnu` and `readline`. It would be good to test if the install works without this system package (it should).



---

archive/issue_comments_345703.json:
```json
{
    "body": "<a id='comment:8'></a>OK - the previous instruction didn't work if polymake was already installed. (Surely, the fact that it's an experimental package only makes it more complicated).",
    "created_at": "2019-05-07T10:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345703",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>OK - the previous instruction didn't work if polymake was already installed. (Surely, the fact that it's an experimental package only makes it more complicated).



---

archive/issue_comments_345704.json:
```json
{
    "body": "<a id='comment:9'></a>some errors, please have a look at mis-posted #27763#comment:9\nand \nhttps://trac.sagemath.org/ticket/27763#comment:11",
    "created_at": "2019-05-07T16:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345704",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>some errors, please have a look at mis-posted #27763#comment:9
and 
https://trac.sagemath.org/ticket/27763#comment:11



---

archive/issue_comments_345705.json:
```json
{
    "body": "<a id='comment:0'></a>Please apply this\n\n```diff\n--- a/src/sage/interfaces/polymake.py\n+++ b/src/sage/interfaces/polymake.py\n@@ -874,7 +874,7 @@ class Polymake(ExtraTabCompletion, Expect):\n         sometimes it hangs, and therefore we remove it from the tests, for now::\n \n             sage: c = polymake.cube(15)             # optional - polymake\n-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested\n+            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # not tested # optional - polymake\n             Traceback (most recent call last):\n             ...\n             RuntimeError: Polymake fails to respond timely\n```\n\nthis order indeed suppresses running this line, otherwise it does not work for me.",
    "created_at": "2019-05-07T20:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345705",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'></a>Please apply this

```diff
--- a/src/sage/interfaces/polymake.py
+++ b/src/sage/interfaces/polymake.py
@@ -874,7 +874,7 @@ class Polymake(ExtraTabCompletion, Expect):
         sometimes it hangs, and therefore we remove it from the tests, for now::
 
             sage: c = polymake.cube(15)             # optional - polymake
-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested
+            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # not tested # optional - polymake
             Traceback (most recent call last):
             ...
             RuntimeError: Polymake fails to respond timely
```

this order indeed suppresses running this line, otherwise it does not work for me.



---

archive/issue_comments_345706.json:
```json
{
    "body": "<a id='comment:1'></a>Very strange. I don't think the order of these annotations makes a difference",
    "created_at": "2019-05-08T08:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345706",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>Very strange. I don't think the order of these annotations makes a difference



---

archive/issue_comments_345707.json:
```json
{
    "body": "<a id='comment:2'></a>The doctesting framework is a pile of .... - so I'm not surprised that on different platforms it behaves differently. E.g. we see doctests passing with `--serial` options and mysteriously crashing without it.",
    "created_at": "2019-05-08T08:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345707",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>The doctesting framework is a pile of .... - so I'm not surprised that on different platforms it behaves differently. E.g. we see doctests passing with `--serial` options and mysteriously crashing without it.



---

archive/issue_comments_345708.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T09:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345709.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T09:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345710.json:
```json
{
    "body": "<a id='comment:5'></a>looks good now.",
    "created_at": "2019-05-08T09:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345710",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>looks good now.



---

archive/issue_comments_345711.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T09:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345711",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345712.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-05-08T10:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_345713.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2019-05-08T10:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_345714.json:
```json
{
    "body": "<a id='comment:7'></a>oops, sorry, I keep pushing into wrong branches these days! Please save your old branch...",
    "created_at": "2019-05-08T10:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345714",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>oops, sorry, I keep pushing into wrong branches these days! Please save your old branch...



---

archive/issue_comments_345715.json:
```json
{
    "body": "<a id='comment:8'></a>specifically, Matthias, could you force-push your last #24905#comment:133 ?",
    "created_at": "2019-05-08T10:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345715",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>specifically, Matthias, could you force-push your last #24905#comment:133 ?



---

archive/issue_comments_345716.json:
```json
{
    "body": "<a id='comment:9'></a>On https://github.com/sagemath/sagetrac-mirror/tree/public/upgrade_polymake_to_version_3_2r4\n\nwe have everything till comment:101 - so I can recreate the thing from history here... <facepalm>",
    "created_at": "2019-05-08T10:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345716",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>On https://github.com/sagemath/sagetrac-mirror/tree/public/upgrade_polymake_to_version_3_2r4

we have everything till comment:101 - so I can recreate the thing from history here... <facepalm>



---

archive/issue_comments_345717.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-05-08T10:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_345718.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T10:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345718",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345719.json:
```json
{
    "body": "<a id='comment:1'></a>OK, this looks like a correctly recovered branch to me.",
    "created_at": "2019-05-08T10:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345719",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>OK, this looks like a correctly recovered branch to me.



---

archive/issue_comments_345720.json:
```json
{
    "body": "<a id='comment:2'></a>On Debian I also had to install libterm-readkey-perl",
    "created_at": "2019-05-08T12:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345720",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>On Debian I also had to install libterm-readkey-perl



---

archive/issue_comments_345721.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-05-08T12:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_345722.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2019-05-08T12:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_345723.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T12:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345724.json:
```json
{
    "body": "<a id='comment:5'></a>I restored the old branch and cherry-picked your \"update docs\" commit",
    "created_at": "2019-05-08T12:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345724",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>I restored the old branch and cherry-picked your "update docs" commit



---

archive/issue_comments_345725.json:
```json
{
    "body": "<a id='comment:7'></a>could you also mention libterm-readline-gnu-perl as a package to install on !Debian/Ubuntu?",
    "created_at": "2019-05-08T13:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345725",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>could you also mention libterm-readline-gnu-perl as a package to install on !Debian/Ubuntu?



---

archive/issue_comments_345726.json:
```json
{
    "body": "<a id='comment:8'></a>Perhaps it's time to change this package from \"experimental\" to \"optional\"?",
    "created_at": "2019-05-08T13:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345726",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Perhaps it's time to change this package from "experimental" to "optional"?



---

archive/issue_comments_345727.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T13:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345728.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T13:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345729.json:
```json
{
    "body": "<a id='comment:1'></a>Let's get this done and open another ticket for promotion to optional.\nIMHO it is not quite ready, e.g. it does not run on all supported platforms.\nAnd the installation procedure isn't nice. I don't think we have a optional package where to install it one needs to install many things by hand in an ad hoc way.\n\n---\nNew commits:",
    "created_at": "2019-05-08T13:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345729",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>Let's get this done and open another ticket for promotion to optional.
IMHO it is not quite ready, e.g. it does not run on all supported platforms.
And the installation procedure isn't nice. I don't think we have a optional package where to install it one needs to install many things by hand in an ad hoc way.

---
New commits:



---

archive/issue_comments_345730.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-08T13:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345730",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_345731.json:
```json
{
    "body": "<a id='comment:153'></a>Replying to [comment:151 dimpase]:\n> Let's get this done and open another ticket for promotion to optional.\n> IMHO it is not quite ready, e.g. it does not run on all supported platforms.\n> And the installation procedure isn't nice. I don't think we have a optional package where to install it one needs to install many things by hand in an ad hoc way.\n\n\nOK, I agree, good point.",
    "created_at": "2019-05-08T13:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345731",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:153'></a>Replying to [comment:151 dimpase]:
> Let's get this done and open another ticket for promotion to optional.
> IMHO it is not quite ready, e.g. it does not run on all supported platforms.
> And the installation procedure isn't nice. I don't think we have a optional package where to install it one needs to install many things by hand in an ad hoc way.


OK, I agree, good point.



---

archive/issue_comments_345732.json:
```json
{
    "body": "<a id='comment:4'></a>I added one more perl package. Could you check this on Linux?\nAfter adding it, the following should work:\n\n```\npolytope > $A = db_query( { \"_id\"=>\"F.4D.0047\" }, db=>\"LatticePolytopes\", collection=>\"SmoothReflexive\" );\npolymake: used package polyDB\n   Access to the polymake polytope database.\n   (c) 2013-2018 Silke Horn, Andreas Paffenholz\n   http://solros.de\n   http://www.mathematik.tu-darmstadt.de/~paffenholz\n\n\npolymake:  ERROR: #\n# *** DEPRECATION WARNING ***\n# ...\n```\n(The deprecation warning is normal.}",
    "created_at": "2019-05-08T13:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345732",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>I added one more perl package. Could you check this on Linux?
After adding it, the following should work:

```
polytope > $A = db_query( { "_id"=>"F.4D.0047" }, db=>"LatticePolytopes", collection=>"SmoothReflexive" );
polymake: used package polyDB
   Access to the polymake polytope database.
   (c) 2013-2018 Silke Horn, Andreas Paffenholz
   http://solros.de
   http://www.mathematik.tu-darmstadt.de/~paffenholz


polymake:  ERROR: #
# *** DEPRECATION WARNING ***
# ...
```
(The deprecation warning is normal.}



---

archive/issue_comments_345733.json:
```json
{
    "body": "<a id='comment:5'></a>Building 72 more Perl packages now :-) Why is polymake itself not on CPAN?",
    "created_at": "2019-05-08T13:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345733",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>Building 72 more Perl packages now :-) Why is polymake itself not on CPAN?



---

archive/issue_comments_345734.json:
```json
{
    "body": "<a id='comment:6'></a>this is what I got (after installing moar perl and rebuilding polymake)\n\n```\n $ ./sage --polymake\nWelcome to polymake version 3.4\nCopyright (c) 1997-2019\nEwgenij Gawrilow, Michael Joswig (TU Berlin)\nhttps://polymake.org\n\nThis is free software licensed under GPL; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nPress F1 or enter 'help;' for basic instructions.\n\nApplication polytope currently uses following contributed and third-party software packages:\nSVG, bliss, cdd, graphviz, latte, libnormaliz, lrs, permlib, polyDB, povray, ppl, qhull, singular, sketch, sympol, threejs, tikz, tosimplex\nFor more details:  show_credits;\npolytope > $A = db_query( { \"_id\"=>\"F.4D.0047\" }, db=>\"LatticePolytopes\", collection=>\"SmoothReflexive\" );\npolymake: used package polyDB\n   Access to the polymake polytope database.\n   (c) 2013-2018 Silke Horn, Andreas Paffenholz\n   http://solros.de\n   http://www.mathematik.tu-darmstadt.de/~paffenholz\n\n\npolytope > \n```\n\nperhaps you could add a meaningful doctest, tagged `internet`, for this?",
    "created_at": "2019-05-08T15:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345734",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>this is what I got (after installing moar perl and rebuilding polymake)

```
 $ ./sage --polymake
Welcome to polymake version 3.4
Copyright (c) 1997-2019
Ewgenij Gawrilow, Michael Joswig (TU Berlin)
https://polymake.org

This is free software licensed under GPL; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Press F1 or enter 'help;' for basic instructions.

Application polytope currently uses following contributed and third-party software packages:
SVG, bliss, cdd, graphviz, latte, libnormaliz, lrs, permlib, polyDB, povray, ppl, qhull, singular, sketch, sympol, threejs, tikz, tosimplex
For more details:  show_credits;
polytope > $A = db_query( { "_id"=>"F.4D.0047" }, db=>"LatticePolytopes", collection=>"SmoothReflexive" );
polymake: used package polyDB
   Access to the polymake polytope database.
   (c) 2013-2018 Silke Horn, Andreas Paffenholz
   http://solros.de
   http://www.mathematik.tu-darmstadt.de/~paffenholz


polytope > 
```

perhaps you could add a meaningful doctest, tagged `internet`, for this?



---

archive/issue_comments_345735.json:
```json
{
    "body": "<a id='comment:7'></a>When MongoDB is not available, the function `db_query` is not even present.\nNot sure if/why we want to doctest that.\n\nLet's postpone doctesting the `db_query` function in Sage to #27802, which adds support for the dictionary that appears in the argument list.",
    "created_at": "2019-05-08T15:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345735",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>When MongoDB is not available, the function `db_query` is not even present.
Not sure if/why we want to doctest that.

Let's postpone doctesting the `db_query` function in Sage to #27802, which adds support for the dictionary that appears in the argument list.



---

archive/issue_comments_345736.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T16:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345736",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345737.json:
```json
{
    "body": "<a id='comment:8'></a>OK then.",
    "created_at": "2019-05-08T16:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345737",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>OK then.



---

archive/issue_comments_345738.json:
```json
{
    "body": "<a id='comment:9'></a>one last nitpick `yum install perl-Term-ReadLine-Gnu` should be added to Fedora instructions",
    "created_at": "2019-05-08T17:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345738",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>one last nitpick `yum install perl-Term-ReadLine-Gnu` should be added to Fedora instructions



---

archive/issue_comments_345739.json:
```json
{
    "body": "<a id='comment:0'></a>Thank you!",
    "created_at": "2019-05-08T19:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>Thank you!



---

archive/issue_comments_345740.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-05-08T19:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_345741.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2019-05-08T19:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_345742.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345742",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_345743.json:
```json
{
    "body": "<a id='comment:3'></a>Fedora's 26 perl is however not good.\n\n```\n[polymake-3.4] FAILED: /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc\n[polymake-3.4] /usr/bin/perl /usr/share/perl5/ExtUtils/xsubpp -typemap /usr/share/perl5/ExtUtils/typemap  --output /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/lib/core/src/perl/Customize.xxs\n[polymake-3.4] Can't open perl script \"/usr/share/perl5/ExtUtils/xsubpp\": No such file or directory\n```\nThis seems to be a known problem - not sure it's worthwhile to try to fix it though.\n\nAnd, by the way, on stable Debian I get a problem building with (the standard) gcc 6.3.",
    "created_at": "2019-05-08T20:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345743",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>Fedora's 26 perl is however not good.

```
[polymake-3.4] FAILED: /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc
[polymake-3.4] /usr/bin/perl /usr/share/perl5/ExtUtils/xsubpp -typemap /usr/share/perl5/ExtUtils/typemap  --output /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/lib/core/src/perl/Customize.xxs
[polymake-3.4] Can't open perl script "/usr/share/perl5/ExtUtils/xsubpp": No such file or directory
```
This seems to be a known problem - not sure it's worthwhile to try to fix it though.

And, by the way, on stable Debian I get a problem building with (the standard) gcc 6.3.



---

archive/issue_comments_345744.json:
```json
{
    "body": "<a id='comment:164'></a>Replying to [comment:163 dimpase]:\n> Fedora's 26 perl is however not good.\n> \n> ```\n> [polymake-3.4] FAILED: /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc\n> [polymake-3.4] /usr/bin/perl /usr/share/perl5/ExtUtils/xsubpp -typemap /usr/share/perl5/ExtUtils/typemap  --output /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/lib/core/src/perl/Customize.xxs\n> [polymake-3.4] Can't open perl script \"/usr/share/perl5/ExtUtils/xsubpp\": No such file or directory\n> ```\n> This seems to be a known problem - not sure it's worthwhile to try to fix it though.\n\n\nKnown to who?",
    "created_at": "2019-05-09T09:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345744",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:164'></a>Replying to [comment:163 dimpase]:
> Fedora's 26 perl is however not good.
> 
> ```
> [polymake-3.4] FAILED: /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc
> [polymake-3.4] /usr/bin/perl /usr/share/perl5/ExtUtils/xsubpp -typemap /usr/share/perl5/ExtUtils/typemap  --output /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/build/perlx/5.24.4/x86_64-linux-thread-multi/Customize.cc /home/scratch2/dimpase/sage/sage/local/var/tmp/sage/build/polymake-3.4/src/lib/core/src/perl/Customize.xxs
> [polymake-3.4] Can't open perl script "/usr/share/perl5/ExtUtils/xsubpp": No such file or directory
> ```
> This seems to be a known problem - not sure it's worthwhile to try to fix it though.


Known to who?



---

archive/issue_comments_345745.json:
```json
{
    "body": "<a id='comment:5'></a>Follow-up ticket: Fix polymake 3.4 lrslib detection (#27803).",
    "created_at": "2019-05-09T09:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345745",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Follow-up ticket: Fix polymake 3.4 lrslib detection (#27803).



---

archive/issue_comments_345746.json:
```json
{
    "body": "<a id='comment:6'></a>It's known to the internet that !Fedora/Centos perform a surgery on its Perl installation resulting in breakages like in comment:163 (missing `/usr/share/perl5/ExtUtils/xsubpp`; of course `xsubpp` is present, it's only not in this locaton, hardcoded somewhere...)",
    "created_at": "2019-05-09T09:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345746",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>It's known to the internet that !Fedora/Centos perform a surgery on its Perl installation resulting in breakages like in comment:163 (missing `/usr/share/perl5/ExtUtils/xsubpp`; of course `xsubpp` is present, it's only not in this locaton, hardcoded somewhere...)



---

archive/issue_comments_345747.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-12T21:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345747",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_345748.json:
```json
{
    "body": "<a id='comment:9'></a>Too late, a previous version was released in 8.8.beta5. Move any new code to a separate ticket",
    "created_at": "2019-05-12T21:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345748",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>Too late, a previous version was released in 8.8.beta5. Move any new code to a separate ticket



---

archive/issue_events_062545.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-12T21:33:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24905#event-62545"
}
```



---

archive/issue_comments_345749.json:
```json
{
    "body": "<a id='comment:170'></a>Replying to [comment:169 vbraun]:\n> Too late, a previous version was released in 8.8.beta5. Move any new code to a separate ticket\n\nNo problem, the missing commit is on the branch of #27803",
    "created_at": "2019-05-13T15:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24905#issuecomment-345749",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:170'></a>Replying to [comment:169 vbraun]:
> Too late, a previous version was released in 8.8.beta5. Move any new code to a separate ticket

No problem, the missing commit is on the branch of #27803
