# Issue 24353: Upgrade MPFR, MPC and MPFI

archive/issues_024116.json:
```json
{
    "body": "**Tarballs**: \n- http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2\n- https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz\n- https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2\n\n**CC:**  @zimmermann6 @kiwifb\n\n**Branch/Commit:** [3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)\n\n**Reviewer:** Paul Zimmermann\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/24353\n\n",
    "closed_at": "2018-01-18T18:09:19Z",
    "created_at": "2017-12-09T17:05:23Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "Upgrade MPFR, MPC and MPFI",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/24353",
    "user": "https://github.com/jdemeyer"
}
```
**Tarballs**: 
- http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2
- https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz
- https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2

**CC:**  @zimmermann6 @kiwifb

**Branch/Commit:** [3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)

**Reviewer:** Paul Zimmermann

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/24353





---

archive/issue_comments_371106.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_to_mpfr_4_0_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_mpfr_4_0_0)",
    "created_at": "2017-12-09T19:09:57Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371106",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_to_mpfr_4_0_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_mpfr_4_0_0)



---

archive/issue_comments_371107.json:
```json
{
    "body": "<a id='comment:3'></a>\nAs reported on the MPFR mailing list by other people, this breaks MPC:\n\n```\n/bin/bash ../libtool  --tag=CC   --mode=compile gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..   -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/\nlibtool: compile:  gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include -m64 -O2 -march=corei7-\nmul.c:179:1: error: conflicting types for 'mpfr_fmma'\n mpfr_fmma (mpfr_ptr z, mpfr_srcptr a, mpfr_srcptr b, mpfr_srcptr c,\n ^\nIn file included from mpc.h:25:0,\n                 from mpc-impl.h:30,\n                 from mul.c:22:\n../../../../../../../include/mpfr.h:731:6: note: previous declaration of 'mpfr_fmma' was here\n __MPFR_DECLSPEC int mpfr_fmma (mpfr_ptr, mpfr_srcptr, mpfr_srcptr, mpfr_srcptr,\n      ^\nMakefile:532: recipe for target 'mul.lo' failed\nmake[6]: *** [mul.lo] Error 1\n```\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7\">f93f4ac</a></td><td><code>Upgrade to MPFR 4.0.0</code></td></tr></table>\n",
    "created_at": "2017-12-09T19:10:50Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371107",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
As reported on the MPFR mailing list by other people, this breaks MPC:

```
/bin/bash ../libtool  --tag=CC   --mode=compile gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..   -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/
libtool: compile:  gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -I/usr/local/src/sage-config/local/include -I/usr/local/src/sage-config/local/include -m64 -O2 -march=corei7-
mul.c:179:1: error: conflicting types for 'mpfr_fmma'
 mpfr_fmma (mpfr_ptr z, mpfr_srcptr a, mpfr_srcptr b, mpfr_srcptr c,
 ^
In file included from mpc.h:25:0,
                 from mpc-impl.h:30,
                 from mul.c:22:
../../../../../../../include/mpfr.h:731:6: note: previous declaration of 'mpfr_fmma' was here
 __MPFR_DECLSPEC int mpfr_fmma (mpfr_ptr, mpfr_srcptr, mpfr_srcptr, mpfr_srcptr,
      ^
Makefile:532: recipe for target 'mul.lo' failed
make[6]: *** [mul.lo] Error 1
```

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7">f93f4ac</a></td><td><code>Upgrade to MPFR 4.0.0</code></td></tr></table>




---

archive/issue_comments_371108.json:
```json
{
    "body": "**Commit:** [f93f4ac51cdd687efd359b5a28d84f691e5f63e7](https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7)",
    "created_at": "2017-12-09T19:10:50Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371108",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [f93f4ac51cdd687efd359b5a28d84f691e5f63e7](https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7)



---

archive/issue_comments_371109.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n-Currently, there is a release candidate:\n+Currently, there are release candidates:\n \n-**Tarball**: http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2\n+**Tarballs**: \n+- http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2\n+- https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n``````\n",
    "created_at": "2017-12-14T11:23:17Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371109",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
-Currently, there is a release candidate:
+Currently, there are release candidates:
 
-**Tarball**: http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2
+**Tarballs**: 
+- http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2
+- https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
``````




---

archive/issue_comments_371110.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2017-12-14T11:23:17Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371110",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_events_216141.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-14T11:23:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "rename": {
        "from": "Upgrade to MPFR 4.0.0",
        "to": "Upgrade to MPFR 4.0.0 and MPC 1.1.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216141"
}
```



---

archive/issue_comments_371111.json:
```json
{
    "body": "**Changing commit** from \"[f93f4ac51cdd687efd359b5a28d84f691e5f63e7](https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7)\" to \"[4db514de445746ebef06e07804653c4ae3f49867](https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867)\".",
    "created_at": "2017-12-14T14:38:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f93f4ac51cdd687efd359b5a28d84f691e5f63e7](https://github.com/sagemath/sagetrac-mirror/commit/f93f4ac51cdd687efd359b5a28d84f691e5f63e7)" to "[4db514de445746ebef06e07804653c4ae3f49867](https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867)".



---

archive/issue_comments_371112.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867\">4db514d</a></td><td><code>Upgrade to MPFR 4.0.0 and MPC 1.1.0</code></td></tr></table>\n",
    "created_at": "2017-12-14T14:38:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867">4db514d</a></td><td><code>Upgrade to MPFR 4.0.0 and MPC 1.1.0</code></td></tr></table>




---

archive/issue_events_216142.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-15T10:00:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "rename": {
        "from": "Upgrade to MPFR 4.0.0 and MPC 1.1.0",
        "to": "Upgrade MPFR, MPC and MPFI"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216142"
}
```



---

archive/issue_comments_371113.json:
```json
{
    "body": "**Upstream:** Reported upstream. No feedback yet.",
    "created_at": "2017-12-15T10:00:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371113",
    "user": "https://github.com/jdemeyer"
}
```

**Upstream:** Reported upstream. No feedback yet.



---

archive/issue_comments_371114.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n **Tarballs**: \n - http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2\n - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n+\n+This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html\n``````\n",
    "created_at": "2017-12-15T10:00:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371114",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 **Tarballs**: 
 - http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2
 - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
+
+This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html
``````




---

archive/issue_comments_371115.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,5 @@\n-Currently, there are release candidates:\n-\n **Tarballs**: \n-- http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2\n+- http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2\n - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n \n This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html\n``````\n",
    "created_at": "2017-12-25T13:17:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371115",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,5 @@
-Currently, there are release candidates:
-
 **Tarballs**: 
-- http://www.mpfr.org/mpfr-4.0.0/mpfr-4.0.0-rc1.tar.bz2
+- http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2
 - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
 
 This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html
``````




---

archive/issue_comments_371116.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2\n - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n \n-This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html\n+This breaks MPFI: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html\n+\n+Unfortunately, it seems that MPFI is a dead project, so we'll just have to patch MPFI in Sage.\n``````\n",
    "created_at": "2018-01-08T10:56:58Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371116",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2
 - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
 
-This requires an upgrade to MPFI which does not exist yet: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html
+This breaks MPFI: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html
+
+Unfortunately, it seems that MPFI is a dead project, so we'll just have to patch MPFI in Sage.
``````




---

archive/issue_comments_371117.json:
```json
{
    "body": "<a id='comment:9'></a>\n> Unfortunately, it seems that MPFI is a dead project\n\n\nFabrice Rouillier tells me he is preparing the release of MPFI 1.5.2. Stay tuned!",
    "created_at": "2018-01-08T12:42:46Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371117",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>
> Unfortunately, it seems that MPFI is a dead project


Fabrice Rouillier tells me he is preparing the release of MPFI 1.5.2. Stay tuned!



---

archive/issue_comments_371118.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [zimmerma](#comment%3A9):\n> Fabrice Rouillier tells me he is preparing the release of MPFI 1.5.2. Stay tuned!\n\n\nIs this personal communication or is this on some public channel? In the latter case, do you have a link?",
    "created_at": "2018-01-08T13:41:41Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371118",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [zimmerma](#comment%3A9):
> Fabrice Rouillier tells me he is preparing the release of MPFI 1.5.2. Stay tuned!


Is this personal communication or is this on some public channel? In the latter case, do you have a link?



---

archive/issue_comments_371119.json:
```json
{
    "body": "<a id='comment:11'></a>\n> Is this personal communication or is this on some public channel?\n\n\nit is personal communication. If/when I have some information about a release candidate,\nI will post it here.",
    "created_at": "2018-01-08T13:43:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371119",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:11'></a>
> Is this personal communication or is this on some public channel?


it is personal communication. If/when I have some information about a release candidate,
I will post it here.



---

archive/issue_comments_371120.json:
```json
{
    "body": "<a id='comment:12'></a>\nMPFI 1.5.2 is available from https://gforge.inria.fr/frs/?group_id=157",
    "created_at": "2018-01-08T15:40:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371120",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:12'></a>
MPFI 1.5.2 is available from https://gforge.inria.fr/frs/?group_id=157



---

archive/issue_comments_371121.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,4 @@\n **Tarballs**: \n - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2\n - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n-\n-This breaks MPFI: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html\n-\n-Unfortunately, it seems that MPFI is a dead project, so we'll just have to patch MPFI in Sage.\n+- https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2\n``````\n",
    "created_at": "2018-01-08T15:57:57Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371121",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,4 @@
 **Tarballs**: 
 - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2
 - https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
-
-This breaks MPFI: https://lists.gforge.inria.fr/pipermail/mpfi-users/2017-December/000065.html
-
-Unfortunately, it seems that MPFI is a dead project, so we'll just have to patch MPFI in Sage.
+- https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2
``````




---

archive/issue_comments_371122.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e\">16e3180</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr></table>\n",
    "created_at": "2018-01-08T16:10:36Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e">16e3180</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr></table>




---

archive/issue_comments_371123.json:
```json
{
    "body": "**Changing commit** from \"[4db514de445746ebef06e07804653c4ae3f49867](https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867)\" to \"[16e31808d86c1259ff984f5ccbc92b407931c64e](https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e)\".",
    "created_at": "2018-01-08T16:10:36Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4db514de445746ebef06e07804653c4ae3f49867](https://github.com/sagemath/sagetrac-mirror/commit/4db514de445746ebef06e07804653c4ae3f49867)" to "[16e31808d86c1259ff984f5ccbc92b407931c64e](https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e)".



---

archive/issue_comments_371124.json:
```json
{
    "body": "**Changing commit** from \"[16e31808d86c1259ff984f5ccbc92b407931c64e](https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e)\" to \"[092ac74f8fe166c13d311e3243a6c33d7f99896a](https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a)\".",
    "created_at": "2018-01-08T16:12:48Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[16e31808d86c1259ff984f5ccbc92b407931c64e](https://github.com/sagemath/sagetrac-mirror/commit/16e31808d86c1259ff984f5ccbc92b407931c64e)" to "[092ac74f8fe166c13d311e3243a6c33d7f99896a](https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a)".



---

archive/issue_comments_371125.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a\">092ac74</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr></table>\n",
    "created_at": "2018-01-08T16:12:48Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a">092ac74</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr></table>




---

archive/issue_comments_371126.json:
```json
{
    "body": "<a id='comment:16'></a>\nThere are a few obvious doctest failures in `src/sage/rings/real_mpfr.pyx`. All should be easy to fix.",
    "created_at": "2018-01-08T18:30:55Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371126",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
There are a few obvious doctest failures in `src/sage/rings/real_mpfr.pyx`. All should be easy to fix.



---

archive/issue_comments_371127.json:
```json
{
    "body": "<a id='comment:17'></a>\nI am curious to know which failures you get.",
    "created_at": "2018-01-08T19:20:05Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371127",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:17'></a>
I am curious to know which failures you get.



---

archive/issue_comments_371128.json:
```json
{
    "body": "**Changing commit** from \"[092ac74f8fe166c13d311e3243a6c33d7f99896a](https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a)\" to \"[afc3b665878fcf151fa6ab46a6dd6bc97c73659b](https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b)\".",
    "created_at": "2018-01-09T08:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[092ac74f8fe166c13d311e3243a6c33d7f99896a](https://github.com/sagemath/sagetrac-mirror/commit/092ac74f8fe166c13d311e3243a6c33d7f99896a)" to "[afc3b665878fcf151fa6ab46a6dd6bc97c73659b](https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b)".



---

archive/issue_comments_371129.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b\">afc3b66</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>\n",
    "created_at": "2018-01-09T08:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b">afc3b66</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>




---

archive/issue_comments_371130.json:
```json
{
    "body": "<a id='comment:19'></a>\nI added a few fixes in the last commit. With this, all tests pass. So, this ticket is technically needs_review, modulo the fact that there is no MPC release yet...",
    "created_at": "2018-01-09T09:16:49Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371130",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
I added a few fixes in the last commit. With this, all tests pass. So, this ticket is technically needs_review, modulo the fact that there is no MPC release yet...



---

archive/issue_comments_371131.json:
```json
{
    "body": "<a id='comment:20'></a>\nin the last commit:\n\n> faithful rounding (currently experimental; not supported for every operation)\n\n\n\"not supported for every operation\" is not correct: it is supported, but not guaranteed correct for every operation.\n\nApart from that, I am ok with this commit.\n\nWe expect to release MPC 1.1 this week or next week.",
    "created_at": "2018-01-09T11:00:52Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371131",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:20'></a>
in the last commit:

> faithful rounding (currently experimental; not supported for every operation)


"not supported for every operation" is not correct: it is supported, but not guaranteed correct for every operation.

Apart from that, I am ok with this commit.

We expect to release MPC 1.1 this week or next week.



---

archive/issue_comments_371132.json:
```json
{
    "body": "**Changing commit** from \"[afc3b665878fcf151fa6ab46a6dd6bc97c73659b](https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b)\" to \"[19646bee87f9ad06e3a2cd88d26eae63313f76ac](https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac)\".",
    "created_at": "2018-01-09T11:17:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[afc3b665878fcf151fa6ab46a6dd6bc97c73659b](https://github.com/sagemath/sagetrac-mirror/commit/afc3b665878fcf151fa6ab46a6dd6bc97c73659b)" to "[19646bee87f9ad06e3a2cd88d26eae63313f76ac](https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac)".



---

archive/issue_comments_371133.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac\">19646be</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>\n",
    "created_at": "2018-01-09T11:17:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac">19646be</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>




---

archive/issue_comments_371134.json:
```json
{
    "body": "**Reviewer:** Paul Zimmermann",
    "created_at": "2018-01-09T11:24:59Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371134",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Paul Zimmermann



---

archive/issue_comments_371135.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [zimmerma](#comment%3A20):\n> \"not supported for every operation\" is not correct: it is supported, but not guaranteed correct for every operation.\n\n\nFixed.\n\n> Apart from that, I am ok with this commit.\n\n\nOK, I'm adding you as reviewer.",
    "created_at": "2018-01-09T11:24:59Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371135",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [zimmerma](#comment%3A20):
> "not supported for every operation" is not correct: it is supported, but not guaranteed correct for every operation.


Fixed.

> Apart from that, I am ok with this commit.


OK, I'm adding you as reviewer.



---

archive/issue_comments_371136.json:
```json
{
    "body": "<a id='comment:23'></a>\nMPC 1.1.0 is now available from https://ftp.gnu.org/gnu/mpc",
    "created_at": "2018-01-12T14:19:08Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371136",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:23'></a>
MPC 1.1.0 is now available from https://ftp.gnu.org/gnu/mpc



---

archive/issue_comments_371137.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n **Tarballs**: \n - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2\n-- https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz\n+- https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz\n - https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2\n``````\n",
    "created_at": "2018-01-12T14:33:22Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371137",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 **Tarballs**: 
 - http://www.mpfr.org/mpfr-current/mpfr-4.0.0.tar.bz2
-- https://members.loria.fr/PZimmermann/mpc-1.1-rc1.tar.gz
+- https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz
 - https://gforge.inria.fr/frs/download.php/file/37307/mpfi-1.5.2.tar.bz2
``````




---

archive/issue_comments_371138.json:
```json
{
    "body": "**Changing commit** from \"[19646bee87f9ad06e3a2cd88d26eae63313f76ac](https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac)\" to \"[3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)\".",
    "created_at": "2018-01-12T14:56:07Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[19646bee87f9ad06e3a2cd88d26eae63313f76ac](https://github.com/sagemath/sagetrac-mirror/commit/19646bee87f9ad06e3a2cd88d26eae63313f76ac)" to "[3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)".



---

archive/issue_comments_371139.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84e3a8a767cee1ced7f76c3c0ac17b5a26776a72\">84e3a8a</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a\">3c089ff</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>\n",
    "created_at": "2018-01-12T14:56:07Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84e3a8a767cee1ced7f76c3c0ac17b5a26776a72">84e3a8a</a></td><td><code>Upgrade MPFR, MPC and MPFI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a">3c089ff</a></td><td><code>Minor fixes for MPFR-4; support MPFR_RNDF</code></td></tr></table>




---

archive/issue_events_216143.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-12T14:57:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216143"
}
```



---

archive/issue_comments_371140.json:
```json
{
    "body": "<a id='comment:27'></a>\nall tests pass on quasar (ubuntu x86_64)",
    "created_at": "2018-01-12T15:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371140",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
all tests pass on quasar (ubuntu x86_64)



---

archive/issue_comments_371141.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"\".",
    "created_at": "2018-01-12T16:00:31Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371141",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "".



---

archive/issue_comments_371142.json:
```json
{
    "body": "<a id='comment:29'></a>\nI did:\n\n```\n$ git co u/jdemeyer/upgrade_to_mpfr_4_0_0\n$ git pull\n$ make build\n```\nand got an error:\n\n```\nERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mp\nfr/mpfr-4.0.0.tar.bz2'\nTraceback (most recent call last):\n  File \"/tmp/sage/build/bin/sage-download-file\", line 28, in <module>\n    run_safe()\n  File \"/tmp/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 118, in\n run_safe\n    run()\n  File \"/tmp/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in\n run\n    app.download_tarball(args.url_or_tarball, args.destination)\n  File \"/tmp/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in down\nload_tarball\n    tarball.download()\n  File \"/tmp/sage/build/bin/../sage_bootstrap/tarball.py\", line 161, in download\n    raise FileNotMirroredError('tarball does not exist on mirror network')\nsage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror ne\ntwork\n************************************************************************\nError downloading mpfr-4.0.0.tar.bz2\n```",
    "created_at": "2018-01-16T10:11:20Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371142",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:29'></a>
I did:

```
$ git co u/jdemeyer/upgrade_to_mpfr_4_0_0
$ git pull
$ make build
```
and got an error:

```
ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/mp
fr/mpfr-4.0.0.tar.bz2'
Traceback (most recent call last):
  File "/tmp/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/tmp/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 118, in
 run_safe
    run()
  File "/tmp/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in
 run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/tmp/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in down
load_tarball
    tarball.download()
  File "/tmp/sage/build/bin/../sage_bootstrap/tarball.py", line 161, in download
    raise FileNotMirroredError('tarball does not exist on mirror network')
sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror ne
twork
************************************************************************
Error downloading mpfr-4.0.0.tar.bz2
```



---

archive/issue_comments_371143.json:
```json
{
    "body": "<a id='comment:30'></a>\nYou need to manually download the 3 tarballs mentioned on this ticket and put them in the `upstream` directory in your Sage installation.",
    "created_at": "2018-01-16T10:13:43Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371143",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
You need to manually download the 3 tarballs mentioned on this ticket and put them in the `upstream` directory in your Sage installation.



---

archive/issue_events_216144.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2018-01-16T15:43:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216144"
}
```



---

archive/issue_events_216145.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2018-01-16T15:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216145"
}
```



---

archive/issue_comments_371144.json:
```json
{
    "body": "<a id='comment:31'></a>\nmodulo the fact that the patchbot is happy, I give a positive review.",
    "created_at": "2018-01-16T15:43:13Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371144",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:31'></a>
modulo the fact that the patchbot is happy, I give a positive review.



---

archive/issue_comments_371145.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_to_mpfr_4_0_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_mpfr_4_0_0)\" to \"[3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)\".",
    "created_at": "2018-01-18T18:09:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24353#issuecomment-371145",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_to_mpfr_4_0_0](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_mpfr_4_0_0)" to "[3c089ff224e709cc6ad647a123b8e06fe35d152a](https://github.com/sagemath/sagetrac-mirror/commit/3c089ff224e709cc6ad647a123b8e06fe35d152a)".



---

archive/issue_events_216146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216146"
}
```



---

archive/issue_events_216147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24353",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24353#event-216147"
}
```
