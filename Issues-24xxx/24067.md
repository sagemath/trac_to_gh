# Issue 24067: Call sympy_init() at sympy import

archive/issues_023830.json:
```json
{
    "assignees": [],
    "body": "`sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.\n\nWe should also revert the patch added in #24238.\n\nCC:  @jdemeyer @isuruf @infinity0 @egourgoulhon\n\nBranch/Commit: **[u/fbissey/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/24067) @ [`67e6156`](https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c)**\n\nStopgaps: **#24238**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24067_\n\n",
    "closed_at": "2021-08-26T02:08:43Z",
    "created_at": "2017-10-19T13:22:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Call sympy_init() at sympy import",
    "type": "issue",
    "updated_at": "2021-08-26T02:08:43Z",
    "url": "https://github.com/sagemath/sage/issues/24067",
    "user": "https://github.com/rwst"
}
```
`sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.

We should also revert the patch added in #24238.

CC:  @jdemeyer @isuruf @infinity0 @egourgoulhon

Branch/Commit: **[u/fbissey/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/24067) @ [`67e6156`](https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c)**

Stopgaps: **#24238**

Reviewer: **Fran√ßois Bissey**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/24067_





---

archive/issue_events_334085.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T13:22:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334085"
}
```



---

archive/issue_events_334086.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T13:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334086"
}
```



---

archive/issue_events_334087.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T13:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334087"
}
```



---

archive/issue_events_334088.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T13:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334088"
}
```



---

archive/issue_comments_363634.json:
```json
{
    "body": "Branch: **[u/rws/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24067)**",
    "created_at": "2017-10-19T14:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363634",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24067)**



---

archive/issue_comments_363635.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-sympy_init() enables conversion of SymPy objects. It is called with every initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any `import sympy`.\n+`sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.\n``````\n",
    "created_at": "2017-10-19T14:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363635",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-sympy_init() enables conversion of SymPy objects. It is called with every initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any `import sympy`.
+`sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.
``````




---

archive/issue_comments_363636.json:
```json
{
    "body": "Commit: **[`40b3432`](https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738)**",
    "created_at": "2017-10-19T14:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363636",
    "user": "https://github.com/rwst"
}
```

Commit: **[`40b3432`](https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738)**



---

archive/issue_comments_363637.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8215d37edd3eabc1eb881800e44210f2f77d64bc\"><code>8215d37</code></a></td><td><code>Merge branch 'develop' into tmp05</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a\"><code>7899ea9</code></a></td><td><code>20204: convert SymPy abstract functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f\"><code>b261ec3</code></a></td><td><code>23923: fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01\"><code>5010acf</code></a></td><td><code>Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5\"><code>14b1c52</code></a></td><td><code>20204: more doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8\"><code>9c4119a</code></a></td><td><code>16801: Conversion of psi(x,y) to/from SymPy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced\"><code>d5c60e3</code></a></td><td><code>24062: pkg version/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01\"><code>1cbc23e</code></a></td><td><code>24062: remove obsolote patches; adapt remaining</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c\"><code>94f359f</code></a></td><td><code>24062: doctest fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738\"><code>40b3432</code></a></td><td><code>24067: Call sympy_init() at sympy import</code></td></tr></table>\n",
    "created_at": "2017-10-19T14:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363637",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8215d37edd3eabc1eb881800e44210f2f77d64bc"><code>8215d37</code></a></td><td><code>Merge branch 'develop' into tmp05</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a"><code>7899ea9</code></a></td><td><code>20204: convert SymPy abstract functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f"><code>b261ec3</code></a></td><td><code>23923: fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01"><code>5010acf</code></a></td><td><code>Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5"><code>14b1c52</code></a></td><td><code>20204: more doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8"><code>9c4119a</code></a></td><td><code>16801: Conversion of psi(x,y) to/from SymPy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced"><code>d5c60e3</code></a></td><td><code>24062: pkg version/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01"><code>1cbc23e</code></a></td><td><code>24062: remove obsolote patches; adapt remaining</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c"><code>94f359f</code></a></td><td><code>24062: doctest fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738"><code>40b3432</code></a></td><td><code>24067: Call sympy_init() at sympy import</code></td></tr></table>




---

archive/issue_comments_363638.json:
```json
{
    "body": "Dependencies: **#24062**",
    "created_at": "2017-10-19T14:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363638",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#24062**



---

archive/issue_events_334089.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-19T14:19:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334089"
}
```



---

archive/issue_comments_363639.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2017-10-19T14:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363639",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_363640.json:
```json
{
    "body": "Changed branch from **[u/rws/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24067)** to **[u/jdemeyer/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/24067)**",
    "created_at": "2017-11-19T15:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363640",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/rws/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24067)** to **[u/jdemeyer/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/24067)**



---

archive/issue_comments_363641.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2017-11-19T15:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363641",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_363642.json:
```json
{
    "body": "Changed dependencies from **#24062** to none",
    "created_at": "2017-11-19T15:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363642",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24062** to none



---

archive/issue_comments_363643.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nRebased to 8.1.rc2 for easier reviewing.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216\"><code>a97c32f</code></a></td><td><code>24067: Call sympy_init() at sympy import</code></td></tr></table>\n",
    "created_at": "2017-11-19T15:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363643",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Rebased to 8.1.rc2 for easier reviewing.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216"><code>a97c32f</code></a></td><td><code>24067: Call sympy_init() at sympy import</code></td></tr></table>




---

archive/issue_comments_363644.json:
```json
{
    "body": "Changed commit from **[`40b3432`](https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738)** to **[`a97c32f`](https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216)**",
    "created_at": "2017-11-19T15:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363644",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`40b3432`](https://github.com/sagemath/sagetrac-mirror/commit/40b3432ff5203b94428f482cf0b51360d9edb738)** to **[`a97c32f`](https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216)**



---

archive/issue_comments_363645.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d4f31081c88d16a6b89bcfea09805b675413b7f\"><code>0d4f310</code></a></td><td><code>Remove explicit sympy_init() calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b\"><code>893b03d</code></a></td><td><code>Check that sympy is not imported</code></td></tr></table>\n",
    "created_at": "2017-11-19T16:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363645",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d4f31081c88d16a6b89bcfea09805b675413b7f"><code>0d4f310</code></a></td><td><code>Remove explicit sympy_init() calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b"><code>893b03d</code></a></td><td><code>Check that sympy is not imported</code></td></tr></table>




---

archive/issue_comments_363646.json:
```json
{
    "body": "Changed commit from **[`a97c32f`](https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216)** to **[`893b03d`](https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b)**",
    "created_at": "2017-11-19T16:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a97c32f`](https://github.com/sagemath/sagetrac-mirror/commit/a97c32f65ea9f194abfb801595ffc6a89c825216)** to **[`893b03d`](https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b)**



---

archive/issue_comments_363647.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPositive review to your first commit. I added two follow-up commits, please review.",
    "created_at": "2017-11-19T17:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363647",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Positive review to your first commit. I added two follow-up commits, please review.



---

archive/issue_comments_363648.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI am concerned that the sympy patch cannot be sent upstream as is. It makes sage a dependency of sympy for it to even start. I doubt that's acceptable.",
    "created_at": "2017-11-19T18:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363648",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

I am concerned that the sympy patch cannot be sent upstream as is. It makes sage a dependency of sympy for it to even start. I doubt that's acceptable.



---

archive/issue_comments_363649.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat about just adding `sympy_init()` to the end of the interface file?",
    "created_at": "2017-11-19T21:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363649",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

What about just adding `sympy_init()` to the end of the interface file?



---

archive/issue_comments_363650.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tscrim](#comment:8):\n> What about just adding `sympy_init()` to the end of the interface file?\n\nI would favor an all in sage solution to this. I am not against a push in sympy upstream but it has to be acceptable to them and that will certainly not be.",
    "created_at": "2017-11-19T21:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363650",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tscrim](#comment:8):
> What about just adding `sympy_init()` to the end of the interface file?

I would favor an all in sage solution to this. I am not against a push in sympy upstream but it has to be acceptable to them and that will certainly not be.



---

archive/issue_comments_363651.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kiwifb](#comment:7):\n> I am concerned that the sympy patch cannot be sent upstream as is. It makes sage a dependency of sympy for it to even start. I doubt that's acceptable.\n\nTo make it work the `__init__` file needs to know if it is imported from sage. I'm no Python expert but I doubt that's possible. A solution to the design problem would be not to have `_sage_` member functions but a global `sage(...)` method.\n\nAdditions LGTM.",
    "created_at": "2017-11-20T07:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363651",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kiwifb](#comment:7):
> I am concerned that the sympy patch cannot be sent upstream as is. It makes sage a dependency of sympy for it to even start. I doubt that's acceptable.

To make it work the `__init__` file needs to know if it is imported from sage. I'm no Python expert but I doubt that's possible. A solution to the design problem would be not to have `_sage_` member functions but a global `sage(...)` method.

Additions LGTM.



---

archive/issue_events_334090.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-20T07:47:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334090"
}
```



---

archive/issue_events_334091.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-20T07:47:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334091"
}
```



---

archive/issue_comments_363652.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Ralf Stephan**",
    "created_at": "2017-11-20T07:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363652",
    "user": "https://github.com/rwst"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Ralf Stephan**



---

archive/issue_comments_363653.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWhat about guarding it with a `try: expect:` block so it can start gracefully if sage is not present (and therefore not used).",
    "created_at": "2017-11-20T08:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363653",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

What about guarding it with a `try: expect:` block so it can start gracefully if sage is not present (and therefore not used).



---

archive/issue_comments_363654.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nfbissey: I am assuming that this ticket would only be merged in some 8.2.beta of Sage. Since this branch here does solve the immediate problem of docbuilding, I suggest to merge this patch as-is and in the mean time work on a solution for upstream.",
    "created_at": "2017-11-20T08:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363654",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

fbissey: I am assuming that this ticket would only be merged in some 8.2.beta of Sage. Since this branch here does solve the immediate problem of docbuilding, I suggest to merge this patch as-is and in the mean time work on a solution for upstream.



---

archive/issue_comments_363655.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment:12):\n> fbissey: I am assuming that this ticket would only be merged in some 8.2.beta of Sage. Since this branch here does solve the immediate problem of docbuilding, I suggest to merge this patch as-is and in the mean time work on a solution for upstream.\n\nI was hoping a more conciliatory attitude and hadn't removed the positive review. This is now back to need_work. This is just un-acceptable to sage-on-distro this close to release. \n\nWe would have to make our own version of the patch that does the \"right thing\" (TM) instead of a \"sloppy job\" (TM) just because we can and feel in too much of a hurry for 3 more lines of code, anyway so let's do it right now instead.",
    "created_at": "2017-11-20T08:54:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363655",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment:12):
> fbissey: I am assuming that this ticket would only be merged in some 8.2.beta of Sage. Since this branch here does solve the immediate problem of docbuilding, I suggest to merge this patch as-is and in the mean time work on a solution for upstream.

I was hoping a more conciliatory attitude and hadn't removed the positive review. This is now back to need_work. This is just un-acceptable to sage-on-distro this close to release. 

We would have to make our own version of the patch that does the "right thing" (TM) instead of a "sloppy job" (TM) just because we can and feel in too much of a hurry for 3 more lines of code, anyway so let's do it right now instead.



---

archive/issue_comments_363656.json:
```json
{
    "body": "Changed commit from **[`893b03d`](https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b)** to **[`67e6156`](https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c)**",
    "created_at": "2017-11-20T09:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363656",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`893b03d`](https://github.com/sagemath/sagetrac-mirror/commit/893b03d4d00ea6566648ed315569a46f4096551b)** to **[`67e6156`](https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c)**



---

archive/issue_events_334092.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-11-20T09:24:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334092"
}
```



---

archive/issue_events_334093.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-11-20T09:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334093"
}
```



---

archive/issue_comments_363657.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c\"><code>67e6156</code></a></td><td><code>Better patch for sympy, that doesn't force sage as a runtime dependency.</code></td></tr></table>\n",
    "created_at": "2017-11-20T09:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363657",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67e6156afccd12253c2c330bff6cb9fdeb11245c"><code>67e6156</code></a></td><td><code>Better patch for sympy, that doesn't force sage as a runtime dependency.</code></td></tr></table>




---

archive/issue_comments_363658.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/24067)** to **[u/fbissey/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/24067)**",
    "created_at": "2017-11-20T09:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363658",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/jdemeyer/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/24067)** to **[u/fbissey/24067](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/24067)**



---

archive/issue_events_334094.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-11-20T09:25:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334094"
}
```



---

archive/issue_events_334095.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-11-20T09:25:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334095"
}
```



---

archive/issue_comments_363659.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n@kiwifb, that last commit, while much better than what was before, will still force all users of sympy to import sage into their python program, as long as sage is installed.\n\nA better method might be something like this instead:\n\n```\nif 'sage.XXXX' in sys.modules:\n    from sage.interfaces.sympy import sympy_init\n    sympy_init()\n```\n\nwhere XXXX is some module that sage always imports. So the patch is only activated if sage is already imported.\n\nThis might be more acceptable to upstream as well.",
    "created_at": "2017-11-20T09:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363659",
    "user": "https://github.com/infinity0"
}
```

<div id="comment:16" align="right">comment:16</div>

@kiwifb, that last commit, while much better than what was before, will still force all users of sympy to import sage into their python program, as long as sage is installed.

A better method might be something like this instead:

```
if 'sage.XXXX' in sys.modules:
    from sage.interfaces.sympy import sympy_init
    sympy_init()
```

where XXXX is some module that sage always imports. So the patch is only activated if sage is already imported.

This might be more acceptable to upstream as well.



---

archive/issue_comments_363660.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n@infinity0 I agree that is not perfect - for exactly the reason you mention - but that's the best I could come up with without more complication. Feel free to improve it, that's one of the reason I called other packagers on this ticket.",
    "created_at": "2017-11-20T09:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363660",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

@infinity0 I agree that is not perfect - for exactly the reason you mention - but that's the best I could come up with without more complication. Feel free to improve it, that's one of the reason I called other packagers on this ticket.



---

archive/issue_comments_363661.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSo what about using `if ... in sys.modules`?\n\nIf you additionally need to support the use-case where a third-party program/library really has to import sympy *then later* import sage (I can't imagine why), then the `if ... in sys.modules` logic needs to also be added to a sage module but in reverse - i.e. check if sympy is already imported, and activate the patch if so.\n\nIn any case, we're unlikely to patch sympy in Debian like this, unless they indicate that they would already accept it. (Someone else maintains it, the situation is outside of my control.) Could you/someone else file a upstream ticket *before* releasing this in Sage?",
    "created_at": "2017-11-20T09:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363661",
    "user": "https://github.com/infinity0"
}
```

<div id="comment:18" align="right">comment:18</div>

So what about using `if ... in sys.modules`?

If you additionally need to support the use-case where a third-party program/library really has to import sympy *then later* import sage (I can't imagine why), then the `if ... in sys.modules` logic needs to also be added to a sage module but in reverse - i.e. check if sympy is already imported, and activate the patch if so.

In any case, we're unlikely to patch sympy in Debian like this, unless they indicate that they would already accept it. (Someone else maintains it, the situation is outside of my control.) Could you/someone else file a upstream ticket *before* releasing this in Sage?



---

archive/issue_comments_363662.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@infinity0](#comment:18):\n> So what about using `if ... in sys.modules`?\n> \n\nI can make that change, but I am calling it a night :)\n\n> If you additionally need to support the use-case where a third-party program/library really has to import sympy *then later* import sage (I can't imagine why), then the `if ... in sys.modules` logic needs to also be added to a sage module but in reverse - i.e. check if sympy is already imported, and activate the patch if so.\n> \n> In any case, we're unlikely to patch sympy in Debian like this, unless they indicate that they would already accept it. (Someone else maintains it, the situation is outside of my control.) Could you/someone else file a upstream ticket *before* releasing this in Sage?\n\n+1, @rwst do you have an upstream issue for this? There definitely should be.",
    "created_at": "2017-11-20T09:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363662",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@infinity0](#comment:18):
> So what about using `if ... in sys.modules`?
> 

I can make that change, but I am calling it a night :)

> If you additionally need to support the use-case where a third-party program/library really has to import sympy *then later* import sage (I can't imagine why), then the `if ... in sys.modules` logic needs to also be added to a sage module but in reverse - i.e. check if sympy is already imported, and activate the patch if so.
> 
> In any case, we're unlikely to patch sympy in Debian like this, unless they indicate that they would already accept it. (Someone else maintains it, the situation is outside of my control.) Could you/someone else file a upstream ticket *before* releasing this in Sage?

+1, @rwst do you have an upstream issue for this? There definitely should be.



---

archive/issue_comments_363663.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kiwifb](#comment:19):\n> +1, @rwst do you have an upstream issue for this? There definitely should be.\n\nI'll open one if this ticket has code that all agree on. Set at least `needs review` so we have the patchbots.",
    "created_at": "2017-11-20T10:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363663",
    "user": "https://github.com/rwst"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kiwifb](#comment:19):
> +1, @rwst do you have an upstream issue for this? There definitely should be.

I'll open one if this ticket has code that all agree on. Set at least `needs review` so we have the patchbots.



---

archive/issue_comments_363664.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@kiwifb](#comment:13):\n> This is just un-acceptable to sage-on-distro\n\nEven for a beta version of Sage? I agree that it would be unacceptable in a released version.",
    "created_at": "2017-11-20T10:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363664",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@kiwifb](#comment:13):
> This is just un-acceptable to sage-on-distro

Even for a beta version of Sage? I agree that it would be unacceptable in a released version.



---

archive/issue_comments_363665.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIf we're going to submit a patch upstream, we shouldn't rush.",
    "created_at": "2017-11-20T11:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363665",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

If we're going to submit a patch upstream, we shouldn't rush.



---

archive/issue_events_334096.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-20T11:00:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334096"
}
```



---

archive/issue_events_334097.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-20T11:00:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334097"
}
```



---

archive/issue_comments_363666.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n `sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.\n+\n+We should also revert the patch added in #24238.\n``````\n",
    "created_at": "2017-11-20T11:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363666",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 `sympy_init()` enables conversion of SymPy objects. It is called with the first initialization of a `SympyConverter`, i.e. with `Expression._sympy_()`. Better is to only call it once with any import of SymPy.
+
+We should also revert the patch added in #24238.
``````




---

archive/issue_comments_363667.json:
```json
{
    "body": "Stopgaps: **#24238**",
    "created_at": "2017-11-20T11:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363667",
    "user": "https://github.com/jdemeyer"
}
```

Stopgaps: **#24238**



---

archive/issue_comments_363668.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:21):\n> Replying to [@kiwifb](#comment:13):\n> > This is just un-acceptable to sage-on-distro\n\n> \n> Even for a beta version of Sage? I agree that it would be unacceptable in a released version.\n\nCome on. We are at rc2. We are just ironing bugs, that would end up in the released 8.1 unless you moved the milestone to 8.2.",
    "created_at": "2017-11-20T19:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363668",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:21):
> Replying to [@kiwifb](#comment:13):
> > This is just un-acceptable to sage-on-distro

> 
> Even for a beta version of Sage? I agree that it would be unacceptable in a released version.

Come on. We are at rc2. We are just ironing bugs, that would end up in the released 8.1 unless you moved the milestone to 8.2.



---

archive/issue_comments_363669.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI would be surprised if this was positively reviewed it would make it into 8.1 (unless we set it as a blocker).",
    "created_at": "2017-11-20T23:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363669",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

I would be surprised if this was positively reviewed it would make it into 8.1 (unless we set it as a blocker).



---

archive/issue_comments_363670.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nBecause of the troubles building the documentation reported on sage-release, one of #24238 or this ticket has to be a blocker in my opinion. I came to this ticket after Jeroen commented on #24238 that this ticket should be the one with the fix.",
    "created_at": "2017-11-20T23:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363670",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Because of the troubles building the documentation reported on sage-release, one of #24238 or this ticket has to be a blocker in my opinion. I came to this ticket after Jeroen commented on #24238 that this ticket should be the one with the fix.



---

archive/issue_comments_363671.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe third option would be a revert ticket for the manifolds changes that introduced it.",
    "created_at": "2017-11-21T04:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363671",
    "user": "https://github.com/rwst"
}
```

<div id="comment:27" align="right">comment:27</div>

The third option would be a revert ticket for the manifolds changes that introduced it.



---

archive/issue_comments_363672.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@kiwifb](#comment:26):\n> Because of the troubles building the documentation reported on sage-release, one of #24238 or this ticket has to be a blocker in my opinion. I came to this ticket after Jeroen commented on #24238 that this ticket should be the one with the fix.\n\n#24238 is a blocker. That ticket is also simple enough that it shouldn't cause problems.",
    "created_at": "2017-11-21T08:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363672",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@kiwifb](#comment:26):
> Because of the troubles building the documentation reported on sage-release, one of #24238 or this ticket has to be a blocker in my opinion. I came to this ticket after Jeroen commented on #24238 that this ticket should be the one with the fix.

#24238 is a blocker. That ticket is also simple enough that it shouldn't cause problems.



---

archive/issue_comments_363673.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@kiwifb](#comment:24):\n> We are just ironing bugs, that would end up in the released 8.1 unless you moved the milestone to 8.2.\n\nNo. I'm pretty sure that the release manager only merges \"blocker\" tickets once an rc has been released. The whole point of an \"rc\" is that it should be close to a release and you don't want to merge random tickets at that point.\n\nAnyway, that doesn't matter anymore for this ticket.",
    "created_at": "2017-11-21T08:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363673",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@kiwifb](#comment:24):
> We are just ironing bugs, that would end up in the released 8.1 unless you moved the milestone to 8.2.

No. I'm pretty sure that the release manager only merges "blocker" tickets once an rc has been released. The whole point of an "rc" is that it should be close to a release and you don't want to merge random tickets at that point.

Anyway, that doesn't matter anymore for this ticket.



---

archive/issue_comments_363674.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to none",
    "created_at": "2021-07-06T02:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363674",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Ralf Stephan** to none



---

archive/issue_comments_363675.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer, Ralf Stephan** to none",
    "created_at": "2021-07-06T02:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363675",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Jeroen Demeyer, Ralf Stephan** to none



---

archive/issue_events_334098.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T02:46:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334098"
}
```



---

archive/issue_events_334099.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T02:46:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334099"
}
```



---

archive/issue_events_334100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T02:46:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334100"
}
```



---

archive/issue_events_334101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T02:46:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334101"
}
```



---

archive/issue_events_334102.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T02:46:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334102"
}
```



---

archive/issue_comments_363676.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nTime to close this bizarre ticket",
    "created_at": "2021-07-06T02:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363676",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Time to close this bizarre ticket



---

archive/issue_comments_363677.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI am not remembering much about it but obviously it didn't make the cut then.",
    "created_at": "2021-07-06T04:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363677",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

I am not remembering much about it but obviously it didn't make the cut then.



---

archive/issue_comments_363678.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2021-07-06T04:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24067#issuecomment-363678",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_334103.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-07-06T04:02:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334103"
}
```



---

archive/issue_events_334104.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2021-07-06T04:02:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334104"
}
```



---

archive/issue_events_334105.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334105"
}
```



---

archive/issue_events_334106.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24067",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24067#event-334106"
}
```
