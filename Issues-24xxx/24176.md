# Issue 24176: ConditionSet, ImageSet: Implement formal Set comprehension

archive/issues_023939.json:
```json
{
    "body": "In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n\nThis set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n\nRelated: `ImageManifoldSubset` (#31653)\n\n\nCC:  @tscrim @mantepse\n\nReviewer: Travis Scrimshaw\n\nDependencies: #24171, #32013, #32089, #32121\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/24176\n\n",
    "closed_at": "2022-05-11T02:14:43Z",
    "created_at": "2017-11-08T16:54:30Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "ConditionSet, ImageSet: Implement formal Set comprehension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24176",
    "user": "https://github.com/rwst"
}
```
In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.

This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)

Related: `ImageManifoldSubset` (#31653)


CC:  @tscrim @mantepse

Reviewer: Travis Scrimshaw

Dependencies: #24171, #32013, #32089, #32121

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/24176





---

archive/issue_comments_457375.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#24171\"",
    "created_at": "2017-11-08T16:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457375",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "#24171"



---

archive/issue_comments_457376.json:
```json
{
    "body": "Changing dependencies from \"#24171\" to \"#24171, pynac-0.7.13\"",
    "created_at": "2017-11-10T08:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457376",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#24171" to "#24171, pynac-0.7.13"



---

archive/issue_comments_457377.json:
```json
{
    "body": "<a id='comment:2'></a>\nAccepting lists requires the function being a `GinacFunction`.",
    "created_at": "2017-11-10T08:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457377",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
Accepting lists requires the function being a `GinacFunction`.



---

archive/issue_comments_457378.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/implement_formal_set_comprehension\"",
    "created_at": "2017-11-13T16:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457378",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/implement_formal_set_comprehension"



---

archive/issue_comments_457379.json:
```json
{
    "body": "Changing commit from \"\" to \"9c77312e611f2d9fe5643e3e7a5bff51e511aa87\"",
    "created_at": "2017-11-21T16:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457379",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "9c77312e611f2d9fe5643e3e7a5bff51e511aa87"



---

archive/issue_comments_457380.json:
```json
{
    "body": "Changing dependencies from \"#24171, pynac-0.7.13\" to \"#24171, #24262\"",
    "created_at": "2017-11-21T16:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457380",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#24171, pynac-0.7.13" to "#24171, #24262"



---

archive/issue_comments_457381.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[669ea22](https://git.sagemath.org/sage.git/commit?id=669ea22318ab33f23f727626eb30e59fa138d253)|`24171: Formal set membership function`|\n|[34c9773](https://git.sagemath.org/sage.git/commit?id=34c977315e33d373ca8e622f5d502f4d7554c0ff)|`24171: make RealSet inherit from Set_generic`|\n|[af82717](https://git.sagemath.org/sage.git/commit?id=af82717b1bfeffbe6fc972686882916b0525b149)|`24171: remove RealSet import; SR set coercion doctests`|\n|[592ce87](https://git.sagemath.org/sage.git/commit?id=592ce8745028ec0659b952e872dfff0a85ef5a5d)|`24171: Py3 fixes`|\n|[82b7c6f](https://git.sagemath.org/sage.git/commit?id=82b7c6f5025845daaf9cedd418cec549945b2038)|`Merge branch 'u/rws/formal_set_membership_function' of git://trac.sagemath.org/sage into t/24176/implement_formal_set_comprehension`|\n|[ae29895](https://git.sagemath.org/sage.git/commit?id=ae29895fd82a9c8a12485c4362445ba80c54a6bb)|`24176: check set argument of element_of()`|\n|[9c77312](https://git.sagemath.org/sage.git/commit?id=9c77312e611f2d9fe5643e3e7a5bff51e511aa87)|`24176: Implement formal Set comprehension`|",
    "created_at": "2017-11-21T16:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457381",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[669ea22](https://git.sagemath.org/sage.git/commit?id=669ea22318ab33f23f727626eb30e59fa138d253)|`24171: Formal set membership function`|
|[34c9773](https://git.sagemath.org/sage.git/commit?id=34c977315e33d373ca8e622f5d502f4d7554c0ff)|`24171: make RealSet inherit from Set_generic`|
|[af82717](https://git.sagemath.org/sage.git/commit?id=af82717b1bfeffbe6fc972686882916b0525b149)|`24171: remove RealSet import; SR set coercion doctests`|
|[592ce87](https://git.sagemath.org/sage.git/commit?id=592ce8745028ec0659b952e872dfff0a85ef5a5d)|`24171: Py3 fixes`|
|[82b7c6f](https://git.sagemath.org/sage.git/commit?id=82b7c6f5025845daaf9cedd418cec549945b2038)|`Merge branch 'u/rws/formal_set_membership_function' of git://trac.sagemath.org/sage into t/24176/implement_formal_set_comprehension`|
|[ae29895](https://git.sagemath.org/sage.git/commit?id=ae29895fd82a9c8a12485c4362445ba80c54a6bb)|`24176: check set argument of element_of()`|
|[9c77312](https://git.sagemath.org/sage.git/commit?id=9c77312e611f2d9fe5643e3e7a5bff51e511aa87)|`24176: Implement formal Set comprehension`|



---

archive/issue_comments_457382.json:
```json
{
    "body": "Changing branch from \"u/rws/implement_formal_set_comprehension\" to \"u/rws/24176\"",
    "created_at": "2017-12-14T08:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457382",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/implement_formal_set_comprehension" to "u/rws/24176"



---

archive/issue_comments_457383.json:
```json
{
    "body": "Changing branch from \"u/rws/24176\" to \"u/rws/implement_formal_set_comprehension\"",
    "created_at": "2017-12-14T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457383",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/24176" to "u/rws/implement_formal_set_comprehension"



---

archive/issue_comments_457384.json:
```json
{
    "body": "Changing dependencies from \"#24171, #24262\" to \"#24171, #24329\"",
    "created_at": "2017-12-14T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457384",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#24171, #24262" to "#24171, #24329"



---

archive/issue_comments_457385.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-12-14T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457385",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_457386.json:
```json
{
    "body": "Changing branch from \"u/rws/implement_formal_set_comprehension\" to \"u/mkoeppe/implement_formal_set_comprehension\"",
    "created_at": "2021-06-09T03:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457386",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/rws/implement_formal_set_comprehension" to "u/mkoeppe/implement_formal_set_comprehension"



---

archive/issue_comments_457387.json:
```json
{
    "body": "Changing commit from \"9c77312e611f2d9fe5643e3e7a5bff51e511aa87\" to \"ec393090edb11c220c0e0e39529445015a00623d\"",
    "created_at": "2021-06-09T03:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457387",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "9c77312e611f2d9fe5643e3e7a5bff51e511aa87" to "ec393090edb11c220c0e0e39529445015a00623d"



---

archive/issue_comments_457388.json:
```json
{
    "body": "Changing dependencies from \"#24171, #24329\" to \"#24171\"",
    "created_at": "2021-06-09T03:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457388",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#24171, #24329" to "#24171"



---

archive/issue_events_061294.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-09T03:04:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61294"
}
```



---

archive/issue_comments_457389.json:
```json
{
    "body": "<a id='comment:8'></a>\nRebased on top of rebased #24171\n\n---\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[72565f2](https://git.sagemath.org/sage.git/commit?id=72565f2720115475272c030db26b1144b87377bb)|`24171: Formal set membership function`|\n|[71bbf38](https://git.sagemath.org/sage.git/commit?id=71bbf382e0727c416063e2b40bbdbd08fba92495)|`24171: Formal set membership function`|\n|[6811a76](https://git.sagemath.org/sage.git/commit?id=6811a7650d4e0123558d098fdf19702e94b60003)|`24171: make RealSet inherit from Set_generic`|\n|[0a66f78](https://git.sagemath.org/sage.git/commit?id=0a66f78faab0c7374477e8b1f5f43746ec34fbc3)|`24171: remove RealSet import; SR set coercion doctests`|\n|[e35349a](https://git.sagemath.org/sage.git/commit?id=e35349a3d953508aba3af719042797e5c79346f3)|`24171: Py3 fixes`|\n|[26ef67d](https://git.sagemath.org/sage.git/commit?id=26ef67d62371f25067d24f573ec5b8184557dc91)|`24176: check set argument of element_of()`|\n|[ec39309](https://git.sagemath.org/sage.git/commit?id=ec393090edb11c220c0e0e39529445015a00623d)|`24176: Implement formal Set comprehension`|",
    "created_at": "2021-06-09T03:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457389",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Rebased on top of rebased #24171

---
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[72565f2](https://git.sagemath.org/sage.git/commit?id=72565f2720115475272c030db26b1144b87377bb)|`24171: Formal set membership function`|
|[71bbf38](https://git.sagemath.org/sage.git/commit?id=71bbf382e0727c416063e2b40bbdbd08fba92495)|`24171: Formal set membership function`|
|[6811a76](https://git.sagemath.org/sage.git/commit?id=6811a7650d4e0123558d098fdf19702e94b60003)|`24171: make RealSet inherit from Set_generic`|
|[0a66f78](https://git.sagemath.org/sage.git/commit?id=0a66f78faab0c7374477e8b1f5f43746ec34fbc3)|`24171: remove RealSet import; SR set coercion doctests`|
|[e35349a](https://git.sagemath.org/sage.git/commit?id=e35349a3d953508aba3af719042797e5c79346f3)|`24171: Py3 fixes`|
|[26ef67d](https://git.sagemath.org/sage.git/commit?id=26ef67d62371f25067d24f573ec5b8184557dc91)|`24176: check set argument of element_of()`|
|[ec39309](https://git.sagemath.org/sage.git/commit?id=ec393090edb11c220c0e0e39529445015a00623d)|`24176: Implement formal Set comprehension`|



---

archive/issue_comments_457390.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n|[51c8152](https://git.sagemath.org/sage.git/commit/?id=51c81526f88eb37462cf604d00a1cff2a029a7a7)|`Merge branch 't/31877/refine_category_of_realset' into t/24171/set-membership-rebased`|\n|[5e623bb](https://git.sagemath.org/sage.git/commit/?id=5e623bb508d45a0ac79538c93bc115562b6269e0)|`RealSet.is_finite: Remove, inherited from category`|\n|[7d19916](https://git.sagemath.org/sage.git/commit/?id=7d19916c0fbf2bf76054401df372fbedde7cdbb6)|`Do not use QQ.completion(oo,oo) - not implemented`|\n|[9b4e224](https://git.sagemath.org/sage.git/commit/?id=9b4e2246708b683b3bbcee95eef1a96223a250c3)|`24176: check set argument of element_of()`|\n|[5310e04](https://git.sagemath.org/sage.git/commit/?id=5310e04bae60c574eafe491ebcea366e57513822)|`Function_elementof: Remove use of is_Set`|\n|[46d9795](https://git.sagemath.org/sage.git/commit/?id=46d9795d4ac58ab82e6116dfb8b661050cc8931d)|`24171: Formal set membership function`|\n|[6995d1e](https://git.sagemath.org/sage.git/commit/?id=6995d1ea0bab1ca2bdb412a00fa07ead947ebaa9)|`24171: make RealSet inherit from Set_generic`|\n|[a41c5fc](https://git.sagemath.org/sage.git/commit/?id=a41c5fc0fe673f1451cca321117222735f9bd8e7)|`24171: remove RealSet import; SR set coercion doctests`|\n|[2a9c49a](https://git.sagemath.org/sage.git/commit/?id=2a9c49a20c1e3714f073ffeaaab71c00afb5a415)|`24171: Py3 fixes`|\n|[24789ba](https://git.sagemath.org/sage.git/commit/?id=24789baf9f77ae75de9500085d196ad0a322aed5)|`24176: Implement formal Set comprehension`|",
    "created_at": "2021-06-09T03:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
|[51c8152](https://git.sagemath.org/sage.git/commit/?id=51c81526f88eb37462cf604d00a1cff2a029a7a7)|`Merge branch 't/31877/refine_category_of_realset' into t/24171/set-membership-rebased`|
|[5e623bb](https://git.sagemath.org/sage.git/commit/?id=5e623bb508d45a0ac79538c93bc115562b6269e0)|`RealSet.is_finite: Remove, inherited from category`|
|[7d19916](https://git.sagemath.org/sage.git/commit/?id=7d19916c0fbf2bf76054401df372fbedde7cdbb6)|`Do not use QQ.completion(oo,oo) - not implemented`|
|[9b4e224](https://git.sagemath.org/sage.git/commit/?id=9b4e2246708b683b3bbcee95eef1a96223a250c3)|`24176: check set argument of element_of()`|
|[5310e04](https://git.sagemath.org/sage.git/commit/?id=5310e04bae60c574eafe491ebcea366e57513822)|`Function_elementof: Remove use of is_Set`|
|[46d9795](https://git.sagemath.org/sage.git/commit/?id=46d9795d4ac58ab82e6116dfb8b661050cc8931d)|`24171: Formal set membership function`|
|[6995d1e](https://git.sagemath.org/sage.git/commit/?id=6995d1ea0bab1ca2bdb412a00fa07ead947ebaa9)|`24171: make RealSet inherit from Set_generic`|
|[a41c5fc](https://git.sagemath.org/sage.git/commit/?id=a41c5fc0fe673f1451cca321117222735f9bd8e7)|`24171: remove RealSet import; SR set coercion doctests`|
|[2a9c49a](https://git.sagemath.org/sage.git/commit/?id=2a9c49a20c1e3714f073ffeaaab71c00afb5a415)|`24171: Py3 fixes`|
|[24789ba](https://git.sagemath.org/sage.git/commit/?id=24789baf9f77ae75de9500085d196ad0a322aed5)|`24176: Implement formal Set comprehension`|



---

archive/issue_comments_457391.json:
```json
{
    "body": "Changing commit from \"ec393090edb11c220c0e0e39529445015a00623d\" to \"24789baf9f77ae75de9500085d196ad0a322aed5\"",
    "created_at": "2021-06-09T03:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec393090edb11c220c0e0e39529445015a00623d" to "24789baf9f77ae75de9500085d196ad0a322aed5"



---

archive/issue_comments_457392.json:
```json
{
    "body": "<a id='comment:10'></a>\nRebased on top of updated #24171, which cherry-picked 1 commit from here.\n\nNot sure about the changes on this ticket marked 24171. They are either from a newer or older version of 24171.",
    "created_at": "2021-06-09T04:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457392",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Rebased on top of updated #24171, which cherry-picked 1 commit from here.

Not sure about the changes on this ticket marked 24171. They are either from a newer or older version of 24171.



---

archive/issue_comments_457393.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe fix to `RealSet.__bool__` in 6995d1e/2a9c49a can go to #31941 (Make empty `RealSet` false).\n\nUnclear to me whether 6995d1e (make `RealSet` inherit from `Set_generic`) should be done",
    "created_at": "2021-06-09T04:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457393",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
The fix to `RealSet.__bool__` in 6995d1e/2a9c49a can go to #31941 (Make empty `RealSet` false).

Unclear to me whether 6995d1e (make `RealSet` inherit from `Set_generic`) should be done



---

archive/issue_comments_457394.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's imageset is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n+In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n+\n+This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n+\n+\n``````\n",
    "created_at": "2021-06-10T02:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457394",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's imageset is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.
+In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.
+
+This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)
+
+
``````




---

archive/issue_comments_457395.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n \n+Related: `ImageManifoldSubset` (#31653)\n \n``````\n",
    "created_at": "2021-06-10T02:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457395",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)
 
+Related: `ImageManifoldSubset` (#31653)
 
``````




---

archive/issue_comments_457396.json:
```json
{
    "body": "<a id='comment:14'></a>\nI think the approach on the current branch may be tied a bit too closely to `SR` functions.\n\nI think it's better to first implement:\n\n- `ImageSubset` (as an abstract subobject of the codomain) for arbitrary `Map`s -- this would be a generalization of `ImageManifoldSubset` (#31653). No relation to `SR` (but by relaxing the code from #24171 that only allows some sets to be coerced to `SR`, one would be able to coerce it to `SR`).\n\n- `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.",
    "created_at": "2021-06-10T03:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457396",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
I think the approach on the current branch may be tied a bit too closely to `SR` functions.

I think it's better to first implement:

- `ImageSubset` (as an abstract subobject of the codomain) for arbitrary `Map`s -- this would be a generalization of `ImageManifoldSubset` (#31653). No relation to `SR` (but by relaxing the code from #24171 that only allows some sets to be coerced to `SR`, one would be able to coerce it to `SR`).

- `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.



---

archive/issue_comments_457397.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mkoeppe](#comment%3A14):\n> - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.\n\n\nmore precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)",
    "created_at": "2021-06-19T03:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457397",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [mkoeppe](#comment%3A14):
> - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.


more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)



---

archive/issue_comments_457398.json:
```json
{
    "body": "Changing dependencies from \"#24171\" to \"#24171, #32013\"",
    "created_at": "2021-06-20T20:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457398",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#24171" to "#24171, #32013"



---

archive/issue_comments_457399.json:
```json
{
    "body": "Changing dependencies from \"#24171, #32013\" to \"#24171, #32013, #32089\"",
    "created_at": "2021-07-02T02:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457399",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#24171, #32013" to "#24171, #32013, #32089"



---

archive/issue_comments_457400.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mkoeppe](#comment%3A16):\n> Replying to [mkoeppe](#comment%3A14):\n> > - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.\n \n> \n> more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)\n\n\nThis is now implemented in #32089.",
    "created_at": "2021-07-02T02:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457400",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [mkoeppe](#comment%3A16):
> Replying to [mkoeppe](#comment%3A14):
> > - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.
 
> 
> more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)


This is now implemented in #32089.



---

archive/issue_comments_457401.json:
```json
{
    "body": "<a id='comment:19'></a>\n`ImageSet` is essentially the same as the (deprecated?) `sage.combinat.combinat.MapCombinatorialClass`, except that we would not insist that the map is injective.",
    "created_at": "2021-07-04T02:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457401",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
`ImageSet` is essentially the same as the (deprecated?) `sage.combinat.combinat.MapCombinatorialClass`, except that we would not insist that the map is injective.



---

archive/issue_comments_457402.json:
```json
{
    "body": "<a id='comment:20'></a>\nOpened #32121 Replace `MapCombinatorialClass`",
    "created_at": "2021-07-04T03:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457402",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Opened #32121 Replace `MapCombinatorialClass`



---

archive/issue_comments_457403.json:
```json
{
    "body": "Changing dependencies from \"#24171, #32013, #32089\" to \"#24171, #32013, #32089, #32121\"",
    "created_at": "2021-07-04T03:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457403",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#24171, #32013, #32089" to "#24171, #32013, #32089, #32121"



---

archive/issue_comments_457404.json:
```json
{
    "body": "<a id='comment:22'></a>\n`@`mkoeppe: since you put me into the CC list, would this include symbolic roots of polynomials, given by the minimal polynomial?\n\nI am guessing (because I'm not an expert there) that these would really need a special treatment, because one can compute with them quite well.",
    "created_at": "2021-07-06T06:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457404",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:22'></a>
`@`mkoeppe: since you put me into the CC list, would this include symbolic roots of polynomials, given by the minimal polynomial?

I am guessing (because I'm not an expert there) that these would really need a special treatment, because one can compute with them quite well.



---

archive/issue_events_061295.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61295"
}
```



---

archive/issue_events_061296.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61296"
}
```



---

archive/issue_events_061297.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61297"
}
```



---

archive/issue_events_061298.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61298"
}
```



---

archive/issue_events_061299.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:14:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61299"
}
```



---

archive/issue_events_061300.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:14:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61300"
}
```



---

archive/issue_comments_457405.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-05T00:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457405",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_457406.json:
```json
{
    "body": "<a id='comment:25'></a>\nWith #32121 merged, this is now finished",
    "created_at": "2022-03-05T00:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457406",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
With #32121 merged, this is now finished



---

archive/issue_comments_457407.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"\"",
    "created_at": "2022-03-05T00:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457407",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Ralf Stephan" to ""



---

archive/issue_comments_457408.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-05T23:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457408",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_457409.json:
```json
{
    "body": "<a id='comment:26'></a>\nAgreed.",
    "created_at": "2022-03-05T23:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457409",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
Agreed.



---

archive/issue_comments_457410.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-03-05T23:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457410",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_457411.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/implement_formal_set_comprehension\" to \"\"",
    "created_at": "2022-03-05T23:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457411",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/mkoeppe/implement_formal_set_comprehension" to ""



---

archive/issue_comments_457412.json:
```json
{
    "body": "Changing commit from \"24789baf9f77ae75de9500085d196ad0a322aed5\" to \"\"",
    "created_at": "2022-03-05T23:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457412",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "24789baf9f77ae75de9500085d196ad0a322aed5" to ""



---

archive/issue_comments_457413.json:
```json
{
    "body": "<a id='comment:27'></a>\nDoes #32121 provide a possibility to specify the set of roots of a polynomial?",
    "created_at": "2022-03-06T10:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457413",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:27'></a>
Does #32121 provide a possibility to specify the set of roots of a polynomial?



---

archive/issue_comments_457414.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-05-11T02:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24176#issuecomment-457414",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_061301.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24176",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24176#event-61301"
}
```
