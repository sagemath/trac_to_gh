# Issue 24176: ConditionSet, ImageSet: Implement formal Set comprehension

archive/issues_023939.json:
```json
{
    "assignees": [],
    "body": "In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n\nThis set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n\nRelated: `ImageManifoldSubset` (#31653)\n\n\nDepends on #24171\n\nDepends on #32013\n\nDepends on #32089\n\nDepends on #32121\n\n**CC:**  @tscrim @mantepse\n\n**Reviewer:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/24176\n\n",
    "closed_at": "2022-05-11T02:14:43Z",
    "created_at": "2017-11-08T16:54:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "ConditionSet, ImageSet: Implement formal Set comprehension",
    "type": "issue",
    "updated_at": "2022-05-11T02:14:43Z",
    "url": "https://github.com/sagemath/sage/issues/24176",
    "user": "https://github.com/rwst"
}
```
In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.

This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)

Related: `ImageManifoldSubset` (#31653)


Depends on #24171

Depends on #32013

Depends on #32089

Depends on #32121

**CC:**  @tscrim @mantepse

**Reviewer:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/24176





---

archive/issue_comments_368302.json:
```json
{
    "body": "**Dependencies:** #24171",
    "created_at": "2017-11-08T16:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368302",
    "user": "https://github.com/rwst"
}
```

**Dependencies:** #24171



---

archive/issue_comments_368303.json:
```json
{
    "body": "**Changing dependencies** from \"#24171\" to \"#24171, pynac-0.7.13\".",
    "created_at": "2017-11-10T08:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368303",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#24171" to "#24171, pynac-0.7.13".



---

archive/issue_comments_368304.json:
```json
{
    "body": "<a id='comment:2'></a>\nAccepting lists requires the function being a `GinacFunction`.",
    "created_at": "2017-11-10T08:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368304",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
Accepting lists requires the function being a `GinacFunction`.



---

archive/issue_comments_368305.json:
```json
{
    "body": "**Branch:** [u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)",
    "created_at": "2017-11-13T16:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368305",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)



---

archive/issue_comments_368306.json:
```json
{
    "body": "**Commit:** [9c77312e611f2d9fe5643e3e7a5bff51e511aa87](https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87)",
    "created_at": "2017-11-21T16:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368306",
    "user": "https://github.com/rwst"
}
```

**Commit:** [9c77312e611f2d9fe5643e3e7a5bff51e511aa87](https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87)



---

archive/issue_comments_368307.json:
```json
{
    "body": "**Changing dependencies** from \"#24171, pynac-0.7.13\" to \"#24171, #24262\".",
    "created_at": "2017-11-21T16:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368307",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#24171, pynac-0.7.13" to "#24171, #24262".



---

archive/issue_comments_368308.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669ea22318ab33f23f727626eb30e59fa138d253\">669ea22</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34c977315e33d373ca8e622f5d502f4d7554c0ff\">34c9773</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af82717b1bfeffbe6fc972686882916b0525b149\">af82717</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/592ce8745028ec0659b952e872dfff0a85ef5a5d\">592ce87</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82b7c6f5025845daaf9cedd418cec549945b2038\">82b7c6f</a></td><td><code>Merge branch 'u/rws/formal_set_membership_function' of git://trac.sagemath.org/sage into t/24176/implement_formal_set_comprehension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae29895fd82a9c8a12485c4362445ba80c54a6bb\">ae29895</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87\">9c77312</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>\n",
    "created_at": "2017-11-21T16:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368308",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669ea22318ab33f23f727626eb30e59fa138d253">669ea22</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34c977315e33d373ca8e622f5d502f4d7554c0ff">34c9773</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af82717b1bfeffbe6fc972686882916b0525b149">af82717</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/592ce8745028ec0659b952e872dfff0a85ef5a5d">592ce87</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82b7c6f5025845daaf9cedd418cec549945b2038">82b7c6f</a></td><td><code>Merge branch 'u/rws/formal_set_membership_function' of git://trac.sagemath.org/sage into t/24176/implement_formal_set_comprehension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae29895fd82a9c8a12485c4362445ba80c54a6bb">ae29895</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87">9c77312</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>




---

archive/issue_comments_368309.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)\" to \"[u/rws/24176](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24176)\".",
    "created_at": "2017-12-14T08:01:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368309",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)" to "[u/rws/24176](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24176)".



---

archive/issue_comments_368310.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/24176](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24176)\" to \"[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)\".",
    "created_at": "2017-12-14T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368310",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/24176](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/24176)" to "[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)".



---

archive/issue_comments_368311.json:
```json
{
    "body": "**Changing dependencies** from \"#24171, #24262\" to \"#24171, #24329\".",
    "created_at": "2017-12-14T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368311",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#24171, #24262" to "#24171, #24329".



---

archive/issue_comments_368312.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2017-12-14T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368312",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_368313.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)\" to \"[u/mkoeppe/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/implement_formal_set_comprehension)\".",
    "created_at": "2021-06-09T03:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368313",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/rws/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/implement_formal_set_comprehension)" to "[u/mkoeppe/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/implement_formal_set_comprehension)".



---

archive/issue_comments_368314.json:
```json
{
    "body": "**Changing commit** from \"[9c77312e611f2d9fe5643e3e7a5bff51e511aa87](https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87)\" to \"[ec393090edb11c220c0e0e39529445015a00623d](https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d)\".",
    "created_at": "2021-06-09T03:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368314",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[9c77312e611f2d9fe5643e3e7a5bff51e511aa87](https://github.com/sagemath/sagetrac-mirror/commit/9c77312e611f2d9fe5643e3e7a5bff51e511aa87)" to "[ec393090edb11c220c0e0e39529445015a00623d](https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d)".



---

archive/issue_comments_368315.json:
```json
{
    "body": "**Changing dependencies** from \"#24171, #24329\" to \"#24171\".",
    "created_at": "2021-06-09T03:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368315",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#24171, #24329" to "#24171".



---

archive/issue_events_214706.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-09T03:04:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214706"
}
```



---

archive/issue_events_214707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-09T03:04:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214707"
}
```



---

archive/issue_comments_368316.json:
```json
{
    "body": "<a id='comment:8'></a>\nRebased on top of rebased #24171\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72565f2720115475272c030db26b1144b87377bb\">72565f2</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71bbf382e0727c416063e2b40bbdbd08fba92495\">71bbf38</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6811a7650d4e0123558d098fdf19702e94b60003\">6811a76</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a66f78faab0c7374477e8b1f5f43746ec34fbc3\">0a66f78</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e35349a3d953508aba3af719042797e5c79346f3\">e35349a</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26ef67d62371f25067d24f573ec5b8184557dc91\">26ef67d</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d\">ec39309</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>\n",
    "created_at": "2021-06-09T03:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368316",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Rebased on top of rebased #24171

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72565f2720115475272c030db26b1144b87377bb">72565f2</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71bbf382e0727c416063e2b40bbdbd08fba92495">71bbf38</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6811a7650d4e0123558d098fdf19702e94b60003">6811a76</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a66f78faab0c7374477e8b1f5f43746ec34fbc3">0a66f78</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e35349a3d953508aba3af719042797e5c79346f3">e35349a</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26ef67d62371f25067d24f573ec5b8184557dc91">26ef67d</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d">ec39309</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>




---

archive/issue_comments_368317.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51c81526f88eb37462cf604d00a1cff2a029a7a7\">51c8152</a></td><td><code>Merge branch 't/31877/refine_category_of_realset' into t/24171/set-membership-rebased</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e623bb508d45a0ac79538c93bc115562b6269e0\">5e623bb</a></td><td><code>RealSet.is_finite: Remove, inherited from category</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d19916c0fbf2bf76054401df372fbedde7cdbb6\">7d19916</a></td><td><code>Do not use QQ.completion(oo,oo) - not implemented</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b4e2246708b683b3bbcee95eef1a96223a250c3\">9b4e224</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5310e04bae60c574eafe491ebcea366e57513822\">5310e04</a></td><td><code>Function_elementof: Remove use of is_Set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d9795d4ac58ab82e6116dfb8b661050cc8931d\">46d9795</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6995d1ea0bab1ca2bdb412a00fa07ead947ebaa9\">6995d1e</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a41c5fc0fe673f1451cca321117222735f9bd8e7\">a41c5fc</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a9c49a20c1e3714f073ffeaaab71c00afb5a415\">2a9c49a</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5\">24789ba</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>\n",
    "created_at": "2021-06-09T03:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368317",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51c81526f88eb37462cf604d00a1cff2a029a7a7">51c8152</a></td><td><code>Merge branch 't/31877/refine_category_of_realset' into t/24171/set-membership-rebased</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e623bb508d45a0ac79538c93bc115562b6269e0">5e623bb</a></td><td><code>RealSet.is_finite: Remove, inherited from category</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d19916c0fbf2bf76054401df372fbedde7cdbb6">7d19916</a></td><td><code>Do not use QQ.completion(oo,oo) - not implemented</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b4e2246708b683b3bbcee95eef1a96223a250c3">9b4e224</a></td><td><code>24176: check set argument of element_of()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5310e04bae60c574eafe491ebcea366e57513822">5310e04</a></td><td><code>Function_elementof: Remove use of is_Set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d9795d4ac58ab82e6116dfb8b661050cc8931d">46d9795</a></td><td><code>24171: Formal set membership function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6995d1ea0bab1ca2bdb412a00fa07ead947ebaa9">6995d1e</a></td><td><code>24171: make RealSet inherit from Set_generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a41c5fc0fe673f1451cca321117222735f9bd8e7">a41c5fc</a></td><td><code>24171: remove RealSet import; SR set coercion doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a9c49a20c1e3714f073ffeaaab71c00afb5a415">2a9c49a</a></td><td><code>24171: Py3 fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5">24789ba</a></td><td><code>24176: Implement formal Set comprehension</code></td></tr></table>




---

archive/issue_comments_368318.json:
```json
{
    "body": "**Changing commit** from \"[ec393090edb11c220c0e0e39529445015a00623d](https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d)\" to \"[24789baf9f77ae75de9500085d196ad0a322aed5](https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5)\".",
    "created_at": "2021-06-09T03:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368318",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ec393090edb11c220c0e0e39529445015a00623d](https://github.com/sagemath/sagetrac-mirror/commit/ec393090edb11c220c0e0e39529445015a00623d)" to "[24789baf9f77ae75de9500085d196ad0a322aed5](https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5)".



---

archive/issue_comments_368319.json:
```json
{
    "body": "<a id='comment:10'></a>\nRebased on top of updated #24171, which cherry-picked 1 commit from here.\n\nNot sure about the changes on this ticket marked 24171. They are either from a newer or older version of 24171.",
    "created_at": "2021-06-09T04:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368319",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Rebased on top of updated #24171, which cherry-picked 1 commit from here.

Not sure about the changes on this ticket marked 24171. They are either from a newer or older version of 24171.



---

archive/issue_comments_368320.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe fix to `RealSet.__bool__` in 6995d1e/2a9c49a can go to #31941 (Make empty `RealSet` false).\n\nUnclear to me whether 6995d1e (make `RealSet` inherit from `Set_generic`) should be done",
    "created_at": "2021-06-09T04:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368320",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
The fix to `RealSet.__bool__` in 6995d1e/2a9c49a can go to #31941 (Make empty `RealSet` false).

Unclear to me whether 6995d1e (make `RealSet` inherit from `Set_generic`) should be done



---

archive/issue_comments_368321.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's imageset is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n+In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.\n+\n+This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n+\n+\n``````\n",
    "created_at": "2021-06-10T02:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368321",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's imageset is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.
+In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's `imageset` / `ConditionSet` is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.
+
+This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)
+
+
``````




---

archive/issue_comments_368322.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)\n \n+Related: `ImageManifoldSubset` (#31653)\n \n``````\n",
    "created_at": "2021-06-10T02:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368322",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 This set would convert to a `SymPy` [ImageSet](https://docs.sympy.org/latest/modules/sets.html#sympy.sets.fancysets.ImageSet) or [ConditionSet](https://docs.sympy.org/latest/modules/sets.html#conditionset)
 
+Related: `ImageManifoldSubset` (#31653)
 
``````




---

archive/issue_comments_368323.json:
```json
{
    "body": "<a id='comment:14'></a>\nI think the approach on the current branch may be tied a bit too closely to `SR` functions.\n\nI think it's better to first implement:\n\n- `ImageSubset` (as an abstract subobject of the codomain) for arbitrary `Map`s -- this would be a generalization of `ImageManifoldSubset` (#31653). No relation to `SR` (but by relaxing the code from #24171 that only allows some sets to be coerced to `SR`, one would be able to coerce it to `SR`).\n\n- `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.",
    "created_at": "2021-06-10T03:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368323",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
I think the approach on the current branch may be tied a bit too closely to `SR` functions.

I think it's better to first implement:

- `ImageSubset` (as an abstract subobject of the codomain) for arbitrary `Map`s -- this would be a generalization of `ImageManifoldSubset` (#31653). No relation to `SR` (but by relaxing the code from #24171 that only allows some sets to be coerced to `SR`, one would be able to coerce it to `SR`).

- `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.



---

archive/issue_events_214708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-19T00:14:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "rename": {
        "from": "Implement formal Set comprehension",
        "to": "ConditionSet, ImageSet: Implement formal Set comprehension"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214708"
}
```



---

archive/issue_comments_368324.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@mkoeppe](#comment%3A14):\n> - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.\n\nmore precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)",
    "created_at": "2021-06-19T03:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368324",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [@mkoeppe](#comment%3A14):
> - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.

more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)



---

archive/issue_comments_368325.json:
```json
{
    "body": "**Changing dependencies** from \"#24171\" to \"#24171, #32013\".",
    "created_at": "2021-06-20T20:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368325",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#24171" to "#24171, #32013".



---

archive/issue_comments_368326.json:
```json
{
    "body": "**Changing dependencies** from \"#24171, #32013\" to \"#24171, #32013, #32089\".",
    "created_at": "2021-07-02T02:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368326",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#24171, #32013" to "#24171, #32013, #32089".



---

archive/issue_comments_368327.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [@mkoeppe](#comment%3A16):\n> Replying to [@mkoeppe](#comment%3A14):\n> > - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.\n\n> \n> more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)\n\nThis is now implemented in #32089.",
    "created_at": "2021-07-02T02:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368327",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [@mkoeppe](#comment%3A16):
> Replying to [@mkoeppe](#comment%3A14):
> > - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.

> 
> more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)

This is now implemented in #32089.



---

archive/issue_comments_368328.json:
```json
{
    "body": "<a id='comment:19'></a>\n`ImageSet` is essentially the same as the (deprecated?) `sage.combinat.combinat.MapCombinatorialClass`, except that we would not insist that the map is injective.",
    "created_at": "2021-07-04T02:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368328",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
`ImageSet` is essentially the same as the (deprecated?) `sage.combinat.combinat.MapCombinatorialClass`, except that we would not insist that the map is injective.



---

archive/issue_comments_368329.json:
```json
{
    "body": "<a id='comment:20'></a>\nOpened #32121 Replace `MapCombinatorialClass`",
    "created_at": "2021-07-04T03:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368329",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Opened #32121 Replace `MapCombinatorialClass`



---

archive/issue_comments_368330.json:
```json
{
    "body": "**Changing dependencies** from \"#24171, #32013, #32089\" to \"#24171, #32013, #32089, #32121\".",
    "created_at": "2021-07-04T03:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368330",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#24171, #32013, #32089" to "#24171, #32013, #32089, #32121".



---

archive/issue_comments_368331.json:
```json
{
    "body": "<a id='comment:22'></a>\n@mkoeppe: since you put me into the CC list, would this include symbolic roots of polynomials, given by the minimal polynomial?\n\nI am guessing (because I'm not an expert there) that these would really need a special treatment, because one can compute with them quite well.",
    "created_at": "2021-07-06T06:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368331",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:22'></a>
@mkoeppe: since you put me into the CC list, would this include symbolic roots of polynomials, given by the minimal polynomial?

I am guessing (because I'm not an expert there) that these would really need a special treatment, because one can compute with them quite well.



---

archive/issue_events_214709.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214709"
}
```



---

archive/issue_events_214710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214710"
}
```



---

archive/issue_events_214711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214711"
}
```



---

archive/issue_events_214712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214712"
}
```



---

archive/issue_events_214713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:14:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214713"
}
```



---

archive/issue_events_214714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:14:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214714"
}
```



---

archive/issue_comments_368332.json:
```json
{
    "body": "<a id='comment:25'></a>\nWith #32121 merged, this is now finished",
    "created_at": "2022-03-05T00:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368332",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
With #32121 merged, this is now finished



---

archive/issue_comments_368333.json:
```json
{
    "body": "**Changing author** from \"Ralf Stephan\" to \"\".",
    "created_at": "2022-03-05T00:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368333",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Ralf Stephan" to "".



---

archive/issue_events_214715.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-05T23:05:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214715"
}
```



---

archive/issue_events_214716.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-05T23:05:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214716"
}
```



---

archive/issue_comments_368334.json:
```json
{
    "body": "<a id='comment:26'></a>\nAgreed.",
    "created_at": "2022-03-05T23:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368334",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
Agreed.



---

archive/issue_comments_368335.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2022-03-05T23:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368335",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_368336.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/implement_formal_set_comprehension)\" to \"\".",
    "created_at": "2022-03-05T23:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368336",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/mkoeppe/implement_formal_set_comprehension](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/implement_formal_set_comprehension)" to "".



---

archive/issue_comments_368337.json:
```json
{
    "body": "**Changing commit** from \"[24789baf9f77ae75de9500085d196ad0a322aed5](https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5)\" to \"\".",
    "created_at": "2022-03-05T23:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368337",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[24789baf9f77ae75de9500085d196ad0a322aed5](https://github.com/sagemath/sagetrac-mirror/commit/24789baf9f77ae75de9500085d196ad0a322aed5)" to "".



---

archive/issue_comments_368338.json:
```json
{
    "body": "<a id='comment:27'></a>\nDoes #32121 provide a possibility to specify the set of roots of a polynomial?",
    "created_at": "2022-03-06T10:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24176#issuecomment-368338",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:27'></a>
Does #32121 provide a possibility to specify the set of roots of a polynomial?



---

archive/issue_events_214717.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214717"
}
```



---

archive/issue_events_214718.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24176",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24176#event-214718"
}
```
