# Issue 24612: Move permutation groups to new coercion model

archive/issues_024375.json:
```json
{
    "assignees": [],
    "body": "We have\n\n```\nsage: S4 = SymmetricGroup(4)\nsage: G = S4.subgroups()[19]\nsage: f = G.coerce_map_from(S4); f\nCall morphism:\n  From: Symmetric group of order 4! as a permutation group\n  To:   Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]\n```\nThis is very wrong, there is no coercion from `S4` to `G`:\n\n```\nsage: f(S4[1])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-13-9acf54a006a7> in <module>()\n----> 1 f(S4[Integer(1)])\n\n/usr/local/src/sage-config/src/sage/categories/map.pyx in sage.categories.map.Map.__call__ (build/cythonized/sage/categories/map.c:6632)()\n    769         if P is D: # we certainly want to call _call_/with_args\n    770             if not args and not kwds:\n--> 771                 return self._call_(x)\n    772             return self._call_with_args(x, args, kwds)\n    773         # Is there coercion?\n\n/usr/local/src/sage-config/src/sage/categories/morphism.pyx in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6790)()\n    420 \n    421     cpdef Element _call_(self, x):\n--> 422         return self._codomain(x)\n    423 \n    424 cdef class IdentityMorphism(Morphism):\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.pyc in __call__(self, x, check)\n    678             return self.identity()\n    679 \n--> 680         return self._element_class()(x, self, check=check)\n    681 \n    682     def _coerce_impl(self, x):\n\n/usr/local/src/sage-config/src/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5749)()\n    462                 P = parent._gap_()\n    463                 if not P.parent()(self.__gap) in P:\n--> 464                     raise TypeError('permutation %s not in %s' % (g, parent))\n    465 \n    466         Element.__init__(self, parent)\n\nTypeError: permutation (1,2) not in Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]\n```\n\nKeywords: **coercion subgroup, days94**\n\nBranch/Commit: **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Travis Scrimshaw**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24612_\n\n",
    "closed_at": "2018-07-07T01:34:43Z",
    "created_at": "2018-01-30T09:09:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move permutation groups to new coercion model",
    "type": "issue",
    "updated_at": "2018-07-07T01:34:43Z",
    "url": "https://github.com/sagemath/sage/issues/24612",
    "user": "https://github.com/simon-king-jena"
}
```
We have

```
sage: S4 = SymmetricGroup(4)
sage: G = S4.subgroups()[19]
sage: f = G.coerce_map_from(S4); f
Call morphism:
  From: Symmetric group of order 4! as a permutation group
  To:   Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]
```
This is very wrong, there is no coercion from `S4` to `G`:

```
sage: f(S4[1])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-13-9acf54a006a7> in <module>()
----> 1 f(S4[Integer(1)])

/usr/local/src/sage-config/src/sage/categories/map.pyx in sage.categories.map.Map.__call__ (build/cythonized/sage/categories/map.c:6632)()
    769         if P is D: # we certainly want to call _call_/with_args
    770             if not args and not kwds:
--> 771                 return self._call_(x)
    772             return self._call_with_args(x, args, kwds)
    773         # Is there coercion?

/usr/local/src/sage-config/src/sage/categories/morphism.pyx in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6790)()
    420 
    421     cpdef Element _call_(self, x):
--> 422         return self._codomain(x)
    423 
    424 cdef class IdentityMorphism(Morphism):

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.pyc in __call__(self, x, check)
    678             return self.identity()
    679 
--> 680         return self._element_class()(x, self, check=check)
    681 
    682     def _coerce_impl(self, x):

/usr/local/src/sage-config/src/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5749)()
    462                 P = parent._gap_()
    463                 if not P.parent()(self.__gap) in P:
--> 464                     raise TypeError('permutation %s not in %s' % (g, parent))
    465 
    466         Element.__init__(self, parent)

TypeError: permutation (1,2) not in Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]
```

Keywords: **coercion subgroup, days94**

Branch/Commit: **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**

Reviewer: **Jeroen Demeyer**

Author: **Travis Scrimshaw**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/24612_





---

archive/issue_events_340808.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-01-30T09:09:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340808"
}
```



---

archive/issue_events_340809.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-01-30T09:09:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340809"
}
```



---

archive/issue_events_340810.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-01-30T09:09:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340810"
}
```



---

archive/issue_events_340811.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2018-01-30T09:09:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340811"
}
```



---

archive/issue_comments_373192.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,40 +2,48 @@\n \n ```\n sage: S4 = SymmetricGroup(4)\n-sage: S4.has_coerce_map_from(S4.subgroups()[19])\n-True\n+sage: G = S4.subgroups()[19]\n+sage: f = G.coerce_map_from(S4); f\n+Call morphism:\n+  From: Symmetric group of order 4! as a permutation group\n+  To:   Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]\n ```\n-and thus the following multiplication of an element of the ambient group with an element of the subgroup works:\n+This is very wrong, there is no coercion from `S4` to `G`:\n \n ```\n-sage: S4[1]*S4.subgroups()[19][1]\n-(1,4,2,3)\n-```\n-\n-However, the opposite product doesn't work:\n-\n-```\n-sage: S4.subgroups()[19][1]*S4[1]\n+sage: f(S4[1])\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-12-0cb3cb3f749a> in <module>()\n-----> 1 S4.subgroups()[Integer(19)][Integer(1)]*S4[Integer(1)]\n+<ipython-input-13-9acf54a006a7> in <module>()\n+----> 1 f(S4[Integer(1)])\n \n-/home/king/Sage/git/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12205)()\n-   1525             return (<Element>left)._mul_(right)\n-   1526         if BOTH_ARE_ELEMENT(cl):\n--> 1527             return coercion_model.bin_op(left, right, mul)\n-   1528 \n-   1529         cdef long value\n+/usr/local/src/sage-config/src/sage/categories/map.pyx in sage.categories.map.Map.__call__ (build/cythonized/sage/categories/map.c:6632)()\n+    769         if P is D: # we certainly want to call _call_/with_args\n+    770             if not args and not kwds:\n+--> 771                 return self._call_(x)\n+    772             return self._call_with_args(x, args, kwds)\n+    773         # Is there coercion?\n \n-/home/king/Sage/git/sage/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10655)()\n-   1131         # We should really include the underlying error.\n-   1132         # This causes so much headache.\n--> 1133         raise bin_op_exception(op, x, y)\n-   1134 \n-   1135     cpdef canonical_coercion(self, x, y):\n+/usr/local/src/sage-config/src/sage/categories/morphism.pyx in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6790)()\n+    420 \n+    421     cpdef Element _call_(self, x):\n+--> 422         return self._codomain(x)\n+    423 \n+    424 cdef class IdentityMorphism(Morphism):\n \n-TypeError: unsupported operand parent(s) for *: 'Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]' and 'Symmetric group of order 4! as a permutation group'\n+/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.pyc in __call__(self, x, check)\n+    678             return self.identity()\n+    679 \n+--> 680         return self._element_class()(x, self, check=check)\n+    681 \n+    682     def _coerce_impl(self, x):\n+\n+/usr/local/src/sage-config/src/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5749)()\n+    462                 P = parent._gap_()\n+    463                 if not P.parent()(self.__gap) in P:\n+--> 464                     raise TypeError('permutation %s not in %s' % (g, parent))\n+    465 \n+    466         Element.__init__(self, parent)\n+\n+TypeError: permutation (1,2) not in Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]\n ```\n-\n-I am aware that a coercion into the left factor's parent is chosen, if there are coercions in *both* directions. However, a coercion into the right factor's parent is supposed to be used, if the opposite coercion doesn't exist.\n``````\n",
    "created_at": "2018-01-30T09:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373192",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,40 +2,48 @@
 
 ```
 sage: S4 = SymmetricGroup(4)
-sage: S4.has_coerce_map_from(S4.subgroups()[19])
-True
+sage: G = S4.subgroups()[19]
+sage: f = G.coerce_map_from(S4); f
+Call morphism:
+  From: Symmetric group of order 4! as a permutation group
+  To:   Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]
 ```
-and thus the following multiplication of an element of the ambient group with an element of the subgroup works:
+This is very wrong, there is no coercion from `S4` to `G`:
 
 ```
-sage: S4[1]*S4.subgroups()[19][1]
-(1,4,2,3)
-```
-
-However, the opposite product doesn't work:
-
-```
-sage: S4.subgroups()[19][1]*S4[1]
+sage: f(S4[1])
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-12-0cb3cb3f749a> in <module>()
-----> 1 S4.subgroups()[Integer(19)][Integer(1)]*S4[Integer(1)]
+<ipython-input-13-9acf54a006a7> in <module>()
+----> 1 f(S4[Integer(1)])
 
-/home/king/Sage/git/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12205)()
-   1525             return (<Element>left)._mul_(right)
-   1526         if BOTH_ARE_ELEMENT(cl):
--> 1527             return coercion_model.bin_op(left, right, mul)
-   1528 
-   1529         cdef long value
+/usr/local/src/sage-config/src/sage/categories/map.pyx in sage.categories.map.Map.__call__ (build/cythonized/sage/categories/map.c:6632)()
+    769         if P is D: # we certainly want to call _call_/with_args
+    770             if not args and not kwds:
+--> 771                 return self._call_(x)
+    772             return self._call_with_args(x, args, kwds)
+    773         # Is there coercion?
 
-/home/king/Sage/git/sage/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10655)()
-   1131         # We should really include the underlying error.
-   1132         # This causes so much headache.
--> 1133         raise bin_op_exception(op, x, y)
-   1134 
-   1135     cpdef canonical_coercion(self, x, y):
+/usr/local/src/sage-config/src/sage/categories/morphism.pyx in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6790)()
+    420 
+    421     cpdef Element _call_(self, x):
+--> 422         return self._codomain(x)
+    423 
+    424 cdef class IdentityMorphism(Morphism):
 
-TypeError: unsupported operand parent(s) for *: 'Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]' and 'Symmetric group of order 4! as a permutation group'
+/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.pyc in __call__(self, x, check)
+    678             return self.identity()
+    679 
+--> 680         return self._element_class()(x, self, check=check)
+    681 
+    682     def _coerce_impl(self, x):
+
+/usr/local/src/sage-config/src/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5749)()
+    462                 P = parent._gap_()
+    463                 if not P.parent()(self.__gap) in P:
+--> 464                     raise TypeError('permutation %s not in %s' % (g, parent))
+    465 
+    466         Element.__init__(self, parent)
+
+TypeError: permutation (1,2) not in Subgroup of (Symmetric group of order 4! as a permutation group) generated by [(1,3)(2,4), (1,4,3,2)]
 ```
-
-I am aware that a coercion into the left factor's parent is chosen, if there are coercions in *both* directions. However, a coercion into the right factor's parent is supposed to be used, if the opposite coercion doesn't exist.
``````




---

archive/issue_comments_373193.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAha! So, the problem is that Sage thinks there is a coercion from the group to the subgroup, and not only from the subgroup to the group? That would indeed explain the current behaviour (multiplying a group element with a subgroup element works, multiplying a subgroup element by a group element doesn't work).",
    "created_at": "2018-01-30T09:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373193",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

Aha! So, the problem is that Sage thinks there is a coercion from the group to the subgroup, and not only from the subgroup to the group? That would indeed explain the current behaviour (multiplying a group element with a subgroup element works, multiplying a subgroup element by a group element doesn't work).



---

archive/issue_comments_373194.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPermutation groups still use the old coercion model. So moving to the new coercion model (unfortunately a non-trivial operation) is almost certainly going to fix this.",
    "created_at": "2018-06-12T13:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373194",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Permutation groups still use the old coercion model. So moving to the new coercion model (unfortunately a non-trivial operation) is almost certainly going to fix this.



---

archive/issue_events_340812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-12T15:10:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "title_is": "Move permutation groups to new coercion model",
    "title_was": "Bug in coercion of subgroups into ambient group",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340812"
}
```



---

archive/issue_comments_373195.json:
```json
{
    "body": "Commit: **[`344907e`](https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34)**",
    "created_at": "2018-06-30T11:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373195",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`344907e`](https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34)**



---

archive/issue_events_340813.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-06-30T11:59:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340813"
}
```



---

archive/issue_events_340814.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-06-30T11:59:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340814"
}
```



---

archive/issue_comments_373196.json:
```json
{
    "body": "Branch: **[public/coercion/perm_groups_new_parent-24612](https://github.com/sagemath/sagetrac-mirror/tree/public/coercion/perm_groups_new_parent-24612)**",
    "created_at": "2018-06-30T11:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373196",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/coercion/perm_groups_new_parent-24612](https://github.com/sagemath/sagetrac-mirror/tree/public/coercion/perm_groups_new_parent-24612)**



---

archive/issue_comments_373197.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2018-06-30T11:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373197",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_comments_373198.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34\"><code>344907e</code></a></td><td><code>Moving permutation groups to the new coercion model and style parents.</code></td></tr></table>\n",
    "created_at": "2018-06-30T11:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373198",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34"><code>344907e</code></a></td><td><code>Moving permutation groups to the new coercion model and style parents.</code></td></tr></table>




---

archive/issue_comments_373199.json:
```json
{
    "body": "Changed keywords from **coercion subgroup** to **coercion subgroup, days94**",
    "created_at": "2018-06-30T11:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373199",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from **coercion subgroup** to **coercion subgroup, days94**



---

archive/issue_events_340815.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-06-30T11:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340815"
}
```



---

archive/issue_events_340816.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-30T16:39:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340816"
}
```



---

archive/issue_events_340817.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-30T16:39:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340817"
}
```



---

archive/issue_events_340818.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-06-30T17:48:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340818"
}
```



---

archive/issue_events_340819.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-06-30T17:48:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340819"
}
```



---

archive/issue_comments_373200.json:
```json
{
    "body": "Changed commit from **[`344907e`](https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34)** to **[`1b89e95`](https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8)**",
    "created_at": "2018-06-30T17:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373200",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`344907e`](https://github.com/sagemath/sagetrac-mirror/commit/344907ed5adc1ad687551d2f36d003707388ec34)** to **[`1b89e95`](https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8)**



---

archive/issue_comments_373201.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8\"><code>1b89e95</code></a></td><td><code>Fixing doctests.</code></td></tr></table>\n",
    "created_at": "2018-06-30T17:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373201",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8"><code>1b89e95</code></a></td><td><code>Fixing doctests.</code></td></tr></table>




---

archive/issue_comments_373202.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhy this in `_element_constructor_`?\n\n```\n        if isinstance(x, PermutationGroupElement):\n            x_parent = x.parent()\n            if (isinstance(x_parent, PermutationGroup_subgroup)\n                and x_parent._ambient_group is self):\n                return self.element_class(x.cycle_tuples(), self, check=False)\n\n            from sage.groups.perm_gps.permgroup_named import SymmetricGroup\n            compatible_domains = all(point in self._domain_to_gap\n                                     for point in x_parent.domain())\n            if compatible_domains and (isinstance(self, SymmetricGroup)\n                                       or x._gap_() in self._gap_()):\n                return self.element_class(x.cycle_tuples(), self, check=False)\n```\n\nAll tests in `src/sage/groups` pass when removing that block of code.",
    "created_at": "2018-07-03T10:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373202",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Why this in `_element_constructor_`?

```
        if isinstance(x, PermutationGroupElement):
            x_parent = x.parent()
            if (isinstance(x_parent, PermutationGroup_subgroup)
                and x_parent._ambient_group is self):
                return self.element_class(x.cycle_tuples(), self, check=False)

            from sage.groups.perm_gps.permgroup_named import SymmetricGroup
            compatible_domains = all(point in self._domain_to_gap
                                     for point in x_parent.domain())
            if compatible_domains and (isinstance(self, SymmetricGroup)
                                       or x._gap_() in self._gap_()):
                return self.element_class(x.cycle_tuples(), self, check=False)
```

All tests in `src/sage/groups` pass when removing that block of code.



---

archive/issue_comments_373203.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2018-07-03T10:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373203",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_340820.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T10:12:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340820"
}
```



---

archive/issue_events_340821.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T10:12:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340821"
}
```



---

archive/issue_comments_373204.json:
```json
{
    "body": "Changed commit from **[`1b89e95`](https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8)** to **[`1815bc7`](https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8)**",
    "created_at": "2018-07-03T10:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1b89e95`](https://github.com/sagemath/sagetrac-mirror/commit/1b89e952ae1ac35f13172bfbe29de4e15e868cc8)** to **[`1815bc7`](https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8)**



---

archive/issue_comments_373205.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8\"><code>1815bc7</code></a></td><td><code>Minor fixes to permutation groups</code></td></tr></table>\n",
    "created_at": "2018-07-03T10:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373205",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8"><code>1815bc7</code></a></td><td><code>Minor fixes to permutation groups</code></td></tr></table>




---

archive/issue_comments_373206.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThat is to support the old \"coercions\" as conversions that were previously supported. I don't think such a thing was explicitly tested, but I wanted to mitigate the number of behavioral changes.",
    "created_at": "2018-07-03T10:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373206",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

That is to support the old "coercions" as conversions that were previously supported. I don't think such a thing was explicitly tested, but I wanted to mitigate the number of behavioral changes.



---

archive/issue_comments_373207.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f39a40fa0b1785cb54f81540f5977efc7106443\"><code>5f39a40</code></a></td><td><code>Merge branch 'public/coercion/perm_groups_new_parent-24612' of git://trac.sagemath.org/sage into public/coercion/perm_groups_new_parent-24612</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9\"><code>05ae254</code></a></td><td><code>Adding comment in _element_constructor_.</code></td></tr></table>\n",
    "created_at": "2018-07-03T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373207",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f39a40fa0b1785cb54f81540f5977efc7106443"><code>5f39a40</code></a></td><td><code>Merge branch 'public/coercion/perm_groups_new_parent-24612' of git://trac.sagemath.org/sage into public/coercion/perm_groups_new_parent-24612</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9"><code>05ae254</code></a></td><td><code>Adding comment in _element_constructor_.</code></td></tr></table>




---

archive/issue_comments_373208.json:
```json
{
    "body": "Changed commit from **[`1815bc7`](https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8)** to **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**",
    "created_at": "2018-07-03T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1815bc7`](https://github.com/sagemath/sagetrac-mirror/commit/1815bc742792da2a96577af6a044aa814f912bf8)** to **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**



---

archive/issue_events_340822.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T10:37:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340822"
}
```



---

archive/issue_events_340823.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-07-03T10:37:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340823"
}
```



---

archive/issue_events_340824.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T10:41:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340824"
}
```



---

archive/issue_events_340825.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-07-03T10:41:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340825"
}
```



---

archive/issue_comments_373209.json:
```json
{
    "body": "Changed branch from **[public/coercion/perm_groups_new_parent-24612](https://github.com/sagemath/sagetrac-mirror/tree/public/coercion/perm_groups_new_parent-24612)** to **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**",
    "created_at": "2018-07-07T01:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24612#issuecomment-373209",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/coercion/perm_groups_new_parent-24612](https://github.com/sagemath/sagetrac-mirror/tree/public/coercion/perm_groups_new_parent-24612)** to **[`05ae254`](https://github.com/sagemath/sagetrac-mirror/commit/05ae2540ab498b19c26832f2f8c529c75155b6b9)**



---

archive/issue_events_340826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-07T01:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340826"
}
```



---

archive/issue_events_340827.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "46a4d401398b716920264db0097f67fca4a38c23",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-07-07T01:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24612",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24612#event-340827"
}
```
