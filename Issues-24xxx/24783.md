# Issue 24783: py3: minor fixes in sage.interfaces

archive/issues_024546.json:
```json
{
    "body": "Minor Python 3 fixes to different modules in `sage.interfaces`.  These were all small and discrete enough to be combined--most are moving `open()` calls to `with` statements to prevent `ResourceWarning`s in tests.\n\nBranch/Commit: 1c06fae98a995b7126b7dd4580108c60374e0a4e\n\nReviewer: Vincent Delecroix\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24783\n\n",
    "closed_at": "2018-05-18T17:49:40Z",
    "created_at": "2018-02-19T17:16:32Z",
    "labels": [
        "component: python3",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "py3: minor fixes in sage.interfaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24783",
    "user": "https://github.com/embray"
}
```
Minor Python 3 fixes to different modules in `sage.interfaces`.  These were all small and discrete enough to be combined--most are moving `open()` calls to `with` statements to prevent `ResourceWarning`s in tests.

Branch/Commit: 1c06fae98a995b7126b7dd4580108c60374e0a4e

Reviewer: Vincent Delecroix

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24783





---

archive/issue_comments_470842.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[afb7643](https://git.sagemath.org/sage.git/commit/?id=afb764397db3bbe00743efbbe43daa465eafd921)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|\n|[2181b3e](https://git.sagemath.org/sage.git/commit/?id=2181b3eba6114f902f3599dbb76ad7d068478520)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|\n|[00716a4](https://git.sagemath.org/sage.git/commit/?id=00716a40837b4603280fd247870579ccc8565668)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|\n|[00079d3](https://git.sagemath.org/sage.git/commit/?id=00079d3ef215cdd28e990ae1fd5e97b8935a8d7b)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|\n|[6469a9e](https://git.sagemath.org/sage.git/commit/?id=6469a9ec68a94c7a94063dff564fb2cb8695a7fa)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|\n|[9becd3b](https://git.sagemath.org/sage.git/commit/?id=9becd3b5bc927b886781e1001d78d99f442f42eb)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|",
    "created_at": "2018-02-19T18:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[afb7643](https://git.sagemath.org/sage.git/commit/?id=afb764397db3bbe00743efbbe43daa465eafd921)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|
|[2181b3e](https://git.sagemath.org/sage.git/commit/?id=2181b3eba6114f902f3599dbb76ad7d068478520)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|
|[00716a4](https://git.sagemath.org/sage.git/commit/?id=00716a40837b4603280fd247870579ccc8565668)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|
|[00079d3](https://git.sagemath.org/sage.git/commit/?id=00079d3ef215cdd28e990ae1fd5e97b8935a8d7b)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|
|[6469a9e](https://git.sagemath.org/sage.git/commit/?id=6469a9ec68a94c7a94063dff564fb2cb8695a7fa)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|
|[9becd3b](https://git.sagemath.org/sage.git/commit/?id=9becd3b5bc927b886781e1001d78d99f442f42eb)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|



---

archive/issue_comments_470843.json:
```json
{
    "body": "Changing commit from \"dce624ba78365195d8593f287c2f4000519f6706\" to \"9becd3b5bc927b886781e1001d78d99f442f42eb\"",
    "created_at": "2018-02-19T18:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dce624ba78365195d8593f287c2f4000519f6706" to "9becd3b5bc927b886781e1001d78d99f442f42eb"



---

archive/issue_comments_470844.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-19T18:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470844",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_events_062308.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24783#event-62308"
}
```



---

archive/issue_comments_470845.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2018-05-13T10:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470845",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_470846.json:
```json
{
    "body": "<a id='comment:4'></a>\nWouldn't it be useful to check that files are properly closed? At least the module `psutil` can be used to list the opened ones.",
    "created_at": "2018-05-13T10:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470846",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
Wouldn't it be useful to check that files are properly closed? At least the module `psutil` can be used to list the opened ones.



---

archive/issue_comments_470847.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-13T10:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470847",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470848.json:
```json
{
    "body": "<a id='comment:5'></a>\nHow come clicking on the branch field in this ticket and looking at the diff tells me that `gap.py` and `qepcad.py` were deleted?",
    "created_at": "2018-05-13T13:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470848",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:5'></a>
How come clicking on the branch field in this ticket and looking at the diff tells me that `gap.py` and `qepcad.py` were deleted?



---

archive/issue_comments_470849.json:
```json
{
    "body": "<a id='comment:6'></a>\nI don't know. Weird. I'll try rebasing.",
    "created_at": "2018-05-14T16:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470849",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
I don't know. Weird. I'll try rebasing.



---

archive/issue_comments_470850.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[83bd735](https://git.sagemath.org/sage.git/commit/?id=83bd73536f087638ad4a3d218077541611f22d09)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|\n|[9803d00](https://git.sagemath.org/sage.git/commit/?id=9803d0018d80f651e01e7b9799a04b1bf228bd4e)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|\n|[05d3a0b](https://git.sagemath.org/sage.git/commit/?id=05d3a0b0c6531c30e3e3b249dac3e7476efa1e12)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|\n|[2f741c2](https://git.sagemath.org/sage.git/commit/?id=2f741c23b7fbc18fd595bd02a94f3bae0f1dd4d8)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|\n|[33a326a](https://git.sagemath.org/sage.git/commit/?id=33a326a51c0a622ac285abe191637f2a4ddc3b86)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|\n|[f9fda19](https://git.sagemath.org/sage.git/commit/?id=f9fda199860fd6a33852166ebbccea169d53b76b)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|",
    "created_at": "2018-05-14T16:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[83bd735](https://git.sagemath.org/sage.git/commit/?id=83bd73536f087638ad4a3d218077541611f22d09)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|
|[9803d00](https://git.sagemath.org/sage.git/commit/?id=9803d0018d80f651e01e7b9799a04b1bf228bd4e)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|
|[05d3a0b](https://git.sagemath.org/sage.git/commit/?id=05d3a0b0c6531c30e3e3b249dac3e7476efa1e12)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|
|[2f741c2](https://git.sagemath.org/sage.git/commit/?id=2f741c23b7fbc18fd595bd02a94f3bae0f1dd4d8)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|
|[33a326a](https://git.sagemath.org/sage.git/commit/?id=33a326a51c0a622ac285abe191637f2a4ddc3b86)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|
|[f9fda19](https://git.sagemath.org/sage.git/commit/?id=f9fda199860fd6a33852166ebbccea169d53b76b)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|



---

archive/issue_comments_470851.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-05-14T16:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_470852.json:
```json
{
    "body": "Changing commit from \"9becd3b5bc927b886781e1001d78d99f442f42eb\" to \"f9fda199860fd6a33852166ebbccea169d53b76b\"",
    "created_at": "2018-05-14T16:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9becd3b5bc927b886781e1001d78d99f442f42eb" to "f9fda199860fd6a33852166ebbccea169d53b76b"



---

archive/issue_comments_470853.json:
```json
{
    "body": "<a id='comment:8'></a>\nShould be better now.  Might be the old merge preview was corrupted somehow.",
    "created_at": "2018-05-14T16:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470853",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Should be better now.  Might be the old merge preview was corrupted somehow.



---

archive/issue_comments_470854.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-15T07:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470854",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_470855.json:
```json
{
    "body": "<a id='comment:9'></a>\nmerge conflicts",
    "created_at": "2018-05-15T07:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470855",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
merge conflicts



---

archive/issue_comments_470856.json:
```json
{
    "body": "<a id='comment:10'></a>\n*sigh* I literally rebased this not 24 hours ago...",
    "created_at": "2018-05-15T10:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470856",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
*sigh* I literally rebased this not 24 hours ago...



---

archive/issue_comments_470857.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[66bfe0e](https://git.sagemath.org/sage.git/commit/?id=66bfe0e8315f1bce9d7cdf8e778468435602480d)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|\n|[b0b8633](https://git.sagemath.org/sage.git/commit/?id=b0b8633df12829397eb874aac77e0e64ffae295f)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|\n|[6be80e0](https://git.sagemath.org/sage.git/commit/?id=6be80e0fe3586abd3df92dd57197c2a59de527f2)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|\n|[a69c82f](https://git.sagemath.org/sage.git/commit/?id=a69c82f8e114b11a5c80d763b85f188056e604e6)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|\n|[620d35e](https://git.sagemath.org/sage.git/commit/?id=620d35ef6b92954af24bd276548ef9a821b1e52d)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|\n|[1c06fae](https://git.sagemath.org/sage.git/commit/?id=1c06fae98a995b7126b7dd4580108c60374e0a4e)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|",
    "created_at": "2018-05-16T09:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[66bfe0e](https://git.sagemath.org/sage.git/commit/?id=66bfe0e8315f1bce9d7cdf8e778468435602480d)|`Update SagePtyProcess and the Maxima and GAP pexpect interfaces to handle bytes roughly appropriately on Python 3`|
|[b0b8633](https://git.sagemath.org/sage.git/commit/?id=b0b8633df12829397eb874aac77e0e64ffae295f)|`py3: additional minor str/bytes fixes to the sage.interfaces framework`|
|[6be80e0](https://git.sagemath.org/sage.git/commit/?id=6be80e0fe3586abd3df92dd57197c2a59de527f2)|`py3: minor ResourceWarning fix in sage.interfaces.gap`|
|[a69c82f](https://git.sagemath.org/sage.git/commit/?id=a69c82f8e114b11a5c80d763b85f188056e604e6)|`py3: minor ResourceWarning fixes in sage.interfaces.psage`|
|[620d35e](https://git.sagemath.org/sage.git/commit/?id=620d35ef6b92954af24bd276548ef9a821b1e52d)|`py3: minor stylistic fix and map->list comprehension fixes in sage.interfaces.qepcad`|
|[1c06fae](https://git.sagemath.org/sage.git/commit/?id=1c06fae98a995b7126b7dd4580108c60374e0a4e)|`py3: minor ResourceWarning fix in sage.interfaces.quit`|



---

archive/issue_comments_470858.json:
```json
{
    "body": "Changing commit from \"f9fda199860fd6a33852166ebbccea169d53b76b\" to \"1c06fae98a995b7126b7dd4580108c60374e0a4e\"",
    "created_at": "2018-05-16T09:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9fda199860fd6a33852166ebbccea169d53b76b" to "1c06fae98a995b7126b7dd4580108c60374e0a4e"



---

archive/issue_comments_470859.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-16T09:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470859",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_470860.json:
```json
{
    "body": "<a id='comment:13'></a>\nSorry for this double rebasing! I really hope that we will switch to a smoother integration process for tickets!",
    "created_at": "2018-05-17T06:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470860",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
Sorry for this double rebasing! I really hope that we will switch to a smoother integration process for tickets!



---

archive/issue_comments_470861.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-17T06:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470861",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470862.json:
```json
{
    "body": "<a id='comment:14'></a>\nNot your (or anyone else's) fault.  Actually this is the sort of case that would not as easily be fixed by a smoother integration process--it was just an example of one ticket being merged first that this one conflicted with, and that's perfectly normal and sometimes unavoidable (though cases like that will be caught more quickly with more regular merging...)  I was just needlessly exasperated!",
    "created_at": "2018-05-17T15:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470862",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
Not your (or anyone else's) fault.  Actually this is the sort of case that would not as easily be fixed by a smoother integration process--it was just an example of one ticket being merged first that this one conflicted with, and that's perfectly normal and sometimes unavoidable (though cases like that will be caught more quickly with more regular merging...)  I was just needlessly exasperated!



---

archive/issue_events_062309.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-18T17:49:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24783#event-62309"
}
```



---

archive/issue_comments_470863.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-18T17:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470863",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_470864.json:
```json
{
    "body": "Changing branch from \"u/embray/python3/sage-interfacs/misc\" to \"1c06fae98a995b7126b7dd4580108c60374e0a4e\"",
    "created_at": "2018-05-18T17:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24783#issuecomment-470864",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/python3/sage-interfacs/misc" to "1c06fae98a995b7126b7dd4580108c60374e0a4e"
