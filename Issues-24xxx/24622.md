# Issue 24622: Pseudo-Riemannian manifods

archive/issues_024385.json:
```json
{
    "body": "This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces\n\n- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`\n- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields\n- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields \n- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields\n\nFor a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. \n\nTo match with the standard functional notation, functions `grad`, `div`, `curl`, `laplacian` and `dalembertian` have been implemented in `src/sage/manifolds/differentiable/operators.py`. Their role is simply to call the corresponding methods on their arguments. In order not to clutter the global namespace in a standard Sage session, these functions are imported only if some pseudo-Riemannian manifold is constructed, via the call to  `sage.repl.user_globals.set_global` in `PseudoRiemannianManifold.__init__`. \n\nSome vector calculus functionalities introduced by this ticket are\ndemonstrated in this [Jupyter worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).\n\nThe follow-up ticket #24623 implements Euclidean spaces.\n\nThis work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.\n\nCC:  @tscrim\n\nKeywords: pseudo-Riemannian, Riemannian, manifold, gradient, divergence, Laplacian\n\nBranch/Commit: 185e438b808c204dbf7b1f7b838fb43e40c100d2\n\nReviewer: Travis Scrimshaw, John Palmieri\n\nAuthor: Eric Gourgoulhon\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24622\n\n",
    "closed_at": "2018-03-19T07:57:58Z",
    "created_at": "2018-01-31T09:56:13Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Pseudo-Riemannian manifods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24622",
    "user": "https://github.com/egourgoulhon"
}
```
This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces

- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`
- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields
- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields 
- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields

For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. 

To match with the standard functional notation, functions `grad`, `div`, `curl`, `laplacian` and `dalembertian` have been implemented in `src/sage/manifolds/differentiable/operators.py`. Their role is simply to call the corresponding methods on their arguments. In order not to clutter the global namespace in a standard Sage session, these functions are imported only if some pseudo-Riemannian manifold is constructed, via the call to  `sage.repl.user_globals.set_global` in `PseudoRiemannianManifold.__init__`. 

Some vector calculus functionalities introduced by this ticket are
demonstrated in this [Jupyter worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).

The follow-up ticket #24623 implements Euclidean spaces.

This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.

CC:  @tscrim

Keywords: pseudo-Riemannian, Riemannian, manifold, gradient, divergence, Laplacian

Branch/Commit: 185e438b808c204dbf7b1f7b838fb43e40c100d2

Reviewer: Travis Scrimshaw, John Palmieri

Author: Eric Gourgoulhon

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24622





---

archive/issue_comments_363663.json:
```json
{
    "body": "<a id='comment:1'></a>This is work in progress...\n\n---\nNew commits:",
    "created_at": "2018-01-31T09:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363663",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:1'></a>This is work in progress...

---
New commits:



---

archive/issue_comments_363664.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,9 @@\n - new methods `divergence`, `laplacian` for tensor fields \n - new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields\n \n-For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed.\n+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. \n+\n+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.\n \n Author: Eric Gourgoulhon\n \n``````\n",
    "created_at": "2018-01-31T10:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363664",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,9 @@
 - new methods `divergence`, `laplacian` for tensor fields 
 - new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields
 
-For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed.
+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. 
+
+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.
 
 Author: Eric Gourgoulhon
 
``````




---

archive/issue_comments_363665.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that generic metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces\n \n+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`\n+- new methods `gradient` and `laplacian` for scalar fields\n+- new methods `divergence`, `laplacian` for tensor fields \n+- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields\n+\n+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. The follow-up ticket #24623 implements Euclidean spaces.\n+\n+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.\n \n Author: Eric Gourgoulhon\n \n``````\n",
    "created_at": "2018-01-31T10:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363665",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that generic metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces
 
+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`
+- new methods `gradient` and `laplacian` for scalar fields
+- new methods `divergence`, `laplacian` for tensor fields 
+- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields
+
+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. The follow-up ticket #24623 implements Euclidean spaces.
+
+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.
 
 Author: Eric Gourgoulhon
 
``````




---

archive/issue_comments_363666.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-31T16:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363667.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-31T22:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363668.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-02T17:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363669.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-06T15:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363670.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-07T18:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363671.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces\n \n+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`\n+- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields\n+- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields \n+- new methods `curl`, `dot`, `cross` and `norm` for vector fields\n+\n+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. The follow-up ticket #24623 implements Euclidean spaces.\n+\n+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.\n \n Author: Eric Gourgoulhon\n \n``````\n",
    "created_at": "2018-02-07T19:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363671",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces
 
+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`
+- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields
+- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields 
+- new methods `curl`, `dot`, `cross` and `norm` for vector fields
+
+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. The follow-up ticket #24623 implements Euclidean spaces.
+
+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.
 
 Author: Eric Gourgoulhon
 
``````




---

archive/issue_comments_363672.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-08T21:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363673.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-09T17:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363674.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-11T16:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363675.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces\n \n+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`\n+- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields\n+- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields \n+- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields\n+\n+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. \n+\n+To match with the standard functional notation, functions `grad`, `div`, `curl`, `laplacian` and `dalembertian` have been implemented in `src/sage/manifolds/differentiable/operators.py`. Their role is simply to call the corresponding methods on their arguments. In order not to clutter the global namespace in a standard Sage session, these functions are imported only if some pseudo-Riemannian manifold is constructed, via the call to  `sage.repl.user_globals.set_global` in `PseudoRiemannianManifold.__init__`. \n+\n+Some vector calculus functionalities introduced by this ticket are\n+demonstrated in this [Jupyter worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).\n+\n+The follow-up ticket #24623 implements Euclidean spaces.\n+\n+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.\n \n Author: Eric Gourgoulhon\n \n``````\n",
    "created_at": "2018-02-11T17:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363675",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+This ticket implements pseudo-Riemannian manifolds, i.e. real differentiable manifolds equipped with a metric tensor. Important subcases are of course Riemannian manifolds and Lorentzian manifolds. Taking into account that pseudo-Riemannian metric tensors are already implemented in Sage (see [here](http://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/metric.html)), this ticket introduces
 
+- the parent class `PseudoRiemannianManifold`, as a subclass of the existing class `DifferentiableManifold`, with the specific methods `metric` and `volume_form`
+- new methods `gradient`, `laplacian` and `dalembertian` for scalar fields
+- new methods `divergence`, `laplacian` and `dalembertian` for tensor fields 
+- new methods `curl`, `dot_product`, `cross_product` and `norm` for vector fields
+
+For a greater generality, all these methods have an optional argument `metric`; if it is omitted, the metric of the underlying pseudo-Riemannian manifold is assumed. 
+
+To match with the standard functional notation, functions `grad`, `div`, `curl`, `laplacian` and `dalembertian` have been implemented in `src/sage/manifolds/differentiable/operators.py`. Their role is simply to call the corresponding methods on their arguments. In order not to clutter the global namespace in a standard Sage session, these functions are imported only if some pseudo-Riemannian manifold is constructed, via the call to  `sage.repl.user_globals.set_global` in `PseudoRiemannianManifold.__init__`. 
+
+Some vector calculus functionalities introduced by this ticket are
+demonstrated in this [Jupyter worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).
+
+The follow-up ticket #24623 implements Euclidean spaces.
+
+This work is part of the [SageManifolds project](http://sagemanifolds.obspm.fr/), see #18528 for an overview.
 
 Author: Eric Gourgoulhon
 
``````




---

archive/issue_comments_363676.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-11T17:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363676",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_363677.json:
```json
{
    "body": "<a id='comment:15'></a>The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from \"divide\" or \"division\". I think you should ask on sage-devel to see if anyone has any objections with adding these to the global namespace and about them being a simple re-direct. (Ralf may want to have them interact with the symbolics in some way.)\n\nIn the same vein, this is bad to me:\n\n```python\n        # Import differential operators in the user global namespace:\n        if 'grad' not in get_globals():\n            from sage.manifolds.differentiable.operators import (grad, div,\n                                                 curl, laplacian, dalembertian)\n            set_global('grad', grad)\n            set_global('div', div)\n            set_global('curl', curl)\n            set_global('rot', curl)\n            set_global('laplacian', laplacian)\n            set_global('dalembertian', dalembertian)\n```\nI think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.\n\n---\n\nOther small comments:\n\nThis is under-indetented:\n\n```diff\ndiff --git a/src/sage/manifolds/differentiable/tensorfield.py b/src/sage/manifolds/differentiable/tensorfield.py\nindex 63ace1d..d8d173c 100644\n--- a/src/sage/manifolds/differentiable/tensorfield.py\n+++ b/src/sage/manifolds/differentiable/tensorfield.py\n@@ -3087,9 +3087,9 @@ class TensorField(ModuleElement):\n \n         .. MATH::\n \n-            (T^\\sharp)^{a_1\\ldots a_{k+1}}_{\\qquad\\ \\ b_1 \\ldots b_{l-1}}\n-            = g^{a_{k+1} i} \\,\n-            T^{a_1\\ldots a_k}_{\\qquad\\   b_1 \\ldots b_{p-k} \\, i \\, b_{p-k+1}\\ldots b_{l-1}},\n+          (T^\\sharp)^{a_1\\ldots a_{k+1}}_{\\phantom{a_1\\ldots a_{k+1}}\\, b_1 \\ldots b_{l-1}}\n+          = g^{a_{k+1} i} \\,\n+          T^{a_1\\ldots a_k}_{\\phantom{a_1\\ldots a_k}\\, b_1 \\ldots b_{p-k} \\, i \\, b_{p-k+1}\\ldots b_{l-1}},\n \n         `g^{ab}` being the components of the inverse metric.\n \n@@ -3235,9 +3235,9 @@ class TensorField(ModuleElement):\n \n         .. MATH::\n \n-            (T^\\flat)^{a_1\\ldots a_{k-1}}_{\\qquad\\ \\  b_1 \\ldots b_{l+1}}\n-            = g_{b_1 i} \\,\n-            T^{a_1\\ldots a_{p} \\, i \\, a_{p+1}\\ldots a_{k-1}}_{\\qquad\\qquad\\quad\\; b_2 \\ldots b_{l+1}},\n+          (T^\\flat)^{a_1\\ldots a_{k-1}}_{\\phantom{a_1\\ldots a_{k-1}}\\, b_1 \\ldots b_{l+1}}\n+          = g_{b_1 i} \\,\n+          T^{a_1\\ldots a_{p} \\, i \\, a_{p+1}\\ldots a_{k-1}}_{\\phantom{a_1\\ldots a_{p} \\, i \\, a_{p+1}\\ldots a_{k-1}}\\, b_2 \\ldots b_{l+1}},\n \n         `g_{ab}` being the components of the metric tensor.\n \n```\n(It's okay that not everything in a `.. MATH::` block, but I do prefer the >= 4 spaces indentation visually.)\n\nEverything else LGTM.",
    "created_at": "2018-02-28T10:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363677",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from "divide" or "division". I think you should ask on sage-devel to see if anyone has any objections with adding these to the global namespace and about them being a simple re-direct. (Ralf may want to have them interact with the symbolics in some way.)

In the same vein, this is bad to me:

```python
        # Import differential operators in the user global namespace:
        if 'grad' not in get_globals():
            from sage.manifolds.differentiable.operators import (grad, div,
                                                 curl, laplacian, dalembertian)
            set_global('grad', grad)
            set_global('div', div)
            set_global('curl', curl)
            set_global('rot', curl)
            set_global('laplacian', laplacian)
            set_global('dalembertian', dalembertian)
```
I think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.

---

Other small comments:

This is under-indetented:

```diff
diff --git a/src/sage/manifolds/differentiable/tensorfield.py b/src/sage/manifolds/differentiable/tensorfield.py
index 63ace1d..d8d173c 100644
--- a/src/sage/manifolds/differentiable/tensorfield.py
+++ b/src/sage/manifolds/differentiable/tensorfield.py
@@ -3087,9 +3087,9 @@ class TensorField(ModuleElement):
 
         .. MATH::
 
-            (T^\sharp)^{a_1\ldots a_{k+1}}_{\qquad\ \ b_1 \ldots b_{l-1}}
-            = g^{a_{k+1} i} \,
-            T^{a_1\ldots a_k}_{\qquad\   b_1 \ldots b_{p-k} \, i \, b_{p-k+1}\ldots b_{l-1}},
+          (T^\sharp)^{a_1\ldots a_{k+1}}_{\phantom{a_1\ldots a_{k+1}}\, b_1 \ldots b_{l-1}}
+          = g^{a_{k+1} i} \,
+          T^{a_1\ldots a_k}_{\phantom{a_1\ldots a_k}\, b_1 \ldots b_{p-k} \, i \, b_{p-k+1}\ldots b_{l-1}},
 
         `g^{ab}` being the components of the inverse metric.
 
@@ -3235,9 +3235,9 @@ class TensorField(ModuleElement):
 
         .. MATH::
 
-            (T^\flat)^{a_1\ldots a_{k-1}}_{\qquad\ \  b_1 \ldots b_{l+1}}
-            = g_{b_1 i} \,
-            T^{a_1\ldots a_{p} \, i \, a_{p+1}\ldots a_{k-1}}_{\qquad\qquad\quad\; b_2 \ldots b_{l+1}},
+          (T^\flat)^{a_1\ldots a_{k-1}}_{\phantom{a_1\ldots a_{k-1}}\, b_1 \ldots b_{l+1}}
+          = g_{b_1 i} \,
+          T^{a_1\ldots a_{p} \, i \, a_{p+1}\ldots a_{k-1}}_{\phantom{a_1\ldots a_{p} \, i \, a_{p+1}\ldots a_{k-1}}\, b_2 \ldots b_{l+1}},
 
         `g_{ab}` being the components of the metric tensor.
 
```
(It's okay that not everything in a `.. MATH::` block, but I do prefer the >= 4 spaces indentation visually.)

Everything else LGTM.



---

archive/issue_comments_363678.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 tscrim]:\n\nThanks for looking to this ticket and for your comments.\n> The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from \"divide\" or \"division\". \n\n\nI agree that `div` may evoke \"division\", however `grad` and `div` are pretty much standard notations in both elementary vector calculus and differential geometry, see e.g. \n- https://en.wikipedia.org/wiki/Vector_calculus#Differential_operators\n- https://en.wikipedia.org/wiki/Vector_calculus_identities#Operator_notations\n- https://en.wikipedia.org/wiki/Divergence\n\nAs a side note, neither `grad` nor `div` is already used as a global function in Sage, so the slot is free.\n\n>I think you should ask on sage-devel to see if anyone has any objections with adding these to the global namespace and about them being a simple re-direct. \n\n\nOK I will.\n> \n> In the same vein, this is bad to me:\n> \n> ```python\n>         # Import differential operators in the user global namespace:\n>         if 'grad' not in get_globals():\n>             from sage.manifolds.differentiable.operators import (grad, div,\n>                                                  curl, laplacian, dalembertian)\n>             set_global('grad', grad)\n>             set_global('div', div)\n>             set_global('curl', curl)\n>             set_global('rot', curl)\n>             set_global('laplacian', laplacian)\n>             set_global('dalembertian', dalembertian)\n> ```\n> I think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.\n\n\nWhy is it bad? Is it because it prevents the user from discovering the grad function with the TAB key and/or `grad?` before having set up any pseudo-Riemannian manifold? This would indeed be a good reason to have the operators in the global namespace at start.\n> \n> This is under-indetented:\n> (It's okay that not everything in a `.. MATH::` block, but I do prefer the >= 4 spaces indentation visually.)\n> \n\nOK, I will correct this.",
    "created_at": "2018-03-03T16:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363678",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>Replying to [comment:15 tscrim]:

Thanks for looking to this ticket and for your comments.
> The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from "divide" or "division". 


I agree that `div` may evoke "division", however `grad` and `div` are pretty much standard notations in both elementary vector calculus and differential geometry, see e.g. 
- https://en.wikipedia.org/wiki/Vector_calculus#Differential_operators
- https://en.wikipedia.org/wiki/Vector_calculus_identities#Operator_notations
- https://en.wikipedia.org/wiki/Divergence

As a side note, neither `grad` nor `div` is already used as a global function in Sage, so the slot is free.

>I think you should ask on sage-devel to see if anyone has any objections with adding these to the global namespace and about them being a simple re-direct. 


OK I will.
> 
> In the same vein, this is bad to me:
> 
> ```python
>         # Import differential operators in the user global namespace:
>         if 'grad' not in get_globals():
>             from sage.manifolds.differentiable.operators import (grad, div,
>                                                  curl, laplacian, dalembertian)
>             set_global('grad', grad)
>             set_global('div', div)
>             set_global('curl', curl)
>             set_global('rot', curl)
>             set_global('laplacian', laplacian)
>             set_global('dalembertian', dalembertian)
> ```
> I think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.


Why is it bad? Is it because it prevents the user from discovering the grad function with the TAB key and/or `grad?` before having set up any pseudo-Riemannian manifold? This would indeed be a good reason to have the operators in the global namespace at start.
> 
> This is under-indetented:
> (It's okay that not everything in a `.. MATH::` block, but I do prefer the >= 4 spaces indentation visually.)
> 

OK, I will correct this.



---

archive/issue_comments_363679.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 egourgoulhon]:\n> Replying to [comment:15 tscrim]:\n> \n> Thanks for looking to this ticket and for your comments.\n> > The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from \"divide\" or \"division\". \n\n> \n> I agree that `div` may evoke \"division\", however `grad` and `div` are pretty much standard notations in both elementary vector calculus and differential geometry, see e.g. \n> - https://en.wikipedia.org/wiki/Vector_calculus#Differential_operators\n> - https://en.wikipedia.org/wiki/Vector_calculus_identities#Operator_notations\n> - https://en.wikipedia.org/wiki/Divergence\n> \n> As a side note, neither `grad` nor `div` is already used as a global function in Sage, so the slot is free.\n\n\nThe difference is that in those links, you know you are doing vector calculus, whereas in Python you have `operator.div`.\n\n> > In the same vein, this is bad to me:\n> > \n> > ```python\n> >         # Import differential operators in the user global namespace:\n> >         if 'grad' not in get_globals():\n> >             from sage.manifolds.differentiable.operators import (grad, div,\n> >                                                  curl, laplacian, dalembertian)\n> >             set_global('grad', grad)\n> >             set_global('div', div)\n> >             set_global('curl', curl)\n> >             set_global('rot', curl)\n> >             set_global('laplacian', laplacian)\n> >             set_global('dalembertian', dalembertian)\n> > ```\n> > I think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.\n\n> \n> Why is it bad? Is it because it prevents the user from discovering the grad function with the TAB key and/or `grad?` before having set up any pseudo-Riemannian manifold? This would indeed be a good reason to have the operators in the global namespace at start.\n\n\nYou should not inject them without the user knowing. In particular, what if you have `rot = some expensive computation`, then you create your manifold (with not having created a `grad`) and all of a sudden, your `rot` computation is gone. On the other side, what if we add a different `grad` to the global namespace, something I think could happen, then you will not get these injections.\n\nI agree that they should be in the global namespace from the start and would making this issue moot. Some other thoughts that come to my mind is a function like `setup_manifolds_environment` and/or getting people who use SageManifolds to have a specific section to their `.sage/init.sage` file.",
    "created_at": "2018-03-03T22:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363679",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>Replying to [comment:16 egourgoulhon]:
> Replying to [comment:15 tscrim]:
> 
> Thanks for looking to this ticket and for your comments.
> > The biggest issue I have with this ticket is the addition of functions to the global namespace. `curl`, `laplacian`, and `dalembertian` I think are okay. `grad` over `gradient` I am not sure about. `div` looks too much like it is coming from "divide" or "division". 

> 
> I agree that `div` may evoke "division", however `grad` and `div` are pretty much standard notations in both elementary vector calculus and differential geometry, see e.g. 
> - https://en.wikipedia.org/wiki/Vector_calculus#Differential_operators
> - https://en.wikipedia.org/wiki/Vector_calculus_identities#Operator_notations
> - https://en.wikipedia.org/wiki/Divergence
> 
> As a side note, neither `grad` nor `div` is already used as a global function in Sage, so the slot is free.


The difference is that in those links, you know you are doing vector calculus, whereas in Python you have `operator.div`.

> > In the same vein, this is bad to me:
> > 
> > ```python
> >         # Import differential operators in the user global namespace:
> >         if 'grad' not in get_globals():
> >             from sage.manifolds.differentiable.operators import (grad, div,
> >                                                  curl, laplacian, dalembertian)
> >             set_global('grad', grad)
> >             set_global('div', div)
> >             set_global('curl', curl)
> >             set_global('rot', curl)
> >             set_global('laplacian', laplacian)
> >             set_global('dalembertian', dalembertian)
> > ```
> > I think a much better way is just to either have them all in the global namespace at start or having some function `inject_functions()`, but with some better name than I can come up with in 5 seconds.

> 
> Why is it bad? Is it because it prevents the user from discovering the grad function with the TAB key and/or `grad?` before having set up any pseudo-Riemannian manifold? This would indeed be a good reason to have the operators in the global namespace at start.


You should not inject them without the user knowing. In particular, what if you have `rot = some expensive computation`, then you create your manifold (with not having created a `grad`) and all of a sudden, your `rot` computation is gone. On the other side, what if we add a different `grad` to the global namespace, something I think could happen, then you will not get these injections.

I agree that they should be in the global namespace from the start and would making this issue moot. Some other thoughts that come to my mind is a function like `setup_manifolds_environment` and/or getting people who use SageManifolds to have a specific section to their `.sage/init.sage` file.



---

archive/issue_comments_363680.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 tscrim]:\n> \n> The difference is that in those links, you know you are doing vector calculus, whereas in Python you have `operator.div`.\n\n\nYes I agree, this depends on the context.\n\n> \n> You should not inject them without the user knowing. In particular, what if you have `rot = some expensive computation`, then you create your manifold (with not having created a `grad`) and all of a sudden, your `rot` computation is gone. On the other side, what if we add a different `grad` to the global namespace, something I think could happen, then you will not get these injections.\n> \n\n\nThanks for these explanations. I totally overlooked this point... I am now 100% convinced that injecting silently names in the global namespace is a very bad thing.\n\n\n> I agree that they should be in the global namespace from the start and would making this issue moot. Some other thoughts that come to my mind is a function like `setup_manifolds_environment` and/or getting people who use SageManifolds to have a specific section to their `.sage/init.sage` file.\n\n\nI'll think about this, given that the discussion on sage-devel leans toward not adding new stuff in the global namespace.",
    "created_at": "2018-03-04T10:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363680",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:18'></a>Replying to [comment:17 tscrim]:
> 
> The difference is that in those links, you know you are doing vector calculus, whereas in Python you have `operator.div`.


Yes I agree, this depends on the context.

> 
> You should not inject them without the user knowing. In particular, what if you have `rot = some expensive computation`, then you create your manifold (with not having created a `grad`) and all of a sudden, your `rot` computation is gone. On the other side, what if we add a different `grad` to the global namespace, something I think could happen, then you will not get these injections.
> 


Thanks for these explanations. I totally overlooked this point... I am now 100% convinced that injecting silently names in the global namespace is a very bad thing.


> I agree that they should be in the global namespace from the start and would making this issue moot. Some other thoughts that come to my mind is a function like `setup_manifolds_environment` and/or getting people who use SageManifolds to have a specific section to their `.sage/init.sage` file.


I'll think about this, given that the discussion on sage-devel leans toward not adding new stuff in the global namespace.



---

archive/issue_comments_363681.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-06T12:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363682.json:
```json
{
    "body": "<a id='comment:20'></a>Following the conclusions of the [sage-devel thread](https://groups.google.com/d/msg/sage-devel/iSFwyR2E1f8/_rssKxleAQAJ), the above commit allows only explicit imports of the type:\n\n```\nsage: from sage.manifolds.operators import *\n```\nto inject the differential operators in the global namespace (the [demo worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb) has been updated accordingly).\nBesides, this commit corrects the indentation of `.. MATH` blocks mentioned in comment:15.",
    "created_at": "2018-03-06T12:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363682",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>Following the conclusions of the [sage-devel thread](https://groups.google.com/d/msg/sage-devel/iSFwyR2E1f8/_rssKxleAQAJ), the above commit allows only explicit imports of the type:

```
sage: from sage.manifolds.operators import *
```
to inject the differential operators in the global namespace (the [demo worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb) has been updated accordingly).
Besides, this commit corrects the indentation of `.. MATH` blocks mentioned in comment:15.



---

archive/issue_comments_363683.json:
```json
{
    "body": "<a id='comment:21'></a>One little trivial thing: the functions are no longer global (at least, I am interpreting that as being in the global namespace):\n\n```diff\n-        The function :func:`~sage.manifolds.operators.laplacian` can be\n+        The global function :func:`~sage.manifolds.operators.laplacian` can be\n+        used instead of the method ``laplacian()``::\n```\nand similar for `div` and `curl`, etc.\nAlso, do you want to link `laplacition()` to a (the?) corresponding method via `:meth:`?",
    "created_at": "2018-03-06T22:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363683",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>One little trivial thing: the functions are no longer global (at least, I am interpreting that as being in the global namespace):

```diff
-        The function :func:`~sage.manifolds.operators.laplacian` can be
+        The global function :func:`~sage.manifolds.operators.laplacian` can be
+        used instead of the method ``laplacian()``::
```
and similar for `div` and `curl`, etc.
Also, do you want to link `laplacition()` to a (the?) corresponding method via `:meth:`?



---

archive/issue_comments_363684.json:
```json
{
    "body": "<a id='comment:22'></a>A few typos with proposed corrections:\n\n```diff\ndiff --git a/src/sage/manifolds/differentiable/pseudo_riemannian.py b/src/sage/manifolds/differentiable/pseudo_riemannian.py\nindex fcfbe500e1..d68d797096 100644\n--- a/src/sage/manifolds/differentiable/pseudo_riemannian.py\n+++ b/src/sage/manifolds/differentiable/pseudo_riemannian.py\n@@ -4,7 +4,7 @@ Pseudo-Riemannian Manifolds\n A *pseudo-Riemannian manifold* is a pair `(M,g)` where `M` is a real\n differentiable manifold `M` (see\n :class:`~sage.manifolds.differentiable.manifold.DifferentiableManifold`)\n-and `g` is a field non-degenerate symmetric bilinear forms on `M`, which is\n+and `g` is a field of non-degenerate symmetric bilinear forms on `M`, which is\n called the *metric tensor*, or simply the *metric* (see\n :class:`~sage.manifolds.differentiable.metric.PseudoRiemannianMetric`).\n \n@@ -58,7 +58,7 @@ We get the metric defining the Riemannian structure by::\n     sage: g\n     Riemannian metric g on the 2-dimensional Riemannian manifold S^2\n \n-At this stage, the metric `g` is defined a Python object but there remains to\n+At this stage, the metric `g` is defined as a Python object but there remains to\n initialize it by setting its components with respect to the vector frames\n associated with the stereographic coordinates. Let us begin with the frame\n of chart ``stereoN``::\n@@ -145,7 +145,7 @@ manifold, we can get the metric on it via the method ``metric()``::\n     sage: gU.display()\n     g = 4/(x^2 + y^2 + 1)^2 dx*dx + 4/(x^2 + y^2 + 1)^2 dy*dy\n \n-On course, ``gU`` is nothing but the restriction of `g` to `U`::\n+Of course, ``gU`` is nothing but the restriction of `g` to `U`::\n \n     sage: gU is g.restrict(U)\n     True\n@@ -153,7 +153,7 @@ On course, ``gU`` is nothing but the restriction of `g` to `U`::\n .. RUBRIC:: Example 2: Minkowski spacetime as a Lorentzian manifold of\n   dimension 4\n \n-We start by declaring 4-dimensional Lorentzian manifold::\n+We start by declaring a 4-dimensional Lorentzian manifold::\n \n     sage: M = Manifold(4, 'M', structure='Lorentzian')\n     sage: M\n@@ -223,7 +223,7 @@ class PseudoRiemannianManifold(DifferentiableManifold):\n     A *pseudo-Riemannian manifold* is a pair `(M,g)` where `M` is a real\n     differentiable manifold `M` (see\n     :class:`~sage.manifolds.differentiable.manifold.DifferentiableManifold`)\n-    and `g` is a field non-degenerate symmetric bilinear forms on `M`, which is\n+    and `g` is a field of non-degenerate symmetric bilinear forms on `M`, which is\n     called the *metric tensor*, or simply the *metric* (see\n     :class:`~sage.manifolds.differentiable.metric.PseudoRiemannianMetric`).\n \n@@ -405,7 +405,7 @@ class PseudoRiemannianManifold(DifferentiableManifold):\n                dest_map=None):\n         r\"\"\"\n         Return the metric giving the pseudo-Riemannian structure to the\n-        manifold, or defines a new metric tensor on the manifold.\n+        manifold, or define a new metric tensor on the manifold.\n \n         INPUT:\n \n```",
    "created_at": "2018-03-06T22:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363684",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'></a>A few typos with proposed corrections:

```diff
diff --git a/src/sage/manifolds/differentiable/pseudo_riemannian.py b/src/sage/manifolds/differentiable/pseudo_riemannian.py
index fcfbe500e1..d68d797096 100644
--- a/src/sage/manifolds/differentiable/pseudo_riemannian.py
+++ b/src/sage/manifolds/differentiable/pseudo_riemannian.py
@@ -4,7 +4,7 @@ Pseudo-Riemannian Manifolds
 A *pseudo-Riemannian manifold* is a pair `(M,g)` where `M` is a real
 differentiable manifold `M` (see
 :class:`~sage.manifolds.differentiable.manifold.DifferentiableManifold`)
-and `g` is a field non-degenerate symmetric bilinear forms on `M`, which is
+and `g` is a field of non-degenerate symmetric bilinear forms on `M`, which is
 called the *metric tensor*, or simply the *metric* (see
 :class:`~sage.manifolds.differentiable.metric.PseudoRiemannianMetric`).
 
@@ -58,7 +58,7 @@ We get the metric defining the Riemannian structure by::
     sage: g
     Riemannian metric g on the 2-dimensional Riemannian manifold S^2
 
-At this stage, the metric `g` is defined a Python object but there remains to
+At this stage, the metric `g` is defined as a Python object but there remains to
 initialize it by setting its components with respect to the vector frames
 associated with the stereographic coordinates. Let us begin with the frame
 of chart ``stereoN``::
@@ -145,7 +145,7 @@ manifold, we can get the metric on it via the method ``metric()``::
     sage: gU.display()
     g = 4/(x^2 + y^2 + 1)^2 dx*dx + 4/(x^2 + y^2 + 1)^2 dy*dy
 
-On course, ``gU`` is nothing but the restriction of `g` to `U`::
+Of course, ``gU`` is nothing but the restriction of `g` to `U`::
 
     sage: gU is g.restrict(U)
     True
@@ -153,7 +153,7 @@ On course, ``gU`` is nothing but the restriction of `g` to `U`::
 .. RUBRIC:: Example 2: Minkowski spacetime as a Lorentzian manifold of
   dimension 4
 
-We start by declaring 4-dimensional Lorentzian manifold::
+We start by declaring a 4-dimensional Lorentzian manifold::
 
     sage: M = Manifold(4, 'M', structure='Lorentzian')
     sage: M
@@ -223,7 +223,7 @@ class PseudoRiemannianManifold(DifferentiableManifold):
     A *pseudo-Riemannian manifold* is a pair `(M,g)` where `M` is a real
     differentiable manifold `M` (see
     :class:`~sage.manifolds.differentiable.manifold.DifferentiableManifold`)
-    and `g` is a field non-degenerate symmetric bilinear forms on `M`, which is
+    and `g` is a field of non-degenerate symmetric bilinear forms on `M`, which is
     called the *metric tensor*, or simply the *metric* (see
     :class:`~sage.manifolds.differentiable.metric.PseudoRiemannianMetric`).
 
@@ -405,7 +405,7 @@ class PseudoRiemannianManifold(DifferentiableManifold):
                dest_map=None):
         r"""
         Return the metric giving the pseudo-Riemannian structure to the
-        manifold, or defines a new metric tensor on the manifold.
+        manifold, or define a new metric tensor on the manifold.
 
         INPUT:
 
```



---

archive/issue_comments_363685.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-07T10:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_363686.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:21 tscrim]:\n> One little trivial thing: the functions are no longer global (at least, I am interpreting that as being in the global namespace):\n\n>\n> and similar for `div` and `curl`, etc.\n> Also, do you want to link `laplacition()` to a (the?) corresponding method via `:meth:`?\n\n\nThanks for pointing this. This is corrected in the above commit. I have also added some simple vector fields in the Minkowski spacetime example (example 2 at the top of `pseudo_riemannian.py`).",
    "created_at": "2018-03-07T10:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363686",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:24'></a>Replying to [comment:21 tscrim]:
> One little trivial thing: the functions are no longer global (at least, I am interpreting that as being in the global namespace):

>
> and similar for `div` and `curl`, etc.
> Also, do you want to link `laplacition()` to a (the?) corresponding method via `:meth:`?


Thanks for pointing this. This is corrected in the above commit. I have also added some simple vector fields in the Minkowski spacetime example (example 2 at the top of `pseudo_riemannian.py`).



---

archive/issue_comments_363687.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:22 jhpalmieri]:\n> A few typos with proposed corrections:\n\n\nThank you very much for these corrections. They are effective in the above commit.",
    "created_at": "2018-03-07T10:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363687",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:25'></a>Replying to [comment:22 jhpalmieri]:
> A few typos with proposed corrections:


Thank you very much for these corrections. They are effective in the above commit.



---

archive/issue_comments_363688.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-08T01:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363688",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_363689.json:
```json
{
    "body": "<a id='comment:26'></a>LGTM. Thank you.",
    "created_at": "2018-03-08T01:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363689",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>LGTM. Thank you.



---

archive/issue_comments_363690.json:
```json
{
    "body": "<a id='comment:27'></a>Thank you very much for the review!",
    "created_at": "2018-03-08T09:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363690",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:27'></a>Thank you very much for the review!



---

archive/issue_events_062028.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-19T07:57:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24622#event-62028"
}
```



---

archive/issue_comments_363691.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-19T07:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24622#issuecomment-363691",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
