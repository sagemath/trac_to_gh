# Issue 24020: Cygwin: misc test failures

archive/issues_023783.json:
```json
{
    "body": "A few tests have started failing on Cygwin, mostly since I had to take the Cygwin patchbot down:\n\n* `sage.env._add_variable_or_fallback` since #23758\n\n```\nFile \"src/sage/env.py\", line 75, in sage.env._add_variable_or_fallback\nFailed example:\n    sage.env.SAGE_ENV['TEMP']\nExpected:\n    '---foo---'\nGot:\n    '/tmp'\n```\n* `sage.misc.functional.log` since #19444 (due to a minor numerical difference I've observed before in `log(3.0)`).\n\n```\nFile \"src/sage/misc/functional.py\", line 986, in sage.misc.functional.log\nFailed example:\n    log(float(3))\nExpected:\n    1.0986122886681098\nGot:\n    1.0986122886681096\n```\n* `sage.symbolic.expression.Expression._eval_self` (I'm not sure but I'm guessing this is due to #23820 and thus small changes in pynac which could still be sensitive to small stdlib math implementation differences)\n\n```\nFile \"src/sage/symbolic/expression.pyx\", line 1183, in sage.symbolic.expression.Expression._eval_self\nFailed example:\n    float(cos(I))\nExpected:\n    1.5430806348152437\nGot:\n    1.543080634815244\n```\n\nI will probably try to tackle these all at once since they all seem to be pretty small issues just in the tests, but if any become more significant I'll create a separate ticket.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24020\n\n",
    "closed_at": "2017-10-16T22:44:54Z",
    "created_at": "2017-10-12T12:46:05Z",
    "labels": [
        "component: porting: cygwin",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Cygwin: misc test failures",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24020",
    "user": "https://github.com/embray"
}
```
A few tests have started failing on Cygwin, mostly since I had to take the Cygwin patchbot down:

* `sage.env._add_variable_or_fallback` since #23758

```
File "src/sage/env.py", line 75, in sage.env._add_variable_or_fallback
Failed example:
    sage.env.SAGE_ENV['TEMP']
Expected:
    '---foo---'
Got:
    '/tmp'
```
* `sage.misc.functional.log` since #19444 (due to a minor numerical difference I've observed before in `log(3.0)`).

```
File "src/sage/misc/functional.py", line 986, in sage.misc.functional.log
Failed example:
    log(float(3))
Expected:
    1.0986122886681098
Got:
    1.0986122886681096
```
* `sage.symbolic.expression.Expression._eval_self` (I'm not sure but I'm guessing this is due to #23820 and thus small changes in pynac which could still be sensitive to small stdlib math implementation differences)

```
File "src/sage/symbolic/expression.pyx", line 1183, in sage.symbolic.expression.Expression._eval_self
Failed example:
    float(cos(I))
Expected:
    1.5430806348152437
Got:
    1.543080634815244
```

I will probably try to tackle these all at once since they all seem to be pretty small issues just in the tests, but if any become more significant I'll create a separate ticket.

Issue created by migration from https://trac.sagemath.org/ticket/24020





---

archive/issue_comments_332813.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-10-12T13:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332813",
    "user": "https://github.com/embray"
}
```

New commits:



---

archive/issue_comments_332814.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-12T13:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332814",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_332815.json:
```json
{
    "body": "Had to add dependency on #23979 since the tests can't even be run without.",
    "created_at": "2017-10-12T13:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332815",
    "user": "https://github.com/embray"
}
```

Had to add dependency on #23979 since the tests can't even be run without.



---

archive/issue_comments_332816.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-12T13:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332816",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_332817.json:
```json
{
    "body": "These all make sense.",
    "created_at": "2017-10-12T13:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332817",
    "user": "https://github.com/jdemeyer"
}
```

These all make sense.



---

archive/issue_comments_332818.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-16T22:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24020#issuecomment-332818",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_061054.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-16T22:44:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24020",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24020#event-61054"
}
```
