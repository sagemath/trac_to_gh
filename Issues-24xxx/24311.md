# Issue 24311: fix algdep when it finds a constant polynomial

archive/issues_024074.json:
```json
{
    "body": "This problem:\n\n```\nsage: algdep(CC(-1)^(1/3),1)\nValueError: min() arg is an empty sequence\n```\nIt should just return some bogus polynomial of degree 1:\n\n```\nsage: algdep(CC(-1)^(1/7),1)\nx - 1\n```\n\nBranch/Commit: ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0\n\nReviewer: Jeroen Demeyer\n\nAuthor: Nils Bruin\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24311\n\n",
    "closed_at": "2017-12-13T17:37:34Z",
    "created_at": "2017-12-01T12:03:38Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "fix algdep when it finds a constant polynomial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24311",
    "user": "https://github.com/nbruin"
}
```
This problem:

```
sage: algdep(CC(-1)^(1/3),1)
ValueError: min() arg is an empty sequence
```
It should just return some bogus polynomial of degree 1:

```
sage: algdep(CC(-1)^(1/7),1)
x - 1
```

Branch/Commit: ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0

Reviewer: Jeroen Demeyer

Author: Nils Bruin

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24311





---

archive/issue_comments_460115.json:
```json
{
    "body": "Changing branch from \"\" to \"u/nbruin/algdep_error\"",
    "created_at": "2017-12-01T12:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460115",
    "user": "https://github.com/nbruin"
}
```

Changing branch from "" to "u/nbruin/algdep_error"



---

archive/issue_comments_460116.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[ac47f9f](https://git.sagemath.org/sage.git/commit?id=ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0)|`trac 24311: fix algdep for edge case`|",
    "created_at": "2017-12-01T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460116",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[ac47f9f](https://git.sagemath.org/sage.git/commit?id=ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0)|`trac 24311: fix algdep for edge case`|



---

archive/issue_comments_460117.json:
```json
{
    "body": "Changing author from \"\" to \"Nils Bruin\"",
    "created_at": "2017-12-01T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460117",
    "user": "https://github.com/nbruin"
}
```

Changing author from "" to "Nils Bruin"



---

archive/issue_comments_460118.json:
```json
{
    "body": "Changing commit from \"\" to \"ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0\"",
    "created_at": "2017-12-01T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460118",
    "user": "https://github.com/nbruin"
}
```

Changing commit from "" to "ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0"



---

archive/issue_comments_460119.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-01T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460119",
    "user": "https://github.com/nbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_460120.json:
```json
{
    "body": "<a id='comment:3'></a>\nWouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?",
    "created_at": "2017-12-01T12:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460120",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
Wouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?



---

archive/issue_comments_460121.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jdemeyer](#comment%3A3):\n> Wouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?\n\n\nIt's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the \"best\" irreducible polynomial that comes out of the problem when the \"best\" polynomial of degree at most d turns out to be a constant polynomial.",
    "created_at": "2017-12-01T14:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460121",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'></a>
Replying to [jdemeyer](#comment%3A3):
> Wouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?


It's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the "best" irreducible polynomial that comes out of the problem when the "best" polynomial of degree at most d turns out to be a constant polynomial.



---

archive/issue_comments_460122.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [nbruin](#comment%3A4):\n> It's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the \"best\" irreducible polynomial that comes out of the problem when the \"best\" polynomial of degree at most d turns out to be a constant polynomial.\n\n\nIt is true that your answer is the best possible, but it is still really really bad. So it looks pretty meaningless to return that.\n\nIf the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.",
    "created_at": "2017-12-01T15:50:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460122",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Replying to [nbruin](#comment%3A4):
> It's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the "best" irreducible polynomial that comes out of the problem when the "best" polynomial of degree at most d turns out to be a constant polynomial.


It is true that your answer is the best possible, but it is still really really bad. So it looks pretty meaningless to return that.

If the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.



---

archive/issue_comments_460123.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jdemeyer](#comment%3A5):\n> If the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.\n\n\nIt doesn't seem to be that bad. With the fix here we get:\n\n```\nsage: [(algdep(10*CC(-1)^(n/7),1),round((10*CC(-1)^(n/7)).real_part())) for n in range(10)]\n[(x - 10, 10),\n (x - 9, 9),\n (x - 6, 6),\n (x - 2, 2),\n (x + 2, -2),\n (x + 6, -6),\n (x + 9, -9),\n (x + 10, -10),\n (x + 9, -9),\n (x + 6, -6)]\n```\nwithout the fix we get a few of those answers already, so the fix does seem to make algdep behave more consistently.\n\nDegree 1 polynomials over ZZ are of course a little strange because their roots don't lie dense in CC, so the LLL problem gives vectors with surprisingly small coefficients evn when the fit is not very good.",
    "created_at": "2017-12-01T16:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460123",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:6'></a>
Replying to [jdemeyer](#comment%3A5):
> If the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.


It doesn't seem to be that bad. With the fix here we get:

```
sage: [(algdep(10*CC(-1)^(n/7),1),round((10*CC(-1)^(n/7)).real_part())) for n in range(10)]
[(x - 10, 10),
 (x - 9, 9),
 (x - 6, 6),
 (x - 2, 2),
 (x + 2, -2),
 (x + 6, -6),
 (x + 9, -9),
 (x + 10, -10),
 (x + 9, -9),
 (x + 6, -6)]
```
without the fix we get a few of those answers already, so the fix does seem to make algdep behave more consistently.

Degree 1 polynomials over ZZ are of course a little strange because their roots don't lie dense in CC, so the LLL problem gives vectors with surprisingly small coefficients evn when the fit is not very good.



---

archive/issue_comments_460124.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'm not convinced, but OK...",
    "created_at": "2017-12-04T08:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460124",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I'm not convinced, but OK...



---

archive/issue_comments_460125.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2017-12-04T08:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460125",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_460126.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-12-04T08:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460126",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_460127.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-13T17:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460127",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_460128.json:
```json
{
    "body": "Changing branch from \"u/nbruin/algdep_error\" to \"ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0\"",
    "created_at": "2017-12-13T17:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24311#issuecomment-460128",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/nbruin/algdep_error" to "ac47f9fecbcd5621500e1b1dde3a6a1a9e4a0ec0"



---

archive/issue_events_061524.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-13T17:37:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24311",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24311#event-61524"
}
```
