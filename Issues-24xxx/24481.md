# Issue 24481: Replace PARI stackwarn.patch with upstream version

archive/issues_024244.json:
```json
{
    "body": "Upstream PARI has finally accepted the patch `stackwarn.patch` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace `stackwarn.patch` by the version which was accepted upstream.\n\nCC:  @infinity0 @tobihan @videlec @defeo @embray @kiwifb\n\nBranch/Commit: 83410877bbea2744794485d896c7d55ac37763ee\n\nReviewer: Julian R\u00fcth\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24481\n\n",
    "closed_at": "2018-05-08T17:26:50Z",
    "created_at": "2018-01-07T09:11:52Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Replace PARI stackwarn.patch with upstream version",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24481",
    "user": "https://github.com/jdemeyer"
}
```
Upstream PARI has finally accepted the patch `stackwarn.patch` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace `stackwarn.patch` by the version which was accepted upstream.

CC:  @infinity0 @tobihan @videlec @defeo @embray @kiwifb

Branch/Commit: 83410877bbea2744794485d896c7d55ac37763ee

Reviewer: Julian RÃ¼th

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24481





---

archive/issue_comments_361324.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2018-01-07T09:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361324",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_361325.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Upstream PARI has finally accepted the patch \\`stackwarn.patch\\` which has been in Sage since about 2 years. Unfortunately, they decide to revert of that patch again. In this ticket, we replace \\`stackwarn.patch\\` by the version which was accepted upstream.\n+Upstream PARI has finally accepted the patch \\`stackwarn.patch\\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \\`stackwarn.patch\\` by the version which was accepted upstream.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2018-01-07T09:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361325",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Upstream PARI has finally accepted the patch \`stackwarn.patch\` which has been in Sage since about 2 years. Unfortunately, they decide to revert of that patch again. In this ticket, we replace \`stackwarn.patch\` by the version which was accepted upstream.
+Upstream PARI has finally accepted the patch \`stackwarn.patch\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \`stackwarn.patch\` by the version which was accepted upstream.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_361326.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-07T10:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361326",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_361327.json:
```json
{
    "body": "<a id='comment:5'></a>Genuine breakage on the Cygwin buildbot.",
    "created_at": "2018-01-10T09:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361327",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Genuine breakage on the Cygwin buildbot.



---

archive/issue_comments_361328.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-10T09:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361328",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_361329.json:
```json
{
    "body": "<a id='comment:6'></a>The problem is that `lcalc` is run in a different process so it is not affected by the change in the `debugmem` default.",
    "created_at": "2018-01-10T10:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361329",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>The problem is that `lcalc` is run in a different process so it is not affected by the change in the `debugmem` default.



---

archive/issue_comments_361330.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Upstream PARI has finally accepted the patch \\`stackwarn.patch\\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \\`stackwarn.patch\\` by the version which was accepted upstream. Unfortunately, this requires a patch to lcalc instead.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2018-01-10T10:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361330",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Upstream PARI has finally accepted the patch \`stackwarn.patch\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \`stackwarn.patch\` by the version which was accepted upstream. Unfortunately, this requires a patch to lcalc instead.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_361331.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Upstream PARI has finally accepted the patch \\`stackwarn.patch\\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \\`stackwarn.patch\\` by the version which was accepted upstream. Unfortunately, this requires a patch to lcalc instead (at least on Cygwin).\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2018-01-10T10:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361331",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Upstream PARI has finally accepted the patch \`stackwarn.patch\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \`stackwarn.patch\` by the version which was accepted upstream. Unfortunately, this requires a patch to lcalc instead (at least on Cygwin).
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_361332.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-10T10:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_361333.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-10T10:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361333",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_361334.json:
```json
{
    "body": "<a id='comment:11'></a>I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?",
    "created_at": "2018-01-10T12:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361334",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?



---

archive/issue_comments_361335.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 embray]:\n> I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?\n\n\nI have no idea why... I just noticed failures on the Cygwin patchbot and not on others.\n\nIn any case, the current branch should be tested on Cygwin before positive review can be given.",
    "created_at": "2018-01-10T12:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361335",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:11 embray]:
> I'm not sure I understand the connection to Cygwin--is it just because memory debugging messages are more likely to arise there?


I have no idea why... I just noticed failures on the Cygwin patchbot and not on others.

In any case, the current branch should be tested on Cygwin before positive review can be given.



---

archive/issue_comments_361336.json:
```json
{
    "body": "<a id='comment:13'></a>Oh I see--neat.  I've been having so many problems with the patchbot lately I was sort of surprised to see that it produced a useful result.  That's good to know...",
    "created_at": "2018-01-10T13:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361336",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>Oh I see--neat.  I've been having so many problems with the patchbot lately I was sort of surprised to see that it produced a useful result.  That's good to know...



---

archive/issue_comments_361337.json:
```json
{
    "body": "<a id='comment:14'></a>See related #24516",
    "created_at": "2018-01-11T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361337",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>See related #24516



---

archive/issue_comments_361338.json:
```json
{
    "body": "<a id='comment:15'></a>Actually, #24516 is unrelated. I *thought* that it was related because both this and #24516 deal with memory allocation warnings in PARI. But the warnings are different. This ticket deals with debug messages which are shown whenever the PARI stack size changes (and which can be disabled). The other ticket #24516 deals with messages which are shown when an allocation failed (and which cannot be disabled)",
    "created_at": "2018-01-11T15:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361338",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Actually, #24516 is unrelated. I *thought* that it was related because both this and #24516 deal with memory allocation warnings in PARI. But the warnings are different. This ticket deals with debug messages which are shown whenever the PARI stack size changes (and which can be disabled). The other ticket #24516 deals with messages which are shown when an allocation failed (and which cannot be disabled)



---

archive/issue_comments_361339.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-11T15:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_361340.json:
```json
{
    "body": "<a id='comment:17'></a>I removed the last commit because it is not needed for this ticket.",
    "created_at": "2018-01-11T15:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361340",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>I removed the last commit because it is not needed for this ticket.



---

archive/issue_comments_361341.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Upstream PARI has finally accepted the patch \\`stackwarn.patch\\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \\`stackwarn.patch\\` by the version which was accepted upstream.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2018-01-11T15:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361341",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Upstream PARI has finally accepted the patch \`stackwarn.patch\` which has been in Sage since about 2 years. However, the version which was accepted upstream is not exactly the patch from Sage. In this ticket, we replace \`stackwarn.patch\` by the version which was accepted upstream.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_361342.json:
```json
{
    "body": "<a id='comment:19'></a>Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?",
    "created_at": "2018-01-23T20:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361342",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?



---

archive/issue_comments_361343.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 fbissey]:\n> Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?\n\n\nUpdating the patch is trivially simple compared to updating PARI as a whole. That is the reason.",
    "created_at": "2018-01-23T21:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361343",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Replying to [comment:19 fbissey]:
> Just a quick question, is there a particular reason for updating the patch rather than updating the snapshot of pari?


Updating the patch is trivially simple compared to updating PARI as a whole. That is the reason.



---

archive/issue_comments_361344.json:
```json
{
    "body": "<a id='comment:21'></a>The last time the cygwin patchbot seemed to be happy. Has this been fixed now?",
    "created_at": "2018-04-03T20:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361344",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>The last time the cygwin patchbot seemed to be happy. Has this been fixed now?



---

archive/issue_comments_361345.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-04-03T20:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361345",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_361346.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 saraedum]:\n> Has *this* been fixed now?\n\n\nHas what been fixed?",
    "created_at": "2018-04-03T20:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361346",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Replying to [comment:21 saraedum]:
> Has *this* been fixed now?


Has what been fixed?



---

archive/issue_comments_361347.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 jdemeyer]:\n> Replying to [comment:21 saraedum]:\n> > Has *this* been fixed now?\n\n> \n> Has what been fixed?\n\n\nSorry: Have the cygwin issues mentioned above been fixed now? i.e., could this be merged now?",
    "created_at": "2018-04-03T21:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361347",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:23'></a>Replying to [comment:22 jdemeyer]:
> Replying to [comment:21 saraedum]:
> > Has *this* been fixed now?

> 
> Has what been fixed?


Sorry: Have the cygwin issues mentioned above been fixed now? i.e., could this be merged now?



---

archive/issue_comments_361348.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 saraedum]:\n> Have the cygwin issues mentioned above been fixed now?\n\n\nYes, they turned out to be unrelated to this ticket (that is also why I did not understand your question).",
    "created_at": "2018-04-04T05:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361348",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>Replying to [comment:23 saraedum]:
> Have the cygwin issues mentioned above been fixed now?


Yes, they turned out to be unrelated to this ticket (that is also why I did not understand your question).



---

archive/issue_comments_361349.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-04-04T05:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361349",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_361350.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-04T20:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361350",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061785.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:26:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24481#event-61785"
}
```



---

archive/issue_comments_361351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24481#issuecomment-361351",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
