# Issue 24989: G.edges_incident returns edges with vertices swapped

archive/issues_024752.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: G = (graphs.PathGraph(4)).relabel(immutable=True, inplace=False)\nsage: G.edges(labels=False)\n[(0, 1), (1, 2), (2, 3)]\nsage: G.edges_incident([1,2], labels=False)\n[(1, 0), (1, 2), (2, 3)]\n```\n\nI would expect that `G.edges_incident` returns a subset of `G.edges`\n\nBranch/Commit: **[u/gh-peelin/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-peelin/ticket24989) @ [9bfc199](https://github.com/sagemath/sagetrac-mirror/commit/9bfc1992cb8981f7be6a67a598cbbccf1bcc3442)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24989_\n\n",
    "created_at": "2018-03-15T20:17:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "G.edges_incident returns edges with vertices swapped",
    "type": "issue",
    "updated_at": "2023-01-08T08:37:21Z",
    "url": "https://github.com/sagemath/sage/issues/24989",
    "user": "https://github.com/mantepse"
}
```

```
sage: G = (graphs.PathGraph(4)).relabel(immutable=True, inplace=False)
sage: G.edges(labels=False)
[(0, 1), (1, 2), (2, 3)]
sage: G.edges_incident([1,2], labels=False)
[(1, 0), (1, 2), (2, 3)]
```

I would expect that `G.edges_incident` returns a subset of `G.edges`

Branch/Commit: **[u/gh-peelin/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-peelin/ticket24989) @ [9bfc199](https://github.com/sagemath/sagetrac-mirror/commit/9bfc1992cb8981f7be6a67a598cbbccf1bcc3442)**

_Issue created by migration from https://trac.sagemath.org/ticket/24989_





---

archive/issue_events_315804.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-03-15T20:17:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315804"
}
```



---

archive/issue_events_315805.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-03-15T20:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315805"
}
```



---

archive/issue_events_315806.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-03-15T20:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315806"
}
```



---

archive/issue_events_315807.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-03-15T20:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315807"
}
```



---

archive/issue_comments_383264.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThis is due to method `iterator_edges` of the `static_sparse_graph` backend.\n\n```\nsage: G = (graphs.PathGraph(4)).relabel(immutable=True, inplace=False)\nsage: G._backend\n<sage.graphs.base.static_sparse_backend.StaticSparseBackend object at 0x2198ceea8>\nsage: G.edges_incident([1,2], labels=False)\n[(1, 0), (1, 2), (2, 3)]\nsage: list(G.edge_iterator([1,2], labels=False))\n[(1, 0), (1, 2), (2, 3)]\nsage:\nsage: G = (graphs.PathGraph(4)).relabel(immutable=False, inplace=False)\nsage: G._backend\n<sage.graphs.base.sparse_graph.SparseGraphBackend object at 0x218d369d0>\nsage: G.edges_incident([1,2], labels=False)\n[(0, 1), (1, 2), (2, 3)]\nsage: list(G.edge_iterator([1,2], labels=False))\n[(0, 1), (1, 2), (2, 3)]\n```",
    "created_at": "2018-03-16T08:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383264",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'>Comment 1:</a>
This is due to method `iterator_edges` of the `static_sparse_graph` backend.

```
sage: G = (graphs.PathGraph(4)).relabel(immutable=True, inplace=False)
sage: G._backend
<sage.graphs.base.static_sparse_backend.StaticSparseBackend object at 0x2198ceea8>
sage: G.edges_incident([1,2], labels=False)
[(1, 0), (1, 2), (2, 3)]
sage: list(G.edge_iterator([1,2], labels=False))
[(1, 0), (1, 2), (2, 3)]
sage:
sage: G = (graphs.PathGraph(4)).relabel(immutable=False, inplace=False)
sage: G._backend
<sage.graphs.base.sparse_graph.SparseGraphBackend object at 0x218d369d0>
sage: G.edges_incident([1,2], labels=False)
[(0, 1), (1, 2), (2, 3)]
sage: list(G.edge_iterator([1,2], labels=False))
[(0, 1), (1, 2), (2, 3)]
```



---

archive/issue_events_315808.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-02-08T19:09:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315808"
}
```



---

archive/issue_comments_383265.json:
```json
{
    "body": "Branch: **[u/vipul_gupta/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/vipul_gupta/ticket24989)**",
    "created_at": "2020-02-08T19:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383265",
    "user": "https://github.com/vipul79321"
}
```

Branch: **[u/vipul_gupta/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/vipul_gupta/ticket24989)**



---

archive/issue_comments_383266.json:
```json
{
    "body": "Changed branch from **[u/vipul_gupta/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/vipul_gupta/ticket24989)** to none",
    "created_at": "2020-02-08T19:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383266",
    "user": "https://github.com/vipul79321"
}
```

Changed branch from **[u/vipul_gupta/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/vipul_gupta/ticket24989)** to none



---

archive/issue_events_315809.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-02-08T19:14:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315809"
}
```



---

archive/issue_events_315810.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-02-08T19:14:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315810"
}
```



---

archive/issue_comments_383267.json:
```json
{
    "body": "Branch: **[u/gh-vipul79321/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vipul79321/ticket24989)**",
    "created_at": "2020-02-08T19:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383267",
    "user": "https://github.com/vipul79321"
}
```

Branch: **[u/gh-vipul79321/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vipul79321/ticket24989)**



---

archive/issue_comments_383268.json:
```json
{
    "body": "Commit: **[89b9695](https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970)**",
    "created_at": "2020-02-08T19:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383268",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[89b9695](https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970)**



---

archive/issue_comments_383269.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cef6f9ed666d6aeb588567a80df19153a4390e86\">cef6f9e</a></td><td><code>Edges_incident modified</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970\">89b9695</a></td><td><code>Edges_incident modified</code></td></tr></table>\n",
    "created_at": "2020-02-08T19:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383269",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cef6f9ed666d6aeb588567a80df19153a4390e86">cef6f9e</a></td><td><code>Edges_incident modified</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970">89b9695</a></td><td><code>Edges_incident modified</code></td></tr></table>




---

archive/issue_events_315811.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-02-08T19:42:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315811"
}
```



---

archive/issue_events_315812.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-02-08T19:42:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315812"
}
```



---

archive/issue_events_315813.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-02-09T10:44:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315813"
}
```



---

archive/issue_events_315814.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-02-09T10:44:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315814"
}
```



---

archive/issue_comments_383270.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nNo, this is not an acceptable solution. We do our best to provide as fast as possible solutions and making a copy of the graph is a too expensive operation for this purpose. Furthermore, it is not algorithmically sounded as it relies only on the way the copy is done. \n\nThe problem must be fixed in the backend.",
    "created_at": "2020-02-09T10:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383270",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'>Comment 8:</a>
No, this is not an acceptable solution. We do our best to provide as fast as possible solutions and making a copy of the graph is a too expensive operation for this purpose. Furthermore, it is not algorithmically sounded as it relies only on the way the copy is done. 

The problem must be fixed in the backend.



---

archive/issue_events_315815.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-02-09T10:44:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315815"
}
```



---

archive/issue_events_315816.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-02-09T10:44:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315816"
}
```



---

archive/issue_comments_383271.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@dcoudert](#comment%3A8):\n> No, this is not an acceptable solution. We do our best to provide as fast as possible solutions and making a copy of the graph is a too expensive operation for this purpose. Furthermore, it is not algorithmically sounded as it relies only on the way the copy is done.\n\nYeah, I agree that it is not fast. We can also try to pass another argument 'bool is_immutable'. So that our function will make copy of the graph only when it is immutable. \n> \n> The problem must be fixed in the backend.\n\nI dont think it is worth it to make changes in backend for this purpose.",
    "created_at": "2020-02-09T10:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383271",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@dcoudert](#comment%3A8):
> No, this is not an acceptable solution. We do our best to provide as fast as possible solutions and making a copy of the graph is a too expensive operation for this purpose. Furthermore, it is not algorithmically sounded as it relies only on the way the copy is done.

Yeah, I agree that it is not fast. We can also try to pass another argument 'bool is_immutable'. So that our function will make copy of the graph only when it is immutable. 
> 
> The problem must be fixed in the backend.

I dont think it is worth it to make changes in backend for this purpose.



---

archive/issue_comments_383272.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThis problem must be fixed without copy of the graph, and FYI, we can check if a graph is immutable or not using `G.is_immutable()`.",
    "created_at": "2020-02-09T11:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383272",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'>Comment 10:</a>
This problem must be fixed without copy of the graph, and FYI, we can check if a graph is immutable or not using `G.is_immutable()`.



---

archive/issue_events_315817.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315817"
}
```



---

archive/issue_events_315818.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315818"
}
```



---

archive/issue_comments_383273.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383273",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_315819.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315819"
}
```



---

archive/issue_events_315820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315820"
}
```



---

archive/issue_events_315821.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315821"
}
```



---

archive/issue_events_315822.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315822"
}
```



---

archive/issue_comments_383274.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_315823.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315823"
}
```



---

archive/issue_events_315824.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315824"
}
```



---

archive/issue_events_315825.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315825"
}
```



---

archive/issue_events_315826.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315826"
}
```



---

archive/issue_events_315827.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315827"
}
```



---

archive/issue_events_315828.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315828"
}
```



---

archive/issue_events_315829.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315829"
}
```



---

archive/issue_events_315830.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315830"
}
```



---

archive/issue_comments_383275.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nNew commit:\n\nhttps://github.com/sagemath/sagetrac-mirror/commits/u/gh-peelin/ticket24989",
    "created_at": "2022-12-15T23:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383275",
    "user": "https://github.com/peelin"
}
```

<a id='comment:18'>Comment 18:</a>
New commit:

https://github.com/sagemath/sagetrac-mirror/commits/u/gh-peelin/ticket24989



---

archive/issue_comments_383276.json:
```json
{
    "body": "Changed commit from **[89b9695](https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970)** to **[9bfc199](https://github.com/sagemath/sagetrac-mirror/commit/9bfc1992cb8981f7be6a67a598cbbccf1bcc3442)**",
    "created_at": "2022-12-15T23:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383276",
    "user": "https://github.com/peelin"
}
```

Changed commit from **[89b9695](https://github.com/sagemath/sagetrac-mirror/commit/89b9695c2238950cedeb01ed034a3002f8fab970)** to **[9bfc199](https://github.com/sagemath/sagetrac-mirror/commit/9bfc1992cb8981f7be6a67a598cbbccf1bcc3442)**



---

archive/issue_events_315831.json:
```json
{
    "actor": "https://github.com/peelin",
    "created_at": "2022-12-15T23:19:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315831"
}
```



---

archive/issue_events_315832.json:
```json
{
    "actor": "https://github.com/peelin",
    "created_at": "2022-12-15T23:19:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315832"
}
```



---

archive/issue_comments_383277.json:
```json
{
    "body": "Changed branch from **[u/gh-vipul79321/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vipul79321/ticket24989)** to **[u/gh-peelin/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-peelin/ticket24989)**",
    "created_at": "2022-12-15T23:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383277",
    "user": "https://github.com/peelin"
}
```

Changed branch from **[u/gh-vipul79321/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vipul79321/ticket24989)** to **[u/gh-peelin/ticket24989](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-peelin/ticket24989)**



---

archive/issue_events_315833.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-12-17T08:06:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315833"
}
```



---

archive/issue_events_315834.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-12-17T08:06:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315834"
}
```



---

archive/issue_comments_383278.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI  see 2 issues in your code\n\n```diff\n-                if j < i and j in b_vertices:\n-                    continue\n+\n+                # Guarantees that vertex ordering is consistent\n+                if j < i:\n+                    if j in b_vertices:\n+                        continue\n+                    else:\n+                        v1, v2 = self._vertex_to_labels[j], vi\n+                else:\n+                    v1, v2 = vi, self._vertex_to_labels[j]\n```\n\n- an an edge can now be returned twice. Before an edge was returned only when `j >= i`\n- you assume that if `i < j` then the label of `i` is smaller than the label of `j`, but there is no reason for that.",
    "created_at": "2022-12-17T08:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383278",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'>Comment 19:</a>
I  see 2 issues in your code

```diff
-                if j < i and j in b_vertices:
-                    continue
+
+                # Guarantees that vertex ordering is consistent
+                if j < i:
+                    if j in b_vertices:
+                        continue
+                    else:
+                        v1, v2 = self._vertex_to_labels[j], vi
+                else:
+                    v1, v2 = vi, self._vertex_to_labels[j]
```

- an an edge can now be returned twice. Before an edge was returned only when `j >= i`
- you assume that if `i < j` then the label of `i` is smaller than the label of `j`, but there is no reason for that.



---

archive/issue_comments_383279.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [David Coudert](#comment%3A19):\n> I  see 2 issues in your code\n> \n> ```diff\n> -                if j < i and j in b_vertices:\n> -                    continue\n> +\n> +                # Guarantees that vertex ordering is consistent\n> +                if j < i:\n> +                    if j in b_vertices:\n> +                        continue\n> +                    else:\n> +                        v1, v2 = self._vertex_to_labels[j], vi\n> +                else:\n> +                    v1, v2 = vi, self._vertex_to_labels[j]\n> ```\n> \n> - an an edge can now be returned twice. Before an edge was returned only when `j >= i`\n> - you assume that if `i < j` then the label of `i` is smaller than the label of `j`, but there is no reason for that.\n\n- The edges returned are the same edges as the ones returned before: which was when `j>=i or  j not in b_vertices`. I used a nested if statement to minimize the performance penalty from this change.\n\n- I am not claiming that the output edge (v1, v2) will satisfy v1 < v2, in fact the vertex labels might not even be comparable. I am only guaranteeing that if the edge is output as (v1, v2), then any other time this edge appears (in a different call), only (v1, v2) will be seen and not (v2, v1). I believe this fixes the issue because `G.edges` also internally calls `iterator_edges`.",
    "created_at": "2022-12-17T16:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383279",
    "user": "https://github.com/peelin"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [David Coudert](#comment%3A19):
> I  see 2 issues in your code
> 
> ```diff
> -                if j < i and j in b_vertices:
> -                    continue
> +
> +                # Guarantees that vertex ordering is consistent
> +                if j < i:
> +                    if j in b_vertices:
> +                        continue
> +                    else:
> +                        v1, v2 = self._vertex_to_labels[j], vi
> +                else:
> +                    v1, v2 = vi, self._vertex_to_labels[j]
> ```
> 
> - an an edge can now be returned twice. Before an edge was returned only when `j >= i`
> - you assume that if `i < j` then the label of `i` is smaller than the label of `j`, but there is no reason for that.

- The edges returned are the same edges as the ones returned before: which was when `j>=i or  j not in b_vertices`. I used a nested if statement to minimize the performance penalty from this change.

- I am not claiming that the output edge (v1, v2) will satisfy v1 < v2, in fact the vertex labels might not even be comparable. I am only guaranteeing that if the edge is output as (v1, v2), then any other time this edge appears (in a different call), only (v1, v2) will be seen and not (v2, v1). I believe this fixes the issue because `G.edges` also internally calls `iterator_edges`.



---

archive/issue_comments_383280.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nRight, I was too fast in real the code.\n\nI did some tests and it seems ok, but let's wait for the patchbot.",
    "created_at": "2022-12-17T16:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383280",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'>Comment 21:</a>
Right, I was too fast in real the code.

I did some tests and it seems ok, but let's wait for the patchbot.



---

archive/issue_events_315835.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-12-17T16:50:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315835"
}
```



---

archive/issue_events_315836.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-12-17T16:50:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315836"
}
```



---

archive/issue_comments_383281.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nWith this ticket, I have multiple errors in `src/doc/en/thematic_tutorials/sandpile.rst`\n\n```\nsage -t --long --warn-long 41.0 --random-seed=245140629978355769158177766250603673903 src/doc/en/thematic_tutorials/sandpile.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 99, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    S.out_degree()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.sandpile[4]>\", line 1, in <module>\n        S.out_degree()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 1034, in out_degree\n        return self._out_degrees\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 683, in __getattr__\n        self._set_out_degrees()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 1009, in _set_out_degrees\n        for e in self.edges_incident(v):\n      File \"/home/dcoudert/sage/src/sage/graphs/generic_graph.py\", line 12589, in edges_incident\n        self = self.copy(immutable=False)\n      File \"/home/dcoudert/sage/src/sage/graphs/generic_graph.py\", line 1185, in copy\n        G = self.__class__(self, name=self.name(), pos=copy(self._pos),\n    TypeError: Sandpile.__init__() got an unexpected keyword argument 'name'\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 104, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    c.fire_vertex(1)\nExpected:\n    {1: 1, 2: 1, 3: 3}\nGot:\n    {1: 5, 2: 1, 3: 3}\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 114, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    c.stabilize()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.sandpile[7]>\", line 1, in <module>\n        c.stabilize()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3680, in stabilize\n        return self._stabilize[0]\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3046, in __getattr__\n        self._set_stabilize()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3639, in _set_stabilize\n        dm = divmod(c[v],s.out_degree(v))\n      File \"sage/structure/element.pyx\", line 2806, in sage.structure.element.RingElement.__divmod__\n        return self.quo_rem(other)\n      File \"sage/rings/integer.pyx\", line 3438, in sage.rings.integer.Integer.quo_rem\n        raise ZeroDivisionError(\"Integer division by zero\")\n    ZeroDivisionError: Integer division by zero\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 119, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    ~c             # shorthand for c.stabilize()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.sandpile[8]>\", line 1, in <module>\n        ~c             # shorthand for c.stabilize()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3699, in __invert__\n        return self._stabilize[0]\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3046, in __getattr__\n        self._set_stabilize()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3639, in _set_stabilize\n        dm = divmod(c[v],s.out_degree(v))\n      File \"sage/structure/element.pyx\", line 2806, in sage.structure.element.RingElement.__divmod__\n        return self.quo_rem(other)\n      File \"sage/rings/integer.pyx\", line 3438, in sage.rings.integer.Integer.quo_rem\n        raise ZeroDivisionError(\"Integer division by zero\")\n    ZeroDivisionError: Integer division by zero\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 121, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    c.stabilize(with_firing_vector=true)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dcoudert/sage/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.sandpile[9]>\", line 1, in <module>\n        c.stabilize(with_firing_vector=true)\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3678, in stabilize\n        return self._stabilize\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3046, in __getattr__\n        self._set_stabilize()\n      File \"/home/dcoudert/sage/src/sage/sandpiles/sandpile.py\", line 3639, in _set_stabilize\n        dm = divmod(c[v],s.out_degree(v))\n      File \"sage/structure/element.pyx\", line 2806, in sage.structure.element.RingElement.__divmod__\n        return self.quo_rem(other)\n      File \"sage/rings/integer.pyx\", line 3438, in sage.rings.integer.Integer.quo_rem\n        raise ZeroDivisionError(\"Integer division by zero\")\n    ZeroDivisionError: Integer division by zero\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/sandpile.rst\", line 186, in doc.en.thematic_tutorials.sandpile\nFailed example:\n    c.fire_vertex(1).values()\nExpected:\n    [1, 1, 3]\nGot:\n    [5, 1, 3]\n...\n```",
    "created_at": "2023-01-08T08:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24989#issuecomment-383281",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'>Comment 22:</a>
With this ticket, I have multiple errors in `src/doc/en/thematic_tutorials/sandpile.rst`

```
sage -t --long --warn-long 41.0 --random-seed=245140629978355769158177766250603673903 src/doc/en/thematic_tutorials/sandpile.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 99, in doc.en.thematic_tutorials.sandpile
Failed example:
    S.out_degree()
Exception raised:
    Traceback (most recent call last):
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.sandpile[4]>", line 1, in <module>
        S.out_degree()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 1034, in out_degree
        return self._out_degrees
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 683, in __getattr__
        self._set_out_degrees()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 1009, in _set_out_degrees
        for e in self.edges_incident(v):
      File "/home/dcoudert/sage/src/sage/graphs/generic_graph.py", line 12589, in edges_incident
        self = self.copy(immutable=False)
      File "/home/dcoudert/sage/src/sage/graphs/generic_graph.py", line 1185, in copy
        G = self.__class__(self, name=self.name(), pos=copy(self._pos),
    TypeError: Sandpile.__init__() got an unexpected keyword argument 'name'
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 104, in doc.en.thematic_tutorials.sandpile
Failed example:
    c.fire_vertex(1)
Expected:
    {1: 1, 2: 1, 3: 3}
Got:
    {1: 5, 2: 1, 3: 3}
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 114, in doc.en.thematic_tutorials.sandpile
Failed example:
    c.stabilize()
Exception raised:
    Traceback (most recent call last):
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.sandpile[7]>", line 1, in <module>
        c.stabilize()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3680, in stabilize
        return self._stabilize[0]
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3046, in __getattr__
        self._set_stabilize()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3639, in _set_stabilize
        dm = divmod(c[v],s.out_degree(v))
      File "sage/structure/element.pyx", line 2806, in sage.structure.element.RingElement.__divmod__
        return self.quo_rem(other)
      File "sage/rings/integer.pyx", line 3438, in sage.rings.integer.Integer.quo_rem
        raise ZeroDivisionError("Integer division by zero")
    ZeroDivisionError: Integer division by zero
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 119, in doc.en.thematic_tutorials.sandpile
Failed example:
    ~c             # shorthand for c.stabilize()
Exception raised:
    Traceback (most recent call last):
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.sandpile[8]>", line 1, in <module>
        ~c             # shorthand for c.stabilize()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3699, in __invert__
        return self._stabilize[0]
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3046, in __getattr__
        self._set_stabilize()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3639, in _set_stabilize
        dm = divmod(c[v],s.out_degree(v))
      File "sage/structure/element.pyx", line 2806, in sage.structure.element.RingElement.__divmod__
        return self.quo_rem(other)
      File "sage/rings/integer.pyx", line 3438, in sage.rings.integer.Integer.quo_rem
        raise ZeroDivisionError("Integer division by zero")
    ZeroDivisionError: Integer division by zero
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 121, in doc.en.thematic_tutorials.sandpile
Failed example:
    c.stabilize(with_firing_vector=true)
Exception raised:
    Traceback (most recent call last):
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dcoudert/sage/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.sandpile[9]>", line 1, in <module>
        c.stabilize(with_firing_vector=true)
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3678, in stabilize
        return self._stabilize
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3046, in __getattr__
        self._set_stabilize()
      File "/home/dcoudert/sage/src/sage/sandpiles/sandpile.py", line 3639, in _set_stabilize
        dm = divmod(c[v],s.out_degree(v))
      File "sage/structure/element.pyx", line 2806, in sage.structure.element.RingElement.__divmod__
        return self.quo_rem(other)
      File "sage/rings/integer.pyx", line 3438, in sage.rings.integer.Integer.quo_rem
        raise ZeroDivisionError("Integer division by zero")
    ZeroDivisionError: Integer division by zero
**********************************************************************
File "src/doc/en/thematic_tutorials/sandpile.rst", line 186, in doc.en.thematic_tutorials.sandpile
Failed example:
    c.fire_vertex(1).values()
Expected:
    [1, 1, 3]
Got:
    [5, 1, 3]
...
```



---

archive/issue_events_315837.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2023-01-08T08:37:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315837"
}
```



---

archive/issue_events_315838.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2023-01-08T08:37:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24989#event-315838"
}
```
