# Issue 24819: sbox linear approximation matrix scaling

archive/issues_024582.json:
```json
{
    "assignees": [
        "https://github.com/pfasante"
    ],
    "body": "as discussed here https://groups.google.com/forum/#!topic/sage-devel/l8N2wQl9WsY I would like to introduce an (optional) argument to the `linear_approximation_matrix` method on S-boxes, that allows to scale the output to the four typical use cases: biases, correlations, absolute biases, and fourier coefficients.\n\nThe current implementation returns absolute biases, which would thus be the default value to the `scale` argument.\n\nKeywords: **crypto, sbox, lat, linear approximation matrix**\n\nBranch/Commit: **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**\n\nReviewer: **Rusydi H. Makarim**\n\nAuthor: **Friedrich Wiemer**\n\nComponent: **cryptography**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24819_\n\n",
    "closed_at": "2018-03-19T07:57:49Z",
    "created_at": "2018-02-22T13:44:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20cryptography",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sbox linear approximation matrix scaling",
    "type": "issue",
    "updated_at": "2018-03-19T07:57:49Z",
    "url": "https://github.com/sagemath/sage/issues/24819",
    "user": "https://github.com/pfasante"
}
```
as discussed here https://groups.google.com/forum/#!topic/sage-devel/l8N2wQl9WsY I would like to introduce an (optional) argument to the `linear_approximation_matrix` method on S-boxes, that allows to scale the output to the four typical use cases: biases, correlations, absolute biases, and fourier coefficients.

The current implementation returns absolute biases, which would thus be the default value to the `scale` argument.

Keywords: **crypto, sbox, lat, linear approximation matrix**

Branch/Commit: **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**

Reviewer: **Rusydi H. Makarim**

Author: **Friedrich Wiemer**

Component: **cryptography**

_Issue created by migration from https://trac.sagemath.org/ticket/24819_





---

archive/issue_events_343530.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T13:44:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343530"
}
```



---

archive/issue_events_343531.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T13:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20cryptography",
    "label_color": "0000ff",
    "label_name": "c: cryptography",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343531"
}
```



---

archive/issue_events_343532.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T13:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343532"
}
```



---

archive/issue_events_343533.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T13:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343533"
}
```



---

archive/issue_events_343534.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T13:44:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "subject": "https://github.com/pfasante",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343534"
}
```



---

archive/issue_comments_377311.json:
```json
{
    "body": "Branch: **[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)**",
    "created_at": "2018-02-22T14:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377311",
    "user": "https://github.com/pfasante"
}
```

Branch: **[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)**



---

archive/issue_comments_377312.json:
```json
{
    "body": "Commit: **[`1f2942b`](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)**",
    "created_at": "2018-02-22T14:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377312",
    "user": "https://github.com/pfasante"
}
```

Commit: **[`1f2942b`](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)**



---

archive/issue_events_343535.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T14:54:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343535"
}
```



---

archive/issue_comments_377313.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd\">1f2942b</a></td><td><code>add scale argument to linear approximation matrix method</code></td></tr></table>\n",
    "created_at": "2018-02-22T14:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377313",
    "user": "https://github.com/pfasante"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd">1f2942b</a></td><td><code>add scale argument to linear approximation matrix method</code></td></tr></table>




---

archive/issue_comments_377314.json:
```json
{
    "body": "Changed commit from **[`1f2942b`](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)** to **[`ec8284c`](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)**",
    "created_at": "2018-02-22T14:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377314",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f2942b`](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)** to **[`ec8284c`](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)**



---

archive/issue_comments_377315.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1\">ec8284c</a></td><td><code>fix docstring enumeration</code></td></tr></table>\n",
    "created_at": "2018-02-22T14:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377315",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1">ec8284c</a></td><td><code>fix docstring enumeration</code></td></tr></table>




---

archive/issue_comments_377316.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHi Friedrich,\n\nYou can remove \"B\" and the nested for-loop. The list \"L\" can be constructed as\n\n```\nL = [ self.component_function(i).walsh_hadamard_transform() for i in range(ncols) ]\n```\n\nRegards,\nRusydi",
    "created_at": "2018-02-23T21:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377316",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:5" align="right">comment:5</div>

Hi Friedrich,

You can remove "B" and the nested for-loop. The list "L" can be constructed as

```
L = [ self.component_function(i).walsh_hadamard_transform() for i in range(ncols) ]
```

Regards,
Rusydi



---

archive/issue_comments_377317.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nRunning `make doc-html` produces the following error in my machine\n\n```\n[dochtml] [cryptogra] loading pickled environment... not yet created\n[dochtml] [cryptogra] building [mo]: targets for 0 po files that are out of date\n[dochtml] [cryptogra] building [inventory]: targets for 19 source files that are out of date\n[dochtml] [cryptogra] updating environment: 19 added, 0 changed, 0 removed\n[dochtml] [cryptogra] reading sources... [  5%] index\n[dochtml] [cryptogra] reading sources... [ 10%] sage/crypto/block_cipher/miniaes\n[dochtml] [cryptogra] reading sources... [ 15%] sage/crypto/block_cipher/sdes\n[dochtml] [cryptogra] reading sources... [ 21%] sage/crypto/boolean_function\n[dochtml] [cryptogra] reading sources... [ 26%] sage/crypto/cipher\n[dochtml] [cryptogra] reading sources... [ 31%] sage/crypto/classical\n[dochtml] [cryptogra] reading sources... [ 36%] sage/crypto/classical_cipher\n[dochtml] [cryptogra] reading sources... [ 42%] sage/crypto/cryptosystem\n[dochtml] [cryptogra] reading sources... [ 47%] sage/crypto/lattice\n[dochtml] [cryptogra] reading sources... [ 52%] sage/crypto/lfsr\n[dochtml] [cryptogra] reading sources... [ 57%] sage/crypto/lwe\n[dochtml] [cryptogra] reading sources... [ 63%] sage/crypto/mq/mpolynomialsystemgenerator\n[dochtml] [cryptogra] reading sources... [ 68%] sage/crypto/mq/rijndael_gf\n[dochtml] [cryptogra] reading sources... [ 73%] sage/crypto/mq/sr\n[dochtml] [cryptogra] reading sources... [ 78%] sage/crypto/public_key/blum_goldwasser\n[dochtml] [cryptogra] reading sources... [ 84%] sage/crypto/sbox\n[dochtml] [cryptogra] reading sources... [ 89%] sage/crypto/stream\n[dochtml] [cryptogra] reading sources... [ 94%] sage/crypto/stream_cipher\n[dochtml] [cryptogra] reading sources... [100%] sage/crypto/util\n[dochtml] [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 246, in build_many\n[dochtml]     ret = x.get(99999)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/multiprocessing/pool.py\", line 572, in get\n[dochtml]     raise self._value\n[dochtml] OSError: [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.\n[dochtml] \nMakefile:1002: recipe for target 'doc-html' failed\nmake[1]: *** [doc-html] Error 1\nmake[1]: Leaving directory '/home/makarim/sage/build/make'\n\nreal\t4m16.422s\nuser\t12m7.154s\nsys\t0m24.788s\n***************************************************************\n```",
    "created_at": "2018-02-23T22:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377317",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:6" align="right">comment:6</div>

Running `make doc-html` produces the following error in my machine

```
[dochtml] [cryptogra] loading pickled environment... not yet created
[dochtml] [cryptogra] building [mo]: targets for 0 po files that are out of date
[dochtml] [cryptogra] building [inventory]: targets for 19 source files that are out of date
[dochtml] [cryptogra] updating environment: 19 added, 0 changed, 0 removed
[dochtml] [cryptogra] reading sources... [  5%] index
[dochtml] [cryptogra] reading sources... [ 10%] sage/crypto/block_cipher/miniaes
[dochtml] [cryptogra] reading sources... [ 15%] sage/crypto/block_cipher/sdes
[dochtml] [cryptogra] reading sources... [ 21%] sage/crypto/boolean_function
[dochtml] [cryptogra] reading sources... [ 26%] sage/crypto/cipher
[dochtml] [cryptogra] reading sources... [ 31%] sage/crypto/classical
[dochtml] [cryptogra] reading sources... [ 36%] sage/crypto/classical_cipher
[dochtml] [cryptogra] reading sources... [ 42%] sage/crypto/cryptosystem
[dochtml] [cryptogra] reading sources... [ 47%] sage/crypto/lattice
[dochtml] [cryptogra] reading sources... [ 52%] sage/crypto/lfsr
[dochtml] [cryptogra] reading sources... [ 57%] sage/crypto/lwe
[dochtml] [cryptogra] reading sources... [ 63%] sage/crypto/mq/mpolynomialsystemgenerator
[dochtml] [cryptogra] reading sources... [ 68%] sage/crypto/mq/rijndael_gf
[dochtml] [cryptogra] reading sources... [ 73%] sage/crypto/mq/sr
[dochtml] [cryptogra] reading sources... [ 78%] sage/crypto/public_key/blum_goldwasser
[dochtml] [cryptogra] reading sources... [ 84%] sage/crypto/sbox
[dochtml] [cryptogra] reading sources... [ 89%] sage/crypto/stream
[dochtml] [cryptogra] reading sources... [ 94%] sage/crypto/stream_cipher
[dochtml] [cryptogra] reading sources... [100%] sage/crypto/util
[dochtml] [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
[dochtml]     builder()
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 246, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/multiprocessing/pool.py", line 572, in get
[dochtml]     raise self._value
[dochtml] OSError: [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.
[dochtml] 
Makefile:1002: recipe for target 'doc-html' failed
make[1]: *** [doc-html] Error 1
make[1]: Leaving directory '/home/makarim/sage/build/make'

real	4m16.422s
user	12m7.154s
sys	0m24.788s
***************************************************************
```



---

archive/issue_events_343536.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-23T23:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343536"
}
```



---

archive/issue_events_343537.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-23T23:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343537"
}
```



---

archive/issue_comments_377318.json:
```json
{
    "body": "Reviewer: **Rusydi H. Makarim**",
    "created_at": "2018-02-23T23:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377318",
    "user": "https://github.com/rusydi"
}
```

Reviewer: **Rusydi H. Makarim**



---

archive/issue_comments_377319.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abd73ad957efafe9a684485f126a441ed0776f9b\">abd73ad</a></td><td><code>simplify linear approximation matrix computation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa\">dd927aa</a></td><td><code>fix doc-html build error</code></td></tr></table>\n",
    "created_at": "2018-02-25T18:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377319",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abd73ad957efafe9a684485f126a441ed0776f9b">abd73ad</a></td><td><code>simplify linear approximation matrix computation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa">dd927aa</a></td><td><code>fix doc-html build error</code></td></tr></table>




---

archive/issue_comments_377320.json:
```json
{
    "body": "Changed commit from **[`ec8284c`](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)** to **[`dd927aa`](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)**",
    "created_at": "2018-02-25T18:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377320",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec8284c`](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)** to **[`dd927aa`](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)**



---

archive/issue_comments_377321.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGood catch with the nested for loops, now its much more clearer I think.\n\nI fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:\n\n```\n    There are three typical notations for this probability used in\n    the literature:\n\n    - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`, where `e(\\\\alpha, \\\\beta)` is called the bias,\n    - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`, where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n    - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`, where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n```\n\nHow do I correctly break these last three lines?",
    "created_at": "2018-02-25T18:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377321",
    "user": "https://github.com/pfasante"
}
```

<div id="comment:9" align="right">comment:9</div>

Good catch with the nested for loops, now its much more clearer I think.

I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:

```
    There are three typical notations for this probability used in
    the literature:

    - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`, where `e(\\alpha, \\beta)` is called the bias,
    - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`, where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
    - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`, where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
```

How do I correctly break these last three lines?



---

archive/issue_comments_377322.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@pfasante](#comment:9):\n> Good catch with the nested for loops, now its much more clearer I think.\n> \n> I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:\n> \n> ```\n>     There are three typical notations for this probability used in\n>     the literature:\n> \n>     - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`, where `e(\\\\alpha, \\\\beta)` is called the bias,\n>     - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`, where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n>     - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`, where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n> ```\n> \n> How do I correctly break these last three lines?\n\nYou can break it like this :\n\n```\n      There are three typical notations for this probability used in\n      the literature:\n \n      - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`,\n        where `e(\\\\alpha, \\\\beta)` is called the bias,\n      - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`,\n        where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n      - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`,\n        where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n```",
    "created_at": "2018-02-25T21:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377322",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@pfasante](#comment:9):
> Good catch with the nested for loops, now its much more clearer I think.
> 
> I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:
> 
> ```
>     There are three typical notations for this probability used in
>     the literature:
> 
>     - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`, where `e(\\alpha, \\beta)` is called the bias,
>     - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`, where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
>     - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`, where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
> ```
> 
> How do I correctly break these last three lines?

You can break it like this :

```
      There are three typical notations for this probability used in
      the literature:
 
      - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`,
        where `e(\\alpha, \\beta)` is called the bias,
      - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`,
        where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
      - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`,
        where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
```



---

archive/issue_comments_377323.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMore comments :\n\n1. Starts the docstring with `r\"\"\"`. In this way you can remove all the double backslash in latex notation (e.g. `\\\\alpha` becomes `\\alpha`)\n2. You forget the backslash in the definition `A[alpha, beta]` and put them in between backtick\n3. Existing notation used for dot product is `\\cdot` (e.g, see the description of autocorrelation_matrix() and component function() )\n4. Abbreviation LAT does not match with the function's name. I used LAM instead (e.g., see the description of linear_branch_number() ). Although this is somewhat different from standard terminology in literature, this matches the existing function's name to avoid confusion. But I do think in the future we should replace the word \"matrix\" to \"table\" in functions' name (initial committer for this module already used the terminology \"matrix\").",
    "created_at": "2018-02-25T22:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377323",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:11" align="right">comment:11</div>

More comments :

1. Starts the docstring with `r"""`. In this way you can remove all the double backslash in latex notation (e.g. `\\alpha` becomes `\alpha`)
2. You forget the backslash in the definition `A[alpha, beta]` and put them in between backtick
3. Existing notation used for dot product is `\cdot` (e.g, see the description of autocorrelation_matrix() and component function() )
4. Abbreviation LAT does not match with the function's name. I used LAM instead (e.g., see the description of linear_branch_number() ). Although this is somewhat different from standard terminology in literature, this matches the existing function's name to avoid confusion. But I do think in the future we should replace the word "matrix" to "table" in functions' name (initial committer for this module already used the terminology "matrix").



---

archive/issue_comments_377324.json:
```json
{
    "body": "Changed commit from **[`dd927aa`](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)** to **[`e72aae4`](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)**",
    "created_at": "2018-02-26T14:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377324",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dd927aa`](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)** to **[`e72aae4`](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)**



---

archive/issue_comments_377325.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e\">e72aae4</a></td><td><code>update docstring for linear_approximation_matrix</code></td></tr></table>\n",
    "created_at": "2018-02-26T14:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377325",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e">e72aae4</a></td><td><code>update docstring for linear_approximation_matrix</code></td></tr></table>




---

archive/issue_events_343538.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-26T14:08:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343538"
}
```



---

archive/issue_events_343539.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-26T14:08:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343539"
}
```



---

archive/issue_comments_377326.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi Friedrich,\n\nPlease make it clear in the documentation that `m` and `n` refers to the input and output size of the S-Box respectively.",
    "created_at": "2018-02-28T23:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377326",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi Friedrich,

Please make it clear in the documentation that `m` and `n` refers to the input and output size of the S-Box respectively.



---

archive/issue_events_343540.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-28T23:06:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343540"
}
```



---

archive/issue_events_343541.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-28T23:06:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343541"
}
```



---

archive/issue_comments_377327.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHi Friedrich,\n\nThis is just an opinion, so feel free to disagree. Instead of passing a string to parameter `scale`, why don't we let it to take the scaling factor directly. For instance, instead of calling `S.linear_approximation_matrix(scale=\"absolute_bias\")`, one may call it with `S.linear_approximation_matrix(scale=2)`. There are two advantages for this : it gives a far more flexibility and at the same time we free ourselves from explaining new terminologies associated with whatever scaling factor available in the literature.\n\nIn that case, the argument `scale` can be replaced to something like `scale_factor`",
    "created_at": "2018-03-05T14:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377327",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:16" align="right">comment:16</div>

Hi Friedrich,

This is just an opinion, so feel free to disagree. Instead of passing a string to parameter `scale`, why don't we let it to take the scaling factor directly. For instance, instead of calling `S.linear_approximation_matrix(scale="absolute_bias")`, one may call it with `S.linear_approximation_matrix(scale=2)`. There are two advantages for this : it gives a far more flexibility and at the same time we free ourselves from explaining new terminologies associated with whatever scaling factor available in the literature.

In that case, the argument `scale` can be replaced to something like `scale_factor`



---

archive/issue_comments_377328.json:
```json
{
    "body": "Changed commit from **[`e72aae4`](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)** to **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**",
    "created_at": "2018-03-08T09:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377328",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e72aae4`](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)** to **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**



---

archive/issue_comments_377329.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709\">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>\n",
    "created_at": "2018-03-08T09:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377329",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>




---

archive/issue_comments_377330.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI disagree with using a custom scaling factor.\n\nIf you actually need to change the factor, you can also easily scale it afterwards anyway.\n\nAdditional, having this scaling argument allows for a much clearer docstring, as we can use the common terms from literature to explain the function. I think its important to precisely say what the function returns and for this choosing from the common scalings used in the literature is the best way, I think.\n\nIt should also be quite unlikely that there will be a new scaling factor introduced.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709\">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>\n",
    "created_at": "2018-03-08T09:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377330",
    "user": "https://github.com/pfasante"
}
```

<div id="comment:18" align="right">comment:18</div>

I disagree with using a custom scaling factor.

If you actually need to change the factor, you can also easily scale it afterwards anyway.

Additional, having this scaling argument allows for a much clearer docstring, as we can use the common terms from literature to explain the function. I think its important to precisely say what the function returns and for this choosing from the common scalings used in the literature is the best way, I think.

It should also be quite unlikely that there will be a new scaling factor introduced.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>




---

archive/issue_events_343542.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-03-08T09:21:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343542"
}
```



---

archive/issue_events_343543.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-03-08T09:21:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343543"
}
```



---

archive/issue_comments_377331.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOkay, all good",
    "created_at": "2018-03-08T13:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377331",
    "user": "https://github.com/rusydi"
}
```

<div id="comment:19" align="right">comment:19</div>

Okay, all good



---

archive/issue_events_343544.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-03-08T13:19:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343544"
}
```



---

archive/issue_events_343545.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-03-08T13:19:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343545"
}
```



---

archive/issue_events_343546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-19T07:57:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343546"
}
```



---

archive/issue_events_343547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ace16ce0d7027550e633394eab4769ddd7309e3d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-03-19T07:57:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24819#event-343547"
}
```



---

archive/issue_comments_377332.json:
```json
{
    "body": "Changed branch from **[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)** to **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**",
    "created_at": "2018-03-19T07:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24819#issuecomment-377332",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)** to **[`dbc821d`](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)**
