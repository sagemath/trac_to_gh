# Issue 24819: sbox linear approximation matrix scaling

archive/issues_024582.json:
```json
{
    "body": "as discussed here https://groups.google.com/forum/#!topic/sage-devel/l8N2wQl9WsY I would like to introduce an (optional) argument to the `linear_approximation_matrix` method on S-boxes, that allows to scale the output to the four typical use cases: biases, correlations, absolute biases, and fourier coefficients.\n\nThe current implementation returns absolute biases, which would thus be the default value to the `scale` argument.\n\n**Assignee:** @pfasante\n\n**Keywords:** crypto, sbox, lat, linear approximation matrix\n\n**Branch/Commit:** [dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)\n\n**Reviewer:** Rusydi H. Makarim\n\n**Author:** Friedrich Wiemer\n\nIssue created by migration from https://trac.sagemath.org/ticket/24819\n\n",
    "closed_at": "2018-03-19T07:57:49Z",
    "created_at": "2018-02-22T13:44:07Z",
    "labels": [
        "component: cryptography",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "sbox linear approximation matrix scaling",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24819",
    "user": "https://github.com/pfasante"
}
```
as discussed here https://groups.google.com/forum/#!topic/sage-devel/l8N2wQl9WsY I would like to introduce an (optional) argument to the `linear_approximation_matrix` method on S-boxes, that allows to scale the output to the four typical use cases: biases, correlations, absolute biases, and fourier coefficients.

The current implementation returns absolute biases, which would thus be the default value to the `scale` argument.

**Assignee:** @pfasante

**Keywords:** crypto, sbox, lat, linear approximation matrix

**Branch/Commit:** [dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)

**Reviewer:** Rusydi H. Makarim

**Author:** Friedrich Wiemer

Issue created by migration from https://trac.sagemath.org/ticket/24819





---

archive/issue_comments_381424.json:
```json
{
    "body": "**Assignee:** @pfasante",
    "created_at": "2018-02-22T13:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381424",
    "user": "https://github.com/pfasante"
}
```

**Assignee:** @pfasante



---

archive/issue_comments_381425.json:
```json
{
    "body": "**Branch:** [u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)",
    "created_at": "2018-02-22T14:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381425",
    "user": "https://github.com/pfasante"
}
```

**Branch:** [u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)



---

archive/issue_comments_381426.json:
```json
{
    "body": "**Commit:** [1f2942b877bfa0b50fc093ebceb12efe4a5f06bd](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)",
    "created_at": "2018-02-22T14:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381426",
    "user": "https://github.com/pfasante"
}
```

**Commit:** [1f2942b877bfa0b50fc093ebceb12efe4a5f06bd](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)



---

archive/issue_events_224054.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-22T14:54:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224054"
}
```



---

archive/issue_comments_381427.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd\">1f2942b</a></td><td><code>add scale argument to linear approximation matrix method</code></td></tr></table>\n",
    "created_at": "2018-02-22T14:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381427",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd">1f2942b</a></td><td><code>add scale argument to linear approximation matrix method</code></td></tr></table>




---

archive/issue_comments_381428.json:
```json
{
    "body": "**Changing commit** from \"[1f2942b877bfa0b50fc093ebceb12efe4a5f06bd](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)\" to \"[ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)\".",
    "created_at": "2018-02-22T14:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1f2942b877bfa0b50fc093ebceb12efe4a5f06bd](https://github.com/sagemath/sagetrac-mirror/commit/1f2942b877bfa0b50fc093ebceb12efe4a5f06bd)" to "[ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)".



---

archive/issue_comments_381429.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1\">ec8284c</a></td><td><code>fix docstring enumeration</code></td></tr></table>\n",
    "created_at": "2018-02-22T14:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1">ec8284c</a></td><td><code>fix docstring enumeration</code></td></tr></table>




---

archive/issue_comments_381430.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Friedrich,\n\nYou can remove \"B\" and the nested for-loop. The list \"L\" can be constructed as\n\n```\nL = [ self.component_function(i).walsh_hadamard_transform() for i in range(ncols) ]\n```\n\nRegards,\nRusydi",
    "created_at": "2018-02-23T21:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381430",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:5'></a>
Hi Friedrich,

You can remove "B" and the nested for-loop. The list "L" can be constructed as

```
L = [ self.component_function(i).walsh_hadamard_transform() for i in range(ncols) ]
```

Regards,
Rusydi



---

archive/issue_comments_381431.json:
```json
{
    "body": "<a id='comment:6'></a>\nRunning `make doc-html` produces the following error in my machine\n\n```\n[dochtml] [cryptogra] loading pickled environment... not yet created\n[dochtml] [cryptogra] building [mo]: targets for 0 po files that are out of date\n[dochtml] [cryptogra] building [inventory]: targets for 19 source files that are out of date\n[dochtml] [cryptogra] updating environment: 19 added, 0 changed, 0 removed\n[dochtml] [cryptogra] reading sources... [  5%] index\n[dochtml] [cryptogra] reading sources... [ 10%] sage/crypto/block_cipher/miniaes\n[dochtml] [cryptogra] reading sources... [ 15%] sage/crypto/block_cipher/sdes\n[dochtml] [cryptogra] reading sources... [ 21%] sage/crypto/boolean_function\n[dochtml] [cryptogra] reading sources... [ 26%] sage/crypto/cipher\n[dochtml] [cryptogra] reading sources... [ 31%] sage/crypto/classical\n[dochtml] [cryptogra] reading sources... [ 36%] sage/crypto/classical_cipher\n[dochtml] [cryptogra] reading sources... [ 42%] sage/crypto/cryptosystem\n[dochtml] [cryptogra] reading sources... [ 47%] sage/crypto/lattice\n[dochtml] [cryptogra] reading sources... [ 52%] sage/crypto/lfsr\n[dochtml] [cryptogra] reading sources... [ 57%] sage/crypto/lwe\n[dochtml] [cryptogra] reading sources... [ 63%] sage/crypto/mq/mpolynomialsystemgenerator\n[dochtml] [cryptogra] reading sources... [ 68%] sage/crypto/mq/rijndael_gf\n[dochtml] [cryptogra] reading sources... [ 73%] sage/crypto/mq/sr\n[dochtml] [cryptogra] reading sources... [ 78%] sage/crypto/public_key/blum_goldwasser\n[dochtml] [cryptogra] reading sources... [ 84%] sage/crypto/sbox\n[dochtml] [cryptogra] reading sources... [ 89%] sage/crypto/stream\n[dochtml] [cryptogra] reading sources... [ 94%] sage/crypto/stream_cipher\n[dochtml] [cryptogra] reading sources... [100%] sage/crypto/util\n[dochtml] [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 246, in build_many\n[dochtml]     ret = x.get(99999)\n[dochtml]   File \"/home/makarim/sage/local/lib/python2.7/multiprocessing/pool.py\", line 572, in get\n[dochtml]     raise self._value\n[dochtml] OSError: [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.\n[dochtml] \nMakefile:1002: recipe for target 'doc-html' failed\nmake[1]: *** [doc-html] Error 1\nmake[1]: Leaving directory '/home/makarim/sage/build/make'\n\nreal\t4m16.422s\nuser\t12m7.154s\nsys\t0m24.788s\n***************************************************************\n```",
    "created_at": "2018-02-23T22:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381431",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:6'></a>
Running `make doc-html` produces the following error in my machine

```
[dochtml] [cryptogra] loading pickled environment... not yet created
[dochtml] [cryptogra] building [mo]: targets for 0 po files that are out of date
[dochtml] [cryptogra] building [inventory]: targets for 19 source files that are out of date
[dochtml] [cryptogra] updating environment: 19 added, 0 changed, 0 removed
[dochtml] [cryptogra] reading sources... [  5%] index
[dochtml] [cryptogra] reading sources... [ 10%] sage/crypto/block_cipher/miniaes
[dochtml] [cryptogra] reading sources... [ 15%] sage/crypto/block_cipher/sdes
[dochtml] [cryptogra] reading sources... [ 21%] sage/crypto/boolean_function
[dochtml] [cryptogra] reading sources... [ 26%] sage/crypto/cipher
[dochtml] [cryptogra] reading sources... [ 31%] sage/crypto/classical
[dochtml] [cryptogra] reading sources... [ 36%] sage/crypto/classical_cipher
[dochtml] [cryptogra] reading sources... [ 42%] sage/crypto/cryptosystem
[dochtml] [cryptogra] reading sources... [ 47%] sage/crypto/lattice
[dochtml] [cryptogra] reading sources... [ 52%] sage/crypto/lfsr
[dochtml] [cryptogra] reading sources... [ 57%] sage/crypto/lwe
[dochtml] [cryptogra] reading sources... [ 63%] sage/crypto/mq/mpolynomialsystemgenerator
[dochtml] [cryptogra] reading sources... [ 68%] sage/crypto/mq/rijndael_gf
[dochtml] [cryptogra] reading sources... [ 73%] sage/crypto/mq/sr
[dochtml] [cryptogra] reading sources... [ 78%] sage/crypto/public_key/blum_goldwasser
[dochtml] [cryptogra] reading sources... [ 84%] sage/crypto/sbox
[dochtml] [cryptogra] reading sources... [ 89%] sage/crypto/stream
[dochtml] [cryptogra] reading sources... [ 94%] sage/crypto/stream_cipher
[dochtml] [cryptogra] reading sources... [100%] sage/crypto/util
[dochtml] [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
[dochtml]     builder()
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 246, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/home/makarim/sage/local/lib/python2.7/multiprocessing/pool.py", line 572, in get
[dochtml]     raise self._value
[dochtml] OSError: [cryptogra] /home/makarim/sage/local/lib/python2.7/site-packages/sage/crypto/sbox.py:docstring of sage.crypto.sbox.SBox.linear_approximation_matrix:7: WARNING: Unexpected indentation.
[dochtml] 
Makefile:1002: recipe for target 'doc-html' failed
make[1]: *** [doc-html] Error 1
make[1]: Leaving directory '/home/makarim/sage/build/make'

real	4m16.422s
user	12m7.154s
sys	0m24.788s
***************************************************************
```



---

archive/issue_events_224055.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-23T23:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224055"
}
```



---

archive/issue_events_224056.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-23T23:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224056"
}
```



---

archive/issue_comments_381432.json:
```json
{
    "body": "**Reviewer:** Rusydi H. Makarim",
    "created_at": "2018-02-23T23:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381432",
    "user": "https://github.com/rusydi"
}
```

**Reviewer:** Rusydi H. Makarim



---

archive/issue_comments_381433.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abd73ad957efafe9a684485f126a441ed0776f9b\">abd73ad</a></td><td><code>simplify linear approximation matrix computation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa\">dd927aa</a></td><td><code>fix doc-html build error</code></td></tr></table>\n",
    "created_at": "2018-02-25T18:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abd73ad957efafe9a684485f126a441ed0776f9b">abd73ad</a></td><td><code>simplify linear approximation matrix computation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa">dd927aa</a></td><td><code>fix doc-html build error</code></td></tr></table>




---

archive/issue_comments_381434.json:
```json
{
    "body": "**Changing commit** from \"[ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)\" to \"[dd927aa1b135215abeed1e10eb51f8564d30c9fa](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)\".",
    "created_at": "2018-02-25T18:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1](https://github.com/sagemath/sagetrac-mirror/commit/ec8284c466a5f69fb37f3a9d5e065e8db1fa25f1)" to "[dd927aa1b135215abeed1e10eb51f8564d30c9fa](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)".



---

archive/issue_comments_381435.json:
```json
{
    "body": "<a id='comment:9'></a>\nGood catch with the nested for loops, now its much more clearer I think.\n\nI fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:\n\n```\n    There are three typical notations for this probability used in\n    the literature:\n\n    - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`, where `e(\\\\alpha, \\\\beta)` is called the bias,\n    - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`, where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n    - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`, where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n```\n\nHow do I correctly break these last three lines?",
    "created_at": "2018-02-25T18:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381435",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:9'></a>
Good catch with the nested for loops, now its much more clearer I think.

I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:

```
    There are three typical notations for this probability used in
    the literature:

    - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`, where `e(\\alpha, \\beta)` is called the bias,
    - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`, where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
    - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`, where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
```

How do I correctly break these last three lines?



---

archive/issue_comments_381436.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [asante](#comment%3A9):\n> Good catch with the nested for loops, now its much more clearer I think.\n> \n> I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:\n> \n> ```\n>     There are three typical notations for this probability used in\n>     the literature:\n> \n>     - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`, where `e(\\\\alpha, \\\\beta)` is called the bias,\n>     - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`, where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n>     - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`, where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n> ```\n> \n> How do I correctly break these last three lines?\n\n\nYou can break it like this :\n\n```\n      There are three typical notations for this probability used in\n      the literature:\n \n      - `Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1/2 + e(\\\\alpha, \\\\beta)`,\n        where `e(\\\\alpha, \\\\beta)` is called the bias,\n      - `2\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 1 + c(\\\\alpha, \\\\beta)`,\n        where `c(\\\\alpha, \\\\beta) = 2\\cdot e(\\\\alpha, \\\\beta)` is the correlation, and\n      - `2^{(n+1)}\\cdot Pr[<\\\\alpha, x> = <\\\\beta, S(x)>] = 2^n + \\hat{S}(\\\\alpha, \\\\beta)`,\n        where `\\hat{S}(\\\\alpha, \\\\beta)` is the Fourier coefficient of S.\n```",
    "created_at": "2018-02-25T21:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381436",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:10'></a>
Replying to [asante](#comment%3A9):
> Good catch with the nested for loops, now its much more clearer I think.
> 
> I fixed the doc build error, but did not find a syntactic correct way to break the now-too-long lines:
> 
> ```
>     There are three typical notations for this probability used in
>     the literature:
> 
>     - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`, where `e(\\alpha, \\beta)` is called the bias,
>     - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`, where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
>     - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`, where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
> ```
> 
> How do I correctly break these last three lines?


You can break it like this :

```
      There are three typical notations for this probability used in
      the literature:
 
      - `Pr[<\\alpha, x> = <\\beta, S(x)>] = 1/2 + e(\\alpha, \\beta)`,
        where `e(\\alpha, \\beta)` is called the bias,
      - `2\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 1 + c(\\alpha, \\beta)`,
        where `c(\\alpha, \\beta) = 2\cdot e(\\alpha, \\beta)` is the correlation, and
      - `2^{(n+1)}\cdot Pr[<\\alpha, x> = <\\beta, S(x)>] = 2^n + \hat{S}(\\alpha, \\beta)`,
        where `\hat{S}(\\alpha, \\beta)` is the Fourier coefficient of S.
```



---

archive/issue_comments_381437.json:
```json
{
    "body": "<a id='comment:11'></a>\nMore comments :\n\n1. Starts the docstring with `r\"\"\"`. In this way you can remove all the double backslash in latex notation (e.g. `\\\\alpha` becomes `\\alpha`)\n2. You forget the backslash in the definition `A[alpha, beta]` and put them in between backtick\n3. Existing notation used for dot product is `\\cdot` (e.g, see the description of autocorrelation_matrix() and component function() )\n4. Abbreviation LAT does not match with the function's name. I used LAM instead (e.g., see the description of linear_branch_number() ). Although this is somewhat different from standard terminology in literature, this matches the existing function's name to avoid confusion. But I do think in the future we should replace the word \"matrix\" to \"table\" in functions' name (initial committer for this module already used the terminology \"matrix\").",
    "created_at": "2018-02-25T22:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381437",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:11'></a>
More comments :

1. Starts the docstring with `r"""`. In this way you can remove all the double backslash in latex notation (e.g. `\\alpha` becomes `\alpha`)
2. You forget the backslash in the definition `A[alpha, beta]` and put them in between backtick
3. Existing notation used for dot product is `\cdot` (e.g, see the description of autocorrelation_matrix() and component function() )
4. Abbreviation LAT does not match with the function's name. I used LAM instead (e.g., see the description of linear_branch_number() ). Although this is somewhat different from standard terminology in literature, this matches the existing function's name to avoid confusion. But I do think in the future we should replace the word "matrix" to "table" in functions' name (initial committer for this module already used the terminology "matrix").



---

archive/issue_comments_381438.json:
```json
{
    "body": "**Changing commit** from \"[dd927aa1b135215abeed1e10eb51f8564d30c9fa](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)\" to \"[e72aae445cb0eda204edee03e0a7bb3acf2e134e](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)\".",
    "created_at": "2018-02-26T14:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dd927aa1b135215abeed1e10eb51f8564d30c9fa](https://github.com/sagemath/sagetrac-mirror/commit/dd927aa1b135215abeed1e10eb51f8564d30c9fa)" to "[e72aae445cb0eda204edee03e0a7bb3acf2e134e](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)".



---

archive/issue_comments_381439.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e\">e72aae4</a></td><td><code>update docstring for linear_approximation_matrix</code></td></tr></table>\n",
    "created_at": "2018-02-26T14:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e">e72aae4</a></td><td><code>update docstring for linear_approximation_matrix</code></td></tr></table>




---

archive/issue_events_224057.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-26T14:08:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224057"
}
```



---

archive/issue_events_224058.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-02-26T14:08:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224058"
}
```



---

archive/issue_comments_381440.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi Friedrich,\n\nPlease make it clear in the documentation that `m` and `n` refers to the input and output size of the S-Box respectively.",
    "created_at": "2018-02-28T23:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381440",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:14'></a>
Hi Friedrich,

Please make it clear in the documentation that `m` and `n` refers to the input and output size of the S-Box respectively.



---

archive/issue_events_224059.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-28T23:06:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224059"
}
```



---

archive/issue_events_224060.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-02-28T23:06:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224060"
}
```



---

archive/issue_comments_381441.json:
```json
{
    "body": "<a id='comment:16'></a>\nHi Friedrich,\n\nThis is just an opinion, so feel free to disagree. Instead of passing a string to parameter `scale`, why don't we let it to take the scaling factor directly. For instance, instead of calling `S.linear_approximation_matrix(scale=\"absolute_bias\")`, one may call it with `S.linear_approximation_matrix(scale=2)`. There are two advantages for this : it gives a far more flexibility and at the same time we free ourselves from explaining new terminologies associated with whatever scaling factor available in the literature.\n\nIn that case, the argument `scale` can be replaced to something like `scale_factor`",
    "created_at": "2018-03-05T14:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381441",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:16'></a>
Hi Friedrich,

This is just an opinion, so feel free to disagree. Instead of passing a string to parameter `scale`, why don't we let it to take the scaling factor directly. For instance, instead of calling `S.linear_approximation_matrix(scale="absolute_bias")`, one may call it with `S.linear_approximation_matrix(scale=2)`. There are two advantages for this : it gives a far more flexibility and at the same time we free ourselves from explaining new terminologies associated with whatever scaling factor available in the literature.

In that case, the argument `scale` can be replaced to something like `scale_factor`



---

archive/issue_comments_381442.json:
```json
{
    "body": "**Changing commit** from \"[e72aae445cb0eda204edee03e0a7bb3acf2e134e](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)\" to \"[dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)\".",
    "created_at": "2018-03-08T09:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e72aae445cb0eda204edee03e0a7bb3acf2e134e](https://github.com/sagemath/sagetrac-mirror/commit/e72aae445cb0eda204edee03e0a7bb3acf2e134e)" to "[dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)".



---

archive/issue_comments_381443.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709\">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>\n",
    "created_at": "2018-03-08T09:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>




---

archive/issue_comments_381444.json:
```json
{
    "body": "<a id='comment:18'></a>\nI disagree with using a custom scaling factor.\n\nIf you actually need to change the factor, you can also easily scale it afterwards anyway.\n\nAdditional, having this scaling argument allows for a much clearer docstring, as we can use the common terms from literature to explain the function. I think its important to precisely say what the function returns and for this choosing from the common scalings used in the literature is the best way, I think.\n\nIt should also be quite unlikely that there will be a new scaling factor introduced.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709\">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>\n",
    "created_at": "2018-03-08T09:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381444",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:18'></a>
I disagree with using a custom scaling factor.

If you actually need to change the factor, you can also easily scale it afterwards anyway.

Additional, having this scaling argument allows for a much clearer docstring, as we can use the common terms from literature to explain the function. I think its important to precisely say what the function returns and for this choosing from the common scalings used in the literature is the best way, I think.

It should also be quite unlikely that there will be a new scaling factor introduced.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709">dbc821d</a></td><td><code>small bugfix in docstring, add 'n' and 'm' value explanation</code></td></tr></table>




---

archive/issue_events_224061.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-03-08T09:21:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224061"
}
```



---

archive/issue_events_224062.json:
```json
{
    "actor": "https://github.com/pfasante",
    "created_at": "2018-03-08T09:21:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224062"
}
```



---

archive/issue_comments_381445.json:
```json
{
    "body": "<a id='comment:19'></a>\nOkay, all good",
    "created_at": "2018-03-08T13:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381445",
    "user": "https://github.com/rusydi"
}
```

<a id='comment:19'></a>
Okay, all good



---

archive/issue_events_224063.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-03-08T13:19:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224063"
}
```



---

archive/issue_events_224064.json:
```json
{
    "actor": "https://github.com/rusydi",
    "created_at": "2018-03-08T13:19:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224064"
}
```



---

archive/issue_events_224065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-19T07:57:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224065"
}
```



---

archive/issue_events_224066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-19T07:57:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24819#event-224066"
}
```



---

archive/issue_comments_381446.json:
```json
{
    "body": "**Changing branch** from \"[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)\" to \"[dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)\".",
    "created_at": "2018-03-19T07:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24819",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24819#issuecomment-381446",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/asante/sbox_linear_approximation_matrix_scaling](https://github.com/sagemath/sagetrac-mirror/tree/u/asante/sbox_linear_approximation_matrix_scaling)" to "[dbc821df7d00fe6b263c02254466ce3508326709](https://github.com/sagemath/sagetrac-mirror/commit/dbc821df7d00fe6b263c02254466ce3508326709)".
