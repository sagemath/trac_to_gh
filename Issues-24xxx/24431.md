# Issue 24431: Fix coercions and pushout for Laurent series

archive/issues_024194.json:
```json
{
    "body": "There should be an automatic extension of scalars in the following situation\n\n```\nsage: R.<x> = LaurentSeriesRing(QQ)\nsage: QQbar.gen() * x\nTraceback (most recent call last):\n...\nTypeError: unsupported operand parent(s) for *: 'Algebraic Field' and\n'Laurent Series Ring in x over Rational Field'\n```\nTo be compared with\n\n```\nsage: R.<x> = PowerSeriesRing(QQ)\nsage: QQbar.gen() * x\nI*x\nsage: parent(_)\nPower Series Ring in x over Algebraic Field\n```\n\nCurrently, these pushouts are allowed:\n\n```\nsage: x = LaurentSeriesRing(QQ, 'x').gen()\nsage: y = PolynomialRing(QQ, 'y').gen()\nsage: x * y\nx*y\nsage: parent(x * y)\nUnivariate Polynomial Ring in y over\nLaurent Series Ring in x over Rational Field\n```\nThis is inconsistent with `PowerSeriesRing`.\n\nBy fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that was using the aforementioned pushout.\n\nBranch/Commit: [8abc33b3dd7001c7022e9c114563251d7e668304](https://github.com/sagemath/sagetrac-mirror/commit/8abc33b3dd7001c7022e9c114563251d7e668304)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Vincent Delecroix\n\nDependencies: #24420\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24431\n\n",
    "closed_at": "2018-02-02T12:05:57Z",
    "created_at": "2017-12-26T15:21:11Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Fix coercions and pushout for Laurent series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24431",
    "user": "https://github.com/videlec"
}
```
There should be an automatic extension of scalars in the following situation

```
sage: R.<x> = LaurentSeriesRing(QQ)
sage: QQbar.gen() * x
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for *: 'Algebraic Field' and
'Laurent Series Ring in x over Rational Field'
```
To be compared with

```
sage: R.<x> = PowerSeriesRing(QQ)
sage: QQbar.gen() * x
I*x
sage: parent(_)
Power Series Ring in x over Algebraic Field
```

Currently, these pushouts are allowed:

```
sage: x = LaurentSeriesRing(QQ, 'x').gen()
sage: y = PolynomialRing(QQ, 'y').gen()
sage: x * y
x*y
sage: parent(x * y)
Univariate Polynomial Ring in y over
Laurent Series Ring in x over Rational Field
```
This is inconsistent with `PowerSeriesRing`.

By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that was using the aforementioned pushout.

Branch/Commit: [8abc33b3dd7001c7022e9c114563251d7e668304](https://github.com/sagemath/sagetrac-mirror/commit/8abc33b3dd7001c7022e9c114563251d7e668304)

Reviewer: Travis Scrimshaw

Author: Vincent Delecroix

Dependencies: #24420

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24431





---

archive/issue_comments_464640.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/24431\"",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464640",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/24431"



---

archive/issue_comments_464641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464641",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464642.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[f779b10](https://github.com/sagemath/sagetrac-mirror/commit/f779b10d261e9ff4f782ac53e978af5b62b83f3a)|`24420: clean laurent series`|\n|[eb2bba4](https://github.com/sagemath/sagetrac-mirror/commit/eb2bba461ab15f7cbb21733d42797af8d17f3464)|`24431: pushout for Laurent series`|",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464642",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[f779b10](https://github.com/sagemath/sagetrac-mirror/commit/f779b10d261e9ff4f782ac53e978af5b62b83f3a)|`24420: clean laurent series`|
|[eb2bba4](https://github.com/sagemath/sagetrac-mirror/commit/eb2bba461ab15f7cbb21733d42797af8d17f3464)|`24431: pushout for Laurent series`|



---

archive/issue_comments_464643.json:
```json
{
    "body": "Changing commit from \"\" to \"eb2bba461ab15f7cbb21733d42797af8d17f3464\"",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464643",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "eb2bba461ab15f7cbb21733d42797af8d17f3464"



---

archive/issue_comments_464644.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[1adb84c](https://github.com/sagemath/sagetrac-mirror/commit/1adb84c9287ef49d822548fb94f28180a2b8753c)|`24420: clean laurent series`|\n|[27f324e](https://github.com/sagemath/sagetrac-mirror/commit/27f324eddb758edbeaeee37fde25dfd74e94d888)|`24431: pushout for Laurent series`|",
    "created_at": "2017-12-26T22:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[1adb84c](https://github.com/sagemath/sagetrac-mirror/commit/1adb84c9287ef49d822548fb94f28180a2b8753c)|`24420: clean laurent series`|
|[27f324e](https://github.com/sagemath/sagetrac-mirror/commit/27f324eddb758edbeaeee37fde25dfd74e94d888)|`24431: pushout for Laurent series`|



---

archive/issue_comments_464645.json:
```json
{
    "body": "Changing commit from \"eb2bba461ab15f7cbb21733d42797af8d17f3464\" to \"27f324eddb758edbeaeee37fde25dfd74e94d888\"",
    "created_at": "2017-12-26T22:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eb2bba461ab15f7cbb21733d42797af8d17f3464" to "27f324eddb758edbeaeee37fde25dfd74e94d888"



---

archive/issue_comments_464646.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[cdf836a](https://github.com/sagemath/sagetrac-mirror/commit/cdf836ac796a696568ddbae346e58bed6327405a)|`24420: clean laurent series`|\n|[00deb27](https://github.com/sagemath/sagetrac-mirror/commit/00deb276b62aaadc5d1a77a1965821e3efb2def6)|`24431: pushout for Laurent series`|",
    "created_at": "2017-12-28T15:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[cdf836a](https://github.com/sagemath/sagetrac-mirror/commit/cdf836ac796a696568ddbae346e58bed6327405a)|`24420: clean laurent series`|
|[00deb27](https://github.com/sagemath/sagetrac-mirror/commit/00deb276b62aaadc5d1a77a1965821e3efb2def6)|`24431: pushout for Laurent series`|



---

archive/issue_comments_464647.json:
```json
{
    "body": "Changing commit from \"27f324eddb758edbeaeee37fde25dfd74e94d888\" to \"00deb276b62aaadc5d1a77a1965821e3efb2def6\"",
    "created_at": "2017-12-28T15:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27f324eddb758edbeaeee37fde25dfd74e94d888" to "00deb276b62aaadc5d1a77a1965821e3efb2def6"



---

archive/issue_comments_464648.json:
```json
{
    "body": "Changing commit from \"00deb276b62aaadc5d1a77a1965821e3efb2def6\" to \"c905ee96cc6f80e679cc55ddaf9e02380e18672b\"",
    "created_at": "2017-12-28T16:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "00deb276b62aaadc5d1a77a1965821e3efb2def6" to "c905ee96cc6f80e679cc55ddaf9e02380e18672b"



---

archive/issue_comments_464649.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[f95f61e](https://github.com/sagemath/sagetrac-mirror/commit/f95f61e3fce4650f1ef734fa7999f17f7d63d945)|`24413: make polynomial rings know that they are infinite`|\n|[c905ee9](https://github.com/sagemath/sagetrac-mirror/commit/c905ee96cc6f80e679cc55ddaf9e02380e18672b)|`24413: base ring = 0`|",
    "created_at": "2017-12-28T16:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[f95f61e](https://github.com/sagemath/sagetrac-mirror/commit/f95f61e3fce4650f1ef734fa7999f17f7d63d945)|`24413: make polynomial rings know that they are infinite`|
|[c905ee9](https://github.com/sagemath/sagetrac-mirror/commit/c905ee96cc6f80e679cc55ddaf9e02380e18672b)|`24413: base ring = 0`|



---

archive/issue_comments_464650.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[cdf836a](https://github.com/sagemath/sagetrac-mirror/commit/cdf836ac796a696568ddbae346e58bed6327405a)|`24420: clean laurent series`|\n|[00deb27](https://github.com/sagemath/sagetrac-mirror/commit/00deb276b62aaadc5d1a77a1965821e3efb2def6)|`24431: pushout for Laurent series`|",
    "created_at": "2017-12-28T16:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[cdf836a](https://github.com/sagemath/sagetrac-mirror/commit/cdf836ac796a696568ddbae346e58bed6327405a)|`24420: clean laurent series`|
|[00deb27](https://github.com/sagemath/sagetrac-mirror/commit/00deb276b62aaadc5d1a77a1965821e3efb2def6)|`24431: pushout for Laurent series`|



---

archive/issue_comments_464651.json:
```json
{
    "body": "Changing commit from \"c905ee96cc6f80e679cc55ddaf9e02380e18672b\" to \"00deb276b62aaadc5d1a77a1965821e3efb2def6\"",
    "created_at": "2017-12-28T16:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c905ee96cc6f80e679cc55ddaf9e02380e18672b" to "00deb276b62aaadc5d1a77a1965821e3efb2def6"



---

archive/issue_comments_464652.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,15 @@\n sage: parent(_)\n Power Series Ring in x over Algebraic Field\n ```\n+\n+There are also wrong coercions allowed\n+\n+```\n+sage: x = LaurentSeriesRing(QQ, 'x').gen()\n+sage: y = PolynomialRing(QQ, 'y').gen()\n+sage: x * y\n+x*y\n+sage: parent(x * y)\n+Univariate Polynomial Ring in y over\n+Laurent Series Ring in x over Rational Field\n+```\n``````\n",
    "created_at": "2017-12-31T16:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464652",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,15 @@
 sage: parent(_)
 Power Series Ring in x over Algebraic Field
 ```
+
+There are also wrong coercions allowed
+
+```
+sage: x = LaurentSeriesRing(QQ, 'x').gen()
+sage: y = PolynomialRing(QQ, 'y').gen()
+sage: x * y
+x*y
+sage: parent(x * y)
+Univariate Polynomial Ring in y over
+Laurent Series Ring in x over Rational Field
+```
``````




---

archive/issue_events_070195.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "rename": {
        "from": "Pushout for Laurent series",
        "to": "Fix coercions and pushout for Laurent series"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24431#event-70195"
}
```



---

archive/issue_comments_464653.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-31T16:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464653",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_464654.json:
```json
{
    "body": "Changing commit from \"00deb276b62aaadc5d1a77a1965821e3efb2def6\" to \"1b1bbbc062f24af9adecd11ddab5a12bf8812636\"",
    "created_at": "2017-12-31T17:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "00deb276b62aaadc5d1a77a1965821e3efb2def6" to "1b1bbbc062f24af9adecd11ddab5a12bf8812636"



---

archive/issue_comments_464655.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[1b1bbbc](https://github.com/sagemath/sagetrac-mirror/commit/1b1bbbc062f24af9adecd11ddab5a12bf8812636)|`24431: Laurent series pushout and coercions`|",
    "created_at": "2017-12-31T17:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[1b1bbbc](https://github.com/sagemath/sagetrac-mirror/commit/1b1bbbc062f24af9adecd11ddab5a12bf8812636)|`24431: Laurent series pushout and coercions`|



---

archive/issue_comments_464656.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,7 +18,7 @@\n Power Series Ring in x over Algebraic Field\n ```\n \n-There are also wrong coercions allowed\n+There are also wrong coercions going on\n \n ```\n sage: x = LaurentSeriesRing(QQ, 'x').gen()\n@@ -29,3 +29,5 @@\n Univariate Polynomial Ring in y over\n Laurent Series Ring in x over Rational Field\n ```\n+\n+By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that used to benefit from this buggy behavior.\n``````\n",
    "created_at": "2017-12-31T17:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464656",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,7 +18,7 @@
 Power Series Ring in x over Algebraic Field
 ```
 
-There are also wrong coercions allowed
+There are also wrong coercions going on
 
 ```
 sage: x = LaurentSeriesRing(QQ, 'x').gen()
@@ -29,3 +29,5 @@
 Univariate Polynomial Ring in y over
 Laurent Series Ring in x over Rational Field
 ```
+
+By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that used to benefit from this buggy behavior.
``````




---

archive/issue_comments_464657.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-31T17:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464657",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_464658.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[34769e1](https://github.com/sagemath/sagetrac-mirror/commit/34769e112def9b211234bed663889486e55b95a5)|`24420: clean laurent series`|\n|[b3f11d9](https://github.com/sagemath/sagetrac-mirror/commit/b3f11d9d244e72085a96d64e1286aa43f70df44f)|`24431: Laurent series pushout and coercions`|",
    "created_at": "2018-01-02T15:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[34769e1](https://github.com/sagemath/sagetrac-mirror/commit/34769e112def9b211234bed663889486e55b95a5)|`24420: clean laurent series`|
|[b3f11d9](https://github.com/sagemath/sagetrac-mirror/commit/b3f11d9d244e72085a96d64e1286aa43f70df44f)|`24431: Laurent series pushout and coercions`|



---

archive/issue_comments_464659.json:
```json
{
    "body": "Changing commit from \"1b1bbbc062f24af9adecd11ddab5a12bf8812636\" to \"b3f11d9d244e72085a96d64e1286aa43f70df44f\"",
    "created_at": "2018-01-02T15:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1b1bbbc062f24af9adecd11ddab5a12bf8812636" to "b3f11d9d244e72085a96d64e1286aa43f70df44f"



---

archive/issue_comments_464660.json:
```json
{
    "body": "<a id='comment:10'></a>\nrebased on 8.2.beta2",
    "created_at": "2018-01-02T15:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464660",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
rebased on 8.2.beta2



---

archive/issue_comments_464661.json:
```json
{
    "body": "<a id='comment:11'></a>\nLGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)",
    "created_at": "2018-01-02T23:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464661",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)



---

archive/issue_comments_464662.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [tscrim](#comment%3A11):\n> LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)\n\n\nI believe you refer to this line\n\n```\n-    L = PolynomialRing(self.base_ring(),'x')\n+    L = PolynomialRing(K,'x')\n```\nThis is the third point in the ticket description.",
    "created_at": "2018-01-03T15:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464662",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Replying to [tscrim](#comment%3A11):
> LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)


I believe you refer to this line

```
-    L = PolynomialRing(self.base_ring(),'x')
+    L = PolynomialRing(K,'x')
```
This is the third point in the ticket description.



---

archive/issue_comments_464663.json:
```json
{
    "body": "<a id='comment:13'></a>\nI understand now the reason why that change is needed. Thanks. (Although I don't quite understand why that pushout is no longer allowed, but that's okay.)\n\nJust remove the unneeded import of `LaurentPolynomialRing` and the `\\`'s here\n\n```diff\n@@ -410,7 +565,11 @@ class LaurentSeriesRing_generic(UniqueRepresentation, ring.CommutativeRing):\n \n         from sage.rings.polynomial.polynomial_ring import is_PolynomialRing\n         from sage.rings.power_series_ring import is_PowerSeriesRing\n-        if ((is_LaurentSeriesRing(P) or is_PowerSeriesRing(P) or is_PolynomialRing(P))\n+        from sage.rings.polynomial.laurent_polynomial_ring import is_LaurentPolynomialRing\n+        if ((is_LaurentSeriesRing(P) or \\\n+             is_LaurentPolynomialRing(P) or \\\n+             is_PowerSeriesRing(P) or \\\n+             is_PolynomialRing(P))\n             and P.variable_name() == self.variable_name()\n             and A.has_coerce_map_from(P.base_ring())):\n             return True\n```\nand you can set a positive review on my behalf.",
    "created_at": "2018-01-03T16:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464663",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
I understand now the reason why that change is needed. Thanks. (Although I don't quite understand why that pushout is no longer allowed, but that's okay.)

Just remove the unneeded import of `LaurentPolynomialRing` and the `\`'s here

```diff
@@ -410,7 +565,11 @@ class LaurentSeriesRing_generic(UniqueRepresentation, ring.CommutativeRing):
 
         from sage.rings.polynomial.polynomial_ring import is_PolynomialRing
         from sage.rings.power_series_ring import is_PowerSeriesRing
-        if ((is_LaurentSeriesRing(P) or is_PowerSeriesRing(P) or is_PolynomialRing(P))
+        from sage.rings.polynomial.laurent_polynomial_ring import is_LaurentPolynomialRing
+        if ((is_LaurentSeriesRing(P) or \
+             is_LaurentPolynomialRing(P) or \
+             is_PowerSeriesRing(P) or \
+             is_PolynomialRing(P))
             and P.variable_name() == self.variable_name()
             and A.has_coerce_map_from(P.base_ring())):
             return True
```
and you can set a positive review on my behalf.



---

archive/issue_comments_464664.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,7 +18,7 @@\n Power Series Ring in x over Algebraic Field\n ```\n \n-There are also wrong coercions going on\n+Currently, these pushouts are allowed:\n \n ```\n sage: x = LaurentSeriesRing(QQ, 'x').gen()\n@@ -29,5 +29,6 @@\n Univariate Polynomial Ring in y over\n Laurent Series Ring in x over Rational Field\n ```\n+This is inconsistent with `PowerSeriesRing`.\n \n-By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that used to benefit from this buggy behavior.\n+By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that was using the aforementioned pushout.\n``````\n",
    "created_at": "2018-01-03T16:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464664",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,7 +18,7 @@
 Power Series Ring in x over Algebraic Field
 ```
 
-There are also wrong coercions going on
+Currently, these pushouts are allowed:
 
 ```
 sage: x = LaurentSeriesRing(QQ, 'x').gen()
@@ -29,5 +29,6 @@
 Univariate Polynomial Ring in y over
 Laurent Series Ring in x over Rational Field
 ```
+This is inconsistent with `PowerSeriesRing`.
 
-By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that used to benefit from this buggy behavior.
+By fixing these problems, we had to adapt some code in `sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py` that was using the aforementioned pushout.
``````




---

archive/issue_comments_464665.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-01-03T16:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464665",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_464666.json:
```json
{
    "body": "Changing commit from \"b3f11d9d244e72085a96d64e1286aa43f70df44f\" to \"de63301a78c5746c7d3384a19bac1a4e7564741c\"",
    "created_at": "2018-01-03T17:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b3f11d9d244e72085a96d64e1286aa43f70df44f" to "de63301a78c5746c7d3384a19bac1a4e7564741c"



---

archive/issue_comments_464667.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[de63301](https://github.com/sagemath/sagetrac-mirror/commit/de63301a78c5746c7d3384a19bac1a4e7564741c)|`24431: unneeded '\\' and more tests`|",
    "created_at": "2018-01-03T17:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[de63301](https://github.com/sagemath/sagetrac-mirror/commit/de63301a78c5746c7d3384a19bac1a4e7564741c)|`24431: unneeded '\' and more tests`|



---

archive/issue_comments_464668.json:
```json
{
    "body": "<a id='comment:15'></a>\nI did not find the import you were talking about in [comment:13].",
    "created_at": "2018-01-03T17:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464668",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
I did not find the import you were talking about in [comment:13].



---

archive/issue_comments_464669.json:
```json
{
    "body": "<a id='comment:16'></a>\n\n```diff\ndiff --git a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\nindex cdca282..9e9897a 100644\n--- a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\n+++ b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\n@@ -33,7 +33,11 @@ from __future__ import absolute_import\n #                  http://www.gnu.org/licenses/\n #*****************************************************************************\n \n-from sage.rings.all import PolynomialRing, RR, PowerSeriesRing, LaurentSeriesRing, O\n+from sage.rings.polynomial.all import PolynomialRing, LaurentPolynomialRing\n+from sage.rings.big_oh import O\n+from sage.rings.power_series_ring import PowerSeriesRing\n+from sage.rings.laurent_series_ring import LaurentSeriesRing\n+from sage.rings.real_mpfr import RR\n from sage.functions.all import log\n from sage.structure.category_object import normalize_names\n \n```",
    "created_at": "2018-01-03T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464669",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>

```diff
diff --git a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
index cdca282..9e9897a 100644
--- a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
+++ b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
@@ -33,7 +33,11 @@ from __future__ import absolute_import
 #                  http://www.gnu.org/licenses/
 #*****************************************************************************
 
-from sage.rings.all import PolynomialRing, RR, PowerSeriesRing, LaurentSeriesRing, O
+from sage.rings.polynomial.all import PolynomialRing, LaurentPolynomialRing
+from sage.rings.big_oh import O
+from sage.rings.power_series_ring import PowerSeriesRing
+from sage.rings.laurent_series_ring import LaurentSeriesRing
+from sage.rings.real_mpfr import RR
 from sage.functions.all import log
 from sage.structure.category_object import normalize_names
 
```



---

archive/issue_comments_464670.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[cd4b485](https://github.com/sagemath/sagetrac-mirror/commit/cd4b485c31009875acf25e8082477b2da7288ee5)|`24431: remove unused import`|",
    "created_at": "2018-01-03T18:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[cd4b485](https://github.com/sagemath/sagetrac-mirror/commit/cd4b485c31009875acf25e8082477b2da7288ee5)|`24431: remove unused import`|



---

archive/issue_comments_464671.json:
```json
{
    "body": "Changing commit from \"de63301a78c5746c7d3384a19bac1a4e7564741c\" to \"cd4b485c31009875acf25e8082477b2da7288ee5\"",
    "created_at": "2018-01-03T18:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "de63301a78c5746c7d3384a19bac1a4e7564741c" to "cd4b485c31009875acf25e8082477b2da7288ee5"



---

archive/issue_comments_464672.json:
```json
{
    "body": "<a id='comment:18'></a>\nLooks like there is a test failure since 8.2.beta3.",
    "created_at": "2018-01-30T15:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464672",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:18'></a>
Looks like there is a test failure since 8.2.beta3.



---

archive/issue_comments_464673.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-30T15:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464673",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_464674.json:
```json
{
    "body": "<a id='comment:19'></a>\nIt is trivial due to the output of the functor. Once fixed, you can set a positive review on my behalf.",
    "created_at": "2018-01-30T17:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464674",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
It is trivial due to the output of the functor. Once fixed, you can set a positive review on my behalf.



---

archive/issue_comments_464675.json:
```json
{
    "body": "Changing commit from \"cd4b485c31009875acf25e8082477b2da7288ee5\" to \"8abc33b3dd7001c7022e9c114563251d7e668304\"",
    "created_at": "2018-01-30T18:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cd4b485c31009875acf25e8082477b2da7288ee5" to "8abc33b3dd7001c7022e9c114563251d7e668304"



---

archive/issue_comments_464676.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[8abc33b](https://github.com/sagemath/sagetrac-mirror/commit/8abc33b3dd7001c7022e9c114563251d7e668304)|`24431: Laurent series pushout and coercions`|",
    "created_at": "2018-01-30T18:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[8abc33b](https://github.com/sagemath/sagetrac-mirror/commit/8abc33b3dd7001c7022e9c114563251d7e668304)|`24431: Laurent series pushout and coercions`|



---

archive/issue_comments_464677.json:
```json
{
    "body": "<a id='comment:21'></a>\nRebased on beta4. Waiting for patchbots as an extra check.",
    "created_at": "2018-01-30T18:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464677",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
Rebased on beta4. Waiting for patchbots as an extra check.



---

archive/issue_comments_464678.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-30T18:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464678",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_464679.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-30T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464679",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_464680.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-02T12:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464680",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_464681.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/24431\" to \"8abc33b3dd7001c7022e9c114563251d7e668304\"",
    "created_at": "2018-02-02T12:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24431#issuecomment-464681",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/24431" to "8abc33b3dd7001c7022e9c114563251d7e668304"



---

archive/issue_events_070196.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-02T12:05:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24431",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24431#event-70196"
}
```
