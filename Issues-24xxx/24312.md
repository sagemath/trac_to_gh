# Issue 24312: py3: fixes to sage.misc.sageinspect

archive/issues_024075.json:
```json
{
    "assignees": [],
    "body": "I felt it might be important to make sure these functions were working properly, as some of Sage's metaprogramming and related tests rely on reliable introspection.\n\nA number of the tests in this module only made sense on Python 2 due to minor syntactic differences or similar minor differences between the languages; in some cases I provided Python 3 alternatives, in other cases the test is just run on Python 2.  In still other cases I changed the test slightly to work on both, where I felt that it didn't impact the validity of the test.\n\nCC:  @nthiery\n\nBranch/Commit: **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Erik Bray**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24312_\n\n",
    "closed_at": "2018-05-08T17:27:02Z",
    "created_at": "2017-12-01T14:53:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fixes to sage.misc.sageinspect",
    "type": "issue",
    "updated_at": "2018-05-08T17:27:02Z",
    "url": "https://github.com/sagemath/sage/issues/24312",
    "user": "https://github.com/embray"
}
```
I felt it might be important to make sure these functions were working properly, as some of Sage's metaprogramming and related tests rely on reliable introspection.

A number of the tests in this module only made sense on Python 2 due to minor syntactic differences or similar minor differences between the languages; in some cases I provided Python 3 alternatives, in other cases the test is just run on Python 2.  In still other cases I changed the test slightly to work on both, where I felt that it didn't impact the validity of the test.

CC:  @nthiery

Branch/Commit: **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**

Reviewer: **Jeroen Demeyer**

Author: **Erik Bray**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/24312_





---

archive/issue_events_334254.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-01T14:53:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334254"
}
```



---

archive/issue_events_334255.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-01T14:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334255"
}
```



---

archive/issue_events_334256.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-01T14:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334256"
}
```



---

archive/issue_events_334257.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-01T14:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334257"
}
```



---

archive/issue_events_334258.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-01T14:57:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334258"
}
```



---

archive/issue_comments_367890.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhy the changes to `src/sage/misc/nested_class_test.py`?",
    "created_at": "2018-01-12T16:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367890",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

Why the changes to `src/sage/misc/nested_class_test.py`?



---

archive/issue_comments_367891.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis was meant to support `unicode` in Python 2:\n\n```\n    elif isinstance(r, text_type):\n        # On Python 2, we want str, not unicode\n        return r.encode('utf-8', 'ignore')\n```\nAre you sure that this is no longer needed?",
    "created_at": "2018-01-12T16:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367891",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

This was meant to support `unicode` in Python 2:

```
    elif isinstance(r, text_type):
        # On Python 2, we want str, not unicode
        return r.encode('utf-8', 'ignore')
```
Are you sure that this is no longer needed?



---

archive/issue_comments_367892.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDid you intentionally duplicate this line\n\n```\niter_lines = iter(lines)\n```",
    "created_at": "2018-01-12T16:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367892",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Did you intentionally duplicate this line

```
iter_lines = iter(lines)
```



---

archive/issue_comments_367893.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jdemeyer](#comment%3A2):\n> Why the changes to `src/sage/misc/nested_class_test.py`?\n\nI don't think I intended to include that in this branch.  I can either remove it, or it can come along for the ride since it's a minor change that has to happen anyways. Up to you.",
    "created_at": "2018-01-12T16:19:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367893",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jdemeyer](#comment%3A2):
> Why the changes to `src/sage/misc/nested_class_test.py`?

I don't think I intended to include that in this branch.  I can either remove it, or it can come along for the ride since it's a minor change that has to happen anyways. Up to you.



---

archive/issue_comments_367894.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWhat's up with this:\n\n```\n        sage: warnings.filterwarnings('ignore',\n        ....:                         r'inspect.getargspec\\(\\) is deprecated',\n        ....:                         DeprecationWarning)\n```\nIf it's genuinely deprecated, we shouldn't use it... silencing the warning doesn't help with that.",
    "created_at": "2018-01-12T16:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367894",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

What's up with this:

```
        sage: warnings.filterwarnings('ignore',
        ....:                         r'inspect.getargspec\(\) is deprecated',
        ....:                         DeprecationWarning)
```
If it's genuinely deprecated, we shouldn't use it... silencing the warning doesn't help with that.



---

archive/issue_comments_367895.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@embray](#comment%3A5):\n> since it's a minor change that has to happen anyways\n\nPlease explain why it \"has to happen anyways\". Do you intend to replace\n\n```\nclass X\n```\nby\n\n```\nclass X(object)\n```\neverywhere?",
    "created_at": "2018-01-12T16:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367895",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@embray](#comment%3A5):
> since it's a minor change that has to happen anyways

Please explain why it "has to happen anyways". Do you intend to replace

```
class X
```
by

```
class X(object)
```
everywhere?



---

archive/issue_comments_367896.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jdemeyer](#comment%3A3):\n> This was meant to support `unicode` in Python 2:\n> \n> ```\n>     elif isinstance(r, text_type):\n>         # On Python 2, we want str, not unicode\n>         return r.encode('utf-8', 'ignore')\n> ```\n> Are you sure that this is no longer needed?\n\nAh, I see. This needs to be fixed regardless since on Python 3 it was converting `str` to `bytes`.  I don't think it's needed on Python 2 unless there's some explicit reason that this function can't *return* a unicode string, and I don't see that there is.",
    "created_at": "2018-01-12T16:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367896",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jdemeyer](#comment%3A3):
> This was meant to support `unicode` in Python 2:
> 
> ```
>     elif isinstance(r, text_type):
>         # On Python 2, we want str, not unicode
>         return r.encode('utf-8', 'ignore')
> ```
> Are you sure that this is no longer needed?

Ah, I see. This needs to be fixed regardless since on Python 3 it was converting `str` to `bytes`.  I don't think it's needed on Python 2 unless there's some explicit reason that this function can't *return* a unicode string, and I don't see that there is.



---

archive/issue_comments_367897.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis is redundant:\n\n```\n        sage: sgc(\"def dummy_python(self, *args, x=1): pass\")  # py3\n        sage: sgc(\"def dummy_cython(self, *args, x=1): pass\")\n```",
    "created_at": "2018-01-12T16:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367897",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

This is redundant:

```
        sage: sgc("def dummy_python(self, *args, x=1): pass")  # py3
        sage: sgc("def dummy_cython(self, *args, x=1): pass")
```



---

archive/issue_comments_367898.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nNote to self: this obviously affects docbuilding. So one should check that it doesn't introduce any regressions in the documentation.",
    "created_at": "2018-01-12T16:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367898",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Note to self: this obviously affects docbuilding. So one should check that it doesn't introduce any regressions in the documentation.



---

archive/issue_comments_367899.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment%3A7):\n> Replying to [@embray](#comment%3A5):\n> > since it's a minor change that has to happen anyways\n\n> \n> Please explain why it \"has to happen anyways\". Do you intend to replace\n> \n> ```\n> class X\n> ```\n> by\n> \n> ```\n> class X(object)\n> ```\n> everywhere?\n\nThat's a tricky question, probably for discussion elsewhere (that is, if it requires further discussion I'll just remove the change from this ticket for now).  I don't think it needs to be changed *everywhere* but for the purposes of *tests* that are the same on Python 2 and Python 3 old-style classes often won't work (if nothing else their repr is different), and I would prefer to standardize on new-style classes.",
    "created_at": "2018-01-12T16:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367899",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment%3A7):
> Replying to [@embray](#comment%3A5):
> > since it's a minor change that has to happen anyways

> 
> Please explain why it "has to happen anyways". Do you intend to replace
> 
> ```
> class X
> ```
> by
> 
> ```
> class X(object)
> ```
> everywhere?

That's a tricky question, probably for discussion elsewhere (that is, if it requires further discussion I'll just remove the change from this ticket for now).  I don't think it needs to be changed *everywhere* but for the purposes of *tests* that are the same on Python 2 and Python 3 old-style classes often won't work (if nothing else their repr is different), and I would prefer to standardize on new-style classes.



---

archive/issue_comments_367900.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@embray](#comment%3A11):\n> I would prefer to standardize on new-style classes.\n\nFor the record: I agree. It's just that we should continue to support old-style classes on Python 2. So if a test is specifically meant to test old-style classes, it should be kept.\n\nIf you are in Orsay, please talk to Nicolas about this. He usually insists on using and supporting old-style classes.\n\n> if it requires further discussion I'll just remove the change from this ticket for now\n\nIf that's easy to do: please do so.",
    "created_at": "2018-01-12T16:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367900",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@embray](#comment%3A11):
> I would prefer to standardize on new-style classes.

For the record: I agree. It's just that we should continue to support old-style classes on Python 2. So if a test is specifically meant to test old-style classes, it should be kept.

If you are in Orsay, please talk to Nicolas about this. He usually insists on using and supporting old-style classes.

> if it requires further discussion I'll just remove the change from this ticket for now

If that's easy to do: please do so.



---

archive/issue_comments_367901.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI think there are cases that makes sense, but I recall in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.",
    "created_at": "2018-01-15T09:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367901",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

I think there are cases that makes sense, but I recall in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.



---

archive/issue_comments_367902.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@embray](#comment%3A13):\n> in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.\n\nThe question is not \"does this test *require* an old-style class?\". The question is \"is this meant to *test* old-style classes?\"",
    "created_at": "2018-01-15T09:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367902",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@embray](#comment%3A13):
> in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.

The question is not "does this test *require* an old-style class?". The question is "is this meant to *test* old-style classes?"



---

archive/issue_comments_367903.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@embray](#comment%3A13):\n> I think there are cases that makes sense, but I recall in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.\n\nSpeaking of which, it turns out that change *was* relevant to this ticket, because one of the tests in sageinspect uses `TestNestedParent` from that module.  The only reason I can tell that its even in a separate module is that it's related to testing `sage_getsource`.\n\nAnd no, it's not meant to test old-style classes.  That's what I was saying.  It would be easier to see this if we had actual test coverage analysis for Sage but this change is irrelevant to the test.",
    "created_at": "2018-01-15T09:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367903",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@embray](#comment%3A13):
> I think there are cases that makes sense, but I recall in this case that there was absolutely nothing about the test that specifically required it to be an old-style class.

Speaking of which, it turns out that change *was* relevant to this ticket, because one of the tests in sageinspect uses `TestNestedParent` from that module.  The only reason I can tell that its even in a separate module is that it's related to testing `sage_getsource`.

And no, it's not meant to test old-style classes.  That's what I was saying.  It would be easier to see this if we had actual test coverage analysis for Sage but this change is irrelevant to the test.



---

archive/issue_comments_367904.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt also rather annoyingly contains an exact duplicate of most of the same doctest that's in sageinspect.  I would just as soon remove that.",
    "created_at": "2018-01-15T09:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367904",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

It also rather annoyingly contains an exact duplicate of most of the same doctest that's in sageinspect.  I would just as soon remove that.



---

archive/issue_comments_367905.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857\"><code>dd82b2a</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>\n",
    "created_at": "2018-01-15T10:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857"><code>dd82b2a</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>




---

archive/issue_comments_367906.json:
```json
{
    "body": "Changed commit from **[`812645d`](https://github.com/sagemath/sagetrac-mirror/commit/812645d09ba8003147e6539749f6f66d6ac57fae)** to **[`dd82b2a`](https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857)**",
    "created_at": "2018-01-15T10:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`812645d`](https://github.com/sagemath/sagetrac-mirror/commit/812645d09ba8003147e6539749f6f66d6ac57fae)** to **[`dd82b2a`](https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857)**



---

archive/issue_comments_367907.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@embray](#comment%3A15):\n> And no, it's not meant to test old-style classes.\n\nI'm not convinced. The test is meant to test the pattern\n\n```\nclass NewStyle(...):\n    class Element:\n        ...\n```\nwhich occurs a lot in Sage. It's not obvious to me why it doesn't matter if `Element` is a new-style or old-style class.",
    "created_at": "2018-01-15T18:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367907",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@embray](#comment%3A15):
> And no, it's not meant to test old-style classes.

I'm not convinced. The test is meant to test the pattern

```
class NewStyle(...):
    class Element:
        ...
```
which occurs a lot in Sage. It's not obvious to me why it doesn't matter if `Element` is a new-style or old-style class.



---

archive/issue_comments_367908.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIt's only meant to test *extracting the source code* of nested classes.  If you trace the code for doing that you'll find that it's fairly general code for nested statements in general (nested functions and classes) and just about the only point at which the fact of it being a class comes in is in calls to `inspect.isclass()` which returns True for both old-style and new-style classes on Python 2.",
    "created_at": "2018-01-16T16:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367908",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">comment:19</div>

It's only meant to test *extracting the source code* of nested classes.  If you trace the code for doing that you'll find that it's fairly general code for nested statements in general (nested functions and classes) and just about the only point at which the fact of it being a class comes in is in calls to `inspect.isclass()` which returns True for both old-style and new-style classes on Python 2.



---

archive/issue_comments_367909.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOK, let me turn the question around: if it doesn't matter whether it's an old-style or new-style class, why do you insist on changing it to a new-style class? Why not leave it alone?",
    "created_at": "2018-01-16T17:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367909",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

OK, let me turn the question around: if it doesn't matter whether it's an old-style or new-style class, why do you insist on changing it to a new-style class? Why not leave it alone?



---

archive/issue_comments_367910.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> OK, let me turn the question around: if it doesn't matter whether it's an old-style or new-style class, why do you insist on changing it to a new-style class? Why not leave it alone?\n\nIn this case the *only* reason was because there was some part of the test that checked the repr of the nested class, and new-style and old-style classes have different reprs :(\n\nAlternatively I could add a fixup for this to the doctest parser as I've done in other cases.  This isn't the only example I've found like this.  It's usually just simpler to convert to a new-style class except in the miniscule number cases where that has an impact on what's being tested.",
    "created_at": "2018-01-16T17:23:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367910",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment%3A20):
> OK, let me turn the question around: if it doesn't matter whether it's an old-style or new-style class, why do you insist on changing it to a new-style class? Why not leave it alone?

In this case the *only* reason was because there was some part of the test that checked the repr of the nested class, and new-style and old-style classes have different reprs :(

Alternatively I could add a fixup for this to the doctest parser as I've done in other cases.  This isn't the only example I've found like this.  It's usually just simpler to convert to a new-style class except in the miniscule number cases where that has an impact on what's being tested.



---

archive/issue_events_334259.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-29T13:54:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334259"
}
```



---

archive/issue_events_334260.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-29T13:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334260"
}
```



---

archive/issue_comments_367911.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nMerge conflict.",
    "created_at": "2018-01-29T13:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367911",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Merge conflict.



---

archive/issue_comments_367912.json:
```json
{
    "body": "Changed dependencies from **#24261** to none",
    "created_at": "2018-02-12T13:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367912",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#24261** to none



---

archive/issue_comments_367913.json:
```json
{
    "body": "Changed commit from **[`dd82b2a`](https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857)** to **[`4b4baee`](https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4)**",
    "created_at": "2018-02-12T13:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367913",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`dd82b2a`](https://github.com/sagemath/sagetrac-mirror/commit/dd82b2a6afb953376252880942ed1b9d42b78857)** to **[`4b4baee`](https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4)**



---

archive/issue_comments_367914.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4\"><code>4b4baee</code></a></td><td><code>Merge branch 'u/embray/python3/sage-misc-sageinspect' in 8.1.b5</code></td></tr></table>\n",
    "created_at": "2018-02-12T13:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367914",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4"><code>4b4baee</code></a></td><td><code>Merge branch 'u/embray/python3/sage-misc-sageinspect' in 8.1.b5</code></td></tr></table>




---

archive/issue_comments_367915.json:
```json
{
    "body": "Changed branch from **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)** to **[public/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/sage-misc-sageinspect)**",
    "created_at": "2018-02-12T13:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367915",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)** to **[public/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/sage-misc-sageinspect)**



---

archive/issue_events_334261.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-12T13:00:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334261"
}
```



---

archive/issue_events_334262.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-12T13:00:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334262"
}
```



---

archive/issue_events_334263.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T13:32:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334263"
}
```



---

archive/issue_events_334264.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-12T13:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334264"
}
```



---

archive/issue_comments_367916.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThere is still the issue of replacing old-style by new-classes classes.",
    "created_at": "2018-02-12T13:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367916",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

There is still the issue of replacing old-style by new-classes classes.



---

archive/issue_comments_367917.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jdemeyer](#comment%3A12):\n> If you are in Orsay, please talk to Nicolas about this. He usually insists on using and supporting old-style classes.\n\nJust to clarify, let me elaborate on that. I am not specifically keen on old-style classes per se. In fact, if there would be an easy way to \"configure\" Python so that\n\n```\n    class A:\n        ...\n```\nwould always create a new style class, that would be very fine.\n\nOn the other hand, we have quite some of code in Sage *and* outside of Sage (in packages or users private code) that use the idiom:\n\n```\n    class A(...):\n        class Element:\n            ...\n```\n\nIt would not be a practical to have to change this everywhere to\n\n```\n    class A(...):\n        class Element(object):\n            ...\n```\nwhen anyway that won't be needed anymore with Python 3.\n\nCheers,",
    "created_at": "2018-02-13T22:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367917",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jdemeyer](#comment%3A12):
> If you are in Orsay, please talk to Nicolas about this. He usually insists on using and supporting old-style classes.

Just to clarify, let me elaborate on that. I am not specifically keen on old-style classes per se. In fact, if there would be an easy way to "configure" Python so that

```
    class A:
        ...
```
would always create a new style class, that would be very fine.

On the other hand, we have quite some of code in Sage *and* outside of Sage (in packages or users private code) that use the idiom:

```
    class A(...):
        class Element:
            ...
```

It would not be a practical to have to change this everywhere to

```
    class A(...):
        class Element(object):
            ...
```
when anyway that won't be needed anymore with Python 3.

Cheers,



---

archive/issue_comments_367918.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nthiery](#comment%3A26):\n> In fact, if there would be an easy way to \"configure\" Python so that\n> \n> ```\n>     class A:\n>         ...\n> ```\n> would always create a new style class, that would be very fine.\n\nI agree. I sometimes wonder why there is no `from `__future__` import new_class` in Python 2.",
    "created_at": "2018-02-14T06:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367918",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nthiery](#comment%3A26):
> In fact, if there would be an easy way to "configure" Python so that
> 
> ```
>     class A:
>         ...
> ```
> would always create a new style class, that would be very fine.

I agree. I sometimes wonder why there is no `from `__future__` import new_class` in Python 2.



---

archive/issue_comments_367919.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI'll just point out, yet again, that for the purposes of this test it's completely irrelevant.\n\nI'm going to rebase my original branch.  I really don't like bi-directional merges.  It's much harder to reason about.",
    "created_at": "2018-02-14T16:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367919",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

I'll just point out, yet again, that for the purposes of this test it's completely irrelevant.

I'm going to rebase my original branch.  I really don't like bi-directional merges.  It's much harder to reason about.



---

archive/issue_comments_367920.json:
```json
{
    "body": "Changed commit from **[`4b4baee`](https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4)** to **[`726f0cb`](https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a)**",
    "created_at": "2018-02-14T16:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367920",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`4b4baee`](https://github.com/sagemath/sagetrac-mirror/commit/4b4baeebc62e9b12a0b39b19ec8e98ddaf511ce4)** to **[`726f0cb`](https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a)**



---

archive/issue_comments_367921.json:
```json
{
    "body": "Changed branch from **[public/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/sage-misc-sageinspect)** to **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)**",
    "created_at": "2018-02-14T16:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367921",
    "user": "https://github.com/embray"
}
```

Changed branch from **[public/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/sage-misc-sageinspect)** to **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)**



---

archive/issue_comments_367922.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b80324b4b30d74fa079a77e804aaddea6fe7e4\"><code>11b8032</code></a></td><td><code>Replace the argument name 'object' with just 'obj'--this is consistent with other functions in this module, and doesn't involve a jarring overwrite of a built-in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d984b5c109ad2c5333a9921c1d32d07cd02e389\"><code>4d984b5</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a61ce6d9bdffe3d63d2efdfdbe6ef7cb58a1f24\"><code>7a61ce6</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8c49bd54fd61a99e26b34e9440f984e79ceb8ad\"><code>c8c49bd</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7fb1ddb8d2a8596d432870a258aa10845be60d0\"><code>c7fb1dd</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7810d66224d0f482ed738e6e20707e58ad2e546\"><code>e7810d6</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b2071ce40f05cfa7618a26d8683238a10ff587d\"><code>3b2071c</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11c36e06b5f1b15c74dfc94908d37429c36e3d6e\"><code>11c36e0</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02623257f09b178763c7aea3a12ffa283eb54795\"><code>0262325</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a\"><code>726f0cb</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>\n",
    "created_at": "2018-02-14T16:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367922",
    "user": "https://github.com/embray"
}
```

<div id="comment:29"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b80324b4b30d74fa079a77e804aaddea6fe7e4"><code>11b8032</code></a></td><td><code>Replace the argument name 'object' with just 'obj'--this is consistent with other functions in this module, and doesn't involve a jarring overwrite of a built-in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d984b5c109ad2c5333a9921c1d32d07cd02e389"><code>4d984b5</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a61ce6d9bdffe3d63d2efdfdbe6ef7cb58a1f24"><code>7a61ce6</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8c49bd54fd61a99e26b34e9440f984e79ceb8ad"><code>c8c49bd</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7fb1ddb8d2a8596d432870a258aa10845be60d0"><code>c7fb1dd</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7810d66224d0f482ed738e6e20707e58ad2e546"><code>e7810d6</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b2071ce40f05cfa7618a26d8683238a10ff587d"><code>3b2071c</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11c36e06b5f1b15c74dfc94908d37429c36e3d6e"><code>11c36e0</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02623257f09b178763c7aea3a12ffa283eb54795"><code>0262325</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a"><code>726f0cb</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>




---

archive/issue_events_334265.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-14T16:15:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334265"
}
```



---

archive/issue_events_334266.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-14T16:15:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334266"
}
```



---

archive/issue_comments_367923.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThis does not build correctly.",
    "created_at": "2018-02-19T12:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367923",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

This does not build correctly.



---

archive/issue_events_334267.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-19T12:49:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334267"
}
```



---

archive/issue_events_334268.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-19T12:49:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334268"
}
```



---

archive/issue_comments_367924.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nLooks like there's a missing import now--possibly somehow resulting from my last rebase.",
    "created_at": "2018-02-19T12:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367924",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">comment:32</div>

Looks like there's a missing import now--possibly somehow resulting from my last rebase.



---

archive/issue_comments_367925.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/875a2a55ce16017b1bfcab611a9af8798dffe2ca\"><code>875a2a5</code></a></td><td><code>Replace the argument name 'object' with just 'obj'--this is consistent with other functions in this module, and doesn't involve a jarring overwrite of a built-in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1bbdb85b3caedbc62c488fe0d98bb576e0bcd81\"><code>c1bbdb8</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/768001bd77ae755113031f7f153cceaf3f4c0692\"><code>768001b</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24541bc9fafb27a177b223cc21540cb70ac66bf4\"><code>24541bc</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/278a5df5c5c8f410be50de7f32cf2436770cadc5\"><code>278a5df</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dec2cc9aeecaa6f9d2c26068cb4fea495dd90c30\"><code>dec2cc9</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aa15a8647598c5224fbe7d34c94a660fce51f52\"><code>3aa15a8</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75872e7778465df7ee5e5bcefa07235aa4ec38d6\"><code>75872e7</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fde3044773aad240cfa50f48fbc94a42f19e2c5\"><code>5fde304</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f\"><code>4703c6a</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>\n",
    "created_at": "2018-02-19T14:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/875a2a55ce16017b1bfcab611a9af8798dffe2ca"><code>875a2a5</code></a></td><td><code>Replace the argument name 'object' with just 'obj'--this is consistent with other functions in this module, and doesn't involve a jarring overwrite of a built-in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1bbdb85b3caedbc62c488fe0d98bb576e0bcd81"><code>c1bbdb8</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/768001bd77ae755113031f7f153cceaf3f4c0692"><code>768001b</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24541bc9fafb27a177b223cc21540cb70ac66bf4"><code>24541bc</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/278a5df5c5c8f410be50de7f32cf2436770cadc5"><code>278a5df</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dec2cc9aeecaa6f9d2c26068cb4fea495dd90c30"><code>dec2cc9</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aa15a8647598c5224fbe7d34c94a660fce51f52"><code>3aa15a8</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75872e7778465df7ee5e5bcefa07235aa4ec38d6"><code>75872e7</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fde3044773aad240cfa50f48fbc94a42f19e2c5"><code>5fde304</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f"><code>4703c6a</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr></table>




---

archive/issue_comments_367926.json:
```json
{
    "body": "Changed commit from **[`726f0cb`](https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a)** to **[`4703c6a`](https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f)**",
    "created_at": "2018-02-19T14:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`726f0cb`](https://github.com/sagemath/sagetrac-mirror/commit/726f0cb667ba4f21e5ad32f4aa3ea1acd947eb3a)** to **[`4703c6a`](https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f)**



---

archive/issue_comments_367927.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nRebased; fixed missing import.",
    "created_at": "2018-02-19T14:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367927",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">comment:34</div>

Rebased; fixed missing import.



---

archive/issue_events_334269.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-19T14:18:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334269"
}
```



---

archive/issue_events_334270.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-19T14:18:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334270"
}
```



---

archive/issue_events_334271.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-09T10:35:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334271"
}
```



---

archive/issue_events_334272.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-09T10:35:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334272"
}
```



---

archive/issue_comments_367928.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@embray](#comment%3A28):\n> I'll just point out, yet again, that for the purposes of this test it's completely irrelevant.\n\nThat test is meant to test *actual usage* of nested classes. If there is actual usage of nested classes with old-style classes, it should be tested.\n\nMaybe a compromise would be to test it both with old-style and new-style classes and mark the former `# py2`.",
    "created_at": "2018-03-09T10:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367928",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@embray](#comment%3A28):
> I'll just point out, yet again, that for the purposes of this test it's completely irrelevant.

That test is meant to test *actual usage* of nested classes. If there is actual usage of nested classes with old-style classes, it should be tested.

Maybe a compromise would be to test it both with old-style and new-style classes and mark the former `# py2`.



---

archive/issue_comments_367929.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jdemeyer](#comment%3A35):\n> Replying to [@embray](#comment%3A28):\n> > I'll just point out, yet again, that for the purposes of this test it's completely irrelevant.\n\n> \n> That test is meant to test *actual usage* of nested classes. If there is actual usage of nested classes with old-style classes, it should be tested.\n\nBut the functionality it's testing has nothing to do with whether or not it's an old-style class.  If it did I'd agree.  It's completely irrelevant though.",
    "created_at": "2018-03-09T10:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367929",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jdemeyer](#comment%3A35):
> Replying to [@embray](#comment%3A28):
> > I'll just point out, yet again, that for the purposes of this test it's completely irrelevant.

> 
> That test is meant to test *actual usage* of nested classes. If there is actual usage of nested classes with old-style classes, it should be tested.

But the functionality it's testing has nothing to do with whether or not it's an old-style class.  If it did I'd agree.  It's completely irrelevant though.



---

archive/issue_comments_367930.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jdemeyer](#comment%3A35):\n> Maybe a compromise would be to test it both with old-style and new-style classes and mark the former `# py2`.\n\nI'll go with your compromise, but it's still unnecessary.  You can see that the code that this affects is actually completely unconcerned with whether or not there's an `(object)` there (the regexp that checks for the first line of a class definition doesn't even care): https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/misc/sageinspect.py?id=7de19b8b561eec01557c878cdb5135bbad5fa81c#n2133",
    "created_at": "2018-03-09T11:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367930",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jdemeyer](#comment%3A35):
> Maybe a compromise would be to test it both with old-style and new-style classes and mark the former `# py2`.

I'll go with your compromise, but it's still unnecessary.  You can see that the code that this affects is actually completely unconcerned with whether or not there's an `(object)` there (the regexp that checks for the first line of a class definition doesn't even care): https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/misc/sageinspect.py?id=7de19b8b561eec01557c878cdb5135bbad5fa81c#n2133



---

archive/issue_comments_367931.json:
```json
{
    "body": "Changed commit from **[`4703c6a`](https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f)** to **[`7de5091`](https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9)**",
    "created_at": "2018-03-09T11:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4703c6a`](https://github.com/sagemath/sagetrac-mirror/commit/4703c6a1cec20165c8d2d06a309785c23323ee4f)** to **[`7de5091`](https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9)**



---

archive/issue_comments_367932.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac9baee249a5e3e5def4cd553b213ce22bd02f86\"><code>ac9baee</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf0632e282629c305844bca164bf692bb31fdf0e\"><code>bf0632e</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5393bc47ef714a5bb1f682649537f4b19db8353\"><code>c5393bc</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b8ff18e5ffc7dda66a6a64304e84631aed056de\"><code>1b8ff18</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10add86dc4eeefcb42dd3f03e64fe4f63370495f\"><code>10add86</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df43caf4cc2c52d72700e62a51a101823823eea5\"><code>df43caf</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46ad9a58a34141fdfc3af4d7864a363044bab155\"><code>46ad9a5</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7592c2f9ebbe376b48b7d78b7a380b2a1340e0c9\"><code>7592c2f</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/099b387308bfe2a3cbb2994defbe2799945ffd4d\"><code>099b387</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9\"><code>7de5091</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr></table>\n",
    "created_at": "2018-03-09T11:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367932",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac9baee249a5e3e5def4cd553b213ce22bd02f86"><code>ac9baee</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf0632e282629c305844bca164bf692bb31fdf0e"><code>bf0632e</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5393bc47ef714a5bb1f682649537f4b19db8353"><code>c5393bc</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b8ff18e5ffc7dda66a6a64304e84631aed056de"><code>1b8ff18</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10add86dc4eeefcb42dd3f03e64fe4f63370495f"><code>10add86</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df43caf4cc2c52d72700e62a51a101823823eea5"><code>df43caf</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46ad9a58a34141fdfc3af4d7864a363044bab155"><code>46ad9a5</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7592c2f9ebbe376b48b7d78b7a380b2a1340e0c9"><code>7592c2f</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/099b387308bfe2a3cbb2994defbe2799945ffd4d"><code>099b387</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9"><code>7de5091</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr></table>




---

archive/issue_events_334273.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-09T11:13:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334273"
}
```



---

archive/issue_events_334274.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-09T11:13:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334274"
}
```



---

archive/issue_comments_367933.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\n[comment:4] still applies",
    "created_at": "2018-03-09T11:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367933",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

[comment:4] still applies



---

archive/issue_comments_367934.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jdemeyer](#comment%3A40):\n> [comment:4] still applies\n\nOops, thanks.\n\nIf that's the only issue that remains I'll fix it and set positive review.",
    "created_at": "2018-03-09T11:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367934",
    "user": "https://github.com/embray"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jdemeyer](#comment%3A40):
> [comment:4] still applies

Oops, thanks.

If that's the only issue that remains I'll fix it and set positive review.



---

archive/issue_comments_367935.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n[comment:6] and [comment:9] still apply too",
    "created_at": "2018-03-09T11:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367935",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

[comment:6] and [comment:9] still apply too



---

archive/issue_comments_367936.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAnd [comment:3]",
    "created_at": "2018-03-09T11:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367936",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

And [comment:3]



---

archive/issue_comments_367937.json:
```json
{
    "body": "Changed commit from **[`7de5091`](https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9)** to **[`364e615`](https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83)**",
    "created_at": "2018-03-09T11:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367937",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7de5091`](https://github.com/sagemath/sagetrac-mirror/commit/7de50917501f0d5c214e70a8dfd618456d95b2f9)** to **[`364e615`](https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83)**



---

archive/issue_comments_367938.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac9baee249a5e3e5def4cd553b213ce22bd02f86\"><code>ac9baee</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06e4f76b52706adb0183b1b470ae1fe96f4bec4f\"><code>06e4f76</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba379d842c8b036204b53399b157ed91fe5f2ecc\"><code>ba379d8</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb5abeb97549d5599c96fe2254b55b61334710e\"><code>6eb5abe</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06f7325a0a6dee2c4e190c7efe7a65b7d9fca860\"><code>06f7325</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa3005e8bcde6fcc52c252f1f32c1dabdfedb29b\"><code>aa3005e</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6957ff461e6cfaddb9af283f746ce2056ee487c\"><code>f6957ff</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3636481895ba96c80eb6871a08f6b12f0ba656f2\"><code>3636481</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eb118e7af941fc81d8cc137a652212bfb377917\"><code>4eb118e</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83\"><code>364e615</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr></table>\n",
    "created_at": "2018-03-09T11:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac9baee249a5e3e5def4cd553b213ce22bd02f86"><code>ac9baee</code></a></td><td><code>Add 'builtins' to the list of builtin modules; minor cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06e4f76b52706adb0183b1b470ae1fe96f4bec4f"><code>06e4f76</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba379d842c8b036204b53399b157ed91fe5f2ecc"><code>ba379d8</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb5abeb97549d5599c96fe2254b55b61334710e"><code>6eb5abe</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06f7325a0a6dee2c4e190c7efe7a65b7d9fca860"><code>06f7325</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa3005e8bcde6fcc52c252f1f32c1dabdfedb29b"><code>aa3005e</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6957ff461e6cfaddb9af283f746ce2056ee487c"><code>f6957ff</code></a></td><td><code>A more Python 3-compatible way to get the class that a method belongs to.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3636481895ba96c80eb6871a08f6b12f0ba656f2"><code>3636481</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eb118e7af941fc81d8cc137a652212bfb377917"><code>4eb118e</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83"><code>364e615</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr></table>




---

archive/issue_comments_367939.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@jdemeyer](#comment%3A9):\n> This is redundant:\n> \n> ```\n>         sage: sgc(\"def dummy_python(self, *args, x=1): pass\")  # py3\n>         sage: sgc(\"def dummy_cython(self, *args, x=1): pass\")\n> ```\n\nEffectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.",
    "created_at": "2018-03-09T11:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367939",
    "user": "https://github.com/embray"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@jdemeyer](#comment%3A9):
> This is redundant:
> 
> ```
>         sage: sgc("def dummy_python(self, *args, x=1): pass")  # py3
>         sage: sgc("def dummy_cython(self, *args, x=1): pass")
> ```

Effectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.



---

archive/issue_comments_367940.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nFor future reference: it would be good to separate commits like [this](https://github.com/sagemath/sagetrac-mirror/commit/6c09c501b19fce0b61246207d267e087f5c5b1bf) to their own ticket. They contain many trivial changes, making the diff harder to read. For now, just leave it: I'll look at the diff relative to that commit.",
    "created_at": "2018-03-09T11:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367940",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

For future reference: it would be good to separate commits like [this](https://github.com/sagemath/sagetrac-mirror/commit/6c09c501b19fce0b61246207d267e087f5c5b1bf) to their own ticket. They contain many trivial changes, making the diff harder to read. For now, just leave it: I'll look at the diff relative to that commit.



---

archive/issue_comments_367941.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@embray](#comment%3A45):\n> Replying to [@jdemeyer](#comment%3A9):\n> > This is redundant:\n> > \n> > ```\n> >         sage: sgc(\"def dummy_python(self, *args, x=1): pass\")  # py3\n> >         sage: sgc(\"def dummy_cython(self, *args, x=1): pass\")\n> > ```\n\n> \n> Effectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.\n\nNo, on Python 3 it performs the same test twice. And the outcome is obviously the same (apart from the \"dummy_cython\" string).",
    "created_at": "2018-03-09T11:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367941",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@embray](#comment%3A45):
> Replying to [@jdemeyer](#comment%3A9):
> > This is redundant:
> > 
> > ```
> >         sage: sgc("def dummy_python(self, *args, x=1): pass")  # py3
> >         sage: sgc("def dummy_cython(self, *args, x=1): pass")
> > ```

> 
> Effectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.

No, on Python 3 it performs the same test twice. And the outcome is obviously the same (apart from the "dummy_cython" string).



---

archive/issue_comments_367942.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@jdemeyer](#comment%3A6):\n> What's up with this:\n> \n> ```\n>         sage: warnings.filterwarnings('ignore',\n>         ....:                         r'inspect.getargspec\\(\\) is deprecated',\n>         ....:                         DeprecationWarning)\n> ```\n> If it's genuinely deprecated, we shouldn't use it... silencing the warning doesn't help with that.\n\n`inspect.getargspec` is not used in any of the code, only in some of the doctests  The reason to keep it is that the output of `sage_getargspec` is the same as the output of `inspect.getargspec` and this tests that that is the case.\n\nThe only alternative would be to change `sage_getargspec` to be equivalent to `inspect.getfullargspec` which has no equivalent on Python 2, and then have separate tests for Python 2 and 3.  I'd be okay with that, but it's a slightly larger change.",
    "created_at": "2018-03-09T11:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367942",
    "user": "https://github.com/embray"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@jdemeyer](#comment%3A6):
> What's up with this:
> 
> ```
>         sage: warnings.filterwarnings('ignore',
>         ....:                         r'inspect.getargspec\(\) is deprecated',
>         ....:                         DeprecationWarning)
> ```
> If it's genuinely deprecated, we shouldn't use it... silencing the warning doesn't help with that.

`inspect.getargspec` is not used in any of the code, only in some of the doctests  The reason to keep it is that the output of `sage_getargspec` is the same as the output of `inspect.getargspec` and this tests that that is the case.

The only alternative would be to change `sage_getargspec` to be equivalent to `inspect.getfullargspec` which has no equivalent on Python 2, and then have separate tests for Python 2 and 3.  I'd be okay with that, but it's a slightly larger change.



---

archive/issue_comments_367943.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThis change looks like it might break stuff:\n\n```diff\n@@ -2247,10 +2254,10 @@ def sage_getsourcelines(obj):\n \n     # First, we deal with nested classes. Their name contains a dot, and we\n     # have a special function for that purpose.\n-    if (not hasattr(obj, '__class__')) or (isinstance(obj, type) and type(obj) is not type):\n+    if not hasattr(obj, '__class__') or isinstance(obj, type):\n```\n\nI agree that the original code was strange (looking specifically for a metaclass different from `type`), but maybe there was a reason...",
    "created_at": "2018-03-09T11:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367943",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

This change looks like it might break stuff:

```diff
@@ -2247,10 +2254,10 @@ def sage_getsourcelines(obj):
 
     # First, we deal with nested classes. Their name contains a dot, and we
     # have a special function for that purpose.
-    if (not hasattr(obj, '__class__')) or (isinstance(obj, type) and type(obj) is not type):
+    if not hasattr(obj, '__class__') or isinstance(obj, type):
```

I agree that the original code was strange (looking specifically for a metaclass different from `type`), but maybe there was a reason...



---

archive/issue_comments_367944.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jdemeyer](#comment%3A3):\n> This was meant to support `unicode` in Python 2:\n> \n> ```\n>     elif isinstance(r, text_type):\n>         # On Python 2, we want str, not unicode\n>         return r.encode('utf-8', 'ignore')\n> ```\n> Are you sure that this is no longer needed?\n\nI see--this should probably updated so that the previous line is `isinstance(r, six.string_types)`.  The fact that this was encoding unicode docstrings to utf-8 is definitely wrong.  They should just be kept as unicode.",
    "created_at": "2018-03-09T11:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367944",
    "user": "https://github.com/embray"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jdemeyer](#comment%3A3):
> This was meant to support `unicode` in Python 2:
> 
> ```
>     elif isinstance(r, text_type):
>         # On Python 2, we want str, not unicode
>         return r.encode('utf-8', 'ignore')
> ```
> Are you sure that this is no longer needed?

I see--this should probably updated so that the previous line is `isinstance(r, six.string_types)`.  The fact that this was encoding unicode docstrings to utf-8 is definitely wrong.  They should just be kept as unicode.



---

archive/issue_comments_367945.json:
```json
{
    "body": "Changed commit from **[`364e615`](https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83)** to **[`5709382`](https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071)**",
    "created_at": "2018-03-09T11:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367945",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`364e615`](https://github.com/sagemath/sagetrac-mirror/commit/364e615e2143c131bb1846fb522cac08eb90fa83)** to **[`5709382`](https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071)**



---

archive/issue_comments_367946.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071\"><code>5709382</code></a></td><td><code>This should accept unicode docstrings as well on Python 2</code></td></tr></table>\n",
    "created_at": "2018-03-09T11:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367946",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071"><code>5709382</code></a></td><td><code>This should accept unicode docstrings as well on Python 2</code></td></tr></table>




---

archive/issue_comments_367947.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@jdemeyer](#comment%3A47):\n> Replying to [@embray](#comment%3A45):\n> > Replying to [@jdemeyer](#comment%3A9):\n> > > This is redundant:\n> > > \n> > > ```\n> > >         sage: sgc(\"def dummy_python(self, *args, x=1): pass\")  # py3\n> > >         sage: sgc(\"def dummy_cython(self, *args, x=1): pass\")\n> > > ```\n\n> > \n> > Effectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.\n\n> \n> No, on Python 3 it performs the same test twice. And the outcome is obviously the same (apart from the \"dummy_cython\" string).\n\nYes, I understand that. But if you inspect carefully you'll see that logically it's harder to follow the example if not for the slight duplication.  As I just wrote above, the pure Python case is different for Python 2 and Python 3, while the Cython case should work the same for both.  Writing it like this makes that clearer.",
    "created_at": "2018-03-09T12:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367947",
    "user": "https://github.com/embray"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@jdemeyer](#comment%3A47):
> Replying to [@embray](#comment%3A45):
> > Replying to [@jdemeyer](#comment%3A9):
> > > This is redundant:
> > > 
> > > ```
> > >         sage: sgc("def dummy_python(self, *args, x=1): pass")  # py3
> > >         sage: sgc("def dummy_cython(self, *args, x=1): pass")
> > > ```

> > 
> > Effectively yes, but not logically.  This is performing the same test on Python 3 as on Python 2 and demonstrating that they have different outcomes.

> 
> No, on Python 3 it performs the same test twice. And the outcome is obviously the same (apart from the "dummy_cython" string).

Yes, I understand that. But if you inspect carefully you'll see that logically it's harder to follow the example if not for the slight duplication.  As I just wrote above, the pure Python case is different for Python 2 and Python 3, while the Cython case should work the same for both.  Writing it like this makes that clearer.



---

archive/issue_comments_367948.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nIn other words, the two cases are *not* redundant on Python 2, but they happen to be redundant on Python 3 since Cython syntax is Python 3 compatible.  But the two examples have different meanings.",
    "created_at": "2018-03-09T12:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367948",
    "user": "https://github.com/embray"
}
```

<div id="comment:53" align="right">comment:53</div>

In other words, the two cases are *not* redundant on Python 2, but they happen to be redundant on Python 3 since Cython syntax is Python 3 compatible.  But the two examples have different meanings.



---

archive/issue_comments_367949.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> This change looks like it might break stuff:\n> \n> ```diff\n> @@ -2247,10 +2254,10 @@ def sage_getsourcelines(obj):\n>  \n>      # First, we deal with nested classes. Their name contains a dot, and we\n>      # have a special function for that purpose.\n> -    if (not hasattr(obj, '__class__')) or (isinstance(obj, type) and type(obj) is not type):\n> +    if not hasattr(obj, '__class__') or isinstance(obj, type):\n> ```\n> \n> I agree that the original code was strange (looking specifically for a metaclass different from `type`), but maybe there was a reason...\n\nWeird, but I see what you're saying.  This code originally had `hasattr(obj, '__metaclass__')` and you changed it to this.  Let me make sure there isn't some reason I felt I had to change that.",
    "created_at": "2018-03-09T12:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367949",
    "user": "https://github.com/embray"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@jdemeyer](#comment%3A49):
> This change looks like it might break stuff:
> 
> ```diff
> @@ -2247,10 +2254,10 @@ def sage_getsourcelines(obj):
>  
>      # First, we deal with nested classes. Their name contains a dot, and we
>      # have a special function for that purpose.
> -    if (not hasattr(obj, '__class__')) or (isinstance(obj, type) and type(obj) is not type):
> +    if not hasattr(obj, '__class__') or isinstance(obj, type):
> ```
> 
> I agree that the original code was strange (looking specifically for a metaclass different from `type`), but maybe there was a reason...

Weird, but I see what you're saying.  This code originally had `hasattr(obj, '__metaclass__')` and you changed it to this.  Let me make sure there isn't some reason I felt I had to change that.



---

archive/issue_comments_367950.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThe other thing is that this doesn't necessarily guarantee there isn't a metaclass.  On Python 2, `__metaclass__` can be any callable that's used to instantiate the type object.  So a class with a `__metaclass__` can still be exactly of type `type`.  On Python 3 this remains true when passing `metaclass=`, but I think there's been some discussion about deprecating that usage.  I don't think this usage turns up anywhere in Sage though and I'm not sure why it mattered here.",
    "created_at": "2018-03-09T12:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367950",
    "user": "https://github.com/embray"
}
```

<div id="comment:55" align="right">comment:55</div>

The other thing is that this doesn't necessarily guarantee there isn't a metaclass.  On Python 2, `__metaclass__` can be any callable that's used to instantiate the type object.  So a class with a `__metaclass__` can still be exactly of type `type`.  On Python 3 this remains true when passing `metaclass=`, but I think there's been some discussion about deprecating that usage.  I don't think this usage turns up anywhere in Sage though and I'm not sure why it mattered here.



---

archive/issue_comments_367951.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nWell, reverting that change definitely causes more tests to fail, so there was probably a reason.  But it might be that a different fix is needed...",
    "created_at": "2018-03-09T12:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367951",
    "user": "https://github.com/embray"
}
```

<div id="comment:56" align="right">comment:56</div>

Well, reverting that change definitely causes more tests to fail, so there was probably a reason.  But it might be that a different fix is needed...



---

archive/issue_comments_367952.json:
```json
{
    "body": "Changed commit from **[`5709382`](https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071)** to **[`ba3fcc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616)**",
    "created_at": "2018-03-09T12:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367952",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5709382`](https://github.com/sagemath/sagetrac-mirror/commit/5709382919cb278e81846aa60edffca62acce071)** to **[`ba3fcc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616)**



---

archive/issue_comments_367953.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616\"><code>ba3fcc0</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>\n",
    "created_at": "2018-03-09T12:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616"><code>ba3fcc0</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>




---

archive/issue_comments_367954.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@sagetrac-git](#comment%3A57):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616\"><code>ba3fcc0</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>\n\nAs the commit message says, this line was originally trying to be *too* precise.  It was trying to handle a case like:\n\n    ```python\n    class SomeCategory(Category):\n        class ParentMethods:\n            pass\n    ```\n\nthen calling `sage_getsource(SomeCategory.parent_class)` where `parent_class` is a `DynamicMetaclass`.  In this case it would go through `SomeCategory.parent_class._sage_src_lines_()` which in turn would look up the source lines for the actual class `SomeCategory.ParentMethods`, which on Python 2 was an old-style class.\n\nSo this code was really just trying to catch exactly any case where we had either an old-style class, or a class with a custom metaclass.  But really there's no reason for that restriction.  All that actually matters is that it's a class (of any type) with a dotted name.",
    "created_at": "2018-03-09T13:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367954",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@sagetrac-git](#comment%3A57):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616"><code>ba3fcc0</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>

As the commit message says, this line was originally trying to be *too* precise.  It was trying to handle a case like:

    ```python
    class SomeCategory(Category):
        class ParentMethods:
            pass
    ```

then calling `sage_getsource(SomeCategory.parent_class)` where `parent_class` is a `DynamicMetaclass`.  In this case it would go through `SomeCategory.parent_class._sage_src_lines_()` which in turn would look up the source lines for the actual class `SomeCategory.ParentMethods`, which on Python 2 was an old-style class.

So this code was really just trying to catch exactly any case where we had either an old-style class, or a class with a custom metaclass.  But really there's no reason for that restriction.  All that actually matters is that it's a class (of any type) with a dotted name.



---

archive/issue_comments_367955.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n\n```\nsage: from sage.misc.sageinspect import sage_getdoc\nsage: sage_getdoc(sage.categories.category_types.AbelianCategory)\n''\n```",
    "created_at": "2018-03-09T14:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367955",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>


```
sage: from sage.misc.sageinspect import sage_getdoc
sage: sage_getdoc(sage.categories.category_types.AbelianCategory)
''
```



---

archive/issue_events_334275.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-09T14:22:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334275"
}
```



---

archive/issue_events_334276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-09T14:22:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334276"
}
```



---

archive/issue_comments_367956.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nThis is actually an existing bug. `AbelianCategory` has no doc, but a doc is returned anyway.",
    "created_at": "2018-03-09T14:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367956",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

This is actually an existing bug. `AbelianCategory` has no doc, but a doc is returned anyway.



---

archive/issue_comments_367957.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nLet wait with this until #24936 is fixed.",
    "created_at": "2018-03-09T14:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367957",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Let wait with this until #24936 is fixed.



---

archive/issue_comments_367958.json:
```json
{
    "body": "Dependencies: **#24936**",
    "created_at": "2018-03-09T14:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367958",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24936**



---

archive/issue_comments_367959.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\ncan we start to move on again here ?",
    "created_at": "2018-03-28T12:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367959",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:62" align="right">comment:62</div>

can we start to move on again here ?



---

archive/issue_comments_367960.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI don't think this actually needs any additional work...",
    "created_at": "2018-03-28T14:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367960",
    "user": "https://github.com/embray"
}
```

<div id="comment:63" align="right">comment:63</div>

I don't think this actually needs any additional work...



---

archive/issue_comments_367961.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nAs usual, I prefer to review this once all dependencies have been merged.",
    "created_at": "2018-03-28T18:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367961",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:64" align="right">comment:64</div>

As usual, I prefer to review this once all dependencies have been merged.



---

archive/issue_comments_367962.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nNeeds rebase to 8.2.rc0",
    "created_at": "2018-03-29T05:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367962",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Needs rebase to 8.2.rc0



---

archive/issue_comments_367963.json:
```json
{
    "body": "Changed dependencies from **#24936** to none",
    "created_at": "2018-03-29T05:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367963",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24936** to none



---

archive/issue_comments_367964.json:
```json
{
    "body": "Changed commit from **[`ba3fcc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616)** to **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**",
    "created_at": "2018-03-29T15:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367964",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba3fcc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba3fcc02d9df59f8ddb1158c33bcd6b59f535616)** to **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**



---

archive/issue_comments_367965.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/413f6629b2049acabc6bfe7246b8bf4c3be4c06c\"><code>413f662</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0359e2e6f86b3b7fe747e030c2b09c99cac3f3d\"><code>b0359e2</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0251798c95b4c87f254bb13baa4f878ffc2067ba\"><code>0251798</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a368d8a114683748bca7fd5ad20a30e1788e68ad\"><code>a368d8a</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/015991b88df2e995f535f63a60a79621cf0dd884\"><code>015991b</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78c10e57c81d2daea3afbd85671ca5dcfa06d8cb\"><code>78c10e5</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1bc36ef6187ae0ba58611a82ef88c1c5bd85ff0\"><code>f1bc36e</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d61e13c6f9dc4c415dbeff0fb4ad7292d0232daa\"><code>d61e13c</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe2b5f3ddfb953fae93e1fb2e3c2b8987a850bcf\"><code>fe2b5f3</code></a></td><td><code>This should accept unicode docstrings as well on Python 2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d\"><code>1a461d1</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>\n",
    "created_at": "2018-03-29T15:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367965",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/413f6629b2049acabc6bfe7246b8bf4c3be4c06c"><code>413f662</code></a></td><td><code>Fixes to _getblock for Python 3, where the API of the tokenize module is a bit different</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0359e2e6f86b3b7fe747e030c2b09c99cac3f3d"><code>b0359e2</code></a></td><td><code>Fixes to the argument parser to account for grammatical differences between Python 2 and 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0251798c95b4c87f254bb13baa4f878ffc2067ba"><code>0251798</code></a></td><td><code>Fixes to more of the argument parser tests to account for 2/3 differences.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a368d8a114683748bca7fd5ad20a30e1788e68ad"><code>a368d8a</code></a></td><td><code>Miscellaneous minor fixes; mostly to ensure that files are closed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/015991b88df2e995f535f63a60a79621cf0dd884"><code>015991b</code></a></td><td><code>I'm not sure what motivated this, but I don't think it's desirable; in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78c10e57c81d2daea3afbd85671ca5dcfa06d8cb"><code>78c10e5</code></a></td><td><code>Make this nested class into a 'new-style' class just for better 2/3 consistency.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1bc36ef6187ae0ba58611a82ef88c1c5bd85ff0"><code>f1bc36e</code></a></td><td><code>Remove duplicate test--this class is just for use in a test, and the 'examples' in its docstring are a duplicate of the test that uses it in sage_getsourcelines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d61e13c6f9dc4c415dbeff0fb4ad7292d0232daa"><code>d61e13c</code></a></td><td><code>This was originally an old-style class on Python 2 so we'll keep it that way; for Python 3 it's irrelevant.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe2b5f3ddfb953fae93e1fb2e3c2b8987a850bcf"><code>fe2b5f3</code></a></td><td><code>This should accept unicode docstrings as well on Python 2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d"><code>1a461d1</code></a></td><td><code>Originally this was actually over-restrictive: Checking for either an old-style class, or a new-style class with a custom metaclass.</code></td></tr></table>




---

archive/issue_events_334277.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T15:36:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334277"
}
```



---

archive/issue_events_334278.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-29T15:36:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334278"
}
```



---

archive/issue_comments_367966.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nRebased",
    "created_at": "2018-03-29T15:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367966",
    "user": "https://github.com/embray"
}
```

<div id="comment:67" align="right">comment:67</div>

Rebased



---

archive/issue_comments_367967.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nand bot is morally green",
    "created_at": "2018-03-30T07:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367967",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:68" align="right">comment:68</div>

and bot is morally green



---

archive/issue_comments_367968.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI'll test it.",
    "created_at": "2018-03-30T10:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367968",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

I'll test it.



---

archive/issue_comments_367969.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nDoc still builds fine with this branch.",
    "created_at": "2018-03-30T17:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367969",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">comment:70</div>

Doc still builds fine with this branch.



---

archive/issue_events_334279.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-02T15:11:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334279"
}
```



---

archive/issue_events_334280.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-02T15:11:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334280"
}
```



---

archive/issue_comments_367970.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2018-04-02T15:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367970",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_367971.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI do not agree with everything in this branch, but let's move forward.",
    "created_at": "2018-04-02T15:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367971",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

I do not agree with everything in this branch, but let's move forward.



---

archive/issue_events_334281.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334281"
}
```



---

archive/issue_events_334282.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-26T12:13:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334282"
}
```



---

archive/issue_comments_367972.json:
```json
{
    "body": "Changed branch from **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)** to **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**",
    "created_at": "2018-05-08T17:27:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24312#issuecomment-367972",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/python3/sage-misc-sageinspect](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/sage-misc-sageinspect)** to **[`1a461d1`](https://github.com/sagemath/sagetrac-mirror/commit/1a461d1a70ca45410c36f9f7eb525e97e046042d)**



---

archive/issue_events_334283.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334283"
}
```



---

archive/issue_events_334284.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "79c3ec00eeb9b1383d2cd3a286a96725b74a6876",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-08T17:27:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24312#event-334284"
}
```
