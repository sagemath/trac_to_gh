# Issue 24223: py3: several string conversion fixes

archive/issues_023986.json:
```json
{
    "assignees": [],
    "body": "This fixes several (hardly exhaustive) string conversions around Sage such that functions and methods that returned `str` on Python 2 also return `str` on Python 3 (and the same for functions and methods that take `str` as arguments) using the new string utilities from #24222.\n\nThis also incorporates/replaces the fixes from #23812.\n\nCC:  @fchapoton @jdemeyer\n\nBranch/Commit: **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Erik Bray**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24223_\n\n",
    "closed_at": "2018-02-02T12:06:05Z",
    "created_at": "2017-11-16T11:44:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: several string conversion fixes",
    "type": "issue",
    "updated_at": "2018-02-02T12:06:05Z",
    "url": "https://github.com/sagemath/sage/issues/24223",
    "user": "https://github.com/embray"
}
```
This fixes several (hardly exhaustive) string conversions around Sage such that functions and methods that returned `str` on Python 2 also return `str` on Python 3 (and the same for functions and methods that take `str` as arguments) using the new string utilities from #24222.

This also incorporates/replaces the fixes from #23812.

CC:  @fchapoton @jdemeyer

Branch/Commit: **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**

Reviewer: **Jeroen Demeyer**

Author: **Erik Bray**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/24223_





---

archive/issue_events_333134.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-16T11:44:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333134"
}
```



---

archive/issue_events_333135.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-16T11:44:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333135"
}
```



---

archive/issue_events_333136.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-16T11:44:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333136"
}
```



---

archive/issue_events_333137.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-16T11:44:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333137"
}
```



---

archive/issue_comments_366476.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWith this, plus a few other small fixes (including fixes from other existing tickets merged in) I was able to get the Sage REPL up and `1 + 1` working.",
    "created_at": "2017-11-16T11:45:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366476",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

With this, plus a few other small fixes (including fixes from other existing tickets merged in) I was able to get the Sage REPL up and `1 + 1` working.



---

archive/issue_comments_366477.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34ef6dc08de5f11a74e83c6707d6dd4f5e2563be\"><code>34ef6dc</code></a></td><td><code>Add HAVE_GMPY2 compile-time constant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/158d984a1263978ce941172c775238afbc32ad65\"><code>158d984</code></a></td><td><code>Force absolute import in have_module()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f06e71efb3fdc5f91fcf4b0b3ef761c72d9a8c2\"><code>7f06e71</code></a></td><td><code>Fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ac146c17ccabbaf53918f874f516909041e82c5\"><code>3ac146c</code></a></td><td><code>Add a Cython compile-time constant for Python major version.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f71fd41b659ea250ec96c0df343c4fe6b2be9289\"><code>f71fd41</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5d521980e6ce42afc2b127e8f7d892f32488ee4\"><code>a5d5219</code></a></td><td><code>Add support for optional error handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/627d4c7536b8a219b59177a07b93a67569fddfc4\"><code>627d4c7</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc\"><code>25d6c32</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>\n",
    "created_at": "2017-11-20T09:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366477",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34ef6dc08de5f11a74e83c6707d6dd4f5e2563be"><code>34ef6dc</code></a></td><td><code>Add HAVE_GMPY2 compile-time constant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/158d984a1263978ce941172c775238afbc32ad65"><code>158d984</code></a></td><td><code>Force absolute import in have_module()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f06e71efb3fdc5f91fcf4b0b3ef761c72d9a8c2"><code>7f06e71</code></a></td><td><code>Fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ac146c17ccabbaf53918f874f516909041e82c5"><code>3ac146c</code></a></td><td><code>Add a Cython compile-time constant for Python major version.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f71fd41b659ea250ec96c0df343c4fe6b2be9289"><code>f71fd41</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5d521980e6ce42afc2b127e8f7d892f32488ee4"><code>a5d5219</code></a></td><td><code>Add support for optional error handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/627d4c7536b8a219b59177a07b93a67569fddfc4"><code>627d4c7</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc"><code>25d6c32</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>




---

archive/issue_comments_366478.json:
```json
{
    "body": "Changed commit from **[`44a5540`](https://github.com/sagemath/sagetrac-mirror/commit/44a55407569e8919b7598ca367a05469732e78bf)** to **[`25d6c32`](https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc)**",
    "created_at": "2017-11-20T09:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`44a5540`](https://github.com/sagemath/sagetrac-mirror/commit/44a55407569e8919b7598ca367a05469732e78bf)** to **[`25d6c32`](https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc)**



---

archive/issue_events_333138.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-11-20T09:21:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333138"
}
```



---

archive/issue_comments_366479.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nRebased on current version of #24222.",
    "created_at": "2017-11-20T09:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366479",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

Rebased on current version of #24222.



---

archive/issue_events_333139.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-20T19:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333139"
}
```



---

archive/issue_events_333140.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-11-20T19:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333140"
}
```



---

archive/issue_comments_366480.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSomething is wrong: there are still the files `src/sage/misc/string.*`",
    "created_at": "2017-11-20T19:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366480",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Something is wrong: there are still the files `src/sage/misc/string.*`



---

archive/issue_comments_366481.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis is again a ticket with many small independent changes where a \"partial positive review\" like what I proposed on #24025 would make sense. I didn't like how we handled that, so how should we proceed here?",
    "created_at": "2017-11-20T19:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366481",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

This is again a ticket with many small independent changes where a "partial positive review" like what I proposed on #24025 would make sense. I didn't like how we handled that, so how should we proceed here?



---

archive/issue_comments_366482.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jdemeyer](#comment%3A4):\n> Something is wrong: there are still the files `src/sage/misc/string.*`\n\nOops--part of the problem here is I'm moving between two different working trees, one for Python 2 and one for Python 3, so it can get confusing.  I'll clean this up.",
    "created_at": "2017-11-21T16:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366482",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jdemeyer](#comment%3A4):
> Something is wrong: there are still the files `src/sage/misc/string.*`

Oops--part of the problem here is I'm moving between two different working trees, one for Python 2 and one for Python 3, so it can get confusing.  I'll clean this up.



---

archive/issue_comments_366483.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jdemeyer](#comment%3A5):\n> This is again a ticket with many small independent changes where a \"partial positive review\" like what I proposed on #24025 would make sense. I didn't like how we handled that, so how should we proceed here?\n\nI'd be fine if you proposed your changes and tossed it back to me as \"needs review\", rather than going immediately to \"positive review\".",
    "created_at": "2017-11-21T16:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366483",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jdemeyer](#comment%3A5):
> This is again a ticket with many small independent changes where a "partial positive review" like what I proposed on #24025 would make sense. I didn't like how we handled that, so how should we proceed here?

I'd be fine if you proposed your changes and tossed it back to me as "needs review", rather than going immediately to "positive review".



---

archive/issue_comments_366484.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt seems strange to me to use `locale.getpreferredencoding()` for strings which do not depend on the locale. I would propose:\n\n1. Use `locale.getpreferredencoding()` for strings which actually depend on the locale.\n\n2. Use `sys.getfilesystemencoding()` for strings which actually depend on the file system encoding.\n\n3. Use UTF-8 otherwise.",
    "created_at": "2017-11-22T14:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366484",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

It seems strange to me to use `locale.getpreferredencoding()` for strings which do not depend on the locale. I would propose:

1. Use `locale.getpreferredencoding()` for strings which actually depend on the locale.

2. Use `sys.getfilesystemencoding()` for strings which actually depend on the file system encoding.

3. Use UTF-8 otherwise.



---

archive/issue_events_333141.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333141"
}
```



---

archive/issue_events_333142.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333142"
}
```



---

archive/issue_comments_366485.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64567aa772d737b6ff052f99a67cc6e8ad72c21c\"><code>64567aa</code></a></td><td><code>Make type checks explicit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a358aeaec8612efe19678482fb510751a1b7b33a\"><code>a358aea</code></a></td><td><code>Require a const char*--this is more consistent for use in cases where</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64a1c2d58713636a51c60e3be508204c88513658\"><code>64a1c2d</code></a></td><td><code>Use a less unusual character in the tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bf6709cb5b256537bab4058ba3fa578996f521b\"><code>1bf6709</code></a></td><td><code>Use r-strings for the docstrings since they contain slashes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb839655c50259c8beec273cab5773eb5158265\"><code>2bb8396</code></a></td><td><code>Clean up these declarations:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d73a416b18f9d0edec280009495ae77f7b0a49a\"><code>6d73a41</code></a></td><td><code>Use more specific type declarations here.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9\"><code>56f1c02</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>\n",
    "created_at": "2017-12-21T11:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366485",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64567aa772d737b6ff052f99a67cc6e8ad72c21c"><code>64567aa</code></a></td><td><code>Make type checks explicit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a358aeaec8612efe19678482fb510751a1b7b33a"><code>a358aea</code></a></td><td><code>Require a const char*--this is more consistent for use in cases where</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64a1c2d58713636a51c60e3be508204c88513658"><code>64a1c2d</code></a></td><td><code>Use a less unusual character in the tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bf6709cb5b256537bab4058ba3fa578996f521b"><code>1bf6709</code></a></td><td><code>Use r-strings for the docstrings since they contain slashes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb839655c50259c8beec273cab5773eb5158265"><code>2bb8396</code></a></td><td><code>Clean up these declarations:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d73a416b18f9d0edec280009495ae77f7b0a49a"><code>6d73a41</code></a></td><td><code>Use more specific type declarations here.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9"><code>56f1c02</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>




---

archive/issue_comments_366486.json:
```json
{
    "body": "Changed commit from **[`25d6c32`](https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc)** to **[`56f1c02`](https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9)**",
    "created_at": "2017-12-21T11:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366486",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25d6c32`](https://github.com/sagemath/sagetrac-mirror/commit/25d6c32154c88dc4e9f1520d105b586b61c43cdc)** to **[`56f1c02`](https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9)**



---

archive/issue_comments_366487.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a285af48a5bf05ea9db98d268ff8822d93a85559\"><code>a285af4</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b3719a36342fc8a7245e72cc25f993d6e407e90\"><code>5b3719a</code></a></td><td><code>Add support for optional error handling.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf5f893c73c224849233e1a400a3e97299615089\"><code>bf5f893</code></a></td><td><code>Make type checks explicit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bd27fc5a7d14fce1b5d27df3be980f745913646\"><code>1bd27fc</code></a></td><td><code>Require a const char*--this is more consistent for use in cases where</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd2d93183aa4ecc8f541b9407be4829130449547\"><code>bd2d931</code></a></td><td><code>Use a less unusual character in the tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b32f000b55e932039e6284e466888d6e3bfaad6f\"><code>b32f000</code></a></td><td><code>Use r-strings for the docstrings since they contain slashes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccf7bcd46559fd7b96984f35e1b7999aecb2cc2b\"><code>ccf7bcd</code></a></td><td><code>Clean up these declarations:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dec9f3ac79a992d3152366ae266f1065c70c7867\"><code>dec9f3a</code></a></td><td><code>Use more specific type declarations here.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c\"><code>a9ebae6</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>\n",
    "created_at": "2017-12-21T11:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a285af48a5bf05ea9db98d268ff8822d93a85559"><code>a285af4</code></a></td><td><code>Add new string conversion utilities.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b3719a36342fc8a7245e72cc25f993d6e407e90"><code>5b3719a</code></a></td><td><code>Add support for optional error handling.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf5f893c73c224849233e1a400a3e97299615089"><code>bf5f893</code></a></td><td><code>Make type checks explicit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bd27fc5a7d14fce1b5d27df3be980f745913646"><code>1bd27fc</code></a></td><td><code>Require a const char*--this is more consistent for use in cases where</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd2d93183aa4ecc8f541b9407be4829130449547"><code>bd2d931</code></a></td><td><code>Use a less unusual character in the tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b32f000b55e932039e6284e466888d6e3bfaad6f"><code>b32f000</code></a></td><td><code>Use r-strings for the docstrings since they contain slashes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccf7bcd46559fd7b96984f35e1b7999aecb2cc2b"><code>ccf7bcd</code></a></td><td><code>Clean up these declarations:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dec9f3ac79a992d3152366ae266f1065c70c7867"><code>dec9f3a</code></a></td><td><code>Use more specific type declarations here.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c"><code>a9ebae6</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr></table>




---

archive/issue_comments_366488.json:
```json
{
    "body": "Changed commit from **[`56f1c02`](https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9)** to **[`a9ebae6`](https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c)**",
    "created_at": "2017-12-21T11:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`56f1c02`](https://github.com/sagemath/sagetrac-mirror/commit/56f1c02add22c05178f43c2d14ea4bfa1aae0db9)** to **[`a9ebae6`](https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c)**



---

archive/issue_comments_366489.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIs this needs_review again?",
    "created_at": "2017-12-27T19:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366489",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Is this needs_review again?



---

archive/issue_events_333143.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-02T14:37:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333143"
}
```



---

archive/issue_events_333144.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-02T14:37:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333144"
}
```



---

archive/issue_comments_366490.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYeah, IIRC this was just a bunch of miscellaneous string conversions from some other tickets, but redone using the `sage.cpython.string` utilities.",
    "created_at": "2018-01-02T14:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366490",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

Yeah, IIRC this was just a bunch of miscellaneous string conversions from some other tickets, but redone using the `sage.cpython.string` utilities.



---

archive/issue_comments_366491.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n3 failing doctests in integer.pyx",
    "created_at": "2018-01-03T12:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366491",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

3 failing doctests in integer.pyx



---

archive/issue_events_333145.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-05T08:58:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333145"
}
```



---

archive/issue_events_333146.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-05T08:58:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333146"
}
```



---

archive/issue_comments_366492.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nInteresting--when I added `str_to_bytes` I predicted we might later want to allow Python 2 `unicode` objects to be supported somehow, but put it off because I didn't think there was much code in Sage that already was expected to handle `unicode` (except in a few places like unicode art, etc.).  But the tests that are failing here clearly show that there are some places it's expected to work.\n\nSo I see at least three options:\n\n1. Modify `str_to_bytes` to treat `unicode` appropriate on Python 2\n2. Add some new function like `unicode_to_str` that's analogous to `str_to_bytes` (I'm not crazy about this)\n3. Just special case `unicode` on Python 2 where we do want to support it.\n\nI lean towards 1. but I'm open to ideas.",
    "created_at": "2018-01-05T12:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366492",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

Interesting--when I added `str_to_bytes` I predicted we might later want to allow Python 2 `unicode` objects to be supported somehow, but put it off because I didn't think there was much code in Sage that already was expected to handle `unicode` (except in a few places like unicode art, etc.).  But the tests that are failing here clearly show that there are some places it's expected to work.

So I see at least three options:

1. Modify `str_to_bytes` to treat `unicode` appropriate on Python 2
2. Add some new function like `unicode_to_str` that's analogous to `str_to_bytes` (I'm not crazy about this)
3. Just special case `unicode` on Python 2 where we do want to support it.

I lean towards 1. but I'm open to ideas.



---

archive/issue_comments_366493.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@embray](#comment%3A16):\n> I lean towards 1.\n\nI agree. We should just support `bytes` and `unicode` (in the Cython sense!) as input to `str_to_bytes` regardless of Python version. One complication is that the Python 3 code path of `str_to_bytes` uses some functions specific to Python 3, so we cannot just run that code on Python 2.",
    "created_at": "2018-01-05T12:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366493",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@embray](#comment%3A16):
> I lean towards 1.

I agree. We should just support `bytes` and `unicode` (in the Cython sense!) as input to `str_to_bytes` regardless of Python version. One complication is that the Python 3 code path of `str_to_bytes` uses some functions specific to Python 3, so we cannot just run that code on Python 2.



---

archive/issue_comments_366494.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nRight, I'll give it a look though.  It will just have to have a slightly different implementation for Python 2.  Welcome back btw!",
    "created_at": "2018-01-05T12:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366494",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

Right, I'll give it a look though.  It will just have to have a slightly different implementation for Python 2.  Welcome back btw!



---

archive/issue_comments_366495.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI created a new ticket for this: #24475",
    "created_at": "2018-01-05T12:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366495",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

I created a new ticket for this: #24475



---

archive/issue_comments_366496.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@embray](#comment%3A18):\n> Right, I'll give it a look though.  It will just have to have a slightly different implementation for Python 2.\n\nI would rather avoid that. Instead of `PyUnicode_EncodeLocale`, you can just pass `NULL` as `encoding` to `PyUnicode_AsEncodedString`. That leaves `PyUnicode_AsUTF8` which is really only used to translate the `encoding` and `errors` arguments. We could require that this is always of type `str` (so, not `unicode` on Python 2).",
    "created_at": "2018-01-05T12:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366496",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@embray](#comment%3A18):
> Right, I'll give it a look though.  It will just have to have a slightly different implementation for Python 2.

I would rather avoid that. Instead of `PyUnicode_EncodeLocale`, you can just pass `NULL` as `encoding` to `PyUnicode_AsEncodedString`. That leaves `PyUnicode_AsUTF8` which is really only used to translate the `encoding` and `errors` arguments. We could require that this is always of type `str` (so, not `unicode` on Python 2).



---

archive/issue_comments_366497.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@embray](#comment%3A18):\n> I'll give it a look though.\n\nI can also do that. Just let me know, to avoid double work.",
    "created_at": "2018-01-05T12:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366497",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@embray](#comment%3A18):
> I'll give it a look though.

I can also do that. Just let me know, to avoid double work.



---

archive/issue_comments_366498.json:
```json
{
    "body": "Changed commit from **[`a9ebae6`](https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c)** to **[`c393e41`](https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235)**",
    "created_at": "2018-01-10T14:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366498",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9ebae6`](https://github.com/sagemath/sagetrac-mirror/commit/a9ebae6bfffc84a549af6e8da8abc52840b2b74c)** to **[`c393e41`](https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235)**



---

archive/issue_comments_366499.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cf556b0a9ad8bdf708ab083f160e0fe674c4569\"><code>9cf556b</code></a></td><td><code>Rework str_to_bytes so that it accepts unicode on Python 2 and treats it same as str on Python 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/086e523ddcb32b2750f6ca6a0b23e0c5416ccb37\"><code>086e523</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/728a0bc71a8e284d1f5c25563ae408c6de3d12d5\"><code>728a0bc</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235\"><code>c393e41</code></a></td><td><code>Minor Python 3 fix for sage.libs.flint.fmpz_poly</code></td></tr></table>\n",
    "created_at": "2018-01-10T14:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366499",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cf556b0a9ad8bdf708ab083f160e0fe674c4569"><code>9cf556b</code></a></td><td><code>Rework str_to_bytes so that it accepts unicode on Python 2 and treats it same as str on Python 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/086e523ddcb32b2750f6ca6a0b23e0c5416ccb37"><code>086e523</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/728a0bc71a8e284d1f5c25563ae408c6de3d12d5"><code>728a0bc</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235"><code>c393e41</code></a></td><td><code>Minor Python 3 fix for sage.libs.flint.fmpz_poly</code></td></tr></table>




---

archive/issue_comments_366500.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nis this in \"needs_review\" state ?",
    "created_at": "2018-01-15T19:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366500",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

is this in "needs_review" state ?



---

archive/issue_comments_366501.json:
```json
{
    "body": "Changed dependencies from **#24222** to **#24222, #24475**",
    "created_at": "2018-01-16T16:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366501",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#24222** to **#24222, #24475**



---

archive/issue_comments_366502.json:
```json
{
    "body": "Changed commit from **[`c393e41`](https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235)** to **[`0925f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3)**",
    "created_at": "2018-01-17T15:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366502",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c393e41`](https://github.com/sagemath/sagetrac-mirror/commit/c393e41ee8f627ca5b76149100039c5664208235)** to **[`0925f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3)**



---

archive/issue_comments_366503.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3\"><code>0925f3b</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr></table>\n",
    "created_at": "2018-01-17T15:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366503",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3"><code>0925f3b</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr></table>




---

archive/issue_events_333147.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-17T15:34:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333147"
}
```



---

archive/issue_events_333148.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-17T15:34:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333148"
}
```



---

archive/issue_comments_366504.json:
```json
{
    "body": "Changed commit from **[`0925f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3)** to **[`7e4d3cc`](https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4)**",
    "created_at": "2018-01-19T15:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366504",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0925f3b`](https://github.com/sagemath/sagetrac-mirror/commit/0925f3b3d747e2f935006576a929c317eda7f1f3)** to **[`7e4d3cc`](https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4)**



---

archive/issue_comments_366505.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4\"><code>7e4d3cc</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr></table>\n",
    "created_at": "2018-01-19T15:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366505",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4"><code>7e4d3cc</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr></table>




---

archive/issue_comments_366506.json:
```json
{
    "body": "Changed commit from **[`7e4d3cc`](https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4)** to **[`1338ba4`](https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805)**",
    "created_at": "2018-01-22T13:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366506",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e4d3cc`](https://github.com/sagemath/sagetrac-mirror/commit/7e4d3ccff889e902f6e93c42533b68e9991c83b4)** to **[`1338ba4`](https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805)**



---

archive/issue_comments_366507.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/998911f90dbab7e3f2af8e5cd8862b78377d9147\"><code>998911f</code></a></td><td><code>Rework str_to_bytes so that it accepts unicode on Python 2 and treats it same as str on Python 3.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2c898ee7bf0c45c8013cb5e7ec7c469991fa7c2\"><code>c2c898e</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0637cde3efca7a81042c464bae788eb7eef8ea36\"><code>0637cde</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0158a97d4cdb0ca05b0301026b4d200a0cb86b7\"><code>c0158a9</code></a></td><td><code>Minor Python 3 fix for sage.libs.flint.fmpz_poly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f415e2fff05fb2dd79ecc79b1bb676e7b245b2c3\"><code>f415e2f</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805\"><code>1338ba4</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr></table>\n",
    "created_at": "2018-01-22T13:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366507",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/998911f90dbab7e3f2af8e5cd8862b78377d9147"><code>998911f</code></a></td><td><code>Rework str_to_bytes so that it accepts unicode on Python 2 and treats it same as str on Python 3.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2c898ee7bf0c45c8013cb5e7ec7c469991fa7c2"><code>c2c898e</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0637cde3efca7a81042c464bae788eb7eef8ea36"><code>0637cde</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0158a97d4cdb0ca05b0301026b4d200a0cb86b7"><code>c0158a9</code></a></td><td><code>Minor Python 3 fix for sage.libs.flint.fmpz_poly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f415e2fff05fb2dd79ecc79b1bb676e7b245b2c3"><code>f415e2f</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805"><code>1338ba4</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr></table>




---

archive/issue_comments_366508.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLooks good to me, globally, even if do not feel I understand everything in detail.\n\nJeroen, do you think we can move forward with this important ticket ?",
    "created_at": "2018-01-23T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366508",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

Looks good to me, globally, even if do not feel I understand everything in detail.

Jeroen, do you think we can move forward with this important ticket ?



---

archive/issue_comments_366509.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI always find it a bit unpleasant to review tickets with non-merged dependencies. So I would rather wait until the next beta.\n\nTwo immediate issues that I see:\n\n1. In `src/sage/libs/mpmath/utils.pyx` you add an import that you don't use.\n\n2. In several files, you `import` stuff from `sage.cpython.string` where you could use `cimport`.",
    "created_at": "2018-01-23T19:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366509",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

I always find it a bit unpleasant to review tickets with non-merged dependencies. So I would rather wait until the next beta.

Two immediate issues that I see:

1. In `src/sage/libs/mpmath/utils.pyx` you add an import that you don't use.

2. In several files, you `import` stuff from `sage.cpython.string` where you could use `cimport`.



---

archive/issue_comments_366510.json:
```json
{
    "body": "Changed branch from **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)** to **[public/python3-trac24223](https://github.com/sagemath/sagetrac-mirror/tree/public/python3-trac24223)**",
    "created_at": "2018-01-28T07:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366510",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)** to **[public/python3-trac24223](https://github.com/sagemath/sagetrac-mirror/tree/public/python3-trac24223)**



---

archive/issue_comments_366511.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62\"><code>00f2776</code></a></td><td><code>Merge branch 'u/embray/python3/string-fixes' in 8.2.b4</code></td></tr></table>\n",
    "created_at": "2018-01-28T07:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366511",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62"><code>00f2776</code></a></td><td><code>Merge branch 'u/embray/python3/string-fixes' in 8.2.b4</code></td></tr></table>




---

archive/issue_comments_366512.json:
```json
{
    "body": "Changed dependencies from **#24222, #24475** to none",
    "created_at": "2018-01-28T07:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366512",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#24222, #24475** to none



---

archive/issue_comments_366513.json:
```json
{
    "body": "Changed commit from **[`1338ba4`](https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805)** to **[`00f2776`](https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62)**",
    "created_at": "2018-01-28T07:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366513",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`1338ba4`](https://github.com/sagemath/sagetrac-mirror/commit/1338ba4db9db82a4e96191fa5b8ecb3f51cf5805)** to **[`00f2776`](https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62)**



---

archive/issue_comments_366514.json:
```json
{
    "body": "Changed commit from **[`00f2776`](https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62)** to **[`7d68d8c`](https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7)**",
    "created_at": "2018-01-28T08:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366514",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00f2776`](https://github.com/sagemath/sagetrac-mirror/commit/00f2776101f58a9c232fc06a3ee3eb2d87fc4d62)** to **[`7d68d8c`](https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7)**



---

archive/issue_comments_366515.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7\"><code>7d68d8c</code></a></td><td><code>some details of imports</code></td></tr></table>\n",
    "created_at": "2018-01-28T08:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366515",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7"><code>7d68d8c</code></a></td><td><code>some details of imports</code></td></tr></table>




---

archive/issue_events_333149.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-29T13:53:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333149"
}
```



---

archive/issue_events_333150.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-29T13:53:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333150"
}
```



---

archive/issue_comments_366516.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2018-01-29T13:53:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366516",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_366517.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThis does not work:\n\n```\n-from sage.cpython.string import FS_ENCODING, str_to_bytes\n+from sage.cpython.string cimport FS_ENCODING, str_to_bytes\n```\n\n`FS_ENCODING` is can't be cimported.",
    "created_at": "2018-01-30T12:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366517",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">comment:34</div>

This does not work:

```
-from sage.cpython.string import FS_ENCODING, str_to_bytes
+from sage.cpython.string cimport FS_ENCODING, str_to_bytes
```

`FS_ENCODING` is can't be cimported.



---

archive/issue_events_333151.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-30T12:22:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333151"
}
```



---

archive/issue_events_333152.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-30T12:22:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333152"
}
```



---

archive/issue_comments_366518.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8\"><code>80b0d1f</code></a></td><td><code>fix import</code></td></tr></table>\n",
    "created_at": "2018-01-30T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366518",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8"><code>80b0d1f</code></a></td><td><code>fix import</code></td></tr></table>




---

archive/issue_comments_366519.json:
```json
{
    "body": "Changed commit from **[`7d68d8c`](https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7)** to **[`80b0d1f`](https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8)**",
    "created_at": "2018-01-30T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d68d8c`](https://github.com/sagemath/sagetrac-mirror/commit/7d68d8c73f2524d8ceb7af3d74bba57f31a4cbe7)** to **[`80b0d1f`](https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8)**



---

archive/issue_comments_366520.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nimport corrected",
    "created_at": "2018-01-30T14:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366520",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:36" align="right">comment:36</div>

import corrected



---

archive/issue_events_333153.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-30T14:12:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333153"
}
```



---

archive/issue_events_333154.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-30T14:12:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333154"
}
```



---

archive/issue_comments_366521.json:
```json
{
    "body": "Changed branch from **[public/python3-trac24223](https://github.com/sagemath/sagetrac-mirror/tree/public/python3-trac24223)** to **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)**",
    "created_at": "2018-01-30T14:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366521",
    "user": "https://github.com/embray"
}
```

Changed branch from **[public/python3-trac24223](https://github.com/sagemath/sagetrac-mirror/tree/public/python3-trac24223)** to **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)**



---

archive/issue_comments_366522.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI rebased and squashed some of these changes.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc214fdcf00443531ade6e2fa650426de7debefb\"><code>cc214fd</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7e1153918d1da2c451e95fbb9d4f00a393d1752\"><code>f7e1153</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d6fe3074a6df02eb2fda49fe47767727479294\"><code>a4d6fe3</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d03a8d450e577e5c1cad95ef825409e6141367c4\"><code>d03a8d4</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c\"><code>e9a582e</code></a></td><td><code>import -> cimport where appropriate</code></td></tr></table>\n",
    "created_at": "2018-01-30T14:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366522",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">comment:37</div>

I rebased and squashed some of these changes.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc214fdcf00443531ade6e2fa650426de7debefb"><code>cc214fd</code></a></td><td><code>Numerous string conversions from bytes to str and from str to bytes for Python 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7e1153918d1da2c451e95fbb9d4f00a393d1752"><code>f7e1153</code></a></td><td><code>Use str_to_bytes for 'unicode' (which will be str on Python 3 and unicode on Python 2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d6fe3074a6df02eb2fda49fe47767727479294"><code>a4d6fe3</code></a></td><td><code>A few additional string conversion fixes for sage.libs.ecl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d03a8d450e577e5c1cad95ef825409e6141367c4"><code>d03a8d4</code></a></td><td><code>py3: fix pickling of integers and other minor bytes/str fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c"><code>e9a582e</code></a></td><td><code>import -> cimport where appropriate</code></td></tr></table>




---

archive/issue_events_333155.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-30T14:38:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333155"
}
```



---

archive/issue_events_333156.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-30T14:38:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333156"
}
```



---

archive/issue_comments_366523.json:
```json
{
    "body": "Changed commit from **[`80b0d1f`](https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8)** to **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**",
    "created_at": "2018-01-30T14:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366523",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`80b0d1f`](https://github.com/sagemath/sagetrac-mirror/commit/80b0d1f0c5d761c6804abff6bfbf94a1645105c8)** to **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**



---

archive/issue_comments_366524.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\n\n```\n[sagelib-8.2.beta4] Error compiling Cython file:\n[sagelib-8.2.beta4] ------------------------------------------------------------\n[sagelib-8.2.beta4] ...\n[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_prime_modn import FiniteField_prime_modn\n[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_givaro import FiniteField_givaro\n[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_ntl_gf2e import FiniteField_ntl_gf2e\n[sagelib-8.2.beta4] from sage.libs.pari.all import pari\n[sagelib-8.2.beta4] from sage.libs.gmp.all cimport *\n[sagelib-8.2.beta4] from sage.cpython.string cimport FS_ENCODING, str_to_bytes\n[sagelib-8.2.beta4] ^\n[sagelib-8.2.beta4] ------------------------------------------------------------\n[sagelib-8.2.beta4] \n[sagelib-8.2.beta4] sage/libs/singular/singular.pyx:40:0: 'sage/cpython/string/FS_ENCODING.pxd' not found\n[sagelib-8.2.beta4] \n[sagelib-8.2.beta4] Error compiling Cython file:\n[sagelib-8.2.beta4] ------------------------------------------------------------\n[sagelib-8.2.beta4] ...\n[sagelib-8.2.beta4]     lib = SINGULAR_SO\n[sagelib-8.2.beta4] \n[sagelib-8.2.beta4]     if not os.path.exists(lib):\n[sagelib-8.2.beta4]         raise ImportError(\"cannot locate Singular library ({})\".format(lib))\n[sagelib-8.2.beta4] \n[sagelib-8.2.beta4]     lib = str_to_bytes(lib, FS_ENCODING, \"surrogateescape\")\n[sagelib-8.2.beta4]                            ^\n[sagelib-8.2.beta4] ------------------------------------------------------------\n[sagelib-8.2.beta4] \n[sagelib-8.2.beta4] sage/libs/singular/singular.pyx:778:28: 'FS_ENCODING' is not a constant, variable or function identifier\n[sagelib-8.2.beta4] Traceback (most recent call last):\n[sagelib-8.2.beta4]   File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 1179, in cythonize_one_helper\n[sagelib-8.2.beta4]     return cythonize_one(*m)\n[sagelib-8.2.beta4]   File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 1161, in cythonize_one\n[sagelib-8.2.beta4]     raise CompileError(None, pyx_file)\n[sagelib-8.2.beta4] CompileError: sage/libs/singular/singular.pyx\n```",
    "created_at": "2018-01-31T21:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366524",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>


```
[sagelib-8.2.beta4] Error compiling Cython file:
[sagelib-8.2.beta4] ------------------------------------------------------------
[sagelib-8.2.beta4] ...
[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_prime_modn import FiniteField_prime_modn
[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_givaro import FiniteField_givaro
[sagelib-8.2.beta4] from sage.rings.finite_rings.finite_field_ntl_gf2e import FiniteField_ntl_gf2e
[sagelib-8.2.beta4] from sage.libs.pari.all import pari
[sagelib-8.2.beta4] from sage.libs.gmp.all cimport *
[sagelib-8.2.beta4] from sage.cpython.string cimport FS_ENCODING, str_to_bytes
[sagelib-8.2.beta4] ^
[sagelib-8.2.beta4] ------------------------------------------------------------
[sagelib-8.2.beta4] 
[sagelib-8.2.beta4] sage/libs/singular/singular.pyx:40:0: 'sage/cpython/string/FS_ENCODING.pxd' not found
[sagelib-8.2.beta4] 
[sagelib-8.2.beta4] Error compiling Cython file:
[sagelib-8.2.beta4] ------------------------------------------------------------
[sagelib-8.2.beta4] ...
[sagelib-8.2.beta4]     lib = SINGULAR_SO
[sagelib-8.2.beta4] 
[sagelib-8.2.beta4]     if not os.path.exists(lib):
[sagelib-8.2.beta4]         raise ImportError("cannot locate Singular library ({})".format(lib))
[sagelib-8.2.beta4] 
[sagelib-8.2.beta4]     lib = str_to_bytes(lib, FS_ENCODING, "surrogateescape")
[sagelib-8.2.beta4]                            ^
[sagelib-8.2.beta4] ------------------------------------------------------------
[sagelib-8.2.beta4] 
[sagelib-8.2.beta4] sage/libs/singular/singular.pyx:778:28: 'FS_ENCODING' is not a constant, variable or function identifier
[sagelib-8.2.beta4] Traceback (most recent call last):
[sagelib-8.2.beta4]   File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 1179, in cythonize_one_helper
[sagelib-8.2.beta4]     return cythonize_one(*m)
[sagelib-8.2.beta4]   File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 1161, in cythonize_one
[sagelib-8.2.beta4]     raise CompileError(None, pyx_file)
[sagelib-8.2.beta4] CompileError: sage/libs/singular/singular.pyx
```



---

archive/issue_events_333157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-31T21:40:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333157"
}
```



---

archive/issue_events_333158.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-31T21:40:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333158"
}
```



---

archive/issue_comments_366525.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nVolker, did you use the latest branch ?",
    "created_at": "2018-02-01T07:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366525",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">comment:39</div>

Volker, did you use the latest branch ?



---

archive/issue_events_333159.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-01T12:25:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333159"
}
```



---

archive/issue_events_333160.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-01T12:25:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333160"
}
```



---

archive/issue_comments_366526.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHe didn't.  Setting this back to positive review since this otherwise fixes Jeroen's issue.",
    "created_at": "2018-02-01T12:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366526",
    "user": "https://github.com/embray"
}
```

<div id="comment:40" align="right">comment:40</div>

He didn't.  Setting this back to positive review since this otherwise fixes Jeroen's issue.



---

archive/issue_events_333161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-02T12:06:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333161"
}
```



---

archive/issue_events_333162.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "56c322343a94a8118e84c738fa33202acafad7b5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-02-02T12:06:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24223#event-333162"
}
```



---

archive/issue_comments_366527.json:
```json
{
    "body": "Changed branch from **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)** to **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**",
    "created_at": "2018-02-02T12:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24223#issuecomment-366527",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/python3/string-fixes](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/string-fixes)** to **[`e9a582e`](https://github.com/sagemath/sagetrac-mirror/commit/e9a582e0a3a5fe777ea34475200f18288fc3db2c)**
