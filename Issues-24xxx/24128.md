# Issue 24128: A framework for finite dynamics (permutations of finite sets)

archive/issues_023891.json:
```json
{
    "body": "CC:  troby sage-combinat\n\nKeywords: IMA coding sprint, homomesy, cyclic sieving, permutations, fpsac2019\n\nCreate a class that takes a finite set and an automorphism (= permutation) as inputs, and computes the orbit sizes and verifies homomesy with respect to any given statistic. Something like that seems to have been envisioned in ticket #18062, but to our knowledge never implemented.\n\nEventually, we will also want it to check cyclic sieving with respect to any given polynomial.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24128\n\n",
    "closed_at": "2019-07-20T09:11:02Z",
    "created_at": "2017-10-31T02:33:11Z",
    "labels": [
        "component: dynamics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "A framework for finite dynamics (permutations of finite sets)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24128",
    "user": "https://github.com/darijgr"
}
```
CC:  troby sage-combinat

Keywords: IMA coding sprint, homomesy, cyclic sieving, permutations, fpsac2019

Create a class that takes a finite set and an automorphism (= permutation) as inputs, and computes the orbit sizes and verifies homomesy with respect to any given statistic. Something like that seems to have been envisioned in ticket #18062, but to our knowledge never implemented.

Eventually, we will also want it to check cyclic sieving with respect to any given polynomial.

Issue created by migration from https://trac.sagemath.org/ticket/24128





---

archive/issue_comments_334467.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to dynamics.",
    "created_at": "2017-11-01T21:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334467",
    "user": "https://github.com/roed314"
}
```

Changing component from PLEASE CHANGE to dynamics.



---

archive/issue_comments_334468.json:
```json
{
    "body": "I realize some of this is done in `src/sage/combinat/cyclic_sieving_phenomenon.py`. Of course, we'd want more: homomesy checking; finding the orbit of a single point rather than all the orbits.\n\nWhat is the general opinion about this module? Should we just add to it, or should it be completely refactored?",
    "created_at": "2018-03-31T21:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334468",
    "user": "https://github.com/darijgr"
}
```

I realize some of this is done in `src/sage/combinat/cyclic_sieving_phenomenon.py`. Of course, we'd want more: homomesy checking; finding the orbit of a single point rather than all the orbits.

What is the general opinion about this module? Should we just add to it, or should it be completely refactored?



---

archive/issue_comments_334469.json:
```json
{
    "body": "My approach would be to refactor.",
    "created_at": "2018-03-31T23:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334469",
    "user": "https://github.com/tscrim"
}
```

My approach would be to refactor.



---

archive/issue_comments_334470.json:
```json
{
    "body": "I assume it would be\n\n```\nclass DiscreteDynamicalSystem(...):\n```\n\nDo you have any suggestions as to what class should we copypaste to get a reasonable format? What kind of methods would it need? `__init__`, `_repr_`, etc.?",
    "created_at": "2018-04-01T19:56:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334470",
    "user": "https://github.com/darijgr"
}
```

I assume it would be

```
class DiscreteDynamicalSystem(...):
```

Do you have any suggestions as to what class should we copypaste to get a reasonable format? What kind of methods would it need? `__init__`, `_repr_`, etc.?



---

archive/issue_comments_334471.json:
```json
{
    "body": "You may just want to start crafting your own class without using another as a template. You should do the basic methods of `__init__`, `_repr_`, and go from there. I would think about how you want to use an instance of `DiscreteDynamicalSystem` and work from there. In other words, do test-based programming (write the tests you want it to pass and then fill in the code until it does).",
    "created_at": "2018-04-02T01:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334471",
    "user": "https://github.com/tscrim"
}
```

You may just want to start crafting your own class without using another as a template. You should do the basic methods of `__init__`, `_repr_`, and go from there. I would think about how you want to use an instance of `DiscreteDynamicalSystem` and work from there. In other words, do test-based programming (write the tests you want it to pass and then fill in the code until it does).



---

archive/issue_comments_334472.json:
```json
{
    "body": "Some work done. The class is functional for what we need -- homomesy checking for dynamical systems with invertible evolution --, but its doc is very bare-bones and it's lacking a lot of bells and whistles. Also, the three examples are \"def\"-functions rather than subclasses of their own; thus, their \"repr\" is crap.\n\n---\nNew commits:",
    "created_at": "2018-04-04T00:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334472",
    "user": "https://github.com/darijgr"
}
```

Some work done. The class is functional for what we need -- homomesy checking for dynamical systems with invertible evolution --, but its doc is very bare-bones and it's lacking a lot of bells and whistles. Also, the three examples are "def"-functions rather than subclasses of their own; thus, their "repr" is crap.

---
New commits:



---

archive/issue_comments_334473.json:
```json
{
    "body": "I know I had mentioned `object` to you, but `SageObject` is actually the better thing to inherit from. Mea culpa. Then you can use `_repr_` (and `_latex_`, `_ascii_art_`, and `_unicode_art_`).\n\nNote that if you do `self._X = tuple(X)`, then you force `X` to be finite.\n\nI would also consider not putting the evolution function in the repr. Things like that can be more trouble than its worth IMO.\n\nI noticed on a quick look: you have `FDDS` in the `DiscreteDynamicalSystem` doc.",
    "created_at": "2018-04-04T01:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334473",
    "user": "https://github.com/tscrim"
}
```

I know I had mentioned `object` to you, but `SageObject` is actually the better thing to inherit from. Mea culpa. Then you can use `_repr_` (and `_latex_`, `_ascii_art_`, and `_unicode_art_`).

Note that if you do `self._X = tuple(X)`, then you force `X` to be finite.

I would also consider not putting the evolution function in the repr. Things like that can be more trouble than its worth IMO.

I noticed on a quick look: you have `FDDS` in the `DiscreteDynamicalSystem` doc.



---

archive/issue_comments_334474.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-04T17:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334475.json:
```json
{
    "body": "Missing doctests in combinat/finite_dynamical_system.py: 7 / 15 = 46%",
    "created_at": "2018-04-07T07:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334475",
    "user": "https://github.com/fchapoton"
}
```

Missing doctests in combinat/finite_dynamical_system.py: 7 / 15 = 46%



---

archive/issue_comments_334476.json:
```json
{
    "body": "Thank you, but this is nowhere near completion. I'll work on it whenever I have time (which is probably not too often this semester...).",
    "created_at": "2018-04-07T13:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334476",
    "user": "https://github.com/darijgr"
}
```

Thank you, but this is nowhere near completion. I'll work on it whenever I have time (which is probably not too often this semester...).



---

archive/issue_comments_334477.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-05T19:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334478.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-06T20:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334479.json:
```json
{
    "body": "This now has sufficient functionality for anything I personally want to do. Not sure if the class hierarchy is up to Sage standards, though:\n\n```\n- :class:`DiscreteDynamicalSystem`: general discrete dynamical\n  system, as above.\n  Inherit from this class if the ground set of your DDS is\n  infinite or large enough that you want to avoid it getting\n  stored as a list.\n\n- :class:`FiniteDynamicalSystem`: finite discrete dynamical\n  system.\n\n- :class:`InvertibleDiscreteDynamicalSystem`: invertible\n  discrete dynamical system.\n  This implements an ``inverse_evolution`` method for `\\phi^{-1}`\n  (the default implementation simply applies `\\phi` over and\n  over until the original value is revisited; the last value\n  before that is then taken to be the result).\n\n- :class:`InvertibleFiniteDynamicalSystem`: invertible\n  finite discrete dynamical system.\n```\n\n(This would perhaps be easier with the category framework, but I don't know it well enough.)\n\nThere are a few examples, all of which are implemented as staticmethods on a class `class discrete_dynamical_systems()`.",
    "created_at": "2018-10-06T20:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334479",
    "user": "https://github.com/darijgr"
}
```

This now has sufficient functionality for anything I personally want to do. Not sure if the class hierarchy is up to Sage standards, though:

```
- :class:`DiscreteDynamicalSystem`: general discrete dynamical
  system, as above.
  Inherit from this class if the ground set of your DDS is
  infinite or large enough that you want to avoid it getting
  stored as a list.

- :class:`FiniteDynamicalSystem`: finite discrete dynamical
  system.

- :class:`InvertibleDiscreteDynamicalSystem`: invertible
  discrete dynamical system.
  This implements an ``inverse_evolution`` method for `\phi^{-1}`
  (the default implementation simply applies `\phi` over and
  over until the original value is revisited; the last value
  before that is then taken to be the result).

- :class:`InvertibleFiniteDynamicalSystem`: invertible
  finite discrete dynamical system.
```

(This would perhaps be easier with the category framework, but I don't know it well enough.)

There are a few examples, all of which are implemented as staticmethods on a class `class discrete_dynamical_systems()`.



---

archive/issue_events_061214.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2018-10-06T20:46:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24128#event-61214"
}
```



---

archive/issue_comments_334480.json:
```json
{
    "body": "Changing keywords from \"IMA coding sprint, homomesy, cyclic sieving, permutations\" to \"IMA coding sprint, homomesy, cyclic sieving, permutations, sage-combinat\".",
    "created_at": "2018-10-06T20:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334480",
    "user": "https://github.com/darijgr"
}
```

Changing keywords from "IMA coding sprint, homomesy, cyclic sieving, permutations" to "IMA coding sprint, homomesy, cyclic sieving, permutations, sage-combinat".



---

archive/issue_comments_334481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-06T20:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334482.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-06T21:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334483.json:
```json
{
    "body": "Little questions:\n\n- Implement `_repr_` or `__repr__`?\n\n- Should the repr function output the evolution function, even when it is going to be a faceless lambda most of the time?",
    "created_at": "2018-10-06T21:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334483",
    "user": "https://github.com/darijgr"
}
```

Little questions:

- Implement `_repr_` or `__repr__`?

- Should the repr function output the evolution function, even when it is going to be a faceless lambda most of the time?



---

archive/issue_comments_334484.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-06T21:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334485.json:
```json
{
    "body": "I am not sure if we should get the category framework involved or not. At present, there does not seem to be any benefit to using that machinery. You don't have any parents or elements (granted, your systems could be considered as fa\u00e7ade parents). So this seems fine for now. We can always refactor it later as things evolve (your welcome Tom).\n\nI would not have a class `discrete_dynamical_systems` with ``@`staticmethod`s. Instead, I would implement a catalog module and have functions there. You then import the catalog file in the global namespace as `discrete_dynamical_systems`. I would also make them faux-classes in terms of naming (i.e., using CamelCase).\n\nSome things to note:\n\n- You should use `_repr_` so you can override this with `rename` and you are inheriting from `SageObject`.\n- I probably would not add the rule to the output because it will not be so useful.\n- `.. TODO ::` -> `.. TODO::` and what follows should be indented.\n- ~~You should call the method `evolve` instead of `evolution` because you evolve the system, you don't evolution the system.~~ Edit: I misread the code\n- I have been doing similar things on #25796 and #25797 and `sage/dynamics/cellular_automata/soliton.py`. It probably is coming to the point where we should make things have a fairly consistent API and see what we can learn from both.",
    "created_at": "2018-10-06T23:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334485",
    "user": "https://github.com/tscrim"
}
```

I am not sure if we should get the category framework involved or not. At present, there does not seem to be any benefit to using that machinery. You don't have any parents or elements (granted, your systems could be considered as faÃ§ade parents). So this seems fine for now. We can always refactor it later as things evolve (your welcome Tom).

I would not have a class `discrete_dynamical_systems` with ``@`staticmethod`s. Instead, I would implement a catalog module and have functions there. You then import the catalog file in the global namespace as `discrete_dynamical_systems`. I would also make them faux-classes in terms of naming (i.e., using CamelCase).

Some things to note:

- You should use `_repr_` so you can override this with `rename` and you are inheriting from `SageObject`.
- I probably would not add the rule to the output because it will not be so useful.
- `.. TODO ::` -> `.. TODO::` and what follows should be indented.
- ~~You should call the method `evolve` instead of `evolution` because you evolve the system, you don't evolution the system.~~ Edit: I misread the code
- I have been doing similar things on #25796 and #25797 and `sage/dynamics/cellular_automata/soliton.py`. It probably is coming to the point where we should make things have a fairly consistent API and see what we can learn from both.



---

archive/issue_comments_334486.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-06T23:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334487.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-08T18:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-24T18:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334489.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-24T18:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334490.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-24T18:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334491.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-24T18:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334492.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-24T18:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334492",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334493.json:
```json
{
    "body": "This is now needs_review.\n\nFor now, the functionality is fairly shallow (the most complicated algorithm is finding all cycles of a finite DDS); the main use of the module is convenience and examples. There are lots of todos in the doc, some of which I may want to deal with one day.\n\nThe file is called `sage/combinat/finite_dynamical_system.py` because it is mainly meant for use by combinatorialists and because most of the functionality concerns finite DDSes, but I am open to renaming and/or moving it.",
    "created_at": "2018-10-24T18:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334493",
    "user": "https://github.com/darijgr"
}
```

This is now needs_review.

For now, the functionality is fairly shallow (the most complicated algorithm is finding all cycles of a finite DDS); the main use of the module is convenience and examples. There are lots of todos in the doc, some of which I may want to deal with one day.

The file is called `sage/combinat/finite_dynamical_system.py` because it is mainly meant for use by combinatorialists and because most of the functionality concerns finite DDSes, but I am open to renaming and/or moving it.



---

archive/issue_comments_334494.json:
```json
{
    "body": "I think this should go in the `sage/dynamics` folder and then be listed in the `Discrete dynamics` header in the corresponding `index.rst` file.\n\nI am not sure I agree with putting the important doc at the module level. This makes it really difficult for people using `?` to see it. Moreover, if the module level is really short, people will quickly find the class to see the doc when looking at it from the html.\n\nYou should put the `INPUT:` block in the class level doc because it will only get seen by people looking at the source code in the `__init__`. Same for the `EXAMPLES::`. A good test to do in `__init__` is a `TestSuite(Foo).run()`.\n\nWhy do you not automatically force `X` to be a tuple? Concerned if `X` is a parent object? Why not test `if isinstance(X, Parent):` and otherwise (if not also `None`) force `X` to be a tuple. I don't see the reason why it should be allowed to stay mutable.\n\nThis would be cleaner and faster if you pull out the `self.evolution()` and `self.inverse_evolution()` as variables:\n\n```\n            if self.evolution()(self.inverse_evolution()(y)) != y:\n                return False\n            if self.inverse_evolution()(self.evolution()(y)) != y:\n```\n\nIf you change `inverse_evolution_default` to `_inverse`, then you only have to do\n\n```diff\n-        if inverse is None:\n-            self._inverse = self.inverse_evolution_default\n-        else:\n+        if inverse is not None:\n            self._inverse = inverse\n```\n\nAgain, I think you should have a catalog (module) instead of a class with a bunch of ``@`staticmethod`s.",
    "created_at": "2018-10-27T02:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334494",
    "user": "https://github.com/tscrim"
}
```

I think this should go in the `sage/dynamics` folder and then be listed in the `Discrete dynamics` header in the corresponding `index.rst` file.

I am not sure I agree with putting the important doc at the module level. This makes it really difficult for people using `?` to see it. Moreover, if the module level is really short, people will quickly find the class to see the doc when looking at it from the html.

You should put the `INPUT:` block in the class level doc because it will only get seen by people looking at the source code in the `__init__`. Same for the `EXAMPLES::`. A good test to do in `__init__` is a `TestSuite(Foo).run()`.

Why do you not automatically force `X` to be a tuple? Concerned if `X` is a parent object? Why not test `if isinstance(X, Parent):` and otherwise (if not also `None`) force `X` to be a tuple. I don't see the reason why it should be allowed to stay mutable.

This would be cleaner and faster if you pull out the `self.evolution()` and `self.inverse_evolution()` as variables:

```
            if self.evolution()(self.inverse_evolution()(y)) != y:
                return False
            if self.inverse_evolution()(self.evolution()(y)) != y:
```

If you change `inverse_evolution_default` to `_inverse`, then you only have to do

```diff
-        if inverse is None:
-            self._inverse = self.inverse_evolution_default
-        else:
+        if inverse is not None:
            self._inverse = inverse
```

Again, I think you should have a catalog (module) instead of a class with a bunch of ``@`staticmethod`s.



---

archive/issue_comments_334495.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-10-27T02:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334495",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_334496.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-05T18:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-09T02:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334498.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-18T14:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334499.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-03-18T14:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334500.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-03-18T14:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334501.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-03-18T14:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334502.json:
```json
{
    "body": "Note to self:\n\n- doctest the classcall dispatcher\n\n- remove all but the main class from global namespace\n\n- check Algebras and Crystals for catalog examples\n\n- document the \"inverse\" argument on main class",
    "created_at": "2019-03-18T17:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334502",
    "user": "https://github.com/darijgr"
}
```

Note to self:

- doctest the classcall dispatcher

- remove all but the main class from global namespace

- check Algebras and Crystals for catalog examples

- document the "inverse" argument on main class



---

archive/issue_comments_334503.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T07:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334504.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T07:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334505.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T07:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334506.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T07:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334507.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T07:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334508.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T08:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334509.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T08:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334510.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T08:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334511.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T08:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334512.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T08:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334513.json:
```json
{
    "body": "I've reviewed the classcall functionality and adapted the patch to it (now, only the main class is in the global namespace, and all but a few doctests have been adapted to use the classcall). In the classcall itself, I have added an `is_finite` parameter that lets you specify finiteness directly rather than letting Sage figure it out (otherwise, `Words(2, 5)` would not be considered finite).\n\nI'm a bit scared of the catalogs. Algebras and crystals have a bare-bones catalog.py file that just links to other files. Is this really something I should imitate, or should everything be in a single file?",
    "created_at": "2019-07-11T08:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334513",
    "user": "https://github.com/darijgr"
}
```

I've reviewed the classcall functionality and adapted the patch to it (now, only the main class is in the global namespace, and all but a few doctests have been adapted to use the classcall). In the classcall itself, I have added an `is_finite` parameter that lets you specify finiteness directly rather than letting Sage figure it out (otherwise, `Words(2, 5)` would not be considered finite).

I'm a bit scared of the catalogs. Algebras and crystals have a bare-bones catalog.py file that just links to other files. Is this really something I should imitate, or should everything be in a single file?



---

archive/issue_comments_334514.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T09:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334515.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T09:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334516.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T09:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334517.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T10:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334518.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T10:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334519.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T10:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334520.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T10:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334521.json:
```json
{
    "body": "b4a4b2ed50f51ffff74918b1e327e0d196b2e50f = latest working commit.\n\ne91750eae98541d8c220560ad80b9a281351a375 = attempt at making a catalog; tests broken. Can't shave yaks at this point. If anyone can help, would be great. Can also revert.\n\nTom suggests D.evolution(x) instead of D.evolution()(x). Would that be better? I'm worried about situations when the evolution is a callable provided to the system (possibly mutable?) rather than a function, and about methods vs. variables. Again, any suggestions?\n\ncreate_tuple: What was the final agreement about this? Should True be the default?",
    "created_at": "2019-07-11T10:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334521",
    "user": "https://github.com/darijgr"
}
```

b4a4b2ed50f51ffff74918b1e327e0d196b2e50f = latest working commit.

e91750eae98541d8c220560ad80b9a281351a375 = attempt at making a catalog; tests broken. Can't shave yaks at this point. If anyone can help, would be great. Can also revert.

Tom suggests D.evolution(x) instead of D.evolution()(x). Would that be better? I'm worried about situations when the evolution is a callable provided to the system (possibly mutable?) rather than a function, and about methods vs. variables. Again, any suggestions?

create_tuple: What was the final agreement about this? Should True be the default?



---

archive/issue_comments_334522.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334523.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T12:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334524.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T13:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334525.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T13:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T13:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334527.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T13:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334528.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T13:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334529.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T13:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334530.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T13:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T13:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334532.json:
```json
{
    "body": "OK, the catalog is done and works! Unlike the crystals catalog, its contents are functions, not classes, but that's ok, right?",
    "created_at": "2019-07-11T14:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334532",
    "user": "https://github.com/darijgr"
}
```

OK, the catalog is done and works! Unlike the crystals catalog, its contents are functions, not classes, but that's ok, right?



---

archive/issue_comments_334533.json:
```json
{
    "body": "Replying to [comment:63 gh-darijgr]:\n> OK, the catalog is done and works! Unlike the crystals catalog, its contents are functions, not classes, but that's ok, right?\n\n\nEither (including a mix of the two) are fine (see, e.g., the Lie algebras in `algebras/lie_algebras/examples.py`).",
    "created_at": "2019-07-11T14:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334533",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:63 gh-darijgr]:
> OK, the catalog is done and works! Unlike the crystals catalog, its contents are functions, not classes, but that's ok, right?


Either (including a mix of the two) are fine (see, e.g., the Lie algebras in `algebras/lie_algebras/examples.py`).



---

archive/issue_comments_334534.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T14:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334535.json:
```json
{
    "body": "Only remaining questions:\n\n- Should the evolution map be self.evolution() or self.evolution? Former looks more \"right\" to me, but I'm not sure why. Latter is easier to type.\n\n- create_tuple=True as default? If so, when? Is there an \"is_mutable\" test that (quickly) returns True on lists and other mutable things but False on enumerated sets and such?",
    "created_at": "2019-07-11T14:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334535",
    "user": "https://github.com/darijgr"
}
```

Only remaining questions:

- Should the evolution map be self.evolution() or self.evolution? Former looks more "right" to me, but I'm not sure why. Latter is easier to type.

- create_tuple=True as default? If so, when? Is there an "is_mutable" test that (quickly) returns True on lists and other mutable things but False on enumerated sets and such?



---

archive/issue_comments_334536.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-11T14:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334536",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_334537.json:
```json
{
    "body": "A few little things:\n\n(Optional) `cyclic_sieving_phenomenon.py` -> `:mod:`sage.combinat.cyclic_sieving_phenomenon`` and similar such things to make the doc better linked.\n\nFor inputs:\n\n```\n- ``foo`` -- the type (default: bar); the detailed info\n```\n\nThe `__init__` is missing doctests (a `TestSuite(foo).run()` is good here). (A few places.)\n\nExtra space after the `x`:\n\n```\nsage: F = DiscreteDynamicalSystem(W, lambda x : x[1:] + Word([x[0]]), is_finite=True, inverse=True)\n```\n(Similar in a few a places.)\n\n```diff\n-        return \"An invertible discrete dynamical system with ground set \" \\\n-               + repr(self._X)\n+        return \"An invertible discrete dynamical system with ground set \" repr(self._X)\n```\n\n```diff\n-        for i in self._X:\n-            if f(phi(i)) != f(i):\n-                return False\n-        return True\n+        return all(f(phi(i)) == f(i) for i in self._X)\n```\n\nFor lists split over multiple lines, it looks better with a space before it; e.g.,\n\n```\n+        [2, 7, 7, 7, 7, 7, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,\n+         14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14]\n```\n\n```diff\n-nu = list(reversed(sorted(mu + [len(lam)])))\n+nu = sorted(mu + [len(lam)], reverse=True)\n```",
    "created_at": "2019-07-11T16:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334537",
    "user": "https://github.com/tscrim"
}
```

A few little things:

(Optional) `cyclic_sieving_phenomenon.py` -> `:mod:`sage.combinat.cyclic_sieving_phenomenon`` and similar such things to make the doc better linked.

For inputs:

```
- ``foo`` -- the type (default: bar); the detailed info
```

The `__init__` is missing doctests (a `TestSuite(foo).run()` is good here). (A few places.)

Extra space after the `x`:

```
sage: F = DiscreteDynamicalSystem(W, lambda x : x[1:] + Word([x[0]]), is_finite=True, inverse=True)
```
(Similar in a few a places.)

```diff
-        return "An invertible discrete dynamical system with ground set " \
-               + repr(self._X)
+        return "An invertible discrete dynamical system with ground set " repr(self._X)
```

```diff
-        for i in self._X:
-            if f(phi(i)) != f(i):
-                return False
-        return True
+        return all(f(phi(i)) == f(i) for i in self._X)
```

For lists split over multiple lines, it looks better with a space before it; e.g.,

```
+        [2, 7, 7, 7, 7, 7, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
+         14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14]
```

```diff
-nu = list(reversed(sorted(mu + [len(lam)])))
+nu = sorted(mu + [len(lam)], reverse=True)
```



---

archive/issue_comments_334538.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T18:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334539.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-11T19:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334540.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-19T21:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334540",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061215.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-07-19T21:21:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24128#event-61215"
}
```



---

archive/issue_events_061216.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-07-19T21:21:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24128#event-61216"
}
```



---

archive/issue_comments_334541.json:
```json
{
    "body": "Changing keywords from \"IMA coding sprint, homomesy, cyclic sieving, permutations, sage-combinat\" to \"IMA coding sprint, homomesy, cyclic sieving, permutations, fpsac2019\".",
    "created_at": "2019-07-19T21:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334541",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "IMA coding sprint, homomesy, cyclic sieving, permutations, sage-combinat" to "IMA coding sprint, homomesy, cyclic sieving, permutations, fpsac2019".



---

archive/issue_comments_334542.json:
```json
{
    "body": "LGTM. Thank you.",
    "created_at": "2019-07-19T21:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334542",
    "user": "https://github.com/tscrim"
}
```

LGTM. Thank you.



---

archive/issue_comments_334543.json:
```json
{
    "body": "Thank you for the review!",
    "created_at": "2019-07-19T21:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334543",
    "user": "https://github.com/darijgr"
}
```

Thank you for the review!



---

archive/issue_events_061217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-20T09:11:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24128#event-61217"
}
```



---

archive/issue_comments_334544.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-20T09:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24128",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24128#issuecomment-334544",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
