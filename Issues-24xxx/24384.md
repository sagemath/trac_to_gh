# Issue 24384: py3: a few changes about range

archive/issues_024147.json:
```json
{
    "assignees": [],
    "body": "as part of #16081\n\nCC:  @tscrim @jdemeyer @embray\n\nBranch: **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**\n\nReviewer: **Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24384_\n\n",
    "closed_at": "2017-12-25T18:21:36Z",
    "created_at": "2017-12-15T16:31:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: a few changes about range",
    "type": "issue",
    "updated_at": "2018-01-02T14:55:48Z",
    "url": "https://github.com/sagemath/sage/issues/24384",
    "user": "https://github.com/fchapoton"
}
```
as part of #16081

CC:  @tscrim @jdemeyer @embray

Branch: **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**

Reviewer: **Travis Scrimshaw, Frédéric Chapoton**

Author: **Frédéric Chapoton, Travis Scrimshaw**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/24384_





---

archive/issue_events_339614.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:31:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339614"
}
```



---

archive/issue_events_339615.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339615"
}
```



---

archive/issue_events_339616.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339616"
}
```



---

archive/issue_events_339617.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339617"
}
```



---

archive/issue_comments_369301.json:
```json
{
    "body": "Commit: **[`3b8e35a`](https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a)**",
    "created_at": "2017-12-15T16:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369301",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`3b8e35a`](https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a)**



---

archive/issue_comments_369302.json:
```json
{
    "body": "Branch: **[u/chapoton/24384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24384)**",
    "created_at": "2017-12-15T16:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369302",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/24384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24384)**



---

archive/issue_events_339618.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-15T16:32:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339618"
}
```



---

archive/issue_comments_369303.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a\"><code>3b8e35a</code></a></td><td><code>py3: again some care for range</code></td></tr></table>\n",
    "created_at": "2017-12-15T16:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369303",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a"><code>3b8e35a</code></a></td><td><code>py3: again some care for range</code></td></tr></table>




---

archive/issue_comments_369304.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\ngreen bot, please review",
    "created_at": "2017-12-15T17:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369304",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

green bot, please review



---

archive/issue_comments_369305.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSo the changes to `tensor_operations.py` would not be necessary if we add `range` to the known Python classes handled by `cartesian_product`:\n\n```diff\n-native_python_containers   = set([tuple, list, set, frozenset])\n+native_python_containers   = set([tuple, list, set, frozenset, range])\n```\nIt would be good if we could somehow add all possible views to this (and other similar places for previously-list objects), but `range` is the most common one that will be passed for this construction.\n\nI also do not see the need to any changes in `abvar.py`. In Python3 (3.5.2 to be specific), I can do\n\n```\n>>> x = range(5)\n>>> x[-2]\n3\n>>> list(x)\n[0, 1, 2, 3, 4]\n```\nso `i = rows[-1][-1]+1` should not be a problem. Additionally, `matrix_from_rows` would just convert the `range` into a `list` (although I think it probably should not do any such conversion). Am I missing something there?",
    "created_at": "2017-12-15T22:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369305",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

So the changes to `tensor_operations.py` would not be necessary if we add `range` to the known Python classes handled by `cartesian_product`:

```diff
-native_python_containers   = set([tuple, list, set, frozenset])
+native_python_containers   = set([tuple, list, set, frozenset, range])
```
It would be good if we could somehow add all possible views to this (and other similar places for previously-list objects), but `range` is the most common one that will be passed for this construction.

I also do not see the need to any changes in `abvar.py`. In Python3 (3.5.2 to be specific), I can do

```
>>> x = range(5)
>>> x[-2]
3
>>> list(x)
[0, 1, 2, 3, 4]
```
so `i = rows[-1][-1]+1` should not be a problem. Additionally, `matrix_from_rows` would just convert the `range` into a `list` (although I think it probably should not do any such conversion). Am I missing something there?



---

archive/issue_comments_369306.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe\"><code>98f3c45</code></a></td><td><code>py3: again some care for range</code></td></tr></table>\n",
    "created_at": "2017-12-17T17:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369306",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe"><code>98f3c45</code></a></td><td><code>py3: again some care for range</code></td></tr></table>




---

archive/issue_comments_369307.json:
```json
{
    "body": "Changed commit from **[`3b8e35a`](https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a)** to **[`98f3c45`](https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe)**",
    "created_at": "2017-12-17T17:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b8e35a`](https://github.com/sagemath/sagetrac-mirror/commit/3b8e35a5eabfb40ecde88bde26f9ae6836d89d4a)** to **[`98f3c45`](https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe)**



---

archive/issue_comments_369308.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have undone the changes to abvar.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe\"><code>98f3c45</code></a></td><td><code>py3: again some care for range</code></td></tr></table>\n",
    "created_at": "2017-12-17T17:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369308",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

I have undone the changes to abvar.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe"><code>98f3c45</code></a></td><td><code>py3: again some care for range</code></td></tr></table>




---

archive/issue_comments_369309.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\ngreen bot. Would it be ok like that for the moment ?",
    "created_at": "2017-12-17T20:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369309",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

green bot. Would it be ok like that for the moment ?



---

archive/issue_comments_369310.json:
```json
{
    "body": "Changed branch from **[u/chapoton/24384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24384)** to **[public/python3/cartesian_product_range-24384](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/cartesian_product_range-24384)**",
    "created_at": "2017-12-17T21:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369310",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/chapoton/24384](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/24384)** to **[public/python3/cartesian_product_range-24384](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/cartesian_product_range-24384)**



---

archive/issue_comments_369311.json:
```json
{
    "body": "Changed commit from **[`98f3c45`](https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe)** to **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**",
    "created_at": "2017-12-17T21:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369311",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`98f3c45`](https://github.com/sagemath/sagetrac-mirror/commit/98f3c45b80c3beb6eecf5344a74bd448f10e9afe)** to **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**



---

archive/issue_comments_369312.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-12-17T21:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369312",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw, Frédéric Chapoton**



---

archive/issue_comments_369313.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**",
    "created_at": "2017-12-17T21:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369313",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Frédéric Chapoton** to **Frédéric Chapoton, Travis Scrimshaw**



---

archive/issue_comments_369314.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI ended up doing the changes to `cartesian_product` to make that handle a `range` input as that is something we will want to do eventually and it means we do not have to add a bunch of `list` wrappers.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03f94dc70d9511dd5fdcd3d74dbe7863f600a830\"><code>03f94dc</code></a></td><td><code>Handle Python3 range in cartesian_product.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a\"><code>3725ea9</code></a></td><td><code>Porting other changes to tensor_operations.py.</code></td></tr></table>\n",
    "created_at": "2017-12-17T21:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369314",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

I ended up doing the changes to `cartesian_product` to make that handle a `range` input as that is something we will want to do eventually and it means we do not have to add a bunch of `list` wrappers.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03f94dc70d9511dd5fdcd3d74dbe7863f600a830"><code>03f94dc</code></a></td><td><code>Handle Python3 range in cartesian_product.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a"><code>3725ea9</code></a></td><td><code>Porting other changes to tensor_operations.py.</code></td></tr></table>




---

archive/issue_comments_369315.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nok, thanks",
    "created_at": "2017-12-18T12:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369315",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

ok, thanks



---

archive/issue_events_339619.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-18T12:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339619"
}
```



---

archive/issue_events_339620.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-12-18T12:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339620"
}
```



---

archive/issue_comments_369316.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI think changes like this should also include native iterables that were previously functions that returned `list`s, such as `map` and `filter` as well.  Or maybe arbitrary iterables (or at least finite iterables as in `isinstance(x, Iterable) and isinstance(x, Sized)`.  The only problem I've found with this is sometimes it's necessary to take care between specific Sage objects that happen to be iterable, and arbitrary/unknown iterables that should be converted to a list.",
    "created_at": "2017-12-19T11:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369316",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

I think changes like this should also include native iterables that were previously functions that returned `list`s, such as `map` and `filter` as well.  Or maybe arbitrary iterables (or at least finite iterables as in `isinstance(x, Iterable) and isinstance(x, Sized)`.  The only problem I've found with this is sometimes it's necessary to take care between specific Sage objects that happen to be iterable, and arbitrary/unknown iterables that should be converted to a list.



---

archive/issue_comments_369317.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOther examples include containers like `dict_keys`, `dict_values`, and `dict_items`.",
    "created_at": "2017-12-19T11:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369317",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

Other examples include containers like `dict_keys`, `dict_values`, and `dict_items`.



---

archive/issue_comments_369318.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@embray](#comment:9):\n> I think changes like this should also include native iterables that were previously functions that returned `list`s, such as `map` and `filter` as well.  Or maybe arbitrary iterables (or at least finite iterables as in `isinstance(x, Iterable) and isinstance(x, Sized)`.  The only problem I've found with this is sometimes it's necessary to take care between specific Sage objects that happen to be iterable, and arbitrary/unknown iterables that should be converted to a list.\n\nActually, maybe not `Sized` since a `map` is not `Sized`, and there's no (Pythonic) way to get from a `map` object what its underlying iterators are, so if it were a map of an infinite iterator you run the risk of blowing up, but I guess that's a problem in general as well.",
    "created_at": "2017-12-19T11:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369318",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@embray](#comment:9):
> I think changes like this should also include native iterables that were previously functions that returned `list`s, such as `map` and `filter` as well.  Or maybe arbitrary iterables (or at least finite iterables as in `isinstance(x, Iterable) and isinstance(x, Sized)`.  The only problem I've found with this is sometimes it's necessary to take care between specific Sage objects that happen to be iterable, and arbitrary/unknown iterables that should be converted to a list.

Actually, maybe not `Sized` since a `map` is not `Sized`, and there's no (Pythonic) way to get from a `map` object what its underlying iterators are, so if it were a map of an infinite iterator you run the risk of blowing up, but I guess that's a problem in general as well.



---

archive/issue_comments_369319.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWould a test like `isinstance(x, Iterable) and not isinstance(x, SageObject)` be good enough for most cases of \"arbitrary iterable that is not otherwise meaningful to Sage\"?",
    "created_at": "2017-12-19T12:00:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369319",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Would a test like `isinstance(x, Iterable) and not isinstance(x, SageObject)` be good enough for most cases of "arbitrary iterable that is not otherwise meaningful to Sage"?



---

archive/issue_comments_369320.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI wish those Python3 containers all have some nice common base class, but they don't. `:/`\n\nUnfortunately, I'm not sure your suggestion in [comment:12](#comment:12) would not work because generators are iterable:\n\n```\nsage: g = (x for x in ZZ)\nsage: isinstance(g, collections.Iterable) and not isinstance(g, SageObject)\nTrue\n```\nSo there is no way to guarantee finiteness (right now, I this might be guaranteed for Python object input). Nor do we want strings to be such an object. Granted, we might be able to refine this in a reasonable way, but it will likely be a bit more involved (IDK how much from a quick look).",
    "created_at": "2017-12-19T22:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369320",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

I wish those Python3 containers all have some nice common base class, but they don't. `:/`

Unfortunately, I'm not sure your suggestion in [comment:12](#comment:12) would not work because generators are iterable:

```
sage: g = (x for x in ZZ)
sage: isinstance(g, collections.Iterable) and not isinstance(g, SageObject)
True
```
So there is no way to guarantee finiteness (right now, I this might be guaranteed for Python object input). Nor do we want strings to be such an object. Granted, we might be able to refine this in a reasonable way, but it will likely be a bit more involved (IDK how much from a quick look).



---

archive/issue_events_339621.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-25T18:21:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339621"
}
```



---

archive/issue_events_339622.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0338879b11ca17881a6a951595e915e4748ddb01",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-25T18:21:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24384#event-339622"
}
```



---

archive/issue_comments_369321.json:
```json
{
    "body": "Changed branch from **[public/python3/cartesian_product_range-24384](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/cartesian_product_range-24384)** to **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**",
    "created_at": "2017-12-25T18:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369321",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/python3/cartesian_product_range-24384](https://github.com/sagemath/sagetrac-mirror/tree/public/python3/cartesian_product_range-24384)** to **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)**



---

archive/issue_comments_369322.json:
```json
{
    "body": "Changed commit from **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)** to none",
    "created_at": "2018-01-02T14:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369322",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`3725ea9`](https://github.com/sagemath/sagetrac-mirror/commit/3725ea9322659a01c284bbccc4aa57774dccf33a)** to none



---

archive/issue_comments_369323.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI'm also annoyed that there isn't a standard ABC in Python for a *finite* iteratable.  We could make our own though.  The problem is that you can't just say it has to have `__len__` because some iterables like `map` aren't *necessarily* finite, but they can be if the iterable they wrap is finite.\n\nSo since there's no way to know absolutely for sure if an iterable is finite I would propose to not worry about it, and if the user provides an infinite iterable that's just as much user error as writing an infinite `while` loop.  It seems to be the only way really, not that I'm happy about it.",
    "created_at": "2018-01-02T14:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24384#issuecomment-369323",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

I'm also annoyed that there isn't a standard ABC in Python for a *finite* iteratable.  We could make our own though.  The problem is that you can't just say it has to have `__len__` because some iterables like `map` aren't *necessarily* finite, but they can be if the iterable they wrap is finite.

So since there's no way to know absolutely for sure if an iterable is finite I would propose to not worry about it, and if the user provides an infinite iterable that's just as much user error as writing an infinite `while` loop.  It seems to be the only way really, not that I'm happy about it.
