# Issue 24171: Formal set membership function

archive/issues_023934.json:
```json
{
    "body": "To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function `element_of`. \n\nIt depends on sets being made coercible into SR.  The present ticket plays safe and only does this for finite sets and a few standard infinite sets: `NN`, `ZZ`, `QQ`, `AA`; and `RealSet`s.\n\n`element_of` converts to SymPy's `Contains`. This is useful in combination with #31931, which adds SymPy conversions to some of the above sets.\n\n\n\n\nCC:  @videlec\n\nBranch/Commit: a8c94cab974c8983dad63c2c6e989936984de49a\n\nReviewer: Travis Scrimshaw, Matthias Koeppe\n\nAuthor: Ralf Stephan, Matthias Koeppe\n\nDependencies: #31877\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24171\n\n",
    "closed_at": "2021-07-01T20:45:14Z",
    "created_at": "2017-11-07T07:43:02Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Formal set membership function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24171",
    "user": "https://github.com/rwst"
}
```
To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function `element_of`. 

It depends on sets being made coercible into SR.  The present ticket plays safe and only does this for finite sets and a few standard infinite sets: `NN`, `ZZ`, `QQ`, `AA`; and `RealSet`s.

`element_of` converts to SymPy's `Contains`. This is useful in combination with #31931, which adds SymPy conversions to some of the above sets.




CC:  @videlec

Branch/Commit: a8c94cab974c8983dad63c2c6e989936984de49a

Reviewer: Travis Scrimshaw, Matthias Koeppe

Author: Ralf Stephan, Matthias Koeppe

Dependencies: #31877

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24171





---

archive/issue_comments_356972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function, likely named \"contains\". It would depend on sets being made coercible into SR.\n+To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function, likely named \"contains\" or \"element_of\". It would depend on sets being made coercible into SR.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-11-07T13:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356972",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function, likely named "contains". It would depend on sets being made coercible into SR.
+To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function, likely named "contains" or "element_of". It would depend on sets being made coercible into SR.
 
 Comment: 1
 
``````




---

archive/issue_comments_356973.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2017-11-07T15:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356973",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_356974.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-07T15:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356974",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_356975.json:
```json
{
    "body": "<a id='comment:4'></a>I can reproduce this error\n\n```\n**********************************************************************\nFile \"src/sage/misc/dev_tools.py\", line 438, in sage.misc.dev_tools.import_statements\nFailed example:\n    load_submodules(sage.sets)\nExpected:\n    load sage.sets.real_set... succeeded\n    load sage.sets.set_from_iterator... succeeded\nGot:\n    load sage.sets.set_from_iterator... succeeded\n```\nI think why this now fails is because `real_set` is now loaded on startup.",
    "created_at": "2017-11-07T23:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356975",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>I can reproduce this error

```
**********************************************************************
File "src/sage/misc/dev_tools.py", line 438, in sage.misc.dev_tools.import_statements
Failed example:
    load_submodules(sage.sets)
Expected:
    load sage.sets.real_set... succeeded
    load sage.sets.set_from_iterator... succeeded
Got:
    load sage.sets.set_from_iterator... succeeded
```
I think why this now fails is because `real_set` is now loaded on startup.



---

archive/issue_comments_356976.json:
```json
{
    "body": "<a id='comment:5'></a>I think it would be good if `RealSet` answered positive to `is_Set`, I'm just not sure how to accomplish it correctly. If done it wouldn't need to be loaded at start.",
    "created_at": "2017-11-08T06:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356976",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>I think it would be good if `RealSet` answered positive to `is_Set`, I'm just not sure how to accomplish it correctly. If done it wouldn't need to be loaded at start.



---

archive/issue_comments_356977.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-08T06:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356977",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_356978.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-08T08:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356979.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-08T08:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356979",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_356980.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-08T14:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356981.json:
```json
{
    "body": "<a id='comment:9'></a>LGTM. Thanks.",
    "created_at": "2017-11-08T22:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356981",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>LGTM. Thanks.



---

archive/issue_comments_356982.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-08T22:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356982",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356983.json:
```json
{
    "body": "<a id='comment:10'></a>Thanks for the review.",
    "created_at": "2017-11-09T06:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356983",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Thanks for the review.



---

archive/issue_comments_356984.json:
```json
{
    "body": "<a id='comment:11'></a>Merge conflictw",
    "created_at": "2017-12-08T00:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356984",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>Merge conflictw



---

archive/issue_comments_356985.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-12-08T00:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356985",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356986.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-14T06:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356987.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-12-14T06:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356987",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_356988.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-12-14T23:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356988",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356989.json:
```json
{
    "body": "<a id='comment:14'></a>See patchbot",
    "created_at": "2017-12-14T23:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356989",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>See patchbot



---

archive/issue_comments_356990.json:
```json
{
    "body": "<a id='comment:15'></a>Actually the fails are due to the blockers #24284 and #24378 but they are not reviewed yet.",
    "created_at": "2017-12-18T08:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356990",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>Actually the fails are due to the blockers #24284 and #24378 but they are not reviewed yet.



---

archive/issue_comments_356991.json:
```json
{
    "body": "<a id='comment:17'></a>OK, I added junk to the branch, so what Volker means are the patchbot plugin fails. Also, the rare random fails are now happening frequently so patchbot pass depend on the blockers.\n\n---\nNew commits:",
    "created_at": "2017-12-18T08:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356991",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>OK, I added junk to the branch, so what Volker means are the patchbot plugin fails. Also, the rare random fails are now happening frequently so patchbot pass depend on the blockers.

---
New commits:



---

archive/issue_comments_356992.json:
```json
{
    "body": "<a id='comment:19'></a>Actually the reason why #24171 fails the random expression tests is because the here introduced function is yet another function that fails that test.",
    "created_at": "2017-12-18T14:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356992",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>Actually the reason why #24171 fails the random expression tests is because the here introduced function is yet another function that fails that test.



---

archive/issue_comments_356993.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-18T14:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356994.json:
```json
{
    "body": "<a id='comment:22'></a>The following problem appeared: to be able to use a symbolic `element_of` function its arguments (1. expression, 2. set/domain) must be convertible to the symbolic ring. One doctest in `symbolic/ring.pyx` tests that `r` (the R interpreter) does not convert to symbolic. But `r` is `in Sets()` and so we cannot simply test for `x in Sets()` and allow conversion of `x` because `r` would then be allowed.\n\nSo we must test for all kinds of sets, e.g. `ZZ in InfiniteEnumeratedSets()`, `RR in Fields()`, `RealSet(0,1) in SetsWithPartialMaps()`, and `Set(range(0,5)) in FiniteSets()`, because we need to catch all of these but cannot use the catch-all `in Sets()`. Is the R interpreter really in the sets category? Is there a better catch-all?",
    "created_at": "2017-12-30T08:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356994",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'></a>The following problem appeared: to be able to use a symbolic `element_of` function its arguments (1. expression, 2. set/domain) must be convertible to the symbolic ring. One doctest in `symbolic/ring.pyx` tests that `r` (the R interpreter) does not convert to symbolic. But `r` is `in Sets()` and so we cannot simply test for `x in Sets()` and allow conversion of `x` because `r` would then be allowed.

So we must test for all kinds of sets, e.g. `ZZ in InfiniteEnumeratedSets()`, `RR in Fields()`, `RealSet(0,1) in SetsWithPartialMaps()`, and `Set(range(0,5)) in FiniteSets()`, because we need to catch all of these but cannot use the catch-all `in Sets()`. Is the R interpreter really in the sets category? Is there a better catch-all?



---

archive/issue_comments_356995.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-12-30T08:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356995",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_356996.json:
```json
{
    "body": "<a id='comment:23'></a>BTW `RealSet(-oo,oo) in Fields()` is False which looks like a bug, right?",
    "created_at": "2017-12-30T08:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356996",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>BTW `RealSet(-oo,oo) in Fields()` is False which looks like a bug, right?



---

archive/issue_comments_356997.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 rws]:\n> BTW `RealSet(-oo,oo) in Fields()` is False which looks like a bug, right?\n\n\nNot to me. `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade (like in `Sets().Facade()`). That is to say, it does not have any proper elements. Making it a field would be rather artificial because the operation `+` and `*` that might (or might not) exist on the elements is obtained from other parts of Sage.",
    "created_at": "2017-12-30T09:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356997",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>Replying to [comment:23 rws]:
> BTW `RealSet(-oo,oo) in Fields()` is False which looks like a bug, right?


Not to me. `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade (like in `Sets().Facade()`). That is to say, it does not have any proper elements. Making it a field would be rather artificial because the operation `+` and `*` that might (or might not) exist on the elements is obtained from other parts of Sage.



---

archive/issue_comments_356998.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 vdelecroix]:\n> ... `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade ...\n\n\nIs there an object that can act as the set of real numbers in Sage?",
    "created_at": "2017-12-31T07:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356998",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>Replying to [comment:24 vdelecroix]:
> ... `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade ...


Is there an object that can act as the set of real numbers in Sage?



---

archive/issue_comments_356999.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 rws]:\n> Replying to [comment:24 vdelecroix]:\n> > ... `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade ...\n  \n> \n> Is there an object that can act as the set of real numbers in Sage?\n\n\nVery sadly, no!\n\nMy dream is:\n\n1. rename `RealField(prec)` -> `RealFloatingPointField_mpfr(prec)`\n2. rename `RealLazyField` -> `RealComputableField` and `RLF -> RCF`\n3. create a class `RealField()` to model (abstractly) the set of real numbers\n4. rename `RR` -> `RFPF`\n\nThe reason for 2./3. is that we want to distinguish between the field of all real numbers (denoted `RR` in math literature) and the field of [computable numbers](https://en.wikipedia.org/wiki/Computable_number) (which is a countable subfield). An element of `RCF` would simply be a computer program that gives access to the digit expansion of a number. It should provide access to all mathematical constants like `pi`, `e`, etc and most transcendental functions. A serious problem about `RCF` is that the equality is not decidable... but we can not avoid it.\n\nThe set of real numbers (my number 3. in the list) would not implement anything serious. It would only act as an abstract set that can be obtained as the metric completion of `QQ`. It could be used as a building block for more advanced structures (like manfiolds).\n\nI put 4. apart as it is a serious backward incompatibility.reasons.",
    "created_at": "2017-12-31T09:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-356999",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>Replying to [comment:25 rws]:
> Replying to [comment:24 vdelecroix]:
> > ... `RealSet(-oo,oo)` or `RealSet(0,1)` act as a facade ...
  
> 
> Is there an object that can act as the set of real numbers in Sage?


Very sadly, no!

My dream is:

1. rename `RealField(prec)` -> `RealFloatingPointField_mpfr(prec)`
2. rename `RealLazyField` -> `RealComputableField` and `RLF -> RCF`
3. create a class `RealField()` to model (abstractly) the set of real numbers
4. rename `RR` -> `RFPF`

The reason for 2./3. is that we want to distinguish between the field of all real numbers (denoted `RR` in math literature) and the field of [computable numbers](https://en.wikipedia.org/wiki/Computable_number) (which is a countable subfield). An element of `RCF` would simply be a computer program that gives access to the digit expansion of a number. It should provide access to all mathematical constants like `pi`, `e`, etc and most transcendental functions. A serious problem about `RCF` is that the equality is not decidable... but we can not avoid it.

The set of real numbers (my number 3. in the list) would not implement anything serious. It would only act as an abstract set that can be obtained as the metric completion of `QQ`. It could be used as a building block for more advanced structures (like manfiolds).

I put 4. apart as it is a serious backward incompatibility.reasons.



---

archive/issue_comments_357000.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2018-01-02T07:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357000",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_357001.json:
```json
{
    "body": "<a id='comment:29'></a>This now depends on #24456 and has sufficiently changed to need a new review. Could you please?\n\n---\nNew commits:",
    "created_at": "2018-01-02T09:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357001",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>This now depends on #24456 and has sufficiently changed to need a new review. Could you please?

---
New commits:



---

archive/issue_comments_357002.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-02T09:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357002",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_357003.json:
```json
{
    "body": "<a id='comment:30'></a>Note that we have no proper check for if something is a subset of the complexes. I ended up allowing conversion of all finite sets and `(NN, ZZ, QQ, RealField, RealSet, AA)` to symbolic.",
    "created_at": "2018-01-02T09:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357003",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'></a>Note that we have no proper check for if something is a subset of the complexes. I ended up allowing conversion of all finite sets and `(NN, ZZ, QQ, RealField, RealSet, AA)` to symbolic.



---

archive/issue_comments_357004.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-27T07:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357004",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_061289.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-09T02:22:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24171#event-61289"
}
```



---

archive/issue_comments_357005.json:
```json
{
    "body": "<a id='comment:33'></a>rebased away from stalled dependency #24456\n\n---\nNew commits:",
    "created_at": "2021-06-09T02:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357005",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>rebased away from stalled dependency #24456

---
New commits:



---

archive/issue_comments_357006.json:
```json
{
    "body": "<a id='comment:34'></a>The `is_finite` method added here will not be necessary any more with #31877",
    "created_at": "2021-06-09T03:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357006",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>The `is_finite` method added here will not be necessary any more with #31877



---

archive/issue_comments_357007.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T03:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357008.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T03:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357009.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T03:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357010.json:
```json
{
    "body": "<a id='comment:39'></a>This branch works now as advertised, but a careful review of this design is needed",
    "created_at": "2021-06-09T04:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357010",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>This branch works now as advertised, but a careful review of this design is needed



---

archive/issue_comments_357011.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-09T04:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357011",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_357012.json:
```json
{
    "body": "<a id='comment:40'></a>We could add more support for other infinite sets later on (e.g., number fields), but this would be good for most (perhaps all?) use-cases. I think everything else is good except I don't understand why this line is added (see the diff):\n\n```\noo = infinity\n```",
    "created_at": "2021-06-09T04:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357012",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'></a>We could add more support for other infinite sets later on (e.g., number fields), but this would be good for most (perhaps all?) use-cases. I think everything else is good except I don't understand why this line is added (see the diff):

```
oo = infinity
```



---

archive/issue_comments_357013.json:
```json
{
    "body": "<a id='comment:41'></a>that's just a leftover, I'll get rid of it",
    "created_at": "2021-06-09T04:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357013",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>that's just a leftover, I'll get rid of it



---

archive/issue_comments_357014.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T04:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357015.json:
```json
{
    "body": "<a id='comment:43'></a>Thank you. Green bot => positive review. Please add yourself whether you think you are an author and/or reviewer.",
    "created_at": "2021-06-09T04:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357015",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:43'></a>Thank you. Green bot => positive review. Please add yourself whether you think you are an author and/or reviewer.



---

archive/issue_comments_357016.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T04:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357017.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T05:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_357018.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function `element_of`. \n+\n+It depends on sets being made coercible into SR.  The present ticket plays safe and only does this for finite sets and a few standard infinite sets: `NN`, `ZZ`, `QQ`, `AA`; and `RealSet`s.\n+\n+`element_of` converts to SymPy's `Contains`. This is useful in combination with #31931, which adds SymPy conversions to some of the above sets.\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-06-09T05:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357018",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
+To express solution sets from solvers an expression-is-element-of-set relation is needed. For ease of implementation this can be made a formal function `element_of`. 
+
+It depends on sets being made coercible into SR.  The present ticket plays safe and only does this for finite sets and a few standard infinite sets: `NN`, `ZZ`, `QQ`, `AA`; and `RealSet`s.
+
+`element_of` converts to SymPy's `Contains`. This is useful in combination with #31931, which adds SymPy conversions to some of the above sets.
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_357019.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-09T23:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357019",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_357020.json:
```json
{
    "body": "<a id='comment:49'></a>Thanks!",
    "created_at": "2021-06-09T23:36:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357020",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Thanks!



---

archive/issue_comments_357021.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-01T20:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24171#issuecomment-357021",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_061290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-01T20:45:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24171",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24171#event-61290"
}
```
