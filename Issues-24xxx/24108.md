# Issue 24108: quadratic_form_from_invariants()

archive/issues_023871.json:
```json
{
    "body": "This is algorithm 3.4.3 from Markus Kirschmer's \"Definite quadratic and hermitian forms with small class number\"  It returns a global quadratic form corresponding to a given set of local invariants. \n\nCC:  mroy sbrudzin jduque\n\nKeywords: sd90\n\nBranch/Commit: afa1d731ca5996c0cc0115bf144ca4b10db3e70d\n\nReviewer: Travis Scrimshaw\n\nAuthor: Simon Brandhorst\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24108\n\n",
    "closed_at": "2019-11-16T20:15:56Z",
    "created_at": "2017-10-25T21:05:40Z",
    "labels": [
        "component: quadratic forms"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "quadratic_form_from_invariants()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24108",
    "user": "https://github.com/annahaensch"
}
```
This is algorithm 3.4.3 from Markus Kirschmer's "Definite quadratic and hermitian forms with small class number"  It returns a global quadratic form corresponding to a given set of local invariants. 

CC:  mroy sbrudzin jduque

Keywords: sd90

Branch/Commit: afa1d731ca5996c0cc0115bf144ca4b10db3e70d

Reviewer: Travis Scrimshaw

Author: Simon Brandhorst

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24108





---

archive/issue_comments_356177.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2019-10-15T16:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356177",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_356178.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-15T16:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356178",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_356179.json:
```json
{
    "body": "<a id='comment:4'></a>A few little things:\n\n```diff\n-    Let `(a_1,...,a_n)` be the gram marix of a regular quadratic space.\n+    Let `(a_1, \\ldots, a_n)` be the gram marix of a regular quadratic space.\n     Then Cassel's Hasse invariant is defined as\n \n     .. MATH::\n \n-        \\prod_{i<j} (a_i,a_j)\n+        \\prod_{i<j} (a_i,a_j),\n \n     where `(a_i,a_j)` denotes the Hilbert symbol.\n```\n\nShould `gram` be capitalized to `Gram`?\n\n`if F!=QQ:` -> `if F is not QQ:`\n\nError messages should start with a lowercase letter.\n\nThe `assert all()` does not need the list comprehension, so you just need\n\n```\nassert all((a*d).valuation(p) % 2 == 1 for p in Pprime)\n```\n\nWhy is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.",
    "created_at": "2019-11-08T02:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356179",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>A few little things:

```diff
-    Let `(a_1,...,a_n)` be the gram marix of a regular quadratic space.
+    Let `(a_1, \ldots, a_n)` be the gram marix of a regular quadratic space.
     Then Cassel's Hasse invariant is defined as
 
     .. MATH::
 
-        \prod_{i<j} (a_i,a_j)
+        \prod_{i<j} (a_i,a_j),
 
     where `(a_i,a_j)` denotes the Hilbert symbol.
```

Should `gram` be capitalized to `Gram`?

`if F!=QQ:` -> `if F is not QQ:`

Error messages should start with a lowercase letter.

The `assert all()` does not need the list comprehension, so you just need

```
assert all((a*d).valuation(p) % 2 == 1 for p in Pprime)
```

Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.



---

archive/issue_comments_356180.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 tscrim]:\n> A few little things:\n> Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.\n\n\nI believe that in this way it is easier to discover.\nWith `QuadraticForm` + autocomplete. \nAn alternative would be to access this functionality via\n`QuadraticForm` directly?",
    "created_at": "2019-11-08T20:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356180",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:5'></a>Replying to [comment:4 tscrim]:
> A few little things:
> Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.


I believe that in this way it is easier to discover.
With `QuadraticForm` + autocomplete. 
An alternative would be to access this functionality via
`QuadraticForm` directly?



---

archive/issue_comments_356181.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 sbrandhorst]:\n> Replying to [comment:4 tscrim]:\n> > A few little things:\n> > Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.\n\n> \n> I believe that in this way it is easier to discover.\n> With `QuadraticForm` + autocomplete. \n> An alternative would be to access this functionality via\n> `QuadraticForm` directly?\n\n\nTo me, that is not a good enough reason to break convention (in fact, to me and how I normally tell people to find via autocomplete, this would be harder to find because I know it would be a function). The other alternative would be as you said: attach it as either a ``@`staticmethod` or a method to `QuadraticForm`.",
    "created_at": "2019-11-08T21:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356181",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Replying to [comment:5 sbrandhorst]:
> Replying to [comment:4 tscrim]:
> > A few little things:
> > Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.

> 
> I believe that in this way it is easier to discover.
> With `QuadraticForm` + autocomplete. 
> An alternative would be to access this functionality via
> `QuadraticForm` directly?


To me, that is not a good enough reason to break convention (in fact, to me and how I normally tell people to find via autocomplete, this would be harder to find because I know it would be a function). The other alternative would be as you said: attach it as either a ``@`staticmethod` or a method to `QuadraticForm`.



---

archive/issue_comments_356182.json:
```json
{
    "body": "<a id='comment:7'></a>What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.\nSo the syntax would be\n`Quadraticform(QQ,invariants=[....])`\nor\n`Quadraticform(QQ,rk,det,P,signatures)`?\nAfter all we are constructing a single quadratic form from some input?",
    "created_at": "2019-11-08T22:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356182",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:7'></a>What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
So the syntax would be
`Quadraticform(QQ,invariants=[....])`
or
`Quadraticform(QQ,rk,det,P,signatures)`?
After all we are constructing a single quadratic form from some input?



---

archive/issue_comments_356183.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 sbrandhorst]:\n> What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.\n> So the syntax would be\n> `Quadraticform(QQ,invariants=[....])`\n> or\n> `Quadraticform(QQ,rk,det,P,signatures)`?\n> After all we are constructing a single quadratic form from some input?\n\n\nEither one of those options would be much better IMO. It also means there is precisely one place in the documentation and code that people should go-to/use.",
    "created_at": "2019-11-08T22:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356183",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Replying to [comment:7 sbrandhorst]:
> What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
> So the syntax would be
> `Quadraticform(QQ,invariants=[....])`
> or
> `Quadraticform(QQ,rk,det,P,signatures)`?
> After all we are constructing a single quadratic form from some input?


Either one of those options would be much better IMO. It also means there is precisely one place in the documentation and code that people should go-to/use.



---

archive/issue_comments_356184.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-11-10T20:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356185.json:
```json
{
    "body": "<a id='comment:10'></a>I did it as `quadratic_form_from_invariants`.\n\n---\nNew commits:",
    "created_at": "2019-11-10T20:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356185",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:10'></a>I did it as `quadratic_form_from_invariants`.

---
New commits:



---

archive/issue_events_061193.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-11-10T21:34:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24108#event-61193"
}
```



---

archive/issue_comments_356186.json:
```json
{
    "body": "<a id='comment:11'></a>Thank you. One last thing:\n\n```\n-    ALGORITHM::\n+    ALGORITHM:\n \n-        We follow [Kir2016]_.\n+    We follow [Kir2016]_.\n```\nOnce done, you can set a positive review on my behalf.",
    "created_at": "2019-11-10T21:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356186",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>Thank you. One last thing:

```
-    ALGORITHM::
+    ALGORITHM:
 
-        We follow [Kir2016]_.
+    We follow [Kir2016]_.
```
Once done, you can set a positive review on my behalf.



---

archive/issue_comments_356187.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-11-11T08:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356188.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-11T08:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356188",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061194.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-16T20:15:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24108#event-61194"
}
```



---

archive/issue_comments_356189.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-16T20:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24108#issuecomment-356189",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
