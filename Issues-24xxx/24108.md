# Issue 24108: quadratic_form_from_invariants()

archive/issues_023871.json:
```json
{
    "body": "This is algorithm 3.4.3 from Markus Kirschmer's \"Definite quadratic and hermitian forms with small class number\"  It returns a global quadratic form corresponding to a given set of local invariants. \n\n**CC:**  mroy sbrudzin jduque\n\n**Keywords:** sd90\n\n**Branch/Commit:** [afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Simon Brandhorst\n\nIssue created by migration from https://trac.sagemath.org/ticket/24108\n\n",
    "closed_at": "2019-11-16T20:15:56Z",
    "created_at": "2017-10-25T21:05:40Z",
    "labels": [
        "component: quadratic forms",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "title": "quadratic_form_from_invariants()",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/24108",
    "user": "https://github.com/annahaensch"
}
```
This is algorithm 3.4.3 from Markus Kirschmer's "Definite quadratic and hermitian forms with small class number"  It returns a global quadratic form corresponding to a given set of local invariants. 

**CC:**  mroy sbrudzin jduque

**Keywords:** sd90

**Branch/Commit:** [afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)

**Reviewer:** Travis Scrimshaw

**Author:** Simon Brandhorst

Issue created by migration from https://trac.sagemath.org/ticket/24108





---

archive/issue_comments_367194.json:
```json
{
    "body": "**Changing author** from \"mroy, sbrudzin, jduque\" to \"annahaensch, mroy, sbrudzin, jduque\".",
    "created_at": "2017-10-25T21:06:04Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367194",
    "user": "https://github.com/annahaensch"
}
```

**Changing author** from "mroy, sbrudzin, jduque" to "annahaensch, mroy, sbrudzin, jduque".



---

archive/issue_comments_367195.json:
```json
{
    "body": "**Branch:** [u/sbrandhorst/quadratic_form_from_invariants__](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/quadratic_form_from_invariants__)",
    "created_at": "2019-10-15T16:29:48Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367195",
    "user": "https://github.com/simonbrandhorst"
}
```

**Branch:** [u/sbrandhorst/quadratic_form_from_invariants__](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/quadratic_form_from_invariants__)



---

archive/issue_comments_367196.json:
```json
{
    "body": "**Changing author** from \"annahaensch, mroy, sbrudzin, jduque\" to \"Simon Brandhorst\".",
    "created_at": "2019-10-15T16:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367196",
    "user": "https://github.com/simonbrandhorst"
}
```

**Changing author** from "annahaensch, mroy, sbrudzin, jduque" to "Simon Brandhorst".



---

archive/issue_comments_367197.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc\">0952692</a></td><td><code>QuadraticFormFromInvariants first version</code></td></tr></table>\n",
    "created_at": "2019-10-15T16:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367197",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc">0952692</a></td><td><code>QuadraticFormFromInvariants first version</code></td></tr></table>




---

archive/issue_comments_367198.json:
```json
{
    "body": "**Commit:** [09526929769530789b71d41c00ba54b3674498cc](https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc)",
    "created_at": "2019-10-15T16:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367198",
    "user": "https://github.com/simonbrandhorst"
}
```

**Commit:** [09526929769530789b71d41c00ba54b3674498cc](https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc)



---

archive/issue_events_214224.json:
```json
{
    "actor": "https://github.com/simonbrandhorst",
    "created_at": "2019-10-15T16:30:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214224"
}
```



---

archive/issue_comments_367199.json:
```json
{
    "body": "<a id='comment:4'></a>\nA few little things:\n\n```diff\n-    Let `(a_1,...,a_n)` be the gram marix of a regular quadratic space.\n+    Let `(a_1, \\ldots, a_n)` be the gram marix of a regular quadratic space.\n     Then Cassel's Hasse invariant is defined as\n \n     .. MATH::\n \n-        \\prod_{i<j} (a_i,a_j)\n+        \\prod_{i<j} (a_i,a_j),\n \n     where `(a_i,a_j)` denotes the Hilbert symbol.\n```\n\nShould `gram` be capitalized to `Gram`?\n\n`if F!=QQ:` -> `if F is not QQ:`\n\nError messages should start with a lowercase letter.\n\nThe `assert all()` does not need the list comprehension, so you just need\n\n```\nassert all((a*d).valuation(p) % 2 == 1 for p in Pprime)\n```\n\nWhy is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.",
    "created_at": "2019-11-08T02:11:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367199",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
A few little things:

```diff
-    Let `(a_1,...,a_n)` be the gram marix of a regular quadratic space.
+    Let `(a_1, \ldots, a_n)` be the gram marix of a regular quadratic space.
     Then Cassel's Hasse invariant is defined as
 
     .. MATH::
 
-        \prod_{i<j} (a_i,a_j)
+        \prod_{i<j} (a_i,a_j),
 
     where `(a_i,a_j)` denotes the Hilbert symbol.
```

Should `gram` be capitalized to `Gram`?

`if F!=QQ:` -> `if F is not QQ:`

Error messages should start with a lowercase letter.

The `assert all()` does not need the list comprehension, so you just need

```
assert all((a*d).valuation(p) % 2 == 1 for p in Pprime)
```

Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.



---

archive/issue_comments_367200.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [tscrim](#comment%3A4):\n> A few little things:\n> Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.\n\n\nI believe that in this way it is easier to discover.\nWith `QuadraticForm` + autocomplete. \nAn alternative would be to access this functionality via\n`QuadraticForm` directly?",
    "created_at": "2019-11-08T20:36:18Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367200",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:5'></a>
Replying to [tscrim](#comment%3A4):
> A few little things:
> Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.


I believe that in this way it is easier to discover.
With `QuadraticForm` + autocomplete. 
An alternative would be to access this functionality via
`QuadraticForm` directly?



---

archive/issue_comments_367201.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [sbrandhorst](#comment%3A5):\n> Replying to [tscrim](#comment%3A4):\n> > A few little things:\n> > Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.\n\n> \n> I believe that in this way it is easier to discover.\n> With `QuadraticForm` + autocomplete. \n> An alternative would be to access this functionality via\n> `QuadraticForm` directly?\n\n\nTo me, that is not a good enough reason to break convention (in fact, to me and how I normally tell people to find via autocomplete, this would be harder to find because I know it would be a function). The other alternative would be as you said: attach it as either a `@staticmethod` or a method to `QuadraticForm`.",
    "created_at": "2019-11-08T21:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367201",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Replying to [sbrandhorst](#comment%3A5):
> Replying to [tscrim](#comment%3A4):
> > A few little things:
> > Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.

> 
> I believe that in this way it is easier to discover.
> With `QuadraticForm` + autocomplete. 
> An alternative would be to access this functionality via
> `QuadraticForm` directly?


To me, that is not a good enough reason to break convention (in fact, to me and how I normally tell people to find via autocomplete, this would be harder to find because I know it would be a function). The other alternative would be as you said: attach it as either a `@staticmethod` or a method to `QuadraticForm`.



---

archive/issue_comments_367202.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhat I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.\nSo the syntax would be\n`Quadraticform(QQ,invariants=[....])`\nor\n`Quadraticform(QQ,rk,det,P,signatures)`?\nAfter all we are constructing a single quadratic form from some input?",
    "created_at": "2019-11-08T22:26:38Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367202",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:7'></a>
What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
So the syntax would be
`Quadraticform(QQ,invariants=[....])`
or
`Quadraticform(QQ,rk,det,P,signatures)`?
After all we are constructing a single quadratic form from some input?



---

archive/issue_comments_367203.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [sbrandhorst](#comment%3A7):\n> What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.\n> So the syntax would be\n> `Quadraticform(QQ,invariants=[....])`\n> or\n> `Quadraticform(QQ,rk,det,P,signatures)`?\n> After all we are constructing a single quadratic form from some input?\n\n\nEither one of those options would be much better IMO. It also means there is precisely one place in the documentation and code that people should go-to/use.",
    "created_at": "2019-11-08T22:29:25Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367203",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Replying to [sbrandhorst](#comment%3A7):
> What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
> So the syntax would be
> `Quadraticform(QQ,invariants=[....])`
> or
> `Quadraticform(QQ,rk,det,P,signatures)`?
> After all we are constructing a single quadratic form from some input?


Either one of those options would be much better IMO. It also means there is precisely one place in the documentation and code that people should go-to/use.



---

archive/issue_comments_367204.json:
```json
{
    "body": "**Changing commit** from \"[09526929769530789b71d41c00ba54b3674498cc](https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc)\" to \"[887ca6a38642eb6eea4a8a7692a1b3139e65b112](https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112)\".",
    "created_at": "2019-11-10T20:33:23Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[09526929769530789b71d41c00ba54b3674498cc](https://github.com/sagemath/sagetrac-mirror/commit/09526929769530789b71d41c00ba54b3674498cc)" to "[887ca6a38642eb6eea4a8a7692a1b3139e65b112](https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112)".



---

archive/issue_comments_367205.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112\">887ca6a</a></td><td><code>small improvements for quadratic_form_from_invariants</code></td></tr></table>\n",
    "created_at": "2019-11-10T20:33:23Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112">887ca6a</a></td><td><code>small improvements for quadratic_form_from_invariants</code></td></tr></table>




---

archive/issue_comments_367206.json:
```json
{
    "body": "<a id='comment:10'></a>\nI did it as `quadratic_form_from_invariants`.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112\">887ca6a</a></td><td><code>small improvements for quadratic_form_from_invariants</code></td></tr></table>\n",
    "created_at": "2019-11-10T20:33:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367206",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:10'></a>
I did it as `quadratic_form_from_invariants`.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112">887ca6a</a></td><td><code>small improvements for quadratic_form_from_invariants</code></td></tr></table>




---

archive/issue_events_214225.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-11-10T21:34:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214225"
}
```



---

archive/issue_events_214226.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-11-10T21:34:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214226"
}
```



---

archive/issue_comments_367207.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2019-11-10T21:34:46Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367207",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_367208.json:
```json
{
    "body": "<a id='comment:11'></a>\nThank you. One last thing:\n\n```\n-    ALGORITHM::\n+    ALGORITHM:\n \n-        We follow [Kir2016]_.\n+    We follow [Kir2016]_.\n```\nOnce done, you can set a positive review on my behalf.",
    "created_at": "2019-11-10T21:34:46Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367208",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Thank you. One last thing:

```
-    ALGORITHM::
+    ALGORITHM:
 
-        We follow [Kir2016]_.
+    We follow [Kir2016]_.
```
Once done, you can set a positive review on my behalf.



---

archive/issue_comments_367209.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d\">afa1d73</a></td><td><code>docs</code></td></tr></table>\n",
    "created_at": "2019-11-11T08:01:07Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d">afa1d73</a></td><td><code>docs</code></td></tr></table>




---

archive/issue_comments_367210.json:
```json
{
    "body": "**Changing commit** from \"[887ca6a38642eb6eea4a8a7692a1b3139e65b112](https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112)\" to \"[afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)\".",
    "created_at": "2019-11-11T08:01:07Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[887ca6a38642eb6eea4a8a7692a1b3139e65b112](https://github.com/sagemath/sagetrac-mirror/commit/887ca6a38642eb6eea4a8a7692a1b3139e65b112)" to "[afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)".



---

archive/issue_events_214227.json:
```json
{
    "actor": "https://github.com/simonbrandhorst",
    "created_at": "2019-11-11T08:01:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214227"
}
```



---

archive/issue_events_214228.json:
```json
{
    "actor": "https://github.com/simonbrandhorst",
    "created_at": "2019-11-11T08:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214228"
}
```



---

archive/issue_events_214229.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-16T20:15:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214229"
}
```



---

archive/issue_events_214230.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "94b6adde10f5070c4a722df089151403de818431",
    "created_at": "2019-11-16T20:15:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24108#event-214230"
}
```



---

archive/issue_comments_367211.json:
```json
{
    "body": "**Changing branch** from \"[u/sbrandhorst/quadratic_form_from_invariants__](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/quadratic_form_from_invariants__)\" to \"[afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)\".",
    "created_at": "2019-11-16T20:15:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24108#issuecomment-367211",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/sbrandhorst/quadratic_form_from_invariants__](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/quadratic_form_from_invariants__)" to "[afa1d731ca5996c0cc0115bf144ca4b10db3e70d](https://github.com/sagemath/sagetrac-mirror/commit/afa1d731ca5996c0cc0115bf144ca4b10db3e70d)".
