# Issue 24113: Add test for cactus graph

archive/issues_023876.json:
```json
{
    "assignees": [],
    "body": "This patch adds a function to check if a graph is cactus graph.\n\n\nCC:  @dcoudert\n\nBranch/Commit: **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**\n\nReviewer: **David Coudert**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24113_\n\n",
    "closed_at": "2017-11-01T18:07:25Z",
    "created_at": "2017-10-26T12:49:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add test for cactus graph",
    "type": "issue",
    "updated_at": "2017-11-01T18:07:25Z",
    "url": "https://github.com/sagemath/sage/issues/24113",
    "user": "https://github.com/jm58660"
}
```
This patch adds a function to check if a graph is cactus graph.


CC:  @dcoudert

Branch/Commit: **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**

Reviewer: **David Coudert**

Author: **Jori MÃ¤ntysalo**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/24113_





---

archive/issue_events_336269.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-26T12:49:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336269"
}
```



---

archive/issue_events_336270.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-26T12:49:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336270"
}
```



---

archive/issue_events_336271.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-26T12:49:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336271"
}
```



---

archive/issue_events_336272.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-26T12:49:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336272"
}
```



---

archive/issue_comments_364627.json:
```json
{
    "body": "Branch: **[u/jmantysalo/cactus](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cactus)**",
    "created_at": "2017-10-26T12:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364627",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/cactus](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cactus)**



---

archive/issue_events_336273.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-26T12:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336273"
}
```



---

archive/issue_comments_364628.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2\"><code>3e8a5f6</code></a></td><td><code>Add is_cactus().</code></td></tr></table>\n",
    "created_at": "2017-10-26T12:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364628",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2"><code>3e8a5f6</code></a></td><td><code>Add is_cactus().</code></td></tr></table>




---

archive/issue_comments_364629.json:
```json
{
    "body": "Commit: **[`3e8a5f6`](https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2)**",
    "created_at": "2017-10-26T12:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364629",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`3e8a5f6`](https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2)**



---

archive/issue_comments_364630.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhy are you testing if the graph is circular planar ? This is much more expensive than the other tests.\n\nMake `cutverts` a set to speed up the test `v not in cutverts`.\n\nIn the examples/tests, you could take a 2 x 3 grid graph. Removing any edge, you get a cactus.\n\nThe empty graph is a cactus.\n\nLoops are of course allowed here, but what about multiple edges ?",
    "created_at": "2017-10-26T13:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364630",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Why are you testing if the graph is circular planar ? This is much more expensive than the other tests.

Make `cutverts` a set to speed up the test `v not in cutverts`.

In the examples/tests, you could take a 2 x 3 grid graph. Removing any edge, you get a cactus.

The empty graph is a cactus.

Loops are of course allowed here, but what about multiple edges ?



---

archive/issue_comments_364631.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a\"><code>aa1a93d</code></a></td><td><code>Use frozenset.</code></td></tr></table>\n",
    "created_at": "2017-10-26T13:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364631",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a"><code>aa1a93d</code></a></td><td><code>Use frozenset.</code></td></tr></table>




---

archive/issue_comments_364632.json:
```json
{
    "body": "Changed commit from **[`3e8a5f6`](https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2)** to **[`aa1a93d`](https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a)**",
    "created_at": "2017-10-26T13:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364632",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e8a5f6`](https://github.com/sagemath/sagetrac-mirror/commit/3e8a5f619b7245a27a4fede907f0497e584476b2)** to **[`aa1a93d`](https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a)**



---

archive/issue_comments_364633.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@dcoudert](#comment:3):\n> Why are you testing if the graph is circular planar ? This is much more expensive than the other tests.\n\nSee the last test `Graph('Fli@?')`, it will fail if you remove the test for circular planarity.\n\n> Make `cutverts` a set to speed up the test `v not in cutverts`.\n\nGood point, done.\n\n> In the examples/tests, you could take a 2 x 3 grid graph. Removing any edge, you get a cactus.\n\nHmm... At least some example with \"tail\" would be good.\n\n> The empty graph is a cactus.\n\n?? By this function, yes. Should it be? It is tested.\n\n> Loops are of course allowed here, but what about multiple edges ?\n\nI don't know. Maybe just `_scream_if_not_simple()`?",
    "created_at": "2017-10-26T13:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364633",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@dcoudert](#comment:3):
> Why are you testing if the graph is circular planar ? This is much more expensive than the other tests.

See the last test `Graph('Fli@?')`, it will fail if you remove the test for circular planarity.

> Make `cutverts` a set to speed up the test `v not in cutverts`.

Good point, done.

> In the examples/tests, you could take a 2 x 3 grid graph. Removing any edge, you get a cactus.

Hmm... At least some example with "tail" would be good.

> The empty graph is a cactus.

?? By this function, yes. Should it be? It is tested.

> Loops are of course allowed here, but what about multiple edges ?

I don't know. Maybe just `_scream_if_not_simple()`?



---

archive/issue_comments_364634.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> > Why are you testing if the graph is circular planar ? This is much more expensive than the other tests.\n\n> \n> See the last test `Graph('Fli@?')`, it will fail if you remove the test for circular planarity.\n\nRight, but can we think to a faster test ?\n\n> > The empty graph is a cactus.\n\n> \n> ?? By this function, yes. Should it be? It is tested.\n\nI don't know if it should be, but it is what your method answers.\n\n> > Loops are of course allowed here, but what about multiple edges ?\n\n> I don't know. Maybe just `_scream_if_not_simple()`?\n\nthat would ease the stuff",
    "created_at": "2017-10-26T13:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364634",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

> > Why are you testing if the graph is circular planar ? This is much more expensive than the other tests.

> 
> See the last test `Graph('Fli@?')`, it will fail if you remove the test for circular planarity.

Right, but can we think to a faster test ?

> > The empty graph is a cactus.

> 
> ?? By this function, yes. Should it be? It is tested.

I don't know if it should be, but it is what your method answers.

> > Loops are of course allowed here, but what about multiple edges ?

> I don't know. Maybe just `_scream_if_not_simple()`?

that would ease the stuff



---

archive/issue_comments_364635.json:
```json
{
    "body": "Changed commit from **[`aa1a93d`](https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a)** to **[`540ddd4`](https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7)**",
    "created_at": "2017-10-27T08:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa1a93d`](https://github.com/sagemath/sagetrac-mirror/commit/aa1a93d0a6933388e855d18b407930f6750ac13a)** to **[`540ddd4`](https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7)**



---

archive/issue_comments_364636.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7\"><code>540ddd4</code></a></td><td><code>Add example etc.</code></td></tr></table>\n",
    "created_at": "2017-10-27T08:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7"><code>540ddd4</code></a></td><td><code>Add example etc.</code></td></tr></table>




---

archive/issue_events_336274.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-27T08:49:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336274"
}
```



---

archive/issue_events_336275.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-27T08:49:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336275"
}
```



---

archive/issue_comments_364637.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFirst, this does not work. See `Graph('Gx?HxC')`. My bad.\n\nI added an example and check for being simple.\n\nAs the empty graph already is, say, planar, I see no reason not to define it as cactus too.\n\nThen, about the speed... Testing for planarity is `O(n)`, as is adding the universal vertex to check being outer planar. We can assume that the graph is very sparse, as we can first check if there are so many edges that the graph can not be cactus. We should start from a vertex of degree at least three, make a circuit and remove edges in the circuit. Then... duh, back to the drawing board.",
    "created_at": "2017-10-27T08:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364637",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">comment:8</div>

First, this does not work. See `Graph('Gx?HxC')`. My bad.

I added an example and check for being simple.

As the empty graph already is, say, planar, I see no reason not to define it as cactus too.

Then, about the speed... Testing for planarity is `O(n)`, as is adding the universal vertex to check being outer planar. We can assume that the graph is very sparse, as we can first check if there are so many edges that the graph can not be cactus. We should start from a vertex of degree at least three, make a circuit and remove edges in the circuit. Then... duh, back to the drawing board.



---

archive/issue_comments_364638.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK.\n\nCould you add in file `isgci.py` the line\n\n```\ngraph_classes.Cactus = GraphClass(\"Cactus\", \"gc_108\", recognition_function = lambda x:x.is_cactus())\n```\n[http://www.graphclasses.org/classes/gc_108.html](http://www.graphclasses.org/classes/gc_108.html)",
    "created_at": "2017-10-27T16:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364638",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

OK.

Could you add in file `isgci.py` the line

```
graph_classes.Cactus = GraphClass("Cactus", "gc_108", recognition_function = lambda x:x.is_cactus())
```
[http://www.graphclasses.org/classes/gc_108.html](http://www.graphclasses.org/classes/gc_108.html)



---

archive/issue_comments_364639.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c520791183fbdbd2364baabedefc96ccc7e14b19\"><code>c520791</code></a></td><td><code>Add to isgci.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3\"><code>af34ece</code></a></td><td><code>Merge branch 'u/jmantysalo/cactus' of git://trac.sagemath.org/sage into t/24113/cactus</code></td></tr></table>\n",
    "created_at": "2017-10-27T17:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364639",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c520791183fbdbd2364baabedefc96ccc7e14b19"><code>c520791</code></a></td><td><code>Add to isgci.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3"><code>af34ece</code></a></td><td><code>Merge branch 'u/jmantysalo/cactus' of git://trac.sagemath.org/sage into t/24113/cactus</code></td></tr></table>




---

archive/issue_comments_364640.json:
```json
{
    "body": "Changed commit from **[`540ddd4`](https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7)** to **[`af34ece`](https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3)**",
    "created_at": "2017-10-27T17:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364640",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`540ddd4`](https://github.com/sagemath/sagetrac-mirror/commit/540ddd4d21b17d2531418597530da104577568e7)** to **[`af34ece`](https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3)**



---

archive/issue_comments_364641.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPerfect.",
    "created_at": "2017-10-27T20:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364641",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

Perfect.



---

archive/issue_comments_364642.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2017-10-27T20:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364642",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_events_336276.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-27T20:59:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336276"
}
```



---

archive/issue_events_336277.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-27T20:59:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336277"
}
```



---

archive/issue_comments_364643.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nNo no! It still does not work, I just added the entry to isgsi that should be added in any case.",
    "created_at": "2017-10-28T05:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364643",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">comment:12</div>

No no! It still does not work, I just added the entry to isgsi that should be added in any case.



---

archive/issue_events_336278.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-28T05:32:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336278"
}
```



---

archive/issue_events_336279.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-28T05:32:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336279"
}
```



---

archive/issue_comments_364644.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOK, let's go back to the definitions.\n\nIn a cactus graph, a biconnected component is either a cycle or a bridge.\nNow, consider the faces of the graph (`self.faces()`). We must have one face containing all vertices, and then each block that is not a bridge must be a face. So the number of faces must be 1 plus the number of blocks of order > 2 (blocks that are not bridges). So we get:\n\n```\n    self._scream_if_not_simple()\n    if not self.order():\n        return True\n    if not self.is_connected():\n        return False\n    B,C = self.blocks_and_cut_vertices()\n    # the number of faces is 1 plus the number of blocks of order > 2\n    return len(self.faces()) == sum(1 for b in B if len(b) > 2) + 1\n```\nHere I consider that a graph made of two cycles connected by a path is a cactus. If this is compatible with the definition (i.e., considering that a bridge is a C2), then above code do the job.",
    "created_at": "2017-10-28T08:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364644",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

OK, let's go back to the definitions.

In a cactus graph, a biconnected component is either a cycle or a bridge.
Now, consider the faces of the graph (`self.faces()`). We must have one face containing all vertices, and then each block that is not a bridge must be a face. So the number of faces must be 1 plus the number of blocks of order > 2 (blocks that are not bridges). So we get:

```
    self._scream_if_not_simple()
    if not self.order():
        return True
    if not self.is_connected():
        return False
    B,C = self.blocks_and_cut_vertices()
    # the number of faces is 1 plus the number of blocks of order > 2
    return len(self.faces()) == sum(1 for b in B if len(b) > 2) + 1
```
Here I consider that a graph made of two cycles connected by a path is a cactus. If this is compatible with the definition (i.e., considering that a bridge is a C2), then above code do the job.



---

archive/issue_comments_364645.json:
```json
{
    "body": "Changed commit from **[`af34ece`](https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3)** to **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**",
    "created_at": "2017-10-28T16:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af34ece`](https://github.com/sagemath/sagetrac-mirror/commit/af34ecebbcb4d6809e356895eff1f6d8f17b62f3)** to **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**



---

archive/issue_comments_364646.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850\"><code>8b789f6</code></a></td><td><code>Working code.</code></td></tr></table>\n",
    "created_at": "2017-10-28T16:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850"><code>8b789f6</code></a></td><td><code>Working code.</code></td></tr></table>




---

archive/issue_events_336280.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-28T16:26:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336280"
}
```



---

archive/issue_events_336281.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-10-28T16:26:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336281"
}
```



---

archive/issue_comments_364647.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI also did a test code with `blocks_and_cut_vertices`, checking that all blocks are cycles or single points. Here I used your code slightly modified.\n\nReady for review now.",
    "created_at": "2017-10-28T16:26:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364647",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">comment:15</div>

I also did a test code with `blocks_and_cut_vertices`, checking that all blocks are cycles or single points. Here I used your code slightly modified.

Ready for review now.



---

archive/issue_events_336282.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-28T17:11:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336282"
}
```



---

archive/issue_events_336283.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-28T17:11:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336283"
}
```



---

archive/issue_comments_364648.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt's true that we can also check that each block is isomorphic to a cycle of the same order, but it's not needed. The current implementation do perfectly the job.\n\nGood to go.",
    "created_at": "2017-10-28T17:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364648",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

It's true that we can also check that each block is isomorphic to a cycle of the same order, but it's not needed. The current implementation do perfectly the job.

Good to go.



---

archive/issue_comments_364649.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@dcoudert](#comment:16):\n\n> Good to go.\n\nSo do we.\n\nWould be nice exercise to make a faster function. If the function searching blocks founds just one block that is not cycle nor a single vertex, it could instantly return `False`.",
    "created_at": "2017-10-28T17:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364649",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@dcoudert](#comment:16):

> Good to go.

So do we.

Would be nice exercise to make a faster function. If the function searching blocks founds just one block that is not cycle nor a single vertex, it could instantly return `False`.



---

archive/issue_comments_364650.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nsure, but much more complex to code for a not so critical method.... would be better to speed up the `blocks_and_cut_vertices` and the `faces` methods.",
    "created_at": "2017-10-29T00:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364650",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">comment:18</div>

sure, but much more complex to code for a not so critical method.... would be better to speed up the `blocks_and_cut_vertices` and the `faces` methods.



---

archive/issue_events_336284.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-01T18:07:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336284"
}
```



---

archive/issue_events_336285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9896ca2282f95a3a8c8cf57e4d1d71b67d8441e5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-11-01T18:07:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24113#event-336285"
}
```



---

archive/issue_comments_364651.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/cactus](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cactus)** to **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**",
    "created_at": "2017-11-01T18:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24113",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24113#issuecomment-364651",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/cactus](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cactus)** to **[`8b789f6`](https://github.com/sagemath/sagetrac-mirror/commit/8b789f6e2f47f7bd9432ad1a85c97cc340d54850)**
